{"version":3,"mappings":"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CR,mBAAsBA,GACtB,iBAAoBA,EACpB+/B,EAAW54B,aAAayR,EAAK5Y,GAC7B+/B,EAAWh5B,gBAAgB6R,GACjC,MACF,IAAK,OACL,IAAK,OACL,IAAK,OACL,IAAK,OACH,MAAQ5Y,GACR,mBAAsBA,GACtB,iBAAoBA,IACnB46C,MAAM56C,IACP,GAAKA,EACD+/B,EAAW54B,aAAayR,EAAK5Y,GAC7B+/B,EAAWh5B,gBAAgB6R,GAC/B,MACF,IAAK,UACL,IAAK,QACH,MAAQ5Y,GACR,mBAAsBA,GACtB,iBAAoBA,GACpB46C,MAAM56C,GACF+/B,EAAWh5B,gBAAgB6R,GAC3BmnB,EAAW54B,aAAayR,EAAK5Y,GACjC,MACF,IAAK,UACHuc,GAA0B,eAAgBwjB,GAC1CxjB,GAA0B,SAAUwjB,GACpCx5B,EAAqBw5B,EAAY,UAAW//B,GAC5C,MACF,IAAK,eACHqH,EACE04B,EACA,+BACA,gBACA//B,GAEF,MACF,IAAK,eACHqH,EACE04B,EACA,+BACA,gBACA//B,GAEF,MACF,IAAK,YACHqH,EACE04B,EACA,+BACA,aACA//B,GAEF,MACF,IAAK,YACHqH,EACE04B,EACA,+BACA,aACA//B,GAEF,MACF,IAAK,aACHqH,EACE04B,EACA,+BACA,cACA//B,GAEF,MACF,IAAK,YACHqH,EACE04B,EACA,+BACA,aACA//B,GAEF,MACF,IAAK,UACHqH,EACE04B,EACA,uCACA,WACA//B,GAEF,MACF,IAAK,UACHqH,EACE04B,EACA,uCACA,WACA//B,GAEF,MACF,IAAK,WACHqH,EACE04B,EACA,uCACA,YACA//B,GAEF,MACF,IAAK,KACHuG,EAAqBw5B,EAAY,KAAM//B,GACvC,MACF,IAAK,YACL,IAAK,cACH,MACF,WAEM,EAAI4Y,EAAIniB,SACT,MAAQmiB,EAAI,IAAM,MAAQA,EAAI,IAC9B,MAAQA,EAAI,IAAM,MAAQA,EAAI,KAG7BrS,EAAqBw5B,EADtBnnB,EAAMiiC,GAAQhwC,IAAI+N,IAAQA,EACa5Y,GAEhD,CACA,SAASwgC,GAAuBT,EAAYziC,EAAKsb,EAAK5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","names":["schedulerModule","exports","push","heap","node","index","length","a","parentIndex","parent","compare","peek","pop","first","last","halfLength","leftIndex","left","rightIndex","right","b","diff","sortIndex","id","advanceTimers","currentTime","timer","timerQueue","callback","startTime","expirationTime","taskQueue","handleTimeout","isHostTimeoutScheduled","isHostCallbackScheduled","isMessageLoopRunning","schedulePerformWorkUntilDeadline","firstTimer","requestHostTimeout","shouldYieldToHost","needsPaint","unstable_now","frameInterval","performWorkUntilDeadline","hasMoreWork","localClearTimeout","taskTimeoutID","isPerformingWork","previousPriorityLevel","currentPriorityLevel","currentTask","priorityLevel","continuationCallback","ms","localSetTimeout","performance","now","localPerformance","localDate","Date","initialTime","taskIdCounter","setTimeout","clearTimeout","localSetImmediate","setImmediate","MessageChannel","channel","port","port2","port1","onmessage","postMessage","unstable_IdlePriority","unstable_ImmediatePriority","unstable_LowPriority","unstable_NormalPriority","unstable_Profiling","unstable_UserBlockingPriority","unstable_cancelCallback","task","unstable_forceFrameRate","fps","console","error","Math","floor","unstable_getCurrentPriorityLevel","unstable_next","eventHandler","unstable_requestPaint","unstable_runWithPriority","unstable_scheduleCallback","options","delay","timeout","unstable_shouldYield","unstable_wrapCallback","parentPriorityLevel","apply","this","arguments","formatProdErrorMessage","code","url","encodeURIComponent","i","isValidContainer","nodeType","getNearestMountedFiber","fiber","nearestMounted","alternate","return","flags","tag","getSuspenseInstanceFromFiber","suspenseState","memoizedState","dehydrated","assertIsMounted","Error","findCurrentHostFiberImpl","child","sibling","getIteratorFn","maybeIterable","MAYBE_ITERATOR_SYMBOL","getComponentNameFromType","type","$$typeof","REACT_CLIENT_REFERENCE","displayName","name","REACT_FRAGMENT_TYPE","REACT_PROFILER_TYPE","REACT_STRICT_MODE_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_ACTIVITY_TYPE","REACT_PORTAL_TYPE","REACT_CONTEXT_TYPE","REACT_CONSUMER_TYPE","_context","REACT_FORWARD_REF_TYPE","innerType","render","REACT_MEMO_TYPE","REACT_LAZY_TYPE","_payload","_init","x","createCursor","defaultValue","current","cursor","valueStack","value","pushHostContainer","nextRootInstance","rootInstanceStackCursor","contextFiberStackCursor","contextStackCursor","documentElement","namespaceURI","getOwnHostContext","tagName","getChildHostContextProd","popHostContainer","pushHostContext","hostTransitionProviderCursor","context","JSCompiler_inline_result","popHostContext","HostTransitionContext","_currentValue","sharedNotPendingObject","setIsStrictModeForDevtools","newIsStrictMode","log$1","unstable_setDisableYieldValue","injectedHook","setStrictMode","rendererID","err","getHighestPriorityLanes","lanes","pendingSyncLanes","getNextLanes","root","wipLanes","rootHasPendingCommit","pendingLanes","nextLanes","suspendedLanes","pingedLanes","warmLanes","nonIdlePendingLanes","checkIfRootIsPrerendering","renderLanes","computeExpirationTime","lane","claimNextTransitionLane","nextTransitionLane","claimNextRetryLane","nextRetryLane","createLaneMap","initial","laneMap","markRootUpdated$1","updateLane","markSpawnedDeferredLane","spawnedLane","entangledLanes","spawnedLaneIndex","clz32","entanglements","markRootEntangled","rootEntangledLanes","index$6","getBumpedLaneForHydrationByLane","lanesToEventPriority","resolveUpdatePriority","updatePriority","ReactDOMSharedInternals","p","window","event","getEventPriority","detachDeletedInstance","internalInstanceKey","internalPropsKey","internalEventHandlersKey","internalEventHandlerListenersKey","internalEventHandlesSetKey","getClosestInstanceFromNode","targetNode","targetInst","parentNode","internalContainerInstanceKey","getParentSuspenseInstance","getInstanceFromNode","getNodeFromInstance","inst","stateNode","getResourcesFromRoot","resources","internalRootNodeResourcesKey","hoistableStyles","Map","hoistableScripts","markNodeAsHoistable","internalHoistableMarker","registerTwoPhaseEvent","registrationName","dependencies","registerDirectEvent","registrationNameDependencies","allNativeEvents","add","setValueForAttribute","attributeName","hasOwnProperty","call","validatedAttributeNameCache","illegalAttributeNameCache","VALID_ATTRIBUTE_NAME_REGEX","test","removeAttribute","prefix$8","toLowerCase","slice","setAttribute","setValueForKnownAttribute","setValueForNamespacedAttribute","namespace","setAttributeNS","describeBuiltInComponentFrame","prefix","match","stack","trim","suffix","indexOf","describeNativeComponentFrame","fn","construct","reentry","previousPrepareStackTrace","prepareStackTrace","RunInRootFrame","DetermineComponentFrameRoot","Fake","Object","defineProperty","prototype","set","Reflect","control","x$9","x$10","catch","sample","namePropDescriptor","getOwnPropertyDescriptor","configurable","_RunInRootFrame$Deter","sampleStack","controlStack","sampleLines","split","controlLines","includes","frame","replace","describeFiber","getStackByFiberInDevAndProd","workInProgress","info","message","getToStringValue","isCheckable","elem","nodeName","track","_valueTracker","valueField","descriptor","constructor","currentValue","get","enumerable","getValue","setValue","stopTracking","trackValueOnNode","updateValueIfChanged","tracker","lastValue","checked","getActiveElement","doc","document","activeElement","body","e","escapeSelectorAttributeValueInsideDoubleQuotes","escapeSelectorAttributeValueInsideDoubleQuotesRegex","ch","charCodeAt","toString","updateInput","element","lastDefaultValue","defaultChecked","setDefaultValue","initInput","isHydrating","ownerDocument","updateOptions","multiple","propValue","setDefaultSelected","selected","defaultSelected","disabled","updateTextarea","initTextarea","children","isArrayImpl","textContent","setTextContent","text","firstChild","lastChild","nodeValue","setValueForStyle","style","styleName","isCustomProperty","setProperty","cssFloat","unitlessNumbers","has","setValueForStyles","styles","prevStyles","styleName$16","styleName$17","isCustomElement","sanitizeURL","isJavaScriptProtocol","getEventTarget","nativeEvent","target","srcElement","correspondingUseElement","restoreStateOfTarget","internalInstance","props","querySelectorAll","otherNode","form","otherProps","batchedUpdates$1","isInsideEventHandler","restoreTarget","restoreQueue","flushSyncWork$1","getListener","getData","fallbackText","start","end","startValue","startText","startLength","endValue","endLength","minEnd","getEventCharCode","keyCode","charCode","functionThatReturnsTrue","functionThatReturnsFalse","createSyntheticEvent","Interface","SyntheticBaseEvent","reactName","reactEventType","nativeEventTarget","propName","_reactName","_targetInst","currentTarget","isDefaultPrevented","defaultPrevented","returnValue","isPropagationStopped","assign","preventDefault","stopPropagation","cancelBubble","persist","isPersistent","modifierStateGetter","keyArg","getModifierState","modifierKeyToProp","getEventModifierState","isFallbackCompositionEnd","domEventName","END_KEYCODES","getDataFromCustomEvent","detail","data","isTextInputElement","supportedInputTypes","createAndAccumulateChangeEvent","dispatchQueue","accumulateTwoPhaseListeners","SyntheticEvent","listeners","runEventInBatch","processDispatchQueue","getInstIfValueChanged","getTargetInstForChangeEvent","stopWatchingForValueChange","activeElement$1","detachEvent","handlePropertyChange","activeElementInst$1","propertyName","handleEventsForInputEventPolyfill","attachEvent","getTargetInstForInputEventPolyfill","getTargetInstForClickEvent","getTargetInstForInputOrChangeEvent","shallowEqual","objA","objB","objectIs","keysA","keys","keysB","currentKey","getLeafNode","getNodeForCharacterOffset","offset","nodeEnd","nextSibling","containsNode","outerNode","innerNode","contains","compareDocumentPosition","getActiveElementDeep","containerInfo","defaultView","HTMLIFrameElement","contentWindow","location","href","hasSelectionCapabilities","contentEditable","constructSelectEvent","mouseDown","selectionStart","selectionEnd","anchorNode","getSelection","anchorOffset","focusNode","focusOffset","lastSelection","activeElementInst","makePrefixMap","styleProp","eventName","prefixes","getVendorPrefixedEventName","prefixedEventNames","vendorPrefixes","prefixMap","registerSimpleEvent","topLevelEventsToReactNames","createCapturedValueAtFiber","source","existing","CapturedStacks","finishQueueingConcurrentUpdates","endIndex","concurrentQueuesIndex","concurrentlyUpdatedLanes","concurrentQueues","queue","update","pending","next","markUpdateLaneFromFiberToRoot","enqueueUpdate$1","enqueueConcurrentHookUpdate","getRootForUpdatedFiber","enqueueConcurrentRenderForLane","sourceFiber","isHidden","childLanes","_visibility","hiddenUpdates","nestedUpdateCount","rootWithNestedUpdates","FiberNode","pendingProps","key","mode","elementType","refCleanup","ref","updateQueue","memoizedProps","subtreeFlags","deletions","createFiberImplClass","shouldConstruct","Component","isReactComponent","createWorkInProgress","firstContext","resetWorkInProgress","createFiberFromTypeAndProps","owner","fiberTag","hostContext","itemProp","precedence","rel","onLoad","onError","async","src","isHostHoistableType","createFiberFromFragment","REACT_PROVIDER_TYPE","elements","createFiberFromText","content","createFiberFromPortal","portal","pendingChildren","implementation","pushTreeFork","totalChildren","forkStack","forkStackIndex","treeForkCount","treeForkProvider","pushTreeId","idStack","idStackIndex","treeContextId","treeContextOverflow","treeContextProvider","baseIdWithLeadingBit","baseLength","numberOfOverflowBits","pushMaterializedTreeId","popTreeContext","throwOnHydrationMismatch","queueHydrationError","HydrationMismatchException","prepareToHydrateHostInstance","instance","listenToNonDelegatedEvent","mediaEventTypes","suppressHydrationWarning","checkForUnmatchedText","popover","onScroll","onScrollEnd","onClick","onclick","noop$1","popToNextHostParent","hydrationParentFiber","rootOrSingletonContext","popHydrationState","JSCompiler_temp","shouldSetTextContent","nextHydratableInstance","getNextHydratable","isSingletonScope","previousHydratableOnEnteringScopedSingleton","resetHydrationState","upgradeHydrationErrorsToRecoverable","queuedErrors","hydrationErrors","workInProgressRootRecoverableErrors","pushProvider","providerFiber","nextValue","valueCursor","popProvider","scheduleContextWorkOnParentPath","propagationRoot","propagateContextChanges","contexts","forcePropagateEntireTree","list","nextFiber","dependency","propagateParentContextChanges","isInsidePropagationBailout","currentParent","checkIfContextChanged","currentDependencies","memoizedValue","prepareToReadContext","currentlyRenderingFiber$1","lastContextDependency","readContext","readContextForConsumer","readContextDuringReconciliation","consumer","createCache","controller","AbortControllerLocal","refCount","releaseCache","cache","scheduleCallback$2","NormalPriority","abort","pingEngtangledActionScope","currentEntangledPendingCount","currentEntangledListeners","currentEntangledActionThenable","status","currentEntangledLane","peekCacheFromPool","cacheResumedFromPreviousRender","resumedCache","workInProgressRoot","pooledCache","pushTransition","offscreenWorkInProgress","prevCachePool","pool","getSuspendedCache","cacheFromPool","CacheContext","isThenableResolved","thenable","noop$3","trackUsedThenable","thenableState","then","checkIfUseWrappedInAsyncCatch","reason","shellSuspendCounter","fulfilledValue","fulfilledThenable","rejectedThenable","suspendedThenable","SuspenseException","getSuspendedThenable","rejectedReason","SuspenseActionException","initializeUpdateQueue","baseState","firstBaseUpdate","lastBaseUpdate","shared","hiddenCallbacks","callbacks","cloneUpdateQueue","createUpdate","payload","enqueueUpdate","executionContext","entangleTransitions","queueLanes","enqueueCapturedUpdate","capturedUpdate","newFirst","newLast","clone","suspendIfUpdateReadFromEntangledAsyncAction","didReadFromEntangledAsyncAction","processUpdateQueue","workInProgress$jscomp$0","instance$jscomp$0","hasForceUpdate","pendingQueue","lastPendingUpdate","firstPendingUpdate","newState","isHiddenUpdate","workInProgressRootRenderLanes","workInProgressRootSkippedLanes","callCallback","commitCallbacks","pushHiddenContext","prevEntangledRenderLanesCursor","entangledRenderLanes","currentTreeHiddenStackCursor","baseLanes","reuseHiddenContextOnStack","popHiddenContext","throwInvalidHookError","areHookInputsEqual","nextDeps","prevDeps","renderWithHooks","secondArg","nextRenderLanes","currentlyRenderingFiber","ReactSharedInternals","H","HooksDispatcherOnMount","HooksDispatcherOnUpdate","shouldDoubleInvokeUserFnsInHooksDEV","didScheduleRenderPhaseUpdateDuringThisPass","renderWithHooksAgain","finishRenderingHooks","ContextOnlyDispatcher","didRenderTooFewHooks","currentHook","workInProgressHook","didScheduleRenderPhaseUpdate","thenableIndexCounter$1","thenableState$1","didReceiveUpdate","numberOfReRenders","lastEffect","events","stores","memoCache","HooksDispatcherOnRerender","TransitionAwareHostComponent","dispatcher","maybeThenable","useState","useThenable","checkDidRenderIdHook","didRenderIdHook","localIdCounter","bailoutHooks","resetHooksOnUnwind","mountWorkInProgressHook","hook","baseQueue","updateWorkInProgressHook","nextCurrentHook","nextWorkInProgressHook","use","usable","String","useMemoCache","size","map","array","Array","REACT_MEMO_CACHE_SENTINEL","basicStateReducer","state","action","updateReducer","reducer","updateReducerImpl","lastRenderedReducer","baseFirst","newBaseQueueFirst","newBaseQueueLast","didReadFromEntangledAsyncAction$32","revertLane","hasEagerState","eagerState","lastRenderedState","dispatch","rerenderReducer","lastRenderPhaseUpdate","updateSyncExternalStore","subscribe","getSnapshot","getServerSnapshot","isHydrating$jscomp$0","snapshotChanged","updateEffectImpl","subscribeToStore","bind","pushSimpleEffect","destroy","resource","updateStoreInstance","pushStoreConsistencyCheck","renderedSnapshot","nextSnapshot","checkIfSnapshotChanged","forceStoreRerender","latestGetSnapshot","scheduleUpdateOnFiber","mountStateImpl","initialState","initialStateInitializer","updateOptimisticImpl","passthrough","dispatchActionState","actionQueue","setPendingState","setState","isRenderPhaseUpdate","actionNode","isTransition","listener","T","runActionStateAction","prevState","prevTransition","currentTransition","onStartTransitionFinish","S","handleActionReturnValue","onActionError","error$38","nextState","onActionSuccess","notifyActionListeners","actionStateReducer","oldState","mountActionState","initialStateProp","ssrFormState","formState","JSCompiler_inline_result$jscomp$0","inRootOrSingleton","dispatchSetState","dispatchOptimisticSetState","updateActionState","updateActionStateImpl","stateHook","currentStateHook","actionStateActionEffect","rerenderActionState","create","createDeps","deps","updateRef","mountEffectImpl","fiberFlags","hookFlags","mountEffect","updateEffect","updateInsertionEffect","updateLayoutEffect","imperativeHandleEffect","updateImperativeHandle","concat","mountDebugValue","updateCallback","updateMemo","nextCreate","mountDeferredValueImpl","initialValue","requestDeferredLane","updateDeferredValueImpl","prevValue","startTransition","pendingState","finishedState","previousPriority","result","thenableWithOverride","dispatchSetStateInternal","resolve","requestUpdateLane","noop$2","startHostTransition","formFiber","formData","ensureFormComponentIsStateful","requestFormReset$1","existingStateHook","initialResetState","useHostTransitionStatus","updateId","updateRefresh","refreshCache","provider","root$41","dispatchReducerAction","enqueueRenderPhaseUpdate","entangleTransitionUpdate","currentState","throwIfDuringRender","requestTransitionLane","unwrapThenable","thenableIndexCounter","coerceRef","throwOnInvalidObjectType","returnFiber","newChild","REACT_LEGACY_ELEMENT_TYPE","join","resolveLazy","lazyType","init","createChildReconciler","shouldTrackSideEffects","deleteChild","childToDelete","deleteRemainingChildren","currentFirstChild","mapRemainingChildren","existingChildren","useFiber","placeChild","newFiber","lastPlacedIndex","newIndex","placeSingleChild","updateTextNode","updateElement","updateFragment","updatePortal","fragment","createChild","REACT_ELEMENT_TYPE","updateSlot","oldFiber","updateFromMap","newIdx","reconcileChildFibersImpl","newChildren","resultingFirstChild","previousNewFiber","nextOldFiber","delete","forEach","reconcileChildrenArray","step","done","reconcileChildrenIterator","firstChildFiber","pushPrimaryTreeSuspenseHandler","handler","suspenseStackCursor","suspenseHandlerStackCursor","shellBoundary","pushOffscreenSuspenseHandler","reuseSuspenseHandlerOnStack","popSuspenseHandler","findFirstSuspended","row","isSuspenseInstanceFallback","revealOrder","applyDerivedStateFromProps","ctor","getDerivedStateFromProps","nextProps","checkShouldComponentUpdate","oldProps","newProps","nextContext","shouldComponentUpdate","isPureReactComponent","callComponentWillReceiveProps","componentWillReceiveProps","UNSAFE_componentWillReceiveProps","classComponentUpdater","enqueueReplaceState","resolveClassComponentProps","baseProps","defaultProps","propName$73","defaultOnUncaughtError","reportGlobalError","defaultOnCaughtError","defaultOnRecoverableError","logUncaughtError","errorInfo","onUncaughtError","componentStack","e$74","logCaughtError","boundary","onCaughtError","errorBoundary","e$75","createRootErrorUpdate","createClassErrorUpdate","initializeClassErrorUpdate","getDerivedStateFromError","componentDidCatch","legacyErrorBoundariesThatAlreadyFailed","Set","reconcileChildren","nextChildren","mountChildFibers","reconcileChildFibers","updateForwardRef","propsWithoutRef","bailoutOnAlreadyFinishedWork","updateMemoComponent","updateSimpleMemoComponent","checkScheduledUpdateOrContext","prevProps","updateFunctionComponent","updateOffscreenComponent","deferHiddenOffscreenComponent","cachePool","nextBaseLanes","markRef","replayFunctionComponent","updateClassComponent","emptyContextObject","contextType","updater","_reactInternals","refs","getSnapshotBeforeUpdate","UNSAFE_componentWillMount","componentWillMount","componentDidMount","unresolvedOldProps","oldContext","contextType$jscomp$0","UNSAFE_componentWillUpdate","componentWillUpdate","componentDidUpdate","mountHostRootWithoutHydrating","mountSuspenseOffscreenState","getRemainingWorkInPrimaryTree","primaryTreeDidDefer","workInProgressDeferredLane","updateSuspenseComponent","showFallback","didSuspend","JSCompiler_temp$jscomp$0","nextInstance","c","treeContext","overflow","retryLane","fallback","mountWorkInProgressOffscreenFiber","SUSPENDED_MARKER","mountSuspensePrimaryChildren","retrySuspenseComponentWithoutHydrating","dataset","digest","dgst","SelectiveHydrationException","renderDidSuspendDelayIfPossible","primaryChildren","offscreenProps","_pendingMarkers","_retryCache","_transitions","scheduleSuspenseWorkOnFiber","initSuspenseListRenderState","isBackwards","tail","lastContentRow","tailMode","renderState","rendering","renderingStartTime","updateSuspenseListComponent","beginWork","didSuspendBefore","attemptEarlyBailoutIfNoScheduledUpdate","lazyComponent","isDehydrated","getResource","getOwnerDocumentFromRootContainer","createElement","setInitialProperties","resolveSingletonInstance","anyProps","hasAttribute","getAttribute","crossOrigin","title","canHydrateInstance","canHydrateTextInstance","pooledCacheLanes","markUpdate","preloadResourceAndSuspendIfNeeded","loading","preloadResource","noopSuspenseyCommitThenable","SuspenseyCommitException","scheduleRetryEffect","retryQueue","workInProgressSuspendedRetryLanes","cutOffTailIfNeeded","hasRenderedATailFallback","lastTailNode","lastTailNode$113","bubbleProperties","completedWork","didBailout","newChildLanes","child$114","completeWork","pendingContext","createElementNS","innerHTML","removeChild","is","appendChild","autoFocus","createTextNode","cache$127","listenToAllSupportedEvents","workInProgressRootExitStatus","workInProgressRootRenderTargetTime","unwindWork","unwindInterruptedWork","interruptedWork","commitHookEffectListMount","finishedWork","firstEffect","captureCommitPhaseError","commitHookEffectListUnmount","nearestMountedAncestor$jscomp$0","nearestMountedAncestor","destroy_","commitClassCallbacks","safelyCallComponentWillUnmount","componentWillUnmount","safelyAttachRef","instanceToUse","safelyDetachRef","error$143","commitHostMount","focus","srcSet","srcset","commitHostUpdate","domElement","lastProps","propKey","lastProp","setProp","propKey$205","propKey$221","propKey$226","propKey$231","setPropOnCustomElement","propKey$236","updateProperties","isHostParent","getHostSibling","insertOrAppendPlacementNodeIntoContainer","before","insertBefore","_reactRootContainer","insertOrAppendPlacementNode","commitHostSingletonAcquisition","singleton","attributes","removeAttributeNode","commitLayoutEffectOnFiber","finishedRoot","recursivelyTraverseLayoutEffects","__reactInternalSnapshotBeforeUpdate","error$142","commitSuspenseHydrationCallbacks","readyState","removeEventListener","addEventListener","_reactRetry","registerSuspenseInstanceRetry","retryDehydratedSuspenseBoundary","offscreenSubtreeIsHidden","offscreenSubtreeWasHidden","prevOffscreenSubtreeWasHidden","recursivelyTraverseReappearLayoutEffects","detachFiberAfterEffects","recursivelyTraverseDeletionEffects","commitDeletionEffectsOnFiber","deletedFiber","onCommitFiberUnmount","count","prevHostParent","hostParent","prevHostParentIsContainer","hostParentIsContainer","releaseSingletonInstance","clearSuspenseBoundary","retryIfBlockedOn","attachSuspenseRetryListeners","wakeables","retryCache","PossiblyWeakSet","getRetryCache","wakeable","retry","resolveRetryWakeable","recursivelyTraverseMutationEffects","root$jscomp$0","parentFiber","commitMutationEffectsOnFiber","commitReconciliationEffects","hoistableRoot","currentHoistableRoot","currentResource","getElementsByTagName","head","querySelector","maybeNodes","getHydratableHoistableCache","splice","property","httpEquiv","charSet","mountHoistable","acquireResource","needsFormReset","tagCaches","getHoistableRoot","recursivelyResetForms","globalMostRecentFallbackTime","wasHidden","prevOffscreenSubtreeIsHidden","recursivelyTraverseDisappearLayoutEffects","display","hostParentFiber","parent$144","parent$146","reset","finishedRoot$jscomp$0","includeWorkInProgressEffects","commitOffscreenPassiveMountEffects","previousCache","commitCachePassiveMountEffect","recursivelyTraversePassiveMountEffects","committedLanes","committedTransitions","commitPassiveMountOnFiber","_finishedWork$memoize2","onPostCommit","passiveEffectDuration","recursivelyTraverseAtomicPassiveEffects","recursivelyTraverseReconnectPassiveEffects","committedLanes$jscomp$0","committedTransitions$jscomp$0","recursivelyAccumulateSuspenseyCommit","suspenseyCommitFlag","accumulateSuspenseyCommitOnFiber","suspendedState","media","matchMedia","matches","getStyleKey","getStylesheetSelectorFromKey","_p","onUnsuspend","stylesheetPropsFromRawProps","preloadPropsMap","adoptPreloadPropsForStylesheet","linkInstance","Promise","reject","onload","onerror","stylesheets","preload","suspendResource","previousHoistableRoot","detachAlternateSiblings","previousFiber","recursivelyTraversePassiveUnmountEffects","nextEffect","commitPassiveUnmountEffectsInsideOfDeletedTree_begin","commitPassiveUnmountOnFiber","recursivelyTraverseDisconnectPassiveEffects","deletedSubtreeRoot","suspenseHandler","workInProgressSuspendedReason","cancelPendingCommit","prepareFreshStack","markRootSuspended","workInProgressRootInterleavedUpdatedLanes","ensureRootIsScheduled","performWorkOnRoot","forceSync","shouldTimeSlice","expiredLanes","exitStatus","prevExecutionContext","prevDispatcher","pushDispatcher","prevAsyncDispatcher","pushAsyncDispatcher","workInProgressTransitions","workInProgressRootIsPrerendering","thrownValue","workInProgressThrownValue","throwAndUnwindWorkLoop","replaySuspendedUnitOfWork","hostFiber","completeUnitOfWork","resetWorkInProgressStack","workLoopConcurrentByScheduler","thrownValue$169","handleThrow","A","renderRootConcurrent","renderRootSync","renderWasConcurrent","isRenderConsistentWithExternalStores","errorRecoveryDisabledLanes","workInProgressRootConcurrentErrors","wasRootDehydrated","workInProgressRootDidAttachPingListener","workInProgressRootDidSkipSuspendedSiblings","timeoutHandle","scheduleTimeout","commitRootWhenReady","workInProgressRootDidIncludeRecursiveRenderUpdate","recoverableErrors","transitions","didIncludeRenderPhaseUpdate","updatedLanes","suspendedRetryLanes","didSkipSuspendedSiblings","suspendedCommitReason","completedRenderStartTime","completedRenderEndTime","unsuspend","noop","insertSuspendedStylesheets","commit","stylesheetTimer","waitForCommitToBeReady","commitRoot","check","didAttemptEntireTree","workInProgressRootPingedLanes","expirationTimes","index$4","flushSyncWorkAcrossRoots_impl","cancelTimeout","allEntangledLanes","index$2","DefaultAsyncDispatcher","shouldYieldForPrerendering","unitOfWork","workLoopSync","thrownValue$167","performUnitOfWork","shouldYield","suspendedReason","rootRenderLanes","attachPingListener","markerInstances","cause","wrapperError","throwException","unwindUnitOfWork","skipSiblings","flushPendingEffects","pendingEffectsStatus","finishedLanes","remainingLanes","previouslyPendingLanes","index$5","hiddenUpdatesForLane","markRootFinished","pendingFinishedWork","pendingEffectsRoot","pendingEffectsLanes","pendingEffectsRemainingLanes","pendingPassiveTransitions","pendingRecoverableErrors","callbackNode","callbackPriority","scheduleCallback$3","NormalPriority$1","flushPassiveEffects","eventsEnabled","_enabled","selection","rangeCount","e$20","indexWithinAnchor","indexWithinFocus","selectionInformation","focusedElem","selectionRange","resolvedPrevProps","clearContainerSparingly","commitBeforeMutationEffects","flushMutationEffects","flushLayoutEffects","flushSpawnedWork","rootMutationHasEffect","priorSelectionInformation","curFocusedElem","priorFocusedElem","priorSelectionRange","min","win","start$jscomp$0","end$jscomp$0","extend","startMarker","endMarker","range","createRange","setStart","removeAllRanges","addRange","setEnd","scrollLeft","top","scrollTop","rootHasLayoutEffect","requestPaint","releaseRootPooledCache","onCommitFiberRoot","onRecoverableError","recoverableError","renderPriority","onPostCommitFiberRoot","captureCommitPhaseErrorOnRoot","rootFiber","pingCache","PossiblyWeakMap","threadIDs","pingSuspendedRoot","retryTimedOutBoundary","boundaryFiber","lastScheduledRoot","firstScheduledRoot","mightHavePendingSyncWork","didScheduleMicrotask","scheduleMicrotask","ImmediatePriority","processRootScheduleInImmediateTask","processRootScheduleInMicrotask","syncTransitionLanes","isFlushingWork","didPerformSomeWork","root$174","performSyncWorkOnRoot","currentEventTransitionLane","currentPopstateTransitionEvent","shouldAttemptEagerTransition","prev","scheduleTaskForRootDuringMicrotask","index$3","cancelCallback$1","UserBlockingPriority","IdlePriority","performWorkOnRootViaSchedulerTask","didTimeout","originalCallbackNode","workInProgressRootRenderLanes$jscomp$0","coerceFormActionProp","actionProp","createFormDataWithSubmitter","submitter","temp","FormData","eventSystemFlags","_dispatchQueue$i","previousInstance","i$jscomp$0","_dispatchListeners$i","targetElement","listenerSetKey","addTrappedEventListener","listenToNativeEvent","isCapturePhaseListener","rootContainerElement","listeningMarker","nonDelegatedEvents","targetContainer","listenerWrapper","dispatchDiscreteEvent","dispatchContinuousEvent","dispatchEvent","passiveBrowserEventsSupported","capture","passive","dispatchEventForPluginEventSystem","targetInst$jscomp$0","ancestorInst","nodeTag","container","grandTag","SyntheticEventCtor","SyntheticKeyboardEvent","SyntheticFocusEvent","button","SyntheticMouseEvent","SyntheticDragEvent","SyntheticTouchEvent","ANIMATION_END","ANIMATION_ITERATION","ANIMATION_START","SyntheticAnimationEvent","TRANSITION_END","SyntheticTransitionEvent","SyntheticUIEvent","SyntheticWheelEvent","SyntheticClipboardEvent","SyntheticPointerEvent","SyntheticToggleEvent","inCapturePhase","accumulateTargetOnly","reactEventName","lastHostComponent","_instance","createDispatchListener","currentReplayingEvent","relatedTarget","fromElement","parentWindow","toElement","getParent","accumulateEnterLeaveListenersForEvent","getTargetInstFunc","isInputEventSupported","handleEventFunc","skipSelectionChangeEvent","fallbackData","canUseCompositionEvent","eventType","isComposing","useFallbackCompositionData","locale","SyntheticCompositionEvent","canUseTextInputEvent","which","hasSpaceKeypress","SPACEBAR_CHAR","getNativeBeforeInputChars","ctrlKey","altKey","metaKey","char","fromCharCode","getFallbackBeforeInputChars","maybeTargetInst","formAction","method","extractEvents$1","targetFiber","captureName","_instance2","unshift","common","_instance3","normalizeMarkupForTextOrAttribute","markup","NORMALIZE_NEWLINES_REGEX","NORMALIZE_NULL_AND_REPLACEMENT_REGEX","serverText","clientText","formEncType","formMethod","formTarget","encType","__html","muted","isNaN","aliases","endsWith","hasSrc","hasSrcSet","propValue$188","parentNamespace","dangerouslySetInnerHTML","handleErrorInNextTick","parentInstance","suspenseInstance","possiblePreambleContribution","depth","nextNode","nextNode$jscomp$0","targetInstance","previousSibling","rootContainerInstance","getRootNode","preconnectAs","globalDocument","limitedEscapedHref","preconnectsSet","currentProps","preloadProps","styles$244","resource$245","as","integrity","hrefLang","referrerPolicy","getScriptKey","rawProps","getScriptSelectorFromKey","styleProps","insertStylesheet","instance$250","adoptPreloadPropsForScript","nodes","prior","stylesheetProps","scriptProps","keyAttribute","caches","nodeKey","precedencesByRoot","insertStylesheetIntoRoot","precedences","FiberRootNode","hydrate","identifierPrefix","incompleteTransitions","createFiberRoot","initialChildren","hydrationCallbacks","isStrictMode","transitionCallbacks","getContextForSubtree","parentComponent","updateContainerImpl","markRetryLaneImpl","markRetryLaneIfNotHydrated","attemptContinuousHydration","blockedOn","findInstanceBlockingEvent","return_targetInst","clearIfContinuousEvent","queuedFocus","accumulateOrCreateContinuousQueuedReplayableEvent","queuedDrag","queuedMouse","pointerId","queuedPointers","queuedPointerCaptures","queueIfContinuousEvent","discreteReplayableEvents","findInstanceBlockingTarget","getCurrentPriorityLevel","LowPriority","existingQueuedEvent","targetContainers","attemptExplicitHydrationTarget","queuedTarget","priority","runWithPriority","attemptReplayContinuousQueuedEvent","queuedEvent","nextBlockedOn","nativeEventClone","shift","attemptReplayContinuousQueuedEventInMap","replayUnblockedEvents","hasScheduledReplayAttempt","scheduleCallbackIfUnblocked","unblocked","Scheduler","scheduleReplayQueueIfNeeded","formReplayingQueue","lastScheduledReplayQueue","submitterOrAction","formInst","unblock","queuedExplicitHydrationTargets","$$reactFormReplay","formProps","ReactDOMRoot","internalRoot","_internalRoot","ReactDOMHydrationRoot","require$$0","React","require$$1","ReactDOM","require$$2","Symbol","for","iterator","isArray","__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE","__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE","log","LN2","randomKey","random","RegExp","canUseDOM","lastMovementX","lastMovementY","lastMouseEvent","EventInterface","eventPhase","bubbles","cancelable","timeStamp","isTrusted","UIEventInterface","view","MouseEventInterface","screenX","screenY","clientX","clientY","pageX","pageY","shiftKey","buttons","movementX","movementY","dataTransfer","animationName","elapsedTime","pseudoElement","clipboardData","normalizeKey","Esc","Spacebar","Left","Up","Right","Down","Del","Win","Menu","Apps","Scroll","MozPrintableKey","translateToKey","Alt","Control","Meta","Shift","repeat","width","height","pressure","tangentialPressure","tiltX","tiltY","twist","pointerType","isPrimary","touches","targetTouches","changedTouches","deltaX","wheelDeltaX","deltaY","wheelDeltaY","wheelDelta","deltaZ","deltaMode","documentMode","color","date","datetime","email","month","number","password","search","tel","time","week","JSCompiler_inline_result$jscomp$282","isSupported$jscomp$inline_417","element$jscomp$inline_418","oninput","y","animationend","animationiteration","animationstart","transitionrun","transitionstart","transitioncancel","transitionend","animation","transition","TRANSITION_RUN","TRANSITION_START","TRANSITION_CANCEL","simpleEventPluginEvents","WeakMap","AbortController","signal","aborted","Consumer","Provider","_currentValue2","_threadCount","prevOnStartTransitionFinish","entangledListeners","entangleAsyncAction","globalClientIdCounter","useCallback","useContext","useEffect","useImperativeHandle","useLayoutEffect","useInsertionEffect","useMemo","useReducer","useRef","useDebugValue","useDeferredValue","useTransition","useSyncExternalStore","useId","useFormState","useActionState","useOptimistic","useCacheRefresh","initialArg","booleanOrThenable","enqueueSetState","enqueueForceUpdate","reportError","ErrorEvent","process","emit","WeakSet","getCacheForType","resourceType","cacheForType","Infinity","i$jscomp$inline_1528","eventName$jscomp$inline_1529","toUpperCase","localPromise","queueMicrotask","previousDispatcher","d","f","previousWasRendering","wasRendering","r","D","C","L","preloadSelector","imageSrcSet","imageSizes","m","X","scripts","link","M","unmount","unstable_scheduleHydration","isomorphicReactPackageVersion$jscomp$inline_1785","version","findDOMNode","componentOrElement","parentA","parentB","didFindChild","child$0","findCurrentFiberUsingSlowPath","internals$jscomp$inline_2256","bundleType","rendererPackageName","currentDispatcherRef","reconcilerVersion","__REACT_DEVTOOLS_GLOBAL_HOOK__","hook$jscomp$inline_2257","isDisabled","supportsFiber","inject","reactDomClient_production","createRoot","unstable_strictMode","unstable_transitionCallbacks","hydrateRoot","formatDynamicDecimals","maxDecimals","minDecimals","num","parseFloat","abs","pow","toExponential","formatted","toFixed","decimalIndex","currentDecimals","number1","number2","_a","neg","ind","testZero","substring","pad","compliment","res","addCore","s","l","dec","ld","parseInt","parts","parts1","parts2","length1","length2","sum","carry","n","roundOff","input","RoundingModes","HALF_EVEN","UNNECESSARY","partInt","partDec","substr","greaterThanFive","increment","rem","part","pre","DOWN","FLOOR","CEILING","UP","five","HALF_DOWN","HALF_UP","reverse","stripTrailingZero","isNegative","multiply","negative","decimalLength1","decimalLength2","decimalLength","decimal","positionVector","currentPosition","j","divide","dividend","divisor","precission","pt_dvsr","pt_dvnd","loc","prec","dl","quotent","dvnd","qt","subtract","negate","modulus","validate","sign","oparand","compareTo","_b","localeCompare","divCeil","den","v","div","zero","BN","one","mod","gt","sub","UInt128","from","intToBigDecimal","bigDecimal","SendOfferModal","isOpen","onClose","nft","session","isConnected","account","useWallet","settings","useDisplaySettings","showSuccess","showError","useNotifications","offerType","setOfferType","waxAmount","setWaxAmount","customMemo","setCustomMemo","userNFTs","setUserNFTs","selectedNFTs","setSelectedNFTs","isLoading","setIsLoading","loadingInventory","setLoadingInventory","isPixalHolder","setIsPixalHolder","response","fetch","json","checkPixalHolder","formattedNFTs","asset","rawImage","img","image","rawVideo","video","imageUrl","videoUrl","startsWith","API_ENDPOINTS","IPFS","GATEWAYS","asset_id","collection","collection_name","template_mint","max_supply","template","loadUserNFTs","jsx","className","jsxs","viewBox","fill","stroke","x1","y1","x2","y2","MediaRenderer","alt","enableAnimations","enableAnimatedNFTs","price","cx","cy","rx","ry","points","htmlFor","onChange","placeholder","userNft","handleNFTSelection","assetId","filter","rows","memo","actions","authorization","actor","permission","to","quantity","buyer","recipient","seller","asset_ids","maker_marketplace","transact","handleSendWaxOffer","sender","sender_asset_ids","recipient_asset_ids","handleSendNFTOffer","Fragment","sanitizeHtml","html","tempDiv","sanitizeElement","ALLOWED_TAGS","textNode","replaceChild","allowedAttrs","ALLOWED_ATTRIBUTES","attr","formatSafeMarkdown","escapeHtml","normalizeIPFSUrl","getIPFSGatewayUrl","hash","gateways","getCollectionTier","collectionName","COLLECTION_TIERS","getTierBadgeConfig","tier","platinum","icon","label","partner","gold","silver","bronze","calculateAmount","frac","weight","calcPowerupFee","utilizationIncrease","max_price","min_price","fee","startUtilization","utilization","endUtilization","adjusted_utilization","newExponent","exponent","priceFunction","coefficient","startU","endU","priceIntegralDelta","toPrecision","predictResourceAmounts","cpuFrac","netFrac","cpuState","netState","cpuAmount","netAmount","cpuFee","netFee","App","monitoringService","trackEvent","timestamp","userAgent","navigator","viewport","innerWidth","innerHeight","accessibilityService","initialize","preferences","getPreferences","pushNotificationService","success","supported","getPermissionState","warn","MarketplaceConfigService","preloadConfiguration","ErrorBoundary","WalletProvider","DisplaySettingsProvider","NotificationProvider","Router","basename","AppContent","WatchlistAlertChecker","PriceAlertManager","NotificationContainer","ConfirmDialog","ChatWidget","PWAInstallBanner","OfflineIndicator","TransactionNotifications","jsxRuntimeModule","jsxProd","config","maybeKey","reactJsxRuntime_production","checkDCE","clientModule","WalletContext","createContext","_ErrorMessageService","getMessage","MESSAGES","createMessage","formatError","fallbackMessage","errorName","NETWORK_ERROR","TIMEOUT_ERROR","TRANSACTION_REJECTED","INSUFFICIENT_BALANCE","NFT_NOT_FOUND","LOAD_FAILED","API_ERROR","hostname","UNKNOWN_ERROR","logError","additionalInfo","__vitePreload","loggingService","__VITE_PRELOAD__","errorInstance","__publicField","WALLET_CONNECTION_FAILED","WALLET_DISCONNECTED","TRANSACTION_FAILED","INVALID_INPUT","REQUIRED_FIELD","COLLECTION_NOT_FOUND","PURCHASE_FAILED","LISTING_FAILED","ErrorMessageService","formatWAXPrice","showCurrency","numPrice","formatNumber","LogLevel","DEBUG","INFO","WARN","ERROR","logger","logLevel","isDevelopment","createLogEntry","level","toISOString","shouldLog","storeLog","entry","logs","maxLogs","formatMessage","levelName","debug","metadata","reportingPromises","sendToErrorReportingAPI","sendToLocalStorage","sendToConsole","allSettled","reportingError","errorReport","userId","getUserId","sessionId","getSessionId","buildVersion","getBuildVersion","environment","getEnvironment","headers","Authorization","getAuthToken","JSON","stringify","ok","statusText","sendToFallbackErrorService","errorData","Sentry","captureException","extra","fallbackError","storageKey","maxStoredErrors","storedErrors","localStorage","getItem","parse","parseError","setItem","storageError","group","groupEnd","sessionStorage","getLogs","clearLogs","exportLogs","WAXROCK_TYPES","PARTNER_COLLECTIONS","TOKEN_CONTRACTS","PIXAL_TEMPLATE_ID","ATOMIC_ASSETS","WAX_CHAIN","EOSRIO","WAXSWEDEN","GREYMASS","EOSPHERE","ALOHAEOS","PINK","CRYPTOLIONS","FALLBACK_ENDPOINTS","HYPERION_ENDPOINTS","HIVEBP","LIGHT_API","SPECIALIZED","ALCOR","DAPPLICA","NEFTY","AVATAR","DICEBEAR","HYPERION","COINGECKO_API","EXCHANGE_RATE_API","SOCIAL","TWITTER_INTENT","FACEBOOK_SHARE","REDDIT_SUBMIT","TELEGRAM_SHARE","DISCORD","ATOMICHUB_EXPLORER","BLOKS_EXPLORER","PIXEL_JOURNEY","MAIN_SITE","DOCS","LOGO","DEFAULT_IMAGE","LEADERBOARD","CRAFTING_DOCS","DICEBEAR_API","GOOGLE_FONTS","WAX_WALLET","isValidWaxRock","waxRock","getWaxRockTypes","getPartnerCollections","configCache","partnerCollections","lastFetch","CACHE_DURATION","apiService","api","collections","getPartnerCollectionsSync","getTokenContracts","tokenContracts","contracts","getTokenContractsSync","getPixalTemplateId","isPixalPFP","templateId","generateFiltersFromAssets","assets","filters","attributeCounts","traits","traitKey","traitValue","filterKey","dataKey","dataValue","collectionFilter","schema","schemaFilter","minOccurrences","max","sort","all","clearCache","currencyService","bitcoin","usd","ethereum","USD","EUR","DKK","AED","INR","RUB","CNY","JPY","getExchangeRates","exchangeRates","lastFetchTime","EXCHANGE_API","Accept","rates","FALLBACK_RATES","cryptoResponse","CRYPTO_API","cryptoData","cryptoRates","FALLBACK_CRYPTO","cryptoError","convertUSDToCurrency","usdAmount","targetCurrency","btcAmount","ethAmount","rate","convertedAmount","round","convertWaxToCurrency","priceService","priceService$1","usdString","convertWaxToUSDAsync","formatCurrencyAmount","amount","currency","getCurrencySymbol","BTC","ETH","fetchPrices","waxPriceUSD","wpixalPriceUSD","waxResponse","wpixalResponse","pxjResponses","COINGECKO_WAX_API","GECKOTERMINAL_WPIXAL_API","GECKOTERMINAL_PXJ_POOLS","waxPriceFromAPI","waxData","wax","wpixalPriceFromAPI","wpixalData","quote_token_price_usd","pxjPriceFromAPI","pxjData","quoteTokenPrice","FALLBACK_WAX_PRICE","FALLBACK_WPIXAL_PRICE","pxjPriceUSD","FALLBACK_PXJ_PRICE","wpixalPriceWAX","waxApi","wpixalApi","pxjPools","fallbackWaxPrice","fallbackWpixalPrice","fallbackPxjPrice","getWaxPriceUSD","getWpixalPriceWAX","getWpixalPriceUSD","getPxjPriceUSD","convertWaxToUSD","usdValue","convertWaxToCurrencyAsync","convertWpixalToWAX","wpixalAmount","convertWpixalToUSD","convertPxjToUSD","pxjAmount","convertPxjToWAX","convertWaxWithDisplaySettings","selectedCurrency","storageService","isStorageAvailable","storage","removeItem","isLocalStorageAvailable","isSessionStorageAvailable","useSessionStorage","fallbackStorage","removed","clear","getJSON","item","setJSON","jsonString","getStorageStats","getStorageSize","used","total","available","isQuotaExceeded","stats","localStorageUsage","sessionStorageUsage","cleanup","keyPatterns","cleaned","storages","keysToRemove","pattern","cartService","loadCart","cart","saveCart","cartSize","notifyListeners","addListener","removeListener","addToCart","findIndex","cartItem","addedAt","isAvailable","sale_id","removeFromCart","initialLength","isInCart","some","getCart","getCartCount","clearCart","cleanupUnavailableItems","calculateTotals","availableItems","totalWAXValue","totalWAX","totalUSD","itemCount","checkAvailability","saleIds","Boolean","atomicMarketAPI","fetchWithRetry","activeSaleIds","sale","toggleSelection","find","selectAll","deselectAll","getSelectedItems","getSelectedCount","removeSelectedItems","isSelected","DisplaySettingsContext","setSettings","showOtherCollections","showWhitelistedOnly","showExplicitContent","blockNSFW","blockAI","showChatButton","autoPlayVideos","muteVideos","showVideoControls","showPricesInUSD","showRarityRankings","contextValue","updateSetting","newSettings","generateSessionId","lastActivity","pageViews","initializeMonitoring","startPerformanceObserver","setupErrorHandlers","startFlushTimer","trackPageLoadPerformance","hidden","setupUserInteractionTracking","PerformanceObserver","getEntries","entryType","trackNavigationTiming","observe","entryTypes","trackResourceTiming","trackPerformanceMetric","processingStart","filename","lineno","colno","formId","formClass","setInterval","flushMetrics","flushInterval","setUserId","properties","isEnabled","userEvent","addToBatch","maxStoredMetrics","metric","performanceMetrics","trackAPICall","endpoint","duration","retryCount","apiMetric","apiMetrics","stackTrace","errorReports","errorMessage","timing","navigation","pageLoadTime","loadEventEnd","navigationStart","domContentLoadedTime","domContentLoadedEventEnd","firstByteTime","responseStart","domInteractiveTime","domInteractive","navigationType","redirectCount","domainLookupEnd","domainLookupStart","connectEnd","connectStart","responseEnd","requestStart","domComplete","domContentLoadedEventStart","initiatorType","transferSize","getSessionSummary","getPerformanceMetrics","getAPIMetrics","getErrorReports","errors","existingData","recentData","enable","disable","isMonitoringEnabled","setBatchSize","batchSize","batch","pendingBatches","processBatch","scheduleBatchProcessing","batchTimeout","processAllPendingBatches","batchData","batchId","generateBatchId","processedAt","existingBatches","recentBatches","batches","setFlushInterval","interval","exportData","clearAllData","CacheService","defaultTTL","maxSize","cleanupInterval","startCleanup","cleanupTimer","keysToDelete","entries","ttl","getOrFetch","fetchFn","cached","setMany","getMany","getStats","validEntries","expiredEntries","values","totalEntries","hitRate","clearInterval","cacheService","assetCache","collectionCache","userCache","apiEndpointManager","initializeEndpointGroups","startHealthChecks","endpointGroups","currentIndex","fallbackStrategy","healthCheckInterval","HEALTH_CHECK_INTERVAL","endpoints","healthStatus","lastHealthCheck","consecutiveFailures","averageResponseTime","maxRetries","getBestEndpoint","groupName","healthyEndpoints","ep","degradedEndpoints","selectEndpoint","strategy","reportFailure","endpointUrl","MAX_CONSECUTIVE_FAILURES","reportSuccess","responseTime","getEndpoints","getCurrentIndex","setCurrentIndex","performHealthCheck","healthCheckTimers","healthCheckPromises","timeoutId","HEALTH_CHECK_TIMEOUT","getHealthStatus","healthy","degraded","unhealthy","atomicEndpoints","waxChainEndpoints","hyperionEndpoints","lastUpdated","currentEndpointIndex","currentWaxChainIndex","currentHyperionIndex","initializeHealthConfigs","waxChainAPI","atomicAssetsAPI","getCurrentAtomicEndpoint","bestEndpoint","getHealthyEndpoints","healthyEndpoint","getFromCache","setCache","DEFAULT_CACHE_TTL","reportEndpointHealth","urlObj","URL","baseUrl","protocol","host","getCacheStats","assetStats","collectionStats","userStats","generalStats","warmupCache","warmupTasks","topCollections","approvedCollections","getCollectionStats","getMarketStats","getUserInventoryOverview","prefetchData","prefetchTasks","currentPage","getPxApprovedListings","userAccount","getUserInventoryOptimized","page","recentCollections","invalidateCache","getAdaptiveLimit","requestedLimit","storedLimit","adaptiveLimits","updateAdaptiveLimit","limit","currentLimit","newLimit","fetchAlcorAPI","retries","lastError","healthConfigs","getValidatedEndpoints","path","validator","atomicData","chainData","head_block_num","healthData","health","getCircuitBreakerKey","isCircuitBreakerOpen","circuitBreakerState","lastFailure","CIRCUIT_BREAKER_TIMEOUT","recordCircuitBreakerFailure","failures","CIRCUIT_BREAKER_THRESHOLD","recordCircuitBreakerSuccess","updateEndpointHealth","endpointKey","endpointHealth","isHealthy","lastCheck","isEndpointHealthy","healthCheckUrl","AbortSignal","currentHealth","healthCheckIntervalId","updateEosNationEndpoints","stopHealthChecks","enableHealthChecks","eosNationEndpoints","EOS_NATION_UPDATE_INTERVAL","report","parseEosNationEndpoints","atomic_https","api_https2","hyperion_https","endpointStr","obj","api_url","urlMatch","staticEndpoints","combined","classifyError","calculateDelay","attempt","errorType","jitter","baseDelay","MAX_TIMEOUT","jitterAmount","circuitKey","timeoutMs","fetchOptions","healthyWaxEndpoints","waxEndpointsToTry","endpointIndex","currentUrl","endpointSuccess","healthyAtomicEndpoints","endpointsToTry","formatSaleData","getAssetImage","getAssetVideo","formatPrice","schema_name","fromEntries","immutable_data","token_precision","token_symbol","getCheapestPixals","adaptiveLimit","getWaxRockPixals","MarketplaceConfigService2","waxRockTypes","allWaxRockSales","waxRockType","fallbackUrl","WaxRock","validWaxRockTypes","lowerValue","uniqueSales","self","listing_price","startIndex","paginatedResults","getPixelIngredients","safeLimit","getBundleListings","getFriedFactoryNFTs","getCryptoMuffinsNFTs","getPartnerListings","collectionQuery","getAHVerifiedListings","getAllWaxListings","getRecentSales","getSales","params","order","template_id","symbol","after","query_total","getCollections","whitelistOnly","author","singleCollection","URLSearchParams","append","collectionPromises","COLLECTION_WHITELIST","results","col","allow_notify","authorized_accounts","notify_accounts","market_fee","created_at_time","created_at_block","getCollectionDetails","cacheKey","getCollectionSchemas","getCollectionTemplates","schemaName","getCollectionAssets","getAssetDetails","getCollectionBurns","getCollectionTransfers","getCollectionVolumeGraph","days","hiveBPAPI","getCollectionMarketCap","getSimilarCollections","getCollectionAnalytics","getHiveBPMarketCap","marketcap","getHiveBPVolumeDays","volume","getHiveBPFloorPrice","floor_price","getEnhancedCollectionStats","marketCap","volume24h","volume7d","floorPrice","templates","getCollectionTopSales","getCollectionFloorPrice","getCollectionHolders","getNFTTradingStats","salesResponse","salesData","dailyVolume","dailySales","reduce","listingsResponse","listingsData","activeListings","query_time","totalTransactions","averagePrice","getTopCollectionsByVolume","collectionsResponse","collectionsData","volume_24h","sales_24h","sales","assets_count","getRecentNFTTrades","asset_name","updated_at_time","getUserInventory","getUserInventoryPaginated","hasMore","getUserInventoryAll","getUserInventoryByCollection","getUserInventoryBySchema","tableUrl","scope","table","totalAssets","schemas","collectionsArray","schema_counts","fallbackResponse","useCache","cacheTTL","getUserInventoryBatch","maxBatches","delayMs","onProgress","allAssets","currentBatch","batchSuccess","retryAttempt","adaptiveDelay","retryDelay","ceil","willRetry","errorMsg","isCriticalError","partialSuccess","executeBatchOperation","items","batchProcessor","stopOnCriticalError","chunkArray","batchIndex","batchResults","completed","chunkSize","chunks","getUserInventoryWithFilter","getUserInventoryEnhanced","burned","getUserInventoryByTemplate","getUserInventoryWaxRocks","pixalTemplateId","getWaxChainInfo","getWaxAccountInfo","accountName","account_name","getWaxCurrencyBalance","contract","balances","balance","getLightApiBalances","waxLightAPI","getLightApiAccountInfo","getAlcorTokenPrice","tokenId","alcorAPI","system_price","usd_price","decimals","getAlcorMarkets","getMarketplaceConfig","supportedTokens","precision","getAlcorSwapQuote","getPXJPrice","priceData","calculatePortfolioValue","totalValue","getMarketplaceNFTs","getAssetOffers","offer","buyoffer_id","getAssetsBatch","assetIds","chunk","idsParam","ids","getTemplatesBatch","templateIds","allTemplates","getAssetCountsBatch","counts","promises","queryParams","getOffers","getPrices","getTransfers","recipient_name","getCollectionMarketStats","market_contract","suggested_median","suggested_average","getTemplateStats","getHyperionTransactionHistory","skip","hyperionUrl","transactions","actionData","act","transactionType","transaction_id","trx_id","block_time","action_name","getAccountTransfers","transfers","block_num","fetchTransfersFromWaxChainAPI","pos","action_trace","getUserTransactions","allTransactions","hyperionTransactions","formattedHyperionTransactions","tx","salesUrl","dataLength","marketplaceTransactions","priceAmount","formattedPrice","transfersUrl","transfersResponse","transfersData","nftTransfers","transfer","tx_id","transfer_id","tokenTransfers","formattedTokenTransfers","uniqueTransactions","merged","sortedTransactions","getTime","unique","getUserStats","joinDate","accountInfo","created","accountError","assetsUrl","assetsResponse","assetsData","nftsOwned","totalSales","totalEarned","purchasesUrl","purchasesResponse","purchasesData","totalPurchases","totalSpent","favoriteCollections","nftsListed","getCollectionPriceHistory","timeframe","fetchPriceHistoryFromAlcor","close","basePrice","priceHistory","getAuctionBids","auctionId","getAuctions","hide_empty_auctions","collection_blacklist","seller_blacklist","auction","assetName","tokenSymbol","tokenPrecision","auction_id","end_time","current_bid","bidder","getAuction","getUSDPrice","waxRpcCall","getPowerupState","getChainInfo","getRWAXTransfers","toRwaxResponse","fromRwaxResponse","allTransfers","uniqueTransfers","uniqueKey","txid","hasMoreAssets","hasMoreData","deduplicatedTransfers","timeA","timeB","badgeService","description","borderColor","requirements","rarity","waxrock","ingredients","checkUserBadges","forceRefresh","badgeCache","expiresAt","inventory","pxjBalance","tradingStats","getPXJBalance","getTradingStats","badges","journeyAssets","pixalPfpOwned","waxrockOwned","ingredientsOwned","tradingVolume","accountAge","pixalPfpCount","BADGE_DEFINITIONS","unlockedAt","progress","required","percentage","waxrockCount","wpixalBalance","kingBalance","getTokenBalance","checkEarlyAdopterStatus","tokens","pxjToken","token","tokenRow","balanceStr","firstAction","actionDate","getBadgeDefinition","badgeId","getAllBadgeDefinitions","hasUserBadge","badge","getUserBadgeStats","getBadgeStatistics","badgesByType","badgesByRarity","recentBadges","progressBadges","totalBadges","clearBadgeCache","getBadgeProgress","getAllBadgeDefinitionsWithProgress","userBadges","earnedBadgeIds","userBadge","earned","balanceService","getWaxBalance","balanceCache","lightApiBalances","waxBalance","formattedBalance","isCached","NotificationContext","notifications","setNotifications","confirmResolveRef","confirmDialog","setConfirmDialog","soundEnabled","setSoundEnabled","saved","maxNotifications","addNotification","notification","newNotification","updated","removeNotification","resolveConfirm","clearAllNotifications","showWarning","showInfo","confirm","confirmText","cancelText","toggleSound","ShoppingCart","login","purchaseNFT","batchPurchaseNFTs","cartItems","setCartItems","totals","setTotals","selectedItems","setSelectedItems","itemsPerTx","setItemsPerTx","useBatchPurchase","setUseBatchPurchase","loadCartData","newTotals","totalsError","handleCartChange","handleRemoveItem","newSet","unavailableItems","role","handleToggleSelection","selectedItemsList","successCount","failedItems","batchPurchases","saleId","getDefaultPreferences","detectSystemPreferences","reducedMotion","highContrast","largeText","screenReader","keyboardNavigation","isInitialized","loadPreferences","setupMediaQueryListeners","setupKeyboardNavigation","applyAccessibilitySettings","setupFocusManagement","systemPreferences","systemPrefs","detectScreenReader","speechSynthesis","reducedMotionMQ","updatePreference","mediaQueryListeners","highContrastMQ","keyboardNavigationActive","classList","remove","announceToScreenReader","getElementDescription","savePreferences","preference","allPreferences","setAriaLabel","setAriaDescribedBy","describedById","setAriaExpanded","expanded","setAriaSelected","setAriaChecked","setAriaHidden","focusElement","focusStack","restoreFocus","lastFocused","trapFocus","focusableElements","getFocusableElements","el","trapFocusElements","tabIndex","originalTabIndex","firstElement","lastElement","releaseFocusTrap","focusableSelectors","offsetParent","announcement","ariaLabel","registerKeyboardShortcut","matchesShortcut","shortcut","modifiers","ctrl","meta","calculateLuminance","g","rNorm","gNorm","bNorm","rLinear","gLinear","bLinear","calculateContrastRatio","color1","color2","rgb1","hexToRgb","rgb2","lum1","lum2","checkColorContrast","foreground","background","hex","meetsContrastRequirements","AA","normal","large","AAA","suggestAccessibleColors","suggestions","fgRgb","bgRgb","adjustment","newFg","adjustBrightness","ratio","rgb","factor","adjust","newR","newG","newB","padStart","parsed","mq","AccessibilitySettings","setPreferences","currentPrefs","firstButton","handlePreferenceChange","newPreferences","preferenceNames","handleClose","onKeyDown","strokeLinecap","strokeLinejoin","strokeWidth","defaults","Navigation","logout","isMobileMenuOpen","setIsMobileMenuOpen","isScrolled","setIsScrolled","cartCount","setCartCount","isCartOpen","setIsCartOpen","isWalletDropdownOpen","setIsWalletDropdownOpen","isAccessibilitySettingsOpen","setIsAccessibilitySettingsOpen","isDarkMode","setIsDarkMode","userSettings","darkMode","setWaxBalance","setUserBadges","lastBalanceUpdate","setLastBalanceUpdate","isDisplayOptionsExpanded","setIsDisplayOptionsExpanded","isMoreDropdownOpen","setIsMoreDropdownOpen","isBadgeCategoryExpanded","setIsBadgeCategoryExpanded","walletDropdownRef","moreDropdownRef","handleScroll","scrollY","toggleDarkMode","newDarkMode","initialSettings","emailNotifications","priceAlerts","marketingEmails","language","updateCartCount","toggleMobileMenu","closeMobileMenu","closeWalletDropdown","fetchWaxBalance","badgeResult","handleClickOutside","Link","alignItems","justifyContent","padding","fontSize","flexDirection","gap","badgeDef","isEarned","borderRadius","border","opacity","fontWeight","open","onMouseEnter","onMouseLeave","flexWrap","fontStyle","marginTop","LandingPage","serviceWorkerReady","subscribed","checkSupport","permissionState","Notification","registerServiceWorker","checkExistingSubscription","swFile","serviceWorkerRegistration","serviceWorker","register","ready","handleServiceWorkerMessage","pushSubscription","pushManager","getSubscription","validateSubscription","requestPermission","previousPermission","unsubscribe","subscribeOptions","userVisibleOnly","applicationServerKey","vapidPublicKey","urlBase64ToUint8Array","subscriptionData","p256dh","arrayBufferToBase64","getKey","auth","subscriptionTime","sendSubscriptionToServer","removeSubscriptionFromServer","showLocalNotification","requireInteraction","silent","onclose","base64String","base64","rawData","atob","outputArray","Uint8Array","buffer","bytes","binary","byteLength","btoa","getNotificationPreferences","stored","auctionUpdates","newListings","marketTrends","systemNotifications","subscription","valid","subscriptionId","isSubscribed","setVapidKey","testNotification","sendPriceAlert","currentPrice","targetPrice","sendTransactionNotification","transactionId","watchlistService","browser","sound","loadFromStorage","startPriceMonitoring","requestNotificationPermission","watchlist","STORAGE_KEY","ALERTS_KEY","NOTIFICATIONS_KEY","storageKeys","saveToStorage","watchlistSize","alertsCount","addToWatchlist","watchlistItem","alertType","lastPrice","removeFromWatchlist","getWatchlist","isInWatchlist","setPriceAlert","alert","lastTriggered","removePriceAlert","getPriceAlert","updateNotificationSettings","getNotificationSettings","isEndpointDisabled","failure","endpointFailures","DISABLE_DURATION","recordEndpointFailure","FAILURE_WINDOW","MAX_FAILURES","recordEndpointSuccess","notifyEndpointsDisabled","lastNotification","CustomEvent","disabledEndpoints","k","retryTime","getEndpointStatus","disabledUntil","priceCheckInterval","checkPriceAlerts","stopPriceMonitoring","every","disabledCount","pricePromises","fetchCurrentPrice","priceChange","enabled","checkAlertCondition","nftName","priceCache","getCurrentPrice","fetchAtomicHubPrice","fetchNeftyBlocksPrice","fetchTemplateFloorPrice","w","failureCount","assetUrl","assetResponse","assetData","floorUrl","floorResponse","floorData","shouldTrigger","changePercent","direction","triggerAlert","playNotificationSound","audio","Audio","play","getWatchlistStats","totalItems","activeAlerts","priceChanges","change","averagePriceChange","clearWatchlist","exportWatchlist","exportedAt","importWatchlist","mantisa","getPrettyValue","digits","separator","charAt","len","PowerUpStateResource","Struct","super","default_block_cpu_limit","UInt64","default_block_net_limit","allocated","Number","weight_ratio","dividing","target_weight_ratio","reserved","utilization_increase","base","multiplier","price_function","new_exponent","util_weight","price_integral_delta","start_utilization","end_utilization","Asset","fromUnits","units","subtracting","start_u","end_u","Int64","adding","lt","determine_adjusted_utilization","decay_secs","utilization_timestamp","ts","TimePointSec","toMilliseconds","toNumber","delta","exp","__decorate","field","PowerUpStateResourceCPU","per_day","us_per_day","usage","us","frac_by_us","frac_by_ms","price_per","price_per_us","price_per_ms","ms_per_day","virtual_block_cpu_limit","weight_to_us","multiplying","BNPrecision","us_to_weight","converted","cpu","fromFloat","min_payment","PowerUpStateResourceNET","bytes_per_day","frac_by_bytes","frac_by_kb","kilobytes","price_per_byte","price_per_kb","kb_per_day","virtual_block_net_limit","weight_to_bytes","bytes_to_weight","net","PowerUpState","PowerUpAPI","get_state","v1","chain","get_table_rows","Connector","ExchangeState","RAMState","quote","get_input","RAMAPI","REXState","total_lent","total_lendable","lent","unlent","total_unlent","rex","total_rex","exchange","lendable","cpu_price_per_ms","cpu_price_per_us","net_price_per_kb","net_price_per_byte","unit","unitPrice","total_rent","REXAPI","Resources","sampleAccount","powerup","ram","APIClient","FetchProvider","getSampledUsage","get_account","cpu_limit","mul","byte","net_limit","cpu_weight","net_weight","__className","Powerup","Name","UInt32","Buyrambytes","ChainFeatures","defaultTranslations","en","checking","cost","resolving","ko","chains","aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906","features","BuyRAM","PowerUp","TransactPluginAutoCorrect","AbstractTransactPlugin","translations","iterations","ui","addHook","TransactHookTypes","beforeSign","request","run","t","getTranslate","checkingPromise","prompt","default","client","permissionLevel","correctedPromise","correct","modified","race","resolved","compute_transaction","transaction","exception","processed","except","getException","net_usage","needed","billed","billable","needs","buyram","details","cpu_usage","newAction","Action","signer","payer","receiver","newRequest","prependAction","net_frac","cpu_frac","max_payment","modifiedRequest","ram_needed","ram_quota","ram_usage","ramAction","ramPrice","transactionService","executeTransaction","generateTransactionId","wharfKitService","getAccountName","emitEvent","updateTransactionStatus","performTransaction","blockNum","cpuUsage","netUsage","skipConfirmation","waitForConfirmation","retryTransaction","retryTimeouts","newTransactionId","newTransaction","cancelTransaction","getTransaction","getTransactionsByAccount","getTransactionsByType","getPendingTransactions","clearOldTransactions","clearListeners","_timeout","txResult","cpu_usage_us","net_usage_words","_transactionId","WharfKitService","initializeSessionKit","restoreSession","appName","WebRenderer","walletPlugins","WalletPluginAnchor","WalletPluginCloudWallet","WalletPluginWombat","transactPlugins","sessionKit","SessionKit","restored","restore","currentSession","isLoggedIn","getSession","getActor","getPermission","safeGetActor","safeGetPermission","actionsCount","broadcast","expireSeconds","intended_delphi_median","taker_marketplace","purchases","totalPrice","purchase","transferTokens","tokenContract","buildTokenTransferActions","bulkTransferNFT","executeCraftingTransaction","craftingData","craftId","craft_green","craft_orange","craft_purple","craft_amber","craft_chartreuse","craft_violet","craft_teal","craft_vermillion","craft_magenta","recipe","individualPxjCost","pxjCost","booster","craftAssetIds","ingredient","ingredientAssets","assetsPerCraft","craft_id","user_name","getWalletContext","getTransactionHistory","transferNFT","marketContract","buildPurchaseActions","craftingResult","getAPIClient","controls","loop","autoPlay","processUrl","processedVideoUrl","processedImageUrl","getPlaceholderSrc","finalImageUrl","poster","shareImageGenerator","backgroundColor","textColor","accentColor","generateAchievementShareImage","legendaryCount","username","defaultConfig","topBadges","rarityOrder","legendary","epic","rare","svg","rarityColor","toLocaleDateString","generateInventoryShareImage","topItems","downloadImage","dataUrl","download","click","convertToPNG","svgDataUrl","Image","canvas","ctx","getContext","drawImage","toDataURL","downloadShareImage","ShareModal","shareUrl","defaultShareText","copied","setCopied","shareText","setShareText","generatingImage","setGeneratingImage","getRandomizedShareText","messages","currentRandomText","setCurrentRandomText","finalDefaultText","finalShareUrl","copyToClipboard","clipboard","writeText","readOnly","hashtags","twitterUrl","facebookUrl","redditUrl","telegramUrl","emailUrl","imageDataUrl","pngDataUrl","convertShareImageToPNG","chatService","blacklistedAccounts","bannedWords","trustedDomains","maxMessageLength","minTimeBetweenMessages","calculateMessageCost","isSponsored","characterCount","hasPixalPFP","checkPixalPFPOwnership","sponsoredCost","SPONSORED_COST_PIXAL_HOLDER","SPONSORED_COST_NON_HOLDER","baseCost","characterCost","totalCost","discount","BASE_COST_PIXAL_HOLDER","BASE_COST_NON_HOLDER","characterMultiplier","MIN_MESSAGE_COST","maxCostForHolders","sendMessage","collectionTag","validateMessageForSending","finalCost","userLastMessageTime","transferAction","PXJ_CONTRACT","CHAT_ACCOUNT","PXJ_SYMBOL","updateRateLimit","messageCache","messageLength","getMessages","parseTransferToMessage","applyFilters","isMessageBlockedByModeration","messageType","collectionMatch","errorObj","minPxjAmount","maxPxjAmount","hideSpam","isSpamMessage","showOnlySponsored","moderationSettings","word","userMessages","userRateLimit","blacklistAccount","unblacklistAccount","getUserAvatar","pixalAssets","lowerMessage","bannedWord","lastMessageTime","timeDiff","verifyLinksInMessage","urls","domain","trustedDomain","updateModerationSettings","getModerationSettings","span","ListingChatModal","messagesEndRef","setMessages","newMessage","setNewMessage","isSending","setIsSending","costInfo","setCostInfo","showPriceInfo","setShowPriceInfo","listingTag","scrollToBottom","scrollIntoView","behavior","loadMessages","refresh","listingMessages","updateCostInfo","messageWithTags","txId","debounceTimer","handleEscape","toLocaleString","maxLength","getIPFSUrl","getAssetImageUrl","imgData","getAssetVideoUrl","videoData","getTemplateImageUrl","getTemplateVideoUrl","getSaleAssetImageUrl","getSaleAssetVideoUrl","NFTDetailsModal","usdPrice","navigate","useNavigate","localUsdPrice","setLocalUsdPrice","setIsInCart","setIsInWatchlist","showShareModal","setShowShareModal","showSendOfferModal","setShowSendOfferModal","showChatModal","setShowChatModal","setSession","setCollectionStats","recentActivity","setRecentActivity","setPriceHistory","initSession","fetchCollectionStats","fetchRecentActivity","fetchPriceHistory","avgPrice","recentSales","activities","history","checkStatus","updateCartStatus","unsubscribeWatchlist","handleAssetClick","point","maxPrice","minPrice","priceRange","activity","priceValue","marginRight","origin","NFTComparison","initialNFTs","searchTerm","setSearchTerm","searchResults","setSearchResults","isSearching","setIsSearching","comparisonMetrics","setComparisonMetrics","showPrice","showRarity","showAttributes","showCollection","showSeller","getRarityColor","getAttributeValue","query","pixelJourney","friedFactory","cryptoMuffins","filtered","searchNFTs","addNFTToComparison","toggleMetric","removeNFTFromComparison","allAttributes","getAllAttributes","SocialShare","shareMessages","getRandomShareText","randomIndex","setDefaultShareText","currentPath","pathname","subject","ErrorMessage","onRetry","showRetry","errorConfig","isRetrying","finalConfig","displayTitle","displayMessage","actionText","reload","SEARCH_HISTORY_KEY","AdvancedSearch","onSearchChange","showFilters","onFilterChange","showSuggestions","setShowSuggestions","searchHistory","setSearchHistory","setFilters","rarities","sortBy","showAdvancedFilters","setShowAdvancedFilters","searchInputRef","suggestionsRef","selectedSuggestionIndex","setSelectedSuggestionIndex","savedHistory","saveToHistory","term","newHistory","clearHistory","handleSearchChange","handleSearchSubmit","blur","handleSuggestionClick","suggestion","handleKeyDown","allSuggestions","handleFilterChange","newFilters","updatedFilters","onFocus","actualIndex","resetFilters","Marketplace","filteredNfts","setFilteredNfts","setLoading","activeCategory","setActiveCategory","usdPrices","setUsdPrices","selectedNft","setSelectedNft","isModalOpen","setIsModalOpen","setCurrentPage","totalPages","setTotalPages","allNfts","setAllNfts","isFilterSidebarOpen","setIsFilterSidebarOpen","setPriceRange","selectedSchemas","setSelectedSchemas","setSortBy","dateRange","setDateRange","searchSuggestions","setSearchSuggestions","availableCollections","setAvailableCollections","availableSchemas","setAvailableSchemas","selectedCollections","setSelectedCollections","selectedAttributes","setSelectedAttributes","availableAttributes","setAvailableAttributes","collapsedSections","setCollapsedSections","watchlistItems","setWatchlistItems","loadMoreLoading","setLoadMoreLoading","isComparisonOpen","setIsComparisonOpen","shareNft","setShareNft","isShareModalOpen","setIsShareModalOpen","offerNft","setOfferNft","isOfferModalOpen","setIsOfferModalOpen","chatNft","setChatNft","isChatModalOpen","setIsChatModalOpen","openDropdowns","setOpenDropdowns","zoomedImage","setZoomedImage","showImageZoom","setShowImageZoom","toggleDropdown","closeAllDropdowns","handleMediaZoom","mediaUrl","mediaType","processedUrl","loadMarketplaceData","category","loadAvailableSchemas","schemaNames","loadUsdPrices","nfts","prices","nftsNeedingPrices","generateSearchSuggestions","queryLower","suggestionList","handleAdvancedFilterChange","updateCartItems","updateWatchlistItems","handleLoadMore","closeFilterSidebar","handleSchemaToggle","newSchemas","newCollapsed","handleCollectionToggle","newSelected","handleAttributeToggle","attributeType","attributeValue","currentValues","newValues","toggleSectionCollapse","sectionName","filteredAndSortedNfts","searchLower","selectedValues","nftAttribute","attributeMap","availableValues","filteredValues","filteredSchemas","allSchemas","applyAdvancedFilters","priceA","priceB","handlePurchase","handleSellerClick","handleCollectionClick","handleSelectItem","handleSelectAll","handleBulkAddToCart","_","Rewards","onPageChange","ListingModal","onSuccess","bundleNfts","setPrice","isBundle","setIsBundle","bundleName","setBundleName","isListing","setIsListing","waxCurrency","mint_number","bundleNft","onSubmit","priceFloat","priceString","settlement_symbol","TransferModal","setRecipient","setMemo","isTransferring","setIsTransferring","validateWaxAccount","BurnModal","setConfirmText","isBurning","setIsBurning","setStep","requiredConfirmText","resetModal","asset_owner","autoComplete","BulkListingModal","listingPrices","setListingPrices","bulkPrice","setBulkPrice","listingProgress","setListingProgress","priceSuggestions","setPriceSuggestions","loadingSuggestions","setLoadingSuggestions","handlePriceChange","fetchPriceSuggestions","collectionGroups","groups","collectionEntries","successfulCollections","collectionNFTs","primaryError","applyDefaultPricing","isValidApiResponse","sortedPrices","q1Index","q3Index","iqr","lowerBound","upperBound","filteredPrices","medianPrice","suggestedPrice","confidence","sampleSize","sortedNfts","sorted","getTotalValue","invalidPrices","completedBatches","newPrices","BulkTransferModal","transferProgress","setTransferProgress","acc","recipientTrimmed","nftCount","DistributeModal","distributions","setDistributions","bulkAddresses","setBulkAddresses","isDistributing","setIsDistributing","distributeProgress","setDistributeProgress","sortedDistributions","validDistributions","dist","readyToDistribute","addresses","addressList","addr","handleBulkAddressesChange","handleRecipientChange","invalidDistributions","totalTransfers","completedTransfers","BulkBurnModal","burnProgress","setBurnProgress","waxrockPixals","burnableNfts","waxrockNames","INGREDIENT_TEMPLATES","pxj","wuf","pxjUpgrade","CRAFTING_RECIPES","resultTemplateId","getTemplateById","inventoryService","fetchInventory","inventoryMap","fetchBalances","wufBalance","pxjBalances","wufBalances","emptyBalances","getIngredientQuantity","inv","getIngredientAssetIds","canCraftRecipe","getMaxCraftableQuantity","maxFromIngredients","possibleFromThisIngredient","maxFromPxj","updateInventoryAfterCraft","usedIngredients","pxjSpent","startBackgroundInventoryLoad","isBackgroundLoading","lastUpdate","virtualLibraryTimestamp","VIRTUAL_LIBRARY_CACHE_DURATION","promise","loadFullInventoryInBackground","backgroundLoadingPromises","convertNFTAssetToInventoryNFT","allNFTs","convertedAssets","virtualLibrary","getInventoryPage","virtualData","totalCount","isBackgroundLoadingInProgress","getVirtualLibraryStats","clearVirtualLibrary","getCachedInventory","getCachedBalances","CraftingModal","activeTab","setActiveTab","selectedRecipe","setSelectedRecipe","craftingQueue","setCraftingQueue","isProcessing","setIsProcessing","setInventory","setBalances","craftQuantity","setCraftQuantity","maxCraftable","setMaxCraftable","loadInventoryData","inventoryData","balanceData","getInventoryQuantity","calculateMaxCraftable","sortedInventory","templateA","templateB","typeA","typeB","canCraft","pxjNeeded","handleUpgrade","createPortal","ing","idx","existingIndex","newQueue","removeFromQueue","recipeId","queueItem","canProceed","neededQuantity","craftError","offerService","placeBuyOffer","offerAmount","offerFloat","atomicMarketContract","transactionResult","getBuyOffersForAsset","getUserBuyOffers","cancelBuyOffer","offerId","offer_id","acceptBuyOffer","declineBuyOffer","getOfferStateText","ViewOffersModal","offers","setOffers","acceptingOffer","setAcceptingOffer","loadOffers","offersData","sortedOffers","formatTimeAgo","offerTime","diffMs","diffHours","diffDays","diffMinutes","handleAcceptOffer","NeftyBlendService","recyclePixal","blockInfo","getBlockInfo","expiration","getExpirationTime","ref_block_num","ref_block_prefix","max_net_usage_words","max_cpu_usage_ms","delay_sec","context_free_actions","BLEND_CONTRACT","RECYCLE_COST","ATOMIC_ASSETS_CONTRACT","claimer","blend_id","RECYCLE_BLEND_ID","transferred_assets","own_assets","transaction_extensions","unpackPixelIngredientPack","PACK_RECIPE_ID","unpackGenericPack","GENERIC_PACK_BLEND_ID","waxEndpoints","chainInfo","headBlockId","head_block_id","refBlockNum","last_irreversible_block_num","blockIdBytes","endpointError","executeRecycle","wallet","blendId","recycleCost","walletActor","executeUnpack","isPackNFT","templateName","hasPackKeyword","keyword","isNeftyBlocksPack","PACK_TEMPLATE_ID","getPackType","unpackPixelPack","unpackPixelPacksBulk","isPixelPack","UnpackModal","walletSession","onUnpackComplete","isUnpacking","setIsUnpacking","packNFTs","canUnpack","walletState","setWalletState","BulkAuctionModal","walletContext","startingPrice","setStartingPrice","durationWeeks","setDurationWeeks","durationDays","setDurationDays","durationHours","setDurationHours","durationMinutes","setDurationMinutes","auctionMemo","setAuctionMemo","isSubmitting","setIsSubmitting","calculateTotalDuration","updateDurationComponent","component","clampedValue","getMaxValue","formatDurationDisplay","totalDurationSeconds","startingBidAmount","starting_bid","durationDisplay","rwaxService","getFeeTokens","WAX_API_BASE","alcorTokenIds","alcorRates","fetchAlcorTokenRates","feeTokens","feeMatch","waxValue","calculateLiveWaxValue","exchange_rate","exchangeRate","feeAmount","wax_value","tokenIds","getAssetPoolInfo","lower_bound","upper_bound","key_type","issuedTokens","issued_tokens","getTokenizedAssets","attributeFilters","recent","order_by","search_type","offer_type","verified","favorites","user","only","rwax_contract","rwax_symbol","ATOMIC_API_BASE","mint","collectionImage","verification","blacklisted","transferable","burnable","mutableData","immutableData","rarityScore","attributesFloor","rwax","tokenName","redeemAmount","getAssetWPIXALAmount","requestBody","index_position","show_payer","table_key","getUserPixalAssets","imageSources","mutable_data","executeTokenization","feeToken","wharfkit","fee_currency","executeRedemption","redeemer","TokenizeFeeModal","setFeeTokens","selectedFeeToken","setSelectedFeeToken","loadFeeTokens","waxToken","stakingService","stakeNFTsPixelJourney","farmName","FARMS_CONTRACT","farmname","assets_to_stake","executeTransactionWithRetry","farm_name","asset_count","gas_used","unstakeNFTsPixelJourney","stakeNFTsBatch","successful_transactions","failed_transactions","total_gas_used","createBatches","MAX_BATCH_SIZE","batchResult","total_assets","successful","failed","unstakeNFTsBatch","claimAllRewards","getStakingInfo","stakedResponse","userStakeData","stakedAssets","staked_assets","pendingRewards","pending_rewards","stakedNfts","stake_time","rewards_per_hour","rewards","reward","totalStakingPower","estimatedDailyRewards","WUF_CONTRACT","staked_nfts","total_staking_power","estimated_daily_rewards","stakeTokens","PXJ_FARM_NAME","TOKEN_FARMS_CONTRACT","unstakeTokens","claimTokenFarmRewards","getTokenFarmInfo","farmData","creator","time_created","staking_token","incentive_count","total_staked","vesting_time","last_update_time","getTokenStakingInfo","stakerData","staked_amount","last_claim_time","calculateOptimalStakingStrategy","stakingInfo","stakedAssetIds","availableResponse","availableData","availableNfts","calculateRewardsPerHour","templateRewards","getTemplateRewards","recommendedStakes","rarityMultiplier","getRarityMultiplier","getTemplateRarity","dailyReturn","expected_daily_return","calculateStakingPriority","totalExpectedReturn","stake","recommended_stakes","total_expected_daily_return","optimization_tips","generateOptimizationTips","available_nfts","RETRY_ATTEMPTS","RETRY_DELAY","hourly_rewards","tips","rarityCount","ProgressiveImage","isLoaded","setIsLoaded","isError","setIsError","isInView","setIsInView","imgRef","videoRef","getLoadingPlaceholder","getErrorPlaceholder","observer","IntersectionObserver","isIntersecting","disconnect","rootMargin","currentRef","handleLoad","handleError","objectFit","onLoadedData","NFTCard","dropdownOpen","onNFTClick","onCollectionClick","onSchemaClick","onToggleSelection","onDropdownToggle","onListingOpen","onTransferOpen","onBurnOpen","onAuctionOpen","onRecyclePixal","onCraftingOpen","onViewOffers","onUnpackPixelPack","onStakeOpen","onTokenizePixal","onImageZoom","isDropdownOpen","isPixal","isIngredient","isWaxRockPixal","Inventory","listingModalOpen","setListingModalOpen","transferModalOpen","setTransferModalOpen","burnModalOpen","setBurnModalOpen","showBulkListingModal","setShowBulkListingModal","showBulkTransferModal","setShowBulkTransferModal","showBulkDistributeModal","setShowBulkDistributeModal","showBulkBurnModal","setShowBulkBurnModal","showUnpackModal","setShowUnpackModal","showBulkAuctionModal","setShowBulkAuctionModal","showAuctionModal","setShowAuctionModal","actionNFT","setActionNFT","isMultiSelectMode","setIsMultiSelectMode","setDropdownOpen","craftingModalOpen","setCraftingModalOpen","craftingIngredient","setCraftingIngredient","viewOffersModalOpen","setViewOffersModalOpen","offersNFT","setOffersNFT","tokenizeModalOpen","setTokenizeModalOpen","tokenizeNFT","setTokenizeNFT","debouncedSearchTerm","setDebouncedSearchTerm","setFilter","selectedCollection","setSelectedCollection","selectedSchema","setSelectedSchema","selectedTemplate","setSelectedTemplate","sortOrder","setSortOrder","collectionSearchTerm","setHasMore","loadingMore","setLoadingMore","loadingAll","setLoadingAll","ITEMS_PER_PAGE","loadInventory","apiOptions","apiResponse","itemsReceived","totalAvailable","inventoryNFTs","loadMoreItems","loadAllItems","currentInventoryLength","startPage","allNewItems","hasMoreItems","totalRequests","requestPromises","requestPages","requestPromise","pages","currentItems","responses","batchHasItems","newInventory","previousCount","newCount","addedCount","closest","adjustDropdownPosition","dropdown","rect","getBoundingClientRect","viewportWidth","handleNFTClick","handleSchemaClick","toggleItemSelection","handleBulkUnpackPixelPacks","pixelPackNFTs","filteredInventory","matchesSearch","matchesFilter","filteredCount","goToNextPage","goToPrevPage","allIds","stakeableNFTs","nonStakeableCount","pixelPackCount","handleRecyclePixal","handleCraftingOpen","handleViewOffers","handleUnpackPixelPack","handleStakeOpen","handleTokenizePixal","pixals","boxShadow","onMouseOver","transform","onMouseOut","marginLeft","TruncatedText","isExpanded","setIsExpanded","truncatedText","ipfsRateLimiter","requestImage","queuedRequest","requestQueue","processQueue","activeRequests","MAX_CONCURRENT_REQUESTS","REQUEST_TIMEOUT","timeSinceLastRequest","lastRequestTime","MIN_REQUEST_INTERVAL","processRequest","finally","gateway","selectBestGateway","makeRequest","updateGatewayStats","extractGateway","MAX_RETRIES","finalError","originalUrl","extractIPFSHash","_url","availableGateways","gatewayStats","isBlocked","blockUntil","errorCount","statsA","statsB","requestCount","lastRequest","errorRate","GATEWAY_COOLDOWN","getStatus","queueLength","imageService","generateFallbackSVG","displayText","getDefaultText","getIconForType","iconSize","loadImage","fallbackUsed","imageCache","existingPromise","loadingPromises","loadingPromise","performImageLoad","isIPFSUrl","rateLimitedUrl","addToCache","fallbackSrc","MAX_CACHE_SIZE","firstKey","preloadImages","getOptimizedImageUrl","optimizeIPFSUrl","FallbackImage","imageSrc","setImageSrc","loadResult","setLoadResult","loadingRef","combinedStyle","combinedClassName","position","zIndex","borderTop","NFTImage","CollectionImage","TokenImage","TIER_OPTIONS","costFormatted","benefits","CollectionTierModal","selectedTier","setSelectedTier","setCollectionName","userBalance","setUserBalance","balanceLoading","setBalanceLoading","fetchUserBalance","selectedTierData","affordable","canAfford","benefit","Collections","setCollections","setError","showTierModal","setShowTierModal","displayedCount","setDisplayedCount","showTierPerks","setShowTierPerks","totalFetched","setTotalFetched","pxApprovedProjects","setPxApprovedProjects","fetchPxApprovedImages","currentProjects","projectsNeedingImages","project","collectionData","updatedProjectsWithImages","prevProjects","up","fetchMarketDataForCollections","updatedCollections","collectionIndex","floorPriceData","marketStats","market_cap","loading_market_data","fetchCollections","mappedCollections","filteredCollections","filteredPxApproved","displayedCollections","hasMoreCollections","newCollections","pixeljourney","quickLinks","ownerMessage","discordUrl","learnAboutGrid","friedfactory","crptomuffins","akufishheads","pantheon","pocketsizedp","nimasodyssey","QuickLinks","tierInfo","badgeConfig","hasQuickLinks","marginBottom","gridTemplateColumns","margin","lineHeight","isMinimized","setIsMinimized","unreadCount","setUnreadCount","lastReadTimestamp","setLastReadTimestamp","setIsSponsored","autoRefresh","setAutoRefresh","refreshInterval","setRefreshInterval","showSponsoredInfo","setShowSponsoredInfo","showEmojiPicker","setShowEmojiPicker","refreshIntervalRef","messageInputRef","insertFormatting","textarea","selectedText","beforeText","afterText","newCursorPos","setSelectionRange","renderMessageContent","unreadMessages","msg","latestMessage","chatFilters","fetchedMessages","calculateCost","messageToSend","formatTimestamp","diffMins","formatPxjAmount","getMessageTypeClass","emoji","insertEmoji","onKeyPress","ImageZoom","imageName","CollectionDetail","useParams","setCollection","setSchemas","setTemplates","analytics","setAnalytics","volumePeriod","setVolumePeriod","volumeData","setVolumeData","loadingVolume","setLoadingVolume","marketCapCurrency","setMarketCapCurrency","waxToUsdRate","setWaxToUsdRate","holders","setHolders","holdersPage","setHoldersPage","loadingMoreHolders","setLoadingMoreHolders","hasMoreHolders","setHasMoreHolders","topSales","setTopSales","displayedSales","setDisplayedSales","salesPage","setSalesPage","salesPerPage","hasMoreSales","setHasMoreSales","similarCollections","setSimilarCollections","atomicMarketStats","setAtomicMarketStats","filteredTemplates","matchesSchema","nameA","nameB","issued_supply","fetchVolumeData","numUsers","usdMarketCap","waxMarketCap","numAssets","handleVolumePeriodChange","periods","nextPeriod","newVolumeValue","loadCollectionData","collectionInfo","schemasData","templatesData","analyticsData","enhancedStats","similarData","holdersData","processedMarketStats","combinedAnalytics","validPrices","loadTemplates","newDisplayedSales","getImageUrl","imgPath","formatSaleDate","dateString","year","day","renderMediaElement","getVideoUrl","getTemplateImage","xmlns","minimumFractionDigits","maximumFractionDigits","holder","nextPage","newHolders","similar","format","TemplateDetail","setTemplate","setSchema","setAssets","assetsLoading","setAssetsLoading","loadTemplateData","templateData","schemaData","loadAssets","formatDate","renderAttributeValue","minted_at_time","AssetDetail","setAsset","listing","setListing","listingLoading","setListingLoading","setUsdPrice","loadAssetData","checkListingStatus","marketplaceData","saleData","nftAsset","waxPriceResponse","waxPriceData","strValue","transferred_at_time","burned_by_account","burned_at_time","backed_tokens","ListingDetail","isDetailsModalOpen","setIsDetailsModalOpen","saleState","setSaleState","loadListingData","waxPrice","TransactionDetails","setTransaction","setBlockInfo","fetchTransactionDetails","parsedTransaction","trx","receipt","traces","listing_price_to_assert","blockResponse","block_num_or_id","blockData","block_id","producer","transaction_count","handleUserClick","trace","StakingModal","setAmount","resourceName","actionName","stake_net_quantity","stake_cpu_quantity","unstake_net_quantity","unstake_cpu_quantity","RAMModal","setRamPrice","userRamBytes","setUserRamBytes","isLoadingData","setIsLoadingData","fetchRAMData","ramMarketResponse","ramMarketData","ramMarket","ramSupply","accountResponse","accountData","inputLabel","inputPlaceholder","quant","TokenTransferModal","recipients","setRecipients","isBulkTransfer","setIsBulkTransfer","validateAmount","numValue","maxBalance","getAmountPerRecipient","getTokenPrecision","decimalPart","invalidRecipients","formattedAmountPerRecipient","recipientAccount","formattedAmount","successMessage","parsedRecipients","rec","balanceAmount","PortfolioAnalytics","portfolioMetrics","setPortfolioMetrics","collectionPerformance","setCollectionPerformance","insights","setInsights","timeSeriesData","setTimeSeriesData","selectedTimeframe","setSelectedTimeframe","selectedView","setSelectedView","generateTimeSeriesData","metrics","targetDate","setDate","getDate","targetTimestamp","relevantTransactions","valueAtDate","investedAtDate","totalInvested","invested","calculatePortfolioMetrics","purchaseTransaction","investedAmount","profitLoss","profitLossPercentage","sortedByPerformance","bestPerforming","worstPerforming","averageHoldingTime","totalNFTs","uniqueCollections","bestPerformingCollection","worstPerformingCollection","generateInsights","newInsights","bestCollection","largestCollection","formatWAX","formatPercentage","investedY","strokeDasharray","insight","defaultTxSettings","waxToCpuFrac","cpuAllocation","waxToNetFrac","estimateCpuWithElasticLimit","block_cpu_limit","base_limit","elastic_multiplier","cpuMicroseconds","cpuMs","PxBadges","setBadges","collapsedCategories","setCollapsedCategories","badgeStats","setBadgeStats","loadUserBadges","categories","allBadgeDefinitions","categoryMap","holdings","ownership","trading","social","achievement","special","earnedBadge","cat","achievementSeries","series","pixalCollectorBadges","steps","waxrockCollectorBadges","earnedCount","isCollapsed","categoryId","toggleCategory","rarityClass","getRarityClass","alcorService","getAllTokens","tokensCache","tokensCacheExpiry","ALCOR_API_BASE","logo","WAX_TOKEN_ID","WAX_SYMBOL","WAX_CONTRACT","WPIXAL_TOKEN_ID","WPIXAL_SYMBOL","WPIXAL_CONTRACT","getSwapQuoteForPair","inputToken","outputToken","tradeType","slippageTolerance","token_id","swaps","swap","input_amount","maxSent","output_amount","output","minReceived","price_impact","priceImpact","minimum_received","route","poolId","pool_id","token_in","token_out","amount_in","amount_out","input_token","output_token","getExactOutputQuote","getSwapQuote","getExchangeRate","approximateWpixal","executeSwap","maxWaxInput","executeSwapForPair","inputAmount","outputAmount","checkLiquidity","estimateWaxNeeded","TokenDropdown","selectedToken","onTokenSelect","availableTokens","filterByAvailable","setIsOpen","setTokens","alcorTokens","setAlcorTokens","dropdownRef","loadAlcorTokens","fallbackTokens","favoredTokenConfigs","PXJ","WPIXAL","WAX","KING","WAXUSDC","WAXWBTC","WUF","LSWAX","BRWL","TLM","WOMBAT","getTokenConfig","favoredToken","alcorToken","getTokenIcon","PIXAL","defaultTokens","lightApiResponse","tokenOptions","tokensToProcess","loadTokenBalances","selectedTokenData","selectedTokenConfig","handleTokenSelect","SwapInterface","isModal","initialSellAmount","initialBuyAmount","sellAmount","setSellAmount","buyAmount","setBuyAmount","sellToken","setSellToken","buyToken","setBuyToken","quoteData","setQuoteData","slippage","setSlippage","showSlippageSettings","setShowSlippageSettings","isLoadingBalances","setIsLoadingBalances","TACO","SHING","YEET","DMT","FGL","SOREN","getTokenInfo","loadBalances","newBalances","tokenInfo","defaultBalances","balanceInterval","getQuote","sellTokenInfo","buyTokenInfo","handlePercentageClick","tempToken","tempAmount","expectedOutput","swapTransaction","UserProfile","setTransactions","collectionAvatars","setCollectionAvatars","setUserStats","setAccountData","resourceData","setResourceData","tokenBalances","setTokenBalances","selectedTokens","setSelectedTokens","bulkSellLoading","setBulkSellLoading","lastTransactionDate","setLastTransactionDate","transactionFilter","setTransactionFilter","customDateRange","setCustomDateRange","searchQuery","setSearchQuery","transactionsPerPage","isExporting","setIsExporting","isLoadingTransactions","setIsLoadingTransactions","transactionError","setTransactionError","exportError","setExportError","stakingModal","setStakingModal","ramModal","setRAMModal","tokenTransferModal","setTokenTransferModal","accountToBoost","setAccountToBoost","setCpuAllocation","powerupAmount","setPowerupAmount","txIsLoading","setTxIsLoading","getResources","setResources","resourcesAreLoading","setResourcesAreLoading","targetAccount","total_resources","self_delegated_bandwidth","refund_request","voter_info","useGetAccountResources","powerupState","setPowerupState","powerupStateIsLoading","setPowerupStateIsLoading","powerupStateData","assumed_stake_weight","initial_weight_ratio","initial_timestamp","target_timestamp","powerup_days","min_powerup_fee","useGetPowerupState","setChainInfo","chainInfoIsLoading","setChainInfoIsLoading","chainInfoData","server_version","chain_id","last_irreversible_block_id","head_block_time","head_block_producer","block_net_limit","server_version_string","fork_db_head_block_num","fork_db_head_block_id","useGetChainInfo","loadTransactions","testAccount","realTransactions","typedTransactions","apiServiceAvailable","getUserTransactionsType","loadUserStats","realStats","fetchCollectionAvatars","fetchAccountData","fetchLastTransactionDate","EXCLUDED_CONTRACTS","TOP_TOKENS","fetchTokenBalancesFallback","validTopTokens","balanceWithValue","fetchUserBadges","fetchTokenBalances","balancesWithValues","validBalances","aIsTop","bIsTop","loadUserData","initializeData","calculateResourceUsage","currentUsed","openStakingModal","openRAMModal","closeTokenTransferModal","handleResourceSuccess","avatars","filteredTransactions","matchesAssetName","matchesCollection","matchesTxId","matchesFrom","matchesTo","txDate","startDate","endDate","setHours","daysAgo","comparison","paginatedTransactions","exportTransactions","mimeType","csvRows","blob","Blob","createObjectURL","revokeObjectURL","last_code_update","reputation","tierStatus","nextElementSibling","newSortBy","newSortOrder","hour","minute","pageNum","maxWax","newAmount","percent","setRefresh","maxPayment","setShowTxModal","setTxModalText","wharfSession","submitPowerupTx","allTokenKeys","totalPxjReceived","swapResults","swapQuote","from_token","from_contract","to_token","to_contract","pxjReceived","successfulSwaps","failedSwaps","openTokenTransferModal","UserProfileLookup","paramAccount","searchParams","useSearchParams","profileData","setProfileData","setAccountInfo","selectedNFT","setSelectedNFT","pixalFilters","setPixalFilters","Body","Eyes","Head","Mouth","PixelPet","Background","availableTraits","setAvailableTraits","contractBalances","balancesWithValue","calculateTokenValue","loadUserProfile","pixalNFTs","trait","availableTraitsObj","fetchWaxAccountInfo","firstTx","getAccountCreationDate","isVerified","calculateTotalValue","rareAssets","SEST","collectionFloorPrice","nftValue","getFilteredNFTs","handlePageChange","scrollTo","filteredNFTs","paginatedNFTs","getPaginatedNFTs","getTotalPages","permissions","pause","Packs","packs","setPacks","hasMoreNFTs","setHasMoreNFTs","apiPage","setApiPage","loadPacks","filteredPacks","pack","paginatedPacks","Watchlist","showAddAlert","setShowAddAlert","alertPrice","setAlertPrice","setAlertType","loadWatchlist","getPriceChangeIcon","addPriceAlert","Footer","links","ActivityStats","setRecentSales","setMarketStats","nftTradingStats","setNftTradingStats","recentTrades","setRecentTrades","setTopCollections","refreshing","setRefreshing","loadActivityData","loadStatsData","statsPromises","marketData","latestData","latestResult","total_sales","total_volume","active_listings","nftStats","topCollectionsData","topCollectionsByVolume","trade","handleRefresh","handleSaleClick","handleTradeClick","auctionService","subscriptions","startPolling","subs","stopPolling","isPolling","pollInterval","pollAuctionUpdates","POLL_INTERVAL","auctionIds","clearExpiredCache","fetchAuctionUpdates","subscribers","updates","requestResetTime","auctionCache","MAX_REQUESTS_PER_MINUTE","REQUEST_DELAY","current_bidder","getAuctionStatus","bid_count","last_bid_time","endTime","auctionResponse","fetchAuctionBidHistory","bids","bid_amount","bid","getTimeRemaining","hours","minutes","seconds","isExpired","formatTimeRemaining","isEndingSoon","Auctions","auctions","setAuctions","hideEmptyAuctions","setHideEmptyAuctions","showCreateModal","setShowCreateModal","showBidModal","setShowBidModal","selectedAuction","setSelectedAuction","bidAmount","setBidAmount","isPlacingBid","setIsPlacingBid","isCreatingAuction","setIsCreatingAuction","selectedAssets","setSelectedAssets","userAssets","setUserAssets","isLoadingAssets","setIsLoadingAssets","getSortField","getSortOrder","loadAuctions","formattedAuctions","collection_info","itemsPerPage","loadMoreAuctions","resetAndLoadAuctions","loadCollections","filteredAuctions","unsubscribeFunctions","prevAuctions","prevAuction","loadUserAssets","handlePlaceBid","handleViewDetails","bidFloat","currentBidAmount","hasExistingBids","bidString","toggleAssetSelection","AuctionDetail","setAuction","loadAuction","timeRemaining","isEnded","bidAmountInt","Learn","activeSection","setActiveSection","guides","guide","JourneyMap","sections","section","NFTStakingModal","batchProgress","setBatchProgress","transactionResults","setTransactionResults","fetchAssets","contractResponse","handleAssetToggle","failCount","selectedAssetsCount","TokenStakingModal","farmInfo","setFarmInfo","userStakeInfo","setUserStakeInfo","fetchData","farm","userStake","balanceResponse","formatTokenAmount","remaining","getActionButtonText","getTemplateEstimatedValue","Common","Uncommon","Rare","Epic","Legendary","getTemplateMarketPrice","listings","QuickBuyModal","market_price","available_for_sale","Staking","nftTemplates","setNftTemplates","setRewards","nftLoading","setNftLoading","setTotalStakingPower","stakingModalOpen","setStakingModalOpen","quickBuyModalOpen","setQuickBuyModalOpen","selectedBuyTemplate","setSelectedBuyTemplate","simulationMode","setSimulationMode","tokenStakeInfo","setTokenStakeInfo","tokenFarmInfo","setTokenFarmInfo","tokenStakingModalOpen","setTokenStakingModalOpen","tokenStakingAction","setTokenStakingAction","tokenLoading","setTokenLoading","userPxjBalance","setUserPxjBalance","defaultTemplates","owned_count","staked_count","estimated_value","apr","fetchNFTTemplates","apiService2","templatesResponse","countsResult","validTemplates","baseReward","apiError","fetchRewards","rewardsData","updatedTemplates","lastClaimTime","elapsedHours","calculatedRewards","stakedPxjRewards","stakedWufRewards","fetchTokenStakingData","openTokenStakingModal","openQuickBuyModal","closeQuickBuyModal","totalPower","claimedAmount","backgroundImage","openNFTStakingModal","attributeService","getAttributeFilters","extractAttributesFromNFTs","valueMap","stringValue","currentCount","numMinted","maxSupply","formatAttributesForQuery","attributePairs","parseAttributeQuery","attributeString","pair","decodedValue","decodeURIComponent","TokenizeFromInventoryModal","setTotalAssets","selectedCount","allAssetIds","newSelection","AssetDetailModal","onRedeem","showRedeemSection","setShowRedeemSection","formattedKey","displayValue","descriptionItem","RWAXLiveTransactions","setLastUpdate","setPage","fetchTransactions","newTransactions","formatTime","getTransactionLabel","sender_name","PIXAL_ATTRIBUTES","PixalAttributeFilter","onFiltersChange","initialFilters","filterState","setFilterState","newFilterState","handleValueToggle","clearAllFilters","clearedState","totalSelected","getFilteredValues","RWax","tokenizedAssets","setTokenizedAssets","showTokenizeModal","setShowTokenizeModal","showRedeemModal","setShowRedeemModal","showInventoryModal","setShowInventoryModal","showAssetDetailModal","setShowAssetDetailModal","showWaxRedeemModal","setShowWaxRedeemModal","selectedAsset","setSelectedAsset","selectedDetailAsset","setSelectedDetailAsset","waxRedeemStep","setWaxRedeemStep","showWpixalPurchaseModal","setShowWpixalPurchaseModal","wpixalToPurchase","setWpixalToPurchase","setWpixalPriceWAX","setWpixalPriceUSD","setWaxPriceUSD","showPriceAlertModal","setShowPriceAlertModal","alertAsset","alertPercentage","setAlertPercentage","shareAsset","setShareAsset","showWpixalAlertModal","setShowWpixalAlertModal","wpixalAlertPrice","setWpixalAlertPrice","assetsPage","setAssetsPage","setHasMoreAssets","loadingMoreAssets","setLoadingMoreAssets","setAttributeFilters","selectedAttributeFilters","setSelectedAttributeFilters","setWatchlist","setPriceAlerts","filteredAssets","loadTokenizedAssets","loadMoreAssets","handleSortChange","handleAttributeFiltersChange","formattedFilters","loadPriceData","wpixalWAX","wpixalUSD","waxUSD","loadWaxBalance","priceInterval","closeWaxRedeemModal","handleViewAssetDetail","toggleFilterSidebar","isTokenizedAsset","savedWatchlist","watchlistArray","handleSetPriceAlert","alertData","originalPrice","createdAt","newPriceAlerts","alertsArray","currentAsset","savedAlerts","textDecoration","selectedAssetsList","defaultFeeToken","handleAssetSelection","handleImageZoom","handleRedeem","handleWaxRedeem","newWatchlist","handleToggleWatchlist","handleShareAsset","userWaxAmount","requiredWaxAmount","redeemTransaction","PxCrafting","pxjPrice","setPxjPrice","wufPrice","setWufPrice","governance","collectibles","overviewIngredients","calculateROI","craftingCost","dailyEarnings","roiDays","profitMargin","ingTemplate","templatesByType","pixelpack","openCraftingModal","getIngredientImage","isVideoFormat","roi","resultTemplate","ingIndex","typeTemplates","featuredTokensService","calculateDuration","MIN_AMOUNT","MAX_AMOUNT","MIN_DAYS","MAX_DAYS","calculateRequiredAmount","generatePromoMemo","payment","usedLength","websiteUrl","maxDescLength","parseMemo","website","getFeaturedTokens","FEATURE_ACCOUNT","promos","isActive","paidAmount","validatePayment","FeaturedTokens","featuredTokens","setFeaturedTokens","showPromoModal","setShowPromoModal","promoForm","setPromoForm","loadFeaturedTokens","handleAmountChange","validation","PxSwap","PriceAlertNotification","isVisible","setIsVisible","isClosing","setIsClosing","showTimer","autoCloseTimer","toLocaleTimeString","alerts","setAlerts","handlePriceAlert","removeAlert","audioContextRef","soundsRef","createTone","audioContext","frequency","sampleRate","frameCount","createBuffer","channelData","getChannelData","sin","PI","asin","envelope","createBufferSource","connect","destination","AudioContext","webkitAudioContext","sounds","warning","initAudio","latestNotification","notificationElement","handleRemoveNotification","handleCancel","newRetryCount","hasError","isMaxRetries","handleRetry","APIErrorBoundary","finalDelay","lastRetryTime","errorCategory","canRetry","handleReset","lastCheckKey","lastCheckTime","recentAlerts","triggeredAt","usePWA","installPrompt","setInstallPrompt","isInstallable","setIsInstallable","isInstalled","setIsInstalled","isOnline","setIsOnline","onLine","isStandalone","setIsStandalone","isStandaloneMode","standalone","referrer","checkStandalone","handleBeforeInstallPrompt","handleAppInstalled","handleOnline","handleOffline","mediaQuery","handleDisplayModeChange","showInstallPrompt","outcome","userChoice","dismissInstallPrompt","fillOpacity","processedTransactions","setProcessedTransactions","activeTransactions","completedTransactions","getWalletTransaction","cancelWalletTransaction","pollIntervals","updateTransaction","newActiveTransactions","pollTransactionStatus","txData","existingInterval","startTransaction","active","clearCompleted","getActiveCount","getCompletedCount","hasFailedTransactions","useTransactionManager","autoHide","getTransactionTypeLabel","getNotificationIcon","diffSecs","animationDuration","useLocation","pushState","Routes","Route","getElementById","StrictMode"],"ignoreList":[0,1,2,4,5,12,13,14,41],"sources":["../../../node_modules/scheduler/index.js","../../../node_modules/scheduler/cjs/scheduler.production.js","../../../node_modules/react-dom/cjs/react-dom-client.production.js","../../../src/utils/formatUtils.ts","../../../node_modules/js-big-decimal/dist/esm/big-decimal.js","../../../node_modules/@wharfkit/resources/lib/wharfkit-resources.m.js","../../../src/components/SendOfferModal.tsx","../../../src/utils/sanitize.ts","../../../src/utils/ipfsUtils.ts","../../../src/config/collectionTiers.ts","../../../src/powerup_functions.js","../../../src/App.tsx","../../../node_modules/react/jsx-runtime.js","../../../node_modules/react/cjs/react-jsx-runtime.production.js","../../../node_modules/react-dom/client.js","../../../src/contexts/WalletContextDefinition.ts","../../../src/hooks/useWallet.ts","../../../src/services/errorMessageService.ts","../../../src/services/loggingService.ts","../../../src/config/marketplaceConfig.ts","../../../src/services/currencyService.ts","../../../src/services/priceService.ts","../../../src/services/storageService.ts","../../../src/services/cartService.ts","../../../src/contexts/DisplaySettingsContext.tsx","../../../src/hooks/useDisplaySettings.ts","../../../src/services/monitoringService.ts","../../../src/services/cacheService.ts","../../../src/services/apiEndpointManager.ts","../../../src/services/api.ts","../../../src/services/badgeService.ts","../../../src/services/balanceService.ts","../../../src/contexts/NotificationContext.tsx","../../../src/hooks/useNotifications.ts","../../../src/components/ShoppingCart.tsx","../../../src/services/accessibilityService.ts","../../../src/components/AccessibilitySettings.tsx","../../../src/components/Navigation.tsx","../../../src/components/LandingPage.tsx","../../../src/services/pushNotificationService.ts","../../../src/services/watchlistService.ts","../../../node_modules/@wharfkit/transact-plugin-autocorrect/lib/transact-plugin-autocorrect.m.js","../../../src/services/transactionService.ts","../../../src/services/wharfkit.ts","../../../src/services/transactionBuilders.ts","../../../src/components/MediaRenderer.tsx","../../../src/utils/shareImageGenerator.ts","../../../src/components/ShareModal.tsx","../../../src/services/chatService.ts","../../../src/components/ListingChatModal.tsx","../../../src/utils/mediaUtils.ts","../../../src/components/NFTDetailsModal.tsx","../../../src/components/NFTComparison.tsx","../../../src/components/SocialShare.tsx","../../../src/components/ErrorMessage.tsx","../../../src/components/AdvancedSearch.tsx","../../../src/components/Marketplace.tsx","../../../src/components/Rewards.tsx","../../../src/components/ListingModal.tsx","../../../src/components/TransferModal.tsx","../../../src/components/BurnModal.tsx","../../../src/components/BulkListingModal.tsx","../../../src/components/BulkTransferModal.tsx","../../../src/components/DistributeModal.tsx","../../../src/components/BulkBurnModal.tsx","../../../src/data/ingredients.ts","../../../src/services/inventoryService.ts","../../../src/components/CraftingModal.tsx","../../../src/services/offerService.ts","../../../src/components/ViewOffersModal.tsx","../../../src/services/neftyBlendService.ts","../../../src/components/UnpackModal.tsx","../../../src/contexts/WalletContext.tsx","../../../src/components/BulkAuctionModal.tsx","../../../src/services/rwaxService.ts","../../../src/components/TokenizeFeeModal.tsx","../../../src/services/stakingService.ts","../../../src/components/ProgressiveImage.tsx","../../../src/components/Inventory.tsx","../../../src/components/TruncatedText.tsx","../../../src/services/ipfsRateLimiter.ts","../../../src/services/imageService.ts","../../../src/components/FallbackImage.tsx","../../../src/components/CollectionTierModal.tsx","../../../src/components/Collections.tsx","../../../src/components/QuickLinks.tsx","../../../src/components/ChatWidget.tsx","../../../src/components/ImageZoom.tsx","../../../src/components/CollectionDetail.tsx","../../../src/components/TemplateDetail.tsx","../../../src/components/AssetDetail.tsx","../../../src/components/ListingDetail.tsx","../../../src/components/TransactionDetails.tsx","../../../src/components/StakingModal.tsx","../../../src/components/RAMModal.tsx","../../../src/components/TokenTransferModal.tsx","../../../src/components/PortfolioAnalytics.tsx","../../../src/components/PxBadges.tsx","../../../src/services/alcorService.ts","../../../src/components/TokenDropdown.tsx","../../../src/components/SwapInterface.tsx","../../../src/components/UserProfile.tsx","../../../src/components/CustomHooks/useGetAccountResources.js","../../../src/components/CustomHooks/useGetPowerupState.js","../../../src/components/CustomHooks/useGetChainInfo.js","../../../src/components/UserProfileLookup.tsx","../../../src/components/Packs.tsx","../../../src/components/Watchlist.tsx","../../../src/components/Footer.tsx","../../../src/components/ActivityStats.tsx","../../../src/services/auctionService.ts","../../../src/components/Auctions.tsx","../../../src/components/AuctionDetail.tsx","../../../src/components/Learn.tsx","../../../src/components/JourneyMap.tsx","../../../src/components/NFTStakingModal.tsx","../../../src/components/TokenStakingModal.tsx","../../../src/components/Staking.tsx","../../../src/services/attributeService.ts","../../../src/components/TokenizeFromInventoryModal.tsx","../../../src/components/AssetDetailModal.tsx","../../../src/components/RWAXLiveTransactions.tsx","../../../src/components/PixalAttributeFilter.tsx","../../../src/components/RWax.tsx","../../../src/components/PxCrafting.tsx","../../../src/services/featuredTokensService.ts","../../../src/components/FeaturedTokens.tsx","../../../src/components/PxSwap.tsx","../../../src/components/PriceAlertNotification.tsx","../../../src/components/NotificationContainer.tsx","../../../src/components/ConfirmDialog.tsx","../../../src/components/ErrorBoundary.tsx","../../../src/components/APIErrorBoundary.tsx","../../../src/components/WatchlistAlertChecker.tsx","../../../src/hooks/usePWA.ts","../../../src/components/PWAInstallBanner.tsx","../../../src/components/OfflineIndicator.tsx","../../../src/components/TransactionNotifications.tsx","../../../src/hooks/useTransactionManager.ts","../../../src/main.tsx"],"sourcesContent":["'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","/**\n * @license React\n * scheduler.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nfunction push(heap, node) {\n  var index = heap.length;\n  heap.push(node);\n  a: for (; 0 < index; ) {\n    var parentIndex = (index - 1) >>> 1,\n      parent = heap[parentIndex];\n    if (0 < compare(parent, node))\n      (heap[parentIndex] = node), (heap[index] = parent), (index = parentIndex);\n    else break a;\n  }\n}\nfunction peek(heap) {\n  return 0 === heap.length ? null : heap[0];\n}\nfunction pop(heap) {\n  if (0 === heap.length) return null;\n  var first = heap[0],\n    last = heap.pop();\n  if (last !== first) {\n    heap[0] = last;\n    a: for (\n      var index = 0, length = heap.length, halfLength = length >>> 1;\n      index < halfLength;\n\n    ) {\n      var leftIndex = 2 * (index + 1) - 1,\n        left = heap[leftIndex],\n        rightIndex = leftIndex + 1,\n        right = heap[rightIndex];\n      if (0 > compare(left, last))\n        rightIndex < length && 0 > compare(right, left)\n          ? ((heap[index] = right),\n            (heap[rightIndex] = last),\n            (index = rightIndex))\n          : ((heap[index] = left),\n            (heap[leftIndex] = last),\n            (index = leftIndex));\n      else if (rightIndex < length && 0 > compare(right, last))\n        (heap[index] = right), (heap[rightIndex] = last), (index = rightIndex);\n      else break a;\n    }\n  }\n  return first;\n}\nfunction compare(a, b) {\n  var diff = a.sortIndex - b.sortIndex;\n  return 0 !== diff ? diff : a.id - b.id;\n}\nexports.unstable_now = void 0;\nif (\"object\" === typeof performance && \"function\" === typeof performance.now) {\n  var localPerformance = performance;\n  exports.unstable_now = function () {\n    return localPerformance.now();\n  };\n} else {\n  var localDate = Date,\n    initialTime = localDate.now();\n  exports.unstable_now = function () {\n    return localDate.now() - initialTime;\n  };\n}\nvar taskQueue = [],\n  timerQueue = [],\n  taskIdCounter = 1,\n  currentTask = null,\n  currentPriorityLevel = 3,\n  isPerformingWork = !1,\n  isHostCallbackScheduled = !1,\n  isHostTimeoutScheduled = !1,\n  needsPaint = !1,\n  localSetTimeout = \"function\" === typeof setTimeout ? setTimeout : null,\n  localClearTimeout = \"function\" === typeof clearTimeout ? clearTimeout : null,\n  localSetImmediate = \"undefined\" !== typeof setImmediate ? setImmediate : null;\nfunction advanceTimers(currentTime) {\n  for (var timer = peek(timerQueue); null !== timer; ) {\n    if (null === timer.callback) pop(timerQueue);\n    else if (timer.startTime <= currentTime)\n      pop(timerQueue),\n        (timer.sortIndex = timer.expirationTime),\n        push(taskQueue, timer);\n    else break;\n    timer = peek(timerQueue);\n  }\n}\nfunction handleTimeout(currentTime) {\n  isHostTimeoutScheduled = !1;\n  advanceTimers(currentTime);\n  if (!isHostCallbackScheduled)\n    if (null !== peek(taskQueue))\n      (isHostCallbackScheduled = !0),\n        isMessageLoopRunning ||\n          ((isMessageLoopRunning = !0), schedulePerformWorkUntilDeadline());\n    else {\n      var firstTimer = peek(timerQueue);\n      null !== firstTimer &&\n        requestHostTimeout(handleTimeout, firstTimer.startTime - currentTime);\n    }\n}\nvar isMessageLoopRunning = !1,\n  taskTimeoutID = -1,\n  frameInterval = 5,\n  startTime = -1;\nfunction shouldYieldToHost() {\n  return needsPaint\n    ? !0\n    : exports.unstable_now() - startTime < frameInterval\n      ? !1\n      : !0;\n}\nfunction performWorkUntilDeadline() {\n  needsPaint = !1;\n  if (isMessageLoopRunning) {\n    var currentTime = exports.unstable_now();\n    startTime = currentTime;\n    var hasMoreWork = !0;\n    try {\n      a: {\n        isHostCallbackScheduled = !1;\n        isHostTimeoutScheduled &&\n          ((isHostTimeoutScheduled = !1),\n          localClearTimeout(taskTimeoutID),\n          (taskTimeoutID = -1));\n        isPerformingWork = !0;\n        var previousPriorityLevel = currentPriorityLevel;\n        try {\n          b: {\n            advanceTimers(currentTime);\n            for (\n              currentTask = peek(taskQueue);\n              null !== currentTask &&\n              !(\n                currentTask.expirationTime > currentTime && shouldYieldToHost()\n              );\n\n            ) {\n              var callback = currentTask.callback;\n              if (\"function\" === typeof callback) {\n                currentTask.callback = null;\n                currentPriorityLevel = currentTask.priorityLevel;\n                var continuationCallback = callback(\n                  currentTask.expirationTime <= currentTime\n                );\n                currentTime = exports.unstable_now();\n                if (\"function\" === typeof continuationCallback) {\n                  currentTask.callback = continuationCallback;\n                  advanceTimers(currentTime);\n                  hasMoreWork = !0;\n                  break b;\n                }\n                currentTask === peek(taskQueue) && pop(taskQueue);\n                advanceTimers(currentTime);\n              } else pop(taskQueue);\n              currentTask = peek(taskQueue);\n            }\n            if (null !== currentTask) hasMoreWork = !0;\n            else {\n              var firstTimer = peek(timerQueue);\n              null !== firstTimer &&\n                requestHostTimeout(\n                  handleTimeout,\n                  firstTimer.startTime - currentTime\n                );\n              hasMoreWork = !1;\n            }\n          }\n          break a;\n        } finally {\n          (currentTask = null),\n            (currentPriorityLevel = previousPriorityLevel),\n            (isPerformingWork = !1);\n        }\n        hasMoreWork = void 0;\n      }\n    } finally {\n      hasMoreWork\n        ? schedulePerformWorkUntilDeadline()\n        : (isMessageLoopRunning = !1);\n    }\n  }\n}\nvar schedulePerformWorkUntilDeadline;\nif (\"function\" === typeof localSetImmediate)\n  schedulePerformWorkUntilDeadline = function () {\n    localSetImmediate(performWorkUntilDeadline);\n  };\nelse if (\"undefined\" !== typeof MessageChannel) {\n  var channel = new MessageChannel(),\n    port = channel.port2;\n  channel.port1.onmessage = performWorkUntilDeadline;\n  schedulePerformWorkUntilDeadline = function () {\n    port.postMessage(null);\n  };\n} else\n  schedulePerformWorkUntilDeadline = function () {\n    localSetTimeout(performWorkUntilDeadline, 0);\n  };\nfunction requestHostTimeout(callback, ms) {\n  taskTimeoutID = localSetTimeout(function () {\n    callback(exports.unstable_now());\n  }, ms);\n}\nexports.unstable_IdlePriority = 5;\nexports.unstable_ImmediatePriority = 1;\nexports.unstable_LowPriority = 4;\nexports.unstable_NormalPriority = 3;\nexports.unstable_Profiling = null;\nexports.unstable_UserBlockingPriority = 2;\nexports.unstable_cancelCallback = function (task) {\n  task.callback = null;\n};\nexports.unstable_forceFrameRate = function (fps) {\n  0 > fps || 125 < fps\n    ? console.error(\n        \"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"\n      )\n    : (frameInterval = 0 < fps ? Math.floor(1e3 / fps) : 5);\n};\nexports.unstable_getCurrentPriorityLevel = function () {\n  return currentPriorityLevel;\n};\nexports.unstable_next = function (eventHandler) {\n  switch (currentPriorityLevel) {\n    case 1:\n    case 2:\n    case 3:\n      var priorityLevel = 3;\n      break;\n    default:\n      priorityLevel = currentPriorityLevel;\n  }\n  var previousPriorityLevel = currentPriorityLevel;\n  currentPriorityLevel = priorityLevel;\n  try {\n    return eventHandler();\n  } finally {\n    currentPriorityLevel = previousPriorityLevel;\n  }\n};\nexports.unstable_requestPaint = function () {\n  needsPaint = !0;\n};\nexports.unstable_runWithPriority = function (priorityLevel, eventHandler) {\n  switch (priorityLevel) {\n    case 1:\n    case 2:\n    case 3:\n    case 4:\n    case 5:\n      break;\n    default:\n      priorityLevel = 3;\n  }\n  var previousPriorityLevel = currentPriorityLevel;\n  currentPriorityLevel = priorityLevel;\n  try {\n    return eventHandler();\n  } finally {\n    currentPriorityLevel = previousPriorityLevel;\n  }\n};\nexports.unstable_scheduleCallback = function (\n  priorityLevel,\n  callback,\n  options\n) {\n  var currentTime = exports.unstable_now();\n  \"object\" === typeof options && null !== options\n    ? ((options = options.delay),\n      (options =\n        \"number\" === typeof options && 0 < options\n          ? currentTime + options\n          : currentTime))\n    : (options = currentTime);\n  switch (priorityLevel) {\n    case 1:\n      var timeout = -1;\n      break;\n    case 2:\n      timeout = 250;\n      break;\n    case 5:\n      timeout = 1073741823;\n      break;\n    case 4:\n      timeout = 1e4;\n      break;\n    default:\n      timeout = 5e3;\n  }\n  timeout = options + timeout;\n  priorityLevel = {\n    id: taskIdCounter++,\n    callback: callback,\n    priorityLevel: priorityLevel,\n    startTime: options,\n    expirationTime: timeout,\n    sortIndex: -1\n  };\n  options > currentTime\n    ? ((priorityLevel.sortIndex = options),\n      push(timerQueue, priorityLevel),\n      null === peek(taskQueue) &&\n        priorityLevel === peek(timerQueue) &&\n        (isHostTimeoutScheduled\n          ? (localClearTimeout(taskTimeoutID), (taskTimeoutID = -1))\n          : (isHostTimeoutScheduled = !0),\n        requestHostTimeout(handleTimeout, options - currentTime)))\n    : ((priorityLevel.sortIndex = timeout),\n      push(taskQueue, priorityLevel),\n      isHostCallbackScheduled ||\n        isPerformingWork ||\n        ((isHostCallbackScheduled = !0),\n        isMessageLoopRunning ||\n          ((isMessageLoopRunning = !0), schedulePerformWorkUntilDeadline())));\n  return priorityLevel;\n};\nexports.unstable_shouldYield = shouldYieldToHost;\nexports.unstable_wrapCallback = function (callback) {\n  var parentPriorityLevel = currentPriorityLevel;\n  return function () {\n    var previousPriorityLevel = currentPriorityLevel;\n    currentPriorityLevel = parentPriorityLevel;\n    try {\n      return callback.apply(this, arguments);\n    } finally {\n      currentPriorityLevel = previousPriorityLevel;\n    }\n  };\n};\n","/**\n * @license React\n * react-dom-client.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n\"use strict\";\nvar Scheduler = require(\"scheduler\"),\n  React = require(\"react\"),\n  ReactDOM = require(\"react-dom\");\nfunction formatProdErrorMessage(code) {\n  var url = \"https://react.dev/errors/\" + code;\n  if (1 < arguments.length) {\n    url += \"?args[]=\" + encodeURIComponent(arguments[1]);\n    for (var i = 2; i < arguments.length; i++)\n      url += \"&args[]=\" + encodeURIComponent(arguments[i]);\n  }\n  return (\n    \"Minified React error #\" +\n    code +\n    \"; visit \" +\n    url +\n    \" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"\n  );\n}\nfunction isValidContainer(node) {\n  return !(\n    !node ||\n    (1 !== node.nodeType && 9 !== node.nodeType && 11 !== node.nodeType)\n  );\n}\nfunction getNearestMountedFiber(fiber) {\n  var node = fiber,\n    nearestMounted = fiber;\n  if (fiber.alternate) for (; node.return; ) node = node.return;\n  else {\n    fiber = node;\n    do\n      (node = fiber),\n        0 !== (node.flags & 4098) && (nearestMounted = node.return),\n        (fiber = node.return);\n    while (fiber);\n  }\n  return 3 === node.tag ? nearestMounted : null;\n}\nfunction getSuspenseInstanceFromFiber(fiber) {\n  if (13 === fiber.tag) {\n    var suspenseState = fiber.memoizedState;\n    null === suspenseState &&\n      ((fiber = fiber.alternate),\n      null !== fiber && (suspenseState = fiber.memoizedState));\n    if (null !== suspenseState) return suspenseState.dehydrated;\n  }\n  return null;\n}\nfunction assertIsMounted(fiber) {\n  if (getNearestMountedFiber(fiber) !== fiber)\n    throw Error(formatProdErrorMessage(188));\n}\nfunction findCurrentFiberUsingSlowPath(fiber) {\n  var alternate = fiber.alternate;\n  if (!alternate) {\n    alternate = getNearestMountedFiber(fiber);\n    if (null === alternate) throw Error(formatProdErrorMessage(188));\n    return alternate !== fiber ? null : fiber;\n  }\n  for (var a = fiber, b = alternate; ; ) {\n    var parentA = a.return;\n    if (null === parentA) break;\n    var parentB = parentA.alternate;\n    if (null === parentB) {\n      b = parentA.return;\n      if (null !== b) {\n        a = b;\n        continue;\n      }\n      break;\n    }\n    if (parentA.child === parentB.child) {\n      for (parentB = parentA.child; parentB; ) {\n        if (parentB === a) return assertIsMounted(parentA), fiber;\n        if (parentB === b) return assertIsMounted(parentA), alternate;\n        parentB = parentB.sibling;\n      }\n      throw Error(formatProdErrorMessage(188));\n    }\n    if (a.return !== b.return) (a = parentA), (b = parentB);\n    else {\n      for (var didFindChild = !1, child$0 = parentA.child; child$0; ) {\n        if (child$0 === a) {\n          didFindChild = !0;\n          a = parentA;\n          b = parentB;\n          break;\n        }\n        if (child$0 === b) {\n          didFindChild = !0;\n          b = parentA;\n          a = parentB;\n          break;\n        }\n        child$0 = child$0.sibling;\n      }\n      if (!didFindChild) {\n        for (child$0 = parentB.child; child$0; ) {\n          if (child$0 === a) {\n            didFindChild = !0;\n            a = parentB;\n            b = parentA;\n            break;\n          }\n          if (child$0 === b) {\n            didFindChild = !0;\n            b = parentB;\n            a = parentA;\n            break;\n          }\n          child$0 = child$0.sibling;\n        }\n        if (!didFindChild) throw Error(formatProdErrorMessage(189));\n      }\n    }\n    if (a.alternate !== b) throw Error(formatProdErrorMessage(190));\n  }\n  if (3 !== a.tag) throw Error(formatProdErrorMessage(188));\n  return a.stateNode.current === a ? fiber : alternate;\n}\nfunction findCurrentHostFiberImpl(node) {\n  var tag = node.tag;\n  if (5 === tag || 26 === tag || 27 === tag || 6 === tag) return node;\n  for (node = node.child; null !== node; ) {\n    tag = findCurrentHostFiberImpl(node);\n    if (null !== tag) return tag;\n    node = node.sibling;\n  }\n  return null;\n}\nvar assign = Object.assign,\n  REACT_LEGACY_ELEMENT_TYPE = Symbol.for(\"react.element\"),\n  REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n  REACT_PORTAL_TYPE = Symbol.for(\"react.portal\"),\n  REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\"),\n  REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\"),\n  REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\"),\n  REACT_PROVIDER_TYPE = Symbol.for(\"react.provider\"),\n  REACT_CONSUMER_TYPE = Symbol.for(\"react.consumer\"),\n  REACT_CONTEXT_TYPE = Symbol.for(\"react.context\"),\n  REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\"),\n  REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\"),\n  REACT_SUSPENSE_LIST_TYPE = Symbol.for(\"react.suspense_list\"),\n  REACT_MEMO_TYPE = Symbol.for(\"react.memo\"),\n  REACT_LAZY_TYPE = Symbol.for(\"react.lazy\");\nSymbol.for(\"react.scope\");\nvar REACT_ACTIVITY_TYPE = Symbol.for(\"react.activity\");\nSymbol.for(\"react.legacy_hidden\");\nSymbol.for(\"react.tracing_marker\");\nvar REACT_MEMO_CACHE_SENTINEL = Symbol.for(\"react.memo_cache_sentinel\");\nSymbol.for(\"react.view_transition\");\nvar MAYBE_ITERATOR_SYMBOL = Symbol.iterator;\nfunction getIteratorFn(maybeIterable) {\n  if (null === maybeIterable || \"object\" !== typeof maybeIterable) return null;\n  maybeIterable =\n    (MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL]) ||\n    maybeIterable[\"@@iterator\"];\n  return \"function\" === typeof maybeIterable ? maybeIterable : null;\n}\nvar REACT_CLIENT_REFERENCE = Symbol.for(\"react.client.reference\");\nfunction getComponentNameFromType(type) {\n  if (null == type) return null;\n  if (\"function\" === typeof type)\n    return type.$$typeof === REACT_CLIENT_REFERENCE\n      ? null\n      : type.displayName || type.name || null;\n  if (\"string\" === typeof type) return type;\n  switch (type) {\n    case REACT_FRAGMENT_TYPE:\n      return \"Fragment\";\n    case REACT_PROFILER_TYPE:\n      return \"Profiler\";\n    case REACT_STRICT_MODE_TYPE:\n      return \"StrictMode\";\n    case REACT_SUSPENSE_TYPE:\n      return \"Suspense\";\n    case REACT_SUSPENSE_LIST_TYPE:\n      return \"SuspenseList\";\n    case REACT_ACTIVITY_TYPE:\n      return \"Activity\";\n  }\n  if (\"object\" === typeof type)\n    switch (type.$$typeof) {\n      case REACT_PORTAL_TYPE:\n        return \"Portal\";\n      case REACT_CONTEXT_TYPE:\n        return (type.displayName || \"Context\") + \".Provider\";\n      case REACT_CONSUMER_TYPE:\n        return (type._context.displayName || \"Context\") + \".Consumer\";\n      case REACT_FORWARD_REF_TYPE:\n        var innerType = type.render;\n        type = type.displayName;\n        type ||\n          ((type = innerType.displayName || innerType.name || \"\"),\n          (type = \"\" !== type ? \"ForwardRef(\" + type + \")\" : \"ForwardRef\"));\n        return type;\n      case REACT_MEMO_TYPE:\n        return (\n          (innerType = type.displayName || null),\n          null !== innerType\n            ? innerType\n            : getComponentNameFromType(type.type) || \"Memo\"\n        );\n      case REACT_LAZY_TYPE:\n        innerType = type._payload;\n        type = type._init;\n        try {\n          return getComponentNameFromType(type(innerType));\n        } catch (x) {}\n    }\n  return null;\n}\nvar isArrayImpl = Array.isArray,\n  ReactSharedInternals =\n    React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,\n  ReactDOMSharedInternals =\n    ReactDOM.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,\n  sharedNotPendingObject = {\n    pending: !1,\n    data: null,\n    method: null,\n    action: null\n  },\n  valueStack = [],\n  index = -1;\nfunction createCursor(defaultValue) {\n  return { current: defaultValue };\n}\nfunction pop(cursor) {\n  0 > index ||\n    ((cursor.current = valueStack[index]), (valueStack[index] = null), index--);\n}\nfunction push(cursor, value) {\n  index++;\n  valueStack[index] = cursor.current;\n  cursor.current = value;\n}\nvar contextStackCursor = createCursor(null),\n  contextFiberStackCursor = createCursor(null),\n  rootInstanceStackCursor = createCursor(null),\n  hostTransitionProviderCursor = createCursor(null);\nfunction pushHostContainer(fiber, nextRootInstance) {\n  push(rootInstanceStackCursor, nextRootInstance);\n  push(contextFiberStackCursor, fiber);\n  push(contextStackCursor, null);\n  switch (nextRootInstance.nodeType) {\n    case 9:\n    case 11:\n      fiber = (fiber = nextRootInstance.documentElement)\n        ? (fiber = fiber.namespaceURI)\n          ? getOwnHostContext(fiber)\n          : 0\n        : 0;\n      break;\n    default:\n      if (\n        ((fiber = nextRootInstance.tagName),\n        (nextRootInstance = nextRootInstance.namespaceURI))\n      )\n        (nextRootInstance = getOwnHostContext(nextRootInstance)),\n          (fiber = getChildHostContextProd(nextRootInstance, fiber));\n      else\n        switch (fiber) {\n          case \"svg\":\n            fiber = 1;\n            break;\n          case \"math\":\n            fiber = 2;\n            break;\n          default:\n            fiber = 0;\n        }\n  }\n  pop(contextStackCursor);\n  push(contextStackCursor, fiber);\n}\nfunction popHostContainer() {\n  pop(contextStackCursor);\n  pop(contextFiberStackCursor);\n  pop(rootInstanceStackCursor);\n}\nfunction pushHostContext(fiber) {\n  null !== fiber.memoizedState && push(hostTransitionProviderCursor, fiber);\n  var context = contextStackCursor.current;\n  var JSCompiler_inline_result = getChildHostContextProd(context, fiber.type);\n  context !== JSCompiler_inline_result &&\n    (push(contextFiberStackCursor, fiber),\n    push(contextStackCursor, JSCompiler_inline_result));\n}\nfunction popHostContext(fiber) {\n  contextFiberStackCursor.current === fiber &&\n    (pop(contextStackCursor), pop(contextFiberStackCursor));\n  hostTransitionProviderCursor.current === fiber &&\n    (pop(hostTransitionProviderCursor),\n    (HostTransitionContext._currentValue = sharedNotPendingObject));\n}\nvar hasOwnProperty = Object.prototype.hasOwnProperty,\n  scheduleCallback$3 = Scheduler.unstable_scheduleCallback,\n  cancelCallback$1 = Scheduler.unstable_cancelCallback,\n  shouldYield = Scheduler.unstable_shouldYield,\n  requestPaint = Scheduler.unstable_requestPaint,\n  now = Scheduler.unstable_now,\n  getCurrentPriorityLevel = Scheduler.unstable_getCurrentPriorityLevel,\n  ImmediatePriority = Scheduler.unstable_ImmediatePriority,\n  UserBlockingPriority = Scheduler.unstable_UserBlockingPriority,\n  NormalPriority$1 = Scheduler.unstable_NormalPriority,\n  LowPriority = Scheduler.unstable_LowPriority,\n  IdlePriority = Scheduler.unstable_IdlePriority,\n  log$1 = Scheduler.log,\n  unstable_setDisableYieldValue = Scheduler.unstable_setDisableYieldValue,\n  rendererID = null,\n  injectedHook = null;\nfunction setIsStrictModeForDevtools(newIsStrictMode) {\n  \"function\" === typeof log$1 && unstable_setDisableYieldValue(newIsStrictMode);\n  if (injectedHook && \"function\" === typeof injectedHook.setStrictMode)\n    try {\n      injectedHook.setStrictMode(rendererID, newIsStrictMode);\n    } catch (err) {}\n}\nvar clz32 = Math.clz32 ? Math.clz32 : clz32Fallback,\n  log = Math.log,\n  LN2 = Math.LN2;\nfunction clz32Fallback(x) {\n  x >>>= 0;\n  return 0 === x ? 32 : (31 - ((log(x) / LN2) | 0)) | 0;\n}\nvar nextTransitionLane = 256,\n  nextRetryLane = 4194304;\nfunction getHighestPriorityLanes(lanes) {\n  var pendingSyncLanes = lanes & 42;\n  if (0 !== pendingSyncLanes) return pendingSyncLanes;\n  switch (lanes & -lanes) {\n    case 1:\n      return 1;\n    case 2:\n      return 2;\n    case 4:\n      return 4;\n    case 8:\n      return 8;\n    case 16:\n      return 16;\n    case 32:\n      return 32;\n    case 64:\n      return 64;\n    case 128:\n      return 128;\n    case 256:\n    case 512:\n    case 1024:\n    case 2048:\n    case 4096:\n    case 8192:\n    case 16384:\n    case 32768:\n    case 65536:\n    case 131072:\n    case 262144:\n    case 524288:\n    case 1048576:\n    case 2097152:\n      return lanes & 4194048;\n    case 4194304:\n    case 8388608:\n    case 16777216:\n    case 33554432:\n      return lanes & 62914560;\n    case 67108864:\n      return 67108864;\n    case 134217728:\n      return 134217728;\n    case 268435456:\n      return 268435456;\n    case 536870912:\n      return 536870912;\n    case 1073741824:\n      return 0;\n    default:\n      return lanes;\n  }\n}\nfunction getNextLanes(root, wipLanes, rootHasPendingCommit) {\n  var pendingLanes = root.pendingLanes;\n  if (0 === pendingLanes) return 0;\n  var nextLanes = 0,\n    suspendedLanes = root.suspendedLanes,\n    pingedLanes = root.pingedLanes;\n  root = root.warmLanes;\n  var nonIdlePendingLanes = pendingLanes & 134217727;\n  0 !== nonIdlePendingLanes\n    ? ((pendingLanes = nonIdlePendingLanes & ~suspendedLanes),\n      0 !== pendingLanes\n        ? (nextLanes = getHighestPriorityLanes(pendingLanes))\n        : ((pingedLanes &= nonIdlePendingLanes),\n          0 !== pingedLanes\n            ? (nextLanes = getHighestPriorityLanes(pingedLanes))\n            : rootHasPendingCommit ||\n              ((rootHasPendingCommit = nonIdlePendingLanes & ~root),\n              0 !== rootHasPendingCommit &&\n                (nextLanes = getHighestPriorityLanes(rootHasPendingCommit)))))\n    : ((nonIdlePendingLanes = pendingLanes & ~suspendedLanes),\n      0 !== nonIdlePendingLanes\n        ? (nextLanes = getHighestPriorityLanes(nonIdlePendingLanes))\n        : 0 !== pingedLanes\n          ? (nextLanes = getHighestPriorityLanes(pingedLanes))\n          : rootHasPendingCommit ||\n            ((rootHasPendingCommit = pendingLanes & ~root),\n            0 !== rootHasPendingCommit &&\n              (nextLanes = getHighestPriorityLanes(rootHasPendingCommit))));\n  return 0 === nextLanes\n    ? 0\n    : 0 !== wipLanes &&\n        wipLanes !== nextLanes &&\n        0 === (wipLanes & suspendedLanes) &&\n        ((suspendedLanes = nextLanes & -nextLanes),\n        (rootHasPendingCommit = wipLanes & -wipLanes),\n        suspendedLanes >= rootHasPendingCommit ||\n          (32 === suspendedLanes && 0 !== (rootHasPendingCommit & 4194048)))\n      ? wipLanes\n      : nextLanes;\n}\nfunction checkIfRootIsPrerendering(root, renderLanes) {\n  return (\n    0 ===\n    (root.pendingLanes &\n      ~(root.suspendedLanes & ~root.pingedLanes) &\n      renderLanes)\n  );\n}\nfunction computeExpirationTime(lane, currentTime) {\n  switch (lane) {\n    case 1:\n    case 2:\n    case 4:\n    case 8:\n    case 64:\n      return currentTime + 250;\n    case 16:\n    case 32:\n    case 128:\n    case 256:\n    case 512:\n    case 1024:\n    case 2048:\n    case 4096:\n    case 8192:\n    case 16384:\n    case 32768:\n    case 65536:\n    case 131072:\n    case 262144:\n    case 524288:\n    case 1048576:\n    case 2097152:\n      return currentTime + 5e3;\n    case 4194304:\n    case 8388608:\n    case 16777216:\n    case 33554432:\n      return -1;\n    case 67108864:\n    case 134217728:\n    case 268435456:\n    case 536870912:\n    case 1073741824:\n      return -1;\n    default:\n      return -1;\n  }\n}\nfunction claimNextTransitionLane() {\n  var lane = nextTransitionLane;\n  nextTransitionLane <<= 1;\n  0 === (nextTransitionLane & 4194048) && (nextTransitionLane = 256);\n  return lane;\n}\nfunction claimNextRetryLane() {\n  var lane = nextRetryLane;\n  nextRetryLane <<= 1;\n  0 === (nextRetryLane & 62914560) && (nextRetryLane = 4194304);\n  return lane;\n}\nfunction createLaneMap(initial) {\n  for (var laneMap = [], i = 0; 31 > i; i++) laneMap.push(initial);\n  return laneMap;\n}\nfunction markRootUpdated$1(root, updateLane) {\n  root.pendingLanes |= updateLane;\n  268435456 !== updateLane &&\n    ((root.suspendedLanes = 0), (root.pingedLanes = 0), (root.warmLanes = 0));\n}\nfunction markRootFinished(\n  root,\n  finishedLanes,\n  remainingLanes,\n  spawnedLane,\n  updatedLanes,\n  suspendedRetryLanes\n) {\n  var previouslyPendingLanes = root.pendingLanes;\n  root.pendingLanes = remainingLanes;\n  root.suspendedLanes = 0;\n  root.pingedLanes = 0;\n  root.warmLanes = 0;\n  root.expiredLanes &= remainingLanes;\n  root.entangledLanes &= remainingLanes;\n  root.errorRecoveryDisabledLanes &= remainingLanes;\n  root.shellSuspendCounter = 0;\n  var entanglements = root.entanglements,\n    expirationTimes = root.expirationTimes,\n    hiddenUpdates = root.hiddenUpdates;\n  for (\n    remainingLanes = previouslyPendingLanes & ~remainingLanes;\n    0 < remainingLanes;\n\n  ) {\n    var index$5 = 31 - clz32(remainingLanes),\n      lane = 1 << index$5;\n    entanglements[index$5] = 0;\n    expirationTimes[index$5] = -1;\n    var hiddenUpdatesForLane = hiddenUpdates[index$5];\n    if (null !== hiddenUpdatesForLane)\n      for (\n        hiddenUpdates[index$5] = null, index$5 = 0;\n        index$5 < hiddenUpdatesForLane.length;\n        index$5++\n      ) {\n        var update = hiddenUpdatesForLane[index$5];\n        null !== update && (update.lane &= -536870913);\n      }\n    remainingLanes &= ~lane;\n  }\n  0 !== spawnedLane && markSpawnedDeferredLane(root, spawnedLane, 0);\n  0 !== suspendedRetryLanes &&\n    0 === updatedLanes &&\n    0 !== root.tag &&\n    (root.suspendedLanes |=\n      suspendedRetryLanes & ~(previouslyPendingLanes & ~finishedLanes));\n}\nfunction markSpawnedDeferredLane(root, spawnedLane, entangledLanes) {\n  root.pendingLanes |= spawnedLane;\n  root.suspendedLanes &= ~spawnedLane;\n  var spawnedLaneIndex = 31 - clz32(spawnedLane);\n  root.entangledLanes |= spawnedLane;\n  root.entanglements[spawnedLaneIndex] =\n    root.entanglements[spawnedLaneIndex] |\n    1073741824 |\n    (entangledLanes & 4194090);\n}\nfunction markRootEntangled(root, entangledLanes) {\n  var rootEntangledLanes = (root.entangledLanes |= entangledLanes);\n  for (root = root.entanglements; rootEntangledLanes; ) {\n    var index$6 = 31 - clz32(rootEntangledLanes),\n      lane = 1 << index$6;\n    (lane & entangledLanes) | (root[index$6] & entangledLanes) &&\n      (root[index$6] |= entangledLanes);\n    rootEntangledLanes &= ~lane;\n  }\n}\nfunction getBumpedLaneForHydrationByLane(lane) {\n  switch (lane) {\n    case 2:\n      lane = 1;\n      break;\n    case 8:\n      lane = 4;\n      break;\n    case 32:\n      lane = 16;\n      break;\n    case 256:\n    case 512:\n    case 1024:\n    case 2048:\n    case 4096:\n    case 8192:\n    case 16384:\n    case 32768:\n    case 65536:\n    case 131072:\n    case 262144:\n    case 524288:\n    case 1048576:\n    case 2097152:\n    case 4194304:\n    case 8388608:\n    case 16777216:\n    case 33554432:\n      lane = 128;\n      break;\n    case 268435456:\n      lane = 134217728;\n      break;\n    default:\n      lane = 0;\n  }\n  return lane;\n}\nfunction lanesToEventPriority(lanes) {\n  lanes &= -lanes;\n  return 2 < lanes\n    ? 8 < lanes\n      ? 0 !== (lanes & 134217727)\n        ? 32\n        : 268435456\n      : 8\n    : 2;\n}\nfunction resolveUpdatePriority() {\n  var updatePriority = ReactDOMSharedInternals.p;\n  if (0 !== updatePriority) return updatePriority;\n  updatePriority = window.event;\n  return void 0 === updatePriority ? 32 : getEventPriority(updatePriority.type);\n}\nfunction runWithPriority(priority, fn) {\n  var previousPriority = ReactDOMSharedInternals.p;\n  try {\n    return (ReactDOMSharedInternals.p = priority), fn();\n  } finally {\n    ReactDOMSharedInternals.p = previousPriority;\n  }\n}\nvar randomKey = Math.random().toString(36).slice(2),\n  internalInstanceKey = \"__reactFiber$\" + randomKey,\n  internalPropsKey = \"__reactProps$\" + randomKey,\n  internalContainerInstanceKey = \"__reactContainer$\" + randomKey,\n  internalEventHandlersKey = \"__reactEvents$\" + randomKey,\n  internalEventHandlerListenersKey = \"__reactListeners$\" + randomKey,\n  internalEventHandlesSetKey = \"__reactHandles$\" + randomKey,\n  internalRootNodeResourcesKey = \"__reactResources$\" + randomKey,\n  internalHoistableMarker = \"__reactMarker$\" + randomKey;\nfunction detachDeletedInstance(node) {\n  delete node[internalInstanceKey];\n  delete node[internalPropsKey];\n  delete node[internalEventHandlersKey];\n  delete node[internalEventHandlerListenersKey];\n  delete node[internalEventHandlesSetKey];\n}\nfunction getClosestInstanceFromNode(targetNode) {\n  var targetInst = targetNode[internalInstanceKey];\n  if (targetInst) return targetInst;\n  for (var parentNode = targetNode.parentNode; parentNode; ) {\n    if (\n      (targetInst =\n        parentNode[internalContainerInstanceKey] ||\n        parentNode[internalInstanceKey])\n    ) {\n      parentNode = targetInst.alternate;\n      if (\n        null !== targetInst.child ||\n        (null !== parentNode && null !== parentNode.child)\n      )\n        for (\n          targetNode = getParentSuspenseInstance(targetNode);\n          null !== targetNode;\n\n        ) {\n          if ((parentNode = targetNode[internalInstanceKey])) return parentNode;\n          targetNode = getParentSuspenseInstance(targetNode);\n        }\n      return targetInst;\n    }\n    targetNode = parentNode;\n    parentNode = targetNode.parentNode;\n  }\n  return null;\n}\nfunction getInstanceFromNode(node) {\n  if (\n    (node = node[internalInstanceKey] || node[internalContainerInstanceKey])\n  ) {\n    var tag = node.tag;\n    if (\n      5 === tag ||\n      6 === tag ||\n      13 === tag ||\n      26 === tag ||\n      27 === tag ||\n      3 === tag\n    )\n      return node;\n  }\n  return null;\n}\nfunction getNodeFromInstance(inst) {\n  var tag = inst.tag;\n  if (5 === tag || 26 === tag || 27 === tag || 6 === tag) return inst.stateNode;\n  throw Error(formatProdErrorMessage(33));\n}\nfunction getResourcesFromRoot(root) {\n  var resources = root[internalRootNodeResourcesKey];\n  resources ||\n    (resources = root[internalRootNodeResourcesKey] =\n      { hoistableStyles: new Map(), hoistableScripts: new Map() });\n  return resources;\n}\nfunction markNodeAsHoistable(node) {\n  node[internalHoistableMarker] = !0;\n}\nvar allNativeEvents = new Set(),\n  registrationNameDependencies = {};\nfunction registerTwoPhaseEvent(registrationName, dependencies) {\n  registerDirectEvent(registrationName, dependencies);\n  registerDirectEvent(registrationName + \"Capture\", dependencies);\n}\nfunction registerDirectEvent(registrationName, dependencies) {\n  registrationNameDependencies[registrationName] = dependencies;\n  for (\n    registrationName = 0;\n    registrationName < dependencies.length;\n    registrationName++\n  )\n    allNativeEvents.add(dependencies[registrationName]);\n}\nvar VALID_ATTRIBUTE_NAME_REGEX = RegExp(\n    \"^[:A-Z_a-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD][:A-Z_a-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD\\\\-.0-9\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]*$\"\n  ),\n  illegalAttributeNameCache = {},\n  validatedAttributeNameCache = {};\nfunction isAttributeNameSafe(attributeName) {\n  if (hasOwnProperty.call(validatedAttributeNameCache, attributeName))\n    return !0;\n  if (hasOwnProperty.call(illegalAttributeNameCache, attributeName)) return !1;\n  if (VALID_ATTRIBUTE_NAME_REGEX.test(attributeName))\n    return (validatedAttributeNameCache[attributeName] = !0);\n  illegalAttributeNameCache[attributeName] = !0;\n  return !1;\n}\nfunction setValueForAttribute(node, name, value) {\n  if (isAttributeNameSafe(name))\n    if (null === value) node.removeAttribute(name);\n    else {\n      switch (typeof value) {\n        case \"undefined\":\n        case \"function\":\n        case \"symbol\":\n          node.removeAttribute(name);\n          return;\n        case \"boolean\":\n          var prefix$8 = name.toLowerCase().slice(0, 5);\n          if (\"data-\" !== prefix$8 && \"aria-\" !== prefix$8) {\n            node.removeAttribute(name);\n            return;\n          }\n      }\n      node.setAttribute(name, \"\" + value);\n    }\n}\nfunction setValueForKnownAttribute(node, name, value) {\n  if (null === value) node.removeAttribute(name);\n  else {\n    switch (typeof value) {\n      case \"undefined\":\n      case \"function\":\n      case \"symbol\":\n      case \"boolean\":\n        node.removeAttribute(name);\n        return;\n    }\n    node.setAttribute(name, \"\" + value);\n  }\n}\nfunction setValueForNamespacedAttribute(node, namespace, name, value) {\n  if (null === value) node.removeAttribute(name);\n  else {\n    switch (typeof value) {\n      case \"undefined\":\n      case \"function\":\n      case \"symbol\":\n      case \"boolean\":\n        node.removeAttribute(name);\n        return;\n    }\n    node.setAttributeNS(namespace, name, \"\" + value);\n  }\n}\nvar prefix, suffix;\nfunction describeBuiltInComponentFrame(name) {\n  if (void 0 === prefix)\n    try {\n      throw Error();\n    } catch (x) {\n      var match = x.stack.trim().match(/\\n( *(at )?)/);\n      prefix = (match && match[1]) || \"\";\n      suffix =\n        -1 < x.stack.indexOf(\"\\n    at\")\n          ? \" (<anonymous>)\"\n          : -1 < x.stack.indexOf(\"@\")\n            ? \"@unknown:0:0\"\n            : \"\";\n    }\n  return \"\\n\" + prefix + name + suffix;\n}\nvar reentry = !1;\nfunction describeNativeComponentFrame(fn, construct) {\n  if (!fn || reentry) return \"\";\n  reentry = !0;\n  var previousPrepareStackTrace = Error.prepareStackTrace;\n  Error.prepareStackTrace = void 0;\n  try {\n    var RunInRootFrame = {\n      DetermineComponentFrameRoot: function () {\n        try {\n          if (construct) {\n            var Fake = function () {\n              throw Error();\n            };\n            Object.defineProperty(Fake.prototype, \"props\", {\n              set: function () {\n                throw Error();\n              }\n            });\n            if (\"object\" === typeof Reflect && Reflect.construct) {\n              try {\n                Reflect.construct(Fake, []);\n              } catch (x) {\n                var control = x;\n              }\n              Reflect.construct(fn, [], Fake);\n            } else {\n              try {\n                Fake.call();\n              } catch (x$9) {\n                control = x$9;\n              }\n              fn.call(Fake.prototype);\n            }\n          } else {\n            try {\n              throw Error();\n            } catch (x$10) {\n              control = x$10;\n            }\n            (Fake = fn()) &&\n              \"function\" === typeof Fake.catch &&\n              Fake.catch(function () {});\n          }\n        } catch (sample) {\n          if (sample && control && \"string\" === typeof sample.stack)\n            return [sample.stack, control.stack];\n        }\n        return [null, null];\n      }\n    };\n    RunInRootFrame.DetermineComponentFrameRoot.displayName =\n      \"DetermineComponentFrameRoot\";\n    var namePropDescriptor = Object.getOwnPropertyDescriptor(\n      RunInRootFrame.DetermineComponentFrameRoot,\n      \"name\"\n    );\n    namePropDescriptor &&\n      namePropDescriptor.configurable &&\n      Object.defineProperty(\n        RunInRootFrame.DetermineComponentFrameRoot,\n        \"name\",\n        { value: \"DetermineComponentFrameRoot\" }\n      );\n    var _RunInRootFrame$Deter = RunInRootFrame.DetermineComponentFrameRoot(),\n      sampleStack = _RunInRootFrame$Deter[0],\n      controlStack = _RunInRootFrame$Deter[1];\n    if (sampleStack && controlStack) {\n      var sampleLines = sampleStack.split(\"\\n\"),\n        controlLines = controlStack.split(\"\\n\");\n      for (\n        namePropDescriptor = RunInRootFrame = 0;\n        RunInRootFrame < sampleLines.length &&\n        !sampleLines[RunInRootFrame].includes(\"DetermineComponentFrameRoot\");\n\n      )\n        RunInRootFrame++;\n      for (\n        ;\n        namePropDescriptor < controlLines.length &&\n        !controlLines[namePropDescriptor].includes(\n          \"DetermineComponentFrameRoot\"\n        );\n\n      )\n        namePropDescriptor++;\n      if (\n        RunInRootFrame === sampleLines.length ||\n        namePropDescriptor === controlLines.length\n      )\n        for (\n          RunInRootFrame = sampleLines.length - 1,\n            namePropDescriptor = controlLines.length - 1;\n          1 <= RunInRootFrame &&\n          0 <= namePropDescriptor &&\n          sampleLines[RunInRootFrame] !== controlLines[namePropDescriptor];\n\n        )\n          namePropDescriptor--;\n      for (\n        ;\n        1 <= RunInRootFrame && 0 <= namePropDescriptor;\n        RunInRootFrame--, namePropDescriptor--\n      )\n        if (sampleLines[RunInRootFrame] !== controlLines[namePropDescriptor]) {\n          if (1 !== RunInRootFrame || 1 !== namePropDescriptor) {\n            do\n              if (\n                (RunInRootFrame--,\n                namePropDescriptor--,\n                0 > namePropDescriptor ||\n                  sampleLines[RunInRootFrame] !==\n                    controlLines[namePropDescriptor])\n              ) {\n                var frame =\n                  \"\\n\" +\n                  sampleLines[RunInRootFrame].replace(\" at new \", \" at \");\n                fn.displayName &&\n                  frame.includes(\"<anonymous>\") &&\n                  (frame = frame.replace(\"<anonymous>\", fn.displayName));\n                return frame;\n              }\n            while (1 <= RunInRootFrame && 0 <= namePropDescriptor);\n          }\n          break;\n        }\n    }\n  } finally {\n    (reentry = !1), (Error.prepareStackTrace = previousPrepareStackTrace);\n  }\n  return (previousPrepareStackTrace = fn ? fn.displayName || fn.name : \"\")\n    ? describeBuiltInComponentFrame(previousPrepareStackTrace)\n    : \"\";\n}\nfunction describeFiber(fiber) {\n  switch (fiber.tag) {\n    case 26:\n    case 27:\n    case 5:\n      return describeBuiltInComponentFrame(fiber.type);\n    case 16:\n      return describeBuiltInComponentFrame(\"Lazy\");\n    case 13:\n      return describeBuiltInComponentFrame(\"Suspense\");\n    case 19:\n      return describeBuiltInComponentFrame(\"SuspenseList\");\n    case 0:\n    case 15:\n      return describeNativeComponentFrame(fiber.type, !1);\n    case 11:\n      return describeNativeComponentFrame(fiber.type.render, !1);\n    case 1:\n      return describeNativeComponentFrame(fiber.type, !0);\n    case 31:\n      return describeBuiltInComponentFrame(\"Activity\");\n    default:\n      return \"\";\n  }\n}\nfunction getStackByFiberInDevAndProd(workInProgress) {\n  try {\n    var info = \"\";\n    do\n      (info += describeFiber(workInProgress)),\n        (workInProgress = workInProgress.return);\n    while (workInProgress);\n    return info;\n  } catch (x) {\n    return \"\\nError generating stack: \" + x.message + \"\\n\" + x.stack;\n  }\n}\nfunction getToStringValue(value) {\n  switch (typeof value) {\n    case \"bigint\":\n    case \"boolean\":\n    case \"number\":\n    case \"string\":\n    case \"undefined\":\n      return value;\n    case \"object\":\n      return value;\n    default:\n      return \"\";\n  }\n}\nfunction isCheckable(elem) {\n  var type = elem.type;\n  return (\n    (elem = elem.nodeName) &&\n    \"input\" === elem.toLowerCase() &&\n    (\"checkbox\" === type || \"radio\" === type)\n  );\n}\nfunction trackValueOnNode(node) {\n  var valueField = isCheckable(node) ? \"checked\" : \"value\",\n    descriptor = Object.getOwnPropertyDescriptor(\n      node.constructor.prototype,\n      valueField\n    ),\n    currentValue = \"\" + node[valueField];\n  if (\n    !node.hasOwnProperty(valueField) &&\n    \"undefined\" !== typeof descriptor &&\n    \"function\" === typeof descriptor.get &&\n    \"function\" === typeof descriptor.set\n  ) {\n    var get = descriptor.get,\n      set = descriptor.set;\n    Object.defineProperty(node, valueField, {\n      configurable: !0,\n      get: function () {\n        return get.call(this);\n      },\n      set: function (value) {\n        currentValue = \"\" + value;\n        set.call(this, value);\n      }\n    });\n    Object.defineProperty(node, valueField, {\n      enumerable: descriptor.enumerable\n    });\n    return {\n      getValue: function () {\n        return currentValue;\n      },\n      setValue: function (value) {\n        currentValue = \"\" + value;\n      },\n      stopTracking: function () {\n        node._valueTracker = null;\n        delete node[valueField];\n      }\n    };\n  }\n}\nfunction track(node) {\n  node._valueTracker || (node._valueTracker = trackValueOnNode(node));\n}\nfunction updateValueIfChanged(node) {\n  if (!node) return !1;\n  var tracker = node._valueTracker;\n  if (!tracker) return !0;\n  var lastValue = tracker.getValue();\n  var value = \"\";\n  node &&\n    (value = isCheckable(node)\n      ? node.checked\n        ? \"true\"\n        : \"false\"\n      : node.value);\n  node = value;\n  return node !== lastValue ? (tracker.setValue(node), !0) : !1;\n}\nfunction getActiveElement(doc) {\n  doc = doc || (\"undefined\" !== typeof document ? document : void 0);\n  if (\"undefined\" === typeof doc) return null;\n  try {\n    return doc.activeElement || doc.body;\n  } catch (e) {\n    return doc.body;\n  }\n}\nvar escapeSelectorAttributeValueInsideDoubleQuotesRegex = /[\\n\"\\\\]/g;\nfunction escapeSelectorAttributeValueInsideDoubleQuotes(value) {\n  return value.replace(\n    escapeSelectorAttributeValueInsideDoubleQuotesRegex,\n    function (ch) {\n      return \"\\\\\" + ch.charCodeAt(0).toString(16) + \" \";\n    }\n  );\n}\nfunction updateInput(\n  element,\n  value,\n  defaultValue,\n  lastDefaultValue,\n  checked,\n  defaultChecked,\n  type,\n  name\n) {\n  element.name = \"\";\n  null != type &&\n  \"function\" !== typeof type &&\n  \"symbol\" !== typeof type &&\n  \"boolean\" !== typeof type\n    ? (element.type = type)\n    : element.removeAttribute(\"type\");\n  if (null != value)\n    if (\"number\" === type) {\n      if ((0 === value && \"\" === element.value) || element.value != value)\n        element.value = \"\" + getToStringValue(value);\n    } else\n      element.value !== \"\" + getToStringValue(value) &&\n        (element.value = \"\" + getToStringValue(value));\n  else\n    (\"submit\" !== type && \"reset\" !== type) || element.removeAttribute(\"value\");\n  null != value\n    ? setDefaultValue(element, type, getToStringValue(value))\n    : null != defaultValue\n      ? setDefaultValue(element, type, getToStringValue(defaultValue))\n      : null != lastDefaultValue && element.removeAttribute(\"value\");\n  null == checked &&\n    null != defaultChecked &&\n    (element.defaultChecked = !!defaultChecked);\n  null != checked &&\n    (element.checked =\n      checked && \"function\" !== typeof checked && \"symbol\" !== typeof checked);\n  null != name &&\n  \"function\" !== typeof name &&\n  \"symbol\" !== typeof name &&\n  \"boolean\" !== typeof name\n    ? (element.name = \"\" + getToStringValue(name))\n    : element.removeAttribute(\"name\");\n}\nfunction initInput(\n  element,\n  value,\n  defaultValue,\n  checked,\n  defaultChecked,\n  type,\n  name,\n  isHydrating\n) {\n  null != type &&\n    \"function\" !== typeof type &&\n    \"symbol\" !== typeof type &&\n    \"boolean\" !== typeof type &&\n    (element.type = type);\n  if (null != value || null != defaultValue) {\n    if (\n      !(\n        (\"submit\" !== type && \"reset\" !== type) ||\n        (void 0 !== value && null !== value)\n      )\n    )\n      return;\n    defaultValue =\n      null != defaultValue ? \"\" + getToStringValue(defaultValue) : \"\";\n    value = null != value ? \"\" + getToStringValue(value) : defaultValue;\n    isHydrating || value === element.value || (element.value = value);\n    element.defaultValue = value;\n  }\n  checked = null != checked ? checked : defaultChecked;\n  checked =\n    \"function\" !== typeof checked && \"symbol\" !== typeof checked && !!checked;\n  element.checked = isHydrating ? element.checked : !!checked;\n  element.defaultChecked = !!checked;\n  null != name &&\n    \"function\" !== typeof name &&\n    \"symbol\" !== typeof name &&\n    \"boolean\" !== typeof name &&\n    (element.name = name);\n}\nfunction setDefaultValue(node, type, value) {\n  (\"number\" === type && getActiveElement(node.ownerDocument) === node) ||\n    node.defaultValue === \"\" + value ||\n    (node.defaultValue = \"\" + value);\n}\nfunction updateOptions(node, multiple, propValue, setDefaultSelected) {\n  node = node.options;\n  if (multiple) {\n    multiple = {};\n    for (var i = 0; i < propValue.length; i++)\n      multiple[\"$\" + propValue[i]] = !0;\n    for (propValue = 0; propValue < node.length; propValue++)\n      (i = multiple.hasOwnProperty(\"$\" + node[propValue].value)),\n        node[propValue].selected !== i && (node[propValue].selected = i),\n        i && setDefaultSelected && (node[propValue].defaultSelected = !0);\n  } else {\n    propValue = \"\" + getToStringValue(propValue);\n    multiple = null;\n    for (i = 0; i < node.length; i++) {\n      if (node[i].value === propValue) {\n        node[i].selected = !0;\n        setDefaultSelected && (node[i].defaultSelected = !0);\n        return;\n      }\n      null !== multiple || node[i].disabled || (multiple = node[i]);\n    }\n    null !== multiple && (multiple.selected = !0);\n  }\n}\nfunction updateTextarea(element, value, defaultValue) {\n  if (\n    null != value &&\n    ((value = \"\" + getToStringValue(value)),\n    value !== element.value && (element.value = value),\n    null == defaultValue)\n  ) {\n    element.defaultValue !== value && (element.defaultValue = value);\n    return;\n  }\n  element.defaultValue =\n    null != defaultValue ? \"\" + getToStringValue(defaultValue) : \"\";\n}\nfunction initTextarea(element, value, defaultValue, children) {\n  if (null == value) {\n    if (null != children) {\n      if (null != defaultValue) throw Error(formatProdErrorMessage(92));\n      if (isArrayImpl(children)) {\n        if (1 < children.length) throw Error(formatProdErrorMessage(93));\n        children = children[0];\n      }\n      defaultValue = children;\n    }\n    null == defaultValue && (defaultValue = \"\");\n    value = defaultValue;\n  }\n  defaultValue = getToStringValue(value);\n  element.defaultValue = defaultValue;\n  children = element.textContent;\n  children === defaultValue &&\n    \"\" !== children &&\n    null !== children &&\n    (element.value = children);\n}\nfunction setTextContent(node, text) {\n  if (text) {\n    var firstChild = node.firstChild;\n    if (\n      firstChild &&\n      firstChild === node.lastChild &&\n      3 === firstChild.nodeType\n    ) {\n      firstChild.nodeValue = text;\n      return;\n    }\n  }\n  node.textContent = text;\n}\nvar unitlessNumbers = new Set(\n  \"animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp\".split(\n    \" \"\n  )\n);\nfunction setValueForStyle(style, styleName, value) {\n  var isCustomProperty = 0 === styleName.indexOf(\"--\");\n  null == value || \"boolean\" === typeof value || \"\" === value\n    ? isCustomProperty\n      ? style.setProperty(styleName, \"\")\n      : \"float\" === styleName\n        ? (style.cssFloat = \"\")\n        : (style[styleName] = \"\")\n    : isCustomProperty\n      ? style.setProperty(styleName, value)\n      : \"number\" !== typeof value ||\n          0 === value ||\n          unitlessNumbers.has(styleName)\n        ? \"float\" === styleName\n          ? (style.cssFloat = value)\n          : (style[styleName] = (\"\" + value).trim())\n        : (style[styleName] = value + \"px\");\n}\nfunction setValueForStyles(node, styles, prevStyles) {\n  if (null != styles && \"object\" !== typeof styles)\n    throw Error(formatProdErrorMessage(62));\n  node = node.style;\n  if (null != prevStyles) {\n    for (var styleName in prevStyles)\n      !prevStyles.hasOwnProperty(styleName) ||\n        (null != styles && styles.hasOwnProperty(styleName)) ||\n        (0 === styleName.indexOf(\"--\")\n          ? node.setProperty(styleName, \"\")\n          : \"float\" === styleName\n            ? (node.cssFloat = \"\")\n            : (node[styleName] = \"\"));\n    for (var styleName$16 in styles)\n      (styleName = styles[styleName$16]),\n        styles.hasOwnProperty(styleName$16) &&\n          prevStyles[styleName$16] !== styleName &&\n          setValueForStyle(node, styleName$16, styleName);\n  } else\n    for (var styleName$17 in styles)\n      styles.hasOwnProperty(styleName$17) &&\n        setValueForStyle(node, styleName$17, styles[styleName$17]);\n}\nfunction isCustomElement(tagName) {\n  if (-1 === tagName.indexOf(\"-\")) return !1;\n  switch (tagName) {\n    case \"annotation-xml\":\n    case \"color-profile\":\n    case \"font-face\":\n    case \"font-face-src\":\n    case \"font-face-uri\":\n    case \"font-face-format\":\n    case \"font-face-name\":\n    case \"missing-glyph\":\n      return !1;\n    default:\n      return !0;\n  }\n}\nvar aliases = new Map([\n    [\"acceptCharset\", \"accept-charset\"],\n    [\"htmlFor\", \"for\"],\n    [\"httpEquiv\", \"http-equiv\"],\n    [\"crossOrigin\", \"crossorigin\"],\n    [\"accentHeight\", \"accent-height\"],\n    [\"alignmentBaseline\", \"alignment-baseline\"],\n    [\"arabicForm\", \"arabic-form\"],\n    [\"baselineShift\", \"baseline-shift\"],\n    [\"capHeight\", \"cap-height\"],\n    [\"clipPath\", \"clip-path\"],\n    [\"clipRule\", \"clip-rule\"],\n    [\"colorInterpolation\", \"color-interpolation\"],\n    [\"colorInterpolationFilters\", \"color-interpolation-filters\"],\n    [\"colorProfile\", \"color-profile\"],\n    [\"colorRendering\", \"color-rendering\"],\n    [\"dominantBaseline\", \"dominant-baseline\"],\n    [\"enableBackground\", \"enable-background\"],\n    [\"fillOpacity\", \"fill-opacity\"],\n    [\"fillRule\", \"fill-rule\"],\n    [\"floodColor\", \"flood-color\"],\n    [\"floodOpacity\", \"flood-opacity\"],\n    [\"fontFamily\", \"font-family\"],\n    [\"fontSize\", \"font-size\"],\n    [\"fontSizeAdjust\", \"font-size-adjust\"],\n    [\"fontStretch\", \"font-stretch\"],\n    [\"fontStyle\", \"font-style\"],\n    [\"fontVariant\", \"font-variant\"],\n    [\"fontWeight\", \"font-weight\"],\n    [\"glyphName\", \"glyph-name\"],\n    [\"glyphOrientationHorizontal\", \"glyph-orientation-horizontal\"],\n    [\"glyphOrientationVertical\", \"glyph-orientation-vertical\"],\n    [\"horizAdvX\", \"horiz-adv-x\"],\n    [\"horizOriginX\", \"horiz-origin-x\"],\n    [\"imageRendering\", \"image-rendering\"],\n    [\"letterSpacing\", \"letter-spacing\"],\n    [\"lightingColor\", \"lighting-color\"],\n    [\"markerEnd\", \"marker-end\"],\n    [\"markerMid\", \"marker-mid\"],\n    [\"markerStart\", \"marker-start\"],\n    [\"overlinePosition\", \"overline-position\"],\n    [\"overlineThickness\", \"overline-thickness\"],\n    [\"paintOrder\", \"paint-order\"],\n    [\"panose-1\", \"panose-1\"],\n    [\"pointerEvents\", \"pointer-events\"],\n    [\"renderingIntent\", \"rendering-intent\"],\n    [\"shapeRendering\", \"shape-rendering\"],\n    [\"stopColor\", \"stop-color\"],\n    [\"stopOpacity\", \"stop-opacity\"],\n    [\"strikethroughPosition\", \"strikethrough-position\"],\n    [\"strikethroughThickness\", \"strikethrough-thickness\"],\n    [\"strokeDasharray\", \"stroke-dasharray\"],\n    [\"strokeDashoffset\", \"stroke-dashoffset\"],\n    [\"strokeLinecap\", \"stroke-linecap\"],\n    [\"strokeLinejoin\", \"stroke-linejoin\"],\n    [\"strokeMiterlimit\", \"stroke-miterlimit\"],\n    [\"strokeOpacity\", \"stroke-opacity\"],\n    [\"strokeWidth\", \"stroke-width\"],\n    [\"textAnchor\", \"text-anchor\"],\n    [\"textDecoration\", \"text-decoration\"],\n    [\"textRendering\", \"text-rendering\"],\n    [\"transformOrigin\", \"transform-origin\"],\n    [\"underlinePosition\", \"underline-position\"],\n    [\"underlineThickness\", \"underline-thickness\"],\n    [\"unicodeBidi\", \"unicode-bidi\"],\n    [\"unicodeRange\", \"unicode-range\"],\n    [\"unitsPerEm\", \"units-per-em\"],\n    [\"vAlphabetic\", \"v-alphabetic\"],\n    [\"vHanging\", \"v-hanging\"],\n    [\"vIdeographic\", \"v-ideographic\"],\n    [\"vMathematical\", \"v-mathematical\"],\n    [\"vectorEffect\", \"vector-effect\"],\n    [\"vertAdvY\", \"vert-adv-y\"],\n    [\"vertOriginX\", \"vert-origin-x\"],\n    [\"vertOriginY\", \"vert-origin-y\"],\n    [\"wordSpacing\", \"word-spacing\"],\n    [\"writingMode\", \"writing-mode\"],\n    [\"xmlnsXlink\", \"xmlns:xlink\"],\n    [\"xHeight\", \"x-height\"]\n  ]),\n  isJavaScriptProtocol =\n    /^[\\u0000-\\u001F ]*j[\\r\\n\\t]*a[\\r\\n\\t]*v[\\r\\n\\t]*a[\\r\\n\\t]*s[\\r\\n\\t]*c[\\r\\n\\t]*r[\\r\\n\\t]*i[\\r\\n\\t]*p[\\r\\n\\t]*t[\\r\\n\\t]*:/i;\nfunction sanitizeURL(url) {\n  return isJavaScriptProtocol.test(\"\" + url)\n    ? \"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')\"\n    : url;\n}\nvar currentReplayingEvent = null;\nfunction getEventTarget(nativeEvent) {\n  nativeEvent = nativeEvent.target || nativeEvent.srcElement || window;\n  nativeEvent.correspondingUseElement &&\n    (nativeEvent = nativeEvent.correspondingUseElement);\n  return 3 === nativeEvent.nodeType ? nativeEvent.parentNode : nativeEvent;\n}\nvar restoreTarget = null,\n  restoreQueue = null;\nfunction restoreStateOfTarget(target) {\n  var internalInstance = getInstanceFromNode(target);\n  if (internalInstance && (target = internalInstance.stateNode)) {\n    var props = target[internalPropsKey] || null;\n    a: switch (((target = internalInstance.stateNode), internalInstance.type)) {\n      case \"input\":\n        updateInput(\n          target,\n          props.value,\n          props.defaultValue,\n          props.defaultValue,\n          props.checked,\n          props.defaultChecked,\n          props.type,\n          props.name\n        );\n        internalInstance = props.name;\n        if (\"radio\" === props.type && null != internalInstance) {\n          for (props = target; props.parentNode; ) props = props.parentNode;\n          props = props.querySelectorAll(\n            'input[name=\"' +\n              escapeSelectorAttributeValueInsideDoubleQuotes(\n                \"\" + internalInstance\n              ) +\n              '\"][type=\"radio\"]'\n          );\n          for (\n            internalInstance = 0;\n            internalInstance < props.length;\n            internalInstance++\n          ) {\n            var otherNode = props[internalInstance];\n            if (otherNode !== target && otherNode.form === target.form) {\n              var otherProps = otherNode[internalPropsKey] || null;\n              if (!otherProps) throw Error(formatProdErrorMessage(90));\n              updateInput(\n                otherNode,\n                otherProps.value,\n                otherProps.defaultValue,\n                otherProps.defaultValue,\n                otherProps.checked,\n                otherProps.defaultChecked,\n                otherProps.type,\n                otherProps.name\n              );\n            }\n          }\n          for (\n            internalInstance = 0;\n            internalInstance < props.length;\n            internalInstance++\n          )\n            (otherNode = props[internalInstance]),\n              otherNode.form === target.form && updateValueIfChanged(otherNode);\n        }\n        break a;\n      case \"textarea\":\n        updateTextarea(target, props.value, props.defaultValue);\n        break a;\n      case \"select\":\n        (internalInstance = props.value),\n          null != internalInstance &&\n            updateOptions(target, !!props.multiple, internalInstance, !1);\n    }\n  }\n}\nvar isInsideEventHandler = !1;\nfunction batchedUpdates$1(fn, a, b) {\n  if (isInsideEventHandler) return fn(a, b);\n  isInsideEventHandler = !0;\n  try {\n    var JSCompiler_inline_result = fn(a);\n    return JSCompiler_inline_result;\n  } finally {\n    if (\n      ((isInsideEventHandler = !1),\n      null !== restoreTarget || null !== restoreQueue)\n    )\n      if (\n        (flushSyncWork$1(),\n        restoreTarget &&\n          ((a = restoreTarget),\n          (fn = restoreQueue),\n          (restoreQueue = restoreTarget = null),\n          restoreStateOfTarget(a),\n          fn))\n      )\n        for (a = 0; a < fn.length; a++) restoreStateOfTarget(fn[a]);\n  }\n}\nfunction getListener(inst, registrationName) {\n  var stateNode = inst.stateNode;\n  if (null === stateNode) return null;\n  var props = stateNode[internalPropsKey] || null;\n  if (null === props) return null;\n  stateNode = props[registrationName];\n  a: switch (registrationName) {\n    case \"onClick\":\n    case \"onClickCapture\":\n    case \"onDoubleClick\":\n    case \"onDoubleClickCapture\":\n    case \"onMouseDown\":\n    case \"onMouseDownCapture\":\n    case \"onMouseMove\":\n    case \"onMouseMoveCapture\":\n    case \"onMouseUp\":\n    case \"onMouseUpCapture\":\n    case \"onMouseEnter\":\n      (props = !props.disabled) ||\n        ((inst = inst.type),\n        (props = !(\n          \"button\" === inst ||\n          \"input\" === inst ||\n          \"select\" === inst ||\n          \"textarea\" === inst\n        )));\n      inst = !props;\n      break a;\n    default:\n      inst = !1;\n  }\n  if (inst) return null;\n  if (stateNode && \"function\" !== typeof stateNode)\n    throw Error(\n      formatProdErrorMessage(231, registrationName, typeof stateNode)\n    );\n  return stateNode;\n}\nvar canUseDOM = !(\n    \"undefined\" === typeof window ||\n    \"undefined\" === typeof window.document ||\n    \"undefined\" === typeof window.document.createElement\n  ),\n  passiveBrowserEventsSupported = !1;\nif (canUseDOM)\n  try {\n    var options = {};\n    Object.defineProperty(options, \"passive\", {\n      get: function () {\n        passiveBrowserEventsSupported = !0;\n      }\n    });\n    window.addEventListener(\"test\", options, options);\n    window.removeEventListener(\"test\", options, options);\n  } catch (e) {\n    passiveBrowserEventsSupported = !1;\n  }\nvar root = null,\n  startText = null,\n  fallbackText = null;\nfunction getData() {\n  if (fallbackText) return fallbackText;\n  var start,\n    startValue = startText,\n    startLength = startValue.length,\n    end,\n    endValue = \"value\" in root ? root.value : root.textContent,\n    endLength = endValue.length;\n  for (\n    start = 0;\n    start < startLength && startValue[start] === endValue[start];\n    start++\n  );\n  var minEnd = startLength - start;\n  for (\n    end = 1;\n    end <= minEnd &&\n    startValue[startLength - end] === endValue[endLength - end];\n    end++\n  );\n  return (fallbackText = endValue.slice(start, 1 < end ? 1 - end : void 0));\n}\nfunction getEventCharCode(nativeEvent) {\n  var keyCode = nativeEvent.keyCode;\n  \"charCode\" in nativeEvent\n    ? ((nativeEvent = nativeEvent.charCode),\n      0 === nativeEvent && 13 === keyCode && (nativeEvent = 13))\n    : (nativeEvent = keyCode);\n  10 === nativeEvent && (nativeEvent = 13);\n  return 32 <= nativeEvent || 13 === nativeEvent ? nativeEvent : 0;\n}\nfunction functionThatReturnsTrue() {\n  return !0;\n}\nfunction functionThatReturnsFalse() {\n  return !1;\n}\nfunction createSyntheticEvent(Interface) {\n  function SyntheticBaseEvent(\n    reactName,\n    reactEventType,\n    targetInst,\n    nativeEvent,\n    nativeEventTarget\n  ) {\n    this._reactName = reactName;\n    this._targetInst = targetInst;\n    this.type = reactEventType;\n    this.nativeEvent = nativeEvent;\n    this.target = nativeEventTarget;\n    this.currentTarget = null;\n    for (var propName in Interface)\n      Interface.hasOwnProperty(propName) &&\n        ((reactName = Interface[propName]),\n        (this[propName] = reactName\n          ? reactName(nativeEvent)\n          : nativeEvent[propName]));\n    this.isDefaultPrevented = (\n      null != nativeEvent.defaultPrevented\n        ? nativeEvent.defaultPrevented\n        : !1 === nativeEvent.returnValue\n    )\n      ? functionThatReturnsTrue\n      : functionThatReturnsFalse;\n    this.isPropagationStopped = functionThatReturnsFalse;\n    return this;\n  }\n  assign(SyntheticBaseEvent.prototype, {\n    preventDefault: function () {\n      this.defaultPrevented = !0;\n      var event = this.nativeEvent;\n      event &&\n        (event.preventDefault\n          ? event.preventDefault()\n          : \"unknown\" !== typeof event.returnValue && (event.returnValue = !1),\n        (this.isDefaultPrevented = functionThatReturnsTrue));\n    },\n    stopPropagation: function () {\n      var event = this.nativeEvent;\n      event &&\n        (event.stopPropagation\n          ? event.stopPropagation()\n          : \"unknown\" !== typeof event.cancelBubble &&\n            (event.cancelBubble = !0),\n        (this.isPropagationStopped = functionThatReturnsTrue));\n    },\n    persist: function () {},\n    isPersistent: functionThatReturnsTrue\n  });\n  return SyntheticBaseEvent;\n}\nvar EventInterface = {\n    eventPhase: 0,\n    bubbles: 0,\n    cancelable: 0,\n    timeStamp: function (event) {\n      return event.timeStamp || Date.now();\n    },\n    defaultPrevented: 0,\n    isTrusted: 0\n  },\n  SyntheticEvent = createSyntheticEvent(EventInterface),\n  UIEventInterface = assign({}, EventInterface, { view: 0, detail: 0 }),\n  SyntheticUIEvent = createSyntheticEvent(UIEventInterface),\n  lastMovementX,\n  lastMovementY,\n  lastMouseEvent,\n  MouseEventInterface = assign({}, UIEventInterface, {\n    screenX: 0,\n    screenY: 0,\n    clientX: 0,\n    clientY: 0,\n    pageX: 0,\n    pageY: 0,\n    ctrlKey: 0,\n    shiftKey: 0,\n    altKey: 0,\n    metaKey: 0,\n    getModifierState: getEventModifierState,\n    button: 0,\n    buttons: 0,\n    relatedTarget: function (event) {\n      return void 0 === event.relatedTarget\n        ? event.fromElement === event.srcElement\n          ? event.toElement\n          : event.fromElement\n        : event.relatedTarget;\n    },\n    movementX: function (event) {\n      if (\"movementX\" in event) return event.movementX;\n      event !== lastMouseEvent &&\n        (lastMouseEvent && \"mousemove\" === event.type\n          ? ((lastMovementX = event.screenX - lastMouseEvent.screenX),\n            (lastMovementY = event.screenY - lastMouseEvent.screenY))\n          : (lastMovementY = lastMovementX = 0),\n        (lastMouseEvent = event));\n      return lastMovementX;\n    },\n    movementY: function (event) {\n      return \"movementY\" in event ? event.movementY : lastMovementY;\n    }\n  }),\n  SyntheticMouseEvent = createSyntheticEvent(MouseEventInterface),\n  DragEventInterface = assign({}, MouseEventInterface, { dataTransfer: 0 }),\n  SyntheticDragEvent = createSyntheticEvent(DragEventInterface),\n  FocusEventInterface = assign({}, UIEventInterface, { relatedTarget: 0 }),\n  SyntheticFocusEvent = createSyntheticEvent(FocusEventInterface),\n  AnimationEventInterface = assign({}, EventInterface, {\n    animationName: 0,\n    elapsedTime: 0,\n    pseudoElement: 0\n  }),\n  SyntheticAnimationEvent = createSyntheticEvent(AnimationEventInterface),\n  ClipboardEventInterface = assign({}, EventInterface, {\n    clipboardData: function (event) {\n      return \"clipboardData\" in event\n        ? event.clipboardData\n        : window.clipboardData;\n    }\n  }),\n  SyntheticClipboardEvent = createSyntheticEvent(ClipboardEventInterface),\n  CompositionEventInterface = assign({}, EventInterface, { data: 0 }),\n  SyntheticCompositionEvent = createSyntheticEvent(CompositionEventInterface),\n  normalizeKey = {\n    Esc: \"Escape\",\n    Spacebar: \" \",\n    Left: \"ArrowLeft\",\n    Up: \"ArrowUp\",\n    Right: \"ArrowRight\",\n    Down: \"ArrowDown\",\n    Del: \"Delete\",\n    Win: \"OS\",\n    Menu: \"ContextMenu\",\n    Apps: \"ContextMenu\",\n    Scroll: \"ScrollLock\",\n    MozPrintableKey: \"Unidentified\"\n  },\n  translateToKey = {\n    8: \"Backspace\",\n    9: \"Tab\",\n    12: \"Clear\",\n    13: \"Enter\",\n    16: \"Shift\",\n    17: \"Control\",\n    18: \"Alt\",\n    19: \"Pause\",\n    20: \"CapsLock\",\n    27: \"Escape\",\n    32: \" \",\n    33: \"PageUp\",\n    34: \"PageDown\",\n    35: \"End\",\n    36: \"Home\",\n    37: \"ArrowLeft\",\n    38: \"ArrowUp\",\n    39: \"ArrowRight\",\n    40: \"ArrowDown\",\n    45: \"Insert\",\n    46: \"Delete\",\n    112: \"F1\",\n    113: \"F2\",\n    114: \"F3\",\n    115: \"F4\",\n    116: \"F5\",\n    117: \"F6\",\n    118: \"F7\",\n    119: \"F8\",\n    120: \"F9\",\n    121: \"F10\",\n    122: \"F11\",\n    123: \"F12\",\n    144: \"NumLock\",\n    145: \"ScrollLock\",\n    224: \"Meta\"\n  },\n  modifierKeyToProp = {\n    Alt: \"altKey\",\n    Control: \"ctrlKey\",\n    Meta: \"metaKey\",\n    Shift: \"shiftKey\"\n  };\nfunction modifierStateGetter(keyArg) {\n  var nativeEvent = this.nativeEvent;\n  return nativeEvent.getModifierState\n    ? nativeEvent.getModifierState(keyArg)\n    : (keyArg = modifierKeyToProp[keyArg])\n      ? !!nativeEvent[keyArg]\n      : !1;\n}\nfunction getEventModifierState() {\n  return modifierStateGetter;\n}\nvar KeyboardEventInterface = assign({}, UIEventInterface, {\n    key: function (nativeEvent) {\n      if (nativeEvent.key) {\n        var key = normalizeKey[nativeEvent.key] || nativeEvent.key;\n        if (\"Unidentified\" !== key) return key;\n      }\n      return \"keypress\" === nativeEvent.type\n        ? ((nativeEvent = getEventCharCode(nativeEvent)),\n          13 === nativeEvent ? \"Enter\" : String.fromCharCode(nativeEvent))\n        : \"keydown\" === nativeEvent.type || \"keyup\" === nativeEvent.type\n          ? translateToKey[nativeEvent.keyCode] || \"Unidentified\"\n          : \"\";\n    },\n    code: 0,\n    location: 0,\n    ctrlKey: 0,\n    shiftKey: 0,\n    altKey: 0,\n    metaKey: 0,\n    repeat: 0,\n    locale: 0,\n    getModifierState: getEventModifierState,\n    charCode: function (event) {\n      return \"keypress\" === event.type ? getEventCharCode(event) : 0;\n    },\n    keyCode: function (event) {\n      return \"keydown\" === event.type || \"keyup\" === event.type\n        ? event.keyCode\n        : 0;\n    },\n    which: function (event) {\n      return \"keypress\" === event.type\n        ? getEventCharCode(event)\n        : \"keydown\" === event.type || \"keyup\" === event.type\n          ? event.keyCode\n          : 0;\n    }\n  }),\n  SyntheticKeyboardEvent = createSyntheticEvent(KeyboardEventInterface),\n  PointerEventInterface = assign({}, MouseEventInterface, {\n    pointerId: 0,\n    width: 0,\n    height: 0,\n    pressure: 0,\n    tangentialPressure: 0,\n    tiltX: 0,\n    tiltY: 0,\n    twist: 0,\n    pointerType: 0,\n    isPrimary: 0\n  }),\n  SyntheticPointerEvent = createSyntheticEvent(PointerEventInterface),\n  TouchEventInterface = assign({}, UIEventInterface, {\n    touches: 0,\n    targetTouches: 0,\n    changedTouches: 0,\n    altKey: 0,\n    metaKey: 0,\n    ctrlKey: 0,\n    shiftKey: 0,\n    getModifierState: getEventModifierState\n  }),\n  SyntheticTouchEvent = createSyntheticEvent(TouchEventInterface),\n  TransitionEventInterface = assign({}, EventInterface, {\n    propertyName: 0,\n    elapsedTime: 0,\n    pseudoElement: 0\n  }),\n  SyntheticTransitionEvent = createSyntheticEvent(TransitionEventInterface),\n  WheelEventInterface = assign({}, MouseEventInterface, {\n    deltaX: function (event) {\n      return \"deltaX\" in event\n        ? event.deltaX\n        : \"wheelDeltaX\" in event\n          ? -event.wheelDeltaX\n          : 0;\n    },\n    deltaY: function (event) {\n      return \"deltaY\" in event\n        ? event.deltaY\n        : \"wheelDeltaY\" in event\n          ? -event.wheelDeltaY\n          : \"wheelDelta\" in event\n            ? -event.wheelDelta\n            : 0;\n    },\n    deltaZ: 0,\n    deltaMode: 0\n  }),\n  SyntheticWheelEvent = createSyntheticEvent(WheelEventInterface),\n  ToggleEventInterface = assign({}, EventInterface, {\n    newState: 0,\n    oldState: 0\n  }),\n  SyntheticToggleEvent = createSyntheticEvent(ToggleEventInterface),\n  END_KEYCODES = [9, 13, 27, 32],\n  canUseCompositionEvent = canUseDOM && \"CompositionEvent\" in window,\n  documentMode = null;\ncanUseDOM &&\n  \"documentMode\" in document &&\n  (documentMode = document.documentMode);\nvar canUseTextInputEvent = canUseDOM && \"TextEvent\" in window && !documentMode,\n  useFallbackCompositionData =\n    canUseDOM &&\n    (!canUseCompositionEvent ||\n      (documentMode && 8 < documentMode && 11 >= documentMode)),\n  SPACEBAR_CHAR = String.fromCharCode(32),\n  hasSpaceKeypress = !1;\nfunction isFallbackCompositionEnd(domEventName, nativeEvent) {\n  switch (domEventName) {\n    case \"keyup\":\n      return -1 !== END_KEYCODES.indexOf(nativeEvent.keyCode);\n    case \"keydown\":\n      return 229 !== nativeEvent.keyCode;\n    case \"keypress\":\n    case \"mousedown\":\n    case \"focusout\":\n      return !0;\n    default:\n      return !1;\n  }\n}\nfunction getDataFromCustomEvent(nativeEvent) {\n  nativeEvent = nativeEvent.detail;\n  return \"object\" === typeof nativeEvent && \"data\" in nativeEvent\n    ? nativeEvent.data\n    : null;\n}\nvar isComposing = !1;\nfunction getNativeBeforeInputChars(domEventName, nativeEvent) {\n  switch (domEventName) {\n    case \"compositionend\":\n      return getDataFromCustomEvent(nativeEvent);\n    case \"keypress\":\n      if (32 !== nativeEvent.which) return null;\n      hasSpaceKeypress = !0;\n      return SPACEBAR_CHAR;\n    case \"textInput\":\n      return (\n        (domEventName = nativeEvent.data),\n        domEventName === SPACEBAR_CHAR && hasSpaceKeypress ? null : domEventName\n      );\n    default:\n      return null;\n  }\n}\nfunction getFallbackBeforeInputChars(domEventName, nativeEvent) {\n  if (isComposing)\n    return \"compositionend\" === domEventName ||\n      (!canUseCompositionEvent &&\n        isFallbackCompositionEnd(domEventName, nativeEvent))\n      ? ((domEventName = getData()),\n        (fallbackText = startText = root = null),\n        (isComposing = !1),\n        domEventName)\n      : null;\n  switch (domEventName) {\n    case \"paste\":\n      return null;\n    case \"keypress\":\n      if (\n        !(nativeEvent.ctrlKey || nativeEvent.altKey || nativeEvent.metaKey) ||\n        (nativeEvent.ctrlKey && nativeEvent.altKey)\n      ) {\n        if (nativeEvent.char && 1 < nativeEvent.char.length)\n          return nativeEvent.char;\n        if (nativeEvent.which) return String.fromCharCode(nativeEvent.which);\n      }\n      return null;\n    case \"compositionend\":\n      return useFallbackCompositionData && \"ko\" !== nativeEvent.locale\n        ? null\n        : nativeEvent.data;\n    default:\n      return null;\n  }\n}\nvar supportedInputTypes = {\n  color: !0,\n  date: !0,\n  datetime: !0,\n  \"datetime-local\": !0,\n  email: !0,\n  month: !0,\n  number: !0,\n  password: !0,\n  range: !0,\n  search: !0,\n  tel: !0,\n  text: !0,\n  time: !0,\n  url: !0,\n  week: !0\n};\nfunction isTextInputElement(elem) {\n  var nodeName = elem && elem.nodeName && elem.nodeName.toLowerCase();\n  return \"input\" === nodeName\n    ? !!supportedInputTypes[elem.type]\n    : \"textarea\" === nodeName\n      ? !0\n      : !1;\n}\nfunction createAndAccumulateChangeEvent(\n  dispatchQueue,\n  inst,\n  nativeEvent,\n  target\n) {\n  restoreTarget\n    ? restoreQueue\n      ? restoreQueue.push(target)\n      : (restoreQueue = [target])\n    : (restoreTarget = target);\n  inst = accumulateTwoPhaseListeners(inst, \"onChange\");\n  0 < inst.length &&\n    ((nativeEvent = new SyntheticEvent(\n      \"onChange\",\n      \"change\",\n      null,\n      nativeEvent,\n      target\n    )),\n    dispatchQueue.push({ event: nativeEvent, listeners: inst }));\n}\nvar activeElement$1 = null,\n  activeElementInst$1 = null;\nfunction runEventInBatch(dispatchQueue) {\n  processDispatchQueue(dispatchQueue, 0);\n}\nfunction getInstIfValueChanged(targetInst) {\n  var targetNode = getNodeFromInstance(targetInst);\n  if (updateValueIfChanged(targetNode)) return targetInst;\n}\nfunction getTargetInstForChangeEvent(domEventName, targetInst) {\n  if (\"change\" === domEventName) return targetInst;\n}\nvar isInputEventSupported = !1;\nif (canUseDOM) {\n  var JSCompiler_inline_result$jscomp$282;\n  if (canUseDOM) {\n    var isSupported$jscomp$inline_417 = \"oninput\" in document;\n    if (!isSupported$jscomp$inline_417) {\n      var element$jscomp$inline_418 = document.createElement(\"div\");\n      element$jscomp$inline_418.setAttribute(\"oninput\", \"return;\");\n      isSupported$jscomp$inline_417 =\n        \"function\" === typeof element$jscomp$inline_418.oninput;\n    }\n    JSCompiler_inline_result$jscomp$282 = isSupported$jscomp$inline_417;\n  } else JSCompiler_inline_result$jscomp$282 = !1;\n  isInputEventSupported =\n    JSCompiler_inline_result$jscomp$282 &&\n    (!document.documentMode || 9 < document.documentMode);\n}\nfunction stopWatchingForValueChange() {\n  activeElement$1 &&\n    (activeElement$1.detachEvent(\"onpropertychange\", handlePropertyChange),\n    (activeElementInst$1 = activeElement$1 = null));\n}\nfunction handlePropertyChange(nativeEvent) {\n  if (\n    \"value\" === nativeEvent.propertyName &&\n    getInstIfValueChanged(activeElementInst$1)\n  ) {\n    var dispatchQueue = [];\n    createAndAccumulateChangeEvent(\n      dispatchQueue,\n      activeElementInst$1,\n      nativeEvent,\n      getEventTarget(nativeEvent)\n    );\n    batchedUpdates$1(runEventInBatch, dispatchQueue);\n  }\n}\nfunction handleEventsForInputEventPolyfill(domEventName, target, targetInst) {\n  \"focusin\" === domEventName\n    ? (stopWatchingForValueChange(),\n      (activeElement$1 = target),\n      (activeElementInst$1 = targetInst),\n      activeElement$1.attachEvent(\"onpropertychange\", handlePropertyChange))\n    : \"focusout\" === domEventName && stopWatchingForValueChange();\n}\nfunction getTargetInstForInputEventPolyfill(domEventName) {\n  if (\n    \"selectionchange\" === domEventName ||\n    \"keyup\" === domEventName ||\n    \"keydown\" === domEventName\n  )\n    return getInstIfValueChanged(activeElementInst$1);\n}\nfunction getTargetInstForClickEvent(domEventName, targetInst) {\n  if (\"click\" === domEventName) return getInstIfValueChanged(targetInst);\n}\nfunction getTargetInstForInputOrChangeEvent(domEventName, targetInst) {\n  if (\"input\" === domEventName || \"change\" === domEventName)\n    return getInstIfValueChanged(targetInst);\n}\nfunction is(x, y) {\n  return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\nvar objectIs = \"function\" === typeof Object.is ? Object.is : is;\nfunction shallowEqual(objA, objB) {\n  if (objectIs(objA, objB)) return !0;\n  if (\n    \"object\" !== typeof objA ||\n    null === objA ||\n    \"object\" !== typeof objB ||\n    null === objB\n  )\n    return !1;\n  var keysA = Object.keys(objA),\n    keysB = Object.keys(objB);\n  if (keysA.length !== keysB.length) return !1;\n  for (keysB = 0; keysB < keysA.length; keysB++) {\n    var currentKey = keysA[keysB];\n    if (\n      !hasOwnProperty.call(objB, currentKey) ||\n      !objectIs(objA[currentKey], objB[currentKey])\n    )\n      return !1;\n  }\n  return !0;\n}\nfunction getLeafNode(node) {\n  for (; node && node.firstChild; ) node = node.firstChild;\n  return node;\n}\nfunction getNodeForCharacterOffset(root, offset) {\n  var node = getLeafNode(root);\n  root = 0;\n  for (var nodeEnd; node; ) {\n    if (3 === node.nodeType) {\n      nodeEnd = root + node.textContent.length;\n      if (root <= offset && nodeEnd >= offset)\n        return { node: node, offset: offset - root };\n      root = nodeEnd;\n    }\n    a: {\n      for (; node; ) {\n        if (node.nextSibling) {\n          node = node.nextSibling;\n          break a;\n        }\n        node = node.parentNode;\n      }\n      node = void 0;\n    }\n    node = getLeafNode(node);\n  }\n}\nfunction containsNode(outerNode, innerNode) {\n  return outerNode && innerNode\n    ? outerNode === innerNode\n      ? !0\n      : outerNode && 3 === outerNode.nodeType\n        ? !1\n        : innerNode && 3 === innerNode.nodeType\n          ? containsNode(outerNode, innerNode.parentNode)\n          : \"contains\" in outerNode\n            ? outerNode.contains(innerNode)\n            : outerNode.compareDocumentPosition\n              ? !!(outerNode.compareDocumentPosition(innerNode) & 16)\n              : !1\n    : !1;\n}\nfunction getActiveElementDeep(containerInfo) {\n  containerInfo =\n    null != containerInfo &&\n    null != containerInfo.ownerDocument &&\n    null != containerInfo.ownerDocument.defaultView\n      ? containerInfo.ownerDocument.defaultView\n      : window;\n  for (\n    var element = getActiveElement(containerInfo.document);\n    element instanceof containerInfo.HTMLIFrameElement;\n\n  ) {\n    try {\n      var JSCompiler_inline_result =\n        \"string\" === typeof element.contentWindow.location.href;\n    } catch (err) {\n      JSCompiler_inline_result = !1;\n    }\n    if (JSCompiler_inline_result) containerInfo = element.contentWindow;\n    else break;\n    element = getActiveElement(containerInfo.document);\n  }\n  return element;\n}\nfunction hasSelectionCapabilities(elem) {\n  var nodeName = elem && elem.nodeName && elem.nodeName.toLowerCase();\n  return (\n    nodeName &&\n    ((\"input\" === nodeName &&\n      (\"text\" === elem.type ||\n        \"search\" === elem.type ||\n        \"tel\" === elem.type ||\n        \"url\" === elem.type ||\n        \"password\" === elem.type)) ||\n      \"textarea\" === nodeName ||\n      \"true\" === elem.contentEditable)\n  );\n}\nvar skipSelectionChangeEvent =\n    canUseDOM && \"documentMode\" in document && 11 >= document.documentMode,\n  activeElement = null,\n  activeElementInst = null,\n  lastSelection = null,\n  mouseDown = !1;\nfunction constructSelectEvent(dispatchQueue, nativeEvent, nativeEventTarget) {\n  var doc =\n    nativeEventTarget.window === nativeEventTarget\n      ? nativeEventTarget.document\n      : 9 === nativeEventTarget.nodeType\n        ? nativeEventTarget\n        : nativeEventTarget.ownerDocument;\n  mouseDown ||\n    null == activeElement ||\n    activeElement !== getActiveElement(doc) ||\n    ((doc = activeElement),\n    \"selectionStart\" in doc && hasSelectionCapabilities(doc)\n      ? (doc = { start: doc.selectionStart, end: doc.selectionEnd })\n      : ((doc = (\n          (doc.ownerDocument && doc.ownerDocument.defaultView) ||\n          window\n        ).getSelection()),\n        (doc = {\n          anchorNode: doc.anchorNode,\n          anchorOffset: doc.anchorOffset,\n          focusNode: doc.focusNode,\n          focusOffset: doc.focusOffset\n        })),\n    (lastSelection && shallowEqual(lastSelection, doc)) ||\n      ((lastSelection = doc),\n      (doc = accumulateTwoPhaseListeners(activeElementInst, \"onSelect\")),\n      0 < doc.length &&\n        ((nativeEvent = new SyntheticEvent(\n          \"onSelect\",\n          \"select\",\n          null,\n          nativeEvent,\n          nativeEventTarget\n        )),\n        dispatchQueue.push({ event: nativeEvent, listeners: doc }),\n        (nativeEvent.target = activeElement))));\n}\nfunction makePrefixMap(styleProp, eventName) {\n  var prefixes = {};\n  prefixes[styleProp.toLowerCase()] = eventName.toLowerCase();\n  prefixes[\"Webkit\" + styleProp] = \"webkit\" + eventName;\n  prefixes[\"Moz\" + styleProp] = \"moz\" + eventName;\n  return prefixes;\n}\nvar vendorPrefixes = {\n    animationend: makePrefixMap(\"Animation\", \"AnimationEnd\"),\n    animationiteration: makePrefixMap(\"Animation\", \"AnimationIteration\"),\n    animationstart: makePrefixMap(\"Animation\", \"AnimationStart\"),\n    transitionrun: makePrefixMap(\"Transition\", \"TransitionRun\"),\n    transitionstart: makePrefixMap(\"Transition\", \"TransitionStart\"),\n    transitioncancel: makePrefixMap(\"Transition\", \"TransitionCancel\"),\n    transitionend: makePrefixMap(\"Transition\", \"TransitionEnd\")\n  },\n  prefixedEventNames = {},\n  style = {};\ncanUseDOM &&\n  ((style = document.createElement(\"div\").style),\n  \"AnimationEvent\" in window ||\n    (delete vendorPrefixes.animationend.animation,\n    delete vendorPrefixes.animationiteration.animation,\n    delete vendorPrefixes.animationstart.animation),\n  \"TransitionEvent\" in window ||\n    delete vendorPrefixes.transitionend.transition);\nfunction getVendorPrefixedEventName(eventName) {\n  if (prefixedEventNames[eventName]) return prefixedEventNames[eventName];\n  if (!vendorPrefixes[eventName]) return eventName;\n  var prefixMap = vendorPrefixes[eventName],\n    styleProp;\n  for (styleProp in prefixMap)\n    if (prefixMap.hasOwnProperty(styleProp) && styleProp in style)\n      return (prefixedEventNames[eventName] = prefixMap[styleProp]);\n  return eventName;\n}\nvar ANIMATION_END = getVendorPrefixedEventName(\"animationend\"),\n  ANIMATION_ITERATION = getVendorPrefixedEventName(\"animationiteration\"),\n  ANIMATION_START = getVendorPrefixedEventName(\"animationstart\"),\n  TRANSITION_RUN = getVendorPrefixedEventName(\"transitionrun\"),\n  TRANSITION_START = getVendorPrefixedEventName(\"transitionstart\"),\n  TRANSITION_CANCEL = getVendorPrefixedEventName(\"transitioncancel\"),\n  TRANSITION_END = getVendorPrefixedEventName(\"transitionend\"),\n  topLevelEventsToReactNames = new Map(),\n  simpleEventPluginEvents =\n    \"abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel\".split(\n      \" \"\n    );\nsimpleEventPluginEvents.push(\"scrollEnd\");\nfunction registerSimpleEvent(domEventName, reactName) {\n  topLevelEventsToReactNames.set(domEventName, reactName);\n  registerTwoPhaseEvent(reactName, [domEventName]);\n}\nvar CapturedStacks = new WeakMap();\nfunction createCapturedValueAtFiber(value, source) {\n  if (\"object\" === typeof value && null !== value) {\n    var existing = CapturedStacks.get(value);\n    if (void 0 !== existing) return existing;\n    source = {\n      value: value,\n      source: source,\n      stack: getStackByFiberInDevAndProd(source)\n    };\n    CapturedStacks.set(value, source);\n    return source;\n  }\n  return {\n    value: value,\n    source: source,\n    stack: getStackByFiberInDevAndProd(source)\n  };\n}\nvar concurrentQueues = [],\n  concurrentQueuesIndex = 0,\n  concurrentlyUpdatedLanes = 0;\nfunction finishQueueingConcurrentUpdates() {\n  for (\n    var endIndex = concurrentQueuesIndex,\n      i = (concurrentlyUpdatedLanes = concurrentQueuesIndex = 0);\n    i < endIndex;\n\n  ) {\n    var fiber = concurrentQueues[i];\n    concurrentQueues[i++] = null;\n    var queue = concurrentQueues[i];\n    concurrentQueues[i++] = null;\n    var update = concurrentQueues[i];\n    concurrentQueues[i++] = null;\n    var lane = concurrentQueues[i];\n    concurrentQueues[i++] = null;\n    if (null !== queue && null !== update) {\n      var pending = queue.pending;\n      null === pending\n        ? (update.next = update)\n        : ((update.next = pending.next), (pending.next = update));\n      queue.pending = update;\n    }\n    0 !== lane && markUpdateLaneFromFiberToRoot(fiber, update, lane);\n  }\n}\nfunction enqueueUpdate$1(fiber, queue, update, lane) {\n  concurrentQueues[concurrentQueuesIndex++] = fiber;\n  concurrentQueues[concurrentQueuesIndex++] = queue;\n  concurrentQueues[concurrentQueuesIndex++] = update;\n  concurrentQueues[concurrentQueuesIndex++] = lane;\n  concurrentlyUpdatedLanes |= lane;\n  fiber.lanes |= lane;\n  fiber = fiber.alternate;\n  null !== fiber && (fiber.lanes |= lane);\n}\nfunction enqueueConcurrentHookUpdate(fiber, queue, update, lane) {\n  enqueueUpdate$1(fiber, queue, update, lane);\n  return getRootForUpdatedFiber(fiber);\n}\nfunction enqueueConcurrentRenderForLane(fiber, lane) {\n  enqueueUpdate$1(fiber, null, null, lane);\n  return getRootForUpdatedFiber(fiber);\n}\nfunction markUpdateLaneFromFiberToRoot(sourceFiber, update, lane) {\n  sourceFiber.lanes |= lane;\n  var alternate = sourceFiber.alternate;\n  null !== alternate && (alternate.lanes |= lane);\n  for (var isHidden = !1, parent = sourceFiber.return; null !== parent; )\n    (parent.childLanes |= lane),\n      (alternate = parent.alternate),\n      null !== alternate && (alternate.childLanes |= lane),\n      22 === parent.tag &&\n        ((sourceFiber = parent.stateNode),\n        null === sourceFiber || sourceFiber._visibility & 1 || (isHidden = !0)),\n      (sourceFiber = parent),\n      (parent = parent.return);\n  return 3 === sourceFiber.tag\n    ? ((parent = sourceFiber.stateNode),\n      isHidden &&\n        null !== update &&\n        ((isHidden = 31 - clz32(lane)),\n        (sourceFiber = parent.hiddenUpdates),\n        (alternate = sourceFiber[isHidden]),\n        null === alternate\n          ? (sourceFiber[isHidden] = [update])\n          : alternate.push(update),\n        (update.lane = lane | 536870912)),\n      parent)\n    : null;\n}\nfunction getRootForUpdatedFiber(sourceFiber) {\n  if (50 < nestedUpdateCount)\n    throw (\n      ((nestedUpdateCount = 0),\n      (rootWithNestedUpdates = null),\n      Error(formatProdErrorMessage(185)))\n    );\n  for (var parent = sourceFiber.return; null !== parent; )\n    (sourceFiber = parent), (parent = sourceFiber.return);\n  return 3 === sourceFiber.tag ? sourceFiber.stateNode : null;\n}\nvar emptyContextObject = {};\nfunction FiberNode(tag, pendingProps, key, mode) {\n  this.tag = tag;\n  this.key = key;\n  this.sibling =\n    this.child =\n    this.return =\n    this.stateNode =\n    this.type =\n    this.elementType =\n      null;\n  this.index = 0;\n  this.refCleanup = this.ref = null;\n  this.pendingProps = pendingProps;\n  this.dependencies =\n    this.memoizedState =\n    this.updateQueue =\n    this.memoizedProps =\n      null;\n  this.mode = mode;\n  this.subtreeFlags = this.flags = 0;\n  this.deletions = null;\n  this.childLanes = this.lanes = 0;\n  this.alternate = null;\n}\nfunction createFiberImplClass(tag, pendingProps, key, mode) {\n  return new FiberNode(tag, pendingProps, key, mode);\n}\nfunction shouldConstruct(Component) {\n  Component = Component.prototype;\n  return !(!Component || !Component.isReactComponent);\n}\nfunction createWorkInProgress(current, pendingProps) {\n  var workInProgress = current.alternate;\n  null === workInProgress\n    ? ((workInProgress = createFiberImplClass(\n        current.tag,\n        pendingProps,\n        current.key,\n        current.mode\n      )),\n      (workInProgress.elementType = current.elementType),\n      (workInProgress.type = current.type),\n      (workInProgress.stateNode = current.stateNode),\n      (workInProgress.alternate = current),\n      (current.alternate = workInProgress))\n    : ((workInProgress.pendingProps = pendingProps),\n      (workInProgress.type = current.type),\n      (workInProgress.flags = 0),\n      (workInProgress.subtreeFlags = 0),\n      (workInProgress.deletions = null));\n  workInProgress.flags = current.flags & 65011712;\n  workInProgress.childLanes = current.childLanes;\n  workInProgress.lanes = current.lanes;\n  workInProgress.child = current.child;\n  workInProgress.memoizedProps = current.memoizedProps;\n  workInProgress.memoizedState = current.memoizedState;\n  workInProgress.updateQueue = current.updateQueue;\n  pendingProps = current.dependencies;\n  workInProgress.dependencies =\n    null === pendingProps\n      ? null\n      : { lanes: pendingProps.lanes, firstContext: pendingProps.firstContext };\n  workInProgress.sibling = current.sibling;\n  workInProgress.index = current.index;\n  workInProgress.ref = current.ref;\n  workInProgress.refCleanup = current.refCleanup;\n  return workInProgress;\n}\nfunction resetWorkInProgress(workInProgress, renderLanes) {\n  workInProgress.flags &= 65011714;\n  var current = workInProgress.alternate;\n  null === current\n    ? ((workInProgress.childLanes = 0),\n      (workInProgress.lanes = renderLanes),\n      (workInProgress.child = null),\n      (workInProgress.subtreeFlags = 0),\n      (workInProgress.memoizedProps = null),\n      (workInProgress.memoizedState = null),\n      (workInProgress.updateQueue = null),\n      (workInProgress.dependencies = null),\n      (workInProgress.stateNode = null))\n    : ((workInProgress.childLanes = current.childLanes),\n      (workInProgress.lanes = current.lanes),\n      (workInProgress.child = current.child),\n      (workInProgress.subtreeFlags = 0),\n      (workInProgress.deletions = null),\n      (workInProgress.memoizedProps = current.memoizedProps),\n      (workInProgress.memoizedState = current.memoizedState),\n      (workInProgress.updateQueue = current.updateQueue),\n      (workInProgress.type = current.type),\n      (renderLanes = current.dependencies),\n      (workInProgress.dependencies =\n        null === renderLanes\n          ? null\n          : {\n              lanes: renderLanes.lanes,\n              firstContext: renderLanes.firstContext\n            }));\n  return workInProgress;\n}\nfunction createFiberFromTypeAndProps(\n  type,\n  key,\n  pendingProps,\n  owner,\n  mode,\n  lanes\n) {\n  var fiberTag = 0;\n  owner = type;\n  if (\"function\" === typeof type) shouldConstruct(type) && (fiberTag = 1);\n  else if (\"string\" === typeof type)\n    fiberTag = isHostHoistableType(\n      type,\n      pendingProps,\n      contextStackCursor.current\n    )\n      ? 26\n      : \"html\" === type || \"head\" === type || \"body\" === type\n        ? 27\n        : 5;\n  else\n    a: switch (type) {\n      case REACT_ACTIVITY_TYPE:\n        return (\n          (type = createFiberImplClass(31, pendingProps, key, mode)),\n          (type.elementType = REACT_ACTIVITY_TYPE),\n          (type.lanes = lanes),\n          type\n        );\n      case REACT_FRAGMENT_TYPE:\n        return createFiberFromFragment(pendingProps.children, mode, lanes, key);\n      case REACT_STRICT_MODE_TYPE:\n        fiberTag = 8;\n        mode |= 24;\n        break;\n      case REACT_PROFILER_TYPE:\n        return (\n          (type = createFiberImplClass(12, pendingProps, key, mode | 2)),\n          (type.elementType = REACT_PROFILER_TYPE),\n          (type.lanes = lanes),\n          type\n        );\n      case REACT_SUSPENSE_TYPE:\n        return (\n          (type = createFiberImplClass(13, pendingProps, key, mode)),\n          (type.elementType = REACT_SUSPENSE_TYPE),\n          (type.lanes = lanes),\n          type\n        );\n      case REACT_SUSPENSE_LIST_TYPE:\n        return (\n          (type = createFiberImplClass(19, pendingProps, key, mode)),\n          (type.elementType = REACT_SUSPENSE_LIST_TYPE),\n          (type.lanes = lanes),\n          type\n        );\n      default:\n        if (\"object\" === typeof type && null !== type)\n          switch (type.$$typeof) {\n            case REACT_PROVIDER_TYPE:\n            case REACT_CONTEXT_TYPE:\n              fiberTag = 10;\n              break a;\n            case REACT_CONSUMER_TYPE:\n              fiberTag = 9;\n              break a;\n            case REACT_FORWARD_REF_TYPE:\n              fiberTag = 11;\n              break a;\n            case REACT_MEMO_TYPE:\n              fiberTag = 14;\n              break a;\n            case REACT_LAZY_TYPE:\n              fiberTag = 16;\n              owner = null;\n              break a;\n          }\n        fiberTag = 29;\n        pendingProps = Error(\n          formatProdErrorMessage(130, null === type ? \"null\" : typeof type, \"\")\n        );\n        owner = null;\n    }\n  key = createFiberImplClass(fiberTag, pendingProps, key, mode);\n  key.elementType = type;\n  key.type = owner;\n  key.lanes = lanes;\n  return key;\n}\nfunction createFiberFromFragment(elements, mode, lanes, key) {\n  elements = createFiberImplClass(7, elements, key, mode);\n  elements.lanes = lanes;\n  return elements;\n}\nfunction createFiberFromText(content, mode, lanes) {\n  content = createFiberImplClass(6, content, null, mode);\n  content.lanes = lanes;\n  return content;\n}\nfunction createFiberFromPortal(portal, mode, lanes) {\n  mode = createFiberImplClass(\n    4,\n    null !== portal.children ? portal.children : [],\n    portal.key,\n    mode\n  );\n  mode.lanes = lanes;\n  mode.stateNode = {\n    containerInfo: portal.containerInfo,\n    pendingChildren: null,\n    implementation: portal.implementation\n  };\n  return mode;\n}\nvar forkStack = [],\n  forkStackIndex = 0,\n  treeForkProvider = null,\n  treeForkCount = 0,\n  idStack = [],\n  idStackIndex = 0,\n  treeContextProvider = null,\n  treeContextId = 1,\n  treeContextOverflow = \"\";\nfunction pushTreeFork(workInProgress, totalChildren) {\n  forkStack[forkStackIndex++] = treeForkCount;\n  forkStack[forkStackIndex++] = treeForkProvider;\n  treeForkProvider = workInProgress;\n  treeForkCount = totalChildren;\n}\nfunction pushTreeId(workInProgress, totalChildren, index) {\n  idStack[idStackIndex++] = treeContextId;\n  idStack[idStackIndex++] = treeContextOverflow;\n  idStack[idStackIndex++] = treeContextProvider;\n  treeContextProvider = workInProgress;\n  var baseIdWithLeadingBit = treeContextId;\n  workInProgress = treeContextOverflow;\n  var baseLength = 32 - clz32(baseIdWithLeadingBit) - 1;\n  baseIdWithLeadingBit &= ~(1 << baseLength);\n  index += 1;\n  var length = 32 - clz32(totalChildren) + baseLength;\n  if (30 < length) {\n    var numberOfOverflowBits = baseLength - (baseLength % 5);\n    length = (\n      baseIdWithLeadingBit &\n      ((1 << numberOfOverflowBits) - 1)\n    ).toString(32);\n    baseIdWithLeadingBit >>= numberOfOverflowBits;\n    baseLength -= numberOfOverflowBits;\n    treeContextId =\n      (1 << (32 - clz32(totalChildren) + baseLength)) |\n      (index << baseLength) |\n      baseIdWithLeadingBit;\n    treeContextOverflow = length + workInProgress;\n  } else\n    (treeContextId =\n      (1 << length) | (index << baseLength) | baseIdWithLeadingBit),\n      (treeContextOverflow = workInProgress);\n}\nfunction pushMaterializedTreeId(workInProgress) {\n  null !== workInProgress.return &&\n    (pushTreeFork(workInProgress, 1), pushTreeId(workInProgress, 1, 0));\n}\nfunction popTreeContext(workInProgress) {\n  for (; workInProgress === treeForkProvider; )\n    (treeForkProvider = forkStack[--forkStackIndex]),\n      (forkStack[forkStackIndex] = null),\n      (treeForkCount = forkStack[--forkStackIndex]),\n      (forkStack[forkStackIndex] = null);\n  for (; workInProgress === treeContextProvider; )\n    (treeContextProvider = idStack[--idStackIndex]),\n      (idStack[idStackIndex] = null),\n      (treeContextOverflow = idStack[--idStackIndex]),\n      (idStack[idStackIndex] = null),\n      (treeContextId = idStack[--idStackIndex]),\n      (idStack[idStackIndex] = null);\n}\nvar hydrationParentFiber = null,\n  nextHydratableInstance = null,\n  isHydrating = !1,\n  hydrationErrors = null,\n  rootOrSingletonContext = !1,\n  HydrationMismatchException = Error(formatProdErrorMessage(519));\nfunction throwOnHydrationMismatch(fiber) {\n  var error = Error(formatProdErrorMessage(418, \"\"));\n  queueHydrationError(createCapturedValueAtFiber(error, fiber));\n  throw HydrationMismatchException;\n}\nfunction prepareToHydrateHostInstance(fiber) {\n  var instance = fiber.stateNode,\n    type = fiber.type,\n    props = fiber.memoizedProps;\n  instance[internalInstanceKey] = fiber;\n  instance[internalPropsKey] = props;\n  switch (type) {\n    case \"dialog\":\n      listenToNonDelegatedEvent(\"cancel\", instance);\n      listenToNonDelegatedEvent(\"close\", instance);\n      break;\n    case \"iframe\":\n    case \"object\":\n    case \"embed\":\n      listenToNonDelegatedEvent(\"load\", instance);\n      break;\n    case \"video\":\n    case \"audio\":\n      for (type = 0; type < mediaEventTypes.length; type++)\n        listenToNonDelegatedEvent(mediaEventTypes[type], instance);\n      break;\n    case \"source\":\n      listenToNonDelegatedEvent(\"error\", instance);\n      break;\n    case \"img\":\n    case \"image\":\n    case \"link\":\n      listenToNonDelegatedEvent(\"error\", instance);\n      listenToNonDelegatedEvent(\"load\", instance);\n      break;\n    case \"details\":\n      listenToNonDelegatedEvent(\"toggle\", instance);\n      break;\n    case \"input\":\n      listenToNonDelegatedEvent(\"invalid\", instance);\n      initInput(\n        instance,\n        props.value,\n        props.defaultValue,\n        props.checked,\n        props.defaultChecked,\n        props.type,\n        props.name,\n        !0\n      );\n      track(instance);\n      break;\n    case \"select\":\n      listenToNonDelegatedEvent(\"invalid\", instance);\n      break;\n    case \"textarea\":\n      listenToNonDelegatedEvent(\"invalid\", instance),\n        initTextarea(instance, props.value, props.defaultValue, props.children),\n        track(instance);\n  }\n  type = props.children;\n  (\"string\" !== typeof type &&\n    \"number\" !== typeof type &&\n    \"bigint\" !== typeof type) ||\n  instance.textContent === \"\" + type ||\n  !0 === props.suppressHydrationWarning ||\n  checkForUnmatchedText(instance.textContent, type)\n    ? (null != props.popover &&\n        (listenToNonDelegatedEvent(\"beforetoggle\", instance),\n        listenToNonDelegatedEvent(\"toggle\", instance)),\n      null != props.onScroll && listenToNonDelegatedEvent(\"scroll\", instance),\n      null != props.onScrollEnd &&\n        listenToNonDelegatedEvent(\"scrollend\", instance),\n      null != props.onClick && (instance.onclick = noop$1),\n      (instance = !0))\n    : (instance = !1);\n  instance || throwOnHydrationMismatch(fiber);\n}\nfunction popToNextHostParent(fiber) {\n  for (hydrationParentFiber = fiber.return; hydrationParentFiber; )\n    switch (hydrationParentFiber.tag) {\n      case 5:\n      case 13:\n        rootOrSingletonContext = !1;\n        return;\n      case 27:\n      case 3:\n        rootOrSingletonContext = !0;\n        return;\n      default:\n        hydrationParentFiber = hydrationParentFiber.return;\n    }\n}\nfunction popHydrationState(fiber) {\n  if (fiber !== hydrationParentFiber) return !1;\n  if (!isHydrating) return popToNextHostParent(fiber), (isHydrating = !0), !1;\n  var tag = fiber.tag,\n    JSCompiler_temp;\n  if ((JSCompiler_temp = 3 !== tag && 27 !== tag)) {\n    if ((JSCompiler_temp = 5 === tag))\n      (JSCompiler_temp = fiber.type),\n        (JSCompiler_temp =\n          !(\"form\" !== JSCompiler_temp && \"button\" !== JSCompiler_temp) ||\n          shouldSetTextContent(fiber.type, fiber.memoizedProps));\n    JSCompiler_temp = !JSCompiler_temp;\n  }\n  JSCompiler_temp && nextHydratableInstance && throwOnHydrationMismatch(fiber);\n  popToNextHostParent(fiber);\n  if (13 === tag) {\n    fiber = fiber.memoizedState;\n    fiber = null !== fiber ? fiber.dehydrated : null;\n    if (!fiber) throw Error(formatProdErrorMessage(317));\n    a: {\n      fiber = fiber.nextSibling;\n      for (tag = 0; fiber; ) {\n        if (8 === fiber.nodeType)\n          if (((JSCompiler_temp = fiber.data), \"/$\" === JSCompiler_temp)) {\n            if (0 === tag) {\n              nextHydratableInstance = getNextHydratable(fiber.nextSibling);\n              break a;\n            }\n            tag--;\n          } else\n            (\"$\" !== JSCompiler_temp &&\n              \"$!\" !== JSCompiler_temp &&\n              \"$?\" !== JSCompiler_temp) ||\n              tag++;\n        fiber = fiber.nextSibling;\n      }\n      nextHydratableInstance = null;\n    }\n  } else\n    27 === tag\n      ? ((tag = nextHydratableInstance),\n        isSingletonScope(fiber.type)\n          ? ((fiber = previousHydratableOnEnteringScopedSingleton),\n            (previousHydratableOnEnteringScopedSingleton = null),\n            (nextHydratableInstance = fiber))\n          : (nextHydratableInstance = tag))\n      : (nextHydratableInstance = hydrationParentFiber\n          ? getNextHydratable(fiber.stateNode.nextSibling)\n          : null);\n  return !0;\n}\nfunction resetHydrationState() {\n  nextHydratableInstance = hydrationParentFiber = null;\n  isHydrating = !1;\n}\nfunction upgradeHydrationErrorsToRecoverable() {\n  var queuedErrors = hydrationErrors;\n  null !== queuedErrors &&\n    (null === workInProgressRootRecoverableErrors\n      ? (workInProgressRootRecoverableErrors = queuedErrors)\n      : workInProgressRootRecoverableErrors.push.apply(\n          workInProgressRootRecoverableErrors,\n          queuedErrors\n        ),\n    (hydrationErrors = null));\n  return queuedErrors;\n}\nfunction queueHydrationError(error) {\n  null === hydrationErrors\n    ? (hydrationErrors = [error])\n    : hydrationErrors.push(error);\n}\nvar valueCursor = createCursor(null),\n  currentlyRenderingFiber$1 = null,\n  lastContextDependency = null;\nfunction pushProvider(providerFiber, context, nextValue) {\n  push(valueCursor, context._currentValue);\n  context._currentValue = nextValue;\n}\nfunction popProvider(context) {\n  context._currentValue = valueCursor.current;\n  pop(valueCursor);\n}\nfunction scheduleContextWorkOnParentPath(parent, renderLanes, propagationRoot) {\n  for (; null !== parent; ) {\n    var alternate = parent.alternate;\n    (parent.childLanes & renderLanes) !== renderLanes\n      ? ((parent.childLanes |= renderLanes),\n        null !== alternate && (alternate.childLanes |= renderLanes))\n      : null !== alternate &&\n        (alternate.childLanes & renderLanes) !== renderLanes &&\n        (alternate.childLanes |= renderLanes);\n    if (parent === propagationRoot) break;\n    parent = parent.return;\n  }\n}\nfunction propagateContextChanges(\n  workInProgress,\n  contexts,\n  renderLanes,\n  forcePropagateEntireTree\n) {\n  var fiber = workInProgress.child;\n  null !== fiber && (fiber.return = workInProgress);\n  for (; null !== fiber; ) {\n    var list = fiber.dependencies;\n    if (null !== list) {\n      var nextFiber = fiber.child;\n      list = list.firstContext;\n      a: for (; null !== list; ) {\n        var dependency = list;\n        list = fiber;\n        for (var i = 0; i < contexts.length; i++)\n          if (dependency.context === contexts[i]) {\n            list.lanes |= renderLanes;\n            dependency = list.alternate;\n            null !== dependency && (dependency.lanes |= renderLanes);\n            scheduleContextWorkOnParentPath(\n              list.return,\n              renderLanes,\n              workInProgress\n            );\n            forcePropagateEntireTree || (nextFiber = null);\n            break a;\n          }\n        list = dependency.next;\n      }\n    } else if (18 === fiber.tag) {\n      nextFiber = fiber.return;\n      if (null === nextFiber) throw Error(formatProdErrorMessage(341));\n      nextFiber.lanes |= renderLanes;\n      list = nextFiber.alternate;\n      null !== list && (list.lanes |= renderLanes);\n      scheduleContextWorkOnParentPath(nextFiber, renderLanes, workInProgress);\n      nextFiber = null;\n    } else nextFiber = fiber.child;\n    if (null !== nextFiber) nextFiber.return = fiber;\n    else\n      for (nextFiber = fiber; null !== nextFiber; ) {\n        if (nextFiber === workInProgress) {\n          nextFiber = null;\n          break;\n        }\n        fiber = nextFiber.sibling;\n        if (null !== fiber) {\n          fiber.return = nextFiber.return;\n          nextFiber = fiber;\n          break;\n        }\n        nextFiber = nextFiber.return;\n      }\n    fiber = nextFiber;\n  }\n}\nfunction propagateParentContextChanges(\n  current,\n  workInProgress,\n  renderLanes,\n  forcePropagateEntireTree\n) {\n  current = null;\n  for (\n    var parent = workInProgress, isInsidePropagationBailout = !1;\n    null !== parent;\n\n  ) {\n    if (!isInsidePropagationBailout)\n      if (0 !== (parent.flags & 524288)) isInsidePropagationBailout = !0;\n      else if (0 !== (parent.flags & 262144)) break;\n    if (10 === parent.tag) {\n      var currentParent = parent.alternate;\n      if (null === currentParent) throw Error(formatProdErrorMessage(387));\n      currentParent = currentParent.memoizedProps;\n      if (null !== currentParent) {\n        var context = parent.type;\n        objectIs(parent.pendingProps.value, currentParent.value) ||\n          (null !== current ? current.push(context) : (current = [context]));\n      }\n    } else if (parent === hostTransitionProviderCursor.current) {\n      currentParent = parent.alternate;\n      if (null === currentParent) throw Error(formatProdErrorMessage(387));\n      currentParent.memoizedState.memoizedState !==\n        parent.memoizedState.memoizedState &&\n        (null !== current\n          ? current.push(HostTransitionContext)\n          : (current = [HostTransitionContext]));\n    }\n    parent = parent.return;\n  }\n  null !== current &&\n    propagateContextChanges(\n      workInProgress,\n      current,\n      renderLanes,\n      forcePropagateEntireTree\n    );\n  workInProgress.flags |= 262144;\n}\nfunction checkIfContextChanged(currentDependencies) {\n  for (\n    currentDependencies = currentDependencies.firstContext;\n    null !== currentDependencies;\n\n  ) {\n    if (\n      !objectIs(\n        currentDependencies.context._currentValue,\n        currentDependencies.memoizedValue\n      )\n    )\n      return !0;\n    currentDependencies = currentDependencies.next;\n  }\n  return !1;\n}\nfunction prepareToReadContext(workInProgress) {\n  currentlyRenderingFiber$1 = workInProgress;\n  lastContextDependency = null;\n  workInProgress = workInProgress.dependencies;\n  null !== workInProgress && (workInProgress.firstContext = null);\n}\nfunction readContext(context) {\n  return readContextForConsumer(currentlyRenderingFiber$1, context);\n}\nfunction readContextDuringReconciliation(consumer, context) {\n  null === currentlyRenderingFiber$1 && prepareToReadContext(consumer);\n  return readContextForConsumer(consumer, context);\n}\nfunction readContextForConsumer(consumer, context) {\n  var value = context._currentValue;\n  context = { context: context, memoizedValue: value, next: null };\n  if (null === lastContextDependency) {\n    if (null === consumer) throw Error(formatProdErrorMessage(308));\n    lastContextDependency = context;\n    consumer.dependencies = { lanes: 0, firstContext: context };\n    consumer.flags |= 524288;\n  } else lastContextDependency = lastContextDependency.next = context;\n  return value;\n}\nvar AbortControllerLocal =\n    \"undefined\" !== typeof AbortController\n      ? AbortController\n      : function () {\n          var listeners = [],\n            signal = (this.signal = {\n              aborted: !1,\n              addEventListener: function (type, listener) {\n                listeners.push(listener);\n              }\n            });\n          this.abort = function () {\n            signal.aborted = !0;\n            listeners.forEach(function (listener) {\n              return listener();\n            });\n          };\n        },\n  scheduleCallback$2 = Scheduler.unstable_scheduleCallback,\n  NormalPriority = Scheduler.unstable_NormalPriority,\n  CacheContext = {\n    $$typeof: REACT_CONTEXT_TYPE,\n    Consumer: null,\n    Provider: null,\n    _currentValue: null,\n    _currentValue2: null,\n    _threadCount: 0\n  };\nfunction createCache() {\n  return {\n    controller: new AbortControllerLocal(),\n    data: new Map(),\n    refCount: 0\n  };\n}\nfunction releaseCache(cache) {\n  cache.refCount--;\n  0 === cache.refCount &&\n    scheduleCallback$2(NormalPriority, function () {\n      cache.controller.abort();\n    });\n}\nvar currentEntangledListeners = null,\n  currentEntangledPendingCount = 0,\n  currentEntangledLane = 0,\n  currentEntangledActionThenable = null;\nfunction entangleAsyncAction(transition, thenable) {\n  if (null === currentEntangledListeners) {\n    var entangledListeners = (currentEntangledListeners = []);\n    currentEntangledPendingCount = 0;\n    currentEntangledLane = requestTransitionLane();\n    currentEntangledActionThenable = {\n      status: \"pending\",\n      value: void 0,\n      then: function (resolve) {\n        entangledListeners.push(resolve);\n      }\n    };\n  }\n  currentEntangledPendingCount++;\n  thenable.then(pingEngtangledActionScope, pingEngtangledActionScope);\n  return thenable;\n}\nfunction pingEngtangledActionScope() {\n  if (\n    0 === --currentEntangledPendingCount &&\n    null !== currentEntangledListeners\n  ) {\n    null !== currentEntangledActionThenable &&\n      (currentEntangledActionThenable.status = \"fulfilled\");\n    var listeners = currentEntangledListeners;\n    currentEntangledListeners = null;\n    currentEntangledLane = 0;\n    currentEntangledActionThenable = null;\n    for (var i = 0; i < listeners.length; i++) (0, listeners[i])();\n  }\n}\nfunction chainThenableValue(thenable, result) {\n  var listeners = [],\n    thenableWithOverride = {\n      status: \"pending\",\n      value: null,\n      reason: null,\n      then: function (resolve) {\n        listeners.push(resolve);\n      }\n    };\n  thenable.then(\n    function () {\n      thenableWithOverride.status = \"fulfilled\";\n      thenableWithOverride.value = result;\n      for (var i = 0; i < listeners.length; i++) (0, listeners[i])(result);\n    },\n    function (error) {\n      thenableWithOverride.status = \"rejected\";\n      thenableWithOverride.reason = error;\n      for (error = 0; error < listeners.length; error++)\n        (0, listeners[error])(void 0);\n    }\n  );\n  return thenableWithOverride;\n}\nvar prevOnStartTransitionFinish = ReactSharedInternals.S;\nReactSharedInternals.S = function (transition, returnValue) {\n  \"object\" === typeof returnValue &&\n    null !== returnValue &&\n    \"function\" === typeof returnValue.then &&\n    entangleAsyncAction(transition, returnValue);\n  null !== prevOnStartTransitionFinish &&\n    prevOnStartTransitionFinish(transition, returnValue);\n};\nvar resumedCache = createCursor(null);\nfunction peekCacheFromPool() {\n  var cacheResumedFromPreviousRender = resumedCache.current;\n  return null !== cacheResumedFromPreviousRender\n    ? cacheResumedFromPreviousRender\n    : workInProgressRoot.pooledCache;\n}\nfunction pushTransition(offscreenWorkInProgress, prevCachePool) {\n  null === prevCachePool\n    ? push(resumedCache, resumedCache.current)\n    : push(resumedCache, prevCachePool.pool);\n}\nfunction getSuspendedCache() {\n  var cacheFromPool = peekCacheFromPool();\n  return null === cacheFromPool\n    ? null\n    : { parent: CacheContext._currentValue, pool: cacheFromPool };\n}\nvar SuspenseException = Error(formatProdErrorMessage(460)),\n  SuspenseyCommitException = Error(formatProdErrorMessage(474)),\n  SuspenseActionException = Error(formatProdErrorMessage(542)),\n  noopSuspenseyCommitThenable = { then: function () {} };\nfunction isThenableResolved(thenable) {\n  thenable = thenable.status;\n  return \"fulfilled\" === thenable || \"rejected\" === thenable;\n}\nfunction noop$3() {}\nfunction trackUsedThenable(thenableState, thenable, index) {\n  index = thenableState[index];\n  void 0 === index\n    ? thenableState.push(thenable)\n    : index !== thenable && (thenable.then(noop$3, noop$3), (thenable = index));\n  switch (thenable.status) {\n    case \"fulfilled\":\n      return thenable.value;\n    case \"rejected\":\n      throw (\n        ((thenableState = thenable.reason),\n        checkIfUseWrappedInAsyncCatch(thenableState),\n        thenableState)\n      );\n    default:\n      if (\"string\" === typeof thenable.status) thenable.then(noop$3, noop$3);\n      else {\n        thenableState = workInProgressRoot;\n        if (null !== thenableState && 100 < thenableState.shellSuspendCounter)\n          throw Error(formatProdErrorMessage(482));\n        thenableState = thenable;\n        thenableState.status = \"pending\";\n        thenableState.then(\n          function (fulfilledValue) {\n            if (\"pending\" === thenable.status) {\n              var fulfilledThenable = thenable;\n              fulfilledThenable.status = \"fulfilled\";\n              fulfilledThenable.value = fulfilledValue;\n            }\n          },\n          function (error) {\n            if (\"pending\" === thenable.status) {\n              var rejectedThenable = thenable;\n              rejectedThenable.status = \"rejected\";\n              rejectedThenable.reason = error;\n            }\n          }\n        );\n      }\n      switch (thenable.status) {\n        case \"fulfilled\":\n          return thenable.value;\n        case \"rejected\":\n          throw (\n            ((thenableState = thenable.reason),\n            checkIfUseWrappedInAsyncCatch(thenableState),\n            thenableState)\n          );\n      }\n      suspendedThenable = thenable;\n      throw SuspenseException;\n  }\n}\nvar suspendedThenable = null;\nfunction getSuspendedThenable() {\n  if (null === suspendedThenable) throw Error(formatProdErrorMessage(459));\n  var thenable = suspendedThenable;\n  suspendedThenable = null;\n  return thenable;\n}\nfunction checkIfUseWrappedInAsyncCatch(rejectedReason) {\n  if (\n    rejectedReason === SuspenseException ||\n    rejectedReason === SuspenseActionException\n  )\n    throw Error(formatProdErrorMessage(483));\n}\nvar hasForceUpdate = !1;\nfunction initializeUpdateQueue(fiber) {\n  fiber.updateQueue = {\n    baseState: fiber.memoizedState,\n    firstBaseUpdate: null,\n    lastBaseUpdate: null,\n    shared: { pending: null, lanes: 0, hiddenCallbacks: null },\n    callbacks: null\n  };\n}\nfunction cloneUpdateQueue(current, workInProgress) {\n  current = current.updateQueue;\n  workInProgress.updateQueue === current &&\n    (workInProgress.updateQueue = {\n      baseState: current.baseState,\n      firstBaseUpdate: current.firstBaseUpdate,\n      lastBaseUpdate: current.lastBaseUpdate,\n      shared: current.shared,\n      callbacks: null\n    });\n}\nfunction createUpdate(lane) {\n  return { lane: lane, tag: 0, payload: null, callback: null, next: null };\n}\nfunction enqueueUpdate(fiber, update, lane) {\n  var updateQueue = fiber.updateQueue;\n  if (null === updateQueue) return null;\n  updateQueue = updateQueue.shared;\n  if (0 !== (executionContext & 2)) {\n    var pending = updateQueue.pending;\n    null === pending\n      ? (update.next = update)\n      : ((update.next = pending.next), (pending.next = update));\n    updateQueue.pending = update;\n    update = getRootForUpdatedFiber(fiber);\n    markUpdateLaneFromFiberToRoot(fiber, null, lane);\n    return update;\n  }\n  enqueueUpdate$1(fiber, updateQueue, update, lane);\n  return getRootForUpdatedFiber(fiber);\n}\nfunction entangleTransitions(root, fiber, lane) {\n  fiber = fiber.updateQueue;\n  if (null !== fiber && ((fiber = fiber.shared), 0 !== (lane & 4194048))) {\n    var queueLanes = fiber.lanes;\n    queueLanes &= root.pendingLanes;\n    lane |= queueLanes;\n    fiber.lanes = lane;\n    markRootEntangled(root, lane);\n  }\n}\nfunction enqueueCapturedUpdate(workInProgress, capturedUpdate) {\n  var queue = workInProgress.updateQueue,\n    current = workInProgress.alternate;\n  if (\n    null !== current &&\n    ((current = current.updateQueue), queue === current)\n  ) {\n    var newFirst = null,\n      newLast = null;\n    queue = queue.firstBaseUpdate;\n    if (null !== queue) {\n      do {\n        var clone = {\n          lane: queue.lane,\n          tag: queue.tag,\n          payload: queue.payload,\n          callback: null,\n          next: null\n        };\n        null === newLast\n          ? (newFirst = newLast = clone)\n          : (newLast = newLast.next = clone);\n        queue = queue.next;\n      } while (null !== queue);\n      null === newLast\n        ? (newFirst = newLast = capturedUpdate)\n        : (newLast = newLast.next = capturedUpdate);\n    } else newFirst = newLast = capturedUpdate;\n    queue = {\n      baseState: current.baseState,\n      firstBaseUpdate: newFirst,\n      lastBaseUpdate: newLast,\n      shared: current.shared,\n      callbacks: current.callbacks\n    };\n    workInProgress.updateQueue = queue;\n    return;\n  }\n  workInProgress = queue.lastBaseUpdate;\n  null === workInProgress\n    ? (queue.firstBaseUpdate = capturedUpdate)\n    : (workInProgress.next = capturedUpdate);\n  queue.lastBaseUpdate = capturedUpdate;\n}\nvar didReadFromEntangledAsyncAction = !1;\nfunction suspendIfUpdateReadFromEntangledAsyncAction() {\n  if (didReadFromEntangledAsyncAction) {\n    var entangledActionThenable = currentEntangledActionThenable;\n    if (null !== entangledActionThenable) throw entangledActionThenable;\n  }\n}\nfunction processUpdateQueue(\n  workInProgress$jscomp$0,\n  props,\n  instance$jscomp$0,\n  renderLanes\n) {\n  didReadFromEntangledAsyncAction = !1;\n  var queue = workInProgress$jscomp$0.updateQueue;\n  hasForceUpdate = !1;\n  var firstBaseUpdate = queue.firstBaseUpdate,\n    lastBaseUpdate = queue.lastBaseUpdate,\n    pendingQueue = queue.shared.pending;\n  if (null !== pendingQueue) {\n    queue.shared.pending = null;\n    var lastPendingUpdate = pendingQueue,\n      firstPendingUpdate = lastPendingUpdate.next;\n    lastPendingUpdate.next = null;\n    null === lastBaseUpdate\n      ? (firstBaseUpdate = firstPendingUpdate)\n      : (lastBaseUpdate.next = firstPendingUpdate);\n    lastBaseUpdate = lastPendingUpdate;\n    var current = workInProgress$jscomp$0.alternate;\n    null !== current &&\n      ((current = current.updateQueue),\n      (pendingQueue = current.lastBaseUpdate),\n      pendingQueue !== lastBaseUpdate &&\n        (null === pendingQueue\n          ? (current.firstBaseUpdate = firstPendingUpdate)\n          : (pendingQueue.next = firstPendingUpdate),\n        (current.lastBaseUpdate = lastPendingUpdate)));\n  }\n  if (null !== firstBaseUpdate) {\n    var newState = queue.baseState;\n    lastBaseUpdate = 0;\n    current = firstPendingUpdate = lastPendingUpdate = null;\n    pendingQueue = firstBaseUpdate;\n    do {\n      var updateLane = pendingQueue.lane & -536870913,\n        isHiddenUpdate = updateLane !== pendingQueue.lane;\n      if (\n        isHiddenUpdate\n          ? (workInProgressRootRenderLanes & updateLane) === updateLane\n          : (renderLanes & updateLane) === updateLane\n      ) {\n        0 !== updateLane &&\n          updateLane === currentEntangledLane &&\n          (didReadFromEntangledAsyncAction = !0);\n        null !== current &&\n          (current = current.next =\n            {\n              lane: 0,\n              tag: pendingQueue.tag,\n              payload: pendingQueue.payload,\n              callback: null,\n              next: null\n            });\n        a: {\n          var workInProgress = workInProgress$jscomp$0,\n            update = pendingQueue;\n          updateLane = props;\n          var instance = instance$jscomp$0;\n          switch (update.tag) {\n            case 1:\n              workInProgress = update.payload;\n              if (\"function\" === typeof workInProgress) {\n                newState = workInProgress.call(instance, newState, updateLane);\n                break a;\n              }\n              newState = workInProgress;\n              break a;\n            case 3:\n              workInProgress.flags = (workInProgress.flags & -65537) | 128;\n            case 0:\n              workInProgress = update.payload;\n              updateLane =\n                \"function\" === typeof workInProgress\n                  ? workInProgress.call(instance, newState, updateLane)\n                  : workInProgress;\n              if (null === updateLane || void 0 === updateLane) break a;\n              newState = assign({}, newState, updateLane);\n              break a;\n            case 2:\n              hasForceUpdate = !0;\n          }\n        }\n        updateLane = pendingQueue.callback;\n        null !== updateLane &&\n          ((workInProgress$jscomp$0.flags |= 64),\n          isHiddenUpdate && (workInProgress$jscomp$0.flags |= 8192),\n          (isHiddenUpdate = queue.callbacks),\n          null === isHiddenUpdate\n            ? (queue.callbacks = [updateLane])\n            : isHiddenUpdate.push(updateLane));\n      } else\n        (isHiddenUpdate = {\n          lane: updateLane,\n          tag: pendingQueue.tag,\n          payload: pendingQueue.payload,\n          callback: pendingQueue.callback,\n          next: null\n        }),\n          null === current\n            ? ((firstPendingUpdate = current = isHiddenUpdate),\n              (lastPendingUpdate = newState))\n            : (current = current.next = isHiddenUpdate),\n          (lastBaseUpdate |= updateLane);\n      pendingQueue = pendingQueue.next;\n      if (null === pendingQueue)\n        if (((pendingQueue = queue.shared.pending), null === pendingQueue))\n          break;\n        else\n          (isHiddenUpdate = pendingQueue),\n            (pendingQueue = isHiddenUpdate.next),\n            (isHiddenUpdate.next = null),\n            (queue.lastBaseUpdate = isHiddenUpdate),\n            (queue.shared.pending = null);\n    } while (1);\n    null === current && (lastPendingUpdate = newState);\n    queue.baseState = lastPendingUpdate;\n    queue.firstBaseUpdate = firstPendingUpdate;\n    queue.lastBaseUpdate = current;\n    null === firstBaseUpdate && (queue.shared.lanes = 0);\n    workInProgressRootSkippedLanes |= lastBaseUpdate;\n    workInProgress$jscomp$0.lanes = lastBaseUpdate;\n    workInProgress$jscomp$0.memoizedState = newState;\n  }\n}\nfunction callCallback(callback, context) {\n  if (\"function\" !== typeof callback)\n    throw Error(formatProdErrorMessage(191, callback));\n  callback.call(context);\n}\nfunction commitCallbacks(updateQueue, context) {\n  var callbacks = updateQueue.callbacks;\n  if (null !== callbacks)\n    for (\n      updateQueue.callbacks = null, updateQueue = 0;\n      updateQueue < callbacks.length;\n      updateQueue++\n    )\n      callCallback(callbacks[updateQueue], context);\n}\nvar currentTreeHiddenStackCursor = createCursor(null),\n  prevEntangledRenderLanesCursor = createCursor(0);\nfunction pushHiddenContext(fiber, context) {\n  fiber = entangledRenderLanes;\n  push(prevEntangledRenderLanesCursor, fiber);\n  push(currentTreeHiddenStackCursor, context);\n  entangledRenderLanes = fiber | context.baseLanes;\n}\nfunction reuseHiddenContextOnStack() {\n  push(prevEntangledRenderLanesCursor, entangledRenderLanes);\n  push(currentTreeHiddenStackCursor, currentTreeHiddenStackCursor.current);\n}\nfunction popHiddenContext() {\n  entangledRenderLanes = prevEntangledRenderLanesCursor.current;\n  pop(currentTreeHiddenStackCursor);\n  pop(prevEntangledRenderLanesCursor);\n}\nvar renderLanes = 0,\n  currentlyRenderingFiber = null,\n  currentHook = null,\n  workInProgressHook = null,\n  didScheduleRenderPhaseUpdate = !1,\n  didScheduleRenderPhaseUpdateDuringThisPass = !1,\n  shouldDoubleInvokeUserFnsInHooksDEV = !1,\n  localIdCounter = 0,\n  thenableIndexCounter$1 = 0,\n  thenableState$1 = null,\n  globalClientIdCounter = 0;\nfunction throwInvalidHookError() {\n  throw Error(formatProdErrorMessage(321));\n}\nfunction areHookInputsEqual(nextDeps, prevDeps) {\n  if (null === prevDeps) return !1;\n  for (var i = 0; i < prevDeps.length && i < nextDeps.length; i++)\n    if (!objectIs(nextDeps[i], prevDeps[i])) return !1;\n  return !0;\n}\nfunction renderWithHooks(\n  current,\n  workInProgress,\n  Component,\n  props,\n  secondArg,\n  nextRenderLanes\n) {\n  renderLanes = nextRenderLanes;\n  currentlyRenderingFiber = workInProgress;\n  workInProgress.memoizedState = null;\n  workInProgress.updateQueue = null;\n  workInProgress.lanes = 0;\n  ReactSharedInternals.H =\n    null === current || null === current.memoizedState\n      ? HooksDispatcherOnMount\n      : HooksDispatcherOnUpdate;\n  shouldDoubleInvokeUserFnsInHooksDEV = !1;\n  nextRenderLanes = Component(props, secondArg);\n  shouldDoubleInvokeUserFnsInHooksDEV = !1;\n  didScheduleRenderPhaseUpdateDuringThisPass &&\n    (nextRenderLanes = renderWithHooksAgain(\n      workInProgress,\n      Component,\n      props,\n      secondArg\n    ));\n  finishRenderingHooks(current);\n  return nextRenderLanes;\n}\nfunction finishRenderingHooks(current) {\n  ReactSharedInternals.H = ContextOnlyDispatcher;\n  var didRenderTooFewHooks = null !== currentHook && null !== currentHook.next;\n  renderLanes = 0;\n  workInProgressHook = currentHook = currentlyRenderingFiber = null;\n  didScheduleRenderPhaseUpdate = !1;\n  thenableIndexCounter$1 = 0;\n  thenableState$1 = null;\n  if (didRenderTooFewHooks) throw Error(formatProdErrorMessage(300));\n  null === current ||\n    didReceiveUpdate ||\n    ((current = current.dependencies),\n    null !== current &&\n      checkIfContextChanged(current) &&\n      (didReceiveUpdate = !0));\n}\nfunction renderWithHooksAgain(workInProgress, Component, props, secondArg) {\n  currentlyRenderingFiber = workInProgress;\n  var numberOfReRenders = 0;\n  do {\n    didScheduleRenderPhaseUpdateDuringThisPass && (thenableState$1 = null);\n    thenableIndexCounter$1 = 0;\n    didScheduleRenderPhaseUpdateDuringThisPass = !1;\n    if (25 <= numberOfReRenders) throw Error(formatProdErrorMessage(301));\n    numberOfReRenders += 1;\n    workInProgressHook = currentHook = null;\n    if (null != workInProgress.updateQueue) {\n      var children = workInProgress.updateQueue;\n      children.lastEffect = null;\n      children.events = null;\n      children.stores = null;\n      null != children.memoCache && (children.memoCache.index = 0);\n    }\n    ReactSharedInternals.H = HooksDispatcherOnRerender;\n    children = Component(props, secondArg);\n  } while (didScheduleRenderPhaseUpdateDuringThisPass);\n  return children;\n}\nfunction TransitionAwareHostComponent() {\n  var dispatcher = ReactSharedInternals.H,\n    maybeThenable = dispatcher.useState()[0];\n  maybeThenable =\n    \"function\" === typeof maybeThenable.then\n      ? useThenable(maybeThenable)\n      : maybeThenable;\n  dispatcher = dispatcher.useState()[0];\n  (null !== currentHook ? currentHook.memoizedState : null) !== dispatcher &&\n    (currentlyRenderingFiber.flags |= 1024);\n  return maybeThenable;\n}\nfunction checkDidRenderIdHook() {\n  var didRenderIdHook = 0 !== localIdCounter;\n  localIdCounter = 0;\n  return didRenderIdHook;\n}\nfunction bailoutHooks(current, workInProgress, lanes) {\n  workInProgress.updateQueue = current.updateQueue;\n  workInProgress.flags &= -2053;\n  current.lanes &= ~lanes;\n}\nfunction resetHooksOnUnwind(workInProgress) {\n  if (didScheduleRenderPhaseUpdate) {\n    for (\n      workInProgress = workInProgress.memoizedState;\n      null !== workInProgress;\n\n    ) {\n      var queue = workInProgress.queue;\n      null !== queue && (queue.pending = null);\n      workInProgress = workInProgress.next;\n    }\n    didScheduleRenderPhaseUpdate = !1;\n  }\n  renderLanes = 0;\n  workInProgressHook = currentHook = currentlyRenderingFiber = null;\n  didScheduleRenderPhaseUpdateDuringThisPass = !1;\n  thenableIndexCounter$1 = localIdCounter = 0;\n  thenableState$1 = null;\n}\nfunction mountWorkInProgressHook() {\n  var hook = {\n    memoizedState: null,\n    baseState: null,\n    baseQueue: null,\n    queue: null,\n    next: null\n  };\n  null === workInProgressHook\n    ? (currentlyRenderingFiber.memoizedState = workInProgressHook = hook)\n    : (workInProgressHook = workInProgressHook.next = hook);\n  return workInProgressHook;\n}\nfunction updateWorkInProgressHook() {\n  if (null === currentHook) {\n    var nextCurrentHook = currentlyRenderingFiber.alternate;\n    nextCurrentHook =\n      null !== nextCurrentHook ? nextCurrentHook.memoizedState : null;\n  } else nextCurrentHook = currentHook.next;\n  var nextWorkInProgressHook =\n    null === workInProgressHook\n      ? currentlyRenderingFiber.memoizedState\n      : workInProgressHook.next;\n  if (null !== nextWorkInProgressHook)\n    (workInProgressHook = nextWorkInProgressHook),\n      (currentHook = nextCurrentHook);\n  else {\n    if (null === nextCurrentHook) {\n      if (null === currentlyRenderingFiber.alternate)\n        throw Error(formatProdErrorMessage(467));\n      throw Error(formatProdErrorMessage(310));\n    }\n    currentHook = nextCurrentHook;\n    nextCurrentHook = {\n      memoizedState: currentHook.memoizedState,\n      baseState: currentHook.baseState,\n      baseQueue: currentHook.baseQueue,\n      queue: currentHook.queue,\n      next: null\n    };\n    null === workInProgressHook\n      ? (currentlyRenderingFiber.memoizedState = workInProgressHook =\n          nextCurrentHook)\n      : (workInProgressHook = workInProgressHook.next = nextCurrentHook);\n  }\n  return workInProgressHook;\n}\nfunction createFunctionComponentUpdateQueue() {\n  return { lastEffect: null, events: null, stores: null, memoCache: null };\n}\nfunction useThenable(thenable) {\n  var index = thenableIndexCounter$1;\n  thenableIndexCounter$1 += 1;\n  null === thenableState$1 && (thenableState$1 = []);\n  thenable = trackUsedThenable(thenableState$1, thenable, index);\n  index = currentlyRenderingFiber;\n  null ===\n    (null === workInProgressHook\n      ? index.memoizedState\n      : workInProgressHook.next) &&\n    ((index = index.alternate),\n    (ReactSharedInternals.H =\n      null === index || null === index.memoizedState\n        ? HooksDispatcherOnMount\n        : HooksDispatcherOnUpdate));\n  return thenable;\n}\nfunction use(usable) {\n  if (null !== usable && \"object\" === typeof usable) {\n    if (\"function\" === typeof usable.then) return useThenable(usable);\n    if (usable.$$typeof === REACT_CONTEXT_TYPE) return readContext(usable);\n  }\n  throw Error(formatProdErrorMessage(438, String(usable)));\n}\nfunction useMemoCache(size) {\n  var memoCache = null,\n    updateQueue = currentlyRenderingFiber.updateQueue;\n  null !== updateQueue && (memoCache = updateQueue.memoCache);\n  if (null == memoCache) {\n    var current = currentlyRenderingFiber.alternate;\n    null !== current &&\n      ((current = current.updateQueue),\n      null !== current &&\n        ((current = current.memoCache),\n        null != current &&\n          (memoCache = {\n            data: current.data.map(function (array) {\n              return array.slice();\n            }),\n            index: 0\n          })));\n  }\n  null == memoCache && (memoCache = { data: [], index: 0 });\n  null === updateQueue &&\n    ((updateQueue = createFunctionComponentUpdateQueue()),\n    (currentlyRenderingFiber.updateQueue = updateQueue));\n  updateQueue.memoCache = memoCache;\n  updateQueue = memoCache.data[memoCache.index];\n  if (void 0 === updateQueue)\n    for (\n      updateQueue = memoCache.data[memoCache.index] = Array(size), current = 0;\n      current < size;\n      current++\n    )\n      updateQueue[current] = REACT_MEMO_CACHE_SENTINEL;\n  memoCache.index++;\n  return updateQueue;\n}\nfunction basicStateReducer(state, action) {\n  return \"function\" === typeof action ? action(state) : action;\n}\nfunction updateReducer(reducer) {\n  var hook = updateWorkInProgressHook();\n  return updateReducerImpl(hook, currentHook, reducer);\n}\nfunction updateReducerImpl(hook, current, reducer) {\n  var queue = hook.queue;\n  if (null === queue) throw Error(formatProdErrorMessage(311));\n  queue.lastRenderedReducer = reducer;\n  var baseQueue = hook.baseQueue,\n    pendingQueue = queue.pending;\n  if (null !== pendingQueue) {\n    if (null !== baseQueue) {\n      var baseFirst = baseQueue.next;\n      baseQueue.next = pendingQueue.next;\n      pendingQueue.next = baseFirst;\n    }\n    current.baseQueue = baseQueue = pendingQueue;\n    queue.pending = null;\n  }\n  pendingQueue = hook.baseState;\n  if (null === baseQueue) hook.memoizedState = pendingQueue;\n  else {\n    current = baseQueue.next;\n    var newBaseQueueFirst = (baseFirst = null),\n      newBaseQueueLast = null,\n      update = current,\n      didReadFromEntangledAsyncAction$32 = !1;\n    do {\n      var updateLane = update.lane & -536870913;\n      if (\n        updateLane !== update.lane\n          ? (workInProgressRootRenderLanes & updateLane) === updateLane\n          : (renderLanes & updateLane) === updateLane\n      ) {\n        var revertLane = update.revertLane;\n        if (0 === revertLane)\n          null !== newBaseQueueLast &&\n            (newBaseQueueLast = newBaseQueueLast.next =\n              {\n                lane: 0,\n                revertLane: 0,\n                action: update.action,\n                hasEagerState: update.hasEagerState,\n                eagerState: update.eagerState,\n                next: null\n              }),\n            updateLane === currentEntangledLane &&\n              (didReadFromEntangledAsyncAction$32 = !0);\n        else if ((renderLanes & revertLane) === revertLane) {\n          update = update.next;\n          revertLane === currentEntangledLane &&\n            (didReadFromEntangledAsyncAction$32 = !0);\n          continue;\n        } else\n          (updateLane = {\n            lane: 0,\n            revertLane: update.revertLane,\n            action: update.action,\n            hasEagerState: update.hasEagerState,\n            eagerState: update.eagerState,\n            next: null\n          }),\n            null === newBaseQueueLast\n              ? ((newBaseQueueFirst = newBaseQueueLast = updateLane),\n                (baseFirst = pendingQueue))\n              : (newBaseQueueLast = newBaseQueueLast.next = updateLane),\n            (currentlyRenderingFiber.lanes |= revertLane),\n            (workInProgressRootSkippedLanes |= revertLane);\n        updateLane = update.action;\n        shouldDoubleInvokeUserFnsInHooksDEV &&\n          reducer(pendingQueue, updateLane);\n        pendingQueue = update.hasEagerState\n          ? update.eagerState\n          : reducer(pendingQueue, updateLane);\n      } else\n        (revertLane = {\n          lane: updateLane,\n          revertLane: update.revertLane,\n          action: update.action,\n          hasEagerState: update.hasEagerState,\n          eagerState: update.eagerState,\n          next: null\n        }),\n          null === newBaseQueueLast\n            ? ((newBaseQueueFirst = newBaseQueueLast = revertLane),\n              (baseFirst = pendingQueue))\n            : (newBaseQueueLast = newBaseQueueLast.next = revertLane),\n          (currentlyRenderingFiber.lanes |= updateLane),\n          (workInProgressRootSkippedLanes |= updateLane);\n      update = update.next;\n    } while (null !== update && update !== current);\n    null === newBaseQueueLast\n      ? (baseFirst = pendingQueue)\n      : (newBaseQueueLast.next = newBaseQueueFirst);\n    if (\n      !objectIs(pendingQueue, hook.memoizedState) &&\n      ((didReceiveUpdate = !0),\n      didReadFromEntangledAsyncAction$32 &&\n        ((reducer = currentEntangledActionThenable), null !== reducer))\n    )\n      throw reducer;\n    hook.memoizedState = pendingQueue;\n    hook.baseState = baseFirst;\n    hook.baseQueue = newBaseQueueLast;\n    queue.lastRenderedState = pendingQueue;\n  }\n  null === baseQueue && (queue.lanes = 0);\n  return [hook.memoizedState, queue.dispatch];\n}\nfunction rerenderReducer(reducer) {\n  var hook = updateWorkInProgressHook(),\n    queue = hook.queue;\n  if (null === queue) throw Error(formatProdErrorMessage(311));\n  queue.lastRenderedReducer = reducer;\n  var dispatch = queue.dispatch,\n    lastRenderPhaseUpdate = queue.pending,\n    newState = hook.memoizedState;\n  if (null !== lastRenderPhaseUpdate) {\n    queue.pending = null;\n    var update = (lastRenderPhaseUpdate = lastRenderPhaseUpdate.next);\n    do (newState = reducer(newState, update.action)), (update = update.next);\n    while (update !== lastRenderPhaseUpdate);\n    objectIs(newState, hook.memoizedState) || (didReceiveUpdate = !0);\n    hook.memoizedState = newState;\n    null === hook.baseQueue && (hook.baseState = newState);\n    queue.lastRenderedState = newState;\n  }\n  return [newState, dispatch];\n}\nfunction updateSyncExternalStore(subscribe, getSnapshot, getServerSnapshot) {\n  var fiber = currentlyRenderingFiber,\n    hook = updateWorkInProgressHook(),\n    isHydrating$jscomp$0 = isHydrating;\n  if (isHydrating$jscomp$0) {\n    if (void 0 === getServerSnapshot) throw Error(formatProdErrorMessage(407));\n    getServerSnapshot = getServerSnapshot();\n  } else getServerSnapshot = getSnapshot();\n  var snapshotChanged = !objectIs(\n    (currentHook || hook).memoizedState,\n    getServerSnapshot\n  );\n  snapshotChanged &&\n    ((hook.memoizedState = getServerSnapshot), (didReceiveUpdate = !0));\n  hook = hook.queue;\n  var create = subscribeToStore.bind(null, fiber, hook, subscribe);\n  updateEffectImpl(2048, 8, create, [subscribe]);\n  if (\n    hook.getSnapshot !== getSnapshot ||\n    snapshotChanged ||\n    (null !== workInProgressHook && workInProgressHook.memoizedState.tag & 1)\n  ) {\n    fiber.flags |= 2048;\n    pushSimpleEffect(\n      9,\n      createEffectInstance(),\n      updateStoreInstance.bind(\n        null,\n        fiber,\n        hook,\n        getServerSnapshot,\n        getSnapshot\n      ),\n      null\n    );\n    if (null === workInProgressRoot) throw Error(formatProdErrorMessage(349));\n    isHydrating$jscomp$0 ||\n      0 !== (renderLanes & 124) ||\n      pushStoreConsistencyCheck(fiber, getSnapshot, getServerSnapshot);\n  }\n  return getServerSnapshot;\n}\nfunction pushStoreConsistencyCheck(fiber, getSnapshot, renderedSnapshot) {\n  fiber.flags |= 16384;\n  fiber = { getSnapshot: getSnapshot, value: renderedSnapshot };\n  getSnapshot = currentlyRenderingFiber.updateQueue;\n  null === getSnapshot\n    ? ((getSnapshot = createFunctionComponentUpdateQueue()),\n      (currentlyRenderingFiber.updateQueue = getSnapshot),\n      (getSnapshot.stores = [fiber]))\n    : ((renderedSnapshot = getSnapshot.stores),\n      null === renderedSnapshot\n        ? (getSnapshot.stores = [fiber])\n        : renderedSnapshot.push(fiber));\n}\nfunction updateStoreInstance(fiber, inst, nextSnapshot, getSnapshot) {\n  inst.value = nextSnapshot;\n  inst.getSnapshot = getSnapshot;\n  checkIfSnapshotChanged(inst) && forceStoreRerender(fiber);\n}\nfunction subscribeToStore(fiber, inst, subscribe) {\n  return subscribe(function () {\n    checkIfSnapshotChanged(inst) && forceStoreRerender(fiber);\n  });\n}\nfunction checkIfSnapshotChanged(inst) {\n  var latestGetSnapshot = inst.getSnapshot;\n  inst = inst.value;\n  try {\n    var nextValue = latestGetSnapshot();\n    return !objectIs(inst, nextValue);\n  } catch (error) {\n    return !0;\n  }\n}\nfunction forceStoreRerender(fiber) {\n  var root = enqueueConcurrentRenderForLane(fiber, 2);\n  null !== root && scheduleUpdateOnFiber(root, fiber, 2);\n}\nfunction mountStateImpl(initialState) {\n  var hook = mountWorkInProgressHook();\n  if (\"function\" === typeof initialState) {\n    var initialStateInitializer = initialState;\n    initialState = initialStateInitializer();\n    if (shouldDoubleInvokeUserFnsInHooksDEV) {\n      setIsStrictModeForDevtools(!0);\n      try {\n        initialStateInitializer();\n      } finally {\n        setIsStrictModeForDevtools(!1);\n      }\n    }\n  }\n  hook.memoizedState = hook.baseState = initialState;\n  hook.queue = {\n    pending: null,\n    lanes: 0,\n    dispatch: null,\n    lastRenderedReducer: basicStateReducer,\n    lastRenderedState: initialState\n  };\n  return hook;\n}\nfunction updateOptimisticImpl(hook, current, passthrough, reducer) {\n  hook.baseState = passthrough;\n  return updateReducerImpl(\n    hook,\n    currentHook,\n    \"function\" === typeof reducer ? reducer : basicStateReducer\n  );\n}\nfunction dispatchActionState(\n  fiber,\n  actionQueue,\n  setPendingState,\n  setState,\n  payload\n) {\n  if (isRenderPhaseUpdate(fiber)) throw Error(formatProdErrorMessage(485));\n  fiber = actionQueue.action;\n  if (null !== fiber) {\n    var actionNode = {\n      payload: payload,\n      action: fiber,\n      next: null,\n      isTransition: !0,\n      status: \"pending\",\n      value: null,\n      reason: null,\n      listeners: [],\n      then: function (listener) {\n        actionNode.listeners.push(listener);\n      }\n    };\n    null !== ReactSharedInternals.T\n      ? setPendingState(!0)\n      : (actionNode.isTransition = !1);\n    setState(actionNode);\n    setPendingState = actionQueue.pending;\n    null === setPendingState\n      ? ((actionNode.next = actionQueue.pending = actionNode),\n        runActionStateAction(actionQueue, actionNode))\n      : ((actionNode.next = setPendingState.next),\n        (actionQueue.pending = setPendingState.next = actionNode));\n  }\n}\nfunction runActionStateAction(actionQueue, node) {\n  var action = node.action,\n    payload = node.payload,\n    prevState = actionQueue.state;\n  if (node.isTransition) {\n    var prevTransition = ReactSharedInternals.T,\n      currentTransition = {};\n    ReactSharedInternals.T = currentTransition;\n    try {\n      var returnValue = action(prevState, payload),\n        onStartTransitionFinish = ReactSharedInternals.S;\n      null !== onStartTransitionFinish &&\n        onStartTransitionFinish(currentTransition, returnValue);\n      handleActionReturnValue(actionQueue, node, returnValue);\n    } catch (error) {\n      onActionError(actionQueue, node, error);\n    } finally {\n      ReactSharedInternals.T = prevTransition;\n    }\n  } else\n    try {\n      (prevTransition = action(prevState, payload)),\n        handleActionReturnValue(actionQueue, node, prevTransition);\n    } catch (error$38) {\n      onActionError(actionQueue, node, error$38);\n    }\n}\nfunction handleActionReturnValue(actionQueue, node, returnValue) {\n  null !== returnValue &&\n  \"object\" === typeof returnValue &&\n  \"function\" === typeof returnValue.then\n    ? returnValue.then(\n        function (nextState) {\n          onActionSuccess(actionQueue, node, nextState);\n        },\n        function (error) {\n          return onActionError(actionQueue, node, error);\n        }\n      )\n    : onActionSuccess(actionQueue, node, returnValue);\n}\nfunction onActionSuccess(actionQueue, actionNode, nextState) {\n  actionNode.status = \"fulfilled\";\n  actionNode.value = nextState;\n  notifyActionListeners(actionNode);\n  actionQueue.state = nextState;\n  actionNode = actionQueue.pending;\n  null !== actionNode &&\n    ((nextState = actionNode.next),\n    nextState === actionNode\n      ? (actionQueue.pending = null)\n      : ((nextState = nextState.next),\n        (actionNode.next = nextState),\n        runActionStateAction(actionQueue, nextState)));\n}\nfunction onActionError(actionQueue, actionNode, error) {\n  var last = actionQueue.pending;\n  actionQueue.pending = null;\n  if (null !== last) {\n    last = last.next;\n    do\n      (actionNode.status = \"rejected\"),\n        (actionNode.reason = error),\n        notifyActionListeners(actionNode),\n        (actionNode = actionNode.next);\n    while (actionNode !== last);\n  }\n  actionQueue.action = null;\n}\nfunction notifyActionListeners(actionNode) {\n  actionNode = actionNode.listeners;\n  for (var i = 0; i < actionNode.length; i++) (0, actionNode[i])();\n}\nfunction actionStateReducer(oldState, newState) {\n  return newState;\n}\nfunction mountActionState(action, initialStateProp) {\n  if (isHydrating) {\n    var ssrFormState = workInProgressRoot.formState;\n    if (null !== ssrFormState) {\n      a: {\n        var JSCompiler_inline_result = currentlyRenderingFiber;\n        if (isHydrating) {\n          if (nextHydratableInstance) {\n            b: {\n              var JSCompiler_inline_result$jscomp$0 = nextHydratableInstance;\n              for (\n                var inRootOrSingleton = rootOrSingletonContext;\n                8 !== JSCompiler_inline_result$jscomp$0.nodeType;\n\n              ) {\n                if (!inRootOrSingleton) {\n                  JSCompiler_inline_result$jscomp$0 = null;\n                  break b;\n                }\n                JSCompiler_inline_result$jscomp$0 = getNextHydratable(\n                  JSCompiler_inline_result$jscomp$0.nextSibling\n                );\n                if (null === JSCompiler_inline_result$jscomp$0) {\n                  JSCompiler_inline_result$jscomp$0 = null;\n                  break b;\n                }\n              }\n              inRootOrSingleton = JSCompiler_inline_result$jscomp$0.data;\n              JSCompiler_inline_result$jscomp$0 =\n                \"F!\" === inRootOrSingleton || \"F\" === inRootOrSingleton\n                  ? JSCompiler_inline_result$jscomp$0\n                  : null;\n            }\n            if (JSCompiler_inline_result$jscomp$0) {\n              nextHydratableInstance = getNextHydratable(\n                JSCompiler_inline_result$jscomp$0.nextSibling\n              );\n              JSCompiler_inline_result =\n                \"F!\" === JSCompiler_inline_result$jscomp$0.data;\n              break a;\n            }\n          }\n          throwOnHydrationMismatch(JSCompiler_inline_result);\n        }\n        JSCompiler_inline_result = !1;\n      }\n      JSCompiler_inline_result && (initialStateProp = ssrFormState[0]);\n    }\n  }\n  ssrFormState = mountWorkInProgressHook();\n  ssrFormState.memoizedState = ssrFormState.baseState = initialStateProp;\n  JSCompiler_inline_result = {\n    pending: null,\n    lanes: 0,\n    dispatch: null,\n    lastRenderedReducer: actionStateReducer,\n    lastRenderedState: initialStateProp\n  };\n  ssrFormState.queue = JSCompiler_inline_result;\n  ssrFormState = dispatchSetState.bind(\n    null,\n    currentlyRenderingFiber,\n    JSCompiler_inline_result\n  );\n  JSCompiler_inline_result.dispatch = ssrFormState;\n  JSCompiler_inline_result = mountStateImpl(!1);\n  inRootOrSingleton = dispatchOptimisticSetState.bind(\n    null,\n    currentlyRenderingFiber,\n    !1,\n    JSCompiler_inline_result.queue\n  );\n  JSCompiler_inline_result = mountWorkInProgressHook();\n  JSCompiler_inline_result$jscomp$0 = {\n    state: initialStateProp,\n    dispatch: null,\n    action: action,\n    pending: null\n  };\n  JSCompiler_inline_result.queue = JSCompiler_inline_result$jscomp$0;\n  ssrFormState = dispatchActionState.bind(\n    null,\n    currentlyRenderingFiber,\n    JSCompiler_inline_result$jscomp$0,\n    inRootOrSingleton,\n    ssrFormState\n  );\n  JSCompiler_inline_result$jscomp$0.dispatch = ssrFormState;\n  JSCompiler_inline_result.memoizedState = action;\n  return [initialStateProp, ssrFormState, !1];\n}\nfunction updateActionState(action) {\n  var stateHook = updateWorkInProgressHook();\n  return updateActionStateImpl(stateHook, currentHook, action);\n}\nfunction updateActionStateImpl(stateHook, currentStateHook, action) {\n  currentStateHook = updateReducerImpl(\n    stateHook,\n    currentStateHook,\n    actionStateReducer\n  )[0];\n  stateHook = updateReducer(basicStateReducer)[0];\n  if (\n    \"object\" === typeof currentStateHook &&\n    null !== currentStateHook &&\n    \"function\" === typeof currentStateHook.then\n  )\n    try {\n      var state = useThenable(currentStateHook);\n    } catch (x) {\n      if (x === SuspenseException) throw SuspenseActionException;\n      throw x;\n    }\n  else state = currentStateHook;\n  currentStateHook = updateWorkInProgressHook();\n  var actionQueue = currentStateHook.queue,\n    dispatch = actionQueue.dispatch;\n  action !== currentStateHook.memoizedState &&\n    ((currentlyRenderingFiber.flags |= 2048),\n    pushSimpleEffect(\n      9,\n      createEffectInstance(),\n      actionStateActionEffect.bind(null, actionQueue, action),\n      null\n    ));\n  return [state, dispatch, stateHook];\n}\nfunction actionStateActionEffect(actionQueue, action) {\n  actionQueue.action = action;\n}\nfunction rerenderActionState(action) {\n  var stateHook = updateWorkInProgressHook(),\n    currentStateHook = currentHook;\n  if (null !== currentStateHook)\n    return updateActionStateImpl(stateHook, currentStateHook, action);\n  updateWorkInProgressHook();\n  stateHook = stateHook.memoizedState;\n  currentStateHook = updateWorkInProgressHook();\n  var dispatch = currentStateHook.queue.dispatch;\n  currentStateHook.memoizedState = action;\n  return [stateHook, dispatch, !1];\n}\nfunction pushSimpleEffect(tag, inst, create, createDeps) {\n  tag = { tag: tag, create: create, deps: createDeps, inst: inst, next: null };\n  inst = currentlyRenderingFiber.updateQueue;\n  null === inst &&\n    ((inst = createFunctionComponentUpdateQueue()),\n    (currentlyRenderingFiber.updateQueue = inst));\n  create = inst.lastEffect;\n  null === create\n    ? (inst.lastEffect = tag.next = tag)\n    : ((createDeps = create.next),\n      (create.next = tag),\n      (tag.next = createDeps),\n      (inst.lastEffect = tag));\n  return tag;\n}\nfunction createEffectInstance() {\n  return { destroy: void 0, resource: void 0 };\n}\nfunction updateRef() {\n  return updateWorkInProgressHook().memoizedState;\n}\nfunction mountEffectImpl(fiberFlags, hookFlags, create, createDeps) {\n  var hook = mountWorkInProgressHook();\n  createDeps = void 0 === createDeps ? null : createDeps;\n  currentlyRenderingFiber.flags |= fiberFlags;\n  hook.memoizedState = pushSimpleEffect(\n    1 | hookFlags,\n    createEffectInstance(),\n    create,\n    createDeps\n  );\n}\nfunction updateEffectImpl(fiberFlags, hookFlags, create, deps) {\n  var hook = updateWorkInProgressHook();\n  deps = void 0 === deps ? null : deps;\n  var inst = hook.memoizedState.inst;\n  null !== currentHook &&\n  null !== deps &&\n  areHookInputsEqual(deps, currentHook.memoizedState.deps)\n    ? (hook.memoizedState = pushSimpleEffect(hookFlags, inst, create, deps))\n    : ((currentlyRenderingFiber.flags |= fiberFlags),\n      (hook.memoizedState = pushSimpleEffect(\n        1 | hookFlags,\n        inst,\n        create,\n        deps\n      )));\n}\nfunction mountEffect(create, createDeps) {\n  mountEffectImpl(8390656, 8, create, createDeps);\n}\nfunction updateEffect(create, createDeps) {\n  updateEffectImpl(2048, 8, create, createDeps);\n}\nfunction updateInsertionEffect(create, deps) {\n  return updateEffectImpl(4, 2, create, deps);\n}\nfunction updateLayoutEffect(create, deps) {\n  return updateEffectImpl(4, 4, create, deps);\n}\nfunction imperativeHandleEffect(create, ref) {\n  if (\"function\" === typeof ref) {\n    create = create();\n    var refCleanup = ref(create);\n    return function () {\n      \"function\" === typeof refCleanup ? refCleanup() : ref(null);\n    };\n  }\n  if (null !== ref && void 0 !== ref)\n    return (\n      (create = create()),\n      (ref.current = create),\n      function () {\n        ref.current = null;\n      }\n    );\n}\nfunction updateImperativeHandle(ref, create, deps) {\n  deps = null !== deps && void 0 !== deps ? deps.concat([ref]) : null;\n  updateEffectImpl(4, 4, imperativeHandleEffect.bind(null, create, ref), deps);\n}\nfunction mountDebugValue() {}\nfunction updateCallback(callback, deps) {\n  var hook = updateWorkInProgressHook();\n  deps = void 0 === deps ? null : deps;\n  var prevState = hook.memoizedState;\n  if (null !== deps && areHookInputsEqual(deps, prevState[1]))\n    return prevState[0];\n  hook.memoizedState = [callback, deps];\n  return callback;\n}\nfunction updateMemo(nextCreate, deps) {\n  var hook = updateWorkInProgressHook();\n  deps = void 0 === deps ? null : deps;\n  var prevState = hook.memoizedState;\n  if (null !== deps && areHookInputsEqual(deps, prevState[1]))\n    return prevState[0];\n  prevState = nextCreate();\n  if (shouldDoubleInvokeUserFnsInHooksDEV) {\n    setIsStrictModeForDevtools(!0);\n    try {\n      nextCreate();\n    } finally {\n      setIsStrictModeForDevtools(!1);\n    }\n  }\n  hook.memoizedState = [prevState, deps];\n  return prevState;\n}\nfunction mountDeferredValueImpl(hook, value, initialValue) {\n  if (void 0 === initialValue || 0 !== (renderLanes & 1073741824))\n    return (hook.memoizedState = value);\n  hook.memoizedState = initialValue;\n  hook = requestDeferredLane();\n  currentlyRenderingFiber.lanes |= hook;\n  workInProgressRootSkippedLanes |= hook;\n  return initialValue;\n}\nfunction updateDeferredValueImpl(hook, prevValue, value, initialValue) {\n  if (objectIs(value, prevValue)) return value;\n  if (null !== currentTreeHiddenStackCursor.current)\n    return (\n      (hook = mountDeferredValueImpl(hook, value, initialValue)),\n      objectIs(hook, prevValue) || (didReceiveUpdate = !0),\n      hook\n    );\n  if (0 === (renderLanes & 42))\n    return (didReceiveUpdate = !0), (hook.memoizedState = value);\n  hook = requestDeferredLane();\n  currentlyRenderingFiber.lanes |= hook;\n  workInProgressRootSkippedLanes |= hook;\n  return prevValue;\n}\nfunction startTransition(fiber, queue, pendingState, finishedState, callback) {\n  var previousPriority = ReactDOMSharedInternals.p;\n  ReactDOMSharedInternals.p =\n    0 !== previousPriority && 8 > previousPriority ? previousPriority : 8;\n  var prevTransition = ReactSharedInternals.T,\n    currentTransition = {};\n  ReactSharedInternals.T = currentTransition;\n  dispatchOptimisticSetState(fiber, !1, queue, pendingState);\n  try {\n    var returnValue = callback(),\n      onStartTransitionFinish = ReactSharedInternals.S;\n    null !== onStartTransitionFinish &&\n      onStartTransitionFinish(currentTransition, returnValue);\n    if (\n      null !== returnValue &&\n      \"object\" === typeof returnValue &&\n      \"function\" === typeof returnValue.then\n    ) {\n      var thenableForFinishedState = chainThenableValue(\n        returnValue,\n        finishedState\n      );\n      dispatchSetStateInternal(\n        fiber,\n        queue,\n        thenableForFinishedState,\n        requestUpdateLane(fiber)\n      );\n    } else\n      dispatchSetStateInternal(\n        fiber,\n        queue,\n        finishedState,\n        requestUpdateLane(fiber)\n      );\n  } catch (error) {\n    dispatchSetStateInternal(\n      fiber,\n      queue,\n      { then: function () {}, status: \"rejected\", reason: error },\n      requestUpdateLane()\n    );\n  } finally {\n    (ReactDOMSharedInternals.p = previousPriority),\n      (ReactSharedInternals.T = prevTransition);\n  }\n}\nfunction noop$2() {}\nfunction startHostTransition(formFiber, pendingState, action, formData) {\n  if (5 !== formFiber.tag) throw Error(formatProdErrorMessage(476));\n  var queue = ensureFormComponentIsStateful(formFiber).queue;\n  startTransition(\n    formFiber,\n    queue,\n    pendingState,\n    sharedNotPendingObject,\n    null === action\n      ? noop$2\n      : function () {\n          requestFormReset$1(formFiber);\n          return action(formData);\n        }\n  );\n}\nfunction ensureFormComponentIsStateful(formFiber) {\n  var existingStateHook = formFiber.memoizedState;\n  if (null !== existingStateHook) return existingStateHook;\n  existingStateHook = {\n    memoizedState: sharedNotPendingObject,\n    baseState: sharedNotPendingObject,\n    baseQueue: null,\n    queue: {\n      pending: null,\n      lanes: 0,\n      dispatch: null,\n      lastRenderedReducer: basicStateReducer,\n      lastRenderedState: sharedNotPendingObject\n    },\n    next: null\n  };\n  var initialResetState = {};\n  existingStateHook.next = {\n    memoizedState: initialResetState,\n    baseState: initialResetState,\n    baseQueue: null,\n    queue: {\n      pending: null,\n      lanes: 0,\n      dispatch: null,\n      lastRenderedReducer: basicStateReducer,\n      lastRenderedState: initialResetState\n    },\n    next: null\n  };\n  formFiber.memoizedState = existingStateHook;\n  formFiber = formFiber.alternate;\n  null !== formFiber && (formFiber.memoizedState = existingStateHook);\n  return existingStateHook;\n}\nfunction requestFormReset$1(formFiber) {\n  var resetStateQueue = ensureFormComponentIsStateful(formFiber).next.queue;\n  dispatchSetStateInternal(formFiber, resetStateQueue, {}, requestUpdateLane());\n}\nfunction useHostTransitionStatus() {\n  return readContext(HostTransitionContext);\n}\nfunction updateId() {\n  return updateWorkInProgressHook().memoizedState;\n}\nfunction updateRefresh() {\n  return updateWorkInProgressHook().memoizedState;\n}\nfunction refreshCache(fiber) {\n  for (var provider = fiber.return; null !== provider; ) {\n    switch (provider.tag) {\n      case 24:\n      case 3:\n        var lane = requestUpdateLane();\n        fiber = createUpdate(lane);\n        var root$41 = enqueueUpdate(provider, fiber, lane);\n        null !== root$41 &&\n          (scheduleUpdateOnFiber(root$41, provider, lane),\n          entangleTransitions(root$41, provider, lane));\n        provider = { cache: createCache() };\n        fiber.payload = provider;\n        return;\n    }\n    provider = provider.return;\n  }\n}\nfunction dispatchReducerAction(fiber, queue, action) {\n  var lane = requestUpdateLane();\n  action = {\n    lane: lane,\n    revertLane: 0,\n    action: action,\n    hasEagerState: !1,\n    eagerState: null,\n    next: null\n  };\n  isRenderPhaseUpdate(fiber)\n    ? enqueueRenderPhaseUpdate(queue, action)\n    : ((action = enqueueConcurrentHookUpdate(fiber, queue, action, lane)),\n      null !== action &&\n        (scheduleUpdateOnFiber(action, fiber, lane),\n        entangleTransitionUpdate(action, queue, lane)));\n}\nfunction dispatchSetState(fiber, queue, action) {\n  var lane = requestUpdateLane();\n  dispatchSetStateInternal(fiber, queue, action, lane);\n}\nfunction dispatchSetStateInternal(fiber, queue, action, lane) {\n  var update = {\n    lane: lane,\n    revertLane: 0,\n    action: action,\n    hasEagerState: !1,\n    eagerState: null,\n    next: null\n  };\n  if (isRenderPhaseUpdate(fiber)) enqueueRenderPhaseUpdate(queue, update);\n  else {\n    var alternate = fiber.alternate;\n    if (\n      0 === fiber.lanes &&\n      (null === alternate || 0 === alternate.lanes) &&\n      ((alternate = queue.lastRenderedReducer), null !== alternate)\n    )\n      try {\n        var currentState = queue.lastRenderedState,\n          eagerState = alternate(currentState, action);\n        update.hasEagerState = !0;\n        update.eagerState = eagerState;\n        if (objectIs(eagerState, currentState))\n          return (\n            enqueueUpdate$1(fiber, queue, update, 0),\n            null === workInProgressRoot && finishQueueingConcurrentUpdates(),\n            !1\n          );\n      } catch (error) {\n      } finally {\n      }\n    action = enqueueConcurrentHookUpdate(fiber, queue, update, lane);\n    if (null !== action)\n      return (\n        scheduleUpdateOnFiber(action, fiber, lane),\n        entangleTransitionUpdate(action, queue, lane),\n        !0\n      );\n  }\n  return !1;\n}\nfunction dispatchOptimisticSetState(fiber, throwIfDuringRender, queue, action) {\n  action = {\n    lane: 2,\n    revertLane: requestTransitionLane(),\n    action: action,\n    hasEagerState: !1,\n    eagerState: null,\n    next: null\n  };\n  if (isRenderPhaseUpdate(fiber)) {\n    if (throwIfDuringRender) throw Error(formatProdErrorMessage(479));\n  } else\n    (throwIfDuringRender = enqueueConcurrentHookUpdate(\n      fiber,\n      queue,\n      action,\n      2\n    )),\n      null !== throwIfDuringRender &&\n        scheduleUpdateOnFiber(throwIfDuringRender, fiber, 2);\n}\nfunction isRenderPhaseUpdate(fiber) {\n  var alternate = fiber.alternate;\n  return (\n    fiber === currentlyRenderingFiber ||\n    (null !== alternate && alternate === currentlyRenderingFiber)\n  );\n}\nfunction enqueueRenderPhaseUpdate(queue, update) {\n  didScheduleRenderPhaseUpdateDuringThisPass = didScheduleRenderPhaseUpdate =\n    !0;\n  var pending = queue.pending;\n  null === pending\n    ? (update.next = update)\n    : ((update.next = pending.next), (pending.next = update));\n  queue.pending = update;\n}\nfunction entangleTransitionUpdate(root, queue, lane) {\n  if (0 !== (lane & 4194048)) {\n    var queueLanes = queue.lanes;\n    queueLanes &= root.pendingLanes;\n    lane |= queueLanes;\n    queue.lanes = lane;\n    markRootEntangled(root, lane);\n  }\n}\nvar ContextOnlyDispatcher = {\n    readContext: readContext,\n    use: use,\n    useCallback: throwInvalidHookError,\n    useContext: throwInvalidHookError,\n    useEffect: throwInvalidHookError,\n    useImperativeHandle: throwInvalidHookError,\n    useLayoutEffect: throwInvalidHookError,\n    useInsertionEffect: throwInvalidHookError,\n    useMemo: throwInvalidHookError,\n    useReducer: throwInvalidHookError,\n    useRef: throwInvalidHookError,\n    useState: throwInvalidHookError,\n    useDebugValue: throwInvalidHookError,\n    useDeferredValue: throwInvalidHookError,\n    useTransition: throwInvalidHookError,\n    useSyncExternalStore: throwInvalidHookError,\n    useId: throwInvalidHookError,\n    useHostTransitionStatus: throwInvalidHookError,\n    useFormState: throwInvalidHookError,\n    useActionState: throwInvalidHookError,\n    useOptimistic: throwInvalidHookError,\n    useMemoCache: throwInvalidHookError,\n    useCacheRefresh: throwInvalidHookError\n  },\n  HooksDispatcherOnMount = {\n    readContext: readContext,\n    use: use,\n    useCallback: function (callback, deps) {\n      mountWorkInProgressHook().memoizedState = [\n        callback,\n        void 0 === deps ? null : deps\n      ];\n      return callback;\n    },\n    useContext: readContext,\n    useEffect: mountEffect,\n    useImperativeHandle: function (ref, create, deps) {\n      deps = null !== deps && void 0 !== deps ? deps.concat([ref]) : null;\n      mountEffectImpl(\n        4194308,\n        4,\n        imperativeHandleEffect.bind(null, create, ref),\n        deps\n      );\n    },\n    useLayoutEffect: function (create, deps) {\n      return mountEffectImpl(4194308, 4, create, deps);\n    },\n    useInsertionEffect: function (create, deps) {\n      mountEffectImpl(4, 2, create, deps);\n    },\n    useMemo: function (nextCreate, deps) {\n      var hook = mountWorkInProgressHook();\n      deps = void 0 === deps ? null : deps;\n      var nextValue = nextCreate();\n      if (shouldDoubleInvokeUserFnsInHooksDEV) {\n        setIsStrictModeForDevtools(!0);\n        try {\n          nextCreate();\n        } finally {\n          setIsStrictModeForDevtools(!1);\n        }\n      }\n      hook.memoizedState = [nextValue, deps];\n      return nextValue;\n    },\n    useReducer: function (reducer, initialArg, init) {\n      var hook = mountWorkInProgressHook();\n      if (void 0 !== init) {\n        var initialState = init(initialArg);\n        if (shouldDoubleInvokeUserFnsInHooksDEV) {\n          setIsStrictModeForDevtools(!0);\n          try {\n            init(initialArg);\n          } finally {\n            setIsStrictModeForDevtools(!1);\n          }\n        }\n      } else initialState = initialArg;\n      hook.memoizedState = hook.baseState = initialState;\n      reducer = {\n        pending: null,\n        lanes: 0,\n        dispatch: null,\n        lastRenderedReducer: reducer,\n        lastRenderedState: initialState\n      };\n      hook.queue = reducer;\n      reducer = reducer.dispatch = dispatchReducerAction.bind(\n        null,\n        currentlyRenderingFiber,\n        reducer\n      );\n      return [hook.memoizedState, reducer];\n    },\n    useRef: function (initialValue) {\n      var hook = mountWorkInProgressHook();\n      initialValue = { current: initialValue };\n      return (hook.memoizedState = initialValue);\n    },\n    useState: function (initialState) {\n      initialState = mountStateImpl(initialState);\n      var queue = initialState.queue,\n        dispatch = dispatchSetState.bind(null, currentlyRenderingFiber, queue);\n      queue.dispatch = dispatch;\n      return [initialState.memoizedState, dispatch];\n    },\n    useDebugValue: mountDebugValue,\n    useDeferredValue: function (value, initialValue) {\n      var hook = mountWorkInProgressHook();\n      return mountDeferredValueImpl(hook, value, initialValue);\n    },\n    useTransition: function () {\n      var stateHook = mountStateImpl(!1);\n      stateHook = startTransition.bind(\n        null,\n        currentlyRenderingFiber,\n        stateHook.queue,\n        !0,\n        !1\n      );\n      mountWorkInProgressHook().memoizedState = stateHook;\n      return [!1, stateHook];\n    },\n    useSyncExternalStore: function (subscribe, getSnapshot, getServerSnapshot) {\n      var fiber = currentlyRenderingFiber,\n        hook = mountWorkInProgressHook();\n      if (isHydrating) {\n        if (void 0 === getServerSnapshot)\n          throw Error(formatProdErrorMessage(407));\n        getServerSnapshot = getServerSnapshot();\n      } else {\n        getServerSnapshot = getSnapshot();\n        if (null === workInProgressRoot)\n          throw Error(formatProdErrorMessage(349));\n        0 !== (workInProgressRootRenderLanes & 124) ||\n          pushStoreConsistencyCheck(fiber, getSnapshot, getServerSnapshot);\n      }\n      hook.memoizedState = getServerSnapshot;\n      var inst = { value: getServerSnapshot, getSnapshot: getSnapshot };\n      hook.queue = inst;\n      mountEffect(subscribeToStore.bind(null, fiber, inst, subscribe), [\n        subscribe\n      ]);\n      fiber.flags |= 2048;\n      pushSimpleEffect(\n        9,\n        createEffectInstance(),\n        updateStoreInstance.bind(\n          null,\n          fiber,\n          inst,\n          getServerSnapshot,\n          getSnapshot\n        ),\n        null\n      );\n      return getServerSnapshot;\n    },\n    useId: function () {\n      var hook = mountWorkInProgressHook(),\n        identifierPrefix = workInProgressRoot.identifierPrefix;\n      if (isHydrating) {\n        var JSCompiler_inline_result = treeContextOverflow;\n        var idWithLeadingBit = treeContextId;\n        JSCompiler_inline_result =\n          (\n            idWithLeadingBit & ~(1 << (32 - clz32(idWithLeadingBit) - 1))\n          ).toString(32) + JSCompiler_inline_result;\n        identifierPrefix =\n          \"\\u00ab\" + identifierPrefix + \"R\" + JSCompiler_inline_result;\n        JSCompiler_inline_result = localIdCounter++;\n        0 < JSCompiler_inline_result &&\n          (identifierPrefix += \"H\" + JSCompiler_inline_result.toString(32));\n        identifierPrefix += \"\\u00bb\";\n      } else\n        (JSCompiler_inline_result = globalClientIdCounter++),\n          (identifierPrefix =\n            \"\\u00ab\" +\n            identifierPrefix +\n            \"r\" +\n            JSCompiler_inline_result.toString(32) +\n            \"\\u00bb\");\n      return (hook.memoizedState = identifierPrefix);\n    },\n    useHostTransitionStatus: useHostTransitionStatus,\n    useFormState: mountActionState,\n    useActionState: mountActionState,\n    useOptimistic: function (passthrough) {\n      var hook = mountWorkInProgressHook();\n      hook.memoizedState = hook.baseState = passthrough;\n      var queue = {\n        pending: null,\n        lanes: 0,\n        dispatch: null,\n        lastRenderedReducer: null,\n        lastRenderedState: null\n      };\n      hook.queue = queue;\n      hook = dispatchOptimisticSetState.bind(\n        null,\n        currentlyRenderingFiber,\n        !0,\n        queue\n      );\n      queue.dispatch = hook;\n      return [passthrough, hook];\n    },\n    useMemoCache: useMemoCache,\n    useCacheRefresh: function () {\n      return (mountWorkInProgressHook().memoizedState = refreshCache.bind(\n        null,\n        currentlyRenderingFiber\n      ));\n    }\n  },\n  HooksDispatcherOnUpdate = {\n    readContext: readContext,\n    use: use,\n    useCallback: updateCallback,\n    useContext: readContext,\n    useEffect: updateEffect,\n    useImperativeHandle: updateImperativeHandle,\n    useInsertionEffect: updateInsertionEffect,\n    useLayoutEffect: updateLayoutEffect,\n    useMemo: updateMemo,\n    useReducer: updateReducer,\n    useRef: updateRef,\n    useState: function () {\n      return updateReducer(basicStateReducer);\n    },\n    useDebugValue: mountDebugValue,\n    useDeferredValue: function (value, initialValue) {\n      var hook = updateWorkInProgressHook();\n      return updateDeferredValueImpl(\n        hook,\n        currentHook.memoizedState,\n        value,\n        initialValue\n      );\n    },\n    useTransition: function () {\n      var booleanOrThenable = updateReducer(basicStateReducer)[0],\n        start = updateWorkInProgressHook().memoizedState;\n      return [\n        \"boolean\" === typeof booleanOrThenable\n          ? booleanOrThenable\n          : useThenable(booleanOrThenable),\n        start\n      ];\n    },\n    useSyncExternalStore: updateSyncExternalStore,\n    useId: updateId,\n    useHostTransitionStatus: useHostTransitionStatus,\n    useFormState: updateActionState,\n    useActionState: updateActionState,\n    useOptimistic: function (passthrough, reducer) {\n      var hook = updateWorkInProgressHook();\n      return updateOptimisticImpl(hook, currentHook, passthrough, reducer);\n    },\n    useMemoCache: useMemoCache,\n    useCacheRefresh: updateRefresh\n  },\n  HooksDispatcherOnRerender = {\n    readContext: readContext,\n    use: use,\n    useCallback: updateCallback,\n    useContext: readContext,\n    useEffect: updateEffect,\n    useImperativeHandle: updateImperativeHandle,\n    useInsertionEffect: updateInsertionEffect,\n    useLayoutEffect: updateLayoutEffect,\n    useMemo: updateMemo,\n    useReducer: rerenderReducer,\n    useRef: updateRef,\n    useState: function () {\n      return rerenderReducer(basicStateReducer);\n    },\n    useDebugValue: mountDebugValue,\n    useDeferredValue: function (value, initialValue) {\n      var hook = updateWorkInProgressHook();\n      return null === currentHook\n        ? mountDeferredValueImpl(hook, value, initialValue)\n        : updateDeferredValueImpl(\n            hook,\n            currentHook.memoizedState,\n            value,\n            initialValue\n          );\n    },\n    useTransition: function () {\n      var booleanOrThenable = rerenderReducer(basicStateReducer)[0],\n        start = updateWorkInProgressHook().memoizedState;\n      return [\n        \"boolean\" === typeof booleanOrThenable\n          ? booleanOrThenable\n          : useThenable(booleanOrThenable),\n        start\n      ];\n    },\n    useSyncExternalStore: updateSyncExternalStore,\n    useId: updateId,\n    useHostTransitionStatus: useHostTransitionStatus,\n    useFormState: rerenderActionState,\n    useActionState: rerenderActionState,\n    useOptimistic: function (passthrough, reducer) {\n      var hook = updateWorkInProgressHook();\n      if (null !== currentHook)\n        return updateOptimisticImpl(hook, currentHook, passthrough, reducer);\n      hook.baseState = passthrough;\n      return [passthrough, hook.queue.dispatch];\n    },\n    useMemoCache: useMemoCache,\n    useCacheRefresh: updateRefresh\n  },\n  thenableState = null,\n  thenableIndexCounter = 0;\nfunction unwrapThenable(thenable) {\n  var index = thenableIndexCounter;\n  thenableIndexCounter += 1;\n  null === thenableState && (thenableState = []);\n  return trackUsedThenable(thenableState, thenable, index);\n}\nfunction coerceRef(workInProgress, element) {\n  element = element.props.ref;\n  workInProgress.ref = void 0 !== element ? element : null;\n}\nfunction throwOnInvalidObjectType(returnFiber, newChild) {\n  if (newChild.$$typeof === REACT_LEGACY_ELEMENT_TYPE)\n    throw Error(formatProdErrorMessage(525));\n  returnFiber = Object.prototype.toString.call(newChild);\n  throw Error(\n    formatProdErrorMessage(\n      31,\n      \"[object Object]\" === returnFiber\n        ? \"object with keys {\" + Object.keys(newChild).join(\", \") + \"}\"\n        : returnFiber\n    )\n  );\n}\nfunction resolveLazy(lazyType) {\n  var init = lazyType._init;\n  return init(lazyType._payload);\n}\nfunction createChildReconciler(shouldTrackSideEffects) {\n  function deleteChild(returnFiber, childToDelete) {\n    if (shouldTrackSideEffects) {\n      var deletions = returnFiber.deletions;\n      null === deletions\n        ? ((returnFiber.deletions = [childToDelete]), (returnFiber.flags |= 16))\n        : deletions.push(childToDelete);\n    }\n  }\n  function deleteRemainingChildren(returnFiber, currentFirstChild) {\n    if (!shouldTrackSideEffects) return null;\n    for (; null !== currentFirstChild; )\n      deleteChild(returnFiber, currentFirstChild),\n        (currentFirstChild = currentFirstChild.sibling);\n    return null;\n  }\n  function mapRemainingChildren(currentFirstChild) {\n    for (var existingChildren = new Map(); null !== currentFirstChild; )\n      null !== currentFirstChild.key\n        ? existingChildren.set(currentFirstChild.key, currentFirstChild)\n        : existingChildren.set(currentFirstChild.index, currentFirstChild),\n        (currentFirstChild = currentFirstChild.sibling);\n    return existingChildren;\n  }\n  function useFiber(fiber, pendingProps) {\n    fiber = createWorkInProgress(fiber, pendingProps);\n    fiber.index = 0;\n    fiber.sibling = null;\n    return fiber;\n  }\n  function placeChild(newFiber, lastPlacedIndex, newIndex) {\n    newFiber.index = newIndex;\n    if (!shouldTrackSideEffects)\n      return (newFiber.flags |= 1048576), lastPlacedIndex;\n    newIndex = newFiber.alternate;\n    if (null !== newIndex)\n      return (\n        (newIndex = newIndex.index),\n        newIndex < lastPlacedIndex\n          ? ((newFiber.flags |= 67108866), lastPlacedIndex)\n          : newIndex\n      );\n    newFiber.flags |= 67108866;\n    return lastPlacedIndex;\n  }\n  function placeSingleChild(newFiber) {\n    shouldTrackSideEffects &&\n      null === newFiber.alternate &&\n      (newFiber.flags |= 67108866);\n    return newFiber;\n  }\n  function updateTextNode(returnFiber, current, textContent, lanes) {\n    if (null === current || 6 !== current.tag)\n      return (\n        (current = createFiberFromText(textContent, returnFiber.mode, lanes)),\n        (current.return = returnFiber),\n        current\n      );\n    current = useFiber(current, textContent);\n    current.return = returnFiber;\n    return current;\n  }\n  function updateElement(returnFiber, current, element, lanes) {\n    var elementType = element.type;\n    if (elementType === REACT_FRAGMENT_TYPE)\n      return updateFragment(\n        returnFiber,\n        current,\n        element.props.children,\n        lanes,\n        element.key\n      );\n    if (\n      null !== current &&\n      (current.elementType === elementType ||\n        (\"object\" === typeof elementType &&\n          null !== elementType &&\n          elementType.$$typeof === REACT_LAZY_TYPE &&\n          resolveLazy(elementType) === current.type))\n    )\n      return (\n        (current = useFiber(current, element.props)),\n        coerceRef(current, element),\n        (current.return = returnFiber),\n        current\n      );\n    current = createFiberFromTypeAndProps(\n      element.type,\n      element.key,\n      element.props,\n      null,\n      returnFiber.mode,\n      lanes\n    );\n    coerceRef(current, element);\n    current.return = returnFiber;\n    return current;\n  }\n  function updatePortal(returnFiber, current, portal, lanes) {\n    if (\n      null === current ||\n      4 !== current.tag ||\n      current.stateNode.containerInfo !== portal.containerInfo ||\n      current.stateNode.implementation !== portal.implementation\n    )\n      return (\n        (current = createFiberFromPortal(portal, returnFiber.mode, lanes)),\n        (current.return = returnFiber),\n        current\n      );\n    current = useFiber(current, portal.children || []);\n    current.return = returnFiber;\n    return current;\n  }\n  function updateFragment(returnFiber, current, fragment, lanes, key) {\n    if (null === current || 7 !== current.tag)\n      return (\n        (current = createFiberFromFragment(\n          fragment,\n          returnFiber.mode,\n          lanes,\n          key\n        )),\n        (current.return = returnFiber),\n        current\n      );\n    current = useFiber(current, fragment);\n    current.return = returnFiber;\n    return current;\n  }\n  function createChild(returnFiber, newChild, lanes) {\n    if (\n      (\"string\" === typeof newChild && \"\" !== newChild) ||\n      \"number\" === typeof newChild ||\n      \"bigint\" === typeof newChild\n    )\n      return (\n        (newChild = createFiberFromText(\n          \"\" + newChild,\n          returnFiber.mode,\n          lanes\n        )),\n        (newChild.return = returnFiber),\n        newChild\n      );\n    if (\"object\" === typeof newChild && null !== newChild) {\n      switch (newChild.$$typeof) {\n        case REACT_ELEMENT_TYPE:\n          return (\n            (lanes = createFiberFromTypeAndProps(\n              newChild.type,\n              newChild.key,\n              newChild.props,\n              null,\n              returnFiber.mode,\n              lanes\n            )),\n            coerceRef(lanes, newChild),\n            (lanes.return = returnFiber),\n            lanes\n          );\n        case REACT_PORTAL_TYPE:\n          return (\n            (newChild = createFiberFromPortal(\n              newChild,\n              returnFiber.mode,\n              lanes\n            )),\n            (newChild.return = returnFiber),\n            newChild\n          );\n        case REACT_LAZY_TYPE:\n          var init = newChild._init;\n          newChild = init(newChild._payload);\n          return createChild(returnFiber, newChild, lanes);\n      }\n      if (isArrayImpl(newChild) || getIteratorFn(newChild))\n        return (\n          (newChild = createFiberFromFragment(\n            newChild,\n            returnFiber.mode,\n            lanes,\n            null\n          )),\n          (newChild.return = returnFiber),\n          newChild\n        );\n      if (\"function\" === typeof newChild.then)\n        return createChild(returnFiber, unwrapThenable(newChild), lanes);\n      if (newChild.$$typeof === REACT_CONTEXT_TYPE)\n        return createChild(\n          returnFiber,\n          readContextDuringReconciliation(returnFiber, newChild),\n          lanes\n        );\n      throwOnInvalidObjectType(returnFiber, newChild);\n    }\n    return null;\n  }\n  function updateSlot(returnFiber, oldFiber, newChild, lanes) {\n    var key = null !== oldFiber ? oldFiber.key : null;\n    if (\n      (\"string\" === typeof newChild && \"\" !== newChild) ||\n      \"number\" === typeof newChild ||\n      \"bigint\" === typeof newChild\n    )\n      return null !== key\n        ? null\n        : updateTextNode(returnFiber, oldFiber, \"\" + newChild, lanes);\n    if (\"object\" === typeof newChild && null !== newChild) {\n      switch (newChild.$$typeof) {\n        case REACT_ELEMENT_TYPE:\n          return newChild.key === key\n            ? updateElement(returnFiber, oldFiber, newChild, lanes)\n            : null;\n        case REACT_PORTAL_TYPE:\n          return newChild.key === key\n            ? updatePortal(returnFiber, oldFiber, newChild, lanes)\n            : null;\n        case REACT_LAZY_TYPE:\n          return (\n            (key = newChild._init),\n            (newChild = key(newChild._payload)),\n            updateSlot(returnFiber, oldFiber, newChild, lanes)\n          );\n      }\n      if (isArrayImpl(newChild) || getIteratorFn(newChild))\n        return null !== key\n          ? null\n          : updateFragment(returnFiber, oldFiber, newChild, lanes, null);\n      if (\"function\" === typeof newChild.then)\n        return updateSlot(\n          returnFiber,\n          oldFiber,\n          unwrapThenable(newChild),\n          lanes\n        );\n      if (newChild.$$typeof === REACT_CONTEXT_TYPE)\n        return updateSlot(\n          returnFiber,\n          oldFiber,\n          readContextDuringReconciliation(returnFiber, newChild),\n          lanes\n        );\n      throwOnInvalidObjectType(returnFiber, newChild);\n    }\n    return null;\n  }\n  function updateFromMap(\n    existingChildren,\n    returnFiber,\n    newIdx,\n    newChild,\n    lanes\n  ) {\n    if (\n      (\"string\" === typeof newChild && \"\" !== newChild) ||\n      \"number\" === typeof newChild ||\n      \"bigint\" === typeof newChild\n    )\n      return (\n        (existingChildren = existingChildren.get(newIdx) || null),\n        updateTextNode(returnFiber, existingChildren, \"\" + newChild, lanes)\n      );\n    if (\"object\" === typeof newChild && null !== newChild) {\n      switch (newChild.$$typeof) {\n        case REACT_ELEMENT_TYPE:\n          return (\n            (existingChildren =\n              existingChildren.get(\n                null === newChild.key ? newIdx : newChild.key\n              ) || null),\n            updateElement(returnFiber, existingChildren, newChild, lanes)\n          );\n        case REACT_PORTAL_TYPE:\n          return (\n            (existingChildren =\n              existingChildren.get(\n                null === newChild.key ? newIdx : newChild.key\n              ) || null),\n            updatePortal(returnFiber, existingChildren, newChild, lanes)\n          );\n        case REACT_LAZY_TYPE:\n          var init = newChild._init;\n          newChild = init(newChild._payload);\n          return updateFromMap(\n            existingChildren,\n            returnFiber,\n            newIdx,\n            newChild,\n            lanes\n          );\n      }\n      if (isArrayImpl(newChild) || getIteratorFn(newChild))\n        return (\n          (existingChildren = existingChildren.get(newIdx) || null),\n          updateFragment(returnFiber, existingChildren, newChild, lanes, null)\n        );\n      if (\"function\" === typeof newChild.then)\n        return updateFromMap(\n          existingChildren,\n          returnFiber,\n          newIdx,\n          unwrapThenable(newChild),\n          lanes\n        );\n      if (newChild.$$typeof === REACT_CONTEXT_TYPE)\n        return updateFromMap(\n          existingChildren,\n          returnFiber,\n          newIdx,\n          readContextDuringReconciliation(returnFiber, newChild),\n          lanes\n        );\n      throwOnInvalidObjectType(returnFiber, newChild);\n    }\n    return null;\n  }\n  function reconcileChildrenArray(\n    returnFiber,\n    currentFirstChild,\n    newChildren,\n    lanes\n  ) {\n    for (\n      var resultingFirstChild = null,\n        previousNewFiber = null,\n        oldFiber = currentFirstChild,\n        newIdx = (currentFirstChild = 0),\n        nextOldFiber = null;\n      null !== oldFiber && newIdx < newChildren.length;\n      newIdx++\n    ) {\n      oldFiber.index > newIdx\n        ? ((nextOldFiber = oldFiber), (oldFiber = null))\n        : (nextOldFiber = oldFiber.sibling);\n      var newFiber = updateSlot(\n        returnFiber,\n        oldFiber,\n        newChildren[newIdx],\n        lanes\n      );\n      if (null === newFiber) {\n        null === oldFiber && (oldFiber = nextOldFiber);\n        break;\n      }\n      shouldTrackSideEffects &&\n        oldFiber &&\n        null === newFiber.alternate &&\n        deleteChild(returnFiber, oldFiber);\n      currentFirstChild = placeChild(newFiber, currentFirstChild, newIdx);\n      null === previousNewFiber\n        ? (resultingFirstChild = newFiber)\n        : (previousNewFiber.sibling = newFiber);\n      previousNewFiber = newFiber;\n      oldFiber = nextOldFiber;\n    }\n    if (newIdx === newChildren.length)\n      return (\n        deleteRemainingChildren(returnFiber, oldFiber),\n        isHydrating && pushTreeFork(returnFiber, newIdx),\n        resultingFirstChild\n      );\n    if (null === oldFiber) {\n      for (; newIdx < newChildren.length; newIdx++)\n        (oldFiber = createChild(returnFiber, newChildren[newIdx], lanes)),\n          null !== oldFiber &&\n            ((currentFirstChild = placeChild(\n              oldFiber,\n              currentFirstChild,\n              newIdx\n            )),\n            null === previousNewFiber\n              ? (resultingFirstChild = oldFiber)\n              : (previousNewFiber.sibling = oldFiber),\n            (previousNewFiber = oldFiber));\n      isHydrating && pushTreeFork(returnFiber, newIdx);\n      return resultingFirstChild;\n    }\n    for (\n      oldFiber = mapRemainingChildren(oldFiber);\n      newIdx < newChildren.length;\n      newIdx++\n    )\n      (nextOldFiber = updateFromMap(\n        oldFiber,\n        returnFiber,\n        newIdx,\n        newChildren[newIdx],\n        lanes\n      )),\n        null !== nextOldFiber &&\n          (shouldTrackSideEffects &&\n            null !== nextOldFiber.alternate &&\n            oldFiber.delete(\n              null === nextOldFiber.key ? newIdx : nextOldFiber.key\n            ),\n          (currentFirstChild = placeChild(\n            nextOldFiber,\n            currentFirstChild,\n            newIdx\n          )),\n          null === previousNewFiber\n            ? (resultingFirstChild = nextOldFiber)\n            : (previousNewFiber.sibling = nextOldFiber),\n          (previousNewFiber = nextOldFiber));\n    shouldTrackSideEffects &&\n      oldFiber.forEach(function (child) {\n        return deleteChild(returnFiber, child);\n      });\n    isHydrating && pushTreeFork(returnFiber, newIdx);\n    return resultingFirstChild;\n  }\n  function reconcileChildrenIterator(\n    returnFiber,\n    currentFirstChild,\n    newChildren,\n    lanes\n  ) {\n    if (null == newChildren) throw Error(formatProdErrorMessage(151));\n    for (\n      var resultingFirstChild = null,\n        previousNewFiber = null,\n        oldFiber = currentFirstChild,\n        newIdx = (currentFirstChild = 0),\n        nextOldFiber = null,\n        step = newChildren.next();\n      null !== oldFiber && !step.done;\n      newIdx++, step = newChildren.next()\n    ) {\n      oldFiber.index > newIdx\n        ? ((nextOldFiber = oldFiber), (oldFiber = null))\n        : (nextOldFiber = oldFiber.sibling);\n      var newFiber = updateSlot(returnFiber, oldFiber, step.value, lanes);\n      if (null === newFiber) {\n        null === oldFiber && (oldFiber = nextOldFiber);\n        break;\n      }\n      shouldTrackSideEffects &&\n        oldFiber &&\n        null === newFiber.alternate &&\n        deleteChild(returnFiber, oldFiber);\n      currentFirstChild = placeChild(newFiber, currentFirstChild, newIdx);\n      null === previousNewFiber\n        ? (resultingFirstChild = newFiber)\n        : (previousNewFiber.sibling = newFiber);\n      previousNewFiber = newFiber;\n      oldFiber = nextOldFiber;\n    }\n    if (step.done)\n      return (\n        deleteRemainingChildren(returnFiber, oldFiber),\n        isHydrating && pushTreeFork(returnFiber, newIdx),\n        resultingFirstChild\n      );\n    if (null === oldFiber) {\n      for (; !step.done; newIdx++, step = newChildren.next())\n        (step = createChild(returnFiber, step.value, lanes)),\n          null !== step &&\n            ((currentFirstChild = placeChild(step, currentFirstChild, newIdx)),\n            null === previousNewFiber\n              ? (resultingFirstChild = step)\n              : (previousNewFiber.sibling = step),\n            (previousNewFiber = step));\n      isHydrating && pushTreeFork(returnFiber, newIdx);\n      return resultingFirstChild;\n    }\n    for (\n      oldFiber = mapRemainingChildren(oldFiber);\n      !step.done;\n      newIdx++, step = newChildren.next()\n    )\n      (step = updateFromMap(oldFiber, returnFiber, newIdx, step.value, lanes)),\n        null !== step &&\n          (shouldTrackSideEffects &&\n            null !== step.alternate &&\n            oldFiber.delete(null === step.key ? newIdx : step.key),\n          (currentFirstChild = placeChild(step, currentFirstChild, newIdx)),\n          null === previousNewFiber\n            ? (resultingFirstChild = step)\n            : (previousNewFiber.sibling = step),\n          (previousNewFiber = step));\n    shouldTrackSideEffects &&\n      oldFiber.forEach(function (child) {\n        return deleteChild(returnFiber, child);\n      });\n    isHydrating && pushTreeFork(returnFiber, newIdx);\n    return resultingFirstChild;\n  }\n  function reconcileChildFibersImpl(\n    returnFiber,\n    currentFirstChild,\n    newChild,\n    lanes\n  ) {\n    \"object\" === typeof newChild &&\n      null !== newChild &&\n      newChild.type === REACT_FRAGMENT_TYPE &&\n      null === newChild.key &&\n      (newChild = newChild.props.children);\n    if (\"object\" === typeof newChild && null !== newChild) {\n      switch (newChild.$$typeof) {\n        case REACT_ELEMENT_TYPE:\n          a: {\n            for (var key = newChild.key; null !== currentFirstChild; ) {\n              if (currentFirstChild.key === key) {\n                key = newChild.type;\n                if (key === REACT_FRAGMENT_TYPE) {\n                  if (7 === currentFirstChild.tag) {\n                    deleteRemainingChildren(\n                      returnFiber,\n                      currentFirstChild.sibling\n                    );\n                    lanes = useFiber(\n                      currentFirstChild,\n                      newChild.props.children\n                    );\n                    lanes.return = returnFiber;\n                    returnFiber = lanes;\n                    break a;\n                  }\n                } else if (\n                  currentFirstChild.elementType === key ||\n                  (\"object\" === typeof key &&\n                    null !== key &&\n                    key.$$typeof === REACT_LAZY_TYPE &&\n                    resolveLazy(key) === currentFirstChild.type)\n                ) {\n                  deleteRemainingChildren(\n                    returnFiber,\n                    currentFirstChild.sibling\n                  );\n                  lanes = useFiber(currentFirstChild, newChild.props);\n                  coerceRef(lanes, newChild);\n                  lanes.return = returnFiber;\n                  returnFiber = lanes;\n                  break a;\n                }\n                deleteRemainingChildren(returnFiber, currentFirstChild);\n                break;\n              } else deleteChild(returnFiber, currentFirstChild);\n              currentFirstChild = currentFirstChild.sibling;\n            }\n            newChild.type === REACT_FRAGMENT_TYPE\n              ? ((lanes = createFiberFromFragment(\n                  newChild.props.children,\n                  returnFiber.mode,\n                  lanes,\n                  newChild.key\n                )),\n                (lanes.return = returnFiber),\n                (returnFiber = lanes))\n              : ((lanes = createFiberFromTypeAndProps(\n                  newChild.type,\n                  newChild.key,\n                  newChild.props,\n                  null,\n                  returnFiber.mode,\n                  lanes\n                )),\n                coerceRef(lanes, newChild),\n                (lanes.return = returnFiber),\n                (returnFiber = lanes));\n          }\n          return placeSingleChild(returnFiber);\n        case REACT_PORTAL_TYPE:\n          a: {\n            for (key = newChild.key; null !== currentFirstChild; ) {\n              if (currentFirstChild.key === key)\n                if (\n                  4 === currentFirstChild.tag &&\n                  currentFirstChild.stateNode.containerInfo ===\n                    newChild.containerInfo &&\n                  currentFirstChild.stateNode.implementation ===\n                    newChild.implementation\n                ) {\n                  deleteRemainingChildren(\n                    returnFiber,\n                    currentFirstChild.sibling\n                  );\n                  lanes = useFiber(currentFirstChild, newChild.children || []);\n                  lanes.return = returnFiber;\n                  returnFiber = lanes;\n                  break a;\n                } else {\n                  deleteRemainingChildren(returnFiber, currentFirstChild);\n                  break;\n                }\n              else deleteChild(returnFiber, currentFirstChild);\n              currentFirstChild = currentFirstChild.sibling;\n            }\n            lanes = createFiberFromPortal(newChild, returnFiber.mode, lanes);\n            lanes.return = returnFiber;\n            returnFiber = lanes;\n          }\n          return placeSingleChild(returnFiber);\n        case REACT_LAZY_TYPE:\n          return (\n            (key = newChild._init),\n            (newChild = key(newChild._payload)),\n            reconcileChildFibersImpl(\n              returnFiber,\n              currentFirstChild,\n              newChild,\n              lanes\n            )\n          );\n      }\n      if (isArrayImpl(newChild))\n        return reconcileChildrenArray(\n          returnFiber,\n          currentFirstChild,\n          newChild,\n          lanes\n        );\n      if (getIteratorFn(newChild)) {\n        key = getIteratorFn(newChild);\n        if (\"function\" !== typeof key) throw Error(formatProdErrorMessage(150));\n        newChild = key.call(newChild);\n        return reconcileChildrenIterator(\n          returnFiber,\n          currentFirstChild,\n          newChild,\n          lanes\n        );\n      }\n      if (\"function\" === typeof newChild.then)\n        return reconcileChildFibersImpl(\n          returnFiber,\n          currentFirstChild,\n          unwrapThenable(newChild),\n          lanes\n        );\n      if (newChild.$$typeof === REACT_CONTEXT_TYPE)\n        return reconcileChildFibersImpl(\n          returnFiber,\n          currentFirstChild,\n          readContextDuringReconciliation(returnFiber, newChild),\n          lanes\n        );\n      throwOnInvalidObjectType(returnFiber, newChild);\n    }\n    return (\"string\" === typeof newChild && \"\" !== newChild) ||\n      \"number\" === typeof newChild ||\n      \"bigint\" === typeof newChild\n      ? ((newChild = \"\" + newChild),\n        null !== currentFirstChild && 6 === currentFirstChild.tag\n          ? (deleteRemainingChildren(returnFiber, currentFirstChild.sibling),\n            (lanes = useFiber(currentFirstChild, newChild)),\n            (lanes.return = returnFiber),\n            (returnFiber = lanes))\n          : (deleteRemainingChildren(returnFiber, currentFirstChild),\n            (lanes = createFiberFromText(newChild, returnFiber.mode, lanes)),\n            (lanes.return = returnFiber),\n            (returnFiber = lanes)),\n        placeSingleChild(returnFiber))\n      : deleteRemainingChildren(returnFiber, currentFirstChild);\n  }\n  return function (returnFiber, currentFirstChild, newChild, lanes) {\n    try {\n      thenableIndexCounter = 0;\n      var firstChildFiber = reconcileChildFibersImpl(\n        returnFiber,\n        currentFirstChild,\n        newChild,\n        lanes\n      );\n      thenableState = null;\n      return firstChildFiber;\n    } catch (x) {\n      if (x === SuspenseException || x === SuspenseActionException) throw x;\n      var fiber = createFiberImplClass(29, x, null, returnFiber.mode);\n      fiber.lanes = lanes;\n      fiber.return = returnFiber;\n      return fiber;\n    } finally {\n    }\n  };\n}\nvar reconcileChildFibers = createChildReconciler(!0),\n  mountChildFibers = createChildReconciler(!1),\n  suspenseHandlerStackCursor = createCursor(null),\n  shellBoundary = null;\nfunction pushPrimaryTreeSuspenseHandler(handler) {\n  var current = handler.alternate;\n  push(suspenseStackCursor, suspenseStackCursor.current & 1);\n  push(suspenseHandlerStackCursor, handler);\n  null === shellBoundary &&\n    (null === current || null !== currentTreeHiddenStackCursor.current\n      ? (shellBoundary = handler)\n      : null !== current.memoizedState && (shellBoundary = handler));\n}\nfunction pushOffscreenSuspenseHandler(fiber) {\n  if (22 === fiber.tag) {\n    if (\n      (push(suspenseStackCursor, suspenseStackCursor.current),\n      push(suspenseHandlerStackCursor, fiber),\n      null === shellBoundary)\n    ) {\n      var current = fiber.alternate;\n      null !== current &&\n        null !== current.memoizedState &&\n        (shellBoundary = fiber);\n    }\n  } else reuseSuspenseHandlerOnStack(fiber);\n}\nfunction reuseSuspenseHandlerOnStack() {\n  push(suspenseStackCursor, suspenseStackCursor.current);\n  push(suspenseHandlerStackCursor, suspenseHandlerStackCursor.current);\n}\nfunction popSuspenseHandler(fiber) {\n  pop(suspenseHandlerStackCursor);\n  shellBoundary === fiber && (shellBoundary = null);\n  pop(suspenseStackCursor);\n}\nvar suspenseStackCursor = createCursor(0);\nfunction findFirstSuspended(row) {\n  for (var node = row; null !== node; ) {\n    if (13 === node.tag) {\n      var state = node.memoizedState;\n      if (\n        null !== state &&\n        ((state = state.dehydrated),\n        null === state ||\n          \"$?\" === state.data ||\n          isSuspenseInstanceFallback(state))\n      )\n        return node;\n    } else if (19 === node.tag && void 0 !== node.memoizedProps.revealOrder) {\n      if (0 !== (node.flags & 128)) return node;\n    } else if (null !== node.child) {\n      node.child.return = node;\n      node = node.child;\n      continue;\n    }\n    if (node === row) break;\n    for (; null === node.sibling; ) {\n      if (null === node.return || node.return === row) return null;\n      node = node.return;\n    }\n    node.sibling.return = node.return;\n    node = node.sibling;\n  }\n  return null;\n}\nfunction applyDerivedStateFromProps(\n  workInProgress,\n  ctor,\n  getDerivedStateFromProps,\n  nextProps\n) {\n  ctor = workInProgress.memoizedState;\n  getDerivedStateFromProps = getDerivedStateFromProps(nextProps, ctor);\n  getDerivedStateFromProps =\n    null === getDerivedStateFromProps || void 0 === getDerivedStateFromProps\n      ? ctor\n      : assign({}, ctor, getDerivedStateFromProps);\n  workInProgress.memoizedState = getDerivedStateFromProps;\n  0 === workInProgress.lanes &&\n    (workInProgress.updateQueue.baseState = getDerivedStateFromProps);\n}\nvar classComponentUpdater = {\n  enqueueSetState: function (inst, payload, callback) {\n    inst = inst._reactInternals;\n    var lane = requestUpdateLane(),\n      update = createUpdate(lane);\n    update.payload = payload;\n    void 0 !== callback && null !== callback && (update.callback = callback);\n    payload = enqueueUpdate(inst, update, lane);\n    null !== payload &&\n      (scheduleUpdateOnFiber(payload, inst, lane),\n      entangleTransitions(payload, inst, lane));\n  },\n  enqueueReplaceState: function (inst, payload, callback) {\n    inst = inst._reactInternals;\n    var lane = requestUpdateLane(),\n      update = createUpdate(lane);\n    update.tag = 1;\n    update.payload = payload;\n    void 0 !== callback && null !== callback && (update.callback = callback);\n    payload = enqueueUpdate(inst, update, lane);\n    null !== payload &&\n      (scheduleUpdateOnFiber(payload, inst, lane),\n      entangleTransitions(payload, inst, lane));\n  },\n  enqueueForceUpdate: function (inst, callback) {\n    inst = inst._reactInternals;\n    var lane = requestUpdateLane(),\n      update = createUpdate(lane);\n    update.tag = 2;\n    void 0 !== callback && null !== callback && (update.callback = callback);\n    callback = enqueueUpdate(inst, update, lane);\n    null !== callback &&\n      (scheduleUpdateOnFiber(callback, inst, lane),\n      entangleTransitions(callback, inst, lane));\n  }\n};\nfunction checkShouldComponentUpdate(\n  workInProgress,\n  ctor,\n  oldProps,\n  newProps,\n  oldState,\n  newState,\n  nextContext\n) {\n  workInProgress = workInProgress.stateNode;\n  return \"function\" === typeof workInProgress.shouldComponentUpdate\n    ? workInProgress.shouldComponentUpdate(newProps, newState, nextContext)\n    : ctor.prototype && ctor.prototype.isPureReactComponent\n      ? !shallowEqual(oldProps, newProps) || !shallowEqual(oldState, newState)\n      : !0;\n}\nfunction callComponentWillReceiveProps(\n  workInProgress,\n  instance,\n  newProps,\n  nextContext\n) {\n  workInProgress = instance.state;\n  \"function\" === typeof instance.componentWillReceiveProps &&\n    instance.componentWillReceiveProps(newProps, nextContext);\n  \"function\" === typeof instance.UNSAFE_componentWillReceiveProps &&\n    instance.UNSAFE_componentWillReceiveProps(newProps, nextContext);\n  instance.state !== workInProgress &&\n    classComponentUpdater.enqueueReplaceState(instance, instance.state, null);\n}\nfunction resolveClassComponentProps(Component, baseProps) {\n  var newProps = baseProps;\n  if (\"ref\" in baseProps) {\n    newProps = {};\n    for (var propName in baseProps)\n      \"ref\" !== propName && (newProps[propName] = baseProps[propName]);\n  }\n  if ((Component = Component.defaultProps)) {\n    newProps === baseProps && (newProps = assign({}, newProps));\n    for (var propName$73 in Component)\n      void 0 === newProps[propName$73] &&\n        (newProps[propName$73] = Component[propName$73]);\n  }\n  return newProps;\n}\nvar reportGlobalError =\n  \"function\" === typeof reportError\n    ? reportError\n    : function (error) {\n        if (\n          \"object\" === typeof window &&\n          \"function\" === typeof window.ErrorEvent\n        ) {\n          var event = new window.ErrorEvent(\"error\", {\n            bubbles: !0,\n            cancelable: !0,\n            message:\n              \"object\" === typeof error &&\n              null !== error &&\n              \"string\" === typeof error.message\n                ? String(error.message)\n                : String(error),\n            error: error\n          });\n          if (!window.dispatchEvent(event)) return;\n        } else if (\n          \"object\" === typeof process &&\n          \"function\" === typeof process.emit\n        ) {\n          process.emit(\"uncaughtException\", error);\n          return;\n        }\n        console.error(error);\n      };\nfunction defaultOnUncaughtError(error) {\n  reportGlobalError(error);\n}\nfunction defaultOnCaughtError(error) {\n  console.error(error);\n}\nfunction defaultOnRecoverableError(error) {\n  reportGlobalError(error);\n}\nfunction logUncaughtError(root, errorInfo) {\n  try {\n    var onUncaughtError = root.onUncaughtError;\n    onUncaughtError(errorInfo.value, { componentStack: errorInfo.stack });\n  } catch (e$74) {\n    setTimeout(function () {\n      throw e$74;\n    });\n  }\n}\nfunction logCaughtError(root, boundary, errorInfo) {\n  try {\n    var onCaughtError = root.onCaughtError;\n    onCaughtError(errorInfo.value, {\n      componentStack: errorInfo.stack,\n      errorBoundary: 1 === boundary.tag ? boundary.stateNode : null\n    });\n  } catch (e$75) {\n    setTimeout(function () {\n      throw e$75;\n    });\n  }\n}\nfunction createRootErrorUpdate(root, errorInfo, lane) {\n  lane = createUpdate(lane);\n  lane.tag = 3;\n  lane.payload = { element: null };\n  lane.callback = function () {\n    logUncaughtError(root, errorInfo);\n  };\n  return lane;\n}\nfunction createClassErrorUpdate(lane) {\n  lane = createUpdate(lane);\n  lane.tag = 3;\n  return lane;\n}\nfunction initializeClassErrorUpdate(update, root, fiber, errorInfo) {\n  var getDerivedStateFromError = fiber.type.getDerivedStateFromError;\n  if (\"function\" === typeof getDerivedStateFromError) {\n    var error = errorInfo.value;\n    update.payload = function () {\n      return getDerivedStateFromError(error);\n    };\n    update.callback = function () {\n      logCaughtError(root, fiber, errorInfo);\n    };\n  }\n  var inst = fiber.stateNode;\n  null !== inst &&\n    \"function\" === typeof inst.componentDidCatch &&\n    (update.callback = function () {\n      logCaughtError(root, fiber, errorInfo);\n      \"function\" !== typeof getDerivedStateFromError &&\n        (null === legacyErrorBoundariesThatAlreadyFailed\n          ? (legacyErrorBoundariesThatAlreadyFailed = new Set([this]))\n          : legacyErrorBoundariesThatAlreadyFailed.add(this));\n      var stack = errorInfo.stack;\n      this.componentDidCatch(errorInfo.value, {\n        componentStack: null !== stack ? stack : \"\"\n      });\n    });\n}\nfunction throwException(\n  root,\n  returnFiber,\n  sourceFiber,\n  value,\n  rootRenderLanes\n) {\n  sourceFiber.flags |= 32768;\n  if (\n    null !== value &&\n    \"object\" === typeof value &&\n    \"function\" === typeof value.then\n  ) {\n    returnFiber = sourceFiber.alternate;\n    null !== returnFiber &&\n      propagateParentContextChanges(\n        returnFiber,\n        sourceFiber,\n        rootRenderLanes,\n        !0\n      );\n    sourceFiber = suspenseHandlerStackCursor.current;\n    if (null !== sourceFiber) {\n      switch (sourceFiber.tag) {\n        case 13:\n          return (\n            null === shellBoundary\n              ? renderDidSuspendDelayIfPossible()\n              : null === sourceFiber.alternate &&\n                0 === workInProgressRootExitStatus &&\n                (workInProgressRootExitStatus = 3),\n            (sourceFiber.flags &= -257),\n            (sourceFiber.flags |= 65536),\n            (sourceFiber.lanes = rootRenderLanes),\n            value === noopSuspenseyCommitThenable\n              ? (sourceFiber.flags |= 16384)\n              : ((returnFiber = sourceFiber.updateQueue),\n                null === returnFiber\n                  ? (sourceFiber.updateQueue = new Set([value]))\n                  : returnFiber.add(value),\n                attachPingListener(root, value, rootRenderLanes)),\n            !1\n          );\n        case 22:\n          return (\n            (sourceFiber.flags |= 65536),\n            value === noopSuspenseyCommitThenable\n              ? (sourceFiber.flags |= 16384)\n              : ((returnFiber = sourceFiber.updateQueue),\n                null === returnFiber\n                  ? ((returnFiber = {\n                      transitions: null,\n                      markerInstances: null,\n                      retryQueue: new Set([value])\n                    }),\n                    (sourceFiber.updateQueue = returnFiber))\n                  : ((sourceFiber = returnFiber.retryQueue),\n                    null === sourceFiber\n                      ? (returnFiber.retryQueue = new Set([value]))\n                      : sourceFiber.add(value)),\n                attachPingListener(root, value, rootRenderLanes)),\n            !1\n          );\n      }\n      throw Error(formatProdErrorMessage(435, sourceFiber.tag));\n    }\n    attachPingListener(root, value, rootRenderLanes);\n    renderDidSuspendDelayIfPossible();\n    return !1;\n  }\n  if (isHydrating)\n    return (\n      (returnFiber = suspenseHandlerStackCursor.current),\n      null !== returnFiber\n        ? (0 === (returnFiber.flags & 65536) && (returnFiber.flags |= 256),\n          (returnFiber.flags |= 65536),\n          (returnFiber.lanes = rootRenderLanes),\n          value !== HydrationMismatchException &&\n            ((root = Error(formatProdErrorMessage(422), { cause: value })),\n            queueHydrationError(createCapturedValueAtFiber(root, sourceFiber))))\n        : (value !== HydrationMismatchException &&\n            ((returnFiber = Error(formatProdErrorMessage(423), {\n              cause: value\n            })),\n            queueHydrationError(\n              createCapturedValueAtFiber(returnFiber, sourceFiber)\n            )),\n          (root = root.current.alternate),\n          (root.flags |= 65536),\n          (rootRenderLanes &= -rootRenderLanes),\n          (root.lanes |= rootRenderLanes),\n          (value = createCapturedValueAtFiber(value, sourceFiber)),\n          (rootRenderLanes = createRootErrorUpdate(\n            root.stateNode,\n            value,\n            rootRenderLanes\n          )),\n          enqueueCapturedUpdate(root, rootRenderLanes),\n          4 !== workInProgressRootExitStatus &&\n            (workInProgressRootExitStatus = 2)),\n      !1\n    );\n  var wrapperError = Error(formatProdErrorMessage(520), { cause: value });\n  wrapperError = createCapturedValueAtFiber(wrapperError, sourceFiber);\n  null === workInProgressRootConcurrentErrors\n    ? (workInProgressRootConcurrentErrors = [wrapperError])\n    : workInProgressRootConcurrentErrors.push(wrapperError);\n  4 !== workInProgressRootExitStatus && (workInProgressRootExitStatus = 2);\n  if (null === returnFiber) return !0;\n  value = createCapturedValueAtFiber(value, sourceFiber);\n  sourceFiber = returnFiber;\n  do {\n    switch (sourceFiber.tag) {\n      case 3:\n        return (\n          (sourceFiber.flags |= 65536),\n          (root = rootRenderLanes & -rootRenderLanes),\n          (sourceFiber.lanes |= root),\n          (root = createRootErrorUpdate(sourceFiber.stateNode, value, root)),\n          enqueueCapturedUpdate(sourceFiber, root),\n          !1\n        );\n      case 1:\n        if (\n          ((returnFiber = sourceFiber.type),\n          (wrapperError = sourceFiber.stateNode),\n          0 === (sourceFiber.flags & 128) &&\n            (\"function\" === typeof returnFiber.getDerivedStateFromError ||\n              (null !== wrapperError &&\n                \"function\" === typeof wrapperError.componentDidCatch &&\n                (null === legacyErrorBoundariesThatAlreadyFailed ||\n                  !legacyErrorBoundariesThatAlreadyFailed.has(wrapperError)))))\n        )\n          return (\n            (sourceFiber.flags |= 65536),\n            (rootRenderLanes &= -rootRenderLanes),\n            (sourceFiber.lanes |= rootRenderLanes),\n            (rootRenderLanes = createClassErrorUpdate(rootRenderLanes)),\n            initializeClassErrorUpdate(\n              rootRenderLanes,\n              root,\n              sourceFiber,\n              value\n            ),\n            enqueueCapturedUpdate(sourceFiber, rootRenderLanes),\n            !1\n          );\n    }\n    sourceFiber = sourceFiber.return;\n  } while (null !== sourceFiber);\n  return !1;\n}\nvar SelectiveHydrationException = Error(formatProdErrorMessage(461)),\n  didReceiveUpdate = !1;\nfunction reconcileChildren(current, workInProgress, nextChildren, renderLanes) {\n  workInProgress.child =\n    null === current\n      ? mountChildFibers(workInProgress, null, nextChildren, renderLanes)\n      : reconcileChildFibers(\n          workInProgress,\n          current.child,\n          nextChildren,\n          renderLanes\n        );\n}\nfunction updateForwardRef(\n  current,\n  workInProgress,\n  Component,\n  nextProps,\n  renderLanes\n) {\n  Component = Component.render;\n  var ref = workInProgress.ref;\n  if (\"ref\" in nextProps) {\n    var propsWithoutRef = {};\n    for (var key in nextProps)\n      \"ref\" !== key && (propsWithoutRef[key] = nextProps[key]);\n  } else propsWithoutRef = nextProps;\n  prepareToReadContext(workInProgress);\n  nextProps = renderWithHooks(\n    current,\n    workInProgress,\n    Component,\n    propsWithoutRef,\n    ref,\n    renderLanes\n  );\n  key = checkDidRenderIdHook();\n  if (null !== current && !didReceiveUpdate)\n    return (\n      bailoutHooks(current, workInProgress, renderLanes),\n      bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes)\n    );\n  isHydrating && key && pushMaterializedTreeId(workInProgress);\n  workInProgress.flags |= 1;\n  reconcileChildren(current, workInProgress, nextProps, renderLanes);\n  return workInProgress.child;\n}\nfunction updateMemoComponent(\n  current,\n  workInProgress,\n  Component,\n  nextProps,\n  renderLanes\n) {\n  if (null === current) {\n    var type = Component.type;\n    if (\n      \"function\" === typeof type &&\n      !shouldConstruct(type) &&\n      void 0 === type.defaultProps &&\n      null === Component.compare\n    )\n      return (\n        (workInProgress.tag = 15),\n        (workInProgress.type = type),\n        updateSimpleMemoComponent(\n          current,\n          workInProgress,\n          type,\n          nextProps,\n          renderLanes\n        )\n      );\n    current = createFiberFromTypeAndProps(\n      Component.type,\n      null,\n      nextProps,\n      workInProgress,\n      workInProgress.mode,\n      renderLanes\n    );\n    current.ref = workInProgress.ref;\n    current.return = workInProgress;\n    return (workInProgress.child = current);\n  }\n  type = current.child;\n  if (!checkScheduledUpdateOrContext(current, renderLanes)) {\n    var prevProps = type.memoizedProps;\n    Component = Component.compare;\n    Component = null !== Component ? Component : shallowEqual;\n    if (Component(prevProps, nextProps) && current.ref === workInProgress.ref)\n      return bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes);\n  }\n  workInProgress.flags |= 1;\n  current = createWorkInProgress(type, nextProps);\n  current.ref = workInProgress.ref;\n  current.return = workInProgress;\n  return (workInProgress.child = current);\n}\nfunction updateSimpleMemoComponent(\n  current,\n  workInProgress,\n  Component,\n  nextProps,\n  renderLanes\n) {\n  if (null !== current) {\n    var prevProps = current.memoizedProps;\n    if (\n      shallowEqual(prevProps, nextProps) &&\n      current.ref === workInProgress.ref\n    )\n      if (\n        ((didReceiveUpdate = !1),\n        (workInProgress.pendingProps = nextProps = prevProps),\n        checkScheduledUpdateOrContext(current, renderLanes))\n      )\n        0 !== (current.flags & 131072) && (didReceiveUpdate = !0);\n      else\n        return (\n          (workInProgress.lanes = current.lanes),\n          bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes)\n        );\n  }\n  return updateFunctionComponent(\n    current,\n    workInProgress,\n    Component,\n    nextProps,\n    renderLanes\n  );\n}\nfunction updateOffscreenComponent(current, workInProgress, renderLanes) {\n  var nextProps = workInProgress.pendingProps,\n    nextChildren = nextProps.children,\n    prevState = null !== current ? current.memoizedState : null;\n  if (\"hidden\" === nextProps.mode) {\n    if (0 !== (workInProgress.flags & 128)) {\n      nextProps =\n        null !== prevState ? prevState.baseLanes | renderLanes : renderLanes;\n      if (null !== current) {\n        nextChildren = workInProgress.child = current.child;\n        for (prevState = 0; null !== nextChildren; )\n          (prevState =\n            prevState | nextChildren.lanes | nextChildren.childLanes),\n            (nextChildren = nextChildren.sibling);\n        workInProgress.childLanes = prevState & ~nextProps;\n      } else (workInProgress.childLanes = 0), (workInProgress.child = null);\n      return deferHiddenOffscreenComponent(\n        current,\n        workInProgress,\n        nextProps,\n        renderLanes\n      );\n    }\n    if (0 !== (renderLanes & 536870912))\n      (workInProgress.memoizedState = { baseLanes: 0, cachePool: null }),\n        null !== current &&\n          pushTransition(\n            workInProgress,\n            null !== prevState ? prevState.cachePool : null\n          ),\n        null !== prevState\n          ? pushHiddenContext(workInProgress, prevState)\n          : reuseHiddenContextOnStack(),\n        pushOffscreenSuspenseHandler(workInProgress);\n    else\n      return (\n        (workInProgress.lanes = workInProgress.childLanes = 536870912),\n        deferHiddenOffscreenComponent(\n          current,\n          workInProgress,\n          null !== prevState ? prevState.baseLanes | renderLanes : renderLanes,\n          renderLanes\n        )\n      );\n  } else\n    null !== prevState\n      ? (pushTransition(workInProgress, prevState.cachePool),\n        pushHiddenContext(workInProgress, prevState),\n        reuseSuspenseHandlerOnStack(workInProgress),\n        (workInProgress.memoizedState = null))\n      : (null !== current && pushTransition(workInProgress, null),\n        reuseHiddenContextOnStack(),\n        reuseSuspenseHandlerOnStack(workInProgress));\n  reconcileChildren(current, workInProgress, nextChildren, renderLanes);\n  return workInProgress.child;\n}\nfunction deferHiddenOffscreenComponent(\n  current,\n  workInProgress,\n  nextBaseLanes,\n  renderLanes\n) {\n  var JSCompiler_inline_result = peekCacheFromPool();\n  JSCompiler_inline_result =\n    null === JSCompiler_inline_result\n      ? null\n      : { parent: CacheContext._currentValue, pool: JSCompiler_inline_result };\n  workInProgress.memoizedState = {\n    baseLanes: nextBaseLanes,\n    cachePool: JSCompiler_inline_result\n  };\n  null !== current && pushTransition(workInProgress, null);\n  reuseHiddenContextOnStack();\n  pushOffscreenSuspenseHandler(workInProgress);\n  null !== current &&\n    propagateParentContextChanges(current, workInProgress, renderLanes, !0);\n  return null;\n}\nfunction markRef(current, workInProgress) {\n  var ref = workInProgress.ref;\n  if (null === ref)\n    null !== current &&\n      null !== current.ref &&\n      (workInProgress.flags |= 4194816);\n  else {\n    if (\"function\" !== typeof ref && \"object\" !== typeof ref)\n      throw Error(formatProdErrorMessage(284));\n    if (null === current || current.ref !== ref)\n      workInProgress.flags |= 4194816;\n  }\n}\nfunction updateFunctionComponent(\n  current,\n  workInProgress,\n  Component,\n  nextProps,\n  renderLanes\n) {\n  prepareToReadContext(workInProgress);\n  Component = renderWithHooks(\n    current,\n    workInProgress,\n    Component,\n    nextProps,\n    void 0,\n    renderLanes\n  );\n  nextProps = checkDidRenderIdHook();\n  if (null !== current && !didReceiveUpdate)\n    return (\n      bailoutHooks(current, workInProgress, renderLanes),\n      bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes)\n    );\n  isHydrating && nextProps && pushMaterializedTreeId(workInProgress);\n  workInProgress.flags |= 1;\n  reconcileChildren(current, workInProgress, Component, renderLanes);\n  return workInProgress.child;\n}\nfunction replayFunctionComponent(\n  current,\n  workInProgress,\n  nextProps,\n  Component,\n  secondArg,\n  renderLanes\n) {\n  prepareToReadContext(workInProgress);\n  workInProgress.updateQueue = null;\n  nextProps = renderWithHooksAgain(\n    workInProgress,\n    Component,\n    nextProps,\n    secondArg\n  );\n  finishRenderingHooks(current);\n  Component = checkDidRenderIdHook();\n  if (null !== current && !didReceiveUpdate)\n    return (\n      bailoutHooks(current, workInProgress, renderLanes),\n      bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes)\n    );\n  isHydrating && Component && pushMaterializedTreeId(workInProgress);\n  workInProgress.flags |= 1;\n  reconcileChildren(current, workInProgress, nextProps, renderLanes);\n  return workInProgress.child;\n}\nfunction updateClassComponent(\n  current,\n  workInProgress,\n  Component,\n  nextProps,\n  renderLanes\n) {\n  prepareToReadContext(workInProgress);\n  if (null === workInProgress.stateNode) {\n    var context = emptyContextObject,\n      contextType = Component.contextType;\n    \"object\" === typeof contextType &&\n      null !== contextType &&\n      (context = readContext(contextType));\n    context = new Component(nextProps, context);\n    workInProgress.memoizedState =\n      null !== context.state && void 0 !== context.state ? context.state : null;\n    context.updater = classComponentUpdater;\n    workInProgress.stateNode = context;\n    context._reactInternals = workInProgress;\n    context = workInProgress.stateNode;\n    context.props = nextProps;\n    context.state = workInProgress.memoizedState;\n    context.refs = {};\n    initializeUpdateQueue(workInProgress);\n    contextType = Component.contextType;\n    context.context =\n      \"object\" === typeof contextType && null !== contextType\n        ? readContext(contextType)\n        : emptyContextObject;\n    context.state = workInProgress.memoizedState;\n    contextType = Component.getDerivedStateFromProps;\n    \"function\" === typeof contextType &&\n      (applyDerivedStateFromProps(\n        workInProgress,\n        Component,\n        contextType,\n        nextProps\n      ),\n      (context.state = workInProgress.memoizedState));\n    \"function\" === typeof Component.getDerivedStateFromProps ||\n      \"function\" === typeof context.getSnapshotBeforeUpdate ||\n      (\"function\" !== typeof context.UNSAFE_componentWillMount &&\n        \"function\" !== typeof context.componentWillMount) ||\n      ((contextType = context.state),\n      \"function\" === typeof context.componentWillMount &&\n        context.componentWillMount(),\n      \"function\" === typeof context.UNSAFE_componentWillMount &&\n        context.UNSAFE_componentWillMount(),\n      contextType !== context.state &&\n        classComponentUpdater.enqueueReplaceState(context, context.state, null),\n      processUpdateQueue(workInProgress, nextProps, context, renderLanes),\n      suspendIfUpdateReadFromEntangledAsyncAction(),\n      (context.state = workInProgress.memoizedState));\n    \"function\" === typeof context.componentDidMount &&\n      (workInProgress.flags |= 4194308);\n    nextProps = !0;\n  } else if (null === current) {\n    context = workInProgress.stateNode;\n    var unresolvedOldProps = workInProgress.memoizedProps,\n      oldProps = resolveClassComponentProps(Component, unresolvedOldProps);\n    context.props = oldProps;\n    var oldContext = context.context,\n      contextType$jscomp$0 = Component.contextType;\n    contextType = emptyContextObject;\n    \"object\" === typeof contextType$jscomp$0 &&\n      null !== contextType$jscomp$0 &&\n      (contextType = readContext(contextType$jscomp$0));\n    var getDerivedStateFromProps = Component.getDerivedStateFromProps;\n    contextType$jscomp$0 =\n      \"function\" === typeof getDerivedStateFromProps ||\n      \"function\" === typeof context.getSnapshotBeforeUpdate;\n    unresolvedOldProps = workInProgress.pendingProps !== unresolvedOldProps;\n    contextType$jscomp$0 ||\n      (\"function\" !== typeof context.UNSAFE_componentWillReceiveProps &&\n        \"function\" !== typeof context.componentWillReceiveProps) ||\n      ((unresolvedOldProps || oldContext !== contextType) &&\n        callComponentWillReceiveProps(\n          workInProgress,\n          context,\n          nextProps,\n          contextType\n        ));\n    hasForceUpdate = !1;\n    var oldState = workInProgress.memoizedState;\n    context.state = oldState;\n    processUpdateQueue(workInProgress, nextProps, context, renderLanes);\n    suspendIfUpdateReadFromEntangledAsyncAction();\n    oldContext = workInProgress.memoizedState;\n    unresolvedOldProps || oldState !== oldContext || hasForceUpdate\n      ? (\"function\" === typeof getDerivedStateFromProps &&\n          (applyDerivedStateFromProps(\n            workInProgress,\n            Component,\n            getDerivedStateFromProps,\n            nextProps\n          ),\n          (oldContext = workInProgress.memoizedState)),\n        (oldProps =\n          hasForceUpdate ||\n          checkShouldComponentUpdate(\n            workInProgress,\n            Component,\n            oldProps,\n            nextProps,\n            oldState,\n            oldContext,\n            contextType\n          ))\n          ? (contextType$jscomp$0 ||\n              (\"function\" !== typeof context.UNSAFE_componentWillMount &&\n                \"function\" !== typeof context.componentWillMount) ||\n              (\"function\" === typeof context.componentWillMount &&\n                context.componentWillMount(),\n              \"function\" === typeof context.UNSAFE_componentWillMount &&\n                context.UNSAFE_componentWillMount()),\n            \"function\" === typeof context.componentDidMount &&\n              (workInProgress.flags |= 4194308))\n          : (\"function\" === typeof context.componentDidMount &&\n              (workInProgress.flags |= 4194308),\n            (workInProgress.memoizedProps = nextProps),\n            (workInProgress.memoizedState = oldContext)),\n        (context.props = nextProps),\n        (context.state = oldContext),\n        (context.context = contextType),\n        (nextProps = oldProps))\n      : (\"function\" === typeof context.componentDidMount &&\n          (workInProgress.flags |= 4194308),\n        (nextProps = !1));\n  } else {\n    context = workInProgress.stateNode;\n    cloneUpdateQueue(current, workInProgress);\n    contextType = workInProgress.memoizedProps;\n    contextType$jscomp$0 = resolveClassComponentProps(Component, contextType);\n    context.props = contextType$jscomp$0;\n    getDerivedStateFromProps = workInProgress.pendingProps;\n    oldState = context.context;\n    oldContext = Component.contextType;\n    oldProps = emptyContextObject;\n    \"object\" === typeof oldContext &&\n      null !== oldContext &&\n      (oldProps = readContext(oldContext));\n    unresolvedOldProps = Component.getDerivedStateFromProps;\n    (oldContext =\n      \"function\" === typeof unresolvedOldProps ||\n      \"function\" === typeof context.getSnapshotBeforeUpdate) ||\n      (\"function\" !== typeof context.UNSAFE_componentWillReceiveProps &&\n        \"function\" !== typeof context.componentWillReceiveProps) ||\n      ((contextType !== getDerivedStateFromProps || oldState !== oldProps) &&\n        callComponentWillReceiveProps(\n          workInProgress,\n          context,\n          nextProps,\n          oldProps\n        ));\n    hasForceUpdate = !1;\n    oldState = workInProgress.memoizedState;\n    context.state = oldState;\n    processUpdateQueue(workInProgress, nextProps, context, renderLanes);\n    suspendIfUpdateReadFromEntangledAsyncAction();\n    var newState = workInProgress.memoizedState;\n    contextType !== getDerivedStateFromProps ||\n    oldState !== newState ||\n    hasForceUpdate ||\n    (null !== current &&\n      null !== current.dependencies &&\n      checkIfContextChanged(current.dependencies))\n      ? (\"function\" === typeof unresolvedOldProps &&\n          (applyDerivedStateFromProps(\n            workInProgress,\n            Component,\n            unresolvedOldProps,\n            nextProps\n          ),\n          (newState = workInProgress.memoizedState)),\n        (contextType$jscomp$0 =\n          hasForceUpdate ||\n          checkShouldComponentUpdate(\n            workInProgress,\n            Component,\n            contextType$jscomp$0,\n            nextProps,\n            oldState,\n            newState,\n            oldProps\n          ) ||\n          (null !== current &&\n            null !== current.dependencies &&\n            checkIfContextChanged(current.dependencies)))\n          ? (oldContext ||\n              (\"function\" !== typeof context.UNSAFE_componentWillUpdate &&\n                \"function\" !== typeof context.componentWillUpdate) ||\n              (\"function\" === typeof context.componentWillUpdate &&\n                context.componentWillUpdate(nextProps, newState, oldProps),\n              \"function\" === typeof context.UNSAFE_componentWillUpdate &&\n                context.UNSAFE_componentWillUpdate(\n                  nextProps,\n                  newState,\n                  oldProps\n                )),\n            \"function\" === typeof context.componentDidUpdate &&\n              (workInProgress.flags |= 4),\n            \"function\" === typeof context.getSnapshotBeforeUpdate &&\n              (workInProgress.flags |= 1024))\n          : (\"function\" !== typeof context.componentDidUpdate ||\n              (contextType === current.memoizedProps &&\n                oldState === current.memoizedState) ||\n              (workInProgress.flags |= 4),\n            \"function\" !== typeof context.getSnapshotBeforeUpdate ||\n              (contextType === current.memoizedProps &&\n                oldState === current.memoizedState) ||\n              (workInProgress.flags |= 1024),\n            (workInProgress.memoizedProps = nextProps),\n            (workInProgress.memoizedState = newState)),\n        (context.props = nextProps),\n        (context.state = newState),\n        (context.context = oldProps),\n        (nextProps = contextType$jscomp$0))\n      : (\"function\" !== typeof context.componentDidUpdate ||\n          (contextType === current.memoizedProps &&\n            oldState === current.memoizedState) ||\n          (workInProgress.flags |= 4),\n        \"function\" !== typeof context.getSnapshotBeforeUpdate ||\n          (contextType === current.memoizedProps &&\n            oldState === current.memoizedState) ||\n          (workInProgress.flags |= 1024),\n        (nextProps = !1));\n  }\n  context = nextProps;\n  markRef(current, workInProgress);\n  nextProps = 0 !== (workInProgress.flags & 128);\n  context || nextProps\n    ? ((context = workInProgress.stateNode),\n      (Component =\n        nextProps && \"function\" !== typeof Component.getDerivedStateFromError\n          ? null\n          : context.render()),\n      (workInProgress.flags |= 1),\n      null !== current && nextProps\n        ? ((workInProgress.child = reconcileChildFibers(\n            workInProgress,\n            current.child,\n            null,\n            renderLanes\n          )),\n          (workInProgress.child = reconcileChildFibers(\n            workInProgress,\n            null,\n            Component,\n            renderLanes\n          )))\n        : reconcileChildren(current, workInProgress, Component, renderLanes),\n      (workInProgress.memoizedState = context.state),\n      (current = workInProgress.child))\n    : (current = bailoutOnAlreadyFinishedWork(\n        current,\n        workInProgress,\n        renderLanes\n      ));\n  return current;\n}\nfunction mountHostRootWithoutHydrating(\n  current,\n  workInProgress,\n  nextChildren,\n  renderLanes\n) {\n  resetHydrationState();\n  workInProgress.flags |= 256;\n  reconcileChildren(current, workInProgress, nextChildren, renderLanes);\n  return workInProgress.child;\n}\nvar SUSPENDED_MARKER = {\n  dehydrated: null,\n  treeContext: null,\n  retryLane: 0,\n  hydrationErrors: null\n};\nfunction mountSuspenseOffscreenState(renderLanes) {\n  return { baseLanes: renderLanes, cachePool: getSuspendedCache() };\n}\nfunction getRemainingWorkInPrimaryTree(\n  current,\n  primaryTreeDidDefer,\n  renderLanes\n) {\n  current = null !== current ? current.childLanes & ~renderLanes : 0;\n  primaryTreeDidDefer && (current |= workInProgressDeferredLane);\n  return current;\n}\nfunction updateSuspenseComponent(current, workInProgress, renderLanes) {\n  var nextProps = workInProgress.pendingProps,\n    showFallback = !1,\n    didSuspend = 0 !== (workInProgress.flags & 128),\n    JSCompiler_temp;\n  (JSCompiler_temp = didSuspend) ||\n    (JSCompiler_temp =\n      null !== current && null === current.memoizedState\n        ? !1\n        : 0 !== (suspenseStackCursor.current & 2));\n  JSCompiler_temp && ((showFallback = !0), (workInProgress.flags &= -129));\n  JSCompiler_temp = 0 !== (workInProgress.flags & 32);\n  workInProgress.flags &= -33;\n  if (null === current) {\n    if (isHydrating) {\n      showFallback\n        ? pushPrimaryTreeSuspenseHandler(workInProgress)\n        : reuseSuspenseHandlerOnStack(workInProgress);\n      if (isHydrating) {\n        var nextInstance = nextHydratableInstance,\n          JSCompiler_temp$jscomp$0;\n        if ((JSCompiler_temp$jscomp$0 = nextInstance)) {\n          c: {\n            JSCompiler_temp$jscomp$0 = nextInstance;\n            for (\n              nextInstance = rootOrSingletonContext;\n              8 !== JSCompiler_temp$jscomp$0.nodeType;\n\n            ) {\n              if (!nextInstance) {\n                nextInstance = null;\n                break c;\n              }\n              JSCompiler_temp$jscomp$0 = getNextHydratable(\n                JSCompiler_temp$jscomp$0.nextSibling\n              );\n              if (null === JSCompiler_temp$jscomp$0) {\n                nextInstance = null;\n                break c;\n              }\n            }\n            nextInstance = JSCompiler_temp$jscomp$0;\n          }\n          null !== nextInstance\n            ? ((workInProgress.memoizedState = {\n                dehydrated: nextInstance,\n                treeContext:\n                  null !== treeContextProvider\n                    ? { id: treeContextId, overflow: treeContextOverflow }\n                    : null,\n                retryLane: 536870912,\n                hydrationErrors: null\n              }),\n              (JSCompiler_temp$jscomp$0 = createFiberImplClass(\n                18,\n                null,\n                null,\n                0\n              )),\n              (JSCompiler_temp$jscomp$0.stateNode = nextInstance),\n              (JSCompiler_temp$jscomp$0.return = workInProgress),\n              (workInProgress.child = JSCompiler_temp$jscomp$0),\n              (hydrationParentFiber = workInProgress),\n              (nextHydratableInstance = null),\n              (JSCompiler_temp$jscomp$0 = !0))\n            : (JSCompiler_temp$jscomp$0 = !1);\n        }\n        JSCompiler_temp$jscomp$0 || throwOnHydrationMismatch(workInProgress);\n      }\n      nextInstance = workInProgress.memoizedState;\n      if (\n        null !== nextInstance &&\n        ((nextInstance = nextInstance.dehydrated), null !== nextInstance)\n      )\n        return (\n          isSuspenseInstanceFallback(nextInstance)\n            ? (workInProgress.lanes = 32)\n            : (workInProgress.lanes = 536870912),\n          null\n        );\n      popSuspenseHandler(workInProgress);\n    }\n    nextInstance = nextProps.children;\n    nextProps = nextProps.fallback;\n    if (showFallback)\n      return (\n        reuseSuspenseHandlerOnStack(workInProgress),\n        (showFallback = workInProgress.mode),\n        (nextInstance = mountWorkInProgressOffscreenFiber(\n          { mode: \"hidden\", children: nextInstance },\n          showFallback\n        )),\n        (nextProps = createFiberFromFragment(\n          nextProps,\n          showFallback,\n          renderLanes,\n          null\n        )),\n        (nextInstance.return = workInProgress),\n        (nextProps.return = workInProgress),\n        (nextInstance.sibling = nextProps),\n        (workInProgress.child = nextInstance),\n        (showFallback = workInProgress.child),\n        (showFallback.memoizedState = mountSuspenseOffscreenState(renderLanes)),\n        (showFallback.childLanes = getRemainingWorkInPrimaryTree(\n          current,\n          JSCompiler_temp,\n          renderLanes\n        )),\n        (workInProgress.memoizedState = SUSPENDED_MARKER),\n        nextProps\n      );\n    pushPrimaryTreeSuspenseHandler(workInProgress);\n    return mountSuspensePrimaryChildren(workInProgress, nextInstance);\n  }\n  JSCompiler_temp$jscomp$0 = current.memoizedState;\n  if (\n    null !== JSCompiler_temp$jscomp$0 &&\n    ((nextInstance = JSCompiler_temp$jscomp$0.dehydrated),\n    null !== nextInstance)\n  ) {\n    if (didSuspend)\n      workInProgress.flags & 256\n        ? (pushPrimaryTreeSuspenseHandler(workInProgress),\n          (workInProgress.flags &= -257),\n          (workInProgress = retrySuspenseComponentWithoutHydrating(\n            current,\n            workInProgress,\n            renderLanes\n          )))\n        : null !== workInProgress.memoizedState\n          ? (reuseSuspenseHandlerOnStack(workInProgress),\n            (workInProgress.child = current.child),\n            (workInProgress.flags |= 128),\n            (workInProgress = null))\n          : (reuseSuspenseHandlerOnStack(workInProgress),\n            (showFallback = nextProps.fallback),\n            (nextInstance = workInProgress.mode),\n            (nextProps = mountWorkInProgressOffscreenFiber(\n              { mode: \"visible\", children: nextProps.children },\n              nextInstance\n            )),\n            (showFallback = createFiberFromFragment(\n              showFallback,\n              nextInstance,\n              renderLanes,\n              null\n            )),\n            (showFallback.flags |= 2),\n            (nextProps.return = workInProgress),\n            (showFallback.return = workInProgress),\n            (nextProps.sibling = showFallback),\n            (workInProgress.child = nextProps),\n            reconcileChildFibers(\n              workInProgress,\n              current.child,\n              null,\n              renderLanes\n            ),\n            (nextProps = workInProgress.child),\n            (nextProps.memoizedState =\n              mountSuspenseOffscreenState(renderLanes)),\n            (nextProps.childLanes = getRemainingWorkInPrimaryTree(\n              current,\n              JSCompiler_temp,\n              renderLanes\n            )),\n            (workInProgress.memoizedState = SUSPENDED_MARKER),\n            (workInProgress = showFallback));\n    else if (\n      (pushPrimaryTreeSuspenseHandler(workInProgress),\n      isSuspenseInstanceFallback(nextInstance))\n    ) {\n      JSCompiler_temp =\n        nextInstance.nextSibling && nextInstance.nextSibling.dataset;\n      if (JSCompiler_temp) var digest = JSCompiler_temp.dgst;\n      JSCompiler_temp = digest;\n      nextProps = Error(formatProdErrorMessage(419));\n      nextProps.stack = \"\";\n      nextProps.digest = JSCompiler_temp;\n      queueHydrationError({ value: nextProps, source: null, stack: null });\n      workInProgress = retrySuspenseComponentWithoutHydrating(\n        current,\n        workInProgress,\n        renderLanes\n      );\n    } else if (\n      (didReceiveUpdate ||\n        propagateParentContextChanges(current, workInProgress, renderLanes, !1),\n      (JSCompiler_temp = 0 !== (renderLanes & current.childLanes)),\n      didReceiveUpdate || JSCompiler_temp)\n    ) {\n      JSCompiler_temp = workInProgressRoot;\n      if (\n        null !== JSCompiler_temp &&\n        ((nextProps = renderLanes & -renderLanes),\n        (nextProps =\n          0 !== (nextProps & 42)\n            ? 1\n            : getBumpedLaneForHydrationByLane(nextProps)),\n        (nextProps =\n          0 !== (nextProps & (JSCompiler_temp.suspendedLanes | renderLanes))\n            ? 0\n            : nextProps),\n        0 !== nextProps && nextProps !== JSCompiler_temp$jscomp$0.retryLane)\n      )\n        throw (\n          ((JSCompiler_temp$jscomp$0.retryLane = nextProps),\n          enqueueConcurrentRenderForLane(current, nextProps),\n          scheduleUpdateOnFiber(JSCompiler_temp, current, nextProps),\n          SelectiveHydrationException)\n        );\n      \"$?\" === nextInstance.data || renderDidSuspendDelayIfPossible();\n      workInProgress = retrySuspenseComponentWithoutHydrating(\n        current,\n        workInProgress,\n        renderLanes\n      );\n    } else\n      \"$?\" === nextInstance.data\n        ? ((workInProgress.flags |= 192),\n          (workInProgress.child = current.child),\n          (workInProgress = null))\n        : ((current = JSCompiler_temp$jscomp$0.treeContext),\n          (nextHydratableInstance = getNextHydratable(\n            nextInstance.nextSibling\n          )),\n          (hydrationParentFiber = workInProgress),\n          (isHydrating = !0),\n          (hydrationErrors = null),\n          (rootOrSingletonContext = !1),\n          null !== current &&\n            ((idStack[idStackIndex++] = treeContextId),\n            (idStack[idStackIndex++] = treeContextOverflow),\n            (idStack[idStackIndex++] = treeContextProvider),\n            (treeContextId = current.id),\n            (treeContextOverflow = current.overflow),\n            (treeContextProvider = workInProgress)),\n          (workInProgress = mountSuspensePrimaryChildren(\n            workInProgress,\n            nextProps.children\n          )),\n          (workInProgress.flags |= 4096));\n    return workInProgress;\n  }\n  if (showFallback)\n    return (\n      reuseSuspenseHandlerOnStack(workInProgress),\n      (showFallback = nextProps.fallback),\n      (nextInstance = workInProgress.mode),\n      (JSCompiler_temp$jscomp$0 = current.child),\n      (digest = JSCompiler_temp$jscomp$0.sibling),\n      (nextProps = createWorkInProgress(JSCompiler_temp$jscomp$0, {\n        mode: \"hidden\",\n        children: nextProps.children\n      })),\n      (nextProps.subtreeFlags =\n        JSCompiler_temp$jscomp$0.subtreeFlags & 65011712),\n      null !== digest\n        ? (showFallback = createWorkInProgress(digest, showFallback))\n        : ((showFallback = createFiberFromFragment(\n            showFallback,\n            nextInstance,\n            renderLanes,\n            null\n          )),\n          (showFallback.flags |= 2)),\n      (showFallback.return = workInProgress),\n      (nextProps.return = workInProgress),\n      (nextProps.sibling = showFallback),\n      (workInProgress.child = nextProps),\n      (nextProps = showFallback),\n      (showFallback = workInProgress.child),\n      (nextInstance = current.child.memoizedState),\n      null === nextInstance\n        ? (nextInstance = mountSuspenseOffscreenState(renderLanes))\n        : ((JSCompiler_temp$jscomp$0 = nextInstance.cachePool),\n          null !== JSCompiler_temp$jscomp$0\n            ? ((digest = CacheContext._currentValue),\n              (JSCompiler_temp$jscomp$0 =\n                JSCompiler_temp$jscomp$0.parent !== digest\n                  ? { parent: digest, pool: digest }\n                  : JSCompiler_temp$jscomp$0))\n            : (JSCompiler_temp$jscomp$0 = getSuspendedCache()),\n          (nextInstance = {\n            baseLanes: nextInstance.baseLanes | renderLanes,\n            cachePool: JSCompiler_temp$jscomp$0\n          })),\n      (showFallback.memoizedState = nextInstance),\n      (showFallback.childLanes = getRemainingWorkInPrimaryTree(\n        current,\n        JSCompiler_temp,\n        renderLanes\n      )),\n      (workInProgress.memoizedState = SUSPENDED_MARKER),\n      nextProps\n    );\n  pushPrimaryTreeSuspenseHandler(workInProgress);\n  renderLanes = current.child;\n  current = renderLanes.sibling;\n  renderLanes = createWorkInProgress(renderLanes, {\n    mode: \"visible\",\n    children: nextProps.children\n  });\n  renderLanes.return = workInProgress;\n  renderLanes.sibling = null;\n  null !== current &&\n    ((JSCompiler_temp = workInProgress.deletions),\n    null === JSCompiler_temp\n      ? ((workInProgress.deletions = [current]), (workInProgress.flags |= 16))\n      : JSCompiler_temp.push(current));\n  workInProgress.child = renderLanes;\n  workInProgress.memoizedState = null;\n  return renderLanes;\n}\nfunction mountSuspensePrimaryChildren(workInProgress, primaryChildren) {\n  primaryChildren = mountWorkInProgressOffscreenFiber(\n    { mode: \"visible\", children: primaryChildren },\n    workInProgress.mode\n  );\n  primaryChildren.return = workInProgress;\n  return (workInProgress.child = primaryChildren);\n}\nfunction mountWorkInProgressOffscreenFiber(offscreenProps, mode) {\n  offscreenProps = createFiberImplClass(22, offscreenProps, null, mode);\n  offscreenProps.lanes = 0;\n  offscreenProps.stateNode = {\n    _visibility: 1,\n    _pendingMarkers: null,\n    _retryCache: null,\n    _transitions: null\n  };\n  return offscreenProps;\n}\nfunction retrySuspenseComponentWithoutHydrating(\n  current,\n  workInProgress,\n  renderLanes\n) {\n  reconcileChildFibers(workInProgress, current.child, null, renderLanes);\n  current = mountSuspensePrimaryChildren(\n    workInProgress,\n    workInProgress.pendingProps.children\n  );\n  current.flags |= 2;\n  workInProgress.memoizedState = null;\n  return current;\n}\nfunction scheduleSuspenseWorkOnFiber(fiber, renderLanes, propagationRoot) {\n  fiber.lanes |= renderLanes;\n  var alternate = fiber.alternate;\n  null !== alternate && (alternate.lanes |= renderLanes);\n  scheduleContextWorkOnParentPath(fiber.return, renderLanes, propagationRoot);\n}\nfunction initSuspenseListRenderState(\n  workInProgress,\n  isBackwards,\n  tail,\n  lastContentRow,\n  tailMode\n) {\n  var renderState = workInProgress.memoizedState;\n  null === renderState\n    ? (workInProgress.memoizedState = {\n        isBackwards: isBackwards,\n        rendering: null,\n        renderingStartTime: 0,\n        last: lastContentRow,\n        tail: tail,\n        tailMode: tailMode\n      })\n    : ((renderState.isBackwards = isBackwards),\n      (renderState.rendering = null),\n      (renderState.renderingStartTime = 0),\n      (renderState.last = lastContentRow),\n      (renderState.tail = tail),\n      (renderState.tailMode = tailMode));\n}\nfunction updateSuspenseListComponent(current, workInProgress, renderLanes) {\n  var nextProps = workInProgress.pendingProps,\n    revealOrder = nextProps.revealOrder,\n    tailMode = nextProps.tail;\n  reconcileChildren(current, workInProgress, nextProps.children, renderLanes);\n  nextProps = suspenseStackCursor.current;\n  if (0 !== (nextProps & 2))\n    (nextProps = (nextProps & 1) | 2), (workInProgress.flags |= 128);\n  else {\n    if (null !== current && 0 !== (current.flags & 128))\n      a: for (current = workInProgress.child; null !== current; ) {\n        if (13 === current.tag)\n          null !== current.memoizedState &&\n            scheduleSuspenseWorkOnFiber(current, renderLanes, workInProgress);\n        else if (19 === current.tag)\n          scheduleSuspenseWorkOnFiber(current, renderLanes, workInProgress);\n        else if (null !== current.child) {\n          current.child.return = current;\n          current = current.child;\n          continue;\n        }\n        if (current === workInProgress) break a;\n        for (; null === current.sibling; ) {\n          if (null === current.return || current.return === workInProgress)\n            break a;\n          current = current.return;\n        }\n        current.sibling.return = current.return;\n        current = current.sibling;\n      }\n    nextProps &= 1;\n  }\n  push(suspenseStackCursor, nextProps);\n  switch (revealOrder) {\n    case \"forwards\":\n      renderLanes = workInProgress.child;\n      for (revealOrder = null; null !== renderLanes; )\n        (current = renderLanes.alternate),\n          null !== current &&\n            null === findFirstSuspended(current) &&\n            (revealOrder = renderLanes),\n          (renderLanes = renderLanes.sibling);\n      renderLanes = revealOrder;\n      null === renderLanes\n        ? ((revealOrder = workInProgress.child), (workInProgress.child = null))\n        : ((revealOrder = renderLanes.sibling), (renderLanes.sibling = null));\n      initSuspenseListRenderState(\n        workInProgress,\n        !1,\n        revealOrder,\n        renderLanes,\n        tailMode\n      );\n      break;\n    case \"backwards\":\n      renderLanes = null;\n      revealOrder = workInProgress.child;\n      for (workInProgress.child = null; null !== revealOrder; ) {\n        current = revealOrder.alternate;\n        if (null !== current && null === findFirstSuspended(current)) {\n          workInProgress.child = revealOrder;\n          break;\n        }\n        current = revealOrder.sibling;\n        revealOrder.sibling = renderLanes;\n        renderLanes = revealOrder;\n        revealOrder = current;\n      }\n      initSuspenseListRenderState(\n        workInProgress,\n        !0,\n        renderLanes,\n        null,\n        tailMode\n      );\n      break;\n    case \"together\":\n      initSuspenseListRenderState(workInProgress, !1, null, null, void 0);\n      break;\n    default:\n      workInProgress.memoizedState = null;\n  }\n  return workInProgress.child;\n}\nfunction bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes) {\n  null !== current && (workInProgress.dependencies = current.dependencies);\n  workInProgressRootSkippedLanes |= workInProgress.lanes;\n  if (0 === (renderLanes & workInProgress.childLanes))\n    if (null !== current) {\n      if (\n        (propagateParentContextChanges(\n          current,\n          workInProgress,\n          renderLanes,\n          !1\n        ),\n        0 === (renderLanes & workInProgress.childLanes))\n      )\n        return null;\n    } else return null;\n  if (null !== current && workInProgress.child !== current.child)\n    throw Error(formatProdErrorMessage(153));\n  if (null !== workInProgress.child) {\n    current = workInProgress.child;\n    renderLanes = createWorkInProgress(current, current.pendingProps);\n    workInProgress.child = renderLanes;\n    for (renderLanes.return = workInProgress; null !== current.sibling; )\n      (current = current.sibling),\n        (renderLanes = renderLanes.sibling =\n          createWorkInProgress(current, current.pendingProps)),\n        (renderLanes.return = workInProgress);\n    renderLanes.sibling = null;\n  }\n  return workInProgress.child;\n}\nfunction checkScheduledUpdateOrContext(current, renderLanes) {\n  if (0 !== (current.lanes & renderLanes)) return !0;\n  current = current.dependencies;\n  return null !== current && checkIfContextChanged(current) ? !0 : !1;\n}\nfunction attemptEarlyBailoutIfNoScheduledUpdate(\n  current,\n  workInProgress,\n  renderLanes\n) {\n  switch (workInProgress.tag) {\n    case 3:\n      pushHostContainer(workInProgress, workInProgress.stateNode.containerInfo);\n      pushProvider(workInProgress, CacheContext, current.memoizedState.cache);\n      resetHydrationState();\n      break;\n    case 27:\n    case 5:\n      pushHostContext(workInProgress);\n      break;\n    case 4:\n      pushHostContainer(workInProgress, workInProgress.stateNode.containerInfo);\n      break;\n    case 10:\n      pushProvider(\n        workInProgress,\n        workInProgress.type,\n        workInProgress.memoizedProps.value\n      );\n      break;\n    case 13:\n      var state = workInProgress.memoizedState;\n      if (null !== state) {\n        if (null !== state.dehydrated)\n          return (\n            pushPrimaryTreeSuspenseHandler(workInProgress),\n            (workInProgress.flags |= 128),\n            null\n          );\n        if (0 !== (renderLanes & workInProgress.child.childLanes))\n          return updateSuspenseComponent(current, workInProgress, renderLanes);\n        pushPrimaryTreeSuspenseHandler(workInProgress);\n        current = bailoutOnAlreadyFinishedWork(\n          current,\n          workInProgress,\n          renderLanes\n        );\n        return null !== current ? current.sibling : null;\n      }\n      pushPrimaryTreeSuspenseHandler(workInProgress);\n      break;\n    case 19:\n      var didSuspendBefore = 0 !== (current.flags & 128);\n      state = 0 !== (renderLanes & workInProgress.childLanes);\n      state ||\n        (propagateParentContextChanges(\n          current,\n          workInProgress,\n          renderLanes,\n          !1\n        ),\n        (state = 0 !== (renderLanes & workInProgress.childLanes)));\n      if (didSuspendBefore) {\n        if (state)\n          return updateSuspenseListComponent(\n            current,\n            workInProgress,\n            renderLanes\n          );\n        workInProgress.flags |= 128;\n      }\n      didSuspendBefore = workInProgress.memoizedState;\n      null !== didSuspendBefore &&\n        ((didSuspendBefore.rendering = null),\n        (didSuspendBefore.tail = null),\n        (didSuspendBefore.lastEffect = null));\n      push(suspenseStackCursor, suspenseStackCursor.current);\n      if (state) break;\n      else return null;\n    case 22:\n    case 23:\n      return (\n        (workInProgress.lanes = 0),\n        updateOffscreenComponent(current, workInProgress, renderLanes)\n      );\n    case 24:\n      pushProvider(workInProgress, CacheContext, current.memoizedState.cache);\n  }\n  return bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes);\n}\nfunction beginWork(current, workInProgress, renderLanes) {\n  if (null !== current)\n    if (current.memoizedProps !== workInProgress.pendingProps)\n      didReceiveUpdate = !0;\n    else {\n      if (\n        !checkScheduledUpdateOrContext(current, renderLanes) &&\n        0 === (workInProgress.flags & 128)\n      )\n        return (\n          (didReceiveUpdate = !1),\n          attemptEarlyBailoutIfNoScheduledUpdate(\n            current,\n            workInProgress,\n            renderLanes\n          )\n        );\n      didReceiveUpdate = 0 !== (current.flags & 131072) ? !0 : !1;\n    }\n  else\n    (didReceiveUpdate = !1),\n      isHydrating &&\n        0 !== (workInProgress.flags & 1048576) &&\n        pushTreeId(workInProgress, treeForkCount, workInProgress.index);\n  workInProgress.lanes = 0;\n  switch (workInProgress.tag) {\n    case 16:\n      a: {\n        current = workInProgress.pendingProps;\n        var lazyComponent = workInProgress.elementType,\n          init = lazyComponent._init;\n        lazyComponent = init(lazyComponent._payload);\n        workInProgress.type = lazyComponent;\n        if (\"function\" === typeof lazyComponent)\n          shouldConstruct(lazyComponent)\n            ? ((current = resolveClassComponentProps(lazyComponent, current)),\n              (workInProgress.tag = 1),\n              (workInProgress = updateClassComponent(\n                null,\n                workInProgress,\n                lazyComponent,\n                current,\n                renderLanes\n              )))\n            : ((workInProgress.tag = 0),\n              (workInProgress = updateFunctionComponent(\n                null,\n                workInProgress,\n                lazyComponent,\n                current,\n                renderLanes\n              )));\n        else {\n          if (void 0 !== lazyComponent && null !== lazyComponent)\n            if (\n              ((init = lazyComponent.$$typeof), init === REACT_FORWARD_REF_TYPE)\n            ) {\n              workInProgress.tag = 11;\n              workInProgress = updateForwardRef(\n                null,\n                workInProgress,\n                lazyComponent,\n                current,\n                renderLanes\n              );\n              break a;\n            } else if (init === REACT_MEMO_TYPE) {\n              workInProgress.tag = 14;\n              workInProgress = updateMemoComponent(\n                null,\n                workInProgress,\n                lazyComponent,\n                current,\n                renderLanes\n              );\n              break a;\n            }\n          workInProgress =\n            getComponentNameFromType(lazyComponent) || lazyComponent;\n          throw Error(formatProdErrorMessage(306, workInProgress, \"\"));\n        }\n      }\n      return workInProgress;\n    case 0:\n      return updateFunctionComponent(\n        current,\n        workInProgress,\n        workInProgress.type,\n        workInProgress.pendingProps,\n        renderLanes\n      );\n    case 1:\n      return (\n        (lazyComponent = workInProgress.type),\n        (init = resolveClassComponentProps(\n          lazyComponent,\n          workInProgress.pendingProps\n        )),\n        updateClassComponent(\n          current,\n          workInProgress,\n          lazyComponent,\n          init,\n          renderLanes\n        )\n      );\n    case 3:\n      a: {\n        pushHostContainer(\n          workInProgress,\n          workInProgress.stateNode.containerInfo\n        );\n        if (null === current) throw Error(formatProdErrorMessage(387));\n        lazyComponent = workInProgress.pendingProps;\n        var prevState = workInProgress.memoizedState;\n        init = prevState.element;\n        cloneUpdateQueue(current, workInProgress);\n        processUpdateQueue(workInProgress, lazyComponent, null, renderLanes);\n        var nextState = workInProgress.memoizedState;\n        lazyComponent = nextState.cache;\n        pushProvider(workInProgress, CacheContext, lazyComponent);\n        lazyComponent !== prevState.cache &&\n          propagateContextChanges(\n            workInProgress,\n            [CacheContext],\n            renderLanes,\n            !0\n          );\n        suspendIfUpdateReadFromEntangledAsyncAction();\n        lazyComponent = nextState.element;\n        if (prevState.isDehydrated)\n          if (\n            ((prevState = {\n              element: lazyComponent,\n              isDehydrated: !1,\n              cache: nextState.cache\n            }),\n            (workInProgress.updateQueue.baseState = prevState),\n            (workInProgress.memoizedState = prevState),\n            workInProgress.flags & 256)\n          ) {\n            workInProgress = mountHostRootWithoutHydrating(\n              current,\n              workInProgress,\n              lazyComponent,\n              renderLanes\n            );\n            break a;\n          } else if (lazyComponent !== init) {\n            init = createCapturedValueAtFiber(\n              Error(formatProdErrorMessage(424)),\n              workInProgress\n            );\n            queueHydrationError(init);\n            workInProgress = mountHostRootWithoutHydrating(\n              current,\n              workInProgress,\n              lazyComponent,\n              renderLanes\n            );\n            break a;\n          } else {\n            current = workInProgress.stateNode.containerInfo;\n            switch (current.nodeType) {\n              case 9:\n                current = current.body;\n                break;\n              default:\n                current =\n                  \"HTML\" === current.nodeName\n                    ? current.ownerDocument.body\n                    : current;\n            }\n            nextHydratableInstance = getNextHydratable(current.firstChild);\n            hydrationParentFiber = workInProgress;\n            isHydrating = !0;\n            hydrationErrors = null;\n            rootOrSingletonContext = !0;\n            renderLanes = mountChildFibers(\n              workInProgress,\n              null,\n              lazyComponent,\n              renderLanes\n            );\n            for (workInProgress.child = renderLanes; renderLanes; )\n              (renderLanes.flags = (renderLanes.flags & -3) | 4096),\n                (renderLanes = renderLanes.sibling);\n          }\n        else {\n          resetHydrationState();\n          if (lazyComponent === init) {\n            workInProgress = bailoutOnAlreadyFinishedWork(\n              current,\n              workInProgress,\n              renderLanes\n            );\n            break a;\n          }\n          reconcileChildren(\n            current,\n            workInProgress,\n            lazyComponent,\n            renderLanes\n          );\n        }\n        workInProgress = workInProgress.child;\n      }\n      return workInProgress;\n    case 26:\n      return (\n        markRef(current, workInProgress),\n        null === current\n          ? (renderLanes = getResource(\n              workInProgress.type,\n              null,\n              workInProgress.pendingProps,\n              null\n            ))\n            ? (workInProgress.memoizedState = renderLanes)\n            : isHydrating ||\n              ((renderLanes = workInProgress.type),\n              (current = workInProgress.pendingProps),\n              (lazyComponent = getOwnerDocumentFromRootContainer(\n                rootInstanceStackCursor.current\n              ).createElement(renderLanes)),\n              (lazyComponent[internalInstanceKey] = workInProgress),\n              (lazyComponent[internalPropsKey] = current),\n              setInitialProperties(lazyComponent, renderLanes, current),\n              markNodeAsHoistable(lazyComponent),\n              (workInProgress.stateNode = lazyComponent))\n          : (workInProgress.memoizedState = getResource(\n              workInProgress.type,\n              current.memoizedProps,\n              workInProgress.pendingProps,\n              current.memoizedState\n            )),\n        null\n      );\n    case 27:\n      return (\n        pushHostContext(workInProgress),\n        null === current &&\n          isHydrating &&\n          ((lazyComponent = workInProgress.stateNode =\n            resolveSingletonInstance(\n              workInProgress.type,\n              workInProgress.pendingProps,\n              rootInstanceStackCursor.current\n            )),\n          (hydrationParentFiber = workInProgress),\n          (rootOrSingletonContext = !0),\n          (init = nextHydratableInstance),\n          isSingletonScope(workInProgress.type)\n            ? ((previousHydratableOnEnteringScopedSingleton = init),\n              (nextHydratableInstance = getNextHydratable(\n                lazyComponent.firstChild\n              )))\n            : (nextHydratableInstance = init)),\n        reconcileChildren(\n          current,\n          workInProgress,\n          workInProgress.pendingProps.children,\n          renderLanes\n        ),\n        markRef(current, workInProgress),\n        null === current && (workInProgress.flags |= 4194304),\n        workInProgress.child\n      );\n    case 5:\n      if (null === current && isHydrating) {\n        if ((init = lazyComponent = nextHydratableInstance))\n          (lazyComponent = canHydrateInstance(\n            lazyComponent,\n            workInProgress.type,\n            workInProgress.pendingProps,\n            rootOrSingletonContext\n          )),\n            null !== lazyComponent\n              ? ((workInProgress.stateNode = lazyComponent),\n                (hydrationParentFiber = workInProgress),\n                (nextHydratableInstance = getNextHydratable(\n                  lazyComponent.firstChild\n                )),\n                (rootOrSingletonContext = !1),\n                (init = !0))\n              : (init = !1);\n        init || throwOnHydrationMismatch(workInProgress);\n      }\n      pushHostContext(workInProgress);\n      init = workInProgress.type;\n      prevState = workInProgress.pendingProps;\n      nextState = null !== current ? current.memoizedProps : null;\n      lazyComponent = prevState.children;\n      shouldSetTextContent(init, prevState)\n        ? (lazyComponent = null)\n        : null !== nextState &&\n          shouldSetTextContent(init, nextState) &&\n          (workInProgress.flags |= 32);\n      null !== workInProgress.memoizedState &&\n        ((init = renderWithHooks(\n          current,\n          workInProgress,\n          TransitionAwareHostComponent,\n          null,\n          null,\n          renderLanes\n        )),\n        (HostTransitionContext._currentValue = init));\n      markRef(current, workInProgress);\n      reconcileChildren(current, workInProgress, lazyComponent, renderLanes);\n      return workInProgress.child;\n    case 6:\n      if (null === current && isHydrating) {\n        if ((current = renderLanes = nextHydratableInstance))\n          (renderLanes = canHydrateTextInstance(\n            renderLanes,\n            workInProgress.pendingProps,\n            rootOrSingletonContext\n          )),\n            null !== renderLanes\n              ? ((workInProgress.stateNode = renderLanes),\n                (hydrationParentFiber = workInProgress),\n                (nextHydratableInstance = null),\n                (current = !0))\n              : (current = !1);\n        current || throwOnHydrationMismatch(workInProgress);\n      }\n      return null;\n    case 13:\n      return updateSuspenseComponent(current, workInProgress, renderLanes);\n    case 4:\n      return (\n        pushHostContainer(\n          workInProgress,\n          workInProgress.stateNode.containerInfo\n        ),\n        (lazyComponent = workInProgress.pendingProps),\n        null === current\n          ? (workInProgress.child = reconcileChildFibers(\n              workInProgress,\n              null,\n              lazyComponent,\n              renderLanes\n            ))\n          : reconcileChildren(\n              current,\n              workInProgress,\n              lazyComponent,\n              renderLanes\n            ),\n        workInProgress.child\n      );\n    case 11:\n      return updateForwardRef(\n        current,\n        workInProgress,\n        workInProgress.type,\n        workInProgress.pendingProps,\n        renderLanes\n      );\n    case 7:\n      return (\n        reconcileChildren(\n          current,\n          workInProgress,\n          workInProgress.pendingProps,\n          renderLanes\n        ),\n        workInProgress.child\n      );\n    case 8:\n      return (\n        reconcileChildren(\n          current,\n          workInProgress,\n          workInProgress.pendingProps.children,\n          renderLanes\n        ),\n        workInProgress.child\n      );\n    case 12:\n      return (\n        reconcileChildren(\n          current,\n          workInProgress,\n          workInProgress.pendingProps.children,\n          renderLanes\n        ),\n        workInProgress.child\n      );\n    case 10:\n      return (\n        (lazyComponent = workInProgress.pendingProps),\n        pushProvider(workInProgress, workInProgress.type, lazyComponent.value),\n        reconcileChildren(\n          current,\n          workInProgress,\n          lazyComponent.children,\n          renderLanes\n        ),\n        workInProgress.child\n      );\n    case 9:\n      return (\n        (init = workInProgress.type._context),\n        (lazyComponent = workInProgress.pendingProps.children),\n        prepareToReadContext(workInProgress),\n        (init = readContext(init)),\n        (lazyComponent = lazyComponent(init)),\n        (workInProgress.flags |= 1),\n        reconcileChildren(current, workInProgress, lazyComponent, renderLanes),\n        workInProgress.child\n      );\n    case 14:\n      return updateMemoComponent(\n        current,\n        workInProgress,\n        workInProgress.type,\n        workInProgress.pendingProps,\n        renderLanes\n      );\n    case 15:\n      return updateSimpleMemoComponent(\n        current,\n        workInProgress,\n        workInProgress.type,\n        workInProgress.pendingProps,\n        renderLanes\n      );\n    case 19:\n      return updateSuspenseListComponent(current, workInProgress, renderLanes);\n    case 31:\n      return (\n        (lazyComponent = workInProgress.pendingProps),\n        (renderLanes = workInProgress.mode),\n        (lazyComponent = {\n          mode: lazyComponent.mode,\n          children: lazyComponent.children\n        }),\n        null === current\n          ? ((renderLanes = mountWorkInProgressOffscreenFiber(\n              lazyComponent,\n              renderLanes\n            )),\n            (renderLanes.ref = workInProgress.ref),\n            (workInProgress.child = renderLanes),\n            (renderLanes.return = workInProgress),\n            (workInProgress = renderLanes))\n          : ((renderLanes = createWorkInProgress(current.child, lazyComponent)),\n            (renderLanes.ref = workInProgress.ref),\n            (workInProgress.child = renderLanes),\n            (renderLanes.return = workInProgress),\n            (workInProgress = renderLanes)),\n        workInProgress\n      );\n    case 22:\n      return updateOffscreenComponent(current, workInProgress, renderLanes);\n    case 24:\n      return (\n        prepareToReadContext(workInProgress),\n        (lazyComponent = readContext(CacheContext)),\n        null === current\n          ? ((init = peekCacheFromPool()),\n            null === init &&\n              ((init = workInProgressRoot),\n              (prevState = createCache()),\n              (init.pooledCache = prevState),\n              prevState.refCount++,\n              null !== prevState && (init.pooledCacheLanes |= renderLanes),\n              (init = prevState)),\n            (workInProgress.memoizedState = {\n              parent: lazyComponent,\n              cache: init\n            }),\n            initializeUpdateQueue(workInProgress),\n            pushProvider(workInProgress, CacheContext, init))\n          : (0 !== (current.lanes & renderLanes) &&\n              (cloneUpdateQueue(current, workInProgress),\n              processUpdateQueue(workInProgress, null, null, renderLanes),\n              suspendIfUpdateReadFromEntangledAsyncAction()),\n            (init = current.memoizedState),\n            (prevState = workInProgress.memoizedState),\n            init.parent !== lazyComponent\n              ? ((init = { parent: lazyComponent, cache: lazyComponent }),\n                (workInProgress.memoizedState = init),\n                0 === workInProgress.lanes &&\n                  (workInProgress.memoizedState =\n                    workInProgress.updateQueue.baseState =\n                      init),\n                pushProvider(workInProgress, CacheContext, lazyComponent))\n              : ((lazyComponent = prevState.cache),\n                pushProvider(workInProgress, CacheContext, lazyComponent),\n                lazyComponent !== init.cache &&\n                  propagateContextChanges(\n                    workInProgress,\n                    [CacheContext],\n                    renderLanes,\n                    !0\n                  ))),\n        reconcileChildren(\n          current,\n          workInProgress,\n          workInProgress.pendingProps.children,\n          renderLanes\n        ),\n        workInProgress.child\n      );\n    case 29:\n      throw workInProgress.pendingProps;\n  }\n  throw Error(formatProdErrorMessage(156, workInProgress.tag));\n}\nfunction markUpdate(workInProgress) {\n  workInProgress.flags |= 4;\n}\nfunction preloadResourceAndSuspendIfNeeded(workInProgress, resource) {\n  if (\"stylesheet\" !== resource.type || 0 !== (resource.state.loading & 4))\n    workInProgress.flags &= -16777217;\n  else if (((workInProgress.flags |= 16777216), !preloadResource(resource))) {\n    resource = suspenseHandlerStackCursor.current;\n    if (\n      null !== resource &&\n      ((workInProgressRootRenderLanes & 4194048) ===\n      workInProgressRootRenderLanes\n        ? null !== shellBoundary\n        : ((workInProgressRootRenderLanes & 62914560) !==\n            workInProgressRootRenderLanes &&\n            0 === (workInProgressRootRenderLanes & 536870912)) ||\n          resource !== shellBoundary)\n    )\n      throw (\n        ((suspendedThenable = noopSuspenseyCommitThenable),\n        SuspenseyCommitException)\n      );\n    workInProgress.flags |= 8192;\n  }\n}\nfunction scheduleRetryEffect(workInProgress, retryQueue) {\n  null !== retryQueue && (workInProgress.flags |= 4);\n  workInProgress.flags & 16384 &&\n    ((retryQueue =\n      22 !== workInProgress.tag ? claimNextRetryLane() : 536870912),\n    (workInProgress.lanes |= retryQueue),\n    (workInProgressSuspendedRetryLanes |= retryQueue));\n}\nfunction cutOffTailIfNeeded(renderState, hasRenderedATailFallback) {\n  if (!isHydrating)\n    switch (renderState.tailMode) {\n      case \"hidden\":\n        hasRenderedATailFallback = renderState.tail;\n        for (var lastTailNode = null; null !== hasRenderedATailFallback; )\n          null !== hasRenderedATailFallback.alternate &&\n            (lastTailNode = hasRenderedATailFallback),\n            (hasRenderedATailFallback = hasRenderedATailFallback.sibling);\n        null === lastTailNode\n          ? (renderState.tail = null)\n          : (lastTailNode.sibling = null);\n        break;\n      case \"collapsed\":\n        lastTailNode = renderState.tail;\n        for (var lastTailNode$113 = null; null !== lastTailNode; )\n          null !== lastTailNode.alternate && (lastTailNode$113 = lastTailNode),\n            (lastTailNode = lastTailNode.sibling);\n        null === lastTailNode$113\n          ? hasRenderedATailFallback || null === renderState.tail\n            ? (renderState.tail = null)\n            : (renderState.tail.sibling = null)\n          : (lastTailNode$113.sibling = null);\n    }\n}\nfunction bubbleProperties(completedWork) {\n  var didBailout =\n      null !== completedWork.alternate &&\n      completedWork.alternate.child === completedWork.child,\n    newChildLanes = 0,\n    subtreeFlags = 0;\n  if (didBailout)\n    for (var child$114 = completedWork.child; null !== child$114; )\n      (newChildLanes |= child$114.lanes | child$114.childLanes),\n        (subtreeFlags |= child$114.subtreeFlags & 65011712),\n        (subtreeFlags |= child$114.flags & 65011712),\n        (child$114.return = completedWork),\n        (child$114 = child$114.sibling);\n  else\n    for (child$114 = completedWork.child; null !== child$114; )\n      (newChildLanes |= child$114.lanes | child$114.childLanes),\n        (subtreeFlags |= child$114.subtreeFlags),\n        (subtreeFlags |= child$114.flags),\n        (child$114.return = completedWork),\n        (child$114 = child$114.sibling);\n  completedWork.subtreeFlags |= subtreeFlags;\n  completedWork.childLanes = newChildLanes;\n  return didBailout;\n}\nfunction completeWork(current, workInProgress, renderLanes) {\n  var newProps = workInProgress.pendingProps;\n  popTreeContext(workInProgress);\n  switch (workInProgress.tag) {\n    case 31:\n    case 16:\n    case 15:\n    case 0:\n    case 11:\n    case 7:\n    case 8:\n    case 12:\n    case 9:\n    case 14:\n      return bubbleProperties(workInProgress), null;\n    case 1:\n      return bubbleProperties(workInProgress), null;\n    case 3:\n      renderLanes = workInProgress.stateNode;\n      newProps = null;\n      null !== current && (newProps = current.memoizedState.cache);\n      workInProgress.memoizedState.cache !== newProps &&\n        (workInProgress.flags |= 2048);\n      popProvider(CacheContext);\n      popHostContainer();\n      renderLanes.pendingContext &&\n        ((renderLanes.context = renderLanes.pendingContext),\n        (renderLanes.pendingContext = null));\n      if (null === current || null === current.child)\n        popHydrationState(workInProgress)\n          ? markUpdate(workInProgress)\n          : null === current ||\n            (current.memoizedState.isDehydrated &&\n              0 === (workInProgress.flags & 256)) ||\n            ((workInProgress.flags |= 1024),\n            upgradeHydrationErrorsToRecoverable());\n      bubbleProperties(workInProgress);\n      return null;\n    case 26:\n      return (\n        (renderLanes = workInProgress.memoizedState),\n        null === current\n          ? (markUpdate(workInProgress),\n            null !== renderLanes\n              ? (bubbleProperties(workInProgress),\n                preloadResourceAndSuspendIfNeeded(workInProgress, renderLanes))\n              : (bubbleProperties(workInProgress),\n                (workInProgress.flags &= -16777217)))\n          : renderLanes\n            ? renderLanes !== current.memoizedState\n              ? (markUpdate(workInProgress),\n                bubbleProperties(workInProgress),\n                preloadResourceAndSuspendIfNeeded(workInProgress, renderLanes))\n              : (bubbleProperties(workInProgress),\n                (workInProgress.flags &= -16777217))\n            : (current.memoizedProps !== newProps && markUpdate(workInProgress),\n              bubbleProperties(workInProgress),\n              (workInProgress.flags &= -16777217)),\n        null\n      );\n    case 27:\n      popHostContext(workInProgress);\n      renderLanes = rootInstanceStackCursor.current;\n      var type = workInProgress.type;\n      if (null !== current && null != workInProgress.stateNode)\n        current.memoizedProps !== newProps && markUpdate(workInProgress);\n      else {\n        if (!newProps) {\n          if (null === workInProgress.stateNode)\n            throw Error(formatProdErrorMessage(166));\n          bubbleProperties(workInProgress);\n          return null;\n        }\n        current = contextStackCursor.current;\n        popHydrationState(workInProgress)\n          ? prepareToHydrateHostInstance(workInProgress, current)\n          : ((current = resolveSingletonInstance(type, newProps, renderLanes)),\n            (workInProgress.stateNode = current),\n            markUpdate(workInProgress));\n      }\n      bubbleProperties(workInProgress);\n      return null;\n    case 5:\n      popHostContext(workInProgress);\n      renderLanes = workInProgress.type;\n      if (null !== current && null != workInProgress.stateNode)\n        current.memoizedProps !== newProps && markUpdate(workInProgress);\n      else {\n        if (!newProps) {\n          if (null === workInProgress.stateNode)\n            throw Error(formatProdErrorMessage(166));\n          bubbleProperties(workInProgress);\n          return null;\n        }\n        current = contextStackCursor.current;\n        if (popHydrationState(workInProgress))\n          prepareToHydrateHostInstance(workInProgress, current);\n        else {\n          type = getOwnerDocumentFromRootContainer(\n            rootInstanceStackCursor.current\n          );\n          switch (current) {\n            case 1:\n              current = type.createElementNS(\n                \"http://www.w3.org/2000/svg\",\n                renderLanes\n              );\n              break;\n            case 2:\n              current = type.createElementNS(\n                \"http://www.w3.org/1998/Math/MathML\",\n                renderLanes\n              );\n              break;\n            default:\n              switch (renderLanes) {\n                case \"svg\":\n                  current = type.createElementNS(\n                    \"http://www.w3.org/2000/svg\",\n                    renderLanes\n                  );\n                  break;\n                case \"math\":\n                  current = type.createElementNS(\n                    \"http://www.w3.org/1998/Math/MathML\",\n                    renderLanes\n                  );\n                  break;\n                case \"script\":\n                  current = type.createElement(\"div\");\n                  current.innerHTML = \"<script>\\x3c/script>\";\n                  current = current.removeChild(current.firstChild);\n                  break;\n                case \"select\":\n                  current =\n                    \"string\" === typeof newProps.is\n                      ? type.createElement(\"select\", { is: newProps.is })\n                      : type.createElement(\"select\");\n                  newProps.multiple\n                    ? (current.multiple = !0)\n                    : newProps.size && (current.size = newProps.size);\n                  break;\n                default:\n                  current =\n                    \"string\" === typeof newProps.is\n                      ? type.createElement(renderLanes, { is: newProps.is })\n                      : type.createElement(renderLanes);\n              }\n          }\n          current[internalInstanceKey] = workInProgress;\n          current[internalPropsKey] = newProps;\n          a: for (type = workInProgress.child; null !== type; ) {\n            if (5 === type.tag || 6 === type.tag)\n              current.appendChild(type.stateNode);\n            else if (4 !== type.tag && 27 !== type.tag && null !== type.child) {\n              type.child.return = type;\n              type = type.child;\n              continue;\n            }\n            if (type === workInProgress) break a;\n            for (; null === type.sibling; ) {\n              if (null === type.return || type.return === workInProgress)\n                break a;\n              type = type.return;\n            }\n            type.sibling.return = type.return;\n            type = type.sibling;\n          }\n          workInProgress.stateNode = current;\n          a: switch (\n            (setInitialProperties(current, renderLanes, newProps), renderLanes)\n          ) {\n            case \"button\":\n            case \"input\":\n            case \"select\":\n            case \"textarea\":\n              current = !!newProps.autoFocus;\n              break a;\n            case \"img\":\n              current = !0;\n              break a;\n            default:\n              current = !1;\n          }\n          current && markUpdate(workInProgress);\n        }\n      }\n      bubbleProperties(workInProgress);\n      workInProgress.flags &= -16777217;\n      return null;\n    case 6:\n      if (current && null != workInProgress.stateNode)\n        current.memoizedProps !== newProps && markUpdate(workInProgress);\n      else {\n        if (\"string\" !== typeof newProps && null === workInProgress.stateNode)\n          throw Error(formatProdErrorMessage(166));\n        current = rootInstanceStackCursor.current;\n        if (popHydrationState(workInProgress)) {\n          current = workInProgress.stateNode;\n          renderLanes = workInProgress.memoizedProps;\n          newProps = null;\n          type = hydrationParentFiber;\n          if (null !== type)\n            switch (type.tag) {\n              case 27:\n              case 5:\n                newProps = type.memoizedProps;\n            }\n          current[internalInstanceKey] = workInProgress;\n          current =\n            current.nodeValue === renderLanes ||\n            (null !== newProps && !0 === newProps.suppressHydrationWarning) ||\n            checkForUnmatchedText(current.nodeValue, renderLanes)\n              ? !0\n              : !1;\n          current || throwOnHydrationMismatch(workInProgress);\n        } else\n          (current =\n            getOwnerDocumentFromRootContainer(current).createTextNode(\n              newProps\n            )),\n            (current[internalInstanceKey] = workInProgress),\n            (workInProgress.stateNode = current);\n      }\n      bubbleProperties(workInProgress);\n      return null;\n    case 13:\n      newProps = workInProgress.memoizedState;\n      if (\n        null === current ||\n        (null !== current.memoizedState &&\n          null !== current.memoizedState.dehydrated)\n      ) {\n        type = popHydrationState(workInProgress);\n        if (null !== newProps && null !== newProps.dehydrated) {\n          if (null === current) {\n            if (!type) throw Error(formatProdErrorMessage(318));\n            type = workInProgress.memoizedState;\n            type = null !== type ? type.dehydrated : null;\n            if (!type) throw Error(formatProdErrorMessage(317));\n            type[internalInstanceKey] = workInProgress;\n          } else\n            resetHydrationState(),\n              0 === (workInProgress.flags & 128) &&\n                (workInProgress.memoizedState = null),\n              (workInProgress.flags |= 4);\n          bubbleProperties(workInProgress);\n          type = !1;\n        } else\n          (type = upgradeHydrationErrorsToRecoverable()),\n            null !== current &&\n              null !== current.memoizedState &&\n              (current.memoizedState.hydrationErrors = type),\n            (type = !0);\n        if (!type) {\n          if (workInProgress.flags & 256)\n            return popSuspenseHandler(workInProgress), workInProgress;\n          popSuspenseHandler(workInProgress);\n          return null;\n        }\n      }\n      popSuspenseHandler(workInProgress);\n      if (0 !== (workInProgress.flags & 128))\n        return (workInProgress.lanes = renderLanes), workInProgress;\n      renderLanes = null !== newProps;\n      current = null !== current && null !== current.memoizedState;\n      if (renderLanes) {\n        newProps = workInProgress.child;\n        type = null;\n        null !== newProps.alternate &&\n          null !== newProps.alternate.memoizedState &&\n          null !== newProps.alternate.memoizedState.cachePool &&\n          (type = newProps.alternate.memoizedState.cachePool.pool);\n        var cache$127 = null;\n        null !== newProps.memoizedState &&\n          null !== newProps.memoizedState.cachePool &&\n          (cache$127 = newProps.memoizedState.cachePool.pool);\n        cache$127 !== type && (newProps.flags |= 2048);\n      }\n      renderLanes !== current &&\n        renderLanes &&\n        (workInProgress.child.flags |= 8192);\n      scheduleRetryEffect(workInProgress, workInProgress.updateQueue);\n      bubbleProperties(workInProgress);\n      return null;\n    case 4:\n      return (\n        popHostContainer(),\n        null === current &&\n          listenToAllSupportedEvents(workInProgress.stateNode.containerInfo),\n        bubbleProperties(workInProgress),\n        null\n      );\n    case 10:\n      return (\n        popProvider(workInProgress.type), bubbleProperties(workInProgress), null\n      );\n    case 19:\n      pop(suspenseStackCursor);\n      type = workInProgress.memoizedState;\n      if (null === type) return bubbleProperties(workInProgress), null;\n      newProps = 0 !== (workInProgress.flags & 128);\n      cache$127 = type.rendering;\n      if (null === cache$127)\n        if (newProps) cutOffTailIfNeeded(type, !1);\n        else {\n          if (\n            0 !== workInProgressRootExitStatus ||\n            (null !== current && 0 !== (current.flags & 128))\n          )\n            for (current = workInProgress.child; null !== current; ) {\n              cache$127 = findFirstSuspended(current);\n              if (null !== cache$127) {\n                workInProgress.flags |= 128;\n                cutOffTailIfNeeded(type, !1);\n                current = cache$127.updateQueue;\n                workInProgress.updateQueue = current;\n                scheduleRetryEffect(workInProgress, current);\n                workInProgress.subtreeFlags = 0;\n                current = renderLanes;\n                for (renderLanes = workInProgress.child; null !== renderLanes; )\n                  resetWorkInProgress(renderLanes, current),\n                    (renderLanes = renderLanes.sibling);\n                push(\n                  suspenseStackCursor,\n                  (suspenseStackCursor.current & 1) | 2\n                );\n                return workInProgress.child;\n              }\n              current = current.sibling;\n            }\n          null !== type.tail &&\n            now() > workInProgressRootRenderTargetTime &&\n            ((workInProgress.flags |= 128),\n            (newProps = !0),\n            cutOffTailIfNeeded(type, !1),\n            (workInProgress.lanes = 4194304));\n        }\n      else {\n        if (!newProps)\n          if (((current = findFirstSuspended(cache$127)), null !== current)) {\n            if (\n              ((workInProgress.flags |= 128),\n              (newProps = !0),\n              (current = current.updateQueue),\n              (workInProgress.updateQueue = current),\n              scheduleRetryEffect(workInProgress, current),\n              cutOffTailIfNeeded(type, !0),\n              null === type.tail &&\n                \"hidden\" === type.tailMode &&\n                !cache$127.alternate &&\n                !isHydrating)\n            )\n              return bubbleProperties(workInProgress), null;\n          } else\n            2 * now() - type.renderingStartTime >\n              workInProgressRootRenderTargetTime &&\n              536870912 !== renderLanes &&\n              ((workInProgress.flags |= 128),\n              (newProps = !0),\n              cutOffTailIfNeeded(type, !1),\n              (workInProgress.lanes = 4194304));\n        type.isBackwards\n          ? ((cache$127.sibling = workInProgress.child),\n            (workInProgress.child = cache$127))\n          : ((current = type.last),\n            null !== current\n              ? (current.sibling = cache$127)\n              : (workInProgress.child = cache$127),\n            (type.last = cache$127));\n      }\n      if (null !== type.tail)\n        return (\n          (workInProgress = type.tail),\n          (type.rendering = workInProgress),\n          (type.tail = workInProgress.sibling),\n          (type.renderingStartTime = now()),\n          (workInProgress.sibling = null),\n          (current = suspenseStackCursor.current),\n          push(suspenseStackCursor, newProps ? (current & 1) | 2 : current & 1),\n          workInProgress\n        );\n      bubbleProperties(workInProgress);\n      return null;\n    case 22:\n    case 23:\n      return (\n        popSuspenseHandler(workInProgress),\n        popHiddenContext(),\n        (newProps = null !== workInProgress.memoizedState),\n        null !== current\n          ? (null !== current.memoizedState) !== newProps &&\n            (workInProgress.flags |= 8192)\n          : newProps && (workInProgress.flags |= 8192),\n        newProps\n          ? 0 !== (renderLanes & 536870912) &&\n            0 === (workInProgress.flags & 128) &&\n            (bubbleProperties(workInProgress),\n            workInProgress.subtreeFlags & 6 && (workInProgress.flags |= 8192))\n          : bubbleProperties(workInProgress),\n        (renderLanes = workInProgress.updateQueue),\n        null !== renderLanes &&\n          scheduleRetryEffect(workInProgress, renderLanes.retryQueue),\n        (renderLanes = null),\n        null !== current &&\n          null !== current.memoizedState &&\n          null !== current.memoizedState.cachePool &&\n          (renderLanes = current.memoizedState.cachePool.pool),\n        (newProps = null),\n        null !== workInProgress.memoizedState &&\n          null !== workInProgress.memoizedState.cachePool &&\n          (newProps = workInProgress.memoizedState.cachePool.pool),\n        newProps !== renderLanes && (workInProgress.flags |= 2048),\n        null !== current && pop(resumedCache),\n        null\n      );\n    case 24:\n      return (\n        (renderLanes = null),\n        null !== current && (renderLanes = current.memoizedState.cache),\n        workInProgress.memoizedState.cache !== renderLanes &&\n          (workInProgress.flags |= 2048),\n        popProvider(CacheContext),\n        bubbleProperties(workInProgress),\n        null\n      );\n    case 25:\n      return null;\n    case 30:\n      return null;\n  }\n  throw Error(formatProdErrorMessage(156, workInProgress.tag));\n}\nfunction unwindWork(current, workInProgress) {\n  popTreeContext(workInProgress);\n  switch (workInProgress.tag) {\n    case 1:\n      return (\n        (current = workInProgress.flags),\n        current & 65536\n          ? ((workInProgress.flags = (current & -65537) | 128), workInProgress)\n          : null\n      );\n    case 3:\n      return (\n        popProvider(CacheContext),\n        popHostContainer(),\n        (current = workInProgress.flags),\n        0 !== (current & 65536) && 0 === (current & 128)\n          ? ((workInProgress.flags = (current & -65537) | 128), workInProgress)\n          : null\n      );\n    case 26:\n    case 27:\n    case 5:\n      return popHostContext(workInProgress), null;\n    case 13:\n      popSuspenseHandler(workInProgress);\n      current = workInProgress.memoizedState;\n      if (null !== current && null !== current.dehydrated) {\n        if (null === workInProgress.alternate)\n          throw Error(formatProdErrorMessage(340));\n        resetHydrationState();\n      }\n      current = workInProgress.flags;\n      return current & 65536\n        ? ((workInProgress.flags = (current & -65537) | 128), workInProgress)\n        : null;\n    case 19:\n      return pop(suspenseStackCursor), null;\n    case 4:\n      return popHostContainer(), null;\n    case 10:\n      return popProvider(workInProgress.type), null;\n    case 22:\n    case 23:\n      return (\n        popSuspenseHandler(workInProgress),\n        popHiddenContext(),\n        null !== current && pop(resumedCache),\n        (current = workInProgress.flags),\n        current & 65536\n          ? ((workInProgress.flags = (current & -65537) | 128), workInProgress)\n          : null\n      );\n    case 24:\n      return popProvider(CacheContext), null;\n    case 25:\n      return null;\n    default:\n      return null;\n  }\n}\nfunction unwindInterruptedWork(current, interruptedWork) {\n  popTreeContext(interruptedWork);\n  switch (interruptedWork.tag) {\n    case 3:\n      popProvider(CacheContext);\n      popHostContainer();\n      break;\n    case 26:\n    case 27:\n    case 5:\n      popHostContext(interruptedWork);\n      break;\n    case 4:\n      popHostContainer();\n      break;\n    case 13:\n      popSuspenseHandler(interruptedWork);\n      break;\n    case 19:\n      pop(suspenseStackCursor);\n      break;\n    case 10:\n      popProvider(interruptedWork.type);\n      break;\n    case 22:\n    case 23:\n      popSuspenseHandler(interruptedWork);\n      popHiddenContext();\n      null !== current && pop(resumedCache);\n      break;\n    case 24:\n      popProvider(CacheContext);\n  }\n}\nfunction commitHookEffectListMount(flags, finishedWork) {\n  try {\n    var updateQueue = finishedWork.updateQueue,\n      lastEffect = null !== updateQueue ? updateQueue.lastEffect : null;\n    if (null !== lastEffect) {\n      var firstEffect = lastEffect.next;\n      updateQueue = firstEffect;\n      do {\n        if ((updateQueue.tag & flags) === flags) {\n          lastEffect = void 0;\n          var create = updateQueue.create,\n            inst = updateQueue.inst;\n          lastEffect = create();\n          inst.destroy = lastEffect;\n        }\n        updateQueue = updateQueue.next;\n      } while (updateQueue !== firstEffect);\n    }\n  } catch (error) {\n    captureCommitPhaseError(finishedWork, finishedWork.return, error);\n  }\n}\nfunction commitHookEffectListUnmount(\n  flags,\n  finishedWork,\n  nearestMountedAncestor$jscomp$0\n) {\n  try {\n    var updateQueue = finishedWork.updateQueue,\n      lastEffect = null !== updateQueue ? updateQueue.lastEffect : null;\n    if (null !== lastEffect) {\n      var firstEffect = lastEffect.next;\n      updateQueue = firstEffect;\n      do {\n        if ((updateQueue.tag & flags) === flags) {\n          var inst = updateQueue.inst,\n            destroy = inst.destroy;\n          if (void 0 !== destroy) {\n            inst.destroy = void 0;\n            lastEffect = finishedWork;\n            var nearestMountedAncestor = nearestMountedAncestor$jscomp$0,\n              destroy_ = destroy;\n            try {\n              destroy_();\n            } catch (error) {\n              captureCommitPhaseError(\n                lastEffect,\n                nearestMountedAncestor,\n                error\n              );\n            }\n          }\n        }\n        updateQueue = updateQueue.next;\n      } while (updateQueue !== firstEffect);\n    }\n  } catch (error) {\n    captureCommitPhaseError(finishedWork, finishedWork.return, error);\n  }\n}\nfunction commitClassCallbacks(finishedWork) {\n  var updateQueue = finishedWork.updateQueue;\n  if (null !== updateQueue) {\n    var instance = finishedWork.stateNode;\n    try {\n      commitCallbacks(updateQueue, instance);\n    } catch (error) {\n      captureCommitPhaseError(finishedWork, finishedWork.return, error);\n    }\n  }\n}\nfunction safelyCallComponentWillUnmount(\n  current,\n  nearestMountedAncestor,\n  instance\n) {\n  instance.props = resolveClassComponentProps(\n    current.type,\n    current.memoizedProps\n  );\n  instance.state = current.memoizedState;\n  try {\n    instance.componentWillUnmount();\n  } catch (error) {\n    captureCommitPhaseError(current, nearestMountedAncestor, error);\n  }\n}\nfunction safelyAttachRef(current, nearestMountedAncestor) {\n  try {\n    var ref = current.ref;\n    if (null !== ref) {\n      switch (current.tag) {\n        case 26:\n        case 27:\n        case 5:\n          var instanceToUse = current.stateNode;\n          break;\n        case 30:\n          instanceToUse = current.stateNode;\n          break;\n        default:\n          instanceToUse = current.stateNode;\n      }\n      \"function\" === typeof ref\n        ? (current.refCleanup = ref(instanceToUse))\n        : (ref.current = instanceToUse);\n    }\n  } catch (error) {\n    captureCommitPhaseError(current, nearestMountedAncestor, error);\n  }\n}\nfunction safelyDetachRef(current, nearestMountedAncestor) {\n  var ref = current.ref,\n    refCleanup = current.refCleanup;\n  if (null !== ref)\n    if (\"function\" === typeof refCleanup)\n      try {\n        refCleanup();\n      } catch (error) {\n        captureCommitPhaseError(current, nearestMountedAncestor, error);\n      } finally {\n        (current.refCleanup = null),\n          (current = current.alternate),\n          null != current && (current.refCleanup = null);\n      }\n    else if (\"function\" === typeof ref)\n      try {\n        ref(null);\n      } catch (error$143) {\n        captureCommitPhaseError(current, nearestMountedAncestor, error$143);\n      }\n    else ref.current = null;\n}\nfunction commitHostMount(finishedWork) {\n  var type = finishedWork.type,\n    props = finishedWork.memoizedProps,\n    instance = finishedWork.stateNode;\n  try {\n    a: switch (type) {\n      case \"button\":\n      case \"input\":\n      case \"select\":\n      case \"textarea\":\n        props.autoFocus && instance.focus();\n        break a;\n      case \"img\":\n        props.src\n          ? (instance.src = props.src)\n          : props.srcSet && (instance.srcset = props.srcSet);\n    }\n  } catch (error) {\n    captureCommitPhaseError(finishedWork, finishedWork.return, error);\n  }\n}\nfunction commitHostUpdate(finishedWork, newProps, oldProps) {\n  try {\n    var domElement = finishedWork.stateNode;\n    updateProperties(domElement, finishedWork.type, oldProps, newProps);\n    domElement[internalPropsKey] = newProps;\n  } catch (error) {\n    captureCommitPhaseError(finishedWork, finishedWork.return, error);\n  }\n}\nfunction isHostParent(fiber) {\n  return (\n    5 === fiber.tag ||\n    3 === fiber.tag ||\n    26 === fiber.tag ||\n    (27 === fiber.tag && isSingletonScope(fiber.type)) ||\n    4 === fiber.tag\n  );\n}\nfunction getHostSibling(fiber) {\n  a: for (;;) {\n    for (; null === fiber.sibling; ) {\n      if (null === fiber.return || isHostParent(fiber.return)) return null;\n      fiber = fiber.return;\n    }\n    fiber.sibling.return = fiber.return;\n    for (\n      fiber = fiber.sibling;\n      5 !== fiber.tag && 6 !== fiber.tag && 18 !== fiber.tag;\n\n    ) {\n      if (27 === fiber.tag && isSingletonScope(fiber.type)) continue a;\n      if (fiber.flags & 2) continue a;\n      if (null === fiber.child || 4 === fiber.tag) continue a;\n      else (fiber.child.return = fiber), (fiber = fiber.child);\n    }\n    if (!(fiber.flags & 2)) return fiber.stateNode;\n  }\n}\nfunction insertOrAppendPlacementNodeIntoContainer(node, before, parent) {\n  var tag = node.tag;\n  if (5 === tag || 6 === tag)\n    (node = node.stateNode),\n      before\n        ? (9 === parent.nodeType\n            ? parent.body\n            : \"HTML\" === parent.nodeName\n              ? parent.ownerDocument.body\n              : parent\n          ).insertBefore(node, before)\n        : ((before =\n            9 === parent.nodeType\n              ? parent.body\n              : \"HTML\" === parent.nodeName\n                ? parent.ownerDocument.body\n                : parent),\n          before.appendChild(node),\n          (parent = parent._reactRootContainer),\n          (null !== parent && void 0 !== parent) ||\n            null !== before.onclick ||\n            (before.onclick = noop$1));\n  else if (\n    4 !== tag &&\n    (27 === tag &&\n      isSingletonScope(node.type) &&\n      ((parent = node.stateNode), (before = null)),\n    (node = node.child),\n    null !== node)\n  )\n    for (\n      insertOrAppendPlacementNodeIntoContainer(node, before, parent),\n        node = node.sibling;\n      null !== node;\n\n    )\n      insertOrAppendPlacementNodeIntoContainer(node, before, parent),\n        (node = node.sibling);\n}\nfunction insertOrAppendPlacementNode(node, before, parent) {\n  var tag = node.tag;\n  if (5 === tag || 6 === tag)\n    (node = node.stateNode),\n      before ? parent.insertBefore(node, before) : parent.appendChild(node);\n  else if (\n    4 !== tag &&\n    (27 === tag && isSingletonScope(node.type) && (parent = node.stateNode),\n    (node = node.child),\n    null !== node)\n  )\n    for (\n      insertOrAppendPlacementNode(node, before, parent), node = node.sibling;\n      null !== node;\n\n    )\n      insertOrAppendPlacementNode(node, before, parent), (node = node.sibling);\n}\nfunction commitHostSingletonAcquisition(finishedWork) {\n  var singleton = finishedWork.stateNode,\n    props = finishedWork.memoizedProps;\n  try {\n    for (\n      var type = finishedWork.type, attributes = singleton.attributes;\n      attributes.length;\n\n    )\n      singleton.removeAttributeNode(attributes[0]);\n    setInitialProperties(singleton, type, props);\n    singleton[internalInstanceKey] = finishedWork;\n    singleton[internalPropsKey] = props;\n  } catch (error) {\n    captureCommitPhaseError(finishedWork, finishedWork.return, error);\n  }\n}\nvar offscreenSubtreeIsHidden = !1,\n  offscreenSubtreeWasHidden = !1,\n  needsFormReset = !1,\n  PossiblyWeakSet = \"function\" === typeof WeakSet ? WeakSet : Set,\n  nextEffect = null;\nfunction commitBeforeMutationEffects(root, firstChild) {\n  root = root.containerInfo;\n  eventsEnabled = _enabled;\n  root = getActiveElementDeep(root);\n  if (hasSelectionCapabilities(root)) {\n    if (\"selectionStart\" in root)\n      var JSCompiler_temp = {\n        start: root.selectionStart,\n        end: root.selectionEnd\n      };\n    else\n      a: {\n        JSCompiler_temp =\n          ((JSCompiler_temp = root.ownerDocument) &&\n            JSCompiler_temp.defaultView) ||\n          window;\n        var selection =\n          JSCompiler_temp.getSelection && JSCompiler_temp.getSelection();\n        if (selection && 0 !== selection.rangeCount) {\n          JSCompiler_temp = selection.anchorNode;\n          var anchorOffset = selection.anchorOffset,\n            focusNode = selection.focusNode;\n          selection = selection.focusOffset;\n          try {\n            JSCompiler_temp.nodeType, focusNode.nodeType;\n          } catch (e$20) {\n            JSCompiler_temp = null;\n            break a;\n          }\n          var length = 0,\n            start = -1,\n            end = -1,\n            indexWithinAnchor = 0,\n            indexWithinFocus = 0,\n            node = root,\n            parentNode = null;\n          b: for (;;) {\n            for (var next; ; ) {\n              node !== JSCompiler_temp ||\n                (0 !== anchorOffset && 3 !== node.nodeType) ||\n                (start = length + anchorOffset);\n              node !== focusNode ||\n                (0 !== selection && 3 !== node.nodeType) ||\n                (end = length + selection);\n              3 === node.nodeType && (length += node.nodeValue.length);\n              if (null === (next = node.firstChild)) break;\n              parentNode = node;\n              node = next;\n            }\n            for (;;) {\n              if (node === root) break b;\n              parentNode === JSCompiler_temp &&\n                ++indexWithinAnchor === anchorOffset &&\n                (start = length);\n              parentNode === focusNode &&\n                ++indexWithinFocus === selection &&\n                (end = length);\n              if (null !== (next = node.nextSibling)) break;\n              node = parentNode;\n              parentNode = node.parentNode;\n            }\n            node = next;\n          }\n          JSCompiler_temp =\n            -1 === start || -1 === end ? null : { start: start, end: end };\n        } else JSCompiler_temp = null;\n      }\n    JSCompiler_temp = JSCompiler_temp || { start: 0, end: 0 };\n  } else JSCompiler_temp = null;\n  selectionInformation = { focusedElem: root, selectionRange: JSCompiler_temp };\n  _enabled = !1;\n  for (nextEffect = firstChild; null !== nextEffect; )\n    if (\n      ((firstChild = nextEffect),\n      (root = firstChild.child),\n      0 !== (firstChild.subtreeFlags & 1024) && null !== root)\n    )\n      (root.return = firstChild), (nextEffect = root);\n    else\n      for (; null !== nextEffect; ) {\n        firstChild = nextEffect;\n        focusNode = firstChild.alternate;\n        root = firstChild.flags;\n        switch (firstChild.tag) {\n          case 0:\n            break;\n          case 11:\n          case 15:\n            break;\n          case 1:\n            if (0 !== (root & 1024) && null !== focusNode) {\n              root = void 0;\n              JSCompiler_temp = firstChild;\n              anchorOffset = focusNode.memoizedProps;\n              focusNode = focusNode.memoizedState;\n              selection = JSCompiler_temp.stateNode;\n              try {\n                var resolvedPrevProps = resolveClassComponentProps(\n                  JSCompiler_temp.type,\n                  anchorOffset,\n                  JSCompiler_temp.elementType === JSCompiler_temp.type\n                );\n                root = selection.getSnapshotBeforeUpdate(\n                  resolvedPrevProps,\n                  focusNode\n                );\n                selection.__reactInternalSnapshotBeforeUpdate = root;\n              } catch (error) {\n                captureCommitPhaseError(\n                  JSCompiler_temp,\n                  JSCompiler_temp.return,\n                  error\n                );\n              }\n            }\n            break;\n          case 3:\n            if (0 !== (root & 1024))\n              if (\n                ((root = firstChild.stateNode.containerInfo),\n                (JSCompiler_temp = root.nodeType),\n                9 === JSCompiler_temp)\n              )\n                clearContainerSparingly(root);\n              else if (1 === JSCompiler_temp)\n                switch (root.nodeName) {\n                  case \"HEAD\":\n                  case \"HTML\":\n                  case \"BODY\":\n                    clearContainerSparingly(root);\n                    break;\n                  default:\n                    root.textContent = \"\";\n                }\n            break;\n          case 5:\n          case 26:\n          case 27:\n          case 6:\n          case 4:\n          case 17:\n            break;\n          default:\n            if (0 !== (root & 1024)) throw Error(formatProdErrorMessage(163));\n        }\n        root = firstChild.sibling;\n        if (null !== root) {\n          root.return = firstChild.return;\n          nextEffect = root;\n          break;\n        }\n        nextEffect = firstChild.return;\n      }\n}\nfunction commitLayoutEffectOnFiber(finishedRoot, current, finishedWork) {\n  var flags = finishedWork.flags;\n  switch (finishedWork.tag) {\n    case 0:\n    case 11:\n    case 15:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      flags & 4 && commitHookEffectListMount(5, finishedWork);\n      break;\n    case 1:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      if (flags & 4)\n        if (((finishedRoot = finishedWork.stateNode), null === current))\n          try {\n            finishedRoot.componentDidMount();\n          } catch (error) {\n            captureCommitPhaseError(finishedWork, finishedWork.return, error);\n          }\n        else {\n          var prevProps = resolveClassComponentProps(\n            finishedWork.type,\n            current.memoizedProps\n          );\n          current = current.memoizedState;\n          try {\n            finishedRoot.componentDidUpdate(\n              prevProps,\n              current,\n              finishedRoot.__reactInternalSnapshotBeforeUpdate\n            );\n          } catch (error$142) {\n            captureCommitPhaseError(\n              finishedWork,\n              finishedWork.return,\n              error$142\n            );\n          }\n        }\n      flags & 64 && commitClassCallbacks(finishedWork);\n      flags & 512 && safelyAttachRef(finishedWork, finishedWork.return);\n      break;\n    case 3:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      if (\n        flags & 64 &&\n        ((finishedRoot = finishedWork.updateQueue), null !== finishedRoot)\n      ) {\n        current = null;\n        if (null !== finishedWork.child)\n          switch (finishedWork.child.tag) {\n            case 27:\n            case 5:\n              current = finishedWork.child.stateNode;\n              break;\n            case 1:\n              current = finishedWork.child.stateNode;\n          }\n        try {\n          commitCallbacks(finishedRoot, current);\n        } catch (error) {\n          captureCommitPhaseError(finishedWork, finishedWork.return, error);\n        }\n      }\n      break;\n    case 27:\n      null === current &&\n        flags & 4 &&\n        commitHostSingletonAcquisition(finishedWork);\n    case 26:\n    case 5:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      null === current && flags & 4 && commitHostMount(finishedWork);\n      flags & 512 && safelyAttachRef(finishedWork, finishedWork.return);\n      break;\n    case 12:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      break;\n    case 13:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      flags & 4 && commitSuspenseHydrationCallbacks(finishedRoot, finishedWork);\n      flags & 64 &&\n        ((finishedRoot = finishedWork.memoizedState),\n        null !== finishedRoot &&\n          ((finishedRoot = finishedRoot.dehydrated),\n          null !== finishedRoot &&\n            ((finishedWork = retryDehydratedSuspenseBoundary.bind(\n              null,\n              finishedWork\n            )),\n            registerSuspenseInstanceRetry(finishedRoot, finishedWork))));\n      break;\n    case 22:\n      flags = null !== finishedWork.memoizedState || offscreenSubtreeIsHidden;\n      if (!flags) {\n        current =\n          (null !== current && null !== current.memoizedState) ||\n          offscreenSubtreeWasHidden;\n        prevProps = offscreenSubtreeIsHidden;\n        var prevOffscreenSubtreeWasHidden = offscreenSubtreeWasHidden;\n        offscreenSubtreeIsHidden = flags;\n        (offscreenSubtreeWasHidden = current) && !prevOffscreenSubtreeWasHidden\n          ? recursivelyTraverseReappearLayoutEffects(\n              finishedRoot,\n              finishedWork,\n              0 !== (finishedWork.subtreeFlags & 8772)\n            )\n          : recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n        offscreenSubtreeIsHidden = prevProps;\n        offscreenSubtreeWasHidden = prevOffscreenSubtreeWasHidden;\n      }\n      break;\n    case 30:\n      break;\n    default:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n  }\n}\nfunction detachFiberAfterEffects(fiber) {\n  var alternate = fiber.alternate;\n  null !== alternate &&\n    ((fiber.alternate = null), detachFiberAfterEffects(alternate));\n  fiber.child = null;\n  fiber.deletions = null;\n  fiber.sibling = null;\n  5 === fiber.tag &&\n    ((alternate = fiber.stateNode),\n    null !== alternate && detachDeletedInstance(alternate));\n  fiber.stateNode = null;\n  fiber.return = null;\n  fiber.dependencies = null;\n  fiber.memoizedProps = null;\n  fiber.memoizedState = null;\n  fiber.pendingProps = null;\n  fiber.stateNode = null;\n  fiber.updateQueue = null;\n}\nvar hostParent = null,\n  hostParentIsContainer = !1;\nfunction recursivelyTraverseDeletionEffects(\n  finishedRoot,\n  nearestMountedAncestor,\n  parent\n) {\n  for (parent = parent.child; null !== parent; )\n    commitDeletionEffectsOnFiber(finishedRoot, nearestMountedAncestor, parent),\n      (parent = parent.sibling);\n}\nfunction commitDeletionEffectsOnFiber(\n  finishedRoot,\n  nearestMountedAncestor,\n  deletedFiber\n) {\n  if (injectedHook && \"function\" === typeof injectedHook.onCommitFiberUnmount)\n    try {\n      injectedHook.onCommitFiberUnmount(rendererID, deletedFiber);\n    } catch (err) {}\n  switch (deletedFiber.tag) {\n    case 26:\n      offscreenSubtreeWasHidden ||\n        safelyDetachRef(deletedFiber, nearestMountedAncestor);\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      deletedFiber.memoizedState\n        ? deletedFiber.memoizedState.count--\n        : deletedFiber.stateNode &&\n          ((deletedFiber = deletedFiber.stateNode),\n          deletedFiber.parentNode.removeChild(deletedFiber));\n      break;\n    case 27:\n      offscreenSubtreeWasHidden ||\n        safelyDetachRef(deletedFiber, nearestMountedAncestor);\n      var prevHostParent = hostParent,\n        prevHostParentIsContainer = hostParentIsContainer;\n      isSingletonScope(deletedFiber.type) &&\n        ((hostParent = deletedFiber.stateNode), (hostParentIsContainer = !1));\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      releaseSingletonInstance(deletedFiber.stateNode);\n      hostParent = prevHostParent;\n      hostParentIsContainer = prevHostParentIsContainer;\n      break;\n    case 5:\n      offscreenSubtreeWasHidden ||\n        safelyDetachRef(deletedFiber, nearestMountedAncestor);\n    case 6:\n      prevHostParent = hostParent;\n      prevHostParentIsContainer = hostParentIsContainer;\n      hostParent = null;\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      hostParent = prevHostParent;\n      hostParentIsContainer = prevHostParentIsContainer;\n      if (null !== hostParent)\n        if (hostParentIsContainer)\n          try {\n            (9 === hostParent.nodeType\n              ? hostParent.body\n              : \"HTML\" === hostParent.nodeName\n                ? hostParent.ownerDocument.body\n                : hostParent\n            ).removeChild(deletedFiber.stateNode);\n          } catch (error) {\n            captureCommitPhaseError(\n              deletedFiber,\n              nearestMountedAncestor,\n              error\n            );\n          }\n        else\n          try {\n            hostParent.removeChild(deletedFiber.stateNode);\n          } catch (error) {\n            captureCommitPhaseError(\n              deletedFiber,\n              nearestMountedAncestor,\n              error\n            );\n          }\n      break;\n    case 18:\n      null !== hostParent &&\n        (hostParentIsContainer\n          ? ((finishedRoot = hostParent),\n            clearSuspenseBoundary(\n              9 === finishedRoot.nodeType\n                ? finishedRoot.body\n                : \"HTML\" === finishedRoot.nodeName\n                  ? finishedRoot.ownerDocument.body\n                  : finishedRoot,\n              deletedFiber.stateNode\n            ),\n            retryIfBlockedOn(finishedRoot))\n          : clearSuspenseBoundary(hostParent, deletedFiber.stateNode));\n      break;\n    case 4:\n      prevHostParent = hostParent;\n      prevHostParentIsContainer = hostParentIsContainer;\n      hostParent = deletedFiber.stateNode.containerInfo;\n      hostParentIsContainer = !0;\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      hostParent = prevHostParent;\n      hostParentIsContainer = prevHostParentIsContainer;\n      break;\n    case 0:\n    case 11:\n    case 14:\n    case 15:\n      offscreenSubtreeWasHidden ||\n        commitHookEffectListUnmount(2, deletedFiber, nearestMountedAncestor);\n      offscreenSubtreeWasHidden ||\n        commitHookEffectListUnmount(4, deletedFiber, nearestMountedAncestor);\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      break;\n    case 1:\n      offscreenSubtreeWasHidden ||\n        (safelyDetachRef(deletedFiber, nearestMountedAncestor),\n        (prevHostParent = deletedFiber.stateNode),\n        \"function\" === typeof prevHostParent.componentWillUnmount &&\n          safelyCallComponentWillUnmount(\n            deletedFiber,\n            nearestMountedAncestor,\n            prevHostParent\n          ));\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      break;\n    case 21:\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      break;\n    case 22:\n      offscreenSubtreeWasHidden =\n        (prevHostParent = offscreenSubtreeWasHidden) ||\n        null !== deletedFiber.memoizedState;\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      offscreenSubtreeWasHidden = prevHostParent;\n      break;\n    default:\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n  }\n}\nfunction commitSuspenseHydrationCallbacks(finishedRoot, finishedWork) {\n  if (\n    null === finishedWork.memoizedState &&\n    ((finishedRoot = finishedWork.alternate),\n    null !== finishedRoot &&\n      ((finishedRoot = finishedRoot.memoizedState),\n      null !== finishedRoot &&\n        ((finishedRoot = finishedRoot.dehydrated), null !== finishedRoot)))\n  )\n    try {\n      retryIfBlockedOn(finishedRoot);\n    } catch (error) {\n      captureCommitPhaseError(finishedWork, finishedWork.return, error);\n    }\n}\nfunction getRetryCache(finishedWork) {\n  switch (finishedWork.tag) {\n    case 13:\n    case 19:\n      var retryCache = finishedWork.stateNode;\n      null === retryCache &&\n        (retryCache = finishedWork.stateNode = new PossiblyWeakSet());\n      return retryCache;\n    case 22:\n      return (\n        (finishedWork = finishedWork.stateNode),\n        (retryCache = finishedWork._retryCache),\n        null === retryCache &&\n          (retryCache = finishedWork._retryCache = new PossiblyWeakSet()),\n        retryCache\n      );\n    default:\n      throw Error(formatProdErrorMessage(435, finishedWork.tag));\n  }\n}\nfunction attachSuspenseRetryListeners(finishedWork, wakeables) {\n  var retryCache = getRetryCache(finishedWork);\n  wakeables.forEach(function (wakeable) {\n    var retry = resolveRetryWakeable.bind(null, finishedWork, wakeable);\n    retryCache.has(wakeable) ||\n      (retryCache.add(wakeable), wakeable.then(retry, retry));\n  });\n}\nfunction recursivelyTraverseMutationEffects(root$jscomp$0, parentFiber) {\n  var deletions = parentFiber.deletions;\n  if (null !== deletions)\n    for (var i = 0; i < deletions.length; i++) {\n      var childToDelete = deletions[i],\n        root = root$jscomp$0,\n        returnFiber = parentFiber,\n        parent = returnFiber;\n      a: for (; null !== parent; ) {\n        switch (parent.tag) {\n          case 27:\n            if (isSingletonScope(parent.type)) {\n              hostParent = parent.stateNode;\n              hostParentIsContainer = !1;\n              break a;\n            }\n            break;\n          case 5:\n            hostParent = parent.stateNode;\n            hostParentIsContainer = !1;\n            break a;\n          case 3:\n          case 4:\n            hostParent = parent.stateNode.containerInfo;\n            hostParentIsContainer = !0;\n            break a;\n        }\n        parent = parent.return;\n      }\n      if (null === hostParent) throw Error(formatProdErrorMessage(160));\n      commitDeletionEffectsOnFiber(root, returnFiber, childToDelete);\n      hostParent = null;\n      hostParentIsContainer = !1;\n      root = childToDelete.alternate;\n      null !== root && (root.return = null);\n      childToDelete.return = null;\n    }\n  if (parentFiber.subtreeFlags & 13878)\n    for (parentFiber = parentFiber.child; null !== parentFiber; )\n      commitMutationEffectsOnFiber(parentFiber, root$jscomp$0),\n        (parentFiber = parentFiber.sibling);\n}\nvar currentHoistableRoot = null;\nfunction commitMutationEffectsOnFiber(finishedWork, root) {\n  var current = finishedWork.alternate,\n    flags = finishedWork.flags;\n  switch (finishedWork.tag) {\n    case 0:\n    case 11:\n    case 14:\n    case 15:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 4 &&\n        (commitHookEffectListUnmount(3, finishedWork, finishedWork.return),\n        commitHookEffectListMount(3, finishedWork),\n        commitHookEffectListUnmount(5, finishedWork, finishedWork.return));\n      break;\n    case 1:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 512 &&\n        (offscreenSubtreeWasHidden ||\n          null === current ||\n          safelyDetachRef(current, current.return));\n      flags & 64 &&\n        offscreenSubtreeIsHidden &&\n        ((finishedWork = finishedWork.updateQueue),\n        null !== finishedWork &&\n          ((flags = finishedWork.callbacks),\n          null !== flags &&\n            ((current = finishedWork.shared.hiddenCallbacks),\n            (finishedWork.shared.hiddenCallbacks =\n              null === current ? flags : current.concat(flags)))));\n      break;\n    case 26:\n      var hoistableRoot = currentHoistableRoot;\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 512 &&\n        (offscreenSubtreeWasHidden ||\n          null === current ||\n          safelyDetachRef(current, current.return));\n      if (flags & 4) {\n        var currentResource = null !== current ? current.memoizedState : null;\n        flags = finishedWork.memoizedState;\n        if (null === current)\n          if (null === flags)\n            if (null === finishedWork.stateNode) {\n              a: {\n                flags = finishedWork.type;\n                current = finishedWork.memoizedProps;\n                hoistableRoot = hoistableRoot.ownerDocument || hoistableRoot;\n                b: switch (flags) {\n                  case \"title\":\n                    currentResource =\n                      hoistableRoot.getElementsByTagName(\"title\")[0];\n                    if (\n                      !currentResource ||\n                      currentResource[internalHoistableMarker] ||\n                      currentResource[internalInstanceKey] ||\n                      \"http://www.w3.org/2000/svg\" ===\n                        currentResource.namespaceURI ||\n                      currentResource.hasAttribute(\"itemprop\")\n                    )\n                      (currentResource = hoistableRoot.createElement(flags)),\n                        hoistableRoot.head.insertBefore(\n                          currentResource,\n                          hoistableRoot.querySelector(\"head > title\")\n                        );\n                    setInitialProperties(currentResource, flags, current);\n                    currentResource[internalInstanceKey] = finishedWork;\n                    markNodeAsHoistable(currentResource);\n                    flags = currentResource;\n                    break a;\n                  case \"link\":\n                    var maybeNodes = getHydratableHoistableCache(\n                      \"link\",\n                      \"href\",\n                      hoistableRoot\n                    ).get(flags + (current.href || \"\"));\n                    if (maybeNodes)\n                      for (var i = 0; i < maybeNodes.length; i++)\n                        if (\n                          ((currentResource = maybeNodes[i]),\n                          currentResource.getAttribute(\"href\") ===\n                            (null == current.href || \"\" === current.href\n                              ? null\n                              : current.href) &&\n                            currentResource.getAttribute(\"rel\") ===\n                              (null == current.rel ? null : current.rel) &&\n                            currentResource.getAttribute(\"title\") ===\n                              (null == current.title ? null : current.title) &&\n                            currentResource.getAttribute(\"crossorigin\") ===\n                              (null == current.crossOrigin\n                                ? null\n                                : current.crossOrigin))\n                        ) {\n                          maybeNodes.splice(i, 1);\n                          break b;\n                        }\n                    currentResource = hoistableRoot.createElement(flags);\n                    setInitialProperties(currentResource, flags, current);\n                    hoistableRoot.head.appendChild(currentResource);\n                    break;\n                  case \"meta\":\n                    if (\n                      (maybeNodes = getHydratableHoistableCache(\n                        \"meta\",\n                        \"content\",\n                        hoistableRoot\n                      ).get(flags + (current.content || \"\")))\n                    )\n                      for (i = 0; i < maybeNodes.length; i++)\n                        if (\n                          ((currentResource = maybeNodes[i]),\n                          currentResource.getAttribute(\"content\") ===\n                            (null == current.content\n                              ? null\n                              : \"\" + current.content) &&\n                            currentResource.getAttribute(\"name\") ===\n                              (null == current.name ? null : current.name) &&\n                            currentResource.getAttribute(\"property\") ===\n                              (null == current.property\n                                ? null\n                                : current.property) &&\n                            currentResource.getAttribute(\"http-equiv\") ===\n                              (null == current.httpEquiv\n                                ? null\n                                : current.httpEquiv) &&\n                            currentResource.getAttribute(\"charset\") ===\n                              (null == current.charSet\n                                ? null\n                                : current.charSet))\n                        ) {\n                          maybeNodes.splice(i, 1);\n                          break b;\n                        }\n                    currentResource = hoistableRoot.createElement(flags);\n                    setInitialProperties(currentResource, flags, current);\n                    hoistableRoot.head.appendChild(currentResource);\n                    break;\n                  default:\n                    throw Error(formatProdErrorMessage(468, flags));\n                }\n                currentResource[internalInstanceKey] = finishedWork;\n                markNodeAsHoistable(currentResource);\n                flags = currentResource;\n              }\n              finishedWork.stateNode = flags;\n            } else\n              mountHoistable(\n                hoistableRoot,\n                finishedWork.type,\n                finishedWork.stateNode\n              );\n          else\n            finishedWork.stateNode = acquireResource(\n              hoistableRoot,\n              flags,\n              finishedWork.memoizedProps\n            );\n        else\n          currentResource !== flags\n            ? (null === currentResource\n                ? null !== current.stateNode &&\n                  ((current = current.stateNode),\n                  current.parentNode.removeChild(current))\n                : currentResource.count--,\n              null === flags\n                ? mountHoistable(\n                    hoistableRoot,\n                    finishedWork.type,\n                    finishedWork.stateNode\n                  )\n                : acquireResource(\n                    hoistableRoot,\n                    flags,\n                    finishedWork.memoizedProps\n                  ))\n            : null === flags &&\n              null !== finishedWork.stateNode &&\n              commitHostUpdate(\n                finishedWork,\n                finishedWork.memoizedProps,\n                current.memoizedProps\n              );\n      }\n      break;\n    case 27:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 512 &&\n        (offscreenSubtreeWasHidden ||\n          null === current ||\n          safelyDetachRef(current, current.return));\n      null !== current &&\n        flags & 4 &&\n        commitHostUpdate(\n          finishedWork,\n          finishedWork.memoizedProps,\n          current.memoizedProps\n        );\n      break;\n    case 5:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 512 &&\n        (offscreenSubtreeWasHidden ||\n          null === current ||\n          safelyDetachRef(current, current.return));\n      if (finishedWork.flags & 32) {\n        hoistableRoot = finishedWork.stateNode;\n        try {\n          setTextContent(hoistableRoot, \"\");\n        } catch (error) {\n          captureCommitPhaseError(finishedWork, finishedWork.return, error);\n        }\n      }\n      flags & 4 &&\n        null != finishedWork.stateNode &&\n        ((hoistableRoot = finishedWork.memoizedProps),\n        commitHostUpdate(\n          finishedWork,\n          hoistableRoot,\n          null !== current ? current.memoizedProps : hoistableRoot\n        ));\n      flags & 1024 && (needsFormReset = !0);\n      break;\n    case 6:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      if (flags & 4) {\n        if (null === finishedWork.stateNode)\n          throw Error(formatProdErrorMessage(162));\n        flags = finishedWork.memoizedProps;\n        current = finishedWork.stateNode;\n        try {\n          current.nodeValue = flags;\n        } catch (error) {\n          captureCommitPhaseError(finishedWork, finishedWork.return, error);\n        }\n      }\n      break;\n    case 3:\n      tagCaches = null;\n      hoistableRoot = currentHoistableRoot;\n      currentHoistableRoot = getHoistableRoot(root.containerInfo);\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      currentHoistableRoot = hoistableRoot;\n      commitReconciliationEffects(finishedWork);\n      if (flags & 4 && null !== current && current.memoizedState.isDehydrated)\n        try {\n          retryIfBlockedOn(root.containerInfo);\n        } catch (error) {\n          captureCommitPhaseError(finishedWork, finishedWork.return, error);\n        }\n      needsFormReset &&\n        ((needsFormReset = !1), recursivelyResetForms(finishedWork));\n      break;\n    case 4:\n      flags = currentHoistableRoot;\n      currentHoistableRoot = getHoistableRoot(\n        finishedWork.stateNode.containerInfo\n      );\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      currentHoistableRoot = flags;\n      break;\n    case 12:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      break;\n    case 13:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      finishedWork.child.flags & 8192 &&\n        (null !== finishedWork.memoizedState) !==\n          (null !== current && null !== current.memoizedState) &&\n        (globalMostRecentFallbackTime = now());\n      flags & 4 &&\n        ((flags = finishedWork.updateQueue),\n        null !== flags &&\n          ((finishedWork.updateQueue = null),\n          attachSuspenseRetryListeners(finishedWork, flags)));\n      break;\n    case 22:\n      hoistableRoot = null !== finishedWork.memoizedState;\n      var wasHidden = null !== current && null !== current.memoizedState,\n        prevOffscreenSubtreeIsHidden = offscreenSubtreeIsHidden,\n        prevOffscreenSubtreeWasHidden = offscreenSubtreeWasHidden;\n      offscreenSubtreeIsHidden = prevOffscreenSubtreeIsHidden || hoistableRoot;\n      offscreenSubtreeWasHidden = prevOffscreenSubtreeWasHidden || wasHidden;\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      offscreenSubtreeWasHidden = prevOffscreenSubtreeWasHidden;\n      offscreenSubtreeIsHidden = prevOffscreenSubtreeIsHidden;\n      commitReconciliationEffects(finishedWork);\n      if (flags & 8192)\n        a: for (\n          root = finishedWork.stateNode,\n            root._visibility = hoistableRoot\n              ? root._visibility & -2\n              : root._visibility | 1,\n            hoistableRoot &&\n              (null === current ||\n                wasHidden ||\n                offscreenSubtreeIsHidden ||\n                offscreenSubtreeWasHidden ||\n                recursivelyTraverseDisappearLayoutEffects(finishedWork)),\n            current = null,\n            root = finishedWork;\n          ;\n\n        ) {\n          if (5 === root.tag || 26 === root.tag) {\n            if (null === current) {\n              wasHidden = current = root;\n              try {\n                if (((currentResource = wasHidden.stateNode), hoistableRoot))\n                  (maybeNodes = currentResource.style),\n                    \"function\" === typeof maybeNodes.setProperty\n                      ? maybeNodes.setProperty(\"display\", \"none\", \"important\")\n                      : (maybeNodes.display = \"none\");\n                else {\n                  i = wasHidden.stateNode;\n                  var styleProp = wasHidden.memoizedProps.style,\n                    display =\n                      void 0 !== styleProp &&\n                      null !== styleProp &&\n                      styleProp.hasOwnProperty(\"display\")\n                        ? styleProp.display\n                        : null;\n                  i.style.display =\n                    null == display || \"boolean\" === typeof display\n                      ? \"\"\n                      : (\"\" + display).trim();\n                }\n              } catch (error) {\n                captureCommitPhaseError(wasHidden, wasHidden.return, error);\n              }\n            }\n          } else if (6 === root.tag) {\n            if (null === current) {\n              wasHidden = root;\n              try {\n                wasHidden.stateNode.nodeValue = hoistableRoot\n                  ? \"\"\n                  : wasHidden.memoizedProps;\n              } catch (error) {\n                captureCommitPhaseError(wasHidden, wasHidden.return, error);\n              }\n            }\n          } else if (\n            ((22 !== root.tag && 23 !== root.tag) ||\n              null === root.memoizedState ||\n              root === finishedWork) &&\n            null !== root.child\n          ) {\n            root.child.return = root;\n            root = root.child;\n            continue;\n          }\n          if (root === finishedWork) break a;\n          for (; null === root.sibling; ) {\n            if (null === root.return || root.return === finishedWork) break a;\n            current === root && (current = null);\n            root = root.return;\n          }\n          current === root && (current = null);\n          root.sibling.return = root.return;\n          root = root.sibling;\n        }\n      flags & 4 &&\n        ((flags = finishedWork.updateQueue),\n        null !== flags &&\n          ((current = flags.retryQueue),\n          null !== current &&\n            ((flags.retryQueue = null),\n            attachSuspenseRetryListeners(finishedWork, current))));\n      break;\n    case 19:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 4 &&\n        ((flags = finishedWork.updateQueue),\n        null !== flags &&\n          ((finishedWork.updateQueue = null),\n          attachSuspenseRetryListeners(finishedWork, flags)));\n      break;\n    case 30:\n      break;\n    case 21:\n      break;\n    default:\n      recursivelyTraverseMutationEffects(root, finishedWork),\n        commitReconciliationEffects(finishedWork);\n  }\n}\nfunction commitReconciliationEffects(finishedWork) {\n  var flags = finishedWork.flags;\n  if (flags & 2) {\n    try {\n      for (\n        var hostParentFiber, parentFiber = finishedWork.return;\n        null !== parentFiber;\n\n      ) {\n        if (isHostParent(parentFiber)) {\n          hostParentFiber = parentFiber;\n          break;\n        }\n        parentFiber = parentFiber.return;\n      }\n      if (null == hostParentFiber) throw Error(formatProdErrorMessage(160));\n      switch (hostParentFiber.tag) {\n        case 27:\n          var parent = hostParentFiber.stateNode,\n            before = getHostSibling(finishedWork);\n          insertOrAppendPlacementNode(finishedWork, before, parent);\n          break;\n        case 5:\n          var parent$144 = hostParentFiber.stateNode;\n          hostParentFiber.flags & 32 &&\n            (setTextContent(parent$144, \"\"), (hostParentFiber.flags &= -33));\n          var before$145 = getHostSibling(finishedWork);\n          insertOrAppendPlacementNode(finishedWork, before$145, parent$144);\n          break;\n        case 3:\n        case 4:\n          var parent$146 = hostParentFiber.stateNode.containerInfo,\n            before$147 = getHostSibling(finishedWork);\n          insertOrAppendPlacementNodeIntoContainer(\n            finishedWork,\n            before$147,\n            parent$146\n          );\n          break;\n        default:\n          throw Error(formatProdErrorMessage(161));\n      }\n    } catch (error) {\n      captureCommitPhaseError(finishedWork, finishedWork.return, error);\n    }\n    finishedWork.flags &= -3;\n  }\n  flags & 4096 && (finishedWork.flags &= -4097);\n}\nfunction recursivelyResetForms(parentFiber) {\n  if (parentFiber.subtreeFlags & 1024)\n    for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n      var fiber = parentFiber;\n      recursivelyResetForms(fiber);\n      5 === fiber.tag && fiber.flags & 1024 && fiber.stateNode.reset();\n      parentFiber = parentFiber.sibling;\n    }\n}\nfunction recursivelyTraverseLayoutEffects(root, parentFiber) {\n  if (parentFiber.subtreeFlags & 8772)\n    for (parentFiber = parentFiber.child; null !== parentFiber; )\n      commitLayoutEffectOnFiber(root, parentFiber.alternate, parentFiber),\n        (parentFiber = parentFiber.sibling);\n}\nfunction recursivelyTraverseDisappearLayoutEffects(parentFiber) {\n  for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n    var finishedWork = parentFiber;\n    switch (finishedWork.tag) {\n      case 0:\n      case 11:\n      case 14:\n      case 15:\n        commitHookEffectListUnmount(4, finishedWork, finishedWork.return);\n        recursivelyTraverseDisappearLayoutEffects(finishedWork);\n        break;\n      case 1:\n        safelyDetachRef(finishedWork, finishedWork.return);\n        var instance = finishedWork.stateNode;\n        \"function\" === typeof instance.componentWillUnmount &&\n          safelyCallComponentWillUnmount(\n            finishedWork,\n            finishedWork.return,\n            instance\n          );\n        recursivelyTraverseDisappearLayoutEffects(finishedWork);\n        break;\n      case 27:\n        releaseSingletonInstance(finishedWork.stateNode);\n      case 26:\n      case 5:\n        safelyDetachRef(finishedWork, finishedWork.return);\n        recursivelyTraverseDisappearLayoutEffects(finishedWork);\n        break;\n      case 22:\n        null === finishedWork.memoizedState &&\n          recursivelyTraverseDisappearLayoutEffects(finishedWork);\n        break;\n      case 30:\n        recursivelyTraverseDisappearLayoutEffects(finishedWork);\n        break;\n      default:\n        recursivelyTraverseDisappearLayoutEffects(finishedWork);\n    }\n    parentFiber = parentFiber.sibling;\n  }\n}\nfunction recursivelyTraverseReappearLayoutEffects(\n  finishedRoot$jscomp$0,\n  parentFiber,\n  includeWorkInProgressEffects\n) {\n  includeWorkInProgressEffects =\n    includeWorkInProgressEffects && 0 !== (parentFiber.subtreeFlags & 8772);\n  for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n    var current = parentFiber.alternate,\n      finishedRoot = finishedRoot$jscomp$0,\n      finishedWork = parentFiber,\n      flags = finishedWork.flags;\n    switch (finishedWork.tag) {\n      case 0:\n      case 11:\n      case 15:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        commitHookEffectListMount(4, finishedWork);\n        break;\n      case 1:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        current = finishedWork;\n        finishedRoot = current.stateNode;\n        if (\"function\" === typeof finishedRoot.componentDidMount)\n          try {\n            finishedRoot.componentDidMount();\n          } catch (error) {\n            captureCommitPhaseError(current, current.return, error);\n          }\n        current = finishedWork;\n        finishedRoot = current.updateQueue;\n        if (null !== finishedRoot) {\n          var instance = current.stateNode;\n          try {\n            var hiddenCallbacks = finishedRoot.shared.hiddenCallbacks;\n            if (null !== hiddenCallbacks)\n              for (\n                finishedRoot.shared.hiddenCallbacks = null, finishedRoot = 0;\n                finishedRoot < hiddenCallbacks.length;\n                finishedRoot++\n              )\n                callCallback(hiddenCallbacks[finishedRoot], instance);\n          } catch (error) {\n            captureCommitPhaseError(current, current.return, error);\n          }\n        }\n        includeWorkInProgressEffects &&\n          flags & 64 &&\n          commitClassCallbacks(finishedWork);\n        safelyAttachRef(finishedWork, finishedWork.return);\n        break;\n      case 27:\n        commitHostSingletonAcquisition(finishedWork);\n      case 26:\n      case 5:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        includeWorkInProgressEffects &&\n          null === current &&\n          flags & 4 &&\n          commitHostMount(finishedWork);\n        safelyAttachRef(finishedWork, finishedWork.return);\n        break;\n      case 12:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        break;\n      case 13:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        includeWorkInProgressEffects &&\n          flags & 4 &&\n          commitSuspenseHydrationCallbacks(finishedRoot, finishedWork);\n        break;\n      case 22:\n        null === finishedWork.memoizedState &&\n          recursivelyTraverseReappearLayoutEffects(\n            finishedRoot,\n            finishedWork,\n            includeWorkInProgressEffects\n          );\n        safelyAttachRef(finishedWork, finishedWork.return);\n        break;\n      case 30:\n        break;\n      default:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n    }\n    parentFiber = parentFiber.sibling;\n  }\n}\nfunction commitOffscreenPassiveMountEffects(current, finishedWork) {\n  var previousCache = null;\n  null !== current &&\n    null !== current.memoizedState &&\n    null !== current.memoizedState.cachePool &&\n    (previousCache = current.memoizedState.cachePool.pool);\n  current = null;\n  null !== finishedWork.memoizedState &&\n    null !== finishedWork.memoizedState.cachePool &&\n    (current = finishedWork.memoizedState.cachePool.pool);\n  current !== previousCache &&\n    (null != current && current.refCount++,\n    null != previousCache && releaseCache(previousCache));\n}\nfunction commitCachePassiveMountEffect(current, finishedWork) {\n  current = null;\n  null !== finishedWork.alternate &&\n    (current = finishedWork.alternate.memoizedState.cache);\n  finishedWork = finishedWork.memoizedState.cache;\n  finishedWork !== current &&\n    (finishedWork.refCount++, null != current && releaseCache(current));\n}\nfunction recursivelyTraversePassiveMountEffects(\n  root,\n  parentFiber,\n  committedLanes,\n  committedTransitions\n) {\n  if (parentFiber.subtreeFlags & 10256)\n    for (parentFiber = parentFiber.child; null !== parentFiber; )\n      commitPassiveMountOnFiber(\n        root,\n        parentFiber,\n        committedLanes,\n        committedTransitions\n      ),\n        (parentFiber = parentFiber.sibling);\n}\nfunction commitPassiveMountOnFiber(\n  finishedRoot,\n  finishedWork,\n  committedLanes,\n  committedTransitions\n) {\n  var flags = finishedWork.flags;\n  switch (finishedWork.tag) {\n    case 0:\n    case 11:\n    case 15:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n      flags & 2048 && commitHookEffectListMount(9, finishedWork);\n      break;\n    case 1:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n      break;\n    case 3:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n      flags & 2048 &&\n        ((finishedRoot = null),\n        null !== finishedWork.alternate &&\n          (finishedRoot = finishedWork.alternate.memoizedState.cache),\n        (finishedWork = finishedWork.memoizedState.cache),\n        finishedWork !== finishedRoot &&\n          (finishedWork.refCount++,\n          null != finishedRoot && releaseCache(finishedRoot)));\n      break;\n    case 12:\n      if (flags & 2048) {\n        recursivelyTraversePassiveMountEffects(\n          finishedRoot,\n          finishedWork,\n          committedLanes,\n          committedTransitions\n        );\n        finishedRoot = finishedWork.stateNode;\n        try {\n          var _finishedWork$memoize2 = finishedWork.memoizedProps,\n            id = _finishedWork$memoize2.id,\n            onPostCommit = _finishedWork$memoize2.onPostCommit;\n          \"function\" === typeof onPostCommit &&\n            onPostCommit(\n              id,\n              null === finishedWork.alternate ? \"mount\" : \"update\",\n              finishedRoot.passiveEffectDuration,\n              -0\n            );\n        } catch (error) {\n          captureCommitPhaseError(finishedWork, finishedWork.return, error);\n        }\n      } else\n        recursivelyTraversePassiveMountEffects(\n          finishedRoot,\n          finishedWork,\n          committedLanes,\n          committedTransitions\n        );\n      break;\n    case 13:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n      break;\n    case 23:\n      break;\n    case 22:\n      _finishedWork$memoize2 = finishedWork.stateNode;\n      id = finishedWork.alternate;\n      null !== finishedWork.memoizedState\n        ? _finishedWork$memoize2._visibility & 2\n          ? recursivelyTraversePassiveMountEffects(\n              finishedRoot,\n              finishedWork,\n              committedLanes,\n              committedTransitions\n            )\n          : recursivelyTraverseAtomicPassiveEffects(finishedRoot, finishedWork)\n        : _finishedWork$memoize2._visibility & 2\n          ? recursivelyTraversePassiveMountEffects(\n              finishedRoot,\n              finishedWork,\n              committedLanes,\n              committedTransitions\n            )\n          : ((_finishedWork$memoize2._visibility |= 2),\n            recursivelyTraverseReconnectPassiveEffects(\n              finishedRoot,\n              finishedWork,\n              committedLanes,\n              committedTransitions,\n              0 !== (finishedWork.subtreeFlags & 10256)\n            ));\n      flags & 2048 && commitOffscreenPassiveMountEffects(id, finishedWork);\n      break;\n    case 24:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n      flags & 2048 &&\n        commitCachePassiveMountEffect(finishedWork.alternate, finishedWork);\n      break;\n    default:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n  }\n}\nfunction recursivelyTraverseReconnectPassiveEffects(\n  finishedRoot$jscomp$0,\n  parentFiber,\n  committedLanes$jscomp$0,\n  committedTransitions$jscomp$0,\n  includeWorkInProgressEffects\n) {\n  includeWorkInProgressEffects =\n    includeWorkInProgressEffects && 0 !== (parentFiber.subtreeFlags & 10256);\n  for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n    var finishedRoot = finishedRoot$jscomp$0,\n      finishedWork = parentFiber,\n      committedLanes = committedLanes$jscomp$0,\n      committedTransitions = committedTransitions$jscomp$0,\n      flags = finishedWork.flags;\n    switch (finishedWork.tag) {\n      case 0:\n      case 11:\n      case 15:\n        recursivelyTraverseReconnectPassiveEffects(\n          finishedRoot,\n          finishedWork,\n          committedLanes,\n          committedTransitions,\n          includeWorkInProgressEffects\n        );\n        commitHookEffectListMount(8, finishedWork);\n        break;\n      case 23:\n        break;\n      case 22:\n        var instance = finishedWork.stateNode;\n        null !== finishedWork.memoizedState\n          ? instance._visibility & 2\n            ? recursivelyTraverseReconnectPassiveEffects(\n                finishedRoot,\n                finishedWork,\n                committedLanes,\n                committedTransitions,\n                includeWorkInProgressEffects\n              )\n            : recursivelyTraverseAtomicPassiveEffects(\n                finishedRoot,\n                finishedWork\n              )\n          : ((instance._visibility |= 2),\n            recursivelyTraverseReconnectPassiveEffects(\n              finishedRoot,\n              finishedWork,\n              committedLanes,\n              committedTransitions,\n              includeWorkInProgressEffects\n            ));\n        includeWorkInProgressEffects &&\n          flags & 2048 &&\n          commitOffscreenPassiveMountEffects(\n            finishedWork.alternate,\n            finishedWork\n          );\n        break;\n      case 24:\n        recursivelyTraverseReconnectPassiveEffects(\n          finishedRoot,\n          finishedWork,\n          committedLanes,\n          committedTransitions,\n          includeWorkInProgressEffects\n        );\n        includeWorkInProgressEffects &&\n          flags & 2048 &&\n          commitCachePassiveMountEffect(finishedWork.alternate, finishedWork);\n        break;\n      default:\n        recursivelyTraverseReconnectPassiveEffects(\n          finishedRoot,\n          finishedWork,\n          committedLanes,\n          committedTransitions,\n          includeWorkInProgressEffects\n        );\n    }\n    parentFiber = parentFiber.sibling;\n  }\n}\nfunction recursivelyTraverseAtomicPassiveEffects(\n  finishedRoot$jscomp$0,\n  parentFiber\n) {\n  if (parentFiber.subtreeFlags & 10256)\n    for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n      var finishedRoot = finishedRoot$jscomp$0,\n        finishedWork = parentFiber,\n        flags = finishedWork.flags;\n      switch (finishedWork.tag) {\n        case 22:\n          recursivelyTraverseAtomicPassiveEffects(finishedRoot, finishedWork);\n          flags & 2048 &&\n            commitOffscreenPassiveMountEffects(\n              finishedWork.alternate,\n              finishedWork\n            );\n          break;\n        case 24:\n          recursivelyTraverseAtomicPassiveEffects(finishedRoot, finishedWork);\n          flags & 2048 &&\n            commitCachePassiveMountEffect(finishedWork.alternate, finishedWork);\n          break;\n        default:\n          recursivelyTraverseAtomicPassiveEffects(finishedRoot, finishedWork);\n      }\n      parentFiber = parentFiber.sibling;\n    }\n}\nvar suspenseyCommitFlag = 8192;\nfunction recursivelyAccumulateSuspenseyCommit(parentFiber) {\n  if (parentFiber.subtreeFlags & suspenseyCommitFlag)\n    for (parentFiber = parentFiber.child; null !== parentFiber; )\n      accumulateSuspenseyCommitOnFiber(parentFiber),\n        (parentFiber = parentFiber.sibling);\n}\nfunction accumulateSuspenseyCommitOnFiber(fiber) {\n  switch (fiber.tag) {\n    case 26:\n      recursivelyAccumulateSuspenseyCommit(fiber);\n      fiber.flags & suspenseyCommitFlag &&\n        null !== fiber.memoizedState &&\n        suspendResource(\n          currentHoistableRoot,\n          fiber.memoizedState,\n          fiber.memoizedProps\n        );\n      break;\n    case 5:\n      recursivelyAccumulateSuspenseyCommit(fiber);\n      break;\n    case 3:\n    case 4:\n      var previousHoistableRoot = currentHoistableRoot;\n      currentHoistableRoot = getHoistableRoot(fiber.stateNode.containerInfo);\n      recursivelyAccumulateSuspenseyCommit(fiber);\n      currentHoistableRoot = previousHoistableRoot;\n      break;\n    case 22:\n      null === fiber.memoizedState &&\n        ((previousHoistableRoot = fiber.alternate),\n        null !== previousHoistableRoot &&\n        null !== previousHoistableRoot.memoizedState\n          ? ((previousHoistableRoot = suspenseyCommitFlag),\n            (suspenseyCommitFlag = 16777216),\n            recursivelyAccumulateSuspenseyCommit(fiber),\n            (suspenseyCommitFlag = previousHoistableRoot))\n          : recursivelyAccumulateSuspenseyCommit(fiber));\n      break;\n    default:\n      recursivelyAccumulateSuspenseyCommit(fiber);\n  }\n}\nfunction detachAlternateSiblings(parentFiber) {\n  var previousFiber = parentFiber.alternate;\n  if (\n    null !== previousFiber &&\n    ((parentFiber = previousFiber.child), null !== parentFiber)\n  ) {\n    previousFiber.child = null;\n    do\n      (previousFiber = parentFiber.sibling),\n        (parentFiber.sibling = null),\n        (parentFiber = previousFiber);\n    while (null !== parentFiber);\n  }\n}\nfunction recursivelyTraversePassiveUnmountEffects(parentFiber) {\n  var deletions = parentFiber.deletions;\n  if (0 !== (parentFiber.flags & 16)) {\n    if (null !== deletions)\n      for (var i = 0; i < deletions.length; i++) {\n        var childToDelete = deletions[i];\n        nextEffect = childToDelete;\n        commitPassiveUnmountEffectsInsideOfDeletedTree_begin(\n          childToDelete,\n          parentFiber\n        );\n      }\n    detachAlternateSiblings(parentFiber);\n  }\n  if (parentFiber.subtreeFlags & 10256)\n    for (parentFiber = parentFiber.child; null !== parentFiber; )\n      commitPassiveUnmountOnFiber(parentFiber),\n        (parentFiber = parentFiber.sibling);\n}\nfunction commitPassiveUnmountOnFiber(finishedWork) {\n  switch (finishedWork.tag) {\n    case 0:\n    case 11:\n    case 15:\n      recursivelyTraversePassiveUnmountEffects(finishedWork);\n      finishedWork.flags & 2048 &&\n        commitHookEffectListUnmount(9, finishedWork, finishedWork.return);\n      break;\n    case 3:\n      recursivelyTraversePassiveUnmountEffects(finishedWork);\n      break;\n    case 12:\n      recursivelyTraversePassiveUnmountEffects(finishedWork);\n      break;\n    case 22:\n      var instance = finishedWork.stateNode;\n      null !== finishedWork.memoizedState &&\n      instance._visibility & 2 &&\n      (null === finishedWork.return || 13 !== finishedWork.return.tag)\n        ? ((instance._visibility &= -3),\n          recursivelyTraverseDisconnectPassiveEffects(finishedWork))\n        : recursivelyTraversePassiveUnmountEffects(finishedWork);\n      break;\n    default:\n      recursivelyTraversePassiveUnmountEffects(finishedWork);\n  }\n}\nfunction recursivelyTraverseDisconnectPassiveEffects(parentFiber) {\n  var deletions = parentFiber.deletions;\n  if (0 !== (parentFiber.flags & 16)) {\n    if (null !== deletions)\n      for (var i = 0; i < deletions.length; i++) {\n        var childToDelete = deletions[i];\n        nextEffect = childToDelete;\n        commitPassiveUnmountEffectsInsideOfDeletedTree_begin(\n          childToDelete,\n          parentFiber\n        );\n      }\n    detachAlternateSiblings(parentFiber);\n  }\n  for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n    deletions = parentFiber;\n    switch (deletions.tag) {\n      case 0:\n      case 11:\n      case 15:\n        commitHookEffectListUnmount(8, deletions, deletions.return);\n        recursivelyTraverseDisconnectPassiveEffects(deletions);\n        break;\n      case 22:\n        i = deletions.stateNode;\n        i._visibility & 2 &&\n          ((i._visibility &= -3),\n          recursivelyTraverseDisconnectPassiveEffects(deletions));\n        break;\n      default:\n        recursivelyTraverseDisconnectPassiveEffects(deletions);\n    }\n    parentFiber = parentFiber.sibling;\n  }\n}\nfunction commitPassiveUnmountEffectsInsideOfDeletedTree_begin(\n  deletedSubtreeRoot,\n  nearestMountedAncestor\n) {\n  for (; null !== nextEffect; ) {\n    var fiber = nextEffect;\n    switch (fiber.tag) {\n      case 0:\n      case 11:\n      case 15:\n        commitHookEffectListUnmount(8, fiber, nearestMountedAncestor);\n        break;\n      case 23:\n      case 22:\n        if (\n          null !== fiber.memoizedState &&\n          null !== fiber.memoizedState.cachePool\n        ) {\n          var cache = fiber.memoizedState.cachePool.pool;\n          null != cache && cache.refCount++;\n        }\n        break;\n      case 24:\n        releaseCache(fiber.memoizedState.cache);\n    }\n    cache = fiber.child;\n    if (null !== cache) (cache.return = fiber), (nextEffect = cache);\n    else\n      a: for (fiber = deletedSubtreeRoot; null !== nextEffect; ) {\n        cache = nextEffect;\n        var sibling = cache.sibling,\n          returnFiber = cache.return;\n        detachFiberAfterEffects(cache);\n        if (cache === fiber) {\n          nextEffect = null;\n          break a;\n        }\n        if (null !== sibling) {\n          sibling.return = returnFiber;\n          nextEffect = sibling;\n          break a;\n        }\n        nextEffect = returnFiber;\n      }\n  }\n}\nvar DefaultAsyncDispatcher = {\n    getCacheForType: function (resourceType) {\n      var cache = readContext(CacheContext),\n        cacheForType = cache.data.get(resourceType);\n      void 0 === cacheForType &&\n        ((cacheForType = resourceType()),\n        cache.data.set(resourceType, cacheForType));\n      return cacheForType;\n    }\n  },\n  PossiblyWeakMap = \"function\" === typeof WeakMap ? WeakMap : Map,\n  executionContext = 0,\n  workInProgressRoot = null,\n  workInProgress = null,\n  workInProgressRootRenderLanes = 0,\n  workInProgressSuspendedReason = 0,\n  workInProgressThrownValue = null,\n  workInProgressRootDidSkipSuspendedSiblings = !1,\n  workInProgressRootIsPrerendering = !1,\n  workInProgressRootDidAttachPingListener = !1,\n  entangledRenderLanes = 0,\n  workInProgressRootExitStatus = 0,\n  workInProgressRootSkippedLanes = 0,\n  workInProgressRootInterleavedUpdatedLanes = 0,\n  workInProgressRootPingedLanes = 0,\n  workInProgressDeferredLane = 0,\n  workInProgressSuspendedRetryLanes = 0,\n  workInProgressRootConcurrentErrors = null,\n  workInProgressRootRecoverableErrors = null,\n  workInProgressRootDidIncludeRecursiveRenderUpdate = !1,\n  globalMostRecentFallbackTime = 0,\n  workInProgressRootRenderTargetTime = Infinity,\n  workInProgressTransitions = null,\n  legacyErrorBoundariesThatAlreadyFailed = null,\n  pendingEffectsStatus = 0,\n  pendingEffectsRoot = null,\n  pendingFinishedWork = null,\n  pendingEffectsLanes = 0,\n  pendingEffectsRemainingLanes = 0,\n  pendingPassiveTransitions = null,\n  pendingRecoverableErrors = null,\n  nestedUpdateCount = 0,\n  rootWithNestedUpdates = null;\nfunction requestUpdateLane() {\n  if (0 !== (executionContext & 2) && 0 !== workInProgressRootRenderLanes)\n    return workInProgressRootRenderLanes & -workInProgressRootRenderLanes;\n  if (null !== ReactSharedInternals.T) {\n    var actionScopeLane = currentEntangledLane;\n    return 0 !== actionScopeLane ? actionScopeLane : requestTransitionLane();\n  }\n  return resolveUpdatePriority();\n}\nfunction requestDeferredLane() {\n  0 === workInProgressDeferredLane &&\n    (workInProgressDeferredLane =\n      0 === (workInProgressRootRenderLanes & 536870912) || isHydrating\n        ? claimNextTransitionLane()\n        : 536870912);\n  var suspenseHandler = suspenseHandlerStackCursor.current;\n  null !== suspenseHandler && (suspenseHandler.flags |= 32);\n  return workInProgressDeferredLane;\n}\nfunction scheduleUpdateOnFiber(root, fiber, lane) {\n  if (\n    (root === workInProgressRoot &&\n      (2 === workInProgressSuspendedReason ||\n        9 === workInProgressSuspendedReason)) ||\n    null !== root.cancelPendingCommit\n  )\n    prepareFreshStack(root, 0),\n      markRootSuspended(\n        root,\n        workInProgressRootRenderLanes,\n        workInProgressDeferredLane,\n        !1\n      );\n  markRootUpdated$1(root, lane);\n  if (0 === (executionContext & 2) || root !== workInProgressRoot)\n    root === workInProgressRoot &&\n      (0 === (executionContext & 2) &&\n        (workInProgressRootInterleavedUpdatedLanes |= lane),\n      4 === workInProgressRootExitStatus &&\n        markRootSuspended(\n          root,\n          workInProgressRootRenderLanes,\n          workInProgressDeferredLane,\n          !1\n        )),\n      ensureRootIsScheduled(root);\n}\nfunction performWorkOnRoot(root$jscomp$0, lanes, forceSync) {\n  if (0 !== (executionContext & 6)) throw Error(formatProdErrorMessage(327));\n  var shouldTimeSlice =\n      (!forceSync &&\n        0 === (lanes & 124) &&\n        0 === (lanes & root$jscomp$0.expiredLanes)) ||\n      checkIfRootIsPrerendering(root$jscomp$0, lanes),\n    exitStatus = shouldTimeSlice\n      ? renderRootConcurrent(root$jscomp$0, lanes)\n      : renderRootSync(root$jscomp$0, lanes, !0),\n    renderWasConcurrent = shouldTimeSlice;\n  do {\n    if (0 === exitStatus) {\n      workInProgressRootIsPrerendering &&\n        !shouldTimeSlice &&\n        markRootSuspended(root$jscomp$0, lanes, 0, !1);\n      break;\n    } else {\n      forceSync = root$jscomp$0.current.alternate;\n      if (\n        renderWasConcurrent &&\n        !isRenderConsistentWithExternalStores(forceSync)\n      ) {\n        exitStatus = renderRootSync(root$jscomp$0, lanes, !1);\n        renderWasConcurrent = !1;\n        continue;\n      }\n      if (2 === exitStatus) {\n        renderWasConcurrent = lanes;\n        if (root$jscomp$0.errorRecoveryDisabledLanes & renderWasConcurrent)\n          var JSCompiler_inline_result = 0;\n        else\n          (JSCompiler_inline_result = root$jscomp$0.pendingLanes & -536870913),\n            (JSCompiler_inline_result =\n              0 !== JSCompiler_inline_result\n                ? JSCompiler_inline_result\n                : JSCompiler_inline_result & 536870912\n                  ? 536870912\n                  : 0);\n        if (0 !== JSCompiler_inline_result) {\n          lanes = JSCompiler_inline_result;\n          a: {\n            var root = root$jscomp$0;\n            exitStatus = workInProgressRootConcurrentErrors;\n            var wasRootDehydrated = root.current.memoizedState.isDehydrated;\n            wasRootDehydrated &&\n              (prepareFreshStack(root, JSCompiler_inline_result).flags |= 256);\n            JSCompiler_inline_result = renderRootSync(\n              root,\n              JSCompiler_inline_result,\n              !1\n            );\n            if (2 !== JSCompiler_inline_result) {\n              if (\n                workInProgressRootDidAttachPingListener &&\n                !wasRootDehydrated\n              ) {\n                root.errorRecoveryDisabledLanes |= renderWasConcurrent;\n                workInProgressRootInterleavedUpdatedLanes |=\n                  renderWasConcurrent;\n                exitStatus = 4;\n                break a;\n              }\n              renderWasConcurrent = workInProgressRootRecoverableErrors;\n              workInProgressRootRecoverableErrors = exitStatus;\n              null !== renderWasConcurrent &&\n                (null === workInProgressRootRecoverableErrors\n                  ? (workInProgressRootRecoverableErrors = renderWasConcurrent)\n                  : workInProgressRootRecoverableErrors.push.apply(\n                      workInProgressRootRecoverableErrors,\n                      renderWasConcurrent\n                    ));\n            }\n            exitStatus = JSCompiler_inline_result;\n          }\n          renderWasConcurrent = !1;\n          if (2 !== exitStatus) continue;\n        }\n      }\n      if (1 === exitStatus) {\n        prepareFreshStack(root$jscomp$0, 0);\n        markRootSuspended(root$jscomp$0, lanes, 0, !0);\n        break;\n      }\n      a: {\n        shouldTimeSlice = root$jscomp$0;\n        renderWasConcurrent = exitStatus;\n        switch (renderWasConcurrent) {\n          case 0:\n          case 1:\n            throw Error(formatProdErrorMessage(345));\n          case 4:\n            if ((lanes & 4194048) !== lanes) break;\n          case 6:\n            markRootSuspended(\n              shouldTimeSlice,\n              lanes,\n              workInProgressDeferredLane,\n              !workInProgressRootDidSkipSuspendedSiblings\n            );\n            break a;\n          case 2:\n            workInProgressRootRecoverableErrors = null;\n            break;\n          case 3:\n          case 5:\n            break;\n          default:\n            throw Error(formatProdErrorMessage(329));\n        }\n        if (\n          (lanes & 62914560) === lanes &&\n          ((exitStatus = globalMostRecentFallbackTime + 300 - now()),\n          10 < exitStatus)\n        ) {\n          markRootSuspended(\n            shouldTimeSlice,\n            lanes,\n            workInProgressDeferredLane,\n            !workInProgressRootDidSkipSuspendedSiblings\n          );\n          if (0 !== getNextLanes(shouldTimeSlice, 0, !0)) break a;\n          shouldTimeSlice.timeoutHandle = scheduleTimeout(\n            commitRootWhenReady.bind(\n              null,\n              shouldTimeSlice,\n              forceSync,\n              workInProgressRootRecoverableErrors,\n              workInProgressTransitions,\n              workInProgressRootDidIncludeRecursiveRenderUpdate,\n              lanes,\n              workInProgressDeferredLane,\n              workInProgressRootInterleavedUpdatedLanes,\n              workInProgressSuspendedRetryLanes,\n              workInProgressRootDidSkipSuspendedSiblings,\n              renderWasConcurrent,\n              2,\n              -0,\n              0\n            ),\n            exitStatus\n          );\n          break a;\n        }\n        commitRootWhenReady(\n          shouldTimeSlice,\n          forceSync,\n          workInProgressRootRecoverableErrors,\n          workInProgressTransitions,\n          workInProgressRootDidIncludeRecursiveRenderUpdate,\n          lanes,\n          workInProgressDeferredLane,\n          workInProgressRootInterleavedUpdatedLanes,\n          workInProgressSuspendedRetryLanes,\n          workInProgressRootDidSkipSuspendedSiblings,\n          renderWasConcurrent,\n          0,\n          -0,\n          0\n        );\n      }\n    }\n    break;\n  } while (1);\n  ensureRootIsScheduled(root$jscomp$0);\n}\nfunction commitRootWhenReady(\n  root,\n  finishedWork,\n  recoverableErrors,\n  transitions,\n  didIncludeRenderPhaseUpdate,\n  lanes,\n  spawnedLane,\n  updatedLanes,\n  suspendedRetryLanes,\n  didSkipSuspendedSiblings,\n  exitStatus,\n  suspendedCommitReason,\n  completedRenderStartTime,\n  completedRenderEndTime\n) {\n  root.timeoutHandle = -1;\n  suspendedCommitReason = finishedWork.subtreeFlags;\n  if (\n    suspendedCommitReason & 8192 ||\n    16785408 === (suspendedCommitReason & 16785408)\n  )\n    if (\n      ((suspendedState = { stylesheets: null, count: 0, unsuspend: noop }),\n      accumulateSuspenseyCommitOnFiber(finishedWork),\n      (suspendedCommitReason = waitForCommitToBeReady()),\n      null !== suspendedCommitReason)\n    ) {\n      root.cancelPendingCommit = suspendedCommitReason(\n        commitRoot.bind(\n          null,\n          root,\n          finishedWork,\n          lanes,\n          recoverableErrors,\n          transitions,\n          didIncludeRenderPhaseUpdate,\n          spawnedLane,\n          updatedLanes,\n          suspendedRetryLanes,\n          exitStatus,\n          1,\n          completedRenderStartTime,\n          completedRenderEndTime\n        )\n      );\n      markRootSuspended(root, lanes, spawnedLane, !didSkipSuspendedSiblings);\n      return;\n    }\n  commitRoot(\n    root,\n    finishedWork,\n    lanes,\n    recoverableErrors,\n    transitions,\n    didIncludeRenderPhaseUpdate,\n    spawnedLane,\n    updatedLanes,\n    suspendedRetryLanes\n  );\n}\nfunction isRenderConsistentWithExternalStores(finishedWork) {\n  for (var node = finishedWork; ; ) {\n    var tag = node.tag;\n    if (\n      (0 === tag || 11 === tag || 15 === tag) &&\n      node.flags & 16384 &&\n      ((tag = node.updateQueue),\n      null !== tag && ((tag = tag.stores), null !== tag))\n    )\n      for (var i = 0; i < tag.length; i++) {\n        var check = tag[i],\n          getSnapshot = check.getSnapshot;\n        check = check.value;\n        try {\n          if (!objectIs(getSnapshot(), check)) return !1;\n        } catch (error) {\n          return !1;\n        }\n      }\n    tag = node.child;\n    if (node.subtreeFlags & 16384 && null !== tag)\n      (tag.return = node), (node = tag);\n    else {\n      if (node === finishedWork) break;\n      for (; null === node.sibling; ) {\n        if (null === node.return || node.return === finishedWork) return !0;\n        node = node.return;\n      }\n      node.sibling.return = node.return;\n      node = node.sibling;\n    }\n  }\n  return !0;\n}\nfunction markRootSuspended(\n  root,\n  suspendedLanes,\n  spawnedLane,\n  didAttemptEntireTree\n) {\n  suspendedLanes &= ~workInProgressRootPingedLanes;\n  suspendedLanes &= ~workInProgressRootInterleavedUpdatedLanes;\n  root.suspendedLanes |= suspendedLanes;\n  root.pingedLanes &= ~suspendedLanes;\n  didAttemptEntireTree && (root.warmLanes |= suspendedLanes);\n  didAttemptEntireTree = root.expirationTimes;\n  for (var lanes = suspendedLanes; 0 < lanes; ) {\n    var index$4 = 31 - clz32(lanes),\n      lane = 1 << index$4;\n    didAttemptEntireTree[index$4] = -1;\n    lanes &= ~lane;\n  }\n  0 !== spawnedLane &&\n    markSpawnedDeferredLane(root, spawnedLane, suspendedLanes);\n}\nfunction flushSyncWork$1() {\n  return 0 === (executionContext & 6)\n    ? (flushSyncWorkAcrossRoots_impl(0, !1), !1)\n    : !0;\n}\nfunction resetWorkInProgressStack() {\n  if (null !== workInProgress) {\n    if (0 === workInProgressSuspendedReason)\n      var interruptedWork = workInProgress.return;\n    else\n      (interruptedWork = workInProgress),\n        (lastContextDependency = currentlyRenderingFiber$1 = null),\n        resetHooksOnUnwind(interruptedWork),\n        (thenableState = null),\n        (thenableIndexCounter = 0),\n        (interruptedWork = workInProgress);\n    for (; null !== interruptedWork; )\n      unwindInterruptedWork(interruptedWork.alternate, interruptedWork),\n        (interruptedWork = interruptedWork.return);\n    workInProgress = null;\n  }\n}\nfunction prepareFreshStack(root, lanes) {\n  var timeoutHandle = root.timeoutHandle;\n  -1 !== timeoutHandle &&\n    ((root.timeoutHandle = -1), cancelTimeout(timeoutHandle));\n  timeoutHandle = root.cancelPendingCommit;\n  null !== timeoutHandle &&\n    ((root.cancelPendingCommit = null), timeoutHandle());\n  resetWorkInProgressStack();\n  workInProgressRoot = root;\n  workInProgress = timeoutHandle = createWorkInProgress(root.current, null);\n  workInProgressRootRenderLanes = lanes;\n  workInProgressSuspendedReason = 0;\n  workInProgressThrownValue = null;\n  workInProgressRootDidSkipSuspendedSiblings = !1;\n  workInProgressRootIsPrerendering = checkIfRootIsPrerendering(root, lanes);\n  workInProgressRootDidAttachPingListener = !1;\n  workInProgressSuspendedRetryLanes =\n    workInProgressDeferredLane =\n    workInProgressRootPingedLanes =\n    workInProgressRootInterleavedUpdatedLanes =\n    workInProgressRootSkippedLanes =\n    workInProgressRootExitStatus =\n      0;\n  workInProgressRootRecoverableErrors = workInProgressRootConcurrentErrors =\n    null;\n  workInProgressRootDidIncludeRecursiveRenderUpdate = !1;\n  0 !== (lanes & 8) && (lanes |= lanes & 32);\n  var allEntangledLanes = root.entangledLanes;\n  if (0 !== allEntangledLanes)\n    for (\n      root = root.entanglements, allEntangledLanes &= lanes;\n      0 < allEntangledLanes;\n\n    ) {\n      var index$2 = 31 - clz32(allEntangledLanes),\n        lane = 1 << index$2;\n      lanes |= root[index$2];\n      allEntangledLanes &= ~lane;\n    }\n  entangledRenderLanes = lanes;\n  finishQueueingConcurrentUpdates();\n  return timeoutHandle;\n}\nfunction handleThrow(root, thrownValue) {\n  currentlyRenderingFiber = null;\n  ReactSharedInternals.H = ContextOnlyDispatcher;\n  thrownValue === SuspenseException || thrownValue === SuspenseActionException\n    ? ((thrownValue = getSuspendedThenable()),\n      (workInProgressSuspendedReason = 3))\n    : thrownValue === SuspenseyCommitException\n      ? ((thrownValue = getSuspendedThenable()),\n        (workInProgressSuspendedReason = 4))\n      : (workInProgressSuspendedReason =\n          thrownValue === SelectiveHydrationException\n            ? 8\n            : null !== thrownValue &&\n                \"object\" === typeof thrownValue &&\n                \"function\" === typeof thrownValue.then\n              ? 6\n              : 1);\n  workInProgressThrownValue = thrownValue;\n  null === workInProgress &&\n    ((workInProgressRootExitStatus = 1),\n    logUncaughtError(\n      root,\n      createCapturedValueAtFiber(thrownValue, root.current)\n    ));\n}\nfunction pushDispatcher() {\n  var prevDispatcher = ReactSharedInternals.H;\n  ReactSharedInternals.H = ContextOnlyDispatcher;\n  return null === prevDispatcher ? ContextOnlyDispatcher : prevDispatcher;\n}\nfunction pushAsyncDispatcher() {\n  var prevAsyncDispatcher = ReactSharedInternals.A;\n  ReactSharedInternals.A = DefaultAsyncDispatcher;\n  return prevAsyncDispatcher;\n}\nfunction renderDidSuspendDelayIfPossible() {\n  workInProgressRootExitStatus = 4;\n  workInProgressRootDidSkipSuspendedSiblings ||\n    ((workInProgressRootRenderLanes & 4194048) !==\n      workInProgressRootRenderLanes &&\n      null !== suspenseHandlerStackCursor.current) ||\n    (workInProgressRootIsPrerendering = !0);\n  (0 === (workInProgressRootSkippedLanes & 134217727) &&\n    0 === (workInProgressRootInterleavedUpdatedLanes & 134217727)) ||\n    null === workInProgressRoot ||\n    markRootSuspended(\n      workInProgressRoot,\n      workInProgressRootRenderLanes,\n      workInProgressDeferredLane,\n      !1\n    );\n}\nfunction renderRootSync(root, lanes, shouldYieldForPrerendering) {\n  var prevExecutionContext = executionContext;\n  executionContext |= 2;\n  var prevDispatcher = pushDispatcher(),\n    prevAsyncDispatcher = pushAsyncDispatcher();\n  if (workInProgressRoot !== root || workInProgressRootRenderLanes !== lanes)\n    (workInProgressTransitions = null), prepareFreshStack(root, lanes);\n  lanes = !1;\n  var exitStatus = workInProgressRootExitStatus;\n  a: do\n    try {\n      if (0 !== workInProgressSuspendedReason && null !== workInProgress) {\n        var unitOfWork = workInProgress,\n          thrownValue = workInProgressThrownValue;\n        switch (workInProgressSuspendedReason) {\n          case 8:\n            resetWorkInProgressStack();\n            exitStatus = 6;\n            break a;\n          case 3:\n          case 2:\n          case 9:\n          case 6:\n            null === suspenseHandlerStackCursor.current && (lanes = !0);\n            var reason = workInProgressSuspendedReason;\n            workInProgressSuspendedReason = 0;\n            workInProgressThrownValue = null;\n            throwAndUnwindWorkLoop(root, unitOfWork, thrownValue, reason);\n            if (\n              shouldYieldForPrerendering &&\n              workInProgressRootIsPrerendering\n            ) {\n              exitStatus = 0;\n              break a;\n            }\n            break;\n          default:\n            (reason = workInProgressSuspendedReason),\n              (workInProgressSuspendedReason = 0),\n              (workInProgressThrownValue = null),\n              throwAndUnwindWorkLoop(root, unitOfWork, thrownValue, reason);\n        }\n      }\n      workLoopSync();\n      exitStatus = workInProgressRootExitStatus;\n      break;\n    } catch (thrownValue$167) {\n      handleThrow(root, thrownValue$167);\n    }\n  while (1);\n  lanes && root.shellSuspendCounter++;\n  lastContextDependency = currentlyRenderingFiber$1 = null;\n  executionContext = prevExecutionContext;\n  ReactSharedInternals.H = prevDispatcher;\n  ReactSharedInternals.A = prevAsyncDispatcher;\n  null === workInProgress &&\n    ((workInProgressRoot = null),\n    (workInProgressRootRenderLanes = 0),\n    finishQueueingConcurrentUpdates());\n  return exitStatus;\n}\nfunction workLoopSync() {\n  for (; null !== workInProgress; ) performUnitOfWork(workInProgress);\n}\nfunction renderRootConcurrent(root, lanes) {\n  var prevExecutionContext = executionContext;\n  executionContext |= 2;\n  var prevDispatcher = pushDispatcher(),\n    prevAsyncDispatcher = pushAsyncDispatcher();\n  workInProgressRoot !== root || workInProgressRootRenderLanes !== lanes\n    ? ((workInProgressTransitions = null),\n      (workInProgressRootRenderTargetTime = now() + 500),\n      prepareFreshStack(root, lanes))\n    : (workInProgressRootIsPrerendering = checkIfRootIsPrerendering(\n        root,\n        lanes\n      ));\n  a: do\n    try {\n      if (0 !== workInProgressSuspendedReason && null !== workInProgress) {\n        lanes = workInProgress;\n        var thrownValue = workInProgressThrownValue;\n        b: switch (workInProgressSuspendedReason) {\n          case 1:\n            workInProgressSuspendedReason = 0;\n            workInProgressThrownValue = null;\n            throwAndUnwindWorkLoop(root, lanes, thrownValue, 1);\n            break;\n          case 2:\n          case 9:\n            if (isThenableResolved(thrownValue)) {\n              workInProgressSuspendedReason = 0;\n              workInProgressThrownValue = null;\n              replaySuspendedUnitOfWork(lanes);\n              break;\n            }\n            lanes = function () {\n              (2 !== workInProgressSuspendedReason &&\n                9 !== workInProgressSuspendedReason) ||\n                workInProgressRoot !== root ||\n                (workInProgressSuspendedReason = 7);\n              ensureRootIsScheduled(root);\n            };\n            thrownValue.then(lanes, lanes);\n            break a;\n          case 3:\n            workInProgressSuspendedReason = 7;\n            break a;\n          case 4:\n            workInProgressSuspendedReason = 5;\n            break a;\n          case 7:\n            isThenableResolved(thrownValue)\n              ? ((workInProgressSuspendedReason = 0),\n                (workInProgressThrownValue = null),\n                replaySuspendedUnitOfWork(lanes))\n              : ((workInProgressSuspendedReason = 0),\n                (workInProgressThrownValue = null),\n                throwAndUnwindWorkLoop(root, lanes, thrownValue, 7));\n            break;\n          case 5:\n            var resource = null;\n            switch (workInProgress.tag) {\n              case 26:\n                resource = workInProgress.memoizedState;\n              case 5:\n              case 27:\n                var hostFiber = workInProgress;\n                if (resource ? preloadResource(resource) : 1) {\n                  workInProgressSuspendedReason = 0;\n                  workInProgressThrownValue = null;\n                  var sibling = hostFiber.sibling;\n                  if (null !== sibling) workInProgress = sibling;\n                  else {\n                    var returnFiber = hostFiber.return;\n                    null !== returnFiber\n                      ? ((workInProgress = returnFiber),\n                        completeUnitOfWork(returnFiber))\n                      : (workInProgress = null);\n                  }\n                  break b;\n                }\n            }\n            workInProgressSuspendedReason = 0;\n            workInProgressThrownValue = null;\n            throwAndUnwindWorkLoop(root, lanes, thrownValue, 5);\n            break;\n          case 6:\n            workInProgressSuspendedReason = 0;\n            workInProgressThrownValue = null;\n            throwAndUnwindWorkLoop(root, lanes, thrownValue, 6);\n            break;\n          case 8:\n            resetWorkInProgressStack();\n            workInProgressRootExitStatus = 6;\n            break a;\n          default:\n            throw Error(formatProdErrorMessage(462));\n        }\n      }\n      workLoopConcurrentByScheduler();\n      break;\n    } catch (thrownValue$169) {\n      handleThrow(root, thrownValue$169);\n    }\n  while (1);\n  lastContextDependency = currentlyRenderingFiber$1 = null;\n  ReactSharedInternals.H = prevDispatcher;\n  ReactSharedInternals.A = prevAsyncDispatcher;\n  executionContext = prevExecutionContext;\n  if (null !== workInProgress) return 0;\n  workInProgressRoot = null;\n  workInProgressRootRenderLanes = 0;\n  finishQueueingConcurrentUpdates();\n  return workInProgressRootExitStatus;\n}\nfunction workLoopConcurrentByScheduler() {\n  for (; null !== workInProgress && !shouldYield(); )\n    performUnitOfWork(workInProgress);\n}\nfunction performUnitOfWork(unitOfWork) {\n  var next = beginWork(unitOfWork.alternate, unitOfWork, entangledRenderLanes);\n  unitOfWork.memoizedProps = unitOfWork.pendingProps;\n  null === next ? completeUnitOfWork(unitOfWork) : (workInProgress = next);\n}\nfunction replaySuspendedUnitOfWork(unitOfWork) {\n  var next = unitOfWork;\n  var current = next.alternate;\n  switch (next.tag) {\n    case 15:\n    case 0:\n      next = replayFunctionComponent(\n        current,\n        next,\n        next.pendingProps,\n        next.type,\n        void 0,\n        workInProgressRootRenderLanes\n      );\n      break;\n    case 11:\n      next = replayFunctionComponent(\n        current,\n        next,\n        next.pendingProps,\n        next.type.render,\n        next.ref,\n        workInProgressRootRenderLanes\n      );\n      break;\n    case 5:\n      resetHooksOnUnwind(next);\n    default:\n      unwindInterruptedWork(current, next),\n        (next = workInProgress =\n          resetWorkInProgress(next, entangledRenderLanes)),\n        (next = beginWork(current, next, entangledRenderLanes));\n  }\n  unitOfWork.memoizedProps = unitOfWork.pendingProps;\n  null === next ? completeUnitOfWork(unitOfWork) : (workInProgress = next);\n}\nfunction throwAndUnwindWorkLoop(\n  root,\n  unitOfWork,\n  thrownValue,\n  suspendedReason\n) {\n  lastContextDependency = currentlyRenderingFiber$1 = null;\n  resetHooksOnUnwind(unitOfWork);\n  thenableState = null;\n  thenableIndexCounter = 0;\n  var returnFiber = unitOfWork.return;\n  try {\n    if (\n      throwException(\n        root,\n        returnFiber,\n        unitOfWork,\n        thrownValue,\n        workInProgressRootRenderLanes\n      )\n    ) {\n      workInProgressRootExitStatus = 1;\n      logUncaughtError(\n        root,\n        createCapturedValueAtFiber(thrownValue, root.current)\n      );\n      workInProgress = null;\n      return;\n    }\n  } catch (error) {\n    if (null !== returnFiber) throw ((workInProgress = returnFiber), error);\n    workInProgressRootExitStatus = 1;\n    logUncaughtError(\n      root,\n      createCapturedValueAtFiber(thrownValue, root.current)\n    );\n    workInProgress = null;\n    return;\n  }\n  if (unitOfWork.flags & 32768) {\n    if (isHydrating || 1 === suspendedReason) root = !0;\n    else if (\n      workInProgressRootIsPrerendering ||\n      0 !== (workInProgressRootRenderLanes & 536870912)\n    )\n      root = !1;\n    else if (\n      ((workInProgressRootDidSkipSuspendedSiblings = root = !0),\n      2 === suspendedReason ||\n        9 === suspendedReason ||\n        3 === suspendedReason ||\n        6 === suspendedReason)\n    )\n      (suspendedReason = suspenseHandlerStackCursor.current),\n        null !== suspendedReason &&\n          13 === suspendedReason.tag &&\n          (suspendedReason.flags |= 16384);\n    unwindUnitOfWork(unitOfWork, root);\n  } else completeUnitOfWork(unitOfWork);\n}\nfunction completeUnitOfWork(unitOfWork) {\n  var completedWork = unitOfWork;\n  do {\n    if (0 !== (completedWork.flags & 32768)) {\n      unwindUnitOfWork(\n        completedWork,\n        workInProgressRootDidSkipSuspendedSiblings\n      );\n      return;\n    }\n    unitOfWork = completedWork.return;\n    var next = completeWork(\n      completedWork.alternate,\n      completedWork,\n      entangledRenderLanes\n    );\n    if (null !== next) {\n      workInProgress = next;\n      return;\n    }\n    completedWork = completedWork.sibling;\n    if (null !== completedWork) {\n      workInProgress = completedWork;\n      return;\n    }\n    workInProgress = completedWork = unitOfWork;\n  } while (null !== completedWork);\n  0 === workInProgressRootExitStatus && (workInProgressRootExitStatus = 5);\n}\nfunction unwindUnitOfWork(unitOfWork, skipSiblings) {\n  do {\n    var next = unwindWork(unitOfWork.alternate, unitOfWork);\n    if (null !== next) {\n      next.flags &= 32767;\n      workInProgress = next;\n      return;\n    }\n    next = unitOfWork.return;\n    null !== next &&\n      ((next.flags |= 32768), (next.subtreeFlags = 0), (next.deletions = null));\n    if (\n      !skipSiblings &&\n      ((unitOfWork = unitOfWork.sibling), null !== unitOfWork)\n    ) {\n      workInProgress = unitOfWork;\n      return;\n    }\n    workInProgress = unitOfWork = next;\n  } while (null !== unitOfWork);\n  workInProgressRootExitStatus = 6;\n  workInProgress = null;\n}\nfunction commitRoot(\n  root,\n  finishedWork,\n  lanes,\n  recoverableErrors,\n  transitions,\n  didIncludeRenderPhaseUpdate,\n  spawnedLane,\n  updatedLanes,\n  suspendedRetryLanes\n) {\n  root.cancelPendingCommit = null;\n  do flushPendingEffects();\n  while (0 !== pendingEffectsStatus);\n  if (0 !== (executionContext & 6)) throw Error(formatProdErrorMessage(327));\n  if (null !== finishedWork) {\n    if (finishedWork === root.current) throw Error(formatProdErrorMessage(177));\n    didIncludeRenderPhaseUpdate = finishedWork.lanes | finishedWork.childLanes;\n    didIncludeRenderPhaseUpdate |= concurrentlyUpdatedLanes;\n    markRootFinished(\n      root,\n      lanes,\n      didIncludeRenderPhaseUpdate,\n      spawnedLane,\n      updatedLanes,\n      suspendedRetryLanes\n    );\n    root === workInProgressRoot &&\n      ((workInProgress = workInProgressRoot = null),\n      (workInProgressRootRenderLanes = 0));\n    pendingFinishedWork = finishedWork;\n    pendingEffectsRoot = root;\n    pendingEffectsLanes = lanes;\n    pendingEffectsRemainingLanes = didIncludeRenderPhaseUpdate;\n    pendingPassiveTransitions = transitions;\n    pendingRecoverableErrors = recoverableErrors;\n    0 !== (finishedWork.subtreeFlags & 10256) ||\n    0 !== (finishedWork.flags & 10256)\n      ? ((root.callbackNode = null),\n        (root.callbackPriority = 0),\n        scheduleCallback$1(NormalPriority$1, function () {\n          flushPassiveEffects(!0);\n          return null;\n        }))\n      : ((root.callbackNode = null), (root.callbackPriority = 0));\n    recoverableErrors = 0 !== (finishedWork.flags & 13878);\n    if (0 !== (finishedWork.subtreeFlags & 13878) || recoverableErrors) {\n      recoverableErrors = ReactSharedInternals.T;\n      ReactSharedInternals.T = null;\n      transitions = ReactDOMSharedInternals.p;\n      ReactDOMSharedInternals.p = 2;\n      spawnedLane = executionContext;\n      executionContext |= 4;\n      try {\n        commitBeforeMutationEffects(root, finishedWork, lanes);\n      } finally {\n        (executionContext = spawnedLane),\n          (ReactDOMSharedInternals.p = transitions),\n          (ReactSharedInternals.T = recoverableErrors);\n      }\n    }\n    pendingEffectsStatus = 1;\n    flushMutationEffects();\n    flushLayoutEffects();\n    flushSpawnedWork();\n  }\n}\nfunction flushMutationEffects() {\n  if (1 === pendingEffectsStatus) {\n    pendingEffectsStatus = 0;\n    var root = pendingEffectsRoot,\n      finishedWork = pendingFinishedWork,\n      rootMutationHasEffect = 0 !== (finishedWork.flags & 13878);\n    if (0 !== (finishedWork.subtreeFlags & 13878) || rootMutationHasEffect) {\n      rootMutationHasEffect = ReactSharedInternals.T;\n      ReactSharedInternals.T = null;\n      var previousPriority = ReactDOMSharedInternals.p;\n      ReactDOMSharedInternals.p = 2;\n      var prevExecutionContext = executionContext;\n      executionContext |= 4;\n      try {\n        commitMutationEffectsOnFiber(finishedWork, root);\n        var priorSelectionInformation = selectionInformation,\n          curFocusedElem = getActiveElementDeep(root.containerInfo),\n          priorFocusedElem = priorSelectionInformation.focusedElem,\n          priorSelectionRange = priorSelectionInformation.selectionRange;\n        if (\n          curFocusedElem !== priorFocusedElem &&\n          priorFocusedElem &&\n          priorFocusedElem.ownerDocument &&\n          containsNode(\n            priorFocusedElem.ownerDocument.documentElement,\n            priorFocusedElem\n          )\n        ) {\n          if (\n            null !== priorSelectionRange &&\n            hasSelectionCapabilities(priorFocusedElem)\n          ) {\n            var start = priorSelectionRange.start,\n              end = priorSelectionRange.end;\n            void 0 === end && (end = start);\n            if (\"selectionStart\" in priorFocusedElem)\n              (priorFocusedElem.selectionStart = start),\n                (priorFocusedElem.selectionEnd = Math.min(\n                  end,\n                  priorFocusedElem.value.length\n                ));\n            else {\n              var doc = priorFocusedElem.ownerDocument || document,\n                win = (doc && doc.defaultView) || window;\n              if (win.getSelection) {\n                var selection = win.getSelection(),\n                  length = priorFocusedElem.textContent.length,\n                  start$jscomp$0 = Math.min(priorSelectionRange.start, length),\n                  end$jscomp$0 =\n                    void 0 === priorSelectionRange.end\n                      ? start$jscomp$0\n                      : Math.min(priorSelectionRange.end, length);\n                !selection.extend &&\n                  start$jscomp$0 > end$jscomp$0 &&\n                  ((curFocusedElem = end$jscomp$0),\n                  (end$jscomp$0 = start$jscomp$0),\n                  (start$jscomp$0 = curFocusedElem));\n                var startMarker = getNodeForCharacterOffset(\n                    priorFocusedElem,\n                    start$jscomp$0\n                  ),\n                  endMarker = getNodeForCharacterOffset(\n                    priorFocusedElem,\n                    end$jscomp$0\n                  );\n                if (\n                  startMarker &&\n                  endMarker &&\n                  (1 !== selection.rangeCount ||\n                    selection.anchorNode !== startMarker.node ||\n                    selection.anchorOffset !== startMarker.offset ||\n                    selection.focusNode !== endMarker.node ||\n                    selection.focusOffset !== endMarker.offset)\n                ) {\n                  var range = doc.createRange();\n                  range.setStart(startMarker.node, startMarker.offset);\n                  selection.removeAllRanges();\n                  start$jscomp$0 > end$jscomp$0\n                    ? (selection.addRange(range),\n                      selection.extend(endMarker.node, endMarker.offset))\n                    : (range.setEnd(endMarker.node, endMarker.offset),\n                      selection.addRange(range));\n                }\n              }\n            }\n          }\n          doc = [];\n          for (\n            selection = priorFocusedElem;\n            (selection = selection.parentNode);\n\n          )\n            1 === selection.nodeType &&\n              doc.push({\n                element: selection,\n                left: selection.scrollLeft,\n                top: selection.scrollTop\n              });\n          \"function\" === typeof priorFocusedElem.focus &&\n            priorFocusedElem.focus();\n          for (\n            priorFocusedElem = 0;\n            priorFocusedElem < doc.length;\n            priorFocusedElem++\n          ) {\n            var info = doc[priorFocusedElem];\n            info.element.scrollLeft = info.left;\n            info.element.scrollTop = info.top;\n          }\n        }\n        _enabled = !!eventsEnabled;\n        selectionInformation = eventsEnabled = null;\n      } finally {\n        (executionContext = prevExecutionContext),\n          (ReactDOMSharedInternals.p = previousPriority),\n          (ReactSharedInternals.T = rootMutationHasEffect);\n      }\n    }\n    root.current = finishedWork;\n    pendingEffectsStatus = 2;\n  }\n}\nfunction flushLayoutEffects() {\n  if (2 === pendingEffectsStatus) {\n    pendingEffectsStatus = 0;\n    var root = pendingEffectsRoot,\n      finishedWork = pendingFinishedWork,\n      rootHasLayoutEffect = 0 !== (finishedWork.flags & 8772);\n    if (0 !== (finishedWork.subtreeFlags & 8772) || rootHasLayoutEffect) {\n      rootHasLayoutEffect = ReactSharedInternals.T;\n      ReactSharedInternals.T = null;\n      var previousPriority = ReactDOMSharedInternals.p;\n      ReactDOMSharedInternals.p = 2;\n      var prevExecutionContext = executionContext;\n      executionContext |= 4;\n      try {\n        commitLayoutEffectOnFiber(root, finishedWork.alternate, finishedWork);\n      } finally {\n        (executionContext = prevExecutionContext),\n          (ReactDOMSharedInternals.p = previousPriority),\n          (ReactSharedInternals.T = rootHasLayoutEffect);\n      }\n    }\n    pendingEffectsStatus = 3;\n  }\n}\nfunction flushSpawnedWork() {\n  if (4 === pendingEffectsStatus || 3 === pendingEffectsStatus) {\n    pendingEffectsStatus = 0;\n    requestPaint();\n    var root = pendingEffectsRoot,\n      finishedWork = pendingFinishedWork,\n      lanes = pendingEffectsLanes,\n      recoverableErrors = pendingRecoverableErrors;\n    0 !== (finishedWork.subtreeFlags & 10256) ||\n    0 !== (finishedWork.flags & 10256)\n      ? (pendingEffectsStatus = 5)\n      : ((pendingEffectsStatus = 0),\n        (pendingFinishedWork = pendingEffectsRoot = null),\n        releaseRootPooledCache(root, root.pendingLanes));\n    var remainingLanes = root.pendingLanes;\n    0 === remainingLanes && (legacyErrorBoundariesThatAlreadyFailed = null);\n    lanesToEventPriority(lanes);\n    finishedWork = finishedWork.stateNode;\n    if (injectedHook && \"function\" === typeof injectedHook.onCommitFiberRoot)\n      try {\n        injectedHook.onCommitFiberRoot(\n          rendererID,\n          finishedWork,\n          void 0,\n          128 === (finishedWork.current.flags & 128)\n        );\n      } catch (err) {}\n    if (null !== recoverableErrors) {\n      finishedWork = ReactSharedInternals.T;\n      remainingLanes = ReactDOMSharedInternals.p;\n      ReactDOMSharedInternals.p = 2;\n      ReactSharedInternals.T = null;\n      try {\n        for (\n          var onRecoverableError = root.onRecoverableError, i = 0;\n          i < recoverableErrors.length;\n          i++\n        ) {\n          var recoverableError = recoverableErrors[i];\n          onRecoverableError(recoverableError.value, {\n            componentStack: recoverableError.stack\n          });\n        }\n      } finally {\n        (ReactSharedInternals.T = finishedWork),\n          (ReactDOMSharedInternals.p = remainingLanes);\n      }\n    }\n    0 !== (pendingEffectsLanes & 3) && flushPendingEffects();\n    ensureRootIsScheduled(root);\n    remainingLanes = root.pendingLanes;\n    0 !== (lanes & 4194090) && 0 !== (remainingLanes & 42)\n      ? root === rootWithNestedUpdates\n        ? nestedUpdateCount++\n        : ((nestedUpdateCount = 0), (rootWithNestedUpdates = root))\n      : (nestedUpdateCount = 0);\n    flushSyncWorkAcrossRoots_impl(0, !1);\n  }\n}\nfunction releaseRootPooledCache(root, remainingLanes) {\n  0 === (root.pooledCacheLanes &= remainingLanes) &&\n    ((remainingLanes = root.pooledCache),\n    null != remainingLanes &&\n      ((root.pooledCache = null), releaseCache(remainingLanes)));\n}\nfunction flushPendingEffects(wasDelayedCommit) {\n  flushMutationEffects();\n  flushLayoutEffects();\n  flushSpawnedWork();\n  return flushPassiveEffects(wasDelayedCommit);\n}\nfunction flushPassiveEffects() {\n  if (5 !== pendingEffectsStatus) return !1;\n  var root = pendingEffectsRoot,\n    remainingLanes = pendingEffectsRemainingLanes;\n  pendingEffectsRemainingLanes = 0;\n  var renderPriority = lanesToEventPriority(pendingEffectsLanes),\n    prevTransition = ReactSharedInternals.T,\n    previousPriority = ReactDOMSharedInternals.p;\n  try {\n    ReactDOMSharedInternals.p = 32 > renderPriority ? 32 : renderPriority;\n    ReactSharedInternals.T = null;\n    renderPriority = pendingPassiveTransitions;\n    pendingPassiveTransitions = null;\n    var root$jscomp$0 = pendingEffectsRoot,\n      lanes = pendingEffectsLanes;\n    pendingEffectsStatus = 0;\n    pendingFinishedWork = pendingEffectsRoot = null;\n    pendingEffectsLanes = 0;\n    if (0 !== (executionContext & 6)) throw Error(formatProdErrorMessage(331));\n    var prevExecutionContext = executionContext;\n    executionContext |= 4;\n    commitPassiveUnmountOnFiber(root$jscomp$0.current);\n    commitPassiveMountOnFiber(\n      root$jscomp$0,\n      root$jscomp$0.current,\n      lanes,\n      renderPriority\n    );\n    executionContext = prevExecutionContext;\n    flushSyncWorkAcrossRoots_impl(0, !1);\n    if (\n      injectedHook &&\n      \"function\" === typeof injectedHook.onPostCommitFiberRoot\n    )\n      try {\n        injectedHook.onPostCommitFiberRoot(rendererID, root$jscomp$0);\n      } catch (err) {}\n    return !0;\n  } finally {\n    (ReactDOMSharedInternals.p = previousPriority),\n      (ReactSharedInternals.T = prevTransition),\n      releaseRootPooledCache(root, remainingLanes);\n  }\n}\nfunction captureCommitPhaseErrorOnRoot(rootFiber, sourceFiber, error) {\n  sourceFiber = createCapturedValueAtFiber(error, sourceFiber);\n  sourceFiber = createRootErrorUpdate(rootFiber.stateNode, sourceFiber, 2);\n  rootFiber = enqueueUpdate(rootFiber, sourceFiber, 2);\n  null !== rootFiber &&\n    (markRootUpdated$1(rootFiber, 2), ensureRootIsScheduled(rootFiber));\n}\nfunction captureCommitPhaseError(sourceFiber, nearestMountedAncestor, error) {\n  if (3 === sourceFiber.tag)\n    captureCommitPhaseErrorOnRoot(sourceFiber, sourceFiber, error);\n  else\n    for (; null !== nearestMountedAncestor; ) {\n      if (3 === nearestMountedAncestor.tag) {\n        captureCommitPhaseErrorOnRoot(\n          nearestMountedAncestor,\n          sourceFiber,\n          error\n        );\n        break;\n      } else if (1 === nearestMountedAncestor.tag) {\n        var instance = nearestMountedAncestor.stateNode;\n        if (\n          \"function\" ===\n            typeof nearestMountedAncestor.type.getDerivedStateFromError ||\n          (\"function\" === typeof instance.componentDidCatch &&\n            (null === legacyErrorBoundariesThatAlreadyFailed ||\n              !legacyErrorBoundariesThatAlreadyFailed.has(instance)))\n        ) {\n          sourceFiber = createCapturedValueAtFiber(error, sourceFiber);\n          error = createClassErrorUpdate(2);\n          instance = enqueueUpdate(nearestMountedAncestor, error, 2);\n          null !== instance &&\n            (initializeClassErrorUpdate(\n              error,\n              instance,\n              nearestMountedAncestor,\n              sourceFiber\n            ),\n            markRootUpdated$1(instance, 2),\n            ensureRootIsScheduled(instance));\n          break;\n        }\n      }\n      nearestMountedAncestor = nearestMountedAncestor.return;\n    }\n}\nfunction attachPingListener(root, wakeable, lanes) {\n  var pingCache = root.pingCache;\n  if (null === pingCache) {\n    pingCache = root.pingCache = new PossiblyWeakMap();\n    var threadIDs = new Set();\n    pingCache.set(wakeable, threadIDs);\n  } else\n    (threadIDs = pingCache.get(wakeable)),\n      void 0 === threadIDs &&\n        ((threadIDs = new Set()), pingCache.set(wakeable, threadIDs));\n  threadIDs.has(lanes) ||\n    ((workInProgressRootDidAttachPingListener = !0),\n    threadIDs.add(lanes),\n    (root = pingSuspendedRoot.bind(null, root, wakeable, lanes)),\n    wakeable.then(root, root));\n}\nfunction pingSuspendedRoot(root, wakeable, pingedLanes) {\n  var pingCache = root.pingCache;\n  null !== pingCache && pingCache.delete(wakeable);\n  root.pingedLanes |= root.suspendedLanes & pingedLanes;\n  root.warmLanes &= ~pingedLanes;\n  workInProgressRoot === root &&\n    (workInProgressRootRenderLanes & pingedLanes) === pingedLanes &&\n    (4 === workInProgressRootExitStatus ||\n    (3 === workInProgressRootExitStatus &&\n      (workInProgressRootRenderLanes & 62914560) ===\n        workInProgressRootRenderLanes &&\n      300 > now() - globalMostRecentFallbackTime)\n      ? 0 === (executionContext & 2) && prepareFreshStack(root, 0)\n      : (workInProgressRootPingedLanes |= pingedLanes),\n    workInProgressSuspendedRetryLanes === workInProgressRootRenderLanes &&\n      (workInProgressSuspendedRetryLanes = 0));\n  ensureRootIsScheduled(root);\n}\nfunction retryTimedOutBoundary(boundaryFiber, retryLane) {\n  0 === retryLane && (retryLane = claimNextRetryLane());\n  boundaryFiber = enqueueConcurrentRenderForLane(boundaryFiber, retryLane);\n  null !== boundaryFiber &&\n    (markRootUpdated$1(boundaryFiber, retryLane),\n    ensureRootIsScheduled(boundaryFiber));\n}\nfunction retryDehydratedSuspenseBoundary(boundaryFiber) {\n  var suspenseState = boundaryFiber.memoizedState,\n    retryLane = 0;\n  null !== suspenseState && (retryLane = suspenseState.retryLane);\n  retryTimedOutBoundary(boundaryFiber, retryLane);\n}\nfunction resolveRetryWakeable(boundaryFiber, wakeable) {\n  var retryLane = 0;\n  switch (boundaryFiber.tag) {\n    case 13:\n      var retryCache = boundaryFiber.stateNode;\n      var suspenseState = boundaryFiber.memoizedState;\n      null !== suspenseState && (retryLane = suspenseState.retryLane);\n      break;\n    case 19:\n      retryCache = boundaryFiber.stateNode;\n      break;\n    case 22:\n      retryCache = boundaryFiber.stateNode._retryCache;\n      break;\n    default:\n      throw Error(formatProdErrorMessage(314));\n  }\n  null !== retryCache && retryCache.delete(wakeable);\n  retryTimedOutBoundary(boundaryFiber, retryLane);\n}\nfunction scheduleCallback$1(priorityLevel, callback) {\n  return scheduleCallback$3(priorityLevel, callback);\n}\nvar firstScheduledRoot = null,\n  lastScheduledRoot = null,\n  didScheduleMicrotask = !1,\n  mightHavePendingSyncWork = !1,\n  isFlushingWork = !1,\n  currentEventTransitionLane = 0;\nfunction ensureRootIsScheduled(root) {\n  root !== lastScheduledRoot &&\n    null === root.next &&\n    (null === lastScheduledRoot\n      ? (firstScheduledRoot = lastScheduledRoot = root)\n      : (lastScheduledRoot = lastScheduledRoot.next = root));\n  mightHavePendingSyncWork = !0;\n  didScheduleMicrotask ||\n    ((didScheduleMicrotask = !0), scheduleImmediateRootScheduleTask());\n}\nfunction flushSyncWorkAcrossRoots_impl(syncTransitionLanes, onlyLegacy) {\n  if (!isFlushingWork && mightHavePendingSyncWork) {\n    isFlushingWork = !0;\n    do {\n      var didPerformSomeWork = !1;\n      for (var root$174 = firstScheduledRoot; null !== root$174; ) {\n        if (!onlyLegacy)\n          if (0 !== syncTransitionLanes) {\n            var pendingLanes = root$174.pendingLanes;\n            if (0 === pendingLanes) var JSCompiler_inline_result = 0;\n            else {\n              var suspendedLanes = root$174.suspendedLanes,\n                pingedLanes = root$174.pingedLanes;\n              JSCompiler_inline_result =\n                (1 << (31 - clz32(42 | syncTransitionLanes) + 1)) - 1;\n              JSCompiler_inline_result &=\n                pendingLanes & ~(suspendedLanes & ~pingedLanes);\n              JSCompiler_inline_result =\n                JSCompiler_inline_result & 201326741\n                  ? (JSCompiler_inline_result & 201326741) | 1\n                  : JSCompiler_inline_result\n                    ? JSCompiler_inline_result | 2\n                    : 0;\n            }\n            0 !== JSCompiler_inline_result &&\n              ((didPerformSomeWork = !0),\n              performSyncWorkOnRoot(root$174, JSCompiler_inline_result));\n          } else\n            (JSCompiler_inline_result = workInProgressRootRenderLanes),\n              (JSCompiler_inline_result = getNextLanes(\n                root$174,\n                root$174 === workInProgressRoot ? JSCompiler_inline_result : 0,\n                null !== root$174.cancelPendingCommit ||\n                  -1 !== root$174.timeoutHandle\n              )),\n              0 === (JSCompiler_inline_result & 3) ||\n                checkIfRootIsPrerendering(root$174, JSCompiler_inline_result) ||\n                ((didPerformSomeWork = !0),\n                performSyncWorkOnRoot(root$174, JSCompiler_inline_result));\n        root$174 = root$174.next;\n      }\n    } while (didPerformSomeWork);\n    isFlushingWork = !1;\n  }\n}\nfunction processRootScheduleInImmediateTask() {\n  processRootScheduleInMicrotask();\n}\nfunction processRootScheduleInMicrotask() {\n  mightHavePendingSyncWork = didScheduleMicrotask = !1;\n  var syncTransitionLanes = 0;\n  0 !== currentEventTransitionLane &&\n    (shouldAttemptEagerTransition() &&\n      (syncTransitionLanes = currentEventTransitionLane),\n    (currentEventTransitionLane = 0));\n  for (\n    var currentTime = now(), prev = null, root = firstScheduledRoot;\n    null !== root;\n\n  ) {\n    var next = root.next,\n      nextLanes = scheduleTaskForRootDuringMicrotask(root, currentTime);\n    if (0 === nextLanes)\n      (root.next = null),\n        null === prev ? (firstScheduledRoot = next) : (prev.next = next),\n        null === next && (lastScheduledRoot = prev);\n    else if (\n      ((prev = root), 0 !== syncTransitionLanes || 0 !== (nextLanes & 3))\n    )\n      mightHavePendingSyncWork = !0;\n    root = next;\n  }\n  flushSyncWorkAcrossRoots_impl(syncTransitionLanes, !1);\n}\nfunction scheduleTaskForRootDuringMicrotask(root, currentTime) {\n  for (\n    var suspendedLanes = root.suspendedLanes,\n      pingedLanes = root.pingedLanes,\n      expirationTimes = root.expirationTimes,\n      lanes = root.pendingLanes & -62914561;\n    0 < lanes;\n\n  ) {\n    var index$3 = 31 - clz32(lanes),\n      lane = 1 << index$3,\n      expirationTime = expirationTimes[index$3];\n    if (-1 === expirationTime) {\n      if (0 === (lane & suspendedLanes) || 0 !== (lane & pingedLanes))\n        expirationTimes[index$3] = computeExpirationTime(lane, currentTime);\n    } else expirationTime <= currentTime && (root.expiredLanes |= lane);\n    lanes &= ~lane;\n  }\n  currentTime = workInProgressRoot;\n  suspendedLanes = workInProgressRootRenderLanes;\n  suspendedLanes = getNextLanes(\n    root,\n    root === currentTime ? suspendedLanes : 0,\n    null !== root.cancelPendingCommit || -1 !== root.timeoutHandle\n  );\n  pingedLanes = root.callbackNode;\n  if (\n    0 === suspendedLanes ||\n    (root === currentTime &&\n      (2 === workInProgressSuspendedReason ||\n        9 === workInProgressSuspendedReason)) ||\n    null !== root.cancelPendingCommit\n  )\n    return (\n      null !== pingedLanes &&\n        null !== pingedLanes &&\n        cancelCallback$1(pingedLanes),\n      (root.callbackNode = null),\n      (root.callbackPriority = 0)\n    );\n  if (\n    0 === (suspendedLanes & 3) ||\n    checkIfRootIsPrerendering(root, suspendedLanes)\n  ) {\n    currentTime = suspendedLanes & -suspendedLanes;\n    if (currentTime === root.callbackPriority) return currentTime;\n    null !== pingedLanes && cancelCallback$1(pingedLanes);\n    switch (lanesToEventPriority(suspendedLanes)) {\n      case 2:\n      case 8:\n        suspendedLanes = UserBlockingPriority;\n        break;\n      case 32:\n        suspendedLanes = NormalPriority$1;\n        break;\n      case 268435456:\n        suspendedLanes = IdlePriority;\n        break;\n      default:\n        suspendedLanes = NormalPriority$1;\n    }\n    pingedLanes = performWorkOnRootViaSchedulerTask.bind(null, root);\n    suspendedLanes = scheduleCallback$3(suspendedLanes, pingedLanes);\n    root.callbackPriority = currentTime;\n    root.callbackNode = suspendedLanes;\n    return currentTime;\n  }\n  null !== pingedLanes && null !== pingedLanes && cancelCallback$1(pingedLanes);\n  root.callbackPriority = 2;\n  root.callbackNode = null;\n  return 2;\n}\nfunction performWorkOnRootViaSchedulerTask(root, didTimeout) {\n  if (0 !== pendingEffectsStatus && 5 !== pendingEffectsStatus)\n    return (root.callbackNode = null), (root.callbackPriority = 0), null;\n  var originalCallbackNode = root.callbackNode;\n  if (flushPendingEffects(!0) && root.callbackNode !== originalCallbackNode)\n    return null;\n  var workInProgressRootRenderLanes$jscomp$0 = workInProgressRootRenderLanes;\n  workInProgressRootRenderLanes$jscomp$0 = getNextLanes(\n    root,\n    root === workInProgressRoot ? workInProgressRootRenderLanes$jscomp$0 : 0,\n    null !== root.cancelPendingCommit || -1 !== root.timeoutHandle\n  );\n  if (0 === workInProgressRootRenderLanes$jscomp$0) return null;\n  performWorkOnRoot(root, workInProgressRootRenderLanes$jscomp$0, didTimeout);\n  scheduleTaskForRootDuringMicrotask(root, now());\n  return null != root.callbackNode && root.callbackNode === originalCallbackNode\n    ? performWorkOnRootViaSchedulerTask.bind(null, root)\n    : null;\n}\nfunction performSyncWorkOnRoot(root, lanes) {\n  if (flushPendingEffects()) return null;\n  performWorkOnRoot(root, lanes, !0);\n}\nfunction scheduleImmediateRootScheduleTask() {\n  scheduleMicrotask(function () {\n    0 !== (executionContext & 6)\n      ? scheduleCallback$3(\n          ImmediatePriority,\n          processRootScheduleInImmediateTask\n        )\n      : processRootScheduleInMicrotask();\n  });\n}\nfunction requestTransitionLane() {\n  0 === currentEventTransitionLane &&\n    (currentEventTransitionLane = claimNextTransitionLane());\n  return currentEventTransitionLane;\n}\nfunction coerceFormActionProp(actionProp) {\n  return null == actionProp ||\n    \"symbol\" === typeof actionProp ||\n    \"boolean\" === typeof actionProp\n    ? null\n    : \"function\" === typeof actionProp\n      ? actionProp\n      : sanitizeURL(\"\" + actionProp);\n}\nfunction createFormDataWithSubmitter(form, submitter) {\n  var temp = submitter.ownerDocument.createElement(\"input\");\n  temp.name = submitter.name;\n  temp.value = submitter.value;\n  form.id && temp.setAttribute(\"form\", form.id);\n  submitter.parentNode.insertBefore(temp, submitter);\n  form = new FormData(form);\n  temp.parentNode.removeChild(temp);\n  return form;\n}\nfunction extractEvents$1(\n  dispatchQueue,\n  domEventName,\n  maybeTargetInst,\n  nativeEvent,\n  nativeEventTarget\n) {\n  if (\n    \"submit\" === domEventName &&\n    maybeTargetInst &&\n    maybeTargetInst.stateNode === nativeEventTarget\n  ) {\n    var action = coerceFormActionProp(\n        (nativeEventTarget[internalPropsKey] || null).action\n      ),\n      submitter = nativeEvent.submitter;\n    submitter &&\n      ((domEventName = (domEventName = submitter[internalPropsKey] || null)\n        ? coerceFormActionProp(domEventName.formAction)\n        : submitter.getAttribute(\"formAction\")),\n      null !== domEventName && ((action = domEventName), (submitter = null)));\n    var event = new SyntheticEvent(\n      \"action\",\n      \"action\",\n      null,\n      nativeEvent,\n      nativeEventTarget\n    );\n    dispatchQueue.push({\n      event: event,\n      listeners: [\n        {\n          instance: null,\n          listener: function () {\n            if (nativeEvent.defaultPrevented) {\n              if (0 !== currentEventTransitionLane) {\n                var formData = submitter\n                  ? createFormDataWithSubmitter(nativeEventTarget, submitter)\n                  : new FormData(nativeEventTarget);\n                startHostTransition(\n                  maybeTargetInst,\n                  {\n                    pending: !0,\n                    data: formData,\n                    method: nativeEventTarget.method,\n                    action: action\n                  },\n                  null,\n                  formData\n                );\n              }\n            } else\n              \"function\" === typeof action &&\n                (event.preventDefault(),\n                (formData = submitter\n                  ? createFormDataWithSubmitter(nativeEventTarget, submitter)\n                  : new FormData(nativeEventTarget)),\n                startHostTransition(\n                  maybeTargetInst,\n                  {\n                    pending: !0,\n                    data: formData,\n                    method: nativeEventTarget.method,\n                    action: action\n                  },\n                  action,\n                  formData\n                ));\n          },\n          currentTarget: nativeEventTarget\n        }\n      ]\n    });\n  }\n}\nfor (\n  var i$jscomp$inline_1528 = 0;\n  i$jscomp$inline_1528 < simpleEventPluginEvents.length;\n  i$jscomp$inline_1528++\n) {\n  var eventName$jscomp$inline_1529 =\n      simpleEventPluginEvents[i$jscomp$inline_1528],\n    domEventName$jscomp$inline_1530 =\n      eventName$jscomp$inline_1529.toLowerCase(),\n    capitalizedEvent$jscomp$inline_1531 =\n      eventName$jscomp$inline_1529[0].toUpperCase() +\n      eventName$jscomp$inline_1529.slice(1);\n  registerSimpleEvent(\n    domEventName$jscomp$inline_1530,\n    \"on\" + capitalizedEvent$jscomp$inline_1531\n  );\n}\nregisterSimpleEvent(ANIMATION_END, \"onAnimationEnd\");\nregisterSimpleEvent(ANIMATION_ITERATION, \"onAnimationIteration\");\nregisterSimpleEvent(ANIMATION_START, \"onAnimationStart\");\nregisterSimpleEvent(\"dblclick\", \"onDoubleClick\");\nregisterSimpleEvent(\"focusin\", \"onFocus\");\nregisterSimpleEvent(\"focusout\", \"onBlur\");\nregisterSimpleEvent(TRANSITION_RUN, \"onTransitionRun\");\nregisterSimpleEvent(TRANSITION_START, \"onTransitionStart\");\nregisterSimpleEvent(TRANSITION_CANCEL, \"onTransitionCancel\");\nregisterSimpleEvent(TRANSITION_END, \"onTransitionEnd\");\nregisterDirectEvent(\"onMouseEnter\", [\"mouseout\", \"mouseover\"]);\nregisterDirectEvent(\"onMouseLeave\", [\"mouseout\", \"mouseover\"]);\nregisterDirectEvent(\"onPointerEnter\", [\"pointerout\", \"pointerover\"]);\nregisterDirectEvent(\"onPointerLeave\", [\"pointerout\", \"pointerover\"]);\nregisterTwoPhaseEvent(\n  \"onChange\",\n  \"change click focusin focusout input keydown keyup selectionchange\".split(\" \")\n);\nregisterTwoPhaseEvent(\n  \"onSelect\",\n  \"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\n    \" \"\n  )\n);\nregisterTwoPhaseEvent(\"onBeforeInput\", [\n  \"compositionend\",\n  \"keypress\",\n  \"textInput\",\n  \"paste\"\n]);\nregisterTwoPhaseEvent(\n  \"onCompositionEnd\",\n  \"compositionend focusout keydown keypress keyup mousedown\".split(\" \")\n);\nregisterTwoPhaseEvent(\n  \"onCompositionStart\",\n  \"compositionstart focusout keydown keypress keyup mousedown\".split(\" \")\n);\nregisterTwoPhaseEvent(\n  \"onCompositionUpdate\",\n  \"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \")\n);\nvar mediaEventTypes =\n    \"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting\".split(\n      \" \"\n    ),\n  nonDelegatedEvents = new Set(\n    \"beforetoggle cancel close invalid load scroll scrollend toggle\"\n      .split(\" \")\n      .concat(mediaEventTypes)\n  );\nfunction processDispatchQueue(dispatchQueue, eventSystemFlags) {\n  eventSystemFlags = 0 !== (eventSystemFlags & 4);\n  for (var i = 0; i < dispatchQueue.length; i++) {\n    var _dispatchQueue$i = dispatchQueue[i],\n      event = _dispatchQueue$i.event;\n    _dispatchQueue$i = _dispatchQueue$i.listeners;\n    a: {\n      var previousInstance = void 0;\n      if (eventSystemFlags)\n        for (\n          var i$jscomp$0 = _dispatchQueue$i.length - 1;\n          0 <= i$jscomp$0;\n          i$jscomp$0--\n        ) {\n          var _dispatchListeners$i = _dispatchQueue$i[i$jscomp$0],\n            instance = _dispatchListeners$i.instance,\n            currentTarget = _dispatchListeners$i.currentTarget;\n          _dispatchListeners$i = _dispatchListeners$i.listener;\n          if (instance !== previousInstance && event.isPropagationStopped())\n            break a;\n          previousInstance = _dispatchListeners$i;\n          event.currentTarget = currentTarget;\n          try {\n            previousInstance(event);\n          } catch (error) {\n            reportGlobalError(error);\n          }\n          event.currentTarget = null;\n          previousInstance = instance;\n        }\n      else\n        for (\n          i$jscomp$0 = 0;\n          i$jscomp$0 < _dispatchQueue$i.length;\n          i$jscomp$0++\n        ) {\n          _dispatchListeners$i = _dispatchQueue$i[i$jscomp$0];\n          instance = _dispatchListeners$i.instance;\n          currentTarget = _dispatchListeners$i.currentTarget;\n          _dispatchListeners$i = _dispatchListeners$i.listener;\n          if (instance !== previousInstance && event.isPropagationStopped())\n            break a;\n          previousInstance = _dispatchListeners$i;\n          event.currentTarget = currentTarget;\n          try {\n            previousInstance(event);\n          } catch (error) {\n            reportGlobalError(error);\n          }\n          event.currentTarget = null;\n          previousInstance = instance;\n        }\n    }\n  }\n}\nfunction listenToNonDelegatedEvent(domEventName, targetElement) {\n  var JSCompiler_inline_result = targetElement[internalEventHandlersKey];\n  void 0 === JSCompiler_inline_result &&\n    (JSCompiler_inline_result = targetElement[internalEventHandlersKey] =\n      new Set());\n  var listenerSetKey = domEventName + \"__bubble\";\n  JSCompiler_inline_result.has(listenerSetKey) ||\n    (addTrappedEventListener(targetElement, domEventName, 2, !1),\n    JSCompiler_inline_result.add(listenerSetKey));\n}\nfunction listenToNativeEvent(domEventName, isCapturePhaseListener, target) {\n  var eventSystemFlags = 0;\n  isCapturePhaseListener && (eventSystemFlags |= 4);\n  addTrappedEventListener(\n    target,\n    domEventName,\n    eventSystemFlags,\n    isCapturePhaseListener\n  );\n}\nvar listeningMarker = \"_reactListening\" + Math.random().toString(36).slice(2);\nfunction listenToAllSupportedEvents(rootContainerElement) {\n  if (!rootContainerElement[listeningMarker]) {\n    rootContainerElement[listeningMarker] = !0;\n    allNativeEvents.forEach(function (domEventName) {\n      \"selectionchange\" !== domEventName &&\n        (nonDelegatedEvents.has(domEventName) ||\n          listenToNativeEvent(domEventName, !1, rootContainerElement),\n        listenToNativeEvent(domEventName, !0, rootContainerElement));\n    });\n    var ownerDocument =\n      9 === rootContainerElement.nodeType\n        ? rootContainerElement\n        : rootContainerElement.ownerDocument;\n    null === ownerDocument ||\n      ownerDocument[listeningMarker] ||\n      ((ownerDocument[listeningMarker] = !0),\n      listenToNativeEvent(\"selectionchange\", !1, ownerDocument));\n  }\n}\nfunction addTrappedEventListener(\n  targetContainer,\n  domEventName,\n  eventSystemFlags,\n  isCapturePhaseListener\n) {\n  switch (getEventPriority(domEventName)) {\n    case 2:\n      var listenerWrapper = dispatchDiscreteEvent;\n      break;\n    case 8:\n      listenerWrapper = dispatchContinuousEvent;\n      break;\n    default:\n      listenerWrapper = dispatchEvent;\n  }\n  eventSystemFlags = listenerWrapper.bind(\n    null,\n    domEventName,\n    eventSystemFlags,\n    targetContainer\n  );\n  listenerWrapper = void 0;\n  !passiveBrowserEventsSupported ||\n    (\"touchstart\" !== domEventName &&\n      \"touchmove\" !== domEventName &&\n      \"wheel\" !== domEventName) ||\n    (listenerWrapper = !0);\n  isCapturePhaseListener\n    ? void 0 !== listenerWrapper\n      ? targetContainer.addEventListener(domEventName, eventSystemFlags, {\n          capture: !0,\n          passive: listenerWrapper\n        })\n      : targetContainer.addEventListener(domEventName, eventSystemFlags, !0)\n    : void 0 !== listenerWrapper\n      ? targetContainer.addEventListener(domEventName, eventSystemFlags, {\n          passive: listenerWrapper\n        })\n      : targetContainer.addEventListener(domEventName, eventSystemFlags, !1);\n}\nfunction dispatchEventForPluginEventSystem(\n  domEventName,\n  eventSystemFlags,\n  nativeEvent,\n  targetInst$jscomp$0,\n  targetContainer\n) {\n  var ancestorInst = targetInst$jscomp$0;\n  if (\n    0 === (eventSystemFlags & 1) &&\n    0 === (eventSystemFlags & 2) &&\n    null !== targetInst$jscomp$0\n  )\n    a: for (;;) {\n      if (null === targetInst$jscomp$0) return;\n      var nodeTag = targetInst$jscomp$0.tag;\n      if (3 === nodeTag || 4 === nodeTag) {\n        var container = targetInst$jscomp$0.stateNode.containerInfo;\n        if (container === targetContainer) break;\n        if (4 === nodeTag)\n          for (nodeTag = targetInst$jscomp$0.return; null !== nodeTag; ) {\n            var grandTag = nodeTag.tag;\n            if (\n              (3 === grandTag || 4 === grandTag) &&\n              nodeTag.stateNode.containerInfo === targetContainer\n            )\n              return;\n            nodeTag = nodeTag.return;\n          }\n        for (; null !== container; ) {\n          nodeTag = getClosestInstanceFromNode(container);\n          if (null === nodeTag) return;\n          grandTag = nodeTag.tag;\n          if (\n            5 === grandTag ||\n            6 === grandTag ||\n            26 === grandTag ||\n            27 === grandTag\n          ) {\n            targetInst$jscomp$0 = ancestorInst = nodeTag;\n            continue a;\n          }\n          container = container.parentNode;\n        }\n      }\n      targetInst$jscomp$0 = targetInst$jscomp$0.return;\n    }\n  batchedUpdates$1(function () {\n    var targetInst = ancestorInst,\n      nativeEventTarget = getEventTarget(nativeEvent),\n      dispatchQueue = [];\n    a: {\n      var reactName = topLevelEventsToReactNames.get(domEventName);\n      if (void 0 !== reactName) {\n        var SyntheticEventCtor = SyntheticEvent,\n          reactEventType = domEventName;\n        switch (domEventName) {\n          case \"keypress\":\n            if (0 === getEventCharCode(nativeEvent)) break a;\n          case \"keydown\":\n          case \"keyup\":\n            SyntheticEventCtor = SyntheticKeyboardEvent;\n            break;\n          case \"focusin\":\n            reactEventType = \"focus\";\n            SyntheticEventCtor = SyntheticFocusEvent;\n            break;\n          case \"focusout\":\n            reactEventType = \"blur\";\n            SyntheticEventCtor = SyntheticFocusEvent;\n            break;\n          case \"beforeblur\":\n          case \"afterblur\":\n            SyntheticEventCtor = SyntheticFocusEvent;\n            break;\n          case \"click\":\n            if (2 === nativeEvent.button) break a;\n          case \"auxclick\":\n          case \"dblclick\":\n          case \"mousedown\":\n          case \"mousemove\":\n          case \"mouseup\":\n          case \"mouseout\":\n          case \"mouseover\":\n          case \"contextmenu\":\n            SyntheticEventCtor = SyntheticMouseEvent;\n            break;\n          case \"drag\":\n          case \"dragend\":\n          case \"dragenter\":\n          case \"dragexit\":\n          case \"dragleave\":\n          case \"dragover\":\n          case \"dragstart\":\n          case \"drop\":\n            SyntheticEventCtor = SyntheticDragEvent;\n            break;\n          case \"touchcancel\":\n          case \"touchend\":\n          case \"touchmove\":\n          case \"touchstart\":\n            SyntheticEventCtor = SyntheticTouchEvent;\n            break;\n          case ANIMATION_END:\n          case ANIMATION_ITERATION:\n          case ANIMATION_START:\n            SyntheticEventCtor = SyntheticAnimationEvent;\n            break;\n          case TRANSITION_END:\n            SyntheticEventCtor = SyntheticTransitionEvent;\n            break;\n          case \"scroll\":\n          case \"scrollend\":\n            SyntheticEventCtor = SyntheticUIEvent;\n            break;\n          case \"wheel\":\n            SyntheticEventCtor = SyntheticWheelEvent;\n            break;\n          case \"copy\":\n          case \"cut\":\n          case \"paste\":\n            SyntheticEventCtor = SyntheticClipboardEvent;\n            break;\n          case \"gotpointercapture\":\n          case \"lostpointercapture\":\n          case \"pointercancel\":\n          case \"pointerdown\":\n          case \"pointermove\":\n          case \"pointerout\":\n          case \"pointerover\":\n          case \"pointerup\":\n            SyntheticEventCtor = SyntheticPointerEvent;\n            break;\n          case \"toggle\":\n          case \"beforetoggle\":\n            SyntheticEventCtor = SyntheticToggleEvent;\n        }\n        var inCapturePhase = 0 !== (eventSystemFlags & 4),\n          accumulateTargetOnly =\n            !inCapturePhase &&\n            (\"scroll\" === domEventName || \"scrollend\" === domEventName),\n          reactEventName = inCapturePhase\n            ? null !== reactName\n              ? reactName + \"Capture\"\n              : null\n            : reactName;\n        inCapturePhase = [];\n        for (\n          var instance = targetInst, lastHostComponent;\n          null !== instance;\n\n        ) {\n          var _instance = instance;\n          lastHostComponent = _instance.stateNode;\n          _instance = _instance.tag;\n          (5 !== _instance && 26 !== _instance && 27 !== _instance) ||\n            null === lastHostComponent ||\n            null === reactEventName ||\n            ((_instance = getListener(instance, reactEventName)),\n            null != _instance &&\n              inCapturePhase.push(\n                createDispatchListener(instance, _instance, lastHostComponent)\n              ));\n          if (accumulateTargetOnly) break;\n          instance = instance.return;\n        }\n        0 < inCapturePhase.length &&\n          ((reactName = new SyntheticEventCtor(\n            reactName,\n            reactEventType,\n            null,\n            nativeEvent,\n            nativeEventTarget\n          )),\n          dispatchQueue.push({ event: reactName, listeners: inCapturePhase }));\n      }\n    }\n    if (0 === (eventSystemFlags & 7)) {\n      a: {\n        reactName =\n          \"mouseover\" === domEventName || \"pointerover\" === domEventName;\n        SyntheticEventCtor =\n          \"mouseout\" === domEventName || \"pointerout\" === domEventName;\n        if (\n          reactName &&\n          nativeEvent !== currentReplayingEvent &&\n          (reactEventType =\n            nativeEvent.relatedTarget || nativeEvent.fromElement) &&\n          (getClosestInstanceFromNode(reactEventType) ||\n            reactEventType[internalContainerInstanceKey])\n        )\n          break a;\n        if (SyntheticEventCtor || reactName) {\n          reactName =\n            nativeEventTarget.window === nativeEventTarget\n              ? nativeEventTarget\n              : (reactName = nativeEventTarget.ownerDocument)\n                ? reactName.defaultView || reactName.parentWindow\n                : window;\n          if (SyntheticEventCtor) {\n            if (\n              ((reactEventType =\n                nativeEvent.relatedTarget || nativeEvent.toElement),\n              (SyntheticEventCtor = targetInst),\n              (reactEventType = reactEventType\n                ? getClosestInstanceFromNode(reactEventType)\n                : null),\n              null !== reactEventType &&\n                ((accumulateTargetOnly =\n                  getNearestMountedFiber(reactEventType)),\n                (inCapturePhase = reactEventType.tag),\n                reactEventType !== accumulateTargetOnly ||\n                  (5 !== inCapturePhase &&\n                    27 !== inCapturePhase &&\n                    6 !== inCapturePhase)))\n            )\n              reactEventType = null;\n          } else (SyntheticEventCtor = null), (reactEventType = targetInst);\n          if (SyntheticEventCtor !== reactEventType) {\n            inCapturePhase = SyntheticMouseEvent;\n            _instance = \"onMouseLeave\";\n            reactEventName = \"onMouseEnter\";\n            instance = \"mouse\";\n            if (\"pointerout\" === domEventName || \"pointerover\" === domEventName)\n              (inCapturePhase = SyntheticPointerEvent),\n                (_instance = \"onPointerLeave\"),\n                (reactEventName = \"onPointerEnter\"),\n                (instance = \"pointer\");\n            accumulateTargetOnly =\n              null == SyntheticEventCtor\n                ? reactName\n                : getNodeFromInstance(SyntheticEventCtor);\n            lastHostComponent =\n              null == reactEventType\n                ? reactName\n                : getNodeFromInstance(reactEventType);\n            reactName = new inCapturePhase(\n              _instance,\n              instance + \"leave\",\n              SyntheticEventCtor,\n              nativeEvent,\n              nativeEventTarget\n            );\n            reactName.target = accumulateTargetOnly;\n            reactName.relatedTarget = lastHostComponent;\n            _instance = null;\n            getClosestInstanceFromNode(nativeEventTarget) === targetInst &&\n              ((inCapturePhase = new inCapturePhase(\n                reactEventName,\n                instance + \"enter\",\n                reactEventType,\n                nativeEvent,\n                nativeEventTarget\n              )),\n              (inCapturePhase.target = lastHostComponent),\n              (inCapturePhase.relatedTarget = accumulateTargetOnly),\n              (_instance = inCapturePhase));\n            accumulateTargetOnly = _instance;\n            if (SyntheticEventCtor && reactEventType)\n              b: {\n                inCapturePhase = SyntheticEventCtor;\n                reactEventName = reactEventType;\n                instance = 0;\n                for (\n                  lastHostComponent = inCapturePhase;\n                  lastHostComponent;\n                  lastHostComponent = getParent(lastHostComponent)\n                )\n                  instance++;\n                lastHostComponent = 0;\n                for (\n                  _instance = reactEventName;\n                  _instance;\n                  _instance = getParent(_instance)\n                )\n                  lastHostComponent++;\n                for (; 0 < instance - lastHostComponent; )\n                  (inCapturePhase = getParent(inCapturePhase)), instance--;\n                for (; 0 < lastHostComponent - instance; )\n                  (reactEventName = getParent(reactEventName)),\n                    lastHostComponent--;\n                for (; instance--; ) {\n                  if (\n                    inCapturePhase === reactEventName ||\n                    (null !== reactEventName &&\n                      inCapturePhase === reactEventName.alternate)\n                  )\n                    break b;\n                  inCapturePhase = getParent(inCapturePhase);\n                  reactEventName = getParent(reactEventName);\n                }\n                inCapturePhase = null;\n              }\n            else inCapturePhase = null;\n            null !== SyntheticEventCtor &&\n              accumulateEnterLeaveListenersForEvent(\n                dispatchQueue,\n                reactName,\n                SyntheticEventCtor,\n                inCapturePhase,\n                !1\n              );\n            null !== reactEventType &&\n              null !== accumulateTargetOnly &&\n              accumulateEnterLeaveListenersForEvent(\n                dispatchQueue,\n                accumulateTargetOnly,\n                reactEventType,\n                inCapturePhase,\n                !0\n              );\n          }\n        }\n      }\n      a: {\n        reactName = targetInst ? getNodeFromInstance(targetInst) : window;\n        SyntheticEventCtor =\n          reactName.nodeName && reactName.nodeName.toLowerCase();\n        if (\n          \"select\" === SyntheticEventCtor ||\n          (\"input\" === SyntheticEventCtor && \"file\" === reactName.type)\n        )\n          var getTargetInstFunc = getTargetInstForChangeEvent;\n        else if (isTextInputElement(reactName))\n          if (isInputEventSupported)\n            getTargetInstFunc = getTargetInstForInputOrChangeEvent;\n          else {\n            getTargetInstFunc = getTargetInstForInputEventPolyfill;\n            var handleEventFunc = handleEventsForInputEventPolyfill;\n          }\n        else\n          (SyntheticEventCtor = reactName.nodeName),\n            !SyntheticEventCtor ||\n            \"input\" !== SyntheticEventCtor.toLowerCase() ||\n            (\"checkbox\" !== reactName.type && \"radio\" !== reactName.type)\n              ? targetInst &&\n                isCustomElement(targetInst.elementType) &&\n                (getTargetInstFunc = getTargetInstForChangeEvent)\n              : (getTargetInstFunc = getTargetInstForClickEvent);\n        if (\n          getTargetInstFunc &&\n          (getTargetInstFunc = getTargetInstFunc(domEventName, targetInst))\n        ) {\n          createAndAccumulateChangeEvent(\n            dispatchQueue,\n            getTargetInstFunc,\n            nativeEvent,\n            nativeEventTarget\n          );\n          break a;\n        }\n        handleEventFunc && handleEventFunc(domEventName, reactName, targetInst);\n        \"focusout\" === domEventName &&\n          targetInst &&\n          \"number\" === reactName.type &&\n          null != targetInst.memoizedProps.value &&\n          setDefaultValue(reactName, \"number\", reactName.value);\n      }\n      handleEventFunc = targetInst ? getNodeFromInstance(targetInst) : window;\n      switch (domEventName) {\n        case \"focusin\":\n          if (\n            isTextInputElement(handleEventFunc) ||\n            \"true\" === handleEventFunc.contentEditable\n          )\n            (activeElement = handleEventFunc),\n              (activeElementInst = targetInst),\n              (lastSelection = null);\n          break;\n        case \"focusout\":\n          lastSelection = activeElementInst = activeElement = null;\n          break;\n        case \"mousedown\":\n          mouseDown = !0;\n          break;\n        case \"contextmenu\":\n        case \"mouseup\":\n        case \"dragend\":\n          mouseDown = !1;\n          constructSelectEvent(dispatchQueue, nativeEvent, nativeEventTarget);\n          break;\n        case \"selectionchange\":\n          if (skipSelectionChangeEvent) break;\n        case \"keydown\":\n        case \"keyup\":\n          constructSelectEvent(dispatchQueue, nativeEvent, nativeEventTarget);\n      }\n      var fallbackData;\n      if (canUseCompositionEvent)\n        b: {\n          switch (domEventName) {\n            case \"compositionstart\":\n              var eventType = \"onCompositionStart\";\n              break b;\n            case \"compositionend\":\n              eventType = \"onCompositionEnd\";\n              break b;\n            case \"compositionupdate\":\n              eventType = \"onCompositionUpdate\";\n              break b;\n          }\n          eventType = void 0;\n        }\n      else\n        isComposing\n          ? isFallbackCompositionEnd(domEventName, nativeEvent) &&\n            (eventType = \"onCompositionEnd\")\n          : \"keydown\" === domEventName &&\n            229 === nativeEvent.keyCode &&\n            (eventType = \"onCompositionStart\");\n      eventType &&\n        (useFallbackCompositionData &&\n          \"ko\" !== nativeEvent.locale &&\n          (isComposing || \"onCompositionStart\" !== eventType\n            ? \"onCompositionEnd\" === eventType &&\n              isComposing &&\n              (fallbackData = getData())\n            : ((root = nativeEventTarget),\n              (startText = \"value\" in root ? root.value : root.textContent),\n              (isComposing = !0))),\n        (handleEventFunc = accumulateTwoPhaseListeners(targetInst, eventType)),\n        0 < handleEventFunc.length &&\n          ((eventType = new SyntheticCompositionEvent(\n            eventType,\n            domEventName,\n            null,\n            nativeEvent,\n            nativeEventTarget\n          )),\n          dispatchQueue.push({ event: eventType, listeners: handleEventFunc }),\n          fallbackData\n            ? (eventType.data = fallbackData)\n            : ((fallbackData = getDataFromCustomEvent(nativeEvent)),\n              null !== fallbackData && (eventType.data = fallbackData))));\n      if (\n        (fallbackData = canUseTextInputEvent\n          ? getNativeBeforeInputChars(domEventName, nativeEvent)\n          : getFallbackBeforeInputChars(domEventName, nativeEvent))\n      )\n        (eventType = accumulateTwoPhaseListeners(targetInst, \"onBeforeInput\")),\n          0 < eventType.length &&\n            ((handleEventFunc = new SyntheticCompositionEvent(\n              \"onBeforeInput\",\n              \"beforeinput\",\n              null,\n              nativeEvent,\n              nativeEventTarget\n            )),\n            dispatchQueue.push({\n              event: handleEventFunc,\n              listeners: eventType\n            }),\n            (handleEventFunc.data = fallbackData));\n      extractEvents$1(\n        dispatchQueue,\n        domEventName,\n        targetInst,\n        nativeEvent,\n        nativeEventTarget\n      );\n    }\n    processDispatchQueue(dispatchQueue, eventSystemFlags);\n  });\n}\nfunction createDispatchListener(instance, listener, currentTarget) {\n  return {\n    instance: instance,\n    listener: listener,\n    currentTarget: currentTarget\n  };\n}\nfunction accumulateTwoPhaseListeners(targetFiber, reactName) {\n  for (\n    var captureName = reactName + \"Capture\", listeners = [];\n    null !== targetFiber;\n\n  ) {\n    var _instance2 = targetFiber,\n      stateNode = _instance2.stateNode;\n    _instance2 = _instance2.tag;\n    (5 !== _instance2 && 26 !== _instance2 && 27 !== _instance2) ||\n      null === stateNode ||\n      ((_instance2 = getListener(targetFiber, captureName)),\n      null != _instance2 &&\n        listeners.unshift(\n          createDispatchListener(targetFiber, _instance2, stateNode)\n        ),\n      (_instance2 = getListener(targetFiber, reactName)),\n      null != _instance2 &&\n        listeners.push(\n          createDispatchListener(targetFiber, _instance2, stateNode)\n        ));\n    if (3 === targetFiber.tag) return listeners;\n    targetFiber = targetFiber.return;\n  }\n  return [];\n}\nfunction getParent(inst) {\n  if (null === inst) return null;\n  do inst = inst.return;\n  while (inst && 5 !== inst.tag && 27 !== inst.tag);\n  return inst ? inst : null;\n}\nfunction accumulateEnterLeaveListenersForEvent(\n  dispatchQueue,\n  event,\n  target,\n  common,\n  inCapturePhase\n) {\n  for (\n    var registrationName = event._reactName, listeners = [];\n    null !== target && target !== common;\n\n  ) {\n    var _instance3 = target,\n      alternate = _instance3.alternate,\n      stateNode = _instance3.stateNode;\n    _instance3 = _instance3.tag;\n    if (null !== alternate && alternate === common) break;\n    (5 !== _instance3 && 26 !== _instance3 && 27 !== _instance3) ||\n      null === stateNode ||\n      ((alternate = stateNode),\n      inCapturePhase\n        ? ((stateNode = getListener(target, registrationName)),\n          null != stateNode &&\n            listeners.unshift(\n              createDispatchListener(target, stateNode, alternate)\n            ))\n        : inCapturePhase ||\n          ((stateNode = getListener(target, registrationName)),\n          null != stateNode &&\n            listeners.push(\n              createDispatchListener(target, stateNode, alternate)\n            )));\n    target = target.return;\n  }\n  0 !== listeners.length &&\n    dispatchQueue.push({ event: event, listeners: listeners });\n}\nvar NORMALIZE_NEWLINES_REGEX = /\\r\\n?/g,\n  NORMALIZE_NULL_AND_REPLACEMENT_REGEX = /\\u0000|\\uFFFD/g;\nfunction normalizeMarkupForTextOrAttribute(markup) {\n  return (\"string\" === typeof markup ? markup : \"\" + markup)\n    .replace(NORMALIZE_NEWLINES_REGEX, \"\\n\")\n    .replace(NORMALIZE_NULL_AND_REPLACEMENT_REGEX, \"\");\n}\nfunction checkForUnmatchedText(serverText, clientText) {\n  clientText = normalizeMarkupForTextOrAttribute(clientText);\n  return normalizeMarkupForTextOrAttribute(serverText) === clientText ? !0 : !1;\n}\nfunction noop$1() {}\nfunction setProp(domElement, tag, key, value, props, prevValue) {\n  switch (key) {\n    case \"children\":\n      \"string\" === typeof value\n        ? \"body\" === tag ||\n          (\"textarea\" === tag && \"\" === value) ||\n          setTextContent(domElement, value)\n        : (\"number\" === typeof value || \"bigint\" === typeof value) &&\n          \"body\" !== tag &&\n          setTextContent(domElement, \"\" + value);\n      break;\n    case \"className\":\n      setValueForKnownAttribute(domElement, \"class\", value);\n      break;\n    case \"tabIndex\":\n      setValueForKnownAttribute(domElement, \"tabindex\", value);\n      break;\n    case \"dir\":\n    case \"role\":\n    case \"viewBox\":\n    case \"width\":\n    case \"height\":\n      setValueForKnownAttribute(domElement, key, value);\n      break;\n    case \"style\":\n      setValueForStyles(domElement, value, prevValue);\n      break;\n    case \"data\":\n      if (\"object\" !== tag) {\n        setValueForKnownAttribute(domElement, \"data\", value);\n        break;\n      }\n    case \"src\":\n    case \"href\":\n      if (\"\" === value && (\"a\" !== tag || \"href\" !== key)) {\n        domElement.removeAttribute(key);\n        break;\n      }\n      if (\n        null == value ||\n        \"function\" === typeof value ||\n        \"symbol\" === typeof value ||\n        \"boolean\" === typeof value\n      ) {\n        domElement.removeAttribute(key);\n        break;\n      }\n      value = sanitizeURL(\"\" + value);\n      domElement.setAttribute(key, value);\n      break;\n    case \"action\":\n    case \"formAction\":\n      if (\"function\" === typeof value) {\n        domElement.setAttribute(\n          key,\n          \"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')\"\n        );\n        break;\n      } else\n        \"function\" === typeof prevValue &&\n          (\"formAction\" === key\n            ? (\"input\" !== tag &&\n                setProp(domElement, tag, \"name\", props.name, props, null),\n              setProp(\n                domElement,\n                tag,\n                \"formEncType\",\n                props.formEncType,\n                props,\n                null\n              ),\n              setProp(\n                domElement,\n                tag,\n                \"formMethod\",\n                props.formMethod,\n                props,\n                null\n              ),\n              setProp(\n                domElement,\n                tag,\n                \"formTarget\",\n                props.formTarget,\n                props,\n                null\n              ))\n            : (setProp(domElement, tag, \"encType\", props.encType, props, null),\n              setProp(domElement, tag, \"method\", props.method, props, null),\n              setProp(domElement, tag, \"target\", props.target, props, null)));\n      if (\n        null == value ||\n        \"symbol\" === typeof value ||\n        \"boolean\" === typeof value\n      ) {\n        domElement.removeAttribute(key);\n        break;\n      }\n      value = sanitizeURL(\"\" + value);\n      domElement.setAttribute(key, value);\n      break;\n    case \"onClick\":\n      null != value && (domElement.onclick = noop$1);\n      break;\n    case \"onScroll\":\n      null != value && listenToNonDelegatedEvent(\"scroll\", domElement);\n      break;\n    case \"onScrollEnd\":\n      null != value && listenToNonDelegatedEvent(\"scrollend\", domElement);\n      break;\n    case \"dangerouslySetInnerHTML\":\n      if (null != value) {\n        if (\"object\" !== typeof value || !(\"__html\" in value))\n          throw Error(formatProdErrorMessage(61));\n        key = value.__html;\n        if (null != key) {\n          if (null != props.children) throw Error(formatProdErrorMessage(60));\n          domElement.innerHTML = key;\n        }\n      }\n      break;\n    case \"multiple\":\n      domElement.multiple =\n        value && \"function\" !== typeof value && \"symbol\" !== typeof value;\n      break;\n    case \"muted\":\n      domElement.muted =\n        value && \"function\" !== typeof value && \"symbol\" !== typeof value;\n      break;\n    case \"suppressContentEditableWarning\":\n    case \"suppressHydrationWarning\":\n    case \"defaultValue\":\n    case \"defaultChecked\":\n    case \"innerHTML\":\n    case \"ref\":\n      break;\n    case \"autoFocus\":\n      break;\n    case \"xlinkHref\":\n      if (\n        null == value ||\n        \"function\" === typeof value ||\n        \"boolean\" === typeof value ||\n        \"symbol\" === typeof value\n      ) {\n        domElement.removeAttribute(\"xlink:href\");\n        break;\n      }\n      key = sanitizeURL(\"\" + value);\n      domElement.setAttributeNS(\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:href\",\n        key\n      );\n      break;\n    case \"contentEditable\":\n    case \"spellCheck\":\n    case \"draggable\":\n    case \"value\":\n    case \"autoReverse\":\n    case \"externalResourcesRequired\":\n    case \"focusable\":\n    case \"preserveAlpha\":\n      null != value && \"function\" !== typeof value && \"symbol\" !== typeof value\n        ? domElement.setAttribute(key, \"\" + value)\n        : domElement.removeAttribute(key);\n      break;\n    case \"inert\":\n    case \"allowFullScreen\":\n    case \"async\":\n    case \"autoPlay\":\n    case \"controls\":\n    case \"default\":\n    case \"defer\":\n    case \"disabled\":\n    case \"disablePictureInPicture\":\n    case \"disableRemotePlayback\":\n    case \"formNoValidate\":\n    case \"hidden\":\n    case \"loop\":\n    case \"noModule\":\n    case \"noValidate\":\n    case \"open\":\n    case \"playsInline\":\n    case \"readOnly\":\n    case \"required\":\n    case \"reversed\":\n    case \"scoped\":\n    case \"seamless\":\n    case \"itemScope\":\n      value && \"function\" !== typeof value && \"symbol\" !== typeof value\n        ? domElement.setAttribute(key, \"\")\n        : domElement.removeAttribute(key);\n      break;\n    case \"capture\":\n    case \"download\":\n      !0 === value\n        ? domElement.setAttribute(key, \"\")\n        : !1 !== value &&\n            null != value &&\n            \"function\" !== typeof value &&\n            \"symbol\" !== typeof value\n          ? domElement.setAttribute(key, value)\n          : domElement.removeAttribute(key);\n      break;\n    case \"cols\":\n    case \"rows\":\n    case \"size\":\n    case \"span\":\n      null != value &&\n      \"function\" !== typeof value &&\n      \"symbol\" !== typeof value &&\n      !isNaN(value) &&\n      1 <= value\n        ? domElement.setAttribute(key, value)\n        : domElement.removeAttribute(key);\n      break;\n    case \"rowSpan\":\n    case \"start\":\n      null == value ||\n      \"function\" === typeof value ||\n      \"symbol\" === typeof value ||\n      isNaN(value)\n        ? domElement.removeAttribute(key)\n        : domElement.setAttribute(key, value);\n      break;\n    case \"popover\":\n      listenToNonDelegatedEvent(\"beforetoggle\", domElement);\n      listenToNonDelegatedEvent(\"toggle\", domElement);\n      setValueForAttribute(domElement, \"popover\", value);\n      break;\n    case \"xlinkActuate\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:actuate\",\n        value\n      );\n      break;\n    case \"xlinkArcrole\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:arcrole\",\n        value\n      );\n      break;\n    case \"xlinkRole\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:role\",\n        value\n      );\n      break;\n    case \"xlinkShow\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:show\",\n        value\n      );\n      break;\n    case \"xlinkTitle\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:title\",\n        value\n      );\n      break;\n    case \"xlinkType\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:type\",\n        value\n      );\n      break;\n    case \"xmlBase\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/XML/1998/namespace\",\n        \"xml:base\",\n        value\n      );\n      break;\n    case \"xmlLang\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/XML/1998/namespace\",\n        \"xml:lang\",\n        value\n      );\n      break;\n    case \"xmlSpace\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/XML/1998/namespace\",\n        \"xml:space\",\n        value\n      );\n      break;\n    case \"is\":\n      setValueForAttribute(domElement, \"is\", value);\n      break;\n    case \"innerText\":\n    case \"textContent\":\n      break;\n    default:\n      if (\n        !(2 < key.length) ||\n        (\"o\" !== key[0] && \"O\" !== key[0]) ||\n        (\"n\" !== key[1] && \"N\" !== key[1])\n      )\n        (key = aliases.get(key) || key),\n          setValueForAttribute(domElement, key, value);\n  }\n}\nfunction setPropOnCustomElement(domElement, tag, key, value, props, prevValue) {\n  switch (key) {\n    case \"style\":\n      setValueForStyles(domElement, value, prevValue);\n      break;\n    case \"dangerouslySetInnerHTML\":\n      if (null != value) {\n        if (\"object\" !== typeof value || !(\"__html\" in value))\n          throw Error(formatProdErrorMessage(61));\n        key = value.__html;\n        if (null != key) {\n          if (null != props.children) throw Error(formatProdErrorMessage(60));\n          domElement.innerHTML = key;\n        }\n      }\n      break;\n    case \"children\":\n      \"string\" === typeof value\n        ? setTextContent(domElement, value)\n        : (\"number\" === typeof value || \"bigint\" === typeof value) &&\n          setTextContent(domElement, \"\" + value);\n      break;\n    case \"onScroll\":\n      null != value && listenToNonDelegatedEvent(\"scroll\", domElement);\n      break;\n    case \"onScrollEnd\":\n      null != value && listenToNonDelegatedEvent(\"scrollend\", domElement);\n      break;\n    case \"onClick\":\n      null != value && (domElement.onclick = noop$1);\n      break;\n    case \"suppressContentEditableWarning\":\n    case \"suppressHydrationWarning\":\n    case \"innerHTML\":\n    case \"ref\":\n      break;\n    case \"innerText\":\n    case \"textContent\":\n      break;\n    default:\n      if (!registrationNameDependencies.hasOwnProperty(key))\n        a: {\n          if (\n            \"o\" === key[0] &&\n            \"n\" === key[1] &&\n            ((props = key.endsWith(\"Capture\")),\n            (tag = key.slice(2, props ? key.length - 7 : void 0)),\n            (prevValue = domElement[internalPropsKey] || null),\n            (prevValue = null != prevValue ? prevValue[key] : null),\n            \"function\" === typeof prevValue &&\n              domElement.removeEventListener(tag, prevValue, props),\n            \"function\" === typeof value)\n          ) {\n            \"function\" !== typeof prevValue &&\n              null !== prevValue &&\n              (key in domElement\n                ? (domElement[key] = null)\n                : domElement.hasAttribute(key) &&\n                  domElement.removeAttribute(key));\n            domElement.addEventListener(tag, value, props);\n            break a;\n          }\n          key in domElement\n            ? (domElement[key] = value)\n            : !0 === value\n              ? domElement.setAttribute(key, \"\")\n              : setValueForAttribute(domElement, key, value);\n        }\n  }\n}\nfunction setInitialProperties(domElement, tag, props) {\n  switch (tag) {\n    case \"div\":\n    case \"span\":\n    case \"svg\":\n    case \"path\":\n    case \"a\":\n    case \"g\":\n    case \"p\":\n    case \"li\":\n      break;\n    case \"img\":\n      listenToNonDelegatedEvent(\"error\", domElement);\n      listenToNonDelegatedEvent(\"load\", domElement);\n      var hasSrc = !1,\n        hasSrcSet = !1,\n        propKey;\n      for (propKey in props)\n        if (props.hasOwnProperty(propKey)) {\n          var propValue = props[propKey];\n          if (null != propValue)\n            switch (propKey) {\n              case \"src\":\n                hasSrc = !0;\n                break;\n              case \"srcSet\":\n                hasSrcSet = !0;\n                break;\n              case \"children\":\n              case \"dangerouslySetInnerHTML\":\n                throw Error(formatProdErrorMessage(137, tag));\n              default:\n                setProp(domElement, tag, propKey, propValue, props, null);\n            }\n        }\n      hasSrcSet &&\n        setProp(domElement, tag, \"srcSet\", props.srcSet, props, null);\n      hasSrc && setProp(domElement, tag, \"src\", props.src, props, null);\n      return;\n    case \"input\":\n      listenToNonDelegatedEvent(\"invalid\", domElement);\n      var defaultValue = (propKey = propValue = hasSrcSet = null),\n        checked = null,\n        defaultChecked = null;\n      for (hasSrc in props)\n        if (props.hasOwnProperty(hasSrc)) {\n          var propValue$188 = props[hasSrc];\n          if (null != propValue$188)\n            switch (hasSrc) {\n              case \"name\":\n                hasSrcSet = propValue$188;\n                break;\n              case \"type\":\n                propValue = propValue$188;\n                break;\n              case \"checked\":\n                checked = propValue$188;\n                break;\n              case \"defaultChecked\":\n                defaultChecked = propValue$188;\n                break;\n              case \"value\":\n                propKey = propValue$188;\n                break;\n              case \"defaultValue\":\n                defaultValue = propValue$188;\n                break;\n              case \"children\":\n              case \"dangerouslySetInnerHTML\":\n                if (null != propValue$188)\n                  throw Error(formatProdErrorMessage(137, tag));\n                break;\n              default:\n                setProp(domElement, tag, hasSrc, propValue$188, props, null);\n            }\n        }\n      initInput(\n        domElement,\n        propKey,\n        defaultValue,\n        checked,\n        defaultChecked,\n        propValue,\n        hasSrcSet,\n        !1\n      );\n      track(domElement);\n      return;\n    case \"select\":\n      listenToNonDelegatedEvent(\"invalid\", domElement);\n      hasSrc = propValue = propKey = null;\n      for (hasSrcSet in props)\n        if (\n          props.hasOwnProperty(hasSrcSet) &&\n          ((defaultValue = props[hasSrcSet]), null != defaultValue)\n        )\n          switch (hasSrcSet) {\n            case \"value\":\n              propKey = defaultValue;\n              break;\n            case \"defaultValue\":\n              propValue = defaultValue;\n              break;\n            case \"multiple\":\n              hasSrc = defaultValue;\n            default:\n              setProp(domElement, tag, hasSrcSet, defaultValue, props, null);\n          }\n      tag = propKey;\n      props = propValue;\n      domElement.multiple = !!hasSrc;\n      null != tag\n        ? updateOptions(domElement, !!hasSrc, tag, !1)\n        : null != props && updateOptions(domElement, !!hasSrc, props, !0);\n      return;\n    case \"textarea\":\n      listenToNonDelegatedEvent(\"invalid\", domElement);\n      propKey = hasSrcSet = hasSrc = null;\n      for (propValue in props)\n        if (\n          props.hasOwnProperty(propValue) &&\n          ((defaultValue = props[propValue]), null != defaultValue)\n        )\n          switch (propValue) {\n            case \"value\":\n              hasSrc = defaultValue;\n              break;\n            case \"defaultValue\":\n              hasSrcSet = defaultValue;\n              break;\n            case \"children\":\n              propKey = defaultValue;\n              break;\n            case \"dangerouslySetInnerHTML\":\n              if (null != defaultValue) throw Error(formatProdErrorMessage(91));\n              break;\n            default:\n              setProp(domElement, tag, propValue, defaultValue, props, null);\n          }\n      initTextarea(domElement, hasSrc, hasSrcSet, propKey);\n      track(domElement);\n      return;\n    case \"option\":\n      for (checked in props)\n        if (\n          props.hasOwnProperty(checked) &&\n          ((hasSrc = props[checked]), null != hasSrc)\n        )\n          switch (checked) {\n            case \"selected\":\n              domElement.selected =\n                hasSrc &&\n                \"function\" !== typeof hasSrc &&\n                \"symbol\" !== typeof hasSrc;\n              break;\n            default:\n              setProp(domElement, tag, checked, hasSrc, props, null);\n          }\n      return;\n    case \"dialog\":\n      listenToNonDelegatedEvent(\"beforetoggle\", domElement);\n      listenToNonDelegatedEvent(\"toggle\", domElement);\n      listenToNonDelegatedEvent(\"cancel\", domElement);\n      listenToNonDelegatedEvent(\"close\", domElement);\n      break;\n    case \"iframe\":\n    case \"object\":\n      listenToNonDelegatedEvent(\"load\", domElement);\n      break;\n    case \"video\":\n    case \"audio\":\n      for (hasSrc = 0; hasSrc < mediaEventTypes.length; hasSrc++)\n        listenToNonDelegatedEvent(mediaEventTypes[hasSrc], domElement);\n      break;\n    case \"image\":\n      listenToNonDelegatedEvent(\"error\", domElement);\n      listenToNonDelegatedEvent(\"load\", domElement);\n      break;\n    case \"details\":\n      listenToNonDelegatedEvent(\"toggle\", domElement);\n      break;\n    case \"embed\":\n    case \"source\":\n    case \"link\":\n      listenToNonDelegatedEvent(\"error\", domElement),\n        listenToNonDelegatedEvent(\"load\", domElement);\n    case \"area\":\n    case \"base\":\n    case \"br\":\n    case \"col\":\n    case \"hr\":\n    case \"keygen\":\n    case \"meta\":\n    case \"param\":\n    case \"track\":\n    case \"wbr\":\n    case \"menuitem\":\n      for (defaultChecked in props)\n        if (\n          props.hasOwnProperty(defaultChecked) &&\n          ((hasSrc = props[defaultChecked]), null != hasSrc)\n        )\n          switch (defaultChecked) {\n            case \"children\":\n            case \"dangerouslySetInnerHTML\":\n              throw Error(formatProdErrorMessage(137, tag));\n            default:\n              setProp(domElement, tag, defaultChecked, hasSrc, props, null);\n          }\n      return;\n    default:\n      if (isCustomElement(tag)) {\n        for (propValue$188 in props)\n          props.hasOwnProperty(propValue$188) &&\n            ((hasSrc = props[propValue$188]),\n            void 0 !== hasSrc &&\n              setPropOnCustomElement(\n                domElement,\n                tag,\n                propValue$188,\n                hasSrc,\n                props,\n                void 0\n              ));\n        return;\n      }\n  }\n  for (defaultValue in props)\n    props.hasOwnProperty(defaultValue) &&\n      ((hasSrc = props[defaultValue]),\n      null != hasSrc &&\n        setProp(domElement, tag, defaultValue, hasSrc, props, null));\n}\nfunction updateProperties(domElement, tag, lastProps, nextProps) {\n  switch (tag) {\n    case \"div\":\n    case \"span\":\n    case \"svg\":\n    case \"path\":\n    case \"a\":\n    case \"g\":\n    case \"p\":\n    case \"li\":\n      break;\n    case \"input\":\n      var name = null,\n        type = null,\n        value = null,\n        defaultValue = null,\n        lastDefaultValue = null,\n        checked = null,\n        defaultChecked = null;\n      for (propKey in lastProps) {\n        var lastProp = lastProps[propKey];\n        if (lastProps.hasOwnProperty(propKey) && null != lastProp)\n          switch (propKey) {\n            case \"checked\":\n              break;\n            case \"value\":\n              break;\n            case \"defaultValue\":\n              lastDefaultValue = lastProp;\n            default:\n              nextProps.hasOwnProperty(propKey) ||\n                setProp(domElement, tag, propKey, null, nextProps, lastProp);\n          }\n      }\n      for (var propKey$205 in nextProps) {\n        var propKey = nextProps[propKey$205];\n        lastProp = lastProps[propKey$205];\n        if (\n          nextProps.hasOwnProperty(propKey$205) &&\n          (null != propKey || null != lastProp)\n        )\n          switch (propKey$205) {\n            case \"type\":\n              type = propKey;\n              break;\n            case \"name\":\n              name = propKey;\n              break;\n            case \"checked\":\n              checked = propKey;\n              break;\n            case \"defaultChecked\":\n              defaultChecked = propKey;\n              break;\n            case \"value\":\n              value = propKey;\n              break;\n            case \"defaultValue\":\n              defaultValue = propKey;\n              break;\n            case \"children\":\n            case \"dangerouslySetInnerHTML\":\n              if (null != propKey)\n                throw Error(formatProdErrorMessage(137, tag));\n              break;\n            default:\n              propKey !== lastProp &&\n                setProp(\n                  domElement,\n                  tag,\n                  propKey$205,\n                  propKey,\n                  nextProps,\n                  lastProp\n                );\n          }\n      }\n      updateInput(\n        domElement,\n        value,\n        defaultValue,\n        lastDefaultValue,\n        checked,\n        defaultChecked,\n        type,\n        name\n      );\n      return;\n    case \"select\":\n      propKey = value = defaultValue = propKey$205 = null;\n      for (type in lastProps)\n        if (\n          ((lastDefaultValue = lastProps[type]),\n          lastProps.hasOwnProperty(type) && null != lastDefaultValue)\n        )\n          switch (type) {\n            case \"value\":\n              break;\n            case \"multiple\":\n              propKey = lastDefaultValue;\n            default:\n              nextProps.hasOwnProperty(type) ||\n                setProp(\n                  domElement,\n                  tag,\n                  type,\n                  null,\n                  nextProps,\n                  lastDefaultValue\n                );\n          }\n      for (name in nextProps)\n        if (\n          ((type = nextProps[name]),\n          (lastDefaultValue = lastProps[name]),\n          nextProps.hasOwnProperty(name) &&\n            (null != type || null != lastDefaultValue))\n        )\n          switch (name) {\n            case \"value\":\n              propKey$205 = type;\n              break;\n            case \"defaultValue\":\n              defaultValue = type;\n              break;\n            case \"multiple\":\n              value = type;\n            default:\n              type !== lastDefaultValue &&\n                setProp(\n                  domElement,\n                  tag,\n                  name,\n                  type,\n                  nextProps,\n                  lastDefaultValue\n                );\n          }\n      tag = defaultValue;\n      lastProps = value;\n      nextProps = propKey;\n      null != propKey$205\n        ? updateOptions(domElement, !!lastProps, propKey$205, !1)\n        : !!nextProps !== !!lastProps &&\n          (null != tag\n            ? updateOptions(domElement, !!lastProps, tag, !0)\n            : updateOptions(domElement, !!lastProps, lastProps ? [] : \"\", !1));\n      return;\n    case \"textarea\":\n      propKey = propKey$205 = null;\n      for (defaultValue in lastProps)\n        if (\n          ((name = lastProps[defaultValue]),\n          lastProps.hasOwnProperty(defaultValue) &&\n            null != name &&\n            !nextProps.hasOwnProperty(defaultValue))\n        )\n          switch (defaultValue) {\n            case \"value\":\n              break;\n            case \"children\":\n              break;\n            default:\n              setProp(domElement, tag, defaultValue, null, nextProps, name);\n          }\n      for (value in nextProps)\n        if (\n          ((name = nextProps[value]),\n          (type = lastProps[value]),\n          nextProps.hasOwnProperty(value) && (null != name || null != type))\n        )\n          switch (value) {\n            case \"value\":\n              propKey$205 = name;\n              break;\n            case \"defaultValue\":\n              propKey = name;\n              break;\n            case \"children\":\n              break;\n            case \"dangerouslySetInnerHTML\":\n              if (null != name) throw Error(formatProdErrorMessage(91));\n              break;\n            default:\n              name !== type &&\n                setProp(domElement, tag, value, name, nextProps, type);\n          }\n      updateTextarea(domElement, propKey$205, propKey);\n      return;\n    case \"option\":\n      for (var propKey$221 in lastProps)\n        if (\n          ((propKey$205 = lastProps[propKey$221]),\n          lastProps.hasOwnProperty(propKey$221) &&\n            null != propKey$205 &&\n            !nextProps.hasOwnProperty(propKey$221))\n        )\n          switch (propKey$221) {\n            case \"selected\":\n              domElement.selected = !1;\n              break;\n            default:\n              setProp(\n                domElement,\n                tag,\n                propKey$221,\n                null,\n                nextProps,\n                propKey$205\n              );\n          }\n      for (lastDefaultValue in nextProps)\n        if (\n          ((propKey$205 = nextProps[lastDefaultValue]),\n          (propKey = lastProps[lastDefaultValue]),\n          nextProps.hasOwnProperty(lastDefaultValue) &&\n            propKey$205 !== propKey &&\n            (null != propKey$205 || null != propKey))\n        )\n          switch (lastDefaultValue) {\n            case \"selected\":\n              domElement.selected =\n                propKey$205 &&\n                \"function\" !== typeof propKey$205 &&\n                \"symbol\" !== typeof propKey$205;\n              break;\n            default:\n              setProp(\n                domElement,\n                tag,\n                lastDefaultValue,\n                propKey$205,\n                nextProps,\n                propKey\n              );\n          }\n      return;\n    case \"img\":\n    case \"link\":\n    case \"area\":\n    case \"base\":\n    case \"br\":\n    case \"col\":\n    case \"embed\":\n    case \"hr\":\n    case \"keygen\":\n    case \"meta\":\n    case \"param\":\n    case \"source\":\n    case \"track\":\n    case \"wbr\":\n    case \"menuitem\":\n      for (var propKey$226 in lastProps)\n        (propKey$205 = lastProps[propKey$226]),\n          lastProps.hasOwnProperty(propKey$226) &&\n            null != propKey$205 &&\n            !nextProps.hasOwnProperty(propKey$226) &&\n            setProp(domElement, tag, propKey$226, null, nextProps, propKey$205);\n      for (checked in nextProps)\n        if (\n          ((propKey$205 = nextProps[checked]),\n          (propKey = lastProps[checked]),\n          nextProps.hasOwnProperty(checked) &&\n            propKey$205 !== propKey &&\n            (null != propKey$205 || null != propKey))\n        )\n          switch (checked) {\n            case \"children\":\n            case \"dangerouslySetInnerHTML\":\n              if (null != propKey$205)\n                throw Error(formatProdErrorMessage(137, tag));\n              break;\n            default:\n              setProp(\n                domElement,\n                tag,\n                checked,\n                propKey$205,\n                nextProps,\n                propKey\n              );\n          }\n      return;\n    default:\n      if (isCustomElement(tag)) {\n        for (var propKey$231 in lastProps)\n          (propKey$205 = lastProps[propKey$231]),\n            lastProps.hasOwnProperty(propKey$231) &&\n              void 0 !== propKey$205 &&\n              !nextProps.hasOwnProperty(propKey$231) &&\n              setPropOnCustomElement(\n                domElement,\n                tag,\n                propKey$231,\n                void 0,\n                nextProps,\n                propKey$205\n              );\n        for (defaultChecked in nextProps)\n          (propKey$205 = nextProps[defaultChecked]),\n            (propKey = lastProps[defaultChecked]),\n            !nextProps.hasOwnProperty(defaultChecked) ||\n              propKey$205 === propKey ||\n              (void 0 === propKey$205 && void 0 === propKey) ||\n              setPropOnCustomElement(\n                domElement,\n                tag,\n                defaultChecked,\n                propKey$205,\n                nextProps,\n                propKey\n              );\n        return;\n      }\n  }\n  for (var propKey$236 in lastProps)\n    (propKey$205 = lastProps[propKey$236]),\n      lastProps.hasOwnProperty(propKey$236) &&\n        null != propKey$205 &&\n        !nextProps.hasOwnProperty(propKey$236) &&\n        setProp(domElement, tag, propKey$236, null, nextProps, propKey$205);\n  for (lastProp in nextProps)\n    (propKey$205 = nextProps[lastProp]),\n      (propKey = lastProps[lastProp]),\n      !nextProps.hasOwnProperty(lastProp) ||\n        propKey$205 === propKey ||\n        (null == propKey$205 && null == propKey) ||\n        setProp(domElement, tag, lastProp, propKey$205, nextProps, propKey);\n}\nvar eventsEnabled = null,\n  selectionInformation = null;\nfunction getOwnerDocumentFromRootContainer(rootContainerElement) {\n  return 9 === rootContainerElement.nodeType\n    ? rootContainerElement\n    : rootContainerElement.ownerDocument;\n}\nfunction getOwnHostContext(namespaceURI) {\n  switch (namespaceURI) {\n    case \"http://www.w3.org/2000/svg\":\n      return 1;\n    case \"http://www.w3.org/1998/Math/MathML\":\n      return 2;\n    default:\n      return 0;\n  }\n}\nfunction getChildHostContextProd(parentNamespace, type) {\n  if (0 === parentNamespace)\n    switch (type) {\n      case \"svg\":\n        return 1;\n      case \"math\":\n        return 2;\n      default:\n        return 0;\n    }\n  return 1 === parentNamespace && \"foreignObject\" === type\n    ? 0\n    : parentNamespace;\n}\nfunction shouldSetTextContent(type, props) {\n  return (\n    \"textarea\" === type ||\n    \"noscript\" === type ||\n    \"string\" === typeof props.children ||\n    \"number\" === typeof props.children ||\n    \"bigint\" === typeof props.children ||\n    (\"object\" === typeof props.dangerouslySetInnerHTML &&\n      null !== props.dangerouslySetInnerHTML &&\n      null != props.dangerouslySetInnerHTML.__html)\n  );\n}\nvar currentPopstateTransitionEvent = null;\nfunction shouldAttemptEagerTransition() {\n  var event = window.event;\n  if (event && \"popstate\" === event.type) {\n    if (event === currentPopstateTransitionEvent) return !1;\n    currentPopstateTransitionEvent = event;\n    return !0;\n  }\n  currentPopstateTransitionEvent = null;\n  return !1;\n}\nvar scheduleTimeout = \"function\" === typeof setTimeout ? setTimeout : void 0,\n  cancelTimeout = \"function\" === typeof clearTimeout ? clearTimeout : void 0,\n  localPromise = \"function\" === typeof Promise ? Promise : void 0,\n  scheduleMicrotask =\n    \"function\" === typeof queueMicrotask\n      ? queueMicrotask\n      : \"undefined\" !== typeof localPromise\n        ? function (callback) {\n            return localPromise\n              .resolve(null)\n              .then(callback)\n              .catch(handleErrorInNextTick);\n          }\n        : scheduleTimeout;\nfunction handleErrorInNextTick(error) {\n  setTimeout(function () {\n    throw error;\n  });\n}\nfunction isSingletonScope(type) {\n  return \"head\" === type;\n}\nfunction clearSuspenseBoundary(parentInstance, suspenseInstance) {\n  var node = suspenseInstance,\n    possiblePreambleContribution = 0,\n    depth = 0;\n  do {\n    var nextNode = node.nextSibling;\n    parentInstance.removeChild(node);\n    if (nextNode && 8 === nextNode.nodeType)\n      if (((node = nextNode.data), \"/$\" === node)) {\n        if (\n          0 < possiblePreambleContribution &&\n          8 > possiblePreambleContribution\n        ) {\n          node = possiblePreambleContribution;\n          var ownerDocument = parentInstance.ownerDocument;\n          node & 1 && releaseSingletonInstance(ownerDocument.documentElement);\n          node & 2 && releaseSingletonInstance(ownerDocument.body);\n          if (node & 4)\n            for (\n              node = ownerDocument.head,\n                releaseSingletonInstance(node),\n                ownerDocument = node.firstChild;\n              ownerDocument;\n\n            ) {\n              var nextNode$jscomp$0 = ownerDocument.nextSibling,\n                nodeName = ownerDocument.nodeName;\n              ownerDocument[internalHoistableMarker] ||\n                \"SCRIPT\" === nodeName ||\n                \"STYLE\" === nodeName ||\n                (\"LINK\" === nodeName &&\n                  \"stylesheet\" === ownerDocument.rel.toLowerCase()) ||\n                node.removeChild(ownerDocument);\n              ownerDocument = nextNode$jscomp$0;\n            }\n        }\n        if (0 === depth) {\n          parentInstance.removeChild(nextNode);\n          retryIfBlockedOn(suspenseInstance);\n          return;\n        }\n        depth--;\n      } else\n        \"$\" === node || \"$?\" === node || \"$!\" === node\n          ? depth++\n          : (possiblePreambleContribution = node.charCodeAt(0) - 48);\n    else possiblePreambleContribution = 0;\n    node = nextNode;\n  } while (node);\n  retryIfBlockedOn(suspenseInstance);\n}\nfunction clearContainerSparingly(container) {\n  var nextNode = container.firstChild;\n  nextNode && 10 === nextNode.nodeType && (nextNode = nextNode.nextSibling);\n  for (; nextNode; ) {\n    var node = nextNode;\n    nextNode = nextNode.nextSibling;\n    switch (node.nodeName) {\n      case \"HTML\":\n      case \"HEAD\":\n      case \"BODY\":\n        clearContainerSparingly(node);\n        detachDeletedInstance(node);\n        continue;\n      case \"SCRIPT\":\n      case \"STYLE\":\n        continue;\n      case \"LINK\":\n        if (\"stylesheet\" === node.rel.toLowerCase()) continue;\n    }\n    container.removeChild(node);\n  }\n}\nfunction canHydrateInstance(instance, type, props, inRootOrSingleton) {\n  for (; 1 === instance.nodeType; ) {\n    var anyProps = props;\n    if (instance.nodeName.toLowerCase() !== type.toLowerCase()) {\n      if (\n        !inRootOrSingleton &&\n        (\"INPUT\" !== instance.nodeName || \"hidden\" !== instance.type)\n      )\n        break;\n    } else if (!inRootOrSingleton)\n      if (\"input\" === type && \"hidden\" === instance.type) {\n        var name = null == anyProps.name ? null : \"\" + anyProps.name;\n        if (\n          \"hidden\" === anyProps.type &&\n          instance.getAttribute(\"name\") === name\n        )\n          return instance;\n      } else return instance;\n    else if (!instance[internalHoistableMarker])\n      switch (type) {\n        case \"meta\":\n          if (!instance.hasAttribute(\"itemprop\")) break;\n          return instance;\n        case \"link\":\n          name = instance.getAttribute(\"rel\");\n          if (\"stylesheet\" === name && instance.hasAttribute(\"data-precedence\"))\n            break;\n          else if (\n            name !== anyProps.rel ||\n            instance.getAttribute(\"href\") !==\n              (null == anyProps.href || \"\" === anyProps.href\n                ? null\n                : anyProps.href) ||\n            instance.getAttribute(\"crossorigin\") !==\n              (null == anyProps.crossOrigin ? null : anyProps.crossOrigin) ||\n            instance.getAttribute(\"title\") !==\n              (null == anyProps.title ? null : anyProps.title)\n          )\n            break;\n          return instance;\n        case \"style\":\n          if (instance.hasAttribute(\"data-precedence\")) break;\n          return instance;\n        case \"script\":\n          name = instance.getAttribute(\"src\");\n          if (\n            (name !== (null == anyProps.src ? null : anyProps.src) ||\n              instance.getAttribute(\"type\") !==\n                (null == anyProps.type ? null : anyProps.type) ||\n              instance.getAttribute(\"crossorigin\") !==\n                (null == anyProps.crossOrigin ? null : anyProps.crossOrigin)) &&\n            name &&\n            instance.hasAttribute(\"async\") &&\n            !instance.hasAttribute(\"itemprop\")\n          )\n            break;\n          return instance;\n        default:\n          return instance;\n      }\n    instance = getNextHydratable(instance.nextSibling);\n    if (null === instance) break;\n  }\n  return null;\n}\nfunction canHydrateTextInstance(instance, text, inRootOrSingleton) {\n  if (\"\" === text) return null;\n  for (; 3 !== instance.nodeType; ) {\n    if (\n      (1 !== instance.nodeType ||\n        \"INPUT\" !== instance.nodeName ||\n        \"hidden\" !== instance.type) &&\n      !inRootOrSingleton\n    )\n      return null;\n    instance = getNextHydratable(instance.nextSibling);\n    if (null === instance) return null;\n  }\n  return instance;\n}\nfunction isSuspenseInstanceFallback(instance) {\n  return (\n    \"$!\" === instance.data ||\n    (\"$?\" === instance.data && \"complete\" === instance.ownerDocument.readyState)\n  );\n}\nfunction registerSuspenseInstanceRetry(instance, callback) {\n  var ownerDocument = instance.ownerDocument;\n  if (\"$?\" !== instance.data || \"complete\" === ownerDocument.readyState)\n    callback();\n  else {\n    var listener = function () {\n      callback();\n      ownerDocument.removeEventListener(\"DOMContentLoaded\", listener);\n    };\n    ownerDocument.addEventListener(\"DOMContentLoaded\", listener);\n    instance._reactRetry = listener;\n  }\n}\nfunction getNextHydratable(node) {\n  for (; null != node; node = node.nextSibling) {\n    var nodeType = node.nodeType;\n    if (1 === nodeType || 3 === nodeType) break;\n    if (8 === nodeType) {\n      nodeType = node.data;\n      if (\n        \"$\" === nodeType ||\n        \"$!\" === nodeType ||\n        \"$?\" === nodeType ||\n        \"F!\" === nodeType ||\n        \"F\" === nodeType\n      )\n        break;\n      if (\"/$\" === nodeType) return null;\n    }\n  }\n  return node;\n}\nvar previousHydratableOnEnteringScopedSingleton = null;\nfunction getParentSuspenseInstance(targetInstance) {\n  targetInstance = targetInstance.previousSibling;\n  for (var depth = 0; targetInstance; ) {\n    if (8 === targetInstance.nodeType) {\n      var data = targetInstance.data;\n      if (\"$\" === data || \"$!\" === data || \"$?\" === data) {\n        if (0 === depth) return targetInstance;\n        depth--;\n      } else \"/$\" === data && depth++;\n    }\n    targetInstance = targetInstance.previousSibling;\n  }\n  return null;\n}\nfunction resolveSingletonInstance(type, props, rootContainerInstance) {\n  props = getOwnerDocumentFromRootContainer(rootContainerInstance);\n  switch (type) {\n    case \"html\":\n      type = props.documentElement;\n      if (!type) throw Error(formatProdErrorMessage(452));\n      return type;\n    case \"head\":\n      type = props.head;\n      if (!type) throw Error(formatProdErrorMessage(453));\n      return type;\n    case \"body\":\n      type = props.body;\n      if (!type) throw Error(formatProdErrorMessage(454));\n      return type;\n    default:\n      throw Error(formatProdErrorMessage(451));\n  }\n}\nfunction releaseSingletonInstance(instance) {\n  for (var attributes = instance.attributes; attributes.length; )\n    instance.removeAttributeNode(attributes[0]);\n  detachDeletedInstance(instance);\n}\nvar preloadPropsMap = new Map(),\n  preconnectsSet = new Set();\nfunction getHoistableRoot(container) {\n  return \"function\" === typeof container.getRootNode\n    ? container.getRootNode()\n    : 9 === container.nodeType\n      ? container\n      : container.ownerDocument;\n}\nvar previousDispatcher = ReactDOMSharedInternals.d;\nReactDOMSharedInternals.d = {\n  f: flushSyncWork,\n  r: requestFormReset,\n  D: prefetchDNS,\n  C: preconnect,\n  L: preload,\n  m: preloadModule,\n  X: preinitScript,\n  S: preinitStyle,\n  M: preinitModuleScript\n};\nfunction flushSyncWork() {\n  var previousWasRendering = previousDispatcher.f(),\n    wasRendering = flushSyncWork$1();\n  return previousWasRendering || wasRendering;\n}\nfunction requestFormReset(form) {\n  var formInst = getInstanceFromNode(form);\n  null !== formInst && 5 === formInst.tag && \"form\" === formInst.type\n    ? requestFormReset$1(formInst)\n    : previousDispatcher.r(form);\n}\nvar globalDocument = \"undefined\" === typeof document ? null : document;\nfunction preconnectAs(rel, href, crossOrigin) {\n  var ownerDocument = globalDocument;\n  if (ownerDocument && \"string\" === typeof href && href) {\n    var limitedEscapedHref =\n      escapeSelectorAttributeValueInsideDoubleQuotes(href);\n    limitedEscapedHref =\n      'link[rel=\"' + rel + '\"][href=\"' + limitedEscapedHref + '\"]';\n    \"string\" === typeof crossOrigin &&\n      (limitedEscapedHref += '[crossorigin=\"' + crossOrigin + '\"]');\n    preconnectsSet.has(limitedEscapedHref) ||\n      (preconnectsSet.add(limitedEscapedHref),\n      (rel = { rel: rel, crossOrigin: crossOrigin, href: href }),\n      null === ownerDocument.querySelector(limitedEscapedHref) &&\n        ((href = ownerDocument.createElement(\"link\")),\n        setInitialProperties(href, \"link\", rel),\n        markNodeAsHoistable(href),\n        ownerDocument.head.appendChild(href)));\n  }\n}\nfunction prefetchDNS(href) {\n  previousDispatcher.D(href);\n  preconnectAs(\"dns-prefetch\", href, null);\n}\nfunction preconnect(href, crossOrigin) {\n  previousDispatcher.C(href, crossOrigin);\n  preconnectAs(\"preconnect\", href, crossOrigin);\n}\nfunction preload(href, as, options) {\n  previousDispatcher.L(href, as, options);\n  var ownerDocument = globalDocument;\n  if (ownerDocument && href && as) {\n    var preloadSelector =\n      'link[rel=\"preload\"][as=\"' +\n      escapeSelectorAttributeValueInsideDoubleQuotes(as) +\n      '\"]';\n    \"image\" === as\n      ? options && options.imageSrcSet\n        ? ((preloadSelector +=\n            '[imagesrcset=\"' +\n            escapeSelectorAttributeValueInsideDoubleQuotes(\n              options.imageSrcSet\n            ) +\n            '\"]'),\n          \"string\" === typeof options.imageSizes &&\n            (preloadSelector +=\n              '[imagesizes=\"' +\n              escapeSelectorAttributeValueInsideDoubleQuotes(\n                options.imageSizes\n              ) +\n              '\"]'))\n        : (preloadSelector +=\n            '[href=\"' +\n            escapeSelectorAttributeValueInsideDoubleQuotes(href) +\n            '\"]')\n      : (preloadSelector +=\n          '[href=\"' +\n          escapeSelectorAttributeValueInsideDoubleQuotes(href) +\n          '\"]');\n    var key = preloadSelector;\n    switch (as) {\n      case \"style\":\n        key = getStyleKey(href);\n        break;\n      case \"script\":\n        key = getScriptKey(href);\n    }\n    preloadPropsMap.has(key) ||\n      ((href = assign(\n        {\n          rel: \"preload\",\n          href:\n            \"image\" === as && options && options.imageSrcSet ? void 0 : href,\n          as: as\n        },\n        options\n      )),\n      preloadPropsMap.set(key, href),\n      null !== ownerDocument.querySelector(preloadSelector) ||\n        (\"style\" === as &&\n          ownerDocument.querySelector(getStylesheetSelectorFromKey(key))) ||\n        (\"script\" === as &&\n          ownerDocument.querySelector(getScriptSelectorFromKey(key))) ||\n        ((as = ownerDocument.createElement(\"link\")),\n        setInitialProperties(as, \"link\", href),\n        markNodeAsHoistable(as),\n        ownerDocument.head.appendChild(as)));\n  }\n}\nfunction preloadModule(href, options) {\n  previousDispatcher.m(href, options);\n  var ownerDocument = globalDocument;\n  if (ownerDocument && href) {\n    var as = options && \"string\" === typeof options.as ? options.as : \"script\",\n      preloadSelector =\n        'link[rel=\"modulepreload\"][as=\"' +\n        escapeSelectorAttributeValueInsideDoubleQuotes(as) +\n        '\"][href=\"' +\n        escapeSelectorAttributeValueInsideDoubleQuotes(href) +\n        '\"]',\n      key = preloadSelector;\n    switch (as) {\n      case \"audioworklet\":\n      case \"paintworklet\":\n      case \"serviceworker\":\n      case \"sharedworker\":\n      case \"worker\":\n      case \"script\":\n        key = getScriptKey(href);\n    }\n    if (\n      !preloadPropsMap.has(key) &&\n      ((href = assign({ rel: \"modulepreload\", href: href }, options)),\n      preloadPropsMap.set(key, href),\n      null === ownerDocument.querySelector(preloadSelector))\n    ) {\n      switch (as) {\n        case \"audioworklet\":\n        case \"paintworklet\":\n        case \"serviceworker\":\n        case \"sharedworker\":\n        case \"worker\":\n        case \"script\":\n          if (ownerDocument.querySelector(getScriptSelectorFromKey(key)))\n            return;\n      }\n      as = ownerDocument.createElement(\"link\");\n      setInitialProperties(as, \"link\", href);\n      markNodeAsHoistable(as);\n      ownerDocument.head.appendChild(as);\n    }\n  }\n}\nfunction preinitStyle(href, precedence, options) {\n  previousDispatcher.S(href, precedence, options);\n  var ownerDocument = globalDocument;\n  if (ownerDocument && href) {\n    var styles = getResourcesFromRoot(ownerDocument).hoistableStyles,\n      key = getStyleKey(href);\n    precedence = precedence || \"default\";\n    var resource = styles.get(key);\n    if (!resource) {\n      var state = { loading: 0, preload: null };\n      if (\n        (resource = ownerDocument.querySelector(\n          getStylesheetSelectorFromKey(key)\n        ))\n      )\n        state.loading = 5;\n      else {\n        href = assign(\n          { rel: \"stylesheet\", href: href, \"data-precedence\": precedence },\n          options\n        );\n        (options = preloadPropsMap.get(key)) &&\n          adoptPreloadPropsForStylesheet(href, options);\n        var link = (resource = ownerDocument.createElement(\"link\"));\n        markNodeAsHoistable(link);\n        setInitialProperties(link, \"link\", href);\n        link._p = new Promise(function (resolve, reject) {\n          link.onload = resolve;\n          link.onerror = reject;\n        });\n        link.addEventListener(\"load\", function () {\n          state.loading |= 1;\n        });\n        link.addEventListener(\"error\", function () {\n          state.loading |= 2;\n        });\n        state.loading |= 4;\n        insertStylesheet(resource, precedence, ownerDocument);\n      }\n      resource = {\n        type: \"stylesheet\",\n        instance: resource,\n        count: 1,\n        state: state\n      };\n      styles.set(key, resource);\n    }\n  }\n}\nfunction preinitScript(src, options) {\n  previousDispatcher.X(src, options);\n  var ownerDocument = globalDocument;\n  if (ownerDocument && src) {\n    var scripts = getResourcesFromRoot(ownerDocument).hoistableScripts,\n      key = getScriptKey(src),\n      resource = scripts.get(key);\n    resource ||\n      ((resource = ownerDocument.querySelector(getScriptSelectorFromKey(key))),\n      resource ||\n        ((src = assign({ src: src, async: !0 }, options)),\n        (options = preloadPropsMap.get(key)) &&\n          adoptPreloadPropsForScript(src, options),\n        (resource = ownerDocument.createElement(\"script\")),\n        markNodeAsHoistable(resource),\n        setInitialProperties(resource, \"link\", src),\n        ownerDocument.head.appendChild(resource)),\n      (resource = {\n        type: \"script\",\n        instance: resource,\n        count: 1,\n        state: null\n      }),\n      scripts.set(key, resource));\n  }\n}\nfunction preinitModuleScript(src, options) {\n  previousDispatcher.M(src, options);\n  var ownerDocument = globalDocument;\n  if (ownerDocument && src) {\n    var scripts = getResourcesFromRoot(ownerDocument).hoistableScripts,\n      key = getScriptKey(src),\n      resource = scripts.get(key);\n    resource ||\n      ((resource = ownerDocument.querySelector(getScriptSelectorFromKey(key))),\n      resource ||\n        ((src = assign({ src: src, async: !0, type: \"module\" }, options)),\n        (options = preloadPropsMap.get(key)) &&\n          adoptPreloadPropsForScript(src, options),\n        (resource = ownerDocument.createElement(\"script\")),\n        markNodeAsHoistable(resource),\n        setInitialProperties(resource, \"link\", src),\n        ownerDocument.head.appendChild(resource)),\n      (resource = {\n        type: \"script\",\n        instance: resource,\n        count: 1,\n        state: null\n      }),\n      scripts.set(key, resource));\n  }\n}\nfunction getResource(type, currentProps, pendingProps, currentResource) {\n  var JSCompiler_inline_result = (JSCompiler_inline_result =\n    rootInstanceStackCursor.current)\n    ? getHoistableRoot(JSCompiler_inline_result)\n    : null;\n  if (!JSCompiler_inline_result) throw Error(formatProdErrorMessage(446));\n  switch (type) {\n    case \"meta\":\n    case \"title\":\n      return null;\n    case \"style\":\n      return \"string\" === typeof pendingProps.precedence &&\n        \"string\" === typeof pendingProps.href\n        ? ((currentProps = getStyleKey(pendingProps.href)),\n          (pendingProps = getResourcesFromRoot(\n            JSCompiler_inline_result\n          ).hoistableStyles),\n          (currentResource = pendingProps.get(currentProps)),\n          currentResource ||\n            ((currentResource = {\n              type: \"style\",\n              instance: null,\n              count: 0,\n              state: null\n            }),\n            pendingProps.set(currentProps, currentResource)),\n          currentResource)\n        : { type: \"void\", instance: null, count: 0, state: null };\n    case \"link\":\n      if (\n        \"stylesheet\" === pendingProps.rel &&\n        \"string\" === typeof pendingProps.href &&\n        \"string\" === typeof pendingProps.precedence\n      ) {\n        type = getStyleKey(pendingProps.href);\n        var styles$244 = getResourcesFromRoot(\n            JSCompiler_inline_result\n          ).hoistableStyles,\n          resource$245 = styles$244.get(type);\n        resource$245 ||\n          ((JSCompiler_inline_result =\n            JSCompiler_inline_result.ownerDocument || JSCompiler_inline_result),\n          (resource$245 = {\n            type: \"stylesheet\",\n            instance: null,\n            count: 0,\n            state: { loading: 0, preload: null }\n          }),\n          styles$244.set(type, resource$245),\n          (styles$244 = JSCompiler_inline_result.querySelector(\n            getStylesheetSelectorFromKey(type)\n          )) &&\n            !styles$244._p &&\n            ((resource$245.instance = styles$244),\n            (resource$245.state.loading = 5)),\n          preloadPropsMap.has(type) ||\n            ((pendingProps = {\n              rel: \"preload\",\n              as: \"style\",\n              href: pendingProps.href,\n              crossOrigin: pendingProps.crossOrigin,\n              integrity: pendingProps.integrity,\n              media: pendingProps.media,\n              hrefLang: pendingProps.hrefLang,\n              referrerPolicy: pendingProps.referrerPolicy\n            }),\n            preloadPropsMap.set(type, pendingProps),\n            styles$244 ||\n              preloadStylesheet(\n                JSCompiler_inline_result,\n                type,\n                pendingProps,\n                resource$245.state\n              )));\n        if (currentProps && null === currentResource)\n          throw Error(formatProdErrorMessage(528, \"\"));\n        return resource$245;\n      }\n      if (currentProps && null !== currentResource)\n        throw Error(formatProdErrorMessage(529, \"\"));\n      return null;\n    case \"script\":\n      return (\n        (currentProps = pendingProps.async),\n        (pendingProps = pendingProps.src),\n        \"string\" === typeof pendingProps &&\n        currentProps &&\n        \"function\" !== typeof currentProps &&\n        \"symbol\" !== typeof currentProps\n          ? ((currentProps = getScriptKey(pendingProps)),\n            (pendingProps = getResourcesFromRoot(\n              JSCompiler_inline_result\n            ).hoistableScripts),\n            (currentResource = pendingProps.get(currentProps)),\n            currentResource ||\n              ((currentResource = {\n                type: \"script\",\n                instance: null,\n                count: 0,\n                state: null\n              }),\n              pendingProps.set(currentProps, currentResource)),\n            currentResource)\n          : { type: \"void\", instance: null, count: 0, state: null }\n      );\n    default:\n      throw Error(formatProdErrorMessage(444, type));\n  }\n}\nfunction getStyleKey(href) {\n  return 'href=\"' + escapeSelectorAttributeValueInsideDoubleQuotes(href) + '\"';\n}\nfunction getStylesheetSelectorFromKey(key) {\n  return 'link[rel=\"stylesheet\"][' + key + \"]\";\n}\nfunction stylesheetPropsFromRawProps(rawProps) {\n  return assign({}, rawProps, {\n    \"data-precedence\": rawProps.precedence,\n    precedence: null\n  });\n}\nfunction preloadStylesheet(ownerDocument, key, preloadProps, state) {\n  ownerDocument.querySelector('link[rel=\"preload\"][as=\"style\"][' + key + \"]\")\n    ? (state.loading = 1)\n    : ((key = ownerDocument.createElement(\"link\")),\n      (state.preload = key),\n      key.addEventListener(\"load\", function () {\n        return (state.loading |= 1);\n      }),\n      key.addEventListener(\"error\", function () {\n        return (state.loading |= 2);\n      }),\n      setInitialProperties(key, \"link\", preloadProps),\n      markNodeAsHoistable(key),\n      ownerDocument.head.appendChild(key));\n}\nfunction getScriptKey(src) {\n  return '[src=\"' + escapeSelectorAttributeValueInsideDoubleQuotes(src) + '\"]';\n}\nfunction getScriptSelectorFromKey(key) {\n  return \"script[async]\" + key;\n}\nfunction acquireResource(hoistableRoot, resource, props) {\n  resource.count++;\n  if (null === resource.instance)\n    switch (resource.type) {\n      case \"style\":\n        var instance = hoistableRoot.querySelector(\n          'style[data-href~=\"' +\n            escapeSelectorAttributeValueInsideDoubleQuotes(props.href) +\n            '\"]'\n        );\n        if (instance)\n          return (\n            (resource.instance = instance),\n            markNodeAsHoistable(instance),\n            instance\n          );\n        var styleProps = assign({}, props, {\n          \"data-href\": props.href,\n          \"data-precedence\": props.precedence,\n          href: null,\n          precedence: null\n        });\n        instance = (hoistableRoot.ownerDocument || hoistableRoot).createElement(\n          \"style\"\n        );\n        markNodeAsHoistable(instance);\n        setInitialProperties(instance, \"style\", styleProps);\n        insertStylesheet(instance, props.precedence, hoistableRoot);\n        return (resource.instance = instance);\n      case \"stylesheet\":\n        styleProps = getStyleKey(props.href);\n        var instance$250 = hoistableRoot.querySelector(\n          getStylesheetSelectorFromKey(styleProps)\n        );\n        if (instance$250)\n          return (\n            (resource.state.loading |= 4),\n            (resource.instance = instance$250),\n            markNodeAsHoistable(instance$250),\n            instance$250\n          );\n        instance = stylesheetPropsFromRawProps(props);\n        (styleProps = preloadPropsMap.get(styleProps)) &&\n          adoptPreloadPropsForStylesheet(instance, styleProps);\n        instance$250 = (\n          hoistableRoot.ownerDocument || hoistableRoot\n        ).createElement(\"link\");\n        markNodeAsHoistable(instance$250);\n        var linkInstance = instance$250;\n        linkInstance._p = new Promise(function (resolve, reject) {\n          linkInstance.onload = resolve;\n          linkInstance.onerror = reject;\n        });\n        setInitialProperties(instance$250, \"link\", instance);\n        resource.state.loading |= 4;\n        insertStylesheet(instance$250, props.precedence, hoistableRoot);\n        return (resource.instance = instance$250);\n      case \"script\":\n        instance$250 = getScriptKey(props.src);\n        if (\n          (styleProps = hoistableRoot.querySelector(\n            getScriptSelectorFromKey(instance$250)\n          ))\n        )\n          return (\n            (resource.instance = styleProps),\n            markNodeAsHoistable(styleProps),\n            styleProps\n          );\n        instance = props;\n        if ((styleProps = preloadPropsMap.get(instance$250)))\n          (instance = assign({}, props)),\n            adoptPreloadPropsForScript(instance, styleProps);\n        hoistableRoot = hoistableRoot.ownerDocument || hoistableRoot;\n        styleProps = hoistableRoot.createElement(\"script\");\n        markNodeAsHoistable(styleProps);\n        setInitialProperties(styleProps, \"link\", instance);\n        hoistableRoot.head.appendChild(styleProps);\n        return (resource.instance = styleProps);\n      case \"void\":\n        return null;\n      default:\n        throw Error(formatProdErrorMessage(443, resource.type));\n    }\n  else\n    \"stylesheet\" === resource.type &&\n      0 === (resource.state.loading & 4) &&\n      ((instance = resource.instance),\n      (resource.state.loading |= 4),\n      insertStylesheet(instance, props.precedence, hoistableRoot));\n  return resource.instance;\n}\nfunction insertStylesheet(instance, precedence, root) {\n  for (\n    var nodes = root.querySelectorAll(\n        'link[rel=\"stylesheet\"][data-precedence],style[data-precedence]'\n      ),\n      last = nodes.length ? nodes[nodes.length - 1] : null,\n      prior = last,\n      i = 0;\n    i < nodes.length;\n    i++\n  ) {\n    var node = nodes[i];\n    if (node.dataset.precedence === precedence) prior = node;\n    else if (prior !== last) break;\n  }\n  prior\n    ? prior.parentNode.insertBefore(instance, prior.nextSibling)\n    : ((precedence = 9 === root.nodeType ? root.head : root),\n      precedence.insertBefore(instance, precedence.firstChild));\n}\nfunction adoptPreloadPropsForStylesheet(stylesheetProps, preloadProps) {\n  null == stylesheetProps.crossOrigin &&\n    (stylesheetProps.crossOrigin = preloadProps.crossOrigin);\n  null == stylesheetProps.referrerPolicy &&\n    (stylesheetProps.referrerPolicy = preloadProps.referrerPolicy);\n  null == stylesheetProps.title && (stylesheetProps.title = preloadProps.title);\n}\nfunction adoptPreloadPropsForScript(scriptProps, preloadProps) {\n  null == scriptProps.crossOrigin &&\n    (scriptProps.crossOrigin = preloadProps.crossOrigin);\n  null == scriptProps.referrerPolicy &&\n    (scriptProps.referrerPolicy = preloadProps.referrerPolicy);\n  null == scriptProps.integrity &&\n    (scriptProps.integrity = preloadProps.integrity);\n}\nvar tagCaches = null;\nfunction getHydratableHoistableCache(type, keyAttribute, ownerDocument) {\n  if (null === tagCaches) {\n    var cache = new Map();\n    var caches = (tagCaches = new Map());\n    caches.set(ownerDocument, cache);\n  } else\n    (caches = tagCaches),\n      (cache = caches.get(ownerDocument)),\n      cache || ((cache = new Map()), caches.set(ownerDocument, cache));\n  if (cache.has(type)) return cache;\n  cache.set(type, null);\n  ownerDocument = ownerDocument.getElementsByTagName(type);\n  for (caches = 0; caches < ownerDocument.length; caches++) {\n    var node = ownerDocument[caches];\n    if (\n      !(\n        node[internalHoistableMarker] ||\n        node[internalInstanceKey] ||\n        (\"link\" === type && \"stylesheet\" === node.getAttribute(\"rel\"))\n      ) &&\n      \"http://www.w3.org/2000/svg\" !== node.namespaceURI\n    ) {\n      var nodeKey = node.getAttribute(keyAttribute) || \"\";\n      nodeKey = type + nodeKey;\n      var existing = cache.get(nodeKey);\n      existing ? existing.push(node) : cache.set(nodeKey, [node]);\n    }\n  }\n  return cache;\n}\nfunction mountHoistable(hoistableRoot, type, instance) {\n  hoistableRoot = hoistableRoot.ownerDocument || hoistableRoot;\n  hoistableRoot.head.insertBefore(\n    instance,\n    \"title\" === type ? hoistableRoot.querySelector(\"head > title\") : null\n  );\n}\nfunction isHostHoistableType(type, props, hostContext) {\n  if (1 === hostContext || null != props.itemProp) return !1;\n  switch (type) {\n    case \"meta\":\n    case \"title\":\n      return !0;\n    case \"style\":\n      if (\n        \"string\" !== typeof props.precedence ||\n        \"string\" !== typeof props.href ||\n        \"\" === props.href\n      )\n        break;\n      return !0;\n    case \"link\":\n      if (\n        \"string\" !== typeof props.rel ||\n        \"string\" !== typeof props.href ||\n        \"\" === props.href ||\n        props.onLoad ||\n        props.onError\n      )\n        break;\n      switch (props.rel) {\n        case \"stylesheet\":\n          return (\n            (type = props.disabled),\n            \"string\" === typeof props.precedence && null == type\n          );\n        default:\n          return !0;\n      }\n    case \"script\":\n      if (\n        props.async &&\n        \"function\" !== typeof props.async &&\n        \"symbol\" !== typeof props.async &&\n        !props.onLoad &&\n        !props.onError &&\n        props.src &&\n        \"string\" === typeof props.src\n      )\n        return !0;\n  }\n  return !1;\n}\nfunction preloadResource(resource) {\n  return \"stylesheet\" === resource.type && 0 === (resource.state.loading & 3)\n    ? !1\n    : !0;\n}\nvar suspendedState = null;\nfunction noop() {}\nfunction suspendResource(hoistableRoot, resource, props) {\n  if (null === suspendedState) throw Error(formatProdErrorMessage(475));\n  var state = suspendedState;\n  if (\n    \"stylesheet\" === resource.type &&\n    (\"string\" !== typeof props.media ||\n      !1 !== matchMedia(props.media).matches) &&\n    0 === (resource.state.loading & 4)\n  ) {\n    if (null === resource.instance) {\n      var key = getStyleKey(props.href),\n        instance = hoistableRoot.querySelector(\n          getStylesheetSelectorFromKey(key)\n        );\n      if (instance) {\n        hoistableRoot = instance._p;\n        null !== hoistableRoot &&\n          \"object\" === typeof hoistableRoot &&\n          \"function\" === typeof hoistableRoot.then &&\n          (state.count++,\n          (state = onUnsuspend.bind(state)),\n          hoistableRoot.then(state, state));\n        resource.state.loading |= 4;\n        resource.instance = instance;\n        markNodeAsHoistable(instance);\n        return;\n      }\n      instance = hoistableRoot.ownerDocument || hoistableRoot;\n      props = stylesheetPropsFromRawProps(props);\n      (key = preloadPropsMap.get(key)) &&\n        adoptPreloadPropsForStylesheet(props, key);\n      instance = instance.createElement(\"link\");\n      markNodeAsHoistable(instance);\n      var linkInstance = instance;\n      linkInstance._p = new Promise(function (resolve, reject) {\n        linkInstance.onload = resolve;\n        linkInstance.onerror = reject;\n      });\n      setInitialProperties(instance, \"link\", props);\n      resource.instance = instance;\n    }\n    null === state.stylesheets && (state.stylesheets = new Map());\n    state.stylesheets.set(resource, hoistableRoot);\n    (hoistableRoot = resource.state.preload) &&\n      0 === (resource.state.loading & 3) &&\n      (state.count++,\n      (resource = onUnsuspend.bind(state)),\n      hoistableRoot.addEventListener(\"load\", resource),\n      hoistableRoot.addEventListener(\"error\", resource));\n  }\n}\nfunction waitForCommitToBeReady() {\n  if (null === suspendedState) throw Error(formatProdErrorMessage(475));\n  var state = suspendedState;\n  state.stylesheets &&\n    0 === state.count &&\n    insertSuspendedStylesheets(state, state.stylesheets);\n  return 0 < state.count\n    ? function (commit) {\n        var stylesheetTimer = setTimeout(function () {\n          state.stylesheets &&\n            insertSuspendedStylesheets(state, state.stylesheets);\n          if (state.unsuspend) {\n            var unsuspend = state.unsuspend;\n            state.unsuspend = null;\n            unsuspend();\n          }\n        }, 6e4);\n        state.unsuspend = commit;\n        return function () {\n          state.unsuspend = null;\n          clearTimeout(stylesheetTimer);\n        };\n      }\n    : null;\n}\nfunction onUnsuspend() {\n  this.count--;\n  if (0 === this.count)\n    if (this.stylesheets) insertSuspendedStylesheets(this, this.stylesheets);\n    else if (this.unsuspend) {\n      var unsuspend = this.unsuspend;\n      this.unsuspend = null;\n      unsuspend();\n    }\n}\nvar precedencesByRoot = null;\nfunction insertSuspendedStylesheets(state, resources) {\n  state.stylesheets = null;\n  null !== state.unsuspend &&\n    (state.count++,\n    (precedencesByRoot = new Map()),\n    resources.forEach(insertStylesheetIntoRoot, state),\n    (precedencesByRoot = null),\n    onUnsuspend.call(state));\n}\nfunction insertStylesheetIntoRoot(root, resource) {\n  if (!(resource.state.loading & 4)) {\n    var precedences = precedencesByRoot.get(root);\n    if (precedences) var last = precedences.get(null);\n    else {\n      precedences = new Map();\n      precedencesByRoot.set(root, precedences);\n      for (\n        var nodes = root.querySelectorAll(\n            \"link[data-precedence],style[data-precedence]\"\n          ),\n          i = 0;\n        i < nodes.length;\n        i++\n      ) {\n        var node = nodes[i];\n        if (\n          \"LINK\" === node.nodeName ||\n          \"not all\" !== node.getAttribute(\"media\")\n        )\n          precedences.set(node.dataset.precedence, node), (last = node);\n      }\n      last && precedences.set(null, last);\n    }\n    nodes = resource.instance;\n    node = nodes.getAttribute(\"data-precedence\");\n    i = precedences.get(node) || last;\n    i === last && precedences.set(null, nodes);\n    precedences.set(node, nodes);\n    this.count++;\n    last = onUnsuspend.bind(this);\n    nodes.addEventListener(\"load\", last);\n    nodes.addEventListener(\"error\", last);\n    i\n      ? i.parentNode.insertBefore(nodes, i.nextSibling)\n      : ((root = 9 === root.nodeType ? root.head : root),\n        root.insertBefore(nodes, root.firstChild));\n    resource.state.loading |= 4;\n  }\n}\nvar HostTransitionContext = {\n  $$typeof: REACT_CONTEXT_TYPE,\n  Provider: null,\n  Consumer: null,\n  _currentValue: sharedNotPendingObject,\n  _currentValue2: sharedNotPendingObject,\n  _threadCount: 0\n};\nfunction FiberRootNode(\n  containerInfo,\n  tag,\n  hydrate,\n  identifierPrefix,\n  onUncaughtError,\n  onCaughtError,\n  onRecoverableError,\n  formState\n) {\n  this.tag = 1;\n  this.containerInfo = containerInfo;\n  this.pingCache = this.current = this.pendingChildren = null;\n  this.timeoutHandle = -1;\n  this.callbackNode =\n    this.next =\n    this.pendingContext =\n    this.context =\n    this.cancelPendingCommit =\n      null;\n  this.callbackPriority = 0;\n  this.expirationTimes = createLaneMap(-1);\n  this.entangledLanes =\n    this.shellSuspendCounter =\n    this.errorRecoveryDisabledLanes =\n    this.expiredLanes =\n    this.warmLanes =\n    this.pingedLanes =\n    this.suspendedLanes =\n    this.pendingLanes =\n      0;\n  this.entanglements = createLaneMap(0);\n  this.hiddenUpdates = createLaneMap(null);\n  this.identifierPrefix = identifierPrefix;\n  this.onUncaughtError = onUncaughtError;\n  this.onCaughtError = onCaughtError;\n  this.onRecoverableError = onRecoverableError;\n  this.pooledCache = null;\n  this.pooledCacheLanes = 0;\n  this.formState = formState;\n  this.incompleteTransitions = new Map();\n}\nfunction createFiberRoot(\n  containerInfo,\n  tag,\n  hydrate,\n  initialChildren,\n  hydrationCallbacks,\n  isStrictMode,\n  identifierPrefix,\n  onUncaughtError,\n  onCaughtError,\n  onRecoverableError,\n  transitionCallbacks,\n  formState\n) {\n  containerInfo = new FiberRootNode(\n    containerInfo,\n    tag,\n    hydrate,\n    identifierPrefix,\n    onUncaughtError,\n    onCaughtError,\n    onRecoverableError,\n    formState\n  );\n  tag = 1;\n  !0 === isStrictMode && (tag |= 24);\n  isStrictMode = createFiberImplClass(3, null, null, tag);\n  containerInfo.current = isStrictMode;\n  isStrictMode.stateNode = containerInfo;\n  tag = createCache();\n  tag.refCount++;\n  containerInfo.pooledCache = tag;\n  tag.refCount++;\n  isStrictMode.memoizedState = {\n    element: initialChildren,\n    isDehydrated: hydrate,\n    cache: tag\n  };\n  initializeUpdateQueue(isStrictMode);\n  return containerInfo;\n}\nfunction getContextForSubtree(parentComponent) {\n  if (!parentComponent) return emptyContextObject;\n  parentComponent = emptyContextObject;\n  return parentComponent;\n}\nfunction updateContainerImpl(\n  rootFiber,\n  lane,\n  element,\n  container,\n  parentComponent,\n  callback\n) {\n  parentComponent = getContextForSubtree(parentComponent);\n  null === container.context\n    ? (container.context = parentComponent)\n    : (container.pendingContext = parentComponent);\n  container = createUpdate(lane);\n  container.payload = { element: element };\n  callback = void 0 === callback ? null : callback;\n  null !== callback && (container.callback = callback);\n  element = enqueueUpdate(rootFiber, container, lane);\n  null !== element &&\n    (scheduleUpdateOnFiber(element, rootFiber, lane),\n    entangleTransitions(element, rootFiber, lane));\n}\nfunction markRetryLaneImpl(fiber, retryLane) {\n  fiber = fiber.memoizedState;\n  if (null !== fiber && null !== fiber.dehydrated) {\n    var a = fiber.retryLane;\n    fiber.retryLane = 0 !== a && a < retryLane ? a : retryLane;\n  }\n}\nfunction markRetryLaneIfNotHydrated(fiber, retryLane) {\n  markRetryLaneImpl(fiber, retryLane);\n  (fiber = fiber.alternate) && markRetryLaneImpl(fiber, retryLane);\n}\nfunction attemptContinuousHydration(fiber) {\n  if (13 === fiber.tag) {\n    var root = enqueueConcurrentRenderForLane(fiber, 67108864);\n    null !== root && scheduleUpdateOnFiber(root, fiber, 67108864);\n    markRetryLaneIfNotHydrated(fiber, 67108864);\n  }\n}\nvar _enabled = !0;\nfunction dispatchDiscreteEvent(\n  domEventName,\n  eventSystemFlags,\n  container,\n  nativeEvent\n) {\n  var prevTransition = ReactSharedInternals.T;\n  ReactSharedInternals.T = null;\n  var previousPriority = ReactDOMSharedInternals.p;\n  try {\n    (ReactDOMSharedInternals.p = 2),\n      dispatchEvent(domEventName, eventSystemFlags, container, nativeEvent);\n  } finally {\n    (ReactDOMSharedInternals.p = previousPriority),\n      (ReactSharedInternals.T = prevTransition);\n  }\n}\nfunction dispatchContinuousEvent(\n  domEventName,\n  eventSystemFlags,\n  container,\n  nativeEvent\n) {\n  var prevTransition = ReactSharedInternals.T;\n  ReactSharedInternals.T = null;\n  var previousPriority = ReactDOMSharedInternals.p;\n  try {\n    (ReactDOMSharedInternals.p = 8),\n      dispatchEvent(domEventName, eventSystemFlags, container, nativeEvent);\n  } finally {\n    (ReactDOMSharedInternals.p = previousPriority),\n      (ReactSharedInternals.T = prevTransition);\n  }\n}\nfunction dispatchEvent(\n  domEventName,\n  eventSystemFlags,\n  targetContainer,\n  nativeEvent\n) {\n  if (_enabled) {\n    var blockedOn = findInstanceBlockingEvent(nativeEvent);\n    if (null === blockedOn)\n      dispatchEventForPluginEventSystem(\n        domEventName,\n        eventSystemFlags,\n        nativeEvent,\n        return_targetInst,\n        targetContainer\n      ),\n        clearIfContinuousEvent(domEventName, nativeEvent);\n    else if (\n      queueIfContinuousEvent(\n        blockedOn,\n        domEventName,\n        eventSystemFlags,\n        targetContainer,\n        nativeEvent\n      )\n    )\n      nativeEvent.stopPropagation();\n    else if (\n      (clearIfContinuousEvent(domEventName, nativeEvent),\n      eventSystemFlags & 4 &&\n        -1 < discreteReplayableEvents.indexOf(domEventName))\n    ) {\n      for (; null !== blockedOn; ) {\n        var fiber = getInstanceFromNode(blockedOn);\n        if (null !== fiber)\n          switch (fiber.tag) {\n            case 3:\n              fiber = fiber.stateNode;\n              if (fiber.current.memoizedState.isDehydrated) {\n                var lanes = getHighestPriorityLanes(fiber.pendingLanes);\n                if (0 !== lanes) {\n                  var root = fiber;\n                  root.pendingLanes |= 2;\n                  for (root.entangledLanes |= 2; lanes; ) {\n                    var lane = 1 << (31 - clz32(lanes));\n                    root.entanglements[1] |= lane;\n                    lanes &= ~lane;\n                  }\n                  ensureRootIsScheduled(fiber);\n                  0 === (executionContext & 6) &&\n                    ((workInProgressRootRenderTargetTime = now() + 500),\n                    flushSyncWorkAcrossRoots_impl(0, !1));\n                }\n              }\n              break;\n            case 13:\n              (root = enqueueConcurrentRenderForLane(fiber, 2)),\n                null !== root && scheduleUpdateOnFiber(root, fiber, 2),\n                flushSyncWork$1(),\n                markRetryLaneIfNotHydrated(fiber, 2);\n          }\n        fiber = findInstanceBlockingEvent(nativeEvent);\n        null === fiber &&\n          dispatchEventForPluginEventSystem(\n            domEventName,\n            eventSystemFlags,\n            nativeEvent,\n            return_targetInst,\n            targetContainer\n          );\n        if (fiber === blockedOn) break;\n        blockedOn = fiber;\n      }\n      null !== blockedOn && nativeEvent.stopPropagation();\n    } else\n      dispatchEventForPluginEventSystem(\n        domEventName,\n        eventSystemFlags,\n        nativeEvent,\n        null,\n        targetContainer\n      );\n  }\n}\nfunction findInstanceBlockingEvent(nativeEvent) {\n  nativeEvent = getEventTarget(nativeEvent);\n  return findInstanceBlockingTarget(nativeEvent);\n}\nvar return_targetInst = null;\nfunction findInstanceBlockingTarget(targetNode) {\n  return_targetInst = null;\n  targetNode = getClosestInstanceFromNode(targetNode);\n  if (null !== targetNode) {\n    var nearestMounted = getNearestMountedFiber(targetNode);\n    if (null === nearestMounted) targetNode = null;\n    else {\n      var tag = nearestMounted.tag;\n      if (13 === tag) {\n        targetNode = getSuspenseInstanceFromFiber(nearestMounted);\n        if (null !== targetNode) return targetNode;\n        targetNode = null;\n      } else if (3 === tag) {\n        if (nearestMounted.stateNode.current.memoizedState.isDehydrated)\n          return 3 === nearestMounted.tag\n            ? nearestMounted.stateNode.containerInfo\n            : null;\n        targetNode = null;\n      } else nearestMounted !== targetNode && (targetNode = null);\n    }\n  }\n  return_targetInst = targetNode;\n  return null;\n}\nfunction getEventPriority(domEventName) {\n  switch (domEventName) {\n    case \"beforetoggle\":\n    case \"cancel\":\n    case \"click\":\n    case \"close\":\n    case \"contextmenu\":\n    case \"copy\":\n    case \"cut\":\n    case \"auxclick\":\n    case \"dblclick\":\n    case \"dragend\":\n    case \"dragstart\":\n    case \"drop\":\n    case \"focusin\":\n    case \"focusout\":\n    case \"input\":\n    case \"invalid\":\n    case \"keydown\":\n    case \"keypress\":\n    case \"keyup\":\n    case \"mousedown\":\n    case \"mouseup\":\n    case \"paste\":\n    case \"pause\":\n    case \"play\":\n    case \"pointercancel\":\n    case \"pointerdown\":\n    case \"pointerup\":\n    case \"ratechange\":\n    case \"reset\":\n    case \"resize\":\n    case \"seeked\":\n    case \"submit\":\n    case \"toggle\":\n    case \"touchcancel\":\n    case \"touchend\":\n    case \"touchstart\":\n    case \"volumechange\":\n    case \"change\":\n    case \"selectionchange\":\n    case \"textInput\":\n    case \"compositionstart\":\n    case \"compositionend\":\n    case \"compositionupdate\":\n    case \"beforeblur\":\n    case \"afterblur\":\n    case \"beforeinput\":\n    case \"blur\":\n    case \"fullscreenchange\":\n    case \"focus\":\n    case \"hashchange\":\n    case \"popstate\":\n    case \"select\":\n    case \"selectstart\":\n      return 2;\n    case \"drag\":\n    case \"dragenter\":\n    case \"dragexit\":\n    case \"dragleave\":\n    case \"dragover\":\n    case \"mousemove\":\n    case \"mouseout\":\n    case \"mouseover\":\n    case \"pointermove\":\n    case \"pointerout\":\n    case \"pointerover\":\n    case \"scroll\":\n    case \"touchmove\":\n    case \"wheel\":\n    case \"mouseenter\":\n    case \"mouseleave\":\n    case \"pointerenter\":\n    case \"pointerleave\":\n      return 8;\n    case \"message\":\n      switch (getCurrentPriorityLevel()) {\n        case ImmediatePriority:\n          return 2;\n        case UserBlockingPriority:\n          return 8;\n        case NormalPriority$1:\n        case LowPriority:\n          return 32;\n        case IdlePriority:\n          return 268435456;\n        default:\n          return 32;\n      }\n    default:\n      return 32;\n  }\n}\nvar hasScheduledReplayAttempt = !1,\n  queuedFocus = null,\n  queuedDrag = null,\n  queuedMouse = null,\n  queuedPointers = new Map(),\n  queuedPointerCaptures = new Map(),\n  queuedExplicitHydrationTargets = [],\n  discreteReplayableEvents =\n    \"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset\".split(\n      \" \"\n    );\nfunction clearIfContinuousEvent(domEventName, nativeEvent) {\n  switch (domEventName) {\n    case \"focusin\":\n    case \"focusout\":\n      queuedFocus = null;\n      break;\n    case \"dragenter\":\n    case \"dragleave\":\n      queuedDrag = null;\n      break;\n    case \"mouseover\":\n    case \"mouseout\":\n      queuedMouse = null;\n      break;\n    case \"pointerover\":\n    case \"pointerout\":\n      queuedPointers.delete(nativeEvent.pointerId);\n      break;\n    case \"gotpointercapture\":\n    case \"lostpointercapture\":\n      queuedPointerCaptures.delete(nativeEvent.pointerId);\n  }\n}\nfunction accumulateOrCreateContinuousQueuedReplayableEvent(\n  existingQueuedEvent,\n  blockedOn,\n  domEventName,\n  eventSystemFlags,\n  targetContainer,\n  nativeEvent\n) {\n  if (\n    null === existingQueuedEvent ||\n    existingQueuedEvent.nativeEvent !== nativeEvent\n  )\n    return (\n      (existingQueuedEvent = {\n        blockedOn: blockedOn,\n        domEventName: domEventName,\n        eventSystemFlags: eventSystemFlags,\n        nativeEvent: nativeEvent,\n        targetContainers: [targetContainer]\n      }),\n      null !== blockedOn &&\n        ((blockedOn = getInstanceFromNode(blockedOn)),\n        null !== blockedOn && attemptContinuousHydration(blockedOn)),\n      existingQueuedEvent\n    );\n  existingQueuedEvent.eventSystemFlags |= eventSystemFlags;\n  blockedOn = existingQueuedEvent.targetContainers;\n  null !== targetContainer &&\n    -1 === blockedOn.indexOf(targetContainer) &&\n    blockedOn.push(targetContainer);\n  return existingQueuedEvent;\n}\nfunction queueIfContinuousEvent(\n  blockedOn,\n  domEventName,\n  eventSystemFlags,\n  targetContainer,\n  nativeEvent\n) {\n  switch (domEventName) {\n    case \"focusin\":\n      return (\n        (queuedFocus = accumulateOrCreateContinuousQueuedReplayableEvent(\n          queuedFocus,\n          blockedOn,\n          domEventName,\n          eventSystemFlags,\n          targetContainer,\n          nativeEvent\n        )),\n        !0\n      );\n    case \"dragenter\":\n      return (\n        (queuedDrag = accumulateOrCreateContinuousQueuedReplayableEvent(\n          queuedDrag,\n          blockedOn,\n          domEventName,\n          eventSystemFlags,\n          targetContainer,\n          nativeEvent\n        )),\n        !0\n      );\n    case \"mouseover\":\n      return (\n        (queuedMouse = accumulateOrCreateContinuousQueuedReplayableEvent(\n          queuedMouse,\n          blockedOn,\n          domEventName,\n          eventSystemFlags,\n          targetContainer,\n          nativeEvent\n        )),\n        !0\n      );\n    case \"pointerover\":\n      var pointerId = nativeEvent.pointerId;\n      queuedPointers.set(\n        pointerId,\n        accumulateOrCreateContinuousQueuedReplayableEvent(\n          queuedPointers.get(pointerId) || null,\n          blockedOn,\n          domEventName,\n          eventSystemFlags,\n          targetContainer,\n          nativeEvent\n        )\n      );\n      return !0;\n    case \"gotpointercapture\":\n      return (\n        (pointerId = nativeEvent.pointerId),\n        queuedPointerCaptures.set(\n          pointerId,\n          accumulateOrCreateContinuousQueuedReplayableEvent(\n            queuedPointerCaptures.get(pointerId) || null,\n            blockedOn,\n            domEventName,\n            eventSystemFlags,\n            targetContainer,\n            nativeEvent\n          )\n        ),\n        !0\n      );\n  }\n  return !1;\n}\nfunction attemptExplicitHydrationTarget(queuedTarget) {\n  var targetInst = getClosestInstanceFromNode(queuedTarget.target);\n  if (null !== targetInst) {\n    var nearestMounted = getNearestMountedFiber(targetInst);\n    if (null !== nearestMounted)\n      if (((targetInst = nearestMounted.tag), 13 === targetInst)) {\n        if (\n          ((targetInst = getSuspenseInstanceFromFiber(nearestMounted)),\n          null !== targetInst)\n        ) {\n          queuedTarget.blockedOn = targetInst;\n          runWithPriority(queuedTarget.priority, function () {\n            if (13 === nearestMounted.tag) {\n              var lane = requestUpdateLane();\n              lane = getBumpedLaneForHydrationByLane(lane);\n              var root = enqueueConcurrentRenderForLane(nearestMounted, lane);\n              null !== root &&\n                scheduleUpdateOnFiber(root, nearestMounted, lane);\n              markRetryLaneIfNotHydrated(nearestMounted, lane);\n            }\n          });\n          return;\n        }\n      } else if (\n        3 === targetInst &&\n        nearestMounted.stateNode.current.memoizedState.isDehydrated\n      ) {\n        queuedTarget.blockedOn =\n          3 === nearestMounted.tag\n            ? nearestMounted.stateNode.containerInfo\n            : null;\n        return;\n      }\n  }\n  queuedTarget.blockedOn = null;\n}\nfunction attemptReplayContinuousQueuedEvent(queuedEvent) {\n  if (null !== queuedEvent.blockedOn) return !1;\n  for (\n    var targetContainers = queuedEvent.targetContainers;\n    0 < targetContainers.length;\n\n  ) {\n    var nextBlockedOn = findInstanceBlockingEvent(queuedEvent.nativeEvent);\n    if (null === nextBlockedOn) {\n      nextBlockedOn = queuedEvent.nativeEvent;\n      var nativeEventClone = new nextBlockedOn.constructor(\n        nextBlockedOn.type,\n        nextBlockedOn\n      );\n      currentReplayingEvent = nativeEventClone;\n      nextBlockedOn.target.dispatchEvent(nativeEventClone);\n      currentReplayingEvent = null;\n    } else\n      return (\n        (targetContainers = getInstanceFromNode(nextBlockedOn)),\n        null !== targetContainers &&\n          attemptContinuousHydration(targetContainers),\n        (queuedEvent.blockedOn = nextBlockedOn),\n        !1\n      );\n    targetContainers.shift();\n  }\n  return !0;\n}\nfunction attemptReplayContinuousQueuedEventInMap(queuedEvent, key, map) {\n  attemptReplayContinuousQueuedEvent(queuedEvent) && map.delete(key);\n}\nfunction replayUnblockedEvents() {\n  hasScheduledReplayAttempt = !1;\n  null !== queuedFocus &&\n    attemptReplayContinuousQueuedEvent(queuedFocus) &&\n    (queuedFocus = null);\n  null !== queuedDrag &&\n    attemptReplayContinuousQueuedEvent(queuedDrag) &&\n    (queuedDrag = null);\n  null !== queuedMouse &&\n    attemptReplayContinuousQueuedEvent(queuedMouse) &&\n    (queuedMouse = null);\n  queuedPointers.forEach(attemptReplayContinuousQueuedEventInMap);\n  queuedPointerCaptures.forEach(attemptReplayContinuousQueuedEventInMap);\n}\nfunction scheduleCallbackIfUnblocked(queuedEvent, unblocked) {\n  queuedEvent.blockedOn === unblocked &&\n    ((queuedEvent.blockedOn = null),\n    hasScheduledReplayAttempt ||\n      ((hasScheduledReplayAttempt = !0),\n      Scheduler.unstable_scheduleCallback(\n        Scheduler.unstable_NormalPriority,\n        replayUnblockedEvents\n      )));\n}\nvar lastScheduledReplayQueue = null;\nfunction scheduleReplayQueueIfNeeded(formReplayingQueue) {\n  lastScheduledReplayQueue !== formReplayingQueue &&\n    ((lastScheduledReplayQueue = formReplayingQueue),\n    Scheduler.unstable_scheduleCallback(\n      Scheduler.unstable_NormalPriority,\n      function () {\n        lastScheduledReplayQueue === formReplayingQueue &&\n          (lastScheduledReplayQueue = null);\n        for (var i = 0; i < formReplayingQueue.length; i += 3) {\n          var form = formReplayingQueue[i],\n            submitterOrAction = formReplayingQueue[i + 1],\n            formData = formReplayingQueue[i + 2];\n          if (\"function\" !== typeof submitterOrAction)\n            if (null === findInstanceBlockingTarget(submitterOrAction || form))\n              continue;\n            else break;\n          var formInst = getInstanceFromNode(form);\n          null !== formInst &&\n            (formReplayingQueue.splice(i, 3),\n            (i -= 3),\n            startHostTransition(\n              formInst,\n              {\n                pending: !0,\n                data: formData,\n                method: form.method,\n                action: submitterOrAction\n              },\n              submitterOrAction,\n              formData\n            ));\n        }\n      }\n    ));\n}\nfunction retryIfBlockedOn(unblocked) {\n  function unblock(queuedEvent) {\n    return scheduleCallbackIfUnblocked(queuedEvent, unblocked);\n  }\n  null !== queuedFocus && scheduleCallbackIfUnblocked(queuedFocus, unblocked);\n  null !== queuedDrag && scheduleCallbackIfUnblocked(queuedDrag, unblocked);\n  null !== queuedMouse && scheduleCallbackIfUnblocked(queuedMouse, unblocked);\n  queuedPointers.forEach(unblock);\n  queuedPointerCaptures.forEach(unblock);\n  for (var i = 0; i < queuedExplicitHydrationTargets.length; i++) {\n    var queuedTarget = queuedExplicitHydrationTargets[i];\n    queuedTarget.blockedOn === unblocked && (queuedTarget.blockedOn = null);\n  }\n  for (\n    ;\n    0 < queuedExplicitHydrationTargets.length &&\n    ((i = queuedExplicitHydrationTargets[0]), null === i.blockedOn);\n\n  )\n    attemptExplicitHydrationTarget(i),\n      null === i.blockedOn && queuedExplicitHydrationTargets.shift();\n  i = (unblocked.ownerDocument || unblocked).$$reactFormReplay;\n  if (null != i)\n    for (queuedTarget = 0; queuedTarget < i.length; queuedTarget += 3) {\n      var form = i[queuedTarget],\n        submitterOrAction = i[queuedTarget + 1],\n        formProps = form[internalPropsKey] || null;\n      if (\"function\" === typeof submitterOrAction)\n        formProps || scheduleReplayQueueIfNeeded(i);\n      else if (formProps) {\n        var action = null;\n        if (submitterOrAction && submitterOrAction.hasAttribute(\"formAction\"))\n          if (\n            ((form = submitterOrAction),\n            (formProps = submitterOrAction[internalPropsKey] || null))\n          )\n            action = formProps.formAction;\n          else {\n            if (null !== findInstanceBlockingTarget(form)) continue;\n          }\n        else action = formProps.action;\n        \"function\" === typeof action\n          ? (i[queuedTarget + 1] = action)\n          : (i.splice(queuedTarget, 3), (queuedTarget -= 3));\n        scheduleReplayQueueIfNeeded(i);\n      }\n    }\n}\nfunction ReactDOMRoot(internalRoot) {\n  this._internalRoot = internalRoot;\n}\nReactDOMHydrationRoot.prototype.render = ReactDOMRoot.prototype.render =\n  function (children) {\n    var root = this._internalRoot;\n    if (null === root) throw Error(formatProdErrorMessage(409));\n    var current = root.current,\n      lane = requestUpdateLane();\n    updateContainerImpl(current, lane, children, root, null, null);\n  };\nReactDOMHydrationRoot.prototype.unmount = ReactDOMRoot.prototype.unmount =\n  function () {\n    var root = this._internalRoot;\n    if (null !== root) {\n      this._internalRoot = null;\n      var container = root.containerInfo;\n      updateContainerImpl(root.current, 2, null, root, null, null);\n      flushSyncWork$1();\n      container[internalContainerInstanceKey] = null;\n    }\n  };\nfunction ReactDOMHydrationRoot(internalRoot) {\n  this._internalRoot = internalRoot;\n}\nReactDOMHydrationRoot.prototype.unstable_scheduleHydration = function (target) {\n  if (target) {\n    var updatePriority = resolveUpdatePriority();\n    target = { blockedOn: null, target: target, priority: updatePriority };\n    for (\n      var i = 0;\n      i < queuedExplicitHydrationTargets.length &&\n      0 !== updatePriority &&\n      updatePriority < queuedExplicitHydrationTargets[i].priority;\n      i++\n    );\n    queuedExplicitHydrationTargets.splice(i, 0, target);\n    0 === i && attemptExplicitHydrationTarget(target);\n  }\n};\nvar isomorphicReactPackageVersion$jscomp$inline_1785 = React.version;\nif (\n  \"19.1.1\" !==\n  isomorphicReactPackageVersion$jscomp$inline_1785\n)\n  throw Error(\n    formatProdErrorMessage(\n      527,\n      isomorphicReactPackageVersion$jscomp$inline_1785,\n      \"19.1.1\"\n    )\n  );\nReactDOMSharedInternals.findDOMNode = function (componentOrElement) {\n  var fiber = componentOrElement._reactInternals;\n  if (void 0 === fiber) {\n    if (\"function\" === typeof componentOrElement.render)\n      throw Error(formatProdErrorMessage(188));\n    componentOrElement = Object.keys(componentOrElement).join(\",\");\n    throw Error(formatProdErrorMessage(268, componentOrElement));\n  }\n  componentOrElement = findCurrentFiberUsingSlowPath(fiber);\n  componentOrElement =\n    null !== componentOrElement\n      ? findCurrentHostFiberImpl(componentOrElement)\n      : null;\n  componentOrElement =\n    null === componentOrElement ? null : componentOrElement.stateNode;\n  return componentOrElement;\n};\nvar internals$jscomp$inline_2256 = {\n  bundleType: 0,\n  version: \"19.1.1\",\n  rendererPackageName: \"react-dom\",\n  currentDispatcherRef: ReactSharedInternals,\n  reconcilerVersion: \"19.1.1\"\n};\nif (\"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__) {\n  var hook$jscomp$inline_2257 = __REACT_DEVTOOLS_GLOBAL_HOOK__;\n  if (\n    !hook$jscomp$inline_2257.isDisabled &&\n    hook$jscomp$inline_2257.supportsFiber\n  )\n    try {\n      (rendererID = hook$jscomp$inline_2257.inject(\n        internals$jscomp$inline_2256\n      )),\n        (injectedHook = hook$jscomp$inline_2257);\n    } catch (err) {}\n}\nexports.createRoot = function (container, options) {\n  if (!isValidContainer(container)) throw Error(formatProdErrorMessage(299));\n  var isStrictMode = !1,\n    identifierPrefix = \"\",\n    onUncaughtError = defaultOnUncaughtError,\n    onCaughtError = defaultOnCaughtError,\n    onRecoverableError = defaultOnRecoverableError,\n    transitionCallbacks = null;\n  null !== options &&\n    void 0 !== options &&\n    (!0 === options.unstable_strictMode && (isStrictMode = !0),\n    void 0 !== options.identifierPrefix &&\n      (identifierPrefix = options.identifierPrefix),\n    void 0 !== options.onUncaughtError &&\n      (onUncaughtError = options.onUncaughtError),\n    void 0 !== options.onCaughtError && (onCaughtError = options.onCaughtError),\n    void 0 !== options.onRecoverableError &&\n      (onRecoverableError = options.onRecoverableError),\n    void 0 !== options.unstable_transitionCallbacks &&\n      (transitionCallbacks = options.unstable_transitionCallbacks));\n  options = createFiberRoot(\n    container,\n    1,\n    !1,\n    null,\n    null,\n    isStrictMode,\n    identifierPrefix,\n    onUncaughtError,\n    onCaughtError,\n    onRecoverableError,\n    transitionCallbacks,\n    null\n  );\n  container[internalContainerInstanceKey] = options.current;\n  listenToAllSupportedEvents(container);\n  return new ReactDOMRoot(options);\n};\nexports.hydrateRoot = function (container, initialChildren, options) {\n  if (!isValidContainer(container)) throw Error(formatProdErrorMessage(299));\n  var isStrictMode = !1,\n    identifierPrefix = \"\",\n    onUncaughtError = defaultOnUncaughtError,\n    onCaughtError = defaultOnCaughtError,\n    onRecoverableError = defaultOnRecoverableError,\n    transitionCallbacks = null,\n    formState = null;\n  null !== options &&\n    void 0 !== options &&\n    (!0 === options.unstable_strictMode && (isStrictMode = !0),\n    void 0 !== options.identifierPrefix &&\n      (identifierPrefix = options.identifierPrefix),\n    void 0 !== options.onUncaughtError &&\n      (onUncaughtError = options.onUncaughtError),\n    void 0 !== options.onCaughtError && (onCaughtError = options.onCaughtError),\n    void 0 !== options.onRecoverableError &&\n      (onRecoverableError = options.onRecoverableError),\n    void 0 !== options.unstable_transitionCallbacks &&\n      (transitionCallbacks = options.unstable_transitionCallbacks),\n    void 0 !== options.formState && (formState = options.formState));\n  initialChildren = createFiberRoot(\n    container,\n    1,\n    !0,\n    initialChildren,\n    null != options ? options : null,\n    isStrictMode,\n    identifierPrefix,\n    onUncaughtError,\n    onCaughtError,\n    onRecoverableError,\n    transitionCallbacks,\n    formState\n  );\n  initialChildren.context = getContextForSubtree(null);\n  options = initialChildren.current;\n  isStrictMode = requestUpdateLane();\n  isStrictMode = getBumpedLaneForHydrationByLane(isStrictMode);\n  identifierPrefix = createUpdate(isStrictMode);\n  identifierPrefix.callback = null;\n  enqueueUpdate(options, identifierPrefix, isStrictMode);\n  options = isStrictMode;\n  initialChildren.current.lanes = options;\n  markRootUpdated$1(initialChildren, options);\n  ensureRootIsScheduled(initialChildren);\n  container[internalContainerInstanceKey] = initialChildren.current;\n  listenToAllSupportedEvents(container);\n  return new ReactDOMHydrationRoot(initialChildren);\n};\nexports.version = \"19.1.1\";\n","/**\n * Utility functions for formatting numbers, prices, and decimals\n */\n\n/**\n * Formats a number with dynamic decimal places\n * - Shows up to 8 decimal places for precision\n * - Removes trailing zeros\n * - Handles very small numbers appropriately\n * @param value - The number to format\n * @param maxDecimals - Maximum decimal places (default: 8)\n * @param minDecimals - Minimum decimal places (default: 0)\n * @returns Formatted number string\n */\nexport function formatDynamicDecimals(\n  value: number | string,\n  maxDecimals: number = 8,\n  minDecimals: number = 0\n): string {\n  const num = typeof value === 'string' ? parseFloat(value) : value\n  \n  if (isNaN(num)) return '0'\n  \n  // Handle zero\n  if (num === 0) return minDecimals > 0 ? '0.' + '0'.repeat(minDecimals) : '0'\n  \n  // For very small numbers, use scientific notation if needed\n  if (Math.abs(num) < Math.pow(10, -maxDecimals)) {\n    return num.toExponential(2)\n  }\n  \n  // Format with maximum decimals, then remove trailing zeros\n  let formatted = num.toFixed(maxDecimals)\n  \n  // Remove trailing zeros after decimal point\n  if (formatted.includes('.')) {\n    formatted = formatted.replace(/\\.?0+$/, '')\n  }\n  \n  // Ensure minimum decimal places\n  if (minDecimals > 0) {\n    const decimalIndex = formatted.indexOf('.')\n    if (decimalIndex === -1) {\n      formatted += '.' + '0'.repeat(minDecimals)\n    } else {\n      const currentDecimals = formatted.length - decimalIndex - 1\n      if (currentDecimals < minDecimals) {\n        formatted += '0'.repeat(minDecimals - currentDecimals)\n      }\n    }\n  }\n  \n  return formatted\n}\n\n/**\n * Formats a WAX price with appropriate decimal precision\n * @param price - Price in WAX (string or number)\n * @param showCurrency - Whether to append ' WAX' (default: true)\n * @returns Formatted price string\n */\nexport function formatWaxPrice(price: string | number, showCurrency: boolean = true): string {\n  const numPrice = typeof price === 'string' ? parseFloat(price.replace(' WAX', '')) : price\n  \n  if (isNaN(numPrice)) return showCurrency ? '0 WAX' : '0'\n  \n  let formatted: string\n  \n  if (numPrice >= 1000) {\n    // For large amounts, show 2-4 decimals max\n    formatted = formatDynamicDecimals(numPrice, 4, 0)\n  } else if (numPrice >= 1) {\n    // For amounts >= 1, show up to 4 decimals\n    formatted = formatDynamicDecimals(numPrice, 4, 0)\n  } else if (numPrice >= 0.01) {\n    // For amounts >= 0.01, show up to 6 decimals\n    formatted = formatDynamicDecimals(numPrice, 6, 0)\n  } else {\n    // For very small amounts, show up to 8 decimals\n    formatted = formatDynamicDecimals(numPrice, 8, 0)\n  }\n  \n  return showCurrency ? `${formatted} WAX` : formatted\n}\n\n/**\n * Formats a number with thousands separators\n * @param value - The number to format\n * @param decimals - Number of decimal places (optional)\n * @returns Formatted number with commas\n */\nexport function formatNumberWithCommas(value: number | string, decimals?: number): string {\n  const num = typeof value === 'string' ? parseFloat(value) : value\n  \n  if (isNaN(num)) return '0'\n  \n  const options: Intl.NumberFormatOptions = {\n    minimumFractionDigits: 0,\n    maximumFractionDigits: decimals ?? 8\n  }\n  \n  return num.toLocaleString('en-US', options)\n}\n\n/**\n * Formats a percentage with appropriate decimal places\n * @param value - The percentage value (0-100)\n * @param maxDecimals - Maximum decimal places (default: 2)\n * @returns Formatted percentage string\n */\nexport function formatPercentage(value: number, maxDecimals: number = 2): string {\n  if (isNaN(value)) return '0%'\n  \n  const formatted = formatDynamicDecimals(value, maxDecimals, 0)\n  return `${formatted}%`\n}\n\n/**\n * Formats a large number with appropriate units (K, M, B)\n * @param value - The number to format\n * @param decimals - Number of decimal places (default: 1)\n * @returns Formatted number with unit\n */\nexport function formatLargeNumber(value: number, decimals: number = 1): string {\n  if (isNaN(value)) return '0'\n  \n  const absValue = Math.abs(value)\n  const sign = value < 0 ? '-' : ''\n  \n  if (absValue >= 1e9) {\n    return `${sign}${formatDynamicDecimals(absValue / 1e9, decimals, 0)}B`\n  } else if (absValue >= 1e6) {\n    return `${sign}${formatDynamicDecimals(absValue / 1e6, decimals, 0)}M`\n  } else if (absValue >= 1e3) {\n    return `${sign}${formatDynamicDecimals(absValue / 1e3, decimals, 0)}K`\n  } else {\n    return `${sign}${formatDynamicDecimals(absValue, decimals, 0)}`\n  }\n}\n\n/**\n * Parses a price string and extracts the numeric value\n * @param priceString - Price string (e.g., \"1.2345 WAX\")\n * @returns Numeric price value\n */\nexport function parsePriceString(priceString: string): number {\n  if (!priceString) return 0\n  \n  // Remove currency symbols and extra whitespace\n  const cleaned = priceString.replace(/[^0-9.-]/g, '')\n  const parsed = parseFloat(cleaned)\n  \n  return isNaN(parsed) ? 0 : parsed\n}\n\n/**\n * Validates if a string represents a valid decimal number\n * @param value - String to validate\n * @param maxDecimals - Maximum allowed decimal places\n * @returns True if valid decimal\n */\nexport function isValidDecimal(value: string, maxDecimals: number = 8): boolean {\n  if (!value || value.trim() === '') return false\n  \n  const regex = new RegExp(`^\\\\d+(\\\\.\\\\d{1,${maxDecimals}})?$`)\n  return regex.test(value.trim())\n}\n\n/**\n * Rounds a number to specified decimal places without trailing zeros\n * @param value - Number to round\n * @param decimals - Decimal places\n * @returns Rounded number\n */\nexport function roundToDecimals(value: number, decimals: number): number {\n  const factor = Math.pow(10, decimals)\n  return Math.round(value * factor) / factor\n}\n\n// Aliases for consistent naming\nexport const formatWAXPrice = formatWaxPrice\nexport const formatNumber = formatDynamicDecimals","//function add {\nfunction add(number1, number2) {\n    var _a;\n    if (number2 === void 0) { number2 = \"0\"; }\n    var neg = 0, ind = -1;\n    //check for negatives\n    if (number1[0] == \"-\") {\n        number1 = number1.substring(1);\n        if (!testZero(number1)) {\n            neg++;\n            ind = 1;\n            number1.length;\n        }\n    }\n    if (number2[0] == \"-\") {\n        number2 = number2.substring(1);\n        if (!testZero(number2)) {\n            neg++;\n            ind = 2;\n            number2.length;\n        }\n    }\n    number1 = trim(number1);\n    number2 = trim(number2);\n    _a = pad(trim(number1), trim(number2)), number1 = _a[0], number2 = _a[1];\n    if (neg == 1) {\n        if (ind === 1)\n            number1 = compliment(number1);\n        else if (ind === 2)\n            number2 = compliment(number2);\n    }\n    var res = addCore(number1, number2);\n    if (!neg)\n        return trim(res);\n    else if (neg == 2)\n        return \"-\" + trim(res);\n    else {\n        if (number1.length < res.length)\n            return trim(res.substring(1));\n        else\n            return \"-\" + trim(compliment(res));\n    }\n}\nfunction compliment(number) {\n    if (testZero(number)) {\n        return number;\n    }\n    var s = \"\", l = number.length, dec = number.split(\".\")[1], ld = dec ? dec.length : 0;\n    for (var i = 0; i < l; i++) {\n        if (number[i] >= \"0\" && number[i] <= \"9\")\n            s += 9 - parseInt(number[i]);\n        else\n            s += number[i];\n    }\n    var one = ld > 0 ? \"0.\" + new Array(ld).join(\"0\") + \"1\" : \"1\";\n    return addCore(s, one);\n}\nfunction trim(number) {\n    var parts = number.split(\".\");\n    if (!parts[0])\n        parts[0] = \"0\";\n    while (parts[0][0] == \"0\" && parts[0].length > 1)\n        parts[0] = parts[0].substring(1);\n    return parts[0] + (parts[1] ? \".\" + parts[1] : \"\");\n}\nfunction pad(number1, number2) {\n    var parts1 = number1.split(\".\"), parts2 = number2.split(\".\");\n    //pad integral part\n    var length1 = parts1[0].length, length2 = parts2[0].length;\n    if (length1 > length2) {\n        parts2[0] =\n            new Array(Math.abs(length1 - length2) + 1).join(\"0\") +\n                (parts2[0] ? parts2[0] : \"\");\n    }\n    else {\n        parts1[0] =\n            new Array(Math.abs(length1 - length2) + 1).join(\"0\") +\n                (parts1[0] ? parts1[0] : \"\");\n    }\n    //pad fractional part\n    (length1 = parts1[1] ? parts1[1].length : 0),\n        (length2 = parts2[1] ? parts2[1].length : 0);\n    if (length1 || length2) {\n        if (length1 > length2) {\n            parts2[1] =\n                (parts2[1] ? parts2[1] : \"\") +\n                    new Array(Math.abs(length1 - length2) + 1).join(\"0\");\n        }\n        else {\n            parts1[1] =\n                (parts1[1] ? parts1[1] : \"\") +\n                    new Array(Math.abs(length1 - length2) + 1).join(\"0\");\n        }\n    }\n    number1 = parts1[0] + (parts1[1] ? \".\" + parts1[1] : \"\");\n    number2 = parts2[0] + (parts2[1] ? \".\" + parts2[1] : \"\");\n    return [number1, number2];\n}\nfunction addCore(number1, number2) {\n    var _a;\n    _a = pad(number1, number2), number1 = _a[0], number2 = _a[1];\n    var sum = \"\", carry = 0;\n    for (var i = number1.length - 1; i >= 0; i--) {\n        if (number1[i] === \".\") {\n            sum = \".\" + sum;\n            continue;\n        }\n        var temp = parseInt(number1[i]) + parseInt(number2[i]) + carry;\n        sum = (temp % 10) + sum;\n        carry = Math.floor(temp / 10);\n    }\n    return carry ? carry.toString() + sum : sum;\n}\nfunction testZero(number) {\n    return /^0[0]*[.]{0,1}[0]*$/.test(number);\n}\n\nfunction abs(n) {\n    if (typeof n == \"number\" || typeof n == \"bigint\")\n        n = n.toString();\n    if (n[0] == \"-\")\n        return n.substring(1);\n    return n;\n}\n\nvar RoundingModes;\n(function (RoundingModes) {\n    /**\n     * Rounding mode to round towards positive infinity.\n     */\n    RoundingModes[RoundingModes[\"CEILING\"] = 0] = \"CEILING\";\n    /**\n     * Rounding mode to round towards zero.\n     */\n    RoundingModes[RoundingModes[\"DOWN\"] = 1] = \"DOWN\";\n    /**\n     * Rounding mode to round towards negative infinity.\n     */\n    RoundingModes[RoundingModes[\"FLOOR\"] = 2] = \"FLOOR\";\n    /**\n     * Rounding mode to round towards \"nearest neighbor\" unless both neighbors are equidistant,\n     * in which case round down.\n     */\n    RoundingModes[RoundingModes[\"HALF_DOWN\"] = 3] = \"HALF_DOWN\";\n    /**\n     * Rounding mode to round towards the \"nearest neighbor\" unless both neighbors are equidistant,\n     * in which case, round towards the even neighbor.\n     */\n    RoundingModes[RoundingModes[\"HALF_EVEN\"] = 4] = \"HALF_EVEN\";\n    /**\n     * Rounding mode to round towards \"nearest neighbor\" unless both neighbors are equidistant,\n     * in which case round up.\n     */\n    RoundingModes[RoundingModes[\"HALF_UP\"] = 5] = \"HALF_UP\";\n    /**\n     * Rounding mode to assert that the requested operation has an exact result, hence no rounding is necessary.\n     * UNIMPLEMENTED\n     */\n    RoundingModes[RoundingModes[\"UNNECESSARY\"] = 6] = \"UNNECESSARY\";\n    /**\n     * Rounding mode to round away from zero.\n     */\n    RoundingModes[RoundingModes[\"UP\"] = 7] = \"UP\";\n})(RoundingModes || (RoundingModes = {}));\n\n/**\n *\n * @param input the number to round\n * @param n precision\n * @param mode Rounding Mode\n */\nfunction roundOff(input, n, mode) {\n    if (n === void 0) { n = 0; }\n    if (mode === void 0) { mode = RoundingModes.HALF_EVEN; }\n    if (mode === RoundingModes.UNNECESSARY) {\n        throw new Error(\"UNNECESSARY Rounding Mode has not yet been implemented\");\n    }\n    if (typeof (input) == 'number' || typeof (input) == 'bigint')\n        input = input.toString();\n    var neg = false;\n    if (input[0] === '-') {\n        neg = true;\n        input = input.substring(1);\n    }\n    var parts = input.split('.'), partInt = parts[0], partDec = parts[1];\n    //handle case of -ve n: roundOff(12564,-2)=12600\n    if (n < 0) {\n        n = -n;\n        if (partInt.length <= n)\n            return '0';\n        else {\n            var prefix = partInt.substr(0, partInt.length - n);\n            input = prefix + '.' + partInt.substr(partInt.length - n) + partDec;\n            prefix = roundOff(input, 0, mode);\n            return (neg ? '-' : '') + prefix + (new Array(n + 1).join('0'));\n        }\n    }\n    // handle case when integer output is desired\n    if (n == 0) {\n        partInt.length;\n        if (greaterThanFive(parts[1], partInt, neg, mode)) {\n            partInt = increment(partInt);\n        }\n        return (neg && parseInt(partInt) ? '-' : '') + partInt;\n    }\n    // handle case when n>0\n    if (!parts[1]) {\n        return (neg ? '-' : '') + partInt + '.' + (new Array(n + 1).join('0'));\n    }\n    else if (parts[1].length < n) {\n        return (neg ? '-' : '') + partInt + '.' + parts[1] + (new Array(n - parts[1].length + 1).join('0'));\n    }\n    partDec = parts[1].substring(0, n);\n    var rem = parts[1].substring(n);\n    if (rem && greaterThanFive(rem, partDec, neg, mode)) {\n        partDec = increment(partDec);\n        if (partDec.length > n) {\n            return (neg ? '-' : '') + increment(partInt, parseInt(partDec[0])) + '.' + partDec.substring(1);\n        }\n    }\n    return (neg && (parseInt(partInt) || parseInt(partDec)) ? '-' : '') + partInt + '.' + partDec;\n}\nfunction greaterThanFive(part, pre, neg, mode) {\n    if (!part || part === new Array(part.length + 1).join('0'))\n        return false;\n    // #region UP, DOWN, CEILING, FLOOR \n    if (mode === RoundingModes.DOWN || (!neg && mode === RoundingModes.FLOOR) ||\n        (neg && mode === RoundingModes.CEILING))\n        return false;\n    if (mode === RoundingModes.UP || (neg && mode === RoundingModes.FLOOR) ||\n        (!neg && mode === RoundingModes.CEILING))\n        return true;\n    // #endregion\n    // case when part !== five\n    var five = '5' + (new Array(part.length).join('0'));\n    if (part > five)\n        return true;\n    else if (part < five)\n        return false;\n    // case when part === five\n    switch (mode) {\n        case RoundingModes.HALF_DOWN: return false;\n        case RoundingModes.HALF_UP: return true;\n        case RoundingModes.HALF_EVEN:\n        default: return (parseInt(pre[pre.length - 1]) % 2 == 1);\n    }\n}\nfunction increment(part, c) {\n    if (c === void 0) { c = 0; }\n    if (!c)\n        c = 1;\n    if (typeof (part) == 'number')\n        part.toString();\n    var l = part.length - 1, s = '';\n    for (var i = l; i >= 0; i--) {\n        var x = parseInt(part[i]) + c;\n        if (x == 10) {\n            c = 1;\n            x = 0;\n        }\n        else {\n            c = 0;\n        }\n        s += x;\n    }\n    if (c)\n        s += c;\n    return s.split('').reverse().join('');\n}\n\n/*\n* Removes zero from front and back*/\nfunction stripTrailingZero(number) {\n    var isNegative = number[0] === '-';\n    if (isNegative) {\n        number = number.substr(1);\n    }\n    while (number[0] == '0') {\n        number = number.substr(1);\n    }\n    if (number.indexOf('.') != -1) {\n        while (number[number.length - 1] == '0') {\n            number = number.substr(0, number.length - 1);\n        }\n    }\n    if (number == \"\" || number == \".\") {\n        number = '0';\n    }\n    else if (number[number.length - 1] == '.') {\n        number = number.substr(0, number.length - 1);\n    }\n    if (number[0] == '.') {\n        number = '0' + number;\n    }\n    if (isNegative && number != '0') {\n        number = '-' + number;\n    }\n    return number;\n}\n\nfunction multiply(number1, number2) {\n    number1 = number1.toString();\n    number2 = number2.toString();\n    /*Filter numbers*/\n    var negative = 0;\n    if (number1[0] == '-') {\n        negative++;\n        number1 = number1.substr(1);\n    }\n    if (number2[0] == '-') {\n        negative++;\n        number2 = number2.substr(1);\n    }\n    number1 = stripTrailingZero(number1);\n    number2 = stripTrailingZero(number2);\n    var decimalLength1 = 0;\n    var decimalLength2 = 0;\n    if (number1.indexOf('.') != -1) {\n        decimalLength1 = number1.length - number1.indexOf('.') - 1;\n    }\n    if (number2.indexOf('.') != -1) {\n        decimalLength2 = number2.length - number2.indexOf('.') - 1;\n    }\n    var decimalLength = decimalLength1 + decimalLength2;\n    number1 = stripTrailingZero(number1.replace('.', ''));\n    number2 = stripTrailingZero(number2.replace('.', ''));\n    if (number1.length < number2.length) {\n        var temp = number1;\n        number1 = number2;\n        number2 = temp;\n    }\n    if (number2 == '0') {\n        return '0';\n    }\n    /*\n    * Core multiplication\n    */\n    var length = number2.length;\n    var carry = 0;\n    var positionVector = [];\n    var currentPosition = length - 1;\n    var result = \"\";\n    for (var i = 0; i < length; i++) {\n        positionVector[i] = number1.length - 1;\n    }\n    for (var i = 0; i < 2 * number1.length; i++) {\n        var sum = 0;\n        for (var j = number2.length - 1; j >= currentPosition && j >= 0; j--) {\n            if (positionVector[j] > -1 && positionVector[j] < number1.length) {\n                sum += parseInt(number1[positionVector[j]--]) * parseInt(number2[j]);\n            }\n        }\n        sum += carry;\n        carry = Math.floor(sum / 10);\n        result = sum % 10 + result;\n        currentPosition--;\n    }\n    /*\n    * Formatting result\n    */\n    result = stripTrailingZero(adjustDecimal(result, decimalLength));\n    if (negative == 1) {\n        result = '-' + result;\n    }\n    return result;\n}\n/*\n* Add decimal point\n*/\nfunction adjustDecimal(number, decimal) {\n    if (decimal == 0)\n        return number;\n    else {\n        number = (decimal >= number.length) ? ((new Array(decimal - number.length + 1)).join('0') + number) : number;\n        return number.substr(0, number.length - decimal) + '.' + number.substr(number.length - decimal, decimal);\n    }\n}\n\nfunction divide(dividend, divisor, precission, mode) {\n    if (precission === void 0) { precission = 8; }\n    if (mode === void 0) { mode = RoundingModes.HALF_EVEN; }\n    if (divisor == 0) {\n        throw new Error('Cannot divide by 0');\n    }\n    dividend = dividend.toString();\n    divisor = divisor.toString();\n    // remove trailing zeros in decimal ISSUE#18\n    dividend = dividend.replace(/(\\.\\d*?[1-9])0+$/g, \"$1\").replace(/\\.0+$/, \"\");\n    divisor = divisor.replace(/(\\.\\d*?[1-9])0+$/g, \"$1\").replace(/\\.0+$/, \"\");\n    if (dividend == 0)\n        return '0';\n    var neg = 0;\n    if (divisor[0] == '-') {\n        divisor = divisor.substring(1);\n        neg++;\n    }\n    if (dividend[0] == '-') {\n        dividend = dividend.substring(1);\n        neg++;\n    }\n    var pt_dvsr = divisor.indexOf('.') > 0 ? divisor.length - divisor.indexOf('.') - 1 : -1;\n    divisor = trim(divisor.replace('.', ''));\n    if (pt_dvsr >= 0) {\n        var pt_dvnd = dividend.indexOf('.') > 0 ? dividend.length - dividend.indexOf('.') - 1 : -1;\n        if (pt_dvnd == -1) {\n            dividend = trim(dividend + (new Array(pt_dvsr + 1)).join('0'));\n        }\n        else {\n            if (pt_dvsr > pt_dvnd) {\n                dividend = dividend.replace('.', '');\n                dividend = trim(dividend + (new Array(pt_dvsr - pt_dvnd + 1)).join('0'));\n            }\n            else if (pt_dvsr < pt_dvnd) {\n                dividend = dividend.replace('.', '');\n                var loc = dividend.length - pt_dvnd + pt_dvsr;\n                dividend = trim(dividend.substring(0, loc) + '.' + dividend.substring(loc));\n            }\n            else if (pt_dvsr == pt_dvnd) {\n                dividend = trim(dividend.replace('.', ''));\n            }\n        }\n    }\n    var prec = 0, dl = divisor.length, quotent = '';\n    var dvnd = (dividend.indexOf('.') > -1 && dividend.indexOf('.') < dl) ? dividend.substring(0, dl + 1) : dividend.substring(0, dl);\n    dividend = (dividend.indexOf('.') > -1 && dividend.indexOf('.') < dl) ? dividend.substring(dl + 1) : dividend.substring(dl);\n    if (dvnd.indexOf('.') > -1) {\n        var shift = dvnd.length - dvnd.indexOf('.') - 1;\n        dvnd = dvnd.replace('.', '');\n        if (dl > dvnd.length) {\n            shift += dl - dvnd.length;\n            dvnd = dvnd + (new Array(dl - dvnd.length + 1)).join('0');\n        }\n        prec = shift;\n        quotent = '0.' + (new Array(shift)).join('0');\n    }\n    precission = precission + 2;\n    while (prec <= precission) {\n        var qt = 0;\n        while (parseInt(dvnd) >= parseInt(divisor)) {\n            dvnd = add(dvnd, '-' + divisor);\n            qt++;\n        }\n        quotent += qt;\n        if (!dividend) {\n            if (!prec)\n                quotent += '.';\n            prec++;\n            dvnd = dvnd + '0';\n        }\n        else {\n            if (dividend[0] == '.') {\n                quotent += '.';\n                prec++;\n                dividend = dividend.substring(1);\n            }\n            dvnd = dvnd + dividend.substring(0, 1);\n            dividend = dividend.substring(1);\n        }\n    }\n    return ((neg == 1) ? '-' : '') + trim(roundOff(quotent, precission - 2, mode));\n}\n\nfunction subtract(number1, number2) {\n    number1 = number1.toString();\n    number2 = number2.toString();\n    number2 = negate(number2);\n    return add(number1, number2);\n}\nfunction negate(number) {\n    if (number[0] == '-') {\n        number = number.substr(1);\n    }\n    else {\n        number = '-' + number;\n    }\n    return number;\n}\n\nfunction modulus(dividend, divisor) {\n    if (divisor == 0) {\n        throw new Error('Cannot divide by 0');\n    }\n    dividend = dividend.toString();\n    divisor = divisor.toString();\n    validate(dividend);\n    validate(divisor);\n    var sign = '';\n    if (dividend[0] == '-') {\n        sign = '-';\n        dividend = dividend.substr(1);\n    }\n    if (divisor[0] == '-') {\n        divisor = divisor.substr(1);\n    }\n    var result = subtract(dividend, multiply(divisor, roundOff(divide(dividend, divisor), 0, RoundingModes.FLOOR)));\n    return sign + result;\n}\nfunction validate(oparand) {\n    if (oparand.indexOf('.') != -1) {\n        throw new Error('Modulus of non-integers not supported');\n    }\n}\n\nfunction compareTo(number1, number2) {\n    var _a, _b;\n    var negative = false;\n    _a = [number1, number2].map(function (n) { return stripTrailingZero(n); }), number1 = _a[0], number2 = _a[1];\n    if (number1[0] == '-' && number2[0] != \"-\") {\n        return -1;\n    }\n    else if (number1[0] != '-' && number2[0] == '-') {\n        return 1;\n    }\n    else if (number1[0] == '-' && number2[0] == '-') {\n        number1 = number1.substr(1);\n        number2 = number2.substr(1);\n        negative = true;\n    }\n    _b = pad(number1, number2), number1 = _b[0], number2 = _b[1];\n    if (number1.localeCompare(number2) == 0) {\n        return 0;\n    }\n    for (var i = 0; i < number1.length; i++) {\n        if (number1[i] == number2[i]) {\n            continue;\n        }\n        else if (number1[i] > number2[i]) {\n            if (negative) {\n                return -1;\n            }\n            else {\n                return 1;\n            }\n        }\n        else {\n            if (negative) {\n                return 1;\n            }\n            else {\n                return -1;\n            }\n        }\n    }\n    return 0;\n}\n\nvar bigDecimal = /** @class */ (function () {\n    function bigDecimal(number) {\n        if (number === void 0) { number = \"0\"; }\n        this.value = bigDecimal.validate(number);\n    }\n    bigDecimal.validate = function (number) {\n        if (number) {\n            number = number.toString();\n            if (isNaN(number))\n                throw Error(\"Parameter is not a number: \" + number);\n            if (number[0] == \"+\")\n                number = number.substring(1);\n        }\n        else\n            number = \"0\";\n        //handle missing leading zero\n        if (number.startsWith(\".\"))\n            number = \"0\" + number;\n        else if (number.startsWith(\"-.\"))\n            number = \"-0\" + number.substr(1);\n        //handle exponentiation\n        if (/e/i.test(number)) {\n            var _a = number.split(/[eE]/), mantisa = _a[0], exponent = _a[1];\n            mantisa = trim(mantisa);\n            var sign = \"\";\n            if (mantisa[0] == \"-\") {\n                sign = \"-\";\n                mantisa = mantisa.substring(1);\n            }\n            if (mantisa.indexOf(\".\") >= 0) {\n                exponent = parseInt(exponent) + mantisa.indexOf(\".\");\n                mantisa = mantisa.replace(\".\", \"\");\n            }\n            else {\n                exponent = parseInt(exponent) + mantisa.length;\n            }\n            if (mantisa.length < exponent) {\n                number =\n                    sign + mantisa + new Array(exponent - mantisa.length + 1).join(\"0\");\n            }\n            else if (mantisa.length >= exponent && exponent > 0) {\n                number =\n                    sign +\n                        trim(mantisa.substring(0, exponent)) +\n                        (mantisa.length > exponent ? \".\" + mantisa.substring(exponent) : \"\");\n            }\n            else {\n                number = sign + \"0.\" + new Array(-exponent + 1).join(\"0\") + mantisa;\n            }\n        }\n        return number;\n    };\n    bigDecimal.prototype.getValue = function () {\n        return this.value;\n    };\n    bigDecimal.prototype.setValue = function (num) {\n        this.value = bigDecimal.validate(num);\n    };\n    bigDecimal.getPrettyValue = function (number, digits, separator) {\n        if (digits === void 0) { digits = 3; }\n        if (separator === void 0) { separator = \",\"; }\n        // if (!(digits || separator)) {\n        //     digits = 3;\n        //     separator = ',';\n        // } else if (!(digits && separator)) {\n        //     throw Error('Illegal Arguments. Should pass both digits and separator or pass none');\n        // }\n        number = bigDecimal.validate(number);\n        var neg = number.charAt(0) == \"-\";\n        if (neg)\n            number = number.substring(1);\n        var len = number.indexOf(\".\");\n        len = len > 0 ? len : number.length;\n        var temp = \"\";\n        for (var i = len; i > 0;) {\n            if (i < digits) {\n                digits = i;\n                i = 0;\n            }\n            else\n                i -= digits;\n            temp =\n                number.substring(i, i + digits) +\n                    (i < len - digits && i >= 0 ? separator : \"\") +\n                    temp;\n        }\n        return (neg ? \"-\" : \"\") + temp + number.substring(len);\n    };\n    bigDecimal.prototype.getPrettyValue = function (digits, separator) {\n        if (digits === void 0) { digits = 3; }\n        if (separator === void 0) { separator = \",\"; }\n        return bigDecimal.getPrettyValue(this.value, digits, separator);\n    };\n    bigDecimal.round = function (number, precision, mode) {\n        if (precision === void 0) { precision = 0; }\n        if (mode === void 0) { mode = RoundingModes.HALF_EVEN; }\n        number = bigDecimal.validate(number);\n        // console.log(number)\n        if (isNaN(precision))\n            throw Error(\"Precision is not a number: \" + precision);\n        return roundOff(number, precision, mode);\n    };\n    bigDecimal.prototype.round = function (precision, mode) {\n        if (precision === void 0) { precision = 0; }\n        if (mode === void 0) { mode = RoundingModes.HALF_EVEN; }\n        if (isNaN(precision))\n            throw Error(\"Precision is not a number: \" + precision);\n        return new bigDecimal(roundOff(this.value, precision, mode));\n    };\n    bigDecimal.abs = function (number) {\n        number = bigDecimal.validate(number);\n        return abs(number);\n    };\n    bigDecimal.prototype.abs = function () {\n        return new bigDecimal(abs(this.value));\n    };\n    bigDecimal.floor = function (number) {\n        number = bigDecimal.validate(number);\n        if (number.indexOf(\".\") === -1)\n            return number;\n        return bigDecimal.round(number, 0, RoundingModes.FLOOR);\n    };\n    bigDecimal.prototype.floor = function () {\n        if (this.value.indexOf(\".\") === -1)\n            return new bigDecimal(this.value);\n        return new bigDecimal(this.value).round(0, RoundingModes.FLOOR);\n    };\n    bigDecimal.ceil = function (number) {\n        number = bigDecimal.validate(number);\n        if (number.indexOf(\".\") === -1)\n            return number;\n        return bigDecimal.round(number, 0, RoundingModes.CEILING);\n    };\n    bigDecimal.prototype.ceil = function () {\n        if (this.value.indexOf(\".\") === -1)\n            return new bigDecimal(this.value);\n        return new bigDecimal(this.value).round(0, RoundingModes.CEILING);\n    };\n    bigDecimal.add = function (number1, number2) {\n        number1 = bigDecimal.validate(number1);\n        number2 = bigDecimal.validate(number2);\n        return add(number1, number2);\n    };\n    bigDecimal.prototype.add = function (number) {\n        return new bigDecimal(add(this.value, number.getValue()));\n    };\n    bigDecimal.subtract = function (number1, number2) {\n        number1 = bigDecimal.validate(number1);\n        number2 = bigDecimal.validate(number2);\n        return subtract(number1, number2);\n    };\n    bigDecimal.prototype.subtract = function (number) {\n        return new bigDecimal(subtract(this.value, number.getValue()));\n    };\n    bigDecimal.multiply = function (number1, number2) {\n        number1 = bigDecimal.validate(number1);\n        number2 = bigDecimal.validate(number2);\n        return multiply(number1, number2);\n    };\n    bigDecimal.prototype.multiply = function (number) {\n        return new bigDecimal(multiply(this.value, number.getValue()));\n    };\n    bigDecimal.divide = function (number1, number2, precision, mode) {\n        number1 = bigDecimal.validate(number1);\n        number2 = bigDecimal.validate(number2);\n        return divide(number1, number2, precision, mode);\n    };\n    bigDecimal.prototype.divide = function (number, precision, mode) {\n        return new bigDecimal(divide(this.value, number.getValue(), precision, mode));\n    };\n    bigDecimal.modulus = function (number1, number2) {\n        number1 = bigDecimal.validate(number1);\n        number2 = bigDecimal.validate(number2);\n        return modulus(number1, number2);\n    };\n    bigDecimal.prototype.modulus = function (number) {\n        return new bigDecimal(modulus(this.value, number.getValue()));\n    };\n    bigDecimal.compareTo = function (number1, number2) {\n        number1 = bigDecimal.validate(number1);\n        number2 = bigDecimal.validate(number2);\n        return compareTo(number1, number2);\n    };\n    bigDecimal.prototype.compareTo = function (number) {\n        return compareTo(this.value, number.getValue());\n    };\n    bigDecimal.negate = function (number) {\n        number = bigDecimal.validate(number);\n        return negate(number);\n    };\n    bigDecimal.prototype.negate = function () {\n        return new bigDecimal(negate(this.value));\n    };\n    bigDecimal.stripTrailingZero = function (number) {\n        number = bigDecimal.validate(number);\n        return stripTrailingZero(number);\n    };\n    bigDecimal.prototype.stripTrailingZero = function () {\n        return new bigDecimal(stripTrailingZero(this.value));\n    };\n    bigDecimal.RoundingModes = RoundingModes;\n    return bigDecimal;\n}());\n\nexport { bigDecimal, bigDecimal as default };\n//# sourceMappingURL=big-decimal.js.map\n","/**\n * @wharfkit/resources v1.5.0\n * https://github.com/wharfkit/resources\n *\n * @license\n * Copyright (c) 2021 Greymass Inc. All Rights Reserved.\n * \n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n * \n *  1. Redistribution of source code must retain the above copyright notice, this\n *     list of conditions and the following disclaimer.\n * \n *  2. Redistribution in binary form must reproduce the above copyright notice,\n *     this list of conditions and the following disclaimer in the documentation\n *     and/or other materials provided with the distribution.\n * \n *  3. Neither the name of the copyright holder nor the names of its contributors\n *     may be used to endorse or promote products derived from this software without\n *     specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE\n * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED\n * OF THE POSSIBILITY OF SUCH DAMAGE.\n * \n * YOU ACKNOWLEDGE THAT THIS SOFTWARE IS NOT DESIGNED, LICENSED OR INTENDED FOR USE\n * IN THE DESIGN, CONSTRUCTION, OPERATION OR MAINTENANCE OF ANY MILITARY FACILITY.\n */\nimport { Struct, UInt64, UInt128, Asset, Int64, TimePointSec, APIClient, FetchProvider } from '@wharfkit/antelope';\nimport BN from 'bn.js';\nimport { __decorate } from 'tslib';\nimport bigDecimal from 'js-big-decimal';\n\nclass PowerUpStateResource extends Struct {\n    constructor() {\n        super(...arguments);\n        this.default_block_cpu_limit = UInt64.from(200000);\n        this.default_block_net_limit = UInt64.from(1048576000);\n    }\n    // Get the current number of allocated units (shift from REX -> PowerUp)\n    get allocated() {\n        return 1 - Number(this.weight_ratio.dividing(this.target_weight_ratio)) / 100;\n    }\n    // Get the current percentage of reserved units\n    get reserved() {\n        return this.utilization.dividing(this.weight);\n    }\n    // Get the symbol definition for the token\n    get symbol() {\n        return this.min_price.symbol;\n    }\n    // Mimic: https://github.com/EOSIO/eosio.contracts/blob/d7bc0a5cc8c0c2edd4dc61b0126517d0cb46fd94/contracts/eosio.system/src/powerup.cpp#L358\n    utilization_increase(frac) {\n        const base = intToBigDecimal(frac);\n        const weight = intToBigDecimal(this.weight);\n        const multiplier = intToBigDecimal(Math.pow(10, 15));\n        return UInt128.from(base.multiply(weight).divide(multiplier, 15).ceil().getValue());\n    }\n    // Mimic: https://github.com/EOSIO/eosio.contracts/blob/d7bc0a5cc8c0c2edd4dc61b0126517d0cb46fd94/contracts/eosio.system/src/powerup.cpp#L284-L298\n    price_function(utilization) {\n        const { weight } = this;\n        let price = this.min_price.value;\n        const new_exponent = Number(this.exponent) - 1.0;\n        if (new_exponent <= 0.0) {\n            return this.max_price.value;\n        }\n        else {\n            // const util_weight = utilization.dividing(weight)\n            const util_weight = intToBigDecimal(utilization).divide(intToBigDecimal(weight), 18);\n            const difference = this.max_price.value - this.min_price.value;\n            price += difference * Math.pow(Number(util_weight.getValue()), new_exponent);\n        }\n        return price;\n    }\n    // Mimic: https://github.com/EOSIO/eosio.contracts/blob/d7bc0a5cc8c0c2edd4dc61b0126517d0cb46fd94/contracts/eosio.system/src/powerup.cpp#L274-L280\n    price_integral_delta(start_utilization, end_utilization) {\n        const difference = Asset.fromUnits(this.max_price.units.subtracting(this.min_price.units), this.symbol);\n        const coefficient = difference.value / this.exponent.value;\n        const start_u = Number(start_utilization.dividing(this.weight));\n        const end_u = Number(end_utilization.dividing(this.weight));\n        const delta = this.min_price.value * end_u -\n            this.min_price.value * start_u +\n            coefficient * Math.pow(end_u, this.exponent.value) -\n            coefficient * Math.pow(start_u, this.exponent.value);\n        return delta;\n    }\n    // Mimic: https://github.com/EOSIO/eosio.contracts/blob/d7bc0a5cc8c0c2edd4dc61b0126517d0cb46fd94/contracts/eosio.system/src/powerup.cpp#L262-L315\n    fee(utilization_increase, adjusted_utilization) {\n        const { utilization, weight } = this;\n        let start_utilization = Int64.from(utilization);\n        const end_utilization = start_utilization.adding(utilization_increase);\n        let fee = 0;\n        if (start_utilization.lt(adjusted_utilization)) {\n            const min = Math.min(Number(utilization_increase), Number(adjusted_utilization.subtracting(start_utilization)));\n            fee += Number(intToBigDecimal(this.price_function(adjusted_utilization) * min)\n                .divide(intToBigDecimal(weight))\n                .getValue());\n            start_utilization = adjusted_utilization;\n        }\n        if (start_utilization.lt(end_utilization)) {\n            fee += this.price_integral_delta(start_utilization, end_utilization);\n        }\n        return fee;\n    }\n    // Mimic: https://github.com/EOSIO/eosio.contracts/blob/d7bc0a5cc8c0c2edd4dc61b0126517d0cb46fd94/contracts/eosio.system/src/powerup.cpp#L105-L117\n    determine_adjusted_utilization(options) {\n        // Casting EOSIO types to usable formats for JS calculations\n        const { decay_secs, utilization, utilization_timestamp } = this;\n        let { adjusted_utilization } = this;\n        // If utilization is less than adjusted, calculate real time value\n        if (utilization.lt(adjusted_utilization)) {\n            // Create now & adjust JS timestamp to match EOSIO timestamp values\n            const ts = options && options.timestamp ? options.timestamp : new Date();\n            const now = TimePointSec.from(ts).toMilliseconds() / 1000;\n            const diff = adjusted_utilization.subtracting(utilization).toNumber();\n            let delta = diff *\n                Math.exp(-(now - utilization_timestamp.toMilliseconds()) / Number(decay_secs));\n            delta = Math.min(Math.max(delta, 0), diff); // Clamp the delta\n            adjusted_utilization = utilization.adding(delta);\n        }\n        return adjusted_utilization;\n    }\n}\n__decorate([\n    Struct.field('uint8')\n], PowerUpStateResource.prototype, \"version\", void 0);\n__decorate([\n    Struct.field('int64')\n], PowerUpStateResource.prototype, \"weight\", void 0);\n__decorate([\n    Struct.field('int64')\n], PowerUpStateResource.prototype, \"weight_ratio\", void 0);\n__decorate([\n    Struct.field('int64')\n], PowerUpStateResource.prototype, \"assumed_stake_weight\", void 0);\n__decorate([\n    Struct.field('int64')\n], PowerUpStateResource.prototype, \"initial_weight_ratio\", void 0);\n__decorate([\n    Struct.field('int64')\n], PowerUpStateResource.prototype, \"target_weight_ratio\", void 0);\n__decorate([\n    Struct.field('time_point_sec')\n], PowerUpStateResource.prototype, \"initial_timestamp\", void 0);\n__decorate([\n    Struct.field('time_point_sec')\n], PowerUpStateResource.prototype, \"target_timestamp\", void 0);\n__decorate([\n    Struct.field('float64')\n], PowerUpStateResource.prototype, \"exponent\", void 0);\n__decorate([\n    Struct.field('uint32')\n], PowerUpStateResource.prototype, \"decay_secs\", void 0);\n__decorate([\n    Struct.field('asset')\n], PowerUpStateResource.prototype, \"min_price\", void 0);\n__decorate([\n    Struct.field('asset')\n], PowerUpStateResource.prototype, \"max_price\", void 0);\n__decorate([\n    Struct.field('int64')\n], PowerUpStateResource.prototype, \"utilization\", void 0);\n__decorate([\n    Struct.field('int64')\n], PowerUpStateResource.prototype, \"adjusted_utilization\", void 0);\n__decorate([\n    Struct.field('time_point_sec')\n], PowerUpStateResource.prototype, \"utilization_timestamp\", void 0);\n\nlet PowerUpStateResourceCPU = class PowerUpStateResourceCPU extends PowerUpStateResource {\n    constructor() {\n        super(...arguments);\n        // Return smallest units per day, μs (microseconds)\n        this.per_day = (options) => this.us_per_day(options);\n        // Default frac generation by smallest unit type\n        this.frac = (usage, us) => this.frac_by_us(usage, us);\n        // Frac generation by ms (milliseconds)\n        this.frac_by_ms = (usage, ms) => this.frac_by_us(usage, ms * 1000);\n        // Price generation by smallest units, μs (microseconds)\n        this.price_per = (usage, us = 1000, options) => this.price_per_us(usage, us, options);\n        // Price generation by ms (milliseconds)\n        this.price_per_ms = (usage, ms = 1, options) => this.price_per_us(usage, ms * 1000, options);\n    }\n    // Return ms (milliseconds) per day\n    ms_per_day(options) {\n        return this.us_per_day(options) / 1000;\n    }\n    // Return μs (microseconds) per day\n    us_per_day(options) {\n        const limit = options && options.virtual_block_cpu_limit\n            ? options.virtual_block_cpu_limit\n            : this.default_block_cpu_limit;\n        return Number(limit) * 2 * 60 * 60 * 24;\n    }\n    // Convert weight to μs (microseconds)\n    weight_to_us(sample, weight) {\n        return UInt128.from(UInt128.from(weight).multiplying(Int64.from(sample)).dividing(BNPrecision, 'ceil'));\n    }\n    // Convert μs (microseconds) to weight\n    us_to_weight(sample, us) {\n        return Int64.from(us).multiplying(BNPrecision).dividing(sample, 'floor');\n    }\n    // Frac generation by μs (microseconds)\n    frac_by_us(usage, us) {\n        const precision = 15;\n        const converted = intToBigDecimal(this.us_to_weight(usage.cpu, us));\n        const current = intToBigDecimal(this.weight);\n        const multiplier = intToBigDecimal(Math.pow(10, precision));\n        const frac = converted.divide(current, precision).multiply(multiplier);\n        return Int64.from(frac.getValue());\n    }\n    // Price generation by μs (microseconds)\n    price_per_us(usage, us = 1000, options) {\n        // Determine the utilization increase by this action\n        const frac = UInt128.from(this.frac(usage, us));\n        const utilization_increase = this.utilization_increase(frac);\n        // Determine the adjusted utilization if needed\n        const adjusted_utilization = this.determine_adjusted_utilization(options);\n        // Derive the fee from the increase and utilization\n        const fee = this.fee(utilization_increase, adjusted_utilization);\n        // Force the fee up to the next highest value of precision\n        const precision = Math.pow(10, this.max_price.symbol.precision);\n        const price = fee * precision;\n        const value = Math.ceil(price) / precision;\n        const asset = Asset.fromFloat(fee, this.symbol);\n        if (price < 1) {\n            throw new Error(`Price (${String(asset)}) for requested CPU amount (${us}us) below required precision, increase requested amount.`);\n        }\n        if (options && options.min_payment && options.min_payment.units.gt(asset.units)) {\n            throw new Error(`Price (${String(asset)}) for requested CPU amount (${us}us) below minimum required payment (${String(options.min_payment)}), increase requested CPU amount.`);\n        }\n        // Return the modified fee\n        return value;\n    }\n};\nPowerUpStateResourceCPU = __decorate([\n    Struct.type('powerupstateresourcecpu')\n], PowerUpStateResourceCPU);\n\nlet PowerUpStateResourceNET = class PowerUpStateResourceNET extends PowerUpStateResource {\n    constructor() {\n        super(...arguments);\n        // Return smallest units per day, bytes\n        this.per_day = (options) => this.bytes_per_day(options);\n        // Default frac generation by smallest unit type\n        this.frac = (usage, bytes) => this.frac_by_bytes(usage, bytes);\n        // Frac generation by kb\n        this.frac_by_kb = (usage, kilobytes) => this.frac_by_bytes(usage, kilobytes * 1000);\n        // Price generation by smallest units, bytes\n        this.price_per = (usage, bytes = 1000, options) => this.price_per_byte(usage, bytes, options);\n        // Price generation by kb\n        this.price_per_kb = (usage, kilobytes = 1, options) => this.price_per_byte(usage, kilobytes * 1000, options);\n    }\n    // Return kb per day\n    kb_per_day(options) {\n        return this.bytes_per_day(options) / 1000;\n    }\n    // Return bytes per day\n    bytes_per_day(options) {\n        const limit = options && options.virtual_block_net_limit\n            ? options.virtual_block_net_limit\n            : this.default_block_net_limit;\n        return Number(limit) * 2 * 60 * 60 * 24;\n    }\n    // Convert weight to bytes\n    weight_to_bytes(sample, weight) {\n        return UInt128.from(UInt128.from(weight).multiplying(Int64.from(sample)).dividing(BNPrecision, 'ceil'));\n    }\n    // Convert bytes to weight\n    bytes_to_weight(sample, bytes) {\n        return Int64.from(bytes).multiplying(BNPrecision).dividing(Int64.from(sample), 'floor');\n    }\n    // Frac generation by bytes\n    frac_by_bytes(usage, bytes) {\n        const precision = 15;\n        const converted = intToBigDecimal(this.bytes_to_weight(usage.net, bytes));\n        const current = intToBigDecimal(this.weight);\n        const multiplier = intToBigDecimal(Math.pow(10, precision));\n        const frac = converted.divide(current, precision).multiply(multiplier);\n        return Int64.from(frac.getValue());\n    }\n    // Price generation by bytes\n    price_per_byte(usage, bytes = 1000, options) {\n        // Determine the utilization increase by this action\n        const frac = UInt128.from(this.frac(usage, bytes));\n        const utilization_increase = this.utilization_increase(frac);\n        // Determine the adjusted utilization if needed\n        const adjusted_utilization = this.determine_adjusted_utilization(options);\n        // Derive the fee from the increase and utilization\n        const fee = this.fee(utilization_increase, adjusted_utilization);\n        // Force the fee up to the next highest value of precision\n        const precision = Math.pow(10, this.max_price.symbol.precision);\n        const value = Math.ceil(fee * precision) / precision;\n        // Return the modified fee\n        return value;\n    }\n};\nPowerUpStateResourceNET = __decorate([\n    Struct.type('powerupstateresourcenet')\n], PowerUpStateResourceNET);\n\nlet PowerUpState = class PowerUpState extends Struct {\n};\n__decorate([\n    Struct.field('uint8')\n], PowerUpState.prototype, \"version\", void 0);\n__decorate([\n    Struct.field(PowerUpStateResourceNET)\n], PowerUpState.prototype, \"net\", void 0);\n__decorate([\n    Struct.field(PowerUpStateResourceCPU)\n], PowerUpState.prototype, \"cpu\", void 0);\n__decorate([\n    Struct.field('uint32')\n], PowerUpState.prototype, \"powerup_days\", void 0);\n__decorate([\n    Struct.field('asset')\n], PowerUpState.prototype, \"min_powerup_fee\", void 0);\nPowerUpState = __decorate([\n    Struct.type('powerupstate')\n], PowerUpState);\nclass PowerUpAPI {\n    constructor(parent) {\n        this.parent = parent;\n    }\n    async get_state() {\n        const response = await this.parent.api.v1.chain.get_table_rows({\n            code: 'eosio',\n            scope: '',\n            table: 'powup.state',\n            type: PowerUpState,\n        });\n        return response.rows[0];\n    }\n}\n\nlet Connector = class Connector extends Struct {\n};\n__decorate([\n    Struct.field('asset')\n], Connector.prototype, \"balance\", void 0);\n__decorate([\n    Struct.field('float64')\n], Connector.prototype, \"weight\", void 0);\nConnector = __decorate([\n    Struct.type('connector')\n], Connector);\nlet ExchangeState = class ExchangeState extends Struct {\n};\n__decorate([\n    Struct.field('asset')\n], ExchangeState.prototype, \"supply\", void 0);\n__decorate([\n    Struct.field(Connector)\n], ExchangeState.prototype, \"base\", void 0);\n__decorate([\n    Struct.field(Connector)\n], ExchangeState.prototype, \"quote\", void 0);\nExchangeState = __decorate([\n    Struct.type('exchange_state')\n], ExchangeState);\nlet RAMState = class RAMState extends ExchangeState {\n    price_per(bytes) {\n        const base = this.base.balance.units;\n        const quote = this.quote.balance.units;\n        return Asset.fromUnits(this.get_input(base, quote, Int64.from(bytes)), this.quote.balance.symbol);\n    }\n    price_per_kb(kilobytes) {\n        return this.price_per(kilobytes * 1000);\n    }\n    // Derived from https://github.com/EOSIO/eosio.contracts/blob/f6578c45c83ec60826e6a1eeb9ee71de85abe976/contracts/eosio.system/src/exchange_state.cpp#L96\n    get_input(base, quote, value) {\n        // (quote * value) / (base - value), using 'ceil' to round up\n        return quote.multiplying(value).dividing(base.subtracting(value), 'ceil');\n    }\n};\nRAMState = __decorate([\n    Struct.type('ramstate')\n], RAMState);\nclass RAMAPI {\n    constructor(parent) {\n        this.parent = parent;\n    }\n    async get_state() {\n        const response = await this.parent.api.v1.chain.get_table_rows({\n            code: 'eosio',\n            scope: 'eosio',\n            table: 'rammarket',\n            type: RAMState,\n        });\n        return response.rows[0];\n    }\n}\n\nlet REXState = class REXState extends Struct {\n    get reserved() {\n        return Number(this.total_lent.units) / Number(this.total_lendable.units);\n    }\n    get symbol() {\n        return this.total_lent.symbol;\n    }\n    get precision() {\n        return this.total_lent.symbol.precision;\n    }\n    get value() {\n        const lent = intToBigDecimal(this.total_lent.units);\n        const unlent = intToBigDecimal(this.total_unlent.units);\n        const rex = intToBigDecimal(this.total_rex.units);\n        return Number(lent.add(unlent).divide(rex, 18).getValue());\n    }\n    exchange(amount) {\n        const value = intToBigDecimal(amount.units);\n        const lendable = intToBigDecimal(this.total_lendable.units);\n        const rex = intToBigDecimal(this.total_rex.units);\n        const tokens = value.multiply(lendable).divide(rex, this.precision);\n        return Asset.fromUnits(Number(tokens.getValue()), this.symbol);\n    }\n    cpu_price_per_ms(sample, ms = 1) {\n        return this.cpu_price_per_us(sample, ms * 1000);\n    }\n    cpu_price_per_us(sample, us = 1000) {\n        return this.price_per(sample, us, sample.cpu);\n    }\n    net_price_per_kb(sample, kilobytes = 1) {\n        return this.net_price_per_byte(sample, kilobytes * 1000);\n    }\n    net_price_per_byte(sample, bytes = 1000) {\n        return this.price_per(sample, bytes, sample.net);\n    }\n    price_per(sample, unit = 1000, usage = sample.cpu) {\n        // Sample token units\n        const tokens = Asset.fromUnits(10000, this.symbol);\n        // Spending 1 EOS (10000 units) on REX gives this many tokens\n        const bancor = Number(tokens.units) / (this.total_rent.value / this.total_unlent.value);\n        // The ratio of the number of tokens received vs the sampled values\n        const unitPrice = bancor * (Number(usage) / BNPrecision);\n        // The token units spent per unit\n        const perunit = Number(tokens.units) / unitPrice;\n        // Multiply the per unit cost by the units requested\n        const cost = perunit * unit;\n        // Converting to an Asset\n        return cost / Math.pow(10, this.precision);\n    }\n};\n__decorate([\n    Struct.field('uint8')\n], REXState.prototype, \"version\", void 0);\n__decorate([\n    Struct.field('asset')\n], REXState.prototype, \"total_lent\", void 0);\n__decorate([\n    Struct.field('asset')\n], REXState.prototype, \"total_unlent\", void 0);\n__decorate([\n    Struct.field('asset')\n], REXState.prototype, \"total_rent\", void 0);\n__decorate([\n    Struct.field('asset')\n], REXState.prototype, \"total_lendable\", void 0);\n__decorate([\n    Struct.field('asset')\n], REXState.prototype, \"total_rex\", void 0);\n__decorate([\n    Struct.field('asset')\n], REXState.prototype, \"namebid_proceeds\", void 0);\n__decorate([\n    Struct.field('uint64')\n], REXState.prototype, \"loan_num\", void 0);\nREXState = __decorate([\n    Struct.type('rexstate')\n], REXState);\nclass REXAPI {\n    constructor(parent) {\n        this.parent = parent;\n    }\n    async get_state() {\n        const response = await this.parent.api.v1.chain.get_table_rows({\n            code: 'eosio',\n            scope: 'eosio',\n            table: 'rexpool',\n            type: REXState,\n        });\n        return response.rows[0];\n    }\n}\n\nconst BNPrecision = new BN(100 * 1000 * 1000);\nclass Resources {\n    constructor(options) {\n        // the account to use when sampling usage\n        this.sampleAccount = 'greymassfuel';\n        // token precision/symbol\n        this.symbol = '4,EOS';\n        this.v1 = {\n            powerup: new PowerUpAPI(this),\n            ram: new RAMAPI(this),\n            rex: new REXAPI(this),\n        };\n        // Allow overriding of the sample account name\n        if (options.sampleAccount) {\n            this.sampleAccount = options.sampleAccount;\n        }\n        // Allow overriding of the system token symbol\n        if (options.symbol) {\n            this.symbol = options.symbol;\n        }\n        // Allow variations on how to specify the API configuration\n        if (options.api) {\n            this.api = options.api;\n        }\n        else if (options.url) {\n            this.api = new APIClient({ provider: new FetchProvider(options.url, options) });\n        }\n        else {\n            throw new Error('Missing url or api client');\n        }\n    }\n    async getSampledUsage() {\n        const account = await this.api.v1.chain.get_account(this.sampleAccount);\n        const us = UInt128.from(account.cpu_limit.max.value.mul(BNPrecision));\n        const byte = UInt128.from(account.net_limit.max.value.mul(BNPrecision));\n        const cpu_weight = UInt128.from(account.cpu_weight.value);\n        const net_weight = UInt128.from(account.net_weight.value);\n        return {\n            account,\n            cpu: divCeil(us.value, cpu_weight.value),\n            net: divCeil(byte.value, net_weight.value),\n        };\n    }\n}\nResources.__className = 'Resources';\nfunction divCeil(num, den) {\n    let v = num.div(den);\n    const zero = new BN(0);\n    const one = new BN(1);\n    if (num.mod(den).gt(zero) && v.gt(one)) {\n        v = v.sub(one);\n    }\n    return UInt128.from(v);\n}\nfunction intToBigDecimal(value) {\n    return new bigDecimal(String(value));\n}\n\nexport { BNPrecision, Connector, ExchangeState, PowerUpAPI, PowerUpState, RAMAPI, RAMState, REXAPI, REXState, Resources, intToBigDecimal };\n//# sourceMappingURL=wharfkit-resources.m.js.map\n","import { useState, useEffect } from 'react'\nimport { useWallet } from '../hooks/useWallet'\nimport { useNotifications } from '../hooks/useNotifications'\nimport type { NFTAsset, AssetData } from '../services/api'\nimport MediaRenderer from './MediaRenderer'\nimport { useDisplaySettings } from '../hooks/useDisplaySettings'\nimport { API_ENDPOINTS } from '../config/marketplaceConfig'\nimport '../css/modal.css'\nimport '../css/send-offer-modal.css'\n\ninterface SendOfferModalProps {\n  isOpen: boolean\n  onClose: () => void\n  nft: NFTAsset | null\n}\n\ninterface UserNFT {\n  asset_id: string\n  name: string\n  image: string\n  video?: string | null\n  collection: string | { name: string; collection_name: string }\n  template_mint?: number\n  max_supply?: string\n}\n\nexport default function SendOfferModal({ isOpen, onClose, nft }: SendOfferModalProps) {\n  const { session, isConnected, account } = useWallet()\n  const { settings } = useDisplaySettings()\n  const { showSuccess, showError } = useNotifications()\n  const [offerType, setOfferType] = useState<'wax' | 'nft'>('wax')\n  const [waxAmount, setWaxAmount] = useState('')\n  const [customMemo, setCustomMemo] = useState('')\n  const [userNFTs, setUserNFTs] = useState<UserNFT[]>([])\n  const [selectedNFTs, setSelectedNFTs] = useState<string[]>([])\n  const [isLoading, setIsLoading] = useState(false)\n  const [loadingInventory, setLoadingInventory] = useState(false)\n  const [isPixalHolder, setIsPixalHolder] = useState(false)\n\n  // Check if user is a Pixal PFP holder\n  useEffect(() => {\n    const checkPixalHolder = async () => {\n      if (!account) return\n      \n      try {\n        // Check if user owns any Pixal PFP NFTs\n        const response = await fetch(`https://aa.dapplica.io/atomicassets/v1/assets?owner=${account}&collection_name=pixeljourney&limit=1`)\n        const data = await response.json()\n        setIsPixalHolder(data.data && data.data.length > 0)\n      } catch (error) {\n        console.error('Error checking Pixal holder status:', error)\n      }\n    }\n\n    if (isOpen && isConnected) {\n      checkPixalHolder()\n    }\n  }, [isOpen, isConnected, account])\n\n  // Load user's NFTs for trade offers\n  useEffect(() => {\n    const loadUserNFTs = async () => {\n      if (!account || offerType !== 'nft') return\n      \n      setLoadingInventory(true)\n      try {\n        const response = await fetch(`https://aa.dapplica.io/atomicassets/v1/assets?owner=${account}&limit=100`)\n        const data = await response.json()\n        \n        const formattedNFTs: UserNFT[] = data.data?.map((asset: AssetData) => {\n          const rawImage = asset.data?.img || asset.data?.image\n          const rawVideo = asset.data?.video\n          let imageUrl = 'https://pixeljourney.xyz/img/toppixals/10.webp'\n          let videoUrl: string | null = null\n          \n          if (rawVideo && typeof rawVideo === 'string') {\n            if (rawVideo.startsWith('http')) {\n              videoUrl = rawVideo\n            } else {\n              videoUrl = `${API_ENDPOINTS.IPFS.GATEWAYS[0]}${rawVideo}`\n            }\n          }\n          \n          if (rawImage && typeof rawImage === 'string') {\n            if (rawImage.startsWith('http')) {\n              imageUrl = rawImage\n            } else {\n              // Handle IPFS hash\n              imageUrl = `${API_ENDPOINTS.IPFS.GATEWAYS[0]}${rawImage}`\n            }\n          }\n          \n          return {\n            asset_id: asset.asset_id || '',\n            name: asset.name || `${asset.collection?.collection_name || 'Unknown'} #${asset.asset_id || 'N/A'}`,\n            image: imageUrl,\n            video: videoUrl,\n            collection: asset.collection?.collection_name || 'Unknown',\n            template_mint: undefined,\n            max_supply: asset.template?.max_supply || undefined\n          }\n        }) || []\n        \n        setUserNFTs(formattedNFTs)\n      } catch (error) {\n        console.error('Error loading user NFTs:', error)\n      } finally {\n        setLoadingInventory(false)\n      }\n    }\n\n    if (isOpen && offerType === 'nft') {\n      loadUserNFTs()\n    }\n  }, [isOpen, offerType, account])\n\n  const handleNFTSelection = (assetId: string) => {\n    setSelectedNFTs(prev => \n      prev.includes(assetId) \n        ? prev.filter(id => id !== assetId)\n        : [...prev, assetId]\n    )\n  }\n\n  const handleSendWaxOffer = async () => {\n    if (!account || !nft || !waxAmount || !session) return\n    \n    setIsLoading(true)\n    try {\n      const memo = customMemo || (isPixalHolder ? 'Trade Offer sent via PxMarket - market.pixeljourney.xyz' : 'Trade Offer sent via PxMarket - market.pixeljourney.xyz')\n      \n      // Create WAX buy offer transaction\n      const actions = [\n        {\n          account: 'eosio.token',\n          name: 'transfer',\n          authorization: [{\n            actor: account,\n            permission: 'active'\n          }],\n          data: {\n            from: account,\n            to: 'atomicmarket',\n            quantity: `${parseFloat(waxAmount).toFixed(8)} WAX`,\n            memo: 'deposit'\n          }\n        },\n        {\n          account: 'atomicmarket',\n          name: 'createbuyo',\n          authorization: [{\n            actor: account,\n            permission: 'active'\n          }],\n          data: {\n            buyer: account,\n            recipient: nft.owner || nft.seller,\n            price: `${parseFloat(waxAmount).toFixed(8)} WAX`,\n            asset_ids: [nft.asset_id],\n            memo: memo,\n            maker_marketplace: 'market.pxj'\n          }\n        }\n      ]\n\n      // Execute transaction through wallet\n      await session.transact({ actions })\n\n      showSuccess('WAX offer sent successfully!')\n      onClose()\n    } catch (error) {\n      console.error('Error sending WAX offer:', error)\n      showError('Failed to send WAX offer. Please try again.')\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const handleSendNFTOffer = async () => {\n    if (!account || !nft || selectedNFTs.length === 0 || !session) return\n    \n    setIsLoading(true)\n    try {\n      const memo = customMemo || (isPixalHolder ? 'NFT Trade Offer sent via PxMarket - market.pixeljourney.xyz' : 'NFT Trade Offer sent via PxMarket - market.pixeljourney.xyz')\n      \n      // Create NFT trade offer transaction\n      const actions = [{\n        account: 'atomicassets',\n        name: 'createoffer',\n        authorization: [{\n          actor: account,\n          permission: 'active'\n        }],\n        data: {\n          sender: account,\n          recipient: nft.owner || nft.seller,\n          sender_asset_ids: selectedNFTs,\n          recipient_asset_ids: [nft.asset_id],\n          memo: memo\n        }\n      }]\n\n      // Execute transaction through wallet\n      await session.transact({ actions })\n\n      showSuccess('NFT trade offer sent successfully!')\n      onClose()\n    } catch (error) {\n      console.error('Error sending NFT offer:', error)\n      showError('Failed to send NFT offer. Please try again.')\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const handleSubmit = () => {\n    if (offerType === 'wax') {\n      handleSendWaxOffer()\n    } else {\n      handleSendNFTOffer()\n    }\n  }\n\n  if (!isOpen || !nft) return null\n\n  return (\n    <div className=\"modal-backdrop\" onClick={onClose}>\n      <div className=\"modal-content send-offer-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h3>Send Offer for {nft.name}</h3>\n          <button className=\"modal-close\" onClick={onClose}>\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n            </svg>\n          </button>\n        </div>\n\n        <div className=\"modal-body\">\n          {/* NFT Preview */}\n          <div className=\"target-nft-preview\">\n            <MediaRenderer\n               imageUrl={nft.image}\n               alt={nft.name}\n               enableAnimations={settings.enableAnimatedNFTs}\n             />\n            <div className=\"nft-info\">\n              <h4>{nft.name}</h4>\n              <p>Collection: {typeof nft.collection === 'string' ? nft.collection : (nft.collection as { collection_name?: string; name?: string })?.collection_name || (nft.collection as { name?: string })?.name || 'Unknown'}</p>\n              {nft.price && <p>Listed Price: {nft.price} WAX</p>}\n            </div>\n          </div>\n\n          {/* Offer Type Selection */}\n          <div className=\"offer-type-selection\">\n            <h4>Choose Offer Type</h4>\n            <div className=\"offer-type-buttons\">\n              <button \n                className={`offer-type-btn ${offerType === 'wax' ? 'active' : ''}`}\n                onClick={() => setOfferType('wax')}\n              >\n                <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                  <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n                  <path d=\"M12 6v6l4 2\"></path>\n                </svg>\n                WAX Offer\n              </button>\n              <button \n                className={`offer-type-btn ${offerType === 'nft' ? 'active' : ''}`}\n                onClick={() => setOfferType('nft')}\n              >\n                <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                  <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\n                  <circle cx=\"8.5\" cy=\"8.5\" r=\"1.5\"></circle>\n                  <polyline points=\"21,15 16,10 5,21\"></polyline>\n                </svg>\n                NFT Trade\n              </button>\n            </div>\n          </div>\n\n          {/* WAX Offer Form */}\n          {offerType === 'wax' && (\n            <div className=\"wax-offer-form\">\n              <div className=\"form-group\">\n                <label htmlFor=\"waxAmount\">WAX Amount</label>\n                <input\n                  id=\"waxAmount\"\n                  type=\"number\"\n                  step=\"0.0001\"\n                  min=\"0\"\n                  value={waxAmount}\n                  onChange={(e) => setWaxAmount(e.target.value)}\n                  placeholder=\"Enter WAX amount\"\n                  className=\"form-input\"\n                />\n              </div>\n            </div>\n          )}\n\n          {/* NFT Trade Form */}\n          {offerType === 'nft' && (\n            <div className=\"nft-trade-form\">\n              <h4>Select NFTs to Trade</h4>\n              {loadingInventory ? (\n                <div className=\"loading-inventory\">\n                  <div className=\"spinner\"></div>\n                  <p>Loading your NFTs...</p>\n                </div>\n              ) : (\n                <div className=\"user-nfts-grid\">\n                  {userNFTs.map((userNft) => (\n                    <div \n                      key={userNft.asset_id}\n                      className={`user-nft-item ${selectedNFTs.includes(userNft.asset_id) ? 'selected' : ''}`}\n                      onClick={() => handleNFTSelection(userNft.asset_id)}\n                    >\n                      <MediaRenderer\n                         imageUrl={userNft.image}\n                         videoUrl={userNft.video}\n                         alt={userNft.name}\n                         enableAnimations={settings.enableAnimatedNFTs}\n                       />\n                      <div className=\"nft-details\">\n                        <p className=\"nft-name\">{userNft.name}</p>\n                        <p className=\"nft-collection\">{typeof userNft.collection === 'string' ? userNft.collection : userNft.collection?.collection_name || userNft.collection?.name || 'Unknown'}</p>\n                      </div>\n                      {selectedNFTs.includes(userNft.asset_id) && (\n                        <div className=\"selection-indicator\">\n                          <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                            <polyline points=\"20,6 9,17 4,12\"></polyline>\n                          </svg>\n                        </div>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Custom Memo (for Pixal holders) */}\n          {isPixalHolder && (\n            <div className=\"custom-memo-section\">\n              <div className=\"pixal-holder-badge\">\n                <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                  <polygon points=\"12,2 15.09,8.26 22,9 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9 8.91,8.26\"></polygon>\n                </svg>\n                Pixal PFP Holder\n              </div>\n              <div className=\"form-group\">\n                <label htmlFor=\"customMemo\">Custom Memo (Optional)</label>\n                <textarea\n                  id=\"customMemo\"\n                  value={customMemo}\n                  onChange={(e) => setCustomMemo(e.target.value)}\n                  placeholder=\"Add a custom message to your offer...\"\n                  className=\"form-textarea\"\n                  rows={3}\n                />\n              </div>\n            </div>\n          )}\n        </div>\n\n        <div className=\"modal-footer\">\n          <button className=\"btn-secondary\" onClick={onClose}>\n            Cancel\n          </button>\n          <button \n            className=\"btn-primary\"\n            onClick={handleSubmit}\n            disabled={isLoading || !isConnected || \n              (offerType === 'wax' && !waxAmount) || \n              (offerType === 'nft' && selectedNFTs.length === 0)\n            }\n          >\n            {isLoading ? (\n              <>\n                <div className=\"spinner-small\"></div>\n                Sending...\n              </>\n            ) : (\n              `Send ${offerType === 'wax' ? 'WAX' : 'NFT'} Offer`\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}","/**\n * HTML sanitization utilities to prevent XSS attacks\n */\n\n// Allowed HTML tags for safe rendering\nconst ALLOWED_TAGS = ['strong', 'em', 'b', 'i', 'u', 'br', 'p', 'span'];\n\n// Allowed attributes for HTML tags\nconst ALLOWED_ATTRIBUTES: Record<string, string[]> = {\n  'span': ['class'],\n  'p': ['class'],\n};\n\n/**\n * Sanitizes HTML content by removing potentially dangerous elements and attributes\n * @param html - The HTML string to sanitize\n * @returns Sanitized HTML string\n */\nexport function sanitizeHtml(html: string): string {\n  // Create a temporary DOM element to parse the HTML\n  const tempDiv = document.createElement('div');\n  tempDiv.innerHTML = html;\n\n  // Recursively sanitize all elements\n  sanitizeElement(tempDiv);\n\n  return tempDiv.innerHTML;\n}\n\n/**\n * Recursively sanitizes a DOM element and its children\n * @param element - The DOM element to sanitize\n */\nfunction sanitizeElement(element: Element): void {\n  const children = Array.from(element.children);\n  \n  for (const child of children) {\n    const tagName = child.tagName.toLowerCase();\n    \n    // Remove disallowed tags\n    if (!ALLOWED_TAGS.includes(tagName)) {\n      // Replace with text content to preserve the content but remove the tag\n      const textNode = document.createTextNode(child.textContent || '');\n      child.parentNode?.replaceChild(textNode, child);\n      continue;\n    }\n    \n    // Remove disallowed attributes\n    const allowedAttrs = ALLOWED_ATTRIBUTES[tagName] || [];\n    const attributes = Array.from(child.attributes);\n    \n    for (const attr of attributes) {\n      if (!allowedAttrs.includes(attr.name)) {\n        child.removeAttribute(attr.name);\n      }\n    }\n    \n    // Recursively sanitize children\n    sanitizeElement(child);\n  }\n}\n\n/**\n * Escapes HTML special characters to prevent XSS\n * @param text - The text to escape\n * @returns Escaped text\n */\nexport function escapeHtml(text: string): string {\n  const div = document.createElement('div');\n  div.textContent = text;\n  return div.innerHTML;\n}\n\n/**\n * Safely formats markdown-like text with basic formatting\n * @param content - The content to format\n * @returns Sanitized HTML string\n */\nexport function formatSafeMarkdown(content: string): string {\n  // First escape any existing HTML\n  const escaped = escapeHtml(content);\n  \n  // Apply basic markdown formatting\n  const formatted = escaped\n    .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>') // Bold\n    .replace(/\\*(.*?)\\*/g, '<em>$1</em>') // Italic\n    .replace(/\\n/g, '<br>'); // Line breaks\n  \n  // Sanitize the result\n  return sanitizeHtml(formatted);\n}","// IPFS utility functions for consistent URL handling across the app\nimport { API_ENDPOINTS } from '../config/marketplaceConfig'\n\n/**\n * Convert various IPFS URL formats to a standardized format\n * @param imageUrl - The image URL or hash\n * @returns Standardized IPFS URL\n */\nexport function normalizeIPFSUrl(imageUrl: string | undefined | null): string {\n  if (!imageUrl) {\n    return ''\n  }\n\n  // If it's already a full HTTP URL, return as-is\n  if (imageUrl.startsWith('http://') || imageUrl.startsWith('https://')) {\n    return imageUrl\n  }\n\n  // If it's a data URL or blob URL, return as-is\n  if (imageUrl.startsWith('data:') || imageUrl.startsWith('blob:')) {\n    return imageUrl\n  }\n\n  // Handle ipfs:// protocol\n  if (imageUrl.startsWith('ipfs://')) {\n    const hash = imageUrl.replace('ipfs://', '')\n    return getIPFSGatewayUrl(hash)\n  }\n\n  // Handle /ipfs/ path\n  if (imageUrl.includes('/ipfs/')) {\n    const hash = imageUrl.split('/ipfs/')[1]\n    return getIPFSGatewayUrl(hash)\n  }\n\n  // If it looks like an IPFS hash (starts with Qm and is long enough)\n  if (imageUrl.startsWith('Qm') && imageUrl.length > 40) {\n    return getIPFSGatewayUrl(imageUrl)\n  }\n\n  // If it's just a hash without protocol, assume it's IPFS\n  if (imageUrl.length > 40 && /^[a-zA-Z0-9]+$/.test(imageUrl)) {\n    return getIPFSGatewayUrl(imageUrl)\n  }\n\n  // Default: assume it's a relative path and use IPFS gateway\n  return getIPFSGatewayUrl(imageUrl)\n}\n\n/**\n * Get a random IPFS gateway URL for load balancing\n * @param hash - The IPFS hash\n * @returns Full IPFS gateway URL\n */\nexport function getIPFSGatewayUrl(hash: string): string {\n  const gateways = API_ENDPOINTS.IPFS.GATEWAYS\n  const randomGateway = gateways[Math.floor(Math.random() * gateways.length)]\n  \n  // Clean the hash (remove any leading slashes or ipfs/ prefix)\n  const cleanHash = hash.replace(/^\\/?(ipfs\\/)?/, '')\n  \n  return `${randomGateway}${cleanHash}`\n}\n\n/**\n * Check if a URL is an IPFS URL\n * @param url - The URL to check\n * @returns True if it's an IPFS URL\n */\nexport function isIPFSUrl(url: string | undefined | null): boolean {\n  if (!url) return false\n  \n  return (\n    url.includes('/ipfs/') ||\n    url.startsWith('ipfs://') ||\n    url.includes('gateway.pinata.cloud') ||\n    url.includes('ipfs.io') ||\n    url.includes('dweb.link')\n  )\n}\n\n/**\n * Extract IPFS hash from various URL formats\n * @param url - The URL containing an IPFS hash\n * @returns The extracted hash or null if not found\n */\nexport function extractIPFSHash(url: string): string | null {\n  if (!url) return null\n\n  // Handle ipfs:// protocol\n  if (url.startsWith('ipfs://')) {\n    return url.replace('ipfs://', '')\n  }\n\n  // Handle /ipfs/ in URL\n  const ipfsMatch = url.match(/\\/ipfs\\/([a-zA-Z0-9]+)/)\n  if (ipfsMatch) {\n    return ipfsMatch[1]\n  }\n\n  // If it looks like a hash itself\n  if (url.startsWith('Qm') && url.length > 40) {\n    return url\n  }\n\n  return null\n}\n\n/**\n * Get fallback image URL for failed IPFS loads\n * @returns Fallback image URL\n */\nexport function getFallbackImageUrl(): string {\n  // Use a reliable fallback image from IPFS\n  return 'https://ipfs.io/ipfs/QmQKA9fxWBAsoDnMRZj1v1vsjwZeWZpHmnoEyujmeMi2rp'\n}\n\n/**\n * Create an image element with IPFS fallback handling\n * @param src - The image source URL\n * @param onLoad - Callback when image loads successfully\n * @param onError - Callback when image fails to load\n * @returns HTMLImageElement with fallback handling\n */\nexport function createImageWithFallback(\n  src: string,\n  onLoad?: (event: Event) => void,\n  onError?: (event: Event) => void\n): HTMLImageElement {\n  const img = new Image()\n  \n  let hasTriedFallback = false\n  \n  img.onerror = (event) => {\n    if (!hasTriedFallback && isIPFSUrl(src)) {\n      hasTriedFallback = true\n      // Try with a different gateway\n      const hash = extractIPFSHash(src)\n      if (hash) {\n        img.src = getIPFSGatewayUrl(hash)\n        return\n      }\n    }\n    \n    // If all else fails, use fallback image\n    if (!hasTriedFallback) {\n      hasTriedFallback = true\n      img.src = getFallbackImageUrl()\n      return\n    }\n    \n    // Call the original error handler\n    if (onError) {\n      onError(event as Event)\n    }\n  }\n  \n  img.onload = onLoad || null\n  img.src = normalizeIPFSUrl(src)\n  \n  return img\n}\n\n/**\n * Preload an IPFS image with fallback handling\n * @param src - The image source URL\n * @returns Promise that resolves with the working URL\n */\nexport function preloadIPFSImage(src: string): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const img = createImageWithFallback(\n      src,\n      () => resolve(img.src),\n      () => reject(new Error(`Failed to load image: ${src}`))\n    )\n  })\n}","// Collection tier configuration\n// This maps collection names to their tier status and associated benefits\n//\n// INSTRUCTIONS FOR COLLECTION OWNERS:\n// ===================================\n//\n// To customize your collection page on PxMarket, follow these steps:\n//\n// 1. CONTACT US FIRST:\n//    - Reach out to the PxMarket team via Discord or email\n//    - Provide your collection name and desired tier level\n//    - Discuss available customization options based on your tier\n//\n// 2. TIER LEVELS & BENEFITS:\n//    - Bronze (5M PXJ): Basic verification badge, community access\n//    - Silver (15M PXJ): Priority placement, custom banner, analytics\n//    - Gold (30M PXJ): Homepage carousel, social media promotion\n//    - Partner: Co-marketing opportunities, revenue sharing\n//    - Platinum: Full customization, premium placement\n//\n// 3. CUSTOMIZATION OPTIONS:\n//    - ownerMessage: Personal message from collection owner (all tiers)\n//    - quickLinks: Custom links to your website, Discord, social media (Silver+)\n//    - learnAboutGrid: Educational content grid about your project (Gold+)\n//    - discordUrl: Direct Discord community link (all tiers)\n//\n// 4. EXAMPLE CONFIGURATION:\n//    'yourcollection': {\n//      tier: 'silver',\n//      verified: true,\n//      quickLinks: [\n//        { label: 'Website', url: 'https://yoursite.com', icon: '🌐' },\n//        { label: 'Discord', url: 'https://discord.gg/yourserver', icon: '💬' }\n//      ],\n//      benefits: ['Priority placement', 'Custom banner', 'Analytics access'],\n//      ownerMessage: 'Welcome to our collection! Join our community...',\n//      discordUrl: 'https://discord.gg/yourserver'\n//    }\n//\n// 5. LEARN ABOUT GRID (Gold+ tiers):\n//    Add educational content about your project:\n//    learnAboutGrid: [\n//      {\n//        title: 'Your Feature',\n//        description: 'Explain what makes your project unique...',\n//        icon: '🎮', // Use emoji icons\n//        url: 'https://docs.yourproject.com' // Optional link\n//      }\n//    ]\n//\n// 6. SUBMISSION PROCESS:\n//    - Prepare your content following the format above\n//    - Submit via our collection owner portal or Discord\n//    - Our team will review and implement your customizations\n//    - Changes typically go live within 24-48 hours\n//\n// 7. CONTENT GUIDELINES:\n//    - Keep messages professional and community-friendly\n//    - Ensure all URLs are valid and secure (HTTPS)\n//    - Icons should be single emoji characters\n//    - Descriptions should be concise but informative\n//    - All content subject to moderation review\n//\n// For questions or to get started, contact us:\n// - Discord: https://discord.gg/pxmarket\n// - Email: collections@pxmarket.io\n// - Documentation: https://docs.pxmarket.io/collection-customization\n\nexport interface CollectionTier {\n  tier: 'platinum' | 'partner' | 'gold' | 'silver' | 'bronze'\n  verified: boolean\n  quickLinks?: {\n    label: string\n    url: string\n    icon?: string\n  }[]\n  benefits: string[]\n  ownerMessage?: string\n  discordUrl?: string\n  learnAboutGrid?: {\n    title: string\n    description: string\n    icon: string\n    url?: string\n  }[]\n}\n\nexport const COLLECTION_TIERS: Record<string, CollectionTier> = {\n  'pixeljourney': {\n    tier: 'platinum',\n    verified: true,\n    quickLinks: [\n      { label: 'Main Website', url: 'https://pixeljourney.xyz', icon: '🌐' },\n      { label: 'Discord', url: 'http://discord.gg/pixel-journey-1130670500776005734', icon: '💬' },\n      { label: 'X/Twitter', url: 'https://x.com/PXJourney', icon: '🐦' },\n      { label: 'Whitepaper', url: 'https://docs.pixeljourney.xyz', icon: '📄' }\n    ],\n    benefits: [\n      'Premium marketplace placement',\n      'Exclusive promotional campaigns',\n      'Priority customer support',\n      'Advanced analytics dashboard',\n      'Custom branding options'\n    ],\n    ownerMessage: 'Welcome to Pixel Journey! Join our community of adventurers exploring the digital realm. Connect with fellow travelers, learn about all the things and discover exclusive content.',\n    discordUrl: 'http://discord.gg/pixel-journey-1130670500776005734',\n    learnAboutGrid: [\n      {\n        title: 'PXJ Token',\n        description: 'Learn about our native utility token, its use cases, and how it powers the Pixel Journey ecosystem.',\n        icon: '🪙',\n        url: 'https://docs.pixeljourney.xyz/season-1/kickstarting-the-pxj-economy'\n      },\n      {\n        title: 'NFT Collections',\n        description: 'Discover our diverse range of NFT collectibles, from Pixal PFPs to Pixel Ingredients and special editions.',\n        icon: '🎨',\n        url: 'https://docs.pixeljourney.xyz/season-1/the-pixal-pfps'\n      },\n      {\n        title: 'Leaderboards',\n        description: 'Explore the PXJourney mechanics, quests, and adventures awaiting in Pixel Journey.',\n        icon: '🎮',\n        url: 'https://lb.pixeljourney.xyz/'\n      },\n      {\n        title: 'Staking & Rewards',\n        description: 'Understand how to stake your NFTs and tokens to earn rewards and participate in governance.',\n        icon: '💎',\n        url: 'https://pixeljourney.xyz/staking'\n      },\n      {\n        title: 'Roadmap',\n        description: 'Check out our development roadmap and upcoming features planned for the ecosystem.',\n        icon: '🗺️',\n        url: '/journeymap'\n      },\n      {\n        title: 'Community',\n        description: 'Join our vibrant community of adventurers, participate in events, and connect with fellow travelers.',\n        icon: '👥',\n        url: 'http://discord.gg/pixel-journey-1130670500776005734'\n      }\n    ]\n  },\n  'friedfactory': {\n    tier: 'partner',\n    verified: true,\n    quickLinks: [\n      { label: 'Artist Portfolio', url: 'https://friedfactory.art', icon: '🎨' },\n      { label: 'Discord', url: 'https://discord.gg/friedfactory', icon: '💬' },\n      { label: 'Twitter', url: 'https://twitter.com/friedfactory', icon: '🐦' }\n    ],\n    benefits: [\n      'Co-marketing opportunities',\n      'Revenue sharing programs',\n      'Joint event hosting',\n      'Cross-promotion support'\n    ]\n  },\n  'crptomuffins': {\n    tier: 'gold',\n    verified: true,\n    quickLinks: [\n      { label: 'Collection Info', url: '#', icon: 'ℹ️' },\n      { label: 'Discord', url: '#', icon: '💬' }\n    ],\n    benefits: [\n      'Homepage featured carousel',\n      'Social media promotion',\n      'Exclusive events participation',\n      'Direct community manager contact'\n    ]\n  },\n  'akufishheads': {\n    tier: 'silver',\n    verified: true,\n    quickLinks: [\n      { label: 'Collection Info', url: '#', icon: 'ℹ️' }\n    ],\n    benefits: [\n      'Priority marketplace placement',\n      'Weekly newsletter mentions',\n      'Custom collection banner',\n      'Analytics dashboard access'\n    ]\n  },\n  'pantheon': {\n    tier: 'bronze',\n    verified: true,\n    benefits: [\n      'Basic marketplace listing',\n      'Collection verification badge',\n      'Community Discord access',\n      'Monthly featured spot rotation'\n    ]\n  },\n  'pocketsizedp': {\n    tier: 'partner',\n    verified: true,\n    quickLinks: [\n      { label: 'Collection Info', url: '#', icon: 'ℹ️' }\n    ],\n    benefits: [\n      'Co-marketing opportunities',\n      'Revenue sharing programs',\n      'Joint event hosting',\n      'Cross-promotion support'\n    ]\n  },\n  'nimasodyssey': {\n    tier: 'partner',\n    verified: true,\n    benefits: [\n      'Co-marketing opportunities',\n      'Revenue sharing programs',\n      'Joint event hosting',\n      'Cross-promotion support'\n    ]\n  }\n}\n\n/**\n * Get tier information for a collection\n */\nexport function getCollectionTier(collectionName: string): CollectionTier | null {\n  return COLLECTION_TIERS[collectionName] || null\n}\n\n/**\n * Check if a collection has a specific tier or higher\n */\nexport function hasMinimumTier(collectionName: string, minimumTier: CollectionTier['tier']): boolean {\n  const tierHierarchy: Record<CollectionTier['tier'], number> = {\n    'bronze': 1,\n    'silver': 2,\n    'gold': 3,\n    'partner': 4,\n    'platinum': 5\n  }\n  \n  const collectionTier = getCollectionTier(collectionName)\n  if (!collectionTier) return false\n  \n  return tierHierarchy[collectionTier.tier] >= tierHierarchy[minimumTier]\n}\n\n/**\n * Get tier badge configuration\n */\nexport function getTierBadgeConfig(tier: CollectionTier['tier']) {\n  const configs = {\n    'platinum': {\n      icon: '💎',\n      label: 'Platinum',\n      className: 'tier-platinum',\n      color: '#e5e4e2'\n    },\n    'partner': {\n      icon: '🤝',\n      label: 'Partner',\n      className: 'tier-partner',\n      color: '#667eea'\n    },\n    'gold': {\n      icon: '🥇',\n      label: 'Gold',\n      className: 'tier-gold',\n      color: '#ffd700'\n    },\n    'silver': {\n      icon: '🥈',\n      label: 'Silver',\n      className: 'tier-silver',\n      color: '#c0c0c0'\n    },\n    'bronze': {\n      icon: '🥉',\n      label: 'Bronze',\n      className: 'tier-bronze',\n      color: '#cd7f32'\n    }\n  }\n  \n  return configs[tier]\n}","// WAX Powerup Functions - Based on WAXDao implementation\n// Handles powerup calculations and transactions for WAX blockchain\n\nimport { log } from './services/loggingService';\n\n// Fallback values\nconst currentUsername = 'promo.pxj';\nconst defaultSpinnerDuration = 3000;\nconst defaultTxSettings = {};\nconst PROCESSING_TX_TEXT = 'Processing transaction...';\n\nconst POWERUP_FRAC = 1_000_000_000_000_000;\nconst virtual_network_capacity_in_window = 172800;\n\n/**\n * Calculate amount from fraction and state\n */\nexport function calculateAmount(frac, state) {\n  if (!frac) return 0;\n  return frac * parseFloat(state.weight) / POWERUP_FRAC;\n}\n\n/**\n * Calculate powerup fee based on state and utilization increase\n */\nexport function calcPowerupFee(state, utilizationIncrease) {\n  if (utilizationIncrease <= 0) return 0;\n  \n  const max_price = parseFloat(state.max_price.split(' ')[0]);\n  const min_price = parseFloat(state.min_price.split(' ')[0]);\n\n  const priceIntegralDelta = (startUtilization, endUtilization) => {\n      const coefficient = (max_price - min_price) / parseFloat(state.exponent);\n      const startU = startUtilization / parseFloat(state.weight);\n      const endU = endUtilization / parseFloat(state.weight);\n      const delta = min_price * endU - min_price * startU +\n                    coefficient * (Math.pow(endU, parseFloat(state.exponent)) - Math.pow(startU, parseFloat(state.exponent)));\n      return delta;\n    };\n    \n\n  const priceFunction = (utilization) => {\n    let price = min_price;\n    const newExponent = state.exponent - 1.0;\n    if (newExponent <= 0.0) {\n      return max_price;\n    } else {\n      price += (max_price - min_price) * Math.pow(parseFloat(utilization) / state.weight, newExponent);\n    }\n    return price;\n  };\n\n  let fee = 0.0;\n  let startUtilization = parseFloat(state.utilization);\n  let endUtilization = parseFloat(startUtilization) + parseFloat(utilizationIncrease);\n\n  if (startUtilization < parseFloat(state.adjusted_utilization)) {\n    fee += priceFunction(parseFloat(state.adjusted_utilization)) *\n           Math.min(parseFloat(utilizationIncrease), parseFloat(state.adjusted_utilization) - parseFloat(startUtilization)) / parseFloat(state.weight);\n    startUtilization = parseFloat(state.adjusted_utilization);\n  }\n\n  if (startUtilization < endUtilization) {\n    fee += priceIntegralDelta(startUtilization, endUtilization);\n  }\n  \n  const min_fee = 0.00000001;\n  const threshold = 1e-8;\n  \n  if (fee < threshold) {\n      if (fee < min_fee) {\n          return min_fee.toFixed(8);\n      } else {\n          return fee.toPrecision(1).replace(/e-9/, '0.00000000');\n      }\n  } else {\n      return fee.toFixed(8);\n  }\n}\n\nexport const cpu_frac_to_submit = 100000000000;\nexport const net_frac_to_submit = 2000000000;\n\n/**\n * Calculate the fraction for CPU powerup\n */\nexport const waxToCpuFrac = (amount, cpuAllocation) => {\n  if (!amount || cpuAllocation === undefined) {\n    return 0;\n  }\n  \n  const cpuFraction = cpuAllocation / 100;\n  return cpuFraction * cpu_frac_to_submit;\n};\n\n/**\n * Calculate the fraction for NET powerup\n */\nexport const waxToNetFrac = (amount, cpuAllocation) => {\n  if (!amount || cpuAllocation === undefined) {\n    return 0;\n  }\n  \n  const netFraction = (100 - cpuAllocation) / 100;\n  return netFraction * net_frac_to_submit;\n};\n\n/**\n * Predict resource amounts based on fractions and states\n */\nexport function predictResourceAmounts(cpuFrac, netFrac, cpuState, netState) {\n  const cpuAmount = calculateAmount(cpuFrac, cpuState);\n  const netAmount = calculateAmount(netFrac, netState);\n\n  const cpuFee = calcPowerupFee(cpuState, cpuAmount);\n  const netFee = calcPowerupFee(netState, netAmount);\n\n  return {\n    cpuAmount,\n    netAmount,\n    cpuFee,\n    netFee\n  };\n}\n\n/**\n * Calculate NET resources with proper formatting\n */\nexport const netCalc = (netAmount, chainInfo) => {\n  if (!netAmount || netAmount <= 0) {\n    return '0 bytes';\n  }\n  \n  // Convert to appropriate units\n  if (netAmount >= 1024 * 1024) {\n    return `${(netAmount / (1024 * 1024)).toFixed(2)} MB`;\n  } else if (netAmount >= 1024) {\n    return `${(netAmount / 1024).toFixed(2)} KB`;\n  } else {\n    return `${netAmount} bytes`;\n  }\n};\n\n/**\n * Estimate CPU with elastic limit considerations\n */\nexport const estimateCpuWithElasticLimit = (cpuFrac, netFrac, cpuState, netState, chainInfo) => {\n  if(chainInfo && chainInfo.virtual_block_cpu_limit && chainInfo.block_cpu_limit){\n      let base_limit = parseFloat(chainInfo.block_cpu_limit);\n      let current_limit = parseFloat(chainInfo.virtual_block_cpu_limit);\n      let elastic_multiplier = current_limit / base_limit;\n      \n      const predicted = predictResourceAmounts(cpuFrac, netFrac, cpuState, netState);\n      const cpuMicroseconds = predicted.cpuAmount * elastic_multiplier;\n      \n      if (!cpuMicroseconds || cpuMicroseconds <= 0) {\n        return '0 ms';\n      }\n      \n      // Convert microseconds to milliseconds\n      const cpuMs = cpuMicroseconds / 1000;\n      \n      if (cpuMs >= 1000) {\n        return `${(cpuMs / 1000).toFixed(2)} seconds`;\n      } else {\n        return `${cpuMs.toFixed(2)} ms`;\n      }\n  }\n  return '0 ms';\n};\n\n/**\n * Submit powerup transaction to WAX blockchain - WAXDao implementation\n */\nexport const submitPowerupTx = async (\n  setRefresh,\n  accountToBoost,\n  maxPayment,\n  cpu_frac,\n  net_frac,\n  setShowTxModal,\n  setTxModalText,\n  setTxIsLoading,\n  wharfSession\n) => {\n  setShowTxModal(true);\n  setTxModalText(\"Awaiting confirmation...\");\n\n    if(localStorage.getItem(\"wharf--session\") == null){\n      setTxModalText(\n            \"You are not logged in. Click the wallet icon in the top menu\"\n            );\n            return;       \n    }\n\n    const session = wharfSession;\n    \n    let max_payment = `${Number(maxPayment).toFixed(8)} WAX`;\n\n    const action = [\n      {\n        account: \"waxdao\",\n        name: \"powerup\",\n        authorization: [session.permissionLevel],\n        data: {\n        },\n      },       \n      {\n        account: \"eosio\",\n        name: \"powerup\",\n        authorization: [session.permissionLevel],\n        data: {\n          payer: session.actor,\n          receiver: accountToBoost,\n          days: 1,\n          net_frac: parseFloat(net_frac).toFixed(0),\n          cpu_frac: parseFloat(cpu_frac).toFixed(0),\n          max_payment: max_payment\n        },\n      },\n    ];\n    \n    try {\n      const result = await session.transact({ actions: action }, defaultTxSettings);\n      setTxIsLoading(true);\n      setTxModalText(PROCESSING_TX_TEXT);\n      const timer = setTimeout(() => {\n        setTxModalText(`${accountToBoost} has been boosted with ${max_payment}`);\n        setRefresh((prev) => !prev);\n        setTxIsLoading(false);\n      }, defaultSpinnerDuration);\n      return () => clearTimeout(timer);\n    } catch (e) {\n      log.error('Powerup transaction error:', e);\n      setTxModalText(e.message);\n    }  \n\n};","import React, { useState } from 'react'\nimport { BrowserRouter as Router, Routes, Route, useLocation } from 'react-router-dom'\nimport Navigation from './components/Navigation'\nimport LandingPage from './components/LandingPage'\nimport Marketplace from './components/Marketplace'\nimport Rewards from './components/Rewards'\nimport Inventory from './components/Inventory'\nimport Collections from './components/Collections'\nimport CollectionDetail from './components/CollectionDetail'\nimport TemplateDetail from './components/TemplateDetail'\nimport AssetDetail from './components/AssetDetail'\nimport ListingDetail from './components/ListingDetail'\nimport TransactionDetails from './components/TransactionDetails'\nimport UserProfile from './components/UserProfile'\nimport UserProfileLookup from './components/UserProfileLookup'\nimport Packs from './components/Packs'\n\nimport Watchlist from './components/Watchlist'\nimport Footer from './components/Footer'\n\nimport ActivityStats from './components/ActivityStats'\nimport Auctions from './components/Auctions'\nimport AuctionDetail from './components/AuctionDetail'\nimport Learn from './components/Learn'\nimport JourneyMap from './components/JourneyMap'\nimport Staking from './components/Staking'\nimport RWax from './components/RWax'\nimport PxCrafting from './components/PxCrafting'\nimport PxSwap from './components/PxSwap'\nimport { WalletProvider } from './contexts/WalletContext'\nimport { DisplaySettingsProvider } from './contexts/DisplaySettingsContext'\nimport { NotificationProvider } from './contexts/NotificationContext'\nimport { monitoringService } from './services/monitoringService'\nimport { pushNotificationService } from './services/pushNotificationService'\nimport { accessibilityService } from './services/accessibilityService'\nimport { MarketplaceConfigService } from './config/marketplaceConfig';\nimport { log } from './services/loggingService';\nimport PriceAlertManager from './components/PriceAlertNotification'\nimport NotificationContainer from './components/NotificationContainer'\nimport ConfirmDialog from './components/ConfirmDialog'\nimport ErrorBoundary from './components/ErrorBoundary'\nimport APIErrorBoundary from './components/APIErrorBoundary'\nimport ChatWidget from './components/ChatWidget'\nimport WatchlistAlertChecker from './components/WatchlistAlertChecker'\nimport PWAInstallBanner from './components/PWAInstallBanner'\nimport OfflineIndicator from './components/OfflineIndicator'\nimport TransactionNotifications from './components/TransactionNotifications'\nimport './App.css'\nimport './css/rewards.css'\nimport './css/footer.css'\nimport './css/inventory-page.css'\nimport './css/coming-soon.css'\nimport './css/collections.css'\nimport './css/activity-stats.css'\nimport './css/collection-detail.css'\nimport './css/template-detail.css'\nimport './css/asset-detail.css'\nimport './css/listing-detail.css'\nimport './css/user-profile.css'\n\nimport './css/watchlist.css'\nimport './css/collection-analytics.css'\nimport './css/price-alert-notification.css'\nimport './css/auctions.css'\nimport './css/learn.css'\nimport './css/journeymap.css'\nimport './css/rwax.css'\nimport './css/tokenizeInventoryModal.css'\nimport './css/assetDetailModal.css'\nimport './css/pxbadges.css'\nimport './css/pwa-install-banner.css'\nimport './css/offline-indicator.css'\nimport './css/pxcrafting.css'\nimport './css/wharfkit-custom.css'\nimport './css/enhanced-variables.css'\nimport './css/enhanced-utilities.css'\n\n// Component to handle navigation state based on current route\nconst AppContent = () => {\n  const location = useLocation()\n  const [currentPage, setCurrentPage] = useState('landing')\n  \n  // Navigation state tracking for route changes\n\n  // Update current page based on route - first one should remain /landing and not just landing\n  React.useEffect(() => {\n    const path = location.pathname\n    if (path === '' || path === '/' || path === '/market-alphatest/' || path === '/market-alphatest') {\n      setCurrentPage('/landing')\n    } else if (path === '/marketplace' || path === '/market-alphatest/marketplace') {\n      setCurrentPage('marketplace')\n    } else if (path === '/rewards') {\n      setCurrentPage('rewards')\n    } else if (path === '/inventory') {\n      setCurrentPage('inventory')\n    } else if (path === '/packs') {\n      setCurrentPage('packs')\n    } else if (path.startsWith('/collections')) {\n      setCurrentPage('collections')\n    } else if (path === '/activity' || path === '/stats') {\n      setCurrentPage('activity')\n    } else if (path === '/staking') {\n      setCurrentPage('staking')\n    } else if (path === '/profile') {\n      setCurrentPage('profile')\n    } else if (path === '/watchlist') {\n      setCurrentPage('watchlist')\n    } else if (path === '/auctions') {\n      setCurrentPage('auctions')\n    } else if (path === '/learn') {\n      setCurrentPage('learn')\n    } else if (path === '/journeymap') {\n      setCurrentPage('journeymap')\n    } else if (path === '/pxcrafting') {\n      setCurrentPage('pxcrafting')\n    }\n  }, [location.pathname])\n\n  // Scroll to top when route changes\n  React.useEffect(() => {\n    window.scrollTo(0, 0)\n  }, [location.pathname])\n\n  const handlePageChange = (page: string) => {\n    setCurrentPage(page)\n    // Navigate programmatically if needed\n    if (page === 'landing') {\n      window.history.pushState(null, '', '/')\n    } else if (page === 'marketplace') {\n      window.history.pushState(null, '', '/marketplace')\n    } else {\n      window.history.pushState(null, '', `/${page}`)\n    }\n  }\n\n  return (\n    <div className=\"App\">\n      <Navigation currentPage={currentPage} onPageChange={handlePageChange} />\n      <main id=\"main-content\" role=\"main\" aria-label=\"Main content\" className=\"main-content\">\n        <Routes>\n          <Route path=\"/\" element={<APIErrorBoundary><LandingPage /></APIErrorBoundary>} />\n          <Route path=\"/marketplace\" element={<APIErrorBoundary><Marketplace /></APIErrorBoundary>} />\n          <Route path=\"/rewards\" element={<APIErrorBoundary><Rewards onPageChange={handlePageChange} /></APIErrorBoundary>} />\n          <Route path=\"/inventory\" element={<APIErrorBoundary><Inventory /></APIErrorBoundary>} />\n          <Route path=\"/packs\" element={<APIErrorBoundary><Packs /></APIErrorBoundary>} />\n          <Route path=\"/collections\" element={<APIErrorBoundary><Collections /></APIErrorBoundary>} />\n          <Route path=\"/collections/:collectionName\" element={<APIErrorBoundary><CollectionDetail /></APIErrorBoundary>} />\n          <Route path=\"/collections/:collectionName/templates/:templateId\" element={<APIErrorBoundary><TemplateDetail /></APIErrorBoundary>} />\n          <Route path=\"/assets/:assetId\" element={<APIErrorBoundary><AssetDetail /></APIErrorBoundary>} />\n                <Route path=\"/listings/:saleId\" element={<APIErrorBoundary><ListingDetail /></APIErrorBoundary>} />\n                <Route path=\"/transactions/:transactionId\" element={<APIErrorBoundary><TransactionDetails /></APIErrorBoundary>} />\n                <Route path=\"/activity\" element={<APIErrorBoundary><ActivityStats /></APIErrorBoundary>} />\n          <Route path=\"/stats\" element={<APIErrorBoundary><ActivityStats /></APIErrorBoundary>} />\n          <Route path=\"/profile\" element={<APIErrorBoundary><UserProfile /></APIErrorBoundary>} />\n          <Route path=\"/profile/:account\" element={<APIErrorBoundary><UserProfileLookup /></APIErrorBoundary>} />\n\n          <Route path=\"/user-profile-lookup\" element={<APIErrorBoundary><UserProfileLookup /></APIErrorBoundary>} />\n          <Route path=\"/watchlist\" element={<APIErrorBoundary><Watchlist /></APIErrorBoundary>} />\n          <Route path=\"/auctions\" element={<APIErrorBoundary><Auctions /></APIErrorBoundary>} />\n          <Route path=\"/auctions/:id\" element={<APIErrorBoundary><AuctionDetail /></APIErrorBoundary>} />\n          <Route path=\"/learn\" element={<APIErrorBoundary><Learn /></APIErrorBoundary>} />\n          <Route path=\"/journeymap\" element={<APIErrorBoundary><JourneyMap /></APIErrorBoundary>} />\n          <Route path=\"/staking\" element={<APIErrorBoundary><Staking /></APIErrorBoundary>} />\n          <Route path=\"/rwax\" element={<APIErrorBoundary><RWax /></APIErrorBoundary>} />\n              <Route path=\"/pxcrafting\" element={<APIErrorBoundary><PxCrafting /></APIErrorBoundary>} />\n              <Route path=\"/pxswap\" element={<APIErrorBoundary><PxSwap /></APIErrorBoundary>} />\n        </Routes>\n      </main>\n      <Footer />\n    </div>\n  )\n}\n\nfunction App() {\n  // Initialize monitoring and push notifications on app start\n  React.useEffect(() => {\n    // Initialize monitoring\n    monitoringService.trackEvent('app_initialized', {\n      timestamp: Date.now(),\n      userAgent: navigator.userAgent,\n      viewport: {\n        width: window.innerWidth,\n        height: window.innerHeight\n      }\n    })\n\n    // Initialize accessibility service\n    accessibilityService.initialize()\n      .then(() => {\n        log.info('Accessibility service ready', 'App')\n        monitoringService.trackEvent('accessibility_service_ready', {\n          preferences: accessibilityService.getPreferences()\n        })\n      })\n      .catch((error) => {\n        log.error('Failed to initialize accessibility service', 'App', error)\n        monitoringService.reportError(error, 'accessibility_init_error')\n      })\n\n    // Initialize push notification service\n    pushNotificationService.initialize().then((success) => {\n      if (success) {\n        log.info('Push notification service initialized successfully', 'App')\n        monitoringService.trackEvent('push_service_ready', {\n          supported: pushNotificationService.getPermissionState().supported\n        })\n      } else {\n        log.warn('Push notification service initialization failed', 'App')\n      }\n    }).catch((error) => {\n      log.error('Push notification service initialization error', 'App', error)\n      monitoringService.reportError(error, 'push_service_init_error')\n    })\n\n    // Preload marketplace configuration\n    MarketplaceConfigService.preloadConfiguration().then(() => {\n      log.info('Marketplace configuration preloaded successfully', 'App')\n      monitoringService.trackEvent('marketplace_config_preloaded', {\n        timestamp: Date.now()\n      })\n    }).catch((error) => {\n      log.warn('Failed to preload marketplace configuration', 'App', { error })\n      monitoringService.reportError(error, 'marketplace_config_preload_error')\n    })\n  }, [])\n\n  return (\n    <ErrorBoundary>\n      <WalletProvider>\n        <DisplaySettingsProvider>\n          <NotificationProvider>\n            <Router basename=\"/market-alphatest\">\n              <AppContent />\n            </Router>\n            <WatchlistAlertChecker />\n            <PriceAlertManager />\n            <NotificationContainer />\n            <ConfirmDialog />\n            <ChatWidget />\n            <PWAInstallBanner />\n            <OfflineIndicator />\n            <TransactionNotifications />\n          </NotificationProvider>\n        </DisplaySettingsProvider>\n      </WalletProvider>\n    </ErrorBoundary>\n  )\n}\n\nexport default App\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/**\n * @license React\n * react-jsx-runtime.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n  REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\");\nfunction jsxProd(type, config, maybeKey) {\n  var key = null;\n  void 0 !== maybeKey && (key = \"\" + maybeKey);\n  void 0 !== config.key && (key = \"\" + config.key);\n  if (\"key\" in config) {\n    maybeKey = {};\n    for (var propName in config)\n      \"key\" !== propName && (maybeKey[propName] = config[propName]);\n  } else maybeKey = config;\n  config = maybeKey.ref;\n  return {\n    $$typeof: REACT_ELEMENT_TYPE,\n    type: type,\n    key: key,\n    ref: void 0 !== config ? config : null,\n    props: maybeKey\n  };\n}\nexports.Fragment = REACT_FRAGMENT_TYPE;\nexports.jsx = jsxProd;\nexports.jsxs = jsxProd;\n","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom-client.production.js');\n} else {\n  module.exports = require('./cjs/react-dom-client.development.js');\n}\n","import { createContext } from 'react'\nimport type { Session } from '@wharfkit/session'\nimport type { TransactionType } from '../services/transactionService'\n\ninterface TransactionAction {\n  account: string\n  name: string\n  authorization: Array<{ actor: string; permission: string }>\n  data: Record<string, unknown>\n}\n\nexport interface WalletContextType {\n  isConnected: boolean\n  account: string | null\n  session: Session | null\n  login: () => Promise<Session | null>\n  logout: () => Promise<void>\n  transact: (actions: TransactionAction[]) => Promise<unknown>\n  purchaseNFT: (saleId: string, price: string) => Promise<unknown>\n  batchPurchaseNFTs: (purchases: Array<{saleId: string, price: string}>) => Promise<unknown>\n  executeCraftingTransaction: (craftingData: any) => Promise<unknown>\n  isLoading: boolean\n  // Transaction management methods\n  executeTransaction: (type: TransactionType, data: any) => Promise<string>\n  getTransaction?: (transactionId: string) => any\n  cancelTransaction?: (transactionId: string) => boolean\n  getTransactionHistory?: () => Promise<any[]>\n  transferNFT?: (assetId: string, recipient: string) => Promise<unknown>\n  bulkTransferNFT?: (recipient: string, assetIds: string[], memo?: string) => Promise<unknown>\n  transferTokens?: (to: string, amount: string, currency?: string, memo?: string) => Promise<unknown>\n}\n\nconst WalletContext = createContext<WalletContextType | undefined>(undefined)\n\nexport default WalletContext","import { useContext } from 'react'\nimport WalletContext, { type WalletContextType } from '../contexts/WalletContextDefinition'\n\nexport const useWallet = (): WalletContextType => {\n  const context = useContext(WalletContext)\n  if (context === undefined) {\n    throw new Error('useWallet must be used within a WalletProvider')\n  }\n  return context\n}","// Centralized error message service for consistent error handling\n\nexport interface ErrorMessageConfig {\n  title: string\n  message: string\n  action?: string\n}\n\nexport class ErrorMessageService {\n  // Standard error messages for common scenarios\n  static readonly MESSAGES = {\n    // Network and API errors\n    NETWORK_ERROR: {\n      title: 'Connection Error',\n      message: 'Unable to connect to the server. Please check your internet connection and try again.',\n      action: 'Retry'\n    },\n    TIMEOUT_ERROR: {\n      title: 'Request Timeout',\n      message: 'The request took too long to complete. Please try again.',\n      action: 'Retry'\n    },\n    API_ERROR: {\n      title: 'Service Unavailable',\n      message: 'The service is temporarily unavailable. Please try again in a moment.',\n      action: 'Retry'\n    },\n    LOAD_FAILED: {\n      title: 'Loading Failed',\n      message: 'Failed to load data. Please refresh the page or try again later.',\n      action: 'Refresh'\n    },\n    \n    // Authentication and wallet errors\n    WALLET_CONNECTION_FAILED: {\n      title: 'Wallet Connection Failed',\n      message: 'Unable to connect to your wallet. Please ensure your wallet is unlocked and try again.',\n      action: 'Retry'\n    },\n    WALLET_DISCONNECTED: {\n      title: 'Wallet Disconnected',\n      message: 'Your wallet has been disconnected. Please reconnect to continue.',\n      action: 'Connect Wallet'\n    },\n    INSUFFICIENT_BALANCE: {\n      title: 'Insufficient Balance',\n      message: 'You do not have enough balance to complete this transaction.',\n      action: 'Add Funds'\n    },\n    \n    // Transaction errors\n    TRANSACTION_FAILED: {\n      title: 'Transaction Failed',\n      message: 'The transaction could not be completed. Please try again.',\n      action: 'Retry'\n    },\n    TRANSACTION_REJECTED: {\n      title: 'Transaction Rejected',\n      message: 'The transaction was rejected. Please try again if this was unintentional.',\n      action: 'Retry'\n    },\n    \n    // Data validation errors\n    INVALID_INPUT: {\n      title: 'Invalid Input',\n      message: 'Please check your input and try again.',\n      action: 'Correct Input'\n    },\n    REQUIRED_FIELD: {\n      title: 'Required Field Missing',\n      message: 'Please fill in all required fields.',\n      action: 'Complete Form'\n    },\n    \n    // NFT and marketplace specific errors\n    NFT_NOT_FOUND: {\n      title: 'NFT Not Found',\n      message: 'The requested NFT could not be found or may no longer be available.',\n      action: 'Go Back'\n    },\n    COLLECTION_NOT_FOUND: {\n      title: 'Collection Not Found',\n      message: 'The requested collection could not be found or may not exist.',\n      action: 'Browse Collections'\n    },\n    PURCHASE_FAILED: {\n      title: 'Purchase Failed',\n      message: 'Unable to complete the purchase. The item may no longer be available.',\n      action: 'Refresh Listings'\n    },\n    LISTING_FAILED: {\n      title: 'Listing Failed',\n      message: 'Unable to list your NFT. Please check your wallet and try again.',\n      action: 'Retry'\n    },\n    \n    // Generic fallback\n    UNKNOWN_ERROR: {\n      title: 'Something Went Wrong',\n      message: 'An unexpected error occurred. Please try again or contact support if the problem persists.',\n      action: 'Retry'\n    }\n  } as const\n  \n  /**\n   * Get a standard error message configuration\n   */\n  static getMessage(key: keyof typeof ErrorMessageService.MESSAGES): ErrorMessageConfig {\n    return ErrorMessageService.MESSAGES[key]\n  }\n  \n  /**\n   * Create a custom error message with consistent formatting\n   */\n  static createMessage(title: string, message: string, action?: string): ErrorMessageConfig {\n    return { title, message, action }\n  }\n  \n  /**\n   * Format an error object into a user-friendly message\n   */\n  static formatError(error: unknown, fallbackMessage?: ErrorMessageConfig): ErrorMessageConfig {\n    if (error instanceof Error) {\n      // Check for specific error patterns\n      const message = error.message.toLowerCase()\n      const errorName = error.name.toLowerCase()\n      \n      // Network and connection errors\n      if (message.includes('network') || message.includes('fetch') || message.includes('connection')) {\n        return ErrorMessageService.MESSAGES.NETWORK_ERROR\n      }\n      \n      // Timeout errors\n      if (message.includes('timeout') || message.includes('aborted') || errorName.includes('timeout')) {\n        return ErrorMessageService.MESSAGES.TIMEOUT_ERROR\n      }\n      \n      // Transaction errors\n      if (message.includes('rejected') || message.includes('cancelled')) {\n        return ErrorMessageService.MESSAGES.TRANSACTION_REJECTED\n      }\n      \n      // Balance errors\n      if (message.includes('insufficient')) {\n        return ErrorMessageService.MESSAGES.INSUFFICIENT_BALANCE\n      }\n      \n      // Not found errors\n      if (message.includes('not found')) {\n        return ErrorMessageService.MESSAGES.NFT_NOT_FOUND\n      }\n      \n      // Chunk loading errors (code splitting)\n      if (errorName === 'chunkloaderror') {\n        return ErrorMessageService.MESSAGES.LOAD_FAILED\n      }\n      \n      // API and HTTP errors\n      if (message.includes('api') || message.includes('http') || message.includes('server')) {\n        return ErrorMessageService.MESSAGES.API_ERROR\n      }\n      \n      // Return custom message with error details for development\n      if (import.meta.env?.DEV || window.location.hostname === 'localhost') {\n        return ErrorMessageService.createMessage(\n          `Error: ${error.name}`,\n          error.message,\n          'Retry'\n        )\n      }\n      \n      // Generic error message for production\n      return ErrorMessageService.createMessage(\n        'Error',\n        'An error occurred while processing your request.',\n        'Retry'\n      )\n    }\n    \n    return fallbackMessage || ErrorMessageService.MESSAGES.UNKNOWN_ERROR\n  }\n  \n  /**\n   * Log error consistently across the application\n   * @deprecated Use log.error from loggingService instead\n   */\n  static logError(context: string, error: unknown, additionalInfo?: Record<string, unknown>): void {\n    // Use dynamic import to avoid circular dependencies\n    import('./loggingService').then(({ log }) => {\n      const errorInstance = error instanceof Error ? error : new Error(String(error))\n      log.error(`Error in ${context}`, context, errorInstance, additionalInfo)\n    }).catch(() => {\n      // Fallback to console if logging service is not available\n      console.error(`Error in ${context}:`, error, additionalInfo)\n    })\n  }\n}\n\n// Export commonly used error messages for convenience\nexport const ERROR_MESSAGES = ErrorMessageService.MESSAGES\nexport const formatError = ErrorMessageService.formatError\nexport const logError = ErrorMessageService.logError","/**\n * Production-ready logging service\n * Replaces console.log statements with structured logging\n * \n * USAGE GUIDELINES:\n * \n * 1. ALWAYS use the centralized log service instead of console.log/warn/error\n *    ✅ Good: log.info('User logged in', 'AuthService.login', { userId })\n *    ❌ Bad:  console.log('User logged in')\n * \n * 2. Choose appropriate log levels:\n *    - log.debug(): Development info, detailed tracing (filtered in production)\n *    - log.info():  Important events, successful operations, state changes\n *    - log.warn():  Recoverable errors, fallbacks, deprecated usage\n *    - log.error(): Critical errors, exceptions, failed operations\n * \n * 3. ALWAYS provide context as the second parameter:\n *    - Format: 'ServiceName.methodName' or 'ComponentName.functionName'\n *    - Example: 'RWax.handleTokenization', 'InventoryService.loadFullInventory'\n * \n * 4. Include relevant data as the third parameter when helpful:\n *    - Use objects for structured data: { userId, assetId, count }\n *    - Avoid logging sensitive information (passwords, tokens, keys)\n * \n * 5. For errors, pass the error object in the data parameter:\n *    - log.error('Failed to fetch data', 'ApiService.getData', { error, endpoint })\n * \n * 6. Migration from console calls:\n *    - console.log() → log.debug() or log.info() (depending on importance)\n *    - console.warn() → log.warn()\n *    - console.error() → log.error()\n * \n * 7. Import and use:\n *    import { log } from './loggingService'\n *    log.info('Operation completed', 'MyService.myMethod')\n */\n\nexport const LogLevel = {\n  DEBUG: 'debug',\n  INFO: 'info',\n  WARN: 'warn',\n  ERROR: 'error'\n} as const\n\nexport type LogLevel = typeof LogLevel[keyof typeof LogLevel]\n\ninterface LogEntry {\n  timestamp: string;\n  level: LogLevel;\n  message: string;\n  context?: string;\n  data?: unknown;\n  error?: Error;\n}\n\nclass LoggingService {\n  private logLevel: LogLevel = LogLevel.INFO;\n  private isDevelopment = import.meta.env.DEV;\n  private logs: LogEntry[] = [];\n  private maxLogs = 1000;\n\n  constructor() {\n    // Set log level based on environment\n    this.logLevel = this.isDevelopment ? LogLevel.DEBUG : LogLevel.WARN;\n  }\n\n  private createLogEntry(level: LogLevel, message: string, context?: string, data?: unknown, error?: Error): LogEntry {\n    return {\n      timestamp: new Date().toISOString(),\n      level,\n      message,\n      context,\n      data,\n      error\n    };\n  }\n\n  private shouldLog(level: LogLevel): boolean {\n    return level >= this.logLevel;\n  }\n\n  private storeLog(entry: LogEntry): void {\n    this.logs.push(entry);\n    if (this.logs.length > this.maxLogs) {\n      this.logs.shift(); // Remove oldest log\n    }\n  }\n\n  private formatMessage(entry: LogEntry): string {\n    const levelName = entry.level.toUpperCase();\n    const context = entry.context ? `[${entry.context}]` : '';\n    return `${entry.timestamp} ${levelName} ${context} ${entry.message}`;\n  }\n\n  debug(message: string, context?: string, data?: unknown): void {\n    if (!this.shouldLog(LogLevel.DEBUG)) return;\n    \n    const entry = this.createLogEntry(LogLevel.DEBUG, message, context, data);\n    this.storeLog(entry);\n    \n    if (this.isDevelopment) {\n      console.debug(this.formatMessage(entry), data || '');\n    }\n  }\n\n  info(message: string, context?: string, data?: unknown): void {\n    if (!this.shouldLog(LogLevel.INFO)) return;\n    \n    const entry = this.createLogEntry(LogLevel.INFO, message, context, data);\n    this.storeLog(entry);\n    \n    if (this.isDevelopment) {\n      console.info(this.formatMessage(entry), data || '');\n    }\n  }\n\n  warn(message: string, context?: string, data?: unknown): void {\n    if (!this.shouldLog(LogLevel.WARN)) return;\n    \n    const entry = this.createLogEntry(LogLevel.WARN, message, context, data);\n    this.storeLog(entry);\n    \n    console.warn(this.formatMessage(entry), data || '');\n  }\n\n  error(message: string, context?: string, error?: Error, data?: unknown): void {\n    if (!this.shouldLog(LogLevel.ERROR)) return;\n    \n    const entry = this.createLogEntry(LogLevel.ERROR, message, context, data, error);\n    this.storeLog(entry);\n    \n    console.error(this.formatMessage(entry), error || '', data || '');\n    \n    // In production, send to error reporting service\n    if (!this.isDevelopment && error) {\n      this.reportError(error, { message, context, data });\n    }\n  }\n\n  private async reportError(error: Error, metadata: Record<string, unknown>): Promise<void> {\n    try {\n      // Send to multiple error reporting services for redundancy\n      const reportingPromises = [\n        this.sendToErrorReportingAPI(error, metadata),\n        this.sendToLocalStorage(error, metadata),\n        this.sendToConsole(error, metadata)\n      ];\n\n      await Promise.allSettled(reportingPromises);\n    } catch (reportingError) {\n      // Fallback to console if all reporting methods fail\n      console.error('Failed to report error:', reportingError);\n      console.error('Original error:', error);\n    }\n  }\n\n  private async sendToErrorReportingAPI(error: Error, metadata: Record<string, unknown>): Promise<void> {\n    try {\n      const errorReport = {\n        message: error.message,\n        stack: error.stack,\n        timestamp: new Date().toISOString(),\n        userAgent: navigator.userAgent,\n        url: window.location.href,\n        userId: this.getUserId(),\n        sessionId: this.getSessionId(),\n        buildVersion: this.getBuildVersion(),\n        environment: this.getEnvironment(),\n        metadata\n      };\n\n      // Try primary error reporting endpoint\n      const response = await fetch('/api/errors/report', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${this.getAuthToken()}`\n        },\n        body: JSON.stringify(errorReport)\n      });\n\n      if (!response.ok) {\n        throw new Error(`Error reporting failed: ${response.status} ${response.statusText}`);\n      }\n\n      console.log('Error successfully reported to server');\n    } catch {\n      // Try fallback error reporting service\n      await this.sendToFallbackErrorService(error, metadata);\n    }\n  }\n\n  private async sendToFallbackErrorService(error: Error, metadata: Record<string, unknown>): Promise<void> {\n    try {\n      // Use a third-party error reporting service as fallback\n      const errorData = {\n        error: {\n          message: error.message,\n          stack: error.stack,\n          timestamp: new Date().toISOString()\n        },\n        context: {\n          ...metadata,\n          userAgent: navigator.userAgent,\n          url: window.location.href\n        }\n      };\n\n      // This could be Sentry, LogRocket, Bugsnag, etc.\n      if (typeof window !== 'undefined' && (window as { Sentry?: { captureException: (error: Error, options: { extra: unknown; level: string }) => void } }).Sentry) {\n        (window as unknown as { Sentry: { captureException: (error: Error, options: { extra: unknown; level: string }) => void } }).Sentry.captureException(error, {\n          extra: errorData.context,\n          level: 'error'\n        });\n      }\n    } catch (fallbackError) {\n      console.warn('Fallback error reporting also failed:', fallbackError);\n    }\n  }\n\n  private async sendToLocalStorage(error: Error, metadata: Record<string, unknown>): Promise<void> {\n    try {\n      const storageKey = 'error_reports';\n      const maxStoredErrors = 50;\n      \n      const errorReport = {\n        message: error.message,\n        stack: error.stack,\n        timestamp: new Date().toISOString(),\n        userAgent: navigator.userAgent,\n        url: window.location.href,\n        metadata\n      };\n      \n      let storedErrors: unknown[] = [];\n      const existing = localStorage.getItem(storageKey);\n      \n      if (existing) {\n        try {\n          storedErrors = JSON.parse(existing);\n        } catch (parseError) {\n          console.warn('Failed to parse stored errors:', parseError);\n        }\n      }\n\n      // Add new error and limit storage\n      storedErrors.unshift(errorReport);\n      storedErrors = storedErrors.slice(0, maxStoredErrors);\n\n      localStorage.setItem(storageKey, JSON.stringify(storedErrors));\n    } catch (storageError) {\n      console.warn('Failed to store error in localStorage:', storageError);\n    }\n  }\n\n  private sendToConsole(error: Error, metadata: Record<string, unknown>): void {\n    const style = 'color: #ff4444; font-weight: bold; background: #ffe6e6; padding: 2px 4px; border-radius: 3px;';\n    console.group(`%cERROR: ${error.message}`, style);\n    \n    if (metadata) {\n      console.log('Metadata:', metadata);\n    }\n    \n    if (error.stack) {\n      console.log('Stack:', error.stack);\n    }\n    \n    console.log('Timestamp:', new Date().toISOString());\n    console.groupEnd();\n  }\n\n  private getUserId(): string {\n    return localStorage.getItem('user_id') || sessionStorage.getItem('user_id') || 'anonymous';\n  }\n\n  private getSessionId(): string {\n    let sessionId = sessionStorage.getItem('session_id');\n    if (!sessionId) {\n      sessionId = `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n      sessionStorage.setItem('session_id', sessionId);\n    }\n    return sessionId;\n  }\n\n  private getAuthToken(): string {\n    return localStorage.getItem('auth_token') || sessionStorage.getItem('auth_token') || '';\n  }\n\n  private getBuildVersion(): string {\n    return import.meta.env.VITE_APP_VERSION || 'unknown';\n  }\n\n  private getEnvironment(): string {\n    return import.meta.env.MODE || 'development';\n  }\n\n  getLogs(level?: LogLevel): LogEntry[] {\n    if (level !== undefined) {\n      return this.logs.filter(log => log.level >= level);\n    }\n    return [...this.logs];\n  }\n\n  clearLogs(): void {\n    this.logs = [];\n  }\n\n  exportLogs(): string {\n    return JSON.stringify(this.logs, null, 2);\n  }\n}\n\n// Create singleton instance\nexport const logger = new LoggingService();\n\n// Convenience functions for backward compatibility\nexport const log = {\n  debug: (message: string, context?: string, data?: unknown) => logger.debug(message, context, data),\n  info: (message: string, context?: string, data?: unknown) => logger.info(message, context, data),\n  warn: (message: string, context?: string, data?: unknown) => logger.warn(message, context, data),\n  error: (message: string, context?: string, error?: Error, data?: unknown) => logger.error(message, context, error, data)\n};","/**\n * Marketplace Configuration\n * Contains configuration data for the Pixel Journey marketplace\n * Based on actual Pixal PFP asset attributes and structure\n */\n\nimport { log } from '../services/loggingService';\n\n// Known WaxRock types from Pixal PFP template 781515\n// These are the actual gem types that appear in the 'WaxRock' attribute\n// 96% of Pixal PFPs have WaxRock: \"none\", 4% have one of these rare gems\nexport const WAXROCK_TYPES = [\n  'Citrine',\n  'Tourmaline', \n  'Emerald',\n  'Garnet',\n  'Peridot',\n  'Jade',\n  'Sapphire',\n  'Turquoise',\n  'Pigeon Blood Ruby',\n  'Blue Rock',\n  'Black Rock',\n  'Rock'\n] as const\n\nexport type WaxRockType = typeof WAXROCK_TYPES[number]\n\n/**\n * Partner collections that have special marketplace access\n * Fallback values used when API is unavailable\n */\nexport const PARTNER_COLLECTIONS = [\n  'friedfactory',\n  'pixeljourney'\n] as const\n\n/**\n * Token contracts used in the marketplace\n * Fallback values used when API is unavailable\n */\nexport const TOKEN_CONTRACTS = [\n  'alien.worlds',\n  'prospectorsc', \n  'token.nefty'\n] as const\n\n/**\n * Pixal PFP template ID\n * All Pixal PFPs (including WaxRocks) use this template\n */\nexport const PIXAL_TEMPLATE_ID = '781515'\n\n/**\n * API Endpoint Configuration\n * Centralized configuration for all external API endpoints\n */\nexport const API_ENDPOINTS = {\n  // Atomic Assets API endpoints\n  ATOMIC_ASSETS: [\n    'https://atomic.wax.eosrio.io',\n    'https://wax-atomic.alcor.exchange',\n    'https://atomic-wax-mainnet.wecan.dev',\n    'https://wax.eosusa.io',\n    'https://wax-atomic-api.eosphere.io',\n    'https://atomic.3dkrender.com',\n    'https://aa-wax-public1.neftyblocks.com',\n    'https://atomic-wax.tacocrypto.io'\n  ],\n  \n  // WAX Chain API endpoints\n  WAX_CHAIN: {\n    EOSRIO: 'https://wax.eosrio.io',\n    WAXSWEDEN: 'https://api.waxsweden.org',\n    GREYMASS: 'https://wax.greymass.com',\n    EOSPHERE: 'https://wax.eosphere.io',\n    ALOHAEOS: 'https://api.wax.alohaeos.com',\n    PINK: 'https://wax.pink.gg',\n    CRYPTOLIONS: 'https://wax.cryptolions.io',\n    FALLBACK_ENDPOINTS: [\n      'https://wax.eosphere.io',\n      'https://wax.eosrio.io',\n      'https://api.wax.alohaeos.com',\n      'https://wax.pink.gg',\n      'https://api.waxsweden.org',\n      'https://wax.greymass.com',\n      'https://wax.cryptolions.io'\n    ],\n    HYPERION_ENDPOINTS: [\n      'https://wax-hyperion.eosdetroit.io',\n      'https://wax.eosrio.io',\n      'https://api.waxsweden.org'\n    ],\n    HIVEBP: 'https://wax-api.hivebp.io',\n    LIGHT_API: 'https://wax.light-api.net'\n  },\n  \n  // Specialized API endpoints\n  SPECIALIZED: {\n    ALCOR: 'https://alcor.exchange/api/v2',\n    DAPPLICA: 'https://aa.dapplica.io',\n    NEFTY: 'https://api.neftyblocks.com'\n  },\n  \n  // External services\n  IPFS: {\n    GATEWAYS: [\n      'https://ipfs.io/ipfs/',\n      'https://gateway.pinata.cloud/ipfs/',\n      'https://dweb.link/ipfs/'\n    ]\n  },\n  \n  // Avatar services\n  AVATAR: {\n    DICEBEAR: 'https://api.dicebear.com/7.x/identicon/svg'\n  },\n  \n  // Hyperion endpoints\n  HYPERION: [\n    'https://wax-hyperion.eosdetroit.io',\n    'https://wax.eosrio.io',\n    'https://api.waxsweden.org'\n  ],\n  \n  // Price and currency APIs\n  COINGECKO_API: 'https://api.coingecko.com/api/v3/simple/price',\n  EXCHANGE_RATE_API: 'https://api.exchangerate-api.com/v4/latest/USD',\n  \n  // Social and external links\n  SOCIAL: {\n    TWITTER_INTENT: 'https://twitter.com/intent/tweet',\n    FACEBOOK_SHARE: 'https://www.facebook.com/sharer/sharer.php',\n    REDDIT_SUBMIT: 'https://reddit.com/submit',\n    TELEGRAM_SHARE: 'https://t.me/share/url',\n    DISCORD: 'https://discord.gg/pixeljourney',\n    ATOMICHUB_EXPLORER: 'https://wax.atomichub.io/explorer',\n    BLOKS_EXPLORER: 'https://wax.bloks.io'\n  },\n  \n  // Pixel Journey specific\n  PIXEL_JOURNEY: {\n    MAIN_SITE: 'https://pixeljourney.xyz',\n    DOCS: 'https://docs.pixeljourney.xyz',\n    LOGO: '/logo.png',\n    DEFAULT_IMAGE: 'https://pixeljourney.xyz/img/toppixals/10.webp',\n    LEADERBOARD: 'https://lb.pixeljourney.xyz/',\n    CRAFTING_DOCS: 'https://docs.pixeljourney.xyz/season-1/recycling-and-crafting'\n  },\n  \n  // Avatar and image services\n  DICEBEAR_API: 'https://api.dicebear.com/7.x/identicon/svg',\n  \n  // Fonts and external resources\n  GOOGLE_FONTS: 'https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap',\n  \n  // WAX wallet\n  WAX_WALLET: 'https://wallet.wax.io'\n} as const\n\n/**\n * Marketplace Configuration Service\n * Provides centralized access to marketplace configuration data\n */\nexport class MarketplaceConfigService {\n  private static configCache: {\n    partnerCollections?: string[]\n    tokenContracts?: string[]\n    lastFetch?: number\n  } = {}\n  \n  private static readonly CACHE_DURATION = 5 * 60 * 1000 // 5 minutes\n\n  /**\n   * Check if a WaxRock type is valid (not \"none\")\n   */\n  static isValidWaxRock(waxRock: string): boolean {\n    return waxRock !== 'none' && WAXROCK_TYPES.includes(waxRock as WaxRockType)\n  }\n\n  /**\n   * Get all valid WaxRock types (excluding \"none\")\n   */\n  static getWaxRockTypes(): readonly WaxRockType[] {\n    return WAXROCK_TYPES\n  }\n\n  /**\n   * Get partner collections from API with caching\n   * Falls back to hardcoded values if API fails\n   */\n  static async getPartnerCollections(): Promise<string[]> {\n    const now = Date.now()\n    \n    // Return cached data if still valid\n    if (this.configCache.partnerCollections && \n        this.configCache.lastFetch && \n        (now - this.configCache.lastFetch) < this.CACHE_DURATION) {\n      return this.configCache.partnerCollections\n    }\n\n    try {\n      // Dynamic import to avoid circular dependency\n      const { apiService } = await import('../services/api')\n      const collections = await apiService.getPartnerCollections()\n      \n      // Update cache\n      this.configCache.partnerCollections = collections\n      this.configCache.lastFetch = now\n      \n      return collections\n    } catch (error) {\n      log.warn('Failed to fetch partner collections from API, using fallback', 'MarketplaceConfig', { error })\n      // Return hardcoded fallback\n      return [...PARTNER_COLLECTIONS]\n    }\n  }\n\n  /**\n   * Get partner collections synchronously (for backward compatibility)\n   * Returns cached data or hardcoded fallback\n   */\n  static getPartnerCollectionsSync(): readonly string[] {\n    return this.configCache.partnerCollections || PARTNER_COLLECTIONS\n  }\n\n  /**\n   * Get token contracts from API with caching\n   * Falls back to hardcoded values if API fails\n   */\n  static async getTokenContracts(): Promise<string[]> {\n    const now = Date.now()\n    \n    // Return cached data if still valid\n    if (this.configCache.tokenContracts && \n        this.configCache.lastFetch && \n        (now - this.configCache.lastFetch) < this.CACHE_DURATION) {\n      return this.configCache.tokenContracts\n    }\n\n    try {\n      // Dynamic import to avoid circular dependency\n      const { apiService } = await import('../services/api')\n      const contracts = await apiService.getTokenContracts()\n      \n      // Update cache\n      this.configCache.tokenContracts = contracts\n      this.configCache.lastFetch = now\n      \n      return contracts\n    } catch (error) {\n      log.warn('Failed to fetch token contracts from API, using fallback', 'MarketplaceConfig', { error })\n      // Return hardcoded fallback\n      return [...TOKEN_CONTRACTS]\n    }\n  }\n\n  /**\n   * Get token contracts synchronously (for backward compatibility)\n   * Returns cached data or hardcoded fallback\n   */\n  static getTokenContractsSync(): readonly string[] {\n    return this.configCache.tokenContracts || TOKEN_CONTRACTS\n  }\n\n  /**\n   * Get Pixal PFP template ID\n   */\n  static getPixalTemplateId(): string {\n    return PIXAL_TEMPLATE_ID\n  }\n\n  /**\n   * Check if an asset is a Pixal PFP (including WaxRocks)\n   */\n  static isPixalPFP(templateId: string): boolean {\n    return templateId === PIXAL_TEMPLATE_ID\n  }\n\n  /**\n   * Generate dynamic filters based on API data\n   * Analyzes actual asset attributes to create meaningful filter categories\n   */\n  static generateFiltersFromAssets(assets: { data?: Record<string, unknown>; [key: string]: unknown }[]): string[] {\n    const filters = new Set<string>()\n    const attributeCounts = new Map<string, number>()\n    \n    // Add basic categories\n    filters.add('All Items')\n    \n    // Analyze assets to find common attributes\n    assets.forEach(asset => {\n      // Check traits/attributes\n      if (asset.traits && typeof asset.traits === 'object' && asset.traits !== null) {\n        Object.keys(asset.traits as Record<string, unknown>).forEach(traitKey => {\n          const traitValue = (asset.traits as Record<string, unknown>)[traitKey]\n          if (traitValue && traitValue !== 'none' && traitValue !== '') {\n            const filterKey = `${traitKey}: ${traitValue}`\n            attributeCounts.set(filterKey, (attributeCounts.get(filterKey) || 0) + 1)\n          }\n        })\n      }\n      \n      // Check data attributes\n      if (asset.data && typeof asset.data === 'object' && asset.data !== null) {\n        Object.keys(asset.data as Record<string, unknown>).forEach(dataKey => {\n          const dataValue = (asset.data as Record<string, unknown>)[dataKey]\n          if (dataValue && dataValue !== 'none' && dataValue !== '') {\n            const filterKey = `${dataKey}: ${dataValue}`\n            attributeCounts.set(filterKey, (attributeCounts.get(filterKey) || 0) + 1)\n          }\n        })\n      }\n      \n      // Add collection-based filters\n      if (asset.collection) {\n        const collectionFilter = `Collection: ${asset.collection}`\n        attributeCounts.set(collectionFilter, (attributeCounts.get(collectionFilter) || 0) + 1)\n      }\n      \n      // Add schema-based filters\n      if (asset.schema) {\n        const schemaFilter = `Schema: ${asset.schema}`\n        attributeCounts.set(schemaFilter, (attributeCounts.get(schemaFilter) || 0) + 1)\n      }\n    })\n    \n    // Only include attributes that appear in at least 2 assets (to avoid noise)\n    const minOccurrences = Math.max(2, Math.floor(assets.length * 0.05)) // At least 5% of assets\n    attributeCounts.forEach((count, filterKey) => {\n      if (count >= minOccurrences) {\n        filters.add(filterKey)\n      }\n    })\n    \n    return Array.from(filters).sort()\n  }\n\n  /**\n   * Preload configuration data to populate cache\n   * Should be called during app initialization\n   */\n  static async preloadConfiguration(): Promise<void> {\n    try {\n      await Promise.all([\n        this.getPartnerCollections(),\n        this.getTokenContracts()\n      ])\n    } catch (error) {\n      log.warn('Failed to preload marketplace configuration', 'MarketplaceConfig', { error })\n    }\n  }\n\n  /**\n   * Clear configuration cache (useful for testing or forced refresh)\n   */\n  static clearCache(): void {\n    this.configCache = {}\n  }\n}\n\n// Export for backward compatibility during transition\nexport const GameDataService = MarketplaceConfigService","// Currency conversion service for converting USD to various currencies\nimport { ErrorMessageService } from './errorMessageService'\nimport { API_ENDPOINTS } from '../config/marketplaceConfig'\n\nexport interface ExchangeRates {\n  [currency: string]: number\n}\n\nexport interface CryptoRates {\n  bitcoin: { usd: number }\n  ethereum: { usd: number }\n}\n\nclass CurrencyService {\n  private exchangeRates: ExchangeRates = {}\n  private cryptoRates: CryptoRates = { bitcoin: { usd: 0 }, ethereum: { usd: 0 } }\n  private lastFetchTime: number = 0\n  private readonly CACHE_DURATION = 10 * 60 * 1000 // 10 minutes\n  private readonly EXCHANGE_API = API_ENDPOINTS.EXCHANGE_RATE_API\n  private readonly CRYPTO_API = API_ENDPOINTS.COINGECKO_API\n\n  // Fallback exchange rates (approximate)\n  private readonly FALLBACK_RATES: ExchangeRates = {\n    USD: 1,\n    EUR: 0.85,\n    DKK: 6.30,\n    AED: 3.67,\n    INR: 83.12,\n    RUB: 74.50,\n    CNY: 7.10,\n    JPY: 110.00\n  }\n\n  private readonly FALLBACK_CRYPTO: CryptoRates = {\n    bitcoin: { usd: 115000 },\n    ethereum: { usd: 4000 }\n  }\n\n  async getExchangeRates(): Promise<ExchangeRates> {\n    const now = Date.now()\n    \n    // Return cached rates if still valid\n    if (Object.keys(this.exchangeRates).length > 0 && (now - this.lastFetchTime) < this.CACHE_DURATION) {\n      return this.exchangeRates\n    }\n\n    try {\n      // Fetch fiat currency rates\n      const response = await fetch(this.EXCHANGE_API, {\n        method: 'GET',\n        headers: {\n          'Accept': 'application/json'\n        }\n      })\n\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`)\n      }\n\n      const data = await response.json()\n      \n      // Extract the rates we need\n      this.exchangeRates = {\n        USD: 1,\n        EUR: data.rates?.EUR || this.FALLBACK_RATES.EUR,\n        DKK: data.rates?.DKK || this.FALLBACK_RATES.DKK,\n        AED: data.rates?.AED || this.FALLBACK_RATES.AED,\n        INR: data.rates?.INR || this.FALLBACK_RATES.INR,\n        RUB: data.rates?.RUB || this.FALLBACK_RATES.RUB,\n        CNY: data.rates?.CNY || this.FALLBACK_RATES.CNY,\n        JPY: data.rates?.JPY || this.FALLBACK_RATES.JPY\n      }\n\n      // Fetch crypto rates\n      try {\n        const cryptoResponse = await fetch(this.CRYPTO_API, {\n          method: 'GET',\n          headers: {\n            'Accept': 'application/json'\n          }\n        })\n\n        if (cryptoResponse.ok) {\n          const cryptoData = await cryptoResponse.json()\n          this.cryptoRates = {\n            bitcoin: { usd: cryptoData.bitcoin?.usd || this.FALLBACK_CRYPTO.bitcoin.usd },\n            ethereum: { usd: cryptoData.ethereum?.usd || this.FALLBACK_CRYPTO.ethereum.usd }\n          }\n        }\n      } catch (cryptoError) {\n        ErrorMessageService.logError('CurrencyService.getCryptoRates', cryptoError)\n        this.cryptoRates = this.FALLBACK_CRYPTO\n      }\n\n      this.lastFetchTime = now\n      return this.exchangeRates\n    } catch (error) {\n      ErrorMessageService.logError('CurrencyService.getExchangeRates', error, { api: this.EXCHANGE_API })\n      \n      // Use fallback rates\n      this.exchangeRates = this.FALLBACK_RATES\n      this.cryptoRates = this.FALLBACK_CRYPTO\n      this.lastFetchTime = now\n      \n      return this.exchangeRates\n    }\n  }\n\n  async convertUSDToCurrency(usdAmount: number, targetCurrency: string): Promise<string> {\n    if (usdAmount <= 0) return '0.00'\n    \n    // Handle crypto currencies\n    if (targetCurrency === 'BTC') {\n      await this.getExchangeRates() // This also fetches crypto rates\n      const btcPrice = this.cryptoRates.bitcoin.usd\n      const btcAmount = usdAmount / btcPrice\n      return btcAmount >= 0.001 ? btcAmount.toFixed(6) : btcAmount.toExponential(2)\n    }\n    \n    if (targetCurrency === 'ETH') {\n      await this.getExchangeRates() // This also fetches crypto rates\n      const ethPrice = this.cryptoRates.ethereum.usd\n      const ethAmount = usdAmount / ethPrice\n      return ethAmount >= 0.001 ? ethAmount.toFixed(6) : ethAmount.toExponential(2)\n    }\n\n    // Handle fiat currencies\n    const rates = await this.getExchangeRates()\n    const rate = rates[targetCurrency]\n    \n    if (!rate) {\n      return '0.00'\n    }\n\n    const convertedAmount = usdAmount * rate\n    \n    // Format based on currency\n    if (targetCurrency === 'JPY') {\n      return Math.round(convertedAmount).toString() // JPY doesn't use decimals\n    }\n    \n    return convertedAmount.toFixed(2)\n  }\n\n  async convertWaxToCurrency(waxAmount: string, targetCurrency: string): Promise<string> {\n    try {\n      // First convert WAX to USD\n      const { priceService } = await import('./priceService')\n      const usdString = await priceService.convertWaxToUSDAsync(waxAmount)\n      \n      // Extract USD amount from string (remove $ and commas)\n      const usdAmount = parseFloat(usdString.replace(/[$,]/g, ''))\n      \n      if (targetCurrency === 'USD') {\n        return usdString\n      }\n      \n      // Convert USD to target currency\n      const convertedAmount = await this.convertUSDToCurrency(usdAmount, targetCurrency)\n      \n      // Format with currency symbol\n      return this.formatCurrencyAmount(convertedAmount, targetCurrency)\n    } catch (error) {\n      ErrorMessageService.logError('CurrencyService.convertWaxToCurrency', error, { waxAmount, targetCurrency })\n      return '0.00'\n    }\n  }\n\n  formatCurrencyAmount(amount: string, currency: string): string {\n    switch (currency) {\n      case 'USD':\n        return `$${amount}`\n      case 'EUR':\n        return `€${amount}`\n      case 'DKK':\n        return `${amount} kr`\n      case 'AED':\n        return `${amount} د.إ`\n      case 'INR':\n        return `₹${amount}`\n      case 'RUB':\n        return `${amount} ₽`\n      case 'CNY':\n        return `¥${amount}`\n      case 'JPY':\n        return `¥${amount}`\n      case 'BTC':\n        return `₿${amount}`\n      case 'ETH':\n        return `Ξ${amount}`\n      default:\n        return `${amount} ${currency}`\n    }\n  }\n\n  getCurrencySymbol(currency: string): string {\n    const symbols: { [key: string]: string } = {\n      USD: '$',\n      EUR: '€',\n      DKK: 'kr',\n      AED: 'د.إ',\n      INR: '₹',\n      RUB: '₽',\n      CNY: '¥',\n      JPY: '¥',\n      BTC: '₿',\n      ETH: 'Ξ'\n    }\n    return symbols[currency] || currency\n  }\n}\n\nexport const currencyService = new CurrencyService()\nexport default currencyService","// Price service for fetching WAX/USD conversion rates and WPIXAL price data\nimport { ErrorMessageService } from './errorMessageService'\nimport { formatWAXPrice, formatNumber } from '../utils/formatUtils'\nimport { currencyService } from './currencyService'\nimport { log } from './loggingService'\n\nclass PriceService {\n  private waxPriceUSD: number = 0.02\n  private wpixalPriceUSD: number = 0.00002\n  private wpixalPriceWAX: number = 0.001\n  private pxjPriceUSD: number = 0.0001\n  private lastFetchTime: number = 0\n  private readonly CACHE_DURATION = 5 * 60 * 1000 // 5 minutes\n  private readonly COINGECKO_WAX_API = 'https://api.coingecko.com/api/v3/simple/price?ids=wax&vs_currencies=usd'\n  private readonly GECKOTERMINAL_WPIXAL_API = 'https://api.geckoterminal.com/api/v2/networks/wax/pools/swap.alcor:7845'\n  private readonly GECKOTERMINAL_PXJ_POOLS = [\n    'https://api.geckoterminal.com/api/v2/networks/wax/pools/swap.alcor:1195', // PXJ/WAX\n    'https://api.geckoterminal.com/api/v2/networks/wax/pools/swap.alcor:1657', // PXJ/WUF\n    'https://api.geckoterminal.com/api/v2/networks/wax/pools/swap.alcor:6560'  // PXJ/KING\n  ]\n  private readonly FALLBACK_WAX_PRICE = 0.02 // Fallback WAX price in USD\n  private readonly FALLBACK_WPIXAL_PRICE = 0.00002 // Fallback WPIXAL price in USD\n  private readonly FALLBACK_PXJ_PRICE = 0.0001 // Fallback PXJ price in USD\n\n  /**\n   * Fetch all prices from Alcor Exchange API\n   */\n  private async fetchPrices(): Promise<void> {\n    const now = Date.now()\n    \n    // Return if cache is still valid\n    if ((now - this.lastFetchTime) < this.CACHE_DURATION && this.waxPriceUSD > 0 && this.wpixalPriceUSD > 0) {\n      return\n    }\n\n    try {\n      // Fetch WAX price from CoinGecko, WPIXAL price from GeckoTerminal, and PXJ prices from multiple pools\n      const [waxResponse, wpixalResponse, ...pxjResponses] = await Promise.all([\n        fetch(this.COINGECKO_WAX_API).catch(() => null),\n        fetch(this.GECKOTERMINAL_WPIXAL_API).catch(() => null),\n        ...this.GECKOTERMINAL_PXJ_POOLS.map(pool => fetch(pool).catch(() => null))\n      ])\n      \n      // Process WAX price\n      let waxPriceFromAPI = null\n      if (waxResponse && waxResponse.ok) {\n        try {\n          const waxData = await waxResponse.json()\n          waxPriceFromAPI = waxData.wax?.usd\n        } catch (error) {\n          log.warn('Failed to parse WAX price data:', 'PriceService.fetchPrices', { error })\n        }\n      }\n      \n      // Process WPIXAL price from GeckoTerminal\n      let wpixalPriceFromAPI = null\n      if (wpixalResponse && wpixalResponse.ok) {\n        try {\n          const wpixalData = await wpixalResponse.json()\n          // WPIXAL is the quote token in the WAXUSDC/WPIXAL pool\n          wpixalPriceFromAPI = wpixalData.data?.attributes?.quote_token_price_usd\n          if (wpixalPriceFromAPI) {\n            wpixalPriceFromAPI = parseFloat(wpixalPriceFromAPI)\n          }\n        } catch (error) {\n          log.warn('Failed to parse WPIXAL price data:', 'PriceService.fetchPrices', { error })\n        }\n      }\n      \n      // Process PXJ price from multiple pools (use the first successful one)\n       let pxjPriceFromAPI = null\n       for (const response of pxjResponses) {\n         if (response && response.ok) {\n           try {\n             const pxjData = await response.json()\n             // PXJ is the quote token in most pools (KING/PXJ, etc.)\n             const quoteTokenPrice = pxjData.data?.attributes?.quote_token_price_usd\n             if (quoteTokenPrice) {\n               pxjPriceFromAPI = parseFloat(quoteTokenPrice)\n               break // Use the first successful price\n             }\n           } catch (error) {\n             log.warn('Failed to parse PXJ price data from pool:', 'PriceService.fetchPrices', { error })\n           }\n         }\n       }\n       \n       this.waxPriceUSD = waxPriceFromAPI || this.FALLBACK_WAX_PRICE\n       this.wpixalPriceUSD = wpixalPriceFromAPI || this.FALLBACK_WPIXAL_PRICE\n       this.pxjPriceUSD = pxjPriceFromAPI || this.FALLBACK_PXJ_PRICE\n      \n      // Calculate WPIXAL price in WAX\n      if (this.waxPriceUSD > 0) {\n        this.wpixalPriceWAX = this.wpixalPriceUSD / this.waxPriceUSD\n      } else {\n        this.wpixalPriceWAX = 0.001 // Fallback ratio\n      }\n      \n      this.lastFetchTime = now\n      \n    } catch (error) {\n       ErrorMessageService.logError('PriceService.fetchPrices', error, { \n         waxApi: this.COINGECKO_WAX_API, \n         wpixalApi: this.GECKOTERMINAL_WPIXAL_API,\n         pxjPools: this.GECKOTERMINAL_PXJ_POOLS,\n         fallbackWaxPrice: this.FALLBACK_WAX_PRICE,\n         fallbackWpixalPrice: this.FALLBACK_WPIXAL_PRICE,\n         fallbackPxjPrice: this.FALLBACK_PXJ_PRICE\n       })\n      \n      // Use fallback prices\n      this.waxPriceUSD = this.FALLBACK_WAX_PRICE\n      this.wpixalPriceUSD = this.FALLBACK_WPIXAL_PRICE\n      this.pxjPriceUSD = this.FALLBACK_PXJ_PRICE\n      this.wpixalPriceWAX = this.FALLBACK_WPIXAL_PRICE / this.FALLBACK_WAX_PRICE\n      this.lastFetchTime = now\n    }\n  }\n\n  async getWaxPriceUSD(): Promise<number> {\n    await this.fetchPrices()\n    return this.waxPriceUSD\n  }\n\n  async getWpixalPriceWAX(): Promise<number> {\n    await this.fetchPrices()\n    return this.wpixalPriceWAX\n  }\n\n  async getWpixalPriceUSD(): Promise<number> {\n    await this.fetchPrices()\n    return this.wpixalPriceUSD\n  }\n\n  async getPxjPriceUSD(): Promise<number> {\n    await this.fetchPrices()\n    return this.pxjPriceUSD\n  }\n\n  convertWaxToUSD(waxAmount: string): string {\n    const amount = parseFloat(waxAmount.replace(/[^0-9.]/g, ''))\n    if (isNaN(amount) || this.waxPriceUSD <= 0) {\n      return '$0.00'\n    }\n    \n    const usdValue = amount * this.waxPriceUSD\n    return `$${formatNumber(usdValue, 2)}`\n  }\n\n  async convertWaxToUSDAsync(waxAmount: string): Promise<string> {\n    await this.getWaxPriceUSD()\n    return this.convertWaxToUSD(waxAmount)\n  }\n\n  async convertWaxToCurrencyAsync(waxAmount: string, currency: string = 'USD'): Promise<string> {\n    if (currency === 'USD') {\n      return this.convertWaxToUSDAsync(waxAmount)\n    }\n    \n    return currencyService.convertWaxToCurrency(waxAmount, currency)\n  }\n\n  /**\n   * Convert WPIXAL amount to WAX\n   */\n  async convertWpixalToWAX(wpixalAmount: string): Promise<string> {\n    try {\n      const amount = parseFloat(wpixalAmount.replace(/[^0-9.]/g, ''))\n      if (isNaN(amount)) return '0.0000 WAX'\n      \n      const wpixalPriceWAX = await this.getWpixalPriceWAX()\n      const waxValue = amount * wpixalPriceWAX\n      return formatWAXPrice(waxValue)\n    } catch (error) {\n      ErrorMessageService.logError('PriceService.convertWpixalToWAX', error, { wpixalAmount })\n      return '0.0000 WAX'\n    }\n  }\n\n  /**\n   * Convert WPIXAL amount to USD\n   */\n  async convertWpixalToUSD(wpixalAmount: string): Promise<string> {\n    try {\n      const amount = parseFloat(wpixalAmount.replace(/[^0-9.]/g, ''))\n      if (isNaN(amount)) return '$0.00'\n      \n      const wpixalPriceUSD = await this.getWpixalPriceUSD()\n      const usdValue = amount * wpixalPriceUSD\n      return `$${formatNumber(usdValue, 2)}`\n    } catch (error) {\n      ErrorMessageService.logError('PriceService.convertWpixalToUSD', error, { wpixalAmount })\n      return '$0.00'\n    }\n  }\n\n  /**\n   * Convert PXJ amount to USD\n   */\n  async convertPxjToUSD(pxjAmount: string): Promise<string> {\n    try {\n      const amount = parseFloat(pxjAmount.replace(/[^0-9.]/g, ''))\n      if (isNaN(amount)) return '$0.00'\n      \n      const pxjPriceUSD = await this.getPxjPriceUSD()\n      const usdValue = amount * pxjPriceUSD\n      return `$${formatNumber(usdValue, 6)}`\n    } catch (error) {\n      ErrorMessageService.logError('PriceService.convertPxjToUSD', error, { pxjAmount })\n      return '$0.00'\n    }\n  }\n\n  /**\n   * Convert PXJ amount to WAX\n   */\n  async convertPxjToWAX(pxjAmount: string): Promise<string> {\n    try {\n      const amount = parseFloat(pxjAmount.replace(/[^0-9.]/g, ''))\n      if (isNaN(amount)) return '0.0000 WAX'\n      \n      const pxjPriceUSD = await this.getPxjPriceUSD()\n      const waxPriceUSD = await this.getWaxPriceUSD()\n      const waxValue = (amount * pxjPriceUSD) / waxPriceUSD\n      return formatWAXPrice(waxValue)\n    } catch (error) {\n      ErrorMessageService.logError('PriceService.convertPxjToWAX', error, { pxjAmount })\n      return '0.0000 WAX'\n    }\n  }\n\n  // Helper method to get the selected currency from display settings\n  async convertWaxWithDisplaySettings(waxAmount: string): Promise<string> {\n    try {\n      // Get the selected currency from localStorage\n      const selectedCurrency = localStorage.getItem('selectedCurrency') || 'USD'\n      const showPricesInUSD = JSON.parse(localStorage.getItem('showPricesInUSD') || 'true')\n      \n      // If show prices in USD is disabled, return WAX amount\n      if (!showPricesInUSD) {\n        const amount = parseFloat(waxAmount.replace(/[^0-9.]/g, ''))\n        return formatWAXPrice(amount)\n      }\n      \n      return this.convertWaxToCurrencyAsync(waxAmount, selectedCurrency)\n    } catch (error) {\n      ErrorMessageService.logError('PriceService.convertWaxWithDisplaySettings', error, { waxAmount })\n      return this.convertWaxToUSDAsync(waxAmount)\n    }\n  }\n}\n\nexport const priceService = new PriceService()\nexport default priceService","import { logger } from './loggingService'\n\n/**\n * Centralized storage service with proper error handling and fallbacks\n */\nclass StorageService {\n  private isStorageAvailable(storage: Storage): boolean {\n    try {\n      const test = '__storage_test__'\n      storage.setItem(test, test)\n      storage.removeItem(test)\n      return true\n    } catch {\n      return false\n    }\n  }\n\n  private get isLocalStorageAvailable(): boolean {\n    return typeof window !== 'undefined' && this.isStorageAvailable(localStorage)\n  }\n\n  private get isSessionStorageAvailable(): boolean {\n    return typeof window !== 'undefined' && this.isStorageAvailable(sessionStorage)\n  }\n\n  /**\n   * Get item from storage with fallback and error handling\n   */\n  getItem(key: string, useSessionStorage = false): string | null {\n    try {\n      const storage = useSessionStorage ? sessionStorage : localStorage\n      \n      if (useSessionStorage && this.isSessionStorageAvailable) {\n        return storage.getItem(key)\n      } else if (!useSessionStorage && this.isLocalStorageAvailable) {\n        return storage.getItem(key)\n      }\n      \n      // Fallback to the other storage type\n      const fallbackStorage = useSessionStorage ? localStorage : sessionStorage\n      const isFallbackAvailable = useSessionStorage ? this.isLocalStorageAvailable : this.isSessionStorageAvailable\n      \n      if (isFallbackAvailable) {\n        logger.warn(`Primary storage unavailable, using fallback for key: ${key}`)\n        return fallbackStorage.getItem(key)\n      }\n      \n      logger.warn(`No storage available for key: ${key}`)\n      return null\n    } catch (error) {\n      logger.error('StorageService.getItem failed', 'StorageService', error as Error, { key, useSessionStorage })\n      return null\n    }\n  }\n\n  /**\n   * Set item in storage with fallback and error handling\n   */\n  setItem(key: string, value: string, useSessionStorage = false): boolean {\n    try {\n      const storage = useSessionStorage ? sessionStorage : localStorage\n      \n      if (useSessionStorage && this.isSessionStorageAvailable) {\n        storage.setItem(key, value)\n        return true\n      } else if (!useSessionStorage && this.isLocalStorageAvailable) {\n        storage.setItem(key, value)\n        return true\n      }\n      \n      // Fallback to the other storage type\n      const fallbackStorage = useSessionStorage ? localStorage : sessionStorage\n      const isFallbackAvailable = useSessionStorage ? this.isLocalStorageAvailable : this.isSessionStorageAvailable\n      \n      if (isFallbackAvailable) {\n        logger.warn(`Primary storage unavailable, using fallback for key: ${key}`)\n        fallbackStorage.setItem(key, value)\n        return true\n      }\n      \n      logger.warn(`No storage available for key: ${key}`)\n      return false\n    } catch (error) {\n      logger.error('StorageService.setItem failed', 'StorageService', error as Error, { key, useSessionStorage })\n      return false\n    }\n  }\n\n  /**\n   * Remove item from storage with error handling\n   */\n  removeItem(key: string, useSessionStorage = false): boolean {\n    try {\n      const storage = useSessionStorage ? sessionStorage : localStorage\n      \n      if (useSessionStorage && this.isSessionStorageAvailable) {\n        storage.removeItem(key)\n        return true\n      } else if (!useSessionStorage && this.isLocalStorageAvailable) {\n        storage.removeItem(key)\n        return true\n      }\n      \n      // Try to remove from both storages as fallback\n      let removed = false\n      if (this.isLocalStorageAvailable) {\n        localStorage.removeItem(key)\n        removed = true\n      }\n      if (this.isSessionStorageAvailable) {\n        sessionStorage.removeItem(key)\n        removed = true\n      }\n      \n      if (!removed) {\n        logger.warn(`No storage available to remove key: ${key}`)\n      }\n      \n      return removed\n    } catch (error) {\n      logger.error('StorageService.removeItem failed', 'StorageService', error as Error, { key, useSessionStorage })\n      return false\n    }\n  }\n\n  /**\n   * Clear all items from storage with error handling\n   */\n  clear(useSessionStorage = false): boolean {\n    try {\n      const storage = useSessionStorage ? sessionStorage : localStorage\n      \n      if (useSessionStorage && this.isSessionStorageAvailable) {\n        storage.clear()\n        return true\n      } else if (!useSessionStorage && this.isLocalStorageAvailable) {\n        storage.clear()\n        return true\n      }\n      \n      logger.warn('No storage available to clear')\n      return false\n    } catch (error) {\n      logger.error('StorageService.clear failed', 'StorageService', error as Error, { useSessionStorage })\n      return false\n    }\n  }\n\n  /**\n   * Get JSON object from storage with parsing error handling\n   */\n  getJSON<T>(key: string, defaultValue: T, useSessionStorage = false): T {\n    try {\n      const item = this.getItem(key, useSessionStorage)\n      if (item === null) {\n        return defaultValue\n      }\n      return JSON.parse(item) as T\n    } catch (error) {\n      logger.error('StorageService.getJSON failed', 'StorageService', error as Error, { key, useSessionStorage })\n      return defaultValue\n    }\n  }\n\n  /**\n   * Set JSON object in storage with stringification error handling\n   */\n  setJSON<T>(key: string, value: T, useSessionStorage = false): boolean {\n    try {\n      const jsonString = JSON.stringify(value)\n      return this.setItem(key, jsonString, useSessionStorage)\n    } catch (error) {\n      logger.error('StorageService.setJSON failed', 'StorageService', error as Error, { key, useSessionStorage })\n      return false\n    }\n  }\n\n  /**\n   * Get storage statistics\n   */\n  getStorageStats(): {\n    localStorage: { available: boolean; used: number; total: number }\n    sessionStorage: { available: boolean; used: number; total: number }\n  } {\n    const getStorageSize = (storage: Storage): { used: number; total: number } => {\n      try {\n        let used = 0\n        for (const key in storage) {\n          if (Object.prototype.hasOwnProperty.call(storage, key)) {\n            used += storage[key].length + key.length\n          }\n        }\n        \n        // Estimate total storage (usually 5-10MB for localStorage)\n        const total = 5 * 1024 * 1024 // 5MB estimate\n        return { used, total }\n      } catch {\n        return { used: 0, total: 0 }\n      }\n    }\n\n    return {\n      localStorage: {\n        available: this.isLocalStorageAvailable,\n        ...getStorageSize(this.isLocalStorageAvailable ? localStorage : {} as Storage)\n      },\n      sessionStorage: {\n        available: this.isSessionStorageAvailable,\n        ...getStorageSize(this.isSessionStorageAvailable ? sessionStorage : {} as Storage)\n      }\n    }\n  }\n\n  /**\n   * Check if storage quota is exceeded\n   */\n  isQuotaExceeded(): boolean {\n    const stats = this.getStorageStats()\n    const localStorageUsage = stats.localStorage.used / stats.localStorage.total\n    const sessionStorageUsage = stats.sessionStorage.used / stats.sessionStorage.total\n    \n    return localStorageUsage > 0.9 || sessionStorageUsage > 0.9\n  }\n\n  /**\n   * Clean up old or expired data\n   */\n  cleanup(keyPatterns: string[] = []): number {\n    let cleaned = 0\n    \n    try {\n      const storages = [\n        { storage: localStorage, available: this.isLocalStorageAvailable },\n        { storage: sessionStorage, available: this.isSessionStorageAvailable }\n      ]\n      \n      for (const { storage, available } of storages) {\n        if (!available) continue\n        \n        const keysToRemove: string[] = []\n        \n        for (let i = 0; i < storage.length; i++) {\n          const key = storage.key(i)\n          if (!key) continue\n          \n          // Remove keys matching patterns\n          for (const pattern of keyPatterns) {\n            if (key.includes(pattern)) {\n              keysToRemove.push(key)\n              break\n            }\n          }\n        }\n        \n        for (const key of keysToRemove) {\n          storage.removeItem(key)\n          cleaned++\n        }\n      }\n    } catch (error) {\n      logger.error('StorageService.cleanup failed', 'StorageService', error as Error, { keyPatterns })\n    }\n    \n    return cleaned\n  }\n}\n\nexport const storageService = new StorageService()\nexport default storageService","import type { NFTAsset, SaleData } from './api'\nimport { priceService } from './priceService'\nimport { ErrorMessageService } from './errorMessageService'\nimport { storageService } from './storageService'\n\nexport interface CartItem {\n  nft: NFTAsset\n  addedAt: number\n  isAvailable?: boolean\n  sale_id: string | null\n  selected?: boolean\n}\n\nexport interface CartTotals {\n  totalWAX: string\n  totalUSD: string\n  itemCount: number\n}\n\nclass CartService {\n  private storageKey = 'pixal-marketplace-cart'\n  private cart: CartItem[] = []\n  private listeners: Array<(cart: CartItem[]) => void> = []\n\n  constructor() {\n    this.loadCart()\n  }\n\n  // Load cart from storage with proper error handling\n  private loadCart(): void {\n    try {\n      this.cart = storageService.getJSON(this.storageKey, [])\n    } catch (error) {\n      ErrorMessageService.logError('CartService.loadCart', error)\n      this.cart = []\n    }\n  }\n\n  // Save cart to storage with proper error handling\n  private saveCart(): void {\n    try {\n      const success = storageService.setJSON(this.storageKey, this.cart)\n      if (!success) {\n        ErrorMessageService.logError('CartService.saveCart', new Error('Failed to save cart to storage'), { \n          storageKey: this.storageKey, \n          cartSize: this.cart.length \n        })\n      }\n      this.notifyListeners()\n    } catch (error) {\n      ErrorMessageService.logError('CartService.saveCart', error, { storageKey: this.storageKey, cartSize: this.cart.length })\n    }\n  }\n\n  // Add listener for cart changes\n  addListener(listener: (cart: CartItem[]) => void): void {\n    this.listeners.push(listener)\n  }\n\n  // Remove listener\n  removeListener(listener: (cart: CartItem[]) => void): void {\n    this.listeners = this.listeners.filter(l => l !== listener)\n  }\n\n  // Notify all listeners of cart changes\n  private notifyListeners(): void {\n    this.listeners.forEach(listener => listener([...this.cart]))\n  }\n\n  // Add item to cart\n  addToCart(nft: NFTAsset): boolean {\n    // Check if item already exists in cart\n    const existingIndex = this.cart.findIndex(item => item.nft.asset_id === nft.asset_id)\n    \n    if (existingIndex !== -1) {\n      // Item already in cart, don't add duplicate\n      return false\n    }\n\n    const cartItem: CartItem = {\n      nft,\n      addedAt: Date.now(),\n      isAvailable: true,\n      sale_id: nft.sale_id\n    }\n\n    this.cart.push(cartItem)\n    this.saveCart()\n    return true\n  }\n\n  // Remove item from cart\n  removeFromCart(assetId: string): boolean {\n    const initialLength = this.cart.length\n    this.cart = this.cart.filter(item => item.nft.asset_id !== assetId)\n    \n    if (this.cart.length !== initialLength) {\n      this.saveCart()\n      return true\n    }\n    return false\n  }\n\n  // Check if item is in cart\n  isInCart(assetId: string): boolean {\n    return this.cart.some(item => item.nft.asset_id === assetId)\n  }\n\n  // Get cart items\n  getCart(): CartItem[] {\n    return [...this.cart]\n  }\n\n  // Get cart count\n  getCartCount(): number {\n    return this.cart.length\n  }\n\n  // Clear entire cart\n  clearCart(): void {\n    this.cart = []\n    this.saveCart()\n  }\n\n  // Remove unavailable items from cart\n  cleanupUnavailableItems(): void {\n    const initialLength = this.cart.length\n    this.cart = this.cart.filter(item => item.isAvailable !== false)\n    \n    if (this.cart.length !== initialLength) {\n      this.saveCart()\n    }\n  }\n\n  // Calculate cart totals\n  async calculateTotals(): Promise<CartTotals> {\n    const availableItems = this.cart.filter(item => item.isAvailable !== false)\n    \n    let totalWAXValue = 0\n    \n    // Sum up all WAX prices\n    availableItems.forEach(item => {\n      if (item.nft.price) {\n        const waxAmount = parseFloat(item.nft.price.replace(' WAX', ''))\n        if (!isNaN(waxAmount)) {\n          totalWAXValue += waxAmount\n        }\n      }\n    })\n\n    const totalWAX = `${totalWAXValue.toFixed(4)} WAX`\n    const totalUSD = await priceService.convertWaxToUSDAsync(totalWAX)\n\n    return {\n      totalWAX,\n      totalUSD,\n      itemCount: availableItems.length\n    }\n  }\n\n  // Check availability of cart items using AtomicAssets API with batching\n  async checkAvailability(): Promise<void> {\n    if (this.cart.length === 0) return\n    \n    const { apiService } = await import('./api')\n    \n    try {\n      // Batch check all sales at once instead of individual requests\n      const saleIds = this.cart.map(item => item.sale_id).filter(Boolean)\n      if (saleIds.length === 0) return\n      \n      const url = `${apiService.atomicMarketAPI}/atomicmarket/v1/sales?ids=${saleIds.join(',')}&state=1&limit=${saleIds.length}`\n      const response = await apiService.fetchWithRetry(url)\n      const data = await response.json()\n      \n      // Create a set of active sale IDs for quick lookup\n      const activeSaleIds = new Set(\n        data.success && data.data ? data.data.map((sale: SaleData) => sale.sale_id) : []\n      )\n      \n      // Update availability for all items\n      for (const item of this.cart) {\n        item.isAvailable = item.sale_id ? activeSaleIds.has(item.sale_id) : false\n      }\n      \n    } catch (error) {\n      ErrorMessageService.logError('CartService.checkAvailability', error, { cartSize: this.cart.length })\n      // If batch check fails, mark all items as potentially unavailable\n      for (const item of this.cart) {\n        item.isAvailable = false\n      }\n    }\n    \n    this.saveCart()\n  }\n\n  // Toggle item selection (for multi-select functionality)\n  toggleSelection(assetId: string): void {\n    const item = this.cart.find(item => item.nft.asset_id === assetId)\n    if (item) {\n      item.selected = !item.selected\n      this.saveCart()\n    }\n  }\n\n  // Select all available items\n  selectAll(): void {\n    this.cart.forEach(item => {\n      if (item.isAvailable !== false) {\n        item.selected = true\n      }\n    })\n    this.saveCart()\n  }\n\n  // Deselect all items\n  deselectAll(): void {\n    this.cart.forEach(item => {\n      item.selected = false\n    })\n    this.saveCart()\n  }\n\n  // Get selected items\n  getSelectedItems(): CartItem[] {\n    return this.cart.filter(item => item.selected === true)\n  }\n\n  // Get selected item count\n  getSelectedCount(): number {\n    return this.cart.filter(item => item.selected === true).length\n  }\n\n  // Remove selected items from cart\n  removeSelectedItems(): void {\n    this.cart = this.cart.filter(item => item.selected !== true)\n    this.saveCart()\n  }\n\n  // Check if item is selected\n  isSelected(assetId: string): boolean {\n    const item = this.cart.find(item => item.nft.asset_id === assetId)\n    return item?.selected === true\n  }\n}\n\n// Export singleton instance\nexport const cartService = new CartService()","import React, { createContext, useState, type ReactNode } from 'react'\n\nexport interface DisplaySettings {\n  showOtherCollections: boolean\n  showWhitelistedOnly: boolean\n  enableAnimatedNFTs: boolean\n  showExplicitContent: boolean\n  blockNSFW: boolean\n  blockAI: boolean\n  showChatButton: boolean\n  autoPlayVideos: boolean\n  muteVideos: boolean\n  showVideoControls: boolean\n  showPricesInUSD: boolean\n  selectedCurrency: string\n  showRarityRankings: boolean\n}\n\nexport interface DisplaySettingsContextType {\n  settings: DisplaySettings\n  updateSetting: (key: keyof DisplaySettings, value: boolean | string) => void\n}\n\nconst DisplaySettingsContext = createContext<DisplaySettingsContextType | undefined>(undefined)\n\ninterface DisplaySettingsProviderProps {\n  children: ReactNode\n}\n\nconst DisplaySettingsProvider: React.FC<DisplaySettingsProviderProps> = ({ children }) => {\n  const [settings, setSettings] = useState<DisplaySettings>(() => {\n    // Initialize from localStorage\n    return {\n      showOtherCollections: JSON.parse(localStorage.getItem('showOtherCollections') || 'true'),\n      showWhitelistedOnly: JSON.parse(localStorage.getItem('showWhitelistedOnly') || 'true'),\n      enableAnimatedNFTs: JSON.parse(localStorage.getItem('enableAnimatedNFTs') || 'true'),\n      showExplicitContent: JSON.parse(localStorage.getItem('showExplicitContent') || 'false'),\n      blockNSFW: JSON.parse(localStorage.getItem('blockNSFW') || 'false'),\n      blockAI: JSON.parse(localStorage.getItem('blockAI') || 'false'),\n      showChatButton: JSON.parse(localStorage.getItem('showChatButton') || 'true'),\n      autoPlayVideos: JSON.parse(localStorage.getItem('autoPlayVideos') || 'false'),\n      muteVideos: JSON.parse(localStorage.getItem('muteVideos') || 'true'),\n      showVideoControls: JSON.parse(localStorage.getItem('showVideoControls') || 'true'),\n      showPricesInUSD: JSON.parse(localStorage.getItem('showPricesInUSD') || 'true'),\n      selectedCurrency: localStorage.getItem('selectedCurrency') || 'USD',\n      showRarityRankings: JSON.parse(localStorage.getItem('showRarityRankings') || 'true')\n    }\n  })\n\n  const updateSetting = (key: keyof DisplaySettings, value: boolean | string) => {\n    setSettings(prev => {\n      const newSettings = { ...prev, [key]: value }\n      // Persist to localStorage\n      if (typeof value === 'string') {\n        localStorage.setItem(key, value)\n      } else {\n        localStorage.setItem(key, JSON.stringify(value))\n      }\n      return newSettings\n    })\n  }\n\n  const contextValue: DisplaySettingsContextType = {\n    settings,\n    updateSetting\n  }\n\n  return (\n    <DisplaySettingsContext.Provider value={contextValue}>\n      {children}\n    </DisplaySettingsContext.Provider>\n  )\n}\n\n// Default export for better HMR compatibility\nexport default DisplaySettingsProvider\nexport { DisplaySettingsProvider, DisplaySettingsContext }","import { useContext } from 'react'\nimport { DisplaySettingsContext, type DisplaySettingsContextType } from '../contexts/DisplaySettingsContext'\n\nexport const useDisplaySettings = (): DisplaySettingsContextType => {\n  const context = useContext(DisplaySettingsContext)\n  if (context === undefined) {\n    throw new Error('useDisplaySettings must be used within a DisplaySettingsProvider')\n  }\n  return context\n}","// Comprehensive monitoring and analytics service\nimport { log } from './loggingService'\n\ninterface PerformanceMetric {\n  name: string\n  value: number\n  timestamp: number\n  context?: Record<string, unknown>\n}\n\ninterface UserEvent {\n  event: string\n  properties: Record<string, unknown>\n  timestamp: number\n  userId?: string\n  sessionId: string\n}\n\ninterface ErrorReport {\n  error: Error\n  context: string\n  additionalInfo?: Record<string, unknown>\n  timestamp: number\n  userId?: string\n  sessionId: string\n  userAgent: string\n  url: string\n  stackTrace?: string\n}\n\ninterface APIMetrics {\n  endpoint: string\n  method: string\n  duration: number\n  status: number\n  timestamp: number\n  success: boolean\n  retryCount?: number\n}\n\ninterface UserSession {\n  sessionId: string\n  startTime: number\n  lastActivity: number\n  pageViews: number\n  events: UserEvent[]\n  userId?: string\n}\n\nclass MonitoringService {\n  private sessionId: string\n  private userId?: string\n  private session: UserSession\n  private performanceMetrics: PerformanceMetric[] = []\n  private apiMetrics: APIMetrics[] = []\n  private errorReports: ErrorReport[] = []\n  private isEnabled: boolean = true\n  private batchSize: number = 50\n  private flushInterval: number = 30000 // 30 seconds\n  private maxStoredMetrics: number = 1000\n  private pendingBatches: Array<{\n    type: 'performance' | 'api' | 'events' | 'errors'\n    data: (PerformanceMetric | APIMetrics | UserEvent | ErrorReport)[]\n    timestamp: number\n  }> = []\n  private batchTimeout: ReturnType<typeof setTimeout> | null = null\n\n  constructor() {\n    this.sessionId = this.generateSessionId()\n    this.session = {\n      sessionId: this.sessionId,\n      startTime: Date.now(),\n      lastActivity: Date.now(),\n      pageViews: 0,\n      events: []\n    }\n\n    this.initializeMonitoring()\n    this.startPerformanceObserver()\n    this.setupErrorHandlers()\n    this.startFlushTimer()\n  }\n\n  private generateSessionId(): string {\n    return `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`\n  }\n\n  private initializeMonitoring(): void {\n    // Track page load performance\n    if (typeof window !== 'undefined' && window.performance) {\n      window.addEventListener('load', () => {\n        setTimeout(() => {\n          this.trackPageLoadPerformance()\n        }, 0)\n      })\n\n      // Track page visibility changes\n      document.addEventListener('visibilitychange', () => {\n        this.trackEvent('page_visibility_change', {\n          hidden: document.hidden\n        })\n      })\n\n      // Track user interactions\n      this.setupUserInteractionTracking()\n    }\n  }\n\n  private startPerformanceObserver(): void {\n    if (typeof window !== 'undefined' && 'PerformanceObserver' in window) {\n      try {\n        // Observe navigation timing\n        const navObserver = new PerformanceObserver((list) => {\n          for (const entry of list.getEntries()) {\n            if (entry.entryType === 'navigation') {\n              this.trackNavigationTiming(entry as PerformanceNavigationTiming)\n            }\n          }\n        })\n        navObserver.observe({ entryTypes: ['navigation'] })\n\n        // Observe resource timing\n        const resourceObserver = new PerformanceObserver((list) => {\n          for (const entry of list.getEntries()) {\n            if (entry.entryType === 'resource') {\n              this.trackResourceTiming(entry as PerformanceResourceTiming)\n            }\n          }\n        })\n        resourceObserver.observe({ entryTypes: ['resource'] })\n\n        // Observe largest contentful paint\n        const lcpObserver = new PerformanceObserver((list) => {\n          for (const entry of list.getEntries()) {\n            this.trackPerformanceMetric('largest_contentful_paint', entry.startTime)\n          }\n        })\n        lcpObserver.observe({ entryTypes: ['largest-contentful-paint'] })\n\n        // Observe first input delay\n        const fidObserver = new PerformanceObserver((list) => {\n          for (const entry of list.getEntries()) {\n            this.trackPerformanceMetric('first_input_delay', (entry as PerformanceEventTiming).processingStart - entry.startTime)\n          }\n        })\n        fidObserver.observe({ entryTypes: ['first-input'] })\n      } catch (error) {\n        log.warn('Performance Observer not fully supported', 'MonitoringService.startPerformanceObserver', { error })\n      }\n    }\n  }\n\n  private setupErrorHandlers(): void {\n    if (typeof window !== 'undefined') {\n      // Global error handler\n      window.addEventListener('error', (event) => {\n        this.reportError(event.error || new Error(event.message), 'global_error', {\n          filename: event.filename,\n          lineno: event.lineno,\n          colno: event.colno\n        })\n      })\n\n      // Unhandled promise rejection handler\n      window.addEventListener('unhandledrejection', (event) => {\n        this.reportError(\n          event.reason instanceof Error ? event.reason : new Error(String(event.reason)),\n          'unhandled_promise_rejection'\n        )\n      })\n    }\n  }\n\n  private setupUserInteractionTracking(): void {\n    if (typeof window !== 'undefined') {\n      // Track clicks on important elements\n      document.addEventListener('click', (event) => {\n        const target = event.target as HTMLElement\n        if (target.matches('button, a, [role=\"button\"], .clickable')) {\n          this.trackEvent('user_click', {\n            element: target.tagName.toLowerCase(),\n            className: target.className,\n            id: target.id,\n            text: target.textContent?.slice(0, 50)\n          })\n        }\n      })\n\n      // Track form submissions\n      document.addEventListener('submit', (event) => {\n        const form = event.target as HTMLFormElement\n        this.trackEvent('form_submit', {\n          formId: form.id,\n          formClass: form.className,\n          action: form.action\n        })\n      })\n    }\n  }\n\n  private startFlushTimer(): void {\n    setInterval(() => {\n      this.flushMetrics()\n    }, this.flushInterval)\n  }\n\n  // Public API methods\n  setUserId(userId: string): void {\n    this.userId = userId\n    this.session.userId = userId\n  }\n\n  trackEvent(event: string, properties: Record<string, unknown> = {}): void {\n    if (!this.isEnabled) return\n\n    const userEvent: UserEvent = {\n      event,\n      properties,\n      timestamp: Date.now(),\n      userId: this.userId,\n      sessionId: this.sessionId\n    }\n\n    this.session.events.push(userEvent)\n    this.session.lastActivity = Date.now()\n    \n    // Add to batch for processing\n    this.addToBatch('events', userEvent)\n\n    // Limit stored events to prevent memory issues\n    if (this.session.events.length > this.maxStoredMetrics) {\n      this.session.events = this.session.events.slice(-this.maxStoredMetrics / 2)\n    }\n  }\n\n  trackPerformanceMetric(name: string, value: number, context?: Record<string, unknown>): void {\n    if (!this.isEnabled) return\n\n    const metric: PerformanceMetric = {\n      name,\n      value,\n      timestamp: Date.now(),\n      context\n    }\n\n    this.performanceMetrics.push(metric)\n    \n    // Add to batch for processing\n    this.addToBatch('performance', metric)\n\n    // Limit stored metrics\n    if (this.performanceMetrics.length > this.maxStoredMetrics) {\n      this.performanceMetrics = this.performanceMetrics.slice(-this.maxStoredMetrics / 2)\n    }\n  }\n\n  trackAPICall(endpoint: string, method: string, duration: number, status: number, success: boolean, retryCount?: number): void {\n    if (!this.isEnabled) return\n\n    const apiMetric: APIMetrics = {\n      endpoint,\n      method,\n      duration,\n      status,\n      timestamp: Date.now(),\n      success,\n      retryCount\n    }\n\n    this.apiMetrics.push(apiMetric)\n    \n    // Add to batch for processing\n    this.addToBatch('api', apiMetric)\n\n    // Track slow API calls as performance metrics\n    if (duration > 5000) { // 5 seconds\n      this.trackPerformanceMetric('slow_api_call', duration, {\n        endpoint,\n        method,\n        status\n      })\n    }\n\n    // Limit stored metrics\n    if (this.apiMetrics.length > this.maxStoredMetrics) {\n      this.apiMetrics = this.apiMetrics.slice(-this.maxStoredMetrics / 2)\n    }\n  }\n\n  reportError(error: Error, context: string, additionalInfo?: Record<string, unknown>): void {\n    if (!this.isEnabled) return\n\n    // Use centralized logging service\n    log.error(`${context}: ${error.message}`, 'monitoringService.reportError', error, { ...additionalInfo })\n\n    const errorReport: ErrorReport = {\n      error,\n      context,\n      additionalInfo,\n      timestamp: Date.now(),\n      userId: this.userId,\n      sessionId: this.sessionId,\n      userAgent: navigator.userAgent,\n      url: window.location.href,\n      stackTrace: error.stack\n    }\n\n    this.errorReports.push(errorReport)\n\n    // Track error as event\n    this.trackEvent('error_occurred', {\n      context,\n      errorName: error.name,\n      errorMessage: error.message,\n      ...additionalInfo\n    })\n\n    // Limit stored errors\n    if (this.errorReports.length > this.maxStoredMetrics) {\n      this.errorReports = this.errorReports.slice(-this.maxStoredMetrics / 2)\n    }\n  }\n\n  // Performance tracking methods\n  private trackPageLoadPerformance(): void {\n    if (!window.performance || !window.performance.timing) return\n\n    const timing = window.performance.timing\n    const navigation = window.performance.navigation\n\n    // Calculate key metrics\n    const pageLoadTime = timing.loadEventEnd - timing.navigationStart\n    const domContentLoadedTime = timing.domContentLoadedEventEnd - timing.navigationStart\n    const firstByteTime = timing.responseStart - timing.navigationStart\n    const domInteractiveTime = timing.domInteractive - timing.navigationStart\n\n    this.trackPerformanceMetric('page_load_time', pageLoadTime)\n    this.trackPerformanceMetric('dom_content_loaded_time', domContentLoadedTime)\n    this.trackPerformanceMetric('first_byte_time', firstByteTime)\n    this.trackPerformanceMetric('dom_interactive_time', domInteractiveTime)\n\n    this.trackEvent('page_load', {\n      pageLoadTime,\n      domContentLoadedTime,\n      firstByteTime,\n      domInteractiveTime,\n      navigationType: navigation.type,\n      redirectCount: navigation.redirectCount\n    })\n  }\n\n  private trackNavigationTiming(entry: PerformanceNavigationTiming): void {\n    this.trackPerformanceMetric('dns_lookup_time', entry.domainLookupEnd - entry.domainLookupStart)\n    this.trackPerformanceMetric('tcp_connect_time', entry.connectEnd - entry.connectStart)\n    this.trackPerformanceMetric('request_response_time', entry.responseEnd - entry.requestStart)\n    this.trackPerformanceMetric('dom_processing_time', entry.domComplete - entry.domContentLoadedEventStart)\n  }\n\n  private trackResourceTiming(entry: PerformanceResourceTiming): void {\n    // Only track important resources to avoid noise\n    if (entry.name.includes('.js') || entry.name.includes('.css') || entry.name.includes('api')) {\n      this.trackPerformanceMetric('resource_load_time', entry.duration, {\n        resource: entry.name,\n        type: entry.initiatorType,\n        size: entry.transferSize\n      })\n    }\n  }\n\n  // Analytics and reporting methods\n  getSessionSummary(): UserSession {\n    return {\n      ...this.session,\n      events: [...this.session.events]\n    }\n  }\n\n  getPerformanceMetrics(): PerformanceMetric[] {\n    return [...this.performanceMetrics]\n  }\n\n  getAPIMetrics(): APIMetrics[] {\n    return [...this.apiMetrics]\n  }\n\n  getErrorReports(): ErrorReport[] {\n    return [...this.errorReports]\n  }\n\n  // Data export and external service integration\n  private async flushMetrics(): Promise<void> {\n    if (!this.isEnabled) return\n\n    const data = {\n      session: this.getSessionSummary(),\n      performance: this.getPerformanceMetrics(),\n      api: this.getAPIMetrics(),\n      errors: this.getErrorReports(),\n      timestamp: Date.now()\n    }\n\n    // In a real application, send to analytics service\n    // await this.sendToAnalyticsService(data)\n    \n    // For now, store in localStorage for debugging\n    try {\n      const existingData = JSON.parse(localStorage.getItem('monitoring_data') || '[]')\n      existingData.push(data)\n      \n      // Keep only last 10 flushes to prevent storage overflow\n      const recentData = existingData.slice(-10)\n      localStorage.setItem('monitoring_data', JSON.stringify(recentData))\n    } catch (error) {\n      log.warn('Failed to store monitoring data', 'MonitoringService.flushMetrics', { error })\n    }\n\n    // Clear metrics after flushing\n    this.performanceMetrics = []\n    this.apiMetrics = []\n    this.errorReports = []\n    this.session.events = []\n  }\n\n  // Configuration methods\n  enable(): void {\n    this.isEnabled = true\n  }\n\n  disable(): void {\n    this.isEnabled = false\n  }\n\n  isMonitoringEnabled(): boolean {\n    return this.isEnabled\n  }\n\n  setBatchSize(size: number): void {\n    this.batchSize = Math.max(10, Math.min(size, 200)) // Between 10 and 200\n  }\n  \n  /**\n   * Add data to batch for processing\n   */\n  private addToBatch(type: 'performance' | 'api' | 'events' | 'errors', data: PerformanceMetric | APIMetrics | UserEvent | ErrorReport): void {\n    if (!this.isEnabled) return\n    \n    let batch = this.pendingBatches.find(b => b.type === type)\n    \n    if (!batch) {\n      batch = {\n        type,\n        data: [],\n        timestamp: Date.now()\n      }\n      this.pendingBatches.push(batch)\n    }\n    \n    batch.data.push(data)\n    \n    // Process batch if it reaches the batch size\n    if (batch.data.length >= this.batchSize) {\n      this.processBatch(batch)\n      this.pendingBatches = this.pendingBatches.filter(b => b !== batch)\n    }\n    \n    // Set timeout to process remaining batches\n    this.scheduleBatchProcessing()\n  }\n  \n  /**\n   * Schedule batch processing\n   */\n  private scheduleBatchProcessing(): void {\n    if (this.batchTimeout) {\n      clearTimeout(this.batchTimeout)\n    }\n    \n    this.batchTimeout = setTimeout(() => {\n      this.processAllPendingBatches()\n    }, 5000) // Process remaining batches after 5 seconds\n  }\n  \n  /**\n   * Process a single batch\n   */\n  private async processBatch(batch: { type: string; data: (PerformanceMetric | APIMetrics | UserEvent | ErrorReport)[]; timestamp: number }): Promise<void> {\n    try {\n      // In a real implementation, send to analytics service\n      // await this.sendBatchToAnalyticsService(batch)\n      \n      // For now, store in localStorage with batch info\n      const batchData = {\n        ...batch,\n        batchId: this.generateBatchId(),\n        processedAt: Date.now()\n      }\n      \n      const existingBatches = JSON.parse(localStorage.getItem('monitoring_batches') || '[]')\n      existingBatches.push(batchData)\n      \n      // Keep only last 20 batches to prevent storage overflow\n      const recentBatches = existingBatches.slice(-20)\n      localStorage.setItem('monitoring_batches', JSON.stringify(recentBatches))\n    } catch (error) {\n      console.warn('Failed to process batch:', error)\n    }\n  }\n  \n  /**\n   * Process all pending batches\n   */\n  private async processAllPendingBatches(): Promise<void> {\n    const batches = [...this.pendingBatches]\n    this.pendingBatches = []\n    \n    for (const batch of batches) {\n      await this.processBatch(batch)\n    }\n    \n    if (this.batchTimeout) {\n      clearTimeout(this.batchTimeout)\n      this.batchTimeout = null\n    }\n  }\n  \n  /**\n   * Generate unique batch ID\n   */\n  private generateBatchId(): string {\n    return `batch_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`\n  }\n\n  setFlushInterval(interval: number): void {\n    this.flushInterval = Math.max(5000, Math.min(interval, 300000)) // 5s to 5min\n  }\n\n  // Utility methods for external service integration\n  async exportData(): Promise<string> {\n    const data = {\n      session: this.getSessionSummary(),\n      performance: this.getPerformanceMetrics(),\n      api: this.getAPIMetrics(),\n      errors: this.getErrorReports()\n    }\n    return JSON.stringify(data, null, 2)\n  }\n\n  clearAllData(): void {\n    this.performanceMetrics = []\n    this.apiMetrics = []\n    this.errorReports = []\n    this.session.events = []\n    localStorage.removeItem('monitoring_data')\n  }\n}\n\n// Export singleton instance\nexport const monitoringService = new MonitoringService()\n\n// Export types for external use\nexport type {\n  PerformanceMetric,\n  UserEvent,\n  ErrorReport,\n  APIMetrics,\n  UserSession\n}","interface CacheEntry<T> {\n  data: T;\n  timestamp: number;\n  ttl: number; // Time to live in milliseconds\n}\n\ninterface CacheConfig {\n  defaultTTL: number;\n  maxSize: number;\n  cleanupInterval: number;\n}\n\nclass CacheService {\n  private cache = new Map<string, CacheEntry<unknown>>();\n  private config: CacheConfig;\n  private cleanupTimer: NodeJS.Timeout | null = null;\n\n  constructor(config: Partial<CacheConfig> = {}) {\n    this.config = {\n      defaultTTL: 5 * 60 * 1000, // 5 minutes\n      maxSize: 1000,\n      cleanupInterval: 60 * 1000, // 1 minute\n      ...config\n    };\n\n    this.startCleanup();\n  }\n\n  private startCleanup(): void {\n    this.cleanupTimer = setInterval(() => {\n      this.cleanup();\n    }, this.config.cleanupInterval);\n  }\n\n  private cleanup(): void {\n    const now = Date.now();\n    const keysToDelete: string[] = [];\n\n    for (const [key, entry] of this.cache.entries()) {\n      if (now - entry.timestamp > entry.ttl) {\n        keysToDelete.push(key);\n      }\n    }\n\n    keysToDelete.forEach(key => this.cache.delete(key));\n\n    // If cache is still too large, remove oldest entries\n    if (this.cache.size > this.config.maxSize) {\n      const entries = Array.from(this.cache.entries())\n        .sort(([, a], [, b]) => a.timestamp - b.timestamp);\n      \n      const toRemove = entries.slice(0, this.cache.size - this.config.maxSize);\n      toRemove.forEach(([key]) => this.cache.delete(key));\n    }\n  }\n\n  set<T>(key: string, data: T, ttl?: number): void {\n    const entry: CacheEntry<T> = {\n      data,\n      timestamp: Date.now(),\n      ttl: ttl || this.config.defaultTTL\n    };\n\n    this.cache.set(key, entry);\n  }\n\n  get<T>(key: string): T | null {\n    const entry = this.cache.get(key);\n    \n    if (!entry) {\n      return null;\n    }\n\n    const now = Date.now();\n    if (now - entry.timestamp > entry.ttl) {\n      this.cache.delete(key);\n      return null;\n    }\n\n    return entry.data as T;\n  }\n\n  has(key: string): boolean {\n    const entry = this.cache.get(key);\n    if (!entry) return false;\n\n    const now = Date.now();\n    if (now - entry.timestamp > entry.ttl) {\n      this.cache.delete(key);\n      return false;\n    }\n\n    return true;\n  }\n\n  delete(key: string): boolean {\n    return this.cache.delete(key);\n  }\n\n  clear(): void {\n    this.cache.clear();\n  }\n\n  // Cache with fetch pattern\n  async getOrFetch<T>(\n    key: string,\n    fetchFn: () => Promise<T>,\n    ttl?: number\n  ): Promise<T> {\n    const cached = this.get<T>(key);\n    if (cached !== null) {\n      return cached;\n    }\n\n    const data = await fetchFn();\n    this.set(key, data, ttl);\n    return data;\n  }\n\n  // Batch operations\n  setMany<T>(entries: Array<{ key: string; data: T; ttl?: number }>): void {\n    entries.forEach(({ key, data, ttl }) => {\n      this.set(key, data, ttl);\n    });\n  }\n\n  getMany<T>(keys: string[]): Array<{ key: string; data: T | null }> {\n    return keys.map(key => ({\n      key,\n      data: this.get<T>(key)\n    }));\n  }\n\n  // Statistics\n  getStats() {\n    const now = Date.now();\n    let validEntries = 0;\n    let expiredEntries = 0;\n\n    for (const entry of this.cache.values()) {\n      if (now - entry.timestamp > entry.ttl) {\n        expiredEntries++;\n      } else {\n        validEntries++;\n      }\n    }\n\n    return {\n      totalEntries: this.cache.size,\n      validEntries,\n      expiredEntries,\n      hitRate: validEntries / (validEntries + expiredEntries) || 0\n    };\n  }\n\n  destroy(): void {\n    if (this.cleanupTimer) {\n      clearInterval(this.cleanupTimer);\n      this.cleanupTimer = null;\n    }\n    this.clear();\n  }\n}\n\n// Create singleton instance\nexport const cacheService = new CacheService({\n  defaultTTL: 5 * 60 * 1000, // 5 minutes for general data\n  maxSize: 1000,\n  cleanupInterval: 60 * 1000\n});\n\n// Specialized cache instances for different data types\nexport const assetCache = new CacheService({\n  defaultTTL: 10 * 60 * 1000, // 10 minutes for asset data\n  maxSize: 500,\n  cleanupInterval: 2 * 60 * 1000\n});\n\nexport const collectionCache = new CacheService({\n  defaultTTL: 30 * 60 * 1000, // 30 minutes for collection data\n  maxSize: 200,\n  cleanupInterval: 5 * 60 * 1000\n});\n\nexport const userCache = new CacheService({\n  defaultTTL: 2 * 60 * 1000, // 2 minutes for user data\n  maxSize: 100,\n  cleanupInterval: 30 * 1000\n});\n\nexport default cacheService;","// Optimized API Endpoint Management Service\n// Consolidates endpoint configuration and health monitoring\n\nexport interface EndpointConfig {\n  url: string\n  priority: number\n  healthStatus: 'healthy' | 'degraded' | 'unhealthy'\n  lastHealthCheck: number\n  consecutiveFailures: number\n  averageResponseTime: number\n  maxRetries: number\n}\n\nexport interface EndpointGroup {\n  name: string\n  endpoints: EndpointConfig[]\n  currentIndex: number\n  fallbackStrategy: 'round-robin' | 'priority' | 'fastest'\n  healthCheckInterval: number\n}\n\nclass ApiEndpointManager {\n  private endpointGroups: Map<string, EndpointGroup> = new Map()\n  private readonly HEALTH_CHECK_TIMEOUT = 5000 // 5 seconds\n  private readonly MAX_CONSECUTIVE_FAILURES = 3\n  private readonly HEALTH_CHECK_INTERVAL = 300000 // 5 minutes\n  private healthCheckTimers: Map<string, NodeJS.Timeout> = new Map()\n\n  constructor() {\n    this.initializeEndpointGroups()\n    this.startHealthChecks()\n  }\n\n  private initializeEndpointGroups(): void {\n    // Atomic Assets/Market endpoints\n    this.endpointGroups.set('atomic', {\n      name: 'atomic',\n      currentIndex: 0,\n      fallbackStrategy: 'priority',\n      healthCheckInterval: this.HEALTH_CHECK_INTERVAL,\n      endpoints: [\n        {\n          url: 'https://atomic.wax.eosrio.io',\n          priority: 1,\n          healthStatus: 'healthy',\n          lastHealthCheck: 0,\n          consecutiveFailures: 0,\n          averageResponseTime: 0,\n          maxRetries: 3\n        },\n        {\n          url: 'https://wax-atomic.alcor.exchange',\n          priority: 2,\n          healthStatus: 'healthy',\n          lastHealthCheck: 0,\n          consecutiveFailures: 0,\n          averageResponseTime: 0,\n          maxRetries: 3\n        },\n        {\n          url: 'https://atomic-wax-mainnet.wecan.dev',\n          priority: 3,\n          healthStatus: 'healthy',\n          lastHealthCheck: 0,\n          consecutiveFailures: 0,\n          averageResponseTime: 0,\n          maxRetries: 3\n        },\n        {\n          url: 'https://wax.eosusa.io',\n          priority: 4,\n          healthStatus: 'healthy',\n          lastHealthCheck: 0,\n          consecutiveFailures: 0,\n          averageResponseTime: 0,\n          maxRetries: 3\n        }\n      ]\n    })\n\n    // WAX Chain endpoints\n    this.endpointGroups.set('waxChain', {\n      name: 'waxChain',\n      currentIndex: 0,\n      fallbackStrategy: 'priority',\n      healthCheckInterval: this.HEALTH_CHECK_INTERVAL,\n      endpoints: [\n        {\n          url: 'https://wax.eosphere.io',\n          priority: 1,\n          healthStatus: 'healthy',\n          lastHealthCheck: 0,\n          consecutiveFailures: 0,\n          averageResponseTime: 0,\n          maxRetries: 3\n        },\n        {\n          url: 'https://wax.eosrio.io',\n          priority: 2,\n          healthStatus: 'healthy',\n          lastHealthCheck: 0,\n          consecutiveFailures: 0,\n          averageResponseTime: 0,\n          maxRetries: 3\n        },\n        {\n          url: 'https://api.wax.alohaeos.com',\n          priority: 3,\n          healthStatus: 'healthy',\n          lastHealthCheck: 0,\n          consecutiveFailures: 0,\n          averageResponseTime: 0,\n          maxRetries: 3\n        }\n      ]\n    })\n\n    // Hyperion endpoints\n    this.endpointGroups.set('hyperion', {\n      name: 'hyperion',\n      currentIndex: 0,\n      fallbackStrategy: 'fastest',\n      healthCheckInterval: this.HEALTH_CHECK_INTERVAL,\n      endpoints: [\n        {\n          url: 'https://wax.eosrio.io',\n          priority: 1,\n          healthStatus: 'healthy',\n          lastHealthCheck: 0,\n          consecutiveFailures: 0,\n          averageResponseTime: 0,\n          maxRetries: 2\n        },\n        {\n          url: 'https://api.wax.alohaeos.com',\n          priority: 2,\n          healthStatus: 'healthy',\n          lastHealthCheck: 0,\n          consecutiveFailures: 0,\n          averageResponseTime: 0,\n          maxRetries: 2\n        }\n      ]\n    })\n  }\n\n  /**\n   * Get the best available endpoint for a group\n   */\n  getBestEndpoint(groupName: string): string | null {\n    const group = this.endpointGroups.get(groupName)\n    if (!group) return null\n\n    const healthyEndpoints = group.endpoints.filter(ep => ep.healthStatus === 'healthy')\n    \n    if (healthyEndpoints.length === 0) {\n      // Fallback to degraded endpoints if no healthy ones\n      const degradedEndpoints = group.endpoints.filter(ep => ep.healthStatus === 'degraded')\n      if (degradedEndpoints.length > 0) {\n        return this.selectEndpoint(degradedEndpoints, group.fallbackStrategy)\n      }\n      // Last resort: use any endpoint\n      return group.endpoints[0]?.url || null\n    }\n\n    return this.selectEndpoint(healthyEndpoints, group.fallbackStrategy)\n  }\n\n  private selectEndpoint(endpoints: EndpointConfig[], strategy: string): string {\n    switch (strategy) {\n      case 'priority':\n        return endpoints.sort((a, b) => a.priority - b.priority)[0].url\n      case 'fastest':\n        return endpoints.sort((a, b) => a.averageResponseTime - b.averageResponseTime)[0].url\n      case 'round-robin':\n      default:\n        // Simple round-robin for now\n        return endpoints[Math.floor(Math.random() * endpoints.length)].url\n    }\n  }\n\n  /**\n   * Report endpoint failure to update health status\n   */\n  reportFailure(groupName: string, endpointUrl: string): void {\n    const group = this.endpointGroups.get(groupName)\n    if (!group) return\n\n    const endpoint = group.endpoints.find(ep => ep.url === endpointUrl)\n    if (!endpoint) return\n\n    endpoint.consecutiveFailures++\n    \n    if (endpoint.consecutiveFailures >= this.MAX_CONSECUTIVE_FAILURES) {\n      endpoint.healthStatus = 'unhealthy'\n    } else if (endpoint.consecutiveFailures >= 1) {\n      endpoint.healthStatus = 'degraded'\n    }\n  }\n\n  /**\n   * Report successful endpoint response\n   */\n  reportSuccess(groupName: string, endpointUrl: string, responseTime: number): void {\n    const group = this.endpointGroups.get(groupName)\n    if (!group) return\n\n    const endpoint = group.endpoints.find(ep => ep.url === endpointUrl)\n    if (!endpoint) return\n\n    endpoint.consecutiveFailures = 0\n    endpoint.healthStatus = 'healthy'\n    \n    // Update average response time (simple moving average)\n    if (endpoint.averageResponseTime === 0) {\n      endpoint.averageResponseTime = responseTime\n    } else {\n      endpoint.averageResponseTime = (endpoint.averageResponseTime * 0.8) + (responseTime * 0.2)\n    }\n  }\n\n  /**\n   * Get all endpoints for a group (for backward compatibility)\n   */\n  getEndpoints(groupName: string): string[] {\n    const group = this.endpointGroups.get(groupName)\n    return group ? group.endpoints.map(ep => ep.url) : []\n  }\n\n  /**\n   * Get current endpoint index for a group\n   */\n  getCurrentIndex(groupName: string): number {\n    const group = this.endpointGroups.get(groupName)\n    return group ? group.currentIndex : 0\n  }\n\n  /**\n   * Set current endpoint index for a group\n   */\n  setCurrentIndex(groupName: string, index: number): void {\n    const group = this.endpointGroups.get(groupName)\n    if (group && index >= 0 && index < group.endpoints.length) {\n      group.currentIndex = index\n    }\n  }\n\n  /**\n   * Start periodic health checks\n   */\n  private startHealthChecks(): void {\n    for (const [groupName, group] of this.endpointGroups) {\n      const timer = setInterval(() => {\n        this.performHealthCheck(groupName)\n      }, group.healthCheckInterval)\n      \n      this.healthCheckTimers.set(groupName, timer)\n    }\n  }\n\n  /**\n   * Perform health check for a group\n   */\n  private async performHealthCheck(groupName: string): Promise<void> {\n    const group = this.endpointGroups.get(groupName)\n    if (!group) return\n\n    const healthCheckPromises = group.endpoints.map(async (endpoint) => {\n      try {\n        const startTime = Date.now()\n        const controller = new AbortController()\n        const timeoutId = setTimeout(() => controller.abort(), this.HEALTH_CHECK_TIMEOUT)\n\n        const response = await fetch(`${endpoint.url}/health`, {\n          method: 'GET',\n          signal: controller.signal,\n          headers: { 'Accept': 'application/json' }\n        })\n\n        clearTimeout(timeoutId)\n        const responseTime = Date.now() - startTime\n        endpoint.lastHealthCheck = Date.now()\n\n        if (response.ok) {\n          this.reportSuccess(groupName, endpoint.url, responseTime)\n        } else {\n          this.reportFailure(groupName, endpoint.url)\n        }\n      } catch {\n        endpoint.lastHealthCheck = Date.now()\n        this.reportFailure(groupName, endpoint.url)\n      }\n    })\n\n    await Promise.allSettled(healthCheckPromises)\n  }\n\n  /**\n   * Get health status for all endpoint groups\n   */\n  getHealthStatus(): Record<string, { healthy: number; degraded: number; unhealthy: number }> {\n    const status: Record<string, { healthy: number; degraded: number; unhealthy: number }> = {}\n    \n    for (const [groupName, group] of this.endpointGroups) {\n      status[groupName] = {\n        healthy: group.endpoints.filter(ep => ep.healthStatus === 'healthy').length,\n        degraded: group.endpoints.filter(ep => ep.healthStatus === 'degraded').length,\n        unhealthy: group.endpoints.filter(ep => ep.healthStatus === 'unhealthy').length\n      }\n    }\n    \n    return status\n  }\n\n  /**\n   * Cleanup timers on service destruction\n   */\n  destroy(): void {\n    for (const timer of this.healthCheckTimers.values()) {\n      clearInterval(timer)\n    }\n    this.healthCheckTimers.clear()\n  }\n}\n\n// Export singleton instance\nexport const apiEndpointManager = new ApiEndpointManager()\nexport default apiEndpointManager","// API service for AtomicMarket integration\r\n// NOTE: wax.api.atomicassets.io is a dead domain \r\nimport { ErrorMessageService } from './errorMessageService'\r\nimport { monitoringService } from './monitoringService'\r\nimport { logger } from './loggingService'\r\nimport { assetCache, collectionCache, userCache, cacheService } from './cacheService'\r\nimport { formatWAXPrice, formatNumber } from '../utils/formatUtils'\r\nimport { API_ENDPOINTS, MarketplaceConfigService } from '../config/marketplaceConfig'\r\nimport { apiEndpointManager } from './apiEndpointManager'\r\nexport interface NFTAsset {\r\n  sale_id: string | null\r\n  asset_id: string\r\n  name: string\r\n  image: string\r\n  video?: string\r\n  price: string | null\r\n  seller: string | null\r\n  owner?: string\r\n  collection: string\r\n  schema: string\r\n  template_id?: string\r\n  template_mint?: number\r\n  max_supply?: string\r\n  traits: Record<string, string | number | boolean | null | undefined>\r\n  data?: Record<string, string | number | boolean | null | undefined>\r\n  rarity?: string\r\n  created_at_time?: string\r\n}\r\n\r\nexport interface ApiResponse<T> {\r\n  success: boolean\r\n  data: T\r\n  query_time?: number\r\n}\r\n\r\n// Enhanced health check configuration\r\ninterface HealthConfig {\r\n  path: string\r\n  validator?: (data: unknown) => boolean // Optional: Custom check for \"healthy\"\r\n  fallback?: boolean\r\n}\r\n\r\n// EOS Nation API response interfaces\r\ninterface EosNationEndpointData {\r\n  url?: string\r\n  endpoint?: string\r\n  api_url?: string\r\n  [key: string]: unknown\r\n}\r\n\r\ninterface EosNationReport {\r\n  atomic_https?: (string | EosNationEndpointData)[]\r\n  api_https2?: (string | EosNationEndpointData)[]\r\n  hyperion_https?: (string | EosNationEndpointData)[]\r\n  [key: string]: unknown\r\n}\r\n\r\ninterface EosNationResponse {\r\n  report?: EosNationReport\r\n  [key: string]: unknown\r\n}\r\n\r\nexport interface AssetData {\r\n  data?: {\r\n    img?: string\r\n    video?: string\r\n    [key: string]: string | number | boolean | undefined\r\n  }\r\n  template?: {\r\n    template_id: string\r\n    max_supply: string\r\n    immutable_data?: Record<string, string | number | boolean>\r\n  }\r\n  collection?: {\r\n    collection_name: string\r\n    name: string\r\n    img?: string\r\n  }\r\n  schema?: {\r\n    schema_name: string\r\n  }\r\n  asset_id?: string\r\n  name?: string\r\n  template_mint?: string | number\r\n}\r\n\r\nexport interface SaleData {\r\n  sale_id: string\r\n  assets: AssetData[]\r\n  listing_price: string\r\n  listing_symbol: string\r\n  seller: string\r\n  buyer?: string\r\n  updated_at_time: string\r\n  state: number\r\n  collection_name?: string\r\n  price?: PriceData\r\n}\r\n\r\nexport interface PriceData {\r\n  amount: string\r\n  token_symbol: string\r\n  token_precision: number\r\n  token_contract: string\r\n}\r\n\r\nexport interface CollectionData {\r\n  collection_name: string\r\n  name: string\r\n  img?: string\r\n  author: string\r\n  allow_notify: boolean\r\n  authorized_accounts: string[]\r\n  notify_accounts: string[]\r\n  market_fee: number\r\n  created_at_block: string\r\n  created_at_time: string\r\n  assets?: string | number\r\n  data?: Record<string, string | number | boolean>\r\n}\r\n\r\nexport interface MarketStats {\r\n  symbol: string\r\n  results: Array<{\r\n    time: string\r\n    volume: string\r\n    sales: string\r\n  }>\r\n}\r\n\r\nexport interface CollectionDetails {\r\n  collection_name: string\r\n  name: string\r\n  img?: string\r\n  author: string\r\n  allow_notify: boolean\r\n  authorized_accounts: string[]\r\n  notify_accounts: string[]\r\n  market_fee: number\r\n  data?: Record<string, string | number | boolean>\r\n  created_at_block: string\r\n  created_at_time: string\r\n  floor_price?: string\r\n  assets?: string\r\n  volume?: string\r\n  sales?: string\r\n}\r\n\r\nexport interface Schema {\r\n  schema_name: string\r\n  format: Array<{\r\n    name: string\r\n    type: string\r\n  }>\r\n  created_at_block: string\r\n  created_at_time: string\r\n}\r\n\r\n// Comprehensive AtomicAssets/AtomicMarket API parameters interface\r\nexport interface AtomicParams {\r\n  // Common pagination and sorting\r\n  page?: number               // Pagination page (starts at 1)\r\n  limit?: number              // 1-1000 (default 100)\r\n  order?: 'asc' | 'desc'\r\n  sort?: string               // e.g., 'created', 'price', 'asset_id', 'updated'\r\n  \r\n  // Asset filtering\r\n  collection_name?: string\r\n  schema_name?: string\r\n  template_id?: string | number\r\n  asset_id?: string | number\r\n  owner?: string\r\n  state?: string              // Comma-separated, e.g., '1,3' (sales: 1=listed,3=sold)\r\n  \r\n  // Price filtering\r\n  symbol?: string             // e.g., 'WAX'\r\n  min_price?: number\r\n  max_price?: number\r\n  \r\n  // Time filtering\r\n  before?: number             // Timestamp\r\n  after?: number              // Timestamp\r\n  \r\n  // ID filtering\r\n  ids?: string                // Comma-separated IDs\r\n  lower_bound?: string\r\n  upper_bound?: string\r\n  \r\n  // Sales-specific\r\n  seller?: string\r\n  buyer?: string\r\n  hide_offers?: boolean\r\n  \r\n  // Assets-specific\r\n  minted_by?: string\r\n  burner?: string\r\n  burned?: boolean\r\n  \r\n  // Offers-specific\r\n  sender?: string\r\n  recipient?: string\r\n  recipient_name?: string\r\n  \r\n  // Market-specific\r\n  marketplace?: string\r\n  maker_marketplace?: string\r\n  taker_marketplace?: string\r\n  \r\n  // Data filtering (for template/asset data)\r\n  [key: `data:${string}`]: string | number | boolean\r\n  \r\n  // Match filtering\r\n  match?: string\r\n  search?: string\r\n  \r\n  // Additional filters\r\n  authorized_account?: string\r\n  notify_account?: string\r\n  collection_blacklist?: string\r\n  collection_whitelist?: string\r\n  \r\n  // General index signature for compatibility\r\n  [key: string]: string | number | boolean | undefined\r\n}\r\n\r\nexport interface BurnData {\r\n  account: string\r\n  asset_ids: string[]\r\n  collection_name: string\r\n  created_at_block: string\r\n  created_at_time: string\r\n}\r\n\r\nexport interface CollectionAnalytics {\r\n  collection_name: string\r\n  volume?: string\r\n  sales?: string\r\n  floor?: string\r\n  average?: string\r\n  max?: string\r\n  assets?: string\r\n  holders?: number\r\n  dailyVolume?: string\r\n  dailySales?: number\r\n  totalTransactions?: number\r\n  activeListings?: number\r\n  averagePrice?: string\r\n  volume_24h?: string\r\n  floor_price?: string\r\n  market_cap?: string\r\n}\r\n\r\nexport interface SimilarCollection {\r\n  collection_name: string\r\n  name: string\r\n  similarity_score?: number\r\n}\r\n\r\nexport interface TemplateData {\r\n  template_id: string\r\n  max_supply: string\r\n  is_transferable: boolean\r\n  is_burnable: boolean\r\n  issued_supply: string\r\n  immutable_data: Record<string, unknown>\r\n  created_at_time: string\r\n  created_at_block: string\r\n  schema_name: string\r\n  img?: string\r\n  video?: string\r\n  data?: {\r\n    img?: string\r\n    video?: string\r\n  }\r\n  template?: {\r\n    immutable_data?: {\r\n      img?: string\r\n      video?: string\r\n    }\r\n  }\r\n}\r\n\r\nexport interface AssetDetails {\r\n  asset_id: string\r\n  collection_name: string\r\n  schema_name: string\r\n  template_id: string\r\n  name: string\r\n  owner: string\r\n  is_transferable: boolean\r\n  is_burnable: boolean\r\n  template: TemplateData\r\n  mutable_data: Record<string, unknown>\r\n  immutable_data: Record<string, unknown>\r\n  data?: Record<string, unknown>\r\n  created_at_time: string\r\n  created_at_block: string\r\n  minted_at_time: string\r\n  minted_at_block: string\r\n  updated_at_time: string\r\n  updated_at_block: string\r\n  transferred_at_time: string\r\n  transferred_at_block: string\r\n}\r\n\r\nexport interface TransferData {\r\n  from: string\r\n  to: string\r\n  asset_ids: string[]\r\n  memo: string\r\n  created_at_time: string\r\n  created_at_block: string\r\n}\r\n\r\nexport interface HolderData {\r\n  account: string\r\n  assets: string\r\n}\r\n\r\nexport interface CollectionVolumeData {\r\n  date: string\r\n  volume: string\r\n  sales: number\r\n}\r\n\r\n// WAX Chain API interfaces\r\nexport interface WaxAccountInfo {\r\n  account_name: string\r\n  head_block_num: number\r\n  head_block_time: string\r\n  privileged: boolean\r\n  last_code_update: string\r\n  created: string\r\n  core_liquid_balance?: string\r\n  ram_quota: number\r\n  net_weight: number\r\n  cpu_weight: number\r\n  net_limit: {\r\n    used: number\r\n    available: number\r\n    max: number\r\n  }\r\n  cpu_limit: {\r\n    used: number\r\n    available: number\r\n    max: number\r\n  }\r\n  ram_usage: number\r\n  permissions: WaxPermission[]\r\n  total_resources?: {\r\n    owner: string\r\n    net_weight: string\r\n    cpu_weight: string\r\n    ram_bytes: number\r\n  }\r\n  self_delegated_bandwidth?: {\r\n    from: string\r\n    to: string\r\n    net_weight: string\r\n    cpu_weight: string\r\n  }\r\n  refund_request?: {\r\n    owner: string\r\n    net_amount: string\r\n    cpu_amount: string\r\n    request_time: string\r\n  }\r\n  voter_info?: {\r\n    owner: string\r\n    proxy: string\r\n    producers: string[]\r\n    staked: number\r\n    last_vote_weight: string\r\n    proxied_vote_weight: string\r\n    is_proxy: number\r\n    flags1: number\r\n    reserved2: number\r\n    reserved3: string\r\n  }\r\n}\r\n\r\nexport interface WaxPermission {\r\n  perm_name: string\r\n  parent: string\r\n  required_auth: {\r\n    threshold: number\r\n    keys: Array<{\r\n      key: string\r\n      weight: number\r\n    }>\r\n    accounts: Array<{\r\n      permission: {\r\n        actor: string\r\n        permission: string\r\n      }\r\n      weight: number\r\n    }>\r\n    waits: Array<{\r\n      wait_sec: number\r\n      weight: number\r\n    }>\r\n  }\r\n}\r\n\r\nexport interface WaxChainInfo {\r\n  server_version: string\r\n  chain_id: string\r\n  head_block_num: number\r\n  last_irreversible_block_num: number\r\n  last_irreversible_block_id: string\r\n  head_block_id: string\r\n  head_block_time: string\r\n  head_block_producer: string\r\n  virtual_block_cpu_limit: number\r\n  virtual_block_net_limit: number\r\n  block_cpu_limit: number\r\n  block_net_limit: number\r\n  server_version_string: string\r\n  fork_db_head_block_num: number\r\n  fork_db_head_block_id: string\r\n}\r\n\r\nexport interface WaxCurrencyBalance {\r\n  balance: string\r\n  contract: string\r\n  symbol: string\r\n}\r\n\r\n// WAX Light API interfaces\r\nexport interface LightApiBalance {\r\n  amount: string\r\n  currency: string\r\n  decimals: string\r\n  contract: string\r\n}\r\n\r\nexport interface LightApiResponse {\r\n  account_name: string\r\n  balances: LightApiBalance[]\r\n  chain: {\r\n    description: string\r\n    block_num: number\r\n    block_time: string\r\n    chainid: string\r\n    production: number\r\n    sync: number\r\n    network: string\r\n    decimals: number\r\n    rex_enabled: number\r\n    systoken: string\r\n  }\r\n}\r\n\r\n// Alcor Exchange API interfaces\r\nexport interface AlcorTokenPrice {\r\n  symbol: string\r\n  contract: string\r\n  id: string\r\n  system_price: number\r\n  usd_price: number\r\n  decimals: number\r\n}\r\n\r\nexport interface AlcorPairData {\r\n  base: {\r\n    id: string\r\n    contract: string\r\n    symbol: string\r\n    precision: number\r\n  }\r\n  target: {\r\n    id: string\r\n    contract: string\r\n    symbol: string\r\n    precision: number\r\n  }\r\n  ticker_id: string\r\n}\r\n\r\nexport interface AlcorSwapParams {\r\n  from_token: string\r\n  from_contract: string\r\n  to_token: string\r\n  to_contract: string\r\n  amount: string\r\n  slippage: number\r\n}\r\n\r\n/*\r\n=== API SOURCES DOCUMENTATION ===\r\n\r\n1. AtomicAssets API - NFT data and marketplace\r\n   - Endpoints: Multiple fallback endpoints for redundancy\r\n   - Docs: https://github.com/pinknetworkx/eosio-contract-api-docs oor swagger: https://wax-atomic.alcor.exchange/docs/#/\r\n   - Usage: Collections, NFTs, sales, transfers, market data\r\n\r\n2. AtomicMarket API - NFT marketplace transactions\r\n   - Endpoints: Same as AtomicAssets (integrated)\r\n   - Docs: https://github.com/pinknetworkx/eosio-contract-api-docs\r\n   - Usage: Sales data, market statistics, pricing\r\n\r\n3. HiveBP API - Enhanced WAX blockchain data\r\n   - Endpoint: https://wax-api.hivebp.io\r\n   - Docs: Custom HiveBP endpoints  https://hivebp.github.io/wax-api\r\n   - Usage: Similar collections, enhanced analytics\r\n\r\n4. WAX Chain API - Direct blockchain queries\r\n   - Endpoints: Multiple WAX RPC endpoints\r\n   - Docs: https://developers.eos.io/manuals/eos/latest/nodeos/plugins/chain_api_plugin/api-reference/index\r\n  -  full ocs: https://docs.wax.io/apis/chain-api.htm\r\n   - Usage: Account info, token balances, chain data\r\n\r\n5. WAX Light API - Fast token balance queries\r\n   - Endpoint: https://wax.light-api.net\r\n   - Docs: https://github.com/cc32d9/eosio_light_api/blob/master/README.md\r\n   - Usage: Quick token balance lookups, account data\r\n\r\n6. Alcor Exchange API - Token prices and DEX data\r\n   - Endpoint: https://api.alcor.exchange\r\n   - Docs: https://api.alcor.exchange/#introduction\r\n   - Usage: Token prices, market data, bulk sell functionality\r\n\r\n*/\r\n\r\nclass ApiService {\r\n  // Multiple API endpoints for redundancy and fallback support\r\n  // Updated: Removed failing endpoints based on health checks\r\n  private atomicEndpoints: string[] = [...API_ENDPOINTS.ATOMIC_ASSETS]\r\n  \r\n  private readonly hiveBPAPI = API_ENDPOINTS.WAX_CHAIN.HIVEBP\r\n  \r\n  // WAX Light API endpoint\r\n  private readonly waxLightAPI = API_ENDPOINTS.WAX_CHAIN.LIGHT_API\r\n  \r\n  // Alcor Exchange API endpoint - WAX specific\r\n  private readonly alcorAPI = API_ENDPOINTS.SPECIALIZED.ALCOR\r\n  \r\n  // WAX Chain API endpoints\r\n  // Updated: Prioritize working endpoints, keep others as fallbacks\r\n  private waxChainEndpoints: string[] = [...API_ENDPOINTS.WAX_CHAIN.FALLBACK_ENDPOINTS]\r\n\r\n  // WAX Hyperion History API endpoints\r\n  private hyperionEndpoints = API_ENDPOINTS.WAX_CHAIN.HYPERION_ENDPOINTS\r\n  \r\n  private currentEndpointIndex = 0\r\n  private currentWaxChainIndex = 0\r\n  private currentHyperionIndex = 0\r\n  private adaptiveLimits = new Map<string, number>() // Track optimal limits per endpoint\r\n  \r\n  // Optimized cache configuration\r\n  private readonly DEFAULT_CACHE_TTL = 300000 // 5 minutes in milliseconds\r\n  \r\n  private get waxChainAPI() {\r\n    return apiEndpointManager.getBestEndpoint('waxChain') || this.waxChainEndpoints[this.currentWaxChainIndex]\r\n  }\r\n  \r\n  public get atomicMarketAPI() {\r\n    return this.atomicEndpoints[this.currentEndpointIndex]\r\n  }\r\n  \r\n  public get atomicAssetsAPI() {\r\n    return this.atomicEndpoints[this.currentEndpointIndex]\r\n  }\r\n\r\n  /**\r\n   * Get current healthy atomic endpoint with intelligent load balancing\r\n   */\r\n  public getCurrentAtomicEndpoint(): string {\r\n    // Use the new endpoint manager for intelligent selection\r\n    const bestEndpoint = apiEndpointManager.getBestEndpoint('atomic')\r\n    if (bestEndpoint) {\r\n      return bestEndpoint\r\n    }\r\n    \r\n    // Fallback to legacy method if endpoint manager fails\r\n    const healthyEndpoints = this.getHealthyEndpoints(this.atomicEndpoints)\r\n    if (healthyEndpoints.length > 0) {\r\n      const healthyEndpoint = healthyEndpoints[0]\r\n      this.currentEndpointIndex = this.atomicEndpoints.indexOf(healthyEndpoint as typeof this.atomicEndpoints[0])\r\n      return healthyEndpoint\r\n    }\r\n    \r\n    return this.atomicEndpoints[this.currentEndpointIndex] || this.atomicEndpoints[0]\r\n  }\r\n  \r\n  // Enhanced cache helper methods\r\n  private getFromCache<T>(key: string): T | null {\r\n    // Determine which cache to use based on key prefix\r\n    if (key.startsWith('asset_')) {\r\n      return assetCache.get(key)\r\n    } else if (key.startsWith('collection_')) {\r\n      return collectionCache.get(key)\r\n    } else if (key.startsWith('user_')) {\r\n      return userCache.get(key)\r\n    }\r\n    return cacheService.get(key)\r\n  }\r\n\r\n  private setCache<T>(key: string, data: T, ttl: number = this.DEFAULT_CACHE_TTL): void {\r\n    // Determine which cache to use based on key prefix\r\n    if (key.startsWith('asset_')) {\r\n      assetCache.set(key, data, ttl)\r\n    } else if (key.startsWith('collection_')) {\r\n      collectionCache.set(key, data, ttl)\r\n    } else if (key.startsWith('user_')) {\r\n      userCache.set(key, data, ttl)\r\n    } else {\r\n      cacheService.set(key, data, ttl)\r\n    }\r\n  }\r\n  \r\n\r\n  \r\n  // Legacy cache cleanup method removed - handled by centralized cache service\r\n  \r\n  /**\r\n   * Report endpoint health status to the endpoint manager\r\n   */\r\n  private reportEndpointHealth(url: string, success: boolean, responseTime?: number): void {\r\n    try {\r\n      const urlObj = new URL(url)\r\n      const baseUrl = `${urlObj.protocol}//${urlObj.host}`\r\n      \r\n      // Determine which endpoint group this belongs to\r\n      let groupName = 'atomic' // default\r\n      if (url.includes('wax.eosphere.io') || url.includes('wax.eosrio.io') || url.includes('api.wax.alohaeos.com')) {\r\n        if (url.includes('/v2/history') || url.includes('/v1/history')) {\r\n          groupName = 'hyperion'\r\n        } else {\r\n          groupName = 'waxChain'\r\n        }\r\n      }\r\n      \r\n      if (success && responseTime !== undefined) {\r\n        apiEndpointManager.reportSuccess(groupName, baseUrl, responseTime)\r\n      } else if (!success) {\r\n        apiEndpointManager.reportFailure(groupName, baseUrl)\r\n      }\r\n    } catch (error) {\r\n      // Silently fail to avoid disrupting main API functionality\r\n      logger.warn('Failed to report endpoint health:', 'ApiService.reportEndpointHealth', error as Error)\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Get cache statistics for monitoring (aggregated from centralized cache service)\r\n   */\r\n  getCacheStats(): {\r\n    totalEntries: number\r\n    validEntries: number\r\n    expiredEntries: number\r\n    hitRate: number\r\n  } {\r\n    const assetStats = assetCache.getStats()\r\n    const collectionStats = collectionCache.getStats()\r\n    const userStats = userCache.getStats()\r\n    const generalStats = cacheService.getStats()\r\n    \r\n    return {\r\n      totalEntries: assetStats.totalEntries + collectionStats.totalEntries + userStats.totalEntries + generalStats.totalEntries,\r\n      validEntries: assetStats.validEntries + collectionStats.validEntries + userStats.validEntries + generalStats.validEntries,\r\n      expiredEntries: assetStats.expiredEntries + collectionStats.expiredEntries + userStats.expiredEntries + generalStats.expiredEntries,\r\n      hitRate: (assetStats.hitRate + collectionStats.hitRate + userStats.hitRate + generalStats.hitRate) / 4\r\n    }\r\n  }\r\n  \r\n  /**\r\n    * Clear all cache entries (using centralized cache service)\r\n    */\r\n   clearCache(): void {\r\n     assetCache.clear()\r\n     collectionCache.clear()\r\n     userCache.clear()\r\n     cacheService.clear()\r\n   }\r\n   \r\n   /**\r\n    * Warm up cache with commonly accessed data\r\n    */\r\n   async warmupCache(account?: string): Promise<void> {\r\n     try {\r\n       const warmupTasks: Promise<unknown>[] = []\r\n       \r\n       // Warm up collection data for top collections\r\n       const topCollections = this.approvedCollections.slice(0, 5)\r\n       for (const collection of topCollections) {\r\n         warmupTasks.push(\r\n           this.getCollectionStats(collection).catch(error => \r\n             ErrorMessageService.logError('ApiService.warmupCache.collectionStats', error, { collection })\r\n           )\r\n         )\r\n       }\r\n       \r\n       // Warm up market stats\r\n       warmupTasks.push(\r\n         this.getMarketStats().catch(error => \r\n           ErrorMessageService.logError('ApiService.warmupCache.marketStats', error)\r\n         )\r\n       )\r\n       \r\n       // If account provided, warm up user-specific data\r\n       if (account) {\r\n         warmupTasks.push(\r\n           this.getUserInventoryOverview(account).catch(error => \r\n             ErrorMessageService.logError('ApiService.warmupCache.userInventory', error, { account })\r\n           )\r\n         )\r\n       }\r\n       \r\n       // Execute all warmup tasks concurrently with a timeout\r\n       await Promise.allSettled(warmupTasks)\r\n       \r\n     } catch (error) {\r\n        ErrorMessageService.logError('ApiService.warmupCache', error as Error)\r\n      }\r\n   }\r\n   \r\n   /**\r\n    * Intelligent prefetching based on user behavior patterns\r\n    */\r\n   async prefetchData(context: {\r\n     currentPage?: string\r\n     userAccount?: string\r\n     recentCollections?: string[]\r\n     recentSearches?: string[]\r\n   }): Promise<void> {\r\n     try {\r\n       const prefetchTasks: Promise<unknown>[] = []\r\n       \r\n       // Prefetch based on current page context\r\n       if (context.currentPage === 'marketplace') {\r\n         // Prefetch next page of assets\r\n         prefetchTasks.push(\r\n           this.getPxApprovedListings(100, 100).catch((error: unknown) => \r\n             ErrorMessageService.logError('ApiService.prefetch.marketplaceAssets', error)\r\n           )\r\n         )\r\n       }\r\n       \r\n       if (context.currentPage === 'inventory' && context.userAccount) {\r\n         // Prefetch user's collection data\r\n         prefetchTasks.push(\r\n           this.getUserInventoryOptimized(context.userAccount, { page: 2 }).catch(error => \r\n             ErrorMessageService.logError('ApiService.prefetch.userInventory', error, { account: context.userAccount })\r\n           )\r\n         )\r\n       }\r\n       \r\n       // Prefetch data for recently viewed collections\r\n       if (context.recentCollections) {\r\n         for (const collection of context.recentCollections.slice(0, 3)) {\r\n           prefetchTasks.push(\r\n             this.getCollectionStats(collection).catch(error => \r\n               ErrorMessageService.logError('ApiService.prefetch.recentCollection', error, { collection })\r\n             )\r\n           )\r\n         }\r\n       }\r\n       \r\n       // Execute prefetch tasks with lower priority\r\n       setTimeout(() => {\r\n         Promise.allSettled(prefetchTasks)\r\n       }, 1000) // Delay prefetching to not interfere with immediate requests\r\n       \r\n     } catch (error) {\r\n       ErrorMessageService.logError('ApiService.prefetchData', error as Error)\r\n     }\r\n   }\r\n   \r\n   /**\r\n    * Cache invalidation for specific data types (using centralized cache service)\r\n    */\r\n   invalidateCache(pattern: string | RegExp): void {\r\n     // Delegate to centralized cache services\r\n     if (typeof pattern === 'string') {\r\n       // Clear from all cache services based on pattern\r\n       assetCache.clear() // Could be more selective based on pattern\r\n       collectionCache.clear()\r\n       userCache.clear()\r\n       cacheService.clear()\r\n     } else {\r\n       // For regex patterns, clear all caches as we can't easily filter\r\n       assetCache.clear()\r\n       collectionCache.clear()\r\n       userCache.clear()\r\n       cacheService.clear()\r\n     }\r\n   }\r\n  \r\n  \r\n  private getAdaptiveLimit(baseUrl: string, requestedLimit: number): number {\r\n    const key = new URL(baseUrl).hostname\r\n    const storedLimit = this.adaptiveLimits.get(key)\r\n    \r\n    if (storedLimit) {\r\n      return Math.min(requestedLimit, storedLimit, 100) // Enforce max 100\r\n    }\r\n    \r\n    // Start with max limit of 100 to avoid API errors\r\n    return Math.min(requestedLimit, 100)\r\n  }\r\n  \r\n  private updateAdaptiveLimit(baseUrl: string, limit: number, success: boolean): void {\r\n    const key = new URL(baseUrl).hostname\r\n    \r\n    if (!success) {\r\n      // Reduce limit on failure\r\n      const newLimit = Math.max(Math.floor(limit * 0.7), 20)  // Min 20 to avoid too low\r\n      this.adaptiveLimits.set(key, newLimit)\r\n      // Reduced API limit due to rate limiting\r\n    } else if (limit < 100) {\r\n      // Gradually increase limit on success\r\n      const currentLimit = this.adaptiveLimits.get(key) || limit\r\n      const newLimit = Math.min(Math.floor(currentLimit * 1.1), 100)  // Max 100 (safe limit)\r\n      this.adaptiveLimits.set(key, newLimit)\r\n    }\r\n  }\r\n\r\n  private approvedCollections = [\r\n    'pixeljourney',\r\n    'friedfactory'\r\n  ]\r\n  \r\n  constructor() {\r\n    // Initialize with first endpoint\r\n    this.currentEndpointIndex = 0\r\n    this.currentWaxChainIndex = 0\r\n    this.currentHyperionIndex = 0\r\n    \r\n    // Initialize health configurations\r\n    this.initializeHealthConfigs()\r\n    \r\n    // // Start cache maintenance\r\n    // this.startCacheMaintenance()\r\n    \r\n    // Start health checks - temporarily disabled to prevent duplicate health checking\r\n    // with apiEndpointManager.ts which is already handling endpoint health monitoring\r\n    // this.startHealthChecks()\r\n  }\r\n  \r\n  // /**\r\n  //  * Start periodic cache maintenance\r\n  //  */\r\n  // private startCacheMaintenance(): void {\r\n  //   // Clean expired cache entries every 5 minutes\r\n  //   setInterval(() => {\r\n  //     this.clearExpiredCache()\r\n  //   }, 5 * 60 * 1000)\r\n    \r\n  //   // Cache optimization is now handled by centralized cache services\r\n  //   // Each cache service manages its own cleanup and eviction policies\r\n  // }\r\n  \r\n\r\n\r\n  // Separate fetch method for Alcor Exchange API calls\r\n  private async fetchAlcorAPI(url: string, retries = 3, options?: RequestInit): Promise<Response> {\r\n    let lastError: Error | null = null\r\n    \r\n    const startTime = Date.now()\r\n    const method = options?.method || 'GET'\r\n    \r\n    for (let i = 0; i < retries; i++) {\r\n      try {\r\n        const response = await fetch(url, {\r\n          method: method,\r\n          headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json',\r\n            ...options?.headers\r\n          },\r\n          mode: 'cors',\r\n          signal: options?.signal,\r\n          ...options\r\n        })\r\n        \r\n        const duration = Date.now() - startTime\r\n        \r\n        if (response.ok) {\r\n          // Track successful API call\r\n          monitoringService.trackAPICall(url, method, duration, response.status, true, i)\r\n          return response\r\n        }\r\n        \r\n        lastError = new Error(`HTTP ${response.status}: ${response.statusText}`)\r\n        \r\n        if (i < retries - 1) {\r\n          await new Promise(resolve => setTimeout(resolve, 1000 * (i + 1)))\r\n        } else {\r\n          // Track failed API call on final retry\r\n          monitoringService.trackAPICall(url, method, duration, response.status, false, i)\r\n        }\r\n      } catch (error) {\r\n        const duration = Date.now() - startTime\r\n        lastError = error as Error\r\n        \r\n        // Track error on final retry\r\n        if (i === retries - 1) {\r\n          monitoringService.trackAPICall(url, method, duration, 0, false, i)\r\n          monitoringService.reportError(lastError, 'alcor_api_error', { url, method, retries: i + 1 })\r\n        }\r\n        \r\n        // Don't retry if request was aborted\r\n        if (error instanceof Error && error.name === 'AbortError') {\r\n          monitoringService.reportError(error, 'alcor_api_abort', { url, method })\r\n          throw error\r\n        }\r\n        if (i < retries - 1) {\r\n          await new Promise(resolve => setTimeout(resolve, 1000 * (i + 1)))\r\n        }\r\n      }\r\n    }\r\n    \r\n    throw lastError || new Error('Failed to fetch from Alcor Exchange API')\r\n  }\r\n\r\n  // Circuit breaker state management\r\n  private circuitBreakerState: Map<string, {\r\n    failures: number\r\n    lastFailure: number\r\n    state: 'closed' | 'open' | 'half-open'\r\n  }> = new Map()\r\n\r\n  private readonly CIRCUIT_BREAKER_THRESHOLD = 5\r\n  private readonly CIRCUIT_BREAKER_TIMEOUT = 60000 // 1 minute\r\n  private readonly MAX_TIMEOUT = 30000 // 30 seconds\r\n  \r\n\r\n  \r\n  // Health check management\r\n  private endpointHealth: Map<string, {\r\n    isHealthy: boolean\r\n    lastCheck: number\r\n    consecutiveFailures: number\r\n    responseTime: number\r\n  }> = new Map()\r\n  private readonly HEALTH_CHECK_INTERVAL = 300000 // 5 minutes\r\n  private readonly MAX_CONSECUTIVE_FAILURES = 3\r\n  private healthCheckIntervalId: NodeJS.Timeout | null = null\r\n\r\n  private healthConfigs: Map<string, HealthConfig> = new Map()\r\n\r\n  /**\r\n   * Initialize health configurations for all endpoints\r\n   */\r\n  private initializeHealthConfigs(): void {\r\n    this.healthConfigs.clear()\r\n    \r\n    // Add configurations for all validated endpoints\r\n    this.getValidatedEndpoints('atomic').forEach(ep => {\r\n      this.healthConfigs.set(ep, {\r\n        path: '/atomicassets/v1/collections?limit=1',\r\n        validator: (data: unknown) => {\r\n          const atomicData = data as { data?: unknown[]; success?: boolean }\r\n          return Array.isArray(atomicData.data) && atomicData.success === true\r\n        }\r\n      })\r\n    })\r\n    \r\n    this.getValidatedEndpoints('waxChain').forEach(ep => {\r\n      this.healthConfigs.set(ep, {\r\n        path: '/v1/chain/get_info',\r\n        validator: (data: unknown) => {\r\n          const chainData = data as { head_block_num?: number }\r\n          return typeof chainData.head_block_num === 'number' && chainData.head_block_num > 0\r\n        }\r\n      })\r\n    })\r\n    \r\n    this.getValidatedEndpoints('hyperion').forEach(ep => {\r\n      this.healthConfigs.set(ep, {\r\n        path: '/v2/health',\r\n        validator: (data: unknown) => {\r\n          const healthData = data as { health?: { status?: string } | string }\r\n          return (healthData.health && \r\n                 (typeof healthData.health === 'object' && healthData.health.status === 'OK') ||\r\n                 healthData.health === 'OK')\r\n        }\r\n      })\r\n    })\r\n    \r\n    logger.info(`[Health Config] Initialized configurations for ${this.healthConfigs.size} endpoints`)\r\n  }\r\n\r\n  // EOS Nation endpoint validation data\r\n  private eosNationEndpoints: {\r\n    atomicEndpoints: string[]\r\n    waxChainEndpoints: string[]\r\n    hyperionEndpoints: string[]\r\n    lastUpdated: number\r\n  } = {\r\n    atomicEndpoints: [],\r\n    waxChainEndpoints: [],\r\n    hyperionEndpoints: [],\r\n    lastUpdated: 0\r\n  }\r\n  private readonly EOS_NATION_UPDATE_INTERVAL = 3600000 // 1 hour\r\n\r\n  private getCircuitBreakerKey(url: string): string {\r\n    try {\r\n      const urlObj = new URL(url)\r\n      return urlObj.hostname\r\n    } catch {\r\n      return url\r\n    }\r\n  }\r\n\r\n  private isCircuitBreakerOpen(key: string): boolean {\r\n    const state = this.circuitBreakerState.get(key)\r\n    if (!state) return false\r\n\r\n    if (state.state === 'open') {\r\n      if (Date.now() - state.lastFailure > this.CIRCUIT_BREAKER_TIMEOUT) {\r\n        state.state = 'half-open'\r\n        return false\r\n      }\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  private recordCircuitBreakerFailure(key: string): void {\r\n    const state = this.circuitBreakerState.get(key) || {\r\n      failures: 0,\r\n      lastFailure: 0,\r\n      state: 'closed' as const\r\n    }\r\n\r\n    state.failures++\r\n    state.lastFailure = Date.now()\r\n\r\n    if (state.failures >= this.CIRCUIT_BREAKER_THRESHOLD) {\r\n      state.state = 'open'\r\n    }\r\n\r\n    this.circuitBreakerState.set(key, state)\r\n  }\r\n\r\n  private recordCircuitBreakerSuccess(key: string): void {\r\n    const state = this.circuitBreakerState.get(key)\r\n    if (state) {\r\n      state.failures = 0\r\n      state.state = 'closed'\r\n      this.circuitBreakerState.set(key, state)\r\n    }\r\n  }\r\n  \r\n\r\n  \r\n\r\n\r\n  /**\r\n   * Update endpoint health status\r\n   */\r\n  private updateEndpointHealth(endpointKey: string, success: boolean, responseTime: number): void {\r\n    let health = this.endpointHealth.get(endpointKey)\r\n    \r\n    if (!health) {\r\n      health = {\r\n        isHealthy: true,\r\n        lastCheck: Date.now(),\r\n        consecutiveFailures: 0,\r\n        responseTime: 0\r\n      }\r\n      this.endpointHealth.set(endpointKey, health)\r\n    }\r\n    \r\n    health.lastCheck = Date.now()\r\n    \r\n    if (success) {\r\n      health.consecutiveFailures = 0\r\n      health.isHealthy = true\r\n      health.responseTime = responseTime\r\n    } else {\r\n      health.consecutiveFailures++\r\n      if (health.consecutiveFailures >= this.MAX_CONSECUTIVE_FAILURES) {\r\n        health.isHealthy = false\r\n      }\r\n    }\r\n    \r\n    this.endpointHealth.set(endpointKey, health)\r\n  }\r\n  \r\n  /**\r\n   * Check if endpoint is healthy\r\n   */\r\n  private isEndpointHealthy(endpointKey: string): boolean {\r\n    const health = this.endpointHealth.get(endpointKey)\r\n    if (!health) return true // Assume healthy if no data\r\n    \r\n    // Consider endpoint unhealthy if not checked recently\r\n    const timeSinceLastCheck = Date.now() - health.lastCheck\r\n    if (timeSinceLastCheck > this.HEALTH_CHECK_INTERVAL * 2) {\r\n      return false\r\n    }\r\n    \r\n    return health.isHealthy\r\n  }\r\n  \r\n  /**\r\n   * Perform periodic health checks on endpoints\r\n   */\r\n  private async performHealthCheck(endpoint: string): Promise<void> {\r\n    const endpointKey = this.getCircuitBreakerKey(endpoint)\r\n    const config = this.healthConfigs.get(endpoint) || { path: '', fallback: true } // Fallback to base if no config\r\n    const healthCheckUrl = config.path ? `${endpoint}${config.path}` : endpoint\r\n\r\n    try {\r\n      const startTime = Date.now()\r\n      const response = await fetch(healthCheckUrl, {\r\n        method: config.path ? 'GET' : 'HEAD', // HEAD for root fallback\r\n        signal: AbortSignal.timeout(10000), // Bump for reliability\r\n        headers: { 'Accept': 'application/json' }\r\n      })\r\n\r\n      let isHealthy = response.ok\r\n      const duration = Date.now() - startTime\r\n\r\n      if (response.ok && config.validator) {\r\n        const data = await response.json()\r\n        isHealthy = config.validator(data)\r\n        // Only log validation failures or first success after failure\r\n        const currentHealth = this.endpointHealth.get(endpointKey)\r\n        if (!isHealthy || (currentHealth && currentHealth.consecutiveFailures > 0)) {\r\n          logger.info(`[HealthCheck] ${endpoint}:`, 'ApiService.performHealthCheck', { healthy: isHealthy, duration: `${duration}ms` })\r\n        }\r\n      }\r\n\r\n      this.updateEndpointHealth(endpointKey, isHealthy, duration)\r\n      if (!isHealthy) {\r\n        logger.warn(`[HealthCheck] ${endpoint} failed validation`)\r\n      }\r\n    } catch (error) {\r\n      logger.error(`[HealthCheck] ${endpoint} error:`, 'ApiService.performHealthCheck', error as Error)\r\n      this.updateEndpointHealth(endpointKey, false, 0)\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Start periodic health checks for all endpoints\r\n   */\r\n  private startHealthChecks(): void {\r\n    // Clear any existing interval to prevent duplicates\r\n    if (this.healthCheckIntervalId) {\r\n      clearInterval(this.healthCheckIntervalId)\r\n      this.healthCheckIntervalId = null\r\n    }\r\n\r\n    // Start health checks with reduced logging frequency\r\n    this.healthCheckIntervalId = setInterval(() => {\r\n      logger.info('[HealthCheck] Starting periodic health check cycle...')\r\n      \r\n      // Check atomic endpoints (including EOS Nation validated ones)\r\n      this.getValidatedEndpoints('atomic').forEach(endpoint => {\r\n        this.performHealthCheck(endpoint)\r\n      })\r\n      \r\n      // Check WAX chain endpoints (including EOS Nation validated ones)\r\n      this.getValidatedEndpoints('waxChain').forEach(endpoint => {\r\n        this.performHealthCheck(endpoint)\r\n      })\r\n      \r\n      // Check hyperion endpoints (including EOS Nation validated ones)\r\n      this.getValidatedEndpoints('hyperion').forEach(endpoint => {\r\n        this.performHealthCheck(endpoint)\r\n      })\r\n      \r\n      logger.info('[HealthCheck] Completed periodic health check cycle')\r\n    }, this.HEALTH_CHECK_INTERVAL)\r\n    \r\n    // Also start EOS Nation endpoint updates\r\n    this.updateEosNationEndpoints()\r\n  }\r\n\r\n  /**\r\n   * Stop health checks to prevent memory leaks\r\n   */\r\n  public stopHealthChecks(): void {\r\n    if (this.healthCheckIntervalId) {\r\n      clearInterval(this.healthCheckIntervalId)\r\n      this.healthCheckIntervalId = null\r\n      logger.info('[HealthCheck] Health check interval stopped')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Manually start health checks if needed\r\n   */\r\n  public enableHealthChecks(): void {\r\n    logger.info('[HealthCheck] Enabling health checks...')\r\n    this.startHealthChecks()\r\n  }\r\n\r\n  /**\r\n   * Fetch and update endpoint data from EOS Nation validator\r\n   */\r\n  private async updateEosNationEndpoints(): Promise<void> {\r\n    try {\r\n      const now = Date.now()\r\n      if (now - this.eosNationEndpoints.lastUpdated < this.EOS_NATION_UPDATE_INTERVAL) {\r\n        return // Skip if updated recently\r\n      }\r\n\r\n      logger.info('[EOS Nation] Fetching latest endpoint data...')\r\n      const response = await fetch('https://validate.eosnation.io/wax/reports/endpoints.json', {\r\n        method: 'GET',\r\n        headers: { 'Accept': 'application/json' },\r\n        signal: AbortSignal.timeout(10000)\r\n      })\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`)\r\n      }\r\n\r\n      const data = await response.json()\r\n      if (!data || typeof data !== 'object') {\r\n        throw new Error('Invalid JSON response from EOS Nation API')\r\n      }\r\n\r\n      if (!data.report || typeof data.report !== 'object') {\r\n        logger.warn('[EOS Nation] No report data found in response:', data)\r\n        throw new Error('Invalid response format from EOS Nation API')\r\n      }\r\n\r\n      // Extract endpoints from the report data with better error handling\r\n      const eosNationData = data as EosNationResponse\r\n      const report = eosNationData.report as EosNationReport\r\n      const atomicEndpoints = this.parseEosNationEndpoints(report.atomic_https || [])\r\n      const waxChainEndpoints = this.parseEosNationEndpoints(report.api_https2 || [])\r\n      const hyperionEndpoints = this.parseEosNationEndpoints(report.hyperion_https || [])\r\n\r\n      logger.info('[EOS Nation] Raw endpoint counts:', 'ApiService.updateEosNationEndpoints', {\r\n        atomic_https: Array.isArray(report.atomic_https) ? report.atomic_https.length : 'not array',\r\n        api_https2: Array.isArray(report.api_https2) ? report.api_https2.length : 'not array',\r\n        hyperion_https: Array.isArray(report.hyperion_https) ? report.hyperion_https.length : 'not array'\r\n      })\r\n\r\n      // Update our endpoint data\r\n      this.eosNationEndpoints = {\r\n        atomicEndpoints,\r\n        waxChainEndpoints,\r\n        hyperionEndpoints,\r\n        lastUpdated: now\r\n      }\r\n\r\n      logger.info(`[EOS Nation] Updated endpoints: ${atomicEndpoints.length} atomic, ${waxChainEndpoints.length} wax chain, ${hyperionEndpoints.length} hyperion`)\r\n      \r\n      // Reinitialize health configs with new endpoints\r\n      this.initializeHealthConfigs()\r\n      \r\n      // Schedule next update\r\n      setTimeout(() => this.updateEosNationEndpoints(), this.EOS_NATION_UPDATE_INTERVAL)\r\n    } catch (error) {\r\n      logger.error('[EOS Nation] Failed to update endpoint data:', 'ApiService.updateEosNationEndpoints', error as Error)\r\n      // Retry in 10 minutes on failure\r\n      setTimeout(() => this.updateEosNationEndpoints(), 600000)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Parse EOS Nation endpoint data into clean URLs\r\n   */\r\n  private parseEosNationEndpoints(endpoints: (string | EosNationEndpointData)[]): string[] {\r\n    if (!Array.isArray(endpoints)) {\r\n      logger.warn('[EOS Nation] Expected array of endpoints, got:', typeof endpoints)\r\n      return []\r\n    }\r\n\r\n    return endpoints\r\n      .map(endpoint => {\r\n        try {\r\n          // Handle different possible formats\r\n          let endpointStr: string\r\n          \r\n          if (typeof endpoint === 'string') {\r\n            endpointStr = endpoint\r\n          } else if (typeof endpoint === 'object' && endpoint !== null) {\r\n            // If it's an object, try to extract URL from common properties\r\n            const obj = endpoint as EosNationEndpointData\r\n            endpointStr = (obj.url || obj.endpoint || obj.api_url || String(endpoint)) as string\r\n          } else {\r\n            endpointStr = String(endpoint)\r\n          }\r\n\r\n          // EOS Nation format: \" https://example.com COUNTRY PROVIDER\"\r\n          const trimmed = endpointStr.trim()\r\n          const urlMatch = trimmed.match(/https?:\\/\\/[^\\s]+/)\r\n          return urlMatch ? urlMatch[0] : null\r\n        } catch (error) {\r\n          logger.warn('[EOS Nation] Failed to parse endpoint', 'ApiService.updateEosNationEndpoints', error as Error)\r\n          return null\r\n        }\r\n      })\r\n      .filter((url): url is string => url !== null)\r\n      .filter(url => {\r\n        try {\r\n          new URL(url)\r\n          return true\r\n        } catch {\r\n          return false\r\n        }\r\n      })\r\n   }\r\n\r\n  /**\r\n   * Get validated endpoints from EOS Nation data combined with our static endpoints\r\n   */\r\n  private getValidatedEndpoints(type: 'atomic' | 'waxChain' | 'hyperion'): string[] {\r\n    const staticEndpoints = type === 'atomic' ? this.atomicEndpoints : \r\n                           type === 'waxChain' ? this.waxChainEndpoints : \r\n                           this.hyperionEndpoints\r\n    \r\n    const eosNationEndpoints = type === 'atomic' ? this.eosNationEndpoints.atomicEndpoints :\r\n                              type === 'waxChain' ? this.eosNationEndpoints.waxChainEndpoints :\r\n                              this.eosNationEndpoints.hyperionEndpoints\r\n    \r\n    // Combine and deduplicate endpoints, prioritizing EOS Nation validated ones\r\n    const combined = [...new Set([...eosNationEndpoints, ...staticEndpoints])]\r\n    \r\n    logger.info(`[Endpoint Selection] ${type}: ${combined.length} total (${eosNationEndpoints.length} from EOS Nation, ${staticEndpoints.length} static)`)\r\n    return combined\r\n  }\r\n   \r\n  /**\r\n   * Get healthy endpoints from a list\r\n   */\r\n  private getHealthyEndpoints(endpoints: readonly string[]): string[] {\r\n    return endpoints.filter(endpoint => {\r\n      const endpointKey = this.getCircuitBreakerKey(endpoint)\r\n      return this.isEndpointHealthy(endpointKey) && !this.isCircuitBreakerOpen(endpointKey)\r\n    })\r\n  }\r\n\r\n  private classifyError(error: Error, status?: number): 'retryable' | 'non-retryable' | 'rate-limit' {\r\n    if (status) {\r\n      if (status === 429) return 'rate-limit'\r\n      if (status === 408 || status === 502 || status === 503 || status === 504) return 'retryable'\r\n      if (status >= 400 && status < 500) return 'non-retryable'\r\n      if (status >= 500) return 'retryable'\r\n    }\r\n\r\n    const message = error.message.toLowerCase()\r\n    \r\n    // Rate limiting indicators\r\n    if (message.includes('rate limit') || message.includes('429') || message.includes('too many requests')) {\r\n      return 'rate-limit'\r\n    }\r\n    \r\n    // Network and timeout errors - retryable\r\n    if (\r\n      message.includes('timeout') ||\r\n      message.includes('network') ||\r\n      message.includes('connection') ||\r\n      message.includes('fetch') ||\r\n      message.includes('enotfound') ||\r\n      message.includes('econnreset') ||\r\n      message.includes('econnrefused') ||\r\n      message.includes('socket hang up') ||\r\n      error.name === 'AbortError'\r\n    ) {\r\n      return 'retryable'\r\n    }\r\n    \r\n    // Client errors - non-retryable\r\n    if (\r\n      message.includes('400') ||\r\n      message.includes('401') ||\r\n      message.includes('403') ||\r\n      message.includes('404') ||\r\n      message.includes('unauthorized') ||\r\n      message.includes('forbidden') ||\r\n      message.includes('not found') ||\r\n      message.includes('bad request')\r\n    ) {\r\n      return 'non-retryable'\r\n    }\r\n    \r\n    // Default to retryable for unknown errors\r\n    return 'retryable'\r\n  }\r\n\r\n  private calculateDelay(attempt: number, errorType: 'retryable' | 'rate-limit', jitter = true): number {\r\n    let baseDelay: number\r\n    \r\n    if (errorType === 'rate-limit') {\r\n      // Exponential backoff for rate limits: 1s, 2s, 4s, 8s, 16s, 30s (max)\r\n      baseDelay = Math.min(Math.pow(2, attempt) * 1000, this.MAX_TIMEOUT)\r\n    } else {\r\n      // Linear backoff for other retryable errors: 1s, 2s, 3s, 4s, 5s\r\n      baseDelay = Math.min((attempt + 1) * 1000, 5000)\r\n    }\r\n\r\n    // Add jitter to prevent thundering herd\r\n    if (jitter) {\r\n      const jitterAmount = baseDelay * 0.1 // 10% jitter\r\n      baseDelay += (Math.random() - 0.5) * 2 * jitterAmount\r\n    }\r\n\r\n    return Math.max(baseDelay, 100) // Minimum 100ms delay\r\n  }\r\n\r\n  public async fetchWithRetry(url: string, retries = 3, options?: RequestInit): Promise<Response> {\r\n    const circuitKey = this.getCircuitBreakerKey(url)\r\n    let lastError: Error | null = null\r\n    const startTime = Date.now()\r\n    \r\n    // Check circuit breaker\r\n    if (this.isCircuitBreakerOpen(circuitKey)) {\r\n      throw new Error(`Circuit breaker is open for ${circuitKey}. Service temporarily unavailable.`)\r\n    }\r\n\r\n    // Enhanced timeout handling\r\n    const timeoutMs = options?.signal ? undefined : 15000 // 15 second default timeout\r\n    const controller = new AbortController()\r\n    let timeoutId: ReturnType<typeof setTimeout> | undefined\r\n\r\n    if (timeoutMs && !options?.signal) {\r\n      timeoutId = setTimeout(() => controller.abort(), timeoutMs)\r\n    }\r\n\r\n    const fetchOptions: RequestInit = {\r\n      method: options?.method || 'GET',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json',\r\n        'User-Agent': 'PxMarket/2.0',\r\n        ...options?.headers\r\n      },\r\n      mode: 'cors',\r\n      signal: options?.signal || controller.signal,\r\n      ...options\r\n    }\r\n\r\n    try {\r\n      // Check if this is a HiveBP API call - if so, don't use endpoint switching\r\n      if (url.includes('wax-api.hivebp.io')) {\r\n        for (let i = 0; i < retries; i++) {\r\n          try {\r\n            const response = await fetch(url, fetchOptions)\r\n            \r\n            if (response.ok) {\r\n              this.recordCircuitBreakerSuccess(circuitKey)\r\n              // Report success to endpoint manager\r\n              const responseTime = Date.now() - startTime\r\n              this.reportEndpointHealth(url, true, responseTime)\r\n              return response\r\n            }\r\n            \r\n            const errorType = this.classifyError(new Error(`HTTP ${response.status}`), response.status)\r\n            lastError = new Error(`HTTP ${response.status}: ${response.statusText}`)\r\n            \r\n            if (errorType === 'non-retryable' || i === retries - 1) {\r\n              break\r\n            }\r\n            \r\n            const delay = this.calculateDelay(i, errorType)\r\n            await new Promise(resolve => setTimeout(resolve, delay))\r\n          } catch (error) {\r\n            const err = error as Error\r\n            const errorType = this.classifyError(err)\r\n            lastError = err\r\n            \r\n            if (errorType === 'non-retryable' || i === retries - 1) {\r\n              break\r\n            }\r\n            \r\n            const delay = this.calculateDelay(i, errorType)\r\n            await new Promise(resolve => setTimeout(resolve, delay))\r\n          }\r\n        }\r\n        \r\n        this.recordCircuitBreakerFailure(circuitKey)\r\n        throw lastError || new Error('Failed to fetch from HiveBP API')\r\n      }\r\n      \r\n      // Check if this is a WAX Chain API call\r\n      if (this.waxChainEndpoints.some(endpoint => url.includes(endpoint))) {\r\n        const healthyWaxEndpoints = this.getHealthyEndpoints(this.waxChainEndpoints)\r\n        const waxEndpointsToTry = healthyWaxEndpoints.length > 0 ? healthyWaxEndpoints : this.waxChainEndpoints\r\n        \r\n        for (let endpointIndex = 0; endpointIndex < waxEndpointsToTry.length; endpointIndex++) {\r\n          const endpoint = waxEndpointsToTry[endpointIndex]\r\n          // Update current endpoint index to match the actual endpoint\r\n          this.currentWaxChainIndex = this.waxChainEndpoints.indexOf(endpoint)\r\n          \r\n          // Replace the base URL in the provided URL with current endpoint\r\n          const currentUrl = url.replace(/https:\\/\\/[^/]+/, endpoint)\r\n          const endpointKey = this.getCircuitBreakerKey(currentUrl)\r\n          \r\n          // Skip if this endpoint's circuit breaker is open\r\n          if (this.isCircuitBreakerOpen(endpointKey)) {\r\n            continue\r\n          }\r\n          \r\n          // Try current endpoint with retries\r\n        let endpointSuccess = false\r\n        for (let i = 0; i < retries; i++) {\r\n          try {\r\n            const response = await fetch(currentUrl, fetchOptions)\r\n            \r\n            if (response.ok) {\r\n              this.recordCircuitBreakerSuccess(endpointKey)\r\n              endpointSuccess = true\r\n              return response\r\n            }\r\n              \r\n              const errorType = this.classifyError(new Error(`HTTP ${response.status}`), response.status)\r\n              lastError = new Error(`HTTP ${response.status}: ${response.statusText}`)\r\n              \r\n              // If it's a 400 error, try next endpoint immediately\r\n              if (response.status === 400 || errorType === 'non-retryable') {\r\n                break\r\n              }\r\n              \r\n              if (i < retries - 1) {\r\n                const delay = this.calculateDelay(i, errorType)\r\n                await new Promise(resolve => setTimeout(resolve, delay))\r\n              }\r\n            } catch (error) {\r\n              const err = error as Error\r\n              const errorType = this.classifyError(err)\r\n              lastError = err\r\n              \r\n              if (errorType === 'non-retryable') {\r\n                break\r\n              }\r\n              \r\n              if (i < retries - 1) {\r\n                const delay = this.calculateDelay(i, errorType)\r\n                await new Promise(resolve => setTimeout(resolve, delay))\r\n              }\r\n            }\r\n          }\r\n          \r\n          if (!endpointSuccess) {\r\n            this.recordCircuitBreakerFailure(endpointKey)\r\n          }\r\n        }\r\n        \r\n        throw lastError || new Error('All WAX Chain endpoints failed')\r\n      }\r\n      \r\n      // For Atomic API calls, prioritize healthy endpoints\r\n      const healthyAtomicEndpoints = this.getHealthyEndpoints(this.atomicEndpoints)\r\n      const endpointsToTry = healthyAtomicEndpoints.length > 0 ? healthyAtomicEndpoints : this.atomicEndpoints\r\n      \r\n      for (let endpointIndex = 0; endpointIndex < endpointsToTry.length; endpointIndex++) {\r\n        const endpoint = endpointsToTry[endpointIndex]\r\n        // Update current endpoint index to match the actual endpoint\r\n        this.currentEndpointIndex = this.atomicEndpoints.indexOf(endpoint)\r\n        \r\n        // Replace the base URL in the provided URL with current endpoint\r\n        const currentUrl = url.replace(/https:\\/\\/[^/]+/, endpoint)\r\n        const endpointKey = this.getCircuitBreakerKey(currentUrl)\r\n        \r\n        // Skip if this endpoint's circuit breaker is open\r\n        if (this.isCircuitBreakerOpen(endpointKey)) {\r\n          continue\r\n        }\r\n        \r\n        // Try current endpoint with retries\r\n        let endpointSuccess = false\r\n        for (let i = 0; i < retries; i++) {\r\n          try {\r\n            const response = await fetch(currentUrl, fetchOptions)\r\n            \r\n            if (response.ok) {\r\n              this.recordCircuitBreakerSuccess(endpointKey)\r\n              endpointSuccess = true\r\n              // Report success to endpoint manager\r\n              const responseTime = Date.now() - startTime\r\n              this.reportEndpointHealth(currentUrl, true, responseTime)\r\n              return response\r\n            }\r\n            \r\n            const errorType = this.classifyError(new Error(`HTTP ${response.status}`), response.status)\r\n            lastError = new Error(`HTTP ${response.status}: ${response.statusText}`)\r\n            \r\n            // If it's a 400 error, try next endpoint immediately\r\n            if (response.status === 400 || errorType === 'non-retryable') {\r\n              break\r\n            }\r\n            \r\n            if (i < retries - 1) {\r\n              const delay = this.calculateDelay(i, errorType)\r\n              await new Promise(resolve => setTimeout(resolve, delay))\r\n            }\r\n          } catch (error) {\r\n            const err = error as Error\r\n            const errorType = this.classifyError(err)\r\n            lastError = err\r\n            \r\n            if (errorType === 'non-retryable') {\r\n              break\r\n            }\r\n            \r\n            if (i < retries - 1) {\r\n              const delay = this.calculateDelay(i, errorType)\r\n              await new Promise(resolve => setTimeout(resolve, delay))\r\n            }\r\n          }\r\n        }\r\n        \r\n        if (!endpointSuccess) {\r\n          this.recordCircuitBreakerFailure(endpointKey)\r\n        }\r\n      }\r\n      \r\n      throw lastError || new Error('All endpoints failed')\r\n    } finally {\r\n      if (timeoutId) {\r\n        clearTimeout(timeoutId)\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  private formatSaleData(sale: SaleData): NFTAsset {\r\n    const asset = sale.assets[0]\r\n    return {\r\n      sale_id: sale.sale_id,\r\n      asset_id: asset?.asset_id || '',\r\n      name: asset?.name || `${asset?.collection?.collection_name || 'Unknown'} #${asset?.asset_id || 'N/A'}`,\r\n      image: this.getAssetImage(asset),\r\n      video: this.getAssetVideo(asset),\r\n      price: sale.price ? this.formatPrice(sale.price) : '0 WAX',\r\n      seller: sale.seller,\r\n      collection: asset?.collection?.collection_name || 'Unknown',\r\n      schema: asset?.schema?.schema_name || 'Unknown',\r\n      template_mint: asset?.template_mint ? parseInt(asset.template_mint.toString()) : undefined,\r\n      max_supply: asset?.template?.max_supply || undefined,\r\n      traits: asset?.data ? Object.fromEntries(\r\n        Object.entries(asset.data).filter(([, value]) => value !== undefined && value !== null)\r\n      ) as Record<string, string | number | boolean> : {}\r\n    }\r\n  }\r\n\r\n  public getAssetImage(asset: AssetData): string {\r\n    const img = asset?.data?.img || asset?.template?.immutable_data?.img\r\n    if (!img) return API_ENDPOINTS.PIXEL_JOURNEY.DEFAULT_IMAGE\r\n    if (typeof img === 'string') {\r\n      return img.startsWith('http')\r\n        ? img\r\n        : img.startsWith('Qm')\r\n        ? `${API_ENDPOINTS.IPFS.GATEWAYS[0]}${img}`\r\n        : img\r\n    }\r\n    return API_ENDPOINTS.PIXEL_JOURNEY.DEFAULT_IMAGE\r\n  }\r\n\r\n  private getAssetVideo(asset: AssetData): string {\r\n    const video = asset?.data?.video || asset?.template?.immutable_data?.video\r\n    if (!video || typeof video !== 'string') return ''\r\n    return video.startsWith('http')\r\n      ? video\r\n      : video.startsWith('Qm')\r\n      ? `${API_ENDPOINTS.IPFS.GATEWAYS[0]}${video}`\r\n      : video\r\n  }\r\n\r\n  private formatPrice(price: PriceData): string {\r\n    if (!price || !price.amount) return '0 WAX'\r\n    \r\n    const amount = parseFloat(price.amount) / Math.pow(10, price.token_precision || 8)\r\n    if (price.token_symbol === 'WAX' || !price.token_symbol) {\r\n      return formatWAXPrice(amount)\r\n    }\r\n    return `${formatNumber(amount)} ${price.token_symbol}`\r\n  }\r\n\r\n\r\n\r\n  async getCheapestPixals(limit = 50, page = 1): Promise<NFTAsset[]> {\r\n    const baseUrl = this.atomicMarketAPI\r\n    const adaptiveLimit = this.getAdaptiveLimit(baseUrl, limit)\r\n    \r\n    try {\r\n      const url = `${baseUrl}/atomicmarket/v1/sales?state=1&collection_name=pixeljourney&schema_name=pixals&sort=price&order=asc&limit=${adaptiveLimit}&page=${page}`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<SaleData[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        this.updateAdaptiveLimit(baseUrl, adaptiveLimit, true)\r\n        return data.data.map(sale => this.formatSaleData(sale))\r\n      }\r\n      \r\n      throw new Error('Invalid API response')\r\n    } catch (error) {\r\n      this.updateAdaptiveLimit(baseUrl, adaptiveLimit, false)\r\n      ErrorMessageService.logError('ApiService.getCheapestPixals', error, { limit, adaptiveLimit, page })\r\n      throw error // Re-throw error instead of returning mock data\r\n    }\r\n  }\r\n\r\n  async getWaxRockPixals(limit = 50, page = 1): Promise<NFTAsset[]> {\r\n    const baseUrl = this.atomicMarketAPI\r\n    const adaptiveLimit = this.getAdaptiveLimit(baseUrl, limit)\r\n    \r\n    try {\r\n      // Import the proper WaxRock types from config\r\n      const { MarketplaceConfigService } = await import('../config/marketplaceConfig')\r\n      const waxRockTypes = MarketplaceConfigService.getWaxRockTypes()\r\n      \r\n      // Try multiple approaches to get WaxRock listings\r\n      let allWaxRockSales: SaleData[] = []\r\n      \r\n      // Approach 1: Query each WaxRock type individually using data:WaxRock parameter\r\n      for (const waxRockType of waxRockTypes) {\r\n        try {\r\n          const url = `${baseUrl}/atomicmarket/v1/sales?state=1&collection_name=pixeljourney&schema_name=pixals&immutable_data.WaxRock=${encodeURIComponent(waxRockType)}&sort=price&order=asc&limit=50&page=1`\r\n          const response = await this.fetchWithRetry(url)\r\n          const data: ApiResponse<SaleData[]> = await response.json()\r\n          \r\n          if (data.success && data.data) {\r\n            allWaxRockSales.push(...data.data)\r\n          }\r\n        } catch (error) {\r\n          // Continue with other types if one fails\r\n          logger.warn(`Failed to fetch ${waxRockType} WaxRocks:`, 'ApiService.getWaxRockPixals', error as Error)\r\n        }\r\n      }\r\n      \r\n      // Approach 2: Fallback to client-side filtering if API filtering didn't work\r\n      if (allWaxRockSales.length === 0) {\r\n        const fallbackUrl = `${baseUrl}/atomicmarket/v1/sales?state=1&collection_name=pixeljourney&schema_name=pixals&sort=price&order=asc&limit=100&page=${page}`\r\n        const response = await this.fetchWithRetry(fallbackUrl)\r\n        const data: ApiResponse<SaleData[]> = await response.json()\r\n        \r\n        if (data.success && data.data) {\r\n          // Filter for WaxRock traits client-side\r\n          allWaxRockSales = data.data.filter(sale => {\r\n            if (!sale.assets || !sale.assets[0]) return false\r\n            const asset = sale.assets[0]\r\n            \r\n            // Check immutable_data for WaxRock attribute first\r\n            const waxRock = asset.data?.WaxRock || asset.template?.immutable_data?.WaxRock\r\n            \r\n            // Ensure we have a string value for WaxRock\r\n            if (waxRock && typeof waxRock === 'string') {\r\n              // Explicitly exclude 'none' values and only include valid WaxRock types\r\n              return waxRock !== 'none' && MarketplaceConfigService.isValidWaxRock(waxRock)\r\n            }\r\n            \r\n            // Fallback: check for WaxRock trait names in data using proper config\r\n            // But make sure we're not including 'none' values\r\n            const validWaxRockTypes = waxRockTypes.map(type => type.toLowerCase())\r\n            if (asset.data) {\r\n              return Object.values(asset.data).some(value => {\r\n                if (typeof value === 'string') {\r\n                  const lowerValue = value.toLowerCase()\r\n                  // Explicitly exclude 'none' and only include valid types\r\n                  return lowerValue !== 'none' && validWaxRockTypes.includes(lowerValue)\r\n                }\r\n                return false\r\n              })\r\n            }\r\n            \r\n            return false\r\n          })\r\n        }\r\n      }\r\n      \r\n      // Remove duplicates based on sale_id\r\n      const uniqueSales = allWaxRockSales.filter((sale, index, self) => \r\n        index === self.findIndex(s => s.sale_id === sale.sale_id)\r\n      )\r\n      \r\n      // Sort by price (ascending) and apply pagination\r\n      uniqueSales.sort((a, b) => {\r\n        const priceA = parseFloat(a.listing_price || '0')\r\n        const priceB = parseFloat(b.listing_price || '0')\r\n        return priceA - priceB\r\n      })\r\n      \r\n      // Apply pagination\r\n      const startIndex = (page - 1) * adaptiveLimit\r\n      const paginatedResults = uniqueSales.slice(startIndex, startIndex + adaptiveLimit)\r\n      \r\n      this.updateAdaptiveLimit(baseUrl, adaptiveLimit, true)\r\n      return paginatedResults.map(sale => this.formatSaleData(sale))\r\n      \r\n    } catch (error) {\r\n      this.updateAdaptiveLimit(baseUrl, adaptiveLimit, false)\r\n      ErrorMessageService.logError('ApiService.getWaxRockPixals', error, { limit, adaptiveLimit, page })\r\n      throw error // Re-throw error instead of returning mock data\r\n    }\r\n  }\r\n\r\n  async getPixelIngredients(limit = 20, page = 1): Promise<NFTAsset[]> {\r\n    try {\r\n      // Limit to maximum 50 items per request to avoid HTTP 400 errors\r\n      const safeLimit = Math.min(limit, 50)\r\n      const url = `${this.atomicMarketAPI}/atomicmarket/v1/sales?state=1&collection_name=pixeljourney&schema_name=ingredients&sort=price&order=asc&limit=${safeLimit}&page=${page}`\r\n      \r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<SaleData[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        return data.data.map(sale => this.formatSaleData(sale))\r\n      }\r\n      \r\n      throw new Error('Invalid API response')\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getPixelIngredients', error, { limit, page })\r\n      throw error // Re-throw error instead of returning mock data\r\n    }\r\n  }\r\n\r\n  async getBundleListings(limit = 20, page = 1): Promise<NFTAsset[]> {\r\n    try {\r\n      // Limit to maximum 50 items per request to avoid HTTP 400 errors\r\n      const safeLimit = Math.min(limit, 50)\r\n      // Search for bundle listings in pixeljourney collection with bundle schema\r\n      const url = `${this.atomicMarketAPI}/atomicmarket/v1/sales?state=1&collection_name=pixeljourney&schema_name=bundles&sort=price&order=asc&limit=${safeLimit}&page=${page}`\r\n      \r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<SaleData[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        return data.data.map(sale => this.formatSaleData(sale))\r\n      }\r\n      \r\n      throw new Error('Invalid API response')\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getBundleListings', error, { limit, page })\r\n      throw error // Re-throw error instead of returning mock data\r\n    }\r\n  }\r\n\r\n  async getFriedFactoryNFTs(limit = 20, page = 1): Promise<NFTAsset[]> {\r\n    try {\r\n      // Limit to maximum 50 items per request to avoid HTTP 400 errors\r\n      const safeLimit = Math.min(limit, 50)\r\n      const url = `${this.atomicMarketAPI}/atomicmarket/v1/sales?state=1&collection_name=friedfactory&sort=price&order=asc&limit=${safeLimit}&page=${page}`\r\n      \r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<SaleData[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        return data.data.map(sale => this.formatSaleData(sale))\r\n      }\r\n      \r\n      throw new Error('Invalid API response')\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getFriedFactoryNFTs', error, { limit, page })\r\n      throw error // Re-throw error instead of returning mock data\r\n    }\r\n  }\r\n\r\n  async getCryptoMuffinsNFTs(limit = 20, page = 1): Promise<NFTAsset[]> {\r\n    try {\r\n      // Limit to maximum 50 items per request to avoid HTTP 400 errors\r\n      const safeLimit = Math.min(limit, 50)\r\n      const url = `${this.atomicMarketAPI}/atomicmarket/v1/sales?state=1&collection_name=cryptomuffins&sort=price&order=asc&limit=${safeLimit}&page=${page}`\r\n      \r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<SaleData[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        return data.data.map(sale => this.formatSaleData(sale))\r\n      }\r\n      \r\n      throw new Error('Invalid API response')\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getCryptoMuffinsNFTs', error, { limit, page })\r\n      throw error // Re-throw error instead of returning mock data\r\n    }\r\n  }\r\n\r\n  async getPartnerListings(limit = 16, page = 1): Promise<NFTAsset[]> {\r\n    try {\r\n      // Limit to maximum 50 items per request to avoid HTTP 400 errors\r\n      const safeLimit = Math.min(limit, 50)\r\n      // Partner collections - specific curated collections\r\n      const partnerCollections = MarketplaceConfigService.getPartnerCollectionsSync()\r\n      const collectionQuery = partnerCollections.join(',')\r\n      const url = `${this.atomicMarketAPI}/atomicmarket/v1/sales?state=1&collection_name=${collectionQuery}&sort=created&order=desc&limit=${safeLimit}&page=${page}`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<SaleData[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        return data.data.map(sale => this.formatSaleData(sale))\r\n      }\r\n      \r\n      throw new Error('Invalid API response')\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getPartnerListings', error, { limit, page })\r\n      throw error // Re-throw error instead of returning mock data\r\n    }\r\n  }\r\n\r\n  async getPxApprovedListings(limit = 16, page = 1): Promise<NFTAsset[]> {\r\n    try {\r\n      // Limit to maximum 50 items per request to avoid HTTP 400 errors\r\n      const safeLimit = Math.min(limit, 50)\r\n      // PxApproved collections - approved by Pixel Journey team\r\n      const url = `${this.atomicMarketAPI}/atomicmarket/v1/sales?state=1&collection_name=pixeljourney&sort=created&order=desc&limit=${safeLimit}&page=${page}`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<SaleData[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        return data.data.map(sale => this.formatSaleData(sale))\r\n      }\r\n      \r\n      throw new Error('Invalid API response')\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getPxApprovedListings', error, { limit, page })\r\n      throw error // Re-throw error instead of returning mock data\r\n    }\r\n  }\r\n\r\n  async getAHVerifiedListings(limit = 16, page = 1): Promise<NFTAsset[]> {\r\n    try {\r\n      // Limit to maximum 50 items per request to avoid HTTP 400 errors\r\n      const safeLimit = Math.min(limit, 50)\r\n      // All AtomicHub verified collections - requires Pixal holder verification\r\n      const url = `${this.atomicMarketAPI}/atomicmarket/v1/sales?state=1&verified=true&sort=created&order=desc&limit=${safeLimit}&page=${page}`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<SaleData[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        return data.data.map(sale => this.formatSaleData(sale))\r\n      }\r\n      \r\n      throw new Error('Invalid API response')\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getAHVerifiedListings', error, { limit, page })\r\n      throw error // Re-throw error instead of returning mock data\r\n    }\r\n  }\r\n\r\n  async getAllWaxListings(limit = 16, page = 1): Promise<NFTAsset[]> {\r\n    const baseUrl = this.atomicMarketAPI\r\n    const adaptiveLimit = this.getAdaptiveLimit(baseUrl, limit)\r\n    \r\n    try {\r\n      // All WAX listings - requires Pixal holder verification\r\n      const url = `${baseUrl}/atomicmarket/v1/sales?state=1&sort=created&order=desc&limit=${adaptiveLimit}&page=${page}`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<SaleData[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        this.updateAdaptiveLimit(baseUrl, adaptiveLimit, true)\r\n        return data.data.map(sale => this.formatSaleData(sale))\r\n      }\r\n      \r\n      throw new Error('Invalid API response')\r\n    } catch (error) {\r\n      this.updateAdaptiveLimit(baseUrl, adaptiveLimit, false)\r\n      ErrorMessageService.logError('ApiService.getAllWaxListings', error, { limit, adaptiveLimit, page })\r\n      throw error // Re-throw error instead of returning mock data\r\n    }\r\n  }\r\n\r\n  async getRecentSales(limit = 50): Promise<SaleData[]> {\r\n    try {\r\n      const url = `${this.atomicMarketAPI}/atomicmarket/v1/sales?state=3&limit=${limit}&order=desc&sort=updated`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<SaleData[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        return data.data\r\n      }\r\n      \r\n      throw new Error('Invalid API response')\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getRecentSales', error, { limit })\r\n      return []\r\n    }\r\n  }\r\n\r\n  async getSales(params: AtomicParams = {}): Promise<{\r\n    success: boolean\r\n    data: SaleData[]\r\n    query_total?: number\r\n  }> {\r\n    try {\r\n      const {\r\n        page = 1,\r\n        limit = 100,\r\n        order = 'desc',\r\n        sort = 'updated',\r\n        collection_name,\r\n        schema_name,\r\n        template_id,\r\n        asset_id,\r\n        seller,\r\n        buyer,\r\n        state = '1,3', // Default to listed and sold sales\r\n        symbol = 'WAX',\r\n        min_price,\r\n        max_price,\r\n        before,\r\n        after\r\n      } = params\r\n      \r\n      let url = `${this.atomicMarketAPI}/atomicmarket/v1/sales?page=${page}&limit=${limit}&order=${order}&sort=${sort}&state=${state}&symbol=${symbol}`\r\n      \r\n      if (collection_name) url += `&collection_name=${collection_name}`\r\n      if (schema_name) url += `&schema_name=${schema_name}`\r\n      if (template_id) url += `&template_id=${template_id}`\r\n      if (asset_id) url += `&asset_id=${asset_id}`\r\n      if (seller) url += `&seller=${seller}`\r\n      if (buyer) url += `&buyer=${buyer}`\r\n      if (min_price) url += `&min_price=${min_price}`\r\n      if (max_price) url += `&max_price=${max_price}`\r\n      if (before) url += `&before=${before}`\r\n      if (after) url += `&after=${after}`\r\n      \r\n      const response = await this.fetchWithRetry(url)\r\n      const data = await response.json()\r\n      \r\n      return {\r\n        success: data.success || false,\r\n        data: data.data || [],\r\n        query_total: data.query_total\r\n      }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getSales', error, params)\r\n      return { success: false, data: [] }\r\n    }\r\n  }\r\n\r\n  // Top WAX collections whitelist for better performance and reliability\r\n  private readonly COLLECTION_WHITELIST = [\r\n    'alien.worlds', 'defiminingio', 'pixeljourney', 'crptomuffins', 'kogsofficial',\r\n    'mlb.topps', 'gpk.topps', // 'warsaken', 'pocketsizedp', 'taco', // Removed problematic collections\r\n    'pantheon', 'cbreakgaming', 'akufishheads', 'battleminers', 'twitchytides',\r\n    'novopangeaio', 'fadedmonsuta', 'bcbrawlers', 'nftopiafrens', 'drwawncompany',\r\n    'talesofcrypt', 'official.wax', 'music.worlds', 'gkniftyheads', 'dungeonitems',\r\n    'outlawtroops', 'byronartset1', 'prospectorsg', 'street.hero', 'crewtoonswax'\r\n  ];\r\n\r\n  async getCollections(\r\n    options: {\r\n      limit?: number\r\n      page?: number\r\n      whitelistOnly?: boolean\r\n      author?: string\r\n      match?: string\r\n      order?: 'asc' | 'desc'\r\n      sort?: 'created' | 'name' | 'collection_name'\r\n      singleCollection?: string\r\n    } = {}\r\n  ): Promise<CollectionData[]> {\r\n    try {\r\n      const {\r\n        limit = 20,\r\n        page = 1,\r\n        whitelistOnly = true,\r\n        author,\r\n        match,\r\n        order = 'desc',\r\n        sort = 'created',\r\n        singleCollection\r\n      } = options\r\n\r\n      const params = new URLSearchParams()\r\n      \r\n      // Handle different filtering modes\r\n      if (singleCollection) {\r\n        // Get specific collection only\r\n        params.append('collection_name', singleCollection)\r\n        params.append('limit', '1')\r\n      } else if (whitelistOnly) {\r\n        // Get collections individually from whitelist since collection_whitelist param is not supported\r\n        const collectionsToFetch = this.COLLECTION_WHITELIST.slice(0, Math.min(limit, 20))\r\n        const collectionPromises = collectionsToFetch.map(async (collectionName) => {\r\n          try {\r\n            const response = await this.fetchWithRetry(`${this.atomicAssetsAPI}/atomicassets/v1/collections/${collectionName}`)\r\n            const data = await response.json()\r\n            if (data.success && data.data) {\r\n              return data.data\r\n            }\r\n            return null\r\n          } catch {\r\n            return null\r\n          }\r\n        })\r\n        \r\n        const results = await Promise.all(collectionPromises)\r\n        const validCollections = results.filter(col => col !== null)\r\n        return validCollections\r\n      } else {\r\n        // Get all collections with optional filters\r\n        params.append('limit', Math.min(limit, 100).toString())\r\n        params.append('page', page.toString())\r\n        \r\n        if (author) params.append('author', author)\r\n        if (match) params.append('match', match)\r\n      }\r\n      \r\n      params.append('order', order)\r\n      params.append('sort', sort)\r\n      \r\n      const url = `${this.atomicAssetsAPI}/atomicassets/v1/collections?${params.toString()}`\r\n      \r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<CollectionDetails[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        return data.data\r\n      }\r\n      \r\n      throw new Error('Invalid API response')\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getCollections', error, options)\r\n      // Return fallback collections on error\r\n      return [\r\n        { \r\n          collection_name: 'pixeljourney', \r\n          name: 'Pixel Journey', \r\n          img: '', \r\n          author: 'pixeljourney', \r\n          allow_notify: true,\r\n          authorized_accounts: [],\r\n          notify_accounts: [],\r\n          market_fee: 0,\r\n          created_at_time: '', \r\n          created_at_block: '' \r\n        },\r\n        { \r\n          collection_name: 'friedfactory', \r\n          name: 'Fried Factory', \r\n          img: '', \r\n          author: 'friedfactory', \r\n          allow_notify: true,\r\n          authorized_accounts: [],\r\n          notify_accounts: [],\r\n          market_fee: 0,\r\n          created_at_time: '', \r\n          created_at_block: '' \r\n        }\r\n      ]\r\n    }\r\n  }\r\n\r\n  // Removed loadCollectionsIndividually to prevent mass API calls that spam console errors\r\n\r\n\r\n\r\n  async getMarketStats(): Promise<MarketStats | null> {\r\n    try {\r\n      const url = `${this.atomicAssetsAPI}/atomicmarket/v1/stats/graph`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<MarketStats[]> = await response.json()\r\n      \r\n      if (data.success && data.data && data.data.length > 0) {\r\n        return data.data[data.data.length - 1]\r\n      }\r\n      \r\n      return null\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getMarketStats', error)\r\n      return null\r\n    }\r\n  }\r\n\r\n  // Get individual collection details more efficiently\r\n  async getCollectionDetails(collectionName: string): Promise<CollectionDetails | null> {\r\n    const cacheKey = `collection-${collectionName}`\r\n    \r\n    // Check circuit breaker before making API call\r\n    if (this.isCircuitBreakerOpen(cacheKey)) {\r\n      return null\r\n    }\r\n\r\n    try {\r\n      const url = `${this.atomicAssetsAPI}/atomicassets/v1/collections/${collectionName}`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<CollectionDetails> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        return data.data\r\n      }\r\n      \r\n      return null\r\n    } catch (error) {\r\n      // Record circuit breaker failure to prevent spam\r\n      this.recordCircuitBreakerFailure(cacheKey)\r\n      \r\n      // Only log error if circuit breaker is not open to prevent spam\r\n      if (!this.isCircuitBreakerOpen(cacheKey)) {\r\n        ErrorMessageService.logError('ApiService.getCollectionDetails', error, { collectionName })\r\n      }\r\n      return null\r\n    }\r\n  }\r\n\r\n  async getCollectionSchemas(collectionName: string, limit = 50): Promise<Schema[]> {\r\n    try {\r\n      const url = `${this.atomicAssetsAPI}/atomicassets/v1/schemas?collection_name=${collectionName}&limit=${limit}&order=desc&sort=created`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<Schema[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        return data.data\r\n      }\r\n      \r\n      return []\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getCollectionAssets', error, { collectionName, limit })\r\n      return []\r\n    }\r\n  }\r\n\r\n  async getCollectionTemplates(collectionName: string, schemaName?: string, limit = 50): Promise<TemplateData[]> {\r\n    try {\r\n      let url = `${this.atomicAssetsAPI}/atomicassets/v1/templates?collection_name=${collectionName}&limit=${limit}&order=desc&sort=created`\r\n      if (schemaName) {\r\n        url += `&schema_name=${schemaName}`\r\n      }\r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<TemplateData[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        return data.data\r\n      }\r\n      \r\n      return []\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getCollectionTemplates', error, { collectionName, schemaName, limit })\r\n      return []\r\n    }\r\n  }\r\n\r\n  async getCollectionAssets(collectionName: string, schemaName?: string, templateId?: string, limit = 50): Promise<AssetDetails[]> {\r\n    try {\r\n      let url = `${this.getCurrentAtomicEndpoint()}/atomicmarket/v1/assets?collection_name=${collectionName}&burned=false&limit=${limit}&order=desc&sort=asset_id`\r\n      if (schemaName) {\r\n        url += `&schema_name=${schemaName}`\r\n      }\r\n      if (templateId) {\r\n        url += `&template_id=${templateId}`\r\n      }\r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<AssetDetails[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        return data.data\r\n      }\r\n      \r\n      return []\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getCollectionAssets', error, { collectionName, schemaName, templateId, limit })\r\n      return []\r\n    }\r\n  }\r\n\r\n  async getAssetDetails(assetId: string): Promise<AssetDetails | null> {\r\n    try {\r\n      const url = `${this.atomicAssetsAPI}/atomicassets/v1/assets/${assetId}`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<AssetDetails> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        return data.data\r\n      }\r\n      \r\n      return null\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getAssetDetails', error, { assetId })\r\n      return null\r\n    }\r\n  }\r\n\r\n  // Additional Atomic API endpoints for comprehensive collection data\r\n  async getCollectionStats(collectionName: string): Promise<CollectionAnalytics | null> {\r\n    try {\r\n      const url = `${this.atomicAssetsAPI}/atomicassets/v1/collections/${collectionName}/stats`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<CollectionAnalytics> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        return data.data\r\n      }\r\n      \r\n      return null\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getCollectionSchemas', error, { collectionName })\r\n      return null\r\n    }\r\n  }\r\n\r\n  async getCollectionBurns(collectionName: string, limit = 50): Promise<BurnData[]> {\r\n    try {\r\n      const url = `${this.atomicAssetsAPI}/atomicassets/v1/burns?collection_name=${collectionName}&limit=${limit}&order=desc&sort=created`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<BurnData[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        return data.data\r\n      }\r\n      \r\n      return []\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getCollectionBurns', error, { collectionName, limit })\r\n      return []\r\n    }\r\n  }\r\n\r\n  async getCollectionTransfers(collectionName: string, limit = 50): Promise<TransferData[]> {\r\n    try {\r\n      const url = `${this.atomicAssetsAPI}/atomicassets/v1/transfers?collection_name=${collectionName}&limit=${limit}&order=desc&sort=created`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<TransferData[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        return data.data\r\n      }\r\n      \r\n      return []\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getCollectionTransfers', error, { collectionName, limit })\r\n      return []\r\n    }\r\n  }\r\n\r\n  // HiveBP WAX API integration for enhanced analytics\r\n  async getCollectionVolumeGraph(collectionName: string, days = 30): Promise<CollectionVolumeData[] | null> {\r\n    try {\r\n      const url = `${this.hiveBPAPI}/v3/sales-volume-graph/${days}/${collectionName}`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data = await response.json()\r\n      \r\n      return data\r\n    } catch (error) {\r\n      logger.warn(`HiveBP volume graph not available for ${collectionName}`, 'API', error)\r\n      return null\r\n    }\r\n  }\r\n\r\n  async getCollectionMarketCap(collectionName: string): Promise<number | null> {\r\n    try {\r\n      const url = `${this.hiveBPAPI}/v3/collection-marketcap/${collectionName}`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data = await response.json()\r\n      \r\n      return data\r\n    } catch (error) {\r\n      logger.warn(`HiveBP market cap not available for ${collectionName}`, 'API', error)\r\n      return null\r\n    }\r\n  }\r\n\r\n  async getSimilarCollections(collectionName: string): Promise<SimilarCollection[]> {\r\n    try {\r\n      const url = `${this.hiveBPAPI}/v3/similar-collections/${collectionName}`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data = await response.json()\r\n      \r\n      return data || []\r\n    } catch (error) {\r\n      logger.warn(`HiveBP similar collections not available for ${collectionName}`, 'API', error)\r\n      return []\r\n    }\r\n  }\r\n\r\n  async getCollectionAnalytics(collectionName: string): Promise<CollectionAnalytics | null> {\r\n    try {\r\n      const url = `${this.hiveBPAPI}/v3/collection-stats/${collectionName}`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data = await response.json()\r\n      \r\n      return data\r\n    } catch (error) {\r\n      logger.warn(`HiveBP analytics not available for ${collectionName}`, 'API', error)\r\n      return null\r\n    }\r\n  }\r\n\r\n  // HiveBP API methods for collection statistics\r\n  async getHiveBPMarketCap(collectionName: string): Promise<number | null> {\r\n    try {\r\n      const url = `${this.hiveBPAPI}/v3/marketcap/${collectionName}`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data = await response.json()\r\n      \r\n      return data?.marketcap || null\r\n    } catch (error) {\r\n      logger.warn(`HiveBP market cap not available for ${collectionName}`, 'API', error)\r\n      return null\r\n    }\r\n  }\r\n\r\n  async getHiveBPVolumeDays(collectionName: string, days: number = 1): Promise<number | null> {\r\n    try {\r\n      const url = `${this.hiveBPAPI}/v3/volume/${days}/${collectionName}`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data = await response.json()\r\n      \r\n      return data?.volume || null\r\n    } catch (error) {\r\n      logger.warn(`HiveBP volume data not available for ${collectionName}`, 'API', error)\r\n      return null\r\n    }\r\n  }\r\n\r\n  async getHiveBPFloorPrice(templateId: string): Promise<number | null> {\r\n    try {\r\n      const url = `${this.hiveBPAPI}/v3/floor/${templateId}`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data = await response.json()\r\n      \r\n      return data?.floor_price || null\r\n    } catch (error) {\r\n      logger.warn(`HiveBP floor price not available for template ${templateId}`, 'API', error)\r\n      return null\r\n    }\r\n  }\r\n\r\n  // Enhanced collection stats using HiveBP APIs\r\n  async getEnhancedCollectionStats(collectionName: string): Promise<{\r\n    marketCap: number | null\r\n    volume24h: number | null\r\n    volume7d: number | null\r\n    floorPrice: number | null\r\n  }> {\r\n    try {\r\n      const [marketCap, volume24h, volume7d] = await Promise.all([\r\n        this.getHiveBPMarketCap(collectionName),\r\n        this.getHiveBPVolumeDays(collectionName, 1),\r\n        this.getHiveBPVolumeDays(collectionName, 7)\r\n      ])\r\n\r\n      // For floor price, we need to get a template ID from the collection first\r\n      let floorPrice: number | null = null\r\n      try {\r\n        const templates = await this.getCollectionTemplates(collectionName, undefined, 1)\r\n        if (templates.length > 0) {\r\n          floorPrice = await this.getHiveBPFloorPrice(templates[0].template_id)\r\n        }\r\n      } catch (error) {\r\n        logger.warn(`Could not fetch floor price for ${collectionName}`, 'API', error)\r\n      }\r\n\r\n      return {\r\n        marketCap,\r\n        volume24h,\r\n        volume7d,\r\n        floorPrice\r\n      }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getCollectionStats', error, { collectionName })\r\n      return {\r\n        marketCap: null,\r\n        volume24h: null,\r\n        volume7d: null,\r\n        floorPrice: null\r\n      }\r\n    }\r\n  }\r\n\r\n  // Get collection top sales\r\n  async getCollectionTopSales(collectionName: string, limit = 20): Promise<SaleData[]> {\r\n    try {\r\n      const url = `${this.atomicAssetsAPI}/atomicmarket/v1/sales?collection_name=${collectionName}&state=3&limit=${limit}&order=desc&sort=price`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<SaleData[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        return data.data\r\n      }\r\n      return []\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getCollectionTopSales', error, { collectionName, limit })\r\n      return []\r\n    }\r\n  }\r\n\r\n  // Get collection floor price\r\n  async getCollectionFloorPrice(collectionName: string): Promise<{ floorPrice: number }> {\r\n    try {\r\n      const url = `${this.atomicAssetsAPI}/atomicmarket/v1/sales?collection_name=${collectionName}&state=1&limit=1&order=asc&sort=price`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<SaleData[]> = await response.json()\r\n      \r\n      if (data.success && data.data && data.data.length > 0) {\r\n        const floorPrice = parseFloat(data.data[0].listing_price) / 100000000 // Convert from atomic units to WAX\r\n        return { floorPrice }\r\n      }\r\n      \r\n      return { floorPrice: 0 }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getCollectionFloorPrice', error, { collectionName })\r\n      return { floorPrice: 0 }\r\n    }\r\n  }\r\n\r\n  // Get collection holder statistics\r\n  async getCollectionHolders(collectionName: string, limit = 50, offset = 0): Promise<HolderData[]> {\r\n    try {\r\n      let url = `${this.atomicAssetsAPI}/atomicassets/v1/accounts?collection_name=${collectionName}&limit=${limit}&order=desc&sort=assets`\r\n      if (offset > 0) {\r\n        url += `&page=${Math.floor(offset / limit) + 1}`\r\n      }\r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<HolderData[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        return data.data\r\n      }\r\n      \r\n      return []\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getCollectionHolders', error, { collectionName, limit, offset })\r\n      return []\r\n    }\r\n  }\r\n\r\n  // NFT Trading Data API methods using AtomicAssets\r\n  async getNFTTradingStats(): Promise<CollectionAnalytics | null> {\r\n    try {\r\n      // Get 24h sales data\r\n      const salesResponse = await this.fetchWithRetry(\r\n        `${this.atomicMarketAPI}/atomicmarket/v1/sales?state=3&after=${Date.now() - 86400000}&limit=1000`\r\n      )\r\n      const salesData = await salesResponse.json()\r\n      \r\n      // Calculate daily volume and sales count\r\n      let dailyVolume = 0\r\n      let dailySales = 0\r\n      \r\n      if (salesData.success && salesData.data) {\r\n        dailySales = salesData.data.length\r\n        dailyVolume = salesData.data.reduce((total: number, sale: SaleData) => {\r\n          return total + (sale.price ? (parseFloat(sale.price.amount) / Math.pow(10, sale.price.token_precision)) : 0)\r\n        }, 0)\r\n      }\r\n      \r\n      // Get active listings count\r\n      const listingsResponse = await this.fetchWithRetry(\r\n        `${this.atomicMarketAPI}/atomicmarket/v1/sales?state=1&limit=1`\r\n      )\r\n      const listingsData = await listingsResponse.json()\r\n      const activeListings = listingsData.success ? parseInt(listingsData.query_time) : 0\r\n      \r\n      return {\r\n        collection_name: 'global',\r\n        dailyVolume: formatNumber(dailyVolume),\r\n        dailySales,\r\n        totalTransactions: dailySales,\r\n        activeListings,\r\n        averagePrice: dailySales > 0 ? formatNumber(dailyVolume / dailySales) : '0'\r\n      }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getNFTTradingStats', error)\r\n      return null\r\n    }\r\n  }\r\n\r\n  async getTopCollectionsByVolume(limit: number = 10): Promise<CollectionDetails[]> {\r\n    try {\r\n      // Get collections with recent sales\r\n      const collectionsResponse = await this.fetchWithRetry(\r\n        `${this.atomicMarketAPI}/atomicmarket/v1/stats/collections?limit=${limit}&sort=volume`\r\n      )\r\n      const collectionsData = await collectionsResponse.json()\r\n      \r\n      if (collectionsData.success && collectionsData.data) {\r\n        return collectionsData.data.map((collection: CollectionDetails) => ({\r\n          collection_name: collection.collection_name,\r\n          volume_24h: collection.volume ? formatWAXPrice(parseFloat(collection.volume) / 100000000) : '0 WAX',\r\n          sales_24h: parseInt(collection.sales || '0') || 0,\r\n          floor_price: collection.floor_price ? formatWAXPrice(parseFloat(collection.floor_price) / 100000000) : '0 WAX',\r\n          assets_count: collection.assets || '0'\r\n        }))\r\n      }\r\n      \r\n      return []\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getTopCollectionsByVolume', error, { limit })\r\n      return []\r\n    }\r\n  }\r\n\r\n  async getRecentNFTTrades(limit: number = 20): Promise<SaleData[]> {\r\n    try {\r\n      const response = await this.fetchWithRetry(\r\n        `${this.atomicMarketAPI}/atomicmarket/v1/sales?state=3&limit=${limit}&sort=updated`\r\n      )\r\n      const data = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        return data.data.map((sale: SaleData) => ({\r\n          sale_id: sale.sale_id,\r\n          collection_name: sale.collection_name || sale.assets[0]?.collection?.collection_name || 'Unknown',\r\n          asset_name: sale.assets[0]?.name || `Asset #${sale.assets[0]?.asset_id}`,\r\n          price: sale.price ? formatWAXPrice(parseFloat(sale.price.amount) / Math.pow(10, sale.price.token_precision)) : '0 WAX',\r\n          buyer: sale.buyer,\r\n          seller: sale.seller,\r\n          timestamp: sale.updated_at_time\r\n        }))\r\n      }\r\n      \r\n      return []\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getNFTTradingStats', error, { limit })\r\n      return []\r\n    }\r\n  }\r\n\r\n  async getUserInventory(account: string, limit: number = 1000): Promise<NFTAsset[]> {\r\n    try {\r\n      const collectionQuery = this.approvedCollections.join(',')\r\n      const url = `${this.getCurrentAtomicEndpoint()}/atomicassets/v1/assets?owner=${account}&collection_name=${collectionQuery}&burned=false&limit=${limit}&order=desc&sort=asset_id`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<AssetData[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        return data.data.map(asset => ({\r\n          sale_id: '',\r\n          asset_id: asset.asset_id || '',\r\n          name: asset.name || `${asset.collection?.collection_name || 'Unknown'} #${asset.asset_id}`,\r\n          image: this.getAssetImage(asset),\r\n          price: 'Not for sale',\r\n          seller: account,\r\n          collection: asset.collection?.collection_name || 'Unknown',\r\n          schema: asset.schema?.schema_name || 'Unknown',\r\n          template_id: asset.template?.template_id || '0',\r\n          template_mint: parseInt(asset.template?.template_id || '0') || 0,\r\n          max_supply: asset.template?.max_supply || '0',\r\n          traits: Object.fromEntries(\r\n            Object.entries(asset.data || {}).map(([key, value]) => [key, value ?? ''])\r\n          )\r\n        }))\r\n      }\r\n      \r\n      throw new Error('Invalid API response')\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getUserInventory', error, { account })\r\n      return []\r\n    }\r\n  }\r\n\r\n  async getUserInventoryPaginated(account: string, page: number = 1, limit: number = 1000): Promise<{ assets: NFTAsset[], hasMore: boolean, total: number }> {\r\n    try {\r\n      const collectionQuery = this.approvedCollections.join(',')\r\n      const url = `${this.getCurrentAtomicEndpoint()}/atomicassets/v1/assets?owner=${account}&collection_name=${collectionQuery}&burned=false&limit=${limit}&page=${page}&order=desc&sort=asset_id`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<AssetData[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        const assets = data.data.map(asset => ({\r\n          sale_id: '',\r\n          asset_id: asset.asset_id || '',\r\n          name: asset.name || `${asset.collection?.collection_name || 'Unknown'} #${asset.asset_id}`,\r\n          image: this.getAssetImage(asset),\r\n          price: 'Not for sale',\r\n          seller: account,\r\n          collection: asset.collection?.collection_name || 'Unknown',\r\n          schema: asset.schema?.schema_name || 'Unknown',\r\n          template_id: asset.template?.template_id || '0',\r\n          template_mint: parseInt(asset.template?.template_id || '0') || 0,\r\n          max_supply: asset.template?.max_supply || '0',\r\n          traits: Object.fromEntries(\r\n            Object.entries(asset.data || {}).map(([key, value]) => [key, value ?? ''])\r\n          )\r\n        }))\r\n        \r\n        // Check if there are more items by making a request for the next page\r\n        const hasMore = data.data.length === limit\r\n        \r\n        // Get total count (this is an approximation since AtomicAssets API doesn't provide total count directly)\r\n        const total = (page - 1) * limit + data.data.length + (hasMore ? 1 : 0)\r\n        \r\n        return { assets, hasMore, total }\r\n      }\r\n      \r\n      throw new Error('Invalid API response')\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getUserInventoryPaginated', error, { account, page, limit })\r\n      return { assets: [], hasMore: false, total: 0 }\r\n    }\r\n  }\r\n\r\n  async getUserInventoryAll(account: string, page: number = 1, limit: number = 1000): Promise<{ assets: NFTAsset[], total: number, hasMore: boolean, currentPage: number }> {\r\n    try {\r\n      // Remove collection restriction to get ALL user NFTs\r\n      const url = `${this.getCurrentAtomicEndpoint()}/atomicassets/v1/assets?owner=${account}&burned=false&limit=${limit}&page=${page}&order=desc&sort=asset_id`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<AssetData[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        const assets = data.data.map(asset => ({\r\n          sale_id: '',\r\n          asset_id: asset.asset_id || '',\r\n          name: asset.name || `${asset.collection?.collection_name || 'Unknown'} #${asset.asset_id}`,\r\n          image: this.getAssetImage(asset),\r\n          video: this.getAssetVideo(asset),\r\n          price: 'Not for sale',\r\n          seller: account,\r\n          collection: asset.collection?.collection_name || 'Unknown',\r\n          schema: asset.schema?.schema_name || 'Unknown',\r\n          template_id: asset.template?.template_id || '0',\r\n          template_mint: parseInt(asset.template?.template_id || '0') || 0,\r\n          max_supply: asset.template?.max_supply || '0',\r\n          traits: Object.fromEntries(\r\n            Object.entries(asset.data || {}).map(([key, value]) => [key, value ?? ''])\r\n          )\r\n        }))\r\n        \r\n        const hasMore = data.data.length === limit\r\n        return { \r\n          assets, \r\n          total: ((page - 1) * limit) + assets.length + (hasMore ? 1 : 0), \r\n          hasMore,\r\n          currentPage: page\r\n        }\r\n      }\r\n      \r\n      return { assets: [], total: 0, hasMore: false, currentPage: page }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getUserInventoryAll', error, { account, page, limit })\r\n      return { assets: [], total: 0, hasMore: false, currentPage: page }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get user inventory for a specific collection - more efficient for filtered views\r\n   */\r\n  async getUserInventoryByCollection(account: string, collectionName: string, limit: number = 1000, offset: number = 0): Promise<{ assets: NFTAsset[], total: number, hasMore: boolean }> {\r\n    try {\r\n      const url = `${this.getCurrentAtomicEndpoint()}/atomicassets/v1/assets?owner=${account}&collection_name=${collectionName}&burned=false&limit=${limit}&offset=${offset}&order=desc&sort=asset_id`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<AssetData[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        const assets = data.data.map(asset => ({\r\n          sale_id: '',\r\n          asset_id: asset.asset_id || '',\r\n          name: asset.name || `${asset.collection?.collection_name || 'Unknown'} #${asset.asset_id}`,\r\n          image: this.getAssetImage(asset),\r\n          price: 'Not for sale',\r\n          seller: account,\r\n          collection: asset.collection?.collection_name || 'Unknown',\r\n          schema: asset.schema?.schema_name || 'Unknown',\r\n          template_id: asset.template?.template_id || '0',\r\n          template_mint: parseInt(asset.template?.template_id || '0') || 0,\r\n          max_supply: asset.template?.max_supply || '0',\r\n          traits: Object.fromEntries(\r\n            Object.entries(asset.data || {}).map(([key, value]) => [key, value ?? ''])\r\n          )\r\n        }))\r\n        \r\n        const hasMore = data.data.length === limit\r\n        return { assets, total: offset + assets.length + (hasMore ? 1 : 0), hasMore }\r\n      }\r\n      \r\n      return { assets: [], total: 0, hasMore: false }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getUserInventoryByCollection', error, { account, collectionName, limit, offset })\r\n      return { assets: [], total: 0, hasMore: false }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get user inventory for a specific schema within a collection - most precise query\r\n   */\r\n  async getUserInventoryBySchema(account: string, collectionName: string, schemaName: string, limit: number = 1000, offset: number = 0): Promise<{ assets: NFTAsset[], total: number, hasMore: boolean }> {\r\n    try {\r\n      const url = `${this.getCurrentAtomicEndpoint()}/atomicassets/v1/assets?owner=${account}&collection_name=${collectionName}&schema_name=${schemaName}&burned=false&limit=${limit}&offset=${offset}&order=desc&sort=asset_id`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<AssetData[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        const assets = data.data.map(asset => ({\r\n          sale_id: '',\r\n          asset_id: asset.asset_id || '',\r\n          name: asset.name || `${asset.collection?.collection_name || 'Unknown'} #${asset.asset_id}`,\r\n          image: this.getAssetImage(asset),\r\n          price: 'Not for sale',\r\n          seller: account,\r\n          collection: asset.collection?.collection_name || 'Unknown',\r\n          schema: asset.schema?.schema_name || 'Unknown',\r\n          template_id: asset.template?.template_id || '0',\r\n          template_mint: parseInt(asset.template?.template_id || '0') || 0,\r\n          max_supply: asset.template?.max_supply || '0',\r\n          traits: Object.fromEntries(\r\n            Object.entries(asset.data || {}).map(([key, value]) => [key, value ?? ''])\r\n          )\r\n        }))\r\n        \r\n        // Simple hasMore calculation - if we got a full page, there might be more\r\n        const hasMore = data.data.length === limit\r\n        \r\n        return { assets, total: offset + assets.length + (hasMore ? 1 : 0), hasMore }\r\n      }\r\n      \r\n      return { assets: [], total: 0, hasMore: false }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getUserInventoryBySchema', error, { account, collectionName, schemaName, limit, offset })\r\n      return { assets: [], total: 0, hasMore: false }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get user inventory overview - efficient for large inventories (15-20k+ assets)\r\n   * Returns collection counts and basic stats without fetching all assets\r\n   */\r\n  async getUserInventoryOverview(account: string): Promise<{\r\n    totalAssets: number\r\n    collections: Array<{ name: string, count: number, schema_counts: Record<string, number> }>\r\n    topCollections: Array<{ name: string, count: number }>\r\n  }> {\r\n    try {\r\n      // Use WAX Chain API for efficient overview\r\n      const tableUrl = `${API_ENDPOINTS.WAX_CHAIN.EOSRIO}/v1/chain/get_table_rows`\r\n      const response = await fetch(tableUrl, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          json: true,\r\n          code: 'atomicassets',\r\n          scope: account,\r\n          table: 'assets',\r\n          limit: 1000,\r\n          reverse: false\r\n        })\r\n      })\r\n      \r\n      const data = await response.json()\r\n      const collections = new Map<string, { count: number, schemas: Map<string, number> }>()\r\n      let totalAssets = 0\r\n      \r\n      interface AssetRow {\r\n        collection_name?: string\r\n        schema_name?: string\r\n      }\r\n      \r\n      if (data.rows) {\r\n        data.rows.forEach((row: AssetRow) => {\r\n          if (!row.collection_name) return\r\n          \r\n          totalAssets++\r\n          const collectionName = row.collection_name\r\n          const schemaName = row.schema_name || 'unknown'\r\n          \r\n          if (!collections.has(collectionName)) {\r\n            collections.set(collectionName, { count: 0, schemas: new Map() })\r\n          }\r\n          \r\n          const collection = collections.get(collectionName)!\r\n          collection.count++\r\n          collection.schemas.set(schemaName, (collection.schemas.get(schemaName) || 0) + 1)\r\n        })\r\n      }\r\n      \r\n      // Convert to array and sort by count\r\n      const collectionsArray = Array.from(collections.entries()).map(([name, data]) => ({\r\n        name,\r\n        count: data.count,\r\n        schema_counts: Object.fromEntries(data.schemas)\r\n      })).sort((a, b) => b.count - a.count)\r\n      \r\n      return {\r\n        totalAssets,\r\n        collections: collectionsArray,\r\n        topCollections: collectionsArray.slice(0, 10)\r\n      }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getUserInventoryOverview', error, { account })\r\n      // Fallback to AtomicAssets API count\r\n      try {\r\n        const fallbackUrl = `${this.atomicEndpoints[this.currentEndpointIndex]}/atomicassets/v1/assets?owner=${account}&page=1&limit=1`\r\n        const fallbackResponse = await this.fetchWithRetry(fallbackUrl)\r\n        const fallbackData = await fallbackResponse.json()\r\n        const totalAssets = fallbackData.success ? (fallbackData.query_total || 0) : 0\r\n        \r\n        return {\r\n          totalAssets,\r\n          collections: [],\r\n          topCollections: []\r\n        }\r\n      } catch (fallbackError) {\r\n        ErrorMessageService.logError('ApiService.getUserInventoryOverview.fallback', fallbackError, { account })\r\n        return { totalAssets: 0, collections: [], topCollections: [] }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get user inventory with lazy loading optimization for large inventories\r\n   * Uses higher limits and caching for better performance\r\n   */\r\n  async getUserInventoryOptimized(account: string, options: {\r\n    page?: number\r\n    limit?: number\r\n    collectionName?: string\r\n    schemaName?: string\r\n    useCache?: boolean\r\n    cacheTTL?: number\r\n  } = {}): Promise<{ assets: NFTAsset[], total: number, hasMore: boolean, currentPage: number }> {\r\n    const {\r\n      page = 1,\r\n      limit = 1000, // Use higher default limit\r\n      collectionName,\r\n      schemaName,\r\n      useCache = true,\r\n      cacheTTL = 300000 // 5 minutes\r\n    } = options\r\n    \r\n    // Create cache key\r\n    const cacheKey = `inventory_${account}_${page}_${limit}_${collectionName || 'all'}_${schemaName || 'all'}`\r\n    \r\n    // Check cache first\r\n    if (useCache) {\r\n      const cached = this.getFromCache<{ assets: NFTAsset[], total: number, hasMore: boolean, currentPage: number }>(cacheKey)\r\n      if (cached) return cached\r\n    }\r\n    \r\n    try {\r\n      let url = `${this.atomicEndpoints[this.currentEndpointIndex]}/atomicassets/v1/assets?owner=${account}&burned=false&limit=${limit}&page=${page}&order=desc&sort=asset_id`\r\n      \r\n      // Add collection filter if specified\r\n      if (collectionName && collectionName !== 'all') {\r\n        url += `&collection_name=${collectionName}`\r\n      }\r\n      // When collectionName is 'all', undefined, or empty, don't add collection filter\r\n      // This allows users to see ALL their NFTs from any collection\r\n      \r\n      // Add schema filter if specified\r\n      if (schemaName) {\r\n        url += `&schema_name=${schemaName}`\r\n      }\r\n      \r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<AssetData[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        const assets = data.data.map(asset => ({\r\n          sale_id: '',\r\n          asset_id: asset.asset_id || '',\r\n          name: asset.name || `${asset.collection?.collection_name || 'Unknown'} #${asset.asset_id}`,\r\n          image: this.getAssetImage(asset),\r\n          price: 'Not for sale',\r\n          seller: account,\r\n          collection: asset.collection?.collection_name || 'Unknown',\r\n          schema: asset.schema?.schema_name || 'Unknown',\r\n          template_id: asset.template?.template_id || '0',\r\n          template_mint: parseInt(asset.template?.template_id || '0') || 0,\r\n          max_supply: asset.template?.max_supply || '0',\r\n          traits: Object.fromEntries(\r\n            Object.entries(asset.data || {}).map(([key, value]) => [key, value ?? ''])\r\n          )\r\n        }))\r\n        \r\n        const hasMore = data.data.length === limit\r\n        const result = {\r\n          assets,\r\n          total: (data as { query_total?: number }).query_total || (((page - 1) * limit) + assets.length + (hasMore ? 1 : 0)),\r\n          hasMore,\r\n          currentPage: page\r\n        }\r\n        \r\n        // Cache the result\r\n        if (useCache) {\r\n          this.setCache(cacheKey, result, cacheTTL)\r\n        }\r\n        \r\n        return result\r\n      }\r\n      \r\n      return { assets: [], total: 0, hasMore: false, currentPage: page }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getUserInventoryOptimized', error, { account, page, limit, collectionName, schemaName })\r\n      return { assets: [], total: 0, hasMore: false, currentPage: page }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Background batch fetcher for large inventories\r\n   * Fetches data in chunks with delays to avoid rate limits\r\n   */\r\n  async getUserInventoryBatch(account: string, options: {\r\n    batchSize?: number\r\n    maxBatches?: number\r\n    delayMs?: number\r\n    collectionName?: string\r\n    onProgress?: (progress: { current: number, total: number, assets: NFTAsset[], errors: string[] }) => void\r\n    maxRetries?: number\r\n    onError?: (error: Error, batchNumber: number, willRetry: boolean) => void\r\n  } = {}): Promise<{ assets: NFTAsset[], errors: string[], partialSuccess: boolean }> {\r\n    const {\r\n      batchSize = 1000,\r\n      maxBatches = 20, // Max 20k assets\r\n      delayMs = 500, // 500ms delay between batches\r\n      collectionName,\r\n      onProgress,\r\n      maxRetries = 3,\r\n      onError\r\n    } = options\r\n    \r\n    const allAssets: NFTAsset[] = []\r\n    const errors: string[] = []\r\n    let currentBatch = 1\r\n    let hasMore = true\r\n    let consecutiveFailures = 0\r\n    const maxConsecutiveFailures = 3\r\n    \r\n    while (hasMore && currentBatch <= maxBatches && consecutiveFailures < maxConsecutiveFailures) {\r\n      let batchSuccess = false\r\n      let lastError: Error | null = null\r\n      \r\n      // Retry logic for individual batch\r\n      for (let retryAttempt = 0; retryAttempt <= maxRetries; retryAttempt++) {\r\n        try {\r\n          if (retryAttempt > 0) {\r\n            // Calculate adaptive delay based on consecutive failures and retry attempt\r\n            const adaptiveDelay = delayMs * Math.pow(1.5, consecutiveFailures)\r\n            const retryDelay = Math.min(1000 * Math.pow(2, retryAttempt - 1) + adaptiveDelay, 10000)\r\n            await new Promise(resolve => setTimeout(resolve, retryDelay))\r\n          }\r\n          \r\n          const result = await this.getUserInventoryOptimized(account, {\r\n            page: currentBatch,\r\n            limit: batchSize,\r\n            collectionName,\r\n            useCache: false // Don't cache individual batches\r\n          })\r\n          \r\n          // Success - add assets and update state\r\n          allAssets.push(...result.assets)\r\n          hasMore = result.hasMore\r\n          batchSuccess = true\r\n          consecutiveFailures = 0\r\n          \r\n          // Call progress callback\r\n          if (onProgress) {\r\n            onProgress({\r\n              current: currentBatch,\r\n              total: Math.min(maxBatches, Math.ceil(result.total / batchSize)),\r\n              assets: [...allAssets],\r\n              errors: [...errors]\r\n            })\r\n          }\r\n          \r\n          break // Exit retry loop on success\r\n          \r\n        } catch (error) {\r\n          lastError = error as Error\r\n          const willRetry = retryAttempt < maxRetries\r\n          \r\n          // Call error callback\r\n          if (onError) {\r\n            onError(lastError, currentBatch, willRetry)\r\n          }\r\n          \r\n          // Log the error with context\r\n          ErrorMessageService.logError(\r\n            `ApiService.getUserInventoryBatch.batch${currentBatch}.attempt${retryAttempt + 1}`,\r\n            lastError,\r\n            { account, batchSize, currentBatch, retryAttempt }\r\n          )\r\n          \r\n          // If this is the last retry attempt, record the failure\r\n          if (!willRetry) {\r\n            const errorMsg = `Batch ${currentBatch} failed after ${maxRetries + 1} attempts: ${lastError.message}`\r\n            errors.push(errorMsg)\r\n            consecutiveFailures++\r\n            \r\n            // For critical errors (auth, network), stop immediately\r\n            if (this.isCriticalError(lastError)) {\r\n              ErrorMessageService.logError(\r\n                'ApiService.getUserInventoryBatch.criticalError',\r\n                lastError,\r\n                { account, currentBatch, errorType: 'critical' }\r\n              )\r\n              return {\r\n                assets: allAssets,\r\n                errors: [...errors, 'Critical error encountered, stopping batch processing'],\r\n                partialSuccess: allAssets.length > 0\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      \r\n      // Move to next batch\r\n      currentBatch++\r\n      \r\n      // Add adaptive delay between batches\r\n      if (hasMore && currentBatch <= maxBatches && batchSuccess) {\r\n        const adaptiveDelay = delayMs * Math.pow(1.2, Math.min(consecutiveFailures, 3))\r\n        await new Promise(resolve => setTimeout(resolve, adaptiveDelay))\r\n      }\r\n    }\r\n    \r\n    // Final error logging if we stopped due to consecutive failures\r\n    if (consecutiveFailures >= maxConsecutiveFailures) {\r\n      const errorMsg = `Stopped processing due to ${consecutiveFailures} consecutive batch failures`\r\n      errors.push(errorMsg)\r\n      ErrorMessageService.logError(\r\n        'ApiService.getUserInventoryBatch.tooManyFailures',\r\n        new Error(errorMsg),\r\n        { account, currentBatch, consecutiveFailures }\r\n      )\r\n    }\r\n    \r\n    return {\r\n      assets: allAssets,\r\n      errors,\r\n      partialSuccess: allAssets.length > 0 && (errors.length > 0 || consecutiveFailures > 0)\r\n    }\r\n  }\r\n  \r\n  /**\r\n    * Determines if an error is critical and should stop batch processing\r\n    */\r\n   private isCriticalError(error: Error): boolean {\r\n     const message = error.message.toLowerCase()\r\n     return (\r\n       message.includes('unauthorized') ||\r\n       message.includes('forbidden') ||\r\n       message.includes('invalid account') ||\r\n       message.includes('network error') ||\r\n       message.includes('dns') ||\r\n       message.includes('connection refused')\r\n     )\r\n   }\r\n   \r\n   /**\r\n    * Generic batch operation wrapper with error handling and retry logic\r\n    * Can be used by other services for consistent batch processing\r\n    */\r\n   async executeBatchOperation<T, R>(\r\n     items: T[],\r\n     batchProcessor: (batch: T[], batchIndex: number) => Promise<R[]>,\r\n     options: {\r\n       batchSize?: number\r\n       maxRetries?: number\r\n       delayMs?: number\r\n       onProgress?: (progress: { completed: number, total: number, errors: string[] }) => void\r\n       onError?: (error: Error, batchIndex: number, willRetry: boolean) => void\r\n       stopOnCriticalError?: boolean\r\n     } = {}\r\n   ): Promise<{ results: R[], errors: string[], partialSuccess: boolean }> {\r\n     const {\r\n       batchSize = 100,\r\n       maxRetries = 3,\r\n       delayMs = 500,\r\n       onProgress,\r\n       onError,\r\n       stopOnCriticalError = true\r\n     } = options\r\n     \r\n     const results: R[] = []\r\n     const errors: string[] = []\r\n     const batches = this.chunkArray(items, batchSize)\r\n     let consecutiveFailures = 0\r\n     const maxConsecutiveFailures = 3\r\n     \r\n     for (let batchIndex = 0; batchIndex < batches.length; batchIndex++) {\r\n       const batch = batches[batchIndex]\r\n       let batchSuccess = false\r\n       let lastError: Error | null = null\r\n       \r\n       // Retry logic for individual batch\r\n       for (let retryAttempt = 0; retryAttempt <= maxRetries; retryAttempt++) {\r\n         try {\r\n           if (retryAttempt > 0) {\r\n             // Exponential backoff for retries\r\n             const retryDelay = Math.min(1000 * Math.pow(2, retryAttempt - 1), 10000)\r\n             await new Promise(resolve => setTimeout(resolve, retryDelay))\r\n           }\r\n           \r\n           const batchResults = await batchProcessor(batch, batchIndex)\r\n           results.push(...batchResults)\r\n           batchSuccess = true\r\n           consecutiveFailures = 0\r\n           \r\n           // Call progress callback\r\n           if (onProgress) {\r\n             onProgress({\r\n               completed: batchIndex + 1,\r\n               total: batches.length,\r\n               errors: [...errors]\r\n             })\r\n           }\r\n           \r\n           break // Exit retry loop on success\r\n           \r\n         } catch (error) {\r\n           lastError = error as Error\r\n           const willRetry = retryAttempt < maxRetries\r\n           \r\n           // Call error callback\r\n           if (onError) {\r\n             onError(lastError, batchIndex, willRetry)\r\n           }\r\n           \r\n           // Log the error with context\r\n           ErrorMessageService.logError(\r\n             `ApiService.executeBatchOperation.batch${batchIndex}.attempt${retryAttempt + 1}`,\r\n             lastError,\r\n             { batchIndex, retryAttempt, batchSize: batch.length }\r\n           )\r\n           \r\n           // If this is the last retry attempt, record the failure\r\n           if (!willRetry) {\r\n             const errorMsg = `Batch ${batchIndex} failed after ${maxRetries + 1} attempts: ${lastError.message}`\r\n             errors.push(errorMsg)\r\n             consecutiveFailures++\r\n             \r\n             // For critical errors, stop immediately if configured\r\n             if (stopOnCriticalError && this.isCriticalError(lastError)) {\r\n               ErrorMessageService.logError(\r\n                 'ApiService.executeBatchOperation.criticalError',\r\n                 lastError,\r\n                 { batchIndex, errorType: 'critical' }\r\n               )\r\n               return {\r\n                 results,\r\n                 errors: [...errors, 'Critical error encountered, stopping batch processing'],\r\n                 partialSuccess: results.length > 0\r\n               }\r\n             }\r\n           }\r\n         }\r\n       }\r\n       \r\n       // Stop if too many consecutive failures\r\n       if (consecutiveFailures >= maxConsecutiveFailures) {\r\n         const errorMsg = `Stopped processing due to ${consecutiveFailures} consecutive batch failures`\r\n         errors.push(errorMsg)\r\n         ErrorMessageService.logError(\r\n           'ApiService.executeBatchOperation.tooManyFailures',\r\n           new Error(errorMsg),\r\n           { batchIndex, consecutiveFailures }\r\n         )\r\n         break\r\n       }\r\n       \r\n       // Add adaptive delay between batches\r\n       if (batchIndex < batches.length - 1 && batchSuccess) {\r\n         const adaptiveDelay = delayMs * Math.pow(1.2, Math.min(consecutiveFailures, 3))\r\n         await new Promise(resolve => setTimeout(resolve, adaptiveDelay))\r\n       }\r\n     }\r\n     \r\n     return {\r\n       results,\r\n       errors,\r\n       partialSuccess: results.length > 0 && errors.length > 0\r\n     }\r\n   }\r\n   \r\n   /**\r\n    * Utility method to chunk an array into smaller batches\r\n    */\r\n   private chunkArray<T>(array: T[], chunkSize: number): T[][] {\r\n     const chunks: T[][] = []\r\n     for (let i = 0; i < array.length; i += chunkSize) {\r\n       chunks.push(array.slice(i, i + chunkSize))\r\n     }\r\n     return chunks\r\n   }\r\n\r\n  /**\r\n   * Get user inventory with optional collection filtering - for inventory page with dropdown\r\n   */\r\n  async getUserInventoryWithFilter(account: string, page: number = 1, limit: number = 1000, collectionName?: string): Promise<{ assets: NFTAsset[], total: number, hasMore: boolean, currentPage: number }> {\r\n    try {\r\n      let url = `${this.getCurrentAtomicEndpoint()}/atomicassets/v1/assets?owner=${account}&burned=false&limit=${limit}&page=${page}&order=desc&sort=asset_id`\r\n      \r\n      // Add collection filter if specified\r\n      if (collectionName && collectionName !== 'all') {\r\n        url += `&collection_name=${collectionName}`\r\n      }\r\n      // When collectionName is 'all' or undefined, don't add any collection filter\r\n      // This allows users to see ALL their NFTs from any collection\r\n      \r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<AssetData[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        const assets = data.data.map(asset => ({\r\n          sale_id: '',\r\n          asset_id: asset.asset_id || '',\r\n          name: asset.name || `${asset.collection?.collection_name || 'Unknown'} #${asset.asset_id}`,\r\n          image: this.getAssetImage(asset),\r\n          video: this.getAssetVideo(asset),\r\n          price: 'Not for sale',\r\n          seller: account,\r\n          collection: asset.collection?.collection_name || 'Unknown',\r\n          schema: asset.schema?.schema_name || 'Unknown',\r\n          template_id: asset.template?.template_id || '0',\r\n          template_mint: parseInt(asset.template?.template_id || '0') || 0,\r\n          max_supply: asset.template?.max_supply || '0',\r\n          traits: Object.fromEntries(\r\n            Object.entries(asset.data || {}).map(([key, value]) => [key, value ?? ''])\r\n          )\r\n        }))\r\n        \r\n        // Simple hasMore calculation - if we got a full page, there might be more\r\n        const hasMore = data.data.length === limit\r\n        \r\n        return { \r\n          assets, \r\n          total: (page - 1) * limit + assets.length + (hasMore ? 1 : 0), \r\n          hasMore,\r\n          currentPage: page\r\n        }\r\n      }\r\n      \r\n      return { assets: [], total: 0, hasMore: false, currentPage: page }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getUserInventoryWithFilter', error, { account, page, limit, collectionName })\r\n      return { assets: [], total: 0, hasMore: false, currentPage: page }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Enhanced user inventory method with comprehensive AtomicAssets API filtering and sorting options\r\n   * Supports all available query parameters for maximum flexibility\r\n   */\r\n  async getUserInventoryEnhanced(account: string, options: {\r\n    page?: number\r\n    limit?: number\r\n    order?: 'asc' | 'desc'\r\n    sort?: 'asset_id' | 'created' | 'updated' | 'transferred' | 'minted'\r\n    collection_name?: string\r\n    schema_name?: string\r\n    template_id?: string | number\r\n    search?: string\r\n    match?: string\r\n    before?: number\r\n    after?: number\r\n    collection_whitelist?: string\r\n    collection_blacklist?: string\r\n    authorized_account?: string\r\n    minted_by?: string\r\n    burned?: boolean\r\n  } = {}): Promise<{ assets: NFTAsset[], total: number, hasMore: boolean, currentPage: number, collections: string[], schemas: string[] }> {\r\n    // Set defaults - show latest received/transferred NFTs by default\r\n    const {\r\n      page = 1,\r\n      limit = 1000,\r\n      order = 'desc',\r\n      sort = 'transferred', // Default to latest transferred (received)\r\n      burned = false,\r\n      ...filters\r\n    } = options\r\n    \r\n    try {\r\n\r\n      // Build query parameters\r\n      const params = new URLSearchParams({\r\n        owner: account,\r\n        burned: burned.toString(),\r\n        limit: limit.toString(),\r\n        page: page.toString(),\r\n        order,\r\n        sort\r\n      })\r\n\r\n      // Add optional filters\r\n      Object.entries(filters).forEach(([key, value]) => {\r\n        if (value !== undefined && value !== null && value !== '') {\r\n          params.append(key, value.toString())\r\n        }\r\n      })\r\n\r\n      const url = `${this.getCurrentAtomicEndpoint()}/atomicassets/v1/assets?${params.toString()}`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<AssetData[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        const assets = data.data.map(asset => ({\r\n          sale_id: '',\r\n          asset_id: asset.asset_id || '',\r\n          name: asset.name || `${asset.collection?.collection_name || 'Unknown'} #${asset.asset_id}`,\r\n          image: this.getAssetImage(asset),\r\n          video: this.getAssetVideo(asset),\r\n          price: 'Not for sale',\r\n          seller: account,\r\n          collection: asset.collection?.collection_name || 'Unknown',\r\n          schema: asset.schema?.schema_name || 'Unknown',\r\n          template_id: asset.template?.template_id || '0',\r\n          template_mint: parseInt(asset.template?.template_id || '0') || 0,\r\n          max_supply: asset.template?.max_supply || '0',\r\n          traits: Object.fromEntries(\r\n            Object.entries(asset.data || {}).map(([key, value]) => [key, value ?? ''])\r\n          )\r\n        }))\r\n        \r\n        // Extract unique collections and schemas for filter options\r\n        const collections = [...new Set(assets.map(asset => asset.collection))].filter(c => c !== 'Unknown')\r\n        const schemas = [...new Set(assets.map(asset => asset.schema))].filter(s => s !== 'Unknown')\r\n        \r\n        const hasMore = data.data.length === limit\r\n        \r\n        return { \r\n          assets, \r\n          total: (page - 1) * limit + assets.length + (hasMore ? 1 : 0), \r\n          hasMore,\r\n          currentPage: page,\r\n          collections,\r\n          schemas\r\n        }\r\n      }\r\n      \r\n      return { assets: [], total: 0, hasMore: false, currentPage: page, collections: [], schemas: [] }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getUserInventoryEnhanced', error, { account, options })\r\n      return { assets: [], total: 0, hasMore: false, currentPage: page, collections: [], schemas: [] }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get user inventory for a specific template - fastest for single template queries\r\n   */\r\n  async getUserInventoryByTemplate(account: string, templateId: string, limit: number = 1000, offset: number = 0): Promise<{ assets: NFTAsset[], total: number, hasMore: boolean }> {\r\n    try {\r\n      const url = `${this.getCurrentAtomicEndpoint()}/atomicassets/v1/assets?owner=${account}&template_id=${templateId}&burned=false&limit=${limit}&offset=${offset}&order=desc&sort=asset_id`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<AssetData[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        const assets = data.data.map(asset => ({\r\n          sale_id: '',\r\n          asset_id: asset.asset_id || '',\r\n          name: asset.name || `${asset.collection?.collection_name || 'Unknown'} #${asset.asset_id}`,\r\n          image: this.getAssetImage(asset),\r\n          price: 'Not for sale',\r\n          seller: account,\r\n          collection: asset.collection?.collection_name || 'Unknown',\r\n          schema: asset.schema?.schema_name || 'Unknown',\r\n          template_mint: parseInt(asset.template?.template_id || '0') || 0,\r\n          max_supply: asset.template?.max_supply || '0',\r\n          traits: Object.fromEntries(\r\n            Object.entries(asset.data || {}).map(([key, value]) => [key, value ?? ''])\r\n          )\r\n        }))\r\n        \r\n        const hasMore = data.data.length === limit\r\n        return { assets, total: offset + assets.length + (hasMore ? 1 : 0), hasMore }\r\n      }\r\n      \r\n      return { assets: [], total: 0, hasMore: false }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getUserInventoryByTemplate', error, { account, templateId, limit, offset })\r\n      return { assets: [], total: 0, hasMore: false }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get user's WaxRock Pixal PFPs - filters for template 781515 with valid WaxRock attributes\r\n   */\r\n  async getUserInventoryWaxRocks(account: string, limit: number = 1000, offset: number = 0): Promise<{ assets: NFTAsset[], total: number, hasMore: boolean }> {\r\n    try {\r\n      // Import the proper WaxRock types and Pixal template ID from config\r\n      const { MarketplaceConfigService } = await import('../config/marketplaceConfig')\r\n      const pixalTemplateId = MarketplaceConfigService.getPixalTemplateId()\r\n      \r\n      const url = `${this.getCurrentAtomicEndpoint()}/atomicassets/v1/assets?owner=${account}&template_id=${pixalTemplateId}&burned=false&limit=${limit}&offset=${offset}&order=desc&sort=asset_id`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data: ApiResponse<AssetData[]> = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        // Filter for assets that have valid WaxRock attributes\r\n        const waxRockAssets = data.data.filter(asset => {\r\n          // Check both mutable and immutable data for WaxRock attribute\r\n          const waxRock = asset.data?.WaxRock || asset.template?.immutable_data?.WaxRock\r\n          \r\n          if (waxRock && typeof waxRock === 'string') {\r\n            // Explicitly exclude 'none' values and only include valid WaxRock types\r\n            return waxRock !== 'none' && MarketplaceConfigService.isValidWaxRock(waxRock)\r\n          }\r\n          \r\n          return false\r\n        })\r\n        \r\n        const assets = waxRockAssets.map(asset => ({\r\n          sale_id: '',\r\n          asset_id: asset.asset_id || '',\r\n          name: asset.name || `${asset.collection?.collection_name || 'Unknown'} #${asset.asset_id}`,\r\n          image: this.getAssetImage(asset),\r\n          price: 'Not for sale',\r\n          seller: account,\r\n          collection: asset.collection?.collection_name || 'Unknown',\r\n          schema: asset.schema?.schema_name || 'Unknown',\r\n          template_mint: parseInt(asset.template?.template_id || '0') || 0,\r\n          max_supply: asset.template?.max_supply || '0',\r\n          traits: Object.fromEntries(\r\n            Object.entries(asset.data || {}).map(([key, value]) => [key, value ?? ''])\r\n          ),\r\n          data: asset.data\r\n        }))\r\n        \r\n        const hasMore = data.data.length === limit\r\n        return { assets, total: assets.length, hasMore }\r\n      }\r\n      \r\n      return { assets: [], total: 0, hasMore: false }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getUserInventoryWaxRocks', error, { account, limit, offset })\r\n      return { assets: [], total: 0, hasMore: false }\r\n    }\r\n  }\r\n\r\n  // WAX Chain API methods\r\n  async getWaxChainInfo(): Promise<WaxChainInfo | null> {\r\n    try {\r\n      const response = await this.fetchWithRetry(`${this.waxChainAPI}/v1/chain/get_info`)\r\n      if (response.ok) {\r\n        return await response.json()\r\n      }\r\n      throw new Error('Failed to fetch chain info')\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getWaxChainInfo', error)\r\n      // Try next endpoint\r\n      if (this.currentWaxChainIndex < this.waxChainEndpoints.length - 1) {\r\n        this.currentWaxChainIndex++\r\n        return this.getWaxChainInfo()\r\n      }\r\n      this.currentWaxChainIndex = 0\r\n      return null\r\n    }\r\n  }\r\n\r\n  async getWaxAccountInfo(accountName: string): Promise<WaxAccountInfo | null> {\r\n    // Fetching account info from WAX chain\r\n    \r\n    for (let endpointIndex = 0; endpointIndex < this.waxChainEndpoints.length; endpointIndex++) {\r\n      const endpoint = this.waxChainEndpoints[endpointIndex];\r\n      // Trying WAX chain endpoint\r\n      \r\n      try {\r\n        const response = await fetch(\r\n          `${endpoint}/v1/chain/get_account`,\r\n          {\r\n            method: 'POST',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'Accept': 'application/json'\r\n            },\r\n            mode: 'cors',\r\n            body: JSON.stringify({\r\n              account_name: accountName\r\n            })\r\n          }\r\n        );\r\n        \r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          // Successfully fetched account info\r\n          this.currentWaxChainIndex = endpointIndex; // Update successful endpoint\r\n          return data;\r\n        } else {\r\n          logger.warn(`Endpoint ${endpoint} returned status ${response.status}: ${response.statusText}`, 'API');\r\n        }\r\n      } catch (error) {\r\n        ErrorMessageService.logError('ApiService.getWaxAccountInfo', error, { endpoint, accountName });\r\n        // Continue to next endpoint\r\n      }\r\n    }\r\n    \r\n    ErrorMessageService.logError('ApiService.getWaxAccountInfo', new Error('All WAX chain endpoints failed for get_account'), { accountName });\r\n    return null;\r\n  }\r\n\r\n  async getWaxCurrencyBalance(accountName: string, contract: string = 'eosio.token', symbol: string = 'WAX'): Promise<WaxCurrencyBalance[]> {\r\n    logger.debug(`Attempting to fetch currency balance for: ${accountName}`, 'API');\r\n    \r\n    for (let endpointIndex = 0; endpointIndex < this.waxChainEndpoints.length; endpointIndex++) {\r\n      const endpoint = this.waxChainEndpoints[endpointIndex];\r\n      logger.debug(`Trying endpoint ${endpointIndex + 1}/${this.waxChainEndpoints.length}: ${endpoint}`, 'API');\r\n      \r\n      try {\r\n        const response = await fetch(\r\n          `${endpoint}/v1/chain/get_currency_balance`,\r\n          {\r\n            method: 'POST',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'Accept': 'application/json'\r\n            },\r\n            mode: 'cors',\r\n            body: JSON.stringify({\r\n              code: contract,\r\n              account: accountName,\r\n              symbol: symbol\r\n            })\r\n          }\r\n        );\r\n        \r\n        if (response.ok) {\r\n          const balances = await response.json();\r\n          logger.debug(`Successfully fetched currency balance from ${endpoint}`, 'API');\r\n          this.currentWaxChainIndex = endpointIndex; // Update successful endpoint\r\n          return balances.map((balance: string) => ({\r\n            balance,\r\n            contract,\r\n            symbol: balance.split(' ')[1] || symbol\r\n          }));\r\n        } else {\r\n          logger.warn(`Endpoint ${endpoint} returned status ${response.status}: ${response.statusText}`, 'API');\r\n        }\r\n      } catch (error) {\r\n        ErrorMessageService.logError('ApiService.getWaxCurrencyBalance', error, { endpoint, accountName, contract, symbol });\r\n        // Continue to next endpoint\r\n      }\r\n    }\r\n    \r\n    ErrorMessageService.logError('ApiService.getWaxCurrencyBalance', new Error('All WAX chain endpoints failed for get_currency_balance'), { accountName, contract, symbol });\r\n    return [];\r\n  }\r\n\r\n  // === WAX Light API Methods ===\r\n  \r\n  /**\r\n   * Get token balances for a WAX account using Light API\r\n   * Much faster than standard RPC calls\r\n   */\r\n  async getLightApiBalances(accountName: string): Promise<LightApiResponse | null> {\r\n    try {\r\n      const url = `${this.waxLightAPI}/api/balances/wax/${accountName}`\r\n      \r\n      // Use direct fetch for Light API - don't use fetchWithRetry as it tries Atomic endpoints\r\n      const response = await fetch(url, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json'\r\n        },\r\n        mode: 'cors'\r\n      })\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`)\r\n      }\r\n      \r\n      const data: LightApiResponse = await response.json()\r\n      return data\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getLightApiBalances', error, { accountName })\r\n      return null\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get account information using Light API\r\n   */\r\n  async getLightApiAccountInfo(accountName: string): Promise<{\r\n    account: {\r\n      account_name: string\r\n      head_block_num: number\r\n      head_block_time: string\r\n      privileged: boolean\r\n      last_code_update: string\r\n      created: string\r\n      core_liquid_balance?: string\r\n      ram_quota: number\r\n      net_weight: number\r\n      cpu_weight: number\r\n      net_limit: {\r\n        used: number\r\n        available: number\r\n        max: number\r\n      }\r\n      cpu_limit: {\r\n        used: number\r\n        available: number\r\n        max: number\r\n      }\r\n      ram_usage: number\r\n      permissions: Array<{\r\n        perm_name: string\r\n        parent: string\r\n        required_auth: {\r\n          threshold: number\r\n          keys: Array<{\r\n            key: string\r\n            weight: number\r\n          }>\r\n          accounts: Array<unknown>\r\n          waits: Array<unknown>\r\n        }\r\n      }>\r\n    }\r\n  } | null> {\r\n    try {\r\n      const url = `${this.waxLightAPI}/api/account/wax/${accountName}`\r\n      \r\n      // Use direct fetch for Light API - don't use fetchWithRetry as it tries Atomic endpoints\r\n      const response = await fetch(url, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json'\r\n        },\r\n        mode: 'cors'\r\n      })\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`)\r\n      }\r\n      \r\n      return await response.json()\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getLightApiAccountInfo', error, { accountName })\r\n      return null\r\n    }\r\n  }\r\n\r\n  // === Alcor Exchange API Methods ===\r\n  \r\n  /**\r\n   * Get token price from Alcor Exchange\r\n   */\r\n  async getAlcorTokenPrice(symbol: string, contract: string): Promise<AlcorTokenPrice | null> {\r\n    let timeoutId: NodeJS.Timeout | null = null\r\n    try {\r\n      // Create token ID in format: symbol-contract\r\n      const tokenId = `${symbol.toLowerCase()}-${contract}`\r\n      const url = `${this.alcorAPI}/tokens/${tokenId}`\r\n      \r\n      // Add timeout and better error handling\r\n      const controller = new AbortController()\r\n      timeoutId = setTimeout(() => {\r\n        controller.abort()\r\n      }, 8000) // Reduced to 8 second timeout\r\n      \r\n      const response = await this.fetchAlcorAPI(url, 2, { signal: controller.signal })\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`)\r\n      }\r\n      \r\n      const tokenData: AlcorTokenPrice = await response.json()\r\n      \r\n      return tokenData\r\n    } catch (error) {\r\n      // Handle abort errors more gracefully\r\n      if (error instanceof Error && error.name === 'AbortError') {\r\n        logger.warn(`Alcor API request timeout for ${symbol}`, 'API')\r\n        return null\r\n      }\r\n      \r\n      logger.warn(`Error fetching Alcor token price for ${symbol}`, 'API', error)\r\n      // Return fallback data for WAX to prevent UI crashes\r\n      if (symbol.toLowerCase() === 'wax') {\r\n        return {\r\n          symbol: 'WAX',\r\n          contract: 'eosio.token',\r\n          id: 'wax-eosio.token',\r\n          system_price: 0.05, // Fallback price\r\n          usd_price: 0.05,\r\n          decimals: 8\r\n        }\r\n      }\r\n      return null\r\n    } finally {\r\n      // Always clear the timeout\r\n      if (timeoutId) {\r\n        clearTimeout(timeoutId)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get all available trading pairs from Alcor Exchange\r\n   */\r\n  async getAlcorMarkets(): Promise<AlcorPairData[]> {\r\n    try {\r\n      const url = `${this.alcorAPI}/pairs`\r\n      const response = await this.fetchAlcorAPI(url)\r\n      \r\n      return await response.json()\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getAlcorMarkets', error)\r\n      return []\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get marketplace configuration data\r\n   * This would typically come from a backend API or configuration service\r\n   * For now, we'll simulate API responses with the known data\r\n   */\r\n  async getMarketplaceConfig(): Promise<{\r\n    partnerCollections: string[]\r\n    tokenContracts: string[]\r\n    supportedTokens: Array<{\r\n      contract: string\r\n      symbol: string\r\n      precision: number\r\n    }>\r\n  }> {\r\n    try {\r\n      // In a real implementation, this would fetch from a configuration API\r\n      // For now, return the known configuration data\r\n      return {\r\n        partnerCollections: [\r\n          'friedfactory',\r\n          'pixeljourney'\r\n        ],\r\n        tokenContracts: [\r\n          'alien.worlds',\r\n          'prospectorsc',\r\n          'token.nefty'\r\n        ],\r\n        supportedTokens: [\r\n          { contract: 'eosio.token', symbol: 'WAX', precision: 8 },\r\n          { contract: 'alien.worlds', symbol: 'TLM', precision: 4 },\r\n          { contract: 'prospectorsc', symbol: 'PGL', precision: 4 },\r\n          { contract: 'token.nefty', symbol: 'NEFTY', precision: 8 }\r\n        ]\r\n      }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getMarketplaceConfig', error)\r\n      // Return fallback configuration\r\n      return {\r\n        partnerCollections: ['friedfactory', 'pixeljourney'],\r\n        tokenContracts: ['alien.worlds', 'prospectorsc', 'token.nefty'],\r\n        supportedTokens: [\r\n          { contract: 'eosio.token', symbol: 'WAX', precision: 8 }\r\n        ]\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get partner collections from API\r\n   */\r\n  async getPartnerCollections(): Promise<string[]> {\r\n    try {\r\n      const config = await this.getMarketplaceConfig()\r\n      return config.partnerCollections\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getPartnerCollections', error)\r\n      return ['friedfactory', 'pixeljourney'] // Fallback\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get supported token contracts from API\r\n   */\r\n  async getTokenContracts(): Promise<string[]> {\r\n    try {\r\n      const config = await this.getMarketplaceConfig()\r\n      return config.tokenContracts\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getTokenContracts', error)\r\n      return ['alien.worlds', 'prospectorsc', 'token.nefty'] // Fallback\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get swap quote for token exchange on Alcor\r\n   */\r\n  async getAlcorSwapQuote(params: AlcorSwapParams): Promise<{\r\n    input: {\r\n      amount: string\r\n      symbol: string\r\n      contract: string\r\n    }\r\n    output: {\r\n      amount: string\r\n      symbol: string\r\n      contract: string\r\n    }\r\n    price: number\r\n    priceImpact: number\r\n    route: Array<{\r\n      pool: {\r\n        id: number\r\n        tokenA: {\r\n          symbol: string\r\n          contract: string\r\n        }\r\n        tokenB: {\r\n          symbol: string\r\n          contract: string\r\n        }\r\n      }\r\n    }>\r\n  } | null> {\r\n    try {\r\n      const url = `${this.alcorAPI}/swap/quote`\r\n      const response = await this.fetchAlcorAPI(url, 3, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(params)\r\n      })\r\n      \r\n      return await response.json()\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getAlcorSwapQuote', error, { params })\r\n      return null\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get PXJ token price specifically (commonly used)\r\n   */\r\n  async getPXJPrice(): Promise<number> {\r\n    try {\r\n      const priceData = await this.getAlcorTokenPrice('PXJ', 'pixeljourney')\r\n      return priceData?.system_price || 0\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getPXJPrice', error)\r\n      return 0\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Calculate total portfolio value in USD\r\n   */\r\n  async calculatePortfolioValue(balances: LightApiBalance[]): Promise<number> {\r\n    let totalValue = 0\r\n    \r\n    for (const balance of balances) {\r\n      try {\r\n        const priceData = await this.getAlcorTokenPrice(balance.currency, balance.contract)\r\n        if (priceData) {\r\n          const amount = parseFloat(balance.amount)\r\n          const decimals = parseInt(balance.decimals)\r\n          const adjustedAmount = amount / Math.pow(10, decimals)\r\n          totalValue += adjustedAmount * priceData.usd_price\r\n        }\r\n      } catch (error) {\r\n        logger.warn(`Could not get price for ${balance.currency}`, 'API', error)\r\n      }\r\n    }\r\n    \r\n    return totalValue\r\n  }\r\n\r\n  /**\r\n   * Get marketplace listings for NFTs by asset_id\r\n   */\r\n  async getMarketplaceNFTs(params: {\r\n    page?: number\r\n    limit?: number\r\n    asset_id?: string\r\n    state?: number\r\n  }): Promise<{\r\n    success: boolean\r\n    data: Array<{\r\n      sale_id: string\r\n      asset_id: string\r\n      price: string\r\n      seller: string\r\n      created_at_time: string\r\n    }>\r\n  }> {\r\n    try {\r\n      const { page = 1, limit = 100, asset_id, state = 1 } = params\r\n      let url = `${this.atomicEndpoints[this.currentEndpointIndex]}/atomicmarket/v1/sales?state=${state}&page=${page}&limit=${limit}&order=desc&sort=created`\r\n      \r\n      if (asset_id) {\r\n        url += `&asset_id=${asset_id}`\r\n      }\r\n      \r\n      const response = await this.fetchWithRetry(url)\r\n      const data = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        return {\r\n          success: true,\r\n          data: data.data.map((sale: {\r\n            sale_id: string\r\n            assets: Array<{ asset_id: string }>\r\n            price: { amount: string; token_symbol: string; token_precision: number }\r\n            seller: string\r\n            created_at_time: string\r\n          }) => ({\r\n            sale_id: sale.sale_id,\r\n            asset_id: sale.assets[0]?.asset_id || '',\r\n            price: sale.price ? `${(parseFloat(sale.price.amount) / Math.pow(10, sale.price.token_precision || 8)).toFixed(8)} ${sale.price.token_symbol}` : '0 WAX',\r\n            seller: sale.seller,\r\n            created_at_time: sale.created_at_time\r\n          }))\r\n        }\r\n      }\r\n      \r\n      return { success: true, data: [] }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getMarketplaceNFTs', error, { params })\r\n      return { success: false, data: [] }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get offers for a specific NFT asset\r\n   */\r\n  async getAssetOffers(assetId: string): Promise<Array<{\r\n    id: string\r\n    buyer: string\r\n    price: string\r\n    token: string\r\n    created: string\r\n    memo?: string\r\n  }>> {\r\n    try {\r\n      const url = `${this.atomicEndpoints[this.currentEndpointIndex]}/atomicmarket/v1/buyoffers?asset_id=${assetId}&state=0&page=1&limit=100&order=desc&sort=price`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data = await response.json()\r\n      \r\n      if (data.success && data.data) {\r\n        return data.data.map((offer: {\r\n          buyoffer_id: string\r\n          buyer: string\r\n          price: { amount: string; token_symbol: string }\r\n          created_at_time: string\r\n          memo?: string\r\n        }) => ({\r\n          id: offer.buyoffer_id,\r\n          buyer: offer.buyer,\r\n          price: offer.price.amount,\r\n          symbol: offer.price.token_symbol,\r\n          timestamp: offer.created_at_time,\r\n          memo: offer.memo || ''\r\n        }))\r\n      }\r\n      \r\n      return []\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getAssetOffers', error, { assetId })\r\n      return []\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get assets in batch using ids parameter for efficient API usage\r\n   */\r\n  async getAssetsBatch(assetIds: string[]): Promise<{\r\n    success: boolean\r\n    data: AssetDetails[]\r\n    errors: string[]\r\n  }> {\r\n    if (!assetIds.length) {\r\n      return { success: true, data: [], errors: [] }\r\n    }\r\n\r\n    try {\r\n      // Split into chunks of 100 (API limit)\r\n      const chunks = this.chunkArray(assetIds, 100)\r\n      const allAssets: AssetDetails[] = []\r\n      const errors: string[] = []\r\n\r\n      for (const chunk of chunks) {\r\n        try {\r\n          const idsParam = chunk.join(',')\r\n          const url = `${this.atomicEndpoints[this.currentEndpointIndex]}/atomicassets/v1/assets`\r\n          \r\n          // Use POST for longer queries to avoid URL length limits\r\n          const response = await this.fetchWithRetry(url, 3, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({\r\n              ids: idsParam,\r\n              limit: '1000'\r\n            })\r\n          })\r\n          \r\n          const data = await response.json()\r\n          \r\n          if (data.success && data.data) {\r\n            allAssets.push(...data.data)\r\n          } else {\r\n            errors.push(`Failed to fetch assets batch: ${chunk.join(', ')}`)\r\n          }\r\n        } catch (error) {\r\n          ErrorMessageService.logError('ApiService.getAssetsBatch', error, { chunk })\r\n          errors.push(`Error fetching assets: ${chunk.join(', ')}`)\r\n        }\r\n      }\r\n\r\n      return {\r\n        success: errors.length === 0,\r\n        data: allAssets,\r\n        errors\r\n      }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getAssetsBatch', error, { assetIds })\r\n      return {\r\n        success: false,\r\n        data: [],\r\n        errors: [`Failed to process asset batch: ${error}`]\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get templates in batch using ids parameter for efficient API usage\r\n   */\r\n  async getTemplatesBatch(templateIds: string[]): Promise<{\r\n    success: boolean\r\n    data: TemplateData[]\r\n    errors: string[]\r\n  }> {\r\n    if (!templateIds.length) {\r\n      return { success: true, data: [], errors: [] }\r\n    }\r\n\r\n    try {\r\n      // Split into chunks of 100 (API limit)\r\n      const chunks = this.chunkArray(templateIds, 100)\r\n      const allTemplates: TemplateData[] = []\r\n      const errors: string[] = []\r\n\r\n      for (const chunk of chunks) {\r\n        try {\r\n          const idsParam = chunk.join(',')\r\n          const url = `${this.atomicEndpoints[this.currentEndpointIndex]}/atomicassets/v1/templates`\r\n          \r\n          // Use POST for longer queries\r\n          const response = await this.fetchWithRetry(url, 3, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({\r\n              ids: idsParam,\r\n              limit: '1000'\r\n            })\r\n          })\r\n          \r\n          const data = await response.json()\r\n          \r\n          if (data.success && data.data) {\r\n            allTemplates.push(...data.data)\r\n          } else {\r\n            errors.push(`Failed to fetch templates batch: ${chunk.join(', ')}`)\r\n          }\r\n        } catch (error) {\r\n          ErrorMessageService.logError('ApiService.getTemplatesBatch', error, { chunk })\r\n          errors.push(`Error fetching templates: ${chunk.join(', ')}`)\r\n        }\r\n      }\r\n\r\n      return {\r\n        success: errors.length === 0,\r\n        data: allTemplates,\r\n        errors\r\n      }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getTemplatesBatch', error, { templateIds })\r\n      return {\r\n        success: false,\r\n        data: [],\r\n        errors: [`Failed to process template batch: ${error}`]\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get asset counts for multiple templates efficiently\r\n   */\r\n  async getAssetCountsBatch(templateIds: string[], owner?: string): Promise<{\r\n    success: boolean\r\n    data: Record<string, number>\r\n    errors: string[]\r\n  }> {\r\n    if (!templateIds.length) {\r\n      return { success: true, data: {}, errors: [] }\r\n    }\r\n\r\n    try {\r\n      const counts: Record<string, number> = {}\r\n      const errors: string[] = []\r\n      \r\n      // Process in smaller chunks to avoid overwhelming the API\r\n      const chunks = this.chunkArray(templateIds, 50)\r\n      \r\n      for (const chunk of chunks) {\r\n        try {\r\n          const promises = chunk.map(async (templateId) => {\r\n            try {\r\n              const params: AtomicParams = {\r\n                template_id: templateId,\r\n                limit: 1 // We only need the count\r\n              }\r\n              \r\n              if (owner) {\r\n                params.owner = owner\r\n              }\r\n              \r\n              const url = `${this.atomicEndpoints[this.currentEndpointIndex]}/atomicassets/v1/assets`\r\n              const queryParams = new URLSearchParams()\r\n              \r\n              Object.entries(params).forEach(([key, value]) => {\r\n                if (value !== undefined && value !== null) {\r\n                  queryParams.append(key, String(value))\r\n                }\r\n              })\r\n              \r\n              const response = await this.fetchWithRetry(`${url}?${queryParams}`)\r\n              const data = await response.json()\r\n              \r\n              if (data.success) {\r\n                return { templateId, count: parseInt(data.query_total || '0') }\r\n              } else {\r\n                return { templateId, count: 0, error: 'API returned unsuccessful response' }\r\n              }\r\n            } catch (error) {\r\n              return { templateId, count: 0, error: String(error) }\r\n            }\r\n          })\r\n          \r\n          const results = await Promise.all(promises)\r\n          \r\n          results.forEach(result => {\r\n            if (result.error) {\r\n              errors.push(`Error fetching count for template ${result.templateId}: ${result.error}`)\r\n            }\r\n            counts[result.templateId] = result.count\r\n          })\r\n          \r\n          // Add delay between chunks to be respectful to the API\r\n          if (chunks.indexOf(chunk) < chunks.length - 1) {\r\n            await new Promise(resolve => setTimeout(resolve, 100))\r\n          }\r\n        } catch (error) {\r\n          ErrorMessageService.logError('ApiService.getAssetCountsBatch chunk', error, { chunk })\r\n          chunk.forEach(templateId => {\r\n            counts[templateId] = 0\r\n            errors.push(`Error processing template ${templateId}: ${error}`)\r\n          })\r\n        }\r\n      }\r\n\r\n      return {\r\n        success: errors.length === 0,\r\n        data: counts,\r\n        errors\r\n      }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getAssetCountsBatch', error, { templateIds })\r\n      return {\r\n        success: false,\r\n        data: {},\r\n        errors: [`Failed to process asset counts batch: ${error}`]\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get all offers (buy offers) with comprehensive filtering\r\n   */\r\n  async getOffers(params: AtomicParams = {}): Promise<{\r\n    success: boolean\r\n    data: Array<{\r\n      buyoffer_id: string\r\n      buyer: string\r\n      seller: string\r\n      price: PriceData\r\n      assets: AssetData[]\r\n      memo?: string\r\n      state: number\r\n      created_at_time: string\r\n      updated_at_time: string\r\n    }>\r\n    query_total?: number\r\n  }> {\r\n    try {\r\n      const {\r\n        page = 1,\r\n        limit = 100,\r\n        order = 'desc',\r\n        sort = 'created',\r\n        state = '0',\r\n        collection_name,\r\n        schema_name,\r\n        template_id,\r\n        asset_id,\r\n        buyer,\r\n        seller,\r\n        min_price,\r\n        max_price,\r\n        symbol = 'WAX'\r\n      } = params\r\n      \r\n      let url = `${this.atomicEndpoints[this.currentEndpointIndex]}/atomicmarket/v1/buyoffers?page=${page}&limit=${limit}&order=${order}&sort=${sort}&state=${state}&symbol=${symbol}`\r\n      \r\n      if (collection_name) url += `&collection_name=${collection_name}`\r\n      if (schema_name) url += `&schema_name=${schema_name}`\r\n      if (template_id) url += `&template_id=${template_id}`\r\n      if (asset_id) url += `&asset_id=${asset_id}`\r\n      if (buyer) url += `&buyer=${buyer}`\r\n      if (seller) url += `&seller=${seller}`\r\n      if (min_price) url += `&min_price=${min_price}`\r\n      if (max_price) url += `&max_price=${max_price}`\r\n      \r\n      const response = await this.fetchWithRetry(url)\r\n      const data = await response.json()\r\n      \r\n      return {\r\n        success: data.success || false,\r\n        data: data.data || [],\r\n        query_total: data.query_total\r\n      }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getOffers', error, params)\r\n      return { success: false, data: [] }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get price history and statistics for assets/templates\r\n   */\r\n  async getPrices(params: AtomicParams = {}): Promise<{\r\n    success: boolean\r\n    data: Array<{\r\n      sale_id: string\r\n      price: PriceData\r\n      template_mint: number\r\n      created_at_time: string\r\n    }>\r\n    query_total?: number\r\n  }> {\r\n    try {\r\n      const {\r\n        page = 1,\r\n        limit = 100,\r\n        order = 'desc',\r\n        sort = 'created',\r\n        collection_name,\r\n        schema_name,\r\n        template_id,\r\n        symbol = 'WAX'\r\n      } = params\r\n      \r\n      let url = `${this.atomicEndpoints[this.currentEndpointIndex]}/atomicmarket/v1/prices?page=${page}&limit=${limit}&order=${order}&sort=${sort}&symbol=${symbol}`\r\n      \r\n      if (collection_name) url += `&collection_name=${collection_name}`\r\n      if (schema_name) url += `&schema_name=${schema_name}`\r\n      if (template_id) url += `&template_id=${template_id}`\r\n      \r\n      const response = await this.fetchWithRetry(url)\r\n      const data = await response.json()\r\n      \r\n      return {\r\n        success: data.success || false,\r\n        data: data.data || [],\r\n        query_total: data.query_total\r\n      }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getPrices', error, params)\r\n      return { success: false, data: [] }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get asset transfers history\r\n   */\r\n  async getTransfers(params: AtomicParams = {}): Promise<{\r\n    success: boolean\r\n    data: Array<{\r\n      transfer_id: string\r\n      sender_name: string\r\n      recipient_name: string\r\n      assets: AssetData[]\r\n      memo?: string\r\n      created_at_time: string\r\n      txid: string\r\n    }>\r\n    query_total?: number\r\n  }> {\r\n    try {\r\n      const {\r\n        page = 1,\r\n        limit = 100,\r\n        order = 'desc',\r\n        sort = 'created',\r\n        collection_name,\r\n        schema_name,\r\n        template_id,\r\n        asset_id,\r\n        sender,\r\n        recipient_name: recipient\r\n      } = params\r\n      \r\n      let url = `${this.atomicEndpoints[this.currentEndpointIndex]}/atomicassets/v1/transfers?page=${page}&limit=${limit}&order=${order}&sort=${sort}`\r\n      \r\n      if (collection_name) url += `&collection_name=${collection_name}`\r\n      if (schema_name) url += `&schema_name=${schema_name}`\r\n      if (template_id) url += `&template_id=${template_id}`\r\n      if (asset_id) url += `&asset_id=${asset_id}`\r\n      if (sender) url += `&sender_name=${sender}`\r\n      if (recipient) url += `&recipient_name=${recipient}`\r\n      \r\n      const response = await this.fetchWithRetry(url)\r\n      const data = await response.json()\r\n      \r\n      return {\r\n        success: data.success || false,\r\n        data: data.data || [],\r\n        query_total: data.query_total\r\n      }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getTransfers', error, params)\r\n      return { success: false, data: [] }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get comprehensive collection market statistics\r\n   */\r\n  async getCollectionMarketStats(params: {\r\n    collection_name?: string\r\n    symbol?: string\r\n  } = {}): Promise<{\r\n    success: boolean\r\n    data: {\r\n      symbol: string\r\n      market_contract: string\r\n      sales: string\r\n      volume: string\r\n      suggested_median: string\r\n      suggested_average: string\r\n    }\r\n  }> {\r\n    try {\r\n      const { collection_name, symbol = 'WAX' } = params\r\n      \r\n      let url = `${this.atomicEndpoints[this.currentEndpointIndex]}/atomicmarket/v1/stats/collections?symbol=${symbol}`\r\n      \r\n      if (collection_name) {\r\n        url = `${this.atomicEndpoints[this.currentEndpointIndex]}/atomicmarket/v1/stats/collections/${collection_name}?symbol=${symbol}`\r\n      }\r\n      \r\n      const response = await this.fetchWithRetry(url)\r\n      const data = await response.json()\r\n      \r\n      return {\r\n        success: data.success || false,\r\n        data: data.data || {}\r\n      }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getCollectionMarketStats', error, params)\r\n      return { \r\n        success: false, \r\n        data: {\r\n          symbol: '',\r\n          market_contract: '',\r\n          sales: '0',\r\n          volume: '0',\r\n          suggested_median: '0',\r\n          suggested_average: '0'\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get template statistics and pricing data\r\n   */\r\n  async getTemplateStats(collectionName: string, templateId: string, symbol: string = 'WAX'): Promise<{\r\n    success: boolean\r\n    data: {\r\n      template_id: string\r\n      collection_name: string\r\n      assets: string\r\n      burned: string\r\n      sales: string\r\n      volume: string\r\n      suggested_median: string\r\n      suggested_average: string\r\n    }\r\n  }> {\r\n    try {\r\n      const url = `${this.atomicEndpoints[this.currentEndpointIndex]}/atomicmarket/v1/stats/templates/${collectionName}/${templateId}?symbol=${symbol}`\r\n      const response = await this.fetchWithRetry(url)\r\n      const data = await response.json()\r\n      \r\n      return {\r\n        success: data.success || false,\r\n        data: data.data || {}\r\n      }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getTemplateStats', error, { collectionName, templateId, symbol })\r\n      return { \r\n        success: false, \r\n        data: {\r\n          template_id: '',\r\n          collection_name: '',\r\n          assets: '0',\r\n          burned: '0',\r\n          sales: '0',\r\n          volume: '0',\r\n          suggested_median: '0',\r\n          suggested_average: '0'\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get account transfers for a specific token\r\n   */\r\n  /**\r\n   * Fetch transaction history using WAX Hyperion History API\r\n   */\r\n  async getHyperionTransactionHistory(\r\n    account: string,\r\n    limit: number = 100,\r\n    skip: number = 0\r\n  ): Promise<Array<{\r\n    transaction_id: string\r\n    block_time: string\r\n    action_name: string\r\n    contract: string\r\n    from?: string\r\n    to?: string\r\n    quantity?: string\r\n    memo?: string\r\n    asset_ids?: string[]\r\n    collection_name?: string\r\n    type: string\r\n    status: string\r\n  }>> {\r\n    logger.debug('🔍 Fetching Hyperion transaction history for:', 'API', { account })\r\n    \r\n    try {\r\n      const hyperionUrl = `${this.hyperionEndpoints[this.currentHyperionIndex]}/v2/history/get_actions`\r\n      const params = new URLSearchParams({\r\n        account: account,\r\n        limit: Math.min(limit, 1000).toString(),\r\n        skip: skip.toString(),\r\n        sort: 'desc'\r\n      })\r\n      \r\n      logger.debug('📡 Hyperion API URL:', 'API', { url: `${hyperionUrl}?${params}` })\r\n      const response = await this.fetchWithRetry(`${hyperionUrl}?${params}`)\r\n      const data = await response.json()\r\n      \r\n      if (!data.actions || !Array.isArray(data.actions)) {\r\n        logger.warn('No actions found in Hyperion response', 'API')\r\n        return []\r\n      }\r\n      \r\n      logger.debug(`📊 Found ${data.actions.length} Hyperion actions`, 'API')\r\n      \r\n      const transactions = data.actions.map((action: {\r\n        trx_id: string\r\n        timestamp: string\r\n        act: {\r\n          account: string\r\n          name: string\r\n          data: {\r\n            from?: string\r\n            to?: string\r\n            quantity?: string\r\n            memo?: string\r\n            asset_ids?: string[]\r\n            collection_name?: string\r\n            [key: string]: unknown\r\n          }\r\n        }\r\n        block_num: number\r\n      }) => {\r\n        const actionData = action.act.data\r\n        let transactionType = 'unknown'\r\n        \r\n        // Determine transaction type based on contract and action\r\n        if (action.act.account === 'eosio.token' && action.act.name === 'transfer') {\r\n          transactionType = actionData.from === account ? 'token_send' : 'token_receive'\r\n        } else if (action.act.account === 'atomicassets' && action.act.name === 'transfer') {\r\n          transactionType = 'nft_transfer'\r\n        } else if (action.act.account === 'atomicmarket' && action.act.name === 'purchasesale') {\r\n          transactionType = 'nft_purchase'\r\n        } else if (action.act.account === 'atomicmarket' && action.act.name === 'announcesale') {\r\n          transactionType = 'nft_listing'\r\n        } else if (action.act.account === 'atomicmarket' && action.act.name === 'cancelsale') {\r\n          transactionType = 'nft_cancel_listing'\r\n        } else {\r\n          transactionType = `${action.act.account}_${action.act.name}`\r\n        }\r\n        \r\n        return {\r\n          transaction_id: action.trx_id,\r\n          block_time: action.timestamp,\r\n          action_name: action.act.name,\r\n          contract: action.act.account,\r\n          from: actionData.from,\r\n          to: actionData.to,\r\n          quantity: actionData.quantity,\r\n          memo: actionData.memo,\r\n          asset_ids: actionData.asset_ids,\r\n          collection_name: actionData.collection_name,\r\n          type: transactionType,\r\n          status: 'completed'\r\n        }\r\n      })\r\n      \r\n      logger.debug(`✅ Processed ${transactions.length} Hyperion transactions`, 'API')\r\n      return transactions\r\n      \r\n    } catch (error) {\r\n      logger.error('❌ Hyperion API error', 'API', error as Error)\r\n      \r\n      // Try next Hyperion endpoint\r\n      if (this.currentHyperionIndex < this.hyperionEndpoints.length - 1) {\r\n        this.currentHyperionIndex++\r\n        logger.debug(`🔄 Switching to Hyperion endpoint ${this.currentHyperionIndex + 1}`, 'API')\r\n        return this.getHyperionTransactionHistory(account, limit, skip)\r\n      } else {\r\n        this.currentHyperionIndex = 0\r\n        ErrorMessageService.logError('ApiService.getHyperionTransactionHistory', error, { account, limit, skip })\r\n        return []\r\n      }\r\n    }\r\n  }\r\n\r\n  async getAccountTransfers(\r\n    account: string,\r\n    contract: string,\r\n    symbol: string,\r\n    limit: number = 50,\r\n    offset: number = 0\r\n  ): Promise<Array<{\r\n    transaction_id: string\r\n    timestamp: string\r\n    from: string\r\n    to: string\r\n    quantity: string\r\n    memo: string\r\n  }>> {\r\n    try {\r\n      // Use Hyperion API similar to waxblock.io approach\r\n      const hyperionUrl = `${this.hyperionEndpoints[this.currentHyperionIndex]}/v2/history/get_actions`\r\n      const params = new URLSearchParams({\r\n        account: account,\r\n        limit: Math.min(limit, 100).toString(),\r\n        sort: 'desc',\r\n        skip: offset.toString(),\r\n        [`transfer.to`]: account\r\n      })\r\n      \r\n      logger.debug('🔍 Fetching account transfers from Hyperion:', 'API', { \r\n        account, \r\n        contract, \r\n        symbol, \r\n        url: `${hyperionUrl}?${params}` \r\n      })\r\n      \r\n      const response = await this.fetchWithRetry(`${hyperionUrl}?${params}`)\r\n      const data = await response.json()\r\n      \r\n      if (!data.actions || !Array.isArray(data.actions)) {\r\n        logger.warn('No actions found in Hyperion response for transfers', 'API')\r\n        return []\r\n      }\r\n      \r\n      logger.debug(`📊 Found ${data.actions.length} Hyperion transfer actions`, 'API')\r\n      \r\n      // Filter and format transfers\r\n      const transfers = data.actions\r\n        .filter((action: {\r\n          act?: {\r\n            account?: string\r\n            name?: string\r\n            data?: {\r\n              to?: string\r\n              from?: string\r\n              quantity?: string\r\n              symbol?: string\r\n            }\r\n          }\r\n        }) => {\r\n          const act = action.act\r\n          return act?.account === contract &&\r\n                 act?.name === 'transfer' &&\r\n                 (act?.data?.to === account || act?.data?.from === account) &&\r\n                 (act?.data?.quantity?.includes(symbol) || act?.data?.symbol === symbol)\r\n        })\r\n        .slice(0, limit)\r\n        .map((action: {\r\n          act: {\r\n            data: {\r\n              from: string\r\n              to: string\r\n              quantity: string\r\n              memo?: string\r\n            }\r\n          }\r\n          trx_id: string\r\n          timestamp: string\r\n          block_num: number\r\n        }) => {\r\n          const data = action.act.data\r\n          return {\r\n            from: data.from,\r\n            to: data.to,\r\n            quantity: data.quantity,\r\n            memo: data.memo || '',\r\n            timestamp: action.timestamp,\r\n            transaction_id: action.trx_id,\r\n            block_num: action.block_num\r\n          }\r\n        })\r\n      \r\n      logger.debug(`✅ Processed ${transfers.length} transfers for account ${account}`, 'API')\r\n      return transfers\r\n      \r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getAccountTransfers', error, { account, contract, symbol, limit, offset })\r\n      logger.warn('Falling back to legacy WAX chain API', 'API')\r\n      \r\n      // Fallback to the old WAX chain API method\r\n      return this.fetchTransfersFromWaxChainAPI(account, contract, symbol, limit, offset)\r\n    }\r\n  }\r\n  \r\n\r\n\r\n  /**\r\n   * Legacy WAX Chain API fallback method for transfer fetching\r\n   */\r\n  private async fetchTransfersFromWaxChainAPI(\r\n    account: string,\r\n    contract: string,\r\n    symbol: string,\r\n    limit: number = 50,\r\n    offset: number = 0\r\n  ): Promise<Array<{\r\n    transaction_id: string\r\n    timestamp: string\r\n    from: string\r\n    to: string\r\n    quantity: string\r\n    memo: string\r\n  }>> {\r\n    try {\r\n      // Use WAX chain API to get account actions (legacy fallback)\r\n      const response = await fetch(`${this.waxChainAPI}/v1/history/get_actions`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          account_name: account,\r\n          pos: -1,\r\n          offset: offset,\r\n          filter: `${contract}:transfer`\r\n        })\r\n      })\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`)\r\n      }\r\n      \r\n      const data = await response.json()\r\n      const actions = data.actions || []\r\n      \r\n      // Filter and format transfers\r\n      const transfers = actions\r\n        .filter((action: {\r\n          action_trace?: {\r\n            act?: {\r\n              name?: string\r\n              account?: string\r\n              data?: {\r\n                to?: string\r\n                from?: string\r\n                quantity?: string\r\n              }\r\n            }\r\n          }\r\n        }) => {\r\n          const act = action.action_trace?.act\r\n          return act?.name === 'transfer' && \r\n                 act?.account === contract &&\r\n                 (act?.data?.to === account || act?.data?.from === account) &&\r\n                 act?.data?.quantity?.includes(symbol)\r\n        })\r\n        .slice(0, limit)\r\n        .map((action: {\r\n          action_trace: {\r\n            act: {\r\n              data: {\r\n                from: string\r\n                to: string\r\n                quantity: string\r\n                memo?: string\r\n              }\r\n            }\r\n            trx_id: string\r\n          }\r\n          block_time: string\r\n          block_num: number\r\n        }) => {\r\n          const act = action.action_trace.act\r\n          const data = act.data\r\n          return {\r\n            from: data.from,\r\n            to: data.to,\r\n            quantity: data.quantity,\r\n            memo: data.memo || '',\r\n            timestamp: action.block_time,\r\n            transaction_id: action.action_trace.trx_id,\r\n            block_num: action.block_num\r\n          }\r\n        })\r\n      \r\n      return transfers\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.fetchTransfersFromWaxChainAPI', error, { account, contract, symbol, limit, offset })\r\n      return []\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get comprehensive user transaction history including marketplace sales and NFT transfers\r\n   */\r\n  async getUserTransactions(account: string, limit: number = 500): Promise<Array<{\r\n    transaction_id: string\r\n    block_time: string\r\n    action_name: string\r\n    asset_id?: string\r\n    asset_name?: string\r\n    collection_name?: string\r\n    price?: string\r\n    from?: string\r\n    to?: string\r\n    type: string\r\n    status: string\r\n    memo?: string\r\n  }>> {\r\n    logger.debug('🔍 getUserTransactions called for account:', 'API', { account, limit })\r\n    try {\r\n      const allTransactions: Array<{\r\n        transaction_id: string\r\n        block_time: string\r\n        action_name: string\r\n        asset_id?: string\r\n        asset_name?: string\r\n        collection_name?: string\r\n        price?: string\r\n        from?: string\r\n        to?: string\r\n        type: string\r\n        status: string\r\n        memo?: string\r\n      }> = []\r\n      \r\n      // 0. Get comprehensive transaction history from Hyperion API\r\n      try {\r\n        logger.debug('🚀 Fetching Hyperion transaction history...', 'API')\r\n        const hyperionTransactions = await this.getHyperionTransactionHistory(account, Math.min(limit, 200))\r\n        logger.debug('🚀 Hyperion transactions:', 'API', { count: hyperionTransactions.length })\r\n        \r\n        const formattedHyperionTransactions = hyperionTransactions.map(tx => ({\r\n          transaction_id: tx.transaction_id,\r\n          block_time: tx.block_time,\r\n          action_name: tx.action_name,\r\n          asset_id: tx.asset_ids?.[0],\r\n          asset_name: tx.asset_ids?.[0] ? `Asset #${tx.asset_ids[0]}` : undefined,\r\n          collection_name: tx.collection_name,\r\n          price: tx.quantity,\r\n          from: tx.from,\r\n          to: tx.to,\r\n          type: tx.type,\r\n          status: tx.status,\r\n          memo: tx.memo\r\n        }))\r\n        \r\n        allTransactions.push(...formattedHyperionTransactions)\r\n        logger.debug('✅ Added Hyperion transactions', 'API', { count: formattedHyperionTransactions.length })\r\n      } catch (error) {\r\n        logger.warn('Failed to fetch Hyperion transactions', 'API', error)\r\n      }\r\n      \r\n      // 1. Get marketplace transactions (sales/purchases)\r\n      try {\r\n        const salesUrl = `${this.atomicEndpoints[this.currentEndpointIndex]}/atomicmarket/v1/sales?account=${account}&state=3&page=1&limit=${Math.min(limit, 200)}&order=desc&sort=updated`\r\n        logger.debug('📊 Fetching marketplace transactions from:', 'API', { url: salesUrl })\r\n        const salesResponse = await this.fetchWithRetry(salesUrl)\r\n        const salesData = await salesResponse.json()\r\n        logger.debug('📊 Marketplace response:', 'API', { success: salesData.success, dataLength: salesData.data?.length })\r\n        \r\n        if (salesData.success && salesData.data) {\r\n          const marketplaceTransactions = salesData.data.map((sale: {\r\n            sale_id: string\r\n            updated_at_time: string\r\n            buyer: string\r\n            seller: string\r\n            price: {\r\n              amount: string\r\n              token_symbol: string\r\n              token_precision?: number\r\n            }\r\n            assets: Array<{\r\n              asset_id: string\r\n              name?: string\r\n              collection?: {\r\n                collection_name: string\r\n              }\r\n            }>\r\n          }) => {\r\n            const priceAmount = parseFloat(sale.price.amount) / Math.pow(10, sale.price.token_precision || 8)\r\n            const formattedPrice = sale.price.token_symbol === 'WAX' ? formatWAXPrice(priceAmount) : `${formatNumber(priceAmount)} ${sale.price.token_symbol}`\r\n            \r\n            return {\r\n              transaction_id: sale.sale_id,\r\n              block_time: sale.updated_at_time,\r\n              action_name: sale.buyer === account ? 'purchase' : 'sale',\r\n              asset_id: sale.assets[0]?.asset_id,\r\n              asset_name: sale.assets[0]?.name || `Asset #${sale.assets[0]?.asset_id}`,\r\n              collection_name: sale.assets[0]?.collection?.collection_name,\r\n              price: formattedPrice,\r\n              from: sale.buyer === account ? sale.seller : account,\r\n              to: sale.buyer === account ? account : sale.buyer,\r\n              type: sale.buyer === account ? 'purchase' : 'sale',\r\n              status: 'completed'\r\n            }\r\n          })\r\n          allTransactions.push(...marketplaceTransactions)\r\n        }\r\n      } catch (error) {\r\n        logger.warn('Failed to fetch marketplace transactions', 'API', error)\r\n      }\r\n      \r\n      // 2. Get NFT transfers (sent and received)\r\n      try {\r\n        const transfersUrl = `${this.atomicEndpoints[this.currentEndpointIndex]}/atomicassets/v1/transfers?account=${account}&page=1&limit=${Math.min(limit, 200)}&order=desc&sort=created`\r\n        logger.debug('🔄 Fetching NFT transfers from:', 'API', { url: transfersUrl })\r\n        const transfersResponse = await this.fetchWithRetry(transfersUrl)\r\n        const transfersData = await transfersResponse.json()\r\n        logger.debug('🔄 NFT transfers response:', 'API', { success: transfersData.success, dataLength: transfersData.data?.length })\r\n        \r\n        if (transfersData.success && transfersData.data) {\r\n          const nftTransfers = transfersData.data\r\n            .filter((transfer: {\r\n              sender: string\r\n              recipient: string\r\n            }) => transfer.sender !== transfer.recipient) // Exclude self-transfers\r\n            .map((transfer: {\r\n              tx_id?: string\r\n              transfer_id: string\r\n              created_at_time: string\r\n              sender: string\r\n              recipient: string\r\n              assets?: Array<{\r\n                asset_id: string\r\n                name?: string\r\n                collection?: {\r\n                  collection_name: string\r\n                }\r\n              }>\r\n            }) => {\r\n              const asset = transfer.assets?.[0]\r\n              return {\r\n                transaction_id: transfer.tx_id || `transfer_${transfer.transfer_id}`,\r\n                block_time: transfer.created_at_time,\r\n                action_name: 'transfer',\r\n                asset_id: asset?.asset_id,\r\n                asset_name: asset?.name || `Asset #${asset?.asset_id}`,\r\n                collection_name: asset?.collection?.collection_name,\r\n                price: undefined,\r\n                from: transfer.sender,\r\n                to: transfer.recipient,\r\n                type: 'transfer',\r\n                status: 'completed',\r\n                memo: (transfer as unknown as { memo?: string }).memo || undefined\r\n              }\r\n            })\r\n          allTransactions.push(...nftTransfers)\r\n        }\r\n      } catch (error) {\r\n        logger.warn('Failed to fetch NFT transfers', 'API', error)\r\n      }\r\n      \r\n      // 3. Get token transfers (WAX and other tokens)\r\n      try {\r\n        logger.debug('💰 Fetching token transfers for account:', 'API', { account })\r\n        const tokenTransfers = await this.getAccountTransfers(account, 'eosio.token', 'WAX', Math.min(limit, 100))\r\n        logger.debug('💰 Token transfers response:', 'API', { count: tokenTransfers.length })\r\n        const formattedTokenTransfers = tokenTransfers.map((transfer: {\r\n          transaction_id: string\r\n          timestamp: string\r\n          from: string\r\n          to: string\r\n          quantity: string\r\n          memo: string\r\n        }) => ({\r\n          transaction_id: transfer.transaction_id,\r\n          block_time: transfer.timestamp,\r\n          action_name: 'token_transfer',\r\n          asset_id: undefined,\r\n          asset_name: 'WAX Token',\r\n          collection_name: 'WAX',\r\n          price: transfer.quantity,\r\n          from: transfer.from,\r\n          to: transfer.to,\r\n          type: transfer.from === account ? 'token_send' : 'token_receive',\r\n          status: 'completed',\r\n          memo: transfer.memo\r\n        }))\r\n        allTransactions.push(...formattedTokenTransfers)\r\n      } catch (error) {\r\n        logger.warn('Failed to fetch token transfers', 'API', error)\r\n      }\r\n      \r\n      logger.debug('📋 Total transactions found:', 'API', { count: allTransactions.length })\r\n      \r\n      // Remove duplicates based on transaction_id and merge data from different sources\r\n      const uniqueTransactions = new Map<string, typeof allTransactions[0]>()\r\n      \r\n      allTransactions.forEach(tx => {\r\n        const existing = uniqueTransactions.get(tx.transaction_id)\r\n        if (!existing) {\r\n          uniqueTransactions.set(tx.transaction_id, tx)\r\n        } else {\r\n          // Merge data, preferring more detailed information\r\n          const merged = {\r\n            ...existing,\r\n            ...tx,\r\n            // Prefer non-undefined values\r\n            asset_id: tx.asset_id || existing.asset_id,\r\n            asset_name: tx.asset_name || existing.asset_name,\r\n            collection_name: tx.collection_name || existing.collection_name,\r\n            price: tx.price || existing.price,\r\n            from: tx.from || existing.from,\r\n            to: tx.to || existing.to,\r\n            memo: tx.memo || existing.memo\r\n          }\r\n          uniqueTransactions.set(tx.transaction_id, merged)\r\n        }\r\n      })\r\n      \r\n      // Sort all transactions by timestamp (newest first) and limit results\r\n      const sortedTransactions = Array.from(uniqueTransactions.values())\r\n        .sort((a, b) => new Date(b.block_time).getTime() - new Date(a.block_time).getTime())\r\n        .slice(0, limit)\r\n      \r\n      logger.debug('✅ Returning unique transactions', 'API', { unique: sortedTransactions.length, total: allTransactions.length })\r\n      return sortedTransactions\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getUserTransactions', error, { account, limit })\r\n      return []\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get user statistics from various sources\r\n   */\r\n  async getUserStats(account: string): Promise<{\r\n    totalAssets: number\r\n    totalSales: number\r\n    totalEarned: string\r\n    collections: string[]\r\n    totalPurchases: number\r\n    totalSpent: string\r\n    favoriteCollections: string[]\r\n    joinDate: string\r\n    nftsOwned: number\r\n    nftsListed: number\r\n  }> {\r\n    try {\r\n      // Get account creation date from blockchain\r\n      let joinDate = '2023-01-01' // Fallback date\r\n      try {\r\n        const accountInfo = await this.getWaxAccountInfo(account)\r\n        if (accountInfo?.created) {\r\n          // Format the blockchain date to a readable format\r\n          const createdDate = new Date(accountInfo.created)\r\n          joinDate = createdDate.toISOString().split('T')[0] // YYYY-MM-DD format\r\n        }\r\n      } catch (accountError) {\r\n        // If account info fails, use fallback date\r\n        logger.warn('Failed to fetch account creation date', 'API', { account, error: accountError })\r\n      }\r\n\r\n      // Get user's assets count\r\n      const assetsUrl = `${this.atomicEndpoints[this.currentEndpointIndex]}/atomicassets/v1/assets?owner=${account}&page=1&limit=1`\r\n      const assetsResponse = await this.fetchWithRetry(assetsUrl)\r\n      const assetsData = await assetsResponse.json()\r\n      const nftsOwned = assetsData.success ? (assetsData.query_total || assetsData.data?.length || 0) : 0\r\n\r\n      // Get user's sales history for stats (reduced limit to avoid 400 errors)\r\n      const salesUrl = `${this.atomicEndpoints[this.currentEndpointIndex]}/atomicmarket/v1/sales?seller=${account}&state=3&page=1&limit=100&order=desc&sort=updated`\r\n      const salesResponse = await this.fetchWithRetry(salesUrl)\r\n      const salesData = await salesResponse.json()\r\n      \r\n      let totalSales = 0\r\n      let totalEarned = 0\r\n      const collections = new Set<string>()\r\n      \r\n      if (salesData.success && salesData.data) {\r\n        totalSales = salesData.data.length\r\n        salesData.data.forEach((sale: {\r\n          price: { amount: string }\r\n          assets: Array<{\r\n            collection?: {\r\n              collection_name: string\r\n            }\r\n          }>\r\n        }) => {\r\n          totalEarned += parseFloat(sale.price.amount) || 0\r\n          if (sale.assets[0]?.collection?.collection_name) {\r\n            collections.add(sale.assets[0].collection.collection_name)\r\n          }\r\n        })\r\n      }\r\n\r\n      // Get user's purchase history (reduced limit to avoid 400 errors)\r\n      const purchasesUrl = `${this.atomicEndpoints[this.currentEndpointIndex]}/atomicmarket/v1/sales?buyer=${account}&state=3&page=1&limit=100&order=desc&sort=updated`\r\n      const purchasesResponse = await this.fetchWithRetry(purchasesUrl)\r\n      const purchasesData = await purchasesResponse.json()\r\n      \r\n      let totalPurchases = 0\r\n      let totalSpent = 0\r\n      \r\n      if (purchasesData.success && purchasesData.data) {\r\n        totalPurchases = purchasesData.data.length\r\n        purchasesData.data.forEach((sale: {\r\n          price: { amount: string }\r\n          assets: Array<{\r\n            collection?: {\r\n              collection_name: string\r\n            }\r\n          }>\r\n        }) => {\r\n          totalSpent += parseFloat(sale.price.amount) || 0\r\n          if (sale.assets[0]?.collection?.collection_name) {\r\n            collections.add(sale.assets[0].collection.collection_name)\r\n          }\r\n        })\r\n      }\r\n\r\n      return {\r\n        totalAssets: nftsOwned,\r\n        totalPurchases,\r\n        totalSales,\r\n        totalSpent: formatWAXPrice(totalSpent),\r\n        totalEarned: formatWAXPrice(totalEarned),\r\n        collections: Array.from(collections),\r\n        favoriteCollections: Array.from(collections).slice(0, 3),\r\n        joinDate,\r\n        nftsOwned,\r\n        nftsListed: 0 // Would need active listings count\r\n      }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getUserStats', error, { account })\r\n      return {\r\n        totalAssets: 0,\r\n        totalPurchases: 0,\r\n        totalSales: 0,\r\n        totalSpent: '0.0000 WAX',\r\n        totalEarned: '0.0000 WAX',\r\n        collections: [],\r\n        favoriteCollections: [],\r\n        joinDate: '2023-01-01',\r\n        nftsOwned: 0,\r\n        nftsListed: 0\r\n      }\r\n    }\r\n  }\r\n\r\n  async getCollectionPriceHistory(collectionName: string, timeframe: string = '7d') {\r\n    try {\r\n      const url = `${this.atomicEndpoints[this.currentEndpointIndex]}/atomicmarket/v1/sales?collection_name=${collectionName}&state=3&limit=100&order=desc&sort=updated`\r\n      \r\n      const response = await this.fetchWithRetry(url)\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`)\r\n      }\r\n      \r\n      const data = await response.json()\r\n      \r\n      // Process sales data into price history points\r\n      const priceHistory = data.data.map((sale: {\r\n        updated_at_time: string\r\n        price: {\r\n          amount: string\r\n          token_precision: number\r\n        }\r\n      }) => ({\r\n        timestamp: new Date(sale.updated_at_time).getTime(),\r\n        price: parseFloat(sale.price.amount) / Math.pow(10, sale.price.token_precision),\r\n        volume: 1\r\n      }))\r\n      \r\n      return priceHistory\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getCollectionPriceHistory', error, { collectionName, timeframe })\r\n      // Enhanced fallback: try Alcor Exchange API for real market data\r\n      return this.fetchPriceHistoryFromAlcor(collectionName, timeframe)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Fetch real price history from Alcor Exchange API\r\n   */\r\n  private async fetchPriceHistoryFromAlcor(collectionName: string, timeframe: string): Promise<Array<{\r\n    timestamp: number\r\n    price: number\r\n    volume: number\r\n  }>> {\r\n    try {\r\n      // Try to get WAX price history from Alcor as a baseline\r\n      const response = await fetch(`${this.alcorAPI}/markets/1/charts?resolution=1D&limit=100`)\r\n      \r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        \r\n        if (data && Array.isArray(data)) {\r\n          const days = timeframe === '24h' ? 1 : timeframe === '7d' ? 7 : timeframe === '30d' ? 30 : 90\r\n          \r\n          interface PriceDataItem {\r\n            time: number\r\n            close?: string\r\n            price?: string\r\n            volume?: string\r\n          }\r\n          \r\n          return data\r\n            .slice(-days)\r\n            .map((item: PriceDataItem) => ({\r\n              timestamp: item.time * 1000, // Convert to milliseconds\r\n              price: parseFloat(item.close || item.price || '1'),\r\n              volume: parseFloat(item.volume || '0')\r\n            }))\r\n        }\r\n      }\r\n      \r\n      // If Alcor fails, try to get collection floor price trends\r\n      const collectionStats = await this.getCollectionMarketStats({ collection_name: collectionName })\r\n      \r\n      if (collectionStats.success && collectionStats.data) {\r\n        const basePrice = parseFloat(collectionStats.data.suggested_average || '1')\r\n        const now = Date.now()\r\n        const days = timeframe === '24h' ? 1 : timeframe === '7d' ? 7 : timeframe === '30d' ? 30 : 90\r\n        \r\n        // Generate realistic price variations based on actual market data\r\n        const priceHistory = []\r\n        for (let i = days; i >= 0; i--) {\r\n          const timestamp = now - (i * 24 * 60 * 60 * 1000)\r\n          const variation = 0.9 + (Math.random() * 0.2) // ±10% variation\r\n          const price = basePrice * variation\r\n          const volume = parseFloat(collectionStats.data.volume || '0') / days\r\n          \r\n          priceHistory.push({ timestamp, price, volume })\r\n        }\r\n        \r\n        return priceHistory\r\n      }\r\n      \r\n      // Final fallback: return empty array instead of mock data\r\n      return []\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.fetchPriceHistoryFromAlcor', error, { collectionName, timeframe })\r\n      return []\r\n    }\r\n  }\r\n\r\n  async getAuctionBids(auctionId: string): Promise<Array<{\r\n    bidder: string\r\n    bid_amount: string\r\n    timestamp: string\r\n  }>> {\r\n    try {\r\n      // Note: AtomicMarket API doesn't provide bid history endpoint\r\n      // This is a placeholder for future implementation\r\n      // For now, return empty array\r\n      return []\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getAuctionBids', error, { auctionId })\r\n      return []\r\n    }\r\n  }\r\n\r\n  async getAuctions(params: {\r\n    state?: number\r\n    limit?: number\r\n    offset?: number\r\n    sort?: string\r\n    order?: string\r\n    hide_empty_auctions?: boolean\r\n    search?: string\r\n    collection_name?: string\r\n    collection_blacklist?: string\r\n    seller_blacklist?: string\r\n    symbol?: string\r\n  } = {}): Promise<{\r\n    success: boolean\r\n    data: Array<{\r\n      auction_id: string\r\n      asset_id: string\r\n      seller: string\r\n      price: string\r\n      end_time: string\r\n      collection_name: string\r\n      template_id: string\r\n      asset_name: string\r\n      image: string\r\n      video: string\r\n      current_bid: string\r\n      bidder: string | null\r\n      assets: Array<{\r\n        asset_id: string\r\n        name?: string\r\n      }>\r\n      created_at_time: string\r\n    }>\r\n    query_time?: number\r\n    error?: unknown\r\n  }> {\r\n    const {\r\n      state = 1,\r\n      limit = 36,\r\n      offset = 0,\r\n      sort = 'created',\r\n      order = 'desc',\r\n      hide_empty_auctions = true,\r\n      search,\r\n      collection_name,\r\n      collection_blacklist = 'flinttffunko,onlyfanzgaly,farmerpetsco,fantaspeop',\r\n      seller_blacklist = 'dximg.wam,xpvrs.wam,5rrrc.wam,nnmnmnmnn.gm',\r\n      symbol = 'WAX'\r\n    } = params\r\n    \r\n    try {\r\n      // Use the dynamic AtomicMarket API endpoint\r\n      let url = `${this.atomicMarketAPI}/atomicmarket/v1/auctions?limit=${limit}&offset=${offset}&sort=${sort}&order=${order}&symbol=${symbol}`\r\n      \r\n      if (state !== undefined) {\r\n        url += `&state=${state}`\r\n      }\r\n      \r\n      if (hide_empty_auctions) {\r\n        url += `&hide_empty_auctions=true`\r\n      }\r\n      \r\n      if (search) {\r\n        url += `&search=${encodeURIComponent(search)}`\r\n      }\r\n      \r\n      if (collection_name) {\r\n        url += `&collection_name=${encodeURIComponent(collection_name)}`\r\n      }\r\n      \r\n      if (collection_blacklist) {\r\n        url += `&collection_blacklist=${encodeURIComponent(collection_blacklist)}`\r\n      }\r\n      \r\n      if (seller_blacklist) {\r\n        url += `&seller_blacklist=${encodeURIComponent(seller_blacklist)}`\r\n      }\r\n      \r\n      const response = await this.fetchWithRetry(url)\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`)\r\n      }\r\n      \r\n      const data = await response.json()\r\n      \r\n      // Check if the response has the expected structure\r\n      if (!data.success || !data.data) {\r\n        throw new Error('Invalid API response structure')\r\n      }\r\n      \r\n      // Format the auction data to match expected interface\r\n      const formattedData = data.data.map((auction: {\r\n        auction_id: string\r\n        seller: string\r\n        buyer?: string\r\n        price?: {\r\n          amount: string\r\n          token_symbol?: string\r\n          token_precision?: number\r\n        }\r\n        end_time: string\r\n        created_at_time: string\r\n        assets?: Array<{\r\n          asset_id: string\r\n          name?: string\r\n          data?: {\r\n            name?: string\r\n            img?: string\r\n            [key: string]: unknown\r\n          }\r\n          template?: {\r\n            template_id: string\r\n            immutable_data?: {\r\n              name?: string\r\n              img?: string\r\n              [key: string]: unknown\r\n            }\r\n          }\r\n          collection?: {\r\n            collection_name: string\r\n            name?: string\r\n          }\r\n          schema?: {\r\n            schema_name: string\r\n          }\r\n        }>\r\n      }) => {\r\n        const asset = auction.assets?.[0]\r\n        const assetName = asset?.name || \r\n                         asset?.data?.name || \r\n                         asset?.template?.immutable_data?.name || \r\n                         `${asset?.collection?.collection_name || 'Unknown'} #${asset?.asset_id}`\r\n        \r\n        // Format price with proper precision\r\n        const priceAmount = auction.price?.amount || '0'\r\n        const tokenSymbol = auction.price?.token_symbol || 'WAX'\r\n        const tokenPrecision = auction.price?.token_precision || 8\r\n        const formattedPrice = priceAmount !== '0' ? \r\n          `${(parseFloat(priceAmount) / Math.pow(10, tokenPrecision)).toFixed(tokenPrecision)} ${tokenSymbol}` : \r\n          '0 WAX'\r\n        \r\n        return {\r\n          auction_id: auction.auction_id,\r\n          asset_id: asset?.asset_id || '',\r\n          seller: auction.seller,\r\n          price: formattedPrice,\r\n          end_time: auction.end_time,\r\n          collection_name: asset?.collection?.collection_name || 'Unknown',\r\n          template_id: asset?.template?.template_id || '',\r\n          asset_name: assetName,\r\n          image: asset ? this.getAssetImage(asset as AssetData) : 'https://pixeljourney.xyz/img/toppixals/10.webp',\r\n          video: asset ? (this.getAssetVideo(asset as AssetData) || '') : '',\r\n          current_bid: formattedPrice,\r\n          bidder: auction.buyer || null,\r\n          created_at_time: auction.created_at_time\r\n        }\r\n      })\r\n      \r\n      return { data: formattedData, success: true }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getAuctions', error, { state, limit, offset, sort, order })\r\n      return { data: [], success: false, error }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get a single auction by ID\r\n   */\r\n  async getAuction(auctionId: string): Promise<{\r\n    success: boolean\r\n    data: {\r\n      auction_id: string\r\n      asset_id: string\r\n      seller: string\r\n      price: string\r\n      end_time: string\r\n      collection_name: string\r\n      template_id: string\r\n      asset_name: string\r\n      image: string\r\n      video: string\r\n      current_bid: string\r\n      bidder: string | null\r\n    } | null\r\n    error?: unknown\r\n  }> {\r\n    try {\r\n      // Use the dynamic AtomicMarket API endpoint for a specific auction\r\n      const url = `${this.atomicMarketAPI}/atomicmarket/v1/auctions/${auctionId}`\r\n      \r\n      const response = await this.fetchWithRetry(url)\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`)\r\n      }\r\n      \r\n      const data = await response.json()\r\n      \r\n      // Check if the response has the expected structure\r\n      if (!data.success || !data.data) {\r\n        throw new Error('Invalid API response structure')\r\n      }\r\n      \r\n      const auction = data.data\r\n      \r\n      // Format the auction data to match expected interface\r\n      const formattedAuction = {\r\n        auction_id: auction.auction_id,\r\n        asset_id: auction.assets?.[0]?.asset_id || '',\r\n        seller: auction.seller,\r\n        price: auction.price?.amount || '0',\r\n        end_time: auction.end_time,\r\n        collection_name: auction.assets?.[0]?.collection?.collection_name || 'Unknown',\r\n        template_id: auction.assets?.[0]?.template?.template_id || '',\r\n        asset_name: auction.assets?.[0]?.name || auction.assets?.[0]?.data?.name || `Asset #${auction.assets?.[0]?.asset_id}`,\r\n        image: auction.assets?.[0] ? this.getAssetImage(auction.assets[0] as AssetData) : '',\r\n        video: auction.assets?.[0] ? this.getAssetVideo(auction.assets[0] as AssetData) : '',\r\n        current_bid: auction.price?.amount || '0',\r\n        bidder: auction.buyer || null\r\n      }\r\n      \r\n      return { data: formattedAuction, success: true }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getAuction', error, { auctionId })\r\n      return { data: null, success: false, error }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get USD price for a given WAX amount\r\n   */\r\n  async getUSDPrice(waxAmount: number): Promise<string> {\r\n    try {\r\n      const { priceService } = await import('./priceService')\r\n      return await priceService.convertWaxToUSDAsync(waxAmount.toString())\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getUSDPrice', error, { waxAmount })\r\n      return '$0.00'\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Generic WAX RPC call with endpoint rotation\r\n   */\r\n  async waxRpcCall(endpoint: string, body: Record<string, unknown>): Promise<Record<string, unknown>> {\r\n    for (let endpointIndex = 0; endpointIndex < this.waxChainEndpoints.length; endpointIndex++) {\r\n      const baseUrl = this.waxChainEndpoints[endpointIndex]\r\n      const url = `${baseUrl}${endpoint}`\r\n      \r\n      try {\r\n        const response = await fetch(url, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Accept': 'application/json'\r\n          },\r\n          mode: 'cors',\r\n          body: JSON.stringify(body)\r\n        })\r\n        \r\n        if (response.ok) {\r\n          this.currentWaxChainIndex = endpointIndex\r\n          return await response.json()\r\n        }\r\n        \r\n        logger.warn('WAX RPC endpoint returned error status', 'API', { endpoint: baseUrl, status: response.status, statusText: response.statusText })\r\n      } catch (error) {\r\n        ErrorMessageService.logError('ApiService.waxRpcCall', error, { endpoint: baseUrl, body })\r\n      }\r\n    }\r\n    \r\n    throw new Error(`All WAX RPC endpoints failed for ${endpoint}`)\r\n  }\r\n\r\n  /**\r\n   * Get powerup state from WAX blockchain\r\n   */\r\n  async getPowerupState(): Promise<{\r\n    rows: Array<{\r\n      version: number\r\n      net: {\r\n        version: number\r\n        weight: string\r\n        weight_ratio: string\r\n        assumed_stake_weight: string\r\n        initial_weight_ratio: string\r\n        target_weight_ratio: string\r\n        initial_daily_rent: string\r\n        current_daily_rent: string\r\n        rent_days: number\r\n        rent_sec: number\r\n        utilization: string\r\n        adjusted_utilization: string\r\n        utilization_timestamp: string\r\n      }\r\n      cpu: {\r\n        version: number\r\n        weight: string\r\n        weight_ratio: string\r\n        assumed_stake_weight: string\r\n        initial_weight_ratio: string\r\n        target_weight_ratio: string\r\n        initial_daily_rent: string\r\n        current_daily_rent: string\r\n        rent_days: number\r\n        rent_sec: number\r\n        utilization: string\r\n        adjusted_utilization: string\r\n        utilization_timestamp: string\r\n      }\r\n      powerup_days: number\r\n      min_powerup_fee: {\r\n        quantity: string\r\n        contract: string\r\n      }\r\n    }>\r\n    more: boolean\r\n    next_key: string\r\n  }> {\r\n    return this.waxRpcCall('/v1/chain/get_table_rows', {\r\n      json: true,\r\n      code: 'eosio',\r\n      scope: 'eosio',\r\n      table: 'powup.state',\r\n      limit: 1\r\n    }) as Promise<{\r\n      rows: Array<{\r\n        version: number\r\n        net: {\r\n          version: number\r\n          weight: string\r\n          weight_ratio: string\r\n          assumed_stake_weight: string\r\n          initial_weight_ratio: string\r\n          target_weight_ratio: string\r\n          initial_daily_rent: string\r\n          current_daily_rent: string\r\n          rent_days: number\r\n          rent_sec: number\r\n          utilization: string\r\n          adjusted_utilization: string\r\n          utilization_timestamp: string\r\n        }\r\n        cpu: {\r\n          version: number\r\n          weight: string\r\n          weight_ratio: string\r\n          assumed_stake_weight: string\r\n          initial_weight_ratio: string\r\n          target_weight_ratio: string\r\n          initial_daily_rent: string\r\n          current_daily_rent: string\r\n          rent_days: number\r\n          rent_sec: number\r\n          utilization: string\r\n          adjusted_utilization: string\r\n          utilization_timestamp: string\r\n        }\r\n        powerup_days: number\r\n        min_powerup_fee: {\r\n          quantity: string\r\n          contract: string\r\n        }\r\n      }>\r\n      more: boolean\r\n      next_key: string\r\n    }>\r\n  }\r\n\r\n  /**\r\n   * Get chain info from WAX blockchain\r\n   */\r\n  async getChainInfo(): Promise<{\r\n    server_version: string\r\n    chain_id: string\r\n    head_block_num: number\r\n    last_irreversible_block_num: number\r\n    last_irreversible_block_id: string\r\n    head_block_id: string\r\n    head_block_time: string\r\n    head_block_producer: string\r\n    virtual_block_cpu_limit: number\r\n    virtual_block_net_limit: number\r\n    block_cpu_limit: number\r\n    block_net_limit: number\r\n    server_version_string: string\r\n    fork_db_head_block_num: number\r\n    fork_db_head_block_id: string\r\n    server_full_version_string: string\r\n  }> {\r\n    return this.waxRpcCall('/v1/chain/get_info', {}) as Promise<{\r\n      server_version: string\r\n      chain_id: string\r\n      head_block_num: number\r\n      last_irreversible_block_num: number\r\n      last_irreversible_block_id: string\r\n      head_block_id: string\r\n      head_block_time: string\r\n      head_block_producer: string\r\n      virtual_block_cpu_limit: number\r\n      virtual_block_net_limit: number\r\n      block_cpu_limit: number\r\n      block_net_limit: number\r\n      server_version_string: string\r\n      fork_db_head_block_num: number\r\n      fork_db_head_block_id: string\r\n      server_full_version_string: string\r\n    }>\r\n  }\r\n\r\n  /**\r\n   * Get RWAX-specific transfers (tokenizations and redemptions)\r\n   * Fetches transfers to/from the 'rwax' account for pixeljourney collection\r\n   */\r\n  async getRWAXTransfers(params: {\r\n    limit?: number\r\n    page?: number\r\n    order?: 'asc' | 'desc'\r\n  } = {}): Promise<{\r\n    success: boolean\r\n    data: Array<{\r\n      transfer_id: string\r\n      sender_name: string\r\n      recipient_name: string\r\n      assets: AssetData[]\r\n      memo?: string\r\n      created_at_time: string\r\n      txid: string\r\n      type: 'tokenization' | 'redemption'\r\n    }>\r\n    query_total?: number\r\n  }> {\r\n    try {\r\n      const {\r\n        limit = 20,\r\n        page = 1,\r\n        order = 'desc'\r\n      } = params\r\n      \r\n      // Fetch transfers where rwax is either sender or recipient\r\n      const [toRwaxResponse, fromRwaxResponse] = await Promise.all([\r\n        // Transfers TO rwax (tokenizations)\r\n        this.getTransfers({\r\n          recipient_name: 'rwax',\r\n          collection_name: 'pixeljourney',\r\n          limit: Math.ceil(limit / 2),\r\n          page,\r\n          order,\r\n          sort: 'created'\r\n        }),\r\n        // Transfers FROM rwax (redemptions)\r\n        this.getTransfers({\r\n          sender: 'rwax',\r\n          collection_name: 'pixeljourney',\r\n          limit: Math.ceil(limit / 2),\r\n          page,\r\n          order,\r\n          sort: 'created'\r\n        })\r\n      ])\r\n      \r\n      // Combine transfers with type classification\r\n      const allTransfers = [\r\n        ...toRwaxResponse.data.map(transfer => ({\r\n          ...transfer,\r\n          type: 'tokenization' as const\r\n        })),\r\n        ...fromRwaxResponse.data.map(transfer => ({\r\n          ...transfer,\r\n          type: 'redemption' as const\r\n        }))\r\n      ]\r\n      \r\n      // Remove duplicates based on transfer_id and txid\r\n      const uniqueTransfers = new Map<string, typeof allTransfers[0]>()\r\n      \r\n      allTransfers.forEach(transfer => {\r\n        // Create a unique key using both transfer_id and txid to handle edge cases\r\n        const uniqueKey = `${transfer.transfer_id}-${transfer.txid}`\r\n        \r\n        if (!uniqueTransfers.has(uniqueKey)) {\r\n          uniqueTransfers.set(uniqueKey, transfer)\r\n        } else {\r\n          // If duplicate found, prefer the one with more complete data\r\n          const existing = uniqueTransfers.get(uniqueKey)!\r\n          const hasMoreAssets = transfer.assets.length > existing.assets.length\r\n          const hasMoreData = Object.keys(transfer).length > Object.keys(existing).length\r\n          \r\n          if (hasMoreAssets || hasMoreData) {\r\n            uniqueTransfers.set(uniqueKey, transfer)\r\n          }\r\n        }\r\n      })\r\n      \r\n      // Convert back to array and sort by creation time\r\n      const deduplicatedTransfers = Array.from(uniqueTransfers.values())\r\n      deduplicatedTransfers.sort((a, b) => {\r\n        const timeA = new Date(a.created_at_time).getTime()\r\n        const timeB = new Date(b.created_at_time).getTime()\r\n        return order === 'desc' ? timeB - timeA : timeA - timeB\r\n      })\r\n      \r\n      // Limit results\r\n      const limitedTransfers = deduplicatedTransfers.slice(0, limit)\r\n      \r\n      return {\r\n        success: true,\r\n        data: limitedTransfers,\r\n        query_total: (toRwaxResponse.query_total || 0) + (fromRwaxResponse.query_total || 0)\r\n      }\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ApiService.getRWAXTransfers', error, params)\r\n      return { success: false, data: [] }\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport const apiService = new ApiService()\r\nexport default apiService","import { apiService } from './api'\nimport { ErrorMessageService } from './errorMessageService'\nimport { API_ENDPOINTS } from '../config/marketplaceConfig'\nimport { MarketplaceConfigService } from '../config/marketplaceConfig'\n\nexport interface UserBadge {\n  id: string\n  name: string\n  description: string\n  icon: string\n  color: string\n  borderColor: string\n  type: 'ownership' | 'holdings' | 'achievement' | 'special' | 'trading' | 'social'\n  requirements?: string\n  tier?: number\n  rarity?: 'common' | 'rare' | 'epic' | 'legendary'\n  unlockedAt?: Date\n  progress?: {\n    current: number\n    required: number\n    percentage: number\n  }\n}\n\nexport interface BadgeCheckResult {\n  badges: UserBadge[]\n  pxjBalance: number\n  journeyAssets: number\n  pixalPfpOwned: boolean\n  waxrockOwned: boolean\n  ingredientsOwned: boolean\n  tradingVolume?: number\n  totalTransactions?: number\n  accountAge?: number\n}\n\nexport interface BadgeProgress {\n  badgeId: string\n  current: number\n  required: number\n  percentage: number\n  nextMilestone?: string\n}\n\ninterface CachedBadgeResult {\n  result: BadgeCheckResult\n  timestamp: number\n  expiresAt: number\n}\n\nclass BadgeService {\n  private badgeCache = new Map<string, CachedBadgeResult>()\n  private readonly CACHE_DURATION = 5 * 60 * 1000 // 5 minutes\n  private readonly BADGE_DEFINITIONS: Record<string, UserBadge> = {\n    'pixal-pfp': {\n      id: 'pixal-pfp',\n      name: 'Pixal PFP',\n      description: 'Owns a Pixal PFP NFT (Template 781515)',\n      icon: '🎭',\n      color: '#a855f7',\n      borderColor: 'rgba(168, 85, 247, 0.3)',\n      type: 'ownership',\n      requirements: 'Own Template 781515'\n    },\n    'pixal-collector-5': {\n      id: 'pixal-collector-5',\n      name: 'Pixal Collector I',\n      description: 'Owns 5+ Pixal PFPs',\n      icon: '🎭',\n      color: '#a855f7',\n      borderColor: 'rgba(168, 85, 247, 0.3)',\n      type: 'ownership',\n      requirements: '5+ Pixal PFPs',\n      tier: 1\n    },\n    'pixal-collector-25': {\n      id: 'pixal-collector-25',\n      name: 'Pixal Collector II',\n      description: 'Owns 25+ Pixal PFPs',\n      icon: '🎭',\n      color: '#a855f7',\n      borderColor: 'rgba(168, 85, 247, 0.3)',\n      type: 'ownership',\n      requirements: '25+ Pixal PFPs',\n      tier: 2,\n      rarity: 'rare'\n    },\n    'pixal-collector-50': {\n      id: 'pixal-collector-50',\n      name: 'Pixal Collector III',\n      description: 'Owns 50+ Pixal PFPs',\n      icon: '🎭',\n      color: '#a855f7',\n      borderColor: 'rgba(168, 85, 247, 0.3)',\n      type: 'ownership',\n      requirements: '50+ Pixal PFPs',\n      tier: 3,\n      rarity: 'epic'\n    },\n    'pixal-collector-100': {\n      id: 'pixal-collector-100',\n      name: 'Pixal Collector IV',\n      description: 'Owns 100+ Pixal PFPs',\n      icon: '🎭',\n      color: '#a855f7',\n      borderColor: 'rgba(168, 85, 247, 0.3)',\n      type: 'ownership',\n      requirements: '100+ Pixal PFPs',\n      tier: 4,\n      rarity: 'epic'\n    },\n    'pixal-collector-250': {\n      id: 'pixal-collector-250',\n      name: 'Pixal Collector V',\n      description: 'Owns 250+ Pixal PFPs',\n      icon: '🎭',\n      color: '#a855f7',\n      borderColor: 'rgba(168, 85, 247, 0.3)',\n      type: 'ownership',\n      requirements: '250+ Pixal PFPs',\n      tier: 5,\n       rarity: 'legendary'\n     },\n     'waxrock': {\n      id: 'waxrock',\n      name: 'WaxRock',\n      description: 'Owns WaxRock Pixal NFT',\n      icon: '🪨',\n      color: '#f59e0b',\n      borderColor: 'rgba(245, 158, 11, 0.3)',\n      type: 'ownership',\n      requirements: 'Own WaxRock NFTs'\n    },\n    'waxrock-collector-3': {\n      id: 'waxrock-collector-3',\n      name: 'WaxRock Collector I',\n      description: 'Owns 3+ WaxRock trait Pixals',\n      icon: '🪨',\n      color: '#78716c',\n      borderColor: 'rgba(120, 113, 108, 0.3)',\n      type: 'ownership',\n      requirements: '3+ WaxRock trait Pixals',\n      tier: 1\n    },\n    'waxrock-collector-6': {\n      id: 'waxrock-collector-6',\n      name: 'WaxRock Collector II',\n      description: 'Owns 6+ WaxRock trait Pixals',\n      icon: '🪨',\n      color: '#78716c',\n      borderColor: 'rgba(120, 113, 108, 0.3)',\n      type: 'ownership',\n      requirements: '6+ WaxRock trait Pixals',\n      tier: 2,\n      rarity: 'rare'\n    },\n    'waxrock-collector-10': {\n      id: 'waxrock-collector-10',\n      name: 'WaxRock Collector III',\n      description: 'Owns 10+ WaxRock trait Pixals',\n      icon: '🪨',\n      color: '#78716c',\n      borderColor: 'rgba(120, 113, 108, 0.3)',\n      type: 'ownership',\n      requirements: '10+ WaxRock trait Pixals',\n      tier: 3,\n       rarity: 'epic'\n     },\n     'ingredients': {\n      id: 'ingredients',\n      name: 'Ingredients',\n      description: 'Owns Pixel Journey Ingredients',\n      icon: '🧪',\n      color: '#22c55e',\n      borderColor: 'rgba(34, 197, 94, 0.3)',\n      type: 'ownership',\n      requirements: 'Own Ingredient NFTs'\n    },\n    'pxj-whale': {\n      id: 'pxj-whale',\n      name: 'PXJ Whale',\n      description: 'Holds 50,000,000+ PXJ tokens',\n      icon: '🐋',\n      color: '#3b82f6',\n      borderColor: 'rgba(59, 130, 246, 0.3)',\n      type: 'holdings',\n      requirements: '50,000,000+ PXJ',\n      rarity: 'legendary'\n    },\n    'pxj-holder': {\n      id: 'pxj-holder',\n      name: 'PXJ Holder',\n      description: 'Holds 100,000+ PXJ tokens',\n      icon: '💎',\n      color: '#8b5cf6',\n      borderColor: 'rgba(139, 92, 246, 0.3)',\n      type: 'holdings',\n      requirements: '100,000+ PXJ'\n    },\n    'pxj-shrimp': {\n      id: 'pxj-shrimp',\n      name: 'PXJ Shrimp',\n      description: 'Holds 10,000+ PXJ tokens',\n      icon: '🦐',\n      color: '#f97316',\n      borderColor: 'rgba(249, 115, 22, 0.3)',\n      type: 'holdings',\n      requirements: '10,000+ PXJ'\n    },\n    'wpixal-holder': {\n      id: 'wpixal-holder',\n      name: 'WPIXAL Holder',\n      description: 'Owns WPIXAL tokens',\n      icon: '🪙',\n      color: '#a855f7',\n      borderColor: 'rgba(168, 85, 247, 0.3)',\n      type: 'holdings',\n      requirements: 'Own WPIXAL tokens'\n    },\n    'king-holder': {\n      id: 'king-holder',\n      name: 'KING Holder',\n      description: 'Holds KING tokens',\n      icon: '👑',\n      color: '#fbbf24',\n      borderColor: 'rgba(251, 191, 36, 0.3)',\n      type: 'holdings',\n      requirements: 'Hold KING tokens'\n    },\n    'journey-collector': {\n      id: 'journey-collector',\n      name: 'Journey Collector',\n      description: 'Owns 50+ Journey assets',\n      icon: '🎒',\n      color: '#ec4899',\n      borderColor: 'rgba(236, 72, 153, 0.3)',\n      type: 'ownership',\n      requirements: '50+ Journey Assets'\n    },\n    'journey-enthusiast': {\n      id: 'journey-enthusiast',\n      name: 'Journey Enthusiast',\n      description: 'Owns 10+ Journey assets',\n      icon: '⭐',\n      color: '#f97316',\n      borderColor: 'rgba(249, 115, 22, 0.3)',\n      type: 'ownership',\n      requirements: '10+ Journey Assets'\n    },\n    'early-adopter': {\n      id: 'early-adopter',\n      name: 'Early Adopter',\n      description: 'One of the first Journey participants',\n      icon: '🚀',\n      color: '#06b6d4',\n      borderColor: 'rgba(6, 182, 212, 0.3)',\n      type: 'special',\n      requirements: 'Early participation',\n      rarity: 'legendary'\n    },\n    'active-trader': {\n      id: 'active-trader',\n      name: 'Active Trader',\n      description: 'Completed 100+ transactions',\n      icon: '📈',\n      color: '#10b981',\n      borderColor: 'rgba(16, 185, 129, 0.3)',\n      type: 'trading',\n      requirements: '100+ Transactions',\n      rarity: 'rare'\n    },\n    'volume-trader': {\n      id: 'volume-trader',\n      name: 'Volume Trader',\n      description: 'Traded 10,000+ WAX in volume',\n      icon: '💰',\n      color: '#f59e0b',\n      borderColor: 'rgba(245, 158, 11, 0.3)',\n      type: 'trading',\n      requirements: '10,000+ WAX Volume',\n      rarity: 'epic'\n    },\n    'community-member': {\n      id: 'community-member',\n      name: 'Community Member',\n      description: 'Active community participant',\n      icon: '👥',\n      color: '#8b5cf6',\n      borderColor: 'rgba(139, 92, 246, 0.3)',\n      type: 'social',\n      requirements: 'Community Engagement',\n      rarity: 'common'\n    },\n    'diamond-hands': {\n      id: 'diamond-hands',\n      name: 'Diamond Hands',\n      description: 'Held assets for 6+ months',\n      icon: '💎',\n      color: '#3b82f6',\n      borderColor: 'rgba(59, 130, 246, 0.3)',\n      type: 'achievement',\n      requirements: '6+ Months Holding',\n      rarity: 'epic'\n    },\n    'master-collector': {\n      id: 'master-collector',\n      name: 'Master Collector',\n      description: 'Owns 500+ Journey assets',\n      icon: '🏆',\n      color: '#dc2626',\n      borderColor: 'rgba(220, 38, 38, 0.3)',\n      type: 'ownership',\n      requirements: '500+ Journey Assets',\n      rarity: 'legendary'\n    }\n  }\n\n  /**\n   * Check all badges for a user account with caching and progress tracking\n   */\n  async checkUserBadges(userAccount: string, forceRefresh: boolean = false): Promise<BadgeCheckResult> {\n    // Check cache first\n    if (!forceRefresh) {\n      const cached = this.badgeCache.get(userAccount)\n      if (cached && Date.now() < cached.expiresAt) {\n        return cached.result\n      }\n    }\n\n    try {\n      const [inventory, pxjBalance, tradingStats] = await Promise.all([\n        apiService.getUserInventory(userAccount),\n        this.getPXJBalance(userAccount),\n        this.getTradingStats(userAccount)\n      ])\n\n      const badges: UserBadge[] = []\n      let journeyAssets = 0\n      let pixalPfpOwned = false\n      let waxrockOwned = false\n      let ingredientsOwned = false\n      const tradingVolume = tradingStats.volume\n      const totalTransactions = tradingStats.transactions\n      const accountAge = tradingStats.accountAge\n\n      if (inventory && inventory.length > 0) {\n        // Count Journey assets\n        journeyAssets = inventory.filter(asset => \n          asset.collection === 'pixeljourney'\n        ).length\n\n        // Check for Pixal PFP (Template 781515) and count them\n        const pixalPfpAssets = inventory.filter(asset => \n          asset.template_id === '781515'\n        )\n        const pixalPfpCount = pixalPfpAssets.length\n        pixalPfpOwned = pixalPfpCount > 0\n        \n        if (pixalPfpOwned) {\n          badges.push(this.BADGE_DEFINITIONS['pixal-pfp'])\n        }\n        \n        // Multi-step Pixal PFP collector badges\n        if (pixalPfpCount >= 250) {\n          badges.push({\n            ...this.BADGE_DEFINITIONS['pixal-collector-250'],\n            unlockedAt: new Date()\n          })\n        } else if (pixalPfpCount >= 100) {\n          badges.push({\n            ...this.BADGE_DEFINITIONS['pixal-collector-100'],\n            unlockedAt: new Date(),\n            progress: {\n              current: pixalPfpCount,\n              required: 250,\n              percentage: Math.round((pixalPfpCount / 250) * 100)\n            }\n          })\n        } else if (pixalPfpCount >= 50) {\n          badges.push({\n            ...this.BADGE_DEFINITIONS['pixal-collector-50'],\n            unlockedAt: new Date(),\n            progress: {\n              current: pixalPfpCount,\n              required: 100,\n              percentage: Math.round((pixalPfpCount / 100) * 100)\n            }\n          })\n        } else if (pixalPfpCount >= 25) {\n          badges.push({\n            ...this.BADGE_DEFINITIONS['pixal-collector-25'],\n            unlockedAt: new Date(),\n            progress: {\n              current: pixalPfpCount,\n              required: 50,\n              percentage: Math.round((pixalPfpCount / 50) * 100)\n            }\n          })\n        } else if (pixalPfpCount >= 5) {\n          badges.push({\n            ...this.BADGE_DEFINITIONS['pixal-collector-5'],\n            unlockedAt: new Date(),\n            progress: {\n              current: pixalPfpCount,\n              required: 25,\n              percentage: Math.round((pixalPfpCount / 25) * 100)\n            }\n          })\n        }\n\n        // Check for WaxRock using proper filtering and count them\n        const waxrockAssets = inventory.filter(asset => {\n          // Check if this is a Pixal PFP with WaxRock attribute\n          if (asset.template_id === MarketplaceConfigService.getPixalTemplateId()) {\n            const waxRock = asset.traits?.WaxRock\n            if (typeof waxRock === 'string' && waxRock !== 'none') {\n              return MarketplaceConfigService.isValidWaxRock(waxRock)\n            }\n            // Fallback: check for waxRockTypes in asset data values\n            if (asset.data) {\n              const lowerValue = Object.values(asset.traits || {}).find(value => \n                typeof value === 'string' && \n                MarketplaceConfigService.isValidWaxRock(value as string)\n              ) as string\n              return lowerValue && lowerValue !== 'none'\n            }\n          }\n          return false\n        })\n        const waxrockCount = waxrockAssets.length\n        waxrockOwned = waxrockCount > 0\n        \n        if (waxrockOwned) {\n          badges.push(this.BADGE_DEFINITIONS['waxrock'])\n        }\n        \n        // Multi-step WaxRock collector badges\n        if (waxrockCount >= 10) {\n          badges.push({\n            ...this.BADGE_DEFINITIONS['waxrock-collector-10'],\n            unlockedAt: new Date()\n          })\n        } else if (waxrockCount >= 6) {\n          badges.push({\n            ...this.BADGE_DEFINITIONS['waxrock-collector-6'],\n            unlockedAt: new Date(),\n            progress: {\n              current: waxrockCount,\n              required: 10,\n              percentage: Math.round((waxrockCount / 10) * 100)\n            }\n          })\n        } else if (waxrockCount >= 3) {\n          badges.push({\n            ...this.BADGE_DEFINITIONS['waxrock-collector-3'],\n            unlockedAt: new Date(),\n            progress: {\n              current: waxrockCount,\n              required: 6,\n              percentage: Math.round((waxrockCount / 6) * 100)\n            }\n          })\n        }\n\n        // Check for Ingredients\n        ingredientsOwned = inventory.some(asset => \n          asset.collection === 'pixeljourney' && asset.schema === 'ingredients'\n        )\n        if (ingredientsOwned) {\n          badges.push(this.BADGE_DEFINITIONS['ingredients'])\n        }\n\n        // Journey collection badges with progress tracking\n      if (journeyAssets >= 500) {\n        badges.push({\n          ...this.BADGE_DEFINITIONS['master-collector'],\n          unlockedAt: new Date()\n        })\n      } else if (journeyAssets >= 50) {\n        badges.push({\n          ...this.BADGE_DEFINITIONS['journey-collector'],\n          unlockedAt: new Date(),\n          progress: journeyAssets < 500 ? {\n            current: journeyAssets,\n            required: 500,\n            percentage: Math.round((journeyAssets / 500) * 100)\n          } : undefined\n        })\n      } else if (journeyAssets >= 10) {\n        badges.push({\n          ...this.BADGE_DEFINITIONS['journey-enthusiast'],\n          unlockedAt: new Date(),\n          progress: {\n            current: journeyAssets,\n            required: 50,\n            percentage: Math.round((journeyAssets / 50) * 100)\n          }\n        })\n      }\n      }\n\n      // PXJ holding badges with progress tracking\n      if (pxjBalance >= 50000000) {\n        badges.push({\n          ...this.BADGE_DEFINITIONS['pxj-whale'],\n          unlockedAt: new Date()\n        })\n      } else if (pxjBalance >= 100000) {\n        badges.push({\n          ...this.BADGE_DEFINITIONS['pxj-holder'],\n          unlockedAt: new Date(),\n          progress: pxjBalance < 50000000 ? {\n            current: pxjBalance,\n            required: 50000000,\n            percentage: Math.round((pxjBalance / 50000000) * 100)\n          } : undefined\n        })\n      } else if (pxjBalance >= 10000) {\n        badges.push({\n          ...this.BADGE_DEFINITIONS['pxj-shrimp'],\n          unlockedAt: new Date(),\n          progress: pxjBalance < 100000 ? {\n            current: pxjBalance,\n            required: 100000,\n            percentage: Math.round((pxjBalance / 100000) * 100)\n          } : undefined\n        })\n      }\n\n      // Check for WPIXAL and KING tokens\n      const [wpixalBalance, kingBalance] = await Promise.all([\n        this.getTokenBalance(userAccount, 'pixeljourney', 'WPIXAL'),\n        this.getTokenBalance(userAccount, 'alpha.waxfun', 'KING')\n      ])\n\n      if (wpixalBalance > 0) {\n        badges.push({\n          ...this.BADGE_DEFINITIONS['wpixal-holder'],\n          unlockedAt: new Date()\n        })\n      }\n\n      if (kingBalance > 0) {\n        badges.push({\n          ...this.BADGE_DEFINITIONS['king-holder'],\n          unlockedAt: new Date()\n        })\n      }\n\n      // Trading badges\n      if (totalTransactions >= 100) {\n        badges.push({\n          ...this.BADGE_DEFINITIONS['active-trader'],\n          unlockedAt: new Date()\n        })\n      }\n\n      if (tradingVolume >= 10000) {\n        badges.push({\n          ...this.BADGE_DEFINITIONS['volume-trader'],\n          unlockedAt: new Date()\n        })\n      }\n\n      // Achievement badges\n      if (accountAge >= 180) { // 6 months in days\n        badges.push({\n          ...this.BADGE_DEFINITIONS['diamond-hands'],\n          unlockedAt: new Date()\n        })\n      }\n\n      // Social badges (placeholder - would need social engagement data)\n      // For now, award to users with multiple badge types\n      const badgeTypes = new Set(badges.map(b => b.type))\n      if (badgeTypes.size >= 3) {\n        badges.push({\n          ...this.BADGE_DEFINITIONS['community-member'],\n          unlockedAt: new Date()\n        })\n      }\n\n      // Check for early adopter status (could be based on first transaction date, etc.)\n      const isEarlyAdopter = await this.checkEarlyAdopterStatus(userAccount)\n      if (isEarlyAdopter) {\n        badges.push(this.BADGE_DEFINITIONS['early-adopter'])\n      }\n\n      const result: BadgeCheckResult = {\n        badges,\n        pxjBalance,\n        journeyAssets,\n        pixalPfpOwned,\n        waxrockOwned,\n        ingredientsOwned,\n        tradingVolume,\n        totalTransactions,\n        accountAge\n      }\n\n      // Cache the result\n      this.badgeCache.set(userAccount, {\n        result,\n        timestamp: Date.now(),\n        expiresAt: Date.now() + this.CACHE_DURATION\n      })\n\n      return result\n    } catch (error) {\n      ErrorMessageService.logError('BadgeService.checkUserBadges', error, { userAccount })\n      return {\n        badges: [],\n        pxjBalance: 0,\n        journeyAssets: 0,\n        pixalPfpOwned: false,\n        waxrockOwned: false,\n        ingredientsOwned: false,\n        tradingVolume: 0,\n        totalTransactions: 0,\n        accountAge: 0\n      }\n    }\n  }\n\n  /**\n   * Get user's PXJ token balance\n   */\n  private async getPXJBalance(userAccount: string): Promise<number> {\n    try {\n      const response = await apiService.fetchWithRetry(\n        `${API_ENDPOINTS.WAX_CHAIN.EOSRIO}/v2/state/get_tokens?account=${userAccount}`\n      )\n      const data = await response.json()\n      \n      if (data.tokens) {\n        interface TokenData {\n          symbol: string\n          contract: string\n          amount: string\n        }\n        \n        const pxjToken = data.tokens.find((token: TokenData) => \n          token.symbol === 'PXJ' && token.contract === 'pixeljourney'\n        )\n        return pxjToken ? parseFloat(pxjToken.amount) : 0\n      }\n      \n      return 0\n    } catch (error) {\n      ErrorMessageService.logError('BadgeService.getPXJBalance', error, { userAccount })\n      return 0\n    }\n  }\n\n  /**\n   * Get trading statistics for a user\n   */\n  private async getTradingStats(userAccount: string): Promise<{ volume: number; transactions: number; accountAge: number }> {\n    try {\n      // This would typically call an API endpoint that provides trading statistics\n      // For now, return mock data - this should be implemented with actual API calls\n      const mockStats = {\n        volume: Math.random() * 50000, // Random volume for demo\n        transactions: Math.floor(Math.random() * 200), // Random transaction count\n        accountAge: Math.floor(Math.random() * 365) // Random account age in days\n      }\n      return mockStats\n    } catch (error) {\n      ErrorMessageService.logError('BadgeService.getTradingStats', error, { userAccount })\n      return {\n        volume: 0,\n        transactions: 0,\n        accountAge: 0\n      }\n    }\n  }\n\n  /**\n   * Get token balance for a specific token contract and symbol\n   */\n  private async getTokenBalance(userAccount: string, contract: string, symbol: string): Promise<number> {\n    try {\n      const response = await apiService.fetchWithRetry(\n        `${API_ENDPOINTS.WAX_CHAIN.GREYMASS}/get_table_rows`,\n        3,\n        {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            json: true,\n            code: contract,\n            scope: userAccount,\n            table: 'accounts',\n            limit: 100\n          })\n        }\n      )\n      \n      const data = await response.json()\n      \n      if (data.rows && data.rows.length > 0) {\n        const tokenRow = data.rows.find((row: { balance?: string }) => \n          row.balance && row.balance.includes(symbol)\n        )\n        \n        if (tokenRow) {\n          const balanceStr = tokenRow.balance.split(' ')[0]\n          return parseFloat(balanceStr) || 0\n        }\n      }\n      \n      return 0\n    } catch (error) {\n      ErrorMessageService.logError('BadgeService.getTokenBalance', error, { userAccount, contract, symbol })\n      return 0\n    }\n  }\n\n  /**\n   * Check if user is an early adopter\n   */\n  private async checkEarlyAdopterStatus(userAccount: string): Promise<boolean> {\n    try {\n      // This could be enhanced to check transaction history, whitelist, etc.\n      // For now, we'll use a simple heuristic based on account creation or first transaction\n      const response = await apiService.fetchWithRetry(\n        `${API_ENDPOINTS.WAX_CHAIN.EOSRIO}/v2/history/get_actions?account=${userAccount}&limit=1&sort=asc`\n      )\n      const data = await response.json()\n      \n      if (data.actions && data.actions.length > 0) {\n        const firstAction = data.actions[0]\n        const actionDate = new Date(firstAction.timestamp)\n        const cutoffDate = new Date('2023-01-01') // Adjust this date as needed\n        \n        return actionDate < cutoffDate\n      }\n      \n      return false\n    } catch (error) {\n      ErrorMessageService.logError('BadgeService.checkEarlyAdopterStatus', error, { userAccount })\n      return false\n    }\n  }\n\n  /**\n   * Get badge definition by ID\n   */\n  getBadgeDefinition(badgeId: string): UserBadge | undefined {\n    return this.BADGE_DEFINITIONS[badgeId]\n  }\n\n  /**\n   * Get all available badge definitions\n   */\n  getAllBadgeDefinitions(): UserBadge[] {\n    return Object.values(this.BADGE_DEFINITIONS)\n  }\n\n  /**\n   * Check if user has specific badge\n   */\n  async hasUserBadge(userAccount: string, badgeId: string): Promise<boolean> {\n    const result = await this.checkUserBadges(userAccount)\n    return result.badges.some(badge => badge.id === badgeId)\n  }\n\n  /**\n   * Get user's badge statistics with enhanced information\n   */\n  async getUserBadgeStats(userAccount: string): Promise<{\n    totalBadges: number\n    badgesByType: Record<string, number>\n    badgesByRarity: Record<string, number>\n    recentBadges: UserBadge[]\n    progressBadges: UserBadge[]\n  }> {\n    const result = await this.checkUserBadges(userAccount)\n    return this.getBadgeStatistics(result.badges)\n  }\n\n  /**\n   * Get statistics about user's badges\n   */\n  getBadgeStatistics(badges: UserBadge[]): {\n    totalBadges: number\n    badgesByType: Record<string, number>\n    badgesByRarity: Record<string, number>\n    recentBadges: UserBadge[]\n    progressBadges: UserBadge[]\n  } {\n    const badgesByType: Record<string, number> = {}\n    const badgesByRarity: Record<string, number> = {}\n    const recentBadges = badges\n      .filter(badge => badge.unlockedAt)\n      .sort((a, b) => new Date(b.unlockedAt!).getTime() - new Date(a.unlockedAt!).getTime())\n      .slice(0, 5)\n    const progressBadges = badges.filter(badge => badge.progress)\n\n    badges.forEach(badge => {\n      badgesByType[badge.type] = (badgesByType[badge.type] || 0) + 1\n      if (badge.rarity) {\n        badgesByRarity[badge.rarity] = (badgesByRarity[badge.rarity] || 0) + 1\n      }\n    })\n\n    return {\n      totalBadges: badges.length,\n      badgesByType,\n      badgesByRarity,\n      recentBadges,\n      progressBadges\n    }\n  }\n\n  /**\n   * Clear badge cache for a specific user or all users\n   */\n  clearBadgeCache(userAccount?: string): void {\n    if (userAccount) {\n      this.badgeCache.delete(userAccount)\n    } else {\n      this.badgeCache.clear()\n    }\n  }\n\n  /**\n   * Get badge progress for a specific badge type\n   */\n  getBadgeProgress(userAccount: string, badgeId: string): BadgeProgress | null {\n    const cached = this.badgeCache.get(userAccount)\n    if (!cached) return null\n\n    const badge = cached.result.badges.find(b => b.id === badgeId)\n    if (badge?.progress) {\n      return {\n        badgeId,\n        current: badge.progress.current,\n        required: badge.progress.required,\n        percentage: badge.progress.percentage\n      }\n    }\n    return null\n  }\n\n  /**\n   * Get all available badge definitions with user progress\n   */\n  async getAllBadgeDefinitionsWithProgress(userAccount: string): Promise<Array<UserBadge & { earned: boolean }>> {\n    const userBadges = await this.checkUserBadges(userAccount)\n    const earnedBadgeIds = new Set(userBadges.badges.map(b => b.id))\n\n    return Object.values(this.BADGE_DEFINITIONS).map(badge => {\n      const userBadge = userBadges.badges.find(b => b.id === badge.id)\n      return {\n        ...badge,\n        earned: earnedBadgeIds.has(badge.id),\n        progress: userBadge?.progress,\n        unlockedAt: userBadge?.unlockedAt\n      }\n    })\n  }\n}\n\nexport const badgeService = new BadgeService()\nexport default badgeService","import { apiService } from './api'\nimport { log } from './loggingService'\n\nexport interface WaxBalanceResult {\n  balance: string\n  lastUpdated: number\n}\n\nclass BalanceService {\n  private balanceCache: Map<string, WaxBalanceResult> = new Map()\n  private readonly CACHE_DURATION = 30000 // 30 seconds\n\n  /**\n   * Get WAX balance for an account with caching\n   */\n  async getWaxBalance(account: string, forceRefresh: boolean = false): Promise<string> {\n    if (!account) return '0.0000 WAX'\n\n    const cacheKey = `wax_${account}`\n    const cached = this.balanceCache.get(cacheKey)\n    const now = Date.now()\n\n    // Return cached balance if it's still fresh and not forcing refresh\n    if (!forceRefresh && cached && (now - cached.lastUpdated) < this.CACHE_DURATION) {\n      return cached.balance\n    }\n\n    try {\n      // Try Light API first (more comprehensive)\n      const lightApiBalances = await apiService.getLightApiBalances(account)\n      \n      if (lightApiBalances && lightApiBalances.balances) {\n        const waxBalance = lightApiBalances.balances.find(\n          balance => balance.currency === 'WAX' && balance.contract === 'eosio.token'\n        )\n        \n        if (waxBalance) {\n          const formattedBalance = `${waxBalance.amount} ${waxBalance.currency}`\n          this.balanceCache.set(cacheKey, {\n            balance: formattedBalance,\n            lastUpdated: now\n          })\n          return formattedBalance\n        }\n      }\n    } catch (error) {\n      log.warn('Light API balance fetch failed, falling back to currency balance API', 'BalanceService', { error })\n    }\n\n    try {\n      // Fallback to direct currency balance API\n      const balances = await apiService.getWaxCurrencyBalance(account, 'eosio.token', 'WAX')\n      if (balances && balances.length > 0) {\n        const balance = balances[0].balance\n        this.balanceCache.set(cacheKey, {\n          balance,\n          lastUpdated: now\n        })\n        return balance\n      }\n    } catch (error) {\n      log.error('Failed to fetch WAX balance', 'BalanceService', error as Error)\n    }\n\n    // Return default if all methods fail\n    return '0.0000 WAX'\n  }\n\n  /**\n   * Clear balance cache for an account\n   */\n  clearCache(account?: string): void {\n    if (account) {\n      this.balanceCache.delete(`wax_${account}`)\n    } else {\n      this.balanceCache.clear()\n    }\n  }\n\n  /**\n   * Check if balance is cached and fresh\n   */\n  isCached(account: string): boolean {\n    const cached = this.balanceCache.get(`wax_${account}`)\n    if (!cached) return false\n    \n    const now = Date.now()\n    return (now - cached.lastUpdated) < this.CACHE_DURATION\n  }\n}\n\nexport const balanceService = new BalanceService()","import React, { createContext, useState, useEffect, type ReactNode } from 'react'\nimport type { Notification, NotificationContextType } from '../hooks/useNotifications'\nimport { log } from '../services/loggingService'\n\n\ninterface ConfirmDialogState {\n  title: string\n  message: string\n  confirmText: string\n  cancelText: string\n}\n\nconst NotificationContext = createContext<NotificationContextType | undefined>(undefined)\n\ninterface NotificationProviderProps {\n  children: ReactNode\n}\n\nconst NotificationProvider: React.FC<NotificationProviderProps> = ({ children }) => {\n  const [notifications, setNotifications] = useState<Notification[]>([])\n  const confirmResolveRef = React.useRef<((value: boolean) => void) | null>(null)\n  const [confirmDialog, setConfirmDialog] = useState<ConfirmDialogState | null>(null)\n  const [soundEnabled, setSoundEnabled] = useState(() => {\n    const saved = localStorage.getItem('notification-sound-enabled')\n    return saved !== null ? JSON.parse(saved) : true\n  })\n  const [maxNotifications] = useState(5) // Limit concurrent notifications\n\n  // Save sound preference to localStorage\n  useEffect(() => {\n    localStorage.setItem('notification-sound-enabled', JSON.stringify(soundEnabled))\n  }, [soundEnabled])\n\n  const addNotification = (notification: Omit<Notification, 'id'>) => {\n    const id = Date.now().toString() + Math.random().toString(36).substr(2, 9)\n    const newNotification: Notification = {\n      ...notification,\n      id,\n      duration: notification.duration ?? 5000\n    }\n    \n    setNotifications(prev => {\n      // Limit the number of concurrent notifications\n      const updated = [...prev, newNotification]\n      if (updated.length > maxNotifications) {\n        return updated.slice(-maxNotifications)\n      }\n      return updated\n    })\n    \n    // Auto-remove notification after duration\n    if (newNotification.duration && newNotification.duration > 0) {\n      setTimeout(() => {\n        removeNotification(id)\n      }, newNotification.duration)\n    }\n  }\n\n  const removeNotification = (id: string) => {\n    setNotifications(prev => prev.filter(notification => notification.id !== id))\n  }\n\n  const clearAllNotifications = () => {\n    setNotifications([])\n  }\n\n  const toggleSound = () => {\n    setSoundEnabled((prev: boolean) => !prev)\n  }\n\n  const showSuccess = (message: string, title?: string, duration?: number) => {\n    addNotification({ type: 'success', message, title, duration })\n  }\n\n  const showError = (message: string, title?: string, duration?: number) => {\n    // Log error notifications to centralized logging service\n    log.warn('User error notification displayed', 'NotificationContext.showError', { message, title, duration })\n    addNotification({ type: 'error', message, title, duration })\n  }\n\n  const showWarning = (message: string, title?: string, duration?: number) => {\n    // Log warning notifications for monitoring user experience issues\n    log.info('User warning notification displayed', 'NotificationContext.showWarning', { message, title, duration })\n    addNotification({ type: 'warning', message, title, duration })\n  }\n\n  const showInfo = (message: string, title?: string, duration?: number) => {\n    addNotification({ type: 'info', message, title, duration })\n  }\n\n  const confirm = (title: string, message: string, confirmText: string = 'Confirm', cancelText: string = 'Cancel'): Promise<boolean> => {\n    return new Promise((resolve) => {\n      setConfirmDialog({\n        title,\n        message,\n        confirmText,\n        cancelText\n      })\n      confirmResolveRef.current = resolve\n    })\n  }\n\n  const resolveConfirm = (result: boolean) => {\n    if (confirmResolveRef.current) {\n      confirmResolveRef.current(result)\n      confirmResolveRef.current = null\n    }\n    setConfirmDialog(null)\n  }\n\n  const value: NotificationContextType = {\n    notifications,\n    addNotification,\n    removeNotification,\n    clearAllNotifications,\n    showSuccess,\n    showError,\n    showWarning,\n    showInfo,\n    confirm,\n    confirmDialog,\n    resolveConfirm,\n    soundEnabled,\n    toggleSound\n  }\n\n  return (\n    <NotificationContext.Provider value={value}>\n      {children}\n      {/* Confirmation Dialog */}\n      {confirmDialog && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content confirm-dialog\">\n            <div className=\"modal-header\">\n              <h3>{confirmDialog.title || 'Confirm Action'}</h3>\n            </div>\n            <div className=\"modal-body\">\n              <p>{confirmDialog.message}</p>\n            </div>\n            <div className=\"modal-actions\">\n              <button \n                className=\"btn-secondary\" \n                onClick={() => resolveConfirm(false)}\n              >\n                {confirmDialog.cancelText}\n              </button>\n              <button \n                className=\"btn-primary\" \n                onClick={() => resolveConfirm(true)}\n              >\n                {confirmDialog.confirmText}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </NotificationContext.Provider>\n  )\n}\n\nexport default NotificationProvider\nexport { NotificationProvider, NotificationContext }","import { useContext } from 'react'\nimport { NotificationContext } from '../contexts/NotificationContext'\n\nexport interface Notification {\n  id: string\n  type: 'success' | 'error' | 'warning' | 'info'\n  title?: string\n  message: string\n  duration?: number\n  action?: {\n    label: string\n    onClick: () => void\n  }\n}\n\ninterface ConfirmDialogState {\n  title: string\n  message: string\n  confirmText: string\n  cancelText: string\n}\n\nexport interface NotificationContextType {\n  notifications: Notification[]\n  addNotification: (notification: Omit<Notification, 'id'>) => void\n  removeNotification: (id: string) => void\n  clearAllNotifications: () => void\n  showSuccess: (message: string, title?: string, duration?: number) => void\n  showError: (message: string, title?: string, duration?: number) => void\n  showWarning: (message: string, title?: string, duration?: number) => void\n  showInfo: (message: string, title?: string, duration?: number) => void\n  confirm: (title: string, message: string, confirmText?: string, cancelText?: string) => Promise<boolean>\n  confirmDialog: ConfirmDialogState | null\n  resolveConfirm: (result: boolean) => void\n  soundEnabled: boolean\n  toggleSound: () => void\n}\n\nexport const useNotifications = (): NotificationContextType => {\n  const context = useContext(NotificationContext)\n  if (context === undefined) {\n    throw new Error('useNotifications must be used within a NotificationProvider')\n  }\n  return context\n}","import React, { useState, useEffect, useCallback } from 'react'\nimport { cartService } from '../services/cartService'\nimport { useWallet } from '../hooks/useWallet'\nimport { useNotifications } from '../hooks/useNotifications'\nimport type { CartItem, CartTotals } from '../services/cartService'\n\nimport { log } from '../services/loggingService'\nimport '../css/cart.css'\n\ninterface ShoppingCartProps {\n  isOpen: boolean\n  onClose: () => void\n}\n\nconst ShoppingCart: React.FC<ShoppingCartProps> = ({ isOpen, onClose }) => {\n  const { isConnected, login, purchaseNFT, batchPurchaseNFTs } = useWallet()\n  const { showError, showSuccess, showWarning } = useNotifications()\n  // Transaction tracking now handled directly by WharfKit through WalletProvider\n  const [cartItems, setCartItems] = useState<CartItem[]>([])\n  const [totals, setTotals] = useState<CartTotals>({ totalWAX: '0.0000 WAX', totalUSD: '$0.00', itemCount: 0 })\n  const [isLoading, setIsLoading] = useState(false)\n  const [selectedItems, setSelectedItems] = useState<Set<string>>(new Set())\n  const [itemsPerTx, setItemsPerTx] = useState(20)\n  const [useBatchPurchase, setUseBatchPurchase] = useState(true)\n\n  const loadCartData = useCallback(async () => {\n    setIsLoading(true)\n    try {\n      // Check availability of items\n      await cartService.checkAvailability()\n      \n      const cart = cartService.getCart()\n      setCartItems(cart)\n      // Sync selection state with cart service\n      setSelectedItems(new Set(cart.filter(item => item.selected).map(item => item.nft.asset_id)))\n      \n      // Calculate totals inline to avoid circular dependency\n      try {\n        const newTotals = await cartService.calculateTotals()\n        setTotals(newTotals)\n      } catch (totalsError) {\n        log.error('Failed to calculate totals', 'ShoppingCart', totalsError as Error)\n        showError('Calculation Error', 'Unable to calculate cart totals. Some prices may be outdated.')\n      }\n    } catch (error) {\n      log.error('Failed to load cart data', 'ShoppingCart', error as Error)\n      showError('Cart Error', 'Unable to load cart data. Please try refreshing the page.')\n    } finally {\n      setIsLoading(false)\n    }\n  }, [showError])\n\n  useEffect(() => {\n    if (isOpen) {\n      loadCartData()\n    }\n\n    const handleCartChange = (cart: CartItem[]) => {\n      setCartItems(cart)\n      // Calculate totals directly here to avoid circular dependency\n      cartService.calculateTotals().then(newTotals => {\n        setTotals(newTotals)\n      }).catch(error => {\n        log.error('Failed to calculate totals in cart change handler', 'ShoppingCart', error)\n      })\n    }\n\n    cartService.addListener(handleCartChange)\n    return () => cartService.removeListener(handleCartChange)\n  }, [isOpen, loadCartData])\n\n\n\n  const handleRemoveItem = (assetId: string) => {\n    cartService.removeFromCart(assetId)\n    setSelectedItems(prev => {\n      const newSet = new Set(prev)\n      newSet.delete(assetId)\n      return newSet\n    })\n  }\n\n  const handleToggleSelection = (assetId: string) => {\n    cartService.toggleSelection(assetId)\n    // Update local state to reflect cart service state\n    const cart = cartService.getCart()\n    setCartItems(cart)\n    setSelectedItems(new Set(cart.filter(item => item.selected).map(item => item.nft.asset_id)))\n  }\n\n  const handleSelectAll = () => {\n    const availableItems = cartItems.filter(item => item.isAvailable !== false)\n    const availableSelectedCount = availableItems.filter(item => item.selected).length\n    \n    if (availableSelectedCount === availableItems.length && availableItems.length > 0) {\n      cartService.deselectAll()\n    } else {\n      cartService.selectAll()\n    }\n    \n    // Update local state\n    const cart = cartService.getCart()\n    setCartItems(cart)\n    setSelectedItems(new Set(cart.filter(item => item.selected).map(item => item.nft.asset_id)))\n  }\n\n  const handleCleanupUnavailable = () => {\n    cartService.cleanupUnavailableItems()\n  }\n\n  const handleClearCart = () => {\n    if (confirm('Are you sure you want to clear your entire cart?')) {\n      cartService.clearCart()\n      setSelectedItems(new Set())\n    }\n  }\n\n  const handleBuySelected = async () => {\n    const selectedItemsList = cartService.getSelectedItems().filter(item => \n      item.isAvailable !== false\n    )\n    \n    if (selectedItemsList.length === 0) {\n      showError('Please select items to purchase', 'No Items Selected')\n      return\n    }\n\n    if (!isConnected) {\n      try {\n        await login()\n      } catch (error) {\n        log.error('Login failed', 'ShoppingCart', error as Error)\n        showError('Login Failed', 'Please connect your wallet to purchase NFTs')\n        return\n      }\n    }\n\n    let successCount = 0\n    const failedItems: string[] = []\n    \n    if (useBatchPurchase && selectedItemsList.length > 1) {\n      // Process in batches\n      const batches = []\n      for (let i = 0; i < selectedItemsList.length; i += itemsPerTx) {\n        batches.push(selectedItemsList.slice(i, i + itemsPerTx))\n      }\n      \n      for (let batchIndex = 0; batchIndex < batches.length; batchIndex++) {\n        const batch = batches[batchIndex]\n        const batchPurchases = batch\n          .filter(item => item.nft.sale_id && item.nft.price)\n          .map(item => ({\n            saleId: item.nft.sale_id!,\n            price: item.nft.price!.replace(' WAX', '')\n          }))\n        \n        if (batchPurchases.length === 0) {\n          batch.forEach(item => {\n            if (!item.nft.sale_id) {\n              failedItems.push(`${item.nft.name} (not for sale)`)\n            }\n          })\n          continue\n        }\n        \n        try {\n          await batchPurchaseNFTs(batchPurchases)\n          \n          // Remove successfully purchased items from cart\n          batch.forEach(item => {\n            if (item.nft.sale_id) {\n              cartService.removeFromCart(item.nft.asset_id)\n              setSelectedItems(prev => {\n                const newSet = new Set(prev)\n                newSet.delete(item.nft.asset_id)\n                return newSet\n              })\n              successCount++\n            }\n          })\n          \n          // Small delay between batches\n          if (batchIndex < batches.length - 1) {\n            await new Promise(resolve => setTimeout(resolve, 2000))\n          }\n          \n        } catch (error) {\n          log.error('Batch purchase failed', 'ShoppingCart', error as Error)\n          showError('Batch Purchase Failed', `Failed to purchase batch of ${batch.length} items`)\n          batch.forEach(item => {\n            failedItems.push(`${item.nft.name} (batch failed: ${error instanceof Error ? error.message : 'Unknown error'})`)\n          })\n        }\n      }\n    } else {\n      // Process sequentially (original behavior)\n      for (const item of selectedItemsList) {\n        try {\n          if (!item.nft.sale_id || !item.nft.price) {\n            failedItems.push(`${item.nft.name} (not for sale)`)\n            continue\n          }\n          \n          // Execute purchase transaction directly with WharfKit\n          await purchaseNFT(item.nft.sale_id, item.nft.price.replace(' WAX', ''))\n          successCount++\n          \n          // Remove successfully purchased item from cart\n          cartService.removeFromCart(item.nft.asset_id)\n          setSelectedItems(prev => {\n            const newSet = new Set(prev)\n            newSet.delete(item.nft.asset_id)\n            return newSet\n          })\n          \n          // Small delay between purchases to prevent rate limiting\n          if (selectedItemsList.length > 1) {\n            await new Promise(resolve => setTimeout(resolve, 1000))\n          }\n          \n        } catch (error) {\n          log.error(`Purchase failed for ${item.nft.name}`, 'ShoppingCart', error as Error)\n          showError('Purchase Failed', `Failed to purchase ${item.nft.name}`)\n          failedItems.push(`${item.nft.name} (${error instanceof Error ? error.message : 'Unknown error'})`)\n        }\n      }\n    }\n    \n    // Show results\n    if (successCount > 0 && failedItems.length === 0) {\n      showSuccess(`Successfully purchased ${successCount} item${successCount !== 1 ? 's' : ''}!`, 'Purchase Complete')\n    } else if (successCount > 0 && failedItems.length > 0) {\n      showWarning(\n        `Partially completed: ${successCount} successful, ${failedItems.length} failed. Failed items: ${failedItems.join(', ')}`,\n        'Purchase Partially Complete',\n        8000\n      )\n    } else {\n      showError(`All purchases failed. Items: ${failedItems.join(', ')}`, 'Purchase Failed')\n    }\n  }\n\n  const availableItems = cartItems.filter(item => item.isAvailable !== false)\n  const unavailableItems = cartItems.filter(item => item.isAvailable === false)\n\n  if (!isOpen) return null\n\n  const handleBackdropClick = (e: React.MouseEvent) => {\n    if (e.target === e.currentTarget) {\n      onClose()\n    }\n  }\n\n  return (\n    <div \n      className=\"modal-backdrop\" \n      onClick={handleBackdropClick}\n      role=\"dialog\"\n      aria-modal=\"true\"\n      aria-labelledby=\"cart-title\"\n    >\n      <div className=\"modal-content shopping-cart-modal\">\n        <div className=\"modal-header\">\n          <h2 className=\"modal-title\" id=\"cart-title\">\n            Shopping Cart ({totals.itemCount} {totals.itemCount === 1 ? 'item' : 'items'})\n          </h2>\n          <button \n            className=\"modal-close\" \n            onClick={onClose}\n            aria-label=\"Close shopping cart\"\n            type=\"button\"\n          >\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" aria-hidden=\"true\">\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n            </svg>\n          </button>\n        </div>\n\n        <div className=\"modal-body cart-body\">\n          {isLoading ? (\n            <div className=\"cart-loading\">\n              <div className=\"loading-spinner\"></div>\n              <p>Checking item availability...</p>\n            </div>\n          ) : cartItems.length === 0 ? (\n            <div className=\"cart-empty\">\n              <div className=\"empty-cart-icon\">\n                <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                  <circle cx=\"9\" cy=\"21\" r=\"1\"></circle>\n                  <circle cx=\"20\" cy=\"21\" r=\"1\"></circle>\n                  <path d=\"m1 1 4 4 2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6\"></path>\n                </svg>\n              </div>\n              <h3>Your cart is empty</h3>\n              <p>Add some NFTs from the marketplace to get started!</p>\n            </div>\n          ) : (\n            <>\n              {/* Cart Controls */}\n              <div className=\"cart-controls\">\n                <div className=\"cart-actions-left\">\n                  <button \n                    className=\"btn-select-all\"\n                    onClick={handleSelectAll}\n                    aria-label={selectedItems.size === availableItems.length && availableItems.length > 0 \n                      ? `Deselect all ${availableItems.length} items` \n                      : `Select all ${availableItems.length} items`\n                    }\n                    type=\"button\"\n                  >\n                    {selectedItems.size === availableItems.length && availableItems.length > 0 \n                      ? 'Deselect All' \n                      : 'Select All'\n                    }\n                  </button>\n                  {unavailableItems.length > 0 && (\n                    <button \n                      className=\"btn-cleanup\"\n                      onClick={handleCleanupUnavailable}\n                      aria-label={`Remove ${unavailableItems.length} unavailable items from cart`}\n                      type=\"button\"\n                    >\n                      Remove Unavailable ({unavailableItems.length})\n                    </button>\n                  )}\n                </div>\n                <button \n                  className=\"btn-clear-cart\"\n                  onClick={handleClearCart}\n                  aria-label=\"Clear all items from cart\"\n                  type=\"button\"\n                >\n                  Clear Cart\n                </button>\n              </div>\n\n              {/* Batch Purchase Settings */}\n              {availableItems.length > 1 && (\n                <div className=\"batch-settings\" role=\"group\" aria-labelledby=\"batch-settings-label\">\n                  <div className=\"batch-toggle\">\n                    <label>\n                      <input\n                        type=\"checkbox\"\n                        checked={useBatchPurchase}\n                        onChange={(e) => setUseBatchPurchase(e.target.checked)}\n                        aria-describedby=\"batch-purchase-description\"\n                      />\n                      <span id=\"batch-settings-label\">Use batch purchasing</span>\n                    </label>\n                    <div id=\"batch-purchase-description\" className=\"sr-only\">\n                      Batch purchasing allows you to buy multiple items in a single transaction, which is faster and more efficient.\n                    </div>\n                  </div>\n                  {useBatchPurchase && (\n                    <div className=\"batch-controls\">\n                      <label htmlFor=\"items-per-tx\">Items per transaction:</label>\n                      <div className=\"batch-slider\">\n                        <input\n                          id=\"items-per-tx\"\n                          type=\"range\"\n                          min=\"1\"\n                          max=\"50\"\n                          value={itemsPerTx}\n                          onChange={(e) => setItemsPerTx(parseInt(e.target.value))}\n                        />\n                        <span className=\"batch-value\">{itemsPerTx}</span>\n                      </div>\n                      <div className=\"batch-info\">\n                        {selectedItems.size > itemsPerTx && (\n                          <small>\n                            Will create {Math.ceil(selectedItems.size / itemsPerTx)} transaction{Math.ceil(selectedItems.size / itemsPerTx) > 1 ? 's' : ''}\n                          </small>\n                        )}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              )}\n\n              {/* Available Items */}\n              {availableItems.length > 0 && (\n                <div className=\"cart-section\">\n                  <h3 className=\"section-title\">Available Items</h3>\n                  <div className=\"cart-items\">\n                    {availableItems.map((item) => (\n                      <div key={item.nft.asset_id} className=\"cart-item\">\n                        <div className=\"item-checkbox\">\n                          <input\n                            type=\"checkbox\"\n                            checked={selectedItems.has(item.nft.asset_id)}\n                            onChange={() => handleToggleSelection(item.nft.asset_id)}\n                            aria-label={`Select ${item.nft.name} for purchase`}\n                            id={`item-${item.nft.asset_id}`}\n                          />\n                        </div>\n                        <div className=\"item-image\">\n                          {item.nft.video ? (\n                            <video \n                              src={item.nft.video} \n                              className=\"cart-item-media\"\n                              muted\n                              onError={(e) => {\n                                const img = document.createElement('img')\n                                img.src = item.nft.image\n                                img.className = 'cart-item-media'\n                                img.alt = item.nft.name\n                                e.currentTarget.parentNode?.replaceChild(img, e.currentTarget)\n                              }}\n                            />\n                          ) : (\n                            <img \n                              src={item.nft.image} \n                              alt={`${item.nft.name} from ${item.nft.collection}`}\n                              className=\"cart-item-media\"\n                            />\n                          )}\n                        </div>\n                        <div className=\"item-details\">\n                          <h4 className=\"item-name\">{item.nft.name}</h4>\n                          <p className=\"item-collection\">{item.nft.collection}</p>\n                          <div className=\"item-price\" aria-label={`Price: ${item.nft.price}`}>\n                            <span className=\"price-wax\">{item.nft.price}</span>\n                          </div>\n                        </div>\n                        <button \n                          className=\"btn-remove\"\n                          onClick={() => handleRemoveItem(item.nft.asset_id)}\n                          title=\"Remove from cart\"\n                          aria-label={`Remove ${item.nft.name} from cart`}\n                          type=\"button\"\n                        >\n                          <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" aria-hidden=\"true\">\n                            <polyline points=\"3,6 5,6 21,6\"></polyline>\n                            <path d=\"m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2\"></path>\n                          </svg>\n                        </button>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Unavailable Items */}\n              {unavailableItems.length > 0 && (\n                <div className=\"cart-section\">\n                  <h3 className=\"section-title unavailable-title\">\n                    Unavailable Items ({unavailableItems.length})\n                  </h3>\n                  <div className=\"cart-items unavailable-items\">\n                    {unavailableItems.map((item) => (\n                      <div key={item.nft.asset_id} className=\"cart-item unavailable\">\n                        <div className=\"item-image\">\n                          <img \n                            src={item.nft.image} \n                            alt={item.nft.name}\n                            className=\"cart-item-media\"\n                          />\n                          <div className=\"unavailable-overlay\">Unavailable</div>\n                        </div>\n                        <div className=\"item-details\">\n                          <h4 className=\"item-name\">{item.nft.name}</h4>\n                          <p className=\"item-collection\">{item.nft.collection}</p>\n                          <div className=\"item-price\">\n                            <span className=\"price-wax\">{item.nft.price}</span>\n                          </div>\n                        </div>\n                        <button \n                          className=\"btn-remove\"\n                          onClick={() => handleRemoveItem(item.nft.asset_id)}\n                          title=\"Remove from cart\"\n                        >\n                          <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                            <polyline points=\"3,6 5,6 21,6\"></polyline>\n                            <path d=\"m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2\"></path>\n                          </svg>\n                        </button>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </>\n          )}\n        </div>\n\n        {cartItems.length > 0 && (\n          <div className=\"modal-footer cart-footer\">\n            <div className=\"cart-totals\">\n              <div className=\"total-line\">\n                <span className=\"total-label\">Total ({selectedItems.size} selected):</span>\n                <div className=\"total-prices\">\n                  <span className=\"total-wax\">{totals.totalWAX}</span>\n                  <span className=\"total-usd\">{totals.totalUSD}</span>\n                </div>\n              </div>\n            </div>\n            <div className=\"cart-actions\">\n              <button \n                className=\"btn-secondary\" \n                onClick={onClose}\n                type=\"button\"\n                aria-label=\"Continue shopping and close cart\"\n              >\n                Continue Shopping\n              </button>\n              <button \n                className=\"btn-primary\"\n                onClick={handleBuySelected}\n                disabled={selectedItems.size === 0}\n                type=\"button\"\n                aria-label={`Buy ${selectedItems.size} selected items`}\n                aria-describedby=\"cart-totals\"\n              >\n                Buy Selected ({selectedItems.size})\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\nexport default ShoppingCart","// Accessibility service for managing ARIA labels, focus management, and accessibility features\nimport { monitoringService } from './monitoringService'\nimport { logger } from './loggingService'\n\nexport interface AccessibilityPreferences {\n  reducedMotion: boolean\n  highContrast: boolean\n  largeText: boolean\n  screenReader: boolean\n  keyboardNavigation: boolean\n}\n\ninterface FocusableElement {\n  element: HTMLElement\n  tabIndex: number\n  originalTabIndex?: number\n}\n\nclass AccessibilityService {\n  private preferences: AccessibilityPreferences\n  private focusStack: HTMLElement[] = []\n  private trapFocusElements: FocusableElement[] = []\n  private isInitialized: boolean = false\n  private mediaQueryListeners: MediaQueryList[] = []\n  private keyboardNavigationActive: boolean = false\n\n  constructor() {\n    this.preferences = this.getDefaultPreferences()\n    this.detectSystemPreferences()\n  }\n\n  private getDefaultPreferences(): AccessibilityPreferences {\n    return {\n      reducedMotion: false,\n      highContrast: false,\n      largeText: false,\n      screenReader: false,\n      keyboardNavigation: true\n    }\n  }\n\n  async initialize(): Promise<void> {\n    if (this.isInitialized) return\n\n    try {\n      // Load saved preferences\n      this.loadPreferences()\n      \n      // Set up system preference detection\n      this.setupMediaQueryListeners()\n      \n      // Set up keyboard navigation detection\n      this.setupKeyboardNavigation()\n      \n      // Apply initial accessibility settings\n      this.applyAccessibilitySettings()\n      \n      // Set up focus management\n      this.setupFocusManagement()\n      \n      this.isInitialized = true\n      \n      monitoringService.trackEvent('accessibility_service_initialized', {\n        preferences: this.preferences,\n        systemPreferences: this.detectSystemPreferences()\n      })\n      \n      logger.info('Accessibility service initialized', 'ACCESSIBILITY')\n    } catch (error) {\n      logger.error('Failed to initialize accessibility service', 'ACCESSIBILITY', error as Error)\n      monitoringService.reportError(error as Error, 'accessibility_init_error')\n    }\n  }\n\n  private detectSystemPreferences(): Partial<AccessibilityPreferences> {\n    const systemPrefs: Partial<AccessibilityPreferences> = {}\n\n    // Detect reduced motion preference\n    if (window.matchMedia) {\n      systemPrefs.reducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches\n      systemPrefs.highContrast = window.matchMedia('(prefers-contrast: high)').matches\n    }\n\n    // Detect screen reader (basic detection)\n    systemPrefs.screenReader = this.detectScreenReader()\n\n    return systemPrefs\n  }\n\n  private detectScreenReader(): boolean {\n    // Basic screen reader detection\n    return (\n      navigator.userAgent.includes('NVDA') ||\n      navigator.userAgent.includes('JAWS') ||\n      navigator.userAgent.includes('VoiceOver') ||\n      window.speechSynthesis !== undefined\n    )\n  }\n\n  private setupMediaQueryListeners(): void {\n    if (!window.matchMedia) return\n\n    // Reduced motion listener\n    const reducedMotionMQ = window.matchMedia('(prefers-reduced-motion: reduce)')\n    reducedMotionMQ.addEventListener('change', (e) => {\n      this.updatePreference('reducedMotion', e.matches)\n    })\n    this.mediaQueryListeners.push(reducedMotionMQ)\n\n    // High contrast listener\n    const highContrastMQ = window.matchMedia('(prefers-contrast: high)')\n    highContrastMQ.addEventListener('change', (e) => {\n      this.updatePreference('highContrast', e.matches)\n    })\n    this.mediaQueryListeners.push(highContrastMQ)\n  }\n\n  private setupKeyboardNavigation(): void {\n    // Detect keyboard navigation\n    document.addEventListener('keydown', (e) => {\n      if (e.key === 'Tab') {\n        this.keyboardNavigationActive = true\n        document.body.classList.add('a11y-keyboard-navigation')\n      }\n    })\n\n    document.addEventListener('mousedown', () => {\n      this.keyboardNavigationActive = false\n      document.body.classList.remove('a11y-keyboard-navigation')\n    })\n  }\n\n  private setupFocusManagement(): void {\n    // Track focus changes for better focus management\n    document.addEventListener('focusin', (e) => {\n      const target = e.target as HTMLElement\n      if (target && this.keyboardNavigationActive) {\n        this.announceToScreenReader(`Focused on ${this.getElementDescription(target)}`)\n      }\n    })\n  }\n\n  private applyAccessibilitySettings(): void {\n    const root = document.documentElement\n\n    // Apply reduced motion\n    if (this.preferences.reducedMotion) {\n      root.classList.add('a11y-reduce-motion')\n    } else {\n      root.classList.remove('a11y-reduce-motion')\n    }\n\n    // Apply high contrast\n    if (this.preferences.highContrast) {\n      root.classList.add('a11y-high-contrast')\n    } else {\n      root.classList.remove('a11y-high-contrast')\n    }\n\n    // Apply large text\n    if (this.preferences.largeText) {\n      root.classList.add('a11y-large-text')\n    } else {\n      root.classList.remove('a11y-large-text')\n    }\n\n    // Apply screen reader optimizations\n    if (this.preferences.screenReader) {\n      root.classList.add('a11y-screen-reader-active')\n    } else {\n      root.classList.remove('a11y-screen-reader-active')\n    }\n  }\n\n  // Public API methods\n  updatePreference<K extends keyof AccessibilityPreferences>(\n    key: K, \n    value: AccessibilityPreferences[K]\n  ): void {\n    this.preferences[key] = value\n    this.applyAccessibilitySettings()\n    this.savePreferences()\n    \n    monitoringService.trackEvent('accessibility_preference_changed', {\n      preference: key,\n      value,\n      allPreferences: this.preferences\n    })\n  }\n\n  getPreferences(): AccessibilityPreferences {\n    return { ...this.preferences }\n  }\n\n  // ARIA label management\n  setAriaLabel(element: HTMLElement, label: string): void {\n    element.setAttribute('aria-label', label)\n  }\n\n  setAriaDescribedBy(element: HTMLElement, describedById: string): void {\n    element.setAttribute('aria-describedby', describedById)\n  }\n\n  setAriaExpanded(element: HTMLElement, expanded: boolean): void {\n    element.setAttribute('aria-expanded', expanded.toString())\n  }\n\n  setAriaSelected(element: HTMLElement, selected: boolean): void {\n    element.setAttribute('aria-selected', selected.toString())\n  }\n\n  setAriaChecked(element: HTMLElement, checked: boolean | 'mixed'): void {\n    element.setAttribute('aria-checked', checked.toString())\n  }\n\n  setAriaHidden(element: HTMLElement, hidden: boolean): void {\n    element.setAttribute('aria-hidden', hidden.toString())\n  }\n\n  // Focus management\n  focusElement(element: HTMLElement, options?: FocusOptions): void {\n    try {\n      element.focus(options)\n      this.focusStack.push(element)\n    } catch (error) {\n      logger.warn('Failed to focus element', 'ACCESSIBILITY', error)\n    }\n  }\n\n  restoreFocus(): void {\n    const lastFocused = this.focusStack.pop()\n    if (lastFocused && document.contains(lastFocused)) {\n      this.focusElement(lastFocused)\n    }\n  }\n\n  // Focus trap for modals and dialogs\n  trapFocus(container: HTMLElement): void {\n    const focusableElements = this.getFocusableElements(container)\n    \n    focusableElements.forEach((el, index) => {\n      this.trapFocusElements.push({\n        element: el,\n        tabIndex: index,\n        originalTabIndex: el.tabIndex\n      })\n    })\n\n    // Focus first element\n    if (focusableElements.length > 0) {\n      this.focusElement(focusableElements[0])\n    }\n\n    // Set up tab trapping\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Tab') {\n        const firstElement = focusableElements[0]\n        const lastElement = focusableElements[focusableElements.length - 1]\n\n        if (e.shiftKey) {\n          if (document.activeElement === firstElement) {\n            e.preventDefault()\n            this.focusElement(lastElement)\n          }\n        } else {\n          if (document.activeElement === lastElement) {\n            e.preventDefault()\n            this.focusElement(firstElement)\n          }\n        }\n      }\n\n      if (e.key === 'Escape') {\n        this.releaseFocusTrap()\n      }\n    }\n\n    container.addEventListener('keydown', handleKeyDown)\n    container.setAttribute('data-focus-trap-active', 'true')\n  }\n\n  releaseFocusTrap(): void {\n    // Restore original tab indices\n    this.trapFocusElements.forEach(({ element, originalTabIndex }) => {\n      if (originalTabIndex !== undefined) {\n        element.tabIndex = originalTabIndex\n      }\n    })\n\n    this.trapFocusElements = []\n\n    // Remove focus trap indicators\n    document.querySelectorAll('[data-focus-trap-active]').forEach(el => {\n      el.removeAttribute('data-focus-trap-active')\n    })\n\n    this.restoreFocus()\n  }\n\n  private getFocusableElements(container: HTMLElement): HTMLElement[] {\n    const focusableSelectors = [\n      'button:not([disabled])',\n      'input:not([disabled])',\n      'select:not([disabled])',\n      'textarea:not([disabled])',\n      'a[href]',\n      '[tabindex]:not([tabindex=\"-1\"])',\n      '[contenteditable=\"true\"]'\n    ].join(', ')\n\n    return Array.from(container.querySelectorAll(focusableSelectors))\n      .filter(el => {\n        const element = el as HTMLElement\n        return element.offsetParent !== null && !element.hasAttribute('aria-hidden')\n      }) as HTMLElement[]\n  }\n\n  // Screen reader announcements\n  announceToScreenReader(message: string, priority: 'polite' | 'assertive' = 'polite'): void {\n    const announcement = document.createElement('div')\n    announcement.setAttribute('aria-live', priority)\n    announcement.setAttribute('aria-atomic', 'true')\n    announcement.className = 'sr-only'\n    announcement.textContent = message\n\n    document.body.appendChild(announcement)\n\n    // Remove after announcement\n    setTimeout(() => {\n      if (document.body.contains(announcement)) {\n        document.body.removeChild(announcement)\n      }\n    }, 1000)\n  }\n\n  // Element description for screen readers\n  private getElementDescription(element: HTMLElement): string {\n    // Try aria-label first\n    const ariaLabel = element.getAttribute('aria-label')\n    if (ariaLabel) return ariaLabel\n\n    // Try text content\n    const textContent = element.textContent?.trim()\n    if (textContent) return textContent\n\n    // Try alt text for images\n    if (element.tagName === 'IMG') {\n      const alt = (element as HTMLImageElement).alt\n      if (alt) return alt\n    }\n\n    // Try title attribute\n    const title = element.getAttribute('title')\n    if (title) return title\n\n    // Fallback to tag name and role\n    const role = element.getAttribute('role') || element.tagName.toLowerCase()\n    return `${role} element`\n  }\n\n  // Keyboard shortcuts management\n  registerKeyboardShortcut(\n    key: string, \n    callback: (e: KeyboardEvent) => void, \n    description: string\n  ): void {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (this.matchesShortcut(e, key)) {\n        e.preventDefault()\n        callback(e)\n        \n        monitoringService.trackEvent('keyboard_shortcut_used', {\n          shortcut: key,\n          description\n        })\n      }\n    }\n\n    document.addEventListener('keydown', handleKeyDown)\n  }\n\n  private matchesShortcut(event: KeyboardEvent, shortcut: string): boolean {\n    const parts = shortcut.toLowerCase().split('+')\n    const key = parts.pop()\n    \n    const modifiers = {\n      ctrl: event.ctrlKey,\n      alt: event.altKey,\n      shift: event.shiftKey,\n      meta: event.metaKey\n    }\n\n    // Check if all required modifiers are pressed\n    for (const part of parts) {\n      if (!(modifiers as Record<string, boolean>)[part]) {\n        return false\n      }\n    }\n\n    return event.key.toLowerCase() === key\n  }\n\n  // Color contrast utilities\n  private calculateLuminance(r: number, g: number, b: number): number {\n    // Convert RGB to relative luminance using WCAG 2.1 formula\n    // https://www.w3.org/WAI/WCAG21/Understanding/contrast-minimum.html\n    \n    // Normalize RGB values to 0-1 range\n    const [rNorm, gNorm, bNorm] = [r, g, b].map(c => c / 255)\n    \n    // Apply gamma correction\n    const [rLinear, gLinear, bLinear] = [rNorm, gNorm, bNorm].map(c => {\n      if (c <= 0.03928) {\n        return c / 12.92\n      } else {\n        return Math.pow((c + 0.055) / 1.055, 2.4)\n      }\n    })\n    \n    // Calculate relative luminance using ITU-R BT.709 coefficients\n    // These coefficients account for human eye sensitivity to different colors\n    return 0.2126 * rLinear + 0.7152 * gLinear + 0.0722 * bLinear\n  }\n\n  /**\n   * Calculate contrast ratio between two colors\n   * @param color1 First color in hex format (#RRGGBB)\n   * @param color2 Second color in hex format (#RRGGBB)\n   * @returns Contrast ratio (1:1 to 21:1)\n   */\n  calculateContrastRatio(color1: string, color2: string): number {\n    const rgb1 = this.hexToRgb(color1)\n    const rgb2 = this.hexToRgb(color2)\n    \n    if (!rgb1 || !rgb2) {\n      return 1 // Return minimum contrast if colors are invalid\n    }\n    \n    const lum1 = this.calculateLuminance(rgb1.r, rgb1.g, rgb1.b)\n    const lum2 = this.calculateLuminance(rgb2.r, rgb2.g, rgb2.b)\n    \n    // Ensure lighter color is in numerator\n    const lighter = Math.max(lum1, lum2)\n    const darker = Math.min(lum1, lum2)\n    \n    return (lighter + 0.05) / (darker + 0.05)\n  }\n\n  checkColorContrast(foreground: string, background: string): number {\n    return this.calculateContrastRatio(foreground, background)\n  }\n\n  /**\n   * Convert hex color to RGB values\n   * @param hex Hex color string (#RRGGBB or #RGB)\n   * @returns RGB object or null if invalid\n   */\n  private hexToRgb(hex: string): { r: number; g: number; b: number } | null {\n    // Remove # if present\n    hex = hex.replace('#', '')\n    \n    // Handle 3-digit hex codes\n    if (hex.length === 3) {\n      hex = hex.split('').map(char => char + char).join('')\n    }\n    \n    // Validate hex format\n    if (hex.length !== 6 || !/^[0-9A-Fa-f]{6}$/.test(hex)) {\n      return null\n    }\n    \n    return {\n      r: parseInt(hex.substr(0, 2), 16),\n      g: parseInt(hex.substr(2, 2), 16),\n      b: parseInt(hex.substr(4, 2), 16)\n    }\n  }\n\n  /**\n   * Check if color combination meets WCAG contrast requirements\n   * @param foreground Foreground color in hex\n   * @param background Background color in hex\n   * @param level WCAG level ('AA' or 'AAA')\n   * @param size Text size ('normal' or 'large')\n   * @returns Whether the combination meets requirements\n   */\n  meetsContrastRequirements(\n    foreground: string, \n    background: string, \n    level: 'AA' | 'AAA' = 'AA',\n    size: 'normal' | 'large' = 'normal'\n  ): boolean {\n    const ratio = this.calculateContrastRatio(foreground, background)\n    \n    const requirements = {\n      AA: { normal: 4.5, large: 3 },\n      AAA: { normal: 7, large: 4.5 }\n    }\n    \n    return ratio >= requirements[level][size]\n  }\n\n  /**\n   * Suggest accessible color alternatives\n   * @param foreground Current foreground color\n   * @param background Current background color\n   * @param level Target WCAG level\n   * @returns Suggested accessible colors\n   */\n  suggestAccessibleColors(\n    foreground: string, \n    background: string, \n    level: 'AA' | 'AAA' = 'AA'\n  ): { foreground: string; background: string; ratio: number }[] {\n    const suggestions: { foreground: string; background: string; ratio: number }[] = []\n    \n    // Try darkening/lightening the foreground\n    const fgRgb = this.hexToRgb(foreground)\n    const bgRgb = this.hexToRgb(background)\n    \n    if (!fgRgb || !bgRgb) {\n      return suggestions\n    }\n    \n    // Generate variations by adjusting brightness\n    const variations = [-60, -40, -20, 20, 40, 60, 80, 100]\n    \n    variations.forEach(adjustment => {\n      const newFg = this.adjustBrightness(foreground, adjustment)\n      const ratio = this.calculateContrastRatio(newFg, background)\n      \n      if (this.meetsContrastRequirements(newFg, background, level)) {\n        suggestions.push({\n          foreground: newFg,\n          background,\n          ratio\n        })\n      }\n    })\n    \n    // Sort by contrast ratio (higher is better)\n    return suggestions.sort((a, b) => b.ratio - a.ratio).slice(0, 5)\n  }\n\n  /**\n   * Adjust color brightness\n   * @param hex Original hex color\n   * @param adjustment Brightness adjustment (-100 to 100)\n   * @returns Adjusted hex color\n   */\n  private adjustBrightness(hex: string, adjustment: number): string {\n    const rgb = this.hexToRgb(hex)\n    if (!rgb) return hex\n    \n    const factor = adjustment / 100\n    \n    const adjust = (value: number) => {\n      if (factor > 0) {\n        // Lighten\n        return Math.min(255, value + (255 - value) * factor)\n      } else {\n        // Darken\n        return Math.max(0, value + value * factor)\n      }\n    }\n    \n    const newR = Math.round(adjust(rgb.r))\n    const newG = Math.round(adjust(rgb.g))\n    const newB = Math.round(adjust(rgb.b))\n    \n    return `#${newR.toString(16).padStart(2, '0')}${newG.toString(16).padStart(2, '0')}${newB.toString(16).padStart(2, '0')}`\n  }\n\n  // Persistence\n  private savePreferences(): void {\n    try {\n      localStorage.setItem('accessibility_preferences', JSON.stringify(this.preferences))\n    } catch (error) {\n      logger.warn('Failed to save accessibility preferences', 'ACCESSIBILITY', error)\n    }\n  }\n\n  private loadPreferences(): void {\n    try {\n      const saved = localStorage.getItem('accessibility_preferences')\n      if (saved) {\n        const parsed = JSON.parse(saved)\n        this.preferences = { ...this.preferences, ...parsed }\n      }\n    } catch (error) {\n      logger.warn('Failed to load accessibility preferences', 'ACCESSIBILITY', error)\n    }\n  }\n\n  // Cleanup\n  destroy(): void {\n    this.mediaQueryListeners.forEach(mq => {\n      mq.removeEventListener('change', () => {})\n    })\n    this.mediaQueryListeners = []\n    this.releaseFocusTrap()\n    this.focusStack = []\n  }\n}\n\n// Export singleton instance\nexport const accessibilityService = new AccessibilityService()\n\n// Export types\nexport type {\n  FocusableElement\n}","import React, { useState, useEffect } from 'react'\nimport { accessibilityService, type AccessibilityPreferences } from '../services/accessibilityService'\nimport { monitoringService } from '../services/monitoringService'\nimport '../css/accessibility-modal.css'\n\ninterface AccessibilitySettingsProps {\n  isOpen: boolean\n  onClose: () => void\n}\n\nconst AccessibilitySettings: React.FC<AccessibilitySettingsProps> = ({ isOpen, onClose }) => {\n  const [preferences, setPreferences] = useState<AccessibilityPreferences>({\n    reducedMotion: false,\n    highContrast: false,\n    largeText: false,\n    screenReader: false,\n    keyboardNavigation: true\n  })\n  const [isLoading, setIsLoading] = useState(false)\n\n  useEffect(() => {\n    if (isOpen) {\n      // Load current preferences when modal opens\n      const currentPrefs = accessibilityService.getPreferences()\n      setPreferences(currentPrefs)\n      \n      // Focus trap setup\n      accessibilityService.announceToScreenReader('Accessibility settings dialog opened')\n      \n      // Focus the first interactive element\n      const firstButton = document.querySelector('.accessibility-modal button') as HTMLElement\n      if (firstButton) {\n        accessibilityService.focusElement(firstButton)\n      }\n    }\n  }, [isOpen])\n\n  const handlePreferenceChange = async (key: keyof AccessibilityPreferences, value: boolean) => {\n    setIsLoading(true)\n    \n    try {\n      // Update local state immediately for responsive UI\n      const newPreferences = { ...preferences, [key]: value }\n      setPreferences(newPreferences)\n      \n      // Update the service\n      accessibilityService.updatePreference(key, value)\n      \n      // Announce the change to screen readers\n      const preferenceNames = {\n        reducedMotion: 'Reduced motion',\n        highContrast: 'High contrast',\n        largeText: 'Large text',\n        screenReader: 'Screen reader optimizations',\n        keyboardNavigation: 'Keyboard navigation'\n      }\n      \n      accessibilityService.announceToScreenReader(\n        `${preferenceNames[key]} ${value ? 'enabled' : 'disabled'}`,\n        'assertive'\n      )\n      \n      monitoringService.trackEvent('accessibility_preference_changed', {\n        preference: key,\n        value,\n        source: 'settings_modal'\n      }) \n      \n    } catch (error) {\n      console.error('Failed to update accessibility preference:', error as Error)\n      monitoringService.reportError(error as Error, 'accessibility_preference_update_error')\n      \n      // Revert local state on error\n      setPreferences(prev => ({ ...prev, [key]: !value }))\n      \n      accessibilityService.announceToScreenReader(\n        'Failed to update preference. Please try again.',\n        'assertive'\n      )\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const handleClose = () => {\n    accessibilityService.announceToScreenReader('Accessibility settings dialog closed')\n    accessibilityService.restoreFocus()\n    onClose()\n  }\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Escape') {\n      handleClose()\n    }\n  }\n\n  const resetToDefaults = () => {\n    const defaults: AccessibilityPreferences = {\n      reducedMotion: false,\n      highContrast: false,\n      largeText: false,\n      screenReader: false,\n      keyboardNavigation: true\n    }\n    \n    setPreferences(defaults)\n    \n    // Update all preferences\n    Object.entries(defaults).forEach(([key, value]) => {\n      accessibilityService.updatePreference(key as keyof AccessibilityPreferences, value)\n    })\n    \n    accessibilityService.announceToScreenReader('Accessibility settings reset to defaults', 'assertive')\n    \n    monitoringService.trackEvent('accessibility_settings_reset', {\n      source: 'settings_modal'\n    })\n  }\n\n  if (!isOpen) return null\n\n  return (\n    <>\n      {/* Backdrop */}\n      <div \n        className=\"accessibility-modal-backdrop\" \n        onClick={handleClose}\n        aria-hidden=\"true\"\n      />\n      \n      {/* Modal */}\n      <div\n         className={`accessibility-modal ${isLoading ? 'loading' : ''}`}\n         role=\"dialog\"\n         aria-modal=\"true\"\n        aria-labelledby=\"accessibility-settings-title\"\n        aria-describedby=\"accessibility-settings-description\"\n        onKeyDown={handleKeyDown}\n      >\n        <div className=\"accessibility-modal-content\">\n          {/* Header */}\n          <div className=\"accessibility-modal-header\">\n            <h2 \n              id=\"accessibility-settings-title\" \n              className=\"accessibility-modal-title\"\n            >\n              Accessibility Settings\n            </h2>\n            <button\n              onClick={handleClose}\n              className=\"accessibility-modal-close\"\n              aria-label=\"Close accessibility settings\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </button>\n          </div>\n          \n          {/* Description */}\n          <p \n            id=\"accessibility-settings-description\" \n            className=\"accessibility-modal-description\"\n          >\n            Customize your accessibility preferences to improve your experience with the application.\n          </p>\n          \n          {/* Settings */}\n          <div className=\"accessibility-settings-list\">\n            {/* Reduced Motion */}\n            <div className=\"accessibility-setting-item\">\n              <div className=\"accessibility-setting-info\">\n                <label className=\"accessibility-setting-label\">\n                  Reduced Motion\n                </label>\n                <p className=\"accessibility-setting-description\">\n                  Minimize animations and transitions for a calmer experience.\n                </p>\n              </div>\n              <button\n                onClick={() => handlePreferenceChange('reducedMotion', !preferences.reducedMotion)}\n                className={`accessibility-toggle ${preferences.reducedMotion ? 'active' : ''}`}\n                role=\"switch\"\n                aria-checked={preferences.reducedMotion}\n                disabled={isLoading}\n              >\n                <span className=\"accessibility-toggle-thumb\" />\n              </button>\n            </div>\n            \n            {/* High Contrast */}\n            <div className=\"accessibility-setting-item\">\n              <div className=\"accessibility-setting-info\">\n                <label className=\"accessibility-setting-label\">\n                  High Contrast\n                </label>\n                <p className=\"accessibility-setting-description\">\n                  Increase color contrast for better visibility\n                </p>\n              </div>\n              <button\n                onClick={() => handlePreferenceChange('highContrast', !preferences.highContrast)}\n                className={`accessibility-toggle ${preferences.highContrast ? 'active' : ''}`}\n                role=\"switch\"\n                aria-checked={preferences.highContrast}\n                disabled={isLoading}\n              >\n                <span className=\"accessibility-toggle-thumb\" />\n              </button>\n            </div>\n            \n            {/* Large Text */}\n            <div className=\"accessibility-setting-item\">\n              <div className=\"accessibility-setting-info\">\n                <label className=\"accessibility-setting-label\">\n                  Large Text\n                </label>\n                <p className=\"accessibility-setting-description\">\n                  Increase text size throughout the application\n                </p>\n              </div>\n              <button\n                onClick={() => handlePreferenceChange('largeText', !preferences.largeText)}\n                className={`accessibility-toggle ${preferences.largeText ? 'active' : ''}`}\n                role=\"switch\"\n                aria-checked={preferences.largeText}\n                disabled={isLoading}\n              >\n                <span className=\"accessibility-toggle-thumb\" />\n              </button>\n            </div>\n            \n            {/* Screen Reader Optimizations */}\n            <div className=\"accessibility-setting-item\">\n              <div className=\"accessibility-setting-info\">\n                <label className=\"accessibility-setting-label\">\n                  Screen Reader Optimizations\n                </label>\n                <p className=\"accessibility-setting-description\">\n                  Optimize interface for screen reader users\n                </p>\n              </div>\n              <button\n                onClick={() => handlePreferenceChange('screenReader', !preferences.screenReader)}\n                className={`accessibility-toggle ${preferences.screenReader ? 'active' : ''}`}\n                role=\"switch\"\n                aria-checked={preferences.screenReader}\n                disabled={isLoading}\n              >\n                <span className=\"accessibility-toggle-thumb\" />\n              </button>\n            </div>\n            \n            {/* Keyboard Navigation */}\n            <div className=\"accessibility-setting-item\">\n              <div className=\"accessibility-setting-info\">\n                <label className=\"accessibility-setting-label\">\n                  Enhanced Keyboard Navigation\n                </label>\n                <p className=\"accessibility-setting-description\">\n                  Show focus indicators and enable keyboard shortcuts\n                </p>\n              </div>\n              <button\n                onClick={() => handlePreferenceChange('keyboardNavigation', !preferences.keyboardNavigation)}\n                className={`accessibility-toggle ${preferences.keyboardNavigation ? 'active' : ''}`}\n                role=\"switch\"\n                aria-checked={preferences.keyboardNavigation}\n                disabled={isLoading}\n              >\n                <span className=\"accessibility-toggle-thumb\" />\n              </button>\n            </div>\n          </div>\n          \n          {/* Actions */}\n          <div className=\"accessibility-modal-actions\">\n            <button\n              onClick={resetToDefaults}\n              disabled={isLoading}\n              className=\"accessibility-modal-reset\"\n            >\n              Reset to Defaults\n            </button>\n            <div className=\"accessibility-modal-buttons\">\n              <button\n                onClick={handleClose}\n                disabled={isLoading}\n                className=\"accessibility-modal-cancel\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleClose}\n                disabled={isLoading}\n                className=\"accessibility-modal-done\"\n              >\n                {isLoading ? 'Saving...' : 'Done'}\n              </button>\n            </div>\n          </div>\n          \n          {/* Keyboard Shortcuts Info */}\n          <div className=\"accessibility-shortcuts\">\n            <h3 className=\"accessibility-shortcuts-title\">\n              Keyboard Shortcuts\n            </h3>\n            <div className=\"accessibility-shortcuts-list\">\n              <div className=\"accessibility-shortcut\">\n                <span>Close modal</span>\n                <kbd className=\"accessibility-kbd\">Esc</kbd>\n              </div>\n              <div className=\"accessibility-shortcut\">\n                <span>Navigate settings</span>\n                <kbd className=\"accessibility-kbd\">Tab</kbd>\n              </div>\n              <div className=\"accessibility-shortcut\">\n                <span>Toggle setting</span>\n                <kbd className=\"accessibility-kbd\">Space</kbd>\n              </div>\n              <div className=\"accessibility-shortcut\">\n                <span>Activate buttons</span>\n                <kbd className=\"accessibility-kbd\">Enter</kbd>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default AccessibilitySettings","import { useState, useEffect, useRef, useCallback } from 'react'\nimport { Link } from 'react-router-dom'\nimport { useWallet } from '../hooks/useWallet'\nimport { cartService } from '../services/cartService'\n\nimport { useDisplaySettings } from '../hooks/useDisplaySettings'\nimport { badgeService } from '../services/badgeService'\nimport { balanceService } from '../services/balanceService'\nimport type { UserBadge } from '../services/badgeService'\nimport ShoppingCart from './ShoppingCart'\nimport AccessibilitySettings from './AccessibilitySettings'\nimport { accessibilityService } from '../services/accessibilityService'\nimport { log } from '../services/loggingService'\nimport '../css/cart.css'\n\ninterface NavigationProps {\n  currentPage: string\n  onPageChange: (page: string) => void\n}\n\nconst Navigation: React.FC<NavigationProps> = ({ currentPage }) => {\n  const { isConnected, isLoading, login, logout, account } = useWallet()\n  \n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false)\n  const [isScrolled, setIsScrolled] = useState(false)\n  const [cartCount, setCartCount] = useState(0)\n  const [isCartOpen, setIsCartOpen] = useState(false)\n  const [isWalletDropdownOpen, setIsWalletDropdownOpen] = useState(false)\n  const [isAccessibilitySettingsOpen, setIsAccessibilitySettingsOpen] = useState(false)\n\n  const [isDarkMode, setIsDarkMode] = useState(() => {\n    // Check for user-specific settings first, then fallback to global darkMode\n    if (account) {\n      const userSettings = localStorage.getItem(`userSettings_${account}`)\n      if (userSettings) {\n        const parsed = JSON.parse(userSettings)\n        return parsed.darkMode !== undefined ? parsed.darkMode : true\n      }\n    }\n    const saved = localStorage.getItem('darkMode')\n    return saved ? JSON.parse(saved) : true\n  })\n  \n  // Use display settings context\n  const { settings, updateSetting } = useDisplaySettings()\n  \n  const [waxBalance, setWaxBalance] = useState<string>('0.0000')\n  const [userBadges, setUserBadges] = useState<UserBadge[]>([])  \n  const [lastBalanceUpdate, setLastBalanceUpdate] = useState<number>(0)\n  const [isDisplayOptionsExpanded, setIsDisplayOptionsExpanded] = useState(false)\n  const [isMoreDropdownOpen, setIsMoreDropdownOpen] = useState(false)\n  const [isBadgeCategoryExpanded, setIsBadgeCategoryExpanded] = useState(false)\n  const walletDropdownRef = useRef<HTMLDivElement>(null)\n  const moreDropdownRef = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    const handleScroll = () => {\n      setIsScrolled(window.scrollY > 10)\n    }\n\n    window.addEventListener('scroll', handleScroll)\n    return () => window.removeEventListener('scroll', handleScroll)\n  }, [])\n\n  useEffect(() => {\n    document.documentElement.setAttribute('data-theme', isDarkMode ? 'dark' : 'light')\n    localStorage.setItem('darkMode', JSON.stringify(isDarkMode))\n    \n    // Also update user-specific settings if account is connected\n    if (account) {\n      const userSettings = localStorage.getItem(`userSettings_${account}`)\n      if (userSettings) {\n        const parsed = JSON.parse(userSettings)\n        const updated = { ...parsed, darkMode: isDarkMode }\n        localStorage.setItem(`userSettings_${account}`, JSON.stringify(updated))\n      }\n    }\n  }, [isDarkMode, account])\n\n  const toggleDarkMode = () => {\n    const newDarkMode = !isDarkMode\n    setIsDarkMode(newDarkMode)\n    \n    // Immediately update user-specific settings if account is connected\n    if (account) {\n      const userSettings = localStorage.getItem(`userSettings_${account}`)\n      if (userSettings) {\n        const parsed = JSON.parse(userSettings)\n        const updated = { ...parsed, darkMode: newDarkMode }\n        localStorage.setItem(`userSettings_${account}`, JSON.stringify(updated))\n      } else {\n        // Create initial user settings if they don't exist\n        const initialSettings = {\n          emailNotifications: true,\n          priceAlerts: true,\n          marketingEmails: false,\n          darkMode: newDarkMode,\n          language: 'en',\n          currency: 'WAX'\n        }\n        localStorage.setItem(`userSettings_${account}`, JSON.stringify(initialSettings))\n      }\n    }\n  }\n\n  // Cart count effect\n  useEffect(() => {\n    const updateCartCount = () => {\n      setCartCount(cartService.getCartCount())\n    }\n\n    // Initial count\n    updateCartCount()\n\n    // Listen for cart changes\n    cartService.addListener(updateCartCount)\n    return () => cartService.removeListener(updateCartCount)\n  }, []) // Empty dependency array is correct here - we only want to set up listeners once\n\n  const toggleMobileMenu = () => {\n    setIsMobileMenuOpen(!isMobileMenuOpen)\n  }\n\n  const closeMobileMenu = () => {\n    setIsMobileMenuOpen(false)\n  }\n\n  // Handle wallet dropdown\n  const toggleWalletDropdown = () => {\n    setIsWalletDropdownOpen(!isWalletDropdownOpen)\n    \n    // Refresh balance if dropdown is opening and it's been more than 30 seconds\n    if (!isWalletDropdownOpen && isConnected && account) {\n      const now = Date.now()\n      if (now - lastBalanceUpdate > 30000) { // 30 seconds\n        fetchWaxBalance()\n      }\n    }\n  }\n\n  const closeWalletDropdown = () => {\n    setIsWalletDropdownOpen(false)\n  }\n\n  // Fetch WAX balance using shared balance service\n  const fetchWaxBalance = useCallback(async (forceRefresh: boolean = false) => {\n    if (!account || !isConnected) return\n    \n    try {\n      const balance = await balanceService.getWaxBalance(account, forceRefresh)\n      setWaxBalance(balance)\n      setLastBalanceUpdate(Date.now())\n    } catch (error) {\n      log.error('Failed to fetch WAX balance', 'Navigation', error as Error)\n    }\n  }, [account, isConnected])\n\n  // Check for user badges using badge service\n  const checkUserBadges = useCallback(async () => {\n    if (!account || !isConnected) return\n    \n    try {\n      const badgeResult = await badgeService.checkUserBadges(account)\n      setUserBadges(badgeResult.badges)\n    } catch (error) {\n      log.error('Failed to check user badges', 'Navigation', error as Error)\n    }\n  }, [account, isConnected])\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (walletDropdownRef.current && !walletDropdownRef.current.contains(event.target as Node)) {\n        closeWalletDropdown()\n      }\n      if (moreDropdownRef.current && !moreDropdownRef.current.contains(event.target as Node)) {\n        setIsMoreDropdownOpen(false)\n      }\n    }\n\n    document.addEventListener('mousedown', handleClickOutside)\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside)\n    }\n  }, [])\n\n  // Fetch balance and badges when connected\n  useEffect(() => {\n    if (isConnected && account) {\n      fetchWaxBalance()\n      checkUserBadges()\n    } else {\n      setWaxBalance('0.0000')\n      setUserBadges([])\n    }\n  }, [isConnected, account, fetchWaxBalance, checkUserBadges])\n\n\n\n  return (\n    <>\n      {/* Skip Links for Accessibility */}\n      <a href=\"#main-content\" className=\"a11y-skip-link\">\n        Skip to main content\n      </a>\n      <a href=\"#navigation\" className=\"a11y-skip-link\">\n        Skip to navigation\n      </a>\n      \n      <nav \n        className={`navbar ${isScrolled ? 'scrolled' : ''}`}\n        role=\"navigation\"\n        aria-label=\"Main navigation\"\n        id=\"navigation\"\n      >\n        <div className=\"navbar-container\">\n          {/* Logo */}\n          <Link \n            to=\"/marketplace\" \n            className=\"navbar-logo\"\n            aria-label=\"PxMarket - Go to marketplace home\"\n          >\n            <img \n              src=\"https://pixeljourney.xyz/img/logo.png\" \n              alt=\"PxMarket logo\" \n              className=\"logo-image\"\n            />\n            <span className=\"logo-text\">PxMarket</span>\n          </Link>\n\n          {/* Desktop Navigation */}\n            <div className=\"navbar-nav\" role=\"menubar\" aria-label=\"Main menu\">\n              <Link \n                 to=\"/rwax\"\n                 className={`nav-link ${currentPage === 'rwax' ? 'active' : ''}`}\n                 role=\"menuitem\"\n                 aria-current={currentPage === 'rwax' ? 'page' : undefined}\n               >\n                 RWAX\n               </Link>\n              <Link \n                 to=\"/collections\"\n                 className={`nav-link ${currentPage === 'collections' ? 'active' : ''}`}\n                 role=\"menuitem\"\n                 aria-current={currentPage === 'collections' ? 'page' : undefined}\n               >\n                 Collections\n               </Link>\n            {/* More Dropdown */}\n            <div className=\"nav-dropdown\" role=\"menuitem\" ref={moreDropdownRef}>\n              <button \n                className={`nav-link dropdown-toggle ${isMoreDropdownOpen ? 'active' : ''}`}\n                onClick={() => setIsMoreDropdownOpen(!isMoreDropdownOpen)}\n                aria-expanded={isMoreDropdownOpen}\n                aria-haspopup=\"true\"\n              >\n                More\n                <svg className=\"dropdown-arrow\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                </svg>\n              </button>\n              \n              {isMoreDropdownOpen && (\n                <div className=\"dropdown-menu\" role=\"menu\">\n                  <div className=\"dropdown-section\">\n                    <h4 className=\"dropdown-section-title\">Marketplace</h4>\n                    <Link \n                      to=\"/auctions\"\n                      className={`dropdown-item ${currentPage === 'auctions' ? 'active' : ''}`}\n                      role=\"menuitem\"\n                      onClick={() => setIsMoreDropdownOpen(false)}\n                    >\n                      Auctions\n                    </Link>\n                    <Link \n                      to=\"/activity\"\n                      className={`dropdown-item ${currentPage === 'activity' ? 'active' : ''}`}\n                      role=\"menuitem\"\n                      onClick={() => setIsMoreDropdownOpen(false)}\n                    >\n                      Activity\n                    </Link>\n                  </div>\n                  \n                  <div className=\"dropdown-section\">\n                    <h4 className=\"dropdown-section-title\">Tools & Features</h4>\n                    <Link \n                      to=\"/pxcraft\"\n                      className={`dropdown-item ${currentPage === 'pxcraft' ? 'active' : ''}`}\n                      role=\"menuitem\"\n                      onClick={() => setIsMoreDropdownOpen(false)}\n                    >\n                      PxCraft\n                    </Link>\n                    <Link \n                      to=\"/pxswap\"\n                      className={`dropdown-item ${currentPage === 'pxswap' ? 'active' : ''}`}\n                      role=\"menuitem\"\n                      onClick={() => setIsMoreDropdownOpen(false)}\n                    >\n                      PxSwap\n                    </Link>\n                    <Link \n                      to=\"/journeymap\"\n                      className={`dropdown-item ${currentPage === 'journeymap' ? 'active' : ''}`}\n                      role=\"menuitem\"\n                      onClick={() => setIsMoreDropdownOpen(false)}\n                    >\n                      JourneyMap\n                    </Link>\n                    <Link \n                      to=\"/staking\"\n                      className={`dropdown-item ${currentPage === 'pxstaking' ? 'active' : ''}`}\n                      role=\"menuitem\"\n                      onClick={() => setIsMoreDropdownOpen(false)}\n                    >\n                      PxStaking\n                    </Link>\n                  </div>\n                  \n                  <div className=\"dropdown-section social-section\">\n                    <h4 className=\"dropdown-section-title\">Community</h4>\n                    <a \n                      href=\"http://discord.gg/pixel-journey-1130670500776005734\"\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"dropdown-item nav-social-link\"\n                      role=\"menuitem\"\n                    >\n                      <svg className=\"social-icon\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path d=\"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z\"/>\n                      </svg>\n                      Join Discord\n                    </a>\n                    <a \n                      href=\"https://x.com/PxJourney\"\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"dropdown-item nav-social-link\"\n                      role=\"menuitem\"\n                    >\n                      <svg className=\"social-icon\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path d=\"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z\"/>\n                      </svg>\n                      Follow on X\n                    </a>\n                  </div>\n                </div>\n              )}\n            </div>\n            <Link \n              to=\"/learn\"\n              className={`nav-link ${currentPage === 'learn' ? 'active' : ''}`}\n              role=\"menuitem\"\n              aria-current={currentPage === 'learn' ? 'page' : undefined}\n            >\n              Learn\n            </Link>\n\n            <Link \n              to=\"/rewards\"\n              className={`nav-link ${currentPage === 'rewards' ? 'active' : ''}`}\n              role=\"menuitem\"\n              aria-current={currentPage === 'rewards' ? 'page' : undefined}\n            >\n              Rewards\n            </Link>\n          </div>\n\n          {/* Actions */}\n          <div className=\"navbar-actions\">\n            {/* Accessibility Settings Button */}\n            <button \n              onClick={() => setIsAccessibilitySettingsOpen(true)}\n              className=\"accessibility-btn\"\n              aria-label=\"Open accessibility settings\"\n              title=\"Accessibility Settings\"\n            >\n              <svg className=\"accessibility-icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z\" />\n              </svg>\n            </button>\n\n            {/* Shopping Cart Button - Only show when logged in and cart has items */}\n            {isConnected && cartCount > 0 && (\n              <button \n                onClick={() => setIsCartOpen(true)}\n                className=\"cart-btn\"\n                aria-label={`Open Shopping Cart (${cartCount} items)`}\n                aria-describedby=\"cart-count\"\n              >\n                <svg className=\"cart-icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                  <circle cx=\"9\" cy=\"21\" r=\"1\"></circle>\n                  <circle cx=\"20\" cy=\"21\" r=\"1\"></circle>\n                  <path d=\"m1 1 4 4 2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6\"></path>\n                </svg>\n                <span className=\"cart-badge\" id=\"cart-count\" aria-label={`${cartCount} items in cart`}>{cartCount}</span>\n                <span className=\"cart-text\">Cart</span>\n              </button>\n            )}\n\n\n\n            {/* Wallet Button */}\n            <div className=\"wallet-container\" ref={walletDropdownRef}>\n              <button \n                className={`wallet-btn ${isConnected ? 'connected' : ''}`}\n                onClick={isConnected ? toggleWalletDropdown : login}\n                disabled={isLoading}\n                aria-label={isConnected ? `Wallet connected: ${account}. Click to open wallet menu` : 'Connect wallet'}\n                aria-expanded={isConnected && isWalletDropdownOpen}\n                aria-haspopup=\"menu\"\n              >\n                {isLoading ? (\n                  <span className=\"loading-spinner\">⟳</span>\n                ) : isConnected ? (\n                  <>\n                    <svg className=\"wallet-icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"></path>\n                    </svg>\n                    {account || 'Connected'}\n                  </>\n                ) : (\n                  'Connect'\n                )}\n              </button>\n              \n              {/* Wallet Dropdown */}\n              {isConnected && isWalletDropdownOpen && (\n                <div \n                  className=\"wallet-dropdown\" \n                  role=\"menu\" \n                  aria-label=\"Wallet menu\"\n                  onKeyDown={(e) => {\n                    if (e.key === 'Escape') {\n                      closeWalletDropdown()\n                      accessibilityService.announceToScreenReader('Wallet menu closed')\n                    }\n                  }}\n                >\n                  <div className=\"wallet-dropdown-header\" role=\"group\" aria-label=\"Wallet information\">\n                    <div className=\"wallet-account\" aria-label={`Wallet account: ${account}`}>{account}</div>\n                  </div>\n                  \n                  {/* Inventory Button */}\n                  <Link \n                    to=\"/inventory\"\n                    className=\"wallet-inventory-btn\"\n                    aria-label=\"Open Inventory\"\n                    onClick={() => setIsWalletDropdownOpen(false)}\n                    role=\"menuitem\"\n                  >\n                    <svg className=\"inventory-icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                      <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\n                      <path d=\"M9 9h6v6H9z\"></path>\n                    </svg>\n                    <span>My Inventory</span>\n                  </Link>\n                  \n                  {/* Profile Button */}\n                  <Link \n                    to=\"/profile\"\n                    className=\"wallet-inventory-btn\"\n                    aria-label=\"View Profile\"\n                    onClick={() => setIsWalletDropdownOpen(false)}\n                    role=\"menuitem\"\n                  >\n                    <svg className=\"inventory-icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n                    </svg>\n                    <span>My Profile</span>\n                  </Link>\n                  \n\n                  \n                  {/* Watchlist Button */}\n                  <Link \n                    to=\"/watchlist\"\n                    className=\"wallet-inventory-btn\"\n                    aria-label=\"View Watchlist\"\n                    onClick={() => setIsWalletDropdownOpen(false)}\n                    role=\"menuitem\"\n                  >\n                    <svg className=\"inventory-icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                      <path d=\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z\"></path>\n                    </svg>\n                    <span>My Watchlist</span>\n                  </Link>\n                  \n                  <div className=\"wallet-balance\" role=\"group\" aria-label=\"Wallet balance information\">\n                    <span className=\"balance-label\">WAX Balance:</span>\n                    <span className=\"nav-balance-amount\" aria-label={`Balance: ${waxBalance} WAX`}>{waxBalance}</span>\n                  </div>\n                  \n                  {/* Badge Category - Collapsible */}\n                  <div className=\"wallet-badges\" role=\"group\" aria-label=\"User badges\">\n                    <div \n                      className=\"badges-header\"\n                      onClick={() => setIsBadgeCategoryExpanded(!isBadgeCategoryExpanded)}\n                      style={{ cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'space-between', padding: '8px 0' }}\n                    >\n                      <span className=\"badges-label\">PxBadges:</span>\n                      <span style={{ fontSize: '12px', color: '#888' }}>\n                        {isBadgeCategoryExpanded ? '▼' : '▶'}\n                      </span>\n                    </div>\n                    \n                    {!isBadgeCategoryExpanded ? (\n                      // Collapsed view - show earned badge icons only\n                      <div className=\"badges-collapsed\" style={{ display: 'flex', gap: '4px', flexWrap: 'wrap' }}>\n                        {badgeService.getAllBadgeDefinitions()\n                          .filter((badgeDef) => userBadges.some(badge => badge.id === badgeDef.id))\n                          .map((badgeDef) => {\n                            return (\n                              <span \n                                key={badgeDef.id}\n                                className=\"badge-icon earned\"\n                                style={{\n                                  fontSize: '16px',\n                                  padding: '4px',\n                                  borderRadius: '4px',\n                                  background: `${badgeDef.color}20`,\n                                  color: badgeDef.color,\n                                  border: `1px solid ${badgeDef.borderColor}`,\n                                  cursor: 'pointer'\n                                }}\n                                title={`${badgeDef.name}: ${badgeDef.description} ✓ Earned`}\n                              >\n                                {badgeDef.icon}\n                              </span>\n                            )\n                          })}\n                        {userBadges.length === 0 && (\n                          <span style={{ fontSize: '12px', color: '#888', fontStyle: 'italic' }}>\n                            No badges earned yet\n                          </span>\n                        )}\n                      </div>\n                    ) : (\n                      // Expanded view - show full badge details with buy buttons\n                      <div className=\"badges-expanded\" style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>\n                        {badgeService.getAllBadgeDefinitions().map((badgeDef) => {\n                          const isEarned = userBadges.some(badge => badge.id === badgeDef.id)\n                          return (\n                            <div \n                              key={badgeDef.id}\n                              className={`badge-item ${isEarned ? 'earned' : 'unearned'}`}\n                              style={{\n                                display: 'flex',\n                                alignItems: 'center',\n                                justifyContent: 'space-between',\n                                padding: '8px',\n                                borderRadius: '6px',\n                                background: isEarned ? `${badgeDef.color}15` : 'rgba(128, 128, 128, 0.05)',\n                                border: `1px solid ${isEarned ? badgeDef.borderColor : 'rgba(128, 128, 128, 0.1)'}`\n                              }}\n                            >\n                              <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                                <span style={{ fontSize: '16px', opacity: isEarned ? 1 : 0.5 }}>\n                                  {badgeDef.icon}\n                                </span>\n                                <div>\n                                  <div style={{ fontSize: '12px', fontWeight: '500', color: isEarned ? badgeDef.color : '#666' }}>\n                                    {badgeDef.name} {isEarned && '✓'}\n                                  </div>\n                                  <div style={{ fontSize: '10px', color: '#888' }}>\n                                    {badgeDef.requirements}\n                                  </div>\n                                </div>\n                              </div>\n                              {!isEarned && (\n                                <button\n                                  onClick={() => {\n                                    if (badgeDef.id === 'pxj-whale' || badgeDef.id === 'pxj-holder') {\n                                      window.open('https://waxonedge.app/swap/WAX_eosio.token/PXJ_pixeljourney', '_blank')\n                                    } else if (badgeDef.id === 'pixal-pfp') {\n                                      window.location.href = '/marketplace?collection=pixeljourney&template=781515'\n                                    } else if (badgeDef.id === 'waxrock') {\n                                      window.location.href = '/marketplace?category=waxrock'\n                                    } else if (badgeDef.id === 'ingredients') {\n                                      window.location.href = '/marketplace?category=ingredients'\n                                    } else {\n                                      window.location.href = '/marketplace?collection=pixeljourney'\n                                    }\n                                  }}\n                                  style={{\n                                    fontSize: '10px',\n                                    padding: '4px 8px',\n                                    background: badgeDef.color,\n                                    color: 'white',\n                                    border: 'none',\n                                    borderRadius: '4px',\n                                    cursor: 'pointer',\n                                    transition: 'opacity 0.2s'\n                                  }}\n                                  onMouseEnter={(e) => (e.target as HTMLButtonElement).style.opacity = '0.8'}\n                                   onMouseLeave={(e) => (e.target as HTMLButtonElement).style.opacity = '1'}\n                                >\n                                  Buy\n                                </button>\n                              )}\n                            </div>\n                          )\n                        })}\n                      </div>\n                    )}\n                  </div>\n                  \n                  {/* Display Options - Collapsible */}\n                  <div className=\"wallet-settings\">\n                    <div className=\"settings-menu\">\n                      <div className=\"settings-section\">\n                        <div \n                          className=\"settings-header\"\n                          onClick={() => setIsDisplayOptionsExpanded(!isDisplayOptionsExpanded)}\n                          style={{ cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'space-between', padding: '8px 0' }}\n                        >\n                          <h4>Display Options</h4>\n                          <span style={{ fontSize: '12px', color: '#888' }}>\n                            {isDisplayOptionsExpanded ? '▼' : '▶'}\n                          </span>\n                        </div>\n                        \n                        {!isDisplayOptionsExpanded ? (\n                          // Collapsed view - only show dark mode toggle\n                          <div className=\"theme-toggle-option\" style={{ marginTop: '8px' }}>\n                            <span>Dark Mode</span>\n                            <button \n                              className={`theme-toggle ${isDarkMode ? 'active' : ''}`}\n                              onClick={toggleDarkMode}\n                            >\n                              <div className=\"toggle-slider\">\n                                <svg className=\"sun-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                                  <circle cx=\"12\" cy=\"12\" r=\"5\"></circle>\n                                  <line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"3\"></line>\n                                  <line x1=\"12\" y1=\"21\" x2=\"12\" y2=\"23\"></line>\n                                  <line x1=\"4.22\" y1=\"4.22\" x2=\"5.64\" y2=\"5.64\"></line>\n                                  <line x1=\"18.36\" y1=\"18.36\" x2=\"19.78\" y2=\"19.78\"></line>\n                                  <line x1=\"1\" y1=\"12\" x2=\"3\" y2=\"12\"></line>\n                                  <line x1=\"21\" y1=\"12\" x2=\"23\" y2=\"12\"></line>\n                                  <line x1=\"4.22\" y1=\"19.78\" x2=\"5.64\" y2=\"18.36\"></line>\n                                  <line x1=\"18.36\" y1=\"5.64\" x2=\"19.78\" y2=\"4.22\"></line>\n                                </svg>\n                                <svg className=\"moon-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                                  <path d=\"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z\"></path>\n                                </svg>\n                              </div>\n                            </button>\n                          </div>\n                        ) : (\n                          // Expanded view - show all options\n                          <div className=\"filter-options\">\n                          <label className=\"filter-option\">\n                            <input \n                              type=\"checkbox\" \n                              checked={settings.showOtherCollections}\n                              onChange={(e) => updateSetting('showOtherCollections', e.target.checked)}\n                            />\n                            <span>Show other collections</span>\n                          </label>\n                          <label className=\"filter-option\">\n                            <input \n                              type=\"checkbox\" \n                              checked={settings.showWhitelistedOnly}\n                              onChange={(e) => updateSetting('showWhitelistedOnly', e.target.checked)}\n                            />\n                            <span>Displays only whitelisted collections in overviews</span>\n                          </label>\n                          <label className=\"filter-option\">\n                            <input \n                              type=\"checkbox\" \n                              checked={settings.enableAnimatedNFTs}\n                              onChange={(e) => updateSetting('enableAnimatedNFTs', e.target.checked)}\n                            />\n                            <span>Enables animated NFTs to play in overviews</span>\n                          </label>\n                          <label className=\"filter-option\">\n                            <input \n                              type=\"checkbox\" \n                              checked={settings.showExplicitContent}\n                              onChange={(e) => updateSetting('showExplicitContent', e.target.checked)}\n                            />\n                            <span>Enables explicit content to be shown in overviews</span>\n                          </label>\n                          <label className=\"filter-option\">\n                            <input \n                              type=\"checkbox\" \n                              checked={settings.showChatButton}\n                              onChange={(e) => updateSetting('showChatButton', e.target.checked)}\n                            />\n                            <span>Show chat button</span>\n                          </label>\n                          <label className=\"filter-option\">\n                            <input \n                              type=\"checkbox\" \n                              checked={settings.blockNSFW}\n                              onChange={(e) => updateSetting('blockNSFW', e.target.checked)}\n                            />\n                            <span>Blocks NSFW collections from the platform</span>\n                          </label>\n                          <label className=\"filter-option\">\n                            <input \n                              type=\"checkbox\" \n                              checked={settings.blockAI}\n                              onChange={(e) => updateSetting('blockAI', e.target.checked)}\n                            />\n                            <span>Blocks AI collections from the platform</span>\n                          </label>\n                          \n                          <div className=\"theme-toggle-option\">\n                            <span>Dark Mode</span>\n                            <button \n                              className={`theme-toggle ${isDarkMode ? 'active' : ''}`}\n                              onClick={toggleDarkMode}\n                            >\n                              <div className=\"toggle-slider\">\n                                <svg className=\"sun-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                                  <circle cx=\"12\" cy=\"12\" r=\"5\"></circle>\n                                  <line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"3\"></line>\n                                  <line x1=\"12\" y1=\"21\" x2=\"12\" y2=\"23\"></line>\n                                  <line x1=\"4.22\" y1=\"4.22\" x2=\"5.64\" y2=\"5.64\"></line>\n                                  <line x1=\"18.36\" y1=\"18.36\" x2=\"19.78\" y2=\"19.78\"></line>\n                                  <line x1=\"1\" y1=\"12\" x2=\"3\" y2=\"12\"></line>\n                                  <line x1=\"21\" y1=\"12\" x2=\"23\" y2=\"12\"></line>\n                                  <line x1=\"4.22\" y1=\"19.78\" x2=\"5.64\" y2=\"18.36\"></line>\n                                  <line x1=\"18.36\" y1=\"5.64\" x2=\"19.78\" y2=\"4.22\"></line>\n                                </svg>\n                                <svg className=\"moon-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                                  <path d=\"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z\"></path>\n                                </svg>\n                              </div>\n                               </button>\n                             </div>\n                             <label className=\"filter-option\">\n                               <input \n                                 type=\"checkbox\" \n                                 checked={settings.showPricesInUSD}\n                                 onChange={(e) => updateSetting('showPricesInUSD', e.target.checked)}\n                               />\n                               <span>Show Prices in USD</span>\n                             </label>\n                             \n                             {/* Currency Selection */}\n                             <div className=\"currency-selection\">\n                               <label>Currency Comparison:</label>\n                               <select \n                                 value={settings.selectedCurrency}\n                                 onChange={(e) => updateSetting('selectedCurrency', e.target.value)}\n                                 className=\"currency-select\"\n                               >\n                                 <option value=\"USD\">USD - US Dollar</option>\n                                 <option value=\"EUR\">EUR - Euro</option>\n                                 <option value=\"DKK\">DKK - Danish Krone</option>\n                                 <option value=\"AED\">AED - UAE Dirham</option>\n                                 <option value=\"INR\">INR - Indian Rupee</option>\n                                 <option value=\"RUB\">RUB - Russian Ruble</option>\n                                 <option value=\"CNY\">CNY - Chinese Yuan</option>\n                                 <option value=\"JPY\">JPY - Japanese Yen</option>\n                                 <option value=\"BTC\">BTC - Bitcoin</option>\n                                 <option value=\"ETH\">ETH - Ethereum</option>\n                               </select>\n                             </div>\n                             \n                             <label className=\"filter-option\">\n                               <input \n                                 type=\"checkbox\" \n                                 checked={settings.showRarityRankings}\n                                 onChange={(e) => updateSetting('showRarityRankings', e.target.checked)}\n                               />\n                               <span>Show Rarity Rankings</span>\n                             </label>\n                           </div>\n                         )}\n                       </div>\n                     </div>\n                   </div>\n                  \n                  <button className=\"logout-btn\" onClick={logout} role=\"menuitem\" aria-label=\"Logout from wallet\">\n                    <span className=\"logout-icon\" aria-hidden=\"true\">🚪</span>\n                    Logout\n                  </button>\n                </div>\n              )}\n            </div>\n            {/* Mobile Menu Button */}\n            <button \n              onClick={toggleMobileMenu}\n              className={`mobile-menu-btn ${isMobileMenuOpen ? 'active' : ''}`}\n              aria-label={isMobileMenuOpen ? 'Close Menu' : 'Open Menu'}\n              aria-expanded={isMobileMenuOpen}\n              aria-controls=\"mobile-menu\"\n              onKeyDown={(e) => {\n                if (e.key === 'Enter' || e.key === ' ') {\n                  e.preventDefault()\n                  toggleMobileMenu()\n                  accessibilityService.announceToScreenReader(\n                    isMobileMenuOpen ? 'Mobile menu closed' : 'Mobile menu opened'\n                  )\n                }\n              }}\n            >\n              <div className=\"hamburger\" aria-hidden=\"true\">\n                <span></span>\n                <span></span>\n                <span></span>\n              </div>\n            </button>\n          </div>\n        </div>\n      </nav>\n\n      {/* Mobile Menu Overlay */}\n      <div \n        className={`mobile-menu ${isMobileMenuOpen ? 'open' : ''}`}\n        id=\"mobile-menu\"\n        role=\"navigation\"\n        aria-expanded={isMobileMenuOpen}\n        aria-label=\"Mobile navigation menu\"\n        onKeyDown={(e) => {\n          if (e.key === 'Escape') {\n            closeMobileMenu()\n            accessibilityService.announceToScreenReader('Mobile menu closed')\n          }\n        }}\n      >\n\n        <nav className=\"mobile-nav-links\" role=\"navigation\" aria-label=\"Mobile menu links\">\n          {/* Main Navigation */}\n          <div className=\"mobile-nav-section\">\n            <h3 className=\"mobile-nav-section-title\">Main</h3>\n            <div className=\"mobile-nav-grid\">\n              <Link \n                to=\"/\"\n                onClick={closeMobileMenu}\n                className={`mobile-nav-link ${currentPage === 'marketplace' || currentPage === '' ? 'active' : ''}`}\n              >\n                Marketplace\n              </Link>\n              <Link \n                to=\"/rwax\"\n                onClick={closeMobileMenu}\n                className={`mobile-nav-link ${currentPage === 'rwax' ? 'active' : ''}`}\n              >\n                RWAX\n              </Link>\n              <Link \n                to=\"/collections\"\n                onClick={closeMobileMenu}\n                className={`mobile-nav-link ${currentPage === 'collections' ? 'active' : ''}`}\n              >\n                Collections\n              </Link>\n              <Link \n                to=\"/learn\"\n                onClick={closeMobileMenu}\n                className={`mobile-nav-link ${currentPage === 'learn' ? 'active' : ''}`}\n              >\n                Learn\n              </Link>\n              <Link \n                to=\"/rewards\"\n                onClick={closeMobileMenu}\n                className={`mobile-nav-link ${currentPage === 'rewards' ? 'active' : ''}`}\n              >\n                Rewards\n              </Link>\n            </div>\n          </div>\n\n          {/* Trading & Tools */}\n          <div className=\"mobile-nav-section\">\n            <h3 className=\"mobile-nav-section-title\">Trading & Tools</h3>\n            <div className=\"mobile-nav-grid\">\n              <Link \n                to=\"/auctions\"\n                onClick={closeMobileMenu}\n                className={`mobile-nav-link ${currentPage === 'auctions' ? 'active' : ''}`}\n              >\n                Auctions\n              </Link>\n              <Link \n                to=\"/activity\"\n                onClick={closeMobileMenu}\n                className={`mobile-nav-link ${currentPage === 'activity' ? 'active' : ''}`}\n              >\n                Activity\n              </Link>\n              <Link \n                to=\"/pxcrafting\"\n                onClick={closeMobileMenu}\n                className={`mobile-nav-link ${currentPage === 'pxcrafting' ? 'active' : ''}`}\n              >\n                PxCraft\n              </Link>\n              <Link \n                to=\"/pxswap\"\n                onClick={closeMobileMenu}\n                className={`mobile-nav-link ${currentPage === 'pxswap' ? 'active' : ''}`}\n              >\n                PxSwap\n              </Link>\n              <Link \n                to=\"/journeymap\"\n                onClick={closeMobileMenu}\n                className={`mobile-nav-link ${currentPage === 'journeymap' ? 'active' : ''}`}\n              >\n                JourneyMap\n              </Link>\n              <Link \n                to=\"/staking\"\n                onClick={closeMobileMenu}\n                className={`mobile-nav-link ${currentPage === 'pxstaking' ? 'active' : ''}`}\n              >\n                PxStaking\n              </Link>\n            </div>\n          </div>\n\n          {/* Social Links */}\n          <div className=\"mobile-nav-section\">\n            <h3 className=\"mobile-nav-section-title\">Community</h3>\n            <div className=\"mobile-social-section\">\n              <a \n                href=\"http://discord.gg/pixel-journey-1130670500776005734\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"mobile-social-link\"\n                onClick={closeMobileMenu}\n              >\n                <svg className=\"social-icon\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path d=\"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z\"/>\n                </svg>\n                Discord\n              </a>\n              <a \n                href=\"https://x.com/PxJourney\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"mobile-social-link\"\n                onClick={closeMobileMenu}\n              >\n                <svg className=\"social-icon\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path d=\"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z\"/>\n                </svg>\n                X (Twitter)\n              </a>\n            </div>\n          </div>\n        </nav>\n\n        <div className=\"mobile-menu-actions\">\n          {/* Mobile Cart Button - Only show when logged in and cart has items */}\n          {isConnected && cartCount > 0 && (\n            <button \n              onClick={() => {\n                setIsCartOpen(true)\n                closeMobileMenu()\n              }}\n              className=\"mobile-cart-btn\"\n              aria-label={`Open Shopping Cart (${cartCount} items)`}\n            >\n              <svg className=\"cart-icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                <circle cx=\"9\" cy=\"21\" r=\"1\"></circle>\n                <circle cx=\"20\" cy=\"21\" r=\"1\"></circle>\n                <path d=\"m1 1 4 4 2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6\"></path>\n              </svg>\n              Shopping Cart ({cartCount})\n            </button>\n          )}\n\n          {isConnected && (\n            <>\n              <Link \n                to=\"/inventory\"\n                onClick={closeMobileMenu}\n                className=\"mobile-inventory-btn\"\n              >\n                <svg className=\"inventory-icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\" />\n                </svg>\n                My Inventory\n              </Link>\n              \n              <Link \n                to=\"/profile\"\n                onClick={closeMobileMenu}\n                className=\"mobile-inventory-btn\"\n              >\n                <svg className=\"inventory-icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n                </svg>\n                My Profile\n              </Link>\n              \n\n              \n              <Link \n                to=\"/watchlist\"\n                onClick={closeMobileMenu}\n                className=\"mobile-inventory-btn\"\n              >\n                <svg className=\"inventory-icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path d=\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z\"></path>\n                </svg>\n                My Watchlist\n              </Link>\n            </>\n          )}\n          \n          {/* Login/Logout Button */}\n          <div className=\"mobile-auth-section\">\n            {isConnected ? (\n              <button \n                onClick={() => {\n                  logout()\n                  closeMobileMenu()\n                  accessibilityService.announceToScreenReader('Logged out successfully')\n                }}\n                className=\"mobile-auth-btn logout-btn\"\n              >\n                <svg className=\"auth-icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\n                </svg>\n                Logout\n              </button>\n            ) : (\n              <button \n                onClick={() => {\n                  login()\n                  closeMobileMenu()\n                  accessibilityService.announceToScreenReader('Login initiated')\n                }}\n                className=\"mobile-auth-btn login-btn\"\n              >\n                <svg className=\"auth-icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1\" />\n                </svg>\n                Login\n              </button>\n            )}\n          </div>\n\n        </div>\n      </div>\n\n      {/* Mobile Menu Backdrop */}\n      {isMobileMenuOpen && (\n        <div \n          className=\"fixed inset-0 bg-black bg-opacity-50 z-[998]\" \n          onClick={closeMobileMenu}\n        />\n      )}\n\n      {/* Shopping Cart Modal */}\n      <ShoppingCart \n        isOpen={isCartOpen}\n        onClose={() => setIsCartOpen(false)}\n      />\n      \n      {/* Accessibility Settings Modal */}\n      <AccessibilitySettings \n        isOpen={isAccessibilitySettingsOpen}\n        onClose={() => setIsAccessibilitySettingsOpen(false)}\n      />\n    </>\n  )\n}\n\nexport default Navigation","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport './LandingPage.css';\n\nconst LandingPage: React.FC = () => {\n  return (\n    <div className=\"landing-page\">\n      <div className=\"hero-section\">\n        <div className=\"hero-content\">\n          <h1 className=\"hero-title\">\n            Welcome to <span className=\"brand-highlight\">PxMarket</span>\n          </h1>\n          <p className=\"hero-subtitle\">\n            by Pixel Journey\n          </p>\n          <p className=\"hero-description\">\n            Discover, trade, and collect unique digital assets in the ultimate NFT marketplace experience.\n          </p>\n        </div>\n      </div>\n\n      <div className=\"cta-section\">\n        <div className=\"cta-container\">\n          <div className=\"cta-card marketplace-card\">\n            <div className=\"cta-icon\">\n              🏪\n            </div>\n            <h2 className=\"cta-title\">Explore Marketplace</h2>\n            <p className=\"cta-description\">\n              Browse thousands of unique NFTs, discover rare collectibles, and find your next digital (pixel?!) treasure.\n            </p>\n            <Link to=\"/marketplace\" className=\"cta-button primary\">\n              Enter Marketplace\n            </Link>\n          </div>\n\n          <div className=\"cta-card rwax-card\">\n            <div className=\"cta-icon\">\n              🎭\n            </div>\n            <h2 className=\"cta-title\">Get Your Pixal PFP via R-WAX</h2>\n            <p className=\"cta-description\">\n              Pick up your unique pixel-perfect Pixal Profile Picture using WPIXAL on the R-WAX Markets and join the Pixel Journey community!\n            </p>\n            <Link to=\"/rwax\" className=\"cta-button secondary\">\n              Browse RWAX Pixals\n            </Link>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"features-section\">\n        <div className=\"features-container\">\n          <div className=\"feature-item\">\n            <div className=\"feature-icon\">⚡</div>\n            <h3>Lightning Fast</h3>\n            <p>Instant transactions on the WAX blockchain</p>\n          </div>\n          <div className=\"feature-item\">\n            <div className=\"feature-icon\">🔒</div>\n            <h3>Secure Trading</h3>\n            <p>Safe and transparent blockchain transactions</p>\n          </div>\n          <div className=\"feature-item\">\n            <div className=\"feature-icon\">🌟</div>\n            <h3>Premium Quality</h3>\n            <p>Curated collection of high-quality digital assets</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LandingPage;","// Push notification service for managing subscriptions and notifications\nimport { ErrorMessageService } from './errorMessageService'\nimport { monitoringService } from './monitoringService'\nimport { log } from './loggingService'\n\ninterface NotificationPayload {\n  title: string\n  body: string\n  icon?: string\n  badge?: string\n  tag?: string\n  data?: Record<string, unknown>\n  requireInteraction?: boolean\n  silent?: boolean\n  timestamp?: number\n}\n\ninterface PushSubscriptionData {\n  endpoint: string\n  keys: {\n    p256dh: string\n    auth: string\n  }\n  userId?: string\n  subscriptionTime: number\n}\n\ninterface NotificationPermissionState {\n  permission: NotificationPermission\n  supported: boolean\n  serviceWorkerReady: boolean\n  subscribed: boolean\n}\n\ninterface NotificationPreferences {\n  priceAlerts: boolean\n  auctionUpdates: boolean\n  newListings: boolean\n  marketTrends: boolean\n  systemNotifications: boolean\n}\n\nclass PushNotificationService {\n  private serviceWorkerRegistration: ServiceWorkerRegistration | null = null\n  private pushSubscription: PushSubscription | null = null\n  private vapidPublicKey: string = '' // Should be set from environment or config\n  private isInitialized: boolean = false\n  private permissionState: NotificationPermissionState = {\n    permission: 'default',\n    supported: false,\n    serviceWorkerReady: false,\n    subscribed: false\n  }\n\n  constructor() {\n    this.checkSupport()\n  }\n\n  private checkSupport(): void {\n    this.permissionState.supported = \n      'serviceWorker' in navigator &&\n      'PushManager' in window &&\n      'Notification' in window\n\n    if (this.permissionState.supported) {\n      this.permissionState.permission = Notification.permission\n    }\n  }\n\n  async initialize(): Promise<boolean> {\n    if (this.isInitialized) {\n      return true\n    }\n\n    try {\n      if (!this.permissionState.supported) {\n        log.warn('Push notifications not supported in this browser')\n        return false\n      }\n\n      // Register service worker\n      await this.registerServiceWorker()\n      \n      // Check existing subscription\n      await this.checkExistingSubscription()\n      \n      this.isInitialized = true\n      \n      monitoringService.trackEvent('push_notification_service_initialized', {\n        supported: this.permissionState.supported,\n        permission: this.permissionState.permission,\n        subscribed: this.permissionState.subscribed\n      })\n      \n      return true\n    } catch (error) {\n      log.error('Failed to initialize push notification service', 'PushNotificationService.initialize', error as Error)\n      monitoringService.reportError(error as Error, 'push_notification_init_error')\n      return false\n    }\n  }\n\n  private async registerServiceWorker(): Promise<void> {\n    try {\n      // Detect environment based on hostname and protocol\n      const isDevelopment = location.hostname === 'localhost' || location.hostname === '127.0.0.1' || location.protocol === 'http:'\n      const swFile = isDevelopment ? '/sw-dev.js' : '/sw.js'\n      \n      this.serviceWorkerRegistration = await navigator.serviceWorker.register(swFile, {\n        scope: '/'\n      })\n\n      // Wait for service worker to be ready\n      await navigator.serviceWorker.ready\n      this.permissionState.serviceWorkerReady = true\n\n      log.info(`Service Worker registered successfully: ${swFile}`)\n      \n      // Listen for service worker messages\n      navigator.serviceWorker.addEventListener('message', this.handleServiceWorkerMessage.bind(this))\n      \n    } catch (error) {\n      log.error('Failed to register service worker', 'PushNotificationService.registerServiceWorker', error as Error)\n      throw error\n    }\n  }\n\n  private handleServiceWorkerMessage(event: MessageEvent): void {\n    const { type, data } = event.data || {}\n    \n    switch (type) {\n      case 'NOTIFICATION_CLICKED':\n        monitoringService.trackEvent('notification_clicked', data)\n        break\n      case 'NOTIFICATION_CLOSED':\n        monitoringService.trackEvent('notification_closed', data)\n        break\n      default:\n        log.debug('Unknown service worker message:', type)\n    }\n  }\n\n  private async checkExistingSubscription(): Promise<void> {\n    if (!this.serviceWorkerRegistration) {\n      return\n    }\n\n    try {\n      this.pushSubscription = await this.serviceWorkerRegistration.pushManager.getSubscription()\n      this.permissionState.subscribed = !!this.pushSubscription\n      \n      if (this.pushSubscription) {\n        log.info('Existing push subscription found')\n        // Optionally validate subscription with server\n        await this.validateSubscription()\n      }\n    } catch (error) {\n      log.error('Failed to check existing subscription', 'PushNotificationService.checkExistingSubscription', error as Error)\n    }\n  }\n\n  async requestPermission(): Promise<NotificationPermission> {\n    if (!this.permissionState.supported) {\n      throw new Error('Push notifications not supported')\n    }\n\n    try {\n      const permission = await Notification.requestPermission()\n      this.permissionState.permission = permission\n      \n      monitoringService.trackEvent('notification_permission_requested', {\n        permission,\n        previousPermission: this.permissionState.permission\n      })\n      \n      return permission\n    } catch (error) {\n      ErrorMessageService.logError('PushNotificationService.requestPermission', error as Error)\n      monitoringService.reportError(error as Error, 'notification_permission_error')\n      throw error\n    }\n  }\n\n  async subscribe(userId?: string): Promise<PushSubscription | null> {\n    if (!this.isInitialized) {\n      await this.initialize()\n    }\n\n    if (!this.serviceWorkerRegistration) {\n      throw new Error('Service worker not registered')\n    }\n\n    if (this.permissionState.permission !== 'granted') {\n      const permission = await this.requestPermission()\n      if (permission !== 'granted') {\n        throw new Error('Notification permission denied')\n      }\n    }\n\n    try {\n      // Unsubscribe existing subscription if any\n      if (this.pushSubscription) {\n        await this.unsubscribe()\n      }\n\n      // Create new subscription\n      const subscribeOptions: PushSubscriptionOptionsInit = {\n        userVisibleOnly: true,\n        applicationServerKey: this.vapidPublicKey ? this.urlBase64ToUint8Array(this.vapidPublicKey) : undefined\n      }\n\n      this.pushSubscription = await this.serviceWorkerRegistration.pushManager.subscribe(subscribeOptions)\n      this.permissionState.subscribed = true\n\n      // Store subscription data\n      const subscriptionData: PushSubscriptionData = {\n        endpoint: this.pushSubscription.endpoint,\n        keys: {\n          p256dh: this.arrayBufferToBase64(this.pushSubscription.getKey('p256dh')!),\n          auth: this.arrayBufferToBase64(this.pushSubscription.getKey('auth')!)\n        },\n        userId,\n        subscriptionTime: Date.now()\n      }\n\n      // Store in localStorage for persistence\n      localStorage.setItem('push_subscription', JSON.stringify(subscriptionData))\n\n      // Send subscription to server (implement based on your backend)\n      await this.sendSubscriptionToServer(subscriptionData)\n\n      monitoringService.trackEvent('push_notification_subscribed', {\n        userId,\n        endpoint: this.pushSubscription.endpoint\n      })\n\n      log.info('Push notification subscription successful')\n      return this.pushSubscription\n    } catch (error) {\n      log.error('Failed to subscribe to push notifications', 'PushNotificationService.subscribe', error as Error)\n      monitoringService.reportError(error as Error, 'push_subscription_error', { userId })\n      throw error\n    }\n  }\n\n  async unsubscribe(): Promise<boolean> {\n    if (!this.pushSubscription) {\n      return true\n    }\n\n    try {\n      const success = await this.pushSubscription.unsubscribe()\n      \n      if (success) {\n        this.pushSubscription = null\n        this.permissionState.subscribed = false\n        \n        // Remove from localStorage\n        localStorage.removeItem('push_subscription')\n        \n        // Notify server about unsubscription\n        await this.removeSubscriptionFromServer()\n        \n        monitoringService.trackEvent('push_notification_unsubscribed')\n        log.info('Push notification unsubscribed successfully')\n      }\n      \n      return success\n    } catch (error) {\n      ErrorMessageService.logError('PushNotificationService.unsubscribe', error as Error)\n      monitoringService.reportError(error as Error, 'push_unsubscription_error')\n      return false\n    }\n  }\n\n  async showLocalNotification(payload: NotificationPayload): Promise<void> {\n    if (!this.permissionState.supported || this.permissionState.permission !== 'granted') {\n      throw new Error('Notifications not available')\n    }\n\n    try {\n      const options: NotificationOptions = {\n        body: payload.body,\n        icon: payload.icon || '/logo.png',\n        badge: payload.badge || '/logo.png',\n        tag: payload.tag,\n        data: payload.data,\n        requireInteraction: payload.requireInteraction || false,\n        silent: payload.silent || false\n      }\n\n      const notification = new Notification(payload.title, options)\n      \n      // Track notification events\n      notification.onclick = () => {\n        monitoringService.trackEvent('local_notification_clicked', {\n          tag: payload.tag,\n          title: payload.title\n        })\n        notification.close()\n      }\n\n      notification.onclose = () => {\n        monitoringService.trackEvent('local_notification_closed', {\n          tag: payload.tag,\n          title: payload.title\n        })\n      }\n\n      monitoringService.trackEvent('local_notification_shown', {\n        tag: payload.tag,\n        title: payload.title\n      })\n      \n    } catch (error) {\n      log.error('Failed to show local notification', 'PushNotificationService.showLocalNotification', error as Error)\n      monitoringService.reportError(error as Error, 'local_notification_error', { title: payload.title })\n      throw error\n    }\n  }\n\n  // Utility methods\n  private urlBase64ToUint8Array(base64String: string): Uint8Array {\n    const padding = '='.repeat((4 - base64String.length % 4) % 4)\n    const base64 = (base64String + padding)\n      .replace(/-/g, '+')\n      .replace(/_/g, '/')\n\n    const rawData = window.atob(base64)\n    const outputArray = new Uint8Array(rawData.length)\n\n    for (let i = 0; i < rawData.length; ++i) {\n      outputArray[i] = rawData.charCodeAt(i)\n    }\n    return outputArray\n  }\n\n  private arrayBufferToBase64(buffer: ArrayBuffer): string {\n    const bytes = new Uint8Array(buffer)\n    let binary = ''\n    for (let i = 0; i < bytes.byteLength; i++) {\n      binary += String.fromCharCode(bytes[i])\n    }\n    return window.btoa(binary)\n  }\n\n  private getAuthToken(): string {\n    // Get authentication token from localStorage or session storage\n    return localStorage.getItem('auth_token') || sessionStorage.getItem('auth_token') || ''\n  }\n\n  private getNotificationPreferences(): NotificationPreferences {\n    const stored = localStorage.getItem('notification_preferences')\n    if (stored) {\n      try {\n        return JSON.parse(stored)\n      } catch (error) {\n        log.warn('Failed to parse notification preferences:', 'pushNotificationService.getNotificationPreferences', error)\n      }\n    }\n    \n    // Return default preferences\n    return {\n      priceAlerts: true,\n      auctionUpdates: true,\n      newListings: false,\n      marketTrends: false,\n      systemNotifications: true\n    }\n  }\n\n  private async validateSubscription(): Promise<boolean> {\n    if (!this.pushSubscription) {\n      return false\n    }\n\n    try {\n      const subscriptionData = {\n        endpoint: this.pushSubscription.endpoint,\n        keys: {\n          p256dh: this.arrayBufferToBase64(this.pushSubscription.getKey('p256dh')!),\n          auth: this.arrayBufferToBase64(this.pushSubscription.getKey('auth')!)\n        }\n      }\n\n      const response = await fetch('/api/push/validate-subscription', {\n        method: 'POST',\n        headers: { \n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${this.getAuthToken()}`\n        },\n        body: JSON.stringify({ subscription: subscriptionData })\n      })\n\n      if (!response.ok) {\n        throw new Error(`Validation failed: ${response.status} ${response.statusText}`)\n      }\n\n      const result = await response.json()\n      return result.valid === true\n    } catch (error) {\n      log.warn('Subscription validation failed:', 'pushNotificationService.validateSubscription', error as Error)\n      return false\n    }\n  }\n\n  private async sendSubscriptionToServer(subscriptionData: PushSubscriptionData): Promise<void> {\n    try {\n      const response = await fetch('/api/push/subscribe', {\n        method: 'POST',\n        headers: { \n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${this.getAuthToken()}`\n        },\n        body: JSON.stringify({\n          ...subscriptionData,\n          userAgent: navigator.userAgent,\n          timestamp: Date.now(),\n          preferences: this.getNotificationPreferences()\n        })\n      })\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}))\n        throw new Error(`Failed to save subscription: ${response.status} ${response.statusText} - ${errorData.message || 'Unknown error'}`)\n      }\n\n      const result = await response.json()\n      log.info('Subscription successfully saved to server:', result.subscriptionId)\n      \n      // Store server subscription ID for future reference\n      localStorage.setItem('push_subscription_id', result.subscriptionId)\n      \n    } catch (error) {\n      log.error('Failed to send subscription to server:', 'pushNotificationService.sendSubscriptionToServer', error as Error, {\n        endpoint: subscriptionData.endpoint,\n        userId: subscriptionData.userId\n      })\n      // Re-throw to handle in calling function\n      throw error\n    }\n  }\n\n  private async removeSubscriptionFromServer(): Promise<void> {\n    try {\n      const subscriptionId = localStorage.getItem('push_subscription_id')\n      const subscriptionData = localStorage.getItem('push_subscription')\n      \n      if (!subscriptionId && !subscriptionData) {\n        log.info('No subscription to remove from server')\n        return\n      }\n\n      const response = await fetch('/api/push/unsubscribe', {\n        method: 'DELETE',\n        headers: { \n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${this.getAuthToken()}`\n        },\n        body: JSON.stringify({\n          subscriptionId,\n          endpoint: this.pushSubscription?.endpoint,\n          timestamp: Date.now()\n        })\n      })\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}))\n        throw new Error(`Failed to remove subscription: ${response.status} ${response.statusText} - ${errorData.message || 'Unknown error'}`)\n      }\n\n      // Clean up local storage\n      localStorage.removeItem('push_subscription_id')\n      log.info('Subscription successfully removed from server')\n      \n    } catch (error) {\n      log.error('Failed to remove subscription from server:', 'pushNotificationService.removeSubscriptionFromServer', error as Error)\n      // Don't throw here to avoid breaking the unsubscription process\n    }\n  }\n\n  // Public API methods\n  getPermissionState(): NotificationPermissionState {\n    return { ...this.permissionState }\n  }\n\n  isSubscribed(): boolean {\n    return this.permissionState.subscribed\n  }\n\n  getSubscription(): PushSubscription | null {\n    return this.pushSubscription\n  }\n\n  setVapidKey(key: string): void {\n    this.vapidPublicKey = key\n  }\n\n  async testNotification(): Promise<void> {\n    await this.showLocalNotification({\n      title: 'PxMarket Test Notification',\n      body: 'Push notifications are working correctly!',\n      tag: 'test-notification',\n      data: { test: true }\n    })\n  }\n\n  // Integration with watchlist service for price alerts\n  async sendPriceAlert(assetName: string, currentPrice: string, targetPrice: string): Promise<void> {\n    await this.showLocalNotification({\n      title: 'Price Alert',\n      body: `${assetName} is now ${currentPrice} (target: ${targetPrice})`,\n      tag: 'price-alert',\n      icon: '/logo.png',\n      requireInteraction: true,\n      data: {\n        type: 'price_alert',\n        assetName,\n        currentPrice,\n        targetPrice\n      }\n    })\n  }\n\n  // Integration with cart service for transaction notifications\n  async sendTransactionNotification(type: 'success' | 'error', message: string, transactionId?: string): Promise<void> {\n    await this.showLocalNotification({\n      title: type === 'success' ? 'Transaction Successful' : 'Transaction Failed',\n      body: message,\n      tag: `transaction-${type}`,\n      icon: '/logo.png',\n      data: {\n        type: 'transaction',\n        status: type,\n        transactionId\n      }\n    })\n  }\n}\n\n// Export singleton instance\nexport const pushNotificationService = new PushNotificationService()\n\n// Export types\nexport type {\n  NotificationPayload,\n  PushSubscriptionData,\n  NotificationPermissionState,\n  NotificationPreferences\n}","import type { NFTAsset } from './api'\nimport { ErrorMessageService } from './errorMessageService'\nimport { pushNotificationService } from './pushNotificationService'\nimport { storageService } from './storageService'\nimport { log } from './loggingService'\n\ninterface WatchlistItem {\n  nft: NFTAsset\n  targetPrice?: number\n  alertType: 'below' | 'above' | 'any'\n  addedAt: number\n  lastPrice: number\n  priceChange?: number\n}\n\ninterface PriceAlert {\n  targetPrice: number\n  alertType: 'below' | 'above' | 'any'\n  enabled: boolean\n  lastTriggered?: number\n}\n\ninterface NotificationSettings {\n  browser: boolean\n  email: boolean\n  sound: boolean\n}\n\nclass WatchlistService {\n  private watchlist: WatchlistItem[] = []\n  private priceAlerts: Record<string, PriceAlert> = {}\n  private notifications: NotificationSettings = {\n    browser: true,\n    email: false,\n    sound: true\n  }\n  private listeners: ((watchlist: WatchlistItem[]) => void)[] = []\n  private priceCheckInterval: NodeJS.Timeout | null = null\n  private readonly STORAGE_KEY = 'pixeljourney_watchlist'\n  private readonly ALERTS_KEY = 'pixeljourney_price_alerts'\n  private readonly NOTIFICATIONS_KEY = 'pixeljourney_notifications'\n  \n  // Price caching to reduce API requests\n  private priceCache: Record<string, { price: number, timestamp: number }> = {}\n  private readonly CACHE_DURATION = 2 * 60 * 1000 // 2 minutes cache\n  \n  // Endpoint failure tracking\n  private endpointFailures: Record<string, { count: number, lastFailure: number, disabled: boolean }> = {}\n  private readonly MAX_FAILURES = 3\n  private readonly FAILURE_WINDOW = 5 * 60 * 1000 // 5 minutes\n  private readonly DISABLE_DURATION = 15 * 60 * 1000 // 15 minutes\n\n  constructor() {\n    this.loadFromStorage()\n    this.startPriceMonitoring()\n    this.requestNotificationPermission()\n  }\n\n  // Load data from storage with proper error handling\n  private loadFromStorage(): void {\n    try {\n      this.watchlist = storageService.getJSON(this.STORAGE_KEY, [])\n      this.priceAlerts = storageService.getJSON(this.ALERTS_KEY, {})\n      this.notifications = storageService.getJSON(this.NOTIFICATIONS_KEY, {\n        browser: true,\n        email: false,\n        sound: true\n      })\n    } catch (error) {\n      ErrorMessageService.logError('WatchlistService.loadFromStorage', error, { storageKeys: [this.STORAGE_KEY, this.ALERTS_KEY, this.NOTIFICATIONS_KEY] })\n    }\n  }\n\n  // Save data to storage with proper error handling\n  private saveToStorage(): void {\n    try {\n      const success = storageService.setJSON(this.STORAGE_KEY, this.watchlist) &&\n                     storageService.setJSON(this.ALERTS_KEY, this.priceAlerts) &&\n                     storageService.setJSON(this.NOTIFICATIONS_KEY, this.notifications)\n      \n      if (!success) {\n        ErrorMessageService.logError('WatchlistService.saveToStorage', new Error('Failed to save to storage'), { \n          watchlistSize: this.watchlist.length, \n          alertsCount: Object.keys(this.priceAlerts).length \n        })\n      }\n      \n      this.notifyListeners()\n    } catch (error) {\n      ErrorMessageService.logError('WatchlistService.saveToStorage', error, { watchlistSize: this.watchlist.length, alertsCount: Object.keys(this.priceAlerts).length })\n    }\n  }\n\n  // Request browser notification permission\n  private async requestNotificationPermission(): Promise<void> {\n    if ('Notification' in window && Notification.permission === 'default') {\n      await Notification.requestPermission()\n    }\n  }\n\n  // Add listener for watchlist changes\n  addListener(listener: (watchlist: WatchlistItem[]) => void): void {\n    this.listeners.push(listener)\n  }\n\n  // Remove listener\n  removeListener(listener: (watchlist: WatchlistItem[]) => void): void {\n    this.listeners = this.listeners.filter(l => l !== listener)\n  }\n\n  // Notify all listeners\n  private notifyListeners(): void {\n    this.listeners.forEach(listener => listener([...this.watchlist]))\n  }\n\n  // Add NFT to watchlist\n  async addToWatchlist(nft: NFTAsset): Promise<boolean> {\n    // Check if already in watchlist\n    const existingIndex = this.watchlist.findIndex(item => item.nft.asset_id === nft.asset_id)\n    if (existingIndex !== -1) {\n      return false\n    }\n\n    const watchlistItem: WatchlistItem = {\n      nft,\n      alertType: 'any',\n      addedAt: Date.now(),\n      lastPrice: nft.price ? parseFloat(nft.price) : 0\n    }\n\n    this.watchlist.push(watchlistItem)\n    this.saveToStorage()\n    this.notifyListeners()\n    return true\n  }\n\n  // Remove NFT from watchlist\n  async removeFromWatchlist(assetId: string): Promise<void> {\n    this.watchlist = this.watchlist.filter(item => item.nft.asset_id !== assetId)\n    delete this.priceAlerts[assetId]\n    this.saveToStorage()\n    this.notifyListeners()\n  }\n\n  // Get watchlist\n  async getWatchlist(): Promise<WatchlistItem[]> {\n    return [...this.watchlist]\n  }\n\n  // Check if NFT is in watchlist\n  isInWatchlist(assetId: string): boolean {\n    return this.watchlist.some(item => item.nft.asset_id === assetId)\n  }\n\n  // Set price alert for an NFT\n  async setPriceAlert(assetId: string, alert: Omit<PriceAlert, 'lastTriggered'>): Promise<void> {\n    this.priceAlerts[assetId] = {\n      ...alert,\n      lastTriggered: undefined\n    }\n    this.saveToStorage()\n  }\n\n  // Remove price alert\n  async removePriceAlert(assetId: string): Promise<void> {\n    delete this.priceAlerts[assetId]\n    this.saveToStorage()\n  }\n\n  // Get price alert for an NFT\n  getPriceAlert(assetId: string): PriceAlert | undefined {\n    return this.priceAlerts[assetId]\n  }\n\n  // Update notification settings\n  updateNotificationSettings(settings: Partial<NotificationSettings>): void {\n    this.notifications = { ...this.notifications, ...settings }\n    this.saveToStorage()\n  }\n\n  // Get notification settings\n  getNotificationSettings(): NotificationSettings {\n    return { ...this.notifications }\n  }\n\n  // Circuit breaker methods\n  private isEndpointDisabled(endpoint: string): boolean {\n    const failure = this.endpointFailures[endpoint]\n    if (!failure || !failure.disabled) return false\n    \n    // Check if disable duration has passed\n    if (Date.now() - failure.lastFailure > this.DISABLE_DURATION) {\n      failure.disabled = false\n      failure.count = 0\n      return false\n    }\n    \n    return true\n  }\n\n  private recordEndpointFailure(endpoint: string): void {\n    const now = Date.now()\n    const failure = this.endpointFailures[endpoint] || { count: 0, lastFailure: 0, disabled: false }\n    \n    // Reset count if failure window has passed\n    if (now - failure.lastFailure > this.FAILURE_WINDOW) {\n      failure.count = 0\n    }\n    \n    failure.count++\n    failure.lastFailure = now\n    \n    // Disable endpoint if max failures reached\n    if (failure.count >= this.MAX_FAILURES) {\n      failure.disabled = true\n      log.warn(`Endpoint ${endpoint} disabled due to ${failure.count} failures`, 'WatchlistService.recordEndpointFailure')\n    }\n    \n    this.endpointFailures[endpoint] = failure\n  }\n\n  private recordEndpointSuccess(endpoint: string): void {\n    const failure = this.endpointFailures[endpoint]\n    if (failure) {\n      failure.count = 0\n      failure.disabled = false\n    }\n  }\n\n  private notifyEndpointsDisabled(): void {\n    // Only show notification once every 15 minutes to avoid spam\n    const lastNotification = localStorage.getItem('watchlist_endpoints_disabled_notification')\n    const now = Date.now()\n    \n    if (lastNotification && (now - parseInt(lastNotification)) < 15 * 60 * 1000) {\n      return\n    }\n    \n    localStorage.setItem('watchlist_endpoints_disabled_notification', now.toString())\n    \n    // Dispatch event for UI to handle\n    window.dispatchEvent(new CustomEvent('watchlistEndpointsDisabled', {\n      detail: {\n        message: 'Price monitoring temporarily disabled due to API issues. Will retry automatically.',\n        disabledEndpoints: Object.keys(this.endpointFailures).filter(k => this.endpointFailures[k].disabled),\n        retryTime: Math.max(...Object.values(this.endpointFailures).map(f => f.lastFailure + this.DISABLE_DURATION))\n      }\n    }))\n  }\n\n  // Get endpoint health status for debugging\n  getEndpointStatus(): Record<string, { healthy: boolean, failures: number, disabledUntil?: number }> {\n    const status: Record<string, { healthy: boolean, failures: number, disabledUntil?: number }> = {}\n    \n    for (const [endpoint, failure] of Object.entries(this.endpointFailures)) {\n      status[endpoint] = {\n        healthy: !failure.disabled,\n        failures: failure.count,\n        disabledUntil: failure.disabled ? failure.lastFailure + this.DISABLE_DURATION : undefined\n      }\n    }\n    \n    return status\n  }\n\n  // Start price monitoring\n  private startPriceMonitoring(): void {\n    // Check prices every 3 minutes to reduce API load\n    this.priceCheckInterval = setInterval(() => {\n      this.checkPriceAlerts()\n    }, 3 * 60 * 1000)\n\n    // Initial check after 1 minute\n    setTimeout(() => {\n      this.checkPriceAlerts()\n    }, 60000)\n  }\n\n\n\n  // Stop price monitoring\n  stopPriceMonitoring(): void {\n    if (this.priceCheckInterval) {\n      clearInterval(this.priceCheckInterval)\n      this.priceCheckInterval = null\n    }\n  }\n\n  // Check price alerts with improved error handling and batching\n  private async checkPriceAlerts(): Promise<void> {\n    if (this.watchlist.length === 0) return\n\n    // Check if all endpoints are disabled\n    const allEndpointsDisabled = ['atomichub', 'neftyblocks'].every(endpoint => \n      this.isEndpointDisabled(endpoint)\n    )\n    \n    if (allEndpointsDisabled) {\n      log.warn('All price endpoints are disabled, skipping price check', 'WatchlistService.checkPrices')\n      this.notifyEndpointsDisabled()\n      return\n    }\n\n    try {\n      // Process items in smaller batches with delays to reduce API load\n      const disabledCount = Object.values(this.endpointFailures).filter(f => f.disabled).length\n      const batchSize = disabledCount > 0 ? 2 : 3 // Smaller batches\n      const batches = []\n      \n      for (let i = 0; i < this.watchlist.length; i += batchSize) {\n        batches.push(this.watchlist.slice(i, i + batchSize))\n      }\n\n      for (let i = 0; i < batches.length; i++) {\n        const batch = batches[i]\n        \n        // Add delay between batches to reduce API pressure\n        if (i > 0) {\n          await new Promise(resolve => setTimeout(resolve, 2000)) // 2 second delay\n        }\n        \n        const pricePromises = batch.map(async (item) => {\n          try {\n            const currentPrice = await this.fetchCurrentPrice(item)\n            const priceChange = item.lastPrice > 0 \n              ? ((currentPrice - item.lastPrice) / item.lastPrice) * 100\n              : 0\n            \n            // Update watchlist item\n            item.lastPrice = currentPrice\n            item.priceChange = priceChange\n            \n            // Check if alert should be triggered\n            const alert = this.priceAlerts[item.nft.asset_id]\n            if (alert && alert.enabled && currentPrice > 0) {\n              await this.checkAlertCondition(item, alert, currentPrice)\n            }\n            \n            return item\n          } catch (error) {\n            ErrorMessageService.logError('WatchlistService.checkPriceAlerts.priceCheck', error, { \n              assetId: item.nft.asset_id, \n              nftName: item.nft.name \n            })\n            return item\n          }\n        })\n\n        await Promise.allSettled(pricePromises)\n        \n        // Add longer delay between batches when endpoints are failing\n        if (batches.indexOf(batch) < batches.length - 1) {\n          const delay = disabledCount > 0 ? 2000 : 1000\n          await new Promise(resolve => setTimeout(resolve, delay))\n        }\n      }\n\n      this.saveToStorage()\n    } catch (error) {\n      ErrorMessageService.logError('WatchlistService.checkPriceAlerts', error, { \n        watchlistSize: this.watchlist.length,\n        disabledEndpoints: Object.keys(this.endpointFailures).filter(k => this.endpointFailures[k].disabled)\n      })\n    }\n  }\n\n  // Fetch current price for a watchlist item with caching\n  private async fetchCurrentPrice(item: WatchlistItem): Promise<number> {\n    const assetId = item.nft.asset_id\n    const now = Date.now()\n    \n    // Check cache first\n    const cached = this.priceCache[assetId]\n    if (cached && (now - cached.timestamp) < this.CACHE_DURATION) {\n      return cached.price\n    }\n    \n    // Fetch new price\n    const price = await this.getCurrentPrice(assetId)\n    \n    // Cache the result\n    this.priceCache[assetId] = {\n      price,\n      timestamp: now\n    }\n    \n    return price\n  }\n\n  // Get current price for an NFT using single endpoint (sequential, not parallel)\n  private async getCurrentPrice(assetId: string): Promise<number> {\n    try {\n      // Try endpoints one by one instead of parallel requests to reduce load\n      const endpoints = ['atomichub', 'neftyblocks']\n      \n      for (const endpoint of endpoints) {\n        if (this.isEndpointDisabled(endpoint)) continue\n        \n        try {\n          let price = 0\n          \n          switch (endpoint) {\n            case 'atomichub':\n              price = await this.fetchAtomicHubPrice(assetId)\n              break\n            case 'neftyblocks':\n              price = await this.fetchNeftyBlocksPrice(assetId)\n              break\n          }\n          \n          if (price > 0) {\n            this.recordEndpointSuccess(endpoint)\n            return price\n          }\n        } catch (error) {\n          this.recordEndpointFailure(endpoint)\n          log.warn(`Failed to fetch price from ${endpoint}:`, 'WatchlistService.getCurrentPrice', { endpoint, error })\n          // Continue to next endpoint\n        }\n      }\n      \n      // If all endpoints failed, try template floor price as fallback\n      log.warn('All price endpoints failed, using template floor price fallback', 'WatchlistService.getCurrentPrice')\n      return await this.fetchTemplateFloorPrice(assetId)\n\n    } catch (error) {\n      ErrorMessageService.logError('WatchlistService.getCurrentPrice', error, { assetId })\n      // Return last known price as fallback\n      const item = this.watchlist.find(w => w.nft.asset_id === assetId)\n      return item?.lastPrice || 0\n    }\n  }\n\n  // Fetch price from AtomicHub marketplace\n  private async fetchAtomicHubPrice(assetId: string): Promise<number> {\n    const endpoint = 'atomichub'\n    \n    try {\n      const { apiService } = await import('./api')\n      \n      // Check if asset is currently for sale\n      const url = `${apiService.atomicMarketAPI}/atomicmarket/v1/sales?state=1&asset_id=${assetId}&limit=1`\n      const response = await apiService.fetchWithRetry(url)\n      const data = await response.json()\n      \n      if (data.success && data.data && data.data.length > 0) {\n        const sale = data.data[0]\n        if (sale.price && sale.price.amount) {\n          this.recordEndpointSuccess(endpoint)\n          return parseFloat(sale.price.amount) / Math.pow(10, sale.price.token_precision || 8)\n        }\n      }\n      \n      return 0\n    } catch (error) {\n      this.recordEndpointFailure(endpoint)\n      ErrorMessageService.logError('WatchlistService.fetchAtomicHubPrice', error, { \n        assetId, \n        endpoint,\n        failureCount: this.endpointFailures[endpoint]?.count || 0\n      })\n      return 0\n    }\n  }\n\n  // Fetch price from NeftyBlocks marketplace\n  private async fetchNeftyBlocksPrice(assetId: string): Promise<number> {\n    const endpoint = 'neftyblocks'\n    \n    try {\n      const { apiService } = await import('./api')\n      \n      // Use NeftyBlocks AtomicMarket API endpoint\n      const url = `https://aa-wax-public1.neftyblocks.com/atomicmarket/v1/sales?state=1&asset_id=${assetId}&limit=1`\n      const response = await apiService.fetchWithRetry(url)\n      const data = await response.json()\n      \n      if (data.success && data.data && data.data.length > 0) {\n        const sale = data.data[0]\n        if (sale.price && sale.price.amount) {\n          this.recordEndpointSuccess(endpoint)\n          return parseFloat(sale.price.amount) / Math.pow(10, sale.price.token_precision || 8)\n        }\n      }\n      \n      return 0\n    } catch (error) {\n      this.recordEndpointFailure(endpoint)\n      ErrorMessageService.logError('WatchlistService.fetchNeftyBlocksPrice', error, { \n        assetId, \n        endpoint,\n        failureCount: this.endpointFailures[endpoint]?.count || 0\n      })\n      return 0\n    }\n  }\n\n\n\n  // Fetch template floor price as fallback\n  private async fetchTemplateFloorPrice(assetId: string): Promise<number> {\n    try {\n      const { apiService } = await import('./api')\n      \n      // First get the asset to find its template\n      const assetUrl = `${apiService.atomicAssetsAPI}/atomicassets/v1/assets/${assetId}`\n      const assetResponse = await apiService.fetchWithRetry(assetUrl)\n      const assetData = await assetResponse.json()\n      \n      if (assetData.success && assetData.data && assetData.data.template) {\n        const templateId = assetData.data.template.template_id\n        \n        // Get floor price for this template\n        const floorUrl = `${apiService.atomicMarketAPI}/atomicmarket/v1/sales?state=1&template_id=${templateId}&sort=price&order=asc&limit=1`\n        const floorResponse = await apiService.fetchWithRetry(floorUrl)\n        const floorData = await floorResponse.json()\n        \n        if (floorData.success && floorData.data && floorData.data.length > 0) {\n          const sale = floorData.data[0]\n          if (sale.price && sale.price.amount) {\n            return parseFloat(sale.price.amount) / Math.pow(10, sale.price.token_precision || 8)\n          }\n        }\n      }\n      \n      return 0\n    } catch {\n      return 0\n    }\n  }\n\n  // Check if alert condition is met\n  private async checkAlertCondition(item: WatchlistItem, alert: PriceAlert, currentPrice: number): Promise<void> {\n    const now = Date.now()\n    const cooldownPeriod = 60 * 60 * 1000 // 1 hour cooldown\n    \n    // Check cooldown\n    if (alert.lastTriggered && (now - alert.lastTriggered) < cooldownPeriod) {\n      return\n    }\n\n    let shouldTrigger = false\n    let message = ''\n\n    switch (alert.alertType) {\n      case 'below':\n        if (currentPrice <= alert.targetPrice) {\n          shouldTrigger = true\n          message = `${item.nft.name} price dropped to ${currentPrice.toFixed(2)} WAX (target: ${alert.targetPrice} WAX)`\n        }\n        break\n      case 'above':\n        if (currentPrice >= alert.targetPrice) {\n          shouldTrigger = true\n          message = `${item.nft.name} price rose to ${currentPrice.toFixed(2)} WAX (target: ${alert.targetPrice} WAX)`\n        }\n        break\n      case 'any': {\n        const changePercent = Math.abs(item.priceChange || 0)\n        if (changePercent >= 5) { // 5% change threshold\n          shouldTrigger = true\n          const direction = (item.priceChange || 0) > 0 ? 'increased' : 'decreased'\n          message = `${item.nft.name} price ${direction} by ${changePercent.toFixed(1)}% to ${currentPrice.toFixed(2)} WAX`\n        }\n        break\n      }\n    }\n\n    if (shouldTrigger) {\n      await this.triggerAlert(item, message)\n      alert.lastTriggered = now\n    }\n  }\n\n  // Trigger alert notification\n  private async triggerAlert(item: WatchlistItem, message: string): Promise<void> {\n    // Browser notification\n    if (this.notifications.browser && 'Notification' in window && Notification.permission === 'granted') {\n      new Notification('Price Alert - Pixel Journey', {\n        body: message,\n        icon: item.nft.image || '/logo.png',\n        tag: `price-alert-${item.nft.asset_id}`,\n        requireInteraction: true\n      })\n    }\n\n    // Sound notification\n    if (this.notifications.sound) {\n      this.playNotificationSound()\n    }\n\n    // Send push notification if available\n     try {\n       await pushNotificationService.sendPriceAlert(\n         item.nft.name,\n         `${item.lastPrice} WAX`,\n         message\n       )\n     } catch (error) {\n       log.warn('Failed to send push notification for price alert:', 'WatchlistService.sendPriceAlert', { error })\n     }\n\n    // Dispatch custom event for the UI to handle\n    window.dispatchEvent(new CustomEvent('priceAlert', {\n      detail: { item, message }\n    }))\n  }\n\n  // Play notification sound\n  private playNotificationSound(): void {\n    try {\n      const audio = new Audio('/notification.mp3')\n      audio.volume = 0.3\n      audio.play().catch(error => {\n        log.debug('Could not play notification sound:', 'WatchlistService.playNotificationSound', { error })\n      })\n    } catch (error) {\n      log.debug('Notification sound not available:', 'WatchlistService.playNotificationSound', { error })\n    }\n  }\n\n  // Get watchlist statistics\n  getWatchlistStats(): {\n    totalItems: number\n    activeAlerts: number\n    averagePriceChange: number\n  } {\n    const totalItems = this.watchlist.length\n    const activeAlerts = Object.keys(this.priceAlerts).filter(\n      key => this.priceAlerts[key].enabled\n    ).length\n    \n    const priceChanges = this.watchlist\n      .map(item => item.priceChange || 0)\n      .filter(change => change !== 0)\n    \n    const averagePriceChange = priceChanges.length > 0\n      ? priceChanges.reduce((sum, change) => sum + change, 0) / priceChanges.length\n      : 0\n\n    return {\n      totalItems,\n      activeAlerts,\n      averagePriceChange\n    }\n  }\n\n  // Clear all watchlist data\n  clearWatchlist(): void {\n    this.watchlist = []\n    this.priceAlerts = {}\n    this.saveToStorage()\n  }\n\n  // Subscribe to watchlist changes\n  subscribe(callback: (watchlist: WatchlistItem[]) => void): () => void {\n    this.listeners.push(callback)\n    return () => {\n      const index = this.listeners.indexOf(callback)\n      if (index > -1) {\n        this.listeners.splice(index, 1)\n      }\n    }\n  }\n\n  // Export watchlist data\n  exportWatchlist(): string {\n    return JSON.stringify({\n      watchlist: this.watchlist,\n      priceAlerts: this.priceAlerts,\n      exportedAt: Date.now()\n    }, null, 2)\n  }\n\n  // Import watchlist data\n  importWatchlist(data: string): boolean {\n    try {\n      const parsed = JSON.parse(data)\n      if (parsed.watchlist && Array.isArray(parsed.watchlist)) {\n        this.watchlist = parsed.watchlist\n        this.priceAlerts = parsed.priceAlerts || {}\n        this.saveToStorage()\n        return true\n      }\n      return false\n    } catch (error) {\n      ErrorMessageService.logError('WatchlistService.importWatchlist', error, { dataLength: data.length })\n      return false\n    }\n  }\n}\n\n// Export singleton instance\nexport const watchlistService = new WatchlistService()\nexport default watchlistService","/**\n * @wharfkit/transact-plugin-autocorrect v1.4.0\n * https://github.com/wharfkit/transact-plugin-autocorrect\n *\n * @license\n * Copyright (c) 2021 FFF00 Agents AB & Greymass Inc. All Rights Reserved.\n * \n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n * \n *  1. Redistribution of source code must retain the above copyright notice, this\n *     list of conditions and the following disclaimer.\n * \n *  2. Redistribution in binary form must reproduce the above copyright notice,\n *     this list of conditions and the following disclaimer in the documentation\n *     and/or other materials provided with the distribution.\n * \n *  3. Neither the name of the copyright holder nor the names of its contributors\n *     may be used to endorse or promote products derived from this software without\n *     specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE\n * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED\n * OF THE POSSIBILITY OF SUCH DAMAGE.\n * \n * YOU ACKNOWLEDGE THAT THIS SOFTWARE IS NOT DESIGNED, LICENSED OR INTENDED FOR USE\n * IN THE DESIGN, CONSTRUCTION, OPERATION OR MAINTENANCE OF ANY MILITARY FACILITY.\n */\nimport { Struct, Name, UInt32, Int64, Asset, AbstractTransactPlugin, TransactHookTypes, Action, prependAction } from '@wharfkit/session';\nimport { Resources } from '@wharfkit/resources';\nimport { __decorate } from 'tslib';\n\nfunction getException(response) {\n    if (response.error) {\n        return response.error;\n    }\n    if (response.processed.except) {\n        return response.processed.except;\n    }\n    return null;\n}\n\nlet Powerup = class Powerup extends Struct {\n};\n__decorate([\n    Struct.field(Name)\n], Powerup.prototype, \"payer\", void 0);\n__decorate([\n    Struct.field(Name)\n], Powerup.prototype, \"receiver\", void 0);\n__decorate([\n    Struct.field(UInt32)\n], Powerup.prototype, \"days\", void 0);\n__decorate([\n    Struct.field(Int64)\n], Powerup.prototype, \"net_frac\", void 0);\n__decorate([\n    Struct.field(Int64)\n], Powerup.prototype, \"cpu_frac\", void 0);\n__decorate([\n    Struct.field(Asset)\n], Powerup.prototype, \"max_payment\", void 0);\nPowerup = __decorate([\n    Struct.type('powerup')\n], Powerup);\nlet Buyrambytes = class Buyrambytes extends Struct {\n};\n__decorate([\n    Struct.field(Name)\n], Buyrambytes.prototype, \"payer\", void 0);\n__decorate([\n    Struct.field(Name)\n], Buyrambytes.prototype, \"receiver\", void 0);\n__decorate([\n    Struct.field(UInt32)\n], Buyrambytes.prototype, \"bytes\", void 0);\nBuyrambytes = __decorate([\n    Struct.type('buyrambytes')\n], Buyrambytes);\n\nvar checking$3 = \"Checking transaction\";\nvar fee$3 = {\n\ttitle: \"Accept Transaction Fee?\",\n\tbody: \"Additional resources ({{resource}}) are required for your account to perform this transaction. Would you like to automatically purchase these resources from the network and proceed?\",\n\tcost: \"Cost of {{resource}}\"\n};\nvar resolving$3 = \"Resolving transaction\";\nvar en = {\n\tchecking: checking$3,\n\tfee: fee$3,\n\tresolving: resolving$3\n};\n\nvar checking$2 = \"거래 확인\";\nvar fee$2 = {\n\ttitle: \"거래 수수료를 수락하시겠습니까?\",\n\tbody: \"계정에서 이 거래를 수행하려면 추가 리소스({{resource}})가 필요합니다. 네트워크에서 이러한 리소스를 자동으로 구매하고 계속 진행하시겠습니까?\",\n\tcost: \"{{resource}}의 비용\"\n};\nvar resolving$2 = \"트랜잭션 해결\";\nvar ko = {\n\tchecking: checking$2,\n\tfee: fee$2,\n\tresolving: resolving$2\n};\n\nvar checking$1 = \"正在检查交易\";\nvar fee$1 = {\n\ttitle: \"接受交易费用？\",\n\tbody: \"您的帐户需要其他资源 （{{resource}}） 才能执行此交易。是否要自动从网络购买这些资源并继续？\",\n\tcost: \"{{resource}} 的成本\"\n};\nvar resolving$1 = \"正在解析交易\";\nvar zh_hans = {\n\tchecking: checking$1,\n\tfee: fee$1,\n\tresolving: resolving$1\n};\n\nvar checking = \"正在檢查交易\";\nvar fee = {\n\ttitle: \"接受交易費用？\",\n\tbody: \"您的帳戶需要其他資源 （{{resource}}） 才能執行此交易。是否要自動從網路購買這些資源並繼續？\",\n\tcost: \"{{resource}} 的成本\"\n};\nvar resolving = \"正在解析交易\";\nvar zh_hant = {\n\tchecking: checking,\n\tfee: fee,\n\tresolving: resolving\n};\n\nvar defaultTranslations = {\n    en,\n    ko,\n    'zh-Hans': zh_hans,\n    'zh-Hant': zh_hant,\n};\n\nvar ChainFeatures;\n(function (ChainFeatures) {\n    /** eosio.buyram / eosio.buyrambytes https://github.com/EOSIO/eosio.contracts/blob/master/contracts/eosio.system/src/delegate_bandwidth.cpp#L43 */\n    ChainFeatures[ChainFeatures[\"BuyRAM\"] = 0] = \"BuyRAM\";\n    /** FIO Bundled Transactions https://fio.wiki/knowledge-base/protocol/bundling-and-fees/ */\n    // FIOBundledFees, // NYI\n    /** eosio.powerup https://github.com/EOSIO/eosio.contracts/pull/397 */\n    ChainFeatures[ChainFeatures[\"PowerUp\"] = 1] = \"PowerUp\";\n    /** eosio.rentcpu / eosio.rentnet https://github.com/EOSIO/eosio.contracts/blob/master/contracts/eosio.system/src/powerup.cpp */\n    // REX, // NYI\n    /** eosio.delegatebw https://github.com/EOSIO/eosio.contracts/blob/master/contracts/eosio.system/src/delegate_bandwidth.cpp#L372 */\n    // Staking, // NYI\n})(ChainFeatures || (ChainFeatures = {}));\nconst chains = {\n    // EOS\n    aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906: {\n        features: [ChainFeatures.BuyRAM, ChainFeatures.PowerUp],\n        sampleAccount: 'eosio.reserv',\n        symbol: Asset.Symbol.from('4,EOS'),\n    },\n    // Jungle 4\n    '73e4385a2708e6d7048834fbc1079f2fabb17b3c125b146af438971e90716c4d': {\n        features: [ChainFeatures.BuyRAM, ChainFeatures.PowerUp],\n        sampleAccount: 'eosio.reserv',\n        symbol: Asset.Symbol.from('4,EOS'),\n    },\n    // WAX\n    '1064487b3cd1a897ce03ae5b6a865651747e2e152090f99c1d19d44e01aea5a4': {\n        features: [ChainFeatures.BuyRAM, ChainFeatures.PowerUp],\n        sampleAccount: 'boost.wax',\n        symbol: Asset.Symbol.from('8,WAX'),\n    },\n};\n/** Multiply all resource purchases to provide extra based on inaccurate estimates */\nconst multiplier = 1.5;\nclass TransactPluginAutoCorrect extends AbstractTransactPlugin {\n    constructor() {\n        super(...arguments);\n        this.id = 'transact-plugin-autocorrect';\n        this.translations = defaultTranslations;\n        this.sample = null;\n        this.price = null;\n        this.resources = [];\n        this.iterations = 0;\n    }\n    register(context) {\n        if (!context.ui) {\n            throw new Error('The TransactPluginAutoCorrect plugin requires a UI to be present.');\n        }\n        context.addHook(TransactHookTypes.beforeSign, async (request, context) => this.run(request, context));\n    }\n    async run(request, context) {\n        // Abort if no UI is present\n        if (!context.ui) {\n            return { request };\n        }\n        // Reset internal state between transactions\n        this.price = null;\n        this.resources = [];\n        this.iterations = 0;\n        // Retrieve translation helper from the UI, passing the app ID\n        const t = context.ui.getTranslate(this.id);\n        // Notifify the UI that we are checking the transaction\n        const checkingPromise = context.ui\n            .prompt({\n            title: t('checking', { default: 'Checking transaction' }),\n            body: '',\n            elements: [],\n        })\n            .catch((error) => {\n            // Throw if what we caught was a cancelation\n            if (error) {\n                throw error;\n            }\n            // Otherwise return the original if no error occurred but this was rejected\n            return { request };\n        });\n        // Retrieve account data for the current account\n        const account = await context.client.v1.chain.get_account(context.permissionLevel.actor);\n        // Attempt to correct this transaction\n        const correctedPromise = this.correct(request, context, account);\n        const modified = await Promise.race([checkingPromise, correctedPromise]);\n        // If the request wasn't modified and no price exists, just return\n        if (modified === request && !this.price) {\n            return { request };\n        }\n        // Create unique set of resources that will be purchased\n        const resources = Array.from(new Set(this.resources)).join('/');\n        // Initiate a new cancelable prompt to inform the user of the fee required\n        return context.ui\n            .prompt({\n            title: t('fee.title', { default: 'Accept Transaction Fee?' }),\n            body: t('fee.body', {\n                default: 'Additional resources ({{resource}}) are required for your account to perform this transaction. Would you like to automatically purchase these resources from the network and proceed?',\n                resource: resources,\n            }),\n            elements: [\n                {\n                    type: 'asset',\n                    data: {\n                        label: t('fee.cost', {\n                            default: 'Cost of {{resource}}',\n                            resource: resources,\n                        }),\n                        value: this.price,\n                    },\n                },\n                {\n                    type: 'accept',\n                },\n            ],\n        })\n            .then(() => ({ request: modified }))\n            .catch((error) => {\n            // Throw if what we caught was a cancelation\n            if (error) {\n                throw error;\n            }\n            // Otherwise return the original if no error occurred but this was rejected\n            return { request };\n        });\n    }\n    async correct(request, context, account) {\n        // TODO: Remove this once we are confident it won't create infinite loops against bad APIs\n        // Keep track of how many interations have been done\n        this.iterations++;\n        if (this.iterations > 3) {\n            throw new Error('Too many iterations. Please report this bug if you see it.');\n        }\n        // If the chain is not configured to correct issues or no UI is present, abort.\n        const config = chains[String(context.chain.id)];\n        if (!config || !context.ui) {\n            return request;\n        }\n        // Set instance of resource library\n        const resources = new Resources({\n            api: context.client,\n            sampleAccount: config.sampleAccount,\n        });\n        // Resolve any placeholders and complete the transaction for compute.\n        const resolved = await context.resolve(request);\n        // Call compute_transaction against the resolved transaction to detect any issues.\n        return context.client.v1.chain\n            .compute_transaction(resolved.transaction)\n            .then((response) => {\n            // Extract any exceptions from the response\n            const exception = getException(response);\n            // Handling of exception when no error is thrown\n            if (exception && exception.stack && typeof exception.stack[0] === 'object') {\n                switch (exception.name) {\n                    case 'tx_net_usage_exceeded': {\n                        const { net_usage } = exception.stack[0].data;\n                        const needed = net_usage * multiplier;\n                        if (config.features.includes(ChainFeatures.PowerUp)) {\n                            return this.powerup(context, resolved, account, resources, 0, needed);\n                        }\n                        break;\n                    }\n                    case 'tx_cpu_usage_exceeded': {\n                        const { billed, billable } = exception.stack[0].data;\n                        const needed = (billed - billable) * multiplier;\n                        if (config.features.includes(ChainFeatures.PowerUp)) {\n                            return this.powerup(context, resolved, account, resources, needed, 0);\n                        }\n                        break;\n                    }\n                    case 'ram_usage_exceeded': {\n                        const { available, needs } = exception.stack[0].data;\n                        const needed = (needs - available) * multiplier;\n                        if (config.features.includes(ChainFeatures.BuyRAM)) {\n                            return this.buyram(context, resolved, account, resources, needed);\n                        }\n                        break;\n                    }\n                }\n            }\n            return request;\n        })\n            .catch((response) => {\n            // Extract any exceptions from the response\n            if (response.error) {\n                // Handling of exception when it is thrown\n                switch (response.error.name) {\n                    case 'tx_net_usage_exceeded': {\n                        const [, net_usage] = response.error.details[0].message.match(/transaction net usage is too high: (\\d+) > (\\d+)/);\n                        const needed = Number(net_usage) * multiplier;\n                        if (config.features.includes(ChainFeatures.PowerUp)) {\n                            return this.powerup(context, resolved, account, resources, 0, needed);\n                        }\n                        break;\n                    }\n                    case 'tx_cpu_usage_exceeded': {\n                        const [, cpu_usage] = response.error.details[0].message.match(/billed CPU time \\((\\d+) us\\) is greater than the maximum billable CPU time for the transaction/);\n                        const needed = Number(cpu_usage) * multiplier;\n                        if (config.features.includes(ChainFeatures.PowerUp)) {\n                            return this.powerup(context, resolved, account, resources, needed, 0);\n                        }\n                        break;\n                    }\n                    case 'ram_usage_exceeded': {\n                        const [, , needs, has] = response.error.details[0].message.match(/account (\\w.+) has insufficient ram; needs (\\d+) bytes has (\\d+) bytes/);\n                        const needed = (Number(needs) - Number(has)) * multiplier + 2;\n                        if (config.features.includes(ChainFeatures.BuyRAM)) {\n                            return this.buyram(context, resolved, account, resources, needed);\n                        }\n                        break;\n                    }\n                    default: {\n                        // an unknown error was detected\n                        console.log('unknown error', response);\n                        break;\n                    }\n                }\n            }\n            // Return the request\n            return request;\n        });\n    }\n    async buyram(context, resolved, account, resources, needed) {\n        // Get state of the blockchain and determine RAM price\n        const config = chains[String(context.chain.id)];\n        const ram = await resources.v1.ram.get_state();\n        if (!this.sample) {\n            this.sample = await resources.getSampledUsage();\n        }\n        // Determine price of resources\n        const price = Asset.from(ram.price_per(needed).value, config.symbol);\n        // Keep a running total of the price\n        if (this.price) {\n            this.price.units.add(price.units);\n        }\n        else {\n            this.price = price;\n        }\n        // And which resources are being paid for by this fee\n        this.resources.push('RAM');\n        // TODO: Implement maximum RAM fee to ensure potential bugs don't cause massive fees\n        // How to determine a normal price per network?\n        // const maxFee = 1\n        // if (this.price.value > maxFee) {\n        //     throw new Error('Fee is too high')\n        // }\n        // Create a new buyrambytes action to append\n        const newAction = Action.from({\n            account: 'eosio',\n            name: 'buyrambytes',\n            authorization: [resolved.signer],\n            data: Buyrambytes.from({\n                payer: resolved.signer.actor,\n                receiver: resolved.signer.actor,\n                bytes: needed,\n            }),\n        });\n        // Create a new request based on this full transaction\n        const newRequest = prependAction(resolved.request, newAction);\n        // Attempt to correct the new request\n        return this.correct(newRequest, context, account);\n    }\n    async powerup(context, resolved, account, resources, cpu, net) {\n        // Get state of the blockchain and determine powerup price\n        const config = chains[String(context.chain.id)];\n        const powerup = await resources.v1.powerup.get_state();\n        if (!this.sample) {\n            this.sample = await resources.getSampledUsage();\n        }\n        // If powering up, always set a minimum to avoid API speed variance\n        if (cpu < 2500) {\n            cpu = 2500;\n        }\n        if (net < 10000) {\n            net = 10000;\n        }\n        // Determine price of resources\n        const price = Asset.from(Number(powerup.cpu.price_per(this.sample, cpu)) +\n            Number(powerup.net.price_per(this.sample, net)) * multiplier, config.symbol);\n        // Keep a running total of the price\n        if (this.price) {\n            this.price.units.add(price.units);\n        }\n        else {\n            this.price = price;\n        }\n        // And which resources are being paid for by this fee\n        this.resources.push('CPU', 'NET');\n        // TODO: Implement maximum RAM fee to ensure potential bugs don't cause massive fees\n        // How to determine a normal price per network?\n        // const maxFee = 1\n        // if (this.price.value > maxFee) {\n        //     throw new Error('Fee is too high')\n        // }\n        // Create a new powerup action to append\n        const newAction = Action.from({\n            account: 'eosio',\n            name: 'powerup',\n            authorization: [resolved.signer],\n            data: Powerup.from({\n                payer: resolved.signer.actor,\n                receiver: resolved.signer.actor,\n                days: 1,\n                net_frac: powerup.net.frac(this.sample, net),\n                cpu_frac: powerup.cpu.frac(this.sample, cpu),\n                max_payment: price,\n            }),\n        });\n        // Create a new request based on this full transaction\n        let modifiedRequest = prependAction(resolved.request, newAction);\n        // Determine if the account has enough RAM to powerup\n        const ram_needed = 410; // 405 appears to be the exact amount, but purchase an additional small buffer\n        if (Number(account.ram_quota) - Number(account.ram_usage) < ram_needed) {\n            // Get state of the blockchain and determine RAM price\n            const config = chains[String(context.chain.id)];\n            const ram = await resources.v1.ram.get_state();\n            if (!this.sample) {\n                this.sample = await resources.getSampledUsage();\n            }\n            // Create a new buyrambytes action to append\n            const ramAction = Action.from({\n                account: 'eosio',\n                name: 'buyrambytes',\n                authorization: [resolved.signer],\n                data: Buyrambytes.from({\n                    payer: resolved.signer.actor,\n                    receiver: resolved.signer.actor,\n                    bytes: ram_needed,\n                }),\n            });\n            // Modify the account object to prevent multiple purchases during recurrsion\n            account.ram_quota.add(ram_needed);\n            // Modify the request\n            modifiedRequest = prependAction(modifiedRequest, ramAction);\n            // Determine price of resources\n            const ramPrice = Asset.from(ram.price_per(ram_needed).value, config.symbol);\n            this.price.units.add(ramPrice.units);\n            // Notify that RAM is also being purchased\n            this.resources.push('RAM');\n        }\n        // Attempt to correct the new request\n        return this.correct(modifiedRequest, context, account);\n    }\n}\n\nexport { TransactPluginAutoCorrect };\n//# sourceMappingURL=transact-plugin-autocorrect.m.js.map\n","import { wharfKitService } from './wharfkit'\nimport { log } from './loggingService'\n\n// Transaction Types\nexport type TransactionType = \n  | 'nft_purchase'\n  | 'nft_sale'\n  | 'nft_transfer'\n  | 'nft_listing'\n  | 'nft_cancel_listing'\n  | 'token_transfer'\n  | 'token_receive'\n  | 'crafting'\n  | 'blend'\n  | 'burn'\n  | 'recycle'\n  | 'unpack'\n  | 'auction_bid'\n  | 'auction_create'\n  | 'tokenization'\n  | 'bulk_operation'\n\n// Transaction Status\nexport type TransactionStatus = \n  | 'pending'\n  | 'processing'\n  | 'confirming'\n  | 'success'\n  | 'failed'\n  | 'cancelled'\n\n// Transaction Data Interface\nexport interface TransactionData {\n  id: string\n  type: TransactionType\n  status: TransactionStatus\n  timestamp: number\n  account: string\n  actions: TransactionAction[]\n  metadata?: Record<string, unknown>\n  error?: string\n  transactionId?: string\n  blockNum?: number\n  cpuUsage?: number\n  netUsage?: number\n  retryCount?: number\n  maxRetries?: number\n}\n\n// Transaction Action Interface\nexport interface TransactionAction {\n  account: string\n  name: string\n  authorization: Array<{ actor: string; permission: string }>\n  data: Record<string, unknown>\n}\n\n// Transaction Result Interface\nexport interface TransactionResult {\n  success: boolean\n  transactionId?: string\n  blockNum?: number\n  error?: string\n  cpuUsage?: number\n  netUsage?: number\n}\n\n// Transaction Options\nexport interface TransactionOptions {\n  maxRetries?: number\n  retryDelay?: number\n  timeout?: number\n  skipConfirmation?: boolean\n  metadata?: Record<string, unknown>\n}\n\n// Transaction Event Types\nexport type TransactionEventType = \n  | 'transaction_started'\n  | 'transaction_processing'\n  | 'transaction_confirming'\n  | 'transaction_success'\n  | 'transaction_failed'\n  | 'transaction_cancelled'\n  | 'transaction_retry'\n\n// Transaction Event Interface\nexport interface TransactionEvent {\n  type: TransactionEventType\n  transaction: TransactionData\n  timestamp: number\n}\n\n// Transaction Listener\nexport type TransactionListener = (event: TransactionEvent) => void\n\n/**\n * Centralized Transaction Service\n * Handles all blockchain transactions with consistent state management,\n * error handling, retry logic, and event notifications\n */\nclass TransactionService {\n  private transactions = new Map<string, TransactionData>()\n  private listeners = new Set<TransactionListener>()\n  private retryTimeouts = new Map<string, NodeJS.Timeout>()\n\n  /**\n   * Execute a transaction with full state management\n   */\n  async executeTransaction(\n    type: TransactionType,\n    actions: TransactionAction[],\n    options: TransactionOptions = {}\n  ): Promise<TransactionResult> {\n    const transactionId = this.generateTransactionId()\n    const account = wharfKitService.getAccountName()\n    \n    if (!account) {\n      throw new Error('Wallet not connected')\n    }\n\n    const transaction: TransactionData = {\n      id: transactionId,\n      type,\n      status: 'pending',\n      timestamp: Date.now(),\n      account,\n      actions,\n      metadata: options.metadata,\n      retryCount: 0,\n      maxRetries: options.maxRetries ?? 3\n    }\n\n    // Store transaction and notify listeners\n    this.transactions.set(transactionId, transaction)\n    this.emitEvent('transaction_started', transaction)\n\n    try {\n      // Update status to processing\n      this.updateTransactionStatus(transactionId, 'processing')\n      \n      // Execute the transaction\n      const result = await this.performTransaction(actions, options.timeout)\n      \n      // Update transaction with result\n      transaction.transactionId = result.transactionId\n      transaction.blockNum = result.blockNum\n      transaction.cpuUsage = result.cpuUsage\n      transaction.netUsage = result.netUsage\n      \n      if (result.success) {\n        // Update status to confirming if not skipping confirmation\n        if (!options.skipConfirmation) {\n          this.updateTransactionStatus(transactionId, 'confirming')\n          await this.waitForConfirmation(result.transactionId!)\n        }\n        \n        // Mark as successful\n        this.updateTransactionStatus(transactionId, 'success')\n        \n        log.info('Transaction successful', 'TransactionService', {\n          transactionId: result.transactionId,\n          type,\n          account\n        })\n        \n        return result\n      } else {\n        throw new Error(result.error || 'Transaction failed')\n      }\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error'\n      transaction.error = errorMessage\n      \n      log.error('Transaction failed', 'TransactionService', error instanceof Error ? error : new Error(errorMessage), {\n        transactionId,\n        type,\n        account\n      })\n      \n      // Attempt retry if configured and maxRetries > 0\n      if (transaction.maxRetries! > 0 && transaction.retryCount! < transaction.maxRetries!) {\n        return this.retryTransaction(transactionId, options)\n      } else {\n        this.updateTransactionStatus(transactionId, 'failed')\n        return {\n          success: false,\n          error: errorMessage\n        }\n      }\n    }\n  }\n\n  /**\n   * Retry a failed transaction\n   */\n  private async retryTransaction(\n    transactionId: string,\n    options: TransactionOptions\n  ): Promise<TransactionResult> {\n    const transaction = this.transactions.get(transactionId)\n    if (!transaction) {\n      throw new Error('Transaction not found')\n    }\n\n    transaction.retryCount = (transaction.retryCount || 0) + 1\n    this.emitEvent('transaction_retry', transaction)\n\n    // Wait before retry\n    const retryDelay = options.retryDelay ?? 2000 * transaction.retryCount\n    await new Promise(resolve => {\n      const timeout = setTimeout(resolve, retryDelay)\n      this.retryTimeouts.set(transactionId, timeout)\n    })\n\n    // Remove retry timeout\n    this.retryTimeouts.delete(transactionId)\n\n    // Create new transaction ID for retry to avoid conflicts\n    const newTransactionId = this.generateTransactionId()\n    const newTransaction: TransactionData = {\n      ...transaction,\n      id: newTransactionId,\n      status: 'pending',\n      timestamp: Date.now(),\n      error: undefined,\n      transactionId: undefined,\n      blockNum: undefined,\n      cpuUsage: undefined,\n      netUsage: undefined\n    }\n\n    // Store new transaction\n    this.transactions.set(newTransactionId, newTransaction)\n    this.emitEvent('transaction_started', newTransaction)\n\n    try {\n      // Update status to processing\n      this.updateTransactionStatus(newTransactionId, 'processing')\n      \n      // Execute the transaction\n      const result = await this.performTransaction(transaction.actions, options.timeout)\n      \n      // Update transaction with result\n      newTransaction.transactionId = result.transactionId\n      newTransaction.blockNum = result.blockNum\n      newTransaction.cpuUsage = result.cpuUsage\n      newTransaction.netUsage = result.netUsage\n      \n      if (result.success) {\n        // Update status to confirming if not skipping confirmation\n        if (!options.skipConfirmation) {\n          this.updateTransactionStatus(newTransactionId, 'confirming')\n          await this.waitForConfirmation(result.transactionId!)\n        }\n        \n        // Mark as successful\n        this.updateTransactionStatus(newTransactionId, 'success')\n        \n        log.info('Transaction retry successful', 'TransactionService', {\n          transactionId: result.transactionId,\n          type: transaction.type,\n          account: transaction.account,\n          retryCount: transaction.retryCount\n        })\n        \n        return result\n      } else {\n        throw new Error(result.error || 'Transaction failed')\n      }\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error'\n      newTransaction.error = errorMessage\n      \n      log.error('Transaction retry failed', 'TransactionService', error instanceof Error ? error : new Error(errorMessage), {\n        transactionId: newTransactionId,\n        type: transaction.type,\n        account: transaction.account,\n        retryCount: transaction.retryCount\n      })\n      \n      // Check if we should retry again\n      if (transaction.maxRetries! > 0 && transaction.retryCount! < transaction.maxRetries!) {\n        return this.retryTransaction(transactionId, options)\n      } else {\n        this.updateTransactionStatus(newTransactionId, 'failed')\n        return {\n          success: false,\n          error: errorMessage\n        }\n      }\n    }\n  }\n\n  /**\n   * Cancel a pending transaction\n   */\n  cancelTransaction(transactionId: string): boolean {\n    const transaction = this.transactions.get(transactionId)\n    if (!transaction || transaction.status !== 'pending') {\n      return false\n    }\n\n    // Clear retry timeout if exists\n    const timeout = this.retryTimeouts.get(transactionId)\n    if (timeout) {\n      clearTimeout(timeout)\n      this.retryTimeouts.delete(transactionId)\n    }\n\n    this.updateTransactionStatus(transactionId, 'cancelled')\n    return true\n  }\n\n  /**\n   * Get transaction by ID\n   */\n  getTransaction(transactionId: string): TransactionData | undefined {\n    return this.transactions.get(transactionId)\n  }\n\n  /**\n   * Get all transactions for an account\n   */\n  getTransactionsByAccount(account: string): TransactionData[] {\n    return Array.from(this.transactions.values())\n      .filter(tx => tx.account === account)\n      .sort((a, b) => b.timestamp - a.timestamp)\n  }\n\n  /**\n   * Get transactions by type\n   */\n  getTransactionsByType(type: TransactionType): TransactionData[] {\n    return Array.from(this.transactions.values())\n      .filter(tx => tx.type === type)\n      .sort((a, b) => b.timestamp - a.timestamp)\n  }\n\n  /**\n   * Get pending transactions\n   */\n  getPendingTransactions(): TransactionData[] {\n    return Array.from(this.transactions.values())\n      .filter(tx => ['pending', 'processing', 'confirming'].includes(tx.status))\n      .sort((a, b) => b.timestamp - a.timestamp)\n  }\n\n  /**\n   * Clear old transactions (keep last 100)\n   */\n  clearOldTransactions(): void {\n    const allTransactions = Array.from(this.transactions.values())\n      .sort((a, b) => b.timestamp - a.timestamp)\n    \n    if (allTransactions.length > 100) {\n      const toRemove = allTransactions.slice(100)\n      toRemove.forEach(tx => this.transactions.delete(tx.id))\n    }\n  }\n\n  /**\n   * Add transaction event listener\n   */\n  addListener(listener: TransactionListener): void {\n    this.listeners.add(listener)\n  }\n\n  /**\n   * Remove transaction event listener\n   */\n  removeListener(listener: TransactionListener): void {\n    this.listeners.delete(listener)\n  }\n\n  /**\n   * Clear all listeners\n   */\n  clearListeners(): void {\n    this.listeners.clear()\n  }\n\n  // Private helper methods\n\n  private generateTransactionId(): string {\n    return `tx_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`\n  }\n\n  private updateTransactionStatus(transactionId: string, status: TransactionStatus): void {\n    const transaction = this.transactions.get(transactionId)\n    if (transaction) {\n      transaction.status = status\n      this.emitEvent(`transaction_${status}` as TransactionEventType, transaction)\n    }\n  }\n\n  private emitEvent(type: TransactionEventType, transaction: TransactionData): void {\n    const event: TransactionEvent = {\n      type,\n      transaction,\n      timestamp: Date.now()\n    }\n    \n    this.listeners.forEach(listener => {\n      try {\n        listener(event)\n      } catch (error) {\n        log.error('Transaction listener error', 'TransactionService', error instanceof Error ? error : new Error(String(error)))\n      }\n    })\n  }\n\n  private async performTransaction(\n    actions: TransactionAction[],\n    _timeout?: number\n  ): Promise<TransactionResult> {\n    try {\n      // Use WharfKit service to execute the transaction\n      const result = await wharfKitService.transact(actions)\n      \n      // Extract transaction details from result\n      // Note: This depends on WharfKit's response format\n      if (result && typeof result === 'object') {\n        const txResult = result as any\n        return {\n          success: true,\n          transactionId: txResult.transaction_id || txResult.id,\n          blockNum: txResult.block_num,\n          cpuUsage: txResult.cpu_usage_us,\n          netUsage: txResult.net_usage_words\n        }\n      }\n      \n      return { success: true }\n    } catch (error) {\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Transaction failed'\n      }\n    }\n  }\n\n  private async waitForConfirmation(_transactionId: string): Promise<void> {\n    // Wait for transaction confirmation\n    // This is a simplified implementation - in production you'd want to\n    // poll the blockchain to confirm the transaction was included in a block\n    await new Promise(resolve => setTimeout(resolve, 3000))\n  }\n}\n\n// Export singleton instance\nexport const transactionService = new TransactionService()\nexport default transactionService","import { SessionKit, Session } from '@wharfkit/session'\nimport { WebRenderer } from '@wharfkit/web-renderer'\nimport { WalletPluginAnchor } from '@wharfkit/wallet-plugin-anchor'\nimport { WalletPluginCloudWallet } from '@wharfkit/wallet-plugin-cloudwallet'\nimport { WalletPluginWombat } from '@wharfkit/wallet-plugin-wombat'\nimport { TransactPluginAutoCorrect } from '@wharfkit/transact-plugin-autocorrect'\nimport { APIClient } from '@wharfkit/antelope'\n// Removed unused TransactPluginResourceProvider import\nimport { ErrorMessageService } from './errorMessageService'\nimport { logger } from './loggingService'\nimport { API_ENDPOINTS } from '../config/marketplaceConfig'\nimport { transactionService, type TransactionType } from './transactionService'\nimport { buildPurchaseActions, buildTokenTransferActions } from './transactionBuilders'\nimport type { WalletContextType } from '../contexts/WalletContextDefinition'\n\ninterface TransactionAction {\n  account: string\n  name: string\n  authorization: Array<{\n    actor: string\n    permission: string\n  }>\n  data: Record<string, unknown>\n}\n\ninterface CraftingData {\n  recipe: string\n  quantity: number\n  ingredientAssets: Array<{ templateId: number; assetIds: string[] }>\n  pxjCost: number\n}\n\nclass WharfKitService {\n  private sessionKit: SessionKit | null = null\n  private currentSession: Session | null = null\n  private listeners: ((context: WalletContextType) => void)[] = []\n\n  constructor() {\n    this.initializeSessionKit()\n    this.restoreSession()\n  }\n\n  private initializeSessionKit() {\n    try {\n      const config = {\n        appName: 'PxMarket2',\n        chains: [{\n          id: '1064487b3cd1a897ce03ae5b6a865651747e2e152090f99c1d19d44e01aea5a4',\n          url: API_ENDPOINTS.WAX_CHAIN.GREYMASS\n        }],\n        ui: new WebRenderer(),\n        walletPlugins: [\n          new WalletPluginAnchor(),\n          new WalletPluginCloudWallet(),\n          new WalletPluginWombat()\n        ]\n      }\n\n      const options = {\n        transactPlugins: [\n          new TransactPluginAutoCorrect()\n        ]\n      }\n\n      this.sessionKit = new SessionKit(config, options)\n      // WharfKit SessionKit initialized successfully\n    } catch (error) {\n      ErrorMessageService.logError('WharfKitService.initialize', error)\n    }\n  }\n\n  private async restoreSession() {\n    if (!this.sessionKit) return\n\n    try {\n      const restored = await this.sessionKit.restore()\n      if (restored) {\n        this.currentSession = restored\n        // Session restored for user: this.currentSession.actor\n        this.notifyListeners()\n      }\n    } catch (error) {\n      ErrorMessageService.logError('WharfKitService.restoreSession', error)\n    }\n  }\n\n  async login(): Promise<Session | null> {\n    if (!this.sessionKit) {\n      ErrorMessageService.logError('WharfKitService.login', new Error('SessionKit not initialized'))\n      return null\n    }\n\n    try {\n      const response = await this.sessionKit.login()\n      if (response.session) {\n        this.currentSession = response.session\n        // Login successful for user: this.currentSession.actor\n        this.notifyListeners()\n        return this.currentSession\n      }\n    } catch (error) {\n      ErrorMessageService.logError('WharfKitService.login', error)\n      throw error\n    }\n\n    return null\n  }\n\n  async logout(): Promise<void> {\n    if (!this.sessionKit || !this.currentSession) return\n\n    try {\n      await this.sessionKit.logout(this.currentSession)\n      this.currentSession = null\n      // Logout successful\n      this.notifyListeners()\n    } catch (error) {\n      ErrorMessageService.logError('WharfKitService.logout', error)\n      throw error\n    }\n  }\n\n  isLoggedIn(): boolean {\n    return this.currentSession !== null\n  }\n\n  getSession(): Session | null {\n    return this.currentSession\n  }\n\n  getActor(): string | null {\n    return this.currentSession?.actor?.toString() || null\n  }\n\n  getAccountName(): string | null {\n    return this.currentSession?.actor?.toString() || null\n  }\n\n  getPermission(): string {\n    return this.currentSession?.permission?.toString() || 'active'\n  }\n\n  // Safe session property access helpers\n  static safeGetActor(session: Session | null): string {\n    return session?.actor?.toString() || ''\n  }\n\n  static safeGetPermission(session: Session | null): string {\n    return session?.permission?.toString() || 'active'\n  }\n\n  async transact(actions: TransactionAction[]): Promise<unknown> {\n    if (!this.currentSession) {\n      throw new Error('No active session. Please login first.')\n    }\n\n    try {\n      logger.debug('Sending transaction with actions', 'WHARFKIT', { actionsCount: actions.length })\n      const result = await this.currentSession.transact({\n        actions\n      }, {\n        broadcast: true,\n        expireSeconds: 120\n      })\n      logger.info('Transaction successful', 'WHARFKIT', { result })\n      return result\n    } catch (error) {\n      ErrorMessageService.logError('WharfKitService.transact', error, { actions })\n      throw error\n    }\n  }\n\n  // Purchase NFT transaction\n  async purchaseNFT(saleId: string, price: string): Promise<unknown> {\n    if (!this.currentSession) {\n      throw new Error('Please login to purchase NFTs')\n    }\n\n    const actions = [\n      {\n        account: 'eosio.token',\n        name: 'transfer',\n        authorization: [{\n          actor: this.currentSession?.actor?.toString() || '',\n          permission: 'active'\n        }],\n        data: {\n          from: this.currentSession?.actor?.toString() || '',\n          to: 'atomicmarket',\n          quantity: `${parseFloat(price).toFixed(8)} WAX`,\n          memo: `deposit`\n        }\n      },\n      {\n        account: 'atomicmarket',\n        name: 'purchasesale',\n        authorization: [{\n          actor: this.currentSession?.actor?.toString() || '',\n          permission: 'active'\n        }],\n        data: {\n          buyer: this.currentSession?.actor?.toString() || '',\n          sale_id: saleId,\n          intended_delphi_median: 0,\n          taker_marketplace: 'market.pxj'\n        }\n      }\n    ]\n\n    logger.debug('Crafting transaction actions', 'WHARFKIT', { actionsCount: actions.length })\n    return this.transact(actions)\n  }\n\n  // Batch purchase multiple NFTs in a single transaction\n  async batchPurchaseNFTs(purchases: Array<{saleId: string, price: string}>): Promise<unknown> {\n    if (!this.currentSession) {\n      throw new Error('Please login to purchase NFTs')\n    }\n\n    if (purchases.length === 0) {\n      throw new Error('No items to purchase')\n    }\n\n    const actions: TransactionAction[] = []\n\n    // Calculate total price for the batch\n    const totalPrice = purchases.reduce((sum, purchase) => {\n      return sum + parseFloat(purchase.price)\n    }, 0)\n\n    // Add single transfer action for the total amount\n    actions.push({\n      account: 'eosio.token',\n      name: 'transfer',\n      authorization: [{\n        actor: this.currentSession.actor.toString(),\n        permission: 'active'\n      }],\n      data: {\n        from: this.currentSession.actor.toString(),\n        to: 'atomicmarket',\n        quantity: `${totalPrice.toFixed(8)} WAX`,\n        memo: `deposit`\n      }\n    })\n\n    // Add purchase actions for each NFT\n    purchases.forEach(purchase => {\n      actions.push({\n        account: 'atomicmarket',\n        name: 'purchasesale',\n        authorization: [{\n          actor: this.currentSession?.actor.toString() || '',\n          permission: 'active'\n        }],\n        data: {\n          buyer: this.currentSession?.actor.toString() || '',\n          sale_id: purchase.saleId,\n          intended_delphi_median: 0,\n          taker_marketplace: 'market.pxj'\n        }\n      })\n    })\n\n    return this.transact(actions)\n  }\n\n  // Transfer tokens (PXJ, WAX, etc.)\n  async transferTokens(to: string, amount: string, currency: string = 'PXJ', memo: string = ''): Promise<unknown> {\n    if (!this.currentSession) {\n      throw new Error('Please login to transfer tokens')\n    }\n\n    const actions = buildTokenTransferActions(\n      this.currentSession?.actor?.toString() || '',\n      to,\n      amount,\n      currency,\n      memo\n    )\n\n    logger.debug('Token transfer transaction actions', 'WHARFKIT', { \n      actionsCount: actions.length,\n      to,\n      amount,\n      currency,\n      memo\n    })\n    \n    return this.transact(actions)\n  }\n\n  // Bulk transfer multiple NFTs to a single recipient\n  async bulkTransferNFT(recipient: string, assetIds: string[], memo: string = ''): Promise<unknown> {\n    if (!this.currentSession) {\n      throw new Error('Please login to transfer NFTs')\n    }\n\n    if (!assetIds || assetIds.length === 0) {\n      throw new Error('No assets to transfer')\n    }\n\n    const actions: TransactionAction[] = assetIds.map(assetId => ({\n      account: 'atomicassets',\n      name: 'transfer',\n      authorization: [{\n        actor: this.currentSession?.actor?.toString() || '',\n        permission: 'active'\n      }],\n      data: {\n        from: this.currentSession?.actor?.toString() || '',\n        to: recipient,\n        asset_ids: [assetId],\n        memo: memo\n      }\n    }))\n\n    logger.debug('Bulk NFT transfer transaction actions', 'WHARFKIT', {\n      actionsCount: actions.length,\n      recipient,\n      assetIds: assetIds.length,\n      memo\n    })\n\n    return this.transact(actions)\n  }\n\n  // Execute crafting transaction\n  async executeCraftingTransaction(craftingData: CraftingData): Promise<unknown> {\n    if (!this.currentSession) {\n      throw new Error('No active session')\n    }\n\n    const actions: TransactionAction[] = []\n    const account = this.currentSession?.actor?.toString() || ''\n\n    // Map recipe IDs to craft_ids based on the provided mapping\n    const recipeToCraftId: Record<string, number> = {\n      'craft_green': 1832,\n      'craft_orange': 1833,\n      'craft_purple': 1834,\n      'craft_amber': 1835,\n      'craft_chartreuse': 1836,\n      'craft_violet': 1837,\n      'craft_teal': 1838,\n      'craft_vermillion': 1839,\n      'craft_magenta': 1841\n    }\n\n    const craftId = recipeToCraftId[craftingData.recipe]\n    if (!craftId) {\n      throw new Error(`Unknown recipe: ${craftingData.recipe}`)\n    }\n\n    // Use full recipe cost for each individual craft\n    const individualPxjCost = craftingData.pxjCost\n\n    // Add nft.hive boost action (only once per transaction)\n    actions.push({\n      account: 'nft.hive',\n      name: 'boost',\n      authorization: [{\n        actor: account,\n        permission: 'active'\n      }],\n      data: {\n        booster: account\n      }\n    })\n\n    // Create separate craft actions for each individual craft\n    for (let i = 0; i < craftingData.quantity; i++) {\n      // Get asset IDs for this individual craft\n      const craftAssetIds: string[] = []\n      for (const ingredient of craftingData.ingredientAssets) {\n        // Take the required number of assets for one craft from each ingredient\n        const assetsPerCraft = ingredient.assetIds.length / craftingData.quantity\n        const startIndex = i * assetsPerCraft\n        const endIndex = startIndex + assetsPerCraft\n        craftAssetIds.push(...ingredient.assetIds.slice(startIndex, endIndex))\n      }\n\n      // Transfer ingredient NFTs to crafting contract for this craft\n      if (craftAssetIds.length > 0) {\n        actions.push({\n          account: 'atomicassets',\n          name: 'transfer',\n          authorization: [{\n            actor: account,\n            permission: 'active'\n          }],\n          data: {\n            from: account,\n            to: 'nfthivecraft',\n            asset_ids: craftAssetIds,\n            memo: 'craft'\n          }\n        })\n      }\n\n      // Transfer PXJ for this individual craft\n      if (individualPxjCost > 0) {\n        actions.push({\n          account: 'pixeljourney',\n          name: 'transfer',\n          authorization: [{\n            actor: account,\n            permission: 'active'\n          }],\n          data: {\n            from: account,\n            to: 'nfthivecraft',\n            quantity: `${individualPxjCost.toFixed(8)} PXJ`,\n            memo: 'craft'\n          }\n        })\n      }\n\n      // Execute individual crafting action\n      actions.push({\n        account: 'nfthivecraft',\n        name: 'craft',\n        authorization: [{\n          actor: account,\n          permission: 'active'\n        }],\n        data: {\n          craft_id: craftId,\n          user_name: account,\n          collection_name: 'pixeljourney',\n          timestamp: Date.now().toString(),\n          asset_ids: craftAssetIds,\n          tokens: [`${individualPxjCost.toFixed(8)} PXJ`]\n        }\n      })\n    }\n\n    return this.transact(actions)\n  }\n\n  // Subscribe to wallet state changes\n  subscribe(callback: (context: WalletContextType) => void): () => void {\n    this.listeners.push(callback)\n    \n    // Call immediately with current state\n    callback(this.getWalletContext())\n    \n    // Return unsubscribe function\n    return () => {\n      const index = this.listeners.indexOf(callback)\n      if (index > -1) {\n        this.listeners.splice(index, 1)\n      }\n    }\n  }\n\n  private notifyListeners() {\n    const context = this.getWalletContext()\n    this.listeners.forEach(callback => callback(context))\n  }\n\n  private getWalletContext(): WalletContextType {\n    return {\n      isConnected: this.isLoggedIn(),\n      account: this.getAccountName(),\n      session: this.currentSession,\n      login: this.login.bind(this),\n      logout: this.logout.bind(this),\n      transact: this.transact.bind(this),\n      purchaseNFT: this.purchaseNFT.bind(this),\n      batchPurchaseNFTs: this.batchPurchaseNFTs.bind(this),\n      executeCraftingTransaction: this.executeCraftingTransaction.bind(this),\n      isLoading: false, // WharfKit handles its own loading states\n      executeTransaction: this.executeTransaction.bind(this),\n      getTransaction: undefined, // Optional method not implemented\n      cancelTransaction: undefined, // Optional method not implemented\n      getTransactionHistory: undefined, // Optional method not implemented\n      transferNFT: undefined, // Optional method not implemented\n      bulkTransferNFT: this.bulkTransferNFT.bind(this),\n      transferTokens: this.transferTokens.bind(this)\n    }\n  }\n\n  // Execute transaction using the centralized transaction service\n  async executeTransaction(type: TransactionType, data: any): Promise<string> {\n    if (!this.currentSession) {\n      throw new Error('No active session. Please login first.')\n    }\n\n    try {\n      let actions: TransactionAction[] = []\n      \n      // Build actions based on transaction type\n      switch (type) {\n        case 'nft_purchase':\n          if (data.saleId && data.price) {\n            actions = buildPurchaseActions(this.currentSession?.actor?.toString() || '', data.saleId, data.price)\n          } else {\n            throw new Error('Missing saleId or price for NFT purchase')\n          }\n          break\n        case 'crafting': {\n          // Use existing crafting method and extract transaction ID\n          const craftingResult = await this.executeCraftingTransaction(data)\n          if (craftingResult && typeof craftingResult === 'object' && 'transaction_id' in craftingResult) {\n            return (craftingResult as any).transaction_id\n          }\n          return 'crafting_completed'\n        }\n        default:\n          throw new Error(`Transaction type '${type}' not supported yet`)\n      }\n      \n      // Execute through centralized transaction service\n      const result = await transactionService.executeTransaction(type, actions)\n      \n      if (result.success && result.transactionId) {\n        return result.transactionId\n      } else {\n        throw new Error(result.error || 'Transaction failed')\n      }\n    } catch (error) {\n      logger.error('Transaction execution failed', 'WharfKitService.executeTransaction', error instanceof Error ? error : new Error(String(error)), { type, data })\n      throw error\n    }\n  }\n\n  // Get API client for blockchain queries\n  getAPIClient(): APIClient {\n    return new APIClient({\n      url: API_ENDPOINTS.WAX_CHAIN.GREYMASS\n    })\n  }\n}\n\n// Export both the class and singleton instance\nexport { WharfKitService }\nexport const wharfKitService = new WharfKitService()\nexport default wharfKitService","import type { TransactionAction, TransactionType } from './transactionService'\n\n/**\n * Transaction Action Builders\n * Provides type-safe builders for common transaction types\n */\n\n// Marketplace Purchase Actions\nexport const buildPurchaseActions = (\n  buyer: string,\n  saleId: string,\n  price: string,\n  currency: string = 'WAX',\n  marketContract: string = 'atomicmarket'\n): TransactionAction[] => {\n  const actions: TransactionAction[] = []\n\n  // Transfer payment to marketplace\n  const tokenContract = currency === 'WAX' ? 'eosio.token' : 'token.rwax'\n  actions.push({\n    account: tokenContract,\n    name: 'transfer',\n    authorization: [{ actor: buyer, permission: 'active' }],\n    data: {\n      from: buyer,\n      to: marketContract,\n      quantity: `${price} ${currency}`,\n      memo: 'deposit'\n    }\n  })\n\n  // Purchase the NFT\n  actions.push({\n    account: marketContract,\n    name: 'purchasesale',\n    authorization: [{ actor: buyer, permission: 'active' }],\n    data: {\n      buyer,\n      sale_id: saleId,\n      intended_delphi_median: 0,\n      taker_marketplace: 'market.pxj'\n    }\n  })\n\n  return actions\n}\n\n// NFT Purchase Actions\nexport const buildNFTPurchaseActions = (\n  buyer: string,\n  seller: string,\n  assetId: string,\n  price: string,\n  currency: string = 'WAX'\n): TransactionAction[] => {\n  const actions: TransactionAction[] = []\n\n  // Transfer payment to seller\n  if (currency === 'WAX') {\n    actions.push({\n      account: 'eosio.token',\n      name: 'transfer',\n      authorization: [{ actor: buyer, permission: 'active' }],\n      data: {\n        from: buyer,\n        to: seller,\n        quantity: `${price} WAX`,\n        memo: `Purchase NFT ${assetId}`\n      }\n    })\n  }\n\n  // Transfer NFT to buyer\n  actions.push({\n    account: 'atomicassets',\n    name: 'transfer',\n    authorization: [{ actor: seller, permission: 'active' }],\n    data: {\n      from: seller,\n      to: buyer,\n      asset_ids: [assetId],\n      memo: `Sale to ${buyer}`\n    }\n  })\n\n  return actions\n}\n\n// NFT Transfer Actions\nexport const buildNFTTransferActions = (\n  from: string,\n  to: string,\n  assetIds: string[],\n  memo: string = ''\n): TransactionAction[] => {\n  return [{\n    account: 'atomicassets',\n    name: 'transfer',\n    authorization: [{ actor: from, permission: 'active' }],\n    data: {\n      from,\n      to,\n      asset_ids: assetIds,\n      memo\n    }\n  }]\n}\n\n// Token Transfer Actions\nexport const buildTokenTransferActions = (\n  from: string,\n  to: string,\n  amount: string,\n  currency: string = 'WAX',\n  memo: string = ''\n): TransactionAction[] => {\n  let tokenContract: string\n  \n  switch (currency) {\n    case 'WAX':\n      tokenContract = 'eosio.token'\n      break\n    case 'RWAX':\n      tokenContract = 'token.rwax'\n      break\n    case 'PXJ':\n      tokenContract = 'pixeljourney'\n      break\n    default:\n      tokenContract = 'eosio.token' // Default to WAX contract\n  }\n  \n  return [{\n    account: tokenContract,\n    name: 'transfer',\n    authorization: [{ actor: from, permission: 'active' }],\n    data: {\n      from,\n      to,\n      quantity: `${amount} ${currency}`,\n      memo\n    }\n  }]\n}\n\n// NFT Listing Actions (AtomicMarket)\nexport const buildNFTListingActions = (\n  seller: string,\n  assetId: string,\n  price: string,\n  currency: string = 'WAX',\n  marketContract: string = 'atomicmarket'\n): TransactionAction[] => {\n  return [\n    // Announce sale\n    {\n      account: marketContract,\n      name: 'announcesale',\n      authorization: [{ actor: seller, permission: 'active' }],\n      data: {\n        seller,\n        asset_ids: [assetId],\n        listing_price_per_asset: `${price} ${currency}`,\n        settlement_symbol: `4,${currency}`,\n        maker_marketplace: 'pxmarket'\n      }\n    }\n  ]\n}\n\n// Cancel NFT Listing Actions\nexport const buildCancelListingActions = (\n  seller: string,\n  saleId: string,\n  marketContract: string = 'atomicmarket'\n): TransactionAction[] => {\n  return [{\n    account: marketContract,\n    name: 'cancelsale',\n    authorization: [{ actor: seller, permission: 'active' }],\n    data: {\n      sale_id: saleId\n    }\n  }]\n}\n\n// Crafting Actions\nexport const buildCraftingActions = (\n  crafter: string,\n  schemaName: string,\n  templateId: string,\n  ingredientAssets: string[],\n  craftingContract: string = 'atomicassets'\n): TransactionAction[] => {\n  return [\n    // Burn ingredient assets\n    {\n      account: craftingContract,\n      name: 'burnasset',\n      authorization: [{ actor: crafter, permission: 'active' }],\n      data: {\n        asset_owner: crafter,\n        asset_ids: ingredientAssets\n      }\n    },\n    // Mint new asset\n    {\n      account: craftingContract,\n      name: 'mintasset',\n      authorization: [{ actor: craftingContract, permission: 'active' }],\n      data: {\n        authorized_minter: craftingContract,\n        collection_name: 'pixeljourney',\n        schema_name: schemaName,\n        template_id: templateId,\n        new_asset_owner: crafter,\n        immutable_data: [],\n        mutable_data: [],\n        tokens_to_back: []\n      }\n    }\n  ]\n}\n\n// Blend Actions (NeftyBlocks)\nexport const buildBlendActions = (\n  blender: string,\n  blendId: string,\n  ingredientAssets: string[],\n  blendContract: string = 'blend.nefty'\n): TransactionAction[] => {\n  return [\n    // Transfer assets to blend contract\n    {\n      account: 'atomicassets',\n      name: 'transfer',\n      authorization: [{ actor: blender, permission: 'active' }],\n      data: {\n        from: blender,\n        to: blendContract,\n        asset_ids: ingredientAssets,\n        memo: `blend:${blendId}`\n      }\n    },\n    // Execute blend\n    {\n      account: blendContract,\n      name: 'claimblend',\n      authorization: [{ actor: blender, permission: 'active' }],\n      data: {\n        claimer: blender,\n        blend_id: blendId,\n        asset_ids: ingredientAssets\n      }\n    }\n  ]\n}\n\n// Burn Actions\nexport const buildBurnActions = (\n  owner: string,\n  assetIds: string[]\n): TransactionAction[] => {\n  return [{\n    account: 'atomicassets',\n    name: 'burnasset',\n    authorization: [{ actor: owner, permission: 'active' }],\n    data: {\n      asset_owner: owner,\n      asset_ids: assetIds\n    }\n  }]\n}\n\n// Unpack Actions\nexport const buildUnpackActions = (\n  unpacker: string,\n  packAssetId: string,\n  unpackContract: string = 'atomicpacks'\n): TransactionAction[] => {\n  return [\n    // Transfer pack to unpack contract\n    {\n      account: 'atomicassets',\n      name: 'transfer',\n      authorization: [{ actor: unpacker, permission: 'active' }],\n      data: {\n        from: unpacker,\n        to: unpackContract,\n        asset_ids: [packAssetId],\n        memo: 'unpack'\n      }\n    },\n    // Claim unpacked assets\n    {\n      account: unpackContract,\n      name: 'claimunpack',\n      authorization: [{ actor: unpacker, permission: 'active' }],\n      data: {\n        pack_asset_id: packAssetId,\n        unpack_to: unpacker\n      }\n    }\n  ]\n}\n\n// Auction Bid Actions\nexport const buildAuctionBidActions = (\n  bidder: string,\n  auctionId: string,\n  bidAmount: string,\n  currency: string = 'WAX',\n  auctionContract: string = 'atomicmarket'\n): TransactionAction[] => {\n  const actions: TransactionAction[] = []\n\n  // Transfer bid amount to auction contract\n  const tokenContract = currency === 'WAX' ? 'eosio.token' : 'token.rwax'\n  actions.push({\n    account: tokenContract,\n    name: 'transfer',\n    authorization: [{ actor: bidder, permission: 'active' }],\n    data: {\n      from: bidder,\n      to: auctionContract,\n      quantity: `${bidAmount} ${currency}`,\n      memo: `auction bid ${auctionId}`\n    }\n  })\n\n  // Place bid\n  actions.push({\n    account: auctionContract,\n    name: 'auctionbid',\n    authorization: [{ actor: bidder, permission: 'active' }],\n    data: {\n      bidder,\n      auction_id: auctionId,\n      bid: `${bidAmount} ${currency}`,\n      taker_marketplace: 'pxmarket'\n    }\n  })\n\n  return actions\n}\n\n// Tokenization Actions (RWAX)\nexport const buildTokenizationActions = (\n  tokenizer: string,\n  waxAmount: string,\n  rwaxContract: string = 'token.rwax'\n): TransactionAction[] => {\n  return [\n    // Transfer WAX to RWAX contract\n    {\n      account: 'eosio.token',\n      name: 'transfer',\n      authorization: [{ actor: tokenizer, permission: 'active' }],\n      data: {\n        from: tokenizer,\n        to: rwaxContract,\n        quantity: `${waxAmount} WAX`,\n        memo: 'tokenize'\n      }\n    }\n  ]\n}\n\n// Batch Purchase Actions\nexport const buildBatchPurchaseActions = (\n  buyer: string,\n  purchases: Array<{\n    seller: string\n    assetId: string\n    price: string\n    currency?: string\n  }>\n): TransactionAction[] => {\n  const actions: TransactionAction[] = []\n  \n  // Group by currency and seller for efficient transfers\n  const transfersBySellerAndCurrency = new Map<string, Map<string, string>>()\n  \n  purchases.forEach(({ seller, price, currency = 'WAX' }) => {\n    if (!transfersBySellerAndCurrency.has(seller)) {\n      transfersBySellerAndCurrency.set(seller, new Map())\n    }\n    \n    const sellerTransfers = transfersBySellerAndCurrency.get(seller)!\n    const currentAmount = sellerTransfers.get(currency) || '0'\n    const newAmount = (parseFloat(currentAmount) + parseFloat(price)).toFixed(8)\n    sellerTransfers.set(currency, newAmount)\n  })\n  \n  // Add payment transfers\n  transfersBySellerAndCurrency.forEach((currencies, seller) => {\n    currencies.forEach((amount, currency) => {\n      const tokenContract = currency === 'WAX' ? 'eosio.token' : 'token.rwax'\n      actions.push({\n        account: tokenContract,\n        name: 'transfer',\n        authorization: [{ actor: buyer, permission: 'active' }],\n        data: {\n          from: buyer,\n          to: seller,\n          quantity: `${amount} ${currency}`,\n          memo: 'Batch NFT purchase'\n        }\n      })\n    })\n  })\n  \n  // Add NFT transfers\n  const transfersBySeller = new Map<string, string[]>()\n  purchases.forEach(({ seller, assetId }) => {\n    if (!transfersBySeller.has(seller)) {\n      transfersBySeller.set(seller, [])\n    }\n    transfersBySeller.get(seller)!.push(assetId)\n  })\n  \n  transfersBySeller.forEach((assetIds, seller) => {\n    actions.push({\n      account: 'atomicassets',\n      name: 'transfer',\n      authorization: [{ actor: seller, permission: 'active' }],\n      data: {\n        from: seller,\n        to: buyer,\n        asset_ids: assetIds,\n        memo: `Batch sale to ${buyer}`\n      }\n    })\n  })\n  \n  return actions\n}\n\n/**\n * Transaction Builder Factory\n * Provides a unified interface for building different transaction types\n */\nexport class TransactionBuilder {\n  static nftPurchase(buyer: string, seller: string, assetId: string, price: string, currency?: string) {\n    return {\n      type: 'nft_purchase' as TransactionType,\n      actions: buildNFTPurchaseActions(buyer, seller, assetId, price, currency)\n    }\n  }\n  \n  static nftTransfer(from: string, to: string, assetIds: string[], memo?: string) {\n    return {\n      type: 'nft_transfer' as TransactionType,\n      actions: buildNFTTransferActions(from, to, assetIds, memo)\n    }\n  }\n  \n  static tokenTransfer(from: string, to: string, amount: string, currency?: string, memo?: string) {\n    return {\n      type: 'token_transfer' as TransactionType,\n      actions: buildTokenTransferActions(from, to, amount, currency, memo)\n    }\n  }\n  \n  static nftListing(seller: string, assetId: string, price: string, currency?: string) {\n    return {\n      type: 'nft_listing' as TransactionType,\n      actions: buildNFTListingActions(seller, assetId, price, currency)\n    }\n  }\n  \n  static cancelListing(seller: string, saleId: string) {\n    return {\n      type: 'nft_cancel_listing' as TransactionType,\n      actions: buildCancelListingActions(seller, saleId)\n    }\n  }\n  \n  static crafting(crafter: string, schemaName: string, templateId: string, ingredientAssets: string[]) {\n    return {\n      type: 'crafting' as TransactionType,\n      actions: buildCraftingActions(crafter, schemaName, templateId, ingredientAssets)\n    }\n  }\n  \n  static blend(blender: string, blendId: string, ingredientAssets: string[]) {\n    return {\n      type: 'blend' as TransactionType,\n      actions: buildBlendActions(blender, blendId, ingredientAssets)\n    }\n  }\n  \n  static burn(owner: string, assetIds: string[]) {\n    return {\n      type: 'burn' as TransactionType,\n      actions: buildBurnActions(owner, assetIds)\n    }\n  }\n  \n  static unpack(unpacker: string, packAssetId: string) {\n    return {\n      type: 'unpack' as TransactionType,\n      actions: buildUnpackActions(unpacker, packAssetId)\n    }\n  }\n  \n  static auctionBid(bidder: string, auctionId: string, bidAmount: string, currency?: string) {\n    return {\n      type: 'auction_bid' as TransactionType,\n      actions: buildAuctionBidActions(bidder, auctionId, bidAmount, currency)\n    }\n  }\n  \n  static tokenization(tokenizer: string, waxAmount: string) {\n    return {\n      type: 'tokenization' as TransactionType,\n      actions: buildTokenizationActions(tokenizer, waxAmount)\n    }\n  }\n  \n  static batchPurchase(buyer: string, purchases: Array<{ seller: string; assetId: string; price: string; currency?: string }>) {\n    return {\n      type: 'bulk_operation' as TransactionType,\n      actions: buildBatchPurchaseActions(buyer, purchases)\n    }\n  }\n}\n\nexport default TransactionBuilder","import React from 'react'\nimport { API_ENDPOINTS } from '../config/marketplaceConfig'\n\ninterface MediaRendererProps {\n  imageUrl?: string\n  videoUrl?: string | null\n  alt: string\n  className?: string\n  controls?: boolean\n  muted?: boolean\n  loop?: boolean\n  autoPlay?: boolean\n  loading?: 'lazy' | 'eager'\n  fallbackSrc?: string\n  enableAnimations?: boolean\n}\n\nconst MediaRenderer: React.FC<MediaRendererProps> = React.memo(({\n  imageUrl,\n  videoUrl,\n  alt,\n  className = '',\n  controls = true,\n  muted = true,\n  loop = false,\n  autoPlay = false,\n  loading = 'lazy',\n  enableAnimations = true\n}) => {\n  // Helper function to process URLs (handle IPFS, etc.)\n  const processUrl = (url: string | undefined | null): string | null => {\n    if (!url) return null\n    if (typeof url !== 'string') return null\n    if (url.startsWith('http')) return url\n    if (url.startsWith('Qm')) return `${API_ENDPOINTS.IPFS.GATEWAYS[0]}${url}`\n    return url\n  }\n\n  const processedVideoUrl = processUrl(videoUrl)\n  const processedImageUrl = processUrl(imageUrl)\n  \n  // Create a placeholder for NFTs without images\n  const getPlaceholderSrc = () => {\n    // Create a simple SVG placeholder\n    const svg = `<svg width=\"200\" height=\"200\" xmlns=\"http://www.w3.org/2000/svg\">\n      <rect width=\"200\" height=\"200\" fill=\"#f3f4f6\"/>\n      <text x=\"100\" y=\"90\" text-anchor=\"middle\" font-family=\"Arial\" font-size=\"14\" fill=\"#6b7280\">NFT</text>\n      <text x=\"100\" y=\"110\" text-anchor=\"middle\" font-family=\"Arial\" font-size=\"12\" fill=\"#9ca3af\">No Image</text>\n      <text x=\"100\" y=\"130\" text-anchor=\"middle\" font-family=\"Arial\" font-size=\"10\" fill=\"#d1d5db\">Available</text>\n    </svg>`\n    return `data:image/svg+xml;base64,${btoa(svg)}`\n  }\n  \n  const finalImageUrl = processedImageUrl || getPlaceholderSrc()\n\n  // If we have a video URL and animations are enabled, render video with image as poster\n  if (processedVideoUrl && enableAnimations) {\n    return (\n      <video \n        className={className}\n        controls={controls}\n        muted={muted}\n        loop={loop}\n        autoPlay={autoPlay}\n        poster={processedImageUrl ? processedImageUrl : undefined}\n        onError={(e) => {\n          // If video fails to load, replace with image\n          const target = e.target as HTMLVideoElement\n          const img = document.createElement('img')\n          img.src = finalImageUrl\n          img.alt = alt\n          img.className = className\n          img.loading = loading\n          target.parentNode?.replaceChild(img, target)\n        }}\n      >\n        <source src={processedVideoUrl} type=\"video/mp4\" />\n        <source src={processedVideoUrl} type=\"video/webm\" />\n        Your browser does not support the video tag.\n      </video>\n    )\n  }\n  \n  // If animations are disabled but we have a video, show just the image\n  if (processedVideoUrl && !enableAnimations) {\n    return (\n      <img \n        src={finalImageUrl}\n        alt={alt}\n        className={className}\n        loading={loading}\n        onError={(e) => {\n          // If image fails to load, use placeholder\n          const target = e.target as HTMLImageElement\n          const placeholder = getPlaceholderSrc()\n          if (target.src !== placeholder) {\n            target.src = placeholder\n          }\n        }}\n      />\n    )\n  }\n\n  // Otherwise render image\n  return (\n    <img \n      src={finalImageUrl}\n      alt={alt}\n      className={className}\n      loading={loading}\n      onError={(e) => {\n        // If image fails to load, use placeholder\n        const target = e.target as HTMLImageElement\n        const placeholder = getPlaceholderSrc()\n        if (target.src !== placeholder) {\n          target.src = placeholder\n        }\n      }}\n    />\n  )\n})\n\nMediaRenderer.displayName = 'MediaRenderer'\n\nexport default MediaRenderer","import type { UserBadge } from '../services/badgeService'\n\ninterface ShareImageConfig {\n  width?: number\n  height?: number\n  backgroundColor?: string\n  textColor?: string\n  accentColor?: string\n}\n\ninterface InventoryItem {\n  id: string\n  name: string\n  collection: string\n  rarity: string\n  quantity: number\n  image?: string\n}\n\nclass ShareImageGenerator {\n  private readonly defaultConfig: Required<ShareImageConfig> = {\n    width: 1200,\n    height: 630,\n    backgroundColor: '#1a1a2e',\n    textColor: '#ffffff',\n    accentColor: '#ffd700'\n  }\n\n  /**\n   * Generate share image for achievements\n   */\n  generateAchievementShareImage(\n    badges: UserBadge[],\n    totalBadges: number,\n    legendaryCount: number,\n    username: string,\n    config: ShareImageConfig = {}\n  ): string {\n    const { width, height, textColor, accentColor } = {\n      ...this.defaultConfig,\n      ...config\n    }\n\n    // Get top 3 most prestigious badges\n    const topBadges = badges\n      .filter(b => b.unlockedAt)\n      .sort((a, b) => {\n        const rarityOrder = { legendary: 4, epic: 3, rare: 2, common: 1 }\n        return (rarityOrder[b.rarity || 'common'] || 1) - (rarityOrder[a.rarity || 'common'] || 1)\n      })\n      .slice(0, 3)\n\n    const svg = `\n      <svg width=\"${width}\" height=\"${height}\" xmlns=\"http://www.w3.org/2000/svg\">\n        <defs>\n          <linearGradient id=\"bgGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n            <stop offset=\"0%\" style=\"stop-color:#1a1a2e;stop-opacity:1\" />\n            <stop offset=\"50%\" style=\"stop-color:#16213e;stop-opacity:1\" />\n            <stop offset=\"100%\" style=\"stop-color:#0f3460;stop-opacity:1\" />\n          </linearGradient>\n          <linearGradient id=\"titleGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n            <stop offset=\"0%\" style=\"stop-color:#ffd700;stop-opacity:1\" />\n            <stop offset=\"50%\" style=\"stop-color:#ffed4e;stop-opacity:1\" />\n            <stop offset=\"100%\" style=\"stop-color:#ffd700;stop-opacity:1\" />\n          </linearGradient>\n        </defs>\n        \n        <!-- Background -->\n        <rect width=\"100%\" height=\"100%\" fill=\"url(#bgGradient)\"/>\n        \n        <!-- Header -->\n        <text x=\"${width/2}\" y=\"80\" font-family=\"system-ui, -apple-system, sans-serif\" font-size=\"48\" font-weight=\"bold\" fill=\"url(#titleGradient)\" text-anchor=\"middle\">\n          ${username}'s Achievements\n        </text>\n        \n        <!-- Stats Section -->\n        <g transform=\"translate(${width/2 - 300}, 150)\">\n          <!-- Total Badges -->\n          <rect x=\"0\" y=\"0\" width=\"180\" height=\"120\" rx=\"15\" fill=\"rgba(255,255,255,0.1)\" stroke=\"rgba(255,255,255,0.2)\" stroke-width=\"1\"/>\n          <text x=\"90\" y=\"40\" font-family=\"system-ui\" font-size=\"36\" font-weight=\"bold\" fill=\"${accentColor}\" text-anchor=\"middle\">${totalBadges}</text>\n          <text x=\"90\" y=\"70\" font-family=\"system-ui\" font-size=\"16\" fill=\"#b0b0b0\" text-anchor=\"middle\">Total</text>\n          <text x=\"90\" y=\"90\" font-family=\"system-ui\" font-size=\"16\" fill=\"#b0b0b0\" text-anchor=\"middle\">Badges</text>\n          \n          <!-- Legendary Badges -->\n          <rect x=\"210\" y=\"0\" width=\"180\" height=\"120\" rx=\"15\" fill=\"rgba(255,140,0,0.2)\" stroke=\"#ff8c00\" stroke-width=\"2\"/>\n          <text x=\"300\" y=\"40\" font-family=\"system-ui\" font-size=\"36\" font-weight=\"bold\" fill=\"#ff8c00\" text-anchor=\"middle\">${legendaryCount}</text>\n          <text x=\"300\" y=\"70\" font-family=\"system-ui\" font-size=\"16\" fill=\"#b0b0b0\" text-anchor=\"middle\">Legendary</text>\n          <text x=\"300\" y=\"90\" font-family=\"system-ui\" font-size=\"16\" fill=\"#b0b0b0\" text-anchor=\"middle\">Badges</text>\n          \n          <!-- Progress -->\n          <rect x=\"420\" y=\"0\" width=\"180\" height=\"120\" rx=\"15\" fill=\"rgba(255,255,255,0.1)\" stroke=\"rgba(255,255,255,0.2)\" stroke-width=\"1\"/>\n          <text x=\"510\" y=\"40\" font-family=\"system-ui\" font-size=\"36\" font-weight=\"bold\" fill=\"${accentColor}\" text-anchor=\"middle\">${badges.filter(b => b.progress && !b.unlockedAt).length}</text>\n          <text x=\"510\" y=\"70\" font-family=\"system-ui\" font-size=\"16\" fill=\"#b0b0b0\" text-anchor=\"middle\">In</text>\n          <text x=\"510\" y=\"90\" font-family=\"system-ui\" font-size=\"16\" fill=\"#b0b0b0\" text-anchor=\"middle\">Progress</text>\n        </g>\n        \n        <!-- Top Badges Section -->\n        ${topBadges.length > 0 ? `\n        <text x=\"${width/2}\" y=\"350\" font-family=\"system-ui\" font-size=\"24\" font-weight=\"600\" fill=\"${textColor}\" text-anchor=\"middle\">\n          Featured Achievements\n        </text>\n        \n        <g transform=\"translate(${width/2 - (topBadges.length * 150)}, 380)\">\n          ${topBadges.map((badge, index) => {\n            const x = index * 300\n            const rarityColor = badge.rarity === 'legendary' ? '#ff8c00' : \n                               badge.rarity === 'epic' ? '#a335ee' : \n                               badge.rarity === 'rare' ? '#0070dd' : '#ffd700'\n            return `\n            <g transform=\"translate(${x}, 0)\">\n              <rect x=\"0\" y=\"0\" width=\"280\" height=\"180\" rx=\"15\" fill=\"rgba(255,255,255,0.1)\" stroke=\"${rarityColor}\" stroke-width=\"2\"/>\n              <text x=\"140\" y=\"30\" font-family=\"system-ui\" font-size=\"32\" text-anchor=\"middle\">${badge.icon}</text>\n              <text x=\"140\" y=\"70\" font-family=\"system-ui\" font-size=\"18\" font-weight=\"600\" fill=\"${rarityColor}\" text-anchor=\"middle\">${badge.name}</text>\n              <text x=\"140\" y=\"100\" font-family=\"system-ui\" font-size=\"14\" fill=\"#b0b0b0\" text-anchor=\"middle\">${badge.rarity?.toUpperCase() || 'COMMON'}</text>\n              ${badge.tier ? `<text x=\"140\" y=\"130\" font-family=\"system-ui\" font-size=\"12\" fill=\"#888\" text-anchor=\"middle\">Tier ${badge.tier}</text>` : ''}\n              <text x=\"140\" y=\"160\" font-family=\"system-ui\" font-size=\"10\" fill=\"#666\" text-anchor=\"middle\">${badge.unlockedAt ? new Date(badge.unlockedAt).toLocaleDateString() : ''}</text>\n            </g>\n            `\n          }).join('')}\n        </g>\n        ` : ''}\n        \n        <!-- Footer -->\n        <text x=\"${width/2}\" y=\"${height - 40}\" font-family=\"system-ui\" font-size=\"18\" fill=\"#888\" text-anchor=\"middle\">\n          Pixel Journey Ecosystem • PxMarket\n        </text>\n      </svg>\n    `\n\n    return `data:image/svg+xml;base64,${btoa(svg)}`\n  }\n\n  /**\n   * Generate share image for inventory selection\n   */\n  generateInventoryShareImage(\n    selectedItems: InventoryItem[],\n    totalValue: string,\n    username: string,\n    config: ShareImageConfig = {}\n  ): string {\n    const { width, height, textColor, accentColor } = {\n      ...this.defaultConfig,\n      ...config\n    }\n\n    // Get top 6 items by rarity\n    const topItems = selectedItems\n      .sort((a, b) => {\n        const rarityOrder = { legendary: 4, epic: 3, rare: 2, common: 1 }\n        return (rarityOrder[b.rarity as keyof typeof rarityOrder] || 1) - (rarityOrder[a.rarity as keyof typeof rarityOrder] || 1)\n      })\n      .slice(0, 6)\n\n    const svg = `\n      <svg width=\"${width}\" height=\"${height}\" xmlns=\"http://www.w3.org/2000/svg\">\n        <defs>\n          <linearGradient id=\"bgGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n            <stop offset=\"0%\" style=\"stop-color:#1a1a2e;stop-opacity:1\" />\n            <stop offset=\"50%\" style=\"stop-color:#16213e;stop-opacity:1\" />\n            <stop offset=\"100%\" style=\"stop-color:#0f3460;stop-opacity:1\" />\n          </linearGradient>\n          <linearGradient id=\"titleGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n            <stop offset=\"0%\" style=\"stop-color:#ffd700;stop-opacity:1\" />\n            <stop offset=\"50%\" style=\"stop-color:#ffed4e;stop-opacity:1\" />\n            <stop offset=\"100%\" style=\"stop-color:#ffd700;stop-opacity:1\" />\n          </linearGradient>\n        </defs>\n        \n        <!-- Background -->\n        <rect width=\"100%\" height=\"100%\" fill=\"url(#bgGradient)\"/>\n        \n        <!-- Header -->\n        <text x=\"${width/2}\" y=\"80\" font-family=\"system-ui, -apple-system, sans-serif\" font-size=\"48\" font-weight=\"bold\" fill=\"url(#titleGradient)\" text-anchor=\"middle\">\n          ${username}'s Collection\n        </text>\n        \n        <!-- Stats -->\n        <g transform=\"translate(${width/2 - 200}, 130)\">\n          <rect x=\"0\" y=\"0\" width=\"180\" height=\"100\" rx=\"15\" fill=\"rgba(255,255,255,0.1)\" stroke=\"rgba(255,255,255,0.2)\" stroke-width=\"1\"/>\n          <text x=\"90\" y=\"35\" font-family=\"system-ui\" font-size=\"32\" font-weight=\"bold\" fill=\"${accentColor}\" text-anchor=\"middle\">${selectedItems.length}</text>\n          <text x=\"90\" y=\"60\" font-family=\"system-ui\" font-size=\"16\" fill=\"#b0b0b0\" text-anchor=\"middle\">Selected</text>\n          <text x=\"90\" y=\"80\" font-family=\"system-ui\" font-size=\"16\" fill=\"#b0b0b0\" text-anchor=\"middle\">Items</text>\n          \n          <rect x=\"220\" y=\"0\" width=\"180\" height=\"100\" rx=\"15\" fill=\"rgba(0,212,255,0.2)\" stroke=\"#00d4ff\" stroke-width=\"2\"/>\n          <text x=\"310\" y=\"35\" font-family=\"system-ui\" font-size=\"24\" font-weight=\"bold\" fill=\"#00d4ff\" text-anchor=\"middle\">${totalValue}</text>\n          <text x=\"310\" y=\"60\" font-family=\"system-ui\" font-size=\"16\" fill=\"#b0b0b0\" text-anchor=\"middle\">Total</text>\n          <text x=\"310\" y=\"80\" font-family=\"system-ui\" font-size=\"16\" fill=\"#b0b0b0\" text-anchor=\"middle\">Value</text>\n        </g>\n        \n        <!-- Items Grid -->\n        ${topItems.length > 0 ? `\n        <text x=\"${width/2}\" y=\"290\" font-family=\"system-ui\" font-size=\"24\" font-weight=\"600\" fill=\"${textColor}\" text-anchor=\"middle\">\n          Featured Items\n        </text>\n        \n        <g transform=\"translate(${width/2 - (Math.min(topItems.length, 3) * 120)}, 320)\">\n          ${topItems.slice(0, 3).map((item, index) => {\n            const x = index * 240\n            const rarityColor = item.rarity === 'legendary' ? '#ff8c00' : \n                               item.rarity === 'epic' ? '#a335ee' : \n                               item.rarity === 'rare' ? '#0070dd' : '#ffd700'\n            return `\n            <g transform=\"translate(${x}, 0)\">\n              <rect x=\"0\" y=\"0\" width=\"220\" height=\"160\" rx=\"15\" fill=\"rgba(255,255,255,0.1)\" stroke=\"${rarityColor}\" stroke-width=\"2\"/>\n              <rect x=\"10\" y=\"10\" width=\"60\" height=\"60\" rx=\"8\" fill=\"rgba(0,0,0,0.3)\" stroke=\"${rarityColor}\" stroke-width=\"1\"/>\n              <text x=\"40\" y=\"50\" font-family=\"system-ui\" font-size=\"24\" text-anchor=\"middle\">🎨</text>\n              <text x=\"90\" y=\"30\" font-family=\"system-ui\" font-size=\"16\" font-weight=\"600\" fill=\"${textColor}\">${item.name.length > 15 ? item.name.substring(0, 15) + '...' : item.name}</text>\n              <text x=\"90\" y=\"50\" font-family=\"system-ui\" font-size=\"14\" fill=\"#b0b0b0\">${item.collection}</text>\n              <text x=\"90\" y=\"70\" font-family=\"system-ui\" font-size=\"12\" fill=\"${rarityColor}\">${item.rarity.toUpperCase()}</text>\n              ${item.quantity > 1 ? `<text x=\"200\" y=\"30\" font-family=\"system-ui\" font-size=\"14\" fill=\"${accentColor}\" text-anchor=\"end\">x${item.quantity}</text>` : ''}\n            </g>\n            `\n          }).join('')}\n        </g>\n        \n        ${topItems.length > 3 ? `\n        <g transform=\"translate(${width/2 - (Math.min(topItems.length - 3, 3) * 120)}, 500)\">\n          ${topItems.slice(3, 6).map((item, index) => {\n            const x = index * 240\n            const rarityColor = item.rarity === 'legendary' ? '#ff8c00' : \n                               item.rarity === 'epic' ? '#a335ee' : \n                               item.rarity === 'rare' ? '#0070dd' : '#ffd700'\n            return `\n            <g transform=\"translate(${x}, 0)\">\n              <rect x=\"0\" y=\"0\" width=\"220\" height=\"100\" rx=\"15\" fill=\"rgba(255,255,255,0.1)\" stroke=\"${rarityColor}\" stroke-width=\"2\"/>\n              <rect x=\"10\" y=\"10\" width=\"40\" height=\"40\" rx=\"6\" fill=\"rgba(0,0,0,0.3)\" stroke=\"${rarityColor}\" stroke-width=\"1\"/>\n              <text x=\"30\" y=\"35\" font-family=\"system-ui\" font-size=\"16\" text-anchor=\"middle\">🎨</text>\n              <text x=\"65\" y=\"25\" font-family=\"system-ui\" font-size=\"14\" font-weight=\"600\" fill=\"${textColor}\">${item.name.length > 12 ? item.name.substring(0, 12) + '...' : item.name}</text>\n              <text x=\"65\" y=\"45\" font-family=\"system-ui\" font-size=\"12\" fill=\"${rarityColor}\">${item.rarity.toUpperCase()}</text>\n              ${item.quantity > 1 ? `<text x=\"200\" y=\"25\" font-family=\"system-ui\" font-size=\"12\" fill=\"${accentColor}\" text-anchor=\"end\">x${item.quantity}</text>` : ''}\n            </g>\n            `\n          }).join('')}\n        </g>\n        ` : ''}\n        ` : ''}\n        \n        <!-- Footer -->\n        <text x=\"${width/2}\" y=\"${height - 40}\" font-family=\"system-ui\" font-size=\"18\" fill=\"#888\" text-anchor=\"middle\">\n          Pixel Journey Ecosystem • PxMarket\n        </text>\n      </svg>\n    `\n\n    return `data:image/svg+xml;base64,${btoa(svg)}`\n  }\n\n  /**\n   * Download generated image\n   */\n  downloadImage(dataUrl: string, filename: string): void {\n    const link = document.createElement('a')\n    link.download = filename\n    link.href = dataUrl\n    document.body.appendChild(link)\n    link.click()\n    document.body.removeChild(link)\n  }\n\n  /**\n   * Convert SVG data URL to PNG (requires canvas)\n   */\n  async convertToPNG(svgDataUrl: string, width: number = 1200, height: number = 630): Promise<string> {\n    return new Promise((resolve, reject) => {\n      const img = new Image()\n      img.onload = () => {\n        const canvas = document.createElement('canvas')\n        canvas.width = width\n        canvas.height = height\n        const ctx = canvas.getContext('2d')\n        \n        if (!ctx) {\n          reject(new Error('Could not get canvas context'))\n          return\n        }\n        \n        ctx.drawImage(img, 0, 0, width, height)\n        resolve(canvas.toDataURL('image/png'))\n      }\n      img.onerror = reject\n      img.src = svgDataUrl\n    })\n  }\n}\n\n// Export singleton instance\nexport const shareImageGenerator = new ShareImageGenerator()\n\n// Export utility functions\nexport const generateAchievementShareImage = (\n  badges: UserBadge[],\n  totalBadges: number,\n  legendaryCount: number,\n  username: string,\n  config?: ShareImageConfig\n) => {\n  return shareImageGenerator.generateAchievementShareImage(badges, totalBadges, legendaryCount, username, config)\n}\n\nexport const generateInventoryShareImage = (\n  selectedItems: InventoryItem[],\n  totalValue: string,\n  username: string,\n  config?: ShareImageConfig\n) => {\n  return shareImageGenerator.generateInventoryShareImage(selectedItems, totalValue, username, config)\n}\n\nexport const downloadShareImage = (dataUrl: string, filename: string) => {\n  return shareImageGenerator.downloadImage(dataUrl, filename)\n}\n\nexport const convertShareImageToPNG = (svgDataUrl: string, width?: number, height?: number) => {\n  return shareImageGenerator.convertToPNG(svgDataUrl, width, height)\n}","import React, { useState } from 'react'\nimport { generateAchievementShareImage, generateInventoryShareImage, downloadShareImage, convertShareImageToPNG } from '../utils/shareImageGenerator'\nimport { useNotifications } from '../hooks/useNotifications'\nimport { log } from '../services/loggingService'\nimport type { UserBadge } from '../services/badgeService'\nimport '../css/social-share.css'\n\ninterface InventoryItem {\n  id: string\n  name: string\n  collection: string\n  rarity: string\n  quantity: number\n  image?: string\n}\n\ninterface ShareModalProps {\n  isOpen: boolean\n  onClose: () => void\n  title: string\n  description?: string\n  imageUrl?: string\n  shareUrl: string\n  defaultShareText: string\n  type?: 'nft' | 'collection' | 'template' | 'achievement' | 'inventory'\n  // Achievement-specific props\n  badges?: UserBadge[]\n  totalBadges?: number\n  legendaryCount?: number\n  username?: string\n  // Inventory-specific props\n  selectedItems?: InventoryItem[]\n  totalValue?: string\n}\n\nconst ShareModal: React.FC<ShareModalProps> = ({ \n  isOpen, \n  onClose, \n  title, \n  description, \n  imageUrl, \n  shareUrl, \n  defaultShareText,\n  type = 'nft',\n  badges,\n  totalBadges,\n  legendaryCount,\n  username,\n  selectedItems,\n  totalValue\n}) => {\n  const [copied, setCopied] = useState(false)\n  const [shareText, setShareText] = useState('')\n  const [generatingImage, setGeneratingImage] = useState(false)\n  const { showSuccess } = useNotifications()\n\n  // Generate randomized share messages based on content type\n  const getRandomizedShareText = () => {\n    let messages: string[] = []\n    \n    switch (type) {\n      case 'nft':\n        messages = [\n          `🎨 Check out this amazing NFT: ${title}! ✨`,\n          `🔥 Discovered this incredible ${title} NFT! 🚀`,\n          `✨ Look at this stunning ${title}! NFT art at its finest 🎭`,\n          `🌟 Found a gem! ${title} is absolutely beautiful 💎`,\n          `🎯 This ${title} NFT caught my eye! Amazing artwork 🎨`,\n          `💫 Showcasing ${title} - a true masterpiece! 🖼️`,\n          `🚀 Blown away by this ${title} NFT! ⭐`,\n          `🎪 Step right up and see ${title}! Fantastic NFT art 🎊`\n        ]\n        break\n      case 'collection':\n        messages = [\n          `🏛️ Explore the amazing ${title} collection! 🎨`,\n          `🔥 This ${title} collection is absolutely fire! 🚀`,\n          `✨ Dive into the world of ${title}! Incredible NFT collection 🌟`,\n          `💎 Discovered this gem of a collection: ${title}! 🎭`,\n          `🎯 ${title} collection has some amazing pieces! 🖼️`,\n          `🌈 The ${title} collection is a work of art! ✨`,\n          `🚀 Check out the stunning ${title} collection! ⭐`,\n          `🎪 Welcome to ${title} - an NFT wonderland! 🎊`\n        ]\n        break\n      case 'template':\n        messages = [\n          `🎨 Check out this ${title} template! Perfect for collectors ✨`,\n          `🔥 This ${title} template is incredible! 🚀`,\n          `✨ Found an amazing ${title} template! 🎭`,\n          `🌟 ${title} template - a collector's dream! 💎`,\n          `🎯 This ${title} template caught my attention! 🎨`,\n          `💫 Showcasing the ${title} template! 🖼️`,\n          `🚀 Amazing ${title} template available! ⭐`,\n          `🎪 Don't miss this ${title} template! 🎊`\n        ]\n        break\n      case 'achievement':\n        messages = [\n          `🏆 Just unlocked some amazing achievements! 🎉`,\n          `🔥 Check out my gaming achievements! 🚀`,\n          `✨ Proud of my latest achievements! 🎭`,\n          `🌟 Achievement unlocked! Gaming milestones reached 💎`,\n          `🎯 Showcasing my gaming achievements! 🎨`,\n          `💫 Level up! New achievements earned! 🖼️`,\n          `🚀 Gaming achievements on display! ⭐`,\n          `🎪 Celebrating my gaming milestones! 🎊`\n        ]\n        break\n      default:\n        messages = [defaultShareText]\n    }\n    \n    const randomIndex = Math.floor(Math.random() * messages.length)\n    return messages[randomIndex]\n  }\n  \n  // State for current randomized message\n  const [currentRandomText, setCurrentRandomText] = useState(() => \n    defaultShareText || getRandomizedShareText()\n  )\n  \n  // Use randomized text if no custom defaultShareText provided\n  const finalDefaultText = defaultShareText || currentRandomText\n  \n  // Ensure we have a proper share URL\n  const finalShareUrl = shareUrl || window.location.href\n  \n  // Function to regenerate random message\n  const regenerateMessage = () => {\n    if (!defaultShareText) {\n      setCurrentRandomText(getRandomizedShareText())\n    }\n  }\n\n  if (!isOpen) return null\n\n  const copyToClipboard = async (text: string) => {\n    try {\n      await navigator.clipboard.writeText(text)\n      setCopied(true)\n      setTimeout(() => setCopied(false), 2000)\n    } catch (error) {\n      log.error('Failed to copy to clipboard', 'ShareModal', error as Error, { type, shareText })\n    }\n  }\n\n  const shareToTwitter = () => {\n    const text = shareText || finalDefaultText\n    const hashtags = type === 'collection' ? 'NFTCollection,WAX,PixelJourney' : \n                    type === 'template' ? 'NFTTemplate,WAX,PixelJourney' :\n                    type === 'achievement' ? 'Achievement,Gaming,PixelJourney' :\n                    'NFT,WAX,PixelJourney'\n    const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(finalShareUrl)}&hashtags=${hashtags}`\n    window.open(twitterUrl, '_blank', 'width=550,height=420')\n  }\n\n  const shareToFacebook = () => {\n    const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(finalShareUrl)}`\n    window.open(facebookUrl, '_blank', 'width=550,height=420')\n  }\n\n  const shareToReddit = () => {\n    const text = shareText || finalDefaultText\n    const redditUrl = `https://reddit.com/submit?url=${encodeURIComponent(finalShareUrl)}&title=${encodeURIComponent(text)}`\n    window.open(redditUrl, '_blank', 'width=550,height=420')\n  }\n\n  const shareToDiscord = () => {\n    const text = `${shareText || finalDefaultText}\\n${finalShareUrl}`\n    copyToClipboard(text)\n    showSuccess('Share text copied to clipboard! You can now paste it in Discord.', 'Copied to Clipboard')\n  }\n\n  const shareToTelegram = () => {\n    const text = shareText || finalDefaultText\n    const telegramUrl = `https://t.me/share/url?url=${encodeURIComponent(finalShareUrl)}&text=${encodeURIComponent(text)}`\n    window.open(telegramUrl, '_blank', 'width=550,height=420')\n  }\n\n  const shareViaEmail = () => {\n    const subject = `Check out: ${title}`\n    const body = `${shareText || finalDefaultText}\\n\\nView it here: ${finalShareUrl}`\n    const emailUrl = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`\n    window.location.href = emailUrl\n  }\n\n  const generateAndDownloadShareImage = async () => {\n    if (!username) return\n    \n    try {\n      setGeneratingImage(true)\n      let imageDataUrl: string\n      let filename: string\n      \n      if (type === 'achievement' && badges && totalBadges !== undefined && legendaryCount !== undefined) {\n        imageDataUrl = generateAchievementShareImage(badges, totalBadges, legendaryCount, username)\n        filename = `${username}-achievements-${Date.now()}.svg`\n      } else if (type === 'inventory' && selectedItems && totalValue) {\n        imageDataUrl = generateInventoryShareImage(selectedItems, totalValue, username)\n        filename = `${username}-inventory-${Date.now()}.svg`\n      } else {\n        return\n      }\n      \n      downloadShareImage(imageDataUrl, filename)\n    } catch (error) {\n      log.error('Error generating share image', 'ShareModal', error as Error, { type, username })\n    } finally {\n      setGeneratingImage(false)\n    }\n  }\n\n  const generateAndDownloadPNG = async () => {\n    if (!username) return\n    \n    try {\n      setGeneratingImage(true)\n      let svgDataUrl: string\n      let filename: string\n      \n      if (type === 'achievement' && badges && totalBadges !== undefined && legendaryCount !== undefined) {\n        svgDataUrl = generateAchievementShareImage(badges, totalBadges, legendaryCount, username)\n        filename = `${username}-achievements-${Date.now()}.png`\n      } else if (type === 'inventory' && selectedItems && totalValue) {\n        svgDataUrl = generateInventoryShareImage(selectedItems, totalValue, username)\n        filename = `${username}-inventory-${Date.now()}.png`\n      } else {\n        return\n      }\n      \n      const pngDataUrl = await convertShareImageToPNG(svgDataUrl)\n      downloadShareImage(pngDataUrl, filename)\n    } catch (error) {\n      log.error('Error generating PNG share image', 'ShareModal', error as Error, { type, username })\n    } finally {\n      setGeneratingImage(false)\n    }\n  }\n\n  return (\n    <div className=\"social-share-overlay\" onClick={onClose}>\n      <div className=\"social-share-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"share-header\">\n          <h3>Share {type === 'collection' ? 'Collection' : type === 'template' ? 'Template' : type === 'achievement' ? 'Achievement' : 'NFT'}</h3>\n          <button className=\"close-btn\" onClick={onClose}>\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n\n        <div className=\"share-content\">\n          {imageUrl && (\n            <div className=\"nft-preview share-modal-preview\">\n              <img src={imageUrl} alt={title} className=\"nft-image\" />\n              <div className=\"nft-info\">\n                <h4>{title}</h4>\n                {description && <p>{description}</p>}\n              </div>\n            </div>\n          )}\n\n          <div className=\"share-text-section\">\n            <div className=\"share-text-header\">\n              <label htmlFor=\"share-text\">Customize your message:</label>\n              {!defaultShareText && (\n                <button \n                  className=\"refresh-message-btn\" \n                  onClick={regenerateMessage}\n                  title=\"Generate new random message\"\n                >\n                  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n                  </svg>\n                </button>\n              )}\n            </div>\n            <textarea\n              id=\"share-text\"\n              value={shareText}\n              onChange={(e) => setShareText(e.target.value)}\n              placeholder={finalDefaultText}\n              className=\"share-textarea\"\n              rows={3}\n            />\n          </div>\n\n          <div className=\"share-url-section\">\n            <label>Share URL:</label>\n            <div className=\"url-input-container\">\n              <input\n                type=\"text\"\n                value={finalShareUrl}\n                readOnly\n                className=\"url-input\"\n              />\n              <button\n                className={`copy-btn ${copied ? 'copied' : ''}`}\n                onClick={() => copyToClipboard(finalShareUrl)}\n              >\n                {copied ? (\n                  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                ) : (\n                  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                    <rect x=\"9\" y=\"9\" width=\"13\" height=\"13\" rx=\"2\" ry=\"2\"></rect>\n                    <path d=\"M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1\"></path>\n                  </svg>\n                )}\n                {copied ? 'Copied!' : 'Copy'}\n              </button>\n            </div>\n          </div>\n\n          <div className=\"social-buttons\">\n            <button className=\"social-btn twitter\" onClick={shareToTwitter}>\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z\"/>\n              </svg>\n              Twitter\n            </button>\n\n            <button className=\"social-btn facebook\" onClick={shareToFacebook}>\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\"/>\n              </svg>\n              Facebook\n            </button>\n\n            <button className=\"social-btn reddit\" onClick={shareToReddit}>\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z\"/>\n              </svg>\n              Reddit\n            </button>\n\n            <button className=\"social-btn discord\" onClick={shareToDiscord}>\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.0190 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1568 2.4189Z\"/>\n              </svg>\n              Discord\n            </button>\n\n            <button className=\"social-btn telegram\" onClick={shareToTelegram}>\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z\"/>\n              </svg>\n              Telegram\n            </button>\n\n            <button className=\"social-btn email\" onClick={shareViaEmail}>\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\n              </svg>\n              Email\n            </button>\n          </div>\n\n          {(type === 'achievement' || type === 'inventory') && username && (\n            <div className=\"share-image-section\">\n              <h4>Generate Share Image</h4>\n              <div className=\"image-buttons\">\n                <button \n                  className=\"generate-btn svg\" \n                  onClick={generateAndDownloadShareImage}\n                  disabled={generatingImage}\n                >\n                  {generatingImage ? 'Generating...' : 'Download SVG'}\n                </button>\n                <button \n                  className=\"generate-btn png\" \n                  onClick={generateAndDownloadPNG}\n                  disabled={generatingImage}\n                >\n                  {generatingImage ? 'Generating...' : 'Download PNG'}\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ShareModal","import { apiService } from './api'\r\nimport { wharfKitService } from './wharfkit'\r\nimport { ErrorMessageService } from './errorMessageService'\r\nimport { log } from './loggingService'\r\nimport { API_ENDPOINTS } from '../config/marketplaceConfig'\r\n\r\nexport interface ChatMessage {\r\n  id: string\r\n  sender: string\r\n  message: string\r\n  timestamp: string\r\n  pxjAmount: string\r\n  transactionId: string\r\n  isSponsored: boolean\r\n  collectionTag?: string\r\n  messageType: 'normal' | 'sponsored' | 'premium'\r\n  characterCount: number\r\n}\r\n\r\nexport interface ChatCostInfo {\r\n  baseCost: number\r\n  characterCost: number\r\n  totalCost: number\r\n  hasPixalPFP: boolean\r\n  discount: number\r\n  isSponsored?: boolean\r\n}\r\n\r\nexport interface ChatFilters {\r\n  collection?: string\r\n  minPxjAmount?: number\r\n  maxPxjAmount?: number\r\n  hideSpam?: boolean\r\n  showOnlySponsored?: boolean\r\n}\r\n\r\nexport interface ModerationSettings {\r\n  blacklistedAccounts: string[]\r\n  bannedWords: string[]\r\n  trustedDomains: string[]\r\n  maxMessageLength: number\r\n  minTimeBetweenMessages: number // seconds\r\n}\r\n\r\nclass ChatService {\r\n  private readonly CHAT_ACCOUNT = 'chat.pxj'\r\n  private readonly PXJ_CONTRACT = 'pixeljourney'\r\n  private readonly PXJ_SYMBOL = 'PXJ'\r\n  \r\n  // Pricing constants\r\n  private readonly BASE_COST_PIXAL_HOLDER = 100 // 100 PXJ for Pixal holders\r\n  private readonly BASE_COST_NON_HOLDER = 10000 // 10,000 PXJ for non-holders\r\n  private readonly SPONSORED_COST_PIXAL_HOLDER = 10000 // 1000 PXJ for Pixal holders (10k PXJ)\r\n  private readonly SPONSORED_COST_NON_HOLDER = 25000 // 25000 PXJ for non-holders (25k PXJ)\r\n  \r\n  // Spam prevention\r\n  private readonly MIN_MESSAGE_COST = 100 // 100 PXJ minimum (aligned with holder base cost)\r\n\r\n  \r\n  private messageCache: Map<string, ChatMessage[]> = new Map()\r\n  private userRateLimit: Map<string, number[]> = new Map()\r\n  private blacklistedAccounts: Set<string> = new Set()\r\n  // Removed duplicate bannedWords - now using moderationSettings\r\n  \r\n  private moderationSettings: ModerationSettings = {\r\n    blacklistedAccounts: [],\r\n    bannedWords: ['spam', 'scam', 'hack', 'phishing'],\r\n    trustedDomains: ['wax.io', 'atomichub.io', 'wax.bloks.io', 'pixeljourney.io'],\r\n    maxMessageLength: 240,\r\n    minTimeBetweenMessages: 5\r\n  }\r\n  \r\n  private userLastMessageTime: Map<string, number> = new Map()\r\n  \r\n  /**\r\n   * Calculate the cost to send a message based on length and user privileges\r\n   */\r\n  async calculateMessageCost(message: string, userAccount: string, isSponsored: boolean = false): Promise<ChatCostInfo> {\r\n    const characterCount = message.length\r\n    const hasPixalPFP = await this.checkPixalPFPOwnership(userAccount)\r\n    \r\n    // Handle sponsored messages with fixed pricing\r\n    if (isSponsored) {\r\n      const sponsoredCost = hasPixalPFP ? this.SPONSORED_COST_PIXAL_HOLDER : this.SPONSORED_COST_NON_HOLDER\r\n      const discount = hasPixalPFP ? 60 : 0 // 60% discount for Pixal PFP holders (from 25k to 10k PXJ)\r\n      \r\n      return {\r\n        baseCost: sponsoredCost,\r\n        characterCost: 0,\r\n        totalCost: sponsoredCost,\r\n        hasPixalPFP,\r\n        discount,\r\n        isSponsored: true\r\n      }\r\n    }\r\n    \r\n    const baseCost = hasPixalPFP ? this.BASE_COST_PIXAL_HOLDER : this.BASE_COST_NON_HOLDER\r\n    \r\n    // Improved scaling: cost increases more significantly with character count\r\n    let characterMultiplier = 1\r\n    if (characterCount > 50) {\r\n      characterMultiplier = 1 + (characterCount - 50) / 50 // Increases by 100% per 50 chars\r\n    }\r\n    \r\n    const characterCost = Math.floor(baseCost * (characterMultiplier - 1))\r\n    const totalCost = Math.max(this.MIN_MESSAGE_COST, baseCost + characterCost)\r\n    \r\n    // Cap the maximum cost for holders at 500 PXJ (50000 units)\r\n    const maxCostForHolders = hasPixalPFP ? 50000 : totalCost\r\n    const finalCost = hasPixalPFP ? Math.min(totalCost, maxCostForHolders) : totalCost\r\n    \r\n    const discount = hasPixalPFP ? 99 : 0 // 99% discount for Pixal PFP holders (from 10k to 100 PXJ)\r\n    \r\n    return {\r\n      baseCost,\r\n      characterCost,\r\n      totalCost: finalCost,\r\n      hasPixalPFP,\r\n      discount,\r\n      isSponsored: false\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Check if user owns a Pixal PFP NFT (template 781515)\r\n   */\r\n  private async checkPixalPFPOwnership(userAccount: string): Promise<boolean> {\r\n    try {\r\n      const assets = await apiService.getUserInventory(userAccount)\r\n      if (!assets || assets.length === 0) {\r\n        return false\r\n      }\r\n      \r\n      // Check for Pixal PFP template 781515\r\n      const hasPixalPFP = assets.some(asset => \r\n        asset.template_id === '781515'\r\n      )\r\n      \r\n      return hasPixalPFP\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ChatService.checkPixalPFPOwnership', error, { userAccount })\r\n      return false\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Send a chat message by transferring PXJ with memo\r\n   */\r\n  async sendMessage(\r\n    message: string, \r\n    userAccount: string, \r\n    collectionTag?: string,\r\n    isSponsored: boolean = false\r\n  ): Promise<string> {\r\n    // Enhanced validation and moderation\r\n    this.validateMessageForSending(message, userAccount)\r\n    \r\n    const costInfo = await this.calculateMessageCost(message, userAccount)\r\n    let finalCost = costInfo.totalCost\r\n    let memo = message\r\n    \r\n    // Handle sponsored messages\r\n    if (isSponsored) {\r\n      const hasPixalPFP = await this.checkPixalPFPOwnership(userAccount)\r\n      finalCost = hasPixalPFP ? this.SPONSORED_COST_PIXAL_HOLDER : this.SPONSORED_COST_NON_HOLDER\r\n      memo = `::sponsored:: ${message}`\r\n    }\r\n    \r\n    // Add collection tag if specified\r\n    if (collectionTag) {\r\n      memo = `::col:${collectionTag}:: ${memo}`\r\n    }\r\n    \r\n    // Update last message time for rate limiting\r\n    this.userLastMessageTime.set(userAccount, Date.now())\r\n    \r\n    // Prepare transfer action\r\n    const transferAction = {\r\n      account: this.PXJ_CONTRACT,\r\n      name: 'transfer',\r\n      authorization: [{\r\n        actor: userAccount,\r\n        permission: 'active'\r\n      }],\r\n      data: {\r\n        from: userAccount,\r\n        to: this.CHAT_ACCOUNT,\r\n        quantity: `${(finalCost).toFixed(8)} ${this.PXJ_SYMBOL}`,\r\n        memo: memo\r\n      }\r\n    }\r\n    \r\n    try {\r\n      const result = await wharfKitService.transact([transferAction]) as any\r\n      \r\n      // Extract transaction ID from various possible response formats\r\n      let transactionId: string | null = null\r\n      \r\n      if (result) {\r\n        // Try different possible properties where transaction ID might be stored\r\n        transactionId = result.transaction_id || \r\n                       result.id || \r\n                       result.processed?.id || \r\n                       result.processed?.transaction_id ||\r\n                       (result.response && result.response.transaction_id) ||\r\n                       (result.transaction && result.transaction.id)\r\n      }\r\n      \r\n      if (transactionId) {\r\n        // Update rate limit\r\n        this.updateRateLimit(userAccount)\r\n        \r\n        // Clear cache to force refresh\r\n        this.messageCache.clear()\r\n        \r\n        return transactionId\r\n      } else {\r\n        // Log the actual result structure for debugging\r\n        log.warn('Unexpected transaction result format', 'ChatService.sendMessage', { result })\r\n        throw new Error('Transaction completed but transaction ID not found in response')\r\n      }\r\n    } catch (error) {\r\n      // Only show error if it's actually a transaction failure, not a parsing issue\r\n      if (error instanceof Error && error.message.includes('transaction ID not found')) {\r\n        // This might still be a successful transaction, just with unexpected response format\r\n        log.warn('Transaction may have succeeded but response format was unexpected', 'ChatService.sendMessage', { error })\r\n      }\r\n      ErrorMessageService.logError('ChatService.sendMessage', error, { messageLength: message.length })\r\n      throw new Error(`Failed to send message: ${error instanceof Error ? error.message : 'Unknown error'}`)\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Fetch chat messages from blockchain\r\n   */\r\n  async getMessages(\r\n    filters: ChatFilters = {},\r\n    limit: number = 50,\r\n    offset: number = 0\r\n  ): Promise<ChatMessage[]> {\r\n    const cacheKey = JSON.stringify({ filters, limit, offset })\r\n    \r\n    // Check cache first\r\n    if (this.messageCache.has(cacheKey)) {\r\n      return this.messageCache.get(cacheKey)!\r\n    }\r\n    \r\n    try {\r\n      // Fetch transfers to chat account\r\n      const transfers = await apiService.getAccountTransfers(\r\n        this.CHAT_ACCOUNT,\r\n        this.PXJ_CONTRACT,\r\n        this.PXJ_SYMBOL,\r\n        limit,\r\n        offset\r\n      )\r\n      \r\n      if (!transfers || transfers.length === 0) {\r\n        return []\r\n      }\r\n      \r\n      const messages: ChatMessage[] = []\r\n      \r\n      for (const transfer of transfers) {\r\n        const message = this.parseTransferToMessage(transfer)\r\n        if (message && this.applyFilters(message, filters) && !this.isMessageBlockedByModeration(message)) {\r\n          messages.push(message)\r\n        }\r\n      }\r\n      \r\n      // Sort by timestamp (newest first)\r\n      messages.sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime())\r\n      \r\n      // Cache the results\r\n      this.messageCache.set(cacheKey, messages)\r\n      \r\n      return messages\r\n    } catch (error) {\r\n      ErrorMessageService.logError('ChatService.loadMessages', error)\r\n      return []\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Parse a blockchain transfer into a chat message\r\n   */\r\n  private parseTransferToMessage(transfer: {\r\n    memo?: string\r\n    from: string\r\n    quantity: string\r\n    timestamp: string\r\n    transaction_id: string\r\n  }): ChatMessage | null {\r\n    try {\r\n      const memo = String(transfer.memo || '')\r\n      const sender = transfer.from\r\n      const amount = transfer.quantity\r\n      const timestamp = transfer.timestamp\r\n      const transactionId = transfer.transaction_id\r\n      \r\n      // Skip if sender is blacklisted\r\n      if (this.blacklistedAccounts.has(sender)) {\r\n        return null\r\n      }\r\n      \r\n      // Parse memo for special tags\r\n      let message = memo\r\n      let isSponsored = false\r\n      let collectionTag: string | undefined\r\n      let messageType: 'normal' | 'sponsored' | 'premium' = 'normal'\r\n      \r\n      // Check for sponsored tag\r\n      if (memo.startsWith('::sponsored::')) {\r\n        // Validate that the PXJ amount meets the minimum for sponsored messages\r\n        const pxjAmount = parseFloat(amount.split(' ')[0])\r\n        const minSponsoredAmount = 1000 // 1000 PXJ minimum (10k PXJ in base units)\r\n        \r\n        if (pxjAmount >= minSponsoredAmount) {\r\n          isSponsored = true\r\n          messageType = 'sponsored'\r\n          message = memo.replace('::sponsored::', '').trim()\r\n        } else {\r\n          // If insufficient PXJ for sponsored, treat as normal message but remove the sponsored tag\r\n          message = memo.replace('::sponsored::', '').trim()\r\n        }\r\n      }\r\n      \r\n      // Check for collection tag\r\n      const collectionMatch = memo.match(/::col:([^:]+)::/)\r\n      if (collectionMatch) {\r\n        collectionTag = collectionMatch[1]\r\n        message = message.replace(collectionMatch[0], '').trim()\r\n      }\r\n      \r\n      // Determine message type based on PXJ amount\r\n      const pxjAmount = parseFloat(amount.split(' ')[0])\r\n      if (pxjAmount >= 10) { // 10+ PXJ = premium message\r\n        messageType = 'premium'\r\n      }\r\n      \r\n      return {\r\n        id: `${transactionId}_${sender}`,\r\n        sender,\r\n        message,\r\n        timestamp,\r\n        pxjAmount: amount,\r\n        transactionId,\r\n        isSponsored,\r\n        collectionTag,\r\n        messageType,\r\n        characterCount: message.length\r\n      }\r\n    } catch (error) {\r\n      const errorObj = error instanceof Error ? error : new Error('Failed to parse transfer to message')\r\n      ErrorMessageService.logError('ChatService.parseTransferToMessage', errorObj, {\r\n        transfer: transfer?.transaction_id || 'unknown'\r\n      })\r\n      return null\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Apply filters to messages\r\n   */\r\n  private applyFilters(message: ChatMessage, filters: ChatFilters): boolean {\r\n    // Collection filter\r\n    if (filters.collection && message.collectionTag !== filters.collection) {\r\n      return false\r\n    }\r\n    \r\n    // Minimum PXJ amount filter\r\n    if (filters.minPxjAmount) {\r\n      const amount = parseFloat(message.pxjAmount.split(' ')[0])\r\n      if (amount < filters.minPxjAmount) {\r\n        return false\r\n      }\r\n    }\r\n    \r\n    // Maximum PXJ amount filter\r\n    if (filters.maxPxjAmount) {\r\n      const amount = parseFloat(message.pxjAmount.split(' ')[0])\r\n      if (amount > filters.maxPxjAmount) {\r\n        return false\r\n      }\r\n    }\r\n    \r\n    // Hide spam filter\r\n    if (filters.hideSpam && this.isSpamMessage(message)) {\r\n      return false\r\n    }\r\n    \r\n    // Show only sponsored filter\r\n    if (filters.showOnlySponsored && !message.isSponsored) {\r\n      return false\r\n    }\r\n    \r\n    return true\r\n  }\r\n  \r\n  /**\r\n   * Check if message is spam\r\n   */\r\n  private isSpamMessage(message: ChatMessage): boolean {\r\n    const text = message.message.toLowerCase()\r\n    return this.moderationSettings.bannedWords.some((word: string) => text.includes(word))\r\n  }\r\n  \r\n\r\n  \r\n  /**\r\n   * Update rate limit for user\r\n   */\r\n  private updateRateLimit(userAccount: string): void {\r\n    const now = Date.now()\r\n    const userMessages = this.userRateLimit.get(userAccount) || []\r\n    userMessages.push(now)\r\n    this.userRateLimit.set(userAccount, userMessages)\r\n  }\r\n  \r\n\r\n  \r\n  /**\r\n   * Add account to blacklist\r\n   */\r\n  blacklistAccount(account: string): void {\r\n    this.blacklistedAccounts.add(account)\r\n  }\r\n  \r\n  /**\r\n   * Remove account from blacklist\r\n   */\r\n  unblacklistAccount(account: string): void {\r\n    this.blacklistedAccounts.delete(account)\r\n  }\r\n  \r\n  /**\r\n   * Clear message cache\r\n   */\r\n  clearCache(): void {\r\n    this.messageCache.clear()\r\n  }\r\n  \r\n  /**\r\n   * Get user's avatar URL (Wax profile or Pixal PFP)\r\n   */\r\n  async getUserAvatar(userAccount: string): Promise<string> {\r\n    try {\r\n      // First try to get Pixal PFP\r\n      const inventory = await apiService.getUserInventory(userAccount)\r\n      const pixalAssets = inventory.filter(asset => asset.collection === 'pixeljourney' && asset.schema === 'Pixal')\r\n      if (pixalAssets && pixalAssets.length > 0) {\r\n        const asset = pixalAssets[0]\r\n        if (asset.traits && asset.traits.img && typeof asset.traits.img === 'string') {\r\n          return `${API_ENDPOINTS.IPFS.GATEWAYS[0]}${asset.traits.img.startsWith('Qm') ? asset.traits.img : asset.traits.img}`\r\n        }\r\n      }\r\n      \r\n      // Fallback to default avatar\r\n      return `${API_ENDPOINTS.AVATAR.DICEBEAR}?seed=${userAccount}`\r\n    } catch (error) {\r\n      const errorObj = error instanceof Error ? error : new Error('Failed to get user avatar')\r\n      ErrorMessageService.logError('ChatService.getUserAvatar', errorObj, {\r\n        userAccount\r\n      })\r\n      return `${API_ENDPOINTS.AVATAR.DICEBEAR}?seed=${userAccount}`\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Enhanced message validation for sending\r\n   */\r\n  private validateMessageForSending(message: string, userAccount: string): void {\r\n    // Check if account is blacklisted\r\n    if (this.moderationSettings.blacklistedAccounts.includes(userAccount)) {\r\n      throw new Error('Account is blacklisted from sending messages.')\r\n    }\r\n    \r\n    // Check message length\r\n    if (message.length > this.moderationSettings.maxMessageLength) {\r\n      throw new Error(`Message too long. Maximum ${this.moderationSettings.maxMessageLength} characters allowed.`)\r\n    }\r\n    \r\n    // Check for banned words\r\n    const lowerMessage = message.toLowerCase()\r\n    for (const bannedWord of this.moderationSettings.bannedWords) {\r\n      if (lowerMessage.includes(bannedWord.toLowerCase())) {\r\n        throw new Error('Message contains prohibited content.')\r\n      }\r\n    }\r\n    \r\n    // Check time between messages\r\n    const lastMessageTime = this.userLastMessageTime.get(userAccount)\r\n    if (lastMessageTime) {\r\n      const timeDiff = (Date.now() - lastMessageTime) / 1000\r\n      if (timeDiff < this.moderationSettings.minTimeBetweenMessages) {\r\n        throw new Error(`Please wait ${this.moderationSettings.minTimeBetweenMessages - Math.floor(timeDiff)} more seconds before sending another message.`)\r\n      }\r\n    }\r\n    \r\n    // Verify links against trusted domains\r\n    this.verifyLinksInMessage(message)\r\n  }\r\n  \r\n  /**\r\n   * Check if message is blocked by moderation settings\r\n   */\r\n  private isMessageBlockedByModeration(message: ChatMessage): boolean {\r\n    // Check if sender is blacklisted\r\n    if (this.moderationSettings.blacklistedAccounts.includes(message.sender)) {\r\n      return true\r\n    }\r\n    \r\n    // Check for banned words\r\n    const lowerMessage = message.message.toLowerCase()\r\n    for (const bannedWord of this.moderationSettings.bannedWords) {\r\n      if (lowerMessage.includes(bannedWord.toLowerCase())) {\r\n        return true\r\n      }\r\n    }\r\n    \r\n    return false\r\n  }\r\n  \r\n  /**\r\n   * Verify links in message against trusted domains\r\n   */\r\n  private verifyLinksInMessage(message: string): void {\r\n    const urlRegex = /(https?:\\/\\/[^\\s]+)/g\r\n    const urls = message.match(urlRegex)\r\n    \r\n    if (urls) {\r\n      for (const url of urls) {\r\n        try {\r\n          const urlObj = new URL(url)\r\n          const domain = urlObj.hostname.toLowerCase()\r\n          \r\n          // Check if domain is in trusted list\r\n          const isTrusted = this.moderationSettings.trustedDomains.some(trustedDomain => \r\n            domain === trustedDomain.toLowerCase() || domain.endsWith('.' + trustedDomain.toLowerCase())\r\n          )\r\n          \r\n          if (!isTrusted) {\r\n            throw new Error(`Links to ${domain} are not allowed. Only trusted domains are permitted.`)\r\n          }\r\n        } catch (error) {\r\n          if (error instanceof Error && error.message.includes('not allowed')) {\r\n            throw error\r\n          }\r\n          throw new Error('Invalid URL detected in message.')\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Update moderation settings\r\n   */\r\n  updateModerationSettings(settings: Partial<ModerationSettings>): void {\r\n    this.moderationSettings = { ...this.moderationSettings, ...settings }\r\n  }\r\n  \r\n  /**\r\n   * Get current moderation settings\r\n   */\r\n  getModerationSettings(): ModerationSettings {\r\n    return { ...this.moderationSettings }\r\n  }\r\n}\r\n\r\nexport const chatService = new ChatService()\r\nexport default chatService","import React, { useState, useEffect, useRef, useCallback } from 'react'\nimport { useWallet } from '../hooks/useWallet'\nimport { useNotifications } from '../hooks/useNotifications'\nimport { chatService, type ChatMessage, type ChatCostInfo } from '../services/chatService'\nimport { formatSafeMarkdown } from '../utils/sanitize'\nimport { WharfKitService } from '../services/wharfkit'\nimport type { NFTAsset } from '../services/api'\nimport '../css/listing-chat-modal.css'\n\ninterface ListingChatModalProps {\n  isOpen: boolean\n  onClose: () => void\n  nft: NFTAsset\n}\n\nexport const ListingChatModal: React.FC<ListingChatModalProps> = ({ isOpen, onClose, nft }) => {\n  const { account, session } = useWallet()\n  const { showSuccess, showError } = useNotifications()\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n  \n  const [messages, setMessages] = useState<ChatMessage[]>([])\n  const [newMessage, setNewMessage] = useState('')\n  const [isLoading, setIsLoading] = useState(false)\n  const [isSending, setIsSending] = useState(false)\n  const [costInfo, setCostInfo] = useState<ChatCostInfo | null>(null)\n  const [showPriceInfo, setShowPriceInfo] = useState(false)\n  \n  // Create listing-specific tag\n  const listingTag = `listing:${nft.sale_id || nft.asset_id}`\n  \n  const scrollToBottom = useCallback(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })\n  }, [])\n  \n  const loadMessages = useCallback(async (refresh = false) => {\n    if (!refresh && messages.length > 0) return\n    \n    setIsLoading(true)\n    try {\n      // Load messages with listing-specific filter\n      const listingMessages = await chatService.getMessages({\n        collection: listingTag,\n        hideSpam: true\n      }, 50)\n      \n      setMessages(listingMessages)\n    } catch (error) {\n      console.error('Error loading listing messages:', error)\n      showError('Failed to load messages')\n    } finally {\n      setIsLoading(false)\n    }\n  }, [listingTag, messages.length, showError])\n  \n  const updateCostInfo = useCallback(async () => {\n    if (!account || !newMessage.trim()) {\n      setCostInfo(null)\n      return\n    }\n    \n    try {\n      const cost = await chatService.calculateMessageCost(newMessage, account)\n      setCostInfo(cost)\n    } catch (error) {\n      console.error('Error calculating cost:', error)\n    }\n  }, [account, newMessage])\n  \n  const sendMessage = async () => {\n    if (!account || !newMessage.trim() || !session) {\n      showError('Please connect your wallet to send messages')\n      return\n    }\n    \n    if (!nft.seller) {\n      showError('Seller information not available')\n      return\n    }\n    \n    if (nft.seller === WharfKitService.safeGetActor(session)) {\n      showError('You cannot message yourself')\n      return\n    }\n    \n    setIsSending(true)\n    \n    try {\n      // Format message with listing tag and seller reference\n      const messageWithTags = `${listingTag} :${nft.seller}: ${newMessage.trim()}`\n      \n      const txId = await chatService.sendMessage(\n        messageWithTags,\n        account\n      )\n      \n      showSuccess('Message sent!', `Transaction: ${txId.substring(0, 8)}...`)\n      setNewMessage('')\n      setCostInfo(null)\n      \n      // Refresh messages after a short delay\n      setTimeout(() => {\n        loadMessages(true)\n      }, 2000)\n      \n    } catch (error) {\n      console.error('Error sending message:', error)\n      \n      // Check if this might be a successful transaction with unexpected response format\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error'\n      if (errorMessage.includes('transaction ID not found')) {\n        showError(\n          'Message Status Unclear', \n          'Your message may have been sent successfully. Please check your transaction history or refresh the chat to confirm.'\n        )\n      } else {\n        showError('Failed to send message', errorMessage)\n      }\n    } finally {\n      setIsSending(false)\n    }\n  }\n  \n  // Load messages when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      loadMessages()\n    }\n  }, [isOpen, loadMessages])\n  \n  // Update cost info when message changes\n  useEffect(() => {\n    const debounceTimer = setTimeout(updateCostInfo, 300)\n    return () => clearTimeout(debounceTimer)\n  }, [updateCostInfo])\n  \n  // Scroll to bottom when new messages arrive\n  useEffect(() => {\n    scrollToBottom()\n  }, [messages, scrollToBottom])\n  \n  // Handle escape key to close modal\n  useEffect(() => {\n    const handleEscape = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        onClose()\n      }\n    }\n    \n    if (isOpen) {\n      document.addEventListener('keydown', handleEscape)\n      return () => document.removeEventListener('keydown', handleEscape)\n    }\n  }, [isOpen, onClose])\n  \n  if (!isOpen) return null\n  \n  return (\n    <div className=\"listing-chat-modal-backdrop\" onClick={onClose}>\n      <div className=\"listing-chat-modal\" onClick={(e) => e.stopPropagation()}>\n        {/* Header */}\n        <div className=\"listing-chat-header\">\n          <div className=\"listing-chat-header-left\">\n            <div className=\"listing-info\">\n              <img \n                src={nft.image || '/placeholder-nft.png'} \n                alt={nft.name}\n                className=\"listing-nft-image\"\n              />\n              <div className=\"listing-details\">\n                <h3 className=\"listing-title\">{nft.name}</h3>\n                <p className=\"listing-seller\">Seller: {nft.seller}</p>\n                {nft.price && (\n                  <p className=\"listing-price\">{nft.price}</p>\n                )}\n              </div>\n            </div>\n          </div>\n          <div className=\"listing-chat-header-right\">\n            <button \n              className=\"chat_btn chat_btn--icon\"\n              onClick={() => loadMessages(true)}\n              disabled={isLoading}\n              title=\"Refresh messages\"\n            >\n              <span className={`chat_refresh-icon ${isLoading ? 'chat_refresh-icon--spinning' : ''}`}>🔄</span>\n            </button>\n            <button \n              className=\"chat_btn chat_btn--icon\"\n              onClick={onClose}\n              title=\"Close chat\"\n            >\n              ✕\n            </button>\n          </div>\n        </div>\n        \n        {/* Messages */}\n        <div className=\"listing-chat-messages\">\n          {isLoading && messages.length === 0 ? (\n            <div className=\"chat_loading\">Loading messages...</div>\n          ) : messages.length === 0 ? (\n            <div className=\"chat_empty\">\n              <p>No messages yet for this listing.</p>\n              <p>Be the first to start the conversation!</p>\n            </div>\n          ) : (\n            messages.map((message) => (\n              <div key={message.id} className={`chat_message chat_message--${message.messageType || 'normal'}`}>\n                <div className=\"chat_message-header\">\n                  <div className=\"chat_message-avatar\">\n                    <img \n                      src={`https://wax.atomichub.io/v1/accounts/${message.sender}/avatar`}\n                      alt={message.sender}\n                      className=\"chat_avatar\"\n                      onError={(e) => {\n                        const target = e.target as HTMLImageElement\n                        target.src = '/default-avatar.png'\n                      }}\n                    />\n                  </div>\n                  <div className=\"chat_message-info\">\n                    <span className=\"chat_sender\">{message.sender}</span>\n                    <span className=\"chat_timestamp\">\n                      {new Date(message.timestamp).toLocaleString()}\n                    </span>\n                    {message.pxjAmount && (\n                      <span className=\"chat_amount\">{message.pxjAmount}</span>\n                    )}\n                  </div>\n                  <div className=\"chat_message-actions\">\n                    {message.transactionId && (\n                      <a \n                        href={`https://waxblock.io/transaction/${message.transactionId}`}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"chat_tx-link\"\n                        title=\"View transaction\"\n                      >\n                        🔗\n                      </a>\n                    )}\n                  </div>\n                </div>\n                <div \n                  className=\"chat_message-content\"\n                  dangerouslySetInnerHTML={{ __html: formatSafeMarkdown(message.message) }}\n                />\n              </div>\n            ))\n          )}\n          <div ref={messagesEndRef} />\n        </div>\n        \n        {/* Input Section */}\n        <div className=\"listing-chat-input-section\">\n          {costInfo && (\n            <div className=\"chat_cost-info\">\n              <div className=\"chat_cost-display\">\n                <span>Message Cost: <span className=\"chat_cost-amount\">{(costInfo.totalCost / 10000).toFixed(4)} PXJ</span></span>\n                <button \n                  className=\"chat_info-btn\"\n                  onClick={() => setShowPriceInfo(!showPriceInfo)}\n                  title=\"View price breakdown\"\n                >\n                  ℹ️\n                </button>\n              </div>\n              {costInfo.hasPixalPFP && (\n                <span className=\"chat_discount\">Pixal PFP Discount: {costInfo.discount}%</span>\n              )}\n              <span className=\"chat_char-count\">\n                {newMessage.length}/240 chars\n              </span>\n              {showPriceInfo && (\n                <div className=\"chat_price-tooltip\">\n                  <div className=\"chat_price-content\">\n                    <h4>Price Breakdown</h4>\n                    <div className=\"price-factor\">\n                      <span>Base Cost:</span>\n                      <span>{(costInfo.baseCost / 10000).toFixed(4)} PXJ</span>\n                    </div>\n                    <div className=\"price-factor\">\n                      <span>Character Cost ({newMessage.length} chars):</span>\n                      <span>{((costInfo.totalCost - costInfo.baseCost) / 10000).toFixed(4)} PXJ</span>\n                    </div>\n                    {costInfo.hasPixalPFP && (\n                      <div className=\"price-factor discount\">\n                        <span>Pixal PFP Discount ({costInfo.discount}%):</span>\n                        <span>-{((costInfo.baseCost + (costInfo.totalCost - costInfo.baseCost)) * (costInfo.discount / 100) / 10000).toFixed(4)} PXJ</span>\n                      </div>\n                    )}\n                    <div className=\"price-factor total\">\n                      <span>Total:</span>\n                      <span>{(costInfo.totalCost / 10000).toFixed(4)} PXJ</span>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n          \n          <div className=\"listing-chat-input-wrapper\">\n            <textarea\n              className=\"listing-chat-input\"\n              value={newMessage}\n              onChange={(e) => setNewMessage(e.target.value)}\n              placeholder={`Send a message about ${nft.name}...`}\n              maxLength={240}\n              rows={3}\n              onKeyDown={(e) => {\n                if (e.key === 'Enter' && !e.shiftKey) {\n                  e.preventDefault()\n                  sendMessage()\n                }\n              }}\n            />\n            <button \n              className=\"listing-chat-send-btn\"\n              onClick={sendMessage}\n              disabled={!newMessage.trim() || isSending || !account}\n            >\n              {isSending ? '⏳' : '📤'}\n            </button>\n          </div>\n          \n          {!account && (\n            <div className=\"listing-chat-connect-notice\">\n              Please connect your wallet to send messages\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ListingChatModal","// Utility functions for extracting media URLs from different data structures\nimport { API_ENDPOINTS } from '../config/marketplaceConfig'\n\n// Type definitions for media extraction\nexport interface MediaAsset {\n  asset_id?: string\n  image?: string\n  video?: string\n  img?: string\n  data?: Record<string, unknown> | {\n    img?: string\n    video?: string\n    rarity?: string\n  }\n  template?: {\n    template_id: string\n    max_supply: string\n    immutable_data?: Record<string, unknown> & {\n      img?: string\n      video?: string\n      rarity?: string\n      name?: string\n    }\n  }\n}\n\nexport interface SaleWithAssets {\n  assets?: MediaAsset[]\n}\n\n// IPFS gateway with fallback support\nconst getIPFSUrl = (hash: string): string => {\n  // Use a random gateway for load balancing and better reliability\n  const gateways = API_ENDPOINTS.IPFS.GATEWAYS\n  const randomGateway = gateways[Math.floor(Math.random() * gateways.length)]\n  return `${randomGateway}${hash}`\n}\n\nexport const getAssetImageUrl = (asset: MediaAsset | null | undefined): string | undefined => {\n  if (!asset) return undefined\n  \n  // First check if the asset already has a processed image URL (for marketplace NFTs)\n  if (asset.image && typeof asset.image === 'string') {\n    return asset.image\n  }\n  \n  // Then check the raw data structure (for inventory/collection NFTs)\n  let imgData: string | undefined\n  if (asset.data && typeof asset.data === 'object' && 'img' in asset.data) {\n    imgData = asset.data.img as string\n  }\n  if (!imgData) {\n    imgData = asset.template?.immutable_data?.img || asset.img\n  }\n  if (!imgData) return undefined\n  if (typeof imgData === 'string') {\n    if (imgData.startsWith('http')) return imgData\n    if (imgData.startsWith('Qm')) return getIPFSUrl(imgData)\n    return imgData\n  }\n  return undefined\n}\n\nexport const getAssetVideoUrl = (asset: MediaAsset | null | undefined): string | null => {\n  if (!asset) return null\n  \n  // First check if the asset already has a processed video URL (for marketplace NFTs)\n  if (asset.video && typeof asset.video === 'string') {\n    return asset.video\n  }\n  \n  // Then check the raw data structure (for inventory/collection NFTs)\n  let videoData: string | undefined\n  if (asset.data && typeof asset.data === 'object' && 'video' in asset.data) {\n    videoData = asset.data.video as string\n  }\n  if (!videoData) {\n    videoData = asset.template?.immutable_data?.video || asset.video\n  }\n  if (!videoData) return null\n  if (typeof videoData === 'string') {\n    if (videoData.startsWith('http')) return videoData\n    if (videoData.startsWith('Qm')) return getIPFSUrl(videoData)\n    return videoData\n  }\n  return null\n}\n\n// Template-specific media functions\nexport const getTemplateImageUrl = (template: { immutable_data?: Record<string, unknown>; data?: { img?: string }; img?: string; template?: { immutable_data?: { img?: string } } }): string | undefined => {\n  if (!template) return undefined\n  \n  const imgData = template.immutable_data?.img || template.data?.img || template.img || template.template?.immutable_data?.img\n  if (!imgData) return undefined\n  if (typeof imgData === 'string') {\n    if (imgData.startsWith('http')) return imgData\n    if (imgData.startsWith('Qm')) return getIPFSUrl(imgData)\n    return imgData\n  }\n  return undefined\n}\n\nexport const getTemplateVideoUrl = (template: { immutable_data?: Record<string, unknown>; data?: { video?: string }; video?: string; template?: { immutable_data?: { video?: string } } }): string | null => {\n  if (!template) return null\n  \n  const videoData = template.immutable_data?.video || template.data?.video || template.video || template.template?.immutable_data?.video\n  if (!videoData) return null\n  if (typeof videoData === 'string') {\n    if (videoData.startsWith('http')) return videoData\n    if (videoData.startsWith('Qm')) return getIPFSUrl(videoData)\n    return videoData\n  }\n  return null\n}\n\nexport const getSaleAssetImageUrl = (sale: SaleWithAssets | null | undefined): string | undefined => {\n  const asset = sale?.assets?.[0]\n  return getAssetImageUrl(asset)\n}\n\nexport const getSaleAssetVideoUrl = (sale: SaleWithAssets | null | undefined): string | null => {\n  const asset = sale?.assets?.[0]\n  return getAssetVideoUrl(asset)\n}\n\n// Utility function to create IPFS URLs with fallback support\nexport const createIPFSUrl = (hash: string): string => {\n  if (!hash) return ''\n  if (hash.startsWith('http')) return hash\n  return getIPFSUrl(hash)\n}\n\n// Utility function to get image URL with IPFS fallback\nexport const getImageUrlWithFallback = (imgPath: string | undefined, fallback?: string): string => {\n  if (!imgPath) return fallback || API_ENDPOINTS.IPFS.GATEWAYS[0] + 'placeholder'\n  if (imgPath.startsWith('http')) return imgPath\n  if (imgPath.startsWith('Qm')) return getIPFSUrl(imgPath)\n  return imgPath\n}","import React, { useState, useEffect } from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport type { NFTAsset } from '../services/api'\nimport { apiService } from '../services/api'\nimport { priceService } from '../services/priceService'\nimport { cartService } from '../services/cartService'\nimport watchlistService from '../services/watchlistService'\nimport { wharfKitService, WharfKitService } from '../services/wharfkit'\nimport { useWallet } from '../hooks/useWallet'\nimport SendOfferModal from './SendOfferModal'\nimport ShareModal from './ShareModal'\nimport ListingChatModal from './ListingChatModal'\nimport MediaRenderer from './MediaRenderer'\nimport { getAssetImageUrl, getAssetVideoUrl } from '../utils/mediaUtils'\nimport { useDisplaySettings } from '../hooks/useDisplaySettings'\nimport { useNotifications } from '../hooks/useNotifications'\nimport { log } from '../services/loggingService'\n\ninterface NFTDetailsModalProps {\n  nft: NFTAsset | null\n  isOpen: boolean\n  onClose: () => void\n  usdPrice?: string\n}\n\nconst NFTDetailsModal: React.FC<NFTDetailsModalProps> = ({ nft, isOpen, onClose, usdPrice }) => {\n  const navigate = useNavigate()\n  const { settings } = useDisplaySettings()\n  const [localUsdPrice, setLocalUsdPrice] = useState<string>('$0.00')\n  const [isInCart, setIsInCart] = useState(false)\n  const [isInWatchlist, setIsInWatchlist] = useState(false)\n  const [showShareModal, setShowShareModal] = useState(false)\n  const [showSendOfferModal, setShowSendOfferModal] = useState(false)\n  const [showChatModal, setShowChatModal] = useState(false)\n  \n  interface SessionData {\n    actor?: {\n      toString(): string\n    }\n    [key: string]: unknown\n  }\n  \n  const [session, setSession] = useState<SessionData | null>(null)\n  const { isConnected, purchaseNFT, login } = useWallet()\n  const { showSuccess, showError, showWarning } = useNotifications()\n  // Transaction tracking now handled directly by WharfKit through WalletProvider\n\n  const [collectionStats, setCollectionStats] = useState<{\n    floorPrice: string\n    volume24h: string\n    totalSales: string\n    avgPrice: string\n  } | null>(null)\n  const [recentActivity, setRecentActivity] = useState<Array<{\n    type: 'sale' | 'listing'\n    price: string\n    time: string\n  }>>([])\n  const [priceHistory, setPriceHistory] = useState<Array<{\n    timestamp: number\n    price: number\n    volume: number\n  }>>([])\n\n  // Initialize session\n  useEffect(() => {\n    const initSession = async () => {\n      try {\n        const currentSession = wharfKitService.getSession()\n        if (currentSession) {\n          setSession({\n            ...currentSession,\n            actor: WharfKitService.safeGetActor(currentSession)\n          })\n        } else {\n          setSession(null)\n        }\n      } catch (error) {\n        log.info('No active session', 'NFTDetailsModal', error)\n      }\n    }\n    initSession()\n  }, [])\n\n  // Fetch collection stats and activity when modal opens\n  useEffect(() => {\n    if (isOpen && nft) {\n      fetchCollectionStats()\n      fetchRecentActivity()\n      fetchPriceHistory()\n    }\n  }, [isOpen, nft])\n  \n  const fetchCollectionStats = async () => {\n    if (!nft?.collection) return\n    \n    try {\n      // Get collection stats from API\n      const stats = await apiService.getCollectionStats(nft.collection)\n      if (stats) {\n        setCollectionStats({\n          floorPrice: stats.floor_price || '0',\n          volume24h: stats.volume_24h || '0',\n          totalSales: stats.sales || '0',\n          avgPrice: stats.averagePrice || '0'\n        })\n      }\n    } catch (error) {\n      log.error('Error fetching collection stats', 'NFTDetailsModal', error as Error)\n    }\n  }\n  \n  const fetchRecentActivity = async () => {\n    if (!nft?.collection) return\n    \n    try {\n      // Get recent sales for this collection\n      const recentSales = await apiService.getSales({\n        collection_name: nft.collection,\n        state: '3', // completed sales\n        limit: 5,\n        sort: 'updated',\n        order: 'desc'\n      })\n      \n      if (recentSales.success && recentSales.data) {\n        const activities = recentSales.data.map(sale => ({\n          type: 'sale',\n          price: `${(parseFloat(sale.price?.amount || '0') / Math.pow(10, sale.price?.token_precision || 8)).toFixed(4)} ${sale.price?.token_symbol || 'WAX'}`,\n          time: new Date(parseInt(sale.updated_at_time) * 1000).toLocaleString()\n        }))\n        setRecentActivity(activities as Array<{type: 'sale' | 'listing', price: string, time: string}>)\n      }\n    } catch (error) {\n      log.error('Error fetching recent activity', 'NFTDetailsModal', error as Error)\n    }\n  }\n\n  const fetchPriceHistory = async () => {\n    if (!nft?.collection) return\n    \n    try {\n      const history = await apiService.getCollectionPriceHistory(nft.collection, '7d')\n      setPriceHistory(history)\n    } catch (error) {\n      log.error('Error fetching price history', 'NFTDetailsModal', error as Error)\n      setPriceHistory([])\n    }\n  }\n\n  // Handle direct messaging to seller\n  const handleMessageSeller = () => {\n    setShowChatModal(true)\n  }\n\n  useEffect(() => {\n    if (nft && !usdPrice && nft.price) {\n      priceService.convertWaxToUSDAsync(nft.price).then(setLocalUsdPrice)\n    }\n  }, [nft, usdPrice])\n\n  useEffect(() => {\n    const checkStatus = async () => {\n      if (nft) {\n        const cart = cartService.getCart()\n        setIsInCart(cart.some(item => item.nft.asset_id === nft.asset_id))\n        \n        const watchlist = await watchlistService.getWatchlist()\n        setIsInWatchlist(watchlist.some((item) => item.nft.asset_id === nft.asset_id))\n      }\n    }\n    checkStatus()\n  }, [nft])\n\n  useEffect(() => {\n    const updateCartStatus = () => {\n      if (nft) {\n        const cart = cartService.getCart()\n        setIsInCart(cart.some(item => item.nft.asset_id === nft.asset_id))\n      }\n    }\n\n    const updateWatchlistStatus = async () => {\n      if (nft) {\n        const watchlist = await watchlistService.getWatchlist()\n        setIsInWatchlist(watchlist.some((item) => item.nft.asset_id === nft.asset_id))\n      }\n    }\n\n    cartService.addListener(updateCartStatus)\n    const unsubscribeWatchlist = watchlistService.subscribe(updateWatchlistStatus)\n    \n    return () => {\n      cartService.removeListener(updateCartStatus)\n      unsubscribeWatchlist()\n    }\n  }, [nft])\n\n // Navigation functions\n  const handleCollectionClick = () => {\n    if (!nft) return\n    onClose()\n    navigate(`/collections/${nft.collection}`)\n  }\n\n  const handleSchemaClick = () => {\n    if (!nft) return\n    window.open(`https://wax.atomichub.io/explorer/schema/wax-mainnet/${nft.collection}/${nft.schema}`, '_blank')\n  }\n\n  const handleAssetClick = () => {\n    if (!nft) return\n    onClose()\n    navigate(`/assets/${nft.asset_id}`)\n  }\n\n  const handleSellerClick = () => {\n    if (!nft || !nft.seller) return\n    onClose()\n    navigate(`/user-profile-lookup?user=${encodeURIComponent(nft.seller)}`)\n  }\n\n  if (!isOpen || !nft) return null\n\n  const handleBackdropClick = (e: React.MouseEvent) => {\n    if (e.target === e.currentTarget) {\n      onClose()\n    }\n  }\n\n  const formatTraits = (traits: Record<string, string | number | boolean | null | undefined>) => {\n    return Object.entries(traits).filter(([key, value]) => \n      key !== 'img' && key !== 'video' && key !== 'name' && value !== null && value !== undefined\n    )\n  }\n\n  const handleBuyNow = async () => {\n    if (!isConnected) {\n      try {\n        await login()\n      } catch (error) {\n        log.error('Login failed', 'NFTDetailsModal', error as Error)\n        return\n      }\n    }\n\n    if (!nft.sale_id) {\n      showWarning('This NFT is not for sale')\n      return\n    }\n\n    if (!nft.sale_id || !nft.price) {\n      showError('NFT is not available for purchase')\n      return\n    }\n\n    try {\n      const priceValue = nft.price.replace(' WAX', '')\n      \n      await purchaseNFT(nft.sale_id, priceValue)\n      showSuccess('Purchase successful!')\n      onClose()\n    } catch (error) {\n      log.error('Purchase failed', 'NFTDetailsModal', error as Error)\n      showError('Purchase failed. Please try again.')\n    }\n  }\n\n\n\n  return (\n    <div className=\"modal-backdrop\" onClick={handleBackdropClick}>\n      <div className=\"modal-content nft-details-modal\">\n        <div className=\"modal-header\">\n          <h2 className=\"modal-title\">{nft.name}</h2>\n          <button className=\"modal-close\" onClick={onClose}>\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n            </svg>\n          </button>\n        </div>\n\n        <div className=\"modal-body\">\n          <div className=\"nft-details-container\">\n            {/* Top Section - Image and Basic Info */}\n            <div className=\"nft-details-top\">\n              {/* Left Column - Image/Video */}\n              <div className=\"nft-media-section\">\n                <div className=\"nft-media-container\">\n                  <MediaRenderer\n                    imageUrl={getAssetImageUrl(nft)}\n                    videoUrl={getAssetVideoUrl(nft)}\n                    alt={nft.name}\n                    className=\"nft-media\"\n                    controls={true}\n                    loop={true}\n                    muted={true}\n                    enableAnimations={settings.enableAnimatedNFTs}\n                  />\n                  {(nft.template_mint || nft.max_supply) && (\n                    <div className=\"mint-info\">\n                      Mint: {nft.template_mint !== undefined && nft.template_mint !== null ? nft.template_mint : '?'} / {nft.max_supply === '0' || nft.max_supply === undefined || nft.max_supply === null ? '∞' : nft.max_supply}\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Right Column - Basic Info */}\n              <div className=\"nft-info-section\">\n                <div className=\"info-card\">\n                  <h3 className=\"info-title\">Basic Information</h3>\n                  <div className=\"info-grid\">\n                    <div className=\"info-item\">\n                      <span className=\"info-label\">Collection:</span>\n                      <span className=\"info-value info-link\" onClick={handleCollectionClick} title=\"View collection on AtomicHub\">\n                        {nft.collection}\n                      </span>\n                    </div>\n                    <div className=\"info-item\">\n                      <span className=\"info-label\">Schema:</span>\n                      <span className=\"info-value info-link\" onClick={handleSchemaClick} title=\"View schema on AtomicHub\">\n                        {nft.schema}\n                      </span>\n                    </div>\n                    <div className=\"info-item\">\n                      <span className=\"info-label\">Asset ID:</span>\n                      <span className=\"info-value info-link\" onClick={handleAssetClick} title=\"View asset on AtomicHub\">\n                        {nft.asset_id}\n                      </span>\n                    </div>\n                    <div className=\"info-item\">\n                      <span className=\"info-label\">Seller:</span>\n                      <span className=\"info-value info-link\" onClick={handleSellerClick} title=\"View seller profile\">\n                        {nft.seller}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Price Info */}\n                <div className=\"info-card\">\n                  <h3 className=\"info-title\">Price Information</h3>\n                  <div className=\"price-display\">\n                    <div className=\"price-main\">{nft.price}</div>\n                    <div className=\"price-usd\">{usdPrice || localUsdPrice}</div>\n                  </div>\n                </div>\n\n                {/* Attributes */}\n                {nft.traits && Object.keys(nft.traits).length > 0 && (\n                  <div className=\"info-card\">\n                    <h3 className=\"info-title\">Attributes</h3>\n                    <div className=\"attributes-grid\">\n                      {formatTraits(nft.traits).map(([key, value]) => (\n                        <div key={key} className=\"attribute-item\">\n                          <div className=\"attribute-label\">{key}</div>\n                          <div className=\"attribute-value\">{String(value)}</div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {/* Statistics */}\n                <div className=\"info-card\">\n                  <h3 className=\"info-title\">Statistics</h3>\n                  <div className=\"nft-statistics\">\n                    <div className=\"stats-grid\">\n                      <div className=\"stat-item\">\n                        <span className=\"stat-label\">Floor Price</span>\n                        <span className=\"stat-value\">\n                          {collectionStats ? `${parseFloat(collectionStats.floorPrice).toFixed(4)} WAX` : 'Loading...'}\n                        </span>\n                      </div>\n                      <div className=\"stat-item\">\n                        <span className=\"stat-label\">24h Volume</span>\n                        <span className=\"stat-value\">\n                          {collectionStats ? `${parseFloat(collectionStats.volume24h).toFixed(2)} WAX` : 'Loading...'}\n                        </span>\n                      </div>\n                      <div className=\"stat-item\">\n                        <span className=\"stat-label\">Total Sales</span>\n                        <span className=\"stat-value\">\n                          {collectionStats ? collectionStats.totalSales : 'Loading...'}\n                        </span>\n                      </div>\n                      <div className=\"stat-item\">\n                        <span className=\"stat-label\">Avg Sale Price</span>\n                        <span className=\"stat-value\">\n                          {collectionStats ? `${parseFloat(collectionStats.avgPrice).toFixed(4)} WAX` : 'Loading...'}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n            {/* Price History and Activity Section */}\n            <div className=\"nft-details-bottom\">\n              <div className=\"info-card\">\n                <h3 className=\"info-title\">Price History & Activity</h3>\n                <div className=\"nft-statistics\">\n                  <div className=\"price-history-section\">\n                    <h4 className=\"price-history-title\">Recent Price History</h4>\n                    <div className=\"price-history-chart\">\n                        {priceHistory.length > 0 ? (\n                          <div className=\"chart-placeholder\">\n                            <svg viewBox=\"0 0 400 120\" className=\"price-chart\">\n                              {/* Grid lines */}\n                              {[0, 1, 2, 3, 4].map(i => (\n                                <line\n                                  key={`grid-${i}`}\n                                  x1=\"20\"\n                                  y1={20 + i * 20}\n                                  x2=\"380\"\n                                  y2={20 + i * 20}\n                                  stroke=\"var(--border-color)\"\n                                  strokeWidth=\"1\"\n                                  opacity=\"0.3\"\n                                />\n                              ))}\n                              \n                              {/* Price line */}\n                              {priceHistory.length > 1 && (\n                                <polyline\n                                  fill=\"none\"\n                                  stroke=\"var(--accent-color)\"\n                                  strokeWidth=\"2\"\n                                  points={priceHistory.map((point, index) => {\n                                    const x = 20 + (index / (priceHistory.length - 1)) * 360\n                                    const maxPrice = Math.max(...priceHistory.map(p => p.price))\n                                    const minPrice = Math.min(...priceHistory.map(p => p.price))\n                                    const priceRange = maxPrice - minPrice || 1\n                                    const y = 100 - ((point.price - minPrice) / priceRange) * 60\n                                    return `${x},${y}`\n                                  }).join(' ')}\n                                />\n                              )}\n                              \n                              {/* Data points */}\n                              {priceHistory.map((point, index) => {\n                                const x = 20 + (index / (priceHistory.length - 1)) * 360\n                                const maxPrice = Math.max(...priceHistory.map(p => p.price))\n                                const minPrice = Math.min(...priceHistory.map(p => p.price))\n                                const priceRange = maxPrice - minPrice || 1\n                                const y = 100 - ((point.price - minPrice) / priceRange) * 60\n                                return (\n                                  <circle\n                                    key={index}\n                                    cx={x}\n                                    cy={y}\n                                    r=\"3\"\n                                    fill=\"var(--accent-color)\"\n                                  />\n                                )\n                              })}\n                            </svg>\n                            <div className=\"chart-labels\">\n                              <span>{priceHistory.length > 0 ? new Date(priceHistory[0].timestamp).toLocaleDateString() : '7d ago'}</span>\n                              <span>{priceHistory.length > 0 ? new Date(priceHistory[priceHistory.length - 1].timestamp).toLocaleDateString() : 'Now'}</span>\n                            </div>\n                          </div>\n                        ) : (\n                          <div className=\"chart-placeholder\">\n                            <div className=\"loading-chart\">Loading price history...</div>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                    \n                    <div className=\"trading-activity\">\n                      <h4 className=\"activity-title\">Recent Activity</h4>\n                      <div className=\"activity-list\">\n                        {recentActivity.length > 0 ? (\n                          recentActivity.map((activity, index) => (\n                            <div key={index} className=\"activity-item\">\n                              <span className={`activity-type ${activity.type}`}>\n                                {activity.type === 'sale' ? 'Sale' : 'Listed'}\n                              </span>\n                              <span className=\"activity-price\">{activity.price}</span>\n                              <span className=\"activity-time\">{activity.time}</span>\n                            </div>\n                          ))\n                        ) : (\n                          <div className=\"activity-item\">\n                            <span className=\"activity-type\">Loading...</span>\n                            <span className=\"activity-price\">-</span>\n                            <span className=\"activity-time\">-</span>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"modal-footer\">\n          <div className=\"modal-actions-left\">\n            {nft.sale_id ? (\n              <>\n                {/* Buy Now Button - Full sized primary button */}\n                <button \n                  className=\"listing-btn-buy-now\"\n                  onClick={handleBuyNow}\n                  title={`Buy now for ${nft.price} WAX`}\n                >\n                 <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" aria-hidden=\"true\"><path d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path></svg>\n                  Buy Now\n                </button>\n                \n                {/* Make Offer Button - Full sized secondary button */}\n                <button \n                  className=\"btn-secondary\"\n                  onClick={() => setShowSendOfferModal(true)}\n                  title=\"Make Offer\"\n                >\n                  <svg viewBox=\"0 -8 72 72\" fill=\"currentColor\" style={{width: '24px', height: '24px', marginRight: '8px'}}>\n                  <path d=\"M64,12.78v17s-3.63.71-4.38.81-3.08.85-4.78-.78C52.22,27.25,42.93,18,42.93,18a3.54,3.54,0,0,0-4.18-.21c-2.36,1.24-5.87,3.07-7.33,3.78a3.37,3.37,0,0,1-5.06-2.64,3.44,3.44,0,0,1,2.1-3c3.33-2,10.36-6,13.29-7.52,1.78-1,3.06-1,5.51,1C50.27,12,53,14.27,53,14.27a2.75,2.75,0,0,0,2.26.43C58.63,14,64,12.78,64,12.78ZM27,41.5a3,3,0,0,0-3.55-4.09,3.07,3.07,0,0,0-.64-3,3.13,3.13,0,0,0-3-.75,3.07,3.07,0,0,0-.65-3,3.38,3.38,0,0,0-4.72.13c-1.38,1.32-2.27,3.72-1,5.14s2.64.55,3.72.3c-.3,1.07-1.2,2.07-.09,3.47s2.64.55,3.72.3c-.3,1.07-1.16,2.16-.1,3.46s2.84.61,4,.25c-.45,1.15-1.41,2.39-.18,3.79s4.08.75,5.47-.58a3.32,3.32,0,0,0,.3-4.68A3.18,3.18,0,0,0,27,41.5Zm25.35-8.82L41.62,22a3.53,3.53,0,0,0-3.77-.68c-1.5.66-3.43,1.56-4.89,2.24a8.15,8.15,0,0,1-3.29,1.1,5.59,5.59,0,0,1-3-10.34C29,12.73,34.09,10,34.09,10a6.46,6.46,0,0,0-5-2C25.67,8,18.51,12.7,18.51,12.7a5.61,5.61,0,0,1-4.93.13L8,10.89v19.4s1.59.46,3,1a6.33,6.33,0,0,1,1.56-2.47,6.17,6.17,0,0,1,8.48-.06,5.4,5.4,0,0,1,1.34,2.37,5.49,5.49,0,0,1,2.29,1.4A5.4,5.4,0,0,1,26,34.94a5.47,5.47,0,0,1,3.71,4,5.38,5.38,0,0,1,2.39,1.43,5.65,5.65,0,0,1,1.48,4.89a0,0,0,0,1,0,0s.8.9,1.29,1.39a2.46,2.46,0,0,0,3.48-3.48s2,2.48,4.28,1c2-1.4,1.69-3.06.74-4a3.19,3.19,0,0,0,4.77.13,2.45,2.45,0,0,0,.13-3.3s1.33,1.81,4,.12c1.89-1.6,1-3.43,0-4.39Z\"/>\n                </svg>\n                  Make Offer\n                </button>\n                \n                {/* Add to Cart Button */}\n                <button \n                  className={`btn-secondary ${isInCart ? 'in-cart' : ''}`}\n                  onClick={() => {\n                    if (isInCart) {\n                      cartService.removeFromCart(nft.asset_id)\n                    } else {\n                      const added = cartService.addToCart(nft)\n                      if (!added) {\n                        showWarning('Item is already in your cart!')\n                      }\n                    }\n                  }}\n                  title={isInCart ? 'Remove from cart' : 'Add to cart'}\n                >\n                  <div className=\"cart-icon-container\">\n                    <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" className=\"cart-icon\">\n                      <circle cx=\"9\" cy=\"21\" r=\"1\"></circle>\n                      <circle cx=\"20\" cy=\"21\" r=\"1\"></circle>\n                      <path d=\"m1 1 4 4 2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6\"></path>\n                    </svg>\n                    <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" className=\"cart-action-icon\">\n                      {isInCart ? (\n                        <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line>\n                      ) : (\n                        <>\n                          <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line>\n                          <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line>\n                        </>\n                      )}\n                    </svg>\n                  </div>\n                </button>\n              </>\n            ) : (\n              <button className=\"btn-disabled\" disabled>\n                <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                  <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n                  <line x1=\"4.93\" y1=\"4.93\" x2=\"19.07\" y2=\"19.07\"></line>\n                </svg>\n                Not Available\n              </button>\n            )}\n          </div>\n          \n          <div className=\"modal-actions-right\">\n            {/* View Full Details Button - Icon only */}\n            <button \n              className=\"btn-icon btn-external\"\n              onClick={handleAssetClick}\n              title=\"View full asset details page\"\n            >\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\"></path>\n                <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\n              </svg>\n            </button>\n            \n            {/* Message Seller Button - Icon only */}\n            {nft?.seller && (\n              <button \n                className=\"btn-icon btn-message\"\n                onClick={() => handleMessageSeller()}\n                title=\"Send Direct Message (1000 PXJ)\"\n                disabled={!session || nft.seller === session?.actor}\n              >\n                <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                  <path d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\"></path>\n                </svg>\n              </button>\n            )}\n            \n            {/* Watchlist Button */}\n            <button \n              className={`btn-icon ${isInWatchlist ? 'in-watchlist' : ''}`}\n              onClick={async () => {\n                if (isInWatchlist) {\n                  await watchlistService.removeFromWatchlist(nft.asset_id)\n                } else {\n                  const added = await watchlistService.addToWatchlist(nft)\n                  if (!added) {\n                    showWarning('Item is already in your watchlist!')\n                  }\n                }\n              }}\n              title={isInWatchlist ? 'Remove from watchlist' : 'Add to watchlist'}\n            >\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                {isInWatchlist ? (\n                  <path d=\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z\" fill=\"currentColor\"></path>\n                ) : (\n                  <path d=\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z\"></path>\n                )}\n              </svg>\n            </button>\n            \n            {/* Share Button */}\n            <button \n              className=\"btn-icon\"\n              onClick={() => setShowShareModal(true)}\n              title=\"Share\"\n            >\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                <path d=\"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8\"></path>\n                <polyline points=\"16,6 12,2 8,6\"></polyline>\n                <line x1=\"12\" y1=\"2\" x2=\"12\" y2=\"15\"></line>\n              </svg>\n            </button>\n            \n            {/* Close Button */}\n            <button \n              className=\"btn-icon\"\n              onClick={onClose}\n              title=\"Close\"\n            >\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n                <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n              </svg>\n            </button>\n          </div>\n        </div>\n      </div>\n      \n\n\n      {/* Share Modal */}\n      {showShareModal && (\n        <ShareModal\n          isOpen={showShareModal}\n          onClose={() => setShowShareModal(false)}\n          title={nft?.name || 'NFT'}\n          description={`Check out this amazing NFT: ${nft?.name || 'Unnamed NFT'}`}\n          imageUrl={getAssetImageUrl(nft)}\n          shareUrl={`${window.location.origin}/assets/${nft?.asset_id}`}\n          defaultShareText={`Check out this NFT: ${nft?.name || 'Unnamed NFT'} on PxMarket! 🎮✨ View it at market.pixeljourney.xyz`}\n          type=\"nft\"\n        />\n      )}\n      \n      {/* Send Offer Modal */}\n      <SendOfferModal \n        isOpen={showSendOfferModal}\n        onClose={() => setShowSendOfferModal(false)}\n        nft={nft}\n      />\n      \n      {/* Listing Chat Modal */}\n      {nft && (\n        <ListingChatModal \n          isOpen={showChatModal}\n          onClose={() => setShowChatModal(false)}\n          nft={nft}\n        />\n      )}\n    </div>\n  )\n}\n\nexport default NFTDetailsModal","import React, { useState, useEffect } from 'react'\nimport { apiService } from '../services/api'\nimport { useNotifications } from '../hooks/useNotifications'\nimport type { NFTAsset } from '../services/api'\nimport '../css/nft-comparison.css'\n\ninterface NFTComparisonProps {\n  isOpen: boolean\n  onClose: () => void\n  initialNFTs?: NFTAsset[]\n}\n\nconst NFTComparison: React.FC<NFTComparisonProps> = ({ isOpen, onClose, initialNFTs = [] }) => {\n  const [selectedNFTs, setSelectedNFTs] = useState<NFTAsset[]>(initialNFTs)\n  const [searchTerm, setSearchTerm] = useState('')\n  const [searchResults, setSearchResults] = useState<NFTAsset[]>([])\n  const [isSearching, setIsSearching] = useState(false)\n  const { showWarning } = useNotifications()\n  const [comparisonMetrics, setComparisonMetrics] = useState({\n    showPrice: true,\n    showRarity: true,\n    showAttributes: true,\n    showCollection: true,\n    showSeller: true\n  })\n\n  useEffect(() => {\n    if (initialNFTs.length > 0) {\n      setSelectedNFTs(initialNFTs)\n    }\n  }, [initialNFTs])\n\n  const searchNFTs = async (query: string) => {\n    if (!query.trim()) {\n      setSearchResults([])\n      return\n    }\n\n    setIsSearching(true)\n    try {\n      // Use existing API methods to search for NFTs\n      const [pixelJourney, friedFactory, cryptoMuffins] = await Promise.all([\n        apiService.getWaxRockPixals(20),\n        apiService.getFriedFactoryNFTs(20),\n        apiService.getCryptoMuffinsNFTs(20)\n      ])\n      \n      const allNFTs = [...pixelJourney, ...friedFactory, ...cryptoMuffins]\n      const filtered = allNFTs.filter(nft => \n        nft.name.toLowerCase().includes(query.toLowerCase()) ||\n        nft.collection.toLowerCase().includes(query.toLowerCase())\n      )\n      \n      setSearchResults(filtered.slice(0, 10)) // Limit to 10 results\n    } catch (error) {\n      console.error('Error searching NFTs:', error)\n      setSearchResults([])\n    } finally {\n      setIsSearching(false)\n    }\n  }\n\n  const addNFTToComparison = (nft: NFTAsset) => {\n    if (selectedNFTs.length >= 4) {\n      showWarning('You can compare up to 4 NFTs at once', 'Comparison Limit')\n      return\n    }\n    \n    if (selectedNFTs.find(n => n.asset_id === nft.asset_id)) {\n      showWarning('This NFT is already in the comparison', 'Duplicate NFT')\n      return\n    }\n\n    setSelectedNFTs([...selectedNFTs, nft])\n    setSearchTerm('')\n    setSearchResults([])\n  }\n\n  const removeNFTFromComparison = (assetId: string) => {\n    setSelectedNFTs(selectedNFTs.filter(nft => nft.asset_id !== assetId))\n  }\n\n  const toggleMetric = (metric: keyof typeof comparisonMetrics) => {\n    setComparisonMetrics(prev => ({\n      ...prev,\n      [metric]: !prev[metric]\n    }))\n  }\n\n  const getRarityColor = (rarity?: string) => {\n    if (!rarity) return '#666'\n    switch (rarity.toLowerCase()) {\n      case 'common': return '#9CA3AF'\n      case 'rare': return '#3B82F6'\n      case 'epic': return '#8B5CF6'\n      case 'legendary': return '#F59E0B'\n      case 'mythic': return '#EF4444'\n      default: return '#666'\n    }\n  }\n\n  const getAttributeValue = (nft: NFTAsset, attributeName: string) => {\n    if (!nft.traits) return 'N/A'\n    const attr = nft.traits[attributeName]\n    return attr || 'N/A'\n  }\n\n  const getAllAttributes = () => {\n    const allAttributes = new Set<string>()\n    selectedNFTs.forEach(nft => {\n      if (nft.traits) {\n        Object.keys(nft.traits).forEach(key => {\n          if (key !== 'rarity') {\n            allAttributes.add(key)\n          }\n        })\n      }\n    })\n    return Array.from(allAttributes)\n  }\n\n  if (!isOpen) return null\n\n  return (\n    <div className=\"nft-comparison-overlay\">\n      <div className=\"nft-comparison-modal\">\n        <div className=\"comparison-header\">\n          <h2>NFT Comparison Tool</h2>\n          <button className=\"close-btn\" onClick={onClose}>\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n\n        <div className=\"comparison-content\">\n          {/* Search Section */}\n          <div className=\"search-section\">\n            <div className=\"search-input-container\">\n              <input\n                type=\"text\"\n                placeholder=\"Search NFTs to add to comparison...\"\n                value={searchTerm}\n                onChange={(e) => {\n                  setSearchTerm(e.target.value)\n                  searchNFTs(e.target.value)\n                }}\n                className=\"search-input\"\n              />\n              {isSearching && <div className=\"search-loading\">Searching...</div>}\n            </div>\n            \n            {searchResults.length > 0 && (\n              <div className=\"search-results\">\n                {searchResults.map(nft => (\n                  <div key={nft.asset_id} className=\"search-result-item\" onClick={() => addNFTToComparison(nft)}>\n                    <img src={nft.image} alt={nft.name} className=\"result-image\" />\n                    <div className=\"result-info\">\n                      <div className=\"result-name\">{nft.name}</div>\n                      <div className=\"result-collection\">{nft.collection}</div>\n                      <div className=\"result-price\">{nft.price}</div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Comparison Metrics Toggle */}\n          <div className=\"metrics-toggle\">\n            <h3>Show Comparison Metrics:</h3>\n            <div className=\"toggle-buttons\">\n              {Object.entries(comparisonMetrics).map(([key, value]) => (\n                <button\n                  key={key}\n                  className={`toggle-btn ${value ? 'active' : ''}`}\n                  onClick={() => toggleMetric(key as keyof typeof comparisonMetrics)}\n                >\n                  {key.replace('show', '').replace(/([A-Z])/g, ' $1').trim()}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Comparison Table */}\n          {selectedNFTs.length > 0 ? (\n            <div className=\"comparison-table\">\n              <div className=\"comparison-grid\">\n                {/* Header Row */}\n                <div className=\"comparison-row header-row\">\n                  <div className=\"metric-label\">NFT</div>\n                  {selectedNFTs.map(nft => (\n                    <div key={nft.asset_id} className=\"nft-column\">\n                      <div className=\"nft-header\">\n                        <img src={nft.image} alt={nft.name} className=\"nft-image\" />\n                        <div className=\"nft-info\">\n                          <div className=\"nft-name\">{nft.name}</div>\n                          <div className=\"nft-id\">#{nft.asset_id}</div>\n                        </div>\n                        <button \n                          className=\"remove-nft-btn\"\n                          onClick={() => removeNFTFromComparison(nft.asset_id)}\n                          title=\"Remove from comparison\"\n                        >\n                          ×\n                        </button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n\n                {/* Price Row */}\n                {comparisonMetrics.showPrice && (\n                  <div className=\"comparison-row\">\n                    <div className=\"metric-label\">Price</div>\n                    {selectedNFTs.map(nft => (\n                      <div key={nft.asset_id} className=\"metric-value price\">\n                        {nft.price}\n                      </div>\n                    ))}\n                  </div>\n                )}\n\n                {/* Rarity Row */}\n                {comparisonMetrics.showRarity && (\n                  <div className=\"comparison-row\">\n                    <div className=\"metric-label\">Rarity</div>\n                    {selectedNFTs.map(nft => (\n                      <div key={nft.asset_id} className=\"metric-value rarity\">\n                        <span \n                          className=\"rarity-badge\"\n                          style={{ backgroundColor: getRarityColor(String(nft.traits?.rarity || 'Unknown')) }}\n                        >\n                          {nft.traits?.rarity || 'Unknown'}\n                        </span>\n                      </div>\n                    ))}\n                  </div>\n                )}\n\n                {/* Collection Row */}\n                {comparisonMetrics.showCollection && (\n                  <div className=\"comparison-row\">\n                    <div className=\"metric-label\">Collection</div>\n                    {selectedNFTs.map(nft => (\n                      <div key={nft.asset_id} className=\"metric-value\">\n                        {nft.collection}\n                      </div>\n                    ))}\n                  </div>\n                )}\n\n                {/* Seller Row */}\n                {comparisonMetrics.showSeller && (\n                  <div className=\"comparison-row\">\n                    <div className=\"metric-label\">Seller</div>\n                    {selectedNFTs.map(nft => (\n                      <div key={nft.asset_id} className=\"metric-value\">\n                        {nft.seller}\n                      </div>\n                    ))}\n                  </div>\n                )}\n\n                {/* Attributes Rows */}\n                {comparisonMetrics.showAttributes && getAllAttributes().map(attributeName => (\n                  <div key={attributeName} className=\"comparison-row\">\n                    <div className=\"metric-label\">{attributeName}</div>\n                    {selectedNFTs.map(nft => (\n                      <div key={nft.asset_id} className=\"metric-value\">\n                        {getAttributeValue(nft, attributeName)}\n                      </div>\n                    ))}\n                  </div>\n                ))}\n              </div>\n            </div>\n          ) : (\n            <div className=\"empty-comparison\">\n              <div className=\"empty-icon\">📊</div>\n              <h3>No NFTs to Compare</h3>\n              <p>Search and add NFTs above to start comparing their attributes, prices, and more.</p>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default NFTComparison","import React, { useState } from 'react'\nimport { useNotifications } from '../hooks/useNotifications'\nimport type { NFTAsset } from '../services/api'\nimport { log } from '../services/loggingService'\nimport '../css/social-share.css'\n\ninterface SocialShareProps {\n  nft: NFTAsset\n  isOpen: boolean\n  onClose: () => void\n}\n\nconst SocialShare: React.FC<SocialShareProps> = ({ nft, isOpen, onClose }) => {\n  const [copied, setCopied] = useState(false)\n  const [shareText, setShareText] = useState('')\n  const { showSuccess } = useNotifications()\n  \n  // Array of randomized share messages\n  const shareMessages = [\n    `🎨 Check out this amazing NFT: ${nft.name} from ${nft.collection}! ✨`,\n    `🔥 Discovered this incredible ${nft.name} NFT! Part of the ${nft.collection} collection 🚀`,\n    `✨ Look at this stunning ${nft.name} from ${nft.collection}! NFT art at its finest 🎭`,\n    `🌟 Found a gem! ${nft.name} from the ${nft.collection} collection is absolutely beautiful 💎`,\n    `🎯 This ${nft.name} NFT caught my eye! Amazing work from ${nft.collection} 🎨`,\n    `💫 Showcasing ${nft.name} - a masterpiece from ${nft.collection}! 🖼️`,\n    `🚀 Blown away by this ${nft.name} NFT! ${nft.collection} never disappoints ⭐`,\n    `🎪 Step right up and see ${nft.name}! Another fantastic piece from ${nft.collection} 🎊`\n  ]\n  \n  // Get a random message\n  const getRandomShareText = () => {\n    const randomIndex = Math.floor(Math.random() * shareMessages.length)\n    return shareMessages[randomIndex]\n  }\n  \n  const [defaultShareText, setDefaultShareText] = useState(() => getRandomShareText())\n\n  if (!isOpen) return null\n\n  // Generate proper share URL based on current page context\n  const currentPath = window.location.pathname\n  let shareUrl = `${window.location.origin}/assets/${nft.asset_id}`\n  \n  // If we're on a listing page, use the listing URL instead\n  if (currentPath.includes('/listings/')) {\n    shareUrl = window.location.href\n  }\n  \n  // Function to regenerate random message\n  const regenerateMessage = () => {\n    setDefaultShareText(getRandomShareText())\n    if (!shareText) {\n      // If user hasn't typed anything, this will update the placeholder\n    }\n  }\n\n  const copyToClipboard = async (text: string) => {\n    try {\n      await navigator.clipboard.writeText(text)\n      setCopied(true)\n      setTimeout(() => setCopied(false), 2000)\n    } catch (error) {\n      log.error('Failed to copy to clipboard', 'SocialShare.copyToClipboard', error as Error)\n    }\n  }\n\n  const shareToTwitter = () => {\n    const text = shareText || defaultShareText\n    const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(shareUrl)}&hashtags=NFT,WAX,PixelJourney`\n    window.open(twitterUrl, '_blank', 'width=550,height=420')\n  }\n\n  const shareToFacebook = () => {\n    const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareUrl)}`\n    window.open(facebookUrl, '_blank', 'width=550,height=420')\n  }\n\n  const shareToReddit = () => {\n    const text = shareText || defaultShareText\n    const redditUrl = `https://reddit.com/submit?url=${encodeURIComponent(shareUrl)}&title=${encodeURIComponent(text)}`\n    window.open(redditUrl, '_blank', 'width=550,height=420')\n  }\n\n  const shareToDiscord = () => {\n    const text = `${shareText || defaultShareText}\\n${shareUrl}`\n    copyToClipboard(text)\n    showSuccess('Share text copied to clipboard! You can now paste it in Discord.', 'Copied to Clipboard')\n  }\n\n  const shareToTelegram = () => {\n    const text = shareText || defaultShareText\n    const telegramUrl = `https://t.me/share/url?url=${encodeURIComponent(shareUrl)}&text=${encodeURIComponent(text)}`\n    window.open(telegramUrl, '_blank', 'width=550,height=420')\n  }\n\n  const shareViaEmail = () => {\n    const subject = `Check out this NFT: ${nft.name}`\n    const body = `${shareText || defaultShareText}\\n\\nView it here: ${shareUrl}`\n    const emailUrl = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`\n    window.location.href = emailUrl\n  }\n\n  return (\n    <div className=\"social-share-overlay\" onClick={onClose}>\n      <div className=\"social-share-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"share-header\">\n          <h3>Share NFT</h3>\n          <button className=\"close-btn\" onClick={onClose}>\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n\n        <div className=\"share-content\">\n          <div className=\"nft-preview\">\n            <img src={nft.image} alt={nft.name} className=\"nft-image\" />\n            <div className=\"nft-info\">\n              <h4>{nft.name}</h4>\n              <p>\n                {typeof nft.collection === 'string'\n                  ? nft.collection\n                  : (nft.collection as { collection_name?: string; name?: string })?.collection_name ||\n                    (nft.collection as { collection_name?: string; name?: string })?.name ||\n                    'Unknown'}\n              </p>\n              <span className=\"nft-price\">{nft.price}</span>\n            </div>\n          </div>\n\n          <div className=\"share-text-section\">\n            <div className=\"share-text-header\">\n              <label htmlFor=\"share-text\">Customize your message:</label>\n              <button \n                className=\"refresh-message-btn\" \n                onClick={regenerateMessage}\n                title=\"Generate new random message\"\n              >\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n                </svg>\n              </button>\n            </div>\n            <textarea\n              id=\"share-text\"\n              value={shareText}\n              onChange={(e) => setShareText(e.target.value)}\n              placeholder={defaultShareText}\n              className=\"share-textarea\"\n              rows={3}\n            />\n          </div>\n\n          <div className=\"share-url-section\">\n            <label>Share URL:</label>\n            <div className=\"url-input-container\">\n              <input\n                type=\"text\"\n                value={shareUrl}\n                readOnly\n                className=\"url-input\"\n              />\n              <button\n                className={`copy-btn ${copied ? 'copied' : ''}`}\n                onClick={() => copyToClipboard(shareUrl)}\n              >\n                {copied ? (\n                  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                ) : (\n                  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                    <rect x=\"9\" y=\"9\" width=\"13\" height=\"13\" rx=\"2\" ry=\"2\"></rect>\n                    <path d=\"M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1\"></path>\n                  </svg>\n                )}\n                {copied ? 'Copied!' : 'Copy'}\n              </button>\n            </div>\n          </div>\n\n          <div className=\"social-buttons\">\n            <button className=\"social-btn twitter\" onClick={shareToTwitter}>\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z\"/>\n              </svg>\n              Twitter\n            </button>\n\n            <button className=\"social-btn facebook\" onClick={shareToFacebook}>\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\"/>\n              </svg>\n              Facebook\n            </button>\n\n            <button className=\"social-btn reddit\" onClick={shareToReddit}>\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z\"/>\n              </svg>\n              Reddit\n            </button>\n\n            <button className=\"social-btn discord\" onClick={shareToDiscord}>\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.0190 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1568 2.4189Z\"/>\n              </svg>\n              Discord\n            </button>\n\n            <button className=\"social-btn telegram\" onClick={shareToTelegram}>\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z\"/>\n              </svg>\n              Telegram\n            </button>\n\n            <button className=\"social-btn email\" onClick={shareViaEmail}>\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\n              </svg>\n              Email\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default SocialShare","import React from 'react'\r\nimport '../css/error-message.css'\r\nimport { type ErrorMessageConfig, ErrorMessageService } from '../services/errorMessageService'\r\n\r\ninterface ErrorMessageProps {\r\n  title?: string\r\n  message?: string\r\n  onRetry?: () => void\r\n  showRetry?: boolean\r\n  error?: unknown\r\n  errorConfig?: ErrorMessageConfig\r\n  errorType?: keyof typeof ErrorMessageService.MESSAGES\r\n  isRetrying?: boolean\r\n  retryCount?: number\r\n  maxRetries?: number\r\n}\r\n\r\nconst ErrorMessage: React.FC<ErrorMessageProps> = ({ \r\n  title, \r\n  message,\r\n  onRetry,\r\n  showRetry = true,\r\n  error,\r\n  errorConfig,\r\n  errorType,\r\n  isRetrying = false,\r\n  retryCount = 0,\r\n  maxRetries = 3\r\n}) => {\r\n  // Determine which error configuration to use\r\n  let finalConfig: ErrorMessageConfig\r\n  \r\n  if (errorConfig) {\r\n    finalConfig = errorConfig\r\n  } else if (errorType) {\r\n    finalConfig = ErrorMessageService.getMessage(errorType)\r\n  } else if (error) {\r\n    finalConfig = ErrorMessageService.formatError(error)\r\n  } else {\r\n    finalConfig = {\r\n      title: title || \"Oh no! Something went wrong\",\r\n      message: message || \"We're having trouble loading the data right now. Please try again in a moment.\",\r\n      action: \"Try Again\"\r\n    }\r\n  }\r\n  \r\n  const displayTitle = title || finalConfig.title\r\n  const displayMessage = message || finalConfig.message\r\n  const actionText = isRetrying ? \"Retrying...\" : (finalConfig.action || \"Try Again\")\r\n  \r\n  // Determine error icon based on error type\r\n  const getErrorIcon = () => {\r\n    if (isRetrying) return \"🔄\"\r\n    \r\n    switch (errorType) {\r\n      case 'NETWORK_ERROR':\r\n        return \"📡\"\r\n      case 'TIMEOUT_ERROR':\r\n        return \"⏱️\"\r\n      case 'API_ERROR':\r\n        return \"⚠️\"\r\n      case 'LOAD_FAILED':\r\n        return \"📂\"\r\n      default:\r\n        return \"😅\"\r\n    }\r\n  }\r\n  \r\n  return (\r\n    <div className={`error-message ${isRetrying ? 'retrying' : ''}`}>\r\n      <div className=\"error-content\">\r\n        <div className={`error-icon ${isRetrying ? 'spinning' : ''}`}>\r\n          {getErrorIcon()}\r\n        </div>\r\n        <h3 className=\"error-title\">{displayTitle}</h3>\r\n        <p className=\"error-text\">{displayMessage}</p>\r\n        \r\n        {retryCount > 0 && !isRetrying && (\r\n          <div className=\"retry-status\">\r\n            <span className=\"retry-count\">Attempt {retryCount} of {maxRetries}</span>\r\n          </div>\r\n        )}\r\n        \r\n        {showRetry && onRetry && (\r\n          <button \r\n            className={`error-retry-btn ${isRetrying ? 'retrying' : ''}`} \r\n            onClick={onRetry}\r\n            disabled={isRetrying || retryCount >= maxRetries}\r\n          >\r\n            {isRetrying && <span className=\"retry-spinner\"></span>}\r\n            {actionText}\r\n          </button>\r\n        )}\r\n        \r\n        {retryCount >= maxRetries && (\r\n          <div className=\"max-retries-reached\">\r\n            <p>Maximum retry attempts reached. Please refresh the page or try again later.</p>\r\n            <button \r\n              className=\"error-refresh-btn\" \r\n              onClick={() => window.location.reload()}\r\n            >\r\n              Refresh Page\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ErrorMessage","import React, { useState, useEffect, useRef, useCallback } from 'react'\nimport '../css/advanced-search.css'\n\ninterface SearchSuggestion {\n  text: string\n  type: 'name' | 'collection' | 'schema' | 'history'\n  count?: number\n}\n\ninterface AdvancedSearchProps {\n  searchTerm: string\n  onSearchChange: (term: string) => void\n  suggestions?: SearchSuggestion[]\n  placeholder?: string\n  showFilters?: boolean\n  onFilterChange?: (filters: SearchFilters) => void\n  className?: string\n}\n\ninterface SearchFilters {\n  priceRange: { min: string; max: string }\n  rarities: string[]\n  collections: string[]\n  schemas: string[]\n  sortBy: string\n}\n\nconst SEARCH_HISTORY_KEY = 'pixeljourney_search_history'\nconst MAX_HISTORY_ITEMS = 10\n\nconst AdvancedSearch: React.FC<AdvancedSearchProps> = ({\n  searchTerm,\n  onSearchChange,\n  suggestions = [],\n  placeholder = \"Search NFTs, collections, schemas...\",\n  showFilters = false,\n  onFilterChange,\n  className = ''\n}) => {\n  const [showSuggestions, setShowSuggestions] = useState(false)\n  const [searchHistory, setSearchHistory] = useState<string[]>([])\n  const [filters, setFilters] = useState<SearchFilters>({\n    priceRange: { min: '', max: '' },\n    rarities: [],\n    collections: [],\n    schemas: [],\n    sortBy: 'relevance'\n  })\n  const [showAdvancedFilters, setShowAdvancedFilters] = useState(false)\n  \n  const searchInputRef = useRef<HTMLInputElement>(null)\n  const suggestionsRef = useRef<HTMLDivElement>(null)\n  const [selectedSuggestionIndex, setSelectedSuggestionIndex] = useState(-1)\n\n  // Load search history from localStorage\n  useEffect(() => {\n    const savedHistory = localStorage.getItem(SEARCH_HISTORY_KEY)\n    if (savedHistory) {\n      try {\n        setSearchHistory(JSON.parse(savedHistory))\n      } catch (error) {\n        console.error('Failed to parse search history:', error)\n      }\n    }\n  }, [])\n\n  // Save search to history\n  const saveToHistory = useCallback((term: string) => {\n    if (!term.trim() || term.length < 2) return\n    \n    const newHistory = [term, ...searchHistory.filter(item => item !== term)]\n      .slice(0, MAX_HISTORY_ITEMS)\n    \n    setSearchHistory(newHistory)\n    localStorage.setItem(SEARCH_HISTORY_KEY, JSON.stringify(newHistory))\n  }, [searchHistory])\n\n  // Clear search history\n  const clearHistory = useCallback(() => {\n    setSearchHistory([])\n    localStorage.removeItem(SEARCH_HISTORY_KEY)\n  }, [])\n\n  // Handle search input change\n  const handleSearchChange = useCallback((value: string) => {\n    onSearchChange(value)\n    setSelectedSuggestionIndex(-1)\n    \n    if (value.length >= 2) {\n      setShowSuggestions(true)\n    } else {\n      setShowSuggestions(false)\n    }\n  }, [onSearchChange])\n\n  // Handle search submit\n  const handleSearchSubmit = useCallback(() => {\n    if (searchTerm.trim()) {\n      saveToHistory(searchTerm.trim())\n      setShowSuggestions(false)\n      searchInputRef.current?.blur()\n    }\n  }, [searchTerm, saveToHistory])\n\n  // Handle suggestion click\n  const handleSuggestionClick = useCallback((suggestion: SearchSuggestion) => {\n    handleSearchChange(suggestion.text)\n    saveToHistory(suggestion.text)\n    setShowSuggestions(false)\n  }, [handleSearchChange, saveToHistory])\n\n  // Handle keyboard navigation\n  const handleKeyDown = useCallback((e: React.KeyboardEvent) => {\n    if (!showSuggestions) return\n\n    const allSuggestions = [\n      ...searchHistory.map(item => ({ text: item, type: 'history' as const })),\n      ...suggestions\n    ]\n\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault()\n        setSelectedSuggestionIndex(prev => \n          prev < allSuggestions.length - 1 ? prev + 1 : prev\n        )\n        break\n      case 'ArrowUp':\n        e.preventDefault()\n        setSelectedSuggestionIndex(prev => prev > -1 ? prev - 1 : -1)\n        break\n      case 'Enter':\n        e.preventDefault()\n        if (selectedSuggestionIndex >= 0 && allSuggestions[selectedSuggestionIndex]) {\n          handleSuggestionClick(allSuggestions[selectedSuggestionIndex])\n        } else {\n          handleSearchSubmit()\n        }\n        break\n      case 'Escape':\n        setShowSuggestions(false)\n        setSelectedSuggestionIndex(-1)\n        searchInputRef.current?.blur()\n        break\n    }\n  }, [showSuggestions, searchHistory, suggestions, selectedSuggestionIndex, handleSuggestionClick, handleSearchSubmit])\n\n  // Handle filter changes\n  const handleFilterChange = useCallback((newFilters: Partial<SearchFilters>) => {\n    const updatedFilters = { ...filters, ...newFilters }\n    setFilters(updatedFilters)\n    onFilterChange?.(updatedFilters)\n  }, [filters, onFilterChange])\n\n  // Close suggestions when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (suggestionsRef.current && !suggestionsRef.current.contains(event.target as Node) &&\n          searchInputRef.current && !searchInputRef.current.contains(event.target as Node)) {\n        setShowSuggestions(false)\n        setSelectedSuggestionIndex(-1)\n      }\n    }\n\n    document.addEventListener('mousedown', handleClickOutside)\n    return () => document.removeEventListener('mousedown', handleClickOutside)\n  }, [])\n\n  const allSuggestions = [\n    ...searchHistory.map(item => ({ text: item, type: 'history' as const })),\n    ...suggestions\n  ]\n\n  return (\n    <div className={`advanced-search ${className}`}>\n      <div className=\"search-container\">\n        <div className=\"search-input-wrapper\">\n          <svg className=\"search-icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"m21 21-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n          </svg>\n          \n          <input\n            ref={searchInputRef}\n            type=\"text\"\n            value={searchTerm}\n            onChange={(e) => handleSearchChange(e.target.value)}\n            onKeyDown={handleKeyDown}\n            onFocus={() => {\n              if (searchTerm.length >= 2 || searchHistory.length > 0) {\n                setShowSuggestions(true)\n              }\n            }}\n            placeholder={placeholder}\n            className=\"search-input\"\n            aria-label=\"Search for NFTs, collections, or schemas\"\n            aria-describedby={showSuggestions ? 'search-suggestions' : undefined}\n            aria-expanded={showSuggestions}\n            aria-autocomplete=\"list\"\n            role=\"combobox\"\n          />\n          \n          {searchTerm && (\n            <button\n              className=\"clear-search\"\n              onClick={() => {\n                handleSearchChange('')\n                setShowSuggestions(false)\n              }}\n              title=\"Clear search\"\n              aria-label=\"Clear search input\"\n              type=\"button\"\n            >\n              <span aria-hidden=\"true\">✕</span>\n            </button>\n          )}\n          \n          {showFilters && (\n            <button\n              className={`filter-toggle ${showAdvancedFilters ? 'active' : ''}`}\n              onClick={() => setShowAdvancedFilters(!showAdvancedFilters)}\n              title=\"Advanced filters\"\n              aria-label={showAdvancedFilters ? 'Hide advanced filters' : 'Show advanced filters'}\n              aria-expanded={showAdvancedFilters}\n              type=\"button\"\n            >\n              <svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z\" />\n              </svg>\n            </button>\n          )}\n        </div>\n\n        {/* Search Suggestions */}\n        {showSuggestions && allSuggestions.length > 0 && (\n          <div \n            ref={suggestionsRef} \n            className=\"search-suggestions\"\n            id=\"search-suggestions\"\n            role=\"listbox\"\n            aria-label=\"Search suggestions\"\n          >\n            {searchHistory.length > 0 && (\n              <div className=\"suggestions-section\">\n                <div className=\"suggestions-header\">\n                  <span id=\"recent-searches-label\">Recent searches</span>\n                  <button \n                    onClick={clearHistory} \n                    className=\"clear-history\"\n                    aria-label=\"Clear search history\"\n                    type=\"button\"\n                  >\n                    Clear\n                  </button>\n                </div>\n                <div role=\"group\" aria-labelledby=\"recent-searches-label\">\n                  {searchHistory.map((item, index) => (\n                    <div\n                      key={`history-${index}`}\n                      className={`suggestion-item history ${selectedSuggestionIndex === index ? 'selected' : ''}`}\n                      onClick={() => handleSuggestionClick({ text: item, type: 'history' })}\n                      role=\"option\"\n                      aria-selected={selectedSuggestionIndex === index}\n                      tabIndex={-1}\n                    >\n                      <svg className=\"suggestion-icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                      </svg>\n                      <span>{item}</span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n            \n            {suggestions.length > 0 && (\n              <div className=\"suggestions-section\">\n                {searchHistory.length > 0 && <div className=\"suggestions-divider\" />}\n                <div className=\"suggestions-header\">\n                  <span>Suggestions</span>\n                </div>\n                {suggestions.map((suggestion, index) => {\n                  const actualIndex = searchHistory.length + index\n                  return (\n                    <div\n                      key={`suggestion-${index}`}\n                      className={`suggestion-item ${suggestion.type} ${selectedSuggestionIndex === actualIndex ? 'selected' : ''}`}\n                      onClick={() => handleSuggestionClick(suggestion)}\n                    >\n                      <svg className=\"suggestion-icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        {suggestion.type === 'name' && (\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z\" />\n                        )}\n                        {suggestion.type === 'collection' && (\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10\" />\n                        )}\n                        {suggestion.type === 'schema' && (\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                        )}\n                      </svg>\n                      <span>{suggestion.text}</span>\n                      {suggestion.count && (\n                        <span className=\"suggestion-count\">{suggestion.count}</span>\n                      )}\n                    </div>\n                  )\n                })}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* Advanced Filters */}\n      {showFilters && showAdvancedFilters && (\n        <div className=\"advanced-filters\">\n          <div className=\"filters-grid\">\n            {/* Price Range */}\n            <div className=\"filter-group\">\n              <label className=\"filter-label\">Price Range (WAX)</label>\n              <div className=\"price-range\">\n                <input\n                  type=\"number\"\n                  placeholder=\"Min\"\n                  value={filters.priceRange.min}\n                  onChange={(e) => handleFilterChange({\n                    priceRange: { ...filters.priceRange, min: e.target.value }\n                  })}\n                  className=\"price-input\"\n                />\n                <span className=\"price-separator\">to</span>\n                <input\n                  type=\"number\"\n                  placeholder=\"Max\"\n                  value={filters.priceRange.max}\n                  onChange={(e) => handleFilterChange({\n                    priceRange: { ...filters.priceRange, max: e.target.value }\n                  })}\n                  className=\"price-input\"\n                />\n              </div>\n            </div>\n\n            {/* Sort By */}\n            <div className=\"filter-group\">\n              <label className=\"filter-label\">Sort By</label>\n              <select\n                value={filters.sortBy}\n                onChange={(e) => handleFilterChange({ sortBy: e.target.value })}\n                className=\"filter-select\"\n              >\n                <option value=\"relevance\">Relevance</option>\n                <option value=\"price_asc\">Price: Low to High</option>\n                <option value=\"price_desc\">Price: High to Low</option>\n                <option value=\"name_asc\">Name: A to Z</option>\n                <option value=\"name_desc\">Name: Z to A</option>\n                <option value=\"newest\">Newest First</option>\n                <option value=\"oldest\">Oldest First</option>\n              </select>\n            </div>\n          </div>\n\n          <div className=\"filter-actions\">\n            <button\n              onClick={() => {\n                const resetFilters = {\n                  priceRange: { min: '', max: '' },\n                  rarities: [],\n                  collections: [],\n                  schemas: [],\n                  sortBy: 'relevance'\n                }\n                setFilters(resetFilters)\n                onFilterChange?.(resetFilters)\n              }}\n              className=\"filter-reset\"\n            >\n              Reset Filters\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default AdvancedSearch\nexport type { SearchSuggestion, SearchFilters }","import React, { useState, useEffect, useCallback, useMemo } from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport { apiService } from '../services/api'\nimport type { NFTAsset } from '../services/api'\nimport { priceService } from '../services/priceService'\nimport { cartService } from '../services/cartService'\nimport watchlistService from '../services/watchlistService'\n\nimport { wharfKitService } from '../services/wharfkit'\nimport NFTDetailsModal from './NFTDetailsModal'\nimport NFTComparison from './NFTComparison'\nimport SocialShare from './SocialShare'\nimport SendOfferModal from './SendOfferModal'\nimport ListingChatModal from './ListingChatModal'\nimport ErrorMessage from './ErrorMessage'\nimport MediaRenderer from './MediaRenderer'\n\nimport AdvancedSearch from './AdvancedSearch'\nimport { getAssetImageUrl, getAssetVideoUrl } from '../utils/mediaUtils'\nimport { useDisplaySettings } from '../hooks/useDisplaySettings'\nimport { useNotifications } from '../hooks/useNotifications'\n\nimport { useWallet } from '../hooks/useWallet'\nimport { ErrorMessageService } from '../services/errorMessageService'\nimport { log } from '../services/loggingService'\nimport '../css/marketplace.css'\nimport '../css/modal.css'\nimport '../css/nft-comparison.css'\nimport '../css/social-share.css'\nimport type { SearchSuggestion, SearchFilters } from './AdvancedSearch'\n\ntype LoadingState = 'idle' | 'loading' | 'success' | 'error'\ntype NFTCategory = 'pixals' | 'waxrocks' | 'ingredients' | 'bundles' | 'friedfactory' | 'cryptomuffins' | 'akufishheads' | 'partners' | 'pxapproved' | 'ah_verified' | 'all_wax'\n\nconst Marketplace: React.FC = React.memo(() => {\n  const navigate = useNavigate()\n  const { settings } = useDisplaySettings()\n  const { showSuccess, showError, showWarning } = useNotifications()\n  const [filteredNfts, setFilteredNfts] = useState<NFTAsset[]>([])\n  const [loading, setLoading] = useState<LoadingState>('idle')\n  const [searchTerm, setSearchTerm] = useState('')\n  const [activeCategory, setActiveCategory] = useState<NFTCategory>('pixals')\n\n  const [usdPrices, setUsdPrices] = useState<Record<string, string>>({})\n  const [selectedNft, setSelectedNft] = useState<NFTAsset | null>(null)\n  const [isModalOpen, setIsModalOpen] = useState(false)\n  const [cartItems, setCartItems] = useState<Set<string>>(new Set())\n  const [selectedItems, setSelectedItems] = useState<Set<string>>(new Set())\n  const [currentPage, setCurrentPage] = useState(1)\n  const [totalPages, setTotalPages] = useState(1)\n\n  const [allNfts, setAllNfts] = useState<NFTAsset[]>([])\n  const [isFilterSidebarOpen, setIsFilterSidebarOpen] = useState(false)\n  const [priceRange, setPriceRange] = useState({ min: '', max: '' })\n  const [selectedSchemas, setSelectedSchemas] = useState<Set<string>>(new Set())\n  const [sortBy, setSortBy] = useState('price_asc')\n\n  const [dateRange, setDateRange] = useState({ start: '', end: '' })\n  const [searchSuggestions, setSearchSuggestions] = useState<SearchSuggestion[]>([])\n  const [availableCollections, setAvailableCollections] = useState<string[]>([]) \n  const [availableSchemas, setAvailableSchemas] = useState<string[]>([])\n  const [selectedCollections, setSelectedCollections] = useState<Set<string>>(new Set())\n  const [selectedAttributes, setSelectedAttributes] = useState<Map<string, Set<string>>>(new Map())\n  const [availableAttributes, setAvailableAttributes] = useState<Map<string, string[]>>(new Map())\n  const [collapsedSections, setCollapsedSections] = useState<Set<string>>(new Set())\n  const [watchlistItems, setWatchlistItems] = useState<Set<string>>(new Set())\n  const [loadMoreLoading, setLoadMoreLoading] = useState(false)\n\n  const [isComparisonOpen, setIsComparisonOpen] = useState(false)\n  const [shareNft, setShareNft] = useState<NFTAsset | null>(null)\n  const [isShareModalOpen, setIsShareModalOpen] = useState(false)\n  const [offerNft, setOfferNft] = useState<NFTAsset | null>(null)\n  const [isOfferModalOpen, setIsOfferModalOpen] = useState(false)\n  const [chatNft, setChatNft] = useState<NFTAsset | null>(null)\n  const [isChatModalOpen, setIsChatModalOpen] = useState(false)\n  const [openDropdowns, setOpenDropdowns] = useState<Set<string>>(new Set())\n  \n  // Media zoom functionality (image or video)\n  const [zoomedImage, setZoomedImage] = useState<{ url: string; name: string; type: 'image' | 'video' } | null>(null)\n  const [showImageZoom, setShowImageZoom] = useState(false)\n\n  // Handle direct messaging to seller\n  const handleMessageSeller = (asset: NFTAsset) => {\n    setChatNft(asset)\n    setIsChatModalOpen(true)\n  }\n\n  const toggleDropdown = useCallback((assetId: string) => {\n    setOpenDropdowns(prev => {\n      const newSet = new Set(prev)\n      if (newSet.has(assetId)) {\n        newSet.delete(assetId)\n      } else {\n        newSet.clear() // Close all other dropdowns\n        newSet.add(assetId)\n      }\n      return newSet\n    })\n  }, [])\n\n  const closeAllDropdowns = useCallback(() => {\n    setOpenDropdowns(new Set())\n  }, [])\n\n  // Handle media zoom (image or video)\n  const handleMediaZoom = useCallback((imageUrl: string, videoUrl: string | null, name: string) => {\n    // Prefer video over image if available\n    const mediaUrl = videoUrl || imageUrl\n    const mediaType: 'image' | 'video' = videoUrl ? 'video' : 'image'\n    \n    // Process IPFS URLs\n    let processedUrl = mediaUrl\n    if (mediaUrl.startsWith('Qm') || mediaUrl.startsWith('baf')) {\n      processedUrl = `https://ipfs.io/ipfs/${mediaUrl}`\n    } else if (mediaUrl.startsWith('/ipfs/')) {\n      processedUrl = `https://ipfs.io${mediaUrl}`\n    } else if (mediaUrl.startsWith('ipfs://')) {\n      processedUrl = mediaUrl.replace('ipfs://', 'https://ipfs.io/ipfs/')\n    }\n    \n    setZoomedImage({ url: processedUrl, name, type: mediaType })\n    setShowImageZoom(true)\n  }, [])\n\n  // Close dropdowns when clicking outside\n  useEffect(() => {\n    const handleClickOutside = () => {\n      closeAllDropdowns()\n    }\n    \n    document.addEventListener('click', handleClickOutside)\n    return () => document.removeEventListener('click', handleClickOutside)\n  }, [closeAllDropdowns])\n\n  // Load marketplace data from API with pagination\n  const loadMarketplaceData = async (category: NFTCategory, page: number = 1) => {\n    if (page === 1) {\n      setLoading('loading')\n      setCurrentPage(1)\n      setAllNfts([])\n    } else {\n      setLoadMoreLoading(true)\n    }\n    \n    try {\n      let data: NFTAsset[] = []\n      const limit = 50 // Safe limit to avoid HTTP 400 errors\n      \n      switch (category) {\n        case 'pixals':\n          data = await apiService.getCheapestPixals(limit, page)\n          break\n        case 'waxrocks':\n          data = await apiService.getWaxRockPixals(limit, page)\n          break\n        case 'ingredients':\n          data = await apiService.getPixelIngredients(limit, page)\n          break\n        case 'bundles':\n          data = await apiService.getBundleListings(limit, page)\n          break\n        case 'friedfactory':\n          data = await apiService.getFriedFactoryNFTs(limit, page)\n          break\n        case 'cryptomuffins':\n          data = await apiService.getCryptoMuffinsNFTs(limit, page)\n          break\n        case 'akufishheads':\n          // For now, use partner listings until we have a specific API method\n          data = await apiService.getPartnerListings(limit, page)\n          break\n        case 'partners':\n          data = await apiService.getPartnerListings(limit, page)\n          break\n        case 'pxapproved':\n          data = await apiService.getPxApprovedListings(limit, page)\n          break\n        case 'ah_verified':\n          data = await apiService.getAHVerifiedListings(limit, page)\n          break\n        case 'all_wax':\n          data = await apiService.getAllWaxListings(limit, page)\n          break\n        default:\n          data = await apiService.getCheapestPixals(limit, page)\n      }\n      \n      if (page === 1) {\n        setAllNfts(data)\n      } else {\n        setAllNfts(prev => [...prev, ...data])\n        setCurrentPage(page)\n      }\n      \n      // Set total pages based on whether we got a full page of results\n      // If we got less than the limit, we're on the last page\n      if (data.length < limit) {\n        setTotalPages(page)\n      } else {\n        setTotalPages(page + 1) // At least one more page available\n      }\n      \n      setLoading('success')\n      setLoadMoreLoading(false)\n    } catch (error) {\n      const errorObj = error instanceof Error ? error : new Error('Failed to load marketplace data')\n      ErrorMessageService.logError('Marketplace.loadMarketplaceData', errorObj, {\n        category: activeCategory,\n        page,\n        limit: 50\n      })\n      setLoading('error')\n      setLoadMoreLoading(false)\n    }\n  }\n\n  // Load available schemas for filter sidebar\n  const loadAvailableSchemas = useCallback(async () => {\n    try {\n      // Get schemas from pixeljourney collection as the main collection\n      const schemas = await apiService.getCollectionSchemas('pixeljourney')\n      const schemaNames = schemas.map(schema => schema.schema_name)\n      setAvailableSchemas(schemaNames)\n    } catch (error) {\n      log.error('Failed to load available schemas', 'Marketplace', error as Error)\n      // Fallback to empty array if API fails\n      setAvailableSchemas([])\n    }\n  }, [])\n\n  useEffect(() => {\n    loadMarketplaceData(activeCategory)\n    loadAvailableSchemas()\n  }, [activeCategory, loadAvailableSchemas])\n\n\n\n  // Memoized USD price loading function with caching\n  const loadUsdPrices = useCallback(async (nfts: NFTAsset[]) => {\n    const prices: Record<string, string> = {}\n    \n    // Filter out NFTs that already have cached USD prices\n    const nftsNeedingPrices = nfts.filter(nft => nft.price && !usdPrices[nft.asset_id])\n    \n    if (nftsNeedingPrices.length === 0) return\n    \n    // Process in batches to avoid overwhelming the API\n    const batchSize = 10\n    for (let i = 0; i < nftsNeedingPrices.length; i += batchSize) {\n      const batch = nftsNeedingPrices.slice(i, i + batchSize)\n      \n      // Use Promise.allSettled for better error handling\n      const batchResults = await Promise.allSettled(batch.map(async (nft) => {\n        const usdPrice = await priceService.convertWaxToUSDAsync(nft.price!)\n        return { assetId: nft.asset_id, price: usdPrice }\n      }))\n      batchResults.forEach(result => {\n        if (result.status === 'fulfilled' && result.value) {\n          prices[result.value.assetId] = result.value.price\n        }\n      })\n      \n      // Add small delay between batches to prevent API rate limiting\n      if (i + batchSize < nftsNeedingPrices.length) {\n        await new Promise(resolve => setTimeout(resolve, 50))\n      }\n    }\n    \n    // Update state with new prices\n    setUsdPrices(prev => ({ ...prev, ...prices }))\n  }, [])\n\n  // Load USD prices when NFTs change\n  useEffect(() => {\n    if (filteredNfts.length > 0) {\n      loadUsdPrices(filteredNfts)\n    }\n  }, [filteredNfts, loadUsdPrices])\n\n  // Generate search suggestions\n  const generateSearchSuggestions = useCallback((query: string) => {\n    if (!query || query.length < 2) {\n      setSearchSuggestions([])\n      return\n    }\n    \n    const suggestions = new Map<string, SearchSuggestion>()\n    const queryLower = query.toLowerCase()\n    \n    allNfts.forEach(nft => {\n      // NFT name suggestions\n      if (nft.name.toLowerCase().includes(queryLower)) {\n        const key = `name:${nft.name}`\n        if (!suggestions.has(key)) {\n          suggestions.set(key, {\n            text: nft.name,\n            type: 'name',\n            count: 1\n          })\n        } else {\n          const existing = suggestions.get(key)!\n          existing.count = (existing.count || 0) + 1\n        }\n      }\n      \n      // Collection suggestions\n      if (nft.collection.toLowerCase().includes(queryLower)) {\n        const key = `collection:${nft.collection}`\n        if (!suggestions.has(key)) {\n          suggestions.set(key, {\n            text: nft.collection,\n            type: 'collection',\n            count: 1\n          })\n        } else {\n          const existing = suggestions.get(key)!\n          existing.count = (existing.count || 0) + 1\n        }\n      }\n    })\n    \n    const suggestionList = Array.from(suggestions.values())\n      .sort((a, b) => (b.count || 0) - (a.count || 0))\n      .slice(0, 8)\n    \n    setSearchSuggestions(suggestionList)\n  }, [allNfts])\n\n  // Handle advanced filter changes\n  const handleAdvancedFilterChange = useCallback((filters: SearchFilters) => {\n    setPriceRange(filters.priceRange)\n    setSortBy(filters.sortBy as 'price_asc' | 'price_desc' | 'name_asc' | 'name_desc' | 'date_newest' | 'date_oldest' | 'relevance')\n  }, [])\n\n  // Update search suggestions when search term changes\n  useEffect(() => {\n    generateSearchSuggestions(searchTerm)\n  }, [searchTerm, generateSearchSuggestions])\n\n  // Track cart items\n  useEffect(() => {\n    const updateCartItems = () => {\n      const cart = cartService.getCart()\n      setCartItems(new Set(cart.map(item => item.nft.asset_id)))\n    }\n\n    updateCartItems()\n    cartService.addListener(updateCartItems)\n    return () => cartService.removeListener(updateCartItems)\n  }, [])\n\n  // Track watchlist items\n  useEffect(() => {\n    const updateWatchlistItems = async () => {\n      const watchlist = await watchlistService.getWatchlist()\n      setWatchlistItems(new Set(watchlist.map(item => item.nft.asset_id)))\n    }\n\n    updateWatchlistItems()\n    watchlistService.addListener((watchlist) => {\n      setWatchlistItems(new Set(watchlist.map(item => item.nft.asset_id)))\n    })\n  }, [])\n\n\n\n\n\n  // Load more function\n  const handleLoadMore = useCallback(() => {\n    if (currentPage < totalPages && !loadMoreLoading) {\n      loadMarketplaceData(activeCategory, currentPage + 1)\n    }\n  }, [activeCategory, currentPage, totalPages, loadMoreLoading])\n\n  // Filter sidebar handlers\n  const toggleFilterSidebar = () => {\n    setIsFilterSidebarOpen(!isFilterSidebarOpen)\n  }\n\n  const closeFilterSidebar = () => {\n    setIsFilterSidebarOpen(false)\n  }\n\n  const handleSchemaToggle = useCallback((schema: string) => {\n    const newSchemas = new Set(selectedSchemas)\n    if (newSchemas.has(schema)) {\n      newSchemas.delete(schema)\n    } else {\n      newSchemas.add(schema)\n      // Auto-collapse schema section when selection is made\n      const newCollapsed = new Set(collapsedSections)\n      newCollapsed.add('schemas')\n      setCollapsedSections(newCollapsed)\n    }\n    setSelectedSchemas(newSchemas)\n  }, [selectedSchemas, collapsedSections])\n\n\n\n  const handleCollectionToggle = useCallback((collection: string) => {\n    const newSelected = new Set(selectedCollections)\n    if (newSelected.has(collection)) {\n      newSelected.delete(collection)\n    } else {\n      newSelected.add(collection)\n      // Auto-collapse collection section when selection is made\n      const newCollapsed = new Set(collapsedSections)\n      newCollapsed.add('collections')\n      setCollapsedSections(newCollapsed)\n    }\n    setSelectedCollections(newSelected)\n  }, [selectedCollections, collapsedSections])\n\n  const handleAttributeToggle = useCallback((attributeType: string, attributeValue: string) => {\n    const newSelected = new Map(selectedAttributes)\n    const currentValues = newSelected.get(attributeType) || new Set()\n    const newValues = new Set(currentValues)\n    \n    if (newValues.has(attributeValue)) {\n      newValues.delete(attributeValue)\n    } else {\n      newValues.add(attributeValue)\n    }\n    \n    if (newValues.size > 0) {\n      newSelected.set(attributeType, newValues)\n      // Auto-collapse attribute section when selection is made\n      const newCollapsed = new Set(collapsedSections)\n      newCollapsed.add('attributes')\n      setCollapsedSections(newCollapsed)\n    } else {\n      newSelected.delete(attributeType)\n    }\n    \n    setSelectedAttributes(newSelected)\n  }, [selectedAttributes, collapsedSections])\n\n  const toggleSectionCollapse = useCallback((sectionName: string) => {\n    const newCollapsed = new Set(collapsedSections)\n    if (newCollapsed.has(sectionName)) {\n      newCollapsed.delete(sectionName)\n    } else {\n      newCollapsed.add(sectionName)\n    }\n    setCollapsedSections(newCollapsed)\n  }, [collapsedSections])\n\n  const clearAllFilters = () => {\n    setPriceRange({ min: '', max: '' })\n    setSelectedSchemas(new Set())\n    setSelectedCollections(new Set())\n    setSelectedAttributes(new Map())\n    setDateRange({ start: '', end: '' })\n    setSortBy('price_asc')\n  }\n\n  // Memoized filtering and sorting functions for better performance\n  const filteredAndSortedNfts = useMemo(() => {\n    let filtered = [...allNfts]\n    \n    // Apply search filter\n    if (searchTerm) {\n      const searchLower = searchTerm.toLowerCase()\n      filtered = filtered.filter(nft => \n        nft.name.toLowerCase().includes(searchLower) ||\n        nft.collection.toLowerCase().includes(searchLower) ||\n        (nft.schema && nft.schema.toLowerCase().includes(searchLower))\n      )\n    }\n    \n    // Apply price range filter\n    if (priceRange.min || priceRange.max) {\n      filtered = filtered.filter(nft => {\n        if (!nft.price) return false\n        const price = parseFloat(nft.price)\n        const min = priceRange.min ? parseFloat(priceRange.min) : 0\n        const max = priceRange.max ? parseFloat(priceRange.max) : Infinity\n        return price >= min && price <= max\n      })\n    }\n    \n    // Apply schema filter\n    if (selectedSchemas.size > 0) {\n      filtered = filtered.filter(nft => \n        nft.schema && selectedSchemas.has(nft.schema)\n      )\n    }\n    \n\n    \n    // Apply collection filter\n    if (selectedCollections.size > 0) {\n      filtered = filtered.filter(nft => \n        selectedCollections.has(nft.collection)\n      )\n    }\n    \n    // Apply attribute filter\n    if (selectedAttributes.size > 0) {\n      filtered = filtered.filter(nft => {\n        if (!nft.data || !nft.data.attributes || !Array.isArray(nft.data.attributes)) return false\n        \n        for (const [attributeType, selectedValues] of selectedAttributes) {\n          const nftAttribute = nft.data.attributes.find((attr: { key: string; value: string }) => attr.key === attributeType)\n          if (!nftAttribute || !selectedValues.has(nftAttribute.value)) {\n            return false\n          }\n        }\n        return true\n      })\n    }\n    \n    // Apply sorting\n    filtered.sort((a, b) => {\n      switch (sortBy) {\n        case 'price_asc':\n          return (parseFloat(a.price || '0')) - (parseFloat(b.price || '0'))\n        case 'price_desc':\n          return (parseFloat(b.price || '0')) - (parseFloat(a.price || '0'))\n        case 'name_asc':\n          return a.name.localeCompare(b.name)\n        case 'name_desc':\n          return b.name.localeCompare(a.name)\n        case 'newest':\n          return new Date(b.created_at_time || 0).getTime() - new Date(a.created_at_time || 0).getTime()\n        case 'oldest':\n          return new Date(a.created_at_time || 0).getTime() - new Date(b.created_at_time || 0).getTime()\n        default:\n          return 0\n      }\n    })\n    \n    return filtered\n  }, [allNfts, searchTerm, priceRange, selectedSchemas, selectedCollections, selectedAttributes, sortBy])\n  \n  // Update filteredNfts when memoized result changes\n  useEffect(() => {\n    setFilteredNfts(filteredAndSortedNfts)\n  }, [filteredAndSortedNfts])\n\n  // Extract available attributes from NFT data (filtered by selected collections and schemas)\n  useEffect(() => {\n    const attributeMap = new Map<string, string[]>()\n    \n    // Filter NFTs based on selected collections and schemas\n    let filteredNfts = allNfts\n    \n    if (selectedCollections.size > 0) {\n      filteredNfts = filteredNfts.filter(nft => selectedCollections.has(nft.collection))\n    }\n    \n    if (selectedSchemas.size > 0) {\n      filteredNfts = filteredNfts.filter(nft => nft.schema && selectedSchemas.has(nft.schema))\n    }\n    \n    filteredNfts.forEach(nft => {\n      if (nft.data && nft.data.attributes && Array.isArray(nft.data.attributes)) {\n        nft.data.attributes.forEach((attr: { key: string; value: string }) => {\n          if (!attributeMap.has(attr.key)) {\n            attributeMap.set(attr.key, [])\n          }\n          const values = attributeMap.get(attr.key)!\n          if (!values.includes(attr.value)) {\n            values.push(attr.value)\n          }\n        })\n      }\n    })\n    \n    // Sort attribute values\n    attributeMap.forEach((values, _key) => {\n      values.sort()\n    })\n    \n    setAvailableAttributes(attributeMap)\n    \n    // Clear selected attributes that are no longer available\n    setSelectedAttributes(prev => {\n      const newSelected = new Map<string, Set<string>>()\n      prev.forEach((values, key) => {\n        if (attributeMap.has(key)) {\n          const availableValues = attributeMap.get(key)!\n          const filteredValues = new Set<string>()\n          values.forEach(value => {\n            if (availableValues.includes(value)) {\n              filteredValues.add(value)\n            }\n          })\n          if (filteredValues.size > 0) {\n            newSelected.set(key, filteredValues)\n          }\n        }\n      })\n      return newSelected\n    })\n  }, [allNfts, selectedCollections, selectedSchemas])\n\n  // Filter available schemas based on selected collections\n  useEffect(() => {\n    if (selectedCollections.size > 0) {\n      const filteredSchemas = [...new Set(\n        allNfts\n          .filter(nft => selectedCollections.has(nft.collection))\n          .map(nft => nft.schema)\n          .filter(schema => schema)\n      )].sort()\n      \n      setAvailableSchemas(filteredSchemas)\n      \n      // Clear selected schemas that are no longer available\n      setSelectedSchemas(prev => {\n        const newSelected = new Set<string>()\n        prev.forEach(schema => {\n          if (filteredSchemas.includes(schema)) {\n            newSelected.add(schema)\n          }\n        })\n        return newSelected\n      })\n    } else {\n      // If no collections selected, show all schemas\n      const allSchemas = [...new Set(\n        allNfts.map(nft => nft.schema).filter(schema => schema)\n      )].sort()\n      \n      setAvailableSchemas(allSchemas)\n    }\n  }, [allNfts, selectedCollections])\n\n  const applyAdvancedFilters = useCallback((nfts: NFTAsset[]) => {\n    let filtered = [...nfts]\n\n    // Price range filter\n    if (priceRange.min || priceRange.max) {\n      filtered = filtered.filter(nft => {\n        if (!nft.price) return false\n        const price = parseFloat(nft.price.replace(' WAX', ''))\n        const min = priceRange.min ? parseFloat(priceRange.min) : 0\n        const max = priceRange.max ? parseFloat(priceRange.max) : Infinity\n        return price >= min && price <= max\n      })\n    }\n\n    // Schema filter\n    if (selectedSchemas.size > 0) {\n      filtered = filtered.filter(nft => selectedSchemas.has(nft.schema))\n    }\n\n\n\n    // Collection filter\n    if (selectedCollections.size > 0) {\n      filtered = filtered.filter(nft => {\n        return selectedCollections.has(nft.collection)\n      })\n    }\n\n    // Date range filter (Note: created_at_time not available in NFTAsset)\n    if (dateRange.start || dateRange.end) {\n      // Skip date filtering as created_at_time is not available in NFTAsset interface\n    }\n\n    // Sort\n    filtered.sort((a, b) => {\n      const priceA = a.price ? parseFloat(a.price.replace(' WAX', '')) : 0\n      const priceB = b.price ? parseFloat(b.price.replace(' WAX', '')) : 0\n      \n      switch (sortBy) {\n        case 'price_asc':\n          return priceA - priceB\n        case 'price_desc':\n          return priceB - priceA\n        case 'name_asc':\n          return a.name.localeCompare(b.name)\n        case 'name_desc':\n          return b.name.localeCompare(a.name)\n        // Rarity sorting removed - Pixal PFPs don't have rarity attributes\n        // WaxRock gems could be sorted by rarity if needed in the future\n        case 'date_newest': {\n          const timeA = 0 // created_at_time not available in NFTAsset\n          const timeB = 0\n          return timeB - timeA\n        }\n        case 'date_oldest': {\n          const timeA = 0 // created_at_time not available in NFTAsset\n          const timeB = 0\n          return timeA - timeB\n        }\n        default:\n          return 0\n      }\n    })\n\n    return filtered\n  }, [priceRange, selectedSchemas, selectedCollections, sortBy])\n\n  // Extract available collections when allNfts changes\n  useEffect(() => {\n    const collections = Array.from(new Set(allNfts.map(nft => nft.collection)))\n    setAvailableCollections(collections)\n  }, [allNfts])\n\n  useEffect(() => {\n    let filtered = allNfts.filter(nft => {\n      const matchesSearch = nft.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                           (typeof nft.collection === 'string' ? nft.collection.toLowerCase() : '').includes(searchTerm.toLowerCase())\n      \n      return matchesSearch\n    })\n    \n    // Apply advanced filters\n    filtered = applyAdvancedFilters(filtered)\n    \n    // For load more functionality, show all filtered items\n    setFilteredNfts(filtered)\n  }, [allNfts, searchTerm, priceRange, selectedSchemas, selectedCollections, dateRange, sortBy, applyAdvancedFilters])\n\n  // Transaction tracking is now handled directly by WharfKit\n  const { purchaseNFT } = useWallet()\n\n  const handlePurchase = useCallback(async (nft: NFTAsset) => {\n    try {\n      // Check if user is logged in\n      if (!wharfKitService.isLoggedIn()) {\n        showWarning('Please connect your wallet to purchase NFTs')\n        return\n      }\n\n      // Execute purchase transaction directly with WharfKit\n      log.debug('Purchasing NFT', 'Marketplace', { nft })\n      if (!nft.sale_id || !nft.price) {\n        showError('Purchase Error', 'NFT is not available for purchase')\n        return\n      }\n      \n      // Use direct WharfKit purchase (no duplicate transaction calls)\n      await purchaseNFT(nft.sale_id, nft.price.replace(' WAX', ''))\n      \n      showSuccess(`Successfully purchased ${nft.name}!`)\n      \n      // Refresh marketplace data to reflect the purchase\n      loadMarketplaceData(activeCategory)\n      \n    } catch (error) {\n      log.error('Purchase failed', 'Marketplace', error instanceof Error ? error : new Error(String(error)))\n      showError(`Purchase failed: ${error instanceof Error ? error.message : 'Unknown error'}`)\n    }\n  }, [activeCategory, showWarning, showSuccess, showError, loadMarketplaceData])\n\n  const handleSellerClick = useCallback((seller: string) => {\n    navigate(`/user-profile-lookup?user=${encodeURIComponent(seller)}`)\n  }, [navigate])\n\n  const handleCollectionClick = useCallback((collection: string) => {\n    navigate(`/collections/${encodeURIComponent(collection)}`)\n  }, [navigate])\n\n  const handleAssetClick = useCallback((nft: NFTAsset) => {\n    // If items are selected, toggle selection instead of navigating\n    if (selectedItems.size > 0) {\n      handleSelectItem(nft.asset_id)\n      return\n    }\n    \n    // Navigate to listing detail page if it's a marketplace listing\n    if (nft.sale_id) {\n      navigate(`/listings/${nft.sale_id}`)\n    } else {\n      // Fallback to asset detail page for non-marketplace items\n      navigate(`/assets/${nft.asset_id}`)\n    }\n  }, [navigate, selectedItems.size])\n\n  const handleSelectItem = useCallback((assetId: string) => {\n    const newSelected = new Set(selectedItems)\n    if (newSelected.has(assetId)) {\n      newSelected.delete(assetId)\n    } else {\n      newSelected.add(assetId)\n    }\n    setSelectedItems(newSelected)\n  }, [selectedItems])\n\n  const handleSelectAll = useCallback(() => {\n    if (selectedItems.size === filteredNfts.length) {\n      setSelectedItems(new Set())\n    } else {\n      setSelectedItems(new Set(filteredNfts.map(nft => nft.asset_id)))\n    }\n  }, [selectedItems, filteredNfts])\n\n  const handleBulkAddToCart = useCallback(() => {\n    const selectedNfts = filteredNfts.filter(nft => selectedItems.has(nft.asset_id))\n    selectedNfts.forEach(nft => {\n      if (!cartItems.has(nft.asset_id)) {\n        cartService.addToCart(nft)\n      }\n    })\n    setSelectedItems(new Set())\n  }, [filteredNfts, selectedItems, cartItems])\n\n  return (\n    <div className=\"marketplace\">\n      <div className=\"container\">\n        {/* Header */}\n        <div className=\"marketplace-header\">\n          <div className=\"marketplace-header-content\">\n            <div className=\"marketplace-header-text\">\n              <h1 className=\"marketplace-title\">Pixel Journey Marketplace</h1>\n              <p className=\"marketplace-subtitle\">\n                Discover, collect, and trade unique digital assets from the Pixel Journey ecosystem. \n                This marketplace serves all WAX users, with full market access unlocked for Pixal PFP holders.\n              </p>\n            </div>\n\n          </div>\n        </div>\n\n        {/* Filters and Search */}\n        <div className=\"marketplace-filters\">\n          <AdvancedSearch\n            searchTerm={searchTerm}\n            onSearchChange={setSearchTerm}\n            suggestions={searchSuggestions}\n            placeholder=\"Search items, collections...\"\n            showFilters={true}\n            onFilterChange={handleAdvancedFilterChange}\n            className=\"marketplace-search\"\n          />\n          \n          <div className=\"marketplace-controls\">\n            <div className=\"category-tabs-container\">\n              <h3 className=\"category-section-title\">Listings</h3>\n              <div className=\"category-tabs-wrapper\">\n                <div className=\"category-tabs\">\n                <button \n                  className={`category-tab ${activeCategory === 'pixals' ? 'active' : ''}`}\n                  onClick={() => setActiveCategory('pixals')}\n                  aria-label=\"Filter by Pixals category\"\n                  aria-pressed={activeCategory === 'pixals'}\n                >\n                  Pixals\n                </button>\n                <button \n                  className={`category-tab ${activeCategory === 'waxrocks' ? 'active' : ''}`}\n                  onClick={() => setActiveCategory('waxrocks')}\n                  aria-label=\"Filter by WaxRocks category\"\n                  aria-pressed={activeCategory === 'waxrocks'}\n                >\n                  WaxRocks\n                </button>\n                <button \n                  className={`category-tab ${activeCategory === 'ingredients' ? 'active' : ''}`}\n                  onClick={() => setActiveCategory('ingredients')}\n                  aria-label=\"Filter by Ingredients category\"\n                  aria-pressed={activeCategory === 'ingredients'}\n                >\n                  Ingredients\n                </button>\n                <button \n                  className={`category-tab ${activeCategory === 'bundles' ? 'active' : ''}`}\n                  onClick={() => setActiveCategory('bundles')}\n                  aria-label=\"Filter by Bundles category\"\n                  aria-pressed={activeCategory === 'bundles'}\n                >\n                  📦 Bundles\n                </button>\n                <select \n                  className=\"others-select\"\n                  value={['friedfactory', 'cryptomuffins', 'akufishheads', 'partners', 'pxapproved', 'ah_verified', 'all_wax'].includes(activeCategory) ? activeCategory : 'others'}\n                  onChange={(e) => {\n                    const value = e.target.value\n                    if (value !== 'others') {\n                      setActiveCategory(value as NFTCategory)\n                    }\n                  }}\n                  aria-label=\"Select additional marketplace categories\"\n                >\n                  <option value=\"others\">Others</option>\n                  <optgroup label=\"Marketplace\">\n                    <option value=\"pxapproved\">PxApproved</option>\n                    <option value=\"ah_verified\">All AH Verified (Pixals holders+ only)</option>\n                    <option value=\"all_wax\">All Wax Listings (Pixals holders+ only)</option>\n                  </optgroup>\n                  <optgroup label=\"Partners\">\n                    <option value=\"friedfactory\">Fried Factory</option>\n                    <option value=\"cryptomuffins\">CryptoMuffins</option>\n                    <option value=\"akufishheads\">Aku Fish Heads</option>\n                  </optgroup>\n                </select>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"filter-sort-section\">\n              <h3 className=\"filter-sort-title\">Filter & Sort</h3>\n              <div className=\"filter-sort-controls\">\n                <select \n                  className=\"sort-dropdown\"\n                  value={sortBy}\n                  onChange={(e) => setSortBy(e.target.value as 'price_asc' | 'price_desc' | 'name_asc' | 'name_desc' | 'date_newest' | 'date_oldest')}\n                >\n                  <option value=\"price_asc\">Price: Low to High</option>\n                  <option value=\"price_desc\">Price: High to Low</option>\n                  <option value=\"name_asc\">Name: A to Z</option>\n                  <option value=\"name_desc\">Name: Z to A</option>\n                  {/* Rarity sorting removed - Pixal PFPs don't have rarity attributes */}\n                  <option value=\"date_newest\">Newest Listings</option>\n                  <option value=\"date_oldest\">Oldest Listings</option>\n                </select>\n                \n                <button \n                  className=\"filter-toggle-btn\"\n                  onClick={toggleFilterSidebar}\n                  title=\"Advanced Filters\"\n                >\n                  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z\" />\n                  </svg>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Loading State */}\n        {loading === 'loading' && (\n          <div className=\"loading-grid\">\n            {Array.from({ length: 8 }).map((_, index) => (\n              <div key={index} className=\"nft-card loading\">\n                <div className=\"nft-image-placeholder\"></div>\n                <div className=\"nft-info\">\n                  <div className=\"loading-text\"></div>\n                  <div className=\"loading-text short\"></div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Error State */}\n        {loading === 'error' && (\n          <ErrorMessage \n            errorType=\"LOAD_FAILED\"\n            onRetry={() => loadMarketplaceData(activeCategory)}\n            showRetry={true}\n          />\n        )}\n\n        {/* Bulk Actions Bar */}\n        {selectedItems.size > 0 && (\n          <div className=\"bulk-actions-bar\">\n            <div className=\"bulk-actions-info\">\n              <span>{selectedItems.size} item{selectedItems.size !== 1 ? 's' : ''} selected</span>\n            </div>\n            <div className=\"bulk-actions-buttons\">\n              <button \n                className=\"bulk-btn bulk-cart\"\n                onClick={handleBulkAddToCart}\n                aria-label={`Add ${selectedItems.size} selected items to cart`}\n              >\n                Add Selected to Cart\n              </button>\n              <button \n                className=\"bulk-btn bulk-compare\"\n                onClick={() => setIsComparisonOpen(true)}\n                disabled={selectedItems.size < 2 || selectedItems.size > 4}\n                title={selectedItems.size < 2 ? 'Select 2-4 items to compare' : selectedItems.size > 4 ? 'Maximum 4 items can be compared' : 'Compare selected items'}\n                aria-label={`Compare ${selectedItems.size} selected items`}\n              >\n                Compare ({selectedItems.size})\n              </button>\n              <button \n                className=\"bulk-btn bulk-clear\"\n                onClick={() => setSelectedItems(new Set())}\n                aria-label=\"Clear all selected items\"\n              >\n                Clear Selection\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* Select All and Load More Buttons */}\n        {loading === 'success' && filteredNfts.length > 0 && (\n          <div className=\"select-all-container\">\n            <button \n              className=\"select-all-btn\"\n              onClick={handleSelectAll}\n              aria-label={selectedItems.size === filteredNfts.length ? `Deselect all ${filteredNfts.length} items` : `Select all ${filteredNfts.length} items`}\n            >\n              {selectedItems.size === filteredNfts.length ? 'Deselect All' : 'Select All'}\n            </button>\n            {currentPage < totalPages && (\n              <button \n                className=\"load-more-btn load-more-top\"\n                onClick={handleLoadMore}\n                disabled={loadMoreLoading}\n                aria-label={loadMoreLoading ? 'Loading more items' : 'Load more marketplace items'}\n              >\n                {loadMoreLoading ? 'Loading...' : 'Load More'}\n              </button>\n            )}\n          </div>\n        )}\n\n        {/* NFT Grid */}\n        {loading === 'success' && (\n          <div className=\"nft-grid\">\n            {filteredNfts.map((nft) => (\n              <div key={nft.asset_id} className={`nft-card ${selectedItems.has(nft.asset_id) ? 'selected' : ''}`}>\n                <div className=\"nft-select-checkbox\">\n                  <input \n                    type=\"checkbox\"\n                    checked={selectedItems.has(nft.asset_id)}\n                    onChange={() => handleSelectItem(nft.asset_id)}\n                    className=\"select-checkbox\"\n                  />\n                </div>\n                <div className=\"nft-image-container\">\n                  <MediaRenderer\n                    imageUrl={getAssetImageUrl(nft)}\n                    videoUrl={getAssetVideoUrl(nft)}\n                    className=\"nft-image\"\n                    alt={nft.name}\n                    autoPlay={true}\n                    loop={true}\n                    enableAnimations={settings.enableAnimatedNFTs}\n                  />\n                  <div \n                    className=\"zoom-overlay\"\n                    onClick={() => handleMediaZoom(getAssetImageUrl(nft) || '', getAssetVideoUrl(nft) || '', nft.name || `Asset #${nft.asset_id}`)}\n                    title=\"Click to zoom\"\n                  >\n                    <svg className=\"zoom-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                      <circle cx=\"11\" cy=\"11\" r=\"8\"></circle>\n                      <path d=\"m21 21-4.35-4.35\"></path>\n                      <path d=\"M11 8v6M8 11h6\"></path>\n                    </svg>\n                  </div>\n                  {(nft.template_mint || nft.max_supply !== undefined) && (\n                    <div className=\"mint-badge\">\n                      {nft.template_mint !== undefined && nft.template_mint !== null ? nft.template_mint : '?'}/{nft.max_supply === '0' || nft.max_supply === undefined || nft.max_supply === null ? '∞' : nft.max_supply}\n                    </div>\n                  )}\n                </div>\n                \n                <div className=\"nft-info\">\n                  <div className=\"nft-header\">\n                    <h3 className=\"nft-name\"><span className=\"asset-link\" onClick={() => handleAssetClick(nft)}>{nft.name}</span></h3>\n                    <p className=\"nft-collection\"><span className=\"collection-link\" onClick={() => handleCollectionClick(nft.collection)}>{nft.collection}</span></p>\n                  </div>\n                  <div className=\"nft-price-container\">\n                    <div className=\"nft-prices-div\">\n                    <div className=\"nft-price\">{nft.price}</div>\n                    <div className=\"nft-price-usd\">{usdPrices[nft.asset_id] || '$0.00'}</div>\n                  </div>\n                    {nft.seller && <p className=\"nft-seller\">🧑‍💼 <span className=\"seller-link\" onClick={() => handleSellerClick(nft.seller!)}>{nft.seller}</span></p>}\n                  \n                  </div>\n                  \n                  <div className=\"nft-actions\">\n                    <div className=\"nft-actions-row nft-actions-main\">\n                      <button \n                        className=\"btn-buy-now\"\n                        onClick={() => handlePurchase(nft)}\n                        title=\"Buy now\"\n                        aria-label={`Buy ${nft.name} for ${nft.price}`}\n                        type=\"button\"\n                      >\n                        <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" aria-hidden=\"true\">\n                          <path d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                        </svg>\n                        Buy Now\n                      </button>\n                      <button \n                        className=\"details-btn\"\n                        onClick={() => {\n                          setSelectedNft(nft)\n                          setIsModalOpen(true)\n                        }}\n                        title=\"View Details\"\n                        aria-label={`View details for ${nft.name}`}\n                        type=\"button\"\n                      >\n                        <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" aria-hidden=\"true\">\n                          <circle cx=\"11\" cy=\"11\" r=\"8\"></circle>\n                          <path d=\"m21 21-4.35-4.35\"></path>\n                        </svg>\n                        Info\n                      </button>\n                    </div>\n                    <div className=\"nft-actions-row nft-actions-icons\">\n                      <button \n                        className={`btn-cart ${cartItems.has(nft.asset_id) ? 'in-cart' : ''}`}\n                        onClick={() => {\n                          if (cartItems.has(nft.asset_id)) {\n                            cartService.removeFromCart(nft.asset_id)\n                          } else {\n                            const added = cartService.addToCart(nft)\n                            if (!added) {\n                              showWarning('Item is already in your cart!')\n                            }\n                          }\n                        }}\n                        title={cartItems.has(nft.asset_id) ? 'Remove from cart' : 'Add to cart'}\n                        aria-label={cartItems.has(nft.asset_id) ? `Remove ${nft.name} from cart` : `Add ${nft.name} to cart`}\n                        type=\"button\"\n                      >\n                        <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" aria-hidden=\"true\">\n                          {cartItems.has(nft.asset_id) ? (\n                            <>\n                              <polyline points=\"3,6 5,6 21,6\"></polyline>\n                              <path d=\"m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2\"></path>\n                            </>\n                          ) : (\n                            <>\n                              <circle cx=\"9\" cy=\"21\" r=\"1\"></circle>\n                              <circle cx=\"20\" cy=\"21\" r=\"1\"></circle>\n                              <path d=\"m1 1 4 4 2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6\"></path>\n                            </>\n                          )}\n                        </svg>\n                      </button>\n                      <button \n                        className=\"btn-make-offer\"\n                        onClick={(e) => {\n                          e.stopPropagation()\n                          setOfferNft(nft)\n                          setIsOfferModalOpen(true)\n                        }}\n                        title=\"Offer\"\n                        type=\"button\"\n                      >\n                        <svg viewBox=\"0 -8 72 72\" fill=\"currentColor\">\n                  <path d=\"M64,12.78v17s-3.63.71-4.38.81-3.08.85-4.78-.78C52.22,27.25,42.93,18,42.93,18a3.54,3.54,0,0,0-4.18-.21c-2.36,1.24-5.87,3.07-7.33,3.78a3.37,3.37,0,0,1-5.06-2.64,3.44,3.44,0,0,1,2.1-3c3.33-2,10.36-6,13.29-7.52,1.78-1,3.06-1,5.51,1C50.27,12,53,14.27,53,14.27a2.75,2.75,0,0,0,2.26.43C58.63,14,64,12.78,64,12.78ZM27,41.5a3,3,0,0,0-3.55-4.09,3.07,3.07,0,0,0-.64-3,3.13,3.13,0,0,0-3-.75,3.07,3.07,0,0,0-.65-3,3.38,3.38,0,0,0-4.72.13c-1.38,1.32-2.27,3.72-1,5.14s2.64.55,3.72.3c-.3,1.07-1.2,2.07-.09,3.47s2.64.55,3.72.3c-.3,1.07-1.16,2.16-.1,3.46s2.84.61,4,.25c-.45,1.15-1.41,2.39-.18,3.79s4.08.75,5.47-.58a3.32,3.32,0,0,0,.3-4.68A3.18,3.18,0,0,0,27,41.5Zm25.35-8.82L41.62,22a3.53,3.53,0,0,0-3.77-.68c-1.5.66-3.43,1.56-4.89,2.24a8.15,8.15,0,0,1-3.29,1.1,5.59,5.59,0,0,1-3-10.34C29,12.73,34.09,10,34.09,10a6.46,6.46,0,0,0-5-2C25.67,8,18.51,12.7,18.51,12.7a5.61,5.61,0,0,1-4.93.13L8,10.89v19.4s1.59.46,3,1a6.33,6.33,0,0,1,1.56-2.47,6.17,6.17,0,0,1,8.48-.06,5.4,5.4,0,0,1,1.34,2.37,5.49,5.49,0,0,1,2.29,1.4A5.4,5.4,0,0,1,26,34.94a5.47,5.47,0,0,1,3.71,4,5.38,5.38,0,0,1,2.39,1.43,5.65,5.65,0,0,1,1.48,4.89a0,0,0,0,1,0,0s.8.9,1.29,1.39a2.46,2.46,0,0,0,3.48-3.48s2,2.48,4.28,1c2-1.4,1.69-3.06.74-4a3.19,3.19,0,0,0,4.77.13,2.45,2.45,0,0,0,.13-3.3s1.33,1.81,4,.12c1.89-1.6,1-3.43,0-4.39Z\"/>\n                </svg>\n                      </button>\n                                            <button \n                        className=\"btn-message\"\n                        onClick={() => handleMessageSeller(nft)}\n                        title=\"Send Direct Message (1000 PXJ)\"\n                        disabled={!nft.seller}\n                      >\n                        <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                          <path d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\"></path>\n                        </svg>\n                      </button>\n                      <div className=\"other-actions-dropdown\">\n                        <button \n                          className=\"btn-other-actions\"\n                          onClick={(e) => {\n                            e.stopPropagation()\n                            toggleDropdown(nft.asset_id)\n                          }}\n                          title=\"More Actions\"\n                        >\n                          <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                            <circle cx=\"12\" cy=\"12\" r=\"1\"></circle>\n                            <circle cx=\"19\" cy=\"12\" r=\"1\"></circle>\n                            <circle cx=\"5\" cy=\"12\" r=\"1\"></circle>\n                          </svg>\n                        </button>\n                        <div className={`other-actions-menu ${openDropdowns.has(nft.asset_id) ? 'open' : ''}`}>\n                          <button \n                            className=\"other-actions-item\"\n                            onClick={(e) => {\n                              e.stopPropagation()\n                              handleAssetClick(nft)\n                              closeAllDropdowns()\n                            }}\n                          >\n                            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                              <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\"></path>\n                              <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\n                            </svg>\n                            View Full Listing\n                          </button>\n                          <button \n                            className=\"other-actions-item\"\n                            onClick={(e) => {\n                              e.stopPropagation()\n                              setShareNft(nft)\n                              setIsShareModalOpen(true)\n                              closeAllDropdowns()\n                            }}\n                          >\n                            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                              <path d=\"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8\"></path>\n                              <polyline points=\"16,6 12,2 8,6\"></polyline>\n                              <line x1=\"12\" y1=\"2\" x2=\"12\" y2=\"15\"></line>\n                            </svg>\n                            Share NFT\n                          </button>\n                          <button \n                            className={`other-actions-item ${watchlistItems.has(nft.asset_id) ? 'in-watchlist' : ''}`}\n                            onClick={async (e) => {\n                              e.stopPropagation()\n                              if (watchlistItems.has(nft.asset_id)) {\n                                await watchlistService.removeFromWatchlist(nft.asset_id)\n                              } else {\n                                const added = await watchlistService.addToWatchlist(nft)\n                                if (!added) {\n                                  showWarning('Item is already in your watchlist!')\n                                }\n                              }\n                              closeAllDropdowns()\n                            }}\n                          >\n                            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                              {watchlistItems.has(nft.asset_id) ? (\n                                <path d=\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z\" fill=\"currentColor\"></path>\n                              ) : (\n                                <path d=\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z\"></path>\n                              )}\n                            </svg>\n                            {watchlistItems.has(nft.asset_id) ? 'Remove from Watchlist' : 'Add to Watchlist'}\n                          </button>\n                        </div>\n                      </div>\n\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {loading === 'success' && filteredNfts.length === 0 && (\n          <div className=\"marketplace-empty\">\n            <svg className=\"empty-icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n            </svg>\n            <h3>No items found</h3>\n            <p>Try adjusting your search or filter criteria</p>\n          </div>\n        )}\n\n        {/* Load More Button */}\n        {loading === 'success' && currentPage < totalPages && (\n          <div className=\"load-more-container\">\n            <button \n              className=\"load-more-btn\"\n              onClick={() => loadMarketplaceData(activeCategory, currentPage + 1)}\n              disabled={loadMoreLoading}\n            >\n              {loadMoreLoading ? 'Loading...' : 'Load More'}\n            </button>\n            <div className=\"pagination-info\">\n              Showing {filteredNfts.length} items • Loaded {currentPage} of {totalPages > currentPage ? totalPages + '+' : totalPages} pages\n            </div>\n          </div>\n        )}\n\n        {/* Show total count when all items are loaded */}\n        {loading === 'success' && currentPage >= totalPages && filteredNfts.length > 0 && (\n          <div className=\"load-more-container\">\n            <div className=\"pagination-info\">\n              Showing all {filteredNfts.length} items\n            </div>\n          </div>\n        )}\n      </div>\n      \n      {/* Filter Sidebar */}\n      {isFilterSidebarOpen && (\n        <>\n          <div className=\"filter-sidebar-overlay\" onClick={closeFilterSidebar}></div>\n          <div className=\"filter-sidebar\">\n            <div className=\"filter-sidebar-header\">\n              <h3>Advanced Filters</h3>\n              <button className=\"close-sidebar-btn\" onClick={closeFilterSidebar}>\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n            \n            <div className=\"filter-section\">\n              <div className=\"filter-section-header\" onClick={() => toggleSectionCollapse('collections')}>\n                <h4>Collections</h4>\n                <button className=\"collapse-toggle\">\n                  <svg \n                    width=\"16\" \n                    height=\"16\" \n                    viewBox=\"0 0 24 24\" \n                    fill=\"none\" \n                    stroke=\"currentColor\"\n                    className={collapsedSections.has('collections') ? 'collapsed' : ''}\n                  >\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                  </svg>\n                </button>\n              </div>\n              {!collapsedSections.has('collections') && (\n                <div className=\"collection-checkboxes\">\n                {availableCollections.slice(0, 8).map(collection => (\n                  <div key={collection} className=\"collection-item\">\n                    <label className=\"collection-checkbox\">\n                      <input\n                        type=\"checkbox\"\n                        checked={selectedCollections.has(collection)}\n                        onChange={() => handleCollectionToggle(collection)}\n                      />\n                      <span className=\"checkmark\"></span>\n                      {collection}\n                    </label>\n                    <a \n                      href={`/analytics/${encodeURIComponent(collection)}`}\n                      className=\"analytics-link\"\n                      title={`View ${collection} analytics`}\n                      onClick={(e) => e.stopPropagation()}\n                    >\n                      📊\n                    </a>\n                  </div>\n                ))}\n                </div>\n              )}\n            </div>\n            \n            <div className=\"filter-section\">\n              <div className=\"filter-section-header\" onClick={() => toggleSectionCollapse('schemas')}>\n                <h4>Schema Type</h4>\n                <button className=\"collapse-toggle\">\n                  <svg \n                    width=\"16\" \n                    height=\"16\" \n                    viewBox=\"0 0 24 24\" \n                    fill=\"none\" \n                    stroke=\"currentColor\"\n                    className={collapsedSections.has('schemas') ? 'collapsed' : ''}\n                  >\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                  </svg>\n                </button>\n              </div>\n              {!collapsedSections.has('schemas') && (\n                <div className=\"schema-checkboxes\">\n                {availableSchemas.length > 0 ? (\n                  availableSchemas.map(schema => (\n                    <label key={schema} className=\"schema-checkbox\">\n                      <input\n                        type=\"checkbox\"\n                        checked={selectedSchemas.has(schema)}\n                        onChange={() => handleSchemaToggle(schema)}\n                      />\n                      <span className=\"checkmark\"></span>\n                      {schema.charAt(0).toUpperCase() + schema.slice(1)}\n                    </label>\n                  ))\n                ) : (\n                  <div className=\"loading-schemas\">Loading schemas...</div>\n                )}\n                </div>\n              )}\n            </div>\n            \n            <div className=\"filter-section\">\n              <div className=\"filter-section-header\" onClick={() => toggleSectionCollapse('price')}>\n                <h4>Price Range (WAX)</h4>\n                <button className=\"collapse-toggle\">\n                  <svg \n                    width=\"16\" \n                    height=\"16\" \n                    viewBox=\"0 0 24 24\" \n                    fill=\"none\" \n                    stroke=\"currentColor\"\n                    className={collapsedSections.has('price') ? 'collapsed' : ''}\n                  >\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                  </svg>\n                </button>\n              </div>\n              {!collapsedSections.has('price') && (\n                <div className=\"price-range-inputs\">\n                <input\n                  type=\"number\"\n                  placeholder=\"Min\"\n                  value={priceRange.min}\n                  onChange={(e) => setPriceRange(prev => ({ ...prev, min: e.target.value }))}\n                  className=\"price-input\"\n                />\n                <span>to</span>\n                <input\n                  type=\"number\"\n                  placeholder=\"Max\"\n                  value={priceRange.max}\n                  onChange={(e) => setPriceRange(prev => ({ ...prev, max: e.target.value }))}\n                  className=\"price-input\"\n                />\n                </div>\n              )}\n            </div>\n            \n            <div className=\"filter-section\">\n              <div className=\"filter-section-header\" onClick={() => toggleSectionCollapse('attributes')}>\n                <h4>Attribute Filters</h4>\n                <button className=\"collapse-toggle\">\n                  <svg \n                    width=\"16\" \n                    height=\"16\" \n                    viewBox=\"0 0 24 24\" \n                    fill=\"none\" \n                    stroke=\"currentColor\"\n                    className={collapsedSections.has('attributes') ? 'collapsed' : ''}\n                  >\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                  </svg>\n                </button>\n              </div>\n              {!collapsedSections.has('attributes') && (\n                <div className=\"attribute-filters\">\n                {Array.from(availableAttributes.entries()).map(([attributeType, values]) => (\n                  <div key={attributeType} className=\"attribute-group\">\n                    <h5 className=\"attribute-type\">{attributeType}</h5>\n                    <div className=\"attribute-values\">\n                      {values.map(value => (\n                        <label key={value} className=\"attribute-checkbox\">\n                          <input\n                            type=\"checkbox\"\n                            checked={selectedAttributes.get(attributeType)?.has(value) || false}\n                            onChange={() => handleAttributeToggle(attributeType, value)}\n                          />\n                          <span className=\"checkmark\"></span>\n                          {value}\n                        </label>\n                      ))}\n                    </div>\n                  </div>\n                ))}\n                {availableAttributes.size === 0 && (\n                  <div className=\"no-attributes\">No attributes available</div>\n                )}\n                </div>\n              )}\n            </div>\n            \n            <div className=\"filter-section\">\n              <h4>Date Range</h4>\n              <div className=\"date-range-inputs\">\n                <input\n                  type=\"date\"\n                  value={dateRange.start}\n                  onChange={(e) => setDateRange(prev => ({ ...prev, start: e.target.value }))}\n                  className=\"date-input\"\n                  placeholder=\"Start Date\"\n                />\n                <span>to</span>\n                <input\n                  type=\"date\"\n                  value={dateRange.end}\n                  onChange={(e) => setDateRange(prev => ({ ...prev, end: e.target.value }))}\n                  className=\"date-input\"\n                  placeholder=\"End Date\"\n                />\n              </div>\n            </div>\n            \n            <div className=\"filter-section\">\n              <h4>Sort By</h4>\n              <select \n                value={sortBy} \n                onChange={(e) => setSortBy(e.target.value as 'price_asc' | 'price_desc' | 'name_asc' | 'name_desc' | 'date_newest' | 'date_oldest')}\n                className=\"sort-select\"\n              >\n                <option value=\"price_asc\">Price: Low to High</option>\n                <option value=\"price_desc\">Price: High to Low</option>\n                <option value=\"name_asc\">Name: A to Z</option>\n                <option value=\"name_desc\">Name: Z to A</option>\n                {/* Rarity sorting removed - Pixal PFPs don't have rarity attributes */}\n                <option value=\"date_newest\">Newest Listings</option>\n                <option value=\"date_oldest\">Oldest Listings</option>\n              </select>\n            </div>\n            \n            <div className=\"filter-actions\">\n              <button className=\"clear-filters-btn\" onClick={clearAllFilters}>\n                Clear All\n              </button>\n              <button className=\"apply-filters-btn\" onClick={closeFilterSidebar}>\n                Apply Filters\n              </button>\n            </div>\n          </div>\n        </>\n      )}\n\n      <NFTDetailsModal \n        nft={selectedNft}\n        isOpen={isModalOpen}\n        onClose={() => {\n          setIsModalOpen(false)\n          setSelectedNft(null)\n        }}\n      />\n      \n      <NFTComparison \n         initialNFTs={filteredNfts.filter(nft => selectedItems.has(nft.asset_id))}\n         isOpen={isComparisonOpen}\n         onClose={() => setIsComparisonOpen(false)}\n       />\n      \n      {shareNft && (\n         <SocialShare \n           nft={shareNft}\n           isOpen={isShareModalOpen}\n           onClose={() => {\n             setIsShareModalOpen(false)\n             setShareNft(null)\n           }}\n         />\n       )}\n      \n      {offerNft && (\n         <SendOfferModal \n           nft={offerNft}\n           isOpen={isOfferModalOpen}\n           onClose={() => {\n             setIsOfferModalOpen(false)\n             setOfferNft(null)\n           }}\n         />\n       )}\n      \n      {chatNft && (\n         <ListingChatModal \n           nft={chatNft}\n           isOpen={isChatModalOpen}\n           onClose={() => {\n             setIsChatModalOpen(false)\n             setChatNft(null)\n           }}\n         />\n       )}\n      \n      {/* Media Zoom Modal */}\n      {showImageZoom && zoomedImage && (\n        <div className=\"image-zoom-modal\" onClick={() => setShowImageZoom(false)}>\n          <div className=\"zoom-modal-content\" onClick={(e) => e.stopPropagation()}>\n            <button \n              className=\"zoom-modal-close\"\n              onClick={() => setShowImageZoom(false)}\n              aria-label=\"Close zoom modal\"\n            >\n              ×\n            </button>\n            {zoomedImage.type === 'video' ? (\n              <video \n                src={zoomedImage.url} \n                className=\"zoom-modal-video\"\n                controls\n                autoPlay\n                loop\n                muted\n              />\n            ) : (\n              <img \n                src={zoomedImage.url} \n                alt={zoomedImage.name} \n                className=\"zoom-modal-image\"\n              />\n            )}\n            <div className=\"zoom-modal-title\">{zoomedImage.name}</div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n})\n\nexport default Marketplace","import React from 'react'\n\ninterface RewardsProps {\n  onPageChange?: (page: string) => void\n}\n\nconst Rewards: React.FC<RewardsProps> = ({ onPageChange }) => {\n  return (\n    <div className=\"rewards-container\">\n      <div className=\"rewards-header\">\n        <h1 className=\"rewards-title\">Trading Rewards</h1>\n        <p className=\"rewards-subtitle\">\n          Earn PXJ tokens and Pixel Ingredients for every trade you make on Pixel Market\n        </p>\n      </div>\n\n      <div className=\"rewards-content\">\n        <div className=\"reward-card\">\n          <div className=\"reward-icon pxj-icon\">\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n              <circle cx=\"12\" cy=\"12\" r=\"10\"/>\n              <path d=\"M12 6v6l4 2\"/>\n            </svg>\n          </div>\n          <h3 className=\"reward-title\">PXJ Token Rewards</h3>\n          <p className=\"reward-description\">\n            Earn PXJ tokens based on your trading volume. The more you trade, the more you earn!\n          </p>\n          <ul className=\"reward-benefits\">\n            <li>0.1% of trade value in PXJ tokens</li>\n            <li>Bonus multipliers for high-volume traders</li>\n            <li>Weekly bonus distributions</li>\n            <li>Governance voting rights</li>\n          </ul>\n        </div>\n\n        <div className=\"reward-card\">\n          <div className=\"reward-icon ingredient-icon\">\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n              <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\"/>\n            </svg>\n          </div>\n          <h3 className=\"reward-title\">Pixel Ingredients</h3>\n          <p className=\"reward-description\">\n            Collect rare Pixel Ingredients that can be used for crafting and enhancing your NFTs. <strong>Available to Pixal PFP holders and Fried Factory trait holders only.</strong>\n          </p>\n          <ul className=\"reward-benefits\">\n            <li>Random ingredient drops with each trade</li>\n            <li>Rare ingredients for large transactions</li>\n            <li>Craft unique items and upgrades</li>\n            <li>Trade ingredients with other players</li>\n          </ul>\n        </div>\n\n        <div className=\"reward-card full-width\">\n          <div className=\"reward-icon volume-icon\">\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n              <path d=\"M3 3v18h18\"/>\n              <path d=\"M7 12l4-4 4 4 6-6\"/>\n            </svg>\n          </div>\n          <h3 className=\"reward-title\">Volume-Based Bonuses</h3>\n          <p className=\"reward-description\">\n            Unlock additional rewards and benefits as your trading volume increases.\n          </p>\n          <div className=\"volume-tiers\">\n            <div className=\"tier\">\n              <h4>Bronze Trader</h4>\n              <p>1+ WAX volume</p>\n              <span className=\"tier-bonus\">1x rewards</span>\n            </div>\n            <div className=\"tier\">\n              <h4>Silver Trader</h4>\n              <p>100+ WAX volume</p>\n              <span className=\"tier-bonus\">1.5x rewards</span>\n            </div>\n            <div className=\"tier\">\n              <h4>Gold Trader</h4>\n              <p>1,000+ WAX volume</p>\n              <span className=\"tier-bonus\">2x rewards</span>\n            </div>\n            <div className=\"tier\">\n              <h4>Diamond Trader</h4>\n              <p>10,000+ WAX volume</p>\n              <span className=\"tier-bonus\">3x rewards</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"rewards-cta\">\n        <h3>Start Trading Today!</h3>\n        <p>Connect your wallet and start earning rewards with every transaction.</p>\n        <button \n          className=\"cta-button\"\n          onClick={() => onPageChange?.('marketplace')}\n        >\n          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 7l5 5m0 0l-5 5m5-5H6\" />\n          </svg>\n          Go to Marketplace\n        </button>\n      </div>\n    </div>\n  )\n}\n\nexport default Rewards","import React, { useState } from 'react'\r\nimport { useWallet } from '../hooks/useWallet'\r\nimport { useNotifications } from '../hooks/useNotifications'\r\nimport type { InventoryNFT } from '../types/inventory'\r\nimport MediaRenderer from './MediaRenderer'\r\nimport { getAssetImageUrl, getAssetVideoUrl } from '../utils/mediaUtils'\r\nimport { log } from '../services/loggingService'\r\nimport { WharfKitService } from '../services/wharfkit'\r\nimport '../css/modal.css'\r\n\r\ninterface ListingModalProps {\r\n  nft: InventoryNFT | null\r\n  isOpen: boolean\r\n  onClose: () => void\r\n  onSuccess?: () => void\r\n  bundleNfts?: InventoryNFT[] // Optional bundle NFTs\r\n}\r\n\r\nconst ListingModal: React.FC<ListingModalProps> = ({ nft, isOpen, onClose, onSuccess, bundleNfts = [] }) => {\r\n  const [price, setPrice] = useState('')\r\n  const [isBundle, setIsBundle] = useState(false)\r\n  const [bundleName, setBundleName] = useState('')\r\n  const [isListing, setIsListing] = useState(false)\r\n  const { session } = useWallet()\r\n  const { showSuccess, showError } = useNotifications()\r\n\r\n  // AtomicMarket only supports WAX listings\r\n  const waxCurrency = { symbol: 'WAX', contract: 'eosio.token', precision: 8 }\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    \r\n    if (!nft || !session || !price) {\r\n      showError('Please fill in all required fields')\r\n      return\r\n    }\r\n\r\n    if (isBundle && !bundleName.trim()) {\r\n      showError('Please enter a bundle name')\r\n      return\r\n    }\r\n\r\n    const priceFloat = parseFloat(price)\r\n    if (isNaN(priceFloat) || priceFloat <= 0) {\r\n      showError('Please enter a valid price')\r\n      return\r\n    }\r\n\r\n    setIsListing(true)\r\n\r\n    try {\r\n      const selectedCurrency = waxCurrency\r\n\r\n      // Format price with proper precision\r\n      const formattedPrice = priceFloat.toFixed(selectedCurrency.precision)\r\n      const priceString = `${formattedPrice} ${selectedCurrency.symbol}`\r\n\r\n      // Determine asset IDs for listing\r\n      const assetIds = isBundle && bundleNfts.length > 0 \r\n        ? [nft.asset_id, ...bundleNfts.map(bundleNft => bundleNft.asset_id)]\r\n        : [nft.asset_id]\r\n\r\n      // AtomicMarket listing action\r\n      const action = {\r\n        account: 'atomicmarket',\r\n        name: 'announcesale',\r\n        authorization: [{\r\n          actor: WharfKitService.safeGetActor(session),\r\n          permission: WharfKitService.safeGetPermission(session)\r\n        }],\r\n        data: {\r\n          seller: WharfKitService.safeGetActor(session),\r\n          asset_ids: assetIds,\r\n          listing_price: priceString,\r\n          settlement_symbol: `${selectedCurrency.precision},${selectedCurrency.symbol}`,\r\n          maker_marketplace: 'market.pxj'\r\n        }\r\n      }\r\n\r\n      const result = await session.transact({ actions: [action] })\r\n      \r\n      if (result) {\r\n        const listingType = isBundle ? 'Bundle' : 'NFT'\r\n        showSuccess(`${listingType} listed successfully!`)\r\n        onSuccess?.()\r\n        onClose()\r\n        setPrice('')\r\n      }\r\n    } catch (error) {\r\n      log.error('Listing failed', 'ListingModal', error instanceof Error ? error : new Error(String(error)))\r\n      showError(`Listing failed: ${error instanceof Error ? error.message : 'Unknown error'}`)\r\n    } finally {\r\n      setIsListing(false)\r\n    }\r\n  }\r\n\r\n  const handleClose = () => {\r\n    if (!isListing) {\r\n      setPrice('')\r\n      setIsBundle(false)\r\n      setBundleName('')\r\n      onClose()\r\n    }\r\n  }\r\n\r\n  if (!isOpen || !nft) return null\r\n\r\n  return (\r\n    <div className=\"modal-overlay\" onClick={handleClose}>\r\n      <div className=\"modal-content listing-modal\" onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"modal-header\">\r\n          <h2>List NFT for Sale</h2>\r\n          <button \r\n            className=\"modal-close\" \r\n            onClick={handleClose}\r\n            disabled={isListing}\r\n          >\r\n            ×\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"modal-body\">\r\n          <div className=\"nft-preview enhanced-preview\">\r\n            <div className=\"nft-image\">\r\n              <MediaRenderer\r\n                imageUrl={getAssetImageUrl(nft)}\r\n                videoUrl={getAssetVideoUrl(nft)}\r\n                alt={nft.name || `Asset #${nft.asset_id}`}\r\n                className=\"nft-media\"\r\n              />\r\n            </div>\r\n            <div className=\"nft-info\">\r\n              <h3>{nft.name}</h3>\r\n              <p className=\"nft-collection\">{typeof nft.collection === 'string' ? nft.collection : nft.collection?.name || nft.collection?.collection_name || 'Unknown'}</p>\r\n              <p className=\"nft-schema\">{nft.schema.schema_name}</p>\r\n              {nft.mint_number && (\r\n                <p className=\"nft-mint\">Mint #{nft.mint_number}</p>\r\n              )}\r\n              {isBundle && bundleNfts.length > 0 && (\r\n                <p className=\"bundle-info\">+ {bundleNfts.length} additional NFT{bundleNfts.length > 1 ? 's' : ''}</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Bundle Creation Section */}\r\n          {bundleNfts.length > 0 && (\r\n            <div className=\"bundle-section\">\r\n              <div className=\"bundle-toggle\">\r\n                <label className=\"checkbox-label\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={isBundle}\r\n                    onChange={(e) => setIsBundle(e.target.checked)}\r\n                    disabled={isListing}\r\n                  />\r\n                  <span className=\"checkmark\"></span>\r\n                  Create Bundle with {bundleNfts.length} additional NFT{bundleNfts.length > 1 ? 's' : ''}\r\n                </label>\r\n              </div>\r\n              \r\n              {isBundle && (\r\n                <div className=\"bundle-details\">\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"bundleName\">Bundle Name *</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      id=\"bundleName\"\r\n                      value={bundleName}\r\n                      onChange={(e) => setBundleName(e.target.value)}\r\n                      placeholder=\"Enter bundle name\"\r\n                      disabled={isListing}\r\n                      className=\"bundle-name-input\"\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div className=\"bundle-preview\">\r\n                    <h4>Bundle Contents:</h4>\r\n                    <div className=\"bundle-nfts\">\r\n                      <div className=\"bundle-nft-item main-nft\">\r\n                        <MediaRenderer imageUrl={getAssetImageUrl(nft)} videoUrl={getAssetVideoUrl(nft)} alt={nft.name || `Asset #${nft.asset_id}`} className=\"bundle-nft-image\" />\r\n                        <span>{nft.name}</span>\r\n                      </div>\r\n                      {bundleNfts.slice(0, 3).map((bundleNft) => (\r\n                        <div key={bundleNft.asset_id} className=\"bundle-nft-item\">\r\n                          <MediaRenderer imageUrl={getAssetImageUrl(bundleNft)} videoUrl={getAssetVideoUrl(bundleNft)} alt={bundleNft.name || `Asset #${bundleNft.asset_id}`} className=\"bundle-nft-image\" />\r\n                          <span>{bundleNft.name}</span>\r\n                        </div>\r\n                      ))}\r\n                      {bundleNfts.length > 3 && (\r\n                        <div className=\"bundle-more\">+{bundleNfts.length - 3} more</div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          <form onSubmit={handleSubmit} className=\"modal-form listing-form\">\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"price\">Price *</label>\r\n              <div className=\"price-input-group\">\r\n                <input\r\n                  type=\"number\"\r\n                  id=\"price\"\r\n                  value={price}\r\n                  onChange={(e) => setPrice(e.target.value)}\r\n                  placeholder=\"0.00\"\r\n                  step=\"0.0001\"\r\n                  min=\"0\"\r\n                  required\r\n                  disabled={isListing}\r\n                  className=\"price-input\"\r\n                />\r\n                <div className=\"currency-display\">\r\n                  <span className=\"currency-symbol\">{waxCurrency.symbol}</span>\r\n                  <span className=\"currency-note\">(AtomicMarket only supports WAX)</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"listing-info\">\r\n              <p className=\"info-text\">\r\n                <strong>Marketplace:</strong> AtomicMarket\r\n              </p>\r\n              <p className=\"info-text\">\r\n                <strong>Marketplace Fee:</strong> 2%\r\n              </p>\r\n              <p className=\"info-text\">\r\n                <strong>Collection Fee:</strong> Varies by collection\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"modal-actions\">\r\n              <button \r\n                type=\"button\" \r\n                className=\"btn-secondary\"\r\n                onClick={handleClose}\r\n                disabled={isListing}\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button \r\n                type=\"submit\" \r\n                className=\"btn-primary\"\r\n                disabled={isListing || !price}\r\n              >\r\n                {isListing ? (\r\n                  <>\r\n                    <div className=\"spinner\"></div>\r\n                    Listing...\r\n                  </>\r\n                ) : (\r\n                  'List for Sale'\r\n                )}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ListingModal","import React, { useState } from 'react'\nimport { useWallet } from '../hooks/useWallet'\nimport type { InventoryNFT } from '../types/inventory'\nimport { useNotifications } from '../hooks/useNotifications'\nimport { log } from '../services/loggingService'\nimport '../css/modal.css'\n\ninterface TransferModalProps {\n  nft: InventoryNFT | null\n  isOpen: boolean\n  onClose: () => void\n  onSuccess?: () => void\n}\n\nconst TransferModal: React.FC<TransferModalProps> = ({ nft, isOpen, onClose, onSuccess }) => {\n  const [recipient, setRecipient] = useState('')\n  const [memo, setMemo] = useState('')\n  const [isTransferring, setIsTransferring] = useState(false)\n  const { session, transferNFT } = useWallet()\n  const { showSuccess, showError } = useNotifications()\n\n  const validateWaxAccount = (account: string): boolean => {\n    // WAX account names must be 12 characters, lowercase letters and numbers 1-5\n    const waxAccountRegex = /^[a-z1-5]{12}$/\n    return waxAccountRegex.test(account)\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    if (!nft || !session || !recipient.trim()) {\n      showError('Validation Error', 'Please fill in all required fields')\n      return\n    }\n\n    if (!validateWaxAccount(recipient.trim())) {\n      showError(\n        'Invalid Account Name', \n        'Please enter a valid WAX account name (12 characters, lowercase letters and numbers 1-5)'\n      )\n      return\n    }\n\n    setIsTransferring(true)\n\n    try {\n      if (!transferNFT) {\n        throw new Error('NFT transfer service is not available')\n      }\n      // Use centralized NFT transfer service\n      const result = await transferNFT(\n        nft.asset_id,\n        recipient.trim()\n      )\n      \n      if (result) {\n        showSuccess('Transfer Successful', 'NFT transferred successfully!')\n        onSuccess?.()\n        onClose()\n        setRecipient('')\n        setMemo('')\n      }\n    } catch (error) {\n      log.error('Transfer failed', 'TransferModal', error as Error)\n      showError(\n        'Transfer Failed',\n        error instanceof Error ? error.message : 'Unknown error occurred'\n      )\n    } finally {\n      setIsTransferring(false)\n    }\n  }\n\n  const handleClose = () => {\n    if (!isTransferring) {\n      setRecipient('')\n      setMemo('')\n      onClose()\n    }\n  }\n\n  if (!isOpen || !nft) return null\n\n  return (\n    <div className=\"modal-overlay\" onClick={handleClose}>\n      <div className=\"modal-content transfer-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h2>Transfer NFT</h2>\n          <button \n            className=\"modal-close\" \n            onClick={handleClose}\n            disabled={isTransferring}\n          >\n            ×\n          </button>\n        </div>\n\n        <div className=\"modal-body\">\n          <div className=\"nft-preview\">\n            <div className=\"nft-image\">\n              {nft.video ? (\n                <video \n                  src={nft.video.startsWith('http') ? nft.video : `https://ipfs.io/ipfs/${nft.video}`}\n                  muted \n                  loop\n                  autoPlay\n                />\n              ) : nft.img ? (\n                <img \n                  src={nft.img.startsWith('http') ? nft.img : `https://ipfs.io/ipfs/${nft.img}`}\n                  alt={nft.name}\n                />\n              ) : (\n                <div className=\"no-image\">No Image</div>\n              )}\n            </div>\n            <div className=\"nft-info\">\n              <h3>{nft.name}</h3>\n              <p className=\"nft-collection\">{typeof nft.collection === 'string' ? nft.collection : nft.collection?.name || nft.collection?.collection_name || 'Unknown'}</p>\n              <p className=\"nft-schema\">{nft.schema.schema_name}</p>\n              {nft.mint_number && (\n                <p className=\"nft-mint\">Mint #{nft.mint_number}</p>\n              )}\n            </div>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"modal-form transfer-form\">\n            <div className=\"form-group\">\n              <label htmlFor=\"recipient\">Recipient WAX Account *</label>\n              <input\n                type=\"text\"\n                id=\"recipient\"\n                value={recipient}\n                onChange={(e) => setRecipient(e.target.value.toLowerCase())}\n                placeholder=\"e.g. pixeljourney\"\n                maxLength={12}\n                required\n                disabled={isTransferring}\n                className=\"recipient-input\"\n              />\n              <small className=\"input-help\">\n                Enter a valid WAX account name (12 characters, lowercase letters and numbers 1-5)\n              </small>\n            </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"memo\">Memo (Optional)</label>\n              <input\n                type=\"text\"\n                id=\"memo\"\n                value={memo}\n                onChange={(e) => setMemo(e.target.value)}\n                placeholder=\"Optional transfer message\"\n                maxLength={256}\n                disabled={isTransferring}\n                className=\"memo-input\"\n              />\n            </div>\n\n            <div className=\"transfer-warning\">\n              <div className=\"warning-icon\">⚠️</div>\n              <div className=\"warning-text\">\n                <strong>Warning:</strong> This action cannot be undone. Make sure you trust the recipient and have entered the correct account name.\n              </div>\n            </div>\n\n            <div className=\"modal-actions\">\n              <button \n                type=\"button\" \n                className=\"btn-secondary\"\n                onClick={handleClose}\n                disabled={isTransferring}\n              >\n                Cancel\n              </button>\n              <button \n                type=\"submit\" \n                className=\"btn-primary transfer-btn\"\n                disabled={isTransferring || !recipient.trim() || !validateWaxAccount(recipient.trim())}\n              >\n                {isTransferring ? (\n                  <>\n                    <div className=\"spinner\"></div>\n                    Transferring...\n                  </>\n                ) : (\n                  'Transfer NFT'\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default TransferModal","import React, { useState } from 'react'\nimport { useWallet } from '../hooks/useWallet'\nimport { useNotifications } from '../hooks/useNotifications'\nimport type { InventoryNFT } from '../types/inventory'\nimport { log } from '../services/loggingService'\nimport { MarketplaceConfigService } from '../config/marketplaceConfig'\nimport { WharfKitService } from '../services/wharfkit'\nimport '../css/modal.css'\n\ninterface BurnModalProps {\n  nft: InventoryNFT | null\n  isOpen: boolean\n  onClose: () => void\n  onSuccess?: () => void\n}\n\nconst BurnModal: React.FC<BurnModalProps> = ({ nft, isOpen, onClose, onSuccess }) => {\n  const [confirmText, setConfirmText] = useState('')\n  const [isBurning, setIsBurning] = useState(false)\n  const [step, setStep] = useState<'warning' | 'confirm'>('warning')\n  const { session } = useWallet()\n  const { showError, showSuccess } = useNotifications()\n\n  const requiredConfirmText = 'BURN'\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    if (!nft || !session) {\n      showError('Session error. Please try again.', 'Connection Error')\n      return\n    }\n\n    // Check if this is a WaxRock Pixal PFP - block burning if it is\n    if (MarketplaceConfigService.isPixalPFP(nft.template.template_id)) {\n      const waxRock = nft.data?.WaxRock as string\n      if (waxRock && MarketplaceConfigService.isValidWaxRock(waxRock)) {\n        showError(\n          `This is a rare WaxRock Pixal PFP (${waxRock}) and cannot be burned. WaxRock Pixals are protected from burning and recycling on our platform.`,\n          'Protected NFT',\n          8000\n        )\n        return\n      }\n    }\n\n    if (confirmText.toUpperCase() !== requiredConfirmText) {\n      showError(`Please type \"${requiredConfirmText}\" to confirm`, 'Confirmation Required')\n      return\n    }\n\n    setIsBurning(true)\n\n    try {\n      // AtomicAssets burn action\n      const action = {\n        account: 'atomicassets',\n        name: 'burnasset',\n        authorization: [{\n          actor: WharfKitService.safeGetActor(session),\n          permission: WharfKitService.safeGetPermission(session)\n        }],\n        data: {\n          asset_owner: WharfKitService.safeGetActor(session),\n          asset_id: nft.asset_id\n        }\n      }\n\n      const result = await session.transact({ actions: [action] })\n      \n      if (result) {\n        showSuccess('NFT burned successfully!', 'Burn Complete')\n        onSuccess?.()\n        onClose()\n        resetModal()\n      }\n    } catch (error) {\n      log.error('Burn failed', 'BurnModal', error as Error)\n      showError(`Burn failed: ${error instanceof Error ? error.message : 'Unknown error'}`, 'Burn Failed')\n    } finally {\n      setIsBurning(false)\n    }\n  }\n\n  const resetModal = () => {\n    setConfirmText('')\n    setStep('warning')\n  }\n\n  const handleClose = () => {\n    if (!isBurning) {\n      resetModal()\n      onClose()\n    }\n  }\n\n  const handleProceed = () => {\n    setStep('confirm')\n  }\n\n  if (!isOpen || !nft) return null\n\n  return (\n    <div className=\"modal-overlay\" onClick={handleClose}>\n      <div className=\"modal-content burn-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h2>🔥 Burn NFT</h2>\n          <button \n            className=\"modal-close\" \n            onClick={handleClose}\n            disabled={isBurning}\n          >\n            ×\n          </button>\n        </div>\n\n        <div className=\"modal-body\">\n          <div className=\"nft-preview\">\n            <div className=\"nft-image\">\n              {nft.video ? (\n                <video \n                  src={nft.video.startsWith('http') ? nft.video : `https://ipfs.io/ipfs/${nft.video}`}\n                  muted \n                  loop\n                  autoPlay\n                />\n              ) : nft.img ? (\n                <img \n                  src={nft.img.startsWith('http') ? nft.img : `https://ipfs.io/ipfs/${nft.img}`}\n                  alt={nft.name}\n                />\n              ) : (\n                <div className=\"no-image\">No Image</div>\n              )}\n            </div>\n            <div className=\"nft-info\">\n              <h3>{nft.name}</h3>\n              <p className=\"nft-collection\">{typeof nft.collection === 'string' ? nft.collection : nft.collection?.name || nft.collection?.collection_name || 'Unknown'}</p>\n              <p className=\"nft-schema\">{nft.schema.schema_name}</p>\n              {nft.mint_number && (\n                <p className=\"nft-mint\">Mint #{nft.mint_number}</p>\n              )}\n            </div>\n          </div>\n\n          {step === 'warning' && (\n            <div className=\"burn-warning-step\">\n              <div className=\"danger-warning\">\n                <div className=\"warning-icon\">🚨</div>\n                <div className=\"warning-content\">\n                  <h3>PERMANENT ACTION WARNING</h3>\n                  <ul className=\"warning-list\">\n                    <li>This action will <strong>permanently destroy</strong> your NFT</li>\n                    <li>The NFT will be <strong>completely removed</strong> from the blockchain</li>\n                    <li>This action <strong>cannot be undone or reversed</strong></li>\n                    <li>You will <strong>not receive any compensation</strong></li>\n                    <li>The NFT will <strong>disappear forever</strong></li>\n                  </ul>\n                </div>\n              </div>\n\n              <div className=\"burn-reasons\">\n                <h4>Common reasons for burning NFTs:</h4>\n                <ul>\n                  <li>Reducing supply to increase rarity</li>\n                  <li>Participating in burn-to-earn mechanics</li>\n                  <li>Collection cleanup or rebranding</li>\n                  <li>Accidental duplicate mints</li>\n                </ul>\n              </div>\n\n              <div className=\"modal-actions\">\n                <button \n                  type=\"button\" \n                  className=\"btn-secondary\"\n                  onClick={handleClose}\n                >\n                  Cancel\n                </button>\n                <button \n                  type=\"button\" \n                  className=\"btn-danger\"\n                  onClick={handleProceed}\n                >\n                  I Understand, Proceed\n                </button>\n              </div>\n            </div>\n          )}\n\n          {step === 'confirm' && (\n            <form onSubmit={handleSubmit} className=\"modal-form burn-confirm-step\">\n              <div className=\"final-warning\">\n                <div className=\"warning-icon\">⚠️</div>\n                <p>\n                  <strong>FINAL WARNING:</strong> You are about to permanently destroy this NFT. \n                  This action cannot be undone.\n                </p>\n              </div>\n\n              <div className=\"form-group\">\n                <label htmlFor=\"confirmText\">\n                  Type <strong>\"{requiredConfirmText}\"</strong> to confirm:\n                </label>\n                <input\n                  type=\"text\"\n                  id=\"confirmText\"\n                  value={confirmText}\n                  onChange={(e) => setConfirmText(e.target.value)}\n                  placeholder={`Type \"${requiredConfirmText}\" here`}\n                  required\n                  disabled={isBurning}\n                  className=\"confirm-input\"\n                  autoComplete=\"off\"\n                />\n              </div>\n\n              <div className=\"modal-actions\">\n                <button \n                  type=\"button\" \n                  className=\"btn-secondary\"\n                  onClick={() => setStep('warning')}\n                  disabled={isBurning}\n                >\n                  Back\n                </button>\n                <button \n                  type=\"submit\" \n                  className=\"btn-danger burn-btn\"\n                  disabled={isBurning || confirmText.toUpperCase() !== requiredConfirmText}\n                >\n                  {isBurning ? (\n                    <>\n                      <div className=\"spinner\"></div>\n                      Burning...\n                    </>\n                  ) : (\n                    '🔥 Burn NFT Forever'\n                  )}\n                </button>\n              </div>\n            </form>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default BurnModal","import React, { useState, useEffect, useMemo, useCallback } from 'react'\nimport { useWallet } from '../hooks/useWallet'\nimport type { InventoryNFT } from '../types/inventory'\nimport { useNotifications } from '../hooks/useNotifications'\nimport { apiService } from '../services/api'\nimport { formatWAXPrice, formatNumber } from '../utils/formatUtils'\nimport { log } from '../services/loggingService'\nimport { WharfKitService } from '../services/wharfkit'\n\nimport '../css/modal.css'\n\ninterface BulkListingModalProps {\n  nfts: InventoryNFT[]\n  isOpen: boolean\n  onClose: () => void\n  onSuccess?: () => void\n}\n\n\n\ninterface PriceSuggestion {\n  floorPrice: number\n  averagePrice: number\n  suggestedPrice: number\n  confidence: 'high' | 'medium' | 'low'\n  sampleSize: number\n}\n\nconst BulkListingModal: React.FC<BulkListingModalProps> = ({ nfts, isOpen, onClose, onSuccess }) => {\n  const [listingPrices, setListingPrices] = useState<Record<string, string>>({})\n  const [bulkPrice, setBulkPrice] = useState('')\n  const [isListing, setIsListing] = useState(false)\n  const [listingProgress, setListingProgress] = useState(0)\n  const [priceSuggestions, setPriceSuggestions] = useState<Record<string, PriceSuggestion>>({})\n  const [loadingSuggestions, setLoadingSuggestions] = useState(false)\n  const [showSuggestions, setShowSuggestions] = useState(true)\n  const [sortBy, setSortBy] = useState<string>('name_asc')\n  const { session } = useWallet()\n  const { showSuccess, showError } = useNotifications()\n\n  const waxCurrency = {\n    symbol: 'WAX',\n    precision: 8\n  }\n\n  const handlePriceChange = (assetId: string, price: string) => {\n    setListingPrices(prev => ({\n      ...prev,\n      [assetId]: price\n    }))\n  }\n\n  // Fetch price suggestions for NFTs with enhanced error handling and fallbacks\n  const fetchPriceSuggestions = useCallback(async () => {\n    if (!nfts.length || !isOpen) return\n    \n    setLoadingSuggestions(true)\n    const suggestions: Record<string, PriceSuggestion> = {}\n    const maxRetries = 3\n    \n    const fetchWithRetry = async (url: string, retries: number = maxRetries): Promise<unknown> => {\n      try {\n        const controller = new AbortController()\n        const timeoutId = setTimeout(() => controller.abort(), 10000) // 10 second timeout\n        \n        const response = await fetch(url, {\n          signal: controller.signal,\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          }\n        })\n        \n        clearTimeout(timeoutId)\n        \n        if (!response.ok) {\n          throw new Error(`HTTP ${response.status}: ${response.statusText}`)\n        }\n        \n        return await response.json()\n      } catch (error) {\n        if (retries > 0 && error instanceof Error && !error.name.includes('AbortError')) {\n          log.warn(`Retrying API call (${maxRetries - retries + 1}/${maxRetries})`, 'BulkListingModal.fetchWithRetry', { error: error.message, url })\n          await new Promise(resolve => setTimeout(resolve, 1000 * (maxRetries - retries + 1))) // Exponential backoff\n          return fetchWithRetry(url, retries - 1)\n        }\n        throw error\n      }\n    }\n    \n    try {\n      // Group NFTs by collection for batch analysis\n      const collectionGroups = nfts.reduce((groups, nft) => {\n        const collection = nft.collection.collection_name\n        if (!groups[collection]) groups[collection] = []\n        groups[collection].push(nft)\n        return groups\n      }, {} as Record<string, InventoryNFT[]>)\n      \n      const collectionEntries = Object.entries(collectionGroups)\n      let successfulCollections = 0\n      \n      // Analyze each collection with enhanced error handling\n      for (const [collection, collectionNFTs] of collectionEntries) {\n        try {\n          // Primary API: AtomicMarket sales data\n          const salesUrl = `${apiService.atomicMarketAPI}/atomicmarket/v1/sales?state=3&collection_name=${collection}&limit=100&order=desc&sort=updated`\n          let salesData = null\n          \n          try {\n            salesData = await fetchWithRetry(salesUrl)\n          } catch (primaryError) {\n            log.error(`Primary API failed for ${collection}, trying fallback:`, 'BulkListingModal.fetchPriceSuggestions', primaryError as Error)\n            \n            // Fallback API: Try with different parameters\n            try {\n              const fallbackUrl = `${apiService.atomicMarketAPI}/atomicmarket/v1/sales?collection_name=${collection}&state=3&limit=50&order=desc`\n              salesData = await fetchWithRetry(fallbackUrl, 1)\n            } catch (fallbackError) {\n              log.error(`Fallback API also failed for ${collection}:`, 'BulkListingModal.fetchPriceSuggestions', fallbackError as Error)\n              // Apply default pricing strategy for this collection\n               applyDefaultPricing(collectionNFTs, suggestions)\n               continue\n            }\n          }\n          \n          // Type guard for API response\n          const isValidApiResponse = (data: unknown): data is { success: boolean; data: any[] } => {\n            return typeof data === 'object' && data !== null && \n                   'success' in data && 'data' in data && \n                   Array.isArray((data as any).data)\n          }\n          \n          if (isValidApiResponse(salesData) && salesData.success && salesData.data.length > 0) {\n            const sales = salesData.data\n            const prices = sales\n              .filter((sale: {price?: {amount?: string}}) => sale.price?.amount)\n              .map((sale: {price: {amount: string, token_precision?: number}}) => {\n                const amount = parseFloat(sale.price.amount)\n                const precision = sale.price.token_precision || 8\n                return amount / Math.pow(10, precision)\n              })\n              .filter((price: number) => price > 0 && price < 10000) // Filter out outliers\n            \n            if (prices.length > 0) {\n              // Enhanced price calculation with outlier removal\n              const sortedPrices = prices.sort((a: number, b: number) => a - b)\n              const q1Index = Math.floor(sortedPrices.length * 0.25)\n              const q3Index = Math.floor(sortedPrices.length * 0.75)\n              const iqr = sortedPrices[q3Index] - sortedPrices[q1Index]\n              const lowerBound = sortedPrices[q1Index] - 1.5 * iqr\n              const upperBound = sortedPrices[q3Index] + 1.5 * iqr\n              \n              const filteredPrices = sortedPrices.filter((price: number) => price >= lowerBound && price <= upperBound)\n              \n              if (filteredPrices.length > 0) {\n                const floorPrice = Math.min(...filteredPrices)\n                const averagePrice = filteredPrices.reduce((sum: number, price: number) => sum + price, 0) / filteredPrices.length\n                const medianPrice = filteredPrices[Math.floor(filteredPrices.length / 2)]\n                \n                // Smart suggested price calculation\n                let suggestedPrice: number\n                if (filteredPrices.length >= 10) {\n                  // Use median-based pricing for better stability\n                  suggestedPrice = Math.max(floorPrice * 1.03, medianPrice * 0.98)\n                } else {\n                  // Conservative pricing for limited data\n                  suggestedPrice = Math.max(floorPrice * 1.05, averagePrice * 0.95)\n                }\n                \n                let confidence: 'high' | 'medium' | 'low'\n                if (filteredPrices.length >= 20) {\n                  confidence = 'high'\n                } else if (filteredPrices.length >= 10) {\n                  confidence = 'medium'\n                } else {\n                  confidence = 'low'\n                }\n                \n                // Apply suggestions to all NFTs in this collection\n                collectionNFTs.forEach((nft: InventoryNFT) => {\n                  suggestions[nft.asset_id] = {\n                    floorPrice,\n                    averagePrice,\n                    suggestedPrice,\n                    confidence,\n                    sampleSize: filteredPrices.length\n                  }\n                })\n                \n                successfulCollections++\n              } else {\n                 // Apply default pricing if no valid prices after filtering\n                 applyDefaultPricing(collectionNFTs, suggestions)\n               }\n             } else {\n               // Apply default pricing if no price data\n               applyDefaultPricing(collectionNFTs, suggestions)\n             }\n           } else {\n             // Apply default pricing if API returns no data\n             applyDefaultPricing(collectionNFTs, suggestions)\n          }\n        } catch (error) {\n          log.error(`Failed to process collection ${collection}:`, 'BulkListingModal.fetchPriceSuggestions', error as Error)\n          // Apply default pricing for failed collections\n           applyDefaultPricing(collectionNFTs, suggestions)\n        }\n        \n        // Add delay between requests to avoid rate limiting\n        if (collectionEntries.indexOf([collection, collectionNFTs]) < collectionEntries.length - 1) {\n          await new Promise(resolve => setTimeout(resolve, 500))\n        }\n      }\n      \n      // Show user feedback about data quality\n      if (successfulCollections === 0) {\n        showError('Price Analysis', 'Unable to fetch current market data. Using default pricing suggestions.')\n      } else if (successfulCollections < collectionEntries.length) {\n        log.warn(`Price data available for ${successfulCollections}/${collectionEntries.length} collections`)\n      }\n      \n      setPriceSuggestions(suggestions)\n    } catch (error) {\n      log.error('Error fetching price suggestions:', 'BulkListingModal.fetchPriceSuggestions', error as Error)\n      showError('Price Analysis Failed', 'Unable to analyze market prices. Please set prices manually.')\n      // Apply default pricing for all NFTs as final fallback\n      nfts.forEach(nft => {\n        suggestions[nft.asset_id] = {\n          floorPrice: 1.0,\n          averagePrice: 2.0,\n          suggestedPrice: 1.5,\n          confidence: 'low',\n          sampleSize: 0\n        }\n      })\n      setPriceSuggestions(suggestions)\n    } finally {\n      setLoadingSuggestions(false)\n    }\n  }, [nfts, isOpen, showError])\n  \n  // Helper method to apply default pricing strategy\n  const applyDefaultPricing = (collectionNFTs: InventoryNFT[], suggestions: Record<string, PriceSuggestion>) => {\n    // Default pricing based on collection popularity and rarity\n    const defaultFloor = 1.0\n    const defaultAverage = 2.0\n    const defaultSuggested = 1.5\n    \n    collectionNFTs.forEach((nft: InventoryNFT) => {\n      suggestions[nft.asset_id] = {\n        floorPrice: defaultFloor,\n        averagePrice: defaultAverage,\n        suggestedPrice: defaultSuggested,\n        confidence: 'low',\n        sampleSize: 0\n      }\n    })\n  }\n  \n  useEffect(() => {\n    if (isOpen && nfts.length > 0) {\n      fetchPriceSuggestions()\n    }\n  }, [isOpen, nfts, fetchPriceSuggestions])\n\n  // Sort NFTs for display\n  const sortedNfts = useMemo(() => {\n    const sorted = [...nfts]\n    \n    switch (sortBy) {\n      case 'name_asc':\n        return sorted.sort((a, b) => (a.name || '').localeCompare(b.name || ''))\n      case 'name_desc':\n        return sorted.sort((a, b) => (b.name || '').localeCompare(a.name || ''))\n      case 'collection_asc':\n        return sorted.sort((a, b) => a.collection.collection_name.localeCompare(b.collection.collection_name))\n      case 'collection_desc':\n        return sorted.sort((a, b) => b.collection.collection_name.localeCompare(a.collection.collection_name))\n      case 'mint_asc':\n        return sorted.sort((a, b) => (a.mint_number || 0) - (b.mint_number || 0))\n      case 'mint_desc':\n        return sorted.sort((a, b) => (b.mint_number || 0) - (a.mint_number || 0))\n      case 'price_asc':\n        return sorted.sort((a, b) => {\n          const priceA = parseFloat(listingPrices[a.asset_id] || '0')\n          const priceB = parseFloat(listingPrices[b.asset_id] || '0')\n          return priceA - priceB\n        })\n      case 'price_desc':\n        return sorted.sort((a, b) => {\n          const priceA = parseFloat(listingPrices[a.asset_id] || '0')\n          const priceB = parseFloat(listingPrices[b.asset_id] || '0')\n          return priceB - priceA\n        })\n      default:\n        return sorted\n    }\n  }, [nfts, sortBy, listingPrices])\n\n  const applyBulkPrice = () => {\n    if (!bulkPrice) return\n    \n    const newPrices: Record<string, string> = {}\n    nfts.forEach(nft => {\n      newPrices[nft.asset_id] = bulkPrice\n    })\n    setListingPrices(newPrices)\n  }\n\n\n  \n  const applySuggestedPrices = () => {\n    const newPrices: Record<string, string> = {}\n    nfts.forEach(nft => {\n      const suggestion = priceSuggestions[nft.asset_id]\n      if (suggestion) {\n        newPrices[nft.asset_id] = formatNumber(suggestion.suggestedPrice, 4)\n      }\n    })\n    setListingPrices(newPrices)\n  }\n  \n  const applyFloorPrices = () => {\n    const newPrices: Record<string, string> = {}\n    nfts.forEach(nft => {\n      const suggestion = priceSuggestions[nft.asset_id]\n      if (suggestion) {\n        newPrices[nft.asset_id] = formatNumber(suggestion.floorPrice * 0.99, 4) // 1% below floor\n      }\n    })\n    setListingPrices(newPrices)\n  }\n\n  // Enhanced smart pricing with proper useEffect\n  useEffect(() => {\n    if (showSuggestions && nfts.length > 0) {\n      fetchPriceSuggestions()\n    }\n  }, [showSuggestions, nfts, fetchPriceSuggestions])\n\n\n\n\n\n\n\n\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    if (!session || nfts.length === 0) {\n      showError('Validation Error', 'Please connect your wallet and select NFTs to list')\n      return\n    }\n\n    // Validate all prices\n    const invalidPrices = nfts.filter(nft => {\n      const price = listingPrices[nft.asset_id]\n      return !price || isNaN(parseFloat(price)) || parseFloat(price) <= 0\n    })\n\n    if (invalidPrices.length > 0) {\n      showError(\n        'Invalid Prices',\n        `Please set valid prices for all NFTs. ${invalidPrices.length} NFT(s) have invalid prices.`\n      )\n      return\n    }\n\n    setIsListing(true)\n    setListingProgress(0)\n\n    try {\n      // Create listing actions for all NFTs\n      const actions = nfts.map(nft => {\n        const priceFloat = parseFloat(listingPrices[nft.asset_id])\n        const formattedPrice = priceFloat.toFixed(waxCurrency.precision)\n        const priceString = `${formattedPrice} ${waxCurrency.symbol}`\n\n        return {\n          account: 'atomicmarket',\n          name: 'announcesale',\n          authorization: [{\n            actor: WharfKitService.safeGetActor(session),\n            permission: WharfKitService.safeGetPermission(session)\n          }],\n          data: {\n            seller: WharfKitService.safeGetActor(session),\n            asset_ids: [nft.asset_id],\n            listing_price: priceString,\n            settlement_symbol: `${waxCurrency.precision},${waxCurrency.symbol}`,\n            maker_marketplace: 'market.pxj'\n          }\n        }\n      })\n\n      // Execute listings in batches to avoid transaction size limits\n      const batchSize = 5 // List up to 5 NFTs per transaction\n      const batches = []\n      \n      for (let i = 0; i < actions.length; i += batchSize) {\n        batches.push(actions.slice(i, i + batchSize))\n      }\n\n      let completedBatches = 0\n      \n      for (const batch of batches) {\n        const result = await session.transact({ actions: batch })\n        \n        if (result) {\n          completedBatches++\n          setListingProgress((completedBatches / batches.length) * 100)\n        }\n      }\n      \n      showSuccess(\n        'Listing Successful',\n        `Successfully listed ${nfts.length} NFT(s) on the marketplace!`\n      )\n      onSuccess?.()\n      onClose()\n      setListingPrices({})\n      setBulkPrice('')\n      \n    } catch (error) {\n      log.error('Bulk listing failed:', 'BulkListingModal.handleSubmit', error as Error)\n      showError(\n        'Listing Failed',\n        error instanceof Error ? error.message : 'Unknown error occurred'\n      )\n    } finally {\n      setIsListing(false)\n      setListingProgress(0)\n    }\n  }\n\n  const getTotalValue = () => {\n    return nfts.reduce((total, nft) => {\n      const price = parseFloat(listingPrices[nft.asset_id] || '0')\n      return total + (isNaN(price) ? 0 : price)\n    }, 0)\n  }\n\n  if (!isOpen) return null\n\n  return (\n    <div className=\"modal-overlay\" onClick={onClose}>\n      <div className=\"modal-content bulk-listing-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h2>Bulk List NFTs</h2>\n          <button className=\"modal-close\" onClick={onClose}>\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n            </svg>\n          </button>\n        </div>\n\n        <div className=\"modal-body\">\n          <div className=\"listing-summary\">\n            <h3>Listing Summary</h3>\n            <p>You are about to list <strong>{nfts.length} NFT{nfts.length !== 1 ? 's' : ''}</strong></p>\n            <p className=\"total-value\">Total Value: <strong>{formatWAXPrice(getTotalValue())}</strong></p>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"listing-form\">\n            {/* Smart Pricing Section */}\n            <div className=\"smart-pricing-section\">\n              <div className=\"pricing-header\">\n                <h4>Smart Pricing Tools</h4>\n                <button \n                  type=\"button\" \n                  className=\"toggle-suggestions\"\n                  onClick={() => setShowSuggestions(!showSuggestions)}\n                >\n                  {showSuggestions ? '📊 Hide Analysis' : '📊 Show Analysis'}\n                </button>\n              </div>\n              \n              {showSuggestions && (\n                <div className=\"price-analysis\">\n                  {loadingSuggestions ? (\n                    <div className=\"loading-suggestions\">\n                      <div className=\"spinner\"></div>\n                      <span>Analyzing market data...</span>\n                    </div>\n                  ) : (\n                    <div className=\"suggestion-controls\">\n                      <button \n                        type=\"button\" \n                        className=\"btn-suggestion suggested\"\n                        onClick={applySuggestedPrices}\n                        disabled={isListing || Object.keys(priceSuggestions).length === 0}\n                        title=\"Apply AI-recommended prices based on market analysis\"\n                      >\n                        🎯 Apply Suggested Prices\n                      </button>\n                      <button \n                        type=\"button\" \n                        className=\"btn-suggestion floor\"\n                        onClick={applyFloorPrices}\n                        disabled={isListing || Object.keys(priceSuggestions).length === 0}\n                        title=\"Price 1% below current floor prices for quick sales\"\n                      >\n                        ⚡ Quick Sale (Floor -1%)\n                      </button>\n                    </div>\n                  )}\n                </div>\n              )}\n              \n              {/* Manual Bulk Price Setting */}\n              <div className=\"bulk-price-controls\">\n                <h5>Manual Bulk Pricing</h5>\n                <div className=\"bulk-input-group\">\n                  <input\n                    type=\"number\"\n                    value={bulkPrice}\n                    onChange={(e) => setBulkPrice(e.target.value)}\n                    placeholder=\"Set same price for all\"\n                    step=\"0.0001\"\n                    min=\"0\"\n                    disabled={isListing}\n                  />\n                  <button \n                    type=\"button\" \n                    className=\"btn-secondary\"\n                    onClick={applyBulkPrice}\n                    disabled={!bulkPrice || isListing}\n                  >\n                    Apply to All\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            {/* Individual NFT Pricing */}\n            <div className=\"nft-pricing-list\">\n              <div className=\"pricing-header\">\n                <h4>Individual Pricing</h4>\n                {nfts.length > 1 && (\n                  <div className=\"sort-container\">\n                    <label htmlFor=\"nft-sort\">Sort by:</label>\n                    <select \n                      id=\"nft-sort\"\n                      className=\"sort-select\"\n                      value={sortBy}\n                      onChange={(e) => setSortBy(e.target.value)}\n                    >\n                      <option value=\"name_asc\">Name (A-Z)</option>\n                      <option value=\"name_desc\">Name (Z-A)</option>\n                      <option value=\"collection_asc\">Collection (A-Z)</option>\n                      <option value=\"collection_desc\">Collection (Z-A)</option>\n                      <option value=\"mint_asc\">Mint # (Low-High)</option>\n                      <option value=\"mint_desc\">Mint # (High-Low)</option>\n                      <option value=\"price_asc\">Price (Low-High)</option>\n                      <option value=\"price_desc\">Price (High-Low)</option>\n                    </select>\n                  </div>\n                )}\n              </div>\n              <div className=\"bulk-listing-pricing-list-container\">\n                {sortedNfts.map((nft) => {\n                  const suggestion = priceSuggestions[nft.asset_id]\n                  return (\n                    <div key={nft.asset_id} className=\"bulk-listing-nft-pricing-item\">\n                      <div className=\"bulk-listing-nft-info\">\n                        <div className=\"bulk-listing-nft-image\">\n                          <img \n                            src={nft.img?.startsWith('http') ? nft.img : `https://ipfs.io/ipfs/${nft.img}`}\n                            alt={nft.name}\n                            onError={(e) => {\n                              const target = e.target as HTMLImageElement\n                              target.src = 'https://pixeljourney.xyz/img/toppixals/10.webp'\n                            }}\n                          />\n                        </div>\n                        <div className=\"bulk-listing-nft-details\">\n                          <span className=\"bulk-listing-nft-name\">{nft.name}</span>\n                          <span className=\"bulk-listing-nft-collection\">{typeof nft.collection === 'string' ? nft.collection : nft.collection?.collection_name || nft.collection?.name || 'Unknown'}</span>\n                          {nft.mint_number && (\n                            <span className=\"bulk-listing-nft-mint\">#{nft.mint_number}</span>\n                          )}\n                          {suggestion && (\n                            <div className=\"bulk-listing-price-suggestions\">\n                              <div className=\"bulk-listing-suggestion-row\">\n                                <span className=\"bulk-listing-suggestion-label\">Floor:</span>\n                                <span className=\"bulk-listing-suggestion-value\">{formatWAXPrice(suggestion.floorPrice)}</span>\n                              </div>\n                              <div className=\"bulk-listing-suggestion-row\">\n                                <span className=\"bulk-listing-suggestion-label\">Avg:</span>\n                                <span className=\"bulk-listing-suggestion-value\">{formatWAXPrice(suggestion.averagePrice)}</span>\n                              </div>\n                              <div className=\"bulk-listing-suggestion-row\">\n                                <span className=\"bulk-listing-suggestion-label\">Suggested:</span>\n                                <span className={`bulk-listing-suggestion-value confidence-${suggestion.confidence}`}>\n                                  {formatWAXPrice(suggestion.suggestedPrice)}\n                                </span>\n                                <span className=\"bulk-listing-confidence-badge\">{suggestion.confidence}</span>\n                              </div>\n                              <div className=\"bulk-listing-sample-size\">Based on {suggestion.sampleSize} recent sales</div>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                      <div className=\"bulk-listing-price-input-section\">\n                        <div className=\"bulk-listing-price-input\">\n                          <input\n                            type=\"number\"\n                            value={listingPrices[nft.asset_id] || ''}\n                            onChange={(e) => handlePriceChange(nft.asset_id, e.target.value)}\n                            placeholder=\"Price in WAX\"\n                            step=\"0.0001\"\n                            min=\"0\"\n                            required\n                            disabled={isListing}\n                          />\n                          <span className=\"currency-label\">WAX</span>\n                        </div>\n                        {suggestion && (\n                          <div className=\"bulk-listing-quick-price-buttons\">\n                            <button\n                              type=\"button\"\n                              className=\"bulk-listing-quick-price-btn suggested\"\n                              onClick={() => handlePriceChange(nft.asset_id, formatNumber(suggestion.suggestedPrice, 4))}\n                              disabled={isListing}\n                              title=\"Use suggested price\"\n                            >\n                              💡\n                            </button>\n                            <button\n                              type=\"button\"\n                              className=\"bulk-listing-quick-price-btn floor\"\n                              onClick={() => handlePriceChange(nft.asset_id, formatNumber(suggestion.floorPrice * 0.99, 4))}\n                              disabled={isListing}\n                              title=\"Use floor price -1%\"\n                            >\n                              ⚡\n                            </button>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  )\n                })}\n              </div>\n            </div>\n\n            {isListing && (\n              <div className=\"listing-progress\">\n                <div className=\"progress-bar\">\n                  <div \n                    className=\"progress-fill\" \n                    style={{ width: `${listingProgress}%` }}\n                  ></div>\n                </div>\n                <p>Listing NFTs... {Math.round(listingProgress)}% complete</p>\n              </div>\n            )}\n\n            <div className=\"modal-actions\">\n              <button \n                type=\"button\" \n                className=\"btn-secondary\" \n                onClick={onClose}\n                disabled={isListing}\n              >\n                Cancel\n              </button>\n              <button \n                type=\"submit\" \n                className=\"btn-primary\"\n                disabled={isListing || getTotalValue() === 0}\n              >\n                {isListing ? 'Listing...' : `List ${nfts.length} NFT${nfts.length !== 1 ? 's' : ''}`}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default BulkListingModal","import React, { useState, useMemo } from 'react'\nimport { useWallet } from '../hooks/useWallet'\nimport { useNotifications } from '../hooks/useNotifications'\nimport type { InventoryNFT } from '../types/inventory'\nimport { log } from '../services/loggingService'\n\nimport '../css/modal.css'\n\ninterface BulkTransferModalProps {\n  nfts: InventoryNFT[]\n  isOpen: boolean\n  onClose: () => void\n  onSuccess?: () => void\n}\n\nconst BulkTransferModal: React.FC<BulkTransferModalProps> = ({ nfts, isOpen, onClose, onSuccess }) => {\n  const [recipient, setRecipient] = useState('')\n  const [memo, setMemo] = useState('')\n  const [isTransferring, setIsTransferring] = useState(false)\n  const [transferProgress, setTransferProgress] = useState(0)\n  const [sortBy, setSortBy] = useState('name_asc')\n  const { session, bulkTransferNFT } = useWallet()\n  const { showError, showSuccess } = useNotifications()\n\n  // Sort NFTs for display\n  const sortedNfts = useMemo(() => {\n    const sorted = [...nfts]\n    \n    switch (sortBy) {\n      case 'name_asc':\n        return sorted.sort((a, b) => (a.name || '').localeCompare(b.name || ''))\n      case 'name_desc':\n        return sorted.sort((a, b) => (b.name || '').localeCompare(a.name || ''))\n      case 'collection_asc':\n        return sorted.sort((a, b) => a.collection.collection_name.localeCompare(b.collection.collection_name))\n      case 'collection_desc':\n        return sorted.sort((a, b) => b.collection.collection_name.localeCompare(a.collection.collection_name))\n      case 'mint_asc':\n        return sorted.sort((a, b) => (a.mint_number || 0) - (b.mint_number || 0))\n      case 'mint_desc':\n        return sorted.sort((a, b) => (b.mint_number || 0) - (a.mint_number || 0))\n      default:\n        return sorted\n    }\n  }, [nfts, sortBy])\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    if (!session || !recipient.trim() || nfts.length === 0) {\n      showError('Please fill in all required fields', 'Validation Error')\n      return\n    }\n\n    // Validate recipient account name\n    const recipientTrimmed = recipient.trim().toLowerCase()\n    if (recipientTrimmed.length < 1 || recipientTrimmed.length > 12) {\n      showError('Account name must be between 1 and 12 characters', 'Validation Error')\n      return\n    }\n\n    if (!/^[a-z1-5.]+$/.test(recipientTrimmed)) {\n      showError('Account name can only contain lowercase letters, numbers 1-5, and dots', 'Validation Error')\n      return\n    }\n\n    setIsTransferring(true)\n    setTransferProgress(0)\n\n    try {\n      // Use bulk transfer service for efficient batch processing\n      if (!bulkTransferNFT) {\n        log.error('bulkTransferNFT service not available', 'BulkTransferModal')\n        throw new Error('Bulk transfer service not available')\n      }\n      \n      const assetIds = nfts.map(nft => nft.asset_id)\n      await bulkTransferNFT(\n        recipientTrimmed,\n        assetIds,\n        memo || 'Bulk transfer from PxMarket'\n      )\n      \n      setTransferProgress(100)\n      showSuccess(`Successfully transferred ${nfts.length} NFT(s) to ${recipientTrimmed}!`, 'Transfer Complete')\n      onSuccess?.()\n      onClose()\n      setRecipient('')\n      setMemo('')\n      \n    } catch (error) {\n      log.error('Bulk transfer failed', 'BulkTransferModal.handleSubmit', error as Error, { nftCount: nfts.length, recipient })\n      showError(`Transfer failed: ${error instanceof Error ? error.message : 'Unknown error'}`, 'Transfer Failed')\n    } finally {\n      setIsTransferring(false)\n      setTransferProgress(0)\n    }\n  }\n\n  if (!isOpen) return null\n\n  return (\n    <div className=\"modal-overlay\" onClick={onClose}>\n      <div className=\"modal-content bulk-transfer-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h2>Bulk Transfer NFTs</h2>\n          <button className=\"modal-close\" onClick={onClose}>\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n            </svg>\n          </button>\n        </div>\n\n        <div className=\"modal-body\">\n          <div className=\"transfer-summary\">\n            <h3>Transfer Summary</h3>\n            <p>You are about to transfer <strong>{nfts.length} NFT{nfts.length !== 1 ? 's' : ''}</strong></p>\n            \n            {/* Collection Breakdown */}\n            <div className=\"collection-breakdown\">\n              <h4>Collection Breakdown</h4>\n              {Object.entries(\n                nfts.reduce((acc, nft) => {\n                  const collectionName = nft.collection.collection_name\n                  acc[collectionName] = (acc[collectionName] || 0) + 1\n                  return acc\n                }, {} as Record<string, number>)\n              ).map(([collection, count]: [string, number]) => (\n                <div key={collection} className=\"collection-item\">\n                  <span className=\"collection-name\">{collection}</span>\n                  <span className=\"collection-count\">{count} NFT{count !== 1 ? 's' : ''}</span>\n                </div>\n              ))}\n            </div>\n\n            {/* Rarity Breakdown */}\n            <div className=\"rarity-breakdown\">\n              <h4>Rarity Distribution</h4>\n              {Object.entries(\n                nfts.reduce((acc, nft) => {\n                  const rarity = (nft.template?.immutable_data as {rarity?: string})?.rarity || nft.data?.rarity || 'Unknown'\n                  acc[rarity.toString()] = (acc[rarity.toString()] || 0) + 1\n                  return acc\n                }, {} as Record<string, number>)\n              ).map(([rarity, count]: [string, number]) => (\n                <div key={rarity} className=\"rarity-item\">\n                  <span className=\"rarity-name\">{rarity}</span>\n                  <span className=\"rarity-count\">{count}</span>\n                </div>\n              ))}\n            </div>\n            \n            <div className=\"nft-preview-section\">\n              <div className=\"preview-header\">\n                <h4>NFT Preview</h4>\n                {nfts.length > 1 && (\n                  <div className=\"sort-container\">\n                    <label htmlFor=\"transfer-sort\">Sort by:</label>\n                    <select \n                      id=\"transfer-sort\"\n                      className=\"sort-select\"\n                      value={sortBy}\n                      onChange={(e) => setSortBy(e.target.value)}\n                    >\n                      <option value=\"name_asc\">Name (A-Z)</option>\n                      <option value=\"name_desc\">Name (Z-A)</option>\n                      <option value=\"collection_asc\">Collection (A-Z)</option>\n                      <option value=\"collection_desc\">Collection (Z-A)</option>\n                      <option value=\"mint_asc\">Mint # (Low-High)</option>\n                      <option value=\"mint_desc\">Mint # (High-Low)</option>\n                    </select>\n                  </div>\n                )}\n              </div>\n              <div className=\"nft-preview-list\">\n                {sortedNfts.slice(0, 5).map((nft) => (\n                <div key={nft.asset_id} className=\"nft-preview-item\">\n                  <img \n                    src={nft.img?.startsWith('http') ? nft.img : `https://ipfs.io/ipfs/${nft.img}`}\n                    alt={nft.name}\n                    onError={(e) => {\n                      const target = e.target as HTMLImageElement\n                      target.src = 'https://pixeljourney.xyz/img/toppixals/10.webp'\n                    }}\n                  />\n                  <div className=\"nft-info-bulk\">\n                    <div className=\"nft-details\">\n                      <span className=\"nft-name\">{nft.name}</span>\n                      <span className=\"nft-collection\">{typeof nft.collection === 'string' ? nft.collection : nft.collection?.collection_name || nft.collection?.name || 'Unknown'}</span>\n                      <span className=\"nft-mint\">#{nft.mint_number || 'N/A'}</span>\n                      <span className=\"nft-id\">ID: {nft.asset_id}</span>\n                    </div>\n                  </div>\n                </div>\n              ))}\n              {nfts.length > 5 && (\n                <div className=\"nft-preview-more\">\n                  +{nfts.length - 5} more NFTs\n                </div>\n              )}\n              </div>\n            </div>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"transfer-form\">\n            <div className=\"form-group\">\n              <label htmlFor=\"recipient\">Recipient Account *</label>\n              <input\n                type=\"text\"\n                id=\"recipient\"\n                value={recipient}\n                onChange={(e) => setRecipient(e.target.value)}\n                placeholder=\"Enter WAX account name\"\n                required\n                disabled={isTransferring}\n                maxLength={12}\n              />\n              <small className=\"form-help\">\n                Enter a valid WAX account name (1-12 characters, lowercase letters, numbers 1-5, dots)\n              </small>\n            </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"memo\">Memo (Optional)</label>\n              <input\n                type=\"text\"\n                id=\"memo\"\n                value={memo}\n                onChange={(e) => setMemo(e.target.value)}\n                placeholder=\"Optional transfer memo\"\n                disabled={isTransferring}\n                maxLength={256}\n              />\n            </div>\n\n            {isTransferring && (\n              <div className=\"transfer-progress\">\n                <div className=\"progress-bar\">\n                  <div \n                    className=\"progress-fill\" \n                    style={{ width: `${transferProgress}%` }}\n                  ></div>\n                </div>\n                <p>Transferring... {Math.round(transferProgress)}% complete</p>\n              </div>\n            )}\n\n            <div className=\"modal-actions\">\n              <button \n                type=\"button\" \n                className=\"btn-secondary\" \n                onClick={onClose}\n                disabled={isTransferring}\n              >\n                Cancel\n              </button>\n              <button \n                type=\"submit\" \n                className=\"btn-primary\"\n                disabled={isTransferring || !recipient.trim()}\n              >\n                {isTransferring ? 'Transferring...' : `Transfer ${nfts.length} NFT${nfts.length !== 1 ? 's' : ''}`}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default BulkTransferModal","import React, { useState, useMemo } from 'react'\nimport { useWallet } from '../hooks/useWallet'\nimport type { InventoryNFT } from '../types/inventory'\nimport { useNotifications } from \"../hooks/useNotifications\";\nimport { log } from \"../services/loggingService\";\n\nimport '../css/modal.css'\n\ninterface DistributeModalProps {\n  nfts: InventoryNFT[]\n  isOpen: boolean\n  onClose: () => void\n  onSuccess?: () => void\n}\n\ninterface NFTDistribution {\n  nft: InventoryNFT\n  recipient: string\n}\n\nconst DistributeModal: React.FC<DistributeModalProps> = ({ nfts, isOpen, onClose, onSuccess }) => {\n  const [distributions, setDistributions] = useState<NFTDistribution[]>(() => \n    nfts.map(nft => ({ nft, recipient: '' }))\n  )\n  const [bulkAddresses, setBulkAddresses] = useState('')\n  const [memo, setMemo] = useState('')\n  const [isDistributing, setIsDistributing] = useState(false)\n  const [distributeProgress, setDistributeProgress] = useState(0)\n  const [batchSize, setBatchSize] = useState(10)\n  const [sortBy, setSortBy] = useState('name_asc')\n  const { session } = useWallet()\n  const { showSuccess, showError } = useNotifications()\n\n  // Sort NFTs for display\n  const sortedDistributions = useMemo(() => {\n    const sorted = [...distributions]\n    \n    switch (sortBy) {\n      case 'name_asc':\n        return sorted.sort((a, b) => (a.nft.name || '').localeCompare(b.nft.name || ''))\n      case 'name_desc':\n        return sorted.sort((a, b) => (b.nft.name || '').localeCompare(a.nft.name || ''))\n      case 'collection_asc':\n        return sorted.sort((a, b) => a.nft.collection.collection_name.localeCompare(b.nft.collection.collection_name))\n      case 'collection_desc':\n        return sorted.sort((a, b) => b.nft.collection.collection_name.localeCompare(a.nft.collection.collection_name))\n      case 'mint_asc':\n        return sorted.sort((a, b) => (a.nft.mint_number || 0) - (b.nft.mint_number || 0))\n      case 'mint_desc':\n        return sorted.sort((a, b) => (b.nft.mint_number || 0) - (a.nft.mint_number || 0))\n      default:\n        return sorted\n    }\n  }, [distributions, sortBy])\n\n  // Update distributions when NFTs change\n  React.useEffect(() => {\n    setDistributions(nfts.map(nft => ({ nft, recipient: '' })))\n  }, [nfts])\n\n  const handleRecipientChange = (assetId: string, recipient: string) => {\n    setDistributions(prev => \n      prev.map(dist => \n        dist.nft.asset_id === assetId \n          ? { ...dist, recipient }\n          : dist\n      )\n    )\n  }\n\n  const handleBulkAddressesChange = (addresses: string) => {\n    setBulkAddresses(addresses)\n    \n    if (addresses.trim()) {\n      const addressList = addresses.split(',').map(addr => addr.trim()).filter(addr => addr)\n      \n      if (addressList.length > 0) {\n        setDistributions(prev => \n          prev.map((dist, index) => ({\n            ...dist,\n            recipient: addressList[index % addressList.length] || ''\n          }))\n        )\n      }\n    }\n  }\n\n  const randomizeDistribution = () => {\n    if (!bulkAddresses.trim()) {\n      showError('No addresses provided', 'Please enter comma-separated addresses first')\n      return\n    }\n    \n    const addressList = bulkAddresses.split(',').map(addr => addr.trim()).filter(addr => addr)\n    \n    if (addressList.length === 0) {\n      showError('Invalid addresses', 'Please provide valid comma-separated addresses')\n      return\n    }\n    \n    setDistributions(prev => \n      prev.map(dist => ({\n        ...dist,\n        recipient: addressList[Math.floor(Math.random() * addressList.length)]\n      }))\n    )\n  }\n\n  const clearAllRecipients = () => {\n    setDistributions(prev => prev.map(dist => ({ ...dist, recipient: '' })))\n    setBulkAddresses('')\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    if (!session) {\n      showError('Wallet Required', 'Please connect your wallet first')\n      return\n    }\n\n    // Validate all distributions have recipients\n    const invalidDistributions = distributions.filter(dist => !dist.recipient.trim())\n    if (invalidDistributions.length > 0) {\n      showError('Missing Recipients', `Please specify recipients for all ${invalidDistributions.length} NFT(s)`)\n      return\n    }\n\n    setIsDistributing(true)\n    setDistributeProgress(0)\n\n    try {\n      const totalTransfers = distributions.length\n      let completedTransfers = 0\n\n      // Process in batches\n      for (let i = 0; i < distributions.length; i += batchSize) {\n        const batch = distributions.slice(i, i + batchSize)\n        \n        // Create batch transaction\n        const actions = batch.map(({ nft, recipient }) => ({\n          account: 'atomicassets',\n          name: 'transfer',\n          authorization: [{\n            actor: session.actor.toString(),\n            permission: 'active'\n          }],\n          data: {\n            from: session.actor.toString(),\n            to: recipient.trim(),\n            asset_ids: [nft.asset_id],\n            memo: memo || `Distributed via PxMarket`\n          }\n        }))\n\n        // Execute batch transaction\n        const result = await session.transact({\n          actions\n        }, {\n           expireSeconds: 30\n        })\n\n        completedTransfers += batch.length\n        setDistributeProgress((completedTransfers / totalTransfers) * 100)\n        \n        log.info('Batch distribution completed', 'DistributeModal', {\n          batchSize: batch.length,\n          completed: completedTransfers,\n          total: totalTransfers,\n          transactionId: result.transaction\n        })\n      }\n\n      showSuccess('Distribution Complete', `Successfully distributed ${totalTransfers} NFT${totalTransfers !== 1 ? 's' : ''}`)\n      onSuccess?.()\n      onClose()\n      \n    } catch (error) {\n      log.error('Distribution failed', 'DistributeModal', error as Error)\n      showError(\n        'Distribution Failed',\n        error instanceof Error ? error.message : 'Unknown error occurred'\n      )\n    } finally {\n      setIsDistributing(false)\n      setDistributeProgress(0)\n    }\n  }\n\n  if (!isOpen) return null\n\n  const validDistributions = distributions.filter(dist => dist.recipient.trim())\n  const readyToDistribute = validDistributions.length === distributions.length\n\n  return (\n    <div className=\"modal-overlay\" onClick={onClose}>\n      <div className=\"modal-content distribute-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h2>Distribute NFTs</h2>\n          <button className=\"modal-close\" onClick={onClose}>\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n            </svg>\n          </button>\n        </div>\n\n        <div className=\"modal-body\">\n          <div className=\"distribute-summary\">\n            <h3>Distribution Summary</h3>\n            <p>You are about to distribute <strong>{nfts.length} NFT{nfts.length !== 1 ? 's' : ''}</strong> to individual recipients</p>\n            \n            {/* Bulk Address Input */}\n            <div className=\"bulk-addresses-section\">\n              <h4>Bulk Address Input</h4>\n              <div className=\"form-group\">\n                <label htmlFor=\"bulk-addresses\">Comma-separated addresses (optional)</label>\n                <textarea\n                  id=\"bulk-addresses\"\n                  className=\"form-control\"\n                  value={bulkAddresses}\n                  onChange={(e) => handleBulkAddressesChange(e.target.value)}\n                  placeholder=\"pixeljourney,market.pxj,council.pxj\"\n                  rows={3}\n                />\n                <div className=\"bulk-actions\">\n                  <button \n                    type=\"button\" \n                    className=\"btn btn-secondary\"\n                    onClick={randomizeDistribution}\n                    disabled={!bulkAddresses.trim()}\n                  >\n                    🎲 Randomize Distribution\n                  </button>\n                  <button \n                    type=\"button\" \n                    className=\"btn btn-secondary\"\n                    onClick={clearAllRecipients}\n                  >\n                    🗑️ Clear All\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            {/* Batch Size Configuration */}\n            <div className=\"batch-config\">\n              <h4>Transaction Settings</h4>\n              <div className=\"form-group\">\n                <label htmlFor=\"batch-size\">NFTs per transaction (5-200)</label>\n                <input\n                  type=\"number\"\n                  id=\"batch-size\"\n                  className=\"form-control\"\n                  value={batchSize}\n                  onChange={(e) => setBatchSize(Math.max(5, Math.min(200, parseInt(e.target.value) || 10)))}\n                  min={5}\n                  max={200}\n                />\n                <small>Larger batches are more efficient but may fail if too large</small>\n              </div>\n            </div>\n          </div>\n\n          {/* Individual NFT Distribution List */}\n          <div className=\"distribution-list\">\n            <div className=\"distribution-header\">\n              <h4>Individual Recipients ({validDistributions.length}/{distributions.length} configured)</h4>\n              {nfts.length > 1 && (\n                <div className=\"sort-container\">\n                  <label htmlFor=\"distribute-sort\">Sort by:</label>\n                  <select \n                    id=\"distribute-sort\"\n                    className=\"sort-select\"\n                    value={sortBy}\n                    onChange={(e) => setSortBy(e.target.value)}\n                  >\n                    <option value=\"name_asc\">Name (A-Z)</option>\n                    <option value=\"name_desc\">Name (Z-A)</option>\n                    <option value=\"collection_asc\">Collection (A-Z)</option>\n                    <option value=\"collection_desc\">Collection (Z-A)</option>\n                    <option value=\"mint_asc\">Mint # (Low-High)</option>\n                    <option value=\"mint_desc\">Mint # (High-Low)</option>\n                  </select>\n                </div>\n              )}\n            </div>\n            \n            <div className=\"distribution-items\">\n              {sortedDistributions.map(({ nft, recipient }) => (\n                <div key={nft.asset_id} className=\"distribution-item\">\n                  <div className=\"nft-preview\">\n                    <img \n                      src={nft.img?.startsWith('http') ? nft.img : `https://ipfs.io/ipfs/${nft.img}`}\n                      alt={nft.name}\n                      onError={(e) => {\n                        const target = e.target as HTMLImageElement\n                        target.src = 'https://pixeljourney.xyz/img/toppixals/10.webp'\n                      }}\n                    />\n                    <div className=\"nft-info\">\n                      <span className=\"nft-name\">{nft.name}</span>\n                      <span className=\"nft-collection\">{nft.collection.collection_name}</span>\n                      <span className=\"nft-mint\">#{nft.mint_number || 'N/A'}</span>\n                    </div>\n                  </div>\n                  <div className=\"recipient-input\">\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      value={recipient}\n                      onChange={(e) => handleRecipientChange(nft.asset_id, e.target.value)}\n                      placeholder=\"Recipient account name\"\n                    />\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"distribute-form\">\n            <div className=\"form-group\">\n              <label htmlFor=\"memo\">Memo (optional)</label>\n              <input\n                type=\"text\"\n                id=\"memo\"\n                className=\"form-control\"\n                value={memo}\n                onChange={(e) => setMemo(e.target.value)}\n                placeholder=\"Optional transfer memo\"\n                maxLength={256}\n              />\n            </div>\n\n            {isDistributing && (\n              <div className=\"progress-container\">\n                <div className=\"progress-bar\">\n                  <div \n                    className=\"progress-fill\" \n                    style={{ width: `${distributeProgress}%` }}\n                  ></div>\n                </div>\n                <p>Distributing NFTs... {Math.round(distributeProgress)}%</p>\n              </div>\n            )}\n\n            <div className=\"form-actions\">\n              <button \n                type=\"button\" \n                className=\"btn btn-secondary\"\n                onClick={onClose}\n                disabled={isDistributing}\n              >\n                Cancel\n              </button>\n              <button \n                type=\"submit\" \n                className=\"btn btn-primary\"\n                disabled={isDistributing || !readyToDistribute}\n              >\n                {isDistributing ? 'Distributing...' : `Distribute ${nfts.length} NFT${nfts.length !== 1 ? 's' : ''}`}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default DistributeModal","import React, { useState } from 'react'\nimport { useWallet } from '../hooks/useWallet'\nimport { useNotifications } from '../hooks/useNotifications'\nimport type { InventoryNFT } from '../types/inventory'\nimport { MarketplaceConfigService } from '../config/marketplaceConfig'\nimport { log } from '../services/loggingService'\nimport { WharfKitService } from '../services/wharfkit'\nimport '../css/modal.css'\n\ninterface BulkBurnModalProps {\n  nfts: InventoryNFT[]\n  isOpen: boolean\n  onClose: () => void\n  onSuccess?: () => void\n}\n\nconst BulkBurnModal: React.FC<BulkBurnModalProps> = ({ nfts, isOpen, onClose, onSuccess }) => {\n  const [isBurning, setIsBurning] = useState(false)\n  const [burnProgress, setBurnProgress] = useState(0)\n  const [confirmText, setConfirmText] = useState('')\n  const { session } = useWallet()\n  const { showError, showSuccess, showWarning } = useNotifications()\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    if (!session || nfts.length === 0) {\n      showError('Please connect your wallet and select NFTs to burn', 'Wallet Required')\n      return\n    }\n\n    // Filter out WaxRock Pixal PFPs\n    const waxrockPixals: InventoryNFT[] = []\n    const burnableNfts = nfts.filter(nft => {\n      if (MarketplaceConfigService.isPixalPFP(nft.template.template_id)) {\n        const waxRock = nft.data?.WaxRock as string\n        if (waxRock && MarketplaceConfigService.isValidWaxRock(waxRock)) {\n          waxrockPixals.push(nft)\n          return false // Exclude from burning\n        }\n      }\n      return true // Include in burning\n    })\n\n    // Show warning if WaxRock Pixals were found\n    if (waxrockPixals.length > 0) {\n      const waxrockNames = waxrockPixals.map(nft => `${nft.name} (${nft.data?.WaxRock})`).join(', ')\n      showWarning(\n        `${waxrockPixals.length} WaxRock Pixal PFP(s) were excluded from burning for protection: ${waxrockNames}. WaxRock Pixals are protected from burning and recycling on our platform.`,\n        'Protected NFTs Excluded',\n        8000\n      )\n      \n      if (burnableNfts.length === 0) {\n        showError('No NFTs remaining to burn after excluding WaxRock Pixals.', 'No Burnable NFTs')\n        return\n      }\n    }\n\n    if (confirmText !== 'BURN') {\n      showError('Please type \"BURN\" to confirm this action', 'Confirmation Required')\n      return\n    }\n\n    setIsBurning(true)\n    setBurnProgress(0)\n\n    try {\n      // Create burn actions for burnable NFTs only\n      const actions = burnableNfts.map(nft => ({\n        account: 'atomicassets',\n        name: 'burnasset',\n        authorization: [{\n          actor: WharfKitService.safeGetActor(session),\n          permission: WharfKitService.safeGetPermission(session)\n        }],\n        data: {\n          asset_owner: WharfKitService.safeGetActor(session),\n          asset_id: nft.asset_id\n        }\n      }))\n\n      // Execute burns in batches to avoid transaction size limits\n      const batchSize = 10 // Burn up to 10 NFTs per transaction\n      const batches = []\n      \n      for (let i = 0; i < actions.length; i += batchSize) {\n        batches.push(actions.slice(i, i + batchSize))\n      }\n\n      let completedBatches = 0\n      \n      for (const batch of batches) {\n        const result = await session.transact({ actions: batch })\n        \n        if (result) {\n          completedBatches++\n          setBurnProgress((completedBatches / batches.length) * 100)\n        }\n      }\n      \n      showSuccess(`Successfully burned ${burnableNfts.length} NFT(s)!`, 'Burn Complete')\n      onSuccess?.()\n      onClose()\n      setConfirmText('')\n      \n    } catch (error) {\n      log.error('Bulk burn failed', 'BulkBurnModal.handleSubmit', error as Error, { nftCount: burnableNfts.length })\n      showError(`Burn failed: ${error instanceof Error ? error.message : 'Unknown error'}`, 'Burn Failed')\n    } finally {\n      setIsBurning(false)\n      setBurnProgress(0)\n    }\n  }\n\n  if (!isOpen) return null\n\n  return (\n    <div className=\"modal-overlay\" onClick={onClose}>\n      <div className=\"modal-content bulk-burn-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h2>Bulk Burn NFTs</h2>\n          <button className=\"modal-close\" onClick={onClose}>\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n            </svg>\n          </button>\n        </div>\n\n        <div className=\"modal-body\">\n          <div className=\"burn-warning\">\n            <div className=\"warning-icon\">\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                <path d=\"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\"></path>\n                <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n                <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n              </svg>\n            </div>\n            <h3>⚠️ Warning: This action cannot be undone!</h3>\n            <p>You are about to permanently burn <strong>{nfts.length} NFT{nfts.length !== 1 ? 's' : ''}</strong>. This will completely destroy these assets and they cannot be recovered.</p>\n          </div>\n\n          <div className=\"nfts-to-burn\">\n            <h4>NFTs to be burned:</h4>\n            <div className=\"burn-list-container\">\n              {nfts.map((nft) => (\n                <div key={nft.asset_id} className=\"burn-nft-item\">\n                  <img \n                    src={nft.img?.startsWith('http') ? nft.img : `https://ipfs.io/ipfs/${nft.img}`}\n                    alt={nft.name}\n                    onError={(e) => {\n                      const target = e.target as HTMLImageElement\n                      target.src = 'https://pixeljourney.xyz/img/toppixals/10.webp'\n                    }}\n                  />\n                  <div className=\"nft-details\">\n                    <span className=\"nft-name\">{nft.name}</span>\n                    <span className=\"nft-collection\">{typeof nft.collection === 'string' ? nft.collection : nft.collection?.collection_name || nft.collection?.name || 'Unknown'}</span>\n                    {nft.mint_number && (\n                      <span className=\"nft-mint\">#{nft.mint_number}</span>\n                    )}\n                    <span className=\"nft-id\">ID: {nft.asset_id}</span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"burn-form\">\n            <div className=\"confirmation-section\">\n              <label htmlFor=\"confirmText\">\n                Type <strong>\"BURN\"</strong> to confirm this action:\n              </label>\n              <input\n                id=\"confirmText\"\n                type=\"text\"\n                value={confirmText}\n                onChange={(e) => setConfirmText(e.target.value.toUpperCase())}\n                placeholder=\"Type BURN to confirm\"\n                disabled={isBurning}\n                required\n              />\n            </div>\n\n            {isBurning && (\n              <div className=\"burn-progress\">\n                <div className=\"progress-bar\">\n                  <div \n                    className=\"progress-fill\" \n                    style={{ width: `${burnProgress}%` }}\n                  ></div>\n                </div>\n                <p>Burning NFTs... {Math.round(burnProgress)}% complete</p>\n              </div>\n            )}\n\n            <div className=\"modal-actions\">\n              <button \n                type=\"button\" \n                className=\"btn-secondary\" \n                onClick={onClose}\n                disabled={isBurning}\n              >\n                Cancel\n              </button>\n              <button \n                type=\"submit\" \n                className=\"btn-danger\"\n                disabled={isBurning || confirmText !== 'BURN'}\n              >\n                {isBurning ? 'Burning...' : `🔥 Burn ${nfts.length} NFT${nfts.length !== 1 ? 's' : ''}`}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default BulkBurnModal","import type { IngredientTemplate, CraftingRecipe } from '../types/ingredients'\n\nexport const INGREDIENT_TEMPLATES: IngredientTemplate[] = [\n  { id: 781515, pxj: 1, wuf: 22.0, pxjUpgrade: 0, name: \"Pixal PFP\", type: \"pixals\" },\n  { id: 820134, pxj: 2.22, wuf: 5.0, pxjUpgrade: 0, name: \"Pixel Ingredient Pack\", type: \"pixelpack\" },\n  { id: 858568, pxj: 142.0, wuf: 142.0, pxjUpgrade: 0, name: \"Black (Primary)\", type: \"primary\" },\n  { id: 858569, pxj: 0.42, wuf: 1.0, pxjUpgrade: 0, name: \"Blue (Primary)\", type: \"primary\" },\n  { id: 858570, pxj: 0.42, wuf: 1.0, pxjUpgrade: 0, name: \"Red (Primary)\", type: \"primary\" },\n  { id: 858571, pxj: 0.42, wuf: 1.0, pxjUpgrade: 0, name: \"Yellow (Primary)\", type: \"primary\" },\n  { id: 858572, pxj: 2.22, wuf: 1.0, pxjUpgrade: 25000, name: \"Green (Secondary)\", type: \"secondary\" },\n  { id: 858573, pxj: 2.22, wuf: 1.0, pxjUpgrade: 25000, name: \"Orange (Secondary)\", type: \"secondary\" },\n  { id: 858574, pxj: 2.22, wuf: 1.0, pxjUpgrade: 25000, name: \"Purple (Secondary)\", type: \"secondary\" },\n  { id: 858575, pxj: 14.2, wuf: 14.2, pxjUpgrade: 150000, name: \"Amber (Tertiary)\", type: \"tertiary\" },\n  { id: 858576, pxj: 14.2, wuf: 14.2, pxjUpgrade: 150000, name: \"Chartreuse (Tertiary)\", type: \"tertiary\" },\n  { id: 858577, pxj: 14.2, wuf: 14.2, pxjUpgrade: 150000, name: \"Violet (Tertiary)\", type: \"tertiary\" },\n  { id: 858578, pxj: 14.2, wuf: 14.2, pxjUpgrade: 150000, name: \"Teal (Tertiary)\", type: \"tertiary\" },\n  { id: 858580, pxj: 14.2, wuf: 14.2, pxjUpgrade: 150000, name: \"Vermillion (Tertiary)\", type: \"tertiary\" },\n  { id: 859273, pxj: 14.2, wuf: 14.2, pxjUpgrade: 150000, name: \"Magenta (Tertiary)\", type: \"tertiary\" }\n]\n\nexport const CRAFTING_RECIPES: CraftingRecipe[] = [\n  {\n    id: 'craft_green',\n    name: 'Green (Secondary)',\n    description: 'Craft Green from Yellow + Blue + 25,000 PXJ',\n    resultTemplateId: 858572,\n    ingredients: [\n      { templateId: 858571, quantity: 1, name: 'Yellow (Primary)' },\n      { templateId: 858569, quantity: 1, name: 'Blue (Primary)' }\n    ],\n    pxjCost: 25000,\n    tier: 'secondary'\n  },\n  {\n    id: 'craft_orange',\n    name: 'Orange (Secondary)',\n    description: 'Craft Orange from Red + Yellow + 25,000 PXJ',\n    resultTemplateId: 858573,\n    ingredients: [\n      { templateId: 858570, quantity: 1, name: 'Red (Primary)' },\n      { templateId: 858571, quantity: 1, name: 'Yellow (Primary)' }\n    ],\n    pxjCost: 25000,\n    tier: 'secondary'\n  },\n  {\n    id: 'craft_purple',\n    name: 'Purple (Secondary)',\n    description: 'Craft Purple from Red + Blue + 25,000 PXJ',\n    resultTemplateId: 858574,\n    ingredients: [\n      { templateId: 858570, quantity: 1, name: 'Red (Primary)' },\n      { templateId: 858569, quantity: 1, name: 'Blue (Primary)' }\n    ],\n    pxjCost: 25000,\n    tier: 'secondary'\n  },\n  {\n    id: 'craft_amber',\n    name: 'Amber (Tertiary)',\n    description: 'Craft Amber from Orange + Green + 150,000 PXJ',\n    resultTemplateId: 858575,\n    ingredients: [\n      { templateId: 858573, quantity: 1, name: 'Orange (Secondary)' },\n      { templateId: 858572, quantity: 1, name: 'Green (Secondary)' }\n    ],\n    pxjCost: 150000,\n    tier: 'tertiary'\n  },\n  {\n    id: 'craft_chartreuse',\n    name: 'Chartreuse (Tertiary)',\n    description: 'Craft Chartreuse from Green + Purple + 150,000 PXJ',\n    resultTemplateId: 858576,\n    ingredients: [\n      { templateId: 858572, quantity: 1, name: 'Green (Secondary)' },\n      { templateId: 858574, quantity: 1, name: 'Purple (Secondary)' }\n    ],\n    pxjCost: 150000,\n    tier: 'tertiary'\n  },\n  {\n    id: 'craft_violet',\n    name: 'Violet (Tertiary)',\n    description: 'Craft Violet from Purple + Orange + 150,000 PXJ',\n    resultTemplateId: 858577,\n    ingredients: [\n      { templateId: 858574, quantity: 1, name: 'Purple (Secondary)' },\n      { templateId: 858573, quantity: 1, name: 'Orange (Secondary)' }\n    ],\n    pxjCost: 150000,\n    tier: 'tertiary'\n  },\n  {\n    id: 'craft_teal',\n    name: 'Teal (Tertiary)',\n    description: 'Craft Teal from Green + Purple + 150,000 PXJ',\n    resultTemplateId: 858578,\n    ingredients: [\n      { templateId: 858572, quantity: 1, name: 'Green (Secondary)' },\n      { templateId: 858574, quantity: 1, name: 'Purple (Secondary)' }\n    ],\n    pxjCost: 150000,\n    tier: 'tertiary'\n  },\n  {\n    id: 'craft_vermillion',\n    name: 'Vermillion (Tertiary)',\n    description: 'Craft Vermillion from Orange + Purple + 150,000 PXJ',\n    resultTemplateId: 858580,\n    ingredients: [\n      { templateId: 858573, quantity: 1, name: 'Orange (Secondary)' },\n      { templateId: 858574, quantity: 1, name: 'Purple (Secondary)' }\n    ],\n    pxjCost: 150000,\n    tier: 'tertiary'\n  },\n  {\n    id: 'craft_magenta',\n    name: 'Magenta (Tertiary)',\n    description: 'Craft Magenta from Purple + Orange + 150,000 PXJ',\n    resultTemplateId: 859273,\n    ingredients: [\n      { templateId: 858574, quantity: 1, name: 'Purple (Secondary)' },\n      { templateId: 858573, quantity: 1, name: 'Orange (Secondary)' }\n    ],\n    pxjCost: 150000,\n    tier: 'tertiary'\n  }\n]\n\nexport const getTemplateById = (id: number): IngredientTemplate | undefined => {\n  return INGREDIENT_TEMPLATES.find(template => template.id === id)\n}\n\nexport const getRecipeById = (id: string): CraftingRecipe | undefined => {\n  return CRAFTING_RECIPES.find(recipe => recipe.id === id)\n}\n\nexport const getPrimaryIngredients = (): IngredientTemplate[] => {\n  return INGREDIENT_TEMPLATES.filter(template => template.type === 'primary')\n}\n\nexport const getSecondaryIngredients = (): IngredientTemplate[] => {\n  return INGREDIENT_TEMPLATES.filter(template => template.type === 'secondary')\n}\n\nexport const getTertiaryIngredients = (): IngredientTemplate[] => {\n  return INGREDIENT_TEMPLATES.filter(template => template.type === 'tertiary')\n}","import { apiService } from './api'\nimport type { NFTAsset } from './api'\nimport { INGREDIENT_TEMPLATES } from '../data/ingredients'\nimport type { InventoryItem, UserBalance } from '../types/ingredients'\nimport type { InventoryNFT } from '../types/inventory'\nimport { ErrorMessageService } from './errorMessageService'\nimport { log } from './loggingService'\n\nexport type { InventoryItem, UserBalance }\n\nclass InventoryService {\n  private cache: InventoryItem[] = []\n  private balanceCache: UserBalance = { pxj: 0, wuf: 0 }\n  private lastFetch: number = 0\n  private readonly CACHE_DURATION = 30000 // 30 seconds\n  \n  // Virtual library for background loading\n  private virtualLibrary: Map<string, InventoryNFT[]> = new Map() // account -> full NFT data\n  private virtualLibraryTimestamp: Map<string, number> = new Map()\n  private readonly VIRTUAL_LIBRARY_CACHE_DURATION = 300000 // 5 minutes\n  private backgroundLoadingPromises: Map<string, Promise<void>> = new Map()\n  private isBackgroundLoading: Set<string> = new Set()\n\n  /**\n   * Fetch user's ingredient inventory from the blockchain\n   */\n  async fetchInventory(account: string): Promise<InventoryItem[]> {\n    const now = Date.now()\n    \n    // Return cached data if still fresh\n    if (this.cache.length > 0 && (now - this.lastFetch) < this.CACHE_DURATION) {\n      return this.cache\n    }\n\n    try {\n      // Fetch NFTs from Atomic Market API with burned=false filter\n      const response = await fetch(\n        `${apiService.getCurrentAtomicEndpoint()}/atomicassets/v1/assets?owner=${account}&collection_name=pixeljourney&burned=false&limit=1000&page=1&order=desc&sort=asset_id`\n      )\n      \n      if (!response.ok) {\n        throw new Error(`Failed to fetch inventory: ${response.statusText}`)\n      }\n\n      const data = await response.json()\n      const assets = data.data || []\n\n      // Group assets by template ID and count quantities\n      const inventoryMap = new Map<number, {\n        templateId: number\n        name: string\n        assetIds: string[]\n        tier: 'primary' | 'secondary' | 'tertiary'\n      }>()\n\n      for (const asset of assets) {\n        const templateId = parseInt(asset.template.template_id)\n        const template = INGREDIENT_TEMPLATES.find(t => t.id === templateId)\n        \n        // Only include ingredient templates (burned assets already filtered by API)\n        if (!template || !['primary', 'secondary', 'tertiary'].includes(template.type)) {\n          continue\n        }\n\n        if (!inventoryMap.has(templateId)) {\n          inventoryMap.set(templateId, {\n            templateId,\n            name: template.name,\n            assetIds: [],\n            tier: template.type as 'primary' | 'secondary' | 'tertiary'\n          })\n        }\n\n        inventoryMap.get(templateId)!.assetIds.push(asset.asset_id)\n      }\n\n      // Convert map to array with quantities\n      this.cache = Array.from(inventoryMap.values()).map(item => ({\n        ...item,\n        quantity: item.assetIds.length\n      }))\n\n      this.lastFetch = now\n      return this.cache\n    } catch (error) {\n      ErrorMessageService.logError('InventoryService.fetchInventory', error, { account })\n      \n      // Return empty inventory on error instead of mock data with fake asset IDs\n      this.cache = []\n      return []\n    }\n  }\n\n  /**\n   * Fetch user's token balances (PXJ, WUF)\n   */\n  async fetchBalances(account: string): Promise<UserBalance> {\n    try {\n      let pxjBalance = 0\n      let wufBalance = 0\n\n      // Fetch PXJ balance using WAX chain API\n      try {\n        const pxjBalances = await apiService.getWaxCurrencyBalance(account, 'pixeljourney', 'PXJ')\n        if (pxjBalances && pxjBalances.length > 0) {\n          pxjBalance = parseFloat(pxjBalances[0].balance.split(' ')[0])\n        }\n      } catch (error) {\n        ErrorMessageService.logError('InventoryService.getPXJBalance', error, { account })\n      }\n\n      // Fetch WUF balance using WAX chain API\n      try {\n        const wufBalances = await apiService.getWaxCurrencyBalance(account, 'wuffi', 'WUF')\n        if (wufBalances && wufBalances.length > 0) {\n          wufBalance = parseFloat(wufBalances[0].balance.split(' ')[0])\n        }\n      } catch (error) {\n        ErrorMessageService.logError('InventoryService.getWUFBalance', error, { account })\n      }\n\n      // Use real balances from API\n      this.balanceCache = { pxj: pxjBalance, wuf: wufBalance }\n      return this.balanceCache\n    } catch (error) {\n      ErrorMessageService.logError('InventoryService.fetchBalances', error, { account })\n      \n      // Return zero balances on error instead of mock data\n      const emptyBalances = { pxj: 0, wuf: 0 }\n      this.balanceCache = emptyBalances\n      return emptyBalances\n    }\n  }\n\n  /**\n   * Get quantity of a specific ingredient from inventory\n   */\n  getIngredientQuantity(templateId: number): number {\n    const item = this.cache.find(inv => inv.templateId === templateId)\n    return item ? item.quantity : 0\n  }\n\n  /**\n   * Get asset IDs for a specific ingredient (needed for crafting transactions)\n   */\n  getIngredientAssetIds(templateId: number, quantity: number): string[] {\n    const item = this.cache.find(inv => inv.templateId === templateId)\n    if (!item || item.quantity < quantity) {\n      return []\n    }\n    return item.assetIds.slice(0, quantity)\n  }\n\n  /**\n   * Check if user has enough ingredients for a recipe\n   */\n  canCraftRecipe(ingredients: { templateId: number; quantity: number }[], pxjCost: number): boolean {\n    // Check ingredient availability\n    for (const ingredient of ingredients) {\n      const available = this.getIngredientQuantity(ingredient.templateId)\n      if (available < ingredient.quantity) {\n        return false\n      }\n    }\n\n    // Check PXJ balance\n    if (this.balanceCache.pxj < pxjCost) {\n      return false\n    }\n\n    return true\n  }\n\n  /**\n   * Calculate maximum craftable quantity for a recipe\n   */\n  getMaxCraftableQuantity(ingredients: { templateId: number; quantity: number }[], pxjCost: number): number {\n    let maxFromIngredients = Infinity\n    \n    // Check ingredient availability\n    for (const ingredient of ingredients) {\n      const available = this.getIngredientQuantity(ingredient.templateId)\n      const needed = ingredient.quantity\n      const possibleFromThisIngredient = Math.floor(available / needed)\n      maxFromIngredients = Math.min(maxFromIngredients, possibleFromThisIngredient)\n    }\n    \n    // Check PXJ availability\n    const maxFromPxj = Math.floor(this.balanceCache.pxj / pxjCost)\n    \n    return Math.min(maxFromIngredients, maxFromPxj)\n  }\n\n  /**\n   * Update inventory after successful crafting (optimistic update)\n   */\n  updateInventoryAfterCraft(usedIngredients: { templateId: number; quantity: number }[], pxjSpent: number) {\n    // Remove used ingredients from cache\n    for (const used of usedIngredients) {\n      const item = this.cache.find(inv => inv.templateId === used.templateId)\n      if (item) {\n        item.quantity = Math.max(0, item.quantity - used.quantity)\n        // Remove used asset IDs\n        item.assetIds = item.assetIds.slice(used.quantity)\n      }\n    }\n\n    // Update PXJ balance\n    this.balanceCache.pxj = Math.max(0, this.balanceCache.pxj - pxjSpent)\n  }\n\n  /**\n   * Start background loading of user's full inventory for virtual library\n   */\n  async startBackgroundInventoryLoad(account: string): Promise<void> {\n    if (!account || this.isBackgroundLoading.has(account)) {\n      return\n    }\n\n    // Check if we have recent cached data\n    const lastUpdate = this.virtualLibraryTimestamp.get(account) || 0\n    const now = Date.now()\n    if (now - lastUpdate < this.VIRTUAL_LIBRARY_CACHE_DURATION) {\n      return // Cache is still fresh\n    }\n\n    this.isBackgroundLoading.add(account)\n    \n    try {\n      log.debug(`Starting background inventory load for ${account}`, 'InventoryService.startBackgroundInventoryLoad')\n      \n      // Load full inventory in background\n      const promise = this.loadFullInventoryInBackground(account)\n      this.backgroundLoadingPromises.set(account, promise)\n      \n      await promise\n      \n      log.info(`Background inventory load completed for ${account}`, 'InventoryService.startBackgroundInventoryLoad')\n    } catch (error) {\n      ErrorMessageService.logError('InventoryService.startBackgroundInventoryLoad', error, { account })\n    } finally {\n      this.isBackgroundLoading.delete(account)\n      this.backgroundLoadingPromises.delete(account)\n    }\n  }\n\n  /**\n   * Convert NFTAsset to InventoryNFT format\n   */\n  private convertNFTAssetToInventoryNFT(asset: NFTAsset): InventoryNFT {\n    return {\n      asset_id: asset.asset_id,\n      name: asset.name,\n      img: asset.image,\n      video: asset.video,\n      collection: {\n        name: asset.collection,\n        collection_name: asset.collection\n      },\n      schema: {\n        schema_name: asset.schema\n      },\n      template: {\n        template_id: asset.template_id?.toString() || '0',\n        max_supply: asset.max_supply || '0',\n        immutable_data: {\n          img: asset.image,\n          video: asset.video\n        }\n      },\n      data: {\n        ...asset.traits,\n        rarity: asset.rarity\n      },\n      mint_number: asset.template_mint\n    }\n  }\n\n  /**\n   * Load full inventory in background with pagination\n   */\n  private async loadFullInventoryInBackground(account: string): Promise<void> {\n    const allNFTs: InventoryNFT[] = []\n    let page = 1\n    const limit = 100\n    let hasMore = true\n\n    while (hasMore) {\n      try {\n        // Use getUserInventoryWithFilter with 'all' to get NFTs from all collections\n        const response = await apiService.getUserInventoryWithFilter(\n          account,\n          page,\n          limit,\n          'all'\n        )\n\n        if (response && response.assets && response.assets.length > 0) {\n          // Convert NFTAsset[] to InventoryNFT[]\n          const convertedAssets = response.assets.map(asset => this.convertNFTAssetToInventoryNFT(asset))\n          allNFTs.push(...convertedAssets)\n          hasMore = response.hasMore\n          page++\n          \n          // Small delay to avoid overwhelming the API\n          await new Promise(resolve => setTimeout(resolve, 100))\n        } else {\n          hasMore = false\n        }\n      } catch (error) {\n        ErrorMessageService.logError('InventoryService.loadFullInventoryInBackground', error, { account, page })\n        hasMore = false\n      }\n    }\n\n    // Store in virtual library\n    this.virtualLibrary.set(account, allNFTs)\n    this.virtualLibraryTimestamp.set(account, Date.now())\n    \n    log.info(`Loaded ${allNFTs.length} NFTs into virtual library for ${account}`, 'InventoryService.loadFullInventoryInBackground')\n  }\n\n  /**\n   * Get inventory page from virtual library (if available) or fetch from API\n   */\n  async getInventoryPage(account: string, page: number, limit: number = 50): Promise<{ data: InventoryNFT[], hasMore: boolean, totalCount: number }> {\n    // Try to get from virtual library first\n    const virtualData = this.virtualLibrary.get(account)\n    const lastUpdate = this.virtualLibraryTimestamp.get(account) || 0\n    const now = Date.now()\n    \n    if (virtualData && (now - lastUpdate < this.VIRTUAL_LIBRARY_CACHE_DURATION)) {\n      // Serve from virtual library\n      const startIndex = (page - 1) * limit\n      const endIndex = startIndex + limit\n      const pageData = virtualData.slice(startIndex, endIndex)\n      \n      return {\n        data: pageData,\n        hasMore: endIndex < virtualData.length,\n        totalCount: virtualData.length\n      }\n    }\n    \n    // Fallback to API call - use getUserInventoryWithFilter for all collections\n    try {\n      const response = await apiService.getUserInventoryWithFilter(account, page, limit, 'all')\n      const convertedAssets = response?.assets ? response.assets.map(asset => this.convertNFTAssetToInventoryNFT(asset)) : []\n      return {\n        data: convertedAssets,\n        hasMore: response?.hasMore || false,\n        totalCount: response?.total || 0\n      }\n    } catch (error) {\n      ErrorMessageService.logError('InventoryService.getInventoryPage', error, { account, page, limit })\n      return { data: [], hasMore: false, totalCount: 0 }\n    }\n  }\n\n  /**\n   * Check if background loading is in progress\n   */\n  isBackgroundLoadingInProgress(account: string): boolean {\n    return this.isBackgroundLoading.has(account)\n  }\n\n  /**\n   * Get virtual library stats\n   */\n  getVirtualLibraryStats(account: string): { itemCount: number, lastUpdate: number | null, isLoading: boolean } {\n    const itemCount = this.virtualLibrary.get(account)?.length || 0\n    const lastUpdate = this.virtualLibraryTimestamp.get(account) || null\n    const isLoading = this.isBackgroundLoading.has(account)\n    \n    return { itemCount, lastUpdate, isLoading }\n  }\n\n  /**\n   * Clear cache to force refresh on next fetch\n   */\n  clearCache() {\n    this.cache = []\n    this.balanceCache = { pxj: 0, wuf: 0 }\n    this.lastFetch = 0\n  }\n\n  /**\n   * Clear virtual library cache\n   */\n  clearVirtualLibrary(account?: string) {\n    if (account) {\n      this.virtualLibrary.delete(account)\n      this.virtualLibraryTimestamp.delete(account)\n      this.isBackgroundLoading.delete(account)\n      this.backgroundLoadingPromises.delete(account)\n    } else {\n      this.virtualLibrary.clear()\n      this.virtualLibraryTimestamp.clear()\n      this.isBackgroundLoading.clear()\n      this.backgroundLoadingPromises.clear()\n    }\n  }\n\n  /**\n   * Get cached inventory without fetching\n   */\n  getCachedInventory(): InventoryItem[] {\n    return this.cache\n  }\n\n  /**\n   * Get cached balances without fetching\n   */\n  getCachedBalances(): UserBalance {\n    return this.balanceCache\n  }\n}\n\nexport const inventoryService = new InventoryService()","import React, { useState, useEffect, useMemo, useCallback } from 'react'\nimport { createPortal } from 'react-dom'\nimport { useWallet } from '../hooks/useWallet'\nimport { useDisplaySettings } from '../hooks/useDisplaySettings'\nimport { useNotifications } from '../hooks/useNotifications'\n\nimport { inventoryService } from '../services/inventoryService'\nimport type { InventoryItem, UserBalance, IngredientTemplate } from '../types/ingredients'\nimport type { InventoryNFT } from '../types/inventory'\nimport { \n  CRAFTING_RECIPES,\n  getTemplateById\n} from '../data/ingredients'\nimport type { CraftingRecipe } from '../types/ingredients'\nimport '../css/crafting-modal.css'\n\ninterface CraftingModalProps {\n  isOpen: boolean\n  onClose: () => void\n  ingredient?: IngredientTemplate | InventoryNFT | null\n}\n\n\n\ninterface CraftingQueue {\n  recipe: CraftingRecipe\n  quantity: number\n}\n\nconst CraftingModal: React.FC<CraftingModalProps> = ({ isOpen, onClose, ingredient }) => {\n  const { account, session, transferTokens, executeCraftingTransaction } = useWallet()\n  useDisplaySettings()\n  const { showError, showSuccess, showWarning } = useNotifications()\n  \n  const [activeTab, setActiveTab] = useState<'craft' | 'upgrade'>('craft')\n  const [selectedRecipe, setSelectedRecipe] = useState<CraftingRecipe | null>(null)\n  const [craftingQueue, setCraftingQueue] = useState<CraftingQueue[]>([])\n  const [isProcessing, setIsProcessing] = useState(false)\n  const [inventory, setInventory] = useState<InventoryItem[]>([])\n  const [balances, setBalances] = useState<UserBalance>({ pxj: 0, wuf: 0 })\n  const [loadingInventory, setLoadingInventory] = useState(false)\n  const [craftQuantity, setCraftQuantity] = useState<number>(1)\n  const [maxCraftable, setMaxCraftable] = useState<number>(0)\n  const [sortBy, setSortBy] = useState<string>('name_asc')\n\n  const loadInventoryData = useCallback(async () => {\n    if (!account) {\n      showError('Wallet Required', 'Please connect your wallet first')\n      return\n    }\n\n    setLoadingInventory(true)\n    try {\n      const [inventoryData, balanceData] = await Promise.all([\n        inventoryService.fetchInventory(account),\n        inventoryService.fetchBalances(account)\n      ])\n      \n      setInventory(inventoryData)\n      setBalances(balanceData)\n    } catch (error) {\n      console.error('Failed to load inventory:', error)\n      showError('Failed to load inventory data', error instanceof Error ? error.message : 'Unknown error')\n    } finally {\n      setLoadingInventory(false)\n    }\n  }, [account, showError])\n\n  useEffect(() => {\n    if (isOpen && account) {\n      loadInventoryData()\n    }\n  }, [isOpen, account, loadInventoryData])\n\n  const getInventoryQuantity = (templateId: number): number => {\n     const item = inventory.find(inv => inv.templateId === templateId)\n     return item ? item.quantity : 0\n   }\n\n  const calculateMaxCraftable = (recipe: CraftingRecipe): number => {\n    if (!recipe) return 0\n    \n    let maxFromIngredients = Infinity\n    \n    // Check ingredient availability\n    for (const ingredient of recipe.ingredients) {\n      const available = getInventoryQuantity(ingredient.templateId)\n      const needed = ingredient.quantity\n      const possibleFromThisIngredient = Math.floor(available / needed)\n      maxFromIngredients = Math.min(maxFromIngredients, possibleFromThisIngredient)\n    }\n    \n    // Check PXJ availability\n    const maxFromPxj = Math.floor(balances.pxj / recipe.pxjCost)\n    \n    return Math.min(maxFromIngredients, maxFromPxj)\n  }\n\n  useEffect(() => {\n    if (selectedRecipe) {\n      const max = calculateMaxCraftable(selectedRecipe)\n      setMaxCraftable(max)\n      setCraftQuantity(Math.min(craftQuantity, max))\n    }\n  }, [selectedRecipe, inventory, balances.pxj, calculateMaxCraftable, craftQuantity])\n\n  // Sort inventory items\n  const sortedInventory = useMemo(() => {\n    const sorted = [...inventory]\n    \n    switch (sortBy) {\n      case 'name_asc':\n        return sorted.sort((a, b) => a.name.localeCompare(b.name))\n      case 'name_desc':\n        return sorted.sort((a, b) => b.name.localeCompare(a.name))\n      case 'quantity_asc':\n        return sorted.sort((a, b) => a.quantity - b.quantity)\n      case 'quantity_desc':\n        return sorted.sort((a, b) => b.quantity - a.quantity)\n      case 'type_asc':\n        return sorted.sort((a, b) => {\n          const templateA = getTemplateById(a.templateId)\n          const templateB = getTemplateById(b.templateId)\n          const typeA = templateA?.type || 'Unknown'\n          const typeB = templateB?.type || 'Unknown'\n          return typeA.localeCompare(typeB)\n        })\n      case 'type_desc':\n        return sorted.sort((a, b) => {\n          const templateA = getTemplateById(a.templateId)\n          const templateB = getTemplateById(b.templateId)\n          const typeA = templateA?.type || 'Unknown'\n          const typeB = templateB?.type || 'Unknown'\n          return typeB.localeCompare(typeA)\n        })\n      default:\n        return sorted\n    }\n  }, [inventory, sortBy])\n\n  const canCraft = (recipe: CraftingRecipe, quantity: number = 1): boolean => {\n    // Check ingredients\n    for (const ingredient of recipe.ingredients) {\n      const available = getInventoryQuantity(ingredient.templateId)\n      const needed = ingredient.quantity * quantity\n      if (available < needed) return false\n    }\n    \n    // Check PXJ\n    const pxjNeeded = recipe.pxjCost * quantity\n    if (balances.pxj < pxjNeeded) return false\n    \n    return true\n  }\n\n  const addToQueue = () => {\n    if (!selectedRecipe || craftQuantity <= 0) return\n    \n    if (!canCraft(selectedRecipe, craftQuantity)) {\n      showWarning('Insufficient Resources', 'You don\\'t have enough ingredients or PXJ for this craft.')\n      return\n    }\n\n    const existingIndex = craftingQueue.findIndex(item => item.recipe.id === selectedRecipe.id)\n    \n    if (existingIndex >= 0) {\n      const newQueue = [...craftingQueue]\n      newQueue[existingIndex].quantity += craftQuantity\n      setCraftingQueue(newQueue)\n    } else {\n      setCraftingQueue([...craftingQueue, { recipe: selectedRecipe, quantity: craftQuantity }])\n    }\n    \n    showSuccess('Added to Queue', `Added ${craftQuantity}x ${selectedRecipe.name} to crafting queue`)\n    setCraftQuantity(1)\n  }\n\n  const removeFromQueue = (recipeId: string) => {\n    setCraftingQueue(craftingQueue.filter(item => item.recipe.id !== recipeId))\n  }\n\n  const clearQueue = () => {\n    setCraftingQueue([])\n  }\n\n  const executeCraftingQueue = async () => {\n    if (craftingQueue.length === 0) {\n      showWarning('Empty Queue', 'No items in crafting queue')\n      return\n    }\n\n    if (!account || !session) {\n      showError('Wallet Required', 'Please connect your wallet to craft ingredients')\n      return\n    }\n\n    // Prevent duplicate execution\n    if (isProcessing) {\n      return\n    }\n\n    setIsProcessing(true)\n    let successCount = 0\n    \n    try {\n      for (const queueItem of craftingQueue) {\n        const { recipe, quantity } = queueItem\n        \n        // Get asset IDs for ingredients\n        const ingredientAssets: { templateId: number; assetIds: string[] }[] = []\n        let canProceed = true\n        \n        for (const ingredient of recipe.ingredients) {\n          const neededQuantity = ingredient.quantity * quantity\n          const assetIds = inventoryService.getIngredientAssetIds(ingredient.templateId, neededQuantity)\n          \n          if (assetIds.length < neededQuantity) {\n            showError('Insufficient Ingredients', `Not enough ${ingredient.name} available`)\n            canProceed = false\n            break\n          }\n          \n          ingredientAssets.push({\n            templateId: ingredient.templateId,\n            assetIds: assetIds\n          })\n        }\n        \n        if (!canProceed) continue\n        \n        // Prepare crafting transaction data\n\n        // Execute blockchain transaction using crafting service\n        try {\n          if (!executeCraftingTransaction) {\n            showError('Crafting Error', 'Crafting service not available')\n            continue\n          }\n          \n          // Prepare crafting data for the transaction\n          const craftingData = {\n            recipe: recipe.id,\n            quantity: quantity,\n            ingredientAssets: ingredientAssets,\n            pxjCost: recipe.pxjCost\n          }\n          \n          const result = await executeCraftingTransaction(craftingData)\n          \n          if (result) {\n            successCount++\n            \n            // Update inventory optimistically\n            const usedIngredients = recipe.ingredients.map(ing => ({\n              templateId: ing.templateId,\n              quantity: ing.quantity * quantity\n            }))\n            inventoryService.updateInventoryAfterCraft(usedIngredients, recipe.pxjCost * quantity)\n            \n            showSuccess('Craft Successful!', `Successfully crafted ${quantity}x ${recipe.name}`)\n          } else {\n            showError('Craft Failed', `Failed to craft ${recipe.name}`)\n          }\n        } catch (craftError) {\n          console.error('Craft error:', craftError)\n          showError('Craft Failed', craftError instanceof Error ? craftError.message : 'Unknown crafting error')\n        }\n      }\n      \n      if (successCount > 0) {\n        showSuccess('Crafting Complete!', `Successfully crafted ${successCount} recipe(s)`)\n        setCraftingQueue([])\n        loadInventoryData() // Refresh inventory and balances from blockchain\n        onClose()\n      }\n    } catch (error) {\n      console.error('Crafting failed:', error)\n      showError('Crafting Failed', error instanceof Error ? error.message : 'Unknown error occurred')\n    } finally {\n      setIsProcessing(false)\n    }\n  }\n\n  const handleUpgrade = async () => {\n    if (!ingredient || !account || !session) {\n      showError('Missing Requirements', 'Ingredient and wallet connection required for upgrading')\n      return\n    }\n\n    const templateId = 'template' in ingredient ? ingredient.template?.template_id : ingredient.id\n    const template = getTemplateById(typeof templateId === 'string' ? parseInt(templateId) : templateId)\n    if (!template || template.pxjUpgrade === 0) {\n      showError('Cannot Upgrade', 'This ingredient cannot be upgraded')\n      return\n    }\n\n    if (balances.pxj < template.pxjUpgrade) {\n      showError('Insufficient PXJ', `You need ${template.pxjUpgrade.toLocaleString()} PXJ to upgrade this ingredient`)\n      return\n    }\n\n    setIsProcessing(true)\n    \n    try {\n      // Prepare upgrade transaction\n      \n      // Use centralized token transfer for upgrade\n      if (!transferTokens) {\n        showError('Upgrade Error', 'Transfer service not available')\n        return\n      }\n      \n      const result = await transferTokens(\n        'upgradepool',\n        template.pxjUpgrade.toString(),\n        'PXJ',\n        `Upgrade ${template.name}`\n      )\n      \n      if (result) {\n        showSuccess('Upgrade Complete!', `Successfully upgraded ${template.name}`)\n        loadInventoryData()\n        onClose()\n      }\n    } catch (error) {\n      console.error('Upgrade failed:', error)\n      showError('Upgrade Failed', error instanceof Error ? error.message : 'Unknown error occurred')\n    } finally {\n      setIsProcessing(false)\n    }\n  }\n\n  if (!isOpen) return null\n\n  return createPortal(\n    <div className=\"modal-overlay\" onClick={onClose}>\n      <div className=\"crafting-modal\" onClick={e => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h2>Pixel Ingredient Crafting</h2>\n          <button className=\"close-btn\" onClick={onClose}>×</button>\n        </div>\n        \n        <div className=\"modal-tabs\">\n          <button \n            className={`tab-btn ${activeTab === 'craft' ? 'active' : ''}`}\n            onClick={() => setActiveTab('craft')}\n          >\n            Craft New\n          </button>\n          <button \n            className={`tab-btn ${activeTab === 'upgrade' ? 'active' : ''}`}\n            onClick={() => setActiveTab('upgrade')}\n            disabled={!ingredient}\n          >\n            Upgrade Existing\n          </button>\n        </div>\n\n        <div className=\"modal-content\">\n          {activeTab === 'craft' ? (\n            <div className=\"craft-tab\">\n              <div className=\"craft-layout\">\n                <div className=\"recipe-selection\">\n                  <h3>Select Recipe</h3>\n                  <div className=\"recipe-categories\">\n                    <div className=\"recipe-category\">\n                      <h4>Secondary Ingredients</h4>\n                      {CRAFTING_RECIPES.filter(r => r.tier === 'secondary').map(recipe => (\n                        <div \n                          key={recipe.id}\n                          className={`recipe-item ${selectedRecipe?.id === recipe.id ? 'selected' : ''} ${!canCraft(recipe) ? 'disabled' : ''}`}\n                          onClick={() => setSelectedRecipe(recipe)}\n                        >\n                          <div className=\"recipe-name\">{recipe.name}</div>\n                          <div className=\"recipe-cost\">{recipe.pxjCost.toLocaleString()} PXJ</div>\n                          <div className=\"recipe-ingredients\">\n                            {recipe.ingredients.map((ing, idx) => (\n                              <span key={idx} className={getInventoryQuantity(ing.templateId) >= ing.quantity ? 'available' : 'unavailable'}>\n                                {ing.name} ({getInventoryQuantity(ing.templateId)}/{ing.quantity})\n                              </span>\n                            ))}\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                    \n                    <div className=\"recipe-category\">\n                      <h4>Tertiary Ingredients</h4>\n                      {CRAFTING_RECIPES.filter(r => r.tier === 'tertiary').map(recipe => (\n                        <div \n                          key={recipe.id}\n                          className={`recipe-item ${selectedRecipe?.id === recipe.id ? 'selected' : ''} ${!canCraft(recipe) ? 'disabled' : ''}`}\n                          onClick={() => setSelectedRecipe(recipe)}\n                        >\n                          <div className=\"recipe-name\">{recipe.name}</div>\n                          <div className=\"recipe-cost\">{recipe.pxjCost.toLocaleString()} PXJ</div>\n                          <div className=\"recipe-ingredients\">\n                            {recipe.ingredients.map((ing, idx) => (\n                              <span key={idx} className={getInventoryQuantity(ing.templateId) >= ing.quantity ? 'available' : 'unavailable'}>\n                                {ing.name} ({getInventoryQuantity(ing.templateId)}/{ing.quantity})\n                              </span>\n                            ))}\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n                \n                <div className=\"craft-controls\">\n                  {selectedRecipe && (\n                    <div className=\"selected-recipe\">\n                      <h3>{selectedRecipe.name}</h3>\n                      <p>{selectedRecipe.description}</p>\n                      \n                      <div className=\"quantity-controls\">\n                        <label>Quantity:</label>\n                        <div className=\"quantity-input\">\n                          <button \n                            onClick={() => setCraftQuantity(Math.max(1, craftQuantity - 1))}\n                            disabled={craftQuantity <= 1}\n                          >\n                            -\n                          </button>\n                          <input \n                            type=\"number\" \n                            value={craftQuantity} \n                            onChange={(e) => setCraftQuantity(Math.min(maxCraftable, Math.max(1, parseInt(e.target.value) || 1)))}\n                            min=\"1\"\n                            max={maxCraftable}\n                          />\n                          <button \n                            onClick={() => setCraftQuantity(Math.min(maxCraftable, craftQuantity + 1))}\n                            disabled={craftQuantity >= maxCraftable}\n                          >\n                            +\n                          </button>\n                        </div>\n                        <span className=\"max-craftable\">Max: {maxCraftable}</span>\n                      </div>\n                      \n                      <div className=\"total-cost\">\n                        <strong>Total Cost: {(selectedRecipe.pxjCost * craftQuantity).toLocaleString()} PXJ</strong>\n                      </div>\n                      \n                      <button \n                        className=\"add-to-queue-btn\"\n                        onClick={addToQueue}\n                        disabled={!canCraft(selectedRecipe, craftQuantity) || craftQuantity <= 0}\n                      >\n                        Add to Queue\n                      </button>\n                    </div>\n                  )}\n                  \n                  <div className=\"inventory-section\">\n                    <div className=\"inventory-header\">\n                      <h3>Your Inventory</h3>\n                      {!loadingInventory && inventory.length > 0 && (\n                        <div className=\"sort-container\">\n                          <label htmlFor=\"inventory-sort\">Sort by:</label>\n                          <select \n                            id=\"inventory-sort\"\n                            className=\"sort-select\"\n                            value={sortBy}\n                            onChange={(e) => setSortBy(e.target.value)}\n                          >\n                            <option value=\"name_asc\">Name (A-Z)</option>\n                            <option value=\"name_desc\">Name (Z-A)</option>\n                            <option value=\"quantity_asc\">Quantity (Low-High)</option>\n                            <option value=\"quantity_desc\">Quantity (High-Low)</option>\n                            <option value=\"type_asc\">Type (A-Z)</option>\n                            <option value=\"type_desc\">Type (Z-A)</option>\n                          </select>\n                        </div>\n                      )}\n                    </div>\n                    {loadingInventory ? (\n                      <div className=\"loading-inventory\">\n                        <div className=\"loading-spinner\"></div>\n                        <span>Loading inventory...</span>\n                      </div>\n                    ) : (\n                      <div className=\"inventory-grid\">\n                        {sortedInventory.length === 0 ? (\n                          <div className=\"no-inventory\">\n                            <div className=\"empty-state\">\n                              <span>No ingredients found</span>\n                              <button \n                                className=\"refresh-btn\"\n                                onClick={loadInventoryData}\n                                disabled={loadingInventory}\n                              >\n                                Refresh Inventory\n                              </button>\n                            </div>\n                          </div>\n                        ) : (\n                          sortedInventory.map(item => {\n                            const template = getTemplateById(item.templateId)\n                            return (\n                              <div key={item.templateId} className=\"inventory-item\">\n                                <div className=\"item-name\">{item.name}</div>\n                                <div className=\"item-quantity\">Qty: {item.quantity}</div>\n                                <div className=\"item-tier\">{template?.type || 'Unknown'}</div>\n                              </div>\n                            )\n                          })\n                        )}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"crafting-queue\">\n                <div className=\"queue-header\">\n                  <h3>Crafting Queue ({craftingQueue.length})</h3>\n                  {craftingQueue.length > 0 && (\n                    <button className=\"clear-queue-btn\" onClick={clearQueue}>Clear All</button>\n                  )}\n                </div>\n                \n                {craftingQueue.length > 0 ? (\n                  <div className=\"queue-items\">\n                    {craftingQueue.map((item, index) => (\n                      <div key={index} className=\"queue-item\">\n                        <div className=\"queue-item-info\">\n                          <span className=\"item-name\">{item.recipe.name}</span>\n                          <span className=\"item-quantity\">x{item.quantity}</span>\n                          <span className=\"item-cost\">{(item.recipe.pxjCost * item.quantity).toLocaleString()} PXJ</span>\n                        </div>\n                        <button \n                          className=\"remove-item-btn\"\n                          onClick={() => removeFromQueue(item.recipe.id)}\n                        >\n                          Remove\n                        </button>\n                      </div>\n                    ))}\n                    \n                    <div className=\"queue-total\">\n                      <strong>\n                        Total: {craftingQueue.reduce((sum, item) => sum + (item.recipe.pxjCost * item.quantity), 0).toLocaleString()} PXJ\n                      </strong>\n                    </div>\n                    \n                    <button \n                      className=\"execute-queue-btn\"\n                      onClick={executeCraftingQueue}\n                      disabled={isProcessing}\n                    >\n                      {isProcessing ? 'Crafting...' : 'Craft All'}\n                    </button>\n                  </div>\n                ) : (\n                  <div className=\"empty-queue\">\n                    <p>No items in queue. Select a recipe and add it to start crafting.</p>\n                  </div>\n                )}\n              </div>\n            </div>\n          ) : (\n            <div className=\"upgrade-tab\">\n              {ingredient ? (\n                <div className=\"upgrade-content\">\n                  <div className=\"ingredient-info\">\n                    <h3>Upgrade: {ingredient.name}</h3>\n                    <p>Template ID: {'template' in ingredient ? ingredient.template?.template_id : ingredient.id}</p>\n                    \n                    {(() => {\n                      const templateId = 'template' in ingredient ? ingredient.template?.template_id : ingredient.id\n                      const template = getTemplateById(typeof templateId === 'string' ? parseInt(templateId) : templateId)\n                      if (!template) return <p>Template not found</p>\n                      \n                      if (template.pxjUpgrade === 0) {\n                        return <p className=\"no-upgrade\">This ingredient cannot be upgraded.</p>\n                      }\n                      \n                      return (\n                        <div className=\"upgrade-details\">\n                          <div className=\"upgrade-cost\">\n                            <strong>Upgrade Cost: {template.pxjUpgrade.toLocaleString()} PXJ</strong>\n                          </div>\n                          <div className=\"balance-info\">\n                            Your PXJ Balance: {balances.pxj.toLocaleString()}\n                          </div>\n                          \n                          <button \n                            className=\"upgrade-btn\"\n                            onClick={handleUpgrade}\n                            disabled={isProcessing || balances.pxj < template.pxjUpgrade}\n                          >\n                            {isProcessing ? 'Upgrading...' : 'Upgrade Ingredient'}\n                          </button>\n                        </div>\n                      )\n                    })()}\n                  </div>\n                </div>\n              ) : (\n                <div className=\"no-ingredient\">\n                  <p>No ingredient selected for upgrade. Please select an ingredient from your inventory.</p>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n        \n        <div className=\"modal-footer\">\n          <div className=\"resource-display\">\n            <div className=\"pxj-balance\">\n              <strong>PXJ Balance: {balances.pxj.toLocaleString()}</strong>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>,\n    document.body\n  )\n}\n\nexport default CraftingModal","// Offer service for AtomicMarket buy offers\nimport { Session } from '@wharfkit/session'\nimport { ErrorMessageService } from './errorMessageService'\nimport { apiService } from './api'\nimport { WharfKitService } from './wharfkit'\n\ninterface TransactionResult {\n  transaction_id?: string\n  id?: string\n  [key: string]: unknown\n}\n\nexport interface BuyOffer {\n  offer_id: string\n  buyer: string\n  seller: string\n  asset_ids: string[]\n  price: {\n    amount: string\n    token_precision: number\n    token_symbol: string\n  }\n  memo: string\n  created_at_time: string\n  updated_at_time: string\n  state: number // 0 = pending, 1 = invalid, 2 = accepted, 3 = declined, 4 = cancelled\n}\n\nexport interface OfferResponse {\n  success: boolean\n  data?: BuyOffer[]\n  message?: string\n}\n\nclass OfferService {\n  private atomicMarketContract = 'atomicmarket'\n\n  private get atomicMarketAPI() {\n    return apiService.getCurrentAtomicEndpoint()\n  }\n\n  // Place a buy offer on an NFT\n  async placeBuyOffer(\n    session: Session,\n    assetId: string,\n    offerAmount: string,\n    memo: string = ''\n  ): Promise<unknown> {\n    if (!session) {\n      throw new Error('Please connect your wallet first')\n    }\n\n    const offerFloat = parseFloat(offerAmount)\n    if (isNaN(offerFloat) || offerFloat <= 0) {\n      throw new Error('Please enter a valid offer amount')\n    }\n\n    try {\n      // Format price with WAX precision (8 decimals)\n      const formattedPrice = offerFloat.toFixed(8)\n      const priceString = `${formattedPrice} WAX`\n\n      // Get asset details to determine the seller\n      const assetResponse = await fetch(\n        `${this.atomicMarketAPI}/atomicassets/v1/assets/${assetId}`\n      )\n      \n      if (!assetResponse.ok) {\n        throw new Error('Failed to fetch asset details')\n      }\n\n      const assetData = await assetResponse.json()\n      if (!assetData.success || !assetData.data) {\n        throw new Error('Asset not found')\n      }\n\n      const asset = assetData.data\n      const seller = asset.owner\n\n      // Create the buy offer action\n      const action = {\n        account: this.atomicMarketContract,\n        name: 'announceoffer',\n        authorization: [{\n          actor: WharfKitService.safeGetActor(session),\n          permission: WharfKitService.safeGetPermission(session)\n        }],\n        data: {\n          buyer: WharfKitService.safeGetActor(session),\n          recipient: seller,\n          asset_ids: [assetId],\n          price: priceString,\n          memo: memo || `Buy offer from PxMarket - market.pixeljourney.xyz`,\n          maker_marketplace: 'market.pxj'\n        }\n      }\n\n      // Execute the transaction\n      const result = await session.transact({ actions: [action] })\n      const transactionResult = result as unknown as TransactionResult\n      return {\n         success: true,\n         transaction_id: transactionResult?.transaction_id || transactionResult?.id || '',\n         message: `Buy offer of ${offerAmount} WAX placed successfully!`\n       }\n    } catch (error) {\n      ErrorMessageService.logError('OfferService.placeBuyOffer', error, { assetId, offerAmount, actor: session.actor })\n      throw new Error(`Failed to place buy offer: ${error instanceof Error ? error.message : 'Transaction failed or was rejected'}`)\n    }\n  }\n\n  // Get buy offers for a specific asset\n  async getBuyOffersForAsset(assetId: string): Promise<BuyOffer[]> {\n    try {\n      const response = await fetch(\n        `${this.atomicMarketAPI}/atomicmarket/v1/buyoffers?asset_id=${assetId}&state=0&sort=price&order=desc&limit=50`\n      )\n      \n      if (!response.ok) {\n        throw new Error('Failed to fetch buy offers')\n      }\n\n      const data: OfferResponse = await response.json()\n      \n      if (data.success && data.data) {\n        return data.data\n      }\n      \n      return []\n    } catch (error) {\n      ErrorMessageService.logError('OfferService.getBuyOffersForAsset', error, { assetId })\n      return []\n    }\n  }\n\n  // Get buy offers made by a user\n  async getUserBuyOffers(account: string, state?: number): Promise<BuyOffer[]> {\n    try {\n      let url = `${this.atomicMarketAPI}/atomicmarket/v1/buyoffers?buyer=${account}&sort=created&order=desc&limit=100`\n      \n      if (state !== undefined) {\n        url += `&state=${state}`\n      }\n      \n      const response = await fetch(url)\n      \n      if (!response.ok) {\n        throw new Error('Failed to fetch user buy offers')\n      }\n\n      const data: OfferResponse = await response.json()\n      \n      if (data.success && data.data) {\n        return data.data\n      }\n      \n      return []\n    } catch (error) {\n      ErrorMessageService.logError('OfferService.getUserBuyOffers', error, { account, state })\n      return []\n    }\n  }\n\n  // Cancel a buy offer\n  async cancelBuyOffer(session: Session, offerId: string): Promise<unknown> {\n    if (!session) {\n      throw new Error('Please connect your wallet first')\n    }\n\n    try {\n      const action = {\n        account: this.atomicMarketContract,\n        name: 'canceloffer',\n        authorization: [{\n          actor: WharfKitService.safeGetActor(session),\n          permission: WharfKitService.safeGetPermission(session)\n        }],\n        data: {\n          offer_id: offerId\n        }\n      }\n\n      const result = await session.transact({ actions: [action] })\n      const transactionResult = result as unknown as TransactionResult\n      return {\n         success: true,\n         transaction_id: transactionResult?.transaction_id || transactionResult?.id || '',\n         message: 'Buy offer cancelled successfully!'\n       }\n    } catch (error) {\n      ErrorMessageService.logError('OfferService.cancelBuyOffer', error, { offerId, actor: session.actor })\n      throw new Error(`Failed to cancel buy offer: ${error instanceof Error ? error.message : 'Transaction failed or was rejected'}`)\n    }\n  }\n\n  // Accept a buy offer (for sellers)\n  async acceptBuyOffer(session: Session, offerId: string): Promise<unknown> {\n    if (!session) {\n      throw new Error('Please connect your wallet first')\n    }\n\n    try {\n      const action = {\n        account: this.atomicMarketContract,\n        name: 'acceptoffer',\n        authorization: [{\n          actor: WharfKitService.safeGetActor(session),\n          permission: WharfKitService.safeGetPermission(session)\n        }],\n        data: {\n          offer_id: offerId\n        }\n      }\n\n      const result = await session.transact({ actions: [action] })\n      const transactionResult = result as unknown as TransactionResult\n      return {\n         success: true,\n         transaction_id: transactionResult?.transaction_id || transactionResult?.id || '',\n         message: 'Buy offer accepted successfully!'\n       }\n    } catch (error) {\n      ErrorMessageService.logError('OfferService.acceptBuyOffer', error, { offerId, actor: session.actor })\n      throw new Error(`Failed to accept buy offer: ${error instanceof Error ? error.message : 'Transaction failed or was rejected'}`)\n    }\n  }\n\n  // Decline a buy offer (for sellers)\n  async declineBuyOffer(session: Session, offerId: string): Promise<unknown> {\n    if (!session) {\n      throw new Error('Please connect your wallet first')\n    }\n\n    try {\n      const action = {\n        account: this.atomicMarketContract,\n        name: 'declineoffer',\n        authorization: [{\n          actor: WharfKitService.safeGetActor(session),\n          permission: WharfKitService.safeGetPermission(session)\n        }],\n        data: {\n          offer_id: offerId\n        }\n      }\n\n      const result = await session.transact({ actions: [action] })\n      const transactionResult = result as unknown as TransactionResult\n      return {\n         success: true,\n         transaction_id: transactionResult?.transaction_id || transactionResult?.id || '',\n         message: 'Buy offer declined successfully!'\n       }\n    } catch (error) {\n      ErrorMessageService.logError('OfferService.declineBuyOffer', error, { offerId, actor: session.actor })\n      throw new Error(`Failed to decline buy offer: ${error instanceof Error ? error.message : 'Transaction failed or was rejected'}`)\n    }\n  }\n\n  // Format price for display\n  formatPrice(price: { amount: string; token_precision: number; token_symbol: string }): string {\n    const amount = parseFloat(price.amount) / Math.pow(10, price.token_precision)\n    return `${amount.toFixed(Math.min(4, price.token_precision))} ${price.token_symbol}`\n  }\n\n  // Get offer state as readable string\n  getOfferStateText(state: number): string {\n    switch (state) {\n      case 0: return 'Pending'\n      case 1: return 'Invalid'\n      case 2: return 'Accepted'\n      case 3: return 'Declined'\n      case 4: return 'Cancelled'\n      default: return 'Unknown'\n    }\n  }\n}\n\n// Export singleton instance\nexport const offerService = new OfferService()\nexport default offerService","import React, { useState, useEffect, useCallback } from 'react'\nimport { useWallet } from '../hooks/useWallet'\nimport type { InventoryNFT } from '../types/inventory'\nimport type { OfferApiResponse } from '../types'\nimport MediaRenderer from './MediaRenderer'\nimport { useDisplaySettings } from '../hooks/useDisplaySettings'\nimport { useNotifications } from '../hooks/useNotifications'\nimport { apiService } from '../services/api'\nimport { offerService } from '../services/offerService'\nimport '../css/modal.css'\nimport '../css/view-offers-modal.css'\n\ninterface ViewOffersModalProps {\n  isOpen: boolean\n  onClose: () => void\n  nft: InventoryNFT | null\n}\n\n\n\ninterface Offer {\n  id: string\n  buyer: string\n  price: string\n  symbol: string\n  timestamp: string\n  memo?: string\n}\n\nconst ViewOffersModal: React.FC<ViewOffersModalProps> = ({ isOpen, onClose, nft }) => {\n  const { account, session } = useWallet()\n  const { settings } = useDisplaySettings()\n  const { showSuccess, showError } = useNotifications()\n  const [offers, setOffers] = useState<Offer[]>([])\n  const [loading, setLoading] = useState(false)\n  const [acceptingOffer, setAcceptingOffer] = useState<string | null>(null)\n\n  const loadOffers = useCallback(async () => {\n    if (!nft) return\n    \n    setLoading(true)\n    try {\n      // Fetch real offers from AtomicMarket API\n      const offersData = await apiService.getAssetOffers(nft.asset_id)\n      \n      if (offersData && offersData.length > 0) {\n        // Convert to our Offer interface format\n        const formattedOffers: Offer[] = offersData.map((offer: OfferApiResponse) => ({\n          id: offer.id,\n          buyer: offer.buyer,\n          price: (parseFloat(offer.price) / 100000000).toFixed(8), // Convert from atomic units\n          symbol: offer.token,\n          timestamp: offer.created,\n          memo: offer.memo\n        }))\n        \n        // Sort by price (highest first)\n        const sortedOffers = formattedOffers.sort((a, b) => parseFloat(b.price) - parseFloat(a.price))\n        setOffers(sortedOffers)\n      } else {\n        setOffers([])\n      }\n    } catch (error) {\n      console.error('Failed to load offers:', error)\n      setOffers([])\n    } finally {\n      setLoading(false)\n    }\n  }, [nft])\n\n  useEffect(() => {\n    if (isOpen && nft) {\n      loadOffers()\n    }\n  }, [isOpen, nft, loadOffers])\n\n  const handleAcceptOffer = async (offer: Offer) => {\n    if (!account || !session || !nft) {\n      showError('Please connect your wallet first', 'Wallet Required')\n      return\n    }\n\n    const confirmed = window.confirm(\n      `Accept offer of ${offer.price} ${offer.symbol} from ${offer.buyer}?\\n\\nThis action cannot be undone.`\n    )\n    \n    if (!confirmed) return\n\n    setAcceptingOffer(offer.id)\n    \n    try {\n      if (!session) {\n        showError('Wallet Not Connected', 'Please connect your wallet to accept offers.')\n        return\n      }\n\n      await offerService.acceptBuyOffer(session, offer.id)\n      \n      showSuccess(\n        'Offer Accepted!',\n        `${offer.price} ${offer.symbol} will be transferred to your account.`\n      )\n      onClose()\n    } catch (error) {\n      showError(\n        'Failed to Accept Offer',\n        error instanceof Error ? error.message : 'Failed to accept the offer. Please try again.'\n      )\n    } finally {\n      setAcceptingOffer(null)\n    }\n  }\n\n  const formatTimeAgo = (timestamp: string) => {\n    const now = new Date()\n    const offerTime = new Date(timestamp)\n    const diffMs = now.getTime() - offerTime.getTime()\n    const diffHours = Math.floor(diffMs / (1000 * 60 * 60))\n    const diffDays = Math.floor(diffHours / 24)\n    \n    if (diffDays > 0) {\n      return `${diffDays} day${diffDays > 1 ? 's' : ''} ago`\n    } else if (diffHours > 0) {\n      return `${diffHours} hour${diffHours > 1 ? 's' : ''} ago`\n    } else {\n      const diffMinutes = Math.floor(diffMs / (1000 * 60))\n      return `${diffMinutes} minute${diffMinutes > 1 ? 's' : ''} ago`\n    }\n  }\n\n  if (!isOpen || !nft) return null\n\n  return (\n    <div className=\"modal-overlay\" onClick={onClose}>\n      <div className=\"modal-content view-offers-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h2>View Offers</h2>\n          <button className=\"modal-close\" onClick={onClose}>×</button>\n        </div>\n        \n        <div className=\"offers-content\">\n          <div className=\"view-offers-nft-info\">\n            <div className=\"nft-image\">\n              <MediaRenderer\n                imageUrl={nft.img}\n                alt={nft.name}\n                enableAnimations={settings.enableAnimatedNFTs}\n              />\n            </div>\n            <div className=\"nft-details\">\n              <h3>{nft.name}</h3>\n              <div className=\"nft-id\">#{nft.asset_id}</div>\n              <div className=\"collection-info\">\n                {typeof nft.collection === 'string' ? nft.collection : nft.collection?.name || nft.collection?.collection_name || 'Unknown'} • {nft.schema.schema_name}\n              </div>\n            </div>\n          </div>\n\n          <div className=\"offers-section\">\n            <div className=\"offers-header\">\n              <h3>Active Offers ({offers.length})</h3>\n              <button className=\"refresh-btn\" onClick={loadOffers} disabled={loading}>\n                {loading ? '🔄' : '↻'} Refresh\n              </button>\n            </div>\n            \n            {loading ? (\n              <div className=\"loading-state\">\n                <div className=\"loading-spinner\"></div>\n                <p>Loading offers...</p>\n              </div>\n            ) : offers.length === 0 ? (\n              <div className=\"empty-offers\">\n                <div className=\"empty-icon\">📭</div>\n                <h4>No Offers Yet</h4>\n                <p>This NFT hasn't received any offers yet. List it on the marketplace to attract buyers!</p>\n              </div>\n            ) : (\n              <div className=\"offers-list\">\n                {offers.map((offer, index) => (\n                  <div key={offer.id} className={`offer-card ${index === 0 ? 'highest-offer' : ''}`}>\n                    <div className=\"offer-header\">\n                      <div className=\"buyer-info\">\n                        <strong>{offer.buyer}</strong>\n                        {index === 0 && <span className=\"highest-badge\">🏆 Highest</span>}\n                      </div>\n                      <div className=\"offer-time\">{formatTimeAgo(offer.timestamp)}</div>\n                    </div>\n                    \n                    <div className=\"offer-price\">\n                      <span className=\"price-amount\">{parseFloat(offer.price).toFixed(2)}</span>\n                      <span className=\"price-symbol\">{offer.symbol}</span>\n                    </div>\n                    \n                    {offer.memo && (\n                      <div className=\"offer-memo\">\n                        <em>\"{offer.memo}\"</em>\n                      </div>\n                    )}\n                    \n                    <div className=\"offer-actions\">\n                      <button \n                        className=\"accept-btn\"\n                        onClick={() => handleAcceptOffer(offer)}\n                        disabled={acceptingOffer !== null}\n                      >\n                        {acceptingOffer === offer.id ? 'Accepting...' : 'Accept Offer'}\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n        \n        <div className=\"modal-footer\">\n          <button className=\"btn-secondary\" onClick={onClose}>\n            Close\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ViewOffersModal","// import { useWallet } from '../contexts/WalletContext' // Unused import\nimport { Session } from '@wharfkit/session'\nimport { ErrorMessageService } from './errorMessageService'\nimport { logger } from './loggingService'\nimport { API_ENDPOINTS } from '../config/marketplaceConfig'\n\nexport interface BlendTransaction {\n  expiration: string\n  ref_block_num: number\n  ref_block_prefix: number\n  max_net_usage_words: number\n  max_cpu_usage_ms: number\n  delay_sec: number\n  context_free_actions: unknown[]\n  actions: BlendAction[]\n  transaction_extensions: unknown[]\n}\n\nexport interface BlendAction {\n  account: string\n  name: string\n  authorization: Authorization[]\n  data: Record<string, unknown>\n}\n\nexport interface Authorization {\n  actor: string\n  permission: string\n}\n\nexport class NeftyBlendService {\n  private static BLEND_CONTRACT = 'blend.nefty'\n  private static ATOMIC_ASSETS_CONTRACT = 'atomicassets'\n  private static PXJ_CONTRACT = 'pixeljourney'\n\n  private static RECYCLE_BLEND_ID = 37700\n  private static RECYCLE_COST = '12000.00000000 PXJ'\n  \n  // Pack unpack blend IDs - Updated with correct values\n  private static PACK_TEMPLATE_ID = '820134' // NeftyBlocks pack template ID\n  private static PACK_RECIPE_ID = 37701 // Recipe ID for unpacking\n  private static GENERIC_PACK_BLEND_ID = 37702 // Generic pack blend ID\n\n  static async recyclePixal(assetId: string, userAccount: string): Promise<BlendTransaction> {\n    // Get current blockchain info for transaction\n    const blockInfo = await this.getBlockInfo()\n    \n    const transaction: BlendTransaction = {\n      expiration: this.getExpirationTime(),\n      ref_block_num: blockInfo.ref_block_num,\n      ref_block_prefix: blockInfo.ref_block_prefix,\n      max_net_usage_words: 0,\n      max_cpu_usage_ms: 0,\n      delay_sec: 0,\n      context_free_actions: [],\n      actions: [\n        // Skip CPU pay action as mentioned in requirements\n        {\n          account: this.BLEND_CONTRACT,\n          name: 'openbal',\n          authorization: [{\n            actor: userAccount,\n            permission: 'active'\n          }],\n          data: {\n            owner: userAccount,\n            token_symbol: '8,PXJ'\n          }\n        },\n        {\n          account: this.PXJ_CONTRACT,\n          name: 'transfer',\n          authorization: [{\n            actor: userAccount,\n            permission: 'active'\n          }],\n          data: {\n            from: userAccount,\n            to: this.BLEND_CONTRACT,\n            quantity: this.RECYCLE_COST,\n            memo: 'deposit'\n          }\n        },\n        {\n          account: this.BLEND_CONTRACT,\n          name: 'announcedepo',\n          authorization: [{\n            actor: userAccount,\n            permission: 'active'\n          }],\n          data: {\n            owner: userAccount,\n            count: 1\n          }\n        },\n        {\n          account: this.ATOMIC_ASSETS_CONTRACT,\n          name: 'transfer',\n          authorization: [{\n            actor: userAccount,\n            permission: 'active'\n          }],\n          data: {\n            from: userAccount,\n            to: this.BLEND_CONTRACT,\n            asset_ids: [assetId],\n            memo: 'deposit'\n          }\n        },\n        {\n          account: this.BLEND_CONTRACT,\n          name: 'nosecfuse',\n          authorization: [{\n            actor: userAccount,\n            permission: 'active'\n          }],\n          data: {\n            claimer: userAccount,\n            blend_id: this.RECYCLE_BLEND_ID,\n            transferred_assets: [assetId],\n            own_assets: []\n          }\n        }\n      ],\n      transaction_extensions: []\n    }\n\n    return transaction\n  }\n\n  static async unpackPixelIngredientPack(assetId: string, userAccount: string): Promise<BlendTransaction> {\n    const blockInfo = await this.getBlockInfo()\n    \n    const transaction: BlendTransaction = {\n      expiration: this.getExpirationTime(),\n      ref_block_num: blockInfo.ref_block_num,\n      ref_block_prefix: blockInfo.ref_block_prefix,\n      max_net_usage_words: 0,\n      max_cpu_usage_ms: 0,\n      delay_sec: 0,\n      context_free_actions: [],\n      actions: [\n        {\n          account: this.ATOMIC_ASSETS_CONTRACT,\n          name: 'transfer',\n          authorization: [{\n            actor: userAccount,\n            permission: 'active'\n          }],\n          data: {\n            from: userAccount,\n            to: this.BLEND_CONTRACT,\n            asset_ids: [assetId],\n            memo: 'unpack'\n          }\n        },\n        {\n          account: this.BLEND_CONTRACT,\n          name: 'nosecfuse',\n          authorization: [{\n            actor: userAccount,\n            permission: 'active'\n          }],\n          data: {\n            claimer: userAccount,\n            blend_id: this.PACK_RECIPE_ID,\n            transferred_assets: [assetId],\n            own_assets: []\n          }\n        }\n      ],\n      transaction_extensions: []\n    }\n\n    return transaction\n  }\n\n  static async unpackGenericPack(assetId: string, userAccount: string): Promise<BlendTransaction> {\n    const blockInfo = await this.getBlockInfo()\n    \n    const transaction: BlendTransaction = {\n      expiration: this.getExpirationTime(),\n      ref_block_num: blockInfo.ref_block_num,\n      ref_block_prefix: blockInfo.ref_block_prefix,\n      max_net_usage_words: 0,\n      max_cpu_usage_ms: 0,\n      delay_sec: 0,\n      context_free_actions: [],\n      actions: [\n        {\n          account: this.ATOMIC_ASSETS_CONTRACT,\n          name: 'transfer',\n          authorization: [{\n            actor: userAccount,\n            permission: 'active'\n          }],\n          data: {\n            from: userAccount,\n            to: this.BLEND_CONTRACT,\n            asset_ids: [assetId],\n            memo: 'unpack'\n          }\n        },\n        {\n          account: this.BLEND_CONTRACT,\n          name: 'nosecfuse',\n          authorization: [{\n            actor: userAccount,\n            permission: 'active'\n          }],\n          data: {\n            claimer: userAccount,\n            blend_id: this.GENERIC_PACK_BLEND_ID,\n            transferred_assets: [assetId],\n            own_assets: []\n          }\n        }\n      ],\n      transaction_extensions: []\n    }\n\n    return transaction\n  }\n\n  private static async getBlockInfo(): Promise<{ ref_block_num: number; ref_block_prefix: number }> {\n    try {\n      // Fetch real block info from WAX blockchain\n      const waxEndpoints = [\n        API_ENDPOINTS.WAX_CHAIN.EOSRIO,\n        API_ENDPOINTS.WAX_CHAIN.WAXSWEDEN,\n        API_ENDPOINTS.WAX_CHAIN.GREYMASS\n      ]\n      \n      for (const endpoint of waxEndpoints) {\n        try {\n          const response = await fetch(`${endpoint}/v1/chain/get_info`, {\n            method: 'GET',\n            headers: {\n              'Accept': 'application/json'\n            }\n          })\n          \n          if (!response.ok) continue\n          \n          const chainInfo = await response.json()\n          \n          // Extract block number and prefix from head block ID\n          const headBlockId = chainInfo.head_block_id\n          \n          // Use last irreversible block for safety\n          const refBlockNum = chainInfo.last_irreversible_block_num & 0xFFFF\n          \n          // Extract prefix from block ID (first 4 bytes after reversing)\n          const blockIdBytes = headBlockId.match(/.{2}/g)?.slice(4, 8) || ['00', '00', '00', '00']\n          const refBlockPrefix = parseInt(blockIdBytes.reverse().join(''), 16)\n          \n          return {\n            ref_block_num: refBlockNum,\n            ref_block_prefix: refBlockPrefix\n          }\n        } catch (endpointError) {\n          logger.warn('Failed to fetch block info from endpoint', 'NEFTY_BLEND', { endpoint, error: endpointError })\n          continue\n        }\n      }\n      \n      // Fallback if all endpoints fail\n      throw new Error('All WAX endpoints failed')\n    } catch (error) {\n      ErrorMessageService.logError('NeftyBlendService.getBlockInfo', error)\n      \n      // Return reasonable fallback values based on current time\n      const now = Date.now()\n      return {\n        ref_block_num: (now / 500) & 0xFFFF, // Approximate block number\n        ref_block_prefix: now & 0xFFFFFFFF   // Use timestamp as prefix\n      }\n    }\n  }\n\n  private static getExpirationTime(): string {\n    const now = new Date()\n    const expiration = new Date(now.getTime() + 30 * 60 * 1000) // 30 minutes from now\n    return expiration.toISOString().slice(0, -5) // Remove milliseconds and Z\n  }\n\n  static async executeRecycle(transaction: BlendTransaction, wallet: Session): Promise<boolean> {\n    try {\n      if (!wallet || !wallet.transact) {\n        throw new Error('Wallet not connected or does not support transactions')\n      }\n\n      const result = await wallet.transact({\n        actions: transaction.actions\n      })\n\n      logger.info('Recycle transaction successful', 'NEFTY_BLEND', { result })\n      return true\n    } catch (error) {\n      ErrorMessageService.logError('NeftyBlendService.executeRecycle', error, { \n          blendId: this.RECYCLE_BLEND_ID, \n          recycleCost: this.RECYCLE_COST,\n          actionsCount: transaction.actions.length,\n          walletActor: wallet.actor\n        })\n      throw error\n    }\n  }\n\n  static async executeUnpack(transaction: BlendTransaction, wallet: Session): Promise<unknown> {\n    try {\n      if (!wallet || !wallet.transact) {\n        throw new Error('Wallet not connected or does not support transactions')\n      }\n\n      const result = await wallet.transact({\n        actions: transaction.actions\n      })\n\n      logger.info('Unpack transaction successful', 'NEFTY_BLEND', { result })\n      return result\n    } catch (error) {\n      ErrorMessageService.logError('NeftyBlendService.executeUnpack', error, {\n        actionsCount: transaction.actions.length,\n        walletActor: wallet.actor\n      })\n      throw error\n    }\n  }\n\n  static isPackNFT(nft: {\n    template?: {\n      name?: string\n      template_id?: string\n    }\n  }): boolean {\n    if (!nft || !nft.template) return false\n    \n    // Check if it's a known pack type\n    const packKeywords = ['pack', 'container', 'box', 'chest']\n    const templateName = (nft.template.name || '').toLowerCase()\n    const hasPackKeyword = packKeywords.some(keyword => templateName.includes(keyword))\n    \n    // Check if it's the specific NeftyBlocks pack template\n    const isNeftyBlocksPack = nft.template?.template_id === this.PACK_TEMPLATE_ID\n    \n    return hasPackKeyword || isNeftyBlocksPack\n  }\n\n  static getPackType(nft: {\n    template?: {\n      name?: string\n      template_id?: string\n    }\n  }): 'pixel_ingredient' | 'generic' | null {\n    if (!this.isPackNFT(nft)) return null\n    \n    // Check if it's the NeftyBlocks pack template\n    if (nft.template?.template_id === this.PACK_TEMPLATE_ID) {\n      return 'pixel_ingredient'\n    }\n    \n    return 'generic'\n  }\n\n  static async unpackPixelPack(assetId: string, userAccount: string): Promise<BlendTransaction> {\n    const blockInfo = await this.getBlockInfo()\n    \n    const transaction: BlendTransaction = {\n      expiration: this.getExpirationTime(),\n      ref_block_num: blockInfo.ref_block_num,\n      ref_block_prefix: blockInfo.ref_block_prefix,\n      max_net_usage_words: 0,\n      max_cpu_usage_ms: 0,\n      delay_sec: 0,\n      context_free_actions: [],\n      actions: [\n        {\n          account: this.ATOMIC_ASSETS_CONTRACT,\n          name: 'transfer',\n          authorization: [{\n            actor: userAccount,\n            permission: 'active'\n          }],\n          data: {\n            from: userAccount,\n            to: 'neftyblocksp',\n            asset_ids: [assetId],\n            memo: 'unbox'\n          }\n        }\n      ],\n      transaction_extensions: []\n    }\n\n    return transaction\n  }\n\n  static async unpackPixelPacksBulk(assetIds: string[], userAccount: string): Promise<BlendTransaction[]> {\n    const transactions: BlendTransaction[] = []\n    \n    // Batch assets in groups of 20\n    for (let i = 0; i < assetIds.length; i += 20) {\n      const batch = assetIds.slice(i, i + 20)\n      const blockInfo = await this.getBlockInfo()\n      \n      const transaction: BlendTransaction = {\n        expiration: this.getExpirationTime(),\n        ref_block_num: blockInfo.ref_block_num,\n        ref_block_prefix: blockInfo.ref_block_prefix,\n        max_net_usage_words: 0,\n        max_cpu_usage_ms: 0,\n        delay_sec: 0,\n        context_free_actions: [],\n        actions: batch.map(assetId => ({\n          account: this.ATOMIC_ASSETS_CONTRACT,\n          name: 'transfer',\n          authorization: [{\n            actor: userAccount,\n            permission: 'active'\n          }],\n          data: {\n            from: userAccount,\n            to: 'neftyblocksp',\n            asset_ids: [assetId],\n            memo: 'unbox'\n          }\n        })),\n        transaction_extensions: []\n      }\n      \n      transactions.push(transaction)\n    }\n    \n    return transactions\n  }\n\n  static isPixelPack(nft: {\n    template?: {\n      template_id?: string\n    }\n  }): boolean {\n    return nft.template?.template_id === this.PACK_TEMPLATE_ID\n  }\n}","import React, { useState } from 'react'\nimport { NeftyBlendService } from '../services/neftyBlendService'\nimport { useNotifications } from '../hooks/useNotifications'\nimport type { Session } from '@wharfkit/session'\nimport '../css/modal.css'\nimport '../css/unpack-modal.css'\n\ninterface PackNFT {\n  asset_id: string\n  name: string\n  img?: string\n  mint_number?: number\n  collection: {\n    name: string\n    collection_name: string\n  }\n  schema: {\n    schema_name: string\n  }\n  template: {\n    template_id: string\n    max_supply: string\n  }\n  data: Record<string, string | number | boolean | null | undefined>\n}\n\ninterface UnpackResult {\n  nft: PackNFT\n  success: boolean\n  error?: string\n  transaction?: unknown\n}\n\ninterface UnpackModalProps {\n  isOpen: boolean\n  onClose: () => void\n  selectedNFTs: PackNFT[]\n  userAccount: string\n  walletSession: Session | null\n  onUnpackComplete: () => void\n}\n\nconst UnpackModal: React.FC<UnpackModalProps> = ({\n  isOpen,\n  onClose,\n  selectedNFTs,\n  userAccount,\n  walletSession,\n  onUnpackComplete\n}) => {\n  const [isUnpacking, setIsUnpacking] = useState(false)\n  const { showError, showSuccess } = useNotifications()\n\n  // Filter selected NFTs to only show packs\n  const packNFTs = selectedNFTs.filter(nft => NeftyBlendService.isPackNFT(nft))\n\n  const handleUnpack = async () => {\n    if (!userAccount || !walletSession) {\n      showError('Wallet not connected', 'Connection Required')\n      return\n    }\n\n    if (packNFTs.length === 0) {\n      showError('No pack NFTs selected', 'No Packs Selected')\n      return\n    }\n\n    setIsUnpacking(true)\n    const results: UnpackResult[] = []\n\n    try {\n      for (const nft of packNFTs) {\n        const packType = NeftyBlendService.getPackType(nft)\n        let transaction\n        \n        if (packType === 'pixel_ingredient') {\n          transaction = await NeftyBlendService.unpackPixelIngredientPack(nft.asset_id, userAccount)\n        } else {\n          transaction = await NeftyBlendService.unpackGenericPack(nft.asset_id, userAccount)\n        }\n        \n        const result = await NeftyBlendService.executeUnpack(transaction, walletSession)\n        results.push({ nft, transaction: result, success: true })\n      }\n      \n      // Results processed successfully\n      showSuccess('Packs unpacked successfully!', 'Unpack Complete')\n      onUnpackComplete()\n    } catch (error) {\n      console.error('Error unpacking NFTs:', error)\n      showError('Failed to unpack NFTs. Please try again.', 'Unpack Failed')\n    } finally {\n      setIsUnpacking(false)\n    }\n  }\n\n  if (!isOpen) return null\n\n  const canUnpack = packNFTs.length > 0\n\n  return (\n    <div className=\"modal-overlay\" onClick={onClose}>\n      <div className=\"modal-content unpack-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h2>Unpack NFT</h2>\n          <button className=\"modal-close\" onClick={onClose}>\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n            </svg>\n          </button>\n        </div>\n\n        <div className=\"modal-body\">\n          <div className=\"unpack-nft-info\">\n            <h3>Selected Pack NFTs ({packNFTs.length})</h3>\n            {packNFTs.map((nft) => (\n              <div key={nft.asset_id} className=\"nft-item\">\n                <div className=\"nft-image\">\n                  <img src={nft.img} alt={nft.name} />\n                </div>\n                <div className=\"nft-details\">\n                  <h4>{nft.name}</h4>\n                  <p className=\"collection-name\">{typeof nft.collection === 'string' ? nft.collection : nft.collection?.collection_name || nft.collection?.name || 'Unknown'}</p>\n                  <p className=\"schema-name\">{nft.schema.schema_name}</p>\n                  {nft.mint_number && (\n                    <p className=\"mint-number\">Mint #{nft.mint_number}</p>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n\n          {canUnpack ? (\n            <div className=\"unpack-info\">\n              <div className=\"info-box\">\n                <h4>📦 Pack Contents</h4>\n                <div className=\"pack-contents\">\n                  <p>These packs contain random rewards that will be revealed upon unpacking.</p>\n                  <p className=\"warning\">⚠️ Unpacking will burn these packs permanently!</p>\n                </div>\n              </div>\n\n              <button \n                className=\"unpack-btn\"\n                onClick={handleUnpack}\n                disabled={isUnpacking || !walletSession}\n              >\n                {isUnpacking ? (\n                  <>\n                    <div className=\"loading-spinner small\"></div>\n                    Unpacking...\n                  </>\n                ) : (\n                  `📦 Unpack ${packNFTs.length} Pack${packNFTs.length > 1 ? 's' : ''}`\n                )}\n              </button>\n            </div>\n          ) : (\n            <div className=\"cannot-unpack\">\n              <div className=\"info-box error\">\n                <h4>❌ Cannot Unpack</h4>\n                <p>No pack NFTs selected for unpacking.</p>\n                <p>Only packs, chests, boxes, and containers can be unpacked.</p>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default UnpackModal","/* eslint-disable react-refresh/only-export-components */\nimport { useContext, useEffect, useState, type ReactNode } from 'react'\nimport { wharfKitService } from '../services/wharfkit'\nimport WalletContext, { type WalletContextType } from './WalletContextDefinition.ts'\n\ninterface WalletProviderProps {\n  children: ReactNode\n}\n\nexport const WalletProvider = ({ children }: WalletProviderProps) => {\n  const [walletState, setWalletState] = useState<WalletContextType>({\n    isConnected: false,\n    account: null,\n    session: null,\n    login: async () => null,\n    logout: async () => {},\n    transact: async () => null,\n    purchaseNFT: async () => null,\n    batchPurchaseNFTs: async () => null,\n    executeCraftingTransaction: async () => null,\n    executeTransaction: async () => { throw new Error('Wallet not connected') },\n    isLoading: true\n  })\n\n  useEffect(() => {\n    // Subscribe to wallet state changes\n    const unsubscribe = wharfKitService.subscribe((context) => {\n      setWalletState(context)\n    })\n\n    // Cleanup subscription on unmount\n    return unsubscribe\n  }, [])\n\n  return (\n    <WalletContext.Provider value={walletState}>\n      {children}\n    </WalletContext.Provider>\n  )\n}\n\nexport const useWallet = (): WalletContextType => {\n  const context = useContext(WalletContext)\n  if (context === undefined) {\n    throw new Error('useWallet must be used within a WalletProvider')\n  }\n  return context\n}\n\nexport default WalletContext","import React, { useState, useEffect, useMemo } from 'react'\nimport { useNotifications } from '../hooks/useNotifications'\nimport { useWallet } from '../contexts/WalletContext'\nimport type { InventoryNFT } from '../types/inventory'\nimport MediaRenderer from './MediaRenderer'\nimport { getAssetImageUrl, getAssetVideoUrl } from '../utils/mediaUtils'\n\ninterface BulkAuctionModalProps {\n  nfts: InventoryNFT[]\n  isOpen: boolean\n  onClose: () => void\n  onSuccess: () => void\n}\n\nconst BulkAuctionModal: React.FC<BulkAuctionModalProps> = ({\n  nfts,\n  isOpen,\n  onClose,\n  onSuccess\n}) => {\n  const { showSuccess, showError } = useNotifications()\n  const walletContext = useWallet()\n  const [startingPrice, setStartingPrice] = useState('')\n  const [durationWeeks, setDurationWeeks] = useState(0)\n  const [durationDays, setDurationDays] = useState(1)\n  const [durationHours, setDurationHours] = useState(0)\n  const [durationMinutes, setDurationMinutes] = useState(0)\n  const [auctionMemo, setAuctionMemo] = useState('')\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const [sortBy, setSortBy] = useState('name_asc')\n\n  // Reset form when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      setStartingPrice('')\n      setDurationWeeks(0)\n      setDurationDays(1)\n      setDurationHours(0)\n      setDurationMinutes(0)\n      setAuctionMemo('')\n      setIsSubmitting(false)\n    }\n  }, [isOpen])\n\n  // Sort NFTs for display\n  const sortedNfts = useMemo(() => {\n    const sorted = [...nfts]\n    \n    switch (sortBy) {\n      case 'name_asc':\n        return sorted.sort((a, b) => (a.name || '').localeCompare(b.name || ''))\n      case 'name_desc':\n        return sorted.sort((a, b) => (b.name || '').localeCompare(a.name || ''))\n      case 'collection_asc':\n        return sorted.sort((a, b) => a.collection.collection_name.localeCompare(b.collection.collection_name))\n      case 'collection_desc':\n        return sorted.sort((a, b) => b.collection.collection_name.localeCompare(a.collection.collection_name))\n      case 'mint_asc':\n        return sorted.sort((a, b) => (a.mint_number || 0) - (b.mint_number || 0))\n      case 'mint_desc':\n        return sorted.sort((a, b) => (b.mint_number || 0) - (a.mint_number || 0))\n      default:\n        return sorted\n    }\n  }, [nfts, sortBy])\n\n  const calculateTotalDuration = () => {\n    return (durationWeeks * 7 * 24 * 3600) + \n           (durationDays * 24 * 3600) + \n           (durationHours * 3600) + \n           (durationMinutes * 60)\n  }\n\n  const updateDurationComponent = (component: 'weeks' | 'days' | 'hours' | 'minutes', value: number) => {\n    const clampedValue = Math.max(0, Math.min(value, getMaxValue(component)))\n    \n    switch (component) {\n      case 'weeks':\n        setDurationWeeks(clampedValue)\n        break\n      case 'days':\n        setDurationDays(clampedValue)\n        break\n      case 'hours':\n        setDurationHours(clampedValue)\n        break\n      case 'minutes':\n        setDurationMinutes(clampedValue)\n        break\n    }\n  }\n\n  const getMaxValue = (component: 'weeks' | 'days' | 'hours' | 'minutes') => {\n    switch (component) {\n      case 'weeks': return 4 // Max 4 weeks\n      case 'days': return 30 // Max 30 days\n      case 'hours': return 23 // Max 23 hours\n      case 'minutes': return 59 // Max 59 minutes\n      default: return 0\n    }\n  }\n\n  const formatDurationDisplay = () => {\n    const parts = []\n    if (durationWeeks > 0) parts.push(`${durationWeeks}w`)\n    if (durationDays > 0) parts.push(`${durationDays}d`)\n    if (durationHours > 0) parts.push(`${durationHours}h`)\n    if (durationMinutes > 0) parts.push(`${durationMinutes}m`)\n    return parts.length > 0 ? parts.join(' ') : '0m'\n  }\n\n  const handleSubmit = async () => {\n    if (!startingPrice || parseFloat(startingPrice) <= 0) {\n      showError('Invalid Price', 'Please enter a valid starting price')\n      return\n    }\n\n    const totalDurationSeconds = calculateTotalDuration()\n    if (totalDurationSeconds < 3600) { // Minimum 1 hour\n      showError('Invalid Duration', 'Auction duration must be at least 1 hour')\n      return\n    }\n\n    if (totalDurationSeconds > 2592000) { // Maximum 30 days\n      showError('Invalid Duration', 'Auction duration cannot exceed 30 days')\n      return\n    }\n\n    setIsSubmitting(true)\n\n    try {\n      // Create bulk auction transactions using AtomicMarket announceauct action\n      const startingBidAmount = `${parseFloat(startingPrice).toFixed(8)} WAX`\n      \n      // Create separate auction for each NFT\n      const actions = nfts.map(nft => ({\n        account: 'atomicmarket',\n        name: 'announceauct',\n        authorization: [{\n          actor: walletContext.account || '',\n          permission: 'active'\n        }],\n        data: {\n          seller: walletContext.account || '',\n          asset_ids: [parseInt(nft.asset_id)],\n          starting_bid: startingBidAmount,\n          duration: totalDurationSeconds,\n          maker_marketplace: 'market.pxj'\n        }\n      }))\n      \n      await walletContext.transact(actions)\n      \n      const durationDisplay = formatDurationDisplay()\n      showSuccess(\n        'Bulk Auction Created', \n        `Successfully created auctions for ${nfts.length} NFT${nfts.length !== 1 ? 's' : ''} with starting price ${startingPrice} WAX and duration ${durationDisplay}. Remember to transfer your assets to the atomicmarket contract to activate the auctions.`\n      )\n      \n      onSuccess()\n      onClose()\n    } catch (error) {\n      console.error('Bulk auction creation failed:', error)\n      showError('Auction Creation Failed', error instanceof Error ? error.message : 'Failed to create bulk auctions. Please try again.')\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  if (!isOpen) return null\n\n  return (\n    <div className=\"modal-overlay\" onClick={onClose}>\n      <div className=\"modal-content bulk-auction-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h2>Create Bulk Auction</h2>\n          <button className=\"modal-close\" onClick={onClose}>×</button>\n        </div>\n\n        <div className=\"modal-body\">\n          {/* Selected NFTs Preview */}\n          <div className=\"selected-nfts-section\">\n            <div className=\"selected-nfts-header\">\n              <h3>Selected NFTs ({nfts.length})</h3>\n              {nfts.length > 1 && (\n                <div className=\"sort-container\">\n                  <label htmlFor=\"auction-sort\">Sort by:</label>\n                  <select \n                    id=\"auction-sort\"\n                    className=\"sort-select\"\n                    value={sortBy}\n                    onChange={(e) => setSortBy(e.target.value)}\n                  >\n                    <option value=\"name_asc\">Name (A-Z)</option>\n                    <option value=\"name_desc\">Name (Z-A)</option>\n                    <option value=\"collection_asc\">Collection (A-Z)</option>\n                    <option value=\"collection_desc\">Collection (Z-A)</option>\n                    <option value=\"mint_asc\">Mint # (Low-High)</option>\n                    <option value=\"mint_desc\">Mint # (High-Low)</option>\n                  </select>\n                </div>\n              )}\n            </div>\n            <div className=\"selected-nfts-grid\">\n              {sortedNfts.slice(0, 6).map((nft) => (\n                <div key={nft.asset_id} className=\"selected-nft-item\">\n                  <div className=\"nft-image-container\">\n                    <MediaRenderer\n                      imageUrl={getAssetImageUrl(nft)}\n                      videoUrl={getAssetVideoUrl(nft)}\n                      alt={nft.name || `Asset #${nft.asset_id}`}\n                      className=\"nft-image\"\n                    />\n                  </div>\n                  <div className=\"nft-info\">\n                    <span className=\"nft-name\">{nft.name}</span>\n                    <span className=\"nft-collection\">{typeof nft.collection === 'string' ? nft.collection : nft.collection?.name || nft.collection?.collection_name || 'Unknown'}</span>\n                  </div>\n                </div>\n              ))}\n              {nfts.length > 6 && (\n                <div className=\"more-nfts-indicator\">\n                  +{nfts.length - 6} more\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Auction Settings */}\n          <div className=\"auction-settings\">\n            <div className=\"form-group\">\n              <label htmlFor=\"startingPrice\">Starting Price (WAX)</label>\n              <input\n                type=\"number\"\n                id=\"startingPrice\"\n                value={startingPrice}\n                onChange={(e) => setStartingPrice(e.target.value)}\n                placeholder=\"Enter starting price\"\n                min=\"0\"\n                step=\"0.01\"\n                disabled={isSubmitting}\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label>Auction Duration</label>\n              <div className=\"duration-inputs\">\n                <div className=\"duration-field\">\n                  <label className=\"duration-label\">Weeks</label>\n                  <input\n                    type=\"number\"\n                    className=\"duration-input\"\n                    value={durationWeeks}\n                    onChange={(e) => updateDurationComponent('weeks', parseInt(e.target.value) || 0)}\n                    min=\"0\"\n                    max={getMaxValue('weeks')}\n                    disabled={isSubmitting}\n                  />\n                </div>\n                <div className=\"duration-field\">\n                  <label className=\"duration-label\">Days</label>\n                  <input\n                    type=\"number\"\n                    className=\"duration-input\"\n                    value={durationDays}\n                    onChange={(e) => updateDurationComponent('days', parseInt(e.target.value) || 0)}\n                    min=\"0\"\n                    max={getMaxValue('days')}\n                    disabled={isSubmitting}\n                  />\n                </div>\n                <div className=\"duration-field\">\n                  <label className=\"duration-label\">Hours</label>\n                  <input\n                    type=\"number\"\n                    className=\"duration-input\"\n                    value={durationHours}\n                    onChange={(e) => updateDurationComponent('hours', parseInt(e.target.value) || 0)}\n                    min=\"0\"\n                    max={getMaxValue('hours')}\n                    disabled={isSubmitting}\n                  />\n                </div>\n                <div className=\"duration-field\">\n                  <label className=\"duration-label\">Minutes</label>\n                  <input\n                    type=\"number\"\n                    className=\"duration-input\"\n                    value={durationMinutes}\n                    onChange={(e) => updateDurationComponent('minutes', parseInt(e.target.value) || 0)}\n                    min=\"0\"\n                    max={getMaxValue('minutes')}\n                    disabled={isSubmitting}\n                  />\n                </div>\n              </div>\n              <div className=\"duration-summary\">\n                <span className=\"duration-display\">{formatDurationDisplay()}</span>\n                <span className=\"duration-total\">({calculateTotalDuration().toLocaleString()}s)</span>\n              </div>\n            </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"auctionMemo\">Memo (Optional)</label>\n              <textarea\n                id=\"auctionMemo\"\n                value={auctionMemo}\n                onChange={(e) => setAuctionMemo(e.target.value)}\n                placeholder=\"Add a note about this auction batch...\"\n                rows={3}\n                maxLength={256}\n                disabled={isSubmitting}\n              />\n            </div>\n          </div>\n        </div>\n\n        <div className=\"modal-footer\">\n          <button \n            className=\"cancel-btn\" \n            onClick={onClose}\n            disabled={isSubmitting}\n          >\n            Cancel\n          </button>\n          <button \n            className=\"create-btn\"\n            onClick={handleSubmit}\n            disabled={\n              isSubmitting ||\n              !startingPrice ||\n              parseFloat(startingPrice) <= 0 ||\n              calculateTotalDuration() < 3600\n            }\n          >\n            {isSubmitting ? 'Creating...' : `Create ${nfts.length} Auction${nfts.length !== 1 ? 's' : ''}`}\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default BulkAuctionModal","import { log } from './loggingService'\nimport { priceService } from './priceService'\n\nexport interface TokenizedAsset {\n  assetId: number\n  name: string\n  image: string\n  schema: string\n  owner: string\n  burned: boolean\n  mint: number\n  contract: string\n  collection: {\n    collectionName: string\n    displayName: string\n    collectionImage?: string\n    verification: boolean\n    blacklisted: boolean\n  }\n  transferable: boolean\n  burnable: boolean\n  mutableData: Array<{ key: string; value: [string, string | number | boolean] }>\n  immutableData: Array<{ key: string; value: [string, string | number | boolean] }>\n  rarityScore: number\n  attributesFloor: number\n  rwax: {\n    symbol: string\n    contract: string\n    decimals: number\n    tokenName: string\n    redeemAmount: number\n  }\n  template: {\n    templateId: number\n  }\n}\n\nexport interface FeeToken {\n  fee: string\n  contract: string\n  exchange_rate: string\n  symbol: string\n  amount: string\n  wax_value?: string\n}\n\nexport interface UserAsset {\n  assetId: number\n  name: string\n  image: string\n  schema: string\n  owner: string\n  burned: boolean\n  mint: number\n  contract: string\n  collection: {\n    collectionName: string\n    displayName: string\n    collectionImage?: string\n    verification: boolean\n    blacklisted: boolean\n  }\n  transferable: boolean\n  burnable: boolean\n  mutableData: Array<{ key: string; value: [string, string | number | boolean] }>\n  immutableData: Array<{ key: string; value: [string, string | number | boolean] }>\n  template: {\n    templateId: number\n  }\n}\n\nexport interface AssetPool {\n  assetId: string\n  issuedTokens: string\n}\n\n//  // try sticking to using https://wax-api.hivebp.io/api/ as the endpoint for these .. similar to how RWAX itself does, \n\n\nclass RWaxService {\n  private readonly WAX_API_BASE = 'https://wax.eosrio.io/v1/chain'\n  private readonly ATOMIC_API_BASE = 'https://wax-api.hivebp.io/api'\n\n  /**\n   * Fetch fee tokens from RWAX contract table with live WAX value conversion\n   */\n  async getFeeTokens(): Promise<FeeToken[]> {\n    const maxRetries = 3\n    \n    for (let attempt = 1; attempt <= maxRetries; attempt++) {\n      try {\n        const controller = new AbortController()\n        const timeoutId = setTimeout(() => controller.abort(), 10000)\n        \n        const response = await fetch(`${this.WAX_API_BASE}/get_table_rows`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            code: 'rwax',\n            scope: 'rwax',\n            table: 'feetokens',\n            json: true,\n            limit: 100\n          }),\n          signal: controller.signal\n        })\n        \n        clearTimeout(timeoutId)\n        \n        if (!response.ok) {\n          throw new Error(`HTTP ${response.status}: ${response.statusText}`)\n        }\n        \n        const data = await response.json()\n        \n        if (!data.rows || !Array.isArray(data.rows)) {\n          log.error('Invalid fee tokens response structure:', data)\n          return []\n        }\n        \n        // Pre-fetch Alcor rates for tokens that need them\n        const alcorTokenIds = ['honey-honeyhiveio', 'lswax-liquidstaked']\n        const alcorRates = await this.fetchAlcorTokenRates(alcorTokenIds)\n        \n        // Process fee tokens and calculate live WAX conversions\n        const feeTokens = await Promise.all(data.rows.map(async (row: { fee: string; contract: string; exchange_rate?: string }) => {\n          const feeMatch = row.fee.match(/([0-9.]+)\\s+([A-Z]+)/)\n          const symbol = feeMatch ? feeMatch[2] : 'UNKNOWN'\n          const amount = feeMatch ? feeMatch[1] : '0'\n          \n          // Calculate live WAX equivalent using priceService for better accuracy\n          let waxValue: string | undefined\n          if (symbol !== 'WAX') {\n            try {\n              waxValue = await this.calculateLiveWaxValue(symbol, amount, alcorRates)\n            } catch (error) {\n              log.warn(`Failed to get live WAX value for ${symbol}, using exchange rate fallback`, 'RWaxService.getFeeTokens')\n              // Fallback to exchange rate if available\n              if (row.exchange_rate) {\n                const exchangeRate = parseFloat(row.exchange_rate)\n                const feeAmount = parseFloat(amount)\n                if (!isNaN(exchangeRate) && !isNaN(feeAmount)) {\n                  waxValue = (feeAmount / exchangeRate).toFixed(8)\n                }\n              }\n            }\n          }\n          \n          return {\n            fee: row.fee,\n            contract: row.contract,\n            exchange_rate: row.exchange_rate,\n            symbol,\n            amount,\n            wax_value: waxValue\n          }\n        }))\n        \n        log.info(`Successfully fetched ${feeTokens.length} fee tokens with live WAX conversions`)\n        return feeTokens\n        \n      } catch (error) {\n        log.error(`Attempt ${attempt} failed to fetch fee tokens:`, error instanceof Error ? error.message : String(error))\n        \n        if (attempt === maxRetries) {\n          throw new Error(`Failed to fetch fee tokens after ${maxRetries} attempts: ${error}`)\n        }\n        \n        // Wait 1 second before retry\n        await new Promise(resolve => setTimeout(resolve, 1000))\n      }\n    }\n    \n    return []\n  }\n\n  /**\n   * Fetch Alcor V2 token rates in batch\n   * @param tokenIds Array of token IDs (e.g., ['honey-honeyhiveio', 'lswax-liquidstaked'])\n   * @returns Map of token ID to WAX rate\n   */\n  private async fetchAlcorTokenRates(tokenIds: string[]): Promise<Map<string, number>> {\n    try {\n      const url = `https://wax.alcor.exchange/api/v2/tokens/${tokenIds.join(',')}`\n      const response = await fetch(url)\n      const tokens = await response.json()\n      \n      const rates = new Map<string, number>()\n      tokens.forEach((t: any) => {\n        const id = `${t.symbol.toLowerCase()}-${t.contract}`\n        rates.set(id, parseFloat(t.system_price) || 0)\n      })\n      \n      return rates\n    } catch (error) {\n      log.error('Failed to fetch Alcor V2 rates:', 'RWaxService.fetchAlcorTokenRates', error as Error)\n      return new Map()\n    }\n  }\n\n  /**\n    * Calculate live WAX value for different fee tokens\n    * @param symbol Token symbol (e.g., 'WPIXAL', 'PXJ', 'HONEY', 'LSWAX')\n    * @param amount Token amount as string\n    * @param alcorRates Pre-fetched Map from fetchAlcorTokenRates (for efficiency)\n    * @returns WAX value as string\n    */\n  private async calculateLiveWaxValue(symbol: string, amount: string, alcorRates?: Map<string, number>): Promise<string> {\n    const feeAmount = parseFloat(amount)\n    if (isNaN(feeAmount)) {\n      throw new Error(`Invalid amount: ${amount}`)\n    }\n\n    try {\n      switch (symbol.toUpperCase()) {\n        case 'WPIXAL': {\n          // Convert WPIXAL to WAX using live market rates\n          const wpixalPriceWAX = await priceService.getWpixalPriceWAX()\n          const waxValue = feeAmount * wpixalPriceWAX\n          return waxValue.toFixed(8)\n        }\n        case 'PXJ': {\n          // Convert PXJ to WAX using USD prices\n          const pxjPriceUSD = await priceService.getPxjPriceUSD()\n          const waxPriceUSD = await priceService.getWaxPriceUSD()\n          if (waxPriceUSD > 0) {\n            const waxValue = (feeAmount * pxjPriceUSD) / waxPriceUSD\n            return waxValue.toFixed(8)\n          }\n          throw new Error('WAX price is zero')\n        }\n        case 'HONEY': {\n          const rate = alcorRates?.get('honey-honeyhiveio') || 0\n          if (rate > 0) {\n            const waxValue = feeAmount * rate\n            return waxValue.toFixed(8)\n          }\n          throw new Error('HONEY/WAX rate not available')\n        }\n        case 'LSWAX': {\n          const rate = alcorRates?.get('lswax-liquidstaked') || 0\n          if (rate > 0) {\n            const waxValue = feeAmount * rate\n            return waxValue.toFixed(8)\n          }\n          // Fallback: assume 1.1616 WAX per LSWAX if rate unavailable (updated from 1.03-1.05 to match recent data)\n          const waxValue = feeAmount * 1.1616\n          return waxValue.toFixed(8)\n        }\n        default: {\n          // For unknown tokens, try to use a generic conversion\n          // This could be extended to support more tokens via external APIs\n          log.warn(`Unknown token symbol for live conversion: ${symbol}`, 'RWaxService.calculateLiveWaxValue')\n          throw new Error(`Unsupported token: ${symbol}`)\n        }\n      }\n    } catch (error) {\n      log.error(`Failed to calculate live WAX value for ${symbol}:`, 'RWaxService.calculateLiveWaxValue', error as Error)\n      throw error\n    }\n  }\n\n  /**\n   * Get WPIXAL amount for a specific asset from assetpools table\n   */\n  async getAssetPoolInfo(assetId: string): Promise<AssetPool | null> {\n    const maxRetries = 3\n    \n    for (let attempt = 1; attempt <= maxRetries; attempt++) {\n      try {\n        const controller = new AbortController()\n        const timeoutId = setTimeout(() => controller.abort(), 10000)\n        \n        const response = await fetch(`${this.WAX_API_BASE}/get_table_rows`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            code: 'rwax',\n            scope: 'WPIXAL',\n            table: 'assetpools',\n            json: true,\n            limit: 1,\n            lower_bound: assetId,\n            upper_bound: assetId,\n            key_type: 'i64'\n          }),\n          signal: controller.signal\n        })\n        \n        clearTimeout(timeoutId)\n        \n        if (!response.ok) {\n          throw new Error(`HTTP ${response.status}: ${response.statusText}`)\n        }\n        \n        const data = await response.json()\n        \n        if (!data.rows || !Array.isArray(data.rows) || data.rows.length === 0) {\n          return null\n        }\n        \n        const row = data.rows[0]\n        return {\n          assetId: row.asset_id,\n          issuedTokens: row.issued_tokens\n        }\n        \n      } catch (error) {\n        log.error(`Attempt ${attempt} failed to fetch asset pool info for ${assetId}:`, error instanceof Error ? error.message : String(error))\n        \n        if (attempt === maxRetries) {\n          log.error(`Failed to fetch asset pool info after ${maxRetries} attempts: ${error}`)\n          return null\n        }\n        \n        // Wait 1 second before retry\n        await new Promise(resolve => setTimeout(resolve, 1000))\n      }\n    }\n    \n    return null\n  }\n\n  /**\n   * Fetch tokenized WPIXAL assets from API with fallback to test data\n   */\n  async getTokenizedAssets(\n    limit: number = 36,\n    offset: number = 0,\n    sortBy: string = 'rarity_score_desc',\n    attributeFilters: string = ''\n  ): Promise<TokenizedAsset[]> {\n    const maxRetries = 3\n    let lastError: Error | null = null\n\n    for (let attempt = 1; attempt <= maxRetries; attempt++) {\n      try {\n        const params = new URLSearchParams({\n          term: '',\n          owner: 'rwax',\n          collection: 'pixeljourney',\n          schema: 'pixals',\n          category: '',\n          recent: '',\n          order_by: sortBy,\n          limit: limit.toString(),\n          search_type: 'inventory',\n          offer_type: 'sales',\n          min_price: '0',\n          max_price: '0',\n          offset: offset.toString(),\n          verified: 'all',\n          favorites: 'false',\n          user: 'pixeljourney',\n          contract: '',\n          attributes: attributeFilters,\n          only: 'rwax',\n          rwax_contract: 'pixeljourney',\n          rwax_symbol: 'WPIXAL'\n        })\n\n        const url = `${this.ATOMIC_API_BASE}/assets?${params.toString()}`\n        log.info(`Fetching tokenized assets from: ${url}`, 'RWaxService')\n        \n        const response = await fetch(url, {\n          method: 'GET',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          }\n        })\n\n        if (!response.ok) {\n          throw new Error(`HTTP ${response.status}: ${response.statusText}`)\n        }\n\n        const data = await response.json()\n        log.debug('RWAX API Response received', 'RWaxService.getTokenizedAssets', { dataLength: Array.isArray(data) ? data.length : 'not array' })\n        \n        // Return the original API response structure\n        return Array.isArray(data) ? data : []\n        \n      } catch (error) {\n        lastError = error instanceof Error ? error : new Error(String(error))\n        log.error(`Attempt ${attempt}/${maxRetries} failed:`, 'RWaxService.getTokenizedAssets', lastError)\n        \n        // If this is the last attempt, return test data\n        if (attempt === maxRetries) {\n          log.warn('API failed, returning test data with original structure', 'RWaxService.getTokenizedAssets')\n          \n          // Use original API response structure from test data\n          const testAssets = [\n            {\n              assetId: 1099932947523,\n              name: \"Pixal 09106\",\n              schema: \"pixals\",\n              owner: \"rwax\",\n              burned: false,\n              mint: 9106,\n              contract: \"atomicassets\",\n              collection: {\n                collectionName: \"pixeljourney\",\n                displayName: \"Pixel Journey\",\n                collectionImage: \"QmVnrLdB1xQ9EMzgw5srW6u8WKQpTjmYz6fBi2g7ic8iob\",\n                verification: true,\n                blacklisted: false\n              },\n              transferable: true,\n              burnable: true,\n              mutableData: [],\n              immutableData: [\n                { key: \"Background\", value: [\"string\", \"Nefty Spot\"] },\n                { key: \"Body\", value: [\"string\", \"Pink-Blue Overalls\"] },\n                { key: \"Eyes\", value: [\"string\", \"Kawaii Green\"] },\n                { key: \"Head\", value: [\"string\", \"Grey\"] },\n                { key: \"img\", value: [\"string\", \"Qma9rcg1NHxhvG5CMDecS3bo14gpQSr6QFieUXsFPrG14T\"] },\n                { key: \"name\", value: [\"string\", \"Pixal 09106\"] }\n              ] as Array<{ key: string; value: [string, string | number | boolean] }>,\n              rarityScore: 419.80619503583694,\n              attributesFloor: 501.0,\n              rwax: {\n                symbol: \"WPIXAL\",\n                contract: \"pixeljourney\",\n                decimals: 8,\n                tokenName: \"Wrapped Pixal\",\n                redeemAmount: 1.09997216\n              },\n              image: \"Qma9rcg1NHxhvG5CMDecS3bo14gpQSr6QFieUXsFPrG14T\",\n              template: {\n                templateId: 781515\n              }\n            },\n            {\n              assetId: 1099931322703,\n              name: \"Pixal 06238\",\n              schema: \"pixals\",\n              owner: \"rwax\",\n              burned: false,\n              mint: 6238,\n              contract: \"atomicassets\",\n              collection: {\n                collectionName: \"pixeljourney\",\n                displayName: \"Pixel Journey\",\n                verification: true,\n                blacklisted: false\n              },\n              transferable: true,\n              burnable: true,\n              mutableData: [],\n              immutableData: [\n                { key: \"Background\", value: [\"string\", \"Blue Sky\"] },\n                { key: \"Body\", value: [\"string\", \"Red Shirt\"] },\n                { key: \"Eyes\", value: [\"string\", \"Brown\"] },\n                { key: \"Head\", value: [\"string\", \"Black Hair\"] },\n                { key: \"img\", value: [\"string\", \"QmTestImage2\"] },\n                { key: \"name\", value: [\"string\", \"Pixal 06238\"] }\n              ] as Array<{ key: string; value: [string, string | number | boolean] }>,\n              rarityScore: 350.5,\n              attributesFloor: 400.0,\n              rwax: {\n                symbol: \"WPIXAL\",\n                contract: \"pixeljourney\",\n                decimals: 8,\n                tokenName: \"Wrapped Pixal\",\n                redeemAmount: 1.25\n              },\n              image: \"QmTestImage2\",\n              template: {\n                templateId: 781516\n              }\n            }\n          ]\n          \n          // Apply pagination to test data\n          const startIndex = offset\n          const endIndex = startIndex + limit\n          return testAssets.slice(startIndex, endIndex)\n        }\n      }\n    }\n\n    // This should never be reached due to the fallback in the last attempt\n    throw lastError || new Error('Failed to fetch tokenized assets')\n  }\n\n  /**\n   * Get WPIXAL amount for a specific asset\n   */\n  async getAssetWPIXALAmount(assetId: string): Promise<string> {\n    try {\n      const url = `${this.WAX_API_BASE}/get_table_rows`\n      const requestBody = {\n        code: 'pixeljourney',\n        index_position: 'primary',\n        json: true,\n        key_type: 'i64',\n        limit: 1,\n        reverse: false,\n        lower_bound: assetId,\n        upper_bound: assetId,\n        scope: 'pixeljourney',\n        show_payer: false,\n        table: 'assetpools',\n        table_key: ''\n      }\n      \n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(requestBody)\n      })\n      \n      if (!response.ok) {\n        throw new Error(`Failed to fetch WPIXAL amount: ${response.statusText}`)\n      }\n      \n      const data = await response.json()\n      \n      if (data.rows && data.rows.length > 0) {\n        return data.rows[0].issued_tokens\n      }\n      \n      return '0.00000000 WPIXAL'\n    } catch (error) {\n      log.error('Error fetching WPIXAL amount:', 'RWaxService.getAssetWPIXALAmount', error instanceof Error ? error : new Error(String(error)))\n      return '0.00000000 WPIXAL'\n    }\n  }\n\n\n\n\n\n  /**\n   * Fetch user's Pixal assets for tokenization\n   */\n  async getUserPixalAssets(account: string, limit: number = 36, offset: number = 0): Promise<UserAsset[]> {\n    const maxRetries = 3\n    let lastError: Error | null = null\n\n    for (let attempt = 1; attempt <= maxRetries; attempt++) {\n      try {\n        // Use AtomicAssets API with proper pagination\n        const page = Math.floor(offset / limit) + 1\n        const url = `https://wax.api.atomicassets.io/atomicassets/v1/assets?owner=${account}&collection_name=pixeljourney&schema_name=pixals&limit=${limit}&page=${page}&order=desc&sort=asset_id`\n        \n        log.info(`Fetching user assets from: ${url}`, 'RWaxService')\n        \n        const response = await fetch(url, {\n          method: 'GET',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          }\n        })\n        \n        if (!response.ok) {\n          throw new Error(`HTTP ${response.status}: ${response.statusText}`)\n        }\n        \n        const data = await response.json()\n        \n        // Check if data and data.data exist\n        if (!data || !data.data || !Array.isArray(data.data)) {\n          log.error('Invalid user assets API response structure:', data)\n          return []\n        }\n        \n        return data.data.map((asset: any) => {\n          // Enhanced image URL processing with multiple fallbacks\n          let imageUrl = ''\n          \n          // Try multiple image sources\n          const imageSources = [\n            asset.data?.img,\n            asset.data?.image,\n            asset.immutable_data?.img,\n            asset.immutable_data?.image,\n            asset.template?.immutable_data?.img,\n            asset.template?.immutable_data?.image\n          ]\n          \n          for (const source of imageSources) {\n            if (source && typeof source === 'string') {\n              imageUrl = source\n              break\n            }\n          }\n          \n          // Process image URL to handle IPFS and relative paths\n          if (imageUrl && !imageUrl.startsWith('http')) {\n            if (imageUrl.startsWith('Qm') || imageUrl.startsWith('/ipfs/')) {\n              imageUrl = `https://ipfs.io/ipfs/${imageUrl.replace('/ipfs/', '')}`\n            } else if (imageUrl.startsWith('ipfs://')) {\n              imageUrl = imageUrl.replace('ipfs://', 'https://ipfs.io/ipfs/')\n            }\n          }\n          \n          return {\n            assetId: parseInt(asset.asset_id) || 0,\n            name: asset.name || asset.data?.name || asset.immutable_data?.name || `Pixal #${asset.asset_id}`,\n            image: imageUrl,\n            schema: asset.schema?.schema_name || asset.schema_name || 'pixals',\n            owner: asset.owner || '',\n            burned: asset.burned || false,\n            mint: asset.template_mint || 0,\n            contract: asset.contract || 'atomicassets',\n            collection: {\n              collectionName: asset.collection?.collection_name || asset.collection_name || 'pixeljourney',\n              displayName: asset.collection?.name || asset.collection?.collection_name || 'Pixel Journey',\n              verification: asset.collection?.authorized_accounts?.length > 0 || true,\n              blacklisted: false\n            },\n            transferable: asset.transferable !== false,\n            burnable: asset.burnable !== false,\n            mutableData: Array.isArray(asset.mutable_data) ? asset.mutable_data : [],\n            immutableData: Array.isArray(asset.immutable_data) ? asset.immutable_data : [],\n            template: {\n              templateId: parseInt(asset.template?.template_id || asset.template_id || '0')\n            }\n          }\n        })\n        \n      } catch (error) {\n        lastError = error instanceof Error ? error : new Error(String(error))\n        log.error(`Attempt ${attempt}/${maxRetries} failed:`, 'RWaxService.getUserPixalAssets', lastError)\n        \n        // If this is the last attempt, return empty array instead of throwing\n        if (attempt === maxRetries) {\n          log.error('All attempts failed, returning empty array', 'RWaxService.getUserPixalAssets')\n          return []\n        }\n        \n        // Wait before retrying\n        await new Promise(resolve => setTimeout(resolve, 1000 * attempt))\n      }\n    }\n\n    return []\n  }\n\n  /**\n   * Execute tokenization transaction\n   */\n  async executeTokenization(assetIds: string[], feeToken: FeeToken): Promise<unknown> {\n    try {\n      const { wharfKitService } = await import('./wharfkit')\n      \n      if (!wharfKitService.isLoggedIn()) {\n        throw new Error('Wallet not connected')\n      }\n      \n      const account = wharfKitService.getAccountName()\n      if (!account) {\n        throw new Error('No account found')\n      }\n\n      const actions = [\n        {\n          account: 'nft.hive',\n          name: 'boost',\n          authorization: [{\n            actor: account,\n            permission: 'active'\n          }],\n          data: {\n            booster: account\n          }\n        },\n        {\n          account: feeToken.contract,\n          name: 'transfer',\n          authorization: [{\n            actor: account,\n            permission: 'active'\n          }],\n          data: {\n            from: account,\n            to: 'rwax',\n            quantity: feeToken.fee,\n            memo: 'payfee'\n          }\n        },\n        {\n          account: 'atomicassets',\n          name: 'transfer',\n          authorization: [{\n            actor: account,\n            permission: 'active'\n          }],\n          data: {\n            from: account,\n            to: 'rwax',\n            asset_ids: assetIds,\n            memo: 'deposit'\n          }\n        },\n        {\n          account: 'rwax',\n          name: 'tokenizenfts',\n          authorization: [{\n            actor: account,\n            permission: 'active'\n          }],\n          data: {\n            user: account,\n            asset_ids: assetIds,\n            fee_currency: `8,${feeToken.symbol}`\n          }\n        }\n      ]\n\n      const result = await wharfKitService.transact(actions)\n      log.info('Tokenization transaction executed successfully', 'RWaxService.executeTokenization', { result })\n      return result\n    } catch (error) {\n      log.error('Error executing tokenization:', 'RWaxService.executeTokenization', error instanceof Error ? error : new Error(String(error)))\n      throw error\n    }\n  }\n\n  /**\n   * Execute redemption transaction\n   */\n  async executeRedemption(assetId: string, wpixalAmount: string, feeToken: FeeToken): Promise<unknown> {\n    try {\n      const { wharfKitService } = await import('./wharfkit')\n      \n      if (!wharfKitService.isLoggedIn()) {\n        throw new Error('Wallet not connected')\n      }\n      \n      const account = wharfKitService.getAccountName()\n      if (!account) {\n        throw new Error('No account found')\n      }\n\n      const actions = [\n        {\n          account: 'nft.hive',\n          name: 'boost',\n          authorization: [{\n            actor: account,\n            permission: 'active'\n          }],\n          data: {\n            booster: account\n          }\n        },\n        {\n          account: feeToken.contract,\n          name: 'transfer',\n          authorization: [{\n            actor: account,\n            permission: 'active'\n          }],\n          data: {\n            from: account,\n            to: 'rwax',\n            quantity: feeToken.fee,\n            memo: 'payfee'\n          }\n        },\n        {\n          account: 'pixeljourney',\n          name: 'transfer',\n          authorization: [{\n            actor: account,\n            permission: 'active'\n          }],\n          data: {\n            from: account,\n            to: 'rwax',\n            quantity: wpixalAmount,\n            memo: 'redeem'\n          }\n        },\n        {\n          account: 'rwax',\n          name: 'redeem',\n          authorization: [{\n            actor: account,\n            permission: 'active'\n          }],\n          data: {\n            redeemer: account,\n            contract: 'pixeljourney',\n            quantity: wpixalAmount,\n            asset_id: assetId,\n            fee_currency: `8,${feeToken.symbol}`\n          }\n        }\n      ]\n\n      const result = await wharfKitService.transact(actions)\n      log.info('Redemption transaction executed successfully', 'RWaxService.executeRedemption', { result })\n      return result\n    } catch (error) {\n      log.error('Error executing redemption:', 'RWaxService.executeRedemption', error instanceof Error ? error : new Error(String(error)))\n      throw error\n    }\n  }\n}\n\nexport const rwaxService = new RWaxService()","import React, { useState, useEffect } from 'react'\nimport { createPortal } from 'react-dom'\nimport { useNotifications } from '../hooks/useNotifications'\nimport { rwaxService, type FeeToken } from '../services/rwaxService'\nimport { log } from '../services/loggingService'\nimport { normalizeIPFSUrl } from '../utils/ipfsUtils'\nimport '../css/modal.css'\n\ninterface NFT {\n  asset_id: string\n  name: string\n  img: string\n  [key: string]: any\n}\n\ninterface TokenizeFeeModalProps {\n  isOpen: boolean\n  onClose: () => void\n  onSuccess?: () => void\n  nft: NFT | null\n}\n\nconst TokenizeFeeModal: React.FC<TokenizeFeeModalProps> = ({\n  isOpen,\n  onClose,\n  onSuccess,\n  nft\n}) => {\n  const [feeTokens, setFeeTokens] = useState<FeeToken[]>([])\n  const [selectedFeeToken, setSelectedFeeToken] = useState<FeeToken | null>(null)\n  const [loading, setLoading] = useState(false)\n  const { showError } = useNotifications()\n\n  // Load fee tokens when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      loadFeeTokens()\n    }\n  }, [isOpen])\n\n  const loadFeeTokens = async () => {\n    try {\n      setLoading(true)\n      const tokens = await rwaxService.getFeeTokens()\n      setFeeTokens(tokens)\n      \n      // Auto-select WAX if available\n      const waxToken = tokens.find(token => token.symbol === 'WAX')\n      if (waxToken) {\n        setSelectedFeeToken(waxToken)\n      }\n    } catch (error) {\n      log.error('Failed to load fee tokens', 'TokenizeFeeModal.loadFeeTokens', error as Error)\n      showError('Failed to load fee tokens')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleConfirm = async () => {\n    if (selectedFeeToken && nft) {\n      try {\n        setLoading(true)\n        await rwaxService.executeTokenization([nft.asset_id], selectedFeeToken)\n        onSuccess?.()\n        handleClose()\n      } catch (error) {\n        log.error('Failed to tokenize asset', 'TokenizeFeeModal.handleConfirm', error as Error)\n        showError('Failed to tokenize asset')\n      } finally {\n        setLoading(false)\n      }\n    }\n  }\n\n  const handleClose = () => {\n    setSelectedFeeToken(null)\n    onClose()\n  }\n\n  if (!isOpen) return null\n\n  return createPortal(\n    <div className=\"modal-overlay\" onClick={handleClose}>\n      <div className=\"modal-content tokenize-fee-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h2>🪙 Tokenize into WPIXAL</h2>\n          <button className=\"close-button\" onClick={handleClose}>×</button>\n        </div>\n        \n        <div className=\"modal-body\">\n          {nft && (\n            <div className=\"tokenize-asset-preview\">\n              <img \n                src={normalizeIPFSUrl(nft.img)} \n                alt={nft.name} \n                className=\"tokenize-asset-image\"\n                onError={(e) => {\n                  const target = e.target as HTMLImageElement\n                  target.src = 'https://pixeljourney.xyz/img/toppixals/10.webp'\n                }}\n              />\n              <h3>{nft.name}</h3>\n              <p className=\"tokenize-description\">\n                This will tokenize your Pixal PFP into WPIXAL tokens on the RWAX platform.\n              </p>\n            </div>\n          )}\n          \n          {loading ? (\n            <div className=\"loading-state\">\n              <div className=\"spinner\"></div>\n              <p>Loading fee options...</p>\n            </div>\n          ) : (\n            <div className=\"fee-selection\">\n              <h4>Select Fee Token:</h4>\n              <div className=\"fee-options\">\n                {feeTokens.map((token, index) => (\n                  <div \n                    key={index}\n                    className={`fee-option ${selectedFeeToken === token ? 'selected' : ''}`}\n                    onClick={() => setSelectedFeeToken(token)}\n                  >\n                    <div className=\"fee-info\">\n                      <span className=\"fee-amount\">{token.fee}</span>\n                      <span className=\"fee-contract\">({token.contract})</span>\n                    </div>\n                    {token.wax_value && token.symbol !== 'WAX' && (\n                      <div className=\"wax-equivalent\">\n                        ≈ {parseFloat(token.wax_value).toFixed(4)} WAX\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n        \n        <div className=\"modal-footer\">\n          <button className=\"cancel-button\" onClick={handleClose}>\n            Cancel\n          </button>\n          <button \n            className=\"confirm-button tokenize-confirm\"\n            onClick={handleConfirm}\n            disabled={!selectedFeeToken || loading}\n          >\n            Tokenize Asset\n          </button>\n        </div>\n      </div>\n    </div>,\n    document.body\n  )\n}\n\nexport default TokenizeFeeModal","import { Session } from '@wharfkit/session'\nimport { logger } from './loggingService'\nimport { apiService } from './api'\nimport { API_ENDPOINTS } from '../config/marketplaceConfig'\nimport { WharfKitService } from './wharfkit'\n\nexport interface StakingReward {\n  token: string\n  amount: number\n  contract: string\n  precision: number\n}\n\nexport interface StakingPool {\n  pool_id: string\n  name: string\n  contract: string\n  token_symbol: string\n  apr: number\n  total_staked: number\n  min_stake_amount: number\n  max_stake_amount?: number\n  lock_period_days: number\n  early_unstake_penalty: number\n  rewards_per_block: number\n  last_reward_block: number\n}\n\nexport interface PendingReward {\n  quantity: string\n  contract: string\n}\n\nexport interface FarmDataRow {\n  farm_name: string\n  reward_per_hour: string\n  total_staked: number\n}\n\nexport interface StakerDataRow {\n  user: string\n  staked_assets: string[]\n  pending_rewards: PendingReward[]\n}\n\nexport interface StakePosition {\n  position_id: string\n  pool_id: string\n  owner: string\n  staked_amount: number\n  stake_time: number\n  last_claim_time: number\n  pending_rewards: StakingReward[]\n  unlock_time: number\n  is_locked: boolean\n}\n\nexport interface TokenStakeInfo {\n  farm_name: string\n  user: string\n  staked_amount: number\n  stake_time: number\n  pending_rewards: StakingReward[]\n  vesting_time: number\n  last_claim_time: number\n}\n\nexport interface TokenFarmInfo {\n  farm_name: string\n  creator: string\n  time_created: number\n  staking_token: {\n    sym: string\n    contract: string\n  }\n  incentive_count: number\n  total_staked: number\n  vesting_time: number\n  last_update_time: number\n}\n\nexport interface NFTStakeInfo {\n  asset_id: string\n  template_id: string\n  farm_name: string\n  stake_time: number\n  rewards_per_hour: { [token: string]: number }\n  multiplier: number\n}\n\nexport interface TransactionResult {\n  success: boolean\n  transaction_id?: string\n  error?: string\n  gas_used?: number\n}\n\ninterface WharfkitTransactionResult {\n  transaction_id?: string\n  id?: string\n  cpu_usage_us?: number\n  max_net_usage_words?: number\n  [key: string]: unknown\n}\n\nexport interface BatchTransactionResult {\n  success: boolean\n  successful_transactions: string[]\n  failed_transactions: { asset_id: string; error: string }[]\n  total_gas_used: number\n}\n\nclass StakingService {\n  private readonly MAX_BATCH_SIZE = 10\n  private readonly RETRY_ATTEMPTS = 3\n  private readonly RETRY_DELAY = 1000 // 1 second\n  private readonly FARMS_CONTRACT = 'farms.waxdao'\n  private readonly TOKEN_FARMS_CONTRACT = 'tf.waxdao'\n  private readonly PXJ_CONTRACT = 'pixeljourney'\n  private readonly WUF_CONTRACT = 'wuffi'\n  private readonly PXJ_FARM_NAME = 'pxjfarm1'\n\n  /**\n   * Stake multiple NFTs using stakenfts action (matches user's transaction examples)\n   */\n  async stakeNFTsPixelJourney(\n    session: Session,\n    assetIds: string[],\n    farmName: string = 'pixeljourney'\n  ): Promise<TransactionResult> {\n    try {\n      const action = {\n        account: this.FARMS_CONTRACT,\n        name: 'stakenfts',\n        authorization: [{\n          actor: WharfKitService.safeGetActor(session),\n          permission: WharfKitService.safeGetPermission(session)\n        }],\n        data: {\n          user: WharfKitService.safeGetActor(session),\n          farmname: farmName,\n          assets_to_stake: assetIds\n        }\n      }\n\n      const result = await this.executeTransactionWithRetry(session, [action])\n      \n      if (result.success) {\n        logger.info('NFTs Staked Successfully', 'StakingService', {\n          user: WharfKitService.safeGetActor(session),\n          farm_name: farmName,\n          asset_count: assetIds.length,\n          asset_ids: assetIds,\n          transaction_id: result.transaction_id\n        })\n      }\n      \n      return result\n      \n    } catch (error) {\n      logger.error('stakeNFTsPixelJourney failed', 'StakingService', error as Error, {\n        asset_ids: assetIds,\n        farm_name: farmName\n      })\n      \n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Unknown error',\n        transaction_id: '',\n        gas_used: 0\n      }\n    }\n  }\n\n  /**\n   * Unstake multiple NFTs using unstake action (matches user's transaction examples)\n   */\n  async unstakeNFTsPixelJourney(\n    session: Session,\n    assetIds: string[],\n    farmName: string = 'pixeljourney'\n  ): Promise<TransactionResult> {\n    try {\n      const action = {\n        account: this.FARMS_CONTRACT,\n        name: 'unstake',\n        authorization: [{\n          actor: WharfKitService.safeGetActor(session),\n          permission: WharfKitService.safeGetPermission(session)\n        }],\n        data: {\n          user: WharfKitService.safeGetActor(session),\n          farmname: farmName,\n          asset_ids: assetIds\n        }\n      }\n\n      const result = await this.executeTransactionWithRetry(session, [action])\n      \n      if (result.success) {\n        logger.info('NFTs Unstaked Successfully', 'StakingService', {\n          user: WharfKitService.safeGetActor(session),\n          farm_name: farmName,\n          asset_count: assetIds.length,\n          asset_ids: assetIds,\n          transaction_id: result.transaction_id\n        })\n      }\n      \n      return result\n      \n    } catch (error) {\n      logger.error('unstakeNFTsPixelJourney failed', 'StakingService', error as Error, {\n        asset_ids: assetIds,\n        farm_name: farmName\n      })\n      \n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Unknown error',\n        transaction_id: '',\n        gas_used: 0\n      }\n    }\n  }\n\n  /**\n   * Stake multiple NFTs in batches with comprehensive error handling (legacy method)\n   */\n  async stakeNFTsBatch(\n    session: Session,\n    assetIds: string[],\n    farmName: string = 'pixeljourney'\n  ): Promise<BatchTransactionResult> {\n    const result: BatchTransactionResult = {\n      success: true,\n      successful_transactions: [],\n      failed_transactions: [],\n      total_gas_used: 0\n    }\n\n    try {\n      // Process in batches to avoid transaction size limits\n      const batches = this.createBatches(assetIds, this.MAX_BATCH_SIZE)\n      \n      for (const batch of batches) {\n        try {\n          const batchResult = await this.processBatch(\n            session,\n            batch,\n            'stake',\n            farmName\n          )\n          \n          result.successful_transactions.push(...batchResult.successful_transactions)\n          result.failed_transactions.push(...batchResult.failed_transactions)\n          result.total_gas_used += batchResult.total_gas_used\n          \n          // Small delay between batches to prevent rate limiting\n          if (batches.indexOf(batch) < batches.length - 1) {\n            await this.delay(500)\n          }\n        } catch (error) {\n          // If entire batch fails, mark all assets as failed\n          batch.forEach(assetId => {\n            result.failed_transactions.push({\n              asset_id: assetId,\n              error: error instanceof Error ? error.message : 'Batch processing failed'\n            })\n          })\n        }\n      }\n      \n      result.success = result.failed_transactions.length === 0\n      \n      // Log the operation\n      logger.info('NFT Staking Batch Operation', 'StakingService', {\n        total_assets: assetIds.length,\n        successful: result.successful_transactions.length,\n        failed: result.failed_transactions.length,\n        farm_name: farmName\n      })\n      \n      return result\n      \n    } catch (error) {\n      logger.error('stakeNFTsBatch failed', 'StakingService', error as Error, {\n        asset_ids: assetIds,\n        farm_name: farmName\n      })\n      \n      return {\n        success: false,\n        successful_transactions: [],\n        failed_transactions: assetIds.map(id => ({\n          asset_id: id,\n          error: error instanceof Error ? error.message : 'Unknown error'\n        })),\n        total_gas_used: 0\n      }\n    }\n  }\n\n  /**\n   * Unstake multiple NFTs in batches\n   */\n  async unstakeNFTsBatch(\n    session: Session,\n    assetIds: string[]\n  ): Promise<BatchTransactionResult> {\n    const result: BatchTransactionResult = {\n      success: true,\n      successful_transactions: [],\n      failed_transactions: [],\n      total_gas_used: 0\n    }\n\n    try {\n      const batches = this.createBatches(assetIds, this.MAX_BATCH_SIZE)\n      \n      for (const batch of batches) {\n        try {\n          const batchResult = await this.processBatch(\n            session,\n            batch,\n            'unstake'\n          )\n          \n          result.successful_transactions.push(...batchResult.successful_transactions)\n          result.failed_transactions.push(...batchResult.failed_transactions)\n          result.total_gas_used += batchResult.total_gas_used\n          \n          if (batches.indexOf(batch) < batches.length - 1) {\n            await this.delay(500)\n          }\n        } catch (error) {\n          batch.forEach(assetId => {\n            result.failed_transactions.push({\n              asset_id: assetId,\n              error: error instanceof Error ? error.message : 'Batch processing failed'\n            })\n          })\n        }\n      }\n      \n      result.success = result.failed_transactions.length === 0\n      \n      logger.info('NFT Unstaking Batch Operation', 'StakingService', {\n        total_assets: assetIds.length,\n        successful: result.successful_transactions.length,\n        failed: result.failed_transactions.length\n      })\n      \n      return result\n      \n    } catch (error) {\n      logger.error('unstakeNFTsBatch failed', 'StakingService', error as Error, {\n        asset_ids: assetIds\n      })\n      \n      return {\n        success: false,\n        successful_transactions: [],\n        failed_transactions: assetIds.map(id => ({\n          asset_id: id,\n          error: error instanceof Error ? error.message : 'Unknown error'\n        })),\n        total_gas_used: 0\n      }\n    }\n  }\n\n  /**\n   * Claim all pending rewards for a user\n   */\n  async claimAllRewards(\n    session: Session,\n    farmName: string = 'pixeljourney'\n  ): Promise<TransactionResult> {\n    try {\n      const actions = [{\n        account: this.FARMS_CONTRACT,\n        name: 'claim',\n        authorization: [{\n          actor: WharfKitService.safeGetActor(session),\n          permission: WharfKitService.safeGetPermission(session)\n        }],\n        data: {\n          user: WharfKitService.safeGetActor(session),\n          farmname: farmName\n        }\n      }]\n\n      const result = await this.executeTransactionWithRetry(session, actions)\n      \n      if (result.success) {\n        logger.info('Rewards Claimed Successfully', 'StakingService', {\n          user: WharfKitService.safeGetActor(session),\n          farm_name: farmName,\n          transaction_id: result.transaction_id\n        })\n      }\n      \n      return result\n      \n    } catch (error) {\n      logger.error('claimAllRewards failed', 'StakingService', error as Error, {\n        user: WharfKitService.safeGetActor(session),\n        farm_name: farmName\n      })\n      \n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Failed to claim rewards'\n      }\n    }\n  }\n\n  /**\n   * Get detailed staking information for a user from farms.waxdao contract tables\n   */\n  async getStakingInfo(account: string, farmName: string = 'pixeljourney'): Promise<{\n    staked_nfts: NFTStakeInfo[]\n    pending_rewards: StakingReward[]\n    total_staking_power: number\n    estimated_daily_rewards: StakingReward[]\n  }> {\n    try {\n      // Query the farms.waxdao contract tables for staked assets\n      const stakedResponse = await fetch(\n        `${API_ENDPOINTS.WAX_CHAIN.GREYMASS}/v1/chain/get_table_rows`,\n        {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n             json: true,\n             code: this.FARMS_CONTRACT,\n             scope: this.FARMS_CONTRACT,\n             table: 'stakers',\n             lower_bound: account,\n             upper_bound: account,\n             limit: 1000\n           })\n        }\n      )\n      \n      if (!stakedResponse.ok) {\n        throw new Error(`Failed to fetch staking info: ${stakedResponse.statusText}`)\n      }\n      \n      const stakedData = await stakedResponse.json()\n      \n      // Extract staked assets and rewards from the staker data\n       const userStakeData = stakedData.rows.find((row: StakerDataRow) => row.user === account) || {} as Partial<StakerDataRow>\n       const stakedAssets = userStakeData.staked_assets || []\n       const pendingRewards = userStakeData.pending_rewards || []\n       \n       const stakedNfts: NFTStakeInfo[] = stakedAssets.map((assetId: string) => ({\n         asset_id: assetId,\n         template_id: '0', // Would need to fetch from AtomicAssets API\n         farm_name: farmName,\n         stake_time: Date.now() / 1000, // Would need actual stake time from contract\n         rewards_per_hour: { pxj: 0, wuf: 0 }, // Would calculate based on template\n         multiplier: 1\n       })) || []\n      \n      // Transform pending rewards from contract format\n       const rewards: StakingReward[] = pendingRewards.map((reward: PendingReward) => ({\n         token: reward.quantity.split(' ')[1], // Extract token symbol from asset format\n         amount: parseFloat(reward.quantity.split(' ')[0]), // Extract amount\n         contract: reward.contract,\n         precision: 4\n       }))\n      \n      const totalStakingPower = stakedNfts.reduce((sum, nft) => {\n        const hourlyRewards = Object.values(nft.rewards_per_hour).reduce((a, b) => a + b, 0)\n        return sum + (hourlyRewards * nft.multiplier)\n      }, 0)\n      \n      const estimatedDailyRewards: StakingReward[] = [\n        {\n          token: 'PXJ',\n          amount: stakedNfts.reduce((sum, nft) => sum + (nft.rewards_per_hour.pxj || 0) * 24, 0),\n          contract: this.PXJ_CONTRACT,\n          precision: 4\n        },\n        {\n          token: 'WUF',\n          amount: stakedNfts.reduce((sum, nft) => sum + (nft.rewards_per_hour.wuf || 0) * 24, 0),\n          contract: this.WUF_CONTRACT,\n          precision: 4\n        }\n      ]\n      \n      return {\n         staked_nfts: stakedNfts,\n         pending_rewards: rewards,\n         total_staking_power: totalStakingPower,\n         estimated_daily_rewards: estimatedDailyRewards\n       }\n      \n    } catch (error) {\n      logger.error('getStakingInfo failed', 'StakingService', error as Error, {\n        account,\n        farm_name: farmName\n      })\n      \n      return {\n        staked_nfts: [],\n        pending_rewards: [],\n        total_staking_power: 0,\n        estimated_daily_rewards: []\n      }\n    }\n  }\n\n  /**\n   * Stake tokens to tf.waxdao farm\n   */\n  async stakeTokens(\n    session: Session,\n    amount: string,\n    farmName: string = this.PXJ_FARM_NAME\n  ): Promise<TransactionResult> {\n    try {\n      const actions = [{\n        account: this.PXJ_CONTRACT,\n        name: 'transfer',\n        authorization: [{\n          actor: WharfKitService.safeGetActor(session),\n          permission: WharfKitService.safeGetPermission(session)\n        }],\n        data: {\n          from: WharfKitService.safeGetActor(session),\n          to: this.TOKEN_FARMS_CONTRACT,\n          quantity: amount,\n          memo: `stake:${farmName}`\n        }\n      }]\n\n      const result = await this.executeTransactionWithRetry(session, actions)\n      \n      if (result.success) {\n        logger.info('Token staked successfully', 'StakingService', {\n          type: 'token_stake',\n          user: WharfKitService.safeGetActor(session),\n          amount,\n          farm_name: farmName\n        })\n      }\n      \n      return result\n    } catch (error) {\n      logger.error('stakeTokens failed', 'StakingService', error as Error, {\n        user: WharfKitService.safeGetActor(session),\n        amount,\n        farm_name: farmName\n      })\n      \n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Unknown error'\n      }\n    }\n  }\n\n  /**\n   * Unstake tokens from tf.waxdao farm\n   */\n  async unstakeTokens(\n    session: Session,\n    amount: string,\n    farmName: string = this.PXJ_FARM_NAME\n  ): Promise<TransactionResult> {\n    try {\n      const actions = [{\n        account: this.TOKEN_FARMS_CONTRACT,\n        name: 'unstake',\n        authorization: [{\n          actor: WharfKitService.safeGetActor(session),\n          permission: WharfKitService.safeGetPermission(session)\n        }],\n        data: {\n          user: WharfKitService.safeGetActor(session),\n          farm_name: farmName,\n          quantity: amount\n        }\n      }]\n\n      const result = await this.executeTransactionWithRetry(session, actions)\n      \n      if (result.success) {\n        logger.info('Token unstaked successfully', 'StakingService', {\n          type: 'token_unstake',\n          user: WharfKitService.safeGetActor(session),\n          amount,\n          farm_name: farmName\n        })\n      }\n      \n      return result\n    } catch (error) {\n      logger.error('unstakeTokens failed', 'StakingService', error as Error, {\n        user: WharfKitService.safeGetActor(session),\n        amount,\n        farm_name: farmName\n      })\n      \n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Unknown error'\n      }\n    }\n  }\n\n  /**\n   * Claim rewards from tf.waxdao farm\n   */\n  async claimTokenFarmRewards(\n    session: Session,\n    farmName: string = this.PXJ_FARM_NAME\n  ): Promise<TransactionResult> {\n    try {\n      const actions = [{\n        account: this.TOKEN_FARMS_CONTRACT,\n        name: 'getreward',\n        authorization: [{\n          actor: WharfKitService.safeGetActor(session),\n          permission: WharfKitService.safeGetPermission(session)\n        }],\n        data: {\n          user: WharfKitService.safeGetActor(session),\n          farm_name: farmName\n        }\n      }]\n\n      const result = await this.executeTransactionWithRetry(session, actions)\n      \n      if (result.success) {\n        logger.info('Token farm rewards claimed successfully', 'StakingService', {\n          type: 'token_claim_rewards',\n          user: WharfKitService.safeGetActor(session),\n          farm_name: farmName\n        })\n      }\n      \n      return result\n    } catch (error) {\n      logger.error('claimTokenFarmRewards failed', 'StakingService', error as Error, {\n        user: WharfKitService.safeGetActor(session),\n        farm_name: farmName\n      })\n      \n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Unknown error'\n      }\n    }\n  }\n\n  /**\n   * Get token farm information from tf.waxdao\n   */\n  async getTokenFarmInfo(farmName: string = this.PXJ_FARM_NAME): Promise<TokenFarmInfo | null> {\n    try {\n      const response = await fetch(\n        `${API_ENDPOINTS.WAX_CHAIN.GREYMASS}/v1/chain/get_table_rows`,\n        {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            json: true,\n            code: this.TOKEN_FARMS_CONTRACT,\n            scope: this.TOKEN_FARMS_CONTRACT,\n            table: 'farms',\n            lower_bound: farmName,\n            upper_bound: farmName,\n            limit: 1\n          })\n        }\n      )\n      \n      if (!response.ok) {\n        throw new Error(`Failed to fetch farm info: ${response.statusText}`)\n      }\n      \n      const data = await response.json()\n      const farmData = data.rows.find((row: FarmDataRow) => row.farm_name === farmName)\n      \n      if (!farmData) {\n        return null\n      }\n      \n      return {\n        farm_name: farmData.farm_name,\n        creator: farmData.creator,\n        time_created: farmData.time_created,\n        staking_token: farmData.staking_token,\n        incentive_count: farmData.incentive_count,\n        total_staked: farmData.total_staked,\n        vesting_time: farmData.vesting_time,\n        last_update_time: farmData.last_update_time\n      }\n    } catch (error) {\n      logger.error('getTokenFarmInfo failed', 'StakingService', error as Error, {\n        farm_name: farmName\n      })\n      \n      return null\n    }\n  }\n\n  /**\n   * Get user's token staking information from tf.waxdao\n   */\n  async getTokenStakingInfo(account: string, farmName: string = this.PXJ_FARM_NAME): Promise<TokenStakeInfo | null> {\n    try {\n      const response = await fetch(\n        `${API_ENDPOINTS.WAX_CHAIN.GREYMASS}/v1/chain/get_table_rows`,\n        {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            json: true,\n            code: this.TOKEN_FARMS_CONTRACT,\n            scope: farmName,\n            table: 'stakers',\n            lower_bound: account,\n            upper_bound: account,\n            limit: 1\n          })\n        }\n      )\n      \n      if (!response.ok) {\n        throw new Error(`Failed to fetch token staking info: ${response.statusText}`)\n      }\n      \n      const data = await response.json()\n      const stakerData = data.rows.find((row: StakerDataRow) => row.user === account)\n      \n      if (!stakerData) {\n        return null\n      }\n      \n      // Parse pending rewards\n      const pendingRewards: StakingReward[] = (stakerData.pending_rewards || []).map((reward: PendingReward) => ({\n        token: reward.quantity.split(' ')[1],\n        amount: parseFloat(reward.quantity.split(' ')[0]),\n        contract: reward.contract,\n        precision: 4\n      }))\n      \n      return {\n        farm_name: farmName,\n        user: stakerData.user,\n        staked_amount: stakerData.staked_amount,\n        stake_time: stakerData.stake_time,\n        pending_rewards: pendingRewards,\n        vesting_time: stakerData.vesting_time,\n        last_claim_time: stakerData.last_claim_time\n      }\n    } catch (error) {\n      logger.error('getTokenStakingInfo failed', 'StakingService', error as Error, {\n        account,\n        farm_name: farmName\n      })\n      \n      return null\n    }\n  }\n\n  /**\n   * Calculate optimal staking strategy based on user's NFTs\n   */\n  async calculateOptimalStakingStrategy(\n    account: string,\n    farmName: string = 'pixeljourney'\n  ): Promise<{\n    recommended_stakes: { asset_id: string; expected_daily_return: number; priority: number }[]\n    total_expected_daily_return: number\n    optimization_tips: string[]\n    available_nfts: NFTStakeInfo[]\n  }> {\n    try {\n      // Get current staking info to identify already staked NFTs\n      const stakingInfo = await this.getStakingInfo(account, farmName)\n      const stakedAssetIds = new Set(stakingInfo.staked_nfts.map(nft => nft.asset_id))\n      \n      // Fetch available NFTs from AtomicAssets API\n      const availableResponse = await fetch(\n        `${apiService.atomicAssetsAPI}/atomicassets/v1/assets?owner=${account}&collection_name=pixeljourney&page=1&limit=1000&order=desc&sort=asset_id`\n      )\n      \n      if (!availableResponse.ok) {\n        throw new Error('Failed to fetch available NFTs')\n      }\n      \n      const availableData = await availableResponse.json()\n      \n      interface AssetData {\n        asset_id: string\n        template: {\n          template_id: string\n        }\n      }\n      \n      // Filter out already staked assets and transform data\n      const availableNfts: NFTStakeInfo[] = availableData.data?.filter((asset: AssetData) => \n        !stakedAssetIds.has(asset.asset_id)\n      ).map((asset: AssetData) => ({\n        asset_id: asset.asset_id,\n        template_id: asset.template.template_id,\n        farm_name: farmName,\n        stake_time: 0,\n        rewards_per_hour: this.calculateRewardsPerHour(asset.template.template_id),\n        multiplier: 1\n      })) || []\n      \n      // Fetch current template rewards and multipliers\n      const templateRewards = await this.getTemplateRewards()\n      \n      const recommendedStakes = availableNfts.map(nft => {\n        const rewards = templateRewards[nft.template_id] || { pxj: 0, wuf: 0 }\n        const rarityMultiplier = this.getRarityMultiplier(this.getTemplateRarity(nft.template_id))\n        const dailyReturn = (rewards.pxj + rewards.wuf) * 24 * rarityMultiplier\n        \n        return {\n          asset_id: nft.asset_id,\n          expected_daily_return: dailyReturn,\n          priority: this.calculateStakingPriority(this.getTemplateRarity(nft.template_id), dailyReturn)\n        }\n      }).sort((a, b) => b.priority - a.priority)\n      \n      const totalExpectedReturn = recommendedStakes.reduce(\n        (sum, stake) => sum + stake.expected_daily_return, 0\n      )\n      \n      const optimizationTips = this.generateOptimizationTips(\n        recommendedStakes,\n        availableNfts\n      )\n      \n      return {\n        recommended_stakes: recommendedStakes,\n        total_expected_daily_return: totalExpectedReturn,\n        optimization_tips: optimizationTips,\n        available_nfts: availableNfts\n      }\n      \n    } catch (error) {\n      logger.error('calculateOptimalStakingStrategy failed', 'StakingService', error as Error, {\n        account\n      })\n      \n      return {\n        recommended_stakes: [],\n        total_expected_daily_return: 0,\n        optimization_tips: ['Unable to calculate optimal strategy. Please try again later.'],\n        available_nfts: []\n      }\n    }\n  }\n\n  /**\n   * Process a batch of transactions\n   */\n  private async processBatch(\n    session: Session,\n    assetIds: string[],\n    action: 'stake' | 'unstake',\n    farmName?: string\n  ): Promise<BatchTransactionResult> {\n    const actions = assetIds.map(assetId => {\n      if (action === 'stake') {\n        return {\n          account: this.FARMS_CONTRACT,\n          name: 'stake',\n          authorization: [{\n            actor: WharfKitService.safeGetActor(session),\n            permission: WharfKitService.safeGetPermission(session)\n          }],\n          data: {\n            owner: WharfKitService.safeGetActor(session),\n            asset_id: assetId,\n            farm_name: farmName || 'pixeljourney'\n          }\n        }\n      } else {\n        return {\n          account: this.FARMS_CONTRACT,\n          name: 'unstake',\n          authorization: [{\n            actor: WharfKitService.safeGetActor(session),\n            permission: WharfKitService.safeGetPermission(session)\n          }],\n          data: {\n            owner: WharfKitService.safeGetActor(session),\n            asset_id: assetId\n          }\n        }\n      }\n    })\n\n    try {\n      const result = await this.executeTransactionWithRetry(session, actions)\n      \n      if (result.success) {\n        return {\n          success: true,\n          successful_transactions: assetIds,\n          failed_transactions: [],\n          total_gas_used: result.gas_used || 0\n        }\n      } else {\n        return {\n          success: false,\n          successful_transactions: [],\n          failed_transactions: assetIds.map(id => ({\n            asset_id: id,\n            error: result.error || 'Transaction failed'\n          })),\n          total_gas_used: 0\n        }\n      }\n    } catch (error) {\n      return {\n        success: false,\n        successful_transactions: [],\n        failed_transactions: assetIds.map(id => ({\n          asset_id: id,\n          error: error instanceof Error ? error.message : 'Unknown error'\n        })),\n        total_gas_used: 0\n      }\n    }\n  }\n\n  /**\n   * Execute transaction with retry logic\n   */\n  private async executeTransactionWithRetry(\n    session: Session,\n    actions: Array<{\n      account: string\n      name: string\n      authorization: Array<{ actor: string; permission: string }>\n      data: Record<string, unknown>\n    }>,\n    attempt: number = 1\n  ): Promise<TransactionResult> {\n    try {\n      const result = await session.transact({ actions })\n      \n      const transactionResult = result as unknown as WharfkitTransactionResult\n      return {\n        success: true,\n        transaction_id: transactionResult?.transaction_id || transactionResult?.id || '',\n        gas_used: transactionResult?.cpu_usage_us || transactionResult?.max_net_usage_words || 0\n      }\n    } catch (error) {\n      if (attempt < this.RETRY_ATTEMPTS) {\n        await this.delay(this.RETRY_DELAY * attempt)\n        return this.executeTransactionWithRetry(session, actions, attempt + 1)\n      }\n      \n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Transaction failed'\n      }\n    }\n  }\n\n  /**\n   * Create batches from array of items\n   */\n  private createBatches<T>(items: T[], batchSize: number): T[][] {\n    const batches: T[][] = []\n    for (let i = 0; i < items.length; i += batchSize) {\n      batches.push(items.slice(i, i + batchSize))\n    }\n    return batches\n  }\n\n  /**\n   * Delay execution for specified milliseconds\n   */\n  private delay(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms))\n  }\n\n  /**\n   * Get template rewards from farms.waxdao contract table\n   */\n  private async getTemplateRewards(): Promise<{ [templateId: string]: { pxj: number; wuf: number } }> {\n    try {\n      const response = await fetch(\n        `${API_ENDPOINTS.WAX_CHAIN.GREYMASS}/v1/chain/get_table_rows`,\n        {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n             json: true,\n             code: this.FARMS_CONTRACT,\n             scope: this.FARMS_CONTRACT,\n             table: 'templrewards', // Template rewards table from ABI\n             limit: 1000\n           })\n        }\n      )\n      \n      if (!response.ok) {\n        throw new Error('Failed to fetch template rewards')\n      }\n      \n      const data = await response.json()\n      const templateRewards: { [templateId: string]: { pxj: number; wuf: number } } = {}\n      \n      interface TemplateReward {\n        template_id: string\n        hourly_rewards?: Array<{\n          quantity: string\n          contract: string\n        }>\n      }\n      \n      interface HourlyReward {\n        quantity: string\n        contract: string\n      }\n      \n      data.rows.forEach((template: TemplateReward) => {\n         const rewards = { pxj: 0, wuf: 0 }\n         \n         // Parse hourly_rewards array from TEMPLATE_REWARD structure\n         if (template.hourly_rewards && Array.isArray(template.hourly_rewards)) {\n           template.hourly_rewards.forEach((reward: HourlyReward) => {\n             const amount = parseFloat(reward.quantity.split(' ')[0])\n             const symbol = reward.quantity.split(' ')[1]\n             \n             if (symbol === 'PXJ') rewards.pxj = amount\n             if (symbol === 'WUF') rewards.wuf = amount\n           })\n         }\n         \n         templateRewards[template.template_id] = rewards\n       })\n      \n      return templateRewards\n    } catch {\n      // Fallback to default rewards\n      return {\n        '1001': { pxj: 50, wuf: 25 }, // Black Ingredient\n        '1002': { pxj: 10, wuf: 5 },  // Tertiary Ingredient\n        '1003': { pxj: 2, wuf: 1 },   // Rare Ingredient\n        '1004': { pxj: 0.5, wuf: 0.25 }, // Uncommon Ingredient\n        '1005': { pxj: 0.1, wuf: 0.05 }  // Common Ingredient\n      }\n    }\n  }\n\n  /**\n   * Get rarity multiplier for staking rewards\n   */\n  private getRarityMultiplier(rarity: string): number {\n    switch (rarity.toLowerCase()) {\n      case 'legendary': return 5.0\n      case 'epic': return 3.0\n      case 'rare': return 2.0\n      case 'uncommon': return 1.5\n      default: return 1.0\n    }\n  }\n\n  /**\n   * Calculate staking priority based on rarity and expected return\n   */\n  private calculateStakingPriority(rarity: string, dailyReturn: number): number {\n    const rarityScore = this.getRarityMultiplier(rarity) * 100\n    const returnScore = dailyReturn * 10\n    return rarityScore + returnScore\n  }\n\n  /**\n   * Generate optimization tips for staking strategy\n   */\n  private generateOptimizationTips(\n    recommendedStakes: { asset_id: string; expected_daily_return: number; priority: number }[],\n    availableNfts: NFTStakeInfo[]\n  ): string[] {\n    const tips: string[] = []\n    \n    const rarityCount = availableNfts.reduce((acc, nft) => {\n      const rarity = this.getTemplateRarity(nft.template_id)\n      acc[rarity] = (acc[rarity] || 0) + 1\n      return acc\n    }, {} as { [rarity: string]: number })\n    \n    if (rarityCount['Legendary'] > 0) {\n      tips.push('Prioritize staking Legendary ingredients for maximum rewards')\n    }\n    \n    if (rarityCount['Epic'] > 5) {\n      tips.push('Consider staking Epic ingredients in batches to optimize gas costs')\n    }\n    \n    if (recommendedStakes.length > 20) {\n      tips.push('Use batch staking to reduce transaction costs for large collections')\n    }\n    \n    const totalDailyReturn = recommendedStakes.reduce((sum, stake) => sum + stake.expected_daily_return, 0)\n    if (totalDailyReturn > 100) {\n      tips.push('Your collection has high earning potential - consider staking all eligible NFTs')\n    }\n    \n    if (tips.length === 0) {\n      tips.push('Stake your highest rarity NFTs first for optimal returns')\n    }\n    \n    return tips\n  }\n\n  /**\n   * Calculate rewards per hour for a template ID\n   */\n  private calculateRewardsPerHour(templateId: string): { [token: string]: number } {\n    // This would typically come from contract tables or cached data\n    const defaultRewards: { [templateId: string]: { pxj: number; wuf: number } } = {\n      '1001': { pxj: 50, wuf: 25 },\n      '1002': { pxj: 10, wuf: 5 },\n      '1003': { pxj: 2, wuf: 1 },\n      '1004': { pxj: 0.5, wuf: 0.25 },\n      '1005': { pxj: 0.1, wuf: 0.05 }\n    }\n    \n    return defaultRewards[templateId] || { pxj: 0, wuf: 0 }\n  }\n\n  /**\n   * Get rarity for a template ID\n   */\n  private getTemplateRarity(templateId: string): string {\n    // Map template IDs to their rarities\n    const templateRarities: { [templateId: string]: string } = {\n      '1001': 'Legendary',\n      '1002': 'Epic', \n      '1003': 'Rare',\n      '1004': 'Uncommon',\n      '1005': 'Common'\n    }\n    \n    return templateRarities[templateId] || 'Common'\n  }\n}\n\nexport const stakingService = new StakingService()\nexport default stakingService","import React, { useState, useRef, useEffect } from 'react'\nimport { API_ENDPOINTS } from '../config/marketplaceConfig'\n\ninterface ProgressiveImageProps {\n  imageUrl?: string\n  videoUrl?: string | null\n  alt: string\n  className?: string\n  loading?: 'lazy' | 'eager'\n  enableAnimations?: boolean\n  placeholder?: string\n  onLoad?: () => void\n  onError?: () => void\n}\n\nconst ProgressiveImage: React.FC<ProgressiveImageProps> = React.memo(({\n  imageUrl,\n  videoUrl,\n  alt,\n  className = '',\n  loading = 'lazy',\n  enableAnimations = true,\n  placeholder,\n  onLoad,\n  onError\n}) => {\n  const [isLoaded, setIsLoaded] = useState(false)\n  const [isError, setIsError] = useState(false)\n  const [isInView, setIsInView] = useState(loading === 'eager')\n  const imgRef = useRef<HTMLImageElement>(null)\n  const videoRef = useRef<HTMLVideoElement>(null)\n\n  // Helper function to process URLs (handle IPFS, etc.)\n  const processUrl = (url: string | undefined | null): string | null => {\n    if (!url) return null\n    if (typeof url !== 'string') return null\n    if (url.startsWith('http')) return url\n    if (url.startsWith('Qm')) return `${API_ENDPOINTS.IPFS.GATEWAYS[0]}${url}`\n    return url\n  }\n\n  const processedVideoUrl = processUrl(videoUrl)\n  const processedImageUrl = processUrl(imageUrl)\n\n  // Create a loading placeholder\n  const getLoadingPlaceholder = () => {\n    if (placeholder) return placeholder\n    \n    const svg = `<svg width=\"200\" height=\"200\" xmlns=\"http://www.w3.org/2000/svg\">\n      <rect width=\"200\" height=\"200\" fill=\"#f8fafc\"/>\n      <rect x=\"50\" y=\"80\" width=\"100\" height=\"8\" rx=\"4\" fill=\"#e2e8f0\">\n        <animate attributeName=\"opacity\" values=\"0.5;1;0.5\" dur=\"1.5s\" repeatCount=\"indefinite\"/>\n      </rect>\n      <rect x=\"60\" y=\"100\" width=\"80\" height=\"6\" rx=\"3\" fill=\"#e2e8f0\">\n        <animate attributeName=\"opacity\" values=\"0.5;1;0.5\" dur=\"1.5s\" begin=\"0.3s\" repeatCount=\"indefinite\"/>\n      </rect>\n      <rect x=\"70\" y=\"120\" width=\"60\" height=\"6\" rx=\"3\" fill=\"#e2e8f0\">\n        <animate attributeName=\"opacity\" values=\"0.5;1;0.5\" dur=\"1.5s\" begin=\"0.6s\" repeatCount=\"indefinite\"/>\n      </rect>\n    </svg>`\n    return `data:image/svg+xml;base64,${btoa(svg)}`\n  }\n\n  // Create an error placeholder\n  const getErrorPlaceholder = () => {\n    const svg = `<svg width=\"200\" height=\"200\" xmlns=\"http://www.w3.org/2000/svg\">\n      <rect width=\"200\" height=\"200\" fill=\"#fef2f2\"/>\n      <circle cx=\"100\" cy=\"80\" r=\"20\" fill=\"#fca5a5\"/>\n      <text x=\"100\" y=\"85\" text-anchor=\"middle\" font-family=\"Arial\" font-size=\"16\" fill=\"#dc2626\">!</text>\n      <text x=\"100\" y=\"120\" text-anchor=\"middle\" font-family=\"Arial\" font-size=\"12\" fill=\"#991b1b\">Failed to load</text>\n    </svg>`\n    return `data:image/svg+xml;base64,${btoa(svg)}`\n  }\n\n  // Intersection Observer for lazy loading\n  useEffect(() => {\n    if (loading === 'eager' || isInView) return\n\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting) {\n          setIsInView(true)\n          observer.disconnect()\n        }\n      },\n      {\n        rootMargin: '50px' // Start loading 50px before the image comes into view\n      }\n    )\n\n    const currentRef = imgRef.current || videoRef.current\n    if (currentRef) {\n      observer.observe(currentRef)\n    }\n\n    return () => observer.disconnect()\n  }, [loading, isInView])\n\n  const handleLoad = () => {\n    setIsLoaded(true)\n    setIsError(false)\n    onLoad?.()\n  }\n\n  const handleError = () => {\n    setIsError(true)\n    setIsLoaded(false)\n    onError?.()\n  }\n\n  // Show loading placeholder if not in view or not loaded\n  if (!isInView || (!isLoaded && !isError)) {\n    return (\n      <div className={`progressive-image-container ${className}`}>\n        <img\n          ref={imgRef}\n          src={getLoadingPlaceholder()}\n          alt={`Loading ${alt}`}\n          className=\"progressive-image-placeholder\"\n          style={{\n            width: '100%',\n            height: '100%',\n            objectFit: 'cover',\n            filter: 'blur(2px)',\n            transition: 'filter 0.3s ease'\n          }}\n        />\n        {isInView && processedImageUrl && (\n          <img\n            src={processedImageUrl}\n            alt={alt}\n            style={{ display: 'none' }}\n            onLoad={handleLoad}\n            onError={handleError}\n          />\n        )}\n        {isInView && processedVideoUrl && enableAnimations && (\n          <video\n            ref={videoRef}\n            src={processedVideoUrl}\n            style={{ display: 'none' }}\n            onLoadedData={handleLoad}\n            onError={handleError}\n            muted\n            loop\n          />\n        )}\n      </div>\n    )\n  }\n\n  // Show error placeholder if loading failed\n  if (isError) {\n    return (\n      <img\n        src={getErrorPlaceholder()}\n        alt={`Error loading ${alt}`}\n        className={className}\n        style={{\n          width: '100%',\n          height: '100%',\n          objectFit: 'cover'\n        }}\n      />\n    )\n  }\n\n  // Show video if available and animations enabled\n  if (processedVideoUrl && enableAnimations && isLoaded) {\n    return (\n      <video\n        ref={videoRef}\n        className={className}\n        muted\n        loop\n        autoPlay\n        poster={processedImageUrl || undefined}\n        style={{\n          width: '100%',\n          height: '100%',\n          objectFit: 'cover',\n          opacity: isLoaded ? 1 : 0,\n          transition: 'opacity 0.3s ease'\n        }}\n      >\n        <source src={processedVideoUrl} type=\"video/mp4\" />\n        <source src={processedVideoUrl} type=\"video/webm\" />\n      </video>\n    )\n  }\n\n  // Show image\n  return (\n    <img\n      ref={imgRef}\n      src={processedImageUrl || getErrorPlaceholder()}\n      alt={alt}\n      className={className}\n      style={{\n        width: '100%',\n        height: '100%',\n        objectFit: 'cover',\n        opacity: isLoaded ? 1 : 0,\n        transition: 'opacity 0.3s ease'\n      }}\n    />\n  )\n})\n\nProgressiveImage.displayName = 'ProgressiveImage'\n\nexport default ProgressiveImage","import React, { useState, useEffect, useCallback, useMemo, memo } from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport { useWallet } from '../hooks/useWallet'\nimport { apiService, type NFTAsset } from '../services/api'\nimport NFTDetailsModal from './NFTDetailsModal'\nimport ListingModal from './ListingModal'\nimport TransferModal from './TransferModal'\nimport BurnModal from './BurnModal'\nimport BulkListingModal from './BulkListingModal'\nimport BulkTransferModal from './BulkTransferModal'\nimport DistributeModal from './DistributeModal'\nimport BulkBurnModal from './BulkBurnModal'\nimport CraftingModal from './CraftingModal'\nimport ViewOffersModal from './ViewOffersModal'\nimport UnpackModal from './UnpackModal'\nimport BulkAuctionModal from './BulkAuctionModal'\nimport TokenizeFeeModal from './TokenizeFeeModal'\nimport AdvancedSearch from './AdvancedSearch'\nimport { NeftyBlendService } from '../services/neftyBlendService'\nimport { MarketplaceConfigService } from '../config/marketplaceConfig'\nimport { stakingService } from '../services/stakingService'\n\nimport ProgressiveImage from './ProgressiveImage'\nimport { getAssetImageUrl, getAssetVideoUrl } from '../utils/mediaUtils'\n\nimport { useDisplaySettings } from '../hooks/useDisplaySettings'\nimport type { DisplaySettings } from '../contexts/DisplaySettingsContext'\nimport { useNotifications } from '../hooks/useNotifications'\nimport { log } from '../services/loggingService'\n\nimport '../css/inventory-page.css'\nimport '../css/bulk-modals.css'\nimport type { InventoryNFT } from '../types/inventory'\nimport type { SearchSuggestion } from './AdvancedSearch'\n\n\n// Memoized NFT Card Component for better performance\ninterface NFTCardProps {\n  nft: InventoryNFT\n  selectedNFTs: Set<string>\n  isSelected: boolean\n  settings: DisplaySettings\n  dropdownOpen: string | null\n  onNFTClick: (nft: InventoryNFT) => void\n  onCollectionClick: (collectionName: string) => void\n  onSchemaClick: (schemaName: string) => void\n  onToggleSelection: (assetId: string) => void\n  onDropdownToggle: (assetId: string) => void\n  onListingOpen: (nft: InventoryNFT) => void\n  onTransferOpen: (nft: InventoryNFT) => void\n  onBurnOpen: (nft: InventoryNFT) => void\n  onAuctionOpen: (nft: InventoryNFT) => void\n  onRecyclePixal: (nft: InventoryNFT) => void\n  onCraftingOpen: (nft: InventoryNFT) => void\n  onViewOffers: (nft: InventoryNFT) => void\n  onUnpackPixelPack: (nft: InventoryNFT) => void\n  onStakeOpen: (nft: InventoryNFT) => void\n  onTokenizePixal: (nft: InventoryNFT) => void\n  onImageZoom: (imageUrl: string, videoUrl: string, name: string) => void\n}\n\nconst NFTCard = memo<NFTCardProps>(({ \n  nft, \n  selectedNFTs, \n  isSelected, \n  settings, \n  dropdownOpen,\n  onNFTClick,\n  onCollectionClick,\n  onSchemaClick,\n  onToggleSelection,\n  onDropdownToggle,\n  onListingOpen,\n  onTransferOpen,\n  onBurnOpen,\n  onAuctionOpen,\n  onRecyclePixal,\n  onCraftingOpen,\n  onViewOffers,\n  onUnpackPixelPack,\n  onStakeOpen,\n  onTokenizePixal,\n  onImageZoom\n}) => {\n  const isDropdownOpen = dropdownOpen === nft.asset_id\n  const isPixal = nft.collection.collection_name === 'pixeljourney' && nft.schema.schema_name === 'pixals'\n  const isIngredient = nft.collection.collection_name === 'pixeljourney' && nft.schema.schema_name === 'ingredients'\n  \n  // Check if this is a WaxRock Pixal PFP that should be protected from burning/recycling\n  const isWaxRockPixal = MarketplaceConfigService.isValidWaxRock(nft.data.WaxRock as string)\n  \n  return (\n    <div \n      className={`inventory-page-card ${selectedNFTs.size > 0 ? 'selectable' : ''} ${isSelected ? 'selected' : ''}`}\n    >\n      <div className=\"selection-checkbox\">\n        <input\n          type=\"checkbox\"\n          checked={isSelected}\n          onChange={() => onToggleSelection(nft.asset_id)}\n          onClick={(e) => e.stopPropagation()}\n        />\n      </div>\n      <div \n        className=\"inventory-page-media\"\n        onClick={() => {\n          if (selectedNFTs.size > 0) {\n            onToggleSelection(nft.asset_id);\n          } else {\n            onNFTClick(nft);\n          }\n        }}\n      >\n        <ProgressiveImage\n          imageUrl={getAssetImageUrl(nft)}\n          videoUrl={getAssetVideoUrl(nft)}\n          alt={nft.name}\n          className=\"inventory-media\"\n          loading=\"lazy\"\n          enableAnimations={settings.enableAnimatedNFTs}\n        />\n        <div \n          className=\"zoom-overlay\"\n          onClick={(e) => {\n            e.stopPropagation();\n            onImageZoom(getAssetImageUrl(nft) || '', getAssetVideoUrl(nft) || '', nft.name || `Asset #${nft.asset_id}`);\n          }}\n          title=\"Click to zoom\"\n        >\n          <svg className=\"zoom-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n            <circle cx=\"11\" cy=\"11\" r=\"8\"></circle>\n            <path d=\"m21 21-4.35-4.35\"></path>\n            <path d=\"M11 8v6M8 11h6\"></path>\n          </svg>\n        </div>\n        {nft.mint_number && (\n          <div className=\"mint-badge\">\n            #{nft.mint_number}\n         </div>\n        )}\n      </div>\n      \n      <div className=\"inventory-page-info\">\n        <h3 \n          className=\"inventory-page-name\"\n          onClick={() => {\n            if (selectedNFTs.size > 0) {\n              onToggleSelection(nft.asset_id);\n            } else {\n              onNFTClick(nft);\n            }\n          }}\n        >\n          {nft.name}\n        </h3>\n        <div className=\"inventory-page-details\">\n          <span \n            className=\"inventory-page-collection\"\n            onClick={() => onCollectionClick(nft.collection.collection_name)}\n          >\n            {typeof nft.collection === 'string' ? nft.collection : nft.collection?.name || nft.collection?.collection_name || 'Unknown'}\n          </span>\n          <span \n            className=\"inventory-page-schema\"\n            onClick={() => onSchemaClick(nft.schema.schema_name)}\n          >\n            {nft.schema.schema_name}\n          </span>\n        </div>\n        \n        <div className=\"inventory-page-actions\">\n          {/* Basic Actions - Always Visible */}\n          <div className=\"basic-actions\">\n            <button \n              className=\"inv-action-btn list-btn\"\n              onClick={(e) => {\n                e.stopPropagation()\n                onListingOpen(nft)\n              }}\n              title=\"List for Sale\"\n              aria-label={`List ${nft.name} for sale`}\n            >\n              💰\n            </button>\n            <button \n              className=\"inv-action-btn transfer-btn\"\n              onClick={(e) => {\n                e.stopPropagation()\n                onTransferOpen(nft)\n              }}\n              title=\"Transfer\"\n              aria-label={`Transfer ${nft.name} to another account`}\n            >\n              📤\n            </button>\n            <button \n              className=\"inv-action-btn offers-btn\"\n              onClick={(e) => {\n                e.stopPropagation()\n                onViewOffers(nft)\n              }}\n              aria-label={`View offers for ${nft.name}`}\n              title=\"View Offers\"\n            >\n              👁️\n            </button>\n          </div>\n          \n          {/* More Actions Dropdown - Three Dot Menu */}\n          <div className=\"more-actions-dropdown\" data-dropdown-id={nft.asset_id}>\n            <button \n              className=\"more-actions-btn\"\n              onClick={(e) => {\n                e.stopPropagation()\n                onDropdownToggle(nft.asset_id)\n              }}\n              title=\"More Actions\"\n              aria-label={`More actions for ${nft.name}`}\n              aria-expanded={isDropdownOpen}\n            >\n              ⋮\n            </button>\n            {isDropdownOpen && (\n              <div className=\"inv-dropdown-menu\">\n                <button \n                  className=\"inv-dropdown-item auction-item\"\n                  onClick={(e) => {\n                    e.stopPropagation()\n                    onAuctionOpen(nft)\n                  }}\n                  aria-label={`Create auction for ${nft.name}`}\n                >\n                  🏆 Create Auction\n                </button>\n                {!isWaxRockPixal && (\n                  <button \n                    className=\"inv-dropdown-item burn-item\"\n                    onClick={(e) => {\n                      e.stopPropagation()\n                      onBurnOpen(nft)\n                    }}\n                    aria-label={`Burn ${nft.name}`}\n                  >\n                    🔥 Burn\n                  </button>\n                )}\n                {isPixal && !isWaxRockPixal && (\n                  <button\n                    className=\"inv-dropdown-item recycle-item\"\n                    onClick={(e) => {\n                      e.stopPropagation()\n                      onRecyclePixal(nft)\n                    }}\n                    aria-label={`Recycle ${nft.name}`}\n                  >\n                    ♻️ Recycle\n                  </button>\n                )}\n                {isPixal && (\n                  <button\n                    className=\"inv-dropdown-item tokenize-item\"\n                    onClick={(e) => {\n                      e.stopPropagation()\n                      onTokenizePixal(nft)\n                    }}\n                    aria-label={`Tokenize ${nft.name} into WPIXAL`}\n                  >\n                    🪙 Tokenize into WPIXAL\n                  </button>\n                )}\n                {(isPixal || isIngredient) && (\n                  <button\n                    className=\"inv-dropdown-item craft-item\"\n                    onClick={(e) => {\n                      e.stopPropagation()\n                      onCraftingOpen(nft)\n                    }}\n                    aria-label={`Use ${nft.name} for crafting`}\n                  >\n                    🔨 {isIngredient ? 'Craft with Ingredient' : 'Craft'}\n                  </button>\n                )}\n                {nft.collection.collection_name === 'pixeljourney' && (\n                  <button\n                    className=\"inv-dropdown-item stake-item\"\n                    onClick={(e) => {\n                      e.stopPropagation()\n                      onStakeOpen(nft)\n                    }}\n                    aria-label={`Stake ${nft.name}`}\n                  >\n                    🥩 Stake NFT\n                  </button>\n                )}\n                {NeftyBlendService.isPixelPack(nft) && (\n                  <button\n                    className=\"inv-dropdown-item unpack-item\"\n                    onClick={(e) => {\n                      e.stopPropagation()\n                      onUnpackPixelPack(nft)\n                    }}\n                  >\n                    📦 Unpack\n                  </button>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n})\n\nconst Inventory: React.FC = memo(() => {\n  const navigate = useNavigate()\n  const { settings } = useDisplaySettings()\n  const { showSuccess, showError, confirm } = useNotifications()\n  const [inventory, setInventory] = useState<InventoryNFT[]>([])\n  const [loading, setLoading] = useState(false)\n\n\n\n  const [isModalOpen, setIsModalOpen] = useState(false)\n  const [listingModalOpen, setListingModalOpen] = useState(false)\n  const [transferModalOpen, setTransferModalOpen] = useState(false)\n  const [burnModalOpen, setBurnModalOpen] = useState(false)\n  const [showBulkListingModal, setShowBulkListingModal] = useState(false)\n  const [showBulkTransferModal, setShowBulkTransferModal] = useState(false)\n  const [showBulkDistributeModal, setShowBulkDistributeModal] = useState(false)\n  const [showBulkBurnModal, setShowBulkBurnModal] = useState(false)\n  const [showUnpackModal, setShowUnpackModal] = useState(false)\n  const [showBulkAuctionModal, setShowBulkAuctionModal] = useState(false)\n  const [showAuctionModal, setShowAuctionModal] = useState(false)\n  const [actionNFT, setActionNFT] = useState<InventoryNFT | null>(null)\n  const [selectedItems, setSelectedItems] = useState<Set<string>>(new Set())\n  const [isMultiSelectMode, setIsMultiSelectMode] = useState(false)\n  const [dropdownOpen, setDropdownOpen] = useState<string | null>(null)\n  const [craftingModalOpen, setCraftingModalOpen] = useState(false)\n  const [craftingIngredient, setCraftingIngredient] = useState<InventoryNFT | null>(null)\n  const [viewOffersModalOpen, setViewOffersModalOpen] = useState(false)\n  const [offersNFT, setOffersNFT] = useState<InventoryNFT | null>(null)\n  const [tokenizeModalOpen, setTokenizeModalOpen] = useState(false)\n  const [tokenizeNFT, setTokenizeNFT] = useState<InventoryNFT | null>(null)\n  \n  // Media zoom functionality (image or video)\n  const [zoomedImage, setZoomedImage] = useState<{ url: string; name: string; type: 'image' | 'video' } | null>(null)\n  const [showImageZoom, setShowImageZoom] = useState(false)\n\n  // Handle media zoom (image or video)\n  const handleMediaZoom = useCallback((imageUrl: string, videoUrl: string | null, name: string) => {\n    // Prefer video over image if available\n    const mediaUrl = videoUrl || imageUrl\n    const mediaType: 'image' | 'video' = videoUrl ? 'video' : 'image'\n    \n    // Process IPFS URLs\n    let processedUrl = mediaUrl\n    if (mediaUrl.startsWith('Qm') || mediaUrl.startsWith('baf')) {\n      processedUrl = `https://ipfs.io/ipfs/${mediaUrl}`\n    } else if (mediaUrl.startsWith('/ipfs/')) {\n      processedUrl = `https://ipfs.io${mediaUrl}`\n    } else if (mediaUrl.startsWith('ipfs://')) {\n      processedUrl = mediaUrl.replace('ipfs://', 'https://ipfs.io/ipfs/')\n    }\n    \n    setZoomedImage({ url: processedUrl, name, type: mediaType })\n    setShowImageZoom(true)\n  }, [])\n\n\n  const [searchTerm, setSearchTerm] = useState('')\n  const [debouncedSearchTerm, setDebouncedSearchTerm] = useState('')\n  const [searchSuggestions, setSearchSuggestions] = useState<SearchSuggestion[]>([])\n  const [filter, setFilter] = useState<'all' | 'pixals' | 'waxrock' | 'ingredients' | 'packs'>('all')\n  const [selectedCollection, setSelectedCollection] = useState<string>('all')\n  const [selectedSchema, setSelectedSchema] = useState<string>('all')\n  const [selectedTemplate, setSelectedTemplate] = useState<string>('')\n  const [sortBy, setSortBy] = useState<'transferred' | 'created' | 'updated' | 'minted' | 'asset_id' | 'name_asc' | 'name_desc' | 'collection_asc' | 'collection_desc' | 'mint_asc' | 'mint_desc'>('transferred')\n  const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('desc')\n  const [collectionSearchTerm] = useState('')\n  const [availableCollections, setAvailableCollections] = useState<string[]>([])\n  const [availableSchemas, setAvailableSchemas] = useState<string[]>([])\n  const [showAdvancedFilters, setShowAdvancedFilters] = useState(false)\n  const [dateRange, setDateRange] = useState({ start: '', end: '' })  \n\n  const [currentPage, setCurrentPage] = useState(1)\n  const [hasMore, setHasMore] = useState(false)\n  const [loadingMore, setLoadingMore] = useState(false)\n  const [loadingAll, setLoadingAll] = useState(false)\n  // Pagination settings - maintain single layout design\n  const ITEMS_PER_PAGE = 1000\n  const [totalPages, setTotalPages] = useState(1)\n\n  const { isConnected, account, login, session } = useWallet()\n\n  const loadInventory = useCallback(async (page: number = 1, append: boolean = false) => {\n    if (!account) return\n    \n    // Prevent concurrent calls\n    if (loading || loadingMore) {\n      log.debug('Skipping loadInventory - already loading', 'Inventory')\n      return\n    }\n    \n    if (page === 1) {\n      setLoading(true)\n      setCurrentPage(1)\n    } else {\n      setLoadingMore(true)\n    }\n    \n    try {\n      log.debug('Loading inventory', 'Inventory', { filter, page, ITEMS_PER_PAGE, sortBy, sortOrder })\n      \n      let response: { data: any[], hasMore: boolean, totalCount: number, collections?: string[], schemas?: string[] }\n      \n      // Build enhanced API options\n      const apiOptions: any = {\n        page,\n        limit: ITEMS_PER_PAGE,\n        order: sortOrder,\n        sort: sortBy.includes('_') ? 'asset_id' : sortBy, // Handle legacy sort options\n        search: debouncedSearchTerm || undefined,\n        template_id: selectedTemplate || undefined\n      }\n\n      // Add date range filters if specified\n      if (dateRange.start) {\n        apiOptions.after = new Date(dateRange.start).getTime() / 1000\n      }\n      if (dateRange.end) {\n        apiOptions.before = new Date(dateRange.end).getTime() / 1000\n      }\n      \n      // Apply filter-specific options\n      switch (filter) {\n        case 'pixals':\n          apiOptions.collection_name = 'pixeljourney'\n          apiOptions.schema_name = 'pixals'\n          break\n        case 'ingredients':\n          apiOptions.collection_name = 'pixeljourney'\n          apiOptions.schema_name = 'ingredients'\n          break\n        case 'waxrock':\n          apiOptions.collection_name = 'pixeljourney'\n          apiOptions.schema_name = 'pixals'\n          // WaxRock filtering will be handled in post-processing\n          break\n        case 'packs':\n          apiOptions.collection_name = 'pixeljourney'\n          apiOptions.schema_name = 'packs'\n          break\n        case 'all':\n        default:\n          // Apply collection and schema filters if selected\n          if (selectedCollection !== 'all') {\n            apiOptions.collection_name = selectedCollection\n          }\n          if (selectedSchema !== 'all') {\n            apiOptions.schema_name = selectedSchema\n          }\n          break\n      }\n      \n      // Use the enhanced API method\n      const apiResponse = await apiService.getUserInventoryEnhanced(account, apiOptions)\n      \n      response = {\n        data: apiResponse.assets || [],\n        hasMore: apiResponse.hasMore,\n        totalCount: apiResponse.total || 0,\n        collections: apiResponse.collections || [],\n        schemas: apiResponse.schemas || []\n      }\n      \n      // Update available collections and schemas for filters\n      if (response.collections && response.collections.length > 0) {\n        setAvailableCollections(prev => {\n          const combined = [...new Set([...prev, ...response.collections!])]\n          return combined.sort()\n        })\n      }\n      if (response.schemas && response.schemas.length > 0) {\n        setAvailableSchemas(prev => {\n          const combined = [...new Set([...prev, ...response.schemas!])]\n          return combined.sort()\n        })\n      }\n      \n      log.debug('Inventory Response', 'Inventory', { itemsReceived: response?.data?.length || 0, totalAvailable: response?.totalCount || 'unknown', hasMore: response?.hasMore })\n      \n      // Convert response to InventoryNFT format\n      let inventoryNFTs: InventoryNFT[] = response.data.map((asset: any) => ({\n        asset_id: asset.asset_id,\n        name: asset.name,\n        img: asset.image || asset.img, // Handle both formats\n        video: asset.video || (asset.traits?.video as string) || (asset.data?.video as string) || undefined,\n        collection: {\n          name: asset.collection || asset.collection_name,\n          collection_name: asset.collection || asset.collection_name\n        },\n        schema: {\n          schema_name: asset.schema || asset.schema_name\n        },\n        template: {\n          template_id: asset.template_id || asset.template?.template_id || '0',\n          max_supply: asset.max_supply || asset.template?.max_supply || '0'\n        },\n        data: asset.traits || asset.data || {},\n        mint_number: asset.template_mint || asset.mint_number\n      }))\n      \n      // WaxRock filtering is now handled by the API method getUserInventoryWaxRocks\n      // No additional client-side filtering needed for waxrock filter\n      \n      // Collect available collections for dropdown (only on first page)\n      if (page === 1 && filter === 'all') {\n        const collections = [...new Set(inventoryNFTs\n          .map(nft => nft.collection.collection_name)\n          .filter(name => typeof name === 'string' && name.trim() !== '')\n        )].sort()\n        setAvailableCollections(collections)\n      }\n      \n      if (append && page > 1) {\n        setInventory(prev => [...prev, ...inventoryNFTs])\n        setCurrentPage(page)\n      } else {\n        setInventory(inventoryNFTs)\n        setCurrentPage(1)\n      }\n      \n      setHasMore(response.hasMore)\n    } catch (error) {\n      log.error('Error loading inventory', 'Inventory', error as Error)\n      \n      // Show user-friendly error message\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred'\n      \n      // Set error state for UI feedback\n      if (page === 1 && !append) {\n        // Only clear inventory if this is the initial load, not a retry\n        setInventory([])\n        // Could add a toast notification here if available\n        log.warn('Failed to load inventory', 'Inventory', { errorMessage })\n      } else {\n        // For pagination errors or append errors, just log and don't clear existing data\n        log.warn('Failed to load more inventory items', 'Inventory', { errorMessage })\n      }\n      \n      setHasMore(false) // Stop further loading attempts on error\n    } finally {\n      setLoading(false)\n      setLoadingMore(false)\n    }\n  }, [account, filter, selectedCollection, ITEMS_PER_PAGE])\n\n  // Consolidated useEffect for loading inventory\n  useEffect(() => {\n    if (isConnected && account) {\n      log.debug('Inventory reload triggered', 'Inventory', { \n        filter, \n        selectedCollection, \n        selectedSchema, \n        selectedTemplate, \n        sortBy, \n        sortOrder, \n        searchTerm, \n        dateRange \n      })\n      loadInventory(1, false)\n    }\n  }, [isConnected, account, filter, selectedCollection, selectedSchema, selectedTemplate, sortBy, sortOrder, searchTerm, dateRange])\n\n  // Removed automatic background loading to prevent API spam\n  // Users can manually load more items using the \"Load More\" button\n\n  // Load more items\n  const loadMoreItems = useCallback(() => {\n    if (hasMore && !loadingMore && account) {\n      loadInventory(currentPage + 1, true)\n    }\n  }, [hasMore, loadingMore, currentPage, account, loadInventory])\n\n\n\n  // Load all remaining items with concurrent requests\n  const loadAllItems = useCallback(async () => {\n    if (!hasMore || loadingAll || !account) {\n      log.debug('LoadAll skipped', 'Inventory', { hasMore, loadingAll, account })\n      return\n    }\n    \n    setLoadingAll(true)\n    log.debug('Starting loadAllItems with concurrent requests', 'Inventory', { currentInventoryLength: inventory.length, hasMore, currentPage })\n    \n    const concurrentRequests = 2 // Reduced concurrent requests to avoid rate limiting\n    let startPage = currentPage + 1\n    let allNewItems: InventoryNFT[] = []\n    let hasMoreItems = true\n    let totalRequests = 0\n    \n    try {\n      while (hasMoreItems && totalRequests < 50) { // Increased safety limit\n        // Create batch of concurrent requests\n        const requestPromises: Promise<{ assets: NFTAsset[], total: number, hasMore: boolean }>[] = []\n        const requestPages: number[] = []\n        \n        for (let i = 0; i < concurrentRequests && hasMoreItems; i++) {\n          const page = startPage + i\n          requestPages.push(page)\n          \n          const requestPromise = (async (): Promise<{ assets: NFTAsset[], total: number, hasMore: boolean }> => {\n            const offset = (page - 1) * 1000\n            \n            try {\n              switch (filter) {\n                case 'pixals':\n                  return await apiService.getUserInventoryBySchema(account, 'pixeljourney', 'pixals', 1000, offset)\n                case 'ingredients':\n                  return await apiService.getUserInventoryBySchema(account, 'pixeljourney', 'ingredients', 1000, offset)\n                case 'waxrock':\n                  return await apiService.getUserInventoryWaxRocks(account, 1000, offset)\n                case 'all':\n                default: {\n                  const collectionFilter = selectedCollection !== 'all' ? selectedCollection : undefined\n                  return await apiService.getUserInventoryWithFilter(account, page, 1000, collectionFilter)\n                }\n              }\n            } catch (error) {\n              log.error('Error in individual request', 'Inventory', error instanceof Error ? error : new Error(String(error)))\n              return { assets: [], total: 0, hasMore: false }\n            }\n          })()\n          \n          requestPromises.push(requestPromise)\n        }\n        \n        log.debug('LoadAll Concurrent Batch', 'Inventory', { pages: requestPages, currentItems: inventory.length + allNewItems.length })\n        \n        // Execute all requests concurrently with error handling\n        const responses = await Promise.allSettled(requestPromises)\n        totalRequests += responses.length\n        \n        let batchHasItems = false\n        \n        // Process all responses\n        for (let i = 0; i < responses.length; i++) {\n          const result = responses[i]\n          const page = requestPages[i]\n          \n          if (result.status === 'fulfilled') {\n            const response = result.value\n            log.debug('LoadAll Response', 'Inventory', { page, items: response?.assets?.length || 0, hasMore: response?.hasMore, total: response?.total })\n            \n            if (response && response.assets && response.assets.length > 0) {\n              batchHasItems = true\n              let inventoryNFTs = response.assets.map(nft => ({\n                asset_id: nft.asset_id,\n                name: nft.name,\n                img: nft.image,\n                video: nft.video || (nft.traits?.video as string) || undefined,\n                collection: {\n                  name: nft.collection,\n                  collection_name: nft.collection\n                },\n                schema: {\n                  schema_name: nft.schema\n                },\n                template: {\n                  template_id: nft.template_id?.toString() || '0',\n                  max_supply: nft.max_supply || '0'\n                },\n                data: nft.traits || {},\n                mint_number: nft.template_mint\n              }))\n              \n              // Filter for WaxRock if needed\n              if (filter === 'waxrock') {\n                inventoryNFTs = inventoryNFTs.filter(nft => {\n                  const waxRock = nft.data.WaxRock as string\n                  return nft.collection.collection_name === 'pixeljourney' && \n                         nft.schema.schema_name === 'pixals' && \n                         waxRock && \n                         waxRock !== 'none'\n                })\n              }\n              \n              allNewItems.push(...inventoryNFTs)\n            }\n            \n            // Check if any response indicates no more items\n            if (!response || !response.hasMore) {\n              hasMoreItems = false\n            }\n          } else {\n            log.error('LoadAll Request Failed', 'Inventory', new Error(`Page ${page}: ${result.reason}`))\n            // Don't stop loading on individual failures, but reduce hasMoreItems chance\n          }\n        }\n        \n        // If no items were found in this batch, stop\n        if (!batchHasItems) {\n          hasMoreItems = false\n          log.debug('No more items found, stopping LoadAll', 'Inventory')\n        }\n        \n        // Update the page for next batch\n        startPage += concurrentRequests\n        \n        // Update inventory with all new items from this batch\n        if (allNewItems.length > 0) {\n          setInventory(prev => {\n            const newInventory = [...prev, ...allNewItems]\n            log.debug('Updated inventory', 'Inventory', { previousCount: prev.length, newCount: newInventory.length, addedCount: allNewItems.length })\n            return newInventory\n          })\n          setCurrentPage(startPage - 1)\n          allNewItems = [] // Reset for next batch\n        }\n        \n        // Add a small delay to avoid overwhelming the API\n        if (hasMoreItems) {\n          await new Promise(resolve => setTimeout(resolve, 100))\n        }\n      }\n      \n      log.debug('LoadAll Complete with concurrent requests', 'Inventory', { totalItems: inventory.length, totalRequests })\n      setHasMore(false)\n    } catch (error) {\n      log.error('Error loading all items', 'Inventory', error as Error)\n      \n      // Show user-friendly error message\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred'\n      log.warn('Failed to load all inventory items', 'Inventory', { errorMessage })\n      \n      // Stop loading and reset state\n      setHasMore(false)\n    } finally {\n      setLoadingAll(false)\n    }\n  }, [hasMore, loadingAll, account, currentPage, ITEMS_PER_PAGE, filter, selectedCollection, inventory.length])\n\n  // Close dropdown when clicking outside and handle positioning\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (dropdownOpen && !(event.target as Element).closest('.more-actions-dropdown')) {\n        setDropdownOpen(null)\n      }\n    }\n\n    const adjustDropdownPosition = () => {\n      if (dropdownOpen) {\n        const dropdown = document.querySelector(`[data-dropdown-id=\"${dropdownOpen}\"] .inv-dropdown-menu`) as HTMLElement\n        if (dropdown) {\n          const rect = dropdown.getBoundingClientRect()\n          const viewportWidth = window.innerWidth\n          \n          // Reset classes\n          dropdown.classList.remove('dropdown-left', 'dropdown-down')\n          \n          // Adjust horizontal position if dropdown goes off-screen\n          if (rect.right > viewportWidth) {\n            dropdown.classList.add('dropdown-left')\n          }\n          \n          // Since default is upward, only go downward if there's not enough space above\n          if (rect.top < 0) {\n            dropdown.classList.add('dropdown-down')\n          }\n        }\n      }\n    }\n\n    document.addEventListener('mousedown', handleClickOutside)\n    // Adjust position after dropdown opens\n    if (dropdownOpen) {\n      setTimeout(adjustDropdownPosition, 0)\n    }\n    \n    return () => document.removeEventListener('mousedown', handleClickOutside)\n  }, [dropdownOpen])\n\n  const handleNFTClick = (nft: InventoryNFT) => {\n    // Navigate to asset detail page\n    navigate(`/assets/${nft.asset_id}`)\n  }\n\n  const handleCollectionClick = (collectionName: string) => {\n    navigate(`/marketplace?collection=${collectionName}`)\n  }\n\n  const handleSchemaClick = (schemaName: string) => {\n    navigate(`/marketplace?schema=${schemaName}`)\n  }\n\n  const handleRecyclePixal = async (nft: InventoryNFT) => {\n    if (!account || !session) {\n      showError('Wallet Required', 'Please connect your wallet first')\n      return\n    }\n\n    // Check if this is a WaxRock Pixal PFP - block recycling if it is\n    if (MarketplaceConfigService.isPixalPFP(nft.template.template_id)) {\n      const waxRock = nft.data?.WaxRock as string\n      if (waxRock && MarketplaceConfigService.isValidWaxRock(waxRock)) {\n        showError(\n          'WaxRock Protection',\n          `This is a rare WaxRock Pixal PFP (${waxRock}) and cannot be recycled. WaxRock Pixals are protected from burning and recycling on our platform.`\n        )\n        return\n      }\n    }\n\n    try {\n      // Confirm the recycle action\n      const confirmed = await confirm(\n        'Confirm Recycle',\n        `Are you sure you want to recycle ${nft.name}?\\n\\nThis will cost 12,000 PXJ tokens and cannot be undone.`,\n        'Recycle',\n        'Cancel'\n      )\n      \n      if (!confirmed) return\n\n      // Create the recycle transaction\n      const transaction = await NeftyBlendService.recyclePixal(nft.asset_id, account)\n      \n      // Execute the transaction\n      await NeftyBlendService.executeRecycle(transaction, session)\n      \n      showSuccess('Recycle Successful', 'Pixal recycled successfully!')\n      \n      // Reload inventory to reflect changes\n      await loadInventory()\n      \n    } catch (error) {\n      log.error('Recycle failed', 'Inventory', error as Error)\n      showError(\n        'Recycle Failed',\n        error instanceof Error ? error.message : 'Unknown error occurred'\n      )\n    }\n  }\n\n  const handleTokenizePixal = async (nft: InventoryNFT) => {\n    if (!account || !session) {\n      showError('Wallet Required', 'Please connect your wallet first')\n      return\n    }\n\n    // Verify this is a Pixal PFP\n    if (!MarketplaceConfigService.isPixalPFP(nft.template.template_id)) {\n      showError('Invalid NFT', 'Only Pixal PFPs can be tokenized into WPIXAL')\n      return\n    }\n\n    // Open the tokenize fee modal\n    setTokenizeNFT(nft)\n    setTokenizeModalOpen(true)\n  }\n\n  const handleCraftingOpen = (nft: InventoryNFT) => {\n    setCraftingIngredient(nft)\n    setCraftingModalOpen(true)\n  }\n\n  const handleViewOffers = (nft: InventoryNFT) => {\n    setOffersNFT(nft)\n    setViewOffersModalOpen(true)\n  }\n\n  const handleStakeOpen = async (nft: InventoryNFT) => {\n    if (!account || !session) {\n      showError('Wallet Required', 'Please connect your wallet first')\n      return\n    }\n\n    if (nft.collection.collection_name !== 'pixeljourney') {\n      showError('Invalid Asset', 'Only Pixel Journey NFTs can be staked')\n      return\n    }\n\n    try {\n      // Confirm the stake action\n      const confirmed = await confirm(\n        'Confirm Staking',\n        `Are you sure you want to stake ${nft.name}?\\n\\nYour assets will remain in your inventory as the Pixel Journey uses non-custodial staking.`,\n        'Stake NFT',\n        'Cancel'\n      )\n      \n      if (!confirmed) return\n\n      // Execute the staking transaction\n      const result = await stakingService.stakeNFTsPixelJourney(\n        session,\n        [nft.asset_id],\n        'pixeljourney'\n      )\n      \n      if (result.success) {\n        showSuccess('NFT Staked Successfully', `${nft.name} has been staked successfully!`)\n        // Refresh inventory to reflect the change\n        await loadInventory()\n      } else {\n        showError('Staking Failed', result.error || 'Failed to stake NFT')\n      }\n      \n    } catch (error) {\n      console.error('Staking error:', error)\n      showError('Staking Failed', error instanceof Error ? error.message : 'An unexpected error occurred')\n    }\n  }\n\n  const handleUnpackPixelPack = async (nft: InventoryNFT) => {\n    if (!account || !session) {\n      showError('Wallet Required', 'Please connect your wallet first')\n      return\n    }\n\n    try {\n      // Confirm the unpack action\n      const confirmed = await confirm(\n        'Confirm Unpack',\n        `Are you sure you want to unpack ${nft.name}?\\n\\nThis action cannot be undone.`,\n        'Unpack',\n        'Cancel'\n      )\n      \n      if (!confirmed) return\n\n      // Create the unpack transaction\n      const transaction = await NeftyBlendService.unpackPixelPack(nft.asset_id, account)\n      \n      // Execute the transaction\n      await NeftyBlendService.executeUnpack(transaction, session)\n      \n      showSuccess('Unpack Successful', 'Pixelpack unpacked successfully!')\n      \n      // Reload inventory to reflect changes\n      await loadInventory()\n      \n    } catch (error) {\n      log.error('Unpack failed', 'Inventory', error as Error)\n      showError(\n        'Unpack Failed',\n        error instanceof Error ? error.message : 'Unknown error occurred'\n      )\n    }\n  }\n\n  // TODO: Multi-select mode toggle - currently unused but may be needed for future UI enhancements\n  // const toggleMultiSelectMode = () => {\n  //   setIsMultiSelectMode(!isMultiSelectMode)\n  //   setSelectedItems(new Set())\n  // }\n\n  const toggleItemSelection = (assetId: string) => {\n    const newSelected = new Set(selectedItems)\n    if (newSelected.has(assetId)) {\n      newSelected.delete(assetId)\n      // If no items are selected after removal, exit multi-select mode\n      if (newSelected.size === 0) {\n        setIsMultiSelectMode(false)\n      }\n    } else {\n      newSelected.add(assetId)\n      // Automatically enable multi-select mode when first item is selected\n      if (!isMultiSelectMode) {\n        setIsMultiSelectMode(true)\n      }\n    }\n    setSelectedItems(newSelected)\n  }\n\n  const selectAllItems = () => {\n    const allIds = new Set(filteredInventory.map(nft => nft.asset_id))\n    \n    // Check if all filtered items are already selected\n    const allSelected = allIds.size > 0 && [...allIds].every(id => selectedItems.has(id))\n    \n    if (allSelected) {\n      // Deselect all filtered items\n      const newSelected = new Set(selectedItems)\n      allIds.forEach(id => newSelected.delete(id))\n      setSelectedItems(newSelected)\n    } else {\n      // Select all filtered items (merge with existing selection)\n      const newSelected = new Set([...selectedItems, ...allIds])\n      setSelectedItems(newSelected)\n    }\n  }\n\n  const clearSelection = () => {\n    setSelectedItems(new Set())\n  }\n\n  const handleBulkListing = () => {\n    if (selectedItems.size === 0) return\n    setShowBulkListingModal(true)\n  }\n\n  const handleBulkTransfer = () => {\n    if (selectedItems.size === 0) return\n    setShowBulkTransferModal(true)\n  }\n\n  const handleBulkDistribute = () => {\n    if (selectedItems.size === 0) return\n    setShowBulkDistributeModal(true)\n  }\n\n  const handleBulkAuction = () => {\n    if (selectedItems.size === 0) return\n    setShowBulkAuctionModal(true)\n  }\n\n  const handleBulkBurn = () => {\n    if (selectedItems.size === 0) return\n    setShowBulkBurnModal(true)\n  }\n\n  const handleBulkStake = async () => {\n    if (selectedItems.size === 0) return\n    \n    if (!account || !session) {\n      showError('Wallet Required', 'Please connect your wallet first')\n      return\n    }\n\n    // Filter selected NFTs to only include pixeljourney collection\n    const selectedNFTs = inventory.filter(nft => selectedItems.has(nft.asset_id))\n    const stakeableNFTs = selectedNFTs.filter(nft => nft.collection.collection_name === 'pixeljourney')\n    \n    if (stakeableNFTs.length === 0) {\n      showError('No Stakeable NFTs', 'Only Pixel Journey NFTs can be staked. Please select some Pixel Journey assets.')\n      return\n    }\n\n    // Skip non-stakeable NFTs if any (mixed selection)\n    if (stakeableNFTs.length !== selectedNFTs.length) {\n      const nonStakeableCount = selectedNFTs.length - stakeableNFTs.length\n      console.log(`Skipping ${nonStakeableCount} non-Pixel Journey NFTs, staking ${stakeableNFTs.length} Pixel Journey NFTs`)\n    }\n\n    try {\n      const assetIds = stakeableNFTs.map(nft => nft.asset_id)\n      \n      // Execute the bulk staking transaction\n      const result = await stakingService.stakeNFTsPixelJourney(\n        session,\n        assetIds,\n        'pixeljourney'\n      )\n      \n      if (result.success) {\n        showSuccess('NFTs Staked Successfully', `${stakeableNFTs.length} NFT${stakeableNFTs.length > 1 ? 's have' : ' has'} been staked successfully!`)\n        // Clear selection and refresh inventory\n        setSelectedItems(new Set())\n        setIsMultiSelectMode(false)\n        await loadInventory()\n      } else {\n        showError('Staking Failed', result.error || 'Failed to stake NFTs')\n      }\n      \n    } catch (error) {\n      console.error('Bulk staking error:', error)\n      showError('Staking Failed', error instanceof Error ? error.message : 'An unexpected error occurred')\n    }\n  }\n\n  const handleClaimRewards = async () => {\n    if (!account || !session) {\n      showError('Wallet Required', 'Please connect your wallet first')\n      return\n    }\n\n    try {\n      // Call the staking service to claim rewards\n      const result = await stakingService.claimAllRewards(session, 'pixeljourney')\n      \n      if (result.success) {\n        showSuccess('Rewards Claimed Successfully', 'All pending rewards have been claimed and transferred to your wallet!')\n      } else {\n        showError('Claim Failed', result.error || 'Failed to claim rewards')\n      }\n      \n    } catch (error) {\n      console.error('Claim rewards error:', error)\n      showError('Claim Failed', error instanceof Error ? error.message : 'An unexpected error occurred')\n    }\n  }\n\n  // TODO: Bulk unpack functionality - currently disabled due to incorrect blend ID transactions\n  // This should be refactored to use proper unpack functions from different marketplaces\n  // const handleBulkUnpack = () => {\n  //   if (selectedItems.size === 0) return\n  //   \n  //   // Filter selected NFTs to only include packs\n  //   const selectedNFTs = inventory.filter(nft => selectedItems.has(nft.asset_id))\n  //   const packNFTs = selectedNFTs.filter(nft => NeftyBlendService.isPackNFT(nft))\n  //   \n  //   if (packNFTs.length === 0) {\n  //     showError('No pack NFTs selected. Only packs, chests, boxes, and containers can be unpacked.')\n  //     return\n  //   }\n  //    \n  //   setShowUnpackModal(true)\n  // }\n\n\n\n  const handleBulkUnpackPixelPacks = async () => {\n    if (selectedItems.size === 0) return\n    \n    if (!account || !session) {\n      showError('Wallet Required', 'Please connect your wallet first')\n      return\n    }\n\n    // Filter selected NFTs to only include pixelpacks\n    const selectedNFTs = inventory.filter(nft => selectedItems.has(nft.asset_id))\n    const pixelPackNFTs = selectedNFTs.filter(nft => NeftyBlendService.isPixelPack(nft))\n    \n    if (pixelPackNFTs.length === 0) {\n      showError('No pixelpack NFTs selected', 'Please select pixelpack items to unpack.')\n      return\n    }\n\n    try {\n      // Confirm the bulk unpack action\n      const confirmed = await confirm(\n        'Confirm Bulk Unpack',\n        `Are you sure you want to unpack ${pixelPackNFTs.length} pixelpack(s)?\\n\\nThis action cannot be undone and will be processed in batches of 20.`,\n        'Unpack All',\n        'Cancel'\n      )\n      \n      if (!confirmed) return\n\n      const assetIds = pixelPackNFTs.map(nft => nft.asset_id)\n      \n      // Create bulk unpack transactions (batched in groups of 20)\n      const transactions = await NeftyBlendService.unpackPixelPacksBulk(assetIds, account)\n      \n      // Execute all transactions\n      for (let i = 0; i < transactions.length; i++) {\n        const transaction = transactions[i]\n        showSuccess(`Processing batch ${i + 1} of ${transactions.length}...`, 'Bulk Unpack')\n        \n        await NeftyBlendService.executeUnpack(transaction, session)\n      }\n      \n      showSuccess('Bulk Unpack Successful', `Successfully unpacked ${pixelPackNFTs.length} pixelpack(s)!`)\n      \n      // Clear selection and reload inventory\n      setSelectedItems(new Set())\n      await loadInventory()\n      \n    } catch (error) {\n      log.error('Bulk unpack failed', 'Inventory', error as Error)\n      showError(\n        'Bulk Unpack Failed',\n        error instanceof Error ? error.message : 'Unknown error occurred'\n      )\n    }\n  }\n\n  // Debounce search term for better performance\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedSearchTerm(searchTerm)\n    }, 300)\n    \n    return () => clearTimeout(timer)\n  }, [searchTerm])\n\n  // Generate search suggestions based on inventory\n  const generateSearchSuggestions = useCallback((query: string): SearchSuggestion[] => {\n    if (!query || query.length < 2) return []\n    \n    const suggestions = new Map<string, SearchSuggestion>()\n    const queryLower = query.toLowerCase()\n    \n    inventory.forEach(nft => {\n      // NFT name suggestions\n      if (nft.name.toLowerCase().includes(queryLower)) {\n        const key = `name:${nft.name}`\n        if (!suggestions.has(key)) {\n          suggestions.set(key, {\n            text: nft.name,\n            type: 'name',\n            count: 1\n          })\n        } else {\n          const existing = suggestions.get(key)!\n          existing.count = (existing.count || 0) + 1\n        }\n      }\n      \n      // Collection suggestions\n      if (nft.collection.collection_name.toLowerCase().includes(queryLower)) {\n        const key = `collection:${nft.collection.collection_name}`\n        if (!suggestions.has(key)) {\n          suggestions.set(key, {\n            text: nft.collection.collection_name,\n            type: 'collection',\n            count: 1\n          })\n        } else {\n          const existing = suggestions.get(key)!\n          existing.count = (existing.count || 0) + 1\n        }\n      }\n      \n      // Schema suggestions\n      if (nft.schema.schema_name.toLowerCase().includes(queryLower)) {\n        const key = `schema:${nft.schema.schema_name}`\n        if (!suggestions.has(key)) {\n          suggestions.set(key, {\n            text: nft.schema.schema_name,\n            type: 'schema',\n            count: 1\n          })\n        } else {\n          const existing = suggestions.get(key)!\n          existing.count = (existing.count || 0) + 1\n        }\n      }\n    })\n    \n    return Array.from(suggestions.values())\n      .sort((a, b) => (b.count || 0) - (a.count || 0))\n      .slice(0, 8)\n  }, [inventory])\n\n  // Update search suggestions when search term changes\n  useEffect(() => {\n    const suggestions = generateSearchSuggestions(searchTerm)\n    setSearchSuggestions(suggestions)\n  }, [searchTerm, generateSearchSuggestions])\n\n  // Memoize filtered and sorted inventory to prevent recalculation on every render\n  const filteredInventory = useMemo(() => {\n    const filtered = inventory.filter(nft => {\n      const matchesSearch = debouncedSearchTerm === '' || \n                           nft.name.toLowerCase().includes(debouncedSearchTerm.toLowerCase()) ||\n                           nft.collection.collection_name.toLowerCase().includes(debouncedSearchTerm.toLowerCase()) ||\n                           nft.schema.schema_name.toLowerCase().includes(debouncedSearchTerm.toLowerCase())\n      \n      const matchesFilter = filter === 'all' || \n                           (filter === 'pixals' && nft.collection.collection_name === 'pixeljourney' && nft.schema.schema_name === 'pixals') ||\n                           (filter === 'waxrock' && nft.collection.collection_name === 'pixeljourney' && nft.schema.schema_name === 'pixals' && nft.data?.WaxRock && nft.data.WaxRock !== 'none') ||\n                           (filter === 'ingredients' && nft.collection.collection_name === 'pixeljourney' && nft.schema.schema_name === 'ingredients') ||\n                           (filter === 'packs' && NeftyBlendService.isPackNFT(nft))\n      \n      return matchesSearch && matchesFilter\n    })\n\n    // Apply sorting\n    return filtered.sort((a, b) => {\n      switch (sortBy) {\n        case 'name_asc':\n          return a.name.localeCompare(b.name)\n        case 'name_desc':\n          return b.name.localeCompare(a.name)\n        case 'collection_asc':\n          return a.collection.collection_name.localeCompare(b.collection.collection_name)\n        case 'collection_desc':\n          return b.collection.collection_name.localeCompare(a.collection.collection_name)\n        case 'mint_asc':\n          return (a.mint_number || 0) - (b.mint_number || 0)\n        case 'mint_desc':\n          return (b.mint_number || 0) - (a.mint_number || 0)\n        // Rarity sorting removed - Pixal PFPs don't have rarity attributes\n        default:\n          return 0\n      }\n    })\n  }, [inventory, debouncedSearchTerm, filter, sortBy])\n\n  // Calculate total pages based on filtered inventory\n  const filteredCount = filteredInventory.length\n  \n  // Update total pages when filtered inventory changes\n  useEffect(() => {\n    const pages = Math.ceil(filteredCount / ITEMS_PER_PAGE)\n    setTotalPages(Math.max(1, pages))\n  }, [filteredCount])\n\n  // Get current page items for display\n  const currentItems = useMemo(() => {\n    const startIndex = (currentPage - 1) * ITEMS_PER_PAGE\n    const endIndex = startIndex + ITEMS_PER_PAGE\n    return filteredInventory.slice(startIndex, endIndex)\n  }, [filteredInventory, currentPage, ITEMS_PER_PAGE])\n\n  // Navigation functions for pagination\n  const goToNextPage = useCallback(() => {\n    if (currentPage < totalPages) {\n      setCurrentPage(prev => prev + 1)\n    }\n  }, [currentPage, totalPages])\n\n  const goToPrevPage = useCallback(() => {\n    if (currentPage > 1) {\n      setCurrentPage(prev => prev - 1)\n    }\n  }, [currentPage])\n\n  // Reset to page 1 when filters change\n  useEffect(() => {\n    setCurrentPage(1)\n  }, [filter, selectedCollection, debouncedSearchTerm, sortBy])\n\n\n\n\n\n  if (!isConnected) {\n    return (\n    <div className=\"inventory-page\">\n      <div className=\"inventory-page-header\">\n        <h1 className=\"inventory-page-title\">My NFT Inventory</h1>\n        <p className=\"inventory-page-subtitle\">View and manage your Pixel Journey NFTs</p>\n      </div>\n        \n        <div className=\"connect-wallet-prompt\">\n          <div className=\"connect-wallet-card\">\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" className=\"wallet-icon\">\n              <path d=\"M21 12V7H5a2 2 0 0 1 0-4h14v4\"></path>\n              <path d=\"M3 5v14a2 2 0 0 0 2 2h16v-5\"></path>\n              <circle cx=\"18\" cy=\"12\" r=\"2\"></circle>\n            </svg>\n            <h3>Connect Your Wallet</h3>\n            <p>Connect your wallet to view your NFT inventory and manage your Pixel Journey assets.</p>\n            <button className=\"btn-primary\" onClick={login}>\n              Connect Wallet\n            </button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"inventory-container\">\n      <div className=\"inventory-header\">\n        <h1 className=\"inventory-title\">My NFT Inventory</h1>\n        {/* <p className=\"inventory-subtitle\">Connected as: <strong>{account}</strong></p> */}\n\n        <div className=\"inventory-action-buttons\">\n          <button \n            className=\"btn inventory-action-btn craft-btn\"\n            onClick={() => {\n              setCraftingModalOpen(true)\n            }}\n            title=\"Open crafting interface\"\n          >\n            🔨 Craft\n          </button>\n          <button \n            className=\"btn btn-success inventory-action-btn\"\n            onClick={handleClaimRewards}\n            title=\"Claim all pending staking rewards\"\n            disabled={!account || !session}\n          >\n            💰 Claim\n          </button>\n        </div>\n\n        \n      </div>\n\n      {/* Filter Tabs */}\n      <div className=\"inventory-page-filters\">\n        <AdvancedSearch\n          searchTerm={searchTerm}\n          onSearchChange={(term) => {\n            setSearchTerm(term)\n            setCurrentPage(1)\n          }}\n          suggestions={searchSuggestions}\n          placeholder=\"Search NFTs by name, collection, or schema...\"\n          showFilters={false}\n          className=\"inventory-search\"\n        />\n        \n        <div className=\"inventory-controls\">\n          <div className=\"inventory-filter-tabs\">\n            <button \n              className={`inventory-filter-tab ${filter === 'all' ? 'active' : ''}`}\n              onClick={() => { setFilter('all'); setCurrentPage(1); }}\n            >\n              All NFTs\n            </button>\n            <button \n              className={`inventory-filter-tab ${filter === 'pixals' ? 'active' : ''}`}\n              onClick={() => { setFilter('pixals'); setCurrentPage(1); }}\n            >\n              Pixals\n            </button>\n            <button \n              className={`inventory-filter-tab ${filter === 'waxrock' ? 'active' : ''}`}\n              onClick={() => { setFilter('waxrock'); setCurrentPage(1); }}\n            >\n              WaxRock\n            </button>\n            <button \n              className={`inventory-filter-tab ${filter === 'ingredients' ? 'active' : ''}`}\n              onClick={() => { setFilter('ingredients'); setCurrentPage(1); }}\n            >\n              Ingredients\n            </button>\n            <button \n              className={`inventory-filter-tab ${filter === 'packs' ? 'active' : ''}`}\n              onClick={() => { setFilter('packs'); setCurrentPage(1); }}\n            >\n              Packs\n            </button>\n          </div>\n          \n          {/* Enhanced Filtering Controls */}\n          <div className=\"enhanced-filters\">\n            {/* Primary Sort - Latest Received by Default */}\n            <div className=\"sort-container\">\n              <label>Sort by:</label>\n              <select\n                value={sortBy}\n                onChange={(e) => {\n                  setSortBy(e.target.value as any)\n                  setCurrentPage(1)\n                }}\n                className=\"sort-select\"\n              >\n                <option value=\"transferred\">Latest Received</option>\n                <option value=\"created\">Latest Created</option>\n                <option value=\"updated\">Recently Updated</option>\n                <option value=\"minted\">Latest Minted</option>\n                <option value=\"asset_id\">Asset ID</option>\n                <option value=\"name_asc\">Name (A-Z)</option>\n                <option value=\"name_desc\">Name (Z-A)</option>\n                <option value=\"collection_asc\">Collection (A-Z)</option>\n                <option value=\"collection_desc\">Collection (Z-A)</option>\n                <option value=\"mint_asc\">Mint Number (Low-High)</option>\n                <option value=\"mint_desc\">Mint Number (High-Low)</option>\n              </select>\n            </div>\n\n            {/* Collection Filter - Show for all filters */}\n            <div className=\"collection-filter-container\">\n              <label>Collection:</label>\n              <select\n                value={selectedCollection}\n                onChange={(e) => {\n                  setSelectedCollection(e.target.value)\n                  setCurrentPage(1)\n                }}\n                className=\"collection-select\"\n              >\n                <option value=\"all\">All Collections</option>\n                {availableCollections\n                  .filter(collection => \n                    typeof collection === 'string' && collection.toLowerCase().includes(collectionSearchTerm.toLowerCase())\n                  )\n                  .map(collection => (\n                    <option key={collection} value={collection}>\n                      {collection}\n                    </option>\n                  ))\n                }\n              </select>\n            </div>\n\n            {/* Schema Filter */}\n            <div className=\"schema-filter-container\">\n              <label>Schema:</label>\n              <select\n                value={selectedSchema}\n                onChange={(e) => {\n                  setSelectedSchema(e.target.value)\n                  setCurrentPage(1)\n                }}\n                className=\"schema-select\"\n              >\n                <option value=\"all\">All Schemas</option>\n                {availableSchemas.map(schema => (\n                  <option key={schema} value={schema}>\n                    {schema}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Template ID Filter */}\n            <div className=\"template-filter-container\">\n              <label>Template ID:</label>\n              <input\n                type=\"text\"\n                placeholder=\"Enter template ID...\"\n                value={selectedTemplate}\n                onChange={(e) => {\n                  setSelectedTemplate(e.target.value)\n                  setCurrentPage(1)\n                }}\n                className=\"template-input\"\n              />\n            </div>\n\n            {/* Advanced Filters Toggle */}\n            <button \n              className={`advanced-filters-toggle ${showAdvancedFilters ? 'active' : ''}`}\n              onClick={() => setShowAdvancedFilters(!showAdvancedFilters)}\n            >\n              {showAdvancedFilters ? '▼' : '▶'} Advanced Filters\n            </button>\n          </div>\n\n          {/* Advanced Filters Panel */}\n          {showAdvancedFilters && (\n            <div className=\"advanced-filters-panel\">\n              <div className=\"date-range-filter\">\n                <label>Date Range:</label>\n                <div className=\"date-inputs\">\n                  <input\n                    type=\"date\"\n                    value={dateRange.start}\n                    onChange={(e) => {\n                      setDateRange(prev => ({ ...prev, start: e.target.value }))\n                      setCurrentPage(1)\n                    }}\n                    className=\"date-input\"\n                    placeholder=\"Start date\"\n                  />\n                  <span>to</span>\n                  <input\n                    type=\"date\"\n                    value={dateRange.end}\n                    onChange={(e) => {\n                      setDateRange(prev => ({ ...prev, end: e.target.value }))\n                      setCurrentPage(1)\n                    }}\n                    className=\"date-input\"\n                    placeholder=\"End date\"\n                  />\n                </div>\n              </div>\n              \n              <div className=\"filter-actions\">\n                <button \n                  className=\"clear-filters-btn\"\n                  onClick={() => {\n                    setSelectedCollection('all')\n                    setSelectedSchema('all')\n                    setSelectedTemplate('')\n                    setDateRange({ start: '', end: '' })\n                    setSearchTerm('')\n                    setSortBy('transferred')\n                    setSortOrder('desc')\n                    setCurrentPage(1)\n                  }}\n                >\n                  Clear All Filters\n                </button>\n              </div>\n            </div>\n          )}\n          \n\n          \n\n        </div>\n        \n        {selectedItems.size > 0 && (\n          <div className=\"bulk-actions-toolbar\">\n            <div className=\"selection-info\">\n              <span>{selectedItems.size} item{selectedItems.size !== 1 ? 's' : ''} selected</span>\n              {selectedItems.size > 0 && (\n                <button className=\"clear-selection\" onClick={clearSelection}>\n                  Clear\n                </button>\n              )}\n              <button className=\"select-all\" onClick={selectAllItems}>\n                {(() => {\n                  const allIds = new Set(filteredInventory.map(nft => nft.asset_id))\n                  const allSelected = allIds.size > 0 && [...allIds].every(id => selectedItems.has(id))\n                  return allSelected ? 'Deselect All' : 'Select All'\n                })()}\n              </button>\n            </div>\n            \n            {selectedItems.size > 0 && (\n              <div className=\"bulk-actions\">\n                <button className=\"bulk-btn list-btn\" onClick={handleBulkListing}>\n                  💰 List ({selectedItems.size})\n                </button>\n                <button className=\"bulk-btn auction-btn\" onClick={handleBulkAuction}>\n                  🏆 Auction ({selectedItems.size})\n                </button>\n                <button className=\"bulk-btn transfer-btn\" onClick={handleBulkTransfer}>\n                  📤 Transfer ({selectedItems.size})\n                </button>\n                <button className=\"bulk-btn distribute-btn\" onClick={handleBulkDistribute}>\n                  🎯 Distribute ({selectedItems.size})\n                </button>\n                <button className=\"bulk-btn burn-btn\" onClick={handleBulkBurn}>\n                  🔥 Burn ({selectedItems.size})\n                </button>\n                          <button \n            className=\"bulk-btn stake-btn\"\n            onClick={handleBulkStake}>\n            🥩 Stake ({selectedItems.size})\n          </button>\n                {(() => {\n                  const selectedNFTs = inventory.filter(nft => selectedItems.has(nft.asset_id))\n                  // const packCount = selectedNFTs.filter(nft => NeftyBlendService.isPackNFT(nft)).length // TODO: Currently unused, for future general pack unpacking\n                  const pixelPackCount = selectedNFTs.filter(nft => NeftyBlendService.isPixelPack(nft)).length\n                  \n                  return (\n                    <>\n                     \n                     {/*TODO: current unpack funtionality here appears to be ~incorrectly opening transactions to blend IDs .. whereas unpacking features usually have unpack functions from across the different marketplaces\n                       {packCount > 0 && (\n                        <button className=\"bulk-btn unpack-btn\" onClick={handleBulkUnpack}>\n                          📦 Unpack ({packCount})\n                        </button>\n                      )} */}\n                      {pixelPackCount > 0 && (\n                        <button className=\"bulk-btn unpack-btn\" onClick={handleBulkUnpackPixelPacks}>\n                          📦 Unpack Pixelpacks ({pixelPackCount})\n                        </button>\n                      )}\n                    </>\n                  )\n                })()} \n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* Loading State */}\n      {loading && (\n        <div className=\"loading-container\">\n          <div className=\"loading-spinner\"></div>\n          <p>Loading your NFTs...</p>\n        </div>\n      )}\n\n      {/* Inventory Grid */}\n      {!loading && (\n        <>\n          <div className=\"inventory-page-stats\">\n            <p>{filteredCount} NFTs found</p>\n          </div>\n          \n          {inventory.length > 0 ? (\n            <>\n              <div className=\"inventory-page-grid\">\n                {currentItems.map((nft) => (\n                  <NFTCard\n                    key={nft.asset_id}\n                    nft={nft}\n                    selectedNFTs={selectedItems}\n                    isSelected={selectedItems.has(nft.asset_id)}\n                    settings={settings}\n                    dropdownOpen={dropdownOpen}\n                    onNFTClick={handleNFTClick}\n                    onCollectionClick={handleCollectionClick}\n                    onSchemaClick={handleSchemaClick}\n                    onToggleSelection={toggleItemSelection}\n                    onDropdownToggle={(assetId) => setDropdownOpen(dropdownOpen === assetId ? null : assetId)}\n                    onListingOpen={(nft) => {\n                      setActionNFT(nft)\n                      setListingModalOpen(true)\n                    }}\n                    onTransferOpen={(nft) => {\n                      setActionNFT(nft)\n                      setTransferModalOpen(true)\n                    }}\n                    onBurnOpen={(nft) => {\n                      setActionNFT(nft)\n                      setBurnModalOpen(true)\n                    }}\n                    onAuctionOpen={(nft) => {\n                       setActionNFT(nft)\n                       setShowAuctionModal(true)\n                       setDropdownOpen(null)\n                     }}\n                    onRecyclePixal={(nft) => {\n                      handleRecyclePixal(nft)\n                      setDropdownOpen(null)\n                    }}\n                    onImageZoom={handleMediaZoom}\n                    onCraftingOpen={(nft) => {\n                      handleCraftingOpen(nft)\n                      setDropdownOpen(null)\n                    }}\n                    onViewOffers={(nft) => {\n                      handleViewOffers(nft)\n                      setDropdownOpen(null)\n                    }}\n                    onUnpackPixelPack={(nft) => {\n                      handleUnpackPixelPack(nft)\n                      setDropdownOpen(null)\n                    }}\n                    onStakeOpen={(nft) => {\n                      handleStakeOpen(nft)\n                      setDropdownOpen(null)\n                    }}\n                    onTokenizePixal={(nft) => {\n                      handleTokenizePixal(nft)\n                      setDropdownOpen(null)\n                    }}\n                  />\n                ))}\n              </div>\n              \n              {/* Pagination Controls */}\n              {totalPages > 1 && (\n                <div className=\"pagination-controls\">\n                  <button \n                    className=\"pagination-btn\" \n                    onClick={goToPrevPage}\n                    disabled={currentPage === 1}\n                  >\n                    ← Previous\n                  </button>\n                  \n                  <div className=\"pagination-info\">\n                    <span>Page {currentPage} of {totalPages}</span>\n                    <span className=\"pagination-items\">({filteredCount} total items)</span>\n                  </div>\n                  \n                  <button \n                    className=\"pagination-btn\" \n                    onClick={goToNextPage}\n                    disabled={currentPage === totalPages}\n                  >\n                    Next →\n                  </button>\n                </div>\n              )}\n            </>\n          ) : (\n            <div className=\"empty-inventory\">\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" className=\"empty-icon\">\n                <path d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M9 1v6m6-6v6\"></path>\n              </svg>\n              <h3>No NFTs Found</h3>\n              <p>You don't have any {filter === 'all' ? 'Pixel Journey' : filter} NFTs yet.</p>\n              <p>Visit the marketplace to start collecting!</p>\n              \n              {/* Call-to-action buttons for specific categories */}\n              {(filter === 'waxrock' || filter === 'pixals' || filter === 'ingredients') && (\n                <div className=\"empty-inventory-cta\" style={{ marginTop: '20px' }}>\n                  <button \n                    className=\"cta-button\"\n                    onClick={() => {\n                      const categoryMap: Record<string, string> = {\n                        'waxrock': 'waxrocks',\n                        'pixals': 'pixals', \n                        'ingredients': 'ingredients'\n                      }\n                      const marketplaceCategory = categoryMap[filter]\n                      navigate(`/marketplace?category=${marketplaceCategory}`)\n                    }}\n                    style={{\n                      background: 'linear-gradient(45deg, #4ecdc4, #45b7d1)',\n                      border: 'none',\n                      padding: '12px 24px',\n                      borderRadius: '25px',\n                      color: 'white',\n                      fontSize: '16px',\n                      fontWeight: '600',\n                      cursor: 'pointer',\n                      transition: 'all 0.3s ease',\n                      boxShadow: '0 4px 15px rgba(78, 205, 196, 0.3)'\n                    }}\n                    onMouseOver={(e) => {\n                      e.currentTarget.style.transform = 'translateY(-2px)'\n                      e.currentTarget.style.boxShadow = '0 6px 20px rgba(78, 205, 196, 0.4)'\n                    }}\n                    onMouseOut={(e) => {\n                      e.currentTarget.style.transform = 'translateY(0)'\n                      e.currentTarget.style.boxShadow = '0 4px 15px rgba(78, 205, 196, 0.3)'\n                    }}\n                  >\n                    🛒 Browse {filter === 'waxrock' ? 'WaxRock' : filter.charAt(0).toUpperCase() + filter.slice(1)} Marketplace\n                  </button>\n                </div>\n              )}\n            </div>\n          )}\n\n\n\n          {/* Load More Button - Always show pagination controls */}\n          {inventory.length > 0 && (\n            <div className=\"load-more-container\">\n              {hasMore ? (\n                <>\n                  <button \n                    className=\"load-more-btn\"\n                    onClick={loadMoreItems}\n                    disabled={loadingMore || loadingAll}\n                  >\n                    {loadingMore ? 'Loading...' : 'Load More NFTs'}\n                  </button>\n                  <button \n                    className=\"load-more-btn load-all-btn\"\n                    onClick={loadAllItems}\n                    disabled={loadingMore || loadingAll}\n                    style={{ marginLeft: '10px', backgroundColor: 'var(--success-color)' }}\n                  >\n                    {loadingAll ? 'Loading All...' : 'Load All NFTs'}\n                  </button>\n                </>\n              ) : (\n                <div className=\"pagination-info\">\n                  <p>📄 Page {currentPage} - All NFTs loaded ({inventory.length} total)</p>\n                  <p style={{ fontSize: '0.9em', color: 'var(--text-secondary)', marginTop: '5px' }}>No more items to load</p>\n                </div>\n              )}\n            </div>\n          )}\n        </>\n      )}\n\n      {/* NFT Details Modal */}\n      <NFTDetailsModal \n        nft={actionNFT ? {\n          sale_id: '',\n          asset_id: actionNFT.asset_id,\n          name: actionNFT.name,\n          image: actionNFT.img,\n          video: actionNFT.video,\n          price: 'Not for sale',\n          seller: account || '',\n          collection: actionNFT.collection.collection_name,\n          schema: actionNFT.schema.schema_name,\n          template_mint: actionNFT.mint_number,\n          max_supply: actionNFT.template.max_supply,\n          traits: actionNFT.data\n        } : null}\n        isOpen={isModalOpen}\n        onClose={() => setIsModalOpen(false)}\n      />\n\n      <ListingModal \n        nft={actionNFT}\n        isOpen={listingModalOpen}\n        onClose={() => {\n          setListingModalOpen(false)\n          setActionNFT(null)\n        }}\n        onSuccess={() => {\n          loadInventory()\n        }}\n      />\n\n      <TransferModal \n        nft={actionNFT}\n        isOpen={transferModalOpen}\n        onClose={() => {\n          setTransferModalOpen(false)\n          setActionNFT(null)\n        }}\n        onSuccess={() => {\n          loadInventory()\n        }}\n      />\n\n      <BurnModal \n        nft={actionNFT}\n        isOpen={burnModalOpen}\n        onClose={() => {\n          setBurnModalOpen(false)\n          setActionNFT(null)\n        }}\n        onSuccess={() => {\n          loadInventory()\n        }}\n      />\n\n      <CraftingModal\n        isOpen={craftingModalOpen}\n        onClose={() => {\n          setCraftingModalOpen(false)\n          setCraftingIngredient(null)\n        }}\n        ingredient={craftingIngredient}\n      />\n\n      <ViewOffersModal \n        nft={offersNFT}\n        isOpen={viewOffersModalOpen}\n        onClose={() => {\n          setViewOffersModalOpen(false)\n          setOffersNFT(null)\n        }}\n      />\n\n      <TokenizeFeeModal \n        nft={tokenizeNFT}\n        isOpen={tokenizeModalOpen}\n        onClose={() => {\n          setTokenizeModalOpen(false)\n          setTokenizeNFT(null)\n        }}\n        onSuccess={() => {\n          setTokenizeModalOpen(false)\n          setTokenizeNFT(null)\n          loadInventory()\n        }}\n      />\n\n      <BulkListingModal \n        nfts={inventory.filter(nft => selectedItems.has(nft.asset_id))}\n        isOpen={showBulkListingModal}\n        onClose={() => {\n          setShowBulkListingModal(false)\n        }}\n        onSuccess={() => {\n          setSelectedItems(new Set())\n          setIsMultiSelectMode(false)\n          loadInventory()\n        }}\n      />\n\n      <BulkTransferModal \n        nfts={inventory.filter(nft => selectedItems.has(nft.asset_id))}\n        isOpen={showBulkTransferModal}\n        onClose={() => {\n          setShowBulkTransferModal(false)\n        }}\n        onSuccess={() => {\n          setSelectedItems(new Set())\n          setIsMultiSelectMode(false)\n          loadInventory()\n        }}\n      />\n\n      <DistributeModal \n        nfts={inventory.filter(nft => selectedItems.has(nft.asset_id))}\n        isOpen={showBulkDistributeModal}\n        onClose={() => {\n          setShowBulkDistributeModal(false)\n        }}\n        onSuccess={() => {\n          setSelectedItems(new Set())\n          setIsMultiSelectMode(false)\n          loadInventory()\n        }}\n      />\n\n      <BulkBurnModal \n        nfts={inventory.filter(nft => selectedItems.has(nft.asset_id))}\n        isOpen={showBulkBurnModal}\n        onClose={() => {\n          setShowBulkBurnModal(false)\n        }}\n        onSuccess={() => {\n          setSelectedItems(new Set())\n          setIsMultiSelectMode(false)\n          loadInventory()\n        }}\n      />\n\n      <UnpackModal \n        selectedNFTs={inventory.filter(nft => selectedItems.has(nft.asset_id))}\n        isOpen={showUnpackModal}\n        onClose={() => {\n          setShowUnpackModal(false)\n        }}\n        userAccount={account || ''}\n        walletSession={session}\n        onUnpackComplete={() => {\n          setSelectedItems(new Set())\n          setIsMultiSelectMode(false)\n          loadInventory(1, false)\n          showSuccess('Packs unpacked successfully!')\n        }}\n      />\n\n      <BulkAuctionModal \n        nfts={inventory.filter(nft => selectedItems.has(nft.asset_id))}\n        isOpen={showBulkAuctionModal}\n        onClose={() => {\n          setShowBulkAuctionModal(false)\n        }}\n        onSuccess={() => {\n          setSelectedItems(new Set())\n          setIsMultiSelectMode(false)\n          loadInventory()\n        }}\n      />\n\n      {actionNFT && (\n        <BulkAuctionModal \n          nfts={[actionNFT]}\n          isOpen={showAuctionModal}\n          onClose={() => {\n            setShowAuctionModal(false)\n            setActionNFT(null)\n          }}\n          onSuccess={() => {\n            loadInventory()\n          }}\n        />\n      )}\n      \n      {/* Image Zoom Modal */}\n      {showImageZoom && zoomedImage && (\n        <div className=\"image-zoom-modal\" onClick={() => setShowImageZoom(false)}>\n          <div className=\"zoom-modal-content\" onClick={(e) => e.stopPropagation()}>\n            <button \n              className=\"zoom-modal-close\"\n              onClick={() => setShowImageZoom(false)}\n              aria-label=\"Close zoom modal\"\n            >\n              ×\n            </button>\n            {zoomedImage.type === 'video' ? (\n              <video \n                src={zoomedImage.url} \n                className=\"zoom-modal-video\"\n                controls\n                autoPlay\n                muted\n                loop\n              >\n                Your browser does not support the video tag.\n              </video>\n            ) : (\n              <img \n                src={zoomedImage.url} \n                alt={zoomedImage.name} \n                className=\"zoom-modal-image\"\n              />\n            )}\n            <div className=\"zoom-modal-title\">{zoomedImage.name}</div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n})\n\nexport default Inventory","import React, { useState } from 'react'\nimport '../css/truncated-text.css'\n\ninterface TruncatedTextProps {\n  text: string\n  maxLength?: number\n  className?: string\n}\n\nconst TruncatedText: React.FC<TruncatedTextProps> = React.memo(({ \n  text, \n  maxLength = 240, \n  className = '' \n}) => {\n  const [isExpanded, setIsExpanded] = useState(false)\n  \n  if (!text || text.length <= maxLength) {\n    return <span className={className}>{text}</span>\n  }\n  \n  const truncatedText = text.slice(0, maxLength).trim()\n  \n  return (\n    <span className={className}>\n      {isExpanded ? (\n        <>\n          {text}\n          <button \n            className=\"read-more-btn collapse-btn\"\n            onClick={(e) => {\n              e.preventDefault()\n              e.stopPropagation()\n              setIsExpanded(false)\n            }}\n          >\n            read less\n          </button>\n        </>\n      ) : (\n        <>\n          {truncatedText}\n          {truncatedText.endsWith('.') ? '' : '...'}\n          <button \n            className=\"read-more-btn expand-btn\"\n            onClick={(e) => {\n              e.preventDefault()\n              e.stopPropagation()\n              setIsExpanded(true)\n            }}\n          >\n            read more\n          </button>\n        </>\n      )}\n    </span>\n  )\n})\n\nTruncatedText.displayName = 'TruncatedText'\n\nexport default TruncatedText","// IPFS Rate Limiter Service to prevent 429 errors from gateways\nimport { logger } from './loggingService'\n\ninterface QueuedRequest {\n  url: string\n  resolve: (value: string) => void\n  reject: (error: Error) => void\n  retryCount: number\n  timestamp: number\n}\n\ninterface GatewayStats {\n  lastRequest: number\n  requestCount: number\n  errorCount: number\n  isBlocked: boolean\n  blockUntil: number\n}\n\nclass IPFSRateLimiter {\n  private requestQueue: QueuedRequest[] = []\n  private isProcessing = false\n  private gatewayStats = new Map<string, GatewayStats>()\n  \n  // Rate limiting configuration\n  private readonly MIN_REQUEST_INTERVAL = 200 // 200ms between requests\n  private readonly MAX_CONCURRENT_REQUESTS = 3\n  private readonly MAX_RETRIES = 3\n  private readonly GATEWAY_COOLDOWN = 30000 // 30 seconds cooldown for blocked gateways\n  private readonly REQUEST_TIMEOUT = 10000 // 10 second timeout\n  \n  private activeRequests = 0\n  private lastRequestTime = 0\n\n  /**\n   * Add a request to the queue with rate limiting\n   */\n  async requestImage(url: string): Promise<string> {\n    return new Promise((resolve, reject) => {\n      const queuedRequest: QueuedRequest = {\n        url,\n        resolve,\n        reject,\n        retryCount: 0,\n        timestamp: Date.now()\n      }\n      \n      this.requestQueue.push(queuedRequest)\n      this.processQueue()\n    })\n  }\n\n  /**\n   * Process the request queue with rate limiting\n   */\n  private async processQueue(): Promise<void> {\n    if (this.isProcessing || this.requestQueue.length === 0) {\n      return\n    }\n\n    this.isProcessing = true\n\n    while (this.requestQueue.length > 0 && this.activeRequests < this.MAX_CONCURRENT_REQUESTS) {\n      const request = this.requestQueue.shift()\n      if (!request) break\n\n      // Check if request is too old (timeout)\n      if (Date.now() - request.timestamp > this.REQUEST_TIMEOUT) {\n        request.reject(new Error('Request timeout in queue'))\n        continue\n      }\n\n      // Ensure minimum interval between requests\n      const timeSinceLastRequest = Date.now() - this.lastRequestTime\n      if (timeSinceLastRequest < this.MIN_REQUEST_INTERVAL) {\n        const delay = this.MIN_REQUEST_INTERVAL - timeSinceLastRequest\n        await this.delay(delay)\n      }\n\n      this.lastRequestTime = Date.now()\n      this.activeRequests++\n      \n      // Process request asynchronously\n      this.processRequest(request).finally(() => {\n        this.activeRequests--\n        // Continue processing queue\n        setTimeout(() => this.processQueue(), 0)\n      })\n    }\n\n    this.isProcessing = false\n  }\n\n  /**\n   * Process individual request with gateway selection and fallback\n   */\n  private async processRequest(request: QueuedRequest): Promise<void> {\n    try {\n      const gateway = this.selectBestGateway(request.url)\n      if (!gateway) {\n        throw new Error('No available gateways')\n      }\n\n      const result = await this.makeRequest(request.url, gateway)\n      this.updateGatewayStats(gateway, true)\n      request.resolve(result)\n      \n    } catch (error) {\n      const gateway = this.extractGateway(request.url)\n      if (gateway) {\n        this.updateGatewayStats(gateway, false)\n      }\n      \n      // Retry logic\n      if (request.retryCount < this.MAX_RETRIES) {\n        request.retryCount++\n        logger.warn(`Retrying IPFS request (${request.retryCount}/${this.MAX_RETRIES})`, 'IPFSRateLimiter', {\n          url: request.url,\n          error: error instanceof Error ? error.message : 'Unknown error'\n        })\n        \n        // Add delay before retry\n        await this.delay(1000 * request.retryCount)\n        \n        // Re-queue the request\n        this.requestQueue.unshift(request)\n      } else {\n        const finalError = error instanceof Error ? error : new Error(String(error))\n        logger.error('IPFS request failed after all retries', 'IPFSRateLimiter', finalError, {\n          url: request.url\n        })\n        request.reject(finalError)\n      }\n    }\n  }\n\n  /**\n   * Make the actual HTTP request with timeout\n   */\n  private async makeRequest(originalUrl: string, gateway: string): Promise<string> {\n    const hash = this.extractIPFSHash(originalUrl)\n    if (!hash) {\n      throw new Error('Invalid IPFS URL')\n    }\n\n    const url = `${gateway}${hash}`\n    \n    return new Promise((resolve, reject) => {\n      const img = new Image()\n      const timeout = setTimeout(() => {\n        img.onload = null\n        img.onerror = null\n        reject(new Error('Request timeout'))\n      }, this.REQUEST_TIMEOUT)\n\n      img.onload = () => {\n        clearTimeout(timeout)\n        resolve(url)\n      }\n\n      img.onerror = (error) => {\n        clearTimeout(timeout)\n        reject(new Error(`Failed to load image: ${error}`))\n      }\n\n      img.src = url\n    })\n  }\n\n  /**\n   * Select the best available gateway based on stats\n   */\n  private selectBestGateway(_url: string): string | null {\n    // Import gateways from config\n    const gateways = [\n      'https://ipfs.io/ipfs/',\n      'https://gateway.pinata.cloud/ipfs/',\n      'https://dweb.link/ipfs/',\n      'https://cf-ipfs.com/ipfs/'\n    ]\n\n    const now = Date.now()\n    const availableGateways = gateways.filter(gateway => {\n      const stats = this.gatewayStats.get(gateway)\n      if (!stats) return true\n      \n      // Skip blocked gateways that are still in cooldown\n      if (stats.isBlocked && now < stats.blockUntil) {\n        return false\n      }\n      \n      // Unblock gateway if cooldown period has passed\n      if (stats.isBlocked && now >= stats.blockUntil) {\n        stats.isBlocked = false\n        stats.errorCount = 0\n      }\n      \n      return true\n    })\n\n    if (availableGateways.length === 0) {\n      return null\n    }\n\n    // Sort by success rate (fewer errors = better)\n    availableGateways.sort((a, b) => {\n      const statsA = this.gatewayStats.get(a)\n      const statsB = this.gatewayStats.get(b)\n      \n      const errorRateA = statsA ? statsA.errorCount / Math.max(statsA.requestCount, 1) : 0\n      const errorRateB = statsB ? statsB.errorCount / Math.max(statsB.requestCount, 1) : 0\n      \n      return errorRateA - errorRateB\n    })\n\n    return availableGateways[0]\n  }\n\n  /**\n   * Update gateway statistics\n   */\n  private updateGatewayStats(gateway: string, success: boolean): void {\n    let stats = this.gatewayStats.get(gateway)\n    if (!stats) {\n      stats = {\n        lastRequest: 0,\n        requestCount: 0,\n        errorCount: 0,\n        isBlocked: false,\n        blockUntil: 0\n      }\n      this.gatewayStats.set(gateway, stats)\n    }\n\n    stats.lastRequest = Date.now()\n    stats.requestCount++\n\n    if (!success) {\n      stats.errorCount++\n      \n      // Block gateway if error rate is too high\n      const errorRate = stats.errorCount / stats.requestCount\n      if (errorRate > 0.5 && stats.requestCount >= 5) {\n        stats.isBlocked = true\n        stats.blockUntil = Date.now() + this.GATEWAY_COOLDOWN\n        \n        logger.warn(`Blocking gateway due to high error rate`, 'IPFSRateLimiter', {\n          gateway,\n          errorRate,\n          requestCount: stats.requestCount,\n          errorCount: stats.errorCount\n        })\n      }\n    }\n  }\n\n  /**\n   * Extract IPFS hash from URL\n   */\n  private extractIPFSHash(url: string): string | null {\n    const match = url.match(/\\/ipfs\\/([a-zA-Z0-9]+)/)\n    return match ? match[1] : null\n  }\n\n  /**\n   * Extract gateway from URL\n   */\n  private extractGateway(url: string): string | null {\n    const match = url.match(/(https?:\\/\\/[^\\/]+\\/ipfs\\/)/)\n    return match ? match[1] : null\n  }\n\n  /**\n   * Utility delay function\n   */\n  private delay(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms))\n  }\n\n  /**\n   * Get queue status for debugging\n   */\n  getStatus(): {\n    queueLength: number\n    activeRequests: number\n    gatewayStats: Record<string, GatewayStats>\n  } {\n    return {\n      queueLength: this.requestQueue.length,\n      activeRequests: this.activeRequests,\n      gatewayStats: Object.fromEntries(this.gatewayStats)\n    }\n  }\n\n  /**\n   * Clear all queued requests and reset stats\n   */\n  reset(): void {\n    this.requestQueue.forEach(request => {\n      request.reject(new Error('Rate limiter reset'))\n    })\n    this.requestQueue = []\n    this.gatewayStats.clear()\n    this.activeRequests = 0\n    this.isProcessing = false\n  }\n}\n\n// Export singleton instance\nexport const ipfsRateLimiter = new IPFSRateLimiter()\n\n// Export utility function for easy use\nexport const loadIPFSImageWithRateLimit = (url: string): Promise<string> => {\n  return ipfsRateLimiter.requestImage(url)\n}","// Image service for handling fallback images and image loading\nimport { logger } from './loggingService'\nimport { loadIPFSImageWithRateLimit } from './ipfsRateLimiter'\n\nexport interface ImageConfig {\n  width?: number\n  height?: number\n  backgroundColor?: string\n  textColor?: string\n  text?: string\n  type?: 'nft' | 'collection' | 'avatar' | 'token' | 'generic'\n}\n\nexport interface ImageLoadResult {\n  success: boolean\n  src: string\n  fallbackUsed: boolean\n  error?: Error\n}\n\nclass ImageService {\n  private imageCache = new Map<string, string>()\n  private loadingPromises = new Map<string, Promise<ImageLoadResult>>()\n  private readonly MAX_CACHE_SIZE = 500\n  \n  /**\n   * Generate SVG fallback image\n   */\n  generateFallbackSVG(config: ImageConfig = {}): string {\n    const {\n      width = 150,\n      height = 150,\n      backgroundColor = '#f3f4f6',\n      textColor = '#6b7280',\n      text,\n      type = 'generic'\n    } = config\n    \n    const displayText = text || this.getDefaultText(type)\n    const fontSize = Math.min(width, height) * 0.15\n    \n    const svg = `\n      <svg width=\"${width}\" height=\"${height}\" xmlns=\"http://www.w3.org/2000/svg\">\n        <rect width=\"100%\" height=\"100%\" fill=\"${backgroundColor}\"/>\n        <g transform=\"translate(${width/2}, ${height/2})\">\n          ${this.getIconForType(type, Math.min(width, height) * 0.3, textColor)}\n          <text \n            x=\"0\" \n            y=\"${fontSize * 1.5}\" \n            font-family=\"system-ui, -apple-system, sans-serif\" \n            font-size=\"${fontSize}\" \n            font-weight=\"500\" \n            fill=\"${textColor}\" \n            text-anchor=\"middle\" \n            dominant-baseline=\"middle\"\n          >\n            ${displayText}\n          </text>\n        </g>\n      </svg>\n    `\n    \n    return `data:image/svg+xml;base64,${btoa(svg)}`\n  }\n  \n  /**\n   * Get default text for image type\n   */\n  private getDefaultText(type: string): string {\n    switch (type) {\n      case 'nft': return 'NFT'\n      case 'collection': return 'Collection'\n      case 'avatar': return 'Avatar'\n      case 'token': return 'Token'\n      default: return 'Image'\n    }\n  }\n  \n  /**\n   * Get SVG icon for image type\n   */\n  private getIconForType(type: string, size: number, color: string): string {\n    const iconSize = size\n    const strokeWidth = Math.max(1, iconSize * 0.08)\n    \n    switch (type) {\n      case 'nft':\n        return `\n          <rect \n            x=\"${-iconSize/2}\" \n            y=\"${-iconSize/2}\" \n            width=\"${iconSize}\" \n            height=\"${iconSize}\" \n            rx=\"${iconSize * 0.1}\" \n            fill=\"none\" \n            stroke=\"${color}\" \n            stroke-width=\"${strokeWidth}\"\n          />\n          <circle \n            cx=\"0\" \n            cy=\"${-iconSize * 0.15}\" \n            r=\"${iconSize * 0.15}\" \n            fill=\"${color}\"\n          />\n        `\n      case 'collection':\n        return `\n          <rect \n            x=\"${-iconSize/2}\" \n            y=\"${-iconSize/2}\" \n            width=\"${iconSize * 0.7}\" \n            height=\"${iconSize * 0.7}\" \n            rx=\"${iconSize * 0.05}\" \n            fill=\"none\" \n            stroke=\"${color}\" \n            stroke-width=\"${strokeWidth}\"\n          />\n          <rect \n            x=\"${-iconSize/2 + iconSize * 0.15}\" \n            y=\"${-iconSize/2 + iconSize * 0.15}\" \n            width=\"${iconSize * 0.7}\" \n            height=\"${iconSize * 0.7}\" \n            rx=\"${iconSize * 0.05}\" \n            fill=\"none\" \n            stroke=\"${color}\" \n            stroke-width=\"${strokeWidth}\"\n          />\n        `\n      case 'avatar':\n        return `\n          <circle \n            cx=\"0\" \n            cy=\"${-iconSize * 0.1}\" \n            r=\"${iconSize * 0.25}\" \n            fill=\"none\" \n            stroke=\"${color}\" \n            stroke-width=\"${strokeWidth}\"\n          />\n          <path \n            d=\"M ${-iconSize * 0.35} ${iconSize * 0.3} Q 0 ${iconSize * 0.1} ${iconSize * 0.35} ${iconSize * 0.3}\" \n            fill=\"none\" \n            stroke=\"${color}\" \n            stroke-width=\"${strokeWidth}\"\n          />\n        `\n      case 'token':\n        return `\n          <circle \n            cx=\"0\" \n            cy=\"0\" \n            r=\"${iconSize * 0.4}\" \n            fill=\"none\" \n            stroke=\"${color}\" \n            stroke-width=\"${strokeWidth}\"\n          />\n          <text \n            x=\"0\" \n            y=\"${iconSize * 0.1}\" \n            font-family=\"system-ui, -apple-system, sans-serif\" \n            font-size=\"${iconSize * 0.3}\" \n            font-weight=\"bold\" \n            fill=\"${color}\" \n            text-anchor=\"middle\" \n            dominant-baseline=\"middle\"\n          >\n            $\n          </text>\n        `\n      default:\n        return `\n          <rect \n            x=\"${-iconSize/2}\" \n            y=\"${-iconSize/2}\" \n            width=\"${iconSize}\" \n            height=\"${iconSize}\" \n            rx=\"${iconSize * 0.1}\" \n            fill=\"none\" \n            stroke=\"${color}\" \n            stroke-width=\"${strokeWidth}\"\n          />\n          <path \n            d=\"M ${-iconSize * 0.2} ${-iconSize * 0.1} L ${iconSize * 0.2} ${-iconSize * 0.1} L 0 ${iconSize * 0.2} Z\" \n            fill=\"${color}\"\n          />\n        `\n    }\n  }\n  \n  /**\n   * Load image with fallback support\n   */\n  async loadImage(src: string, config: ImageConfig = {}): Promise<ImageLoadResult> {\n    if (!src) {\n      return {\n        success: false,\n        src: this.generateFallbackSVG(config),\n        fallbackUsed: true\n      }\n    }\n    \n    // Check cache first\n    const cached = this.imageCache.get(src)\n    if (cached) {\n      return {\n        success: true,\n        src: cached,\n        fallbackUsed: false\n      }\n    }\n    \n    // Check if already loading\n    const existingPromise = this.loadingPromises.get(src)\n    if (existingPromise) {\n      return existingPromise\n    }\n    \n    // Create loading promise\n    const loadingPromise = this.performImageLoad(src, config)\n    this.loadingPromises.set(src, loadingPromise)\n    \n    try {\n      const result = await loadingPromise\n      return result\n    } finally {\n      this.loadingPromises.delete(src)\n    }\n  }\n  \n  /**\n   * Perform actual image loading\n   */\n  private async performImageLoad(src: string, config: ImageConfig): Promise<ImageLoadResult> {\n    // Check if this is an IPFS URL that needs rate limiting\n    if (this.isIPFSUrl(src)) {\n      try {\n        const rateLimitedUrl = await loadIPFSImageWithRateLimit(src)\n        this.addToCache(src, rateLimitedUrl)\n        return {\n          success: true,\n          src: rateLimitedUrl,\n          fallbackUsed: false\n        }\n      } catch (error) {\n        logger.warn(`IPFS rate-limited load failed: ${src}`, 'ImageService', { error })\n        return {\n          success: false,\n          src: this.generateFallbackSVG(config),\n          fallbackUsed: true,\n          error: error instanceof Error ? error : new Error('IPFS load failed')\n        }\n      }\n    }\n\n    // For non-IPFS URLs, use standard loading\n    return new Promise((resolve) => {\n      const img = new Image()\n      const timeout = setTimeout(() => {\n        img.onload = null\n        img.onerror = null\n        resolve({\n          success: false,\n          src: this.generateFallbackSVG(config),\n          fallbackUsed: true,\n          error: new Error('Image load timeout')\n        })\n      }, 10000) // 10 second timeout\n      \n      img.onload = () => {\n        clearTimeout(timeout)\n        this.addToCache(src, src)\n        resolve({\n          success: true,\n          src,\n          fallbackUsed: false\n        })\n      }\n      \n      img.onerror = (error) => {\n        clearTimeout(timeout)\n        const fallbackSrc = this.generateFallbackSVG(config)\n        logger.warn(`Failed to load image: ${src}`, 'ImageService', { error })\n        resolve({\n          success: false,\n          src: fallbackSrc,\n          fallbackUsed: true,\n          error: error instanceof Error ? error : new Error('Image load failed')\n        })\n      }\n      \n      img.src = src\n    })\n  }\n  \n  /**\n   * Add image to cache\n   */\n  private addToCache(key: string, value: string): void {\n    // Implement LRU cache behavior\n    if (this.imageCache.size >= this.MAX_CACHE_SIZE) {\n      const firstKey = this.imageCache.keys().next().value\n      if (firstKey) {\n        this.imageCache.delete(firstKey)\n      }\n    }\n    \n    this.imageCache.set(key, value)\n  }\n  \n  /**\n   * Preload multiple images\n   */\n  async preloadImages(urls: string[], config: ImageConfig = {}): Promise<ImageLoadResult[]> {\n    const promises = urls.map(url => this.loadImage(url, config))\n    return Promise.all(promises)\n  }\n  \n  /**\n   * Get optimized image URL with fallback\n   */\n  getOptimizedImageUrl(src: string, config: ImageConfig = {}): string {\n    if (!src) {\n      return this.generateFallbackSVG(config)\n    }\n    \n    // Check if it's already a data URL or SVG\n    if (src.startsWith('data:') || src.startsWith('blob:')) {\n      return src\n    }\n    \n    // For IPFS URLs, use gateway optimization\n    if (src.includes('ipfs.io') || src.includes('ipfs://')) {\n      return this.optimizeIPFSUrl(src)\n    }\n    \n    return src\n  }\n  \n  /**\n   * Check if URL is an IPFS URL\n   */\n  private isIPFSUrl(src: string): boolean {\n    return src.includes('/ipfs/') || src.startsWith('ipfs://') || src.includes('gateway.pinata.cloud')\n  }\n\n  /**\n   * Optimize IPFS URLs for better loading\n   */\n  private optimizeIPFSUrl(src: string): string {\n    // For IPFS URLs, we'll let the rate limiter handle gateway selection\n    // This method is now mainly for non-rate-limited scenarios\n    if (this.isIPFSUrl(src)) {\n      return src // Let rate limiter handle optimization\n    }\n    \n    return src\n  }\n  \n  /**\n   * Clear image cache\n   */\n  clearCache(): void {\n    this.imageCache.clear()\n    this.loadingPromises.clear()\n  }\n  \n  /**\n   * Get cache statistics\n   */\n  getCacheStats(): { size: number; maxSize: number; hitRate: number } {\n    return {\n      size: this.imageCache.size,\n      maxSize: this.MAX_CACHE_SIZE,\n      hitRate: 0 // Would need to track hits/misses for accurate calculation\n    }\n  }\n}\n\n// Export singleton instance\nexport const imageService = new ImageService()\n\n// Export utility functions\nexport const createFallbackImage = (config: ImageConfig = {}) => {\n  return imageService.generateFallbackSVG(config)\n}\n\nexport const loadImageWithFallback = (src: string, config: ImageConfig = {}) => {\n  return imageService.loadImage(src, config)\n}","import React, { useState, useEffect, useRef } from 'react'\nimport { imageService, type ImageConfig, type ImageLoadResult } from '../services/imageService'\n\ninterface FallbackImageProps {\n  src?: string\n  alt: string\n  className?: string\n  style?: React.CSSProperties\n  width?: number\n  height?: number\n  type?: 'nft' | 'collection' | 'avatar' | 'token' | 'generic'\n  fallbackText?: string\n  backgroundColor?: string\n  textColor?: string\n  onLoad?: (result: ImageLoadResult) => void\n  onError?: (error: Error) => void\n  loading?: 'lazy' | 'eager'\n  placeholder?: boolean\n}\n\nconst FallbackImage: React.FC<FallbackImageProps> = ({\n  src,\n  alt,\n  className = '',\n  style = {},\n  width,\n  height,\n  type = 'generic',\n  fallbackText,\n  backgroundColor,\n  textColor,\n  onLoad,\n  onError,\n  loading = 'lazy',\n  placeholder = true\n}) => {\n  const [imageSrc, setImageSrc] = useState<string>('')\n  const [isLoading, setIsLoading] = useState(true)\n  const [loadResult, setLoadResult] = useState<ImageLoadResult | null>(null)\n  const imgRef = useRef<HTMLImageElement>(null)\n  const loadingRef = useRef<boolean>(false)\n\n  useEffect(() => {\n    if (loadingRef.current) return\n    loadingRef.current = true\n    \n    const loadImage = async () => {\n      setIsLoading(true)\n      \n      const config: ImageConfig = {\n        width,\n        height,\n        type,\n        text: fallbackText,\n        backgroundColor,\n        textColor\n      }\n      \n      try {\n        const result = await imageService.loadImage(src || '', config)\n        setImageSrc(result.src)\n        setLoadResult(result)\n        \n        if (onLoad) {\n          onLoad(result)\n        }\n        \n        if (!result.success && result.error && onError) {\n          onError(result.error)\n        }\n      } catch (error) {\n        const fallbackSrc = imageService.generateFallbackSVG(config)\n        setImageSrc(fallbackSrc)\n        setLoadResult({\n          success: false,\n          src: fallbackSrc,\n          fallbackUsed: true,\n          error: error as Error\n        })\n        \n        if (onError) {\n          onError(error as Error)\n        }\n      } finally {\n        setIsLoading(false)\n        loadingRef.current = false\n      }\n    }\n    \n    loadImage()\n  }, [src, width, height, type, fallbackText, backgroundColor, textColor, onLoad, onError])\n\n  const handleImageLoad = () => {\n    setIsLoading(false)\n  }\n\n  const handleImageError = () => {\n    if (loadResult && !loadResult.fallbackUsed) {\n      // If the original image failed and we haven't used fallback yet\n      const config: ImageConfig = {\n        width,\n        height,\n        type,\n        text: fallbackText,\n        backgroundColor,\n        textColor\n      }\n      const fallbackSrc = imageService.generateFallbackSVG(config)\n      setImageSrc(fallbackSrc)\n      setLoadResult({\n        success: false,\n        src: fallbackSrc,\n        fallbackUsed: true\n      })\n    }\n    setIsLoading(false)\n  }\n\n  const combinedStyle: React.CSSProperties = {\n    ...style,\n    ...(width && { width }),\n    ...(height && { height })\n  }\n\n  const combinedClassName = `fallback-image ${className} ${\n    isLoading ? 'loading' : ''\n  } ${\n    loadResult?.fallbackUsed ? 'fallback-used' : ''\n  }`.trim()\n\n  return (\n    <div className=\"fallback-image-container\" style={{ position: 'relative', display: 'inline-block' }}>\n      {isLoading && placeholder && (\n        <div \n          className=\"image-placeholder\"\n          style={{\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            width: width || '100%',\n            height: height || '100%',\n            backgroundColor: backgroundColor || '#f3f4f6',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            borderRadius: '4px',\n            zIndex: 1\n          }}\n        >\n          <div className=\"loading-spinner\" style={{\n            width: '20px',\n            height: '20px',\n            border: '2px solid #e5e7eb',\n            borderTop: '2px solid #3b82f6',\n            borderRadius: '50%',\n            animation: 'spin 1s linear infinite'\n          }} />\n        </div>\n      )}\n      \n      <img\n        ref={imgRef}\n        src={imageSrc || ''}\n        alt={alt}\n        className={combinedClassName}\n        style={{\n          ...combinedStyle,\n          opacity: isLoading ? 0 : 1,\n          transition: 'opacity 0.3s ease'\n        }}\n        loading={loading}\n        onLoad={handleImageLoad}\n        onError={handleImageError}\n      />\n      \n      <style>{`\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n        \n        .fallback-image {\n          display: block;\n          max-width: 100%;\n          height: auto;\n        }\n        \n        .fallback-image.loading {\n          opacity: 0;\n        }\n        \n        .fallback-image.fallback-used {\n          filter: grayscale(0.1);\n        }\n        \n        .image-placeholder {\n          background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\n          background-size: 200% 100%;\n          animation: shimmer 1.5s infinite;\n        }\n        \n        @keyframes shimmer {\n          0% { background-position: -200% 0; }\n          100% { background-position: 200% 0; }\n        }\n      `}</style>\n    </div>\n  )\n}\n\nexport default FallbackImage\n\n// Export utility component for common use cases\nexport const NFTImage: React.FC<Omit<FallbackImageProps, 'type'>> = (props) => (\n  <FallbackImage {...props} type=\"nft\" />\n)\n\nexport const CollectionImage: React.FC<Omit<FallbackImageProps, 'type'>> = (props) => (\n  <FallbackImage {...props} type=\"collection\" />\n)\n\nexport const AvatarImage: React.FC<Omit<FallbackImageProps, 'type'>> = (props) => (\n  <FallbackImage {...props} type=\"avatar\" />\n)\n\nexport const TokenImage: React.FC<Omit<FallbackImageProps, 'type'>> = (props) => (\n  <FallbackImage {...props} type=\"token\" />\n)","import React, { useState } from 'react'\nimport { useWallet } from '../hooks/useWallet'\nimport { useNotifications } from '../hooks/useNotifications'\nimport { wharfKitService, WharfKitService } from '../services/wharfkit'\nimport { apiService } from '../services/api'\nimport { log } from '../services/loggingService'\nimport '../css/collection-tier-modal.css'\n\ninterface TierOption {\n  id: string\n  name: string\n  cost: number\n  costFormatted: string\n  icon: string\n  benefits: string[]\n  description: string\n}\n\ninterface CollectionTierModalProps {\n  isOpen: boolean\n  onClose: () => void\n}\n\nconst TIER_OPTIONS: TierOption[] = [\n  {\n    id: 'bronze',\n    name: 'Bronze',\n    cost: 5000000,\n    costFormatted: '5M PXJ',\n    icon: '🥉',\n    description: 'Perfect for new collections getting started',\n    benefits: [\n      'Basic marketplace listing',\n      'Collection verification badge',\n      'Community Discord access',\n      'Monthly featured spot rotation'\n    ]\n  },\n  {\n    id: 'silver',\n    name: 'Silver',\n    cost: 15000000,\n    costFormatted: '15M PXJ',\n    icon: '🥈',\n    description: 'Enhanced visibility and analytics access',\n    benefits: [\n      'All Bronze benefits',\n      'Priority marketplace placement',\n      'Weekly newsletter mentions',\n      'Custom collection banner',\n      'Analytics dashboard access'\n    ]\n  },\n  {\n    id: 'gold',\n    name: 'Gold',\n    cost: 30000000,\n    costFormatted: '30M PXJ',\n    icon: '🥇',\n    description: 'Premium promotion and exclusive events',\n    benefits: [\n      'All Silver benefits',\n      'Homepage featured carousel',\n      'Social media promotion',\n      'Exclusive events participation',\n      'Direct community manager contact'\n    ]\n  },\n  {\n    id: 'platinum',\n    name: 'Platinum',\n    cost: 50000000,\n    costFormatted: '50M PXJ',\n    icon: '💎',\n    description: 'Ultimate tier with maximum benefits',\n    benefits: [\n      'All Gold benefits',\n      'Permanent homepage presence',\n      'Dedicated marketing campaigns',\n      'WaxRock Council consideration',\n      'Platform governance participation',\n      'White-label marketplace options'\n    ]\n  }\n]\n\nconst CollectionTierModal: React.FC<CollectionTierModalProps> = ({ isOpen, onClose }) => {\n  const [selectedTier, setSelectedTier] = useState<string>('')\n  const [collectionName, setCollectionName] = useState('')\n  const [isProcessing, setIsProcessing] = useState(false)\n  const [userBalance, setUserBalance] = useState<number | null>(null)\n  const [balanceLoading, setBalanceLoading] = useState(false)\n  \n  const { session, isConnected } = useWallet()\n  const { showSuccess, showError } = useNotifications()\n\n  // Fetch user's PXJ balance when modal opens\n  React.useEffect(() => {\n    if (isOpen && isConnected && session) {\n      fetchUserBalance()\n    }\n  }, [isOpen, isConnected, session])\n\n  const fetchUserBalance = async () => {\n    if (!session) return\n    \n    setBalanceLoading(true)\n    try {\n      const pxjBalance = await apiService.getWaxCurrencyBalance(\n        WharfKitService.safeGetActor(session), \n        'token.pxj', \n        'PXJ'\n      )\n      const balance = pxjBalance.length > 0 ? parseFloat(pxjBalance[0].balance.split(' ')[0]) : 0\n      setUserBalance(balance)\n    } catch (error) {\n      log.error('Failed to fetch PXJ balance', 'CollectionTierModal', error as Error)\n      setUserBalance(0)\n    } finally {\n      setBalanceLoading(false)\n    }\n  }\n\n  const handleTierPayment = async () => {\n    if (!selectedTier || !collectionName.trim()) {\n      showError('Please select a tier and enter a collection name')\n      return\n    }\n\n    if (!isConnected || !session) {\n      showError('Please connect your wallet to proceed with payment')\n      return\n    }\n\n    const tier = TIER_OPTIONS.find(t => t.id === selectedTier)\n    if (!tier) {\n      showError('Invalid tier selected')\n      return\n    }\n\n    if (userBalance !== null && userBalance < tier.cost) {\n      showError(`Insufficient PXJ balance. You need at least ${tier.costFormatted} to upgrade to ${tier.name} tier.`)\n      return\n    }\n\n    setIsProcessing(true)\n    \n    try {\n      const memo = `upgrade-collection:${collectionName.toUpperCase()}:${tier.id.toUpperCase()}`\n      \n      const transferAction = {\n        account: 'token.pxj',\n        name: 'transfer',\n        authorization: [{\n          actor: WharfKitService.safeGetActor(session),\n          permission: 'active'\n        }],\n        data: {\n          from: WharfKitService.safeGetActor(session),\n          to: 'market.pxj',\n          quantity: `${tier.cost.toFixed(8)} PXJ`,\n          memo: memo\n        }\n      }\n\n      await wharfKitService.transact([transferAction])\n      \n      showSuccess(`Successfully upgraded ${collectionName} to ${tier.name} tier! Your upgrade will be processed by our team.`)\n      onClose()\n      setSelectedTier('')\n      setCollectionName('')\n      \n    } catch (error) {\n      log.error('Tier upgrade payment failed', 'CollectionTierModal', error instanceof Error ? error : new Error(String(error)))\n      showError(`Payment failed: ${error instanceof Error ? error.message : 'Unknown error'}`)\n    } finally {\n      setIsProcessing(false)\n    }\n  }\n\n  const selectedTierData = TIER_OPTIONS.find(t => t.id === selectedTier)\n  const canAfford = (tier: TierOption) => userBalance !== null && userBalance >= tier.cost\n\n  if (!isOpen) return null\n\n  return (\n    <div className=\"modal-backdrop\" onClick={onClose}>\n      <div className=\"modal-content collection-tier-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h2 className=\"modal-title\">Upgrade Collection Tier</h2>\n          <button className=\"modal-close\" onClick={onClose}>\n            <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n              <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n            </svg>\n          </button>\n        </div>\n\n        <div className=\"modal-body\">\n          {/* Balance Display */}\n          <div className=\"balance-section\">\n            <div className=\"balance-info\">\n              <span className=\"balance-label\">Your PXJ Balance:</span>\n              <span className=\"collection-balance-amount\">\n                {balanceLoading ? (\n                  <span className=\"loading-text\">Loading...</span>\n                ) : (\n                  <span className={userBalance !== null && userBalance > 0 ? 'balance-positive' : 'balance-zero'}>\n                    {userBalance !== null ? `${userBalance.toLocaleString()} PXJ` : 'Unable to load'}\n                  </span>\n                )}\n              </span>\n            </div>\n          </div>\n\n          {/* Collection Name Input */}\n          <div className=\"form-group\">\n            <label htmlFor=\"collectionName\">Collection Name:</label>\n            <input\n              type=\"text\"\n              id=\"collectionName\"\n              value={collectionName}\n              onChange={(e) => setCollectionName(e.target.value)}\n              placeholder=\"Enter your collection name\"\n              className=\"collection-input\"\n              disabled={isProcessing}\n            />\n          </div>\n\n          {/* Tier Selection */}\n          <div className=\"tier-selection\">\n            <h3>Select Tier:</h3>\n            <div className=\"tier-grid\">\n              {TIER_OPTIONS.map((tier) => {\n                const affordable = canAfford(tier)\n                const isSelected = selectedTier === tier.id\n                \n                return (\n                  <div\n                    key={tier.id}\n                    className={`tier-card ${\n                      isSelected ? 'selected' : ''\n                    } ${\n                      !affordable ? 'unaffordable' : ''\n                    }`}\n                    onClick={() => !isProcessing && setSelectedTier(tier.id)}\n                  >\n                    <div className=\"tier-header\">\n                      <span className=\"tier-icon\">{tier.icon}</span>\n                      <div className=\"tier-info\">\n                        <h4 className=\"tier-name\">{tier.name}</h4>\n                        <div className=\"tier-cost\">{tier.costFormatted}</div>\n                      </div>\n                      {!affordable && (\n                        <div className=\"insufficient-badge\">Insufficient Balance</div>\n                      )}\n                    </div>\n                    <p className=\"tier-description\">{tier.description}</p>\n                    <div className=\"tier-benefits\">\n                      <h5>Benefits:</h5>\n                      <ul>\n                        {tier.benefits.map((benefit, index) => (\n                          <li key={index}>{benefit}</li>\n                        ))}\n                      </ul>\n                    </div>\n                  </div>\n                )\n              })}\n            </div>\n          </div>\n\n          {/* Selected Tier Summary */}\n          {selectedTierData && (\n            <div className=\"selected-tier-summary\">\n              <h4>Upgrade Summary</h4>\n              <div className=\"summary-content\">\n                <div className=\"summary-item\">\n                  <span>Collection:</span>\n                  <span>{collectionName || 'Not specified'}</span>\n                </div>\n                <div className=\"summary-item\">\n                  <span>Tier:</span>\n                  <span>{selectedTierData.icon} {selectedTierData.name}</span>\n                </div>\n                <div className=\"summary-item\">\n                  <span>Cost:</span>\n                  <span>{selectedTierData.costFormatted}</span>\n                </div>\n                <div className=\"summary-item\">\n                  <span>Remaining Balance:</span>\n                  <span>\n                    {userBalance !== null \n                      ? `${(userBalance - selectedTierData.cost).toLocaleString()} PXJ`\n                      : 'Unknown'\n                    }\n                  </span>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        <div className=\"modal-footer\">\n          <button \n            className=\"btn-secondary\"\n            onClick={onClose}\n            disabled={isProcessing}\n          >\n            Cancel\n          </button>\n          <button \n            className=\"btn-primary\"\n            onClick={handleTierPayment}\n            disabled={\n              isProcessing || \n              !selectedTier || \n              !collectionName.trim() || \n              !isConnected ||\n              (selectedTierData && userBalance !== null && userBalance < selectedTierData.cost)\n            }\n          >\n            {isProcessing ? (\n              <>\n                <span className=\"loading-spinner\"></span>\n                Processing...\n              </>\n            ) : (\n              `Upgrade to ${selectedTierData?.name || 'Selected Tier'}`\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default CollectionTierModal","import React, { useState, useEffect, useCallback } from 'react'\nimport { Link } from 'react-router-dom'\nimport '../css/collections.css'\nimport { apiService } from '../services/api'\nimport type { CollectionData } from '../services/api'\nimport TruncatedText from './TruncatedText'\nimport ErrorMessage from './ErrorMessage'\nimport { ErrorMessageService } from '../services/errorMessageService'\nimport { log } from '../services/loggingService'\nimport { CollectionImage } from './FallbackImage'\nimport CollectionTierModal from './CollectionTierModal'\n\ninterface Collection {\n  collection_name: string\n  name: string\n  img?: string\n  author: string\n  created_at_time: string\n  created_at_block: string\n  floor_price?: number\n  volume?: string\n  market_cap?: string\n  assets?: string\n  loading_market_data?: boolean\n}\n\nconst Collections: React.FC = () => {\n  const [collections, setCollections] = useState<Collection[]>([])\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<Error | null>(null)\n  const [showTierModal, setShowTierModal] = useState(false)\n  const [searchTerm, setSearchTerm] = useState('')\n  const [sortBy, setSortBy] = useState<'name' | 'author' | 'created'>('name')\n  const [displayedCount, setDisplayedCount] = useState(12)\n  const [loadingMore, setLoadingMore] = useState(false)\n  const [showTierPerks, setShowTierPerks] = useState(false)\n  const [totalFetched, setTotalFetched] = useState(0)\n\n    // PxApproved Projects with dynamic image loading\n  const [pxApprovedProjects, setPxApprovedProjects] = useState<{\n    name: string\n    collection: string\n    image: string | null\n    description: string\n    tier: string\n    verified: boolean\n  }[]>([\n    {\n      name: 'Pixel Journey',\n      collection: 'pixeljourney',\n      image: null,\n      description: 'The original Pixel Journey collection',\n      tier: 'platinum',\n      verified: true\n    },\n    {\n      name: 'Fried Factory',\n      collection: 'friedfactory',\n      image: null,\n      description: '3D NFT collection by @Friedfactory the 3D legend (and artist of our Journey Ingredients too)!',\n      tier: 'partner',\n      verified: true\n    },\n    {\n      name: 'Crypto Muffins',\n      collection: 'crptomuffins',\n      image: null,\n      description: 'Delicious crypto-themed NFT collection by AKU!',\n      tier: 'gold',\n      verified: true\n    },\n    {\n      name: 'Aku Fish Heads',\n      collection: 'akufishheads',\n      image: null,\n      description: 'Unique AKU-licious NFT collection',\n      tier: 'silver',\n      verified: true\n    },\n    {\n      name: 'Pantheon',\n      collection: 'pantheon',\n      image: null,\n      description: 'Mythological NFT collection',\n      tier: 'bronze',\n      verified: true\n    },\n    {\n      name: 'Pocket People',\n      collection: 'pocketsizedp',\n      image: null,\n      description: 'Pocket Sized PFPs by our first Partner, Kettleman!',\n      tier: 'partner',\n      verified: true\n    },\n    {\n      name: 'NIMAs Odyssey',\n      collection: 'nimasodyssey',\n      image: null,\n      description: 'NIMAs Odyssey, a Discord RPG Driven NFT Mining Game',\n      tier: 'partner',\n      verified: true\n    }\n  ])\n\n  // Fetch collection metadata for PxApproved projects\n  const fetchPxApprovedImages = useCallback(async () => {\n    try {\n      setPxApprovedProjects(currentProjects => {\n        // Only fetch images for projects that don't have them yet\n        const projectsNeedingImages = currentProjects.filter(project => !project.image)\n        \n        if (projectsNeedingImages.length === 0) {\n          return currentProjects // No updates needed\n        }\n        \n        // Fetch images for projects that need them\n        Promise.all(\n          projectsNeedingImages.map(async (project) => {\n            try {\n              const collectionData = await apiService.getCollectionDetails(project.collection)\n              return {\n                ...project,\n                image: collectionData?.img || null\n              }\n            } catch (error) {\n              log.warn(`Failed to fetch image for ${project.collection}`, 'Collections', error as Error)\n              return project\n            }\n          })\n        ).then(updatedProjectsWithImages => {\n          setPxApprovedProjects(prevProjects => \n            prevProjects.map(project => {\n              const updated = updatedProjectsWithImages.find(up => up.collection === project.collection)\n              return updated || project\n            })\n          )\n        })\n        \n        return currentProjects // Return current state immediately\n      })\n    } catch (error) {\n      log.error('Failed to fetch PxApproved project images', 'Collections', error as Error)\n    }\n  }, [])\n\n  // Fetch all collections using API service\n  // Fetch market data for collections\n  const fetchMarketDataForCollections = async (collections: Collection[]) => {\n    const updatedCollections = [...collections]\n    \n    // Process collections in batches to avoid overwhelming the API\n    const batchSize = 5\n    for (let i = 0; i < collections.length; i += batchSize) {\n      const batch = collections.slice(i, i + batchSize)\n      \n      const batchResults = await Promise.allSettled(batch.map(async (collection, batchIndex) => {\n        const collectionIndex = i + batchIndex\n        try {\n          // Fetch live floor price and market stats in parallel\n          const [floorPriceData, marketStats] = await Promise.all([\n            apiService.getCollectionFloorPrice(collection.collection_name),\n            apiService.getCollectionMarketStats({ collection_name: collection.collection_name })\n          ])\n          \n          return {\n            index: collectionIndex,\n            data: {\n              ...updatedCollections[collectionIndex],\n              floor_price: floorPriceData.floorPrice,\n              volume: marketStats.data?.volume,\n              market_cap: marketStats.data?.volume ? \n                (floorPriceData.floorPrice * parseFloat(marketStats.data.volume)).toFixed(2) : undefined,\n              assets: marketStats.data?.sales,\n              loading_market_data: false\n            }\n          }\n        } catch (error) {\n          ErrorMessageService.logError('Collections.fetchMarketDataForCollections', error, { \n            collection_name: collection.collection_name \n          })\n          return {\n            index: collectionIndex,\n            data: {\n              ...updatedCollections[collectionIndex],\n              loading_market_data: false\n            }\n          }\n        }\n      }))\n      \n      // Update all batch results at once to minimize re-renders\n      batchResults.forEach(result => {\n        if (result.status === 'fulfilled') {\n          updatedCollections[result.value.index] = result.value.data\n        }\n      })\n      \n      // Small delay between batches to be respectful to the API\n       if (i + batchSize < collections.length) {\n         await new Promise(resolve => setTimeout(resolve, 100))\n       }\n     }\n     \n     // Update state once after all batches are processed\n     setCollections([...updatedCollections])\n   }\n\n  const fetchCollections = async (limit = 50) => {\n    setLoading(true)\n    setError(null)\n    try {\n      const data = await apiService.getCollections({ limit, whitelistOnly: true })\n      const mappedCollections: Collection[] = (data || []).map((col: CollectionData) => ({\n        collection_name: col.collection_name,\n        name: col.name,\n        img: col.img,\n        author: col.author,\n        created_at_time: col.created_at_time,\n        created_at_block: col.created_at_block,\n        loading_market_data: true\n      }))\n      setCollections(mappedCollections)\n      setTotalFetched(data?.length || 0)\n      \n      // Fetch market data for each collection\n      fetchMarketDataForCollections(mappedCollections)\n    } catch (error) {\n      const errorObj = error instanceof Error ? error : new Error('Failed to fetch collections')\n      setError(errorObj)\n      ErrorMessageService.logError('Collections.fetchCollections', errorObj, { limit })\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchCollections()\n    fetchPxApprovedImages()\n  }, [fetchPxApprovedImages]) // Safe to depend on memoized function with no dependencies\n\n  // Filter and sort collections based on search term and sort option\n  const filteredCollections = collections\n    .filter(collection => \n      collection.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      collection.collection_name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      collection.author.toLowerCase().includes(searchTerm.toLowerCase())\n    )\n    .sort((a, b) => {\n      switch (sortBy) {\n        case 'name':\n          return a.name.localeCompare(b.name)\n        case 'author':\n          return a.author.localeCompare(b.author)\n        case 'created':\n          return new Date(b.created_at_time).getTime() - new Date(a.created_at_time).getTime()\n        default:\n          return 0\n      }\n    })\n\n  // Filter PxApproved projects based on search term\n  const filteredPxApproved = pxApprovedProjects.filter(project =>\n    project.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    project.collection.toLowerCase().includes(searchTerm.toLowerCase())\n  )\n\n  // Get displayed collections (limited by displayedCount)\n  const displayedCollections = filteredCollections.slice(0, displayedCount)\n  const hasMoreCollections = filteredCollections.length > displayedCount || (totalFetched >= 50 && displayedCount >= filteredCollections.length)\n\n  // Load more collections function\n  const loadMoreCollections = async () => {\n    setLoadingMore(true)\n    try {\n      // If we have more collections already fetched, just show more\n      if (displayedCount < collections.length) {\n        setDisplayedCount(prev => prev + 12)\n      } else {\n        // Fetch more collections from API\n        const newLimit = totalFetched + 50\n        const data = await apiService.getCollections({ limit: newLimit, whitelistOnly: true })\n        if (data && data.length > totalFetched) {\n          const mappedCollections: Collection[] = data.map((col: CollectionData) => ({\n            collection_name: col.collection_name,\n            name: col.name,\n            img: col.img,\n            author: col.author,\n            created_at_time: col.created_at_time,\n            created_at_block: col.created_at_block,\n            loading_market_data: true\n          }))\n          setCollections(mappedCollections)\n          setTotalFetched(data.length)\n          setDisplayedCount(prev => prev + 12)\n          \n          // Fetch market data for new collections\n          const newCollections = mappedCollections.slice(totalFetched)\n          if (newCollections.length > 0) {\n            fetchMarketDataForCollections(newCollections)\n          }\n        }\n      }\n    } catch (error) {\n      const errorObj = error instanceof Error ? error : new Error('Failed to load more collections')\n      ErrorMessageService.logError('Collections.loadMoreCollections', errorObj, { \n        displayedCount, \n        totalFetched \n      })\n    } finally {\n      setLoadingMore(false)\n    }\n  }\n\n\n\n  return (\n    \n    <div className=\"collections-container\">\n\n      {/* Collections Header & PxApproved Info Section */}\n      <div className=\"perk-tiers-section\">\n        <div className=\"collections-header\">\n          <h1>Collections</h1>\n          <p className=\"collections-subtitle\">\n            Discover amazing NFT collections on the WAX blockchain\n          </p>\n        </div>\n        \n        <div className=\"info-card\">\n          <h3>PxApproved Collections</h3>\n          <p>\n            Only PxApproved collections are listed on our marketplace by default. \n            This ensures quality and authenticity for our community.\n          </p>\n          <div className=\"info-actions\">\n            <a \n              href=\"https://discord.gg/pixeljourney\" \n              target=\"_blank\" \n              rel=\"noopener noreferrer\"\n              className=\"discord-link\"\n            >\n              <svg className=\"discord-icon\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z\"/>\n              </svg>\n              Join Discord for More Info\n            </a>\n            <button \n              className=\"payment-button\"\n              onClick={() => setShowTierModal(true)}\n            >\n              Upgrade Collection Tier\n            </button>\n            <button \n              className=\"toggle-tiers-button\"\n              onClick={() => setShowTierPerks(!showTierPerks)}\n            >\n              {showTierPerks ? 'Hide Tier Details' : 'Show Tier Details'}\n              <svg \n                className={`toggle-icon ${showTierPerks ? 'rotated' : ''}`} \n                viewBox=\"0 0 24 24\" \n                fill=\"currentColor\"\n              >\n                <path d=\"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z\"/>\n              </svg>\n            </button>\n          </div>\n        </div>\n        \n        <p className=\"tiers-description\">\n          Elevate your collection's status on PxMarket with our tier system. Each tier unlocks exclusive benefits and promotional opportunities.\n        </p>\n        \n        {showTierPerks && (\n        <div className=\"tiers-content\">\n          <div className=\"tiers-header\">\n            <h2>PxApproved Perk Tiers</h2>\n          </div>\n          <div className=\"tiers-grid\">\n          <div className=\"tier-card tier-bronze\">\n            <div className=\"tier-header\">\n              <span className=\"tier-icon\">🥉</span>\n              <h3>Bronze</h3>\n              <div className=\"tier-cost\">5M PXJ</div>\n            </div>\n            <div className=\"tier-benefits\">\n              <h4>Benefits:</h4>\n              <ul>\n                <li>Basic marketplace listing</li>\n                <li>Collection verification badge</li>\n                <li>Community Discord access</li>\n                <li>Monthly featured spot rotation</li>\n              </ul>\n            </div>\n          </div>\n\n          <div className=\"tier-card tier-silver\">\n            <div className=\"tier-header\">\n              <span className=\"tier-icon\">🥈</span>\n              <h3>Silver</h3>\n              <div className=\"tier-cost\">15M PXJ</div>\n            </div>\n            <div className=\"tier-benefits\">\n              <h4>Benefits:</h4>\n              <ul>\n                <li>All Bronze benefits</li>\n                <li>Priority marketplace placement</li>\n                <li>Weekly newsletter mentions</li>\n                <li>Custom collection banner</li>\n                <li>Analytics dashboard access</li>\n              </ul>\n            </div>\n          </div>\n\n          <div className=\"tier-card tier-gold\">\n            <div className=\"tier-header\">\n              <span className=\"tier-icon\">🥇</span>\n              <h3>Gold</h3>\n              <div className=\"tier-cost\">30M PXJ</div>\n            </div>\n            <div className=\"tier-benefits\">\n              <h4>Benefits:</h4>\n              <ul>\n                <li>All Silver benefits</li>\n                <li>Homepage featured carousel</li>\n                <li>Social media promotion</li>\n                <li>Exclusive events participation</li>\n                <li>Direct community manager contact</li>\n              </ul>\n            </div>\n          </div>\n\n          <div className=\"tier-card tier-partner\">\n            <div className=\"tier-header\">\n              <span className=\"tier-icon\">🤝</span>\n              <h3>Partner</h3>\n              <div className=\"tier-cost\">Special Agreement</div>\n            </div>\n            <div className=\"tier-benefits\">\n              <h4>Benefits:</h4>\n              <ul>\n                <li>All Gold benefits</li>\n                <li>Co-marketing opportunities</li>\n                <li>Revenue sharing programs</li>\n                <li>Joint event hosting</li>\n                <li>Custom integration support</li>\n              </ul>\n            </div>\n          </div>\n\n          <div className=\"tier-card tier-platinum\">\n            <div className=\"tier-header\">\n              <span className=\"tier-icon\">💎</span>\n              <h3>Platinum</h3>\n              <div className=\"tier-cost\">50M PXJ</div>\n            </div>\n            <div className=\"tier-benefits\">\n              <h4>Benefits:</h4>\n              <ul>\n                <li>All Partner benefits</li>\n                <li>Permanent homepage presence</li>\n                <li>Dedicated marketing campaigns</li>\n                <li>WaxRock Council consideration</li>\n                <li>Platform governance participation</li>\n                <li>White-label marketplace options</li>\n              </ul>\n            </div>\n          </div>\n          </div>\n        </div>\n        )}\n\n        {showTierPerks && (\n        <div className=\"council-note\">\n          <div className=\"council-info\">\n            <span className=\"council-icon\">🏛️</span>\n            <div>\n              <h4>WaxRock Council Authority</h4>\n              <p>\n                The WaxRock Council reserves the right to grant special tier status to exceptional collections \n                through community proposals and voting. Collections may also lobby for tier upgrades through \n                formal governance processes.\n              </p>\n            </div>\n          </div>\n        </div>\n        )}\n\n        {showTierPerks && (\n        <div className=\"apply-section\">\n          <h3>Ready to Upgrade Your Collection?</h3>\n          <p>Contact our team to discuss tier upgrades and promotional opportunities.</p>\n          <div className=\"apply-buttons\">\n            <a href=\"https://discord.gg/pixeljourney\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"apply-btn discord-btn\">\n              Apply via Discord\n            </a>\n            <button className=\"apply-btn payment-btn\" onClick={() => setShowTierModal(true)}>\n              Instant Tier Upgrade\n            </button>\n          </div>\n        </div>\n        )}\n      </div>\n\n      {/* Collection Tier Modal */}\n      <CollectionTierModal \n        isOpen={showTierModal}\n        onClose={() => setShowTierModal(false)}\n      />\n\n      {/* Search and Filter Section */}\n      <div className=\"search-filter-section\">\n        <div className=\"search-controls\">\n          <div className=\"search-input-container\">\n            <svg className=\"search-icon\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n              <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/>\n            </svg>\n            <input\n              type=\"text\"\n              placeholder=\"Search collections, authors, or names...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"search-input\"\n            />\n            {searchTerm && (\n              <button \n                onClick={() => setSearchTerm('')}\n                className=\"clear-search\"\n                aria-label=\"Clear search\"\n              >\n                <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                  <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n                </svg>\n              </button>\n            )}\n          </div>\n          <div className=\"sort-container\">\n            <label htmlFor=\"sortBy\">Sort by:</label>\n            <select\n              id=\"sortBy\"\n              value={sortBy}\n              onChange={(e) => setSortBy(e.target.value as 'name' | 'author' | 'created')}\n              className=\"sort-select\"\n            >\n              <option value=\"name\">Name</option>\n              <option value=\"author\">Author</option>\n              <option value=\"created\">Created Date</option>\n            </select>\n          </div>\n        </div>\n        {searchTerm && (\n          <div className=\"search-results-info\">\n            <p>Found {filteredCollections.length + filteredPxApproved.length} results for \"{searchTerm}\"</p>\n          </div>\n        )}\n      </div>\n\n      {/* PxApproved Projects Section - Only show if there are filtered results or no search */}\n      {(!searchTerm || filteredPxApproved.length > 0) && (\n        <div className=\"pxapproved-section\">\n          <h2>PxApproved {searchTerm && `(${filteredPxApproved.length})`}</h2>\n          <div className=\"approved-projects-grid\">\n            {filteredPxApproved.map((project, index) => (\n              <Link key={index} to={`/collections/${project.collection}`} className=\"project-card-link\">\n                <div className={`project-card project-card-${project.tier}`}>\n                  <div className=\"project-tier-badge\">\n                    <span className={`tier-label tier-${project.tier}`}>{project.tier.toUpperCase()}</span>\n                    {project.verified && <span className=\"verified-badge\">✓</span>}\n                  </div>\n                  <img \n                    src={project.image && typeof project.image === 'string' ? \n                      (project.image.startsWith('http') ? project.image : `https://ipfs.io/ipfs/${project.image}`) \n                      : '/img/placeholder-collection.svg'\n                    } \n                    alt={project.name} \n                    className=\"project-image\"\n                    onError={(e) => {\n                      e.currentTarget.src = '/img/placeholder-collection.svg'\n                    }}\n                  />\n                  <div className=\"project-info\">\n                    <h3>{project.name}</h3>\n                    <p className=\"project-collection\">{project.collection}</p>\n                    <TruncatedText \n                      text={project.description} \n                      maxLength={240}\n                      className=\"project-description\"\n                    />\n                  </div>\n                </div>\n              </Link>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* All Collections Section */}\n      <div className=\"all-collections-section\">\n        <h2>More Collections on WAX {searchTerm && `(${filteredCollections.length})`}</h2>\n        {error ? (\n          <ErrorMessage\n            errorType=\"COLLECTION_NOT_FOUND\"\n            onRetry={() => fetchCollections()}\n            showRetry={true}\n          />\n        ) : loading ? (\n          <div className=\"loading-spinner\">\n            <div className=\"spinner\"></div>\n            <p>Loading collections...</p>\n          </div>\n        ) : (\n          <>\n            <div className=\"collections-grid\">\n              {displayedCollections.length > 0 ? (\n                displayedCollections.map((collection) => (\n                  <Link \n                    key={collection.collection_name} \n                    to={`/collections/${collection.collection_name}`}\n                    className=\"collection-card\"\n                  >\n                    <CollectionImage \n                      src={collection.img ? \n                        (collection.img.startsWith('http') ? collection.img : `https://ipfs.io/ipfs/${collection.img}`) \n                        : undefined\n                      } \n                      alt={collection.collection_name}\n                      width={150}\n                      height={150}\n                      fallbackText={collection.collection_name}\n                      className=\"collection-image\"\n                    />\n                    <div className=\"collection-info\">\n                      <div className=\"collection-row-1\">\n                        <h3>{collection.name}</h3>\n                      </div>\n                      <div className=\"collection-row-2\">\n                        <p className=\"collection-name\">{collection.collection_name}</p>\n                      </div>\n                      <div className=\"collection-market-data\">\n                        {collection.loading_market_data ? (\n                          <div className=\"market-data-loading\">\n                            <div className=\"mini-spinner\"></div>\n                            <span>Loading market data...</span>\n                          </div>\n                        ) : (\n                          <>\n                            {collection.floor_price !== undefined && collection.floor_price > 0 && (\n                              <div className=\"market-stat\">\n                                <span className=\"stat-label\">Floor:</span>\n                                <span className=\"stat-value\">{collection.floor_price.toFixed(4)} WAX</span>\n                              </div>\n                            )}\n                            {collection.volume && (\n                              <div className=\"market-stat\">\n                                <span className=\"stat-label\">Volume:</span>\n                                <span className=\"stat-value\">{parseFloat(collection.volume).toLocaleString()} WAX</span>\n                              </div>\n                            )}\n                            {collection.assets && (\n                              <div className=\"market-stat\">\n                                <span className=\"stat-label\">Assets:</span>\n                                <span className=\"stat-value\">{collection.assets}</span>\n                              </div>\n                            )}\n                          </>\n                        )}\n                      </div>\n                    </div>\n                  </Link>\n                ))\n              ) : searchTerm ? (\n                <div className=\"no-results\">\n                  <svg className=\"no-results-icon\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                    <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/>\n                  </svg>\n                  <h3>No collections found</h3>\n                  <p>Try adjusting your search terms or browse all collections</p>\n                  <button \n                    onClick={() => setSearchTerm('')}\n                    className=\"clear-search-button\"\n                  >\n                    Clear Search\n                  </button>\n                </div>\n              ) : null}\n            </div>\n            \n            {/* Load More Button */}\n            {hasMoreCollections && !searchTerm && (\n              <div className=\"load-more-container\">\n                <button \n                  onClick={loadMoreCollections}\n                  disabled={loadingMore}\n                  className=\"load-more-button\"\n                >\n                  {loadingMore ? (\n                    <>\n                      <div className=\"button-spinner\"></div>\n                      Loading...\n                    </>\n                  ) : (\n                    `Load More Collections (${filteredCollections.length - displayedCount} remaining)`\n                  )}\n                </button>\n              </div>\n            )}\n          </>\n        )}\n      </div>\n    </div>\n  )\n}\n\nexport default Collections","import React from 'react'\nimport { getCollectionTier, getTierBadgeConfig } from '../config/collectionTiers'\nimport '../css/quick-links.css'\n\ninterface QuickLinksProps {\n  collectionName: string\n}\n\nconst QuickLinks: React.FC<QuickLinksProps> = ({ collectionName }) => {\n  const tierInfo = getCollectionTier(collectionName)\n  \n  if (!tierInfo) {\n    return null\n  }\n\n  const badgeConfig = getTierBadgeConfig(tierInfo.tier)\n  const hasQuickLinks = tierInfo.quickLinks && tierInfo.quickLinks.length > 0\n\n  return (\n    <div className=\"quick-links-container\">\n      {/* Tier Badge */}\n      <div className=\"tier-section\">\n        <div className={`tier-badge ${badgeConfig.className}`}>\n          <span className=\"tier-icon\">{badgeConfig.icon}</span>\n          <span className=\"tier-label\">{badgeConfig.label}</span>\n          {tierInfo.verified && <span className=\"verified-icon\">✓</span>}\n        </div>\n      </div>\n\n      {/* Quick Links */}\n      {hasQuickLinks && (\n        <div className=\"links-section\">\n          <h4 className=\"links-title\">Quick Links</h4>\n          <div className=\"links-grid\">\n            {tierInfo.quickLinks!.map((link, index) => (\n              <a\n                key={index}\n                href={link.url}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"quick-link\"\n              >\n                {link.icon && <span className=\"link-icon\">{link.icon}</span>}\n                <span className=\"link-label\">{link.label}</span>\n              </a>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Collection Owner Message & Discord */}\n      {(tierInfo.ownerMessage || tierInfo.discordUrl) && (\n        <div className=\"owner-section\">\n          {tierInfo.ownerMessage && (\n            <div className=\"owner-message\">\n              <div className=\"owner-title-container\" style={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: '8px',\n                marginBottom: '8px'\n              }}>\n                <h4 className=\"owner-title\">From the Collection Owner</h4>\n                <div \n                  className=\"info-tooltip\"\n                  title=\"This message is provided directly by the collection owner to share information about their project, community, or special announcements with collectors and fans.\"\n                  style={{\n                    display: 'inline-flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    width: '16px',\n                    height: '16px',\n                    borderRadius: '50%',\n                    backgroundColor: 'rgba(255, 255, 255, 0.1)',\n                    border: '1px solid rgba(255, 255, 255, 0.2)',\n                    color: 'rgba(255, 255, 255, 0.7)',\n                    fontSize: '12px',\n                    fontWeight: 'bold',\n                    cursor: 'help',\n                    transition: 'all 0.2s ease'\n                  }}\n                  onMouseEnter={(e) => {\n                    e.currentTarget.style.backgroundColor = 'rgba(255, 255, 255, 0.15)'\n                    e.currentTarget.style.borderColor = 'rgba(255, 255, 255, 0.3)'\n                    e.currentTarget.style.color = 'rgba(255, 255, 255, 0.9)'\n                  }}\n                  onMouseLeave={(e) => {\n                    e.currentTarget.style.backgroundColor = 'rgba(255, 255, 255, 0.1)'\n                    e.currentTarget.style.borderColor = 'rgba(255, 255, 255, 0.2)'\n                    e.currentTarget.style.color = 'rgba(255, 255, 255, 0.7)'\n                  }}\n                >\n                  ?\n                </div>\n              </div>\n              <p className=\"owner-text\">{tierInfo.ownerMessage}</p>\n            </div>\n          )}\n          {tierInfo.discordUrl && (\n            <div className=\"discord-section\">\n              <a\n                href={tierInfo.discordUrl}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"discord-link\"\n              >\n                <span className=\"discord-icon\">💬</span>\n                <span className=\"discord-text\">Join Our Discord Community</span>\n                <span className=\"external-icon\">↗</span>\n              </a>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Learn About Grid */}\n      {tierInfo.learnAboutGrid && (\n        <div className=\"learn-about-section\" style={{ marginTop: '2rem' }}>\n          <h3 className=\"learn-about-title\">Learn About Pixel Journey</h3>\n          <div className=\"learn-about-grid\" style={{\n            display: 'grid',\n            gridTemplateColumns: 'repeat(auto-fit, minmax(280px, 1fr))',\n            gap: '16px',\n            marginTop: '16px'\n          }}>\n            {tierInfo.learnAboutGrid.map((item, index) => (\n              <div \n                key={index}\n                className=\"learn-about-card\"\n                style={{\n                  background: 'rgba(255, 255, 255, 0.05)',\n                  border: '1px solid rgba(255, 255, 255, 0.1)',\n                  borderRadius: '12px',\n                  padding: '20px',\n                  transition: 'all 0.3s ease',\n                  cursor: item.url ? 'pointer' : 'default'\n                }}\n                onClick={() => item.url && window.open(item.url, '_blank')}\n                onMouseEnter={(e) => {\n                  if (item.url) {\n                    e.currentTarget.style.background = 'rgba(255, 255, 255, 0.08)'\n                    e.currentTarget.style.borderColor = 'rgba(255, 255, 255, 0.2)'\n                    e.currentTarget.style.transform = 'translateY(-2px)'\n                  }\n                }}\n                onMouseLeave={(e) => {\n                  if (item.url) {\n                    e.currentTarget.style.background = 'rgba(255, 255, 255, 0.05)'\n                    e.currentTarget.style.borderColor = 'rgba(255, 255, 255, 0.1)'\n                    e.currentTarget.style.transform = 'translateY(0)'\n                  }\n                }}\n              >\n                <div className=\"learn-card-header\" style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '12px',\n                  marginBottom: '12px'\n                }}>\n                  <span className=\"learn-card-icon\" style={{\n                    fontSize: '24px',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    width: '40px',\n                    height: '40px',\n                    background: 'rgba(255, 255, 255, 0.1)',\n                    borderRadius: '8px'\n                  }}>\n                    {item.icon}\n                  </span>\n                  <h4 className=\"learn-card-title\" style={{\n                    margin: 0,\n                    fontSize: '16px',\n                    fontWeight: '600',\n                    color: 'white'\n                  }}>\n                    {item.title}\n                  </h4>\n                  {item.url && (\n                    <span className=\"external-link-icon\" style={{\n                      marginLeft: 'auto',\n                      fontSize: '14px',\n                      color: 'rgba(255, 255, 255, 0.6)'\n                    }}>\n                      ↗\n                    </span>\n                  )}\n                </div>\n                <p className=\"learn-card-description\" style={{\n                  margin: 0,\n                  fontSize: '14px',\n                  lineHeight: '1.5',\n                  color: 'rgba(255, 255, 255, 0.8)'\n                }}>\n                  {item.description}\n                </p>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default QuickLinks","import React, { useState, useEffect, useRef, useCallback } from 'react'\nimport { useWallet } from '../hooks/useWallet'\nimport { useNotifications } from '../hooks/useNotifications'\nimport { useDisplaySettings } from '../hooks/useDisplaySettings'\nimport { chatService, type ChatMessage, type ChatFilters, type ChatCostInfo } from '../services/chatService'\nimport { formatSafeMarkdown } from '../utils/sanitize'\nimport { log } from '../services/loggingService'\nimport '../css/chat-widget.css'\n\ninterface ChatWidgetProps {\n  collectionName?: string // For collection-specific chats\n}\n\nconst ChatWidget: React.FC<ChatWidgetProps> = ({ collectionName }) => {\n  const { account, isConnected } = useWallet()\n  const { showError, showSuccess } = useNotifications()\n  const { settings } = useDisplaySettings()\n  \n  // UI State\n  const [isExpanded, setIsExpanded] = useState(false)\n  const [isMinimized, setIsMinimized] = useState(true)\n  const [isLoading, setIsLoading] = useState(false)\n  const [isSending, setIsSending] = useState(false)\n  \n  // Chat State\n  const [messages, setMessages] = useState<ChatMessage[]>([])\n  const [unreadCount, setUnreadCount] = useState(0)\n  const [lastReadTimestamp, setLastReadTimestamp] = useState<string | null>(null)\n  const [newMessage, setNewMessage] = useState('')\n  const [costInfo, setCostInfo] = useState<ChatCostInfo | null>(null)\n  const [isSponsored, setIsSponsored] = useState(false)\n  const [autoRefresh, setAutoRefresh] = useState(true)\n  const [refreshInterval, setRefreshInterval] = useState(30) // seconds\n  const [showSponsoredInfo, setShowSponsoredInfo] = useState(false)\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false)\n  const [showPriceInfo, setShowPriceInfo] = useState(false)\n  \n  // Filters\n  const [filters, setFilters] = useState<ChatFilters>({\n    collection: collectionName || undefined,\n    hideSpam: true\n  })\n  \n  // Refs\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n  const refreshIntervalRef = useRef<NodeJS.Timeout | null>(null)\n  const messageInputRef = useRef<HTMLTextAreaElement>(null)\n\n  // Formatting functions\n  const insertFormatting = (prefix: string, suffix: string = '') => {\n    const textarea = messageInputRef.current\n    if (!textarea) return\n\n    const start = textarea.selectionStart\n    const end = textarea.selectionEnd\n    const selectedText = newMessage.substring(start, end)\n    const beforeText = newMessage.substring(0, start)\n    const afterText = newMessage.substring(end)\n\n    const newText = beforeText + prefix + selectedText + suffix + afterText\n    setNewMessage(newText)\n\n    // Restore cursor position\n    setTimeout(() => {\n      textarea.focus()\n      const newCursorPos = start + prefix.length + selectedText.length + suffix.length\n      textarea.setSelectionRange(newCursorPos, newCursorPos)\n    }, 0)\n  }\n\n  const insertEmoji = (emoji: string) => {\n    const textarea = messageInputRef.current\n    if (!textarea) return\n\n    const start = textarea.selectionStart\n    const beforeText = newMessage.substring(0, start)\n    const afterText = newMessage.substring(start)\n\n    const newText = beforeText + emoji + afterText\n    setNewMessage(newText)\n    setShowEmojiPicker(false)\n\n    // Restore cursor position\n    setTimeout(() => {\n      textarea.focus()\n      const newCursorPos = start + emoji.length\n      textarea.setSelectionRange(newCursorPos, newCursorPos)\n    }, 0)\n  }\n\n  // Render formatted message content\n  const renderMessageContent = (content: string) => {\n    // Use safe markdown formatting with sanitization\n    const formatted = formatSafeMarkdown(content)\n    \n    return <span dangerouslySetInnerHTML={{ __html: formatted }} />\n  }\n  \n  // Update unread count when messages change\n  useEffect(() => {\n    if (messages.length === 0) {\n      setUnreadCount(0)\n      return\n    }\n\n    if (lastReadTimestamp) {\n      const unreadMessages = messages.filter(msg => \n        new Date(msg.timestamp) > new Date(lastReadTimestamp)\n      )\n      setUnreadCount(unreadMessages.length)\n    } else {\n      // If no read timestamp, all messages are unread when minimized\n      setUnreadCount(isMinimized ? messages.length : 0)\n    }\n  }, [messages, lastReadTimestamp, isMinimized])\n\n  // Mark messages as read when chat is opened\n  useEffect(() => {\n    if (!isMinimized && messages.length > 0) {\n      const latestMessage = messages[messages.length - 1]\n      setLastReadTimestamp(latestMessage.timestamp)\n      setUnreadCount(0)\n    }\n  }, [isMinimized, messages])\n\n  // Load messages function\n  const loadMessages = useCallback(async (silent: boolean = false) => {\n    if (!silent) setIsLoading(true)\n    \n    try {\n      const chatFilters = collectionName \n        ? { ...filters, collection: collectionName }\n        : filters\n      const fetchedMessages = await chatService.getMessages(chatFilters, 50, 0)\n      setMessages(fetchedMessages)\n    } catch (error) {\n      log.error('Error loading messages:', 'ChatWidget', error as Error)\n      if (!silent) {\n        showError('Failed to load chat messages')\n      }\n    } finally {\n      if (!silent) setIsLoading(false)\n    }\n  }, [filters, collectionName, showError])\n\n  // Auto-set collection filter when collectionName prop is provided\n  useEffect(() => {\n    if (collectionName && (!filters.collection || filters.collection !== collectionName)) {\n      setFilters(prev => ({ ...prev, collection: collectionName }))\n    }\n  }, [collectionName, filters])\n\n  // Load messages on component mount and when filters change\n  useEffect(() => {\n    loadMessages()\n  }, [loadMessages])\n  \n  // Auto-refresh messages\n  useEffect(() => {\n    if (autoRefresh && !isMinimized) {\n      refreshIntervalRef.current = setInterval(() => {\n        loadMessages(true)\n      }, refreshInterval * 1000)\n    } else {\n      if (refreshIntervalRef.current) {\n        clearInterval(refreshIntervalRef.current)\n        refreshIntervalRef.current = null\n      }\n    }\n    \n    return () => {\n      if (refreshIntervalRef.current) {\n        clearInterval(refreshIntervalRef.current)\n      }\n    }\n  }, [autoRefresh, isMinimized, refreshInterval, loadMessages])\n  \n  // Calculate message cost when message changes\n  const calculateCost = useCallback(async () => {\n    if (!account || !newMessage) return\n    \n    try {\n      const cost = await chatService.calculateMessageCost(newMessage, account, isSponsored)\n      setCostInfo(cost)\n    } catch (error) {\n      log.error('Error calculating cost:', 'ChatWidget', error as Error)\n    }\n  }, [account, newMessage, isSponsored])\n\n  useEffect(() => {\n    if (newMessage && account) {\n      calculateCost()\n    } else {\n      setCostInfo(null)\n    }\n  }, [newMessage, account, calculateCost])\n  \n  // Scroll to bottom when new messages arrive\n  useEffect(() => {\n    scrollToBottom()\n  }, [messages])\n  \n  // Don't render if chat button is disabled\n  if (!settings.showChatButton) {\n    return null\n  }\n  \n  const sendMessage = async () => {\n    if (!account || !newMessage.trim()) return\n    \n    setIsSending(true)\n    \n    try {\n      const messageToSend = collectionName \n        ? `::col:${collectionName}:: ${newMessage.trim()}`\n        : newMessage.trim()\n      const txId = await chatService.sendMessage(\n          messageToSend,\n          account,\n          collectionName,\n          isSponsored\n        )   \n      showSuccess('Message sent!', `Transaction: ${txId.substring(0, 8)}...`)\n      setNewMessage('')\n      setCostInfo(null)\n      setIsSponsored(false)\n      \n      // Refresh messages after a short delay\n      setTimeout(() => {\n        loadMessages(true)\n      }, 2000)\n      \n    } catch (error) {\n      log.error('Error sending message:', 'ChatWidget', error as Error)\n      \n      // Check if this might be a successful transaction with unexpected response format\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error'\n      if (errorMessage.includes('transaction ID not found')) {\n        showError(\n          'Message Status Unclear', \n          'Your message may have been sent successfully. Please check your transaction history or refresh the chat to confirm.'\n        )\n      } else {\n        showError('Failed to send message', errorMessage)\n      }\n    } finally {\n      setIsSending(false)\n    }\n  }\n  \n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })\n  }\n  \n  const formatTimestamp = (timestamp: string) => {\n    const date = new Date(timestamp)\n    const now = new Date()\n    const diffMs = now.getTime() - date.getTime()\n    const diffMins = Math.floor(diffMs / 60000)\n    const diffHours = Math.floor(diffMs / 3600000)\n    const diffDays = Math.floor(diffMs / 86400000)\n    \n    if (diffMins < 1) return 'now'\n    if (diffMins < 60) return `${diffMins}m`\n    if (diffHours < 24) return `${diffHours}h`\n    if (diffDays < 7) return `${diffDays}d`\n    return date.toLocaleDateString()\n  }\n  \n  const formatPxjAmount = (amount: string) => {\n    const num = parseFloat(amount.split(' ')[0])\n    if (num >= 1000) return `${(num / 1000).toFixed(1)}K PXJ`\n    return `${num.toFixed(0)} PXJ`\n  }\n  \n  const getMessageTypeClass = (message: ChatMessage) => {\n    if (message.isSponsored) return 'chat_message--sponsored'\n    if (message.messageType === 'premium') return 'chat_message--premium'\n    return 'chat_message--normal'\n  }\n  \n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault()\n      sendMessage()\n    }\n  }\n  \n  if (isMinimized) {\n    return (\n      <div className=\"chat_widget chat_widget--minimized\">\n        <button \n          className=\"chat_toggle-btn\"\n          onClick={() => setIsMinimized(false)}\n          title=\"Open Chat\"\n        >\n          <span className=\"chat_icon\">💬</span>\n          {unreadCount > 0 && (\n            <span className=\"chat_notification-badge\">{unreadCount}</span>\n          )}\n        </button>\n      </div>\n    )\n  }\n  \n  return (\n    <div className={`chat_widget ${isExpanded ? 'chat_widget--expanded' : 'chat_widget--normal'}`}>\n      {/* Header */}\n      <div className=\"chat_header\">\n        <div className=\"chat_header-left\">\n          <span className=\"chat_title\">\n            {collectionName ? `${collectionName} Chat` : 'Global Chat'}\n          </span>\n          <span className=\"chat_status\">\n            {messages.length} messages\n          </span>\n        </div>\n        \n        <div className=\"chat_header-right\">\n          <button \n            className=\"chat_btn chat_btn--icon\"\n            onClick={() => loadMessages()}\n            disabled={isLoading}\n            title=\"Refresh\"\n          >\n            <span className={`chat_refresh-icon ${isLoading ? 'chat_refresh-icon--spinning' : ''}`}>🔄</span>\n          </button>\n          \n          <button \n            className=\"chat_btn chat_btn--icon\"\n            onClick={() => setIsExpanded(!isExpanded)}\n            title={isExpanded ? 'Minimize' : 'Expand'}\n          >\n            <span>{isExpanded ? '🗗' : '🗖'}</span>\n          </button>\n          \n          <button \n            className=\"chat_btn chat_btn--icon\"\n            onClick={() => setIsMinimized(true)}\n            title=\"Close\"\n          >\n            <span>✕</span>\n          </button>\n        </div>\n      </div>\n      \n      {/* Filters */}\n      {!collectionName && (\n        <div className=\"chat_filters\">\n          <select \n            className=\"chat_select\"\n            value={filters.collection || ''}\n            onChange={(e) => setFilters({...filters, collection: e.target.value || undefined})}\n          >\n            <option value=\"\">All Collections</option>\n            <option value=\"pixeljourney\">Pixel Journey</option>\n            <option value=\"pixalcards\">Pixal Cards</option>\n            {/* Add more collections as needed */}\n          </select>\n          \n          <label className=\"chat_checkbox-label\">\n            <input \n              type=\"checkbox\"\n              checked={filters.hideSpam || false}\n              onChange={(e) => setFilters({...filters, hideSpam: e.target.checked})}\n            />\n            Hide Spam\n          </label>\n          \n          <label className=\"chat_checkbox-label\">\n            <input \n              type=\"checkbox\"\n              checked={filters.showOnlySponsored || false}\n              onChange={(e) => setFilters({...filters, showOnlySponsored: e.target.checked})}\n            />\n            Sponsored Only\n          </label>\n        </div>\n      )}\n      \n      {/* Messages */}\n      <div className=\"chat_messages\">\n        {isLoading && messages.length === 0 ? (\n          <div className=\"chat_loading\">Loading messages...</div>\n        ) : messages.length === 0 ? (\n          <div className=\"chat_empty\">\n            <p>No messages yet.</p>\n            <p>Be the first to start the conversation!</p>\n          </div>\n        ) : (\n          messages.map((message) => (\n            <div key={message.id} className={`chat_message ${getMessageTypeClass(message)}`}>\n              <div className=\"chat_message-header\">\n                <div className=\"chat_message-avatar\">\n                  <img \n                    src={`https://api.dicebear.com/7.x/identicon/svg?seed=${message.sender}`}\n                    alt={message.sender}\n                    className=\"chat_avatar\"\n                  />\n                </div>\n                \n                <div className=\"chat_message-info\">\n                  <span className=\"chat_sender\">{message.sender}</span>\n                  <span className=\"chat_timestamp\">{formatTimestamp(message.timestamp)}</span>\n                  <span className=\"chat_amount\">{formatPxjAmount(message.pxjAmount)}</span>\n                  {message.isSponsored && <span className=\"chat_sponsored-badge\">SPONSORED</span>}\n                </div>\n                \n                <div className=\"chat_message-actions\">\n                  <a \n                    href={`https://wax.bloks.io/transaction/${message.transactionId}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"chat_tx-link\"\n                    title=\"View on Explorer\"\n                  >\n                    🔗\n                  </a>\n                </div>\n              </div>\n              \n              <div className=\"chat_message-content\">\n                {renderMessageContent(message.message)}\n              </div>\n            </div>\n          ))\n        )}\n        <div ref={messagesEndRef} />\n      </div>\n      \n      {/* Input */}\n      {isConnected ? (\n        <div className=\"chat_input-section\">\n          {costInfo && (\n            <div className=\"chat_cost-info\">\n              <div className=\"chat_cost-display\">\n                <span className=\"chat_cost-amount\">\n                  Cost: {(costInfo.totalCost / 10000).toFixed(4)} PXJ\n                </span>\n                <button \n                  className=\"chat_info-btn\"\n                  onClick={() => setShowPriceInfo(!showPriceInfo)}\n                  title=\"View price breakdown\"\n                >\n                  ℹ️\n                </button>\n              </div>\n              {costInfo.hasPixalPFP && (\n                <span className=\"chat_discount\">Pixal PFP Discount: {costInfo.discount}%</span>\n              )}\n              <span className=\"chat_char-count\">\n                {newMessage.length}/240 chars\n              </span>\n              {showPriceInfo && (\n                <div className=\"chat_price-tooltip\">\n                  <div className=\"chat_price-content\">\n                    <h4>Price Breakdown</h4>\n                    <div className=\"price-factor\">\n                      <span>Base Cost:</span>\n                      <span>{(costInfo.baseCost / 10000).toFixed(4)} PXJ</span>\n                    </div>\n                    <div className=\"price-factor\">\n                      <span>Character Cost ({newMessage.length} chars):</span>\n                      <span>{((costInfo.totalCost - costInfo.baseCost) / 10000).toFixed(4)} PXJ</span>\n                    </div>\n                    {costInfo.hasPixalPFP && (\n                      <div className=\"price-factor discount\">\n                        <span>Pixal PFP Discount ({costInfo.discount}%):</span>\n                        <span>-{((costInfo.baseCost + (costInfo.totalCost - costInfo.baseCost)) * (costInfo.discount / 100) / 10000).toFixed(4)} PXJ</span>\n                      </div>\n                    )}\n                    <div className=\"price-factor total\">\n                      <span>Total Cost:</span>\n                      <span>{(costInfo.totalCost / 10000).toFixed(4)} PXJ</span>\n                    </div>\n                    <div className=\"price-note\">\n                      <small>Cost increases by 100% per 50 extra characters. Holders capped at 500 PXJ.</small>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n          \n          <div className=\"chat_input-controls\">\n            <div className=\"chat_sponsored-container\">\n              <label className=\"chat_checkbox-label\">\n                <input \n                  type=\"checkbox\"\n                  checked={isSponsored}\n                  onChange={(e) => setIsSponsored(e.target.checked)}\n                />\n                Sponsored ({costInfo?.hasPixalPFP ? '10,000' : '25,000'} PXJ)\n              </label>\n              <button \n                className=\"chat_info-btn\"\n                onClick={() => setShowSponsoredInfo(!showSponsoredInfo)}\n                title=\"Learn more about sponsored messages\"\n              >\n                ℹ️\n              </button>\n              {showSponsoredInfo && (\n                <div className=\"chat_info-tooltip\">\n                  <div className=\"chat_info-content\">\n                    <h4>Sponsored Messages</h4>\n                    <p>• Messages appear with special highlighting</p>\n                    <p>• Higher visibility in chat feed</p>\n                    <p>• Costs {costInfo?.hasPixalPFP ? '10,000' : '25,000'} PXJ regardless of length</p>\n                    <p>• {costInfo?.hasPixalPFP ? 'Pixal PFP holders get 60% discount!' : 'Get a Pixal PFP for 60% discount!'}</p>\n                    <p>• Perfect for announcements & promotions</p>\n                  </div>\n                </div>\n              )}\n            </div>\n            \n            <label className=\"chat_checkbox-label\">\n              <input \n                type=\"checkbox\"\n                checked={autoRefresh}\n                onChange={(e) => setAutoRefresh(e.target.checked)}\n              />\n              Auto-refresh\n            </label>\n          </div>\n          \n          <div className=\"chat_formatting-toolbar\">\n            <button \n              className=\"chat_format-btn\"\n              onClick={() => insertFormatting('**', '**')}\n              title=\"Bold\"\n            >\n              <strong>B</strong>\n            </button>\n            <button \n              className=\"chat_format-btn\"\n              onClick={() => insertFormatting('*', '*')}\n              title=\"Italic\"\n            >\n              <em>I</em>\n            </button>\n            <div className=\"chat_emoji-container\">\n              <button \n                className=\"chat_format-btn\"\n                onClick={() => setShowEmojiPicker(!showEmojiPicker)}\n                title=\"Add emoji\"\n              >\n                😊\n              </button>\n              {showEmojiPicker && (\n                <div className=\"chat_emoji-picker\">\n                  <div className=\"chat_emoji-grid\">\n                    {['😊', '😂', '❤️', '👍', '👎', '🔥', '💯', '🚀', '💎', '🎉', '😎', '🤔', '😍', '🥳', '💪', '👏', '🙌', '✨', '⭐', '🌟'].map(emoji => (\n                      <button\n                        key={emoji}\n                        className=\"chat_emoji-btn\"\n                        onClick={() => insertEmoji(emoji)}\n                      >\n                        {emoji}\n                      </button>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n\n          <div className=\"chat_input-wrapper\">\n            <textarea\n              ref={messageInputRef}\n              className=\"chat_input\"\n              placeholder={`Type your message... (${collectionName ? collectionName : 'global'} chat)`}\n              value={newMessage}\n              onChange={(e) => setNewMessage(e.target.value)}\n              onKeyPress={handleKeyPress}\n              maxLength={240}\n              rows={isExpanded ? 3 : 2}\n              disabled={isSending}\n            />\n            \n            <button \n              className=\"chat_send-btn\"\n              onClick={sendMessage}\n              disabled={!newMessage.trim() || isSending}\n            >\n              {isSending ? '⏳' : '📤'}\n            </button>\n          </div>\n        </div>\n      ) : (\n        <div className=\"chat_login-prompt\">\n          <p>Connect your wallet to join the chat!</p>\n        </div>\n      )}\n      \n      {/* Settings */}\n      {isExpanded && (\n        <div className=\"chat_settings\">\n          <div className=\"chat_setting-group\">\n            <label>Auto-refresh interval:</label>\n            <select \n              value={refreshInterval}\n              onChange={(e) => setRefreshInterval(Number(e.target.value))}\n              className=\"chat_select chat_select--small\"\n            >\n              <option value={10}>10s</option>\n              <option value={30}>30s</option>\n              <option value={60}>1m</option>\n              <option value={300}>5m</option>\n            </select>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default ChatWidget","import React from 'react'\n\ninterface ImageZoomProps {\n  isOpen: boolean\n  imageUrl: string\n  imageName: string\n  onClose: () => void\n}\n\nconst ImageZoom: React.FC<ImageZoomProps> = ({ isOpen, imageUrl, imageName, onClose }) => {\n  if (!isOpen) return null\n\n  const handleKeyDown = (e: KeyboardEvent) => {\n    if (e.key === 'Escape') {\n      onClose()\n    }\n  }\n\n  React.useEffect(() => {\n    if (isOpen) {\n      document.addEventListener('keydown', handleKeyDown)\n      document.body.style.overflow = 'hidden'\n    }\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown)\n      document.body.style.overflow = 'unset'\n    }\n  }, [isOpen])\n\n  return (\n    <div className=\"image-zoom-modal\" onClick={onClose}>\n      <div className=\"zoom-modal-content\" onClick={(e) => e.stopPropagation()}>\n        <button \n          className=\"zoom-modal-close\"\n          onClick={onClose}\n        >\n          ×\n        </button>\n        <img \n          src={imageUrl} \n          alt={imageName}\n          className=\"zoom-modal-image\"\n        />\n        <div className=\"zoom-modal-info\">\n          <h3>{imageName}</h3>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ImageZoom","import React, { useState, useEffect, useCallback } from 'react'\nimport { useParams, Link } from 'react-router-dom'\nimport { apiService } from '../services/api'\nimport TruncatedText from './TruncatedText'\nimport MediaRenderer from './MediaRenderer'\nimport { getSaleAssetImageUrl, getSaleAssetVideoUrl } from '../utils/mediaUtils'\nimport { useDisplaySettings } from '../hooks/useDisplaySettings'\nimport { getCollectionTier, getTierBadgeConfig } from '../config/collectionTiers'\nimport QuickLinks from './QuickLinks'\nimport ChatWidget from './ChatWidget'\nimport ImageZoom from './ImageZoom'\nimport ShareModal from './ShareModal'\n\nimport { API_ENDPOINTS } from '../config/marketplaceConfig'\nimport { log } from '../services/loggingService'\nimport '../css/collection-detail.css'\nimport '../css/CollectionProfile.css'\nimport '../css/quick-links.css'\nimport '../css/rwax.css'\n\n\n\ninterface SchemaFormat {\n  name: string\n  type: string\n}\n\ninterface Schema {\n  schema_name: string\n  format: SchemaFormat[]\n  created_at_time: string\n  created_at_block: string\n}\n\ninterface Template {\n  template_id: string\n  max_supply: string\n  is_transferable: boolean\n  is_burnable: boolean\n  issued_supply: string\n  immutable_data: Record<string, unknown>\n  created_at_time: string\n  created_at_block: string\n  schema_name: string\n}\n\ninterface CollectionData {\n  collection_name: string\n  name: string\n  img?: string\n  author: string\n  allow_notify: boolean\n  authorized_accounts: string[]\n  notify_accounts: string[]\n  market_fee: number\n  data?: Record<string, string | number | boolean>\n  created_at_block: string\n  created_at_time: string\n  assets?: string | number\n}\n\ninterface CollectionAnalytics {\n  volume: string\n  sales: string\n  floor_price: string\n  market_cap: string\n  holders: number\n  assets: string\n  volume_24h?: string\n}\n\ninterface Holder {\n  account: string\n  assets: string\n}\n\ninterface SimilarCollection {\n  collection_name: string\n  name: string\n  similarity_score?: number\n}\n\ninterface TopSale {\n  sale_id: string\n  assets: Array<{\n    data?: {\n      img?: string\n      video?: string\n      name?: string\n      [key: string]: string | number | boolean | undefined\n    }\n    template?: {\n      template_id: string\n      max_supply: string\n      immutable_data?: Record<string, string | number | boolean>\n    }\n    collection?: {\n      collection_name: string\n      name: string\n      img?: string\n    }\n    schema?: {\n      schema_name: string\n    }\n    asset_id?: string\n    name?: string\n  }>\n  listing_price: string\n  listing_symbol: string\n  seller: string\n  buyer?: string\n  updated_at_time: string\n  state: number\n  collection_name?: string\n  price?: {\n    amount: string\n    token_symbol: string\n    token_precision: number\n    token_contract: string\n  }\n}\n\nconst CollectionDetail: React.FC = React.memo(() => {\n  const { collectionName } = useParams<{ collectionName: string }>()\n  const { settings } = useDisplaySettings()\n  const [collection, setCollection] = useState<CollectionData | null>(null)\n  const [schemas, setSchemas] = useState<Schema[]>([])\n  const [templates, setTemplates] = useState<Template[]>([])\n  const [analytics, setAnalytics] = useState<CollectionAnalytics | null>(null)\n  const [volumePeriod, setVolumePeriod] = useState<'24' | '7' | '30' | '90' | '365'>('24')\n  const [volumeData, setVolumeData] = useState<{[key: string]: string}>({})\n  const [loadingVolume, setLoadingVolume] = useState(false)\n  const [marketCapCurrency, setMarketCapCurrency] = useState<'WAX' | 'USD'>('WAX')\n  const [waxToUsdRate, setWaxToUsdRate] = useState<number>(0.05) // Default WAX price\n  \n  const [holders, setHolders] = useState<Holder[]>([])\n  const [holdersPage, setHoldersPage] = useState(1)\n  const [loadingMoreHolders, setLoadingMoreHolders] = useState(false)\n  const [hasMoreHolders, setHasMoreHolders] = useState(true)\n  const [topSales, setTopSales] = useState<TopSale[]>([])\n  const [displayedSales, setDisplayedSales] = useState<TopSale[]>([])\n  const [salesPage, setSalesPage] = useState(1)\n  const [salesPerPage] = useState(10)\n  const [hasMoreSales, setHasMoreSales] = useState(false)\n  const [similarCollections, setSimilarCollections] = useState<SimilarCollection[]>([])\n  const [atomicMarketStats, setAtomicMarketStats] = useState<{\n    sales: string\n    volume: string\n    suggested_median: string\n    suggested_average: string\n  } | null>(null)\n  const [selectedSchema, setSelectedSchema] = useState<string>('')\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [activeTab, setActiveTab] = useState<'sales' | 'holders' | 'schemas' | 'templates' | 'similar' | 'chat'>('sales')\n  const [searchTerm, setSearchTerm] = useState('')\n  const [sortBy, setSortBy] = useState<'name' | 'created' | 'supply'>('name')\n  const [showImageZoom, setShowImageZoom] = useState(false)\n  const [zoomedImage, setZoomedImage] = useState<{url: string, name: string}>({url: '', name: ''})\n  const [showShareModal, setShowShareModal] = useState(false)\n\n\n\n  // Filter and sort schemas based on search term\n  const filteredSchemas = schemas\n    .filter(schema => \n      schema.schema_name.toLowerCase().includes(searchTerm.toLowerCase())\n    )\n    .sort((a, b) => {\n      switch (sortBy) {\n        case 'name':\n          return a.schema_name.localeCompare(b.schema_name)\n        case 'created':\n          return new Date(b.created_at_time).getTime() - new Date(a.created_at_time).getTime()\n        default:\n          return 0\n      }\n    })\n\n  // Filter and sort templates based on search term and selected schema\n  const filteredTemplates = templates\n    .filter(template => {\n      const matchesSearch = \n        (template.immutable_data?.name && String(template.immutable_data.name).toLowerCase().includes(searchTerm.toLowerCase())) ||\n        template.template_id.toLowerCase().includes(searchTerm.toLowerCase())\n      \n      const matchesSchema = !selectedSchema || template.schema_name === selectedSchema\n      \n      return matchesSearch && matchesSchema\n    })\n    .sort((a, b) => {\n      switch (sortBy) {\n        case 'name': {\n          const nameA = String(a.immutable_data?.name || `Template #${a.template_id}`)\n          const nameB = String(b.immutable_data?.name || `Template #${b.template_id}`)\n          return nameA.localeCompare(nameB)\n        }\n        case 'created':\n          return new Date(b.created_at_time).getTime() - new Date(a.created_at_time).getTime()\n        case 'supply':\n          return parseInt(b.issued_supply) - parseInt(a.issued_supply)\n        default:\n          return 0\n      }\n    })\n\n  // Function to fetch volume data from HiveBP API\n  const fetchVolumeData = useCallback(async (days: string) => {\n    if (!collectionName) return '0'\n    \n    try {\n      const response = await fetch(`https://wax-api.hivebp.io/v3/volume/${days}/${collectionName}`)\n      if (!response.ok) throw new Error('Failed to fetch volume data')\n      const data = await response.json()\n      return data.volume ? String(data.volume) : '0'\n    } catch (error) {\n      console.warn(`Failed to fetch ${days}d volume data:`, error)\n      return '0'\n    }\n  }, [collectionName])\n\n  // Function to fetch collection stats from HiveBP API\n  const fetchCollectionStats = useCallback(async () => {\n    if (!collectionName) return null\n    \n    try {\n      const response = await fetch(`https://wax-api.hivebp.io/v3/collection-stats/${collectionName}`)\n      if (!response.ok) throw new Error('Failed to fetch collection stats')\n      const data = await response.json()\n      return {\n        numUsers: data.numUsers || 0,\n        usdMarketCap: data.usdMarketCap || 0,\n        waxMarketCap: data.waxMarketCap || 0,\n        numAssets: data.numAssets || 0\n      }\n    } catch (error) {\n      console.warn('Failed to fetch collection stats:', error)\n      return null\n    }\n  }, [collectionName])\n\n  // Function to handle volume period switching\n  const handleVolumePeriodChange = useCallback(async () => {\n    if (!collectionName) return\n    \n    setLoadingVolume(true)\n    const periods: Array<'24' | '7' | '30' | '90' | '365'> = ['24', '7', '30', '90', '365']\n    const currentIndex = periods.indexOf(volumePeriod)\n    const nextPeriod = periods[(currentIndex + 1) % periods.length]\n    \n    // Check if we already have this data cached\n    if (volumeData[nextPeriod]) {\n      setVolumePeriod(nextPeriod)\n      setLoadingVolume(false)\n      return\n    }\n    \n    // Fetch new volume data\n    const newVolumeValue = await fetchVolumeData(nextPeriod)\n    setVolumeData(prev => ({ ...prev, [nextPeriod]: newVolumeValue }))\n    setVolumePeriod(nextPeriod)\n    setLoadingVolume(false)\n  }, [collectionName, volumePeriod, volumeData, fetchVolumeData])\n\n  const handleMarketCapToggle = async () => {\n    if (marketCapCurrency === 'WAX') {\n      // Fetch current WAX price when switching to USD\n      try {\n        const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=wax&vs_currencies=usd')\n        const data = await response.json()\n        if (data.wax && data.wax.usd) {\n          setWaxToUsdRate(data.wax.usd)\n        }\n      } catch (error) {\n        console.warn('Could not fetch WAX price:', error)\n      }\n      setMarketCapCurrency('USD')\n    } else {\n      setMarketCapCurrency('WAX')\n    }\n  }\n\n  const loadCollectionData = useCallback(async () => {\n    if (!collectionName) return\n    \n    setLoading(true)\n    setError(null)\n    \n    try {\n      // Load basic collection data first\n      const [collectionInfo, schemasData, templatesData] = await Promise.all([\n        apiService.getCollectionDetails(collectionName),\n        apiService.getCollectionSchemas(collectionName),\n        apiService.getCollectionTemplates(collectionName)\n      ])\n      \n      setCollection(collectionInfo)\n      setSchemas(schemasData)\n      setTemplates(templatesData)\n      \n      // Load enhanced analytics from HiveBP API and holder stats (non-blocking)\n      Promise.all([\n        apiService.getCollectionAnalytics(collectionName),\n        apiService.getEnhancedCollectionStats(collectionName),\n        apiService.getCollectionVolumeGraph(collectionName, 30),\n        apiService.getSimilarCollections(collectionName),\n        apiService.getCollectionHolders(collectionName, 500),\n        apiService.getCollectionTopSales(collectionName, 50),\n        fetchVolumeData('24'), // Fetch initial 24h volume data\n        fetchCollectionStats(), // Fetch collection stats from HiveBP API\n        apiService.getCollectionMarketStats({ collection_name: collectionName, symbol: 'WAX' }) // Fetch atomicmarket stats\n      ]).then(([analyticsData, enhancedStats, , similarData, holdersData, salesData, volume24h, collectionStats, marketStats]) => {\n        \n        // Cache the initial 24h volume data\n        setVolumeData(prev => ({ ...prev, '24': volume24h }))\n        \n        // Store atomicmarket stats with proper WAX decimal conversion\n        const processedMarketStats = marketStats.success && marketStats.data ? {\n          sales: marketStats.data.sales || '0',\n          volume: marketStats.data.volume ? String(parseFloat(marketStats.data.volume) / Math.pow(10, 8)) : '0',\n          suggested_median: marketStats.data.suggested_median ? String(parseFloat(marketStats.data.suggested_median) / Math.pow(10, 8)) : '0',\n          suggested_average: marketStats.data.suggested_average ? String(parseFloat(marketStats.data.suggested_average) / Math.pow(10, 8)) : '0'\n        } : null\n        \n        setAtomicMarketStats(processedMarketStats)\n        \n        // Merge analytics data with enhanced HiveBP stats\n        const combinedAnalytics: CollectionAnalytics = {\n           volume: processedMarketStats?.volume || analyticsData?.volume || '0',\n           sales: processedMarketStats?.sales || analyticsData?.sales || '0',\n           floor_price: enhancedStats.floorPrice && !isNaN(enhancedStats.floorPrice) ? String(enhancedStats.floorPrice) : \n             (analyticsData?.floor_price && !isNaN(parseFloat(analyticsData.floor_price)) ? analyticsData.floor_price : \n             (analyticsData?.floor && !isNaN(parseFloat(analyticsData.floor)) ? analyticsData.floor : \n             (processedMarketStats?.suggested_median && !isNaN(parseFloat(processedMarketStats.suggested_median)) ? processedMarketStats.suggested_median :\n             (salesData && salesData.length > 0 ? (() => {\n               const validPrices = salesData.slice(-5).map(sale => {\n                 const price = typeof sale.price === 'string' ? sale.price : (sale.price?.amount || '0')\n                 return parseFloat(price || '0')\n               }).filter(price => !isNaN(price) && price > 0)\n               return validPrices.length > 0 ? String(Math.min(...validPrices).toFixed(2)) : '0'\n             })() : '0')))),\n           market_cap: collectionStats?.waxMarketCap ? String(collectionStats.waxMarketCap) : enhancedStats.marketCap ? String(enhancedStats.marketCap) : (analyticsData?.market_cap || '0'),\n           holders: collectionStats?.numUsers || analyticsData?.holders || 0,\n           assets: collectionStats?.numAssets ? String(collectionStats.numAssets) : (analyticsData?.assets || '0'),\n           volume_24h: volume24h || (enhancedStats.volume24h ? String(enhancedStats.volume24h) : (analyticsData?.volume_24h || analyticsData?.volume || '0'))\n         }\n        \n        setAnalytics(combinedAnalytics)\n        // setVolumeGraph(volumeData) // Unused\n        setSimilarCollections(similarData)\n        setHolders(holdersData)\n        setTopSales(salesData || [])\n      }).catch(error => {\n        log.error('Enhanced analytics failed to load', 'CollectionDetail.loadCollectionData', error as Error, { collectionName })\n      })\n      \n    } catch (error) {\n      log.error('Failed to load collection data', 'CollectionDetail.loadCollectionData', error as Error, { collectionName })\n      setError(`Failed to load collection \"${collectionName}\". This collection may not exist or be temporarily unavailable.`)\n    } finally {\n      setLoading(false)\n    }\n  }, [collectionName])\n\n  const loadTemplates = useCallback(async (schemaName: string) => {\n    if (!collectionName) return\n    \n    try {\n      const templatesData = await apiService.getCollectionTemplates(collectionName, schemaName)\n      setTemplates(templatesData)\n    } catch (error) {\n      log.error('Failed to load collection templates', 'CollectionDetail.loadTemplates', error as Error, { collectionName, schemaName })\n    }\n  }, [collectionName])\n\n  useEffect(() => {\n    if (collectionName) {\n      loadCollectionData()\n    }\n  }, [collectionName, loadCollectionData])\n\n  useEffect(() => {\n    if (selectedSchema && collectionName) {\n      loadTemplates(selectedSchema)\n    }\n  }, [selectedSchema, collectionName, loadTemplates])\n\n  const loadMoreHolders = async () => {\n    if (!collectionName || loadingMoreHolders || !hasMoreHolders) return\n    \n    setLoadingMoreHolders(true)\n    try {\n      const nextPage = holdersPage + 1\n      const offset = (nextPage - 1) * 500\n      const newHolders = await apiService.getCollectionHolders(collectionName, 500, offset)\n      \n      if (newHolders && newHolders.length > 0) {\n        setHolders(prev => [...prev, ...newHolders])\n        setHoldersPage(nextPage)\n        setHasMoreHolders(newHolders.length === 500) // If we got less than 500, no more pages\n      } else {\n        setHasMoreHolders(false)\n      }\n    } catch (error) {\n      console.error('Error loading more holders:', error as Error)\n      setHasMoreHolders(false)\n    } finally {\n      setLoadingMoreHolders(false)\n    }\n  }\n\n  // Update displayed sales when topSales changes or page changes\n  useEffect(() => {\n    const startIndex = 0\n    const endIndex = salesPage * salesPerPage\n    const newDisplayedSales = topSales.slice(startIndex, endIndex)\n    setDisplayedSales(newDisplayedSales)\n    setHasMoreSales(endIndex < topSales.length)\n  }, [topSales, salesPage, salesPerPage])\n\n  const loadMoreSales = () => {\n    if (hasMoreSales) {\n      setSalesPage(prev => prev + 1)\n    }\n  }\n\n  const getImageUrl = (imgPath: string): string | undefined => {\n    if (!imgPath) return undefined\n    if (imgPath.startsWith('http')) return imgPath\n    return `https://ipfs.io/ipfs/${imgPath}`\n  }\n\n  const getTemplateImage = (template: Template): string => {\n    if (template.immutable_data?.img) {\n      const img = template.immutable_data.img\n      if (typeof img === 'string') {\n        return img.startsWith('Qm') ? `https://ipfs.io/ipfs/${img}` : img\n      }\n    }\n    return 'https://pixeljourney.xyz/img/toppixals/10.webp'\n  }\n\n  const getVideoUrl = (template: Template): string | null => {\n    if (template.immutable_data?.video) {\n      const video = template.immutable_data.video\n      if (typeof video === 'string') {\n        return video.startsWith('Qm') ? `${API_ENDPOINTS.IPFS.GATEWAYS[0]}${video}` : video\n      }\n    }\n    return null\n  }\n\n\n\n\n\n  const formatSaleDate = (dateString: string): string => {\n    if (!dateString) return 'N/A'\n    try {\n      // Handle different date formats\n      let date: Date\n      if (dateString.includes('T')) {\n        // ISO string format\n        date = new Date(dateString)\n      } else {\n        // Handle timestamp - AtomicMarket API returns timestamps in seconds\n        const timestamp = parseInt(dateString)\n        // Check if timestamp is reasonable (after year 2000 and before year 2100)\n        if (timestamp > 946684800 && timestamp < 4102444800) {\n          // Timestamp is in seconds, convert to milliseconds\n          date = new Date(timestamp * 1000)\n        } else if (timestamp > 946684800000 && timestamp < 4102444800000) {\n          // Timestamp is already in milliseconds\n          date = new Date(timestamp)\n        } else {\n          // Invalid timestamp\n          return 'N/A'\n        }\n      }\n      \n      if (isNaN(date.getTime())) {\n        return 'N/A'\n      }\n      \n      return date.toLocaleDateString('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric'\n      })\n    } catch {\n      return 'N/A'\n    }\n  }\n\n  const renderMediaElement = (template: Template, className: string = 'template-image') => {\n    const videoUrl = getVideoUrl(template)\n    const imageUrl = getTemplateImage(template)\n    \n    return (\n      <MediaRenderer\n        imageUrl={imageUrl}\n        videoUrl={videoUrl}\n        alt={String(template.immutable_data?.name || 'NFT')}\n        className={className}\n        enableAnimations={settings.enableAnimatedNFTs}\n      />\n    )\n  }\n\n  const formatSupply = (current: string, max: string): string => {\n    if (max === '0') return `${current} (Unlimited)`\n    return `${current} / ${max}`\n  }\n\n  if (loading) {\n    return (\n      <div className=\"collection-detail-container\">\n        <div className=\"loading-state\">\n          <div className=\"spinner\"></div>\n          <p>Loading collection details...</p>\n        </div>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"collection-detail-container\">\n        <div className=\"error-state\">\n          <h2>Collection Error</h2>\n          <p>{error}</p>\n          <Link to=\"/collections\" className=\"back-link\">← Back to Collections</Link>\n        </div>\n      </div>\n    )\n  }\n\n  if (!collection) {\n    return (\n      <div className=\"collection-detail-container\">\n        <div className=\"error-state\">\n          <h2>Collection Not Found</h2>\n          <p>The collection \"{collectionName}\" could not be found.</p>\n          <Link to=\"/collections\" className=\"back-link\">← Back to Collections</Link>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"collection-profile-page\">\n      {/* Hero Section */}\n      <div className=\"collection-hero\">\n        <div className=\"hero-background\">\n          <img \n            src={getImageUrl(collection.img || '')} \n            alt={collection.name || collection.collection_name}\n            className=\"hero-bg-image\"\n          />\n          <div className=\"hero-overlay\"></div>\n        </div>\n        \n        <div className=\"hero-content\">\n          <div className=\"breadcrumb\">\n            <Link to=\"/\" className=\"breadcrumb-link\">Home</Link>\n            <span className=\"breadcrumb-separator\">›</span>\n            <Link to=\"/collections\" className=\"breadcrumb-link\">Collections</Link>\n            <span className=\"breadcrumb-separator\">›</span>\n            <span className=\"breadcrumb-current\">{collection.name || collection.collection_name}</span>\n          </div>\n          \n          <div className=\"collection-profile\">\n            <div className=\"collection-logo-container\">\n              <img \n                src={getImageUrl(collection.img || '')} \n                alt={collection.name || collection.collection_name}\n                className=\"collection-logo\"\n              />\n            </div>\n            \n            <div className=\"profile-info\">\n              <div className=\"title-section\">\n                <h1 className=\"collection-title\">{collection.name || collection.collection_name}</h1>\n              </div>\n              \n              {/* Collection Tier and Share Button Row */}\n              <div className=\"collection-actions-row\" style={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: '12px',\n                marginTop: '8px',\n                marginBottom: '12px'\n              }}>\n                {(() => {\n                  const tierInfo = getCollectionTier(collection.collection_name)\n                  if (tierInfo) {\n                    const badgeConfig = getTierBadgeConfig(tierInfo.tier)\n                    return (\n                      <div className={`collection-tier-badge ${badgeConfig.className}`}>\n                        <span className=\"tier-icon\">{badgeConfig.icon}</span>\n                        <span className=\"tier-label\">{badgeConfig.label}</span>\n                        {tierInfo.verified && <span className=\"verified-icon\">✓</span>}\n                      </div>\n                    )\n                  }\n                  return null\n                })()}\n                <button \n                  className=\"share-button\"\n                  onClick={() => setShowShareModal(true)}\n                  style={{\n                    background: 'rgba(255, 255, 255, 0.1)',\n                    border: '1px solid rgba(255, 255, 255, 0.2)',\n                    borderRadius: '8px',\n                    padding: '8px 12px',\n                    color: 'white',\n                    cursor: 'pointer',\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '6px',\n                    fontSize: '14px',\n                    fontWeight: '500',\n                    transition: 'all 0.2s ease'\n                  }}\n                  onMouseEnter={(e) => {\n                    e.currentTarget.style.background = 'rgba(255, 255, 255, 0.15)'\n                    e.currentTarget.style.borderColor = 'rgba(255, 255, 255, 0.3)'\n                  }}\n                  onMouseLeave={(e) => {\n                    e.currentTarget.style.background = 'rgba(255, 255, 255, 0.1)'\n                    e.currentTarget.style.borderColor = 'rgba(255, 255, 255, 0.2)'\n                  }}\n                >\n                  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M18 16.08C17.24 16.08 16.56 16.38 16.04 16.85L8.91 12.7C8.96 12.47 9 12.24 9 12C9 11.76 8.96 11.53 8.91 11.3L15.96 7.19C16.5 7.69 17.21 8 18 8C19.66 8 21 6.66 21 5C21 3.34 19.66 2 18 2C16.34 2 15 3.34 15 5C15 5.24 15.04 5.47 15.09 5.7L8.04 9.81C7.5 9.31 6.79 9 6 9C4.34 9 3 10.34 3 12C3 13.66 4.34 15 6 15C6.79 15 7.5 14.69 8.04 14.19L15.16 18.34C15.11 18.55 15.08 18.77 15.08 19C15.08 20.61 16.39 21.92 18 21.92C19.61 21.92 20.92 20.61 20.92 19C20.92 17.39 19.61 16.08 18 16.08Z\" fill=\"currentColor\"/>\n                  </svg>\n                  Share Collection\n                </button>\n              </div>\n              <p className=\"collection-handle\">@{collection.collection_name}</p>\n              <p className=\"collection-creator\">Created by {collection.author}</p>\n              \n              {collection.data?.description && (\n                <div className=\"collection-description\">\n                  <TruncatedText \n                    text={String(collection.data.description || '')} \n                    maxLength={100}\n                    className=\"description-text\"\n                  />\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Stats Dashboard */}\n      <div className=\"stats-dashboard\">\n        {/* Basic Stats Row */}\n        <div className=\"stats-grid\">\n          <div className=\"stat-card\">\n            <div className=\"stat-value\">{analytics?.assets || collection.assets || 0}</div>\n            <div className=\"stat-label\">Total Assets</div>\n          </div>\n          <div className=\"stat-card\">\n            <div className=\"stat-value\">{schemas.length}</div>\n            <div className=\"stat-label\">Schemas</div>\n          </div>\n          <div className=\"stat-card\">\n            <div className=\"stat-value\">{templates.length}</div>\n            <div className=\"stat-label\">Templates</div>\n          </div>\n          <div className=\"stat-card\">\n            <div className=\"stat-value\">{holders.length}</div>\n            <div className=\"stat-label\">Holders</div>\n          </div>\n        </div>\n        \n        {/* Premium Stats Row */}\n        {analytics && (\n          <div className=\"stats-grid\">\n            <div className=\"stat-card premium clickable\" onClick={handleMarketCapToggle} style={{ cursor: 'pointer' }}>\n              <div className=\"stat-value\">\n                {analytics.market_cap && analytics.market_cap !== '0' \n                  ? marketCapCurrency === 'WAX'\n                    ? `${parseFloat(analytics.market_cap).toLocaleString()} WAX`\n                    : `$${(parseFloat(analytics.market_cap) * waxToUsdRate).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`\n                  : 'N/A'\n                }\n              </div>\n              <div className=\"stat-label\">Market Cap ({marketCapCurrency})</div>\n            </div>\n            <div className=\"stat-card premium\">\n              <div className=\"stat-value\">\n                {atomicMarketStats?.sales && atomicMarketStats.sales !== '0'\n                  ? `${parseInt(atomicMarketStats.sales).toLocaleString()}`\n                  : analytics?.sales && analytics.sales !== '0'\n                  ? `${parseInt(analytics.sales).toLocaleString()}`\n                  : 'N/A'\n                }\n              </div>\n              <div className=\"stat-label\">All Time Sales</div>\n            </div>\n            <div className=\"stat-card premium\">\n              <div className=\"stat-value\">\n                {atomicMarketStats?.volume && atomicMarketStats.volume !== '0'\n                  ? `${parseFloat(atomicMarketStats.volume).toLocaleString()} WAX`\n                  : analytics?.volume && analytics.volume !== '0'\n                  ? `${parseFloat(analytics.volume).toLocaleString()} WAX`\n                  : 'N/A'\n                }\n              </div>\n              <div className=\"stat-label\">All Time Volume</div>\n            </div>\n            <div className=\"stat-card premium clickable\" onClick={handleVolumePeriodChange} style={{ cursor: 'pointer' }}>\n              <div className=\"stat-value\">\n                {loadingVolume ? (\n                  <span style={{ opacity: 0.6 }}>Loading...</span>\n                ) : (\n                  volumeData[volumePeriod] && volumeData[volumePeriod] !== '0' \n                    ? `${parseFloat(volumeData[volumePeriod]).toLocaleString()} WAX` \n                    : analytics?.volume_24h && analytics.volume_24h !== '0'\n                      ? `${parseFloat(analytics.volume_24h).toLocaleString()} WAX`\n                      : 'N/A'\n                )}\n              </div>\n              <div className=\"stat-label\">\n                {volumePeriod === '24' ? '24H' : volumePeriod === '7' ? '7D' : volumePeriod === '30' ? '30D' : volumePeriod === '90' ? '90D' : '365D'} Volume\n                <span style={{ fontSize: '0.8em', opacity: 0.7, marginLeft: '4px' }}>↻</span>\n              </div>\n            </div>\n            <div className=\"stat-card premium\">\n              <div className=\"stat-value\">\n                {analytics.floor_price && analytics.floor_price !== '0' && !isNaN(parseFloat(analytics.floor_price)) && parseFloat(analytics.floor_price) > 0\n                  ? `${parseFloat(analytics.floor_price).toFixed(2)} WAX` \n                  : atomicMarketStats?.suggested_median && atomicMarketStats.suggested_median !== '0' && !isNaN(parseFloat(atomicMarketStats.suggested_median))\n                  ? `${parseFloat(atomicMarketStats.suggested_median).toFixed(2)} WAX`\n                  : topSales && topSales.length > 0\n                  ? (() => {\n                      const validPrices = topSales.slice(-3).map(sale => {\n                        const price = typeof sale.price === 'string' ? sale.price : (sale.price?.amount || '0')\n                        return parseFloat(price || '0')\n                      }).filter(price => !isNaN(price) && price > 0)\n                      return validPrices.length > 0 ? `~${Math.min(...validPrices).toFixed(2)} WAX` : 'N/A'\n                    })()\n                  : 'N/A'\n                }\n              </div>\n              <div className=\"stat-label\">Floor Price</div>\n            </div>\n          </div>\n        )}\n      </div>\n      \n      {/* Quick Links Component */}\n      <QuickLinks collectionName={collection.collection_name} />\n        \n      {/* Modern Pane Switcher */}\n      <div className=\"collection-content-navigation\">\n        <div className=\"collection-nav-container\">\n          <div className=\"collection-nav-tabs\">\n             <button \n               className={`collection-nav-tab ${activeTab === 'sales' ? 'active' : ''}`}\n               onClick={() => setActiveTab('sales')}\n             >\n               <div className=\"tab-content\">\n                 <span className=\"tab-icon\">💰</span>\n                 <span className=\"tab-text\">Top Sales</span>\n                 <span className=\"tab-count\">{displayedSales.length}</span>\n               </div>\n             </button>\n             <button \n               className={`collection-nav-tab ${activeTab === 'holders' ? 'active' : ''}`}\n               onClick={() => setActiveTab('holders')}\n             >\n               <div className=\"tab-content\">\n                 <span className=\"tab-icon\">👥</span>\n                 <span className=\"tab-text\">Holders</span>\n                 <span className=\"tab-count\">{holders.length}</span>\n               </div>\n             </button>\n             <button \n               className={`collection-nav-tab ${activeTab === 'schemas' ? 'active' : ''}`}\n               onClick={() => setActiveTab('schemas')}\n             >\n               <div className=\"tab-content\">\n                 <span className=\"tab-icon\">📋</span>\n                 <span className=\"tab-text\">Schemas</span>\n                 <span className=\"tab-count\">{filteredSchemas.length}</span>\n               </div>\n             </button>\n             <button \n               className={`collection-nav-tab ${activeTab === 'templates' ? 'active' : ''}`}\n               onClick={() => setActiveTab('templates')}\n             >\n               <div className=\"tab-content\">\n                 <span className=\"tab-icon\">🎨</span>\n                 <span className=\"tab-text\">Templates</span>\n                 <span className=\"tab-count\">{filteredTemplates.length}</span>\n               </div>\n             </button>\n             <button \n               className={`collection-nav-tab ${activeTab === 'similar' ? 'active' : ''}`}\n               onClick={() => setActiveTab('similar')}\n             >\n               <div className=\"tab-content\">\n                 <span className=\"tab-icon\">🔗</span>\n                 <span className=\"tab-text\">Similar</span>\n                 <span className=\"tab-count\">{similarCollections.length}</span>\n               </div>\n             </button>\n             <button \n               className={`collection-nav-tab ${activeTab === 'chat' ? 'active' : ''}`}\n               onClick={() => setActiveTab('chat')}\n             >\n               <div className=\"tab-content\">\n                 <span className=\"tab-icon\">💬</span>\n                 <span className=\"tab-text\">Chat</span>\n                 <span className=\"tab-count\">0</span>\n               </div>\n             </button>\n           </div>\n          <div className=\"nav-indicator\"></div>\n        </div>\n      </div>\n\n        {/* Tab Content */}\n        <div className=\"tab-content-area\">\n          {activeTab === 'sales' && (\n            <div className=\"sales-section\">\n              <div className=\"sales-grid\">\n                {displayedSales.length > 0 ? (\n                  displayedSales.map((sale: TopSale, index: number) => (\n                    <div key={sale.sale_id || index} className=\"sale-item\">\n                      <div className=\"sale-rank\">#{index + 1}</div>\n                      <div className=\"sale-media\">\n                        <MediaRenderer\n                          imageUrl={getSaleAssetImageUrl(sale)}\n                          videoUrl={getSaleAssetVideoUrl(sale)}\n                          alt={String(sale.assets?.[0]?.data?.name || sale.assets?.[0]?.template?.immutable_data?.name || 'NFT')}\n                          className=\"sale-image\"\n                          controls={true}\n                          muted={true}\n                          loop={true}\n                          enableAnimations={settings.enableAnimatedNFTs}\n                        />\n                        <div \n                          className=\"zoom-overlay\"\n                          onClick={() => {\n                            const imageUrl = getSaleAssetImageUrl(sale)\n                            const name = String(sale.assets?.[0]?.data?.name || sale.assets?.[0]?.template?.immutable_data?.name || 'NFT')\n                            if (imageUrl) {\n                              setZoomedImage({url: imageUrl, name})\n                            }\n                            setShowImageZoom(true)\n                          }}\n                        >\n                          <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                            <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/>\n                            <path d=\"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z\"/>\n                          </svg>\n                        </div>\n                      </div>\n                      <div className=\"sale-details\">\n                        <div className=\"sale-name\">{sale.assets?.[0]?.data?.name || sale.assets?.[0]?.template?.immutable_data?.name || 'Unnamed NFT'}</div>\n                        <div className=\"sale-template\">Template #{sale.assets?.[0]?.template?.template_id}</div>\n                        <div className=\"sale-price\">\n                          {sale.price ? (parseInt(sale.price.amount) / Math.pow(10, sale.price.token_precision)).toFixed(sale.price.token_precision) + ' ' + sale.price.token_symbol : 'N/A'}\n                        </div>\n                        <div className=\"sale-date\">\n                          {formatSaleDate(sale.updated_at_time || '')}\n                        </div>\n                      </div>\n                    </div>\n                  ))\n                ) : (\n                  <div className=\"no-data\">No sales data available</div>\n                )}\n              </div>\n              {hasMoreSales && (\n                <div className=\"load-more-section\">\n                  <button \n                    className=\"load-more-btn\" \n                    onClick={loadMoreSales}\n                  >\n                    Load More Sales\n                  </button>\n                </div>\n              )}\n            </div>\n          )}\n\n          {activeTab === 'holders' && (\n            <div className=\"holders-section\">\n              <div className=\"holders-grid\">\n                {holders.length > 0 ? (\n                  holders.map((holder: Holder, index: number) => (\n                    <div key={index} className=\"holder-item\">\n                      <div className=\"holder-rank\">#{index + 1}</div>\n                      <Link to={`/profile-lookup/${holder.account}`} className=\"holder-account clickable\">\n                        {holder.account}\n                      </Link>\n                      <div className=\"holder-count\">{holder.assets} assets</div>\n                    </div>\n                  ))\n                ) : (\n                  <div className=\"no-data\">No holders data available</div>\n                )}\n              </div>\n              {hasMoreHolders && (\n                <div className=\"load-more-section\">\n                  <button \n                    className=\"load-more-btn\" \n                    onClick={loadMoreHolders}\n                    disabled={loadingMoreHolders}\n                  >\n                    {loadingMoreHolders ? 'Loading...' : 'Load More Holders'}\n                  </button>\n                </div>\n              )}\n            </div>\n          )}\n\n          {activeTab === 'similar' && (\n            <div className=\"similar-collections\">\n              <div className=\"similar-collections-grid\">\n                {similarCollections.length > 0 ? (\n                  similarCollections.slice(0, 12).map((similar: SimilarCollection, index: number) => (\n                    <div key={index} className=\"similar-collection-item\">\n                      <Link to={`/collections/${similar.collection_name}`}>\n                        <div className=\"similar-collection-name\">{similar.collection_name}</div>\n                        <div className=\"similar-collection-volume\">Similar Collection</div>\n                      </Link>\n                    </div>\n                  ))\n                ) : (\n                  <div className=\"no-data\">No similar collections found</div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'chat' && (\n            <div className=\"chat-section\">\n              <div className=\"chat-container\">\n                <ChatWidget \n                  collectionName={collectionName}\n                />\n              </div>\n            </div>\n          )}\n\n        {/* Search and Filter Section */}\n        <div className=\"search-filter-section\">\n          <div className=\"search-controls\">\n            <div className=\"search-input-container\">\n              <svg className=\"search-icon\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/>\n              </svg>\n              <input\n                type=\"text\"\n                placeholder={`Search ${activeTab}...`}\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"search-input\"\n              />\n              {searchTerm && (\n                <button \n                  onClick={() => setSearchTerm('')}\n                  className=\"clear-search\"\n                  aria-label=\"Clear search\"\n                >\n                  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                    <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n                  </svg>\n                </button>\n              )}\n            </div>\n            <div className=\"sort-container\">\n              <label htmlFor=\"sortBy\">Sort by:</label>\n              <select\n                id=\"sortBy\"\n                value={sortBy}\n                onChange={(e) => setSortBy(e.target.value as 'name' | 'created' | 'supply')}\n                className=\"sort-select\"\n              >\n                <option value=\"name\">Name</option>\n                <option value=\"created\">Created Date</option>\n                {activeTab === 'templates' && <option value=\"supply\">Supply</option>}\n              </select>\n            </div>\n          </div>\n          {searchTerm && (\n            <div className=\"search-results-info\">\n              <p>Found {activeTab === 'schemas' ? filteredSchemas.length : filteredTemplates.length} results for \"{searchTerm}\"</p>\n            </div>\n          )}\n\n          {activeTab === 'schemas' && (\n            <div className=\"schemas-section\">\n              {filteredSchemas.length === 0 ? (\n                <div className=\"empty-state\">\n                  {searchTerm ? (\n                    <>\n                      <svg className=\"empty-icon\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                        <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/>\n                      </svg>\n                      <h3>No schemas found</h3>\n                      <p>No schemas match your search \"{searchTerm}\"</p>\n                      <button onClick={() => setSearchTerm('')} className=\"clear-search-button\">\n                        Clear Search\n                      </button>\n                    </>\n                  ) : (\n                    <p>No schemas found for this collection.</p>\n                  )}\n                </div>\n              ) : (\n                <div className=\"schemas-grid\">\n                  {filteredSchemas.map((schema) => (\n                    <div key={schema.schema_name} className=\"schema-card\">\n                      <div className=\"schema-header\">\n                        <h3>{schema.schema_name}</h3>\n                        <button \n                          className=\"view-templates-btn\"\n                          onClick={() => {\n                            setSelectedSchema(schema.schema_name)\n                            setActiveTab('templates')\n                          }}\n                        >\n                          View Templates\n                        </button>\n                      </div>\n                      <div className=\"schema-format\">\n                        <h4>Attributes:</h4>\n                        <div className=\"attributes-list\">\n                          {schema.format.map((attr, index) => (\n                            <div key={index} className=\"attribute\">\n                              <span className=\"attr-name\">{attr.name}</span>\n                              <span className=\"attr-type\">{attr.type}</span>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          )}\n\n          {activeTab === 'templates' && (\n            <div className=\"templates-section\">\n              {selectedSchema && (\n                <div className=\"schema-filter\">\n                  <label>Filter by Schema:</label>\n                  <select \n                    value={selectedSchema} \n                    onChange={(e) => setSelectedSchema(e.target.value)}\n                  >\n                    <option value=\"\">All Schemas</option>\n                    {schemas.map((schema) => (\n                      <option key={schema.schema_name} value={schema.schema_name}>\n                        {schema.schema_name}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n              )}\n              \n              {filteredTemplates.length === 0 ? (\n                <div className=\"empty-state\">\n                  {searchTerm ? (\n                    <>\n                      <svg className=\"empty-icon\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                        <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/>\n                      </svg>\n                      <h3>No templates found</h3>\n                      <p>No templates match your search \"{searchTerm}\"</p>\n                      <button onClick={() => setSearchTerm('')} className=\"clear-search-button\">\n                        Clear Search\n                      </button>\n                    </>\n                  ) : (\n                    <p>No templates found{selectedSchema ? ` for schema \"${selectedSchema}\"` : ' for this collection'}.</p>\n                  )}\n                </div>\n              ) : (\n                <div className=\"templates-grid\">\n                  {filteredTemplates.map((template) => (\n                    <Link \n                      key={template.template_id} \n                      to={`/collections/${collectionName}/templates/${template.template_id}`}\n                      className=\"template-card\"\n                    >\n                      {renderMediaElement(template, 'template-image')}\n                      <div className=\"template-info\">\n                        <h4>{String(template.immutable_data?.name || `Template #${template.template_id}`)}</h4>\n                        <p className=\"template-schema\">Template ID: {template.template_id}</p>\n                        <p className=\"template-supply\">\n                          Supply: {formatSupply(template.issued_supply, template.max_supply)}\n                        </p>\n                      </div>\n                    </Link>\n                  ))}\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n      \n      {/* Image Zoom Modal */}\n      {showImageZoom && (\n        <ImageZoom\n          isOpen={showImageZoom}\n          imageUrl={zoomedImage.url}\n          imageName={zoomedImage.name}\n          onClose={() => setShowImageZoom(false)}\n        />\n      )}\n       \n      {/* Share Modal */}\n      {showShareModal && (\n        <ShareModal\n          isOpen={showShareModal}\n          onClose={() => setShowShareModal(false)}\n          title={collection?.name || collection?.collection_name || 'Collection'}\n          description={String(collection?.data?.description || `Check out this amazing collection: ${collection?.name || collection?.collection_name}`)}\n          imageUrl={getImageUrl(collection?.img || '')}\n          shareUrl={`${window.location.origin}/collections/${collection?.collection_name}`}\n          defaultShareText={`Check out the ${collection?.name || collection?.collection_name} collection on PxMarket! 🎮✨ Explore it at market.pixeljourney.xyz`}\n          type=\"collection\"\n        />\n      )}\n    </div>\n  )\n})\n\nCollectionDetail.displayName = 'CollectionDetail'\n\nexport default CollectionDetail","import React, { useState, useEffect, useCallback } from 'react'\nimport { useParams, Link } from 'react-router-dom'\nimport { apiService, type TemplateData, type AssetDetails } from '../services/api'\nimport MediaRenderer from './MediaRenderer'\nimport { getAssetImageUrl, getAssetVideoUrl, getTemplateImageUrl, getTemplateVideoUrl } from '../utils/mediaUtils'\nimport { useDisplaySettings } from '../hooks/useDisplaySettings'\nimport ShareModal from './ShareModal'\nimport '../css/template-detail.css'\n\n\n\nconst TemplateDetail: React.FC = () => {\n  const { collectionName, templateId } = useParams<{ collectionName: string; templateId: string }>()\n  const { settings } = useDisplaySettings()\n  const [template, setTemplate] = useState<TemplateData | null>(null)\n  const [collection, setCollection] = useState<{\n    collection_name: string\n    name: string\n    img?: string\n    author: string\n    allow_notify: boolean\n    authorized_accounts: string[]\n    notify_accounts: string[]\n    market_fee: number\n    created_at_block: string\n    created_at_time: string\n  } | null>(null)\n  const [schema, setSchema] = useState<{\n    schema_name: string\n    format: Array<{\n      name: string\n      type: string\n    }>\n  } | null>(null)\n  const [assets, setAssets] = useState<AssetDetails[]>([])\n  const [loading, setLoading] = useState(false)\n  const [assetsLoading, setAssetsLoading] = useState(false)\n  const [currentPage, setCurrentPage] = useState(1)\n  const [hasMore, setHasMore] = useState(true)\n  const [showShareModal, setShowShareModal] = useState(false)\n  const assetsPerPage = 20\n\n  const loadTemplateData = useCallback(async () => {\n    if (!collectionName || !templateId) return\n    \n    setLoading(true)\n    try {\n      // Get template, collection, and schema data\n      const [templates, collectionData, schemasData] = await Promise.all([\n        apiService.getCollectionTemplates(collectionName),\n        apiService.getCollectionDetails(collectionName),\n        apiService.getCollectionSchemas(collectionName)\n      ])\n      \n      const templateData = templates.find(t => t.template_id === templateId)\n      setTemplate(templateData || null)\n      setCollection(collectionData)\n      \n      // Find the schema for this template by checking assets\n      if (templateData) {\n        const assets = await apiService.getCollectionAssets(collectionName, undefined, templateId, 1)\n        if (assets.length > 0) {\n          const schemaName = assets[0].schema_name\n          const schemaData = schemasData.find(s => s.schema_name === schemaName)\n          setSchema(schemaData || null)\n        }\n      }\n    } catch (error) {\n      console.error('Error loading template data:', error)\n    } finally {\n      setLoading(false)\n    }\n  }, [collectionName, templateId, setLoading, setTemplate, setCollection, setSchema])\n\n  const loadAssets = useCallback(async (page: number) => {\n    if (!collectionName || !templateId) return\n    \n    setAssetsLoading(true)\n    try {\n      const assetsData = await apiService.getCollectionAssets(\n        collectionName, \n        undefined, // schemaName\n        templateId, \n        assetsPerPage\n      )\n      \n      if (page === 1) {\n        setAssets(assetsData)\n      } else {\n        setAssets(prev => [...prev, ...assetsData])\n      }\n      \n      setHasMore(assetsData.length === assetsPerPage)\n      setCurrentPage(page)\n    } catch (error) {\n      console.error('Error loading assets:', error)\n    } finally {\n      setAssetsLoading(false)\n    }\n  }, [collectionName, templateId, setAssetsLoading, setAssets, setHasMore, setCurrentPage])\n\n  useEffect(() => {\n    if (collectionName && templateId) {\n      loadTemplateData()\n      loadAssets(1)\n    }\n  }, [collectionName, templateId, loadTemplateData, loadAssets])\n\n  const loadMoreAssets = () => {\n    if (!assetsLoading && hasMore) {\n      loadAssets(currentPage + 1)\n    }\n  }\n\n\n\n\n\n  const formatDate = (timestamp: string): string => {\n    return new Date(parseInt(timestamp) * 1000).toLocaleDateString()\n  }\n\n  const renderAttributeValue = (value: string | number | boolean | null | undefined | object): string => {\n    if (typeof value === 'object' && value !== null) {\n      return JSON.stringify(value)\n    }\n    return String(value)\n  }\n\n  if (loading) {\n    return (\n      <div className=\"template-detail-container\">\n        <div className=\"loading-state\">\n          <div className=\"spinner\"></div>\n          <p>Loading template details...</p>\n        </div>\n      </div>\n    )\n  }\n\n  if (!template) {\n    return (\n      <div className=\"template-detail-container\">\n        <div className=\"error-state\">\n          <h2>Template Not Found</h2>\n          <p>The template \"{templateId}\" could not be found in collection \"{collectionName}\".</p>\n          <Link to={`/collections/${collectionName}`} className=\"back-link\">\n            ← Back to Collection\n          </Link>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"template-detail-container\">\n      {/* Navigation */}\n      <div className=\"breadcrumb\">\n        <Link to=\"/collections\" className=\"breadcrumb-link\">Collections</Link>\n        <span className=\"breadcrumb-separator\">›</span>\n        <Link to={`/collections/${collectionName}`} className=\"breadcrumb-link\">\n          {collection?.name || collectionName}\n        </Link>\n        <span className=\"breadcrumb-separator\">›</span>\n        <span className=\"breadcrumb-current\">{`Template #${templateId}`}</span>\n      </div>\n\n      <div className=\"template-content\">\n        {/* Template Header */}\n      <div className=\"template-header\">\n        <div className=\"template-image-container\">\n          {template && (\n            <MediaRenderer\n              imageUrl={getTemplateImageUrl(template)}\n              videoUrl={getTemplateVideoUrl(template)}\n              alt=\"Template\"\n              className=\"template-image\"\n              enableAnimations={settings.enableAnimatedNFTs}\n            />\n          )}\n        </div>\n        <div className=\"template-info\">\n          <h1>{`Template #${templateId}`}</h1>\n          <p className=\"template-id\">Template ID: {template.template_id}</p>\n          <p className=\"template-schema\">Schema: {schema?.schema_name || 'Loading...'}</p>\n          <p className=\"template-collection\">\n            Collection: {collection?.name || collection?.collection_name || 'Loading...'}\n          </p>\n          \n          <div className=\"template-stats\">\n            <div className=\"stat\">\n              <span className=\"stat-value\">{template.issued_supply}</span>\n              <span className=\"stat-label\">Minted</span>\n            </div>\n            <div className=\"stat\">\n              <span className=\"stat-value\">\n                {template.max_supply === '0' ? '∞' : template.max_supply}\n              </span>\n              <span className=\"stat-label\">Max Supply</span>\n            </div>\n            <div className=\"stat\">\n              <span className=\"stat-value\">{assets.length}</span>\n              <span className=\"stat-label\">Assets Loaded</span>\n            </div>\n          </div>\n          \n          <p className=\"template-created\">\n            Created: {formatDate(template.created_at_time)}\n          </p>\n          \n          <button \n            className=\"share-btn\"\n            onClick={() => setShowShareModal(true)}\n            style={{\n              marginTop: '20px',\n              padding: '12px 24px',\n              background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n              border: 'none',\n              borderRadius: '12px',\n              color: 'white',\n              fontWeight: '600',\n              cursor: 'pointer',\n              transition: 'all 0.3s ease',\n              display: 'flex',\n              alignItems: 'center',\n              gap: '8px'\n            }}\n          >\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z\" />\n            </svg>\n            Share Template\n          </button>\n        </div>\n      </div>\n\n      {/* Template Attributes */}\n      {template.immutable_data && Object.keys(template.immutable_data).length > 0 && (\n        <div className=\"template-attributes\">\n          <h2>Template Attributes</h2>\n          <div className=\"attributes-grid\">\n            {Object.entries(template.immutable_data).map(([key, value]) => (\n              <div key={key} className=\"attribute-item\">\n                <span className=\"attribute-name\">{key}</span>\n                <span className=\"attribute-value\">{renderAttributeValue(value as string | number | boolean | object | null | undefined)}</span>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Schema Format */}\n      {schema && schema.format && (\n        <div className=\"schema-format\">\n          <h2>Schema Format</h2>\n          <div className=\"format-grid\">\n            {schema.format.map((field: { name: string; type: string }, index: number) => (\n              <div key={index} className=\"format-item\">\n                <span className=\"format-name\">{String(field.name)}</span>\n                <span className=\"format-type\">{String(field.type)}</span>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Assets Section */}\n      <div className=\"assets-section\">\n        <h2>Assets ({template.issued_supply} total)</h2>\n        \n        {assets.length === 0 && !assetsLoading ? (\n          <div className=\"empty-state\">\n            <p>No assets found for this template.</p>\n          </div>\n        ) : (\n          <>\n            <div className=\"assets-grid\">\n              {assets.map((asset) => (\n                <Link \n                  key={asset.asset_id} \n                  to={`/assets/${asset.asset_id}`}\n                  className=\"asset-card\"\n                >\n                  <MediaRenderer\n                    imageUrl={getAssetImageUrl(asset)}\n                    videoUrl={getAssetVideoUrl(asset)}\n                    alt={asset.name || `Asset #${asset.asset_id}`}\n                    className=\"asset-image\"\n                    enableAnimations={settings.enableAnimatedNFTs}\n                  />\n                  <div className=\"asset-info\">\n                    <h4>{asset.name || `Asset #${asset.asset_id}`}</h4>\n                    <p className=\"asset-id\">#{asset.asset_id}</p>\n                    <p className=\"asset-owner\">Owner: {asset.owner}</p>\n                    <p className=\"asset-minted\">Minted: {formatDate(asset.minted_at_time)}</p>\n                  </div>\n                </Link>\n              ))}\n            </div>\n            \n            {hasMore && (\n              <div className=\"load-more-container\">\n                <button \n                  className=\"load-more-btn\"\n                  onClick={loadMoreAssets}\n                  disabled={assetsLoading}\n                >\n                  {assetsLoading ? 'Loading...' : 'Load More Assets'}\n                </button>\n              </div>\n            )}\n          </>\n        )}\n      </div>\n      </div>\n      \n      {/* Share Modal */}\n      {template && (\n        <ShareModal\n          isOpen={showShareModal}\n          onClose={() => setShowShareModal(false)}\n          title={`Template #${templateId}`}\n          description={`${collection?.name || collection?.collection_name} collection`}\n          imageUrl={getTemplateImageUrl(template)}\n          shareUrl={`${window.location.origin}/collections/${collectionName}/templates/${templateId}`}\n          defaultShareText={`Check out this amazing template: Template #${templateId} from ${collection?.name || collection?.collection_name} collection! 🎨✨ View it at ${window.location.origin}/collections/${collectionName}/templates/${templateId}`}\n          type=\"template\"\n        />\n      )}\n    </div>\n  )\n}\n\nexport default TemplateDetail","import React, { useState, useEffect, useCallback } from 'react'\nimport { useParams, Link } from 'react-router-dom'\nimport { apiService } from '../services/api'\nimport type { NFTAsset } from '../services/api'\nimport { getAssetImageUrl, getAssetVideoUrl, createIPFSUrl } from '../utils/mediaUtils'\nimport { useWallet } from '../hooks/useWallet'\nimport { useNotifications } from '../hooks/useNotifications'\n\nimport { log } from '../services/loggingService'\nimport '../css/asset-detail.css'\n\ninterface SchemaFormat {\n  name: string\n  type: string\n}\n\n\n\ninterface BackedToken {\n  token_contract: string\n  token_symbol: string\n  token_precision: number\n  amount: string\n}\n\ninterface Asset {\n  asset_id: string\n  owner?: string\n  name?: string\n  schema: {\n    schema_name: string\n    format?: SchemaFormat[]\n  }\n  collection: {\n    collection_name: string\n    name?: string\n    img?: string\n  }\n  template: {\n    template_id: string\n    max_supply: string\n    issued_supply: string\n    is_transferable: boolean\n    is_burnable: boolean\n    immutable_data: Record<string, unknown>\n    created_at_time: string\n    created_at_block: string\n  }\n  backed_tokens: BackedToken[]\n  burned_by_account?: string\n  burned_at_block?: string\n  burned_at_time?: string\n  updated_at_block: string\n  updated_at_time: string\n  transferred_at_block: string\n  transferred_at_time: string\n  minted_at_block: string\n  minted_at_time: string\n  is_transferable: boolean\n  is_burnable: boolean\n  data: Record<string, unknown>\n}\n\nconst AssetDetail: React.FC = () => {\n  const { assetId } = useParams<{ assetId: string }>()\n  const [asset, setAsset] = useState<Asset | null>(null)\n  const [loading, setLoading] = useState(false)\n  const [listing, setListing] = useState<NFTAsset | null>(null)\n  const [listingLoading, setListingLoading] = useState(false)\n  const [usdPrice, setUsdPrice] = useState<string>('')\n  \n  const { isConnected, purchaseNFT, login } = useWallet()\n  const { showSuccess, showError, showWarning } = useNotifications()\n  // Transaction tracking is now handled directly by WharfKit\n\n\n  const loadAssetData = useCallback(async () => {\n    if (!assetId) return\n    \n    setLoading(true)\n    try {\n      const assetData = await apiService.getAssetDetails(assetId)\n      setAsset(assetData as unknown as Asset)\n    } catch (error) {\n      log.error('Failed to load asset data', 'AssetDetail.loadAssetData', error as Error, { assetId })\n    } finally {\n      setLoading(false)\n    }\n  }, [assetId])\n\n  const checkListingStatus = useCallback(async () => {\n    if (!assetId) return\n    \n    setListingLoading(true)\n    try {\n      // Search for the asset in marketplace listings\n      const marketplaceData = await apiService.getMarketplaceNFTs({\n        page: 1,\n        limit: 1,\n        asset_id: assetId\n      })\n      \n      if (marketplaceData.data && marketplaceData.data.length > 0) {\n        const saleData = marketplaceData.data[0]\n        // Convert simplified marketplace data to NFTAsset format\n        const nftAsset: NFTAsset = {\n          sale_id: saleData.sale_id,\n          asset_id: saleData.asset_id,\n          name: asset?.name || `Asset #${saleData.asset_id}`,\n          image: String(asset?.data?.img || asset?.template?.immutable_data?.img || ''),\n          price: saleData.price,\n          seller: saleData.seller,\n          collection: asset?.collection?.collection_name || 'Unknown',\n          schema: asset?.schema?.schema_name || 'Unknown',\n          template_mint: undefined,\n          max_supply: asset?.template?.max_supply || undefined,\n          traits: asset?.data ? Object.fromEntries(\n            Object.entries(asset.data).filter(([, value]) => value !== undefined && value !== null)\n          ) as Record<string, string | number | boolean> : {}\n        }\n        setListing(nftAsset)\n        \n        // Get USD price if available\n        if (nftAsset.price) {\n          try {\n            const priceValue = parseFloat(nftAsset.price.replace(' WAX', ''))\n            const waxPriceResponse = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=wax&vs_currencies=usd')\n            const waxPriceData = await waxPriceResponse.json()\n            const waxToUsd = waxPriceData.wax?.usd || 0\n            const usdValue = (priceValue * waxToUsd).toFixed(2)\n            setUsdPrice(`$${usdValue} USD`)\n          } catch (error) {\n            log.warn('Failed to fetch USD price for asset', 'AssetDetail.checkListingStatus', { assetId, error: (error as Error).message })\n          }\n        }\n      } else {\n        setListing(null)\n        setUsdPrice('')\n      }\n    } catch (error) {\n      log.error('Failed to check listing status', 'AssetDetail.checkListingStatus', error as Error, { assetId })\n      setListing(null)\n    } finally {\n      setListingLoading(false)\n    }\n  }, [assetId])\n\n  useEffect(() => {\n    if (assetId) {\n      loadAssetData()\n      checkListingStatus()\n    }\n  }, [assetId, loadAssetData, checkListingStatus])\n\n  const handlePurchase = async () => {\n    if (!listing) return\n    \n    try {\n      // Check if user is logged in\n      if (!isConnected) {\n        showWarning('Please connect your wallet to purchase this NFT')\n        try {\n          await login()\n        } catch (error) {\n          log.error('Wallet login failed during purchase', 'AssetDetail.handlePurchase', error as Error, { assetId, saleId: listing.sale_id })\n          return\n        }\n      }\n\n      // Validate listing data\n      if (!listing.sale_id || !listing.price) {\n        showError('This NFT is not available for purchase')\n        return\n      }\n\n      // Extract price value (remove ' WAX' suffix if present)\n      const priceValue = listing.price.replace(' WAX', '')\n      \n      log.info('Initiating NFT purchase', 'AssetDetail.handlePurchase', { saleId: listing.sale_id, price: priceValue, assetId })\n      \n      // Execute purchase transaction directly with WharfKit\n      await purchaseNFT(listing.sale_id, priceValue)\n      \n      showSuccess(`Successfully purchased ${listing.name || 'NFT'}!`)\n      \n      // Refresh listing status\n      checkListingStatus()\n      \n    } catch (error) {\n      log.error('NFT purchase failed', 'AssetDetail.handlePurchase', error as Error, { assetId, saleId: listing?.sale_id, price: listing?.price })\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred'\n      showError(`Purchase failed: ${errorMessage}`)\n    }\n  }\n\n  const getImageUrl = (imgPath: string): string => {\n    if (!imgPath) return 'https://pixeljourney.xyz/img/toppixals/10.webp'\n    if (imgPath.startsWith('http')) return imgPath\n    return createIPFSUrl(imgPath)\n  }\n\n  const getAssetImage = (): string => {\n    if (!asset) return 'https://pixeljourney.xyz/img/toppixals/10.webp'\n    \n    return getAssetImageUrl(asset) ?? 'https://pixeljourney.xyz/img/toppixals/10.webp'\n  }\n\n  const getAssetVideo = (): string | null => {\n    if (!asset) return null\n    \n    return getAssetVideoUrl(asset)\n  }\n\n  const formatDate = (timestamp: string): string => {\n    return new Date(parseInt(timestamp) * 1000).toLocaleString()\n  }\n\n  const renderAttributeValue = (value: string | number | boolean | null | undefined): React.ReactNode => {\n    if (value === null || value === undefined) {\n      return <span className=\"null-value\">null</span>\n    }\n    \n    if (typeof value === 'boolean') {\n      return <span className=\"boolean-value\">{value.toString()}</span>\n    }\n    \n    if (typeof value === 'number') {\n      return <span className=\"number-value\">{value.toLocaleString()}</span>\n    }\n    \n    if (typeof value === 'object') {\n      return (\n        <pre className=\"object-value\">\n          {JSON.stringify(value, null, 2)}\n        </pre>\n      )\n    }\n    \n    // Check if it's an IPFS hash or URL for images\n    const strValue = String(value)\n    if (strValue.match(/\\.(jpg|jpeg|png|gif|webp)$/i) || strValue.startsWith('Qm')) {\n      return (\n        <div className=\"image-attribute\">\n          <img \n            src={getImageUrl(strValue)} \n            alt=\"Attribute image\"\n            className=\"attribute-image\"\n            onError={(e) => {\n              e.currentTarget.style.display = 'none'\n            }}\n          />\n          <span className=\"image-hash\">{strValue}</span>\n        </div>\n      )\n    }\n    \n    return <span className=\"string-value\">{strValue}</span>\n  }\n\n  const getAllAttributes = (): Record<string, string | number | boolean | null | undefined> => {\n    if (!asset) return {}\n    \n    return {\n       ...asset.template?.immutable_data,\n       ...asset.data\n     } as Record<string, string | number | boolean | null | undefined>\n  }\n\n  if (loading) {\n    return (\n      <div className=\"asset-detail-container\">\n        <div className=\"loading-state\">\n          <div className=\"spinner\"></div>\n          <p>Loading asset details...</p>\n        </div>\n      </div>\n    )\n  }\n\n  if (!asset) {\n    return (\n      <div className=\"asset-detail-container\">\n        <div className=\"error-state\">\n          <h2>Asset Not Found</h2>\n          <p>The asset \"{assetId}\" could not be found.</p>\n          <Link to=\"/collections\" className=\"back-link\">← Back to Collections</Link>\n        </div>\n      </div>\n    )\n  }\n\n  const videoUrl = getAssetVideo()\n  const allAttributes = getAllAttributes()\n\n  return (\n    <div className=\"asset-detail-container\">\n      <div className=\"asset-content\">\n        {/* Navigation */}\n        <div className=\"breadcrumb\">\n          <Link to=\"/\" className=\"breadcrumb-link\">Home</Link>\n          <span className=\"breadcrumb-separator\">›</span>\n          <Link to=\"/collections\" className=\"breadcrumb-link\">Collections</Link>\n          <span className=\"breadcrumb-separator\">›</span>\n          <Link to={`/collections/${asset.collection.collection_name}`} className=\"breadcrumb-link\">\n            {asset.collection.name || asset.collection.collection_name}\n          </Link>\n          <span className=\"breadcrumb-separator\">›</span>\n          <span className=\"breadcrumb-current\">{asset.name || `Asset #${assetId}`}</span>\n        </div>\n\n      {/* Asset Header */}\n      <div className=\"asset-header\">\n        <div className=\"asset-media-container\">\n          {videoUrl ? (\n            <video \n              src={videoUrl}\n              className=\"asset-video\"\n              controls\n              poster={getAssetImage()}\n            >\n              Your browser does not support the video tag.\n            </video>\n          ) : (\n            <img \n              src={getAssetImage()} \n              alt={asset.name || `Asset #${assetId}`}\n              className=\"asset-image\"\n              onError={() => {/* Image error handling removed */}}\n            />\n          )}\n        </div>\n        \n        <div className=\"asset-info\">\n          <h1>{asset.name || `Asset #${assetId}`}</h1>\n          <p className=\"asset-id\">Asset ID: {asset.asset_id}</p>\n          \n          <div className=\"asset-links\">\n            <p className=\"asset-collection\">\n              Collection: \n              <Link to={`/collections/${asset.collection.collection_name}`}>\n                {asset.collection.name || asset.collection.collection_name}\n              </Link>\n            </p>\n            <p className=\"asset-template\">\n              Template: \n              <Link to={`/collections/${asset.collection.collection_name}/templates/${asset.template.template_id}`}>\n                {(asset.template?.immutable_data?.name as string) || `#${asset.template.template_id}`}\n              </Link>\n            </p>\n            <p className=\"asset-schema\">Schema: {asset.schema.schema_name}</p>\n          </div>\n          \n          <div className=\"asset-ownership\">\n            <div className=\"owner-info\">\n              <span className=\"owner-label\">Owner:</span>\n              <span className=\"owner-address\">{asset.owner}</span>\n            </div>\n            <div className=\"author-info\">\n              <span className=\"author-label\">Collection Author:</span>\n              <span className=\"author-address\">{asset.owner || 'Unknown'}</span>\n            </div>\n          </div>\n          \n          {/* Listing Status */}\n          {listingLoading ? (\n            <div className=\"listing-status loading\">\n              <span>Checking listing status...</span>\n            </div>\n          ) : listing ? (\n            <div className=\"listing-status available\">\n              <div className=\"listing-info\">\n                <h3>Available for Sale</h3>\n                <div className=\"price-display\">\n                  <span className=\"price-wax\">{listing.price}</span>\n                  {usdPrice && <span className=\"price-usd\">{usdPrice}</span>}\n                </div>\n              </div>\n              <button \n                className=\"buy-now-btn\"\n                onClick={handlePurchase}\n                disabled={!isConnected}\n              >\n                {isConnected ? 'Buy Now' : 'Connect Wallet to Buy'}\n              </button>\n            </div>\n          ) : (\n            <div className=\"listing-status not-listed\">\n              <span>Not currently listed for sale</span>\n            </div>\n          )}\n          \n          <div className=\"asset-timestamps\">\n            <div className=\"timestamp\">\n              <span className=\"timestamp-label\">Minted:</span>\n              <span className=\"timestamp-value\">{formatDate(asset.minted_at_time)}</span>\n            </div>\n            <div className=\"timestamp\">\n              <span className=\"timestamp-label\">Last Transfer:</span>\n              <span className=\"timestamp-value\">{formatDate(asset.transferred_at_time)}</span>\n            </div>\n            <div className=\"timestamp\">\n              <span className=\"timestamp-label\">Last Update:</span>\n              <span className=\"timestamp-value\">{formatDate(asset.updated_at_time)}</span>\n            </div>\n          </div>\n          \n          {asset.burned_by_account && (\n            <div className=\"burn-info\">\n              <span className=\"burn-label\">🔥 Burned by:</span>\n              <span className=\"burn-account\">{asset.burned_by_account}</span>\n              <span className=\"burn-time\">{formatDate(asset.burned_at_time!)}</span>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Template Info */}\n      <div className=\"template-info-section\">\n        <h2>Template Information</h2>\n        <div className=\"template-stats\">\n          <div className=\"template-stat\">\n            <span className=\"stat-label\">Template ID:</span>\n            <span className=\"stat-value\">{asset.template.template_id}</span>\n          </div>\n          <div className=\"template-stat\">\n            <span className=\"stat-label\">Max Supply:</span>\n            <span className=\"stat-value\">\n              {asset.template.max_supply === '0' ? 'Unlimited' : asset.template.max_supply}\n            </span>\n          </div>\n          <div className=\"template-stat\">\n            <span className=\"stat-label\">Issued Supply:</span>\n            <span className=\"stat-value\">{asset.template.issued_supply}</span>\n          </div>\n        </div>\n      </div>\n\n      {/* Asset Attributes */}\n      {Object.keys(allAttributes).length > 0 && (\n        <div className=\"asset-attributes\">\n          <h2>Attributes</h2>\n          <div className=\"attributes-grid\">\n            {Object.entries(allAttributes).map(([key, value]) => (\n              <div key={key} className=\"attribute-item\">\n                <span className=\"attribute-name\">{key}</span>\n                <div className=\"attribute-value\">\n                  {renderAttributeValue(value)}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Schema Format */}\n      <div className=\"schema-format\">\n        <h2>Schema Format</h2>\n        <div className=\"format-grid\">\n          {asset.schema.format?.map((field, index) => (\n            <div key={index} className=\"format-item\">\n              <span className=\"format-name\">{field.name}</span>\n              <span className=\"format-type\">{field.type}</span>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Backed Tokens */}\n      {asset.backed_tokens && asset.backed_tokens.length > 0 && (\n        <div className=\"backed-tokens\">\n          <h2>Backed Tokens</h2>\n          <div className=\"tokens-list\">\n            {asset.backed_tokens.map((token, index) => (\n              <div key={index} className=\"token-item\">\n                <pre>{JSON.stringify(token, null, 2)}</pre>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n      </div>\n    </div>\n  )\n}\n\nexport default AssetDetail","import React, { useState, useEffect } from 'react'\nimport { useParams, useNavigate } from 'react-router-dom'\nimport { apiService } from '../services/api'\nimport type { NFTAsset } from '../services/api'\nimport { useWallet } from '../hooks/useWallet'\nimport { useNotifications } from '../hooks/useNotifications'\n\nimport { log } from '../services/loggingService'\nimport NFTDetailsModal from './NFTDetailsModal'\nimport SendOfferModal from './SendOfferModal'\nimport SocialShare from './SocialShare'\nimport ImageZoom from './ImageZoom'\nimport '../css/listing-detail.css'\nimport '../css/rwax.css'\n\ninterface AssetImageData {\n  data?: {\n    img?: string\n    image?: string\n  }\n  template?: {\n    immutable_data?: {\n      img?: string\n      image?: string\n    }\n  }\n}\n\nconst ListingDetail: React.FC = () => {\n  const { saleId } = useParams<{ saleId: string }>()\n  const navigate = useNavigate()\n  const [listing, setListing] = useState<NFTAsset | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [usdPrice, setUsdPrice] = useState<string>('')\n  const [isDetailsModalOpen, setIsDetailsModalOpen] = useState(false)\n  const [isOfferModalOpen, setIsOfferModalOpen] = useState(false)\n  const [isShareModalOpen, setIsShareModalOpen] = useState(false)\n  const [showImageZoom, setShowImageZoom] = useState(false)\n  const [saleState, setSaleState] = useState<number>(0)\n\n  useEffect(() => {\n    if (saleId) {\n      loadListingData()\n    }\n  }, [saleId])\n\n  const loadListingData = async () => {\n    if (!saleId) return\n    \n    try {\n      setLoading(true)\n      setError(null)\n      \n      // Use apiService for better error handling and fallback support\n      const url = `${apiService.atomicMarketAPI}/atomicmarket/v1/sales/${saleId}`\n      const response = await apiService.fetchWithRetry(url)\n      const data = await response.json()\n      \n      if (data.success && data.data) {\n        const sale = data.data\n        \n        // Set sale state\n        setSaleState(sale.state)\n        \n        // Convert to NFTAsset format\n        const nftAsset: NFTAsset = {\n          sale_id: sale.sale_id,\n          asset_id: sale.assets[0]?.asset_id || '',\n          name: sale.assets[0]?.name || `${sale.assets[0]?.collection?.collection_name || 'Unknown'} #${sale.assets[0]?.asset_id}`,\n          image: getAssetImage(sale.assets[0]),\n          price: `${(parseFloat(sale.price.amount) / Math.pow(10, sale.price.token_precision)).toFixed(4)} ${sale.price.token_symbol}`,\n          seller: sale.seller,\n          collection: sale.assets[0]?.collection?.collection_name || 'Unknown',\n          schema: sale.assets[0]?.schema?.schema_name || 'Unknown',\n          template_mint: parseInt(sale.assets[0]?.template?.template_id || '0') || 0,\n          max_supply: sale.assets[0]?.template?.max_supply || '0',\n          traits: Object.fromEntries(\n            Object.entries(sale.assets[0]?.data || {}).map(([key, value]) => [\n              key, \n              value === null || value === undefined ? '' : \n              typeof value === 'string' || typeof value === 'number' || typeof value === 'boolean' ? value : String(value)\n            ])\n          )\n        }\n        \n        setListing(nftAsset)\n        \n        // Get USD price\n        const waxPrice = parseFloat(sale.price.amount) / Math.pow(10, sale.price.token_precision)\n        const usdValue = await apiService.getUSDPrice(waxPrice)\n        setUsdPrice(usdValue)\n      } else {\n        setError('Listing not found')\n      }\n    } catch (err) {\n      console.error('Error loading listing:', err)\n      setError(`Failed to load listing data: ${err instanceof Error ? err.message : 'Unknown error'}`)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const getAssetImage = (asset: AssetImageData | null): string => {\n    if (!asset) return ''\n    \n    // Try different image sources\n    if (asset.data?.img) {\n      return asset.data.img.startsWith('http') ? asset.data.img : `https://ipfs.io/ipfs/${asset.data.img}`\n    }\n    if (asset.data?.image) {\n      return asset.data.image.startsWith('http') ? asset.data.image : `https://ipfs.io/ipfs/${asset.data.image}`\n    }\n    if (asset.template?.immutable_data?.img) {\n      return asset.template.immutable_data.img.startsWith('http') ? asset.template.immutable_data.img : `https://ipfs.io/ipfs/${asset.template.immutable_data.img}`\n    }\n    if (asset.template?.immutable_data?.image) {\n      return asset.template.immutable_data.image.startsWith('http') ? asset.template.immutable_data.image : `https://ipfs.io/ipfs/${asset.template.immutable_data.image}`\n    }\n    \n    return 'https://pixeljourney.xyz/img/toppixals/10.webp'\n  }\n\n  const { isConnected, purchaseNFT, login } = useWallet()\n  const { showSuccess, showError, showWarning } = useNotifications()\n  // Transaction tracking is now handled directly by WharfKit\n\n  const handlePurchase = async () => {\n    if (!listing) return\n    \n    try {\n      // Check if user is logged in\n      if (!isConnected) {\n        showWarning('Please connect your wallet to purchase this NFT')\n        try {\n          await login()\n        } catch (error) {\n          log.error('Login failed', 'ListingDetail', error as Error)\n          return\n        }\n      }\n\n      // Validate listing data\n      if (!listing.sale_id || !listing.price) {\n        showError('This NFT is not available for purchase')\n        return\n      }\n\n      // Extract price value (remove ' WAX' suffix if present)\n      const priceValue = listing.price.replace(' WAX', '')\n      \n      log.info('Purchasing NFT', 'ListingDetail.handlePurchase', { saleId: listing.sale_id, price: priceValue })\n      \n      // Execute purchase transaction directly with WharfKit\n      await purchaseNFT(listing.sale_id, priceValue)\n      \n      showSuccess(`Successfully purchased ${listing.name || 'NFT'}!`)\n      \n      // Navigate back to marketplace or refresh listing\n      navigate('/marketplace')\n      \n    } catch (error) {\n      log.error('Purchase failed', 'ListingDetail', error as Error)\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred'\n      showError(`Purchase failed: ${errorMessage}`)\n    }\n  }\n\n  const handleSellerClick = () => {\n    if (!listing || !listing.seller) return\n    navigate(`/user-profile-lookup?user=${encodeURIComponent(listing.seller)}`)\n  }\n\n  const handleCollectionClick = () => {\n    if (!listing) return\n    navigate(`/collections/${listing.collection}`)\n  }\n\n  const handleAssetClick = () => {\n    if (!listing || !listing.asset_id) return\n    navigate(`/assets/${listing.asset_id}`)\n  }\n\n  if (loading) {\n    return (\n      <div className=\"listing-detail-container\">\n        <div className=\"loading-container\">\n          <div className=\"loading-spinner\"></div>\n          <p>Loading listing...</p>\n        </div>\n      </div>\n    )\n  }\n\n  if (error || !listing) {\n    return (\n      <div className=\"listing-detail-container\">\n        <div className=\"error-container\">\n          <h2>Listing Not Found</h2>\n          <p>{error || 'The requested listing could not be found.'}</p>\n          <button onClick={() => navigate('/marketplace')} className=\"btn-primary\">\n            Back to Marketplace\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"listing-detail-container\">\n      <div className=\"listing-detail-header\">\n        <button onClick={() => navigate(-1)} className=\"back-button\">\n          ← Back\n        </button>\n        <h1>Listing Details</h1>\n      </div>\n\n      <div className=\"listing-detail-content\">\n        <div className=\"listing-image-section\">\n          <div className=\"listing-image\">\n            {listing.image.includes('.mp4') || listing.image.includes('.webm') ? (\n              <video \n                src={listing.image} \n                controls \n                muted \n                loop\n                className=\"listing-media\"\n              />\n            ) : (\n              <>\n                <img \n                  src={listing.image} \n                  alt={listing.name}\n                  className=\"listing-media\"\n                  onError={(e) => {\n                    const target = e.target as HTMLImageElement\n                    target.src = 'https://pixeljourney.xyz/img/toppixals/10.webp'\n                  }}\n                />\n                <div \n                  className=\"zoom-overlay\"\n                  onClick={() => setShowImageZoom(true)}\n                >\n                  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                    <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/>\n                    <path d=\"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z\"/>\n                  </svg>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n\n        <div className=\"listing-info-section\">\n          <div className=\"listing-header\">\n            <h2>{listing.name}</h2>\n            <div className=\"listing-actions\">\n              <button \n                onClick={() => setIsDetailsModalOpen(true)}\n                className=\"listing-detail-nav-btn\"\n              >\n                📋 View Details\n              </button>\n              <button \n                onClick={() => setIsOfferModalOpen(true)}\n                className=\"listing-detail-nav-btn\"\n              >\n                <svg viewBox=\"0 -8 72 72\" fill=\"currentColor\" style={{width: '16px', height: '16px', marginRight: '8px'}}>\n                  <path d=\"M64,12.78v17s-3.63.71-4.38.81-3.08.85-4.78-.78C52.22,27.25,42.93,18,42.93,18a3.54,3.54,0,0,0-4.18-.21c-2.36,1.24-5.87,3.07-7.33,3.78a3.37,3.37,0,0,1-5.06-2.64,3.44,3.44,0,0,1,2.1-3c3.33-2,10.36-6,13.29-7.52,1.78-1,3.06-1,5.51,1C50.27,12,53,14.27,53,14.27a2.75,2.75,0,0,0,2.26.43C58.63,14,64,12.78,64,12.78ZM27,41.5a3,3,0,0,0-3.55-4.09,3.07,3.07,0,0,0-.64-3,3.13,3.13,0,0,0-3-.75,3.07,3.07,0,0,0-.65-3,3.38,3.38,0,0,0-4.72.13c-1.38,1.32-2.27,3.72-1,5.14s2.64.55,3.72.3c-.3,1.07-1.2,2.07-.09,3.47s2.64.55,3.72.3c-.3,1.07-1.16,2.16-.1,3.46s2.84.61,4,.25c-.45,1.15-1.41,2.39-.18,3.79s4.08.75,5.47-.58a3.32,3.32,0,0,0,.3-4.68A3.18,3.18,0,0,0,27,41.5Zm25.35-8.82L41.62,22a3.53,3.53,0,0,0-3.77-.68c-1.5.66-3.43,1.56-4.89,2.24a8.15,8.15,0,0,1-3.29,1.1,5.59,5.59,0,0,1-3-10.34C29,12.73,34.09,10,34.09,10a6.46,6.46,0,0,0-5-2C25.67,8,18.51,12.7,18.51,12.7a5.61,5.61,0,0,1-4.93.13L8,10.89v19.4s1.59.46,3,1a6.33,6.33,0,0,1,1.56-2.47,6.17,6.17,0,0,1,8.48-.06,5.4,5.4,0,0,1,1.34,2.37,5.49,5.49,0,0,1,2.29,1.4A5.4,5.4,0,0,1,26,34.94a5.47,5.47,0,0,1,3.71,4,5.38,5.38,0,0,1,2.39,1.43,5.65,5.65,0,0,1,1.48,4.89a0,0,0,0,1,0,0s.8.9,1.29,1.39a2.46,2.46,0,0,0,3.48-3.48s2,2.48,4.28,1c2-1.4,1.69-3.06.74-4a3.19,3.19,0,0,0,4.77.13,2.45,2.45,0,0,0,.13-3.3s1.33,1.81,4,.12c1.89-1.6,1-3.43,0-4.39Z\"/>\n                </svg>\n                Make Offer\n              </button>\n              <button \n                onClick={() => setIsShareModalOpen(true)}\n                className=\"listing-detail-nav-btn\"\n              >\n                🔗 Share\n              </button>\n            </div>\n          </div>\n\n          <div className=\"listing-price-section\">\n            <div className=\"price-display\">\n              <div className=\"price-main\">{listing.price}</div>\n              <div className=\"price-usd\">{usdPrice}</div>\n              <div className=\"sale-status-display\">\n                <span className={`status-badge ${saleState === 1 ? 'status-active' : saleState === 3 ? 'status-sold' : 'status-canceled'}`}>\n                  {saleState === 1 ? '🔄 Available' : saleState === 3 ? '✅ Sold' : '❌ Canceled'}\n                </span>\n              </div>\n            </div>\n            {saleState === 1 ? (\n              <button onClick={handlePurchase} className=\"listing-detail-nav-btn listing-detail-primary-btn purchase-btn\">\n                🛒 Buy Now\n              </button>\n            ) : (\n              <button disabled className=\"listing-detail-nav-btn listing-detail-primary-btn purchase-btn\">\n                {saleState === 3 ? '✅ Sold' : '❌ Not Available'}\n              </button>\n            )}\n          </div>\n\n          <div className=\"listing-details\">\n            <div className=\"detail-item\">\n              <span className=\"detail-label\">Collection:</span>\n              <span className=\"detail-value link\" onClick={handleCollectionClick}>\n                {listing.collection}\n              </span>\n            </div>\n            <div className=\"detail-item\">\n              <span className=\"detail-label\">Schema:</span>\n              <span className=\"detail-value\">{listing.schema}</span>\n            </div>\n            <div className=\"detail-item\">\n              <span className=\"detail-label\">Asset ID:</span>\n              <span className=\"detail-value link\" onClick={handleAssetClick}>\n                {listing.asset_id}\n              </span>\n            </div>\n            <div className=\"detail-item\">\n              <span className=\"detail-label\">Seller:</span>\n              <span className=\"detail-value link\" onClick={handleSellerClick}>\n                {listing.seller}\n              </span>\n            </div>\n            <div className=\"detail-item\">\n              <span className=\"detail-label\">Sale ID:</span>\n              <span className=\"detail-value\">{listing.sale_id}</span>\n            </div>\n            {listing.template_mint && listing.template_mint > 0 && (\n              <div className=\"detail-item\">\n                <span className=\"detail-label\">Mint:</span>\n                <span className=\"detail-value\">\n                  {listing.template_mint} / {listing.max_supply === '0' ? '∞' : listing.max_supply}\n                </span>\n              </div>\n            )}\n          </div>\n\n          {listing.traits && Object.keys(listing.traits).length > 0 && (\n            <div className=\"listing-attributes\">\n              <h3>Attributes</h3>\n              <div className=\"attributes-grid\">\n                {Object.entries(listing.traits).map(([key, value]) => (\n                  <div key={key} className=\"attribute-item\">\n                    <span className=\"attribute-name\">{key}</span>\n                    <span className=\"attribute-value\">{value}</span>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Modals */}\n      <NFTDetailsModal \n        nft={listing}\n        isOpen={isDetailsModalOpen}\n        onClose={() => setIsDetailsModalOpen(false)}\n      />\n      \n      <SendOfferModal \n        nft={listing}\n        isOpen={isOfferModalOpen}\n        onClose={() => setIsOfferModalOpen(false)}\n      />\n      \n      <SocialShare \n        nft={listing}\n        isOpen={isShareModalOpen}\n        onClose={() => setIsShareModalOpen(false)}\n      />\n      \n      <ImageZoom \n         isOpen={showImageZoom}\n         onClose={() => setShowImageZoom(false)}\n         imageUrl={listing.image}\n         imageName={listing.name}\n       />\n    </div>\n  )\n}\n\nexport default ListingDetail","import React, { useState, useEffect } from 'react'\nimport { useParams, useNavigate } from 'react-router-dom'\nimport { log } from '../services/loggingService'\nimport '../css/transaction-details.css'\n\ninterface ActionTrace {\n  act?: {\n    name: string\n    account: string\n    authorization?: Array<{\n      actor: string\n      permission: string\n    }>\n    data?: Record<string, unknown>\n  }\n  receipt?: {\n    receiver: string\n    act_digest: string\n    global_sequence: number\n    recv_sequence: number\n    auth_sequence: Array<[string, number]>\n    code_sequence: number\n    abi_sequence: number\n  }\n  context_free?: boolean\n  elapsed?: number\n  console?: string\n  trx_id?: string\n  block_num?: number\n  block_time?: string\n  producer_block_id?: string\n  account_ram_deltas?: Array<{\n    account: string\n    delta: number\n  }>\n  except?: unknown\n  error_code?: number\n  inline_traces?: ActionTrace[]\n}\n\ninterface TransactionReceipt {\n  status: string\n  cpu_usage_us?: number\n  max_net_usage_words?: number\n  net_usage_words?: number\n}\n\ninterface TransactionDetails {\n  transaction_id: string\n  block_num: number\n  block_time: string\n  action_name: string\n  actor: string\n  receiver: string\n  asset_id?: string\n  asset_name?: string\n  collection_name?: string\n  price?: string\n  from?: string\n  to?: string\n  memo?: string\n  status: 'success' | 'failed'\n  cpu_usage_us: number\n  net_usage_words: number\n  traces?: ActionTrace[]\n}\n\ninterface BlockInfo {\n  block_num: number\n  block_id: string\n  timestamp: string\n  producer: string\n  transaction_count: number\n}\n\nconst TransactionDetails: React.FC = () => {\n  const { transactionId } = useParams<{ transactionId: string }>()\n  const navigate = useNavigate()\n  const [transaction, setTransaction] = useState<TransactionDetails | null>(null)\n  const [blockInfo, setBlockInfo] = useState<BlockInfo | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [activeTab, setActiveTab] = useState<'overview' | 'traces' | 'raw'>('overview')\n\n  useEffect(() => {\n    if (transactionId) {\n      fetchTransactionDetails(transactionId)\n    }\n  }, [transactionId])\n\n  const fetchTransactionDetails = async (txId: string) => {\n    try {\n      setLoading(true)\n      setError(null)\n      \n      // Fetch transaction details from WAX blockchain\n      const response = await fetch(`https://wax.eosrio.io/v1/history/get_transaction`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          id: txId\n        })\n      })\n      \n      if (!response.ok) {\n        throw new Error(`Failed to fetch transaction: ${response.status}`)\n      }\n      \n      const data = await response.json()\n      \n      if (!data.id) {\n        throw new Error('Transaction not found')\n      }\n      \n      // Parse transaction data\n      const parsedTransaction: TransactionDetails = {\n        transaction_id: data.id,\n        block_num: data.block_num,\n        block_time: data.block_time,\n        action_name: data.trx?.transaction?.actions?.[0]?.name || 'unknown',\n        actor: data.trx?.transaction?.actions?.[0]?.authorization?.[0]?.actor || 'unknown',\n        receiver: data.trx?.transaction?.actions?.[0]?.account || 'unknown',\n        status: data.receipt?.status === 'executed' ? 'success' : 'failed',\n        cpu_usage_us: (data.receipt as TransactionReceipt)?.cpu_usage_us || 0,\n        net_usage_words: (data.receipt as TransactionReceipt)?.max_net_usage_words || (data.receipt as TransactionReceipt)?.net_usage_words || 0,\n        traces: data.traces || []\n      }\n      \n      // Extract additional info from action data if available\n      const actionData = data.trx?.transaction?.actions?.[0]?.data\n      if (actionData) {\n        if (actionData.asset_ids) {\n          parsedTransaction.asset_id = actionData.asset_ids[0]\n        }\n        if (actionData.from) {\n          parsedTransaction.from = actionData.from\n        }\n        if (actionData.to) {\n          parsedTransaction.to = actionData.to\n        }\n        if (actionData.memo) {\n          parsedTransaction.memo = actionData.memo\n        }\n        if (actionData.listing_price_to_assert) {\n          parsedTransaction.price = `${parseFloat(actionData.listing_price_to_assert.split(' ')[0])} WAX`\n        }\n      }\n      \n      setTransaction(parsedTransaction)\n      \n      // Fetch block information\n      const blockResponse = await fetch(`https://wax.eosrio.io/v1/chain/get_block`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          block_num_or_id: data.block_num\n        })\n      })\n      \n      if (blockResponse.ok) {\n        const blockData = await blockResponse.json()\n        setBlockInfo({\n          block_num: blockData.block_num,\n          block_id: blockData.id,\n          timestamp: blockData.timestamp,\n          producer: blockData.producer,\n          transaction_count: blockData.transactions?.length || 0\n        })\n      }\n      \n    } catch (err) {\n      log.error('Error fetching transaction details', 'TransactionDetails.fetchTransactionDetails', err as Error)\n      setError(err instanceof Error ? err.message : 'Failed to load transaction details')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString + 'Z').toLocaleString()\n  }\n\n  const handleUserClick = (account: string) => {\n    navigate(`/user-profile-lookup?user=${encodeURIComponent(account)}`)\n  }\n\n  const handleAssetClick = (assetId: string) => {\n    navigate(`/assets/${assetId}`)\n  }\n\n  const copyToClipboard = (text: string) => {\n    navigator.clipboard.writeText(text)\n  }\n\n  if (loading) {\n    return (\n      <div className=\"page-content\">\n        <div className=\"transaction-details-container\">\n          <div className=\"loading-state\">\n            <div className=\"loading-spinner\"></div>\n            <p>Loading transaction details...</p>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  if (error || !transaction) {\n    return (\n      <div className=\"page-content\">\n        <div className=\"transaction-details-container\">\n          <div className=\"error-state\">\n            <h2>Transaction Not Found</h2>\n            <p>{error || 'The requested transaction could not be found.'}</p>\n            <button onClick={() => navigate(-1)} className=\"btn btn-primary\">\n              Go Back\n            </button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"page-content\">\n      <div className=\"transaction-details-container\">\n        {/* Header */}\n        <div className=\"transaction-header\">\n          <button onClick={() => navigate(-1)} className=\"back-button\">\n            ← Back\n          </button>\n          <div className=\"transaction-title\">\n            <h1>Transaction Details</h1>\n            <div className=\"transaction-id\">\n              <span>ID: {transaction.transaction_id}</span>\n              <button \n                onClick={() => copyToClipboard(transaction.transaction_id)}\n                className=\"copy-button\"\n                title=\"Copy transaction ID\"\n              >\n                📋\n              </button>\n            </div>\n          </div>\n          <div className={`transaction-status ${transaction.status}`}>\n            {transaction.status === 'success' ? '✅' : '❌'} {transaction.status.toUpperCase()}\n          </div>\n        </div>\n\n        {/* Tab Navigation */}\n        <div className=\"tab-navigation\">\n          <button \n            className={`tab ${activeTab === 'overview' ? 'active' : ''}`}\n            onClick={() => setActiveTab('overview')}\n          >\n            Overview\n          </button>\n          <button \n            className={`tab ${activeTab === 'traces' ? 'active' : ''}`}\n            onClick={() => setActiveTab('traces')}\n          >\n            Action Traces\n          </button>\n          <button \n            className={`tab ${activeTab === 'raw' ? 'active' : ''}`}\n            onClick={() => setActiveTab('raw')}\n          >\n            Raw Data\n          </button>\n        </div>\n\n        {/* Tab Content */}\n        <div className=\"tab-content\">\n          {activeTab === 'overview' && (\n            <div className=\"overview-tab\">\n              {/* Basic Information */}\n              <div className=\"info-section\">\n                <h3>Basic Information</h3>\n                <div className=\"info-grid\">\n                  <div className=\"info-item\">\n                    <label>Block Number:</label>\n                    <span>{transaction.block_num.toLocaleString()}</span>\n                  </div>\n                  <div className=\"info-item\">\n                    <label>Timestamp:</label>\n                    <span>{formatDate(transaction.block_time)}</span>\n                  </div>\n                  <div className=\"info-item\">\n                    <label>Action:</label>\n                    <span className=\"action-name\">{transaction.action_name}</span>\n                  </div>\n                  <div className=\"info-item\">\n                    <label>Contract:</label>\n                    <span className=\"contract-name\">{transaction.receiver}</span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Transaction Parties */}\n              <div className=\"info-section\">\n                <h3>Transaction Parties</h3>\n                <div className=\"info-grid\">\n                  <div className=\"info-item\">\n                    <label>Actor:</label>\n                    <span \n                      className=\"clickable-account\"\n                      onClick={() => handleUserClick(transaction.actor)}\n                    >\n                      {transaction.actor}\n                    </span>\n                  </div>\n                  {transaction.from && transaction.from !== transaction.actor && (\n                    <div className=\"info-item\">\n                      <label>From:</label>\n                      <span \n                        className=\"clickable-account\"\n                        onClick={() => handleUserClick(transaction.from!)}\n                      >\n                        {transaction.from}\n                      </span>\n                    </div>\n                  )}\n                  {transaction.to && (\n                    <div className=\"info-item\">\n                      <label>To:</label>\n                      <span \n                        className=\"clickable-account\"\n                        onClick={() => handleUserClick(transaction.to!)}\n                      >\n                        {transaction.to}\n                      </span>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Asset Information */}\n              {(transaction.asset_id || transaction.price) && (\n                <div className=\"info-section\">\n                  <h3>Asset Information</h3>\n                  <div className=\"info-grid\">\n                    {transaction.asset_id && (\n                      <div className=\"info-item\">\n                        <label>Asset ID:</label>\n                        <span \n                          className=\"clickable-asset\"\n                          onClick={() => handleAssetClick(transaction.asset_id!)}\n                        >\n                          {transaction.asset_id}\n                        </span>\n                      </div>\n                    )}\n                    {transaction.asset_name && (\n                      <div className=\"info-item\">\n                        <label>Asset Name:</label>\n                        <span>{transaction.asset_name}</span>\n                      </div>\n                    )}\n                    {transaction.collection_name && (\n                      <div className=\"info-item\">\n                        <label>Collection:</label>\n                        <span>\n                          {typeof transaction.collection_name === 'string'\n                            ? transaction.collection_name\n                            : (transaction.collection_name as { collection_name?: string; name?: string })?.collection_name ||\n                              (transaction.collection_name as { collection_name?: string; name?: string })?.name ||\n                              'Unknown'}\n                        </span>\n                      </div>\n                    )}\n                    {transaction.price && (\n                      <div className=\"info-item\">\n                        <label>Price:</label>\n                        <span className=\"price\">{transaction.price}</span>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              )}\n\n              {/* Resource Usage */}\n              <div className=\"info-section\">\n                <h3>Resource Usage</h3>\n                <div className=\"info-grid\">\n                  <div className=\"info-item\">\n                    <label>CPU Usage:</label>\n                    <span>{transaction.cpu_usage_us.toLocaleString()} μs</span>\n                  </div>\n                  <div className=\"info-item\">\n                    <label>NET Usage:</label>\n                    <span>{transaction.net_usage_words.toLocaleString()} words</span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Block Information */}\n              {blockInfo && (\n                <div className=\"info-section\">\n                  <h3>Block Information</h3>\n                  <div className=\"info-grid\">\n                    <div className=\"info-item\">\n                      <label>Block ID:</label>\n                      <span className=\"block-id\">{blockInfo.block_id}</span>\n                    </div>\n                    <div className=\"info-item\">\n                      <label>Producer:</label>\n                      <span>{blockInfo.producer}</span>\n                    </div>\n                    <div className=\"info-item\">\n                      <label>Transactions in Block:</label>\n                      <span>{blockInfo.transaction_count}</span>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Memo */}\n              {transaction.memo && (\n                <div className=\"info-section\">\n                  <h3>Memo</h3>\n                  <div className=\"memo-content\">\n                    {transaction.memo}\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n\n          {activeTab === 'traces' && (\n            <div className=\"traces-tab\">\n              <h3>Action Traces</h3>\n              {transaction.traces && transaction.traces.length > 0 ? (\n                <div className=\"traces-list\">\n                  {transaction.traces.map((trace, index) => (\n                    <div key={index} className=\"trace-item\">\n                      <div className=\"trace-header\">\n                        <span className=\"trace-index\">#{index + 1}</span>\n                        <span className=\"trace-action\">{trace.act?.name || 'unknown'}</span>\n                        <span className=\"trace-account\">{trace.act?.account || 'unknown'}</span>\n                      </div>\n                      <pre className=\"trace-data\">\n                        {JSON.stringify(trace, null, 2)}\n                      </pre>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <p>No action traces available for this transaction.</p>\n              )}\n            </div>\n          )}\n\n          {activeTab === 'raw' && (\n            <div className=\"raw-tab\">\n              <h3>Raw Transaction Data</h3>\n              <pre className=\"raw-data\">\n                {JSON.stringify(transaction, null, 2)}\n              </pre>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default TransactionDetails","import React, { useState } from 'react'\nimport { useWallet } from '../hooks/useWallet'\nimport { useNotifications } from '../hooks/useNotifications'\nimport { log } from '../services/loggingService'\nimport '../css/modal.css'\n\ninterface StakingModalProps {\n  isOpen: boolean\n  onClose: () => void\n  resourceType: 'cpu' | 'net'\n  action: 'stake' | 'unstake'\n  onSuccess?: () => void\n}\n\nconst StakingModal: React.FC<StakingModalProps> = ({ \n  isOpen, \n  onClose, \n  resourceType, \n  action, \n  onSuccess \n}) => {\n  const [amount, setAmount] = useState('')\n  const [isProcessing, setIsProcessing] = useState(false)\n  const { session, transact } = useWallet()\n  const { showError } = useNotifications()\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!session || !amount || parseFloat(amount) <= 0) return\n\n    setIsProcessing(true)\n    try {\n      const waxAmount = `${parseFloat(amount).toFixed(8)} WAX`\n      \n      if (action === 'stake') {\n        // Stake CPU or NET using delegatebw\n        const actions = [{\n          account: 'eosio',\n          name: 'delegatebw',\n          authorization: [{\n            actor: session.actor.toString(),\n            permission: session.permission.toString()\n          }],\n          data: {\n            from: session.actor.toString(),\n            receiver: session.actor.toString(),\n            stake_net_quantity: resourceType === 'net' ? waxAmount : '0.00000000 WAX',\n            stake_cpu_quantity: resourceType === 'cpu' ? waxAmount : '0.00000000 WAX',\n            transfer: false\n          }\n        }]\n        \n        await transact(actions)\n      } else {\n        // Unstake CPU or NET using undelegatebw\n        const actions = [{\n          account: 'eosio',\n          name: 'undelegatebw',\n          authorization: [{\n            actor: session.actor.toString(),\n            permission: session.permission.toString()\n          }],\n          data: {\n            from: session.actor.toString(),\n            receiver: session.actor.toString(),\n            unstake_net_quantity: resourceType === 'net' ? waxAmount : '0.00000000 WAX',\n            unstake_cpu_quantity: resourceType === 'cpu' ? waxAmount : '0.00000000 WAX'\n          }\n        }]\n        \n        await transact(actions)\n      }\n      \n      onSuccess?.()\n      onClose()\n    } catch (error) {\n      log.error(`Failed to ${action} ${resourceType.toUpperCase()}`, 'StakingModal.handleSubmit', error as Error, { action, resourceType, amount })\n      showError(`Failed to ${action} ${resourceType.toUpperCase()}. Please try again.`, 'Transaction Failed')\n    } finally {\n      setIsProcessing(false)\n    }\n  }\n\n  if (!isOpen) return null\n\n  const resourceName = resourceType.toUpperCase()\n  const actionName = action === 'stake' ? 'Stake' : 'Unstake'\n\n  return (\n    <div className=\"modal-overlay\" onClick={onClose}>\n      <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h2>{actionName} {resourceName}</h2>\n          <button className=\"modal-close\" onClick={onClose}>\n            ×\n          </button>\n        </div>\n        \n        <div className=\"modal-body\">\n          <div className=\"resource-info\">\n            <div className=\"resource-icon\">\n              {resourceType === 'cpu' ? '⚡' : '🌐'}\n            </div>\n            <div className=\"resource-description\">\n              <h3>{resourceName} {actionName}</h3>\n              <p>\n                {action === 'stake' \n                  ? `Stake WAX to increase your ${resourceName} resources. Staked tokens will be locked for 3 days after unstaking.`\n                  : `Unstake WAX from your ${resourceName} resources. Tokens will be available after a 3-day waiting period.`\n                }\n              </p>\n            </div>\n          </div>\n          \n          <form onSubmit={handleSubmit}>\n            <div className=\"form-group\">\n              <label htmlFor=\"amount\">Amount (WAX)</label>\n              <input\n                type=\"number\"\n                id=\"amount\"\n                value={amount}\n                onChange={(e) => setAmount(e.target.value)}\n                placeholder=\"Enter WAX amount\"\n                min=\"0.00000001\"\n                step=\"0.00000001\"\n                required\n                disabled={isProcessing}\n              />\n            </div>\n            \n            <div className=\"form-actions\">\n              <button \n                type=\"button\" \n                className=\"btn-secondary\" \n                onClick={onClose}\n                disabled={isProcessing}\n              >\n                Cancel\n              </button>\n              <button \n                type=\"submit\" \n                className=\"btn-primary\"\n                disabled={isProcessing || !amount || parseFloat(amount) <= 0}\n              >\n                {isProcessing ? 'Processing...' : `${actionName} ${resourceName}`}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default StakingModal","import React, { useState, useEffect } from 'react'\nimport { useWallet } from '../hooks/useWallet'\nimport { useNotifications } from '../hooks/useNotifications'\nimport { log } from '../services/loggingService'\nimport { WharfKitService } from '../services/wharfkit'\nimport '../css/modal.css'\n\ninterface RAMModalProps {\n  isOpen: boolean\n  onClose: () => void\n  action: 'buy' | 'sell'\n  onSuccess?: () => void\n}\n\nconst RAMModal: React.FC<RAMModalProps> = ({ \n  isOpen, \n  onClose, \n  action, \n  onSuccess \n}) => {\n  const [amount, setAmount] = useState('')\n  const [isProcessing, setIsProcessing] = useState(false)\n  const [ramPrice, setRamPrice] = useState<number | null>(null)\n  const [userRamBytes, setUserRamBytes] = useState<number | null>(null)\n  const [isLoadingData, setIsLoadingData] = useState(false)\n  const { session, transact } = useWallet()\n  const { showSuccess, showError } = useNotifications()\n\n  // Fetch RAM market data and user account info\n  useEffect(() => {\n    if (isOpen && session) {\n      fetchRAMData()\n    }\n  }, [isOpen, session])\n\n  const fetchRAMData = async () => {\n    if (!session) return\n    \n    setIsLoadingData(true)\n    try {\n      // Fetch RAM price from WAX blockchain\n      const ramMarketResponse = await fetch('https://wax.greymass.com/v1/chain/get_table_rows', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          json: true,\n          code: 'eosio',\n          scope: 'eosio',\n          table: 'rammarket',\n          limit: 1\n        })\n      })\n      \n      if (ramMarketResponse.ok) {\n        const ramMarketData = await ramMarketResponse.json()\n        if (ramMarketData.rows && ramMarketData.rows.length > 0) {\n          const ramMarket = ramMarketData.rows[0]\n          // Calculate RAM price: WAX balance / RAM supply\n          const waxBalance = parseFloat(ramMarket.quote.balance.split(' ')[0])\n          const ramSupply = parseFloat(ramMarket.base.balance.split(' ')[0])\n          const price = waxBalance / ramSupply\n          setRamPrice(price)\n        }\n      }\n      \n      // Fetch user account data\n      const accountResponse = await fetch('https://wax.greymass.com/v1/chain/get_account', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ account_name: session.actor.toString() })\n      })\n      \n      if (accountResponse.ok) {\n        const accountData = await accountResponse.json()\n        setUserRamBytes(accountData.ram_quota - accountData.ram_usage)\n      }\n    } catch (error) {\n      log.error('Failed to fetch RAM market data', 'RAMModal.fetchRAMData', error as Error, { account: session?.actor.toString() })\n    } finally {\n      setIsLoadingData(false)\n    }\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!session || !amount || parseFloat(amount) <= 0) return\n\n    // Validation\n    if (action === 'sell' && userRamBytes !== null) {\n      const bytesToSell = Math.floor(parseFloat(amount))\n      if (bytesToSell > userRamBytes) {\n        showError('Insufficient RAM', `You only have ${userRamBytes.toLocaleString()} bytes available to sell.`)\n        return\n      }\n    }\n\n    setIsProcessing(true)\n    try {\n      if (action === 'buy') {\n        // Buy RAM using buyram\n        const waxAmount = `${parseFloat(amount).toFixed(8)} WAX`\n        const actions = [{\n          account: 'eosio',\n          name: 'buyram',\n          authorization: [{\n            actor: WharfKitService.safeGetActor(session),\n            permission: WharfKitService.safeGetPermission(session)\n          }],\n          data: {\n            payer: WharfKitService.safeGetActor(session),\n            receiver: WharfKitService.safeGetActor(session),\n            quant: waxAmount\n          }\n        }]\n        \n        await transact(actions)\n        showSuccess('RAM Purchase Successful', `Successfully purchased RAM with ${waxAmount}!`)\n      } else {\n        // Sell RAM using sellram\n        const bytes = Math.floor(parseFloat(amount))\n        const actions = [{\n          account: 'eosio',\n          name: 'sellram',\n          authorization: [{\n            actor: WharfKitService.safeGetActor(session),\n            permission: WharfKitService.safeGetPermission(session)\n          }],\n          data: {\n            account: WharfKitService.safeGetActor(session),\n            bytes: bytes\n          }\n        }]\n        \n        await transact(actions)\n        showSuccess('RAM Sale Successful', `Successfully sold ${bytes.toLocaleString()} bytes of RAM!`)\n      }\n      \n      onSuccess?.()\n      onClose()\n      setAmount('')\n    } catch (error) {\n      log.error(`Failed to ${action} RAM`, 'RAMModal.handleSubmit', error as Error, { action, amount, account: WharfKitService.safeGetActor(session) })\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred'\n      showError(`RAM ${action === 'buy' ? 'Purchase' : 'Sale'} Failed`, errorMessage)\n    } finally {\n      setIsProcessing(false)\n    }\n  }\n\n  if (!isOpen) return null\n\n  const actionName = action === 'buy' ? 'Buy' : 'Sell'\n  const inputLabel = action === 'buy' ? 'Amount (WAX)' : 'Bytes to Sell'\n  const inputPlaceholder = action === 'buy' ? 'Enter WAX amount' : 'Enter bytes amount'\n\n  return (\n    <div className=\"modal-overlay\" onClick={onClose}>\n      <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h2>{actionName} RAM</h2>\n          <button className=\"modal-close\" onClick={onClose}>\n            ×\n          </button>\n        </div>\n        \n        <div className=\"modal-body\">\n          <div className=\"resource-info\">\n            <div className=\"resource-icon\">\n              💾\n            </div>\n            <div className=\"resource-description\">\n              <h3>RAM {actionName}</h3>\n              <p>\n                {action === 'buy' \n                  ? 'Purchase RAM with WAX tokens. RAM is used to store account data and smart contract state.'\n                  : 'Sell RAM bytes back to the system for WAX tokens. Only sell RAM you don\\'t need.'\n                }\n              </p>\n              \n              {/* RAM Market Information */}\n              <div className=\"ram-market-info\">\n                {isLoadingData ? (\n                  <div className=\"loading-info\">\n                    <span>Loading RAM market data...</span>\n                  </div>\n                ) : (\n                  <>\n                    {ramPrice !== null && (\n                      <div className=\"market-stat\">\n                        <span className=\"stat-label\">Current RAM Price:</span>\n                        <span className=\"stat-value\">{(ramPrice * 1024).toFixed(8)} WAX/KB</span>\n                      </div>\n                    )}\n                    {action === 'sell' && userRamBytes !== null && (\n                      <div className=\"market-stat\">\n                        <span className=\"stat-label\">Available RAM:</span>\n                        <span className=\"stat-value\">{userRamBytes.toLocaleString()} bytes</span>\n                      </div>\n                    )}\n                    {action === 'buy' && ramPrice !== null && amount && (\n                      <div className=\"market-stat\">\n                        <span className=\"stat-label\">Estimated RAM:</span>\n                        <span className=\"stat-value\">\n                          {Math.floor(parseFloat(amount) / ramPrice).toLocaleString()} bytes\n                        </span>\n                      </div>\n                    )}\n                    {action === 'sell' && ramPrice !== null && amount && (\n                      <div className=\"market-stat\">\n                        <span className=\"stat-label\">Estimated WAX:</span>\n                        <span className=\"stat-value\">\n                          {(parseFloat(amount) * ramPrice).toFixed(8)} WAX\n                        </span>\n                      </div>\n                    )}\n                  </>\n                )}\n              </div>\n            </div>\n          </div>\n          \n          <form onSubmit={handleSubmit}>\n            <div className=\"form-group\">\n              <label htmlFor=\"amount\">{inputLabel}</label>\n              <input\n                type=\"number\"\n                id=\"amount\"\n                value={amount}\n                onChange={(e) => setAmount(e.target.value)}\n                placeholder={inputPlaceholder}\n                min={action === 'buy' ? '0.00000001' : '1'}\n                step={action === 'buy' ? '0.00000001' : '1'}\n                required\n                disabled={isProcessing}\n              />\n              {action === 'buy' && (\n                <small className=\"form-hint\">\n                  Minimum: 0.00000001 WAX\n                </small>\n              )}\n              {action === 'sell' && (\n                <small className=\"form-hint\">\n                  Enter the number of bytes to sell\n                </small>\n              )}\n            </div>\n            \n            <div className=\"form-actions\">\n              <button \n                type=\"button\" \n                className=\"btn-secondary\" \n                onClick={onClose}\n                disabled={isProcessing}\n              >\n                Cancel\n              </button>\n              <button \n                type=\"submit\" \n                className=\"btn-primary\"\n                disabled={isProcessing || !amount || parseFloat(amount) <= 0}\n              >\n                {isProcessing ? 'Processing...' : `${actionName} RAM`}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default RAMModal","import React, { useState } from 'react'\nimport { useWallet } from '../hooks/useWallet'\nimport { useNotifications } from '../hooks/useNotifications'\nimport { log } from '../services/loggingService'\nimport { WharfKitService } from '../services/wharfkit'\nimport '../css/modal.css'\nimport '../css/token-balances.css'\n\ninterface TokenBalance {\n  contract: string\n  symbol: string\n  balance: string\n  value: string\n}\n\ninterface TokenTransferModalProps {\n  token: TokenBalance | null\n  isOpen: boolean\n  onClose: () => void\n  onSuccess?: () => void\n}\n\nconst TokenTransferModal: React.FC<TokenTransferModalProps> = ({ token, isOpen, onClose, onSuccess }) => {\n  const [recipient, setRecipient] = useState('')\n  const [amount, setAmount] = useState('')\n  const [memo, setMemo] = useState('')\n  const [isTransferring, setIsTransferring] = useState(false)\n  const [recipients, setRecipients] = useState<string[]>([])\n  const [isBulkTransfer, setIsBulkTransfer] = useState(false)\n  const { session, transferTokens } = useWallet()\n  const { showSuccess, showError } = useNotifications()\n\n  const validateWaxAccount = (account: string): boolean => {\n    // WAX account names can be 1-12 characters, lowercase letters, numbers 1-5, and dots\n    const waxAccountRegex = /^[a-z1-5.]{1,12}$/\n    return waxAccountRegex.test(account) && account.length >= 1 && account.length <= 12\n  }\n\n  const validateAmount = (value: string): boolean => {\n    const numValue = parseFloat(value)\n    const maxBalance = parseFloat(token?.balance || '0')\n    return numValue > 0 && numValue <= maxBalance\n  }\n\n  const parseRecipients = (recipientString: string): string[] => {\n    return recipientString\n      .split(',')\n      .map(r => r.trim().toLowerCase())\n      .filter(r => r.length > 0)\n  }\n\n  const handleRecipientChange = (value: string) => {\n    setRecipient(value.toLowerCase())\n    const parsedRecipients = parseRecipients(value)\n    setRecipients(parsedRecipients)\n    setIsBulkTransfer(parsedRecipients.length > 1)\n  }\n\n  const handleMaxClick = () => {\n    if (token) {\n      // Extract just the numeric part from the balance string\n      const balanceAmount = token.balance.split(' ')[0]\n      setAmount(balanceAmount)\n    }\n  }\n\n  const getAmountPerRecipient = (): number => {\n    if (!amount || recipients.length === 0) return 0\n    return parseFloat(amount) / recipients.length\n  }\n\n  const getTokenPrecision = (balance: string): number => {\n    // Extract precision from the balance string (e.g., \"100.12345678 TOKEN\" -> 8)\n    const parts = balance.split(' ')\n    if (parts.length > 0) {\n      const decimalPart = parts[0].split('.')[1]\n      return decimalPart ? decimalPart.length : 0\n    }\n    return 8 // Default to 8 decimals\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    if (!token || !session || !recipient.trim() || !amount.trim()) {\n      showError('Validation Error', 'Please fill in all required fields')\n      return\n    }\n\n    // Validate all recipients\n    const invalidRecipients = recipients.filter(r => !validateWaxAccount(r))\n    if (invalidRecipients.length > 0) {\n      showError(\n        'Invalid Account Names', \n        `Invalid WAX account names: ${invalidRecipients.join(', ')}. Account names must be 12 characters, lowercase letters and numbers 1-5.`\n      )\n      return\n    }\n\n    if (!validateAmount(amount)) {\n      showError(\n        'Invalid Amount',\n        'Please enter a valid amount that does not exceed your balance'\n      )\n      return\n    }\n\n    setIsTransferring(true)\n\n    try {\n      const precision = getTokenPrecision(token.balance)\n      const actions = []\n\n      if (isBulkTransfer && recipients.length > 1) {\n        // Bulk transfer - divide amount equally among recipients\n        const amountPerRecipient = getAmountPerRecipient()\n        const formattedAmountPerRecipient = amountPerRecipient.toFixed(precision) + ' ' + token.symbol\n        \n        for (const recipientAccount of recipients) {\n          actions.push({\n            account: token.contract,\n            name: 'transfer',\n            authorization: [{\n              actor: session.actor,\n              permission: session.permission\n            }],\n            data: {\n              from: WharfKitService.safeGetActor(session),\n              to: recipientAccount,\n              quantity: formattedAmountPerRecipient,\n              memo: memo.trim() || 'Bulk transfer via PxMarket - market.pixeljourney.xyz'\n            }\n          })\n        }\n      } else {\n        // Single transfer\n        const formattedAmount = parseFloat(amount).toFixed(precision) + ' ' + token.symbol\n        \n        actions.push({\n          account: token.contract,\n          name: 'transfer',\n          authorization: [{\n            actor: WharfKitService.safeGetActor(session),\n            permission: WharfKitService.safeGetPermission(session)\n          }],\n          data: {\n            from: WharfKitService.safeGetActor(session),\n            to: recipients[0] || recipient.trim(),\n            quantity: formattedAmount,\n            memo: memo.trim() || 'Transferred via PxMarket - market.pixeljourney.xyz'\n          }\n        })\n      }\n\n      if (isBulkTransfer) {\n        // Handle bulk transfers - execute each transfer individually\n        let successCount = 0\n        for (const recipientAccount of recipients) {\n          try {\n            if (!transferTokens) {\n              log.error('transferTokens service not available', 'TokenTransferModal')\n              continue\n            }\n            const result = await transferTokens(\n              recipientAccount,\n              getAmountPerRecipient().toString(),\n              token.symbol,\n              memo.trim() || 'Bulk transfer via PxMarket - market.pixeljourney.xyz'\n            )\n            if (result) successCount++\n          } catch (error) {\n            log.error(`Transfer to ${recipientAccount} failed`, 'TokenTransferModal', error as Error)\n          }\n        }\n        \n        if (successCount > 0) {\n          const successMessage = successCount === recipients.length\n            ? `${amount} ${token.symbol} transferred to all ${recipients.length} recipients successfully!`\n            : `${amount} ${token.symbol} transferred to ${successCount}/${recipients.length} recipients successfully!`\n          showSuccess('Bulk Transfer Complete', successMessage)\n        }\n      } else {\n        // Single transfer using centralized service\n        if (!transferTokens) {\n          showError('Transfer Error', 'Transfer service not available')\n          return\n        }\n        const result = await transferTokens(\n          recipients[0] || recipient.trim(),\n          amount,\n          token.symbol,\n          memo.trim() || 'Transferred via PxMarket - market.pixeljourney.xyz'\n        )\n        \n        if (result) {\n          showSuccess('Transfer Successful', `${amount} ${token.symbol} transferred successfully!`)\n        }\n      }\n      \n      // Reset form and close modal on success\n      onSuccess?.()\n      onClose()\n      setRecipient('')\n      setAmount('')\n      setMemo('')\n      setRecipients([])\n      setIsBulkTransfer(false)\n    } catch (error) {\n      log.error('Token transfer failed', 'TokenTransferModal', error as Error)\n      showError(\n        'Transfer Failed',\n        error instanceof Error ? error.message : 'Unknown error occurred'\n      )\n    } finally {\n      setIsTransferring(false)\n    }\n  }\n\n  const handleClose = () => {\n    if (!isTransferring) {\n      setRecipient('')\n      setAmount('')\n      setMemo('')\n      setRecipients([])\n      setIsBulkTransfer(false)\n      onClose()\n    }\n  }\n\n  if (!isOpen || !token) return null\n\n  return (\n    <div className=\"modal-overlay\" onClick={handleClose}>\n      <div className=\"modal-content token-transfer-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h2>Transfer {token.symbol}</h2>\n          <button \n            className=\"modal-close\" \n            onClick={handleClose}\n            disabled={isTransferring}\n          >\n            ×\n          </button>\n        </div>\n\n        <div className=\"modal-body\">\n          <div className=\"token-preview\">\n            <div className=\"token-info\">\n              <div className=\"token-icon\">🪙</div>\n              <div className=\"token-details\">\n                <h3>{token.symbol}</h3>\n                <p className=\"token-contract\">{token.contract}</p>\n                <p className=\"token-balance\">Available: {token.balance} {token.symbol}</p>\n                {token.value !== 'N/A' && token.value !== '0.00' && (\n                  <p className=\"token-usd-value\">≈ ${token.value} USD</p>\n                )}\n              </div>\n            </div>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"modal-form token-transfer-form\">\n            <div className=\"form-group\">\n              <label htmlFor=\"recipient\">\n                {isBulkTransfer ? 'Recipients (comma-separated) *' : 'Recipient WAX Account *'}\n              </label>\n              <input\n                type=\"text\"\n                id=\"recipient\"\n                value={recipient}\n                onChange={(e) => handleRecipientChange(e.target.value)}\n                placeholder={isBulkTransfer ? \"e.g. pixeljourney,market.pxj,council.pxj\" : \"e.g. pixeljourney\"}\n                required\n                disabled={isTransferring}\n                className=\"recipient-input\"\n              />\n              <small className=\"input-help\">\n                {isBulkTransfer \n                  ? `Enter WAX account names separated by commas (${recipients.length} recipients detected)`\n                  : 'Enter a valid WAX account name (12 characters, lowercase letters and numbers 1-5)'\n                }\n              </small>\n              {isBulkTransfer && recipients.length > 1 && (\n                <div className=\"recipients-preview\">\n                  <strong>Recipients:</strong>\n                  <ul>\n                    {recipients.map((rec, index) => (\n                      <li key={index} className={validateWaxAccount(rec) ? 'valid' : 'invalid'}>\n                        {rec} {!validateWaxAccount(rec) && '❌'}\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n            </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"amount\">Amount *</label>\n              <div className=\"amount-input-wrapper\">\n                <input\n                  type=\"number\"\n                  id=\"amount\"\n                  value={amount}\n                  onChange={(e) => setAmount(e.target.value)}\n                  placeholder=\"0.00000000\"\n                  step=\"0.00000001\"\n                  min=\"0\"\n                  max={token.balance.split(' ')[0]}\n                  required\n                  disabled={isTransferring}\n                  className=\"amount-input\"\n                />\n                <button\n                  type=\"button\"\n                  className=\"max-btn\"\n                  onClick={handleMaxClick}\n                  disabled={isTransferring}\n                >\n                  MAX\n                </button>\n              </div>\n              {isBulkTransfer && recipients.length > 1 && amount && (\n                <small className=\"distribution-info\">\n                  Each recipient will receive: {getAmountPerRecipient().toFixed(getTokenPrecision(token.balance))} {token.symbol}\n                </small>\n              )}\n            </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"memo\">Memo (Optional)</label>\n              <input\n                type=\"text\"\n                id=\"memo\"\n                value={memo}\n                onChange={(e) => setMemo(e.target.value)}\n                placeholder=\"Optional transfer message\"\n                maxLength={256}\n                disabled={isTransferring}\n                className=\"memo-input\"\n              />\n            </div>\n\n            <div className=\"transfer-warning\">\n              <div className=\"warning-icon\">⚠️</div>\n              <div className=\"warning-text\">\n                <strong>Warning:</strong> This action cannot be undone. Make sure you trust the recipient and have entered the correct account name and amount.\n              </div>\n            </div>\n\n            <div className=\"modal-actions\">\n              <button \n                type=\"button\" \n                className=\"btn-secondary\"\n                onClick={handleClose}\n                disabled={isTransferring}\n              >\n                Cancel\n              </button>\n              <button \n                type=\"submit\" \n                className=\"btn-primary transfer-btn\"\n                disabled={\n                  isTransferring || \n                  !recipient.trim() || \n                  !amount.trim() || \n                  !validateWaxAccount(recipient.trim()) ||\n                  !validateAmount(amount)\n                }\n              >\n                {isTransferring ? (\n                  <>\n                    <div className=\"spinner\"></div>\n                    {isBulkTransfer ? 'Bulk Transferring...' : 'Transferring...'}\n                  </>\n                ) : (\n                  isBulkTransfer ? `Bulk Transfer ${token.symbol}` : `Transfer ${token.symbol}`\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default TokenTransferModal","import React, { useState, useEffect, useCallback } from 'react'\nimport { useWallet } from '../hooks/useWallet'\nimport { apiService } from '../services/api'\nimport '../css/portfolio-analytics.css'\n\ninterface PortfolioMetrics {\n  totalValue: number\n  totalInvested: number\n  profitLoss: number\n  profitLossPercentage: number\n  totalNFTs: number\n  uniqueCollections: number\n  averageHoldingTime: number\n  bestPerformingCollection: string\n  worstPerformingCollection: string\n}\n\ninterface CollectionPerformance {\n  collection: string\n  totalValue: number\n  totalInvested: number\n  profitLoss: number\n  profitLossPercentage: number\n  nftCount: number\n  averagePrice: number\n  floorPrice: number\n  performance: 'excellent' | 'good' | 'neutral' | 'poor'\n}\n\ninterface InvestmentInsight {\n  type: 'profit' | 'loss' | 'opportunity' | 'warning'\n  title: string\n  description: string\n  value?: string\n  collection?: string\n}\n\ninterface TimeSeriesData {\n  date: string\n  value: number\n  invested: number\n}\n\nconst PortfolioAnalytics: React.FC = () => {\n  const { isConnected, account } = useWallet()\n  const [portfolioMetrics, setPortfolioMetrics] = useState<PortfolioMetrics | null>(null)\n  const [collectionPerformance, setCollectionPerformance] = useState<CollectionPerformance[]>([])\n  const [insights, setInsights] = useState<InvestmentInsight[]>([])\n  const [timeSeriesData, setTimeSeriesData] = useState<TimeSeriesData[]>([])\n  const [loading, setLoading] = useState(false)\n  const [selectedTimeframe, setSelectedTimeframe] = useState<'7d' | '30d' | '90d' | '1y'>('30d')\n  const [selectedView, setSelectedView] = useState<'overview' | 'collections' | 'insights'>('overview')\n\n  const generateTimeSeriesData = useCallback(async (metrics: PortfolioMetrics) => {\n    if (!account) return\n    \n    try {\n      // Get user's transaction history to build historical portfolio value\n      const transactions = await apiService.getUserTransactions(account, 1000)\n      const days = selectedTimeframe === '7d' ? 7 : selectedTimeframe === '30d' ? 30 : selectedTimeframe === '90d' ? 90 : 365\n      \n      // Create time series data based on actual transaction history\n      const data: TimeSeriesData[] = []\n      const now = new Date()\n      \n      // Build portfolio value over time using transaction history\n      // const runningValue = 0\n      // const runningInvested = 0\n      \n      for (let i = days; i >= 0; i--) {\n        const targetDate = new Date(now)\n        targetDate.setDate(targetDate.getDate() - i)\n        const targetTimestamp = targetDate.getTime()\n        \n        // Find transactions up to this date\n        const relevantTransactions = transactions.filter(tx => {\n          const txDate = new Date(tx.block_time).getTime()\n          return txDate <= targetTimestamp\n        })\n        \n        // Calculate portfolio value at this point in time\n        let valueAtDate = 0\n        let investedAtDate = 0\n        \n        // Count purchases and sales up to this date\n        relevantTransactions.forEach(tx => {\n          if (tx.type === 'purchase' && tx.price) {\n            const price = parseFloat(tx.price.replace(/[^0-9.-]/g, '') || '0')\n            investedAtDate += price\n            valueAtDate += price // Initial value equals purchase price\n          } else if (tx.type === 'sale' && tx.price) {\n            const price = parseFloat(tx.price.replace(/[^0-9.-]/g, '') || '0')\n            valueAtDate -= price // Remove sold asset value\n          }\n        })\n        \n        // For current day, use actual current metrics\n        if (i === 0) {\n          valueAtDate = metrics.totalValue\n          investedAtDate = metrics.totalInvested\n        } else if (valueAtDate === 0 && investedAtDate === 0) {\n          // If no transactions yet, use zero values\n          valueAtDate = 0\n          investedAtDate = 0\n        }\n        \n        data.push({\n          date: targetDate.toISOString().split('T')[0],\n          value: valueAtDate,\n          invested: investedAtDate\n        })\n      }\n      \n      setTimeSeriesData(data)\n    } catch (error) {\n      console.error('Error generating time series data:', error)\n      // Fallback to simple current value projection\n      const data: TimeSeriesData[] = []\n      const days = selectedTimeframe === '7d' ? 7 : selectedTimeframe === '30d' ? 30 : selectedTimeframe === '90d' ? 90 : 365\n      \n      for (let i = days; i >= 0; i--) {\n        const date = new Date()\n        date.setDate(date.getDate() - i)\n        \n        data.push({\n          date: date.toISOString().split('T')[0],\n          value: i === 0 ? metrics.totalValue : metrics.totalValue * 0.95, // Slight historical discount\n          invested: metrics.totalInvested\n        })\n      }\n      \n      setTimeSeriesData(data)\n    }\n  }, [account, selectedTimeframe])\n\n  const calculatePortfolioMetrics = useCallback(async () => {\n    if (!account) return\n\n    setLoading(true)\n    try {\n      // Get user's current inventory\n      const inventory = await apiService.getUserInventory(account)\n      \n      // Get user's transaction history to calculate invested amounts\n      const transactions = await apiService.getUserTransactions(account)\n      \n      // Calculate current portfolio value\n      let totalValue = 0\n      let totalInvested = 0\n      const collectionData: { [key: string]: CollectionPerformance } = {}\n      \n      // Process current inventory\n      for (const nft of inventory) {\n        const currentPrice = parseFloat(nft.price || '0')\n        totalValue += currentPrice\n        \n        // Find purchase transaction for this NFT\n        const purchaseTransaction = transactions.find(tx => \n          tx.asset_id === nft.asset_id && tx.type === 'purchase'\n        )\n        \n        const investedAmount = purchaseTransaction ? parseFloat(purchaseTransaction.price || '0') : currentPrice\n        totalInvested += investedAmount\n        \n        // Group by collection\n        if (!collectionData[nft.collection]) {\n          collectionData[nft.collection] = {\n            collection: nft.collection,\n            totalValue: 0,\n            totalInvested: 0,\n            profitLoss: 0,\n            profitLossPercentage: 0,\n            nftCount: 0,\n            averagePrice: 0,\n            floorPrice: 0,\n            performance: 'neutral'\n          }\n        }\n        \n        collectionData[nft.collection].totalValue += currentPrice\n        collectionData[nft.collection].totalInvested += investedAmount\n        collectionData[nft.collection].nftCount += 1\n      }\n      \n      // Calculate collection performance\n      const collections = Object.values(collectionData).map(collection => {\n        collection.profitLoss = collection.totalValue - collection.totalInvested\n        collection.profitLossPercentage = collection.totalInvested > 0 \n          ? (collection.profitLoss / collection.totalInvested) * 100 \n          : 0\n        collection.averagePrice = collection.nftCount > 0 \n          ? collection.totalValue / collection.nftCount \n          : 0\n        \n        // Determine performance rating\n        if (collection.profitLossPercentage > 20) collection.performance = 'excellent'\n        else if (collection.profitLossPercentage > 5) collection.performance = 'good'\n        else if (collection.profitLossPercentage > -5) collection.performance = 'neutral'\n        else collection.performance = 'poor'\n        \n        return collection\n      })\n      \n      // Calculate overall metrics\n      const profitLoss = totalValue - totalInvested\n      const profitLossPercentage = totalInvested > 0 ? (profitLoss / totalInvested) * 100 : 0\n      \n      // Find best and worst performing collections\n      const sortedByPerformance = collections.sort((a, b) => b.profitLossPercentage - a.profitLossPercentage)\n      const bestPerforming = sortedByPerformance[0]?.collection || 'N/A'\n      const worstPerforming = sortedByPerformance[sortedByPerformance.length - 1]?.collection || 'N/A'\n      \n      // Calculate average holding time (mock calculation)\n      const averageHoldingTime = 45 // days - would need more complex calculation with real data\n      \n      const metrics: PortfolioMetrics = {\n        totalValue,\n        totalInvested,\n        profitLoss,\n        profitLossPercentage,\n        totalNFTs: inventory.length,\n        uniqueCollections: collections.length,\n        averageHoldingTime,\n        bestPerformingCollection: bestPerforming,\n        worstPerformingCollection: worstPerforming\n      }\n      \n      setPortfolioMetrics(metrics)\n      setCollectionPerformance(collections)\n      \n      // Generate insights\n      generateInsights(metrics, collections)\n      \n      // Generate time series data from transaction history\n      await generateTimeSeriesData(metrics)\n      \n    } catch (error) {\n      console.error('Error calculating portfolio metrics:', error)\n    } finally {\n      setLoading(false)\n    }\n  }, [account, generateTimeSeriesData])\n\n  const generateInsights = (metrics: PortfolioMetrics, collections: CollectionPerformance[]) => {\n    const newInsights: InvestmentInsight[] = []\n    \n    // Profit/Loss insights\n    if (metrics.profitLoss > 0) {\n      newInsights.push({\n        type: 'profit',\n        title: 'Portfolio in Profit',\n        description: `Your portfolio has gained ${metrics.profitLossPercentage.toFixed(1)}% since initial investment`,\n        value: `+${metrics.profitLoss.toFixed(2)} WAX`\n      })\n    } else if (metrics.profitLoss < 0) {\n      newInsights.push({\n        type: 'loss',\n        title: 'Portfolio Underperforming',\n        description: `Your portfolio is down ${Math.abs(metrics.profitLossPercentage).toFixed(1)}% from initial investment`,\n        value: `${metrics.profitLoss.toFixed(2)} WAX`\n      })\n    }\n    \n    // Best performing collection\n    const bestCollection = collections.find(c => c.collection === metrics.bestPerformingCollection)\n    if (bestCollection && bestCollection.profitLossPercentage > 10) {\n      newInsights.push({\n        type: 'profit',\n        title: 'Top Performer',\n        description: `${bestCollection.collection} is your best performing collection`,\n        value: `+${bestCollection.profitLossPercentage.toFixed(1)}%`,\n        collection: bestCollection.collection\n      })\n    }\n    \n    // Diversification insight\n    if (collections.length < 3) {\n      newInsights.push({\n        type: 'opportunity',\n        title: 'Diversification Opportunity',\n        description: 'Consider diversifying across more collections to reduce risk',\n        value: `${collections.length} collections`\n      })\n    }\n    \n    // High concentration warning\n    const largestCollection = collections.reduce((max, collection) => \n      collection.totalValue > max.totalValue ? collection : max, collections[0]\n    )\n    \n    if (largestCollection && (largestCollection.totalValue / metrics.totalValue) > 0.6) {\n      newInsights.push({\n        type: 'warning',\n        title: 'High Concentration Risk',\n        description: `${largestCollection.collection} represents over 60% of your portfolio`,\n        collection: largestCollection.collection\n      })\n    }\n    \n    setInsights(newInsights)\n  }\n\n\n\n  useEffect(() => {\n    if (isConnected && account) {\n      calculatePortfolioMetrics()\n    }\n  }, [isConnected, account, calculatePortfolioMetrics])\n\n  const formatWAX = (amount: number) => {\n    return `${amount.toFixed(2)} WAX`\n  }\n\n  const formatPercentage = (percentage: number) => {\n    const sign = percentage >= 0 ? '+' : ''\n    return `${sign}${percentage.toFixed(1)}%`\n  }\n\n  if (!isConnected) {\n    return (\n      <div className=\"portfolio-analytics\">\n        <div className=\"wallet-connection-prompt\">\n          <h3>🔗 Connect Your Wallet</h3>\n          <p>Connect your WAX wallet to view detailed portfolio analytics and investment insights.</p>\n        </div>\n      </div>\n    )\n  }\n\n  if (loading) {\n    return (\n      <div className=\"portfolio-analytics\">\n        <div className=\"loading-state\">\n          <div className=\"loading-spinner\"></div>\n          <p>Analyzing your portfolio...</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"portfolio-analytics\">\n      <div className=\"analytics-header\">\n        <h2>Portfolio Analytics</h2>\n        <div className=\"analytics-controls\">\n          <div className=\"timeframe-selector\">\n            {(['7d', '30d', '90d', '1y'] as const).map(timeframe => (\n              <button\n                key={timeframe}\n                className={`timeframe-btn ${selectedTimeframe === timeframe ? 'active' : ''}`}\n                onClick={() => setSelectedTimeframe(timeframe)}\n              >\n                {timeframe}\n              </button>\n            ))}\n          </div>\n          <div className=\"view-selector\">\n            {(['overview', 'collections', 'insights'] as const).map(view => (\n              <button\n                key={view}\n                className={`view-btn ${selectedView === view ? 'active' : ''}`}\n                onClick={() => setSelectedView(view)}\n              >\n                {view.charAt(0).toUpperCase() + view.slice(1)}\n              </button>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {selectedView === 'overview' && portfolioMetrics && (\n        <div className=\"overview-section\">\n          <div className=\"metrics-grid\">\n            <div className=\"metric-card primary\">\n              <div className=\"metric-header\">\n                <h3>Total Portfolio Value</h3>\n                <span className=\"metric-icon\">💰</span>\n              </div>\n              <div className=\"metric-value\">{formatWAX(portfolioMetrics.totalValue)}</div>\n              <div className={`metric-change ${portfolioMetrics.profitLoss >= 0 ? 'positive' : 'negative'}`}>\n                {formatPercentage(portfolioMetrics.profitLossPercentage)} ({formatWAX(portfolioMetrics.profitLoss)})\n              </div>\n            </div>\n            \n            <div className=\"metric-card\">\n              <div className=\"metric-header\">\n                <h3>Total Invested</h3>\n                <span className=\"metric-icon\">📈</span>\n              </div>\n              <div className=\"metric-value\">{formatWAX(portfolioMetrics.totalInvested)}</div>\n            </div>\n            \n            <div className=\"metric-card\">\n              <div className=\"metric-header\">\n                <h3>NFTs Owned</h3>\n                <span className=\"metric-icon\">🎨</span>\n              </div>\n              <div className=\"metric-value\">{portfolioMetrics.totalNFTs}</div>\n              <div className=\"metric-subtitle\">{portfolioMetrics.uniqueCollections} collections</div>\n            </div>\n            \n            <div className=\"metric-card\">\n              <div className=\"metric-header\">\n                <h3>Avg. Holding Time</h3>\n                <span className=\"metric-icon\">⏱️</span>\n              </div>\n              <div className=\"metric-value\">{portfolioMetrics.averageHoldingTime}d</div>\n            </div>\n          </div>\n\n          <div className=\"performance-chart\">\n            <h3>Portfolio Performance</h3>\n            <div className=\"chart-container\">\n              <svg className=\"performance-svg\" viewBox=\"0 0 800 200\">\n                {timeSeriesData.map((point, index) => {\n                  const x = (index / (timeSeriesData.length - 1)) * 780 + 10\n                  const y = 190 - ((point.value / Math.max(...timeSeriesData.map(d => d.value))) * 180)\n                  const investedY = 190 - ((point.invested / Math.max(...timeSeriesData.map(d => d.value))) * 180)\n                  \n                  return (\n                    <g key={index}>\n                      {index > 0 && (\n                        <>\n                          <line\n                            x1={(index - 1) / (timeSeriesData.length - 1) * 780 + 10}\n                            y1={190 - ((timeSeriesData[index - 1].value / Math.max(...timeSeriesData.map(d => d.value))) * 180)}\n                            x2={x}\n                            y2={y}\n                            stroke=\"#4CAF50\"\n                            strokeWidth=\"2\"\n                          />\n                          <line\n                            x1={(index - 1) / (timeSeriesData.length - 1) * 780 + 10}\n                            y1={190 - ((timeSeriesData[index - 1].invested / Math.max(...timeSeriesData.map(d => d.value))) * 180)}\n                            x2={x}\n                            y2={investedY}\n                            stroke=\"#FF9800\"\n                            strokeWidth=\"2\"\n                            strokeDasharray=\"5,5\"\n                          />\n                        </>\n                      )}\n                      <circle cx={x} cy={y} r=\"3\" fill=\"#4CAF50\" />\n                    </g>\n                  )\n                })}\n              </svg>\n              <div className=\"chart-legend\">\n                <div className=\"legend-item\">\n                  <div className=\"legend-color\" style={{ backgroundColor: 'var(--success-color)' }}></div>\n                  <span>Current Value</span>\n                </div>\n                <div className=\"legend-item\">\n                  <div className=\"legend-color dashed\" style={{ backgroundColor: 'var(--warning-color)' }}></div>\n                  <span>Invested Amount</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {selectedView === 'collections' && (\n        <div className=\"collections-section\">\n          <h3>Collection Performance</h3>\n          <div className=\"collections-grid\">\n            {collectionPerformance.map((collection, index) => (\n              <div key={index} className={`collection-card ${collection.performance}`}>\n                <div className=\"collection-header\">\n                  <h4>{collection.collection}</h4>\n                  <span className={`performance-badge ${collection.performance}`}>\n                    {collection.performance}\n                  </span>\n                </div>\n                <div className=\"collection-metrics\">\n                  <div className=\"collection-metric\">\n                    <span className=\"metric-label\">Value:</span>\n                    <span className=\"metric-value\">{formatWAX(collection.totalValue)}</span>\n                  </div>\n                  <div className=\"collection-metric\">\n                    <span className=\"metric-label\">P&L:</span>\n                    <span className={`metric-value ${collection.profitLoss >= 0 ? 'positive' : 'negative'}`}>\n                      {formatPercentage(collection.profitLossPercentage)}\n                    </span>\n                  </div>\n                  <div className=\"collection-metric\">\n                    <span className=\"metric-label\">NFTs:</span>\n                    <span className=\"metric-value\">{collection.nftCount}</span>\n                  </div>\n                  <div className=\"collection-metric\">\n                    <span className=\"metric-label\">Avg Price:</span>\n                    <span className=\"metric-value\">{formatWAX(collection.averagePrice)}</span>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {selectedView === 'insights' && (\n        <div className=\"insights-section\">\n          <h3>Investment Insights</h3>\n          <div className=\"insights-grid\">\n            {insights.map((insight, index) => (\n              <div key={index} className={`insight-card ${insight.type}`}>\n                <div className=\"insight-header\">\n                  <span className={`insight-icon ${insight.type}`}>\n                    {insight.type === 'profit' && '📈'}\n                    {insight.type === 'loss' && '📉'}\n                    {insight.type === 'opportunity' && '💡'}\n                    {insight.type === 'warning' && '⚠️'}\n                  </span>\n                  <h4>{insight.title}</h4>\n                  {insight.value && (\n                    <span className=\"insight-value\">{insight.value}</span>\n                  )}\n                </div>\n                <p className=\"insight-description\">{insight.description}</p>\n                {insight.collection && (\n                  <div className=\"insight-collection\">\n                    Collection: {insight.collection}\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default PortfolioAnalytics","import React, { useState, useEffect, useMemo, useCallback } from 'react'\nimport { badgeService } from '../services/badgeService'\nimport type { UserBadge } from '../services/badgeService'\nimport { useWallet } from '../contexts/WalletContext'\nimport ShareModal from './ShareModal'\nimport { log } from '../services/loggingService'\nimport '../css/pxbadges.css'\n\ninterface BadgeCategory {\n  id: string\n  name: string\n  icon: string\n  description: string\n  badges: UserBadge[]\n}\n\ninterface AchievementSeries {\n  name: string\n  badges: UserBadge[]\n  steps: { tier: number; earned: boolean; current?: boolean }[]\n}\n\ninterface BadgeStats {\n  totalBadges: number\n  badgesByType: Record<string, number>\n  badgesByRarity: Record<string, number>\n  recentBadges: UserBadge[]\n  progressBadges: UserBadge[]\n}\n\nconst PxBadges: React.FC = () => {\n  const { account } = useWallet()\n  const [badges, setBadges] = useState<UserBadge[]>([])\n  const [loading, setLoading] = useState(true)\n  const [collapsedCategories, setCollapsedCategories] = useState<Set<string>>(new Set())\n  const [badgeStats, setBadgeStats] = useState<BadgeStats | null>(null)\n  const [showShareModal, setShowShareModal] = useState(false)\n\n  const loadUserBadges = useCallback(async () => {\n    if (!account) return\n    \n    try {\n      setLoading(true)\n      const result = await badgeService.checkUserBadges(account)\n      const stats = await badgeService.getUserBadgeStats(account)\n      setBadges(result.badges)\n      setBadgeStats(stats)\n    } catch (error) {\n      log.error('Error loading badges', 'PxBadges.loadUserBadges', error as Error, { account })\n    } finally {\n      setLoading(false)\n    }\n  }, [account])\n\n  useEffect(() => {\n    if (account) {\n      loadUserBadges()\n    } else {\n      setBadges([])\n      setLoading(false)\n    }\n  }, [account, loadUserBadges])\n\n  const categories = useMemo((): BadgeCategory[] => {\n    const allBadgeDefinitions = badgeService.getAllBadgeDefinitions()\n    \n    const categoryMap: Record<string, BadgeCategory> = {\n      holdings: {\n        id: 'holdings',\n        name: 'Token Holdings',\n        icon: '💰',\n        description: 'Achievements for holding various tokens',\n        badges: []\n      },\n      ownership: {\n        id: 'ownership',\n        name: 'NFT Collections',\n        icon: '🎭',\n        description: 'Achievements for owning NFTs and collectibles',\n        badges: []\n      },\n      trading: {\n        id: 'trading',\n        name: 'Trading Mastery',\n        icon: '📈',\n        description: 'Achievements for trading activities',\n        badges: []\n      },\n      social: {\n        id: 'social',\n        name: 'Community',\n        icon: '👥',\n        description: 'Achievements for community participation',\n        badges: []\n      },\n      achievement: {\n        id: 'achievement',\n        name: 'Special Achievements',\n        icon: '🏆',\n        description: 'Rare and special accomplishments',\n        badges: []\n      },\n      special: {\n        id: 'special',\n        name: 'Legendary',\n        icon: '⭐',\n        description: 'Ultra-rare legendary achievements',\n        badges: []\n      }\n    }\n\n    // Add all badge definitions to their respective categories\n    allBadgeDefinitions.forEach(badgeDef => {\n      const category = categoryMap[badgeDef.type] || categoryMap.achievement\n      const earnedBadge = badges.find(b => b.id === badgeDef.id)\n      \n      category.badges.push(earnedBadge || {\n        ...badgeDef,\n        unlockedAt: undefined\n      })\n    })\n\n    return Object.values(categoryMap).filter(cat => cat.badges.length > 0)\n  }, [badges])\n\n  const achievementSeries = useMemo((): AchievementSeries[] => {\n    const series: AchievementSeries[] = []\n    \n    // Pixal PFP Collector Series\n    const pixalCollectorBadges = badges.filter(b => b.id.startsWith('pixal-collector'))\n      .sort((a, b) => (a.tier || 0) - (b.tier || 0))\n    \n    if (pixalCollectorBadges.length > 0) {\n      const steps = [1, 2, 3, 4, 5].map(tier => {\n        const badge = pixalCollectorBadges.find(b => b.tier === tier)\n        return {\n          tier,\n          earned: !!badge?.unlockedAt,\n          current: badge?.progress && !badge.unlockedAt\n        }\n      })\n      \n      series.push({\n        name: 'Pixal Collector',\n        badges: pixalCollectorBadges,\n        steps\n      })\n    }\n    \n    // WaxRock Collector Series\n    const waxrockCollectorBadges = badges.filter(b => b.id.startsWith('waxrock-collector'))\n      .sort((a, b) => (a.tier || 0) - (b.tier || 0))\n    \n    if (waxrockCollectorBadges.length > 0) {\n      const steps = [1, 2, 3].map(tier => {\n        const badge = waxrockCollectorBadges.find(b => b.tier === tier)\n        return {\n          tier,\n          earned: !!badge?.unlockedAt,\n          current: badge?.progress && !badge.unlockedAt\n        }\n      })\n      \n      series.push({\n        name: 'WaxRock Collector',\n        badges: waxrockCollectorBadges,\n        steps\n      })\n    }\n    \n    return series\n  }, [badges])\n\n  const toggleCategory = (categoryId: string) => {\n    const newCollapsed = new Set(collapsedCategories)\n    if (newCollapsed.has(categoryId)) {\n      newCollapsed.delete(categoryId)\n    } else {\n      newCollapsed.add(categoryId)\n    }\n    setCollapsedCategories(newCollapsed)\n  }\n\n  const getRarityClass = (badge: UserBadge): string => {\n    if (badge.rarity === 'legendary') return 'legendary'\n    if (badge.rarity === 'epic') return 'epic'\n    if (badge.rarity === 'rare') return 'rare'\n    return ''\n  }\n\n  const formatDate = (date: Date | string | undefined): string => {\n    if (!date) return ''\n    const d = new Date(date)\n    return d.toLocaleDateString('en-US', { \n      month: 'short', \n      day: 'numeric', \n      year: 'numeric' \n    })\n  }\n\n  if (!account) {\n    return (\n      <div className=\"pxbadges-container\">\n        <div className=\"no-achievements\">\n          <div className=\"no-achievements-icon\">🔒</div>\n          <div className=\"no-achievements-text\">Connect Your Wallet</div>\n          <div className=\"no-achievements-subtitle\">\n            Connect your wallet to view your achievements and progress\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"pxbadges-container\">\n      <div className=\"pxbadges-header\">\n        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '1rem', marginBottom: '1rem' }}>\n          <h1 className=\"pxbadges-title\">Achievements</h1>\n          <button\n            onClick={() => setShowShareModal(true)}\n            style={{\n              background: 'rgba(255, 215, 0, 0.2)',\n              border: '2px solid #ffd700',\n              borderRadius: '50%',\n              width: '48px',\n              height: '48px',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              cursor: 'pointer',\n              transition: 'all 0.3s ease',\n              color: '#ffd700'\n            }}\n            onMouseEnter={(e) => {\n              e.currentTarget.style.background = 'rgba(255, 215, 0, 0.3)'\n              e.currentTarget.style.transform = 'scale(1.1)'\n            }}\n            onMouseLeave={(e) => {\n              e.currentTarget.style.background = 'rgba(255, 215, 0, 0.2)'\n              e.currentTarget.style.transform = 'scale(1)'\n            }}\n            title=\"Share Achievements\"\n          >\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n              <path d=\"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z\"/>\n            </svg>\n          </button>\n        </div>\n        <p className=\"pxbadges-subtitle\">\n          Track your progress and unlock prestigious badges in the Pixel Journey ecosystem\n        </p>\n        \n        {badgeStats && (\n          <div className=\"achievement-stats\">\n            <div className=\"stat-card\">\n              <span className=\"stat-number\">{badgeStats.totalBadges}</span>\n              <span className=\"stat-label\">Total Earned</span>\n            </div>\n            <div className=\"stat-card\">\n              <span className=\"stat-number\">{badgeStats.badgesByRarity?.legendary || 0}</span>\n              <span className=\"stat-label\">Legendary</span>\n            </div>\n            <div className=\"stat-card\">\n              <span className=\"stat-number\">{badgeStats.badgesByRarity?.epic || 0}</span>\n              <span className=\"stat-label\">Epic</span>\n            </div>\n            <div className=\"stat-card\">\n              <span className=\"stat-number\">{badgeStats.badgesByRarity?.rare || 0}</span>\n              <span className=\"stat-label\">Rare</span>\n            </div>\n            <div className=\"stat-card\">\n              <span className=\"stat-number\">{badgeStats.progressBadges?.length || 0}</span>\n              <span className=\"stat-label\">In Progress</span>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {loading ? (\n        <div className=\"achievements-loading\">\n          <div className=\"loading-spinner\"></div>\n          Loading achievements...\n        </div>\n      ) : (\n        <div className=\"achievement-categories\">\n          {/* Achievement Series */}\n          {achievementSeries.length > 0 && (\n            <div className=\"category-section\">\n              <div className=\"category-header\">\n                <span className=\"category-icon\">🏆</span>\n                <h2 className=\"category-title\">Achievement Series</h2>\n              </div>\n              \n              {achievementSeries.map(series => (\n                <div key={series.name} className=\"achievement-card earned\">\n                  <div className=\"achievement-header\">\n                    <span className=\"achievement-icon\">🎯</span>\n                    <div className=\"achievement-info\">\n                      <h3 className=\"achievement-name\">{series.name}</h3>\n                      <p className=\"achievement-description\">\n                        Multi-tier achievement series with {series.steps.length} levels\n                      </p>\n                    </div>\n                  </div>\n                  \n                  <div className=\"achievement-series\">\n                    {series.steps.map(step => (\n                      <div \n                        key={step.tier}\n                        className={`series-step ${\n                          step.earned ? 'completed' : step.current ? 'current' : ''\n                        }`}\n                      >\n                        {step.tier}\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n          \n          {/* Regular Categories */}\n          {categories.map(category => {\n            const earnedCount = category.badges.filter(b => b.unlockedAt).length\n            const totalCount = category.badges.length\n            const isCollapsed = collapsedCategories.has(category.id)\n            \n            return (\n              <div key={category.id} className=\"category-section\">\n                <div \n                  className=\"category-header\"\n                  onClick={() => toggleCategory(category.id)}\n                >\n                  <span className=\"category-icon\">{category.icon}</span>\n                  <h2 className=\"category-title\">{category.name}</h2>\n                  <span className=\"category-progress\">\n                    {earnedCount}/{totalCount}\n                  </span>\n                  <span className={`category-toggle ${isCollapsed ? 'collapsed' : ''}`}>\n                    ▼\n                  </span>\n                </div>\n                \n                {!isCollapsed && (\n                  <div className=\"achievements-grid\">\n                    {category.badges.map(badge => {\n                      const isEarned = !!badge.unlockedAt\n                      const rarityClass = getRarityClass(badge)\n                      \n                      return (\n                        <div \n                          key={badge.id}\n                          className={`achievement-card ${\n                            isEarned ? 'earned' : ''\n                          } ${rarityClass}`}\n                        >\n                          <div className=\"achievement-header\">\n                            <span className=\"achievement-icon\">{badge.icon}</span>\n                            <div className=\"achievement-info\">\n                              <h3 className=\"achievement-name\">{badge.name}</h3>\n                              <p className=\"achievement-description\">{badge.description}</p>\n                              <p className=\"achievement-requirements\">{badge.requirements}</p>\n                            </div>\n                          </div>\n                          \n                          {badge.tier && (\n                            <div className=\"achievement-tier\">\n                              Tier {badge.tier}\n                            </div>\n                          )}\n                          \n                          {badge.progress && (\n                            <div className=\"achievement-progress\">\n                              <div className=\"progress-bar\">\n                                <div \n                                  className=\"progress-fill\"\n                                  style={{ width: `${badge.progress.percentage}%` }}\n                                ></div>\n                              </div>\n                              <div className=\"progress-text\">\n                                {badge.progress.current.toLocaleString()} / {badge.progress.required.toLocaleString()}\n                                ({badge.progress.percentage}%)\n                              </div>\n                            </div>\n                          )}\n                          \n                          {isEarned && badge.unlockedAt && (\n                            <div className=\"achievement-date\">\n                              {formatDate(badge.unlockedAt)}\n                            </div>\n                          )}\n                        </div>\n                      )\n                    })}\n                  </div>\n                )}\n              </div>\n            )\n          })}\n          \n          {categories.length === 0 && (\n            <div className=\"no-achievements\">\n              <div className=\"no-achievements-icon\">🎯</div>\n              <div className=\"no-achievements-text\">No Achievements Yet</div>\n              <div className=\"no-achievements-subtitle\">\n                Start participating in the Pixel Journey ecosystem to earn your first badges!\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n      \n      <ShareModal\n        isOpen={showShareModal}\n        onClose={() => setShowShareModal(false)}\n        title={`${account}'s Achievements`}\n        description={`Check out my achievements in the Pixel Journey ecosystem! I've earned ${badgeStats?.totalBadges || 0} badges including ${badgeStats?.badgesByRarity?.legendary || 0} legendary achievements.`}\n        shareUrl={`${window.location.origin}/pxbadges?user=${account}`}\n        defaultShareText={`Check out my achievements in the Pixel Journey ecosystem! I've earned ${badgeStats?.totalBadges || 0} badges. #PixelJourney #Achievements`}\n        type=\"achievement\"\n        badges={badges}\n        totalBadges={badgeStats?.totalBadges || 0}\n        legendaryCount={badgeStats?.badgesByRarity?.legendary || 0}\n        username={account || ''}\n      />\n    </div>\n  )\n}\n\nexport default PxBadges","import { log } from './loggingService'\n\nexport interface SwapQuote {\n  input_amount: string  // Input token amount\n  output_amount: string  // Output token amount\n  price_impact: string  // In percent (e.g., '0.1')\n  minimum_received: string  // Adjusted min output after slippage\n  route: SwapRoute[]\n  memo: string  // Pre-built memo for transaction\n  input_token: TokenInfo\n  output_token: TokenInfo\n}\n\nexport interface TokenInfo {\n  symbol: string\n  contract: string\n  precision: number\n  token_id: string\n}\n\nexport interface AlcorToken {\n  id: string\n  symbol: string\n  contract: string\n  precision: number\n  logo?: string\n  usd_price?: number\n  system_price?: number\n}\n\nexport interface SwapRoute {\n  pool_id: number\n  token_in: string\n  token_out: string\n  amount_in: string\n  amount_out: string\n}\n\nexport interface SwapResult {\n  transaction_id: string\n  success: boolean\n  error?: string\n}\n\nclass AlcorService {\n  private readonly ALCOR_API_BASE = 'https://alcor.exchange/api/v2'\n  private readonly WAX_CONTRACT = 'eosio.token'\n  private readonly WPIXAL_CONTRACT = 'pixeljourney'\n  private readonly WAX_SYMBOL = 'WAX'\n  private readonly WPIXAL_SYMBOL = 'WPIXAL'\n  private readonly WAX_TOKEN_ID = 'wax-eosio.token'\n  private readonly WPIXAL_TOKEN_ID = 'wpixal-pixeljourney'\n  \n  // Cache for tokens to avoid repeated API calls\n  private tokensCache: AlcorToken[] | null = null\n  private tokensCacheExpiry: number = 0\n  private readonly CACHE_DURATION = 5 * 60 * 1000 // 5 minutes\n\n  /**\n   * Get all available tokens from Alcor Exchange\n   */\n  async getAllTokens(): Promise<AlcorToken[]> {\n    try {\n      // Check cache first\n      if (this.tokensCache && Date.now() < this.tokensCacheExpiry) {\n        return this.tokensCache\n      }\n\n      const url = `${this.ALCOR_API_BASE}/tokens`\n      const response = await fetch(url, {\n        method: 'GET',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        mode: 'cors'\n      })\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`)\n      }\n\n      const tokens = await response.json()\n      \n      // Transform the response to our format\n      this.tokensCache = tokens.map((token: any) => ({\n        id: token.id || `${token.symbol.toLowerCase()}-${token.contract}`,\n        symbol: token.symbol,\n        contract: token.contract,\n        precision: token.precision || 8,\n        logo: token.logo,\n        usd_price: token.usd_price,\n        system_price: token.system_price\n      }))\n      \n      this.tokensCacheExpiry = Date.now() + this.CACHE_DURATION\n      return this.tokensCache || []\n    } catch (error) {\n      log.error('Error fetching all tokens:', 'AlcorService.getAllTokens', error as Error)\n      // Return fallback tokens if API fails\n      return [\n        {\n          id: this.WAX_TOKEN_ID,\n          symbol: this.WAX_SYMBOL,\n          contract: this.WAX_CONTRACT,\n          precision: 8\n        },\n        {\n          id: this.WPIXAL_TOKEN_ID,\n          symbol: this.WPIXAL_SYMBOL,\n          contract: this.WPIXAL_CONTRACT,\n          precision: 8\n        }\n      ]\n    }\n  }\n\n  /**\n   * Get swap quote for any token pair using Alcor's swapRouter API\n   */\n  async getSwapQuoteForPair(\n    inputToken: TokenInfo,\n    outputToken: TokenInfo,\n    amount: string,\n    userAccount: string,\n    tradeType: 'EXACT_INPUT' | 'EXACT_OUTPUT' = 'EXACT_INPUT',\n    slippageTolerance: number = 0.05\n  ): Promise<SwapQuote> {\n    try {\n      const url = `${this.ALCOR_API_BASE}/swapRouter/getRoute?` +\n         `trade_type=${tradeType}&` +\n         `input=${inputToken.token_id}&` +\n         `output=${outputToken.token_id}&` +\n         `amount=${parseFloat(amount).toFixed(inputToken.precision)}&` +\n         `slippage=${slippageTolerance.toFixed(2)}&` +\n         `receiver=${userAccount}&` +\n         `maxHops=3&` +\n         `v2=true`\n\n       log.info('Fetching swap route from:', url)\n       \n       const response = await fetch(url)\n       if (!response.ok) {\n         throw new Error(`HTTP ${response.status}: ${response.statusText}`)\n       }\n       \n       const data = await response.json()\n       log.info('Swap route response:', data)\n       \n       if (!data.swaps || data.swaps.length === 0) {\n         throw new Error('No swap route found for this token pair')\n       }\n       \n       const swap = data.swaps[0]\n       \n       return {\n         input_amount: data.maxSent || swap.maxSent || data.input || swap.input,\n         output_amount: data.output || swap.output || data.minReceived || swap.minReceived,\n         price_impact: data.priceImpact?.toString() || '0',\n         minimum_received: data.minReceived || swap.minReceived,\n         route: data.route?.map((poolId: number, index: number) => ({\n           pool_id: poolId,\n           token_in: index === 0 ? `${inputToken.symbol}@${inputToken.contract}` : 'intermediate',\n           token_out: index === data.route.length - 1 ? `${outputToken.symbol}@${outputToken.contract}` : 'intermediate',\n           amount_in: index === 0 ? (data.input || swap.input) : '0',\n           amount_out: index === data.route.length - 1 ? (data.output || swap.output) : '0'\n         })) || [],\n         memo: data.memo || swap.memo,\n         input_token: inputToken,\n         output_token: outputToken\n       }\n    } catch (error) {\n      log.error('Error getting swap quote for pair:', 'AlcorService.getSwapQuoteForPair', error as Error)\n      throw new Error(`Failed to get swap quote for ${inputToken.symbol}/${outputToken.symbol}: ${error instanceof Error ? error.message : 'Unknown error'}`)\n    }\n  }\n\n  /**\n   * Get a quote for buying exact WPIXAL amount using Alcor's swapRouter API (legacy method)\n   */\n  async getExactOutputQuote(wpixalAmount: string, userAccount: string, slippageTolerance: number = 0.05): Promise<SwapQuote> {\n    try {\n      const url = `${this.ALCOR_API_BASE}/swapRouter/getRoute?` +\n         `trade_type=EXACT_OUTPUT&` +\n         `input=${this.WAX_TOKEN_ID}&` +\n         `output=${this.WPIXAL_TOKEN_ID}&` +\n         `amount=${parseFloat(wpixalAmount).toFixed(8)}&` +\n         `slippage=${slippageTolerance.toFixed(2)}&` +\n         `receiver=${userAccount}&` +\n         `maxHops=3&` +\n         `v2=true`\n\n       log.error('Fetching swap route from:', url)\n       \n       const response = await fetch(url)\n       if (!response.ok) {\n         throw new Error(`HTTP ${response.status}: ${response.statusText}`)\n       }\n       \n       const data = await response.json()\n       log.error('Swap route response:', data)\n       \n       if (!data.swaps || data.swaps.length === 0) {\n         throw new Error('No swap route found')\n       }\n       \n       const swap = data.swaps[0]\n       \n       return {\n         input_amount: data.maxSent || swap.maxSent,\n         output_amount: data.output || swap.output,\n         price_impact: data.priceImpact?.toString() || '0',\n         minimum_received: data.minReceived || swap.minReceived,\n         route: data.route?.map((poolId: number, index: number) => ({\n           pool_id: poolId,\n           token_in: index === 0 ? `${this.WAX_SYMBOL}@${this.WAX_CONTRACT}` : 'intermediate',\n           token_out: index === data.route.length - 1 ? `${this.WPIXAL_SYMBOL}@${this.WPIXAL_CONTRACT}` : 'intermediate',\n           amount_in: index === 0 ? (data.input || swap.input) : '0',\n           amount_out: index === data.route.length - 1 ? (data.output || swap.output) : '0'\n         })) || [],\n         memo: data.memo || swap.memo,\n         input_token: {\n           symbol: this.WAX_SYMBOL,\n           contract: this.WAX_CONTRACT,\n           precision: 8,\n           token_id: this.WAX_TOKEN_ID\n         },\n         output_token: {\n           symbol: this.WPIXAL_SYMBOL,\n           contract: this.WPIXAL_CONTRACT,\n           precision: 8,\n           token_id: this.WPIXAL_TOKEN_ID\n         }\n       }\n    } catch (error) {\n      log.error('Error getting exact output quote:', 'alcorService.getExactOutputQuote', error as Error)\n      throw new Error(`Failed to get swap quote: ${error instanceof Error ? error.message : 'Unknown error'}`)\n    }\n  }\n\n  /**\n   * Get a quote for swapping WAX to WPIXAL (legacy method for compatibility)\n   */\n  async getSwapQuote(waxAmount: string): Promise<SwapQuote> {\n    // Convert WAX input to approximate WPIXAL output for the exact output quote\n    const rate = await this.getExchangeRate()\n    const approximateWpixal = (parseFloat(waxAmount) / rate).toFixed(8)\n    return this.getExactOutputQuote(approximateWpixal, 'dummy.account', 0.5)\n  }\n\n\n\n  /**\n   * Execute WAX to WPIXAL swap for exact WPIXAL output (legacy method)\n   */\n  async executeSwap(wpixalAmount: string, userAccount: string, slippageTolerance: number = 0.5): Promise<unknown> {\n    try {\n      // Get the current quote\n      const quote = await this.getExactOutputQuote(wpixalAmount, userAccount, slippageTolerance)\n      \n      // Prepare the swap transaction\n      const transaction = {\n        expiration: new Date(Date.now() + 30 * 60 * 1000).toISOString(),  // 30 min expiration; adjust as needed\n        ref_block_num: 0,  // Filled by Wharfkit/node\n        ref_block_prefix: 0,  // Filled by Wharfkit/node\n        max_net_usage_words: 0,\n        max_cpu_usage_ms: 0,\n        delay_sec: 0,\n        context_free_actions: [],\n        actions: [\n          {\n            account: this.WAX_CONTRACT,\n            name: 'transfer',\n            authorization: [{\n              actor: userAccount,\n              permission: 'active'\n            }],\n            data: {\n              from: userAccount,\n              to: 'swap.alcor', // Alcor's swap contract\n              quantity: `${parseFloat(quote.input_amount).toFixed(8)} ${this.WAX_SYMBOL}`,\n              memo: quote.memo\n            }\n          }\n        ],\n        transaction_extensions: []\n      }\n\n      log.info('Swap transaction prepared', 'AlcorService.executeSwap', { \n        wpixalAmount, \n        maxWaxInput: quote.input_amount,\n        memo: quote.memo,\n        route: quote.route \n      })\n      \n      return transaction\n    } catch (error) {\n      log.error('Error executing swap:', 'AlcorService.executeSwap', error instanceof Error ? error : new Error(String(error)))\n      throw error\n    }\n  }\n\n  /**\n   * Execute swap for any token pair\n   */\n  async executeSwapForPair(\n    inputToken: TokenInfo,\n    outputToken: TokenInfo,\n    amount: string,\n    userAccount: string,\n    tradeType: 'EXACT_INPUT' | 'EXACT_OUTPUT' = 'EXACT_INPUT',\n    slippageTolerance: number = 0.05\n  ): Promise<unknown> {\n    try {\n      // Get the current quote\n      const quote = await this.getSwapQuoteForPair(\n        inputToken,\n        outputToken,\n        amount,\n        userAccount,\n        tradeType,\n        slippageTolerance\n      )\n      \n      // Prepare the swap transaction\n      const transaction = {\n        expiration: new Date(Date.now() + 30 * 60 * 1000).toISOString(),  // 30 min expiration\n        ref_block_num: 0,  // Filled by Wharfkit/node\n        ref_block_prefix: 0,  // Filled by Wharfkit/node\n        max_net_usage_words: 0,\n        max_cpu_usage_ms: 0,\n        delay_sec: 0,\n        context_free_actions: [],\n        actions: [\n          {\n            account: inputToken.contract,\n            name: 'transfer',\n            authorization: [{\n              actor: userAccount,\n              permission: 'active'\n            }],\n            data: {\n              from: userAccount,\n              to: 'swap.alcor', // Alcor's swap contract\n              quantity: `${parseFloat(quote.input_amount).toFixed(inputToken.precision)} ${inputToken.symbol}`,\n              memo: quote.memo\n            }\n          }\n        ],\n        transaction_extensions: []\n      }\n\n      log.info('Generic swap transaction prepared', 'AlcorService.executeSwapForPair', { \n        inputToken: inputToken.symbol,\n        outputToken: outputToken.symbol,\n        amount,\n        tradeType,\n        inputAmount: quote.input_amount,\n        outputAmount: quote.output_amount,\n        memo: quote.memo,\n        route: quote.route \n      })\n      \n      return transaction\n    } catch (error) {\n      log.error('Error executing swap for pair:', 'AlcorService.executeSwapForPair', error instanceof Error ? error : new Error(String(error)))\n      throw error\n    }\n  }\n\n  /**\n   * Get current WAX/WPIXAL exchange rate (WAX needed for 1 WPIXAL)\n   */\n  async getExchangeRate(): Promise<number> {\n    try {\n      const quote = await this.getExactOutputQuote('1.00000000', 'dummy.account', 0)\n      return parseFloat(quote.input_amount)\n    } catch (error) {\n      log.error('Error getting exchange rate:', 'AlcorService.getExchangeRate', error instanceof Error ? error : new Error(String(error)))\n      // Return a fallback rate (approximate; update based on market)\n      return 0.000292  // ~1 WPIXAL ≈ 0.000292 WAX (inverse of your example)\n    }\n  }\n\n  /**\n   * Check if there's sufficient liquidity for the swap\n   */\n  async checkLiquidity(wpixalAmount: string): Promise<boolean> {\n    try {\n      const quote = await this.getExactOutputQuote(wpixalAmount, 'dummy.account', 0.5)\n      const priceImpact = parseFloat(quote.price_impact)\n      \n      // Consider liquidity insufficient if price impact is too high (>5%)\n      return priceImpact < 5.0\n    } catch (error) {\n      log.error('Error checking liquidity:', 'AlcorService.checkLiquidity', error instanceof Error ? error : new Error(String(error)))\n      return false\n    }\n  }\n\n\n\n  /**\n   * Estimate WAX needed for a specific WPIXAL amount\n   */\n  async estimateWaxNeeded(wpixalAmount: string): Promise<string> {\n    try {\n      const quote = await this.getExactOutputQuote(wpixalAmount, 'dummy.account', 0)\n      return quote.input_amount\n    } catch (error) {\n      log.error('Error estimating WAX needed:', 'AlcorService.estimateWaxNeeded', error instanceof Error ? error : new Error(String(error)))\n      throw error\n    }\n  }\n}\n\nexport const alcorService = new AlcorService()\n\n /* EXAMPLE SUGGESTION FROM GROK:\n import { log } from './loggingService'\n\nexport interface SwapQuote {\n  input_amount: string  // Max WAX input for exact output\n  output_amount: string  // Requested WPIXAL output\n  price_impact: string  // In percent (e.g., '0.1')\n  minimum_received: string  // Adjusted min WPIXAL after slippage\n  route: SwapRoute[]\n  memo: string  // Pre-built memo for transaction\n}\n\nexport interface SwapRoute {\n  pool_id: number\n  token_in: string\n  token_out: string\n  amount_in: string\n  amount_out: string\n}\n\nexport interface SwapResult {\n  transaction_id: string\n  success: boolean\n  error?: string\n}\n\nclass AlcorService {\n  private readonly ALCOR_API_BASE = 'https://wax.alcor.exchange/api/v2'\n  private readonly WAX_CONTRACT = 'eosio.token'\n  private readonly WPIXAL_CONTRACT = 'pixeljourney'\n  private readonly WAX_SYMBOL = 'WAX'\n  private readonly WPIXAL_SYMBOL = 'WPIXAL'\n  private readonly WAX_TOKEN_ID = 'wax-eosio.token'\n  private readonly WPIXAL_TOKEN_ID = 'wpixal-pixeljourney'\n\n//   /*\n//    * Get a quote for buying exact WPIXAL amount (EXACT_OUTPUT mode)\n   \n//   async getExactOutputQuote(wpixalAmount: string, userAccount: string, slippageTolerance: number = 0.5): Promise<SwapQuote> {\n//     try {\n//       const slippage = slippageTolerance / 100\n//       const url = `${this.ALCOR_API_BASE}/swapRouter/getRoute?` +\n//         `trade_type=EXACT_OUTPUT&` +\n//         `input=${this.WAX_TOKEN_ID}&` +\n//         `output=${this.WPIXAL_TOKEN_ID}&` +\n//         `amount=${wpixalAmount}&` +\n//         `slippage=${slippage}&` +\n//         `receiver=${userAccount}&` +\n//         `maxHops=3`\n\n//       const response = await fetch(url, {\n//         method: 'GET',\n//         headers: {\n//           'Accept': 'application/json',\n//           'Content-Type': 'application/json'\n//         },\n//         mode: 'cors'\n//       })\n\n//       if (!response.ok) {\n//         throw new Error(`HTTP error! status: ${response.status}`)\n//       }\n\n//       const data = await response.json()\n//       if (!data || !data.maxSent || !data.memo) {\n//         throw new Error('Invalid quote response from Alcor router')\n//       }\n\n//       const maxWaxInput = data.maxSent\n//       const priceImpactPercent = (parseFloat(data.priceImpact || '0') * 100).toFixed(1)\n//       const routePools = data.route || []\n\n//       // Build route array (simplified for multi-hop; adjust tokens per hop if needed)\n//       const route: SwapRoute[] = routePools.map((poolId: string | number, index: number) => ({\n//         pool_id: typeof poolId === 'string' ? parseInt(poolId) : poolId,\n//         token_in: index === 0 ? `${this.WAX_SYMBOL}@${this.WAX_CONTRACT}` : 'intermediate',\n//         token_out: index === routePools.length - 1 ? `${this.WPIXAL_SYMBOL}@${this.WPIXAL_CONTRACT}` : 'intermediate',\n//         amount_in: index === 0 ? maxWaxInput : '0',\n//         amount_out: index === routePools.length - 1 ? wpixalAmount : '0'\n//       }))\n\n//       return {\n//         input_amount: maxWaxInput,\n//         output_amount: wpixalAmount,\n//         price_impact: priceImpactPercent,\n//         minimum_received: data.minReceived || wpixalAmount,  // API provides slippage-adjusted min\n//         route,\n//         memo: data.memo\n//       }\n//     } catch (error) {\n//       log.error('Error getting exact output quote:', 'AlcorService.getExactOutputQuote', error instanceof Error ? error : new Error(String(error)))\n//       throw error\n//     }\n//   }\n\n//   /**\n//    * Get available trading pairs to find the correct market\n//    */\n//   private async getTradingPairs(): Promise<any[]> {\n//     try {\n//       const url = `${this.ALCOR_API_BASE}/pairs`\n//       const response = await fetch(url, {\n//         method: 'GET',\n//         headers: {\n//           'Accept': 'application/json',\n//           'Content-Type': 'application/json'\n//         },\n//         mode: 'cors'\n//       })\n\n//       if (!response.ok) {\n//         throw new Error(`HTTP error! status: ${response.status}`)\n//       }\n\n//       return await response.json()\n//     } catch (error) {\n//       log.error('Error fetching trading pairs:', 'AlcorService.getTradingPairs', error instanceof Error ? error : new Error(String(error)))\n//       return []\n//     }\n//   }\n\n//   /**\n//    * Execute WAX to WPIXAL swap for exact WPIXAL output\n//    */\n//   async executeSwap(wpixalAmount: string, userAccount: string, slippageTolerance: number = 0.5): Promise<unknown> {\n//     try {\n//       // Get the current quote\n//       const quote = await this.getExactOutputQuote(wpixalAmount, userAccount, slippageTolerance)\n      \n//       // Prepare the swap transaction\n//       const transaction = {\n//         expiration: new Date(Date.now() + 30 * 60 * 1000).toISOString(),  // 30 min expiration; adjust as needed\n//         ref_block_num: 0,  // Filled by Wharfkit/node\n//         ref_block_prefix: 0,  // Filled by Wharfkit/node\n//         max_net_usage_words: 0,\n//         max_cpu_usage_ms: 0,\n//         delay_sec: 0,\n//         context_free_actions: [],\n//         actions: [\n//           {\n//             account: this.WAX_CONTRACT,\n//             name: 'transfer',\n//             authorization: [{\n//               actor: userAccount,\n//               permission: 'active'\n//             }],\n//             data: {\n//               from: userAccount,\n//               to: 'swap.alcor', // Alcor's swap contract\n//               quantity: `${parseFloat(quote.input_amount).toFixed(8)} ${this.WAX_SYMBOL}`,\n//               memo: quote.memo\n//             }\n//           }\n//         ],\n//         transaction_extensions: []\n//       }\n\n//       log.info('Swap transaction prepared', 'AlcorService.executeSwap', { \n//         wpixalAmount, \n//         maxWaxInput: quote.input_amount,\n//         memo: quote.memo,\n//         route: quote.route \n//       })\n      \n//       return transaction\n//     } catch (error) {\n//       log.error('Error executing swap:', 'AlcorService.executeSwap', error instanceof Error ? error : new Error(String(error)))\n//       throw error\n//     }\n//   }\n\n//   /**\n//    * Get current WAX/WPIXAL exchange rate (WAX needed for 1 WPIXAL)\n//    */\n//   async getExchangeRate(): Promise<number> {\n//     try {\n//       const quote = await this.getExactOutputQuote('1.00000000', 'dummy.account', 0)\n//       return parseFloat(quote.input_amount)\n//     } catch (error) {\n//       log.error('Error getting exchange rate:', 'AlcorService.getExchangeRate', error instanceof Error ? error : new Error(String(error)))\n//       // Return a fallback rate (approximate; update based on market)\n//       return 0.000292  // ~1 WPIXAL ≈ 0.000292 WAX (inverse of your example)\n//     }\n//   }\n\n//   /**\n//    * Check if there's sufficient liquidity for the swap\n//    */\n//   async checkLiquidity(wpixalAmount: string): Promise<boolean> {\n//     try {\n//       const quote = await this.getExactOutputQuote(wpixalAmount, 'dummy.account', 0.5)\n//       const priceImpact = parseFloat(quote.price_impact)\n      \n//       // Consider liquidity insufficient if price impact is too high (>5%)\n//       return priceImpact < 5.0\n//     } catch (error) {\n//       log.error('Error checking liquidity:', 'AlcorService.checkLiquidity', error instanceof Error ? error : new Error(String(error)))\n//       return false\n//     }\n//   }\n\n//   /**\n//    * Estimate WAX needed for a specific WPIXAL amount\n//    */\n//   async estimateWaxNeeded(wpixalAmount: string): Promise<string> {\n//     try {\n//       const quote = await this.getExactOutputQuote(wpixalAmount, 'dummy.account', 0)\n//       return quote.input_amount\n//     } catch (error) {\n//       log.error('Error estimating WAX needed:', 'AlcorService.estimateWaxNeeded', error instanceof Error ? error : new Error(String(error)))\n//       throw error\n//     }\n//   }\n// }\n\n// export const alcorService = new AlcorService() */}","import React, { useState, useEffect, useRef } from 'react'\nimport { useWallet } from '../contexts/WalletContext'\nimport { apiService } from '../services/api'\nimport { alcorService } from '../services/alcorService'\nimport { log } from '../services/loggingService'\nimport '../css/token-dropdown.css'\n\nexport interface TokenOption {\n  symbol: string\n  contract: string\n  amount: string\n  decimals: number\n  icon?: string\n  logo?: string\n  priority?: number\n}\n\ninterface TokenDropdownProps {\n  selectedToken: string\n  onTokenSelect: (token: string) => void\n  availableTokens?: string[]\n  className?: string\n  filterByAvailable?: boolean // If true, only show tokens from availableTokens\n}\n\nconst TokenDropdown: React.FC<TokenDropdownProps> = ({\n  selectedToken,\n  onTokenSelect,\n  availableTokens = ['WAX', 'WPIXAL'],\n  className = '',\n  filterByAvailable = false\n}) => {\n  const { account } = useWallet()\n  const [isOpen, setIsOpen] = useState(false)\n  const [tokens, setTokens] = useState<TokenOption[]>([])\n  const [alcorTokens, setAlcorTokens] = useState<any[]>([])\n  const [loading, setLoading] = useState(false)\n  const dropdownRef = useRef<HTMLDivElement>(null)\n\n  // Load available tokens from Alcor\n  const loadAlcorTokens = async () => {\n    try {\n      const tokens = await alcorService.getAllTokens()\n      setAlcorTokens(tokens)\n      return tokens\n    } catch (error) {\n      log.error('Failed to load Alcor tokens', 'TokenDropdown.loadAlcorTokens', error as Error)\n      // Fallback to common token configurations\n      const fallbackTokens = [\n        { symbol: 'WAX', contract: 'eosio.token', precision: 8, logo: null },\n        { symbol: 'WPIXAL', contract: 'pixeljourney', precision: 8, logo: null },\n        { symbol: 'PIXAL', contract: 'pixeljourney', precision: 8, logo: null },\n        { symbol: 'LSWAX', contract: 'token.defi', precision: 8, logo: null },\n        { symbol: 'BRWL', contract: 'brawlertoken', precision: 4, logo: null },\n        { symbol: 'TLM', contract: 'alien.worlds', precision: 4, logo: null },\n        { symbol: 'WOMBAT', contract: 'wombattoken', precision: 4, logo: null }\n      ]\n      setAlcorTokens(fallbackTokens)\n      return fallbackTokens\n    }\n  }\n\n  // Favored tokens that should appear first and have priority\n  const favoredTokenConfigs: Record<string, { contract: string; decimals: number; icon: string; priority: number }> = {\n    'PXJ': { contract: 'pixeljourney', decimals: 8, icon: '🎯', priority: 1 },\n    'WPIXAL': { contract: 'pixeljourney', decimals: 8, icon: '🎮', priority: 2 },\n    'WAX': { contract: 'eosio.token', decimals: 8, icon: '🪙', priority: 3 },\n    'KING': { contract: 'alpha.waxfun', decimals: 8, icon: '👑', priority: 4 },\n    'WAXUSDC': { contract: 'eth.token', decimals: 8, icon: '💵', priority: 5 },\n    'WAXWBTC': { contract: 'eth.token', decimals: 8, icon: '₿', priority: 6 },\n    'WUF': { contract: 'wuffi', decimals: 4, icon: '🐕', priority: 7 },\n    'LSWAX': { contract: 'token.defi', decimals: 8, icon: '💎', priority: 8 },\n    'BRWL': { contract: 'brawlertoken', decimals: 4, icon: '⚔️', priority: 9 },\n    'TLM': { contract: 'alien.worlds', decimals: 4, icon: '👽', priority: 10 },\n    'WOMBAT': { contract: 'wombattoken', decimals: 4, icon: '🐨', priority: 11 }\n  }\n\n  // Get token config from favored tokens first, then Alcor tokens\n  const getTokenConfig = (symbol: string) => {\n    // Check favored tokens first\n    const favoredToken = favoredTokenConfigs[symbol]\n    if (favoredToken) {\n      return {\n        contract: favoredToken.contract,\n        decimals: favoredToken.decimals,\n        icon: favoredToken.icon,\n        logo: null,\n        priority: favoredToken.priority\n      }\n    }\n    \n    // Then check Alcor tokens\n    const alcorToken = alcorTokens.find(t => t.symbol === symbol)\n    if (alcorToken) {\n      return {\n        contract: alcorToken.contract,\n        decimals: alcorToken.precision,\n        icon: getTokenIcon(symbol),\n        logo: alcorToken.logo,\n        priority: 999 // Lower priority for non-favored tokens\n      }\n    }\n    \n    // Final fallback\n    return { contract: 'eosio.token', decimals: 8, icon: '🪙', logo: null, priority: 1000 }\n  }\n\n  // Get token icon (emoji fallback)\n  const getTokenIcon = (symbol: string): string => {\n    const iconMap: Record<string, string> = {\n      'WAX': '🪙',\n      'WPIXAL': '🎮',\n      'PIXAL': '🎯',\n      'LSWAX': '💎',\n      'BRWL': '⚔️',\n      'TLM': '👽',\n      'WOMBAT': '🐨'\n    }\n    return iconMap[symbol] || '🪙'\n  }\n\n  // Load token balances from Light API\n  const loadTokenBalances = async () => {\n    // Ensure Alcor tokens are loaded first\n    if (alcorTokens.length === 0) {\n      await loadAlcorTokens()\n    }\n\n    if (!account) {\n      // Set default tokens with 0 balance when not connected\n      const tokensToShow = filterByAvailable ? availableTokens : alcorTokens.map(t => t.symbol)\n      const defaultTokens = tokensToShow.map(symbol => {\n        const config = getTokenConfig(symbol)\n        return {\n          symbol,\n          contract: config.contract,\n          amount: '0.0000',\n          decimals: config.decimals,\n          icon: config.icon,\n          logo: config.logo\n        }\n      })\n      setTokens(defaultTokens)\n      return\n    }\n\n    setLoading(true)\n    try {\n      const lightApiResponse = await apiService.getLightApiBalances(account)\n      \n      if (lightApiResponse && lightApiResponse.balances) {\n        const tokenOptions: TokenOption[] = []\n        \n        // Determine which tokens to process\n        const tokensToProcess = filterByAvailable ? availableTokens : alcorTokens.map(t => t.symbol)\n        \n        // Process tokens and match with Light API data\n        for (const symbol of tokensToProcess) {\n          const config = getTokenConfig(symbol)\n          if (!config) continue\n          \n          const balance = lightApiResponse.balances.find(\n            b => b.currency === symbol && b.contract === config.contract\n          )\n          \n          tokenOptions.push({\n            symbol,\n            contract: config.contract,\n            amount: balance ? balance.amount : '0.0000',\n            decimals: balance ? parseInt(balance.decimals) : config.decimals,\n            icon: config.icon,\n            logo: config.logo,\n            priority: config.priority || 999\n          })\n        }\n        \n        // Sort tokens by priority (lower numbers first)\n        tokenOptions.sort((a, b) => (a.priority || 999) - (b.priority || 999))\n        \n        // If not filtering by available tokens, add any additional tokens from Light API\n         if (!filterByAvailable) {\n           for (const balance of lightApiResponse.balances) {\n             if (!tokensToProcess.includes(balance.currency)) {\n               const config = getTokenConfig(balance.currency)\n               if (config) {\n                 tokenOptions.push({\n                   symbol: balance.currency,\n                   contract: balance.contract,\n                   amount: balance.amount,\n                   decimals: parseInt(balance.decimals),\n                   icon: config.icon,\n                   logo: config.logo,\n                   priority: config.priority || 999\n                 })\n               }\n             }\n           }\n           // Sort again after adding additional tokens\n           tokenOptions.sort((a, b) => (a.priority || 999) - (b.priority || 999))\n         }\n         \n         setTokens(tokenOptions)\n      } else {\n        // Fallback to default tokens with 0 balance\n        const tokensToShow = filterByAvailable ? availableTokens : alcorTokens.map(t => t.symbol)\n        const defaultTokens = tokensToShow.map(symbol => {\n          const config = getTokenConfig(symbol)\n          return {\n            symbol,\n            contract: config.contract,\n            amount: '0.0000',\n            decimals: config.decimals,\n            icon: config.icon,\n            logo: config.logo,\n            priority: config.priority || 999\n          }\n        })\n        \n        // Sort fallback tokens by priority\n        defaultTokens.sort((a, b) => (a.priority || 999) - (b.priority || 999))\n        \n        setTokens(defaultTokens)\n      }\n    } catch (error) {\n      log.error('Failed to load token balances', 'TokenDropdown.loadTokenBalances', error as Error)\n      \n      // Fallback to default tokens with 0 balance\n      const tokensToShow = filterByAvailable ? availableTokens : alcorTokens.map(t => t.symbol)\n      const defaultTokens = tokensToShow.map(symbol => {\n        const config = getTokenConfig(symbol)\n        return {\n          symbol,\n          contract: config.contract,\n          amount: '0.0000',\n          decimals: config.decimals,\n          icon: config.icon,\n          logo: config.logo,\n          priority: config.priority || 999\n        }\n      })\n      \n      // Sort fallback tokens by priority\n      defaultTokens.sort((a, b) => (a.priority || 999) - (b.priority || 999))\n      \n      setTokens(defaultTokens)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  // Load Alcor tokens on component mount\n  useEffect(() => {\n    loadAlcorTokens()\n  }, [])\n\n  useEffect(() => {\n    loadTokenBalances()\n  }, [account, availableTokens, alcorTokens, filterByAvailable])\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setIsOpen(false)\n      }\n    }\n\n    document.addEventListener('mousedown', handleClickOutside)\n    return () => document.removeEventListener('mousedown', handleClickOutside)\n  }, [])\n\n  const handleTokenSelect = (token: TokenOption) => {\n    onTokenSelect(token.symbol)\n    setIsOpen(false)\n  }\n\n  const selectedTokenData = tokens.find(t => t.symbol === selectedToken)\n  const selectedTokenConfig = getTokenConfig(selectedToken)\n\n  return (\n    <div className={`token-dropdown ${className}`} ref={dropdownRef}>\n      <button \n        className=\"token-button\"\n        onClick={() => setIsOpen(!isOpen)}\n        type=\"button\"\n      >\n        <span className=\"token-icon\">\n          {selectedTokenData?.logo ? (\n            <img src={selectedTokenData.logo} alt={selectedToken} className=\"token-logo\" />\n          ) : (\n            selectedTokenData?.icon || selectedTokenConfig?.icon || '🪙'\n          )}\n        </span>\n        <span className=\"token-symbol\">{selectedToken}</span>\n        <span className={`dropdown-arrow ${isOpen ? 'open' : ''}`}>▼</span>\n      </button>\n      \n      {isOpen && (\n        <div className=\"token-dropdown-menu\">\n          {loading ? (\n            <div className=\"token-dropdown-loading\">\n              <span>Loading tokens...</span>\n            </div>\n          ) : (\n            <>\n              {tokens.map((token) => (\n                <button\n                  key={`${token.contract}-${token.symbol}`}\n                  className={`token-option ${token.symbol === selectedToken ? 'selected' : ''}`}\n                  onClick={() => handleTokenSelect(token)}\n                  type=\"button\"\n                >\n                  <div className=\"token-option-left\">\n                    <span className=\"token-option-icon\">\n                      {token.logo ? (\n                        <img src={token.logo} alt={token.symbol} className=\"token-logo\" />\n                      ) : (\n                        token.icon\n                      )}\n                    </span>\n                    <div className=\"token-option-info\">\n                      <span className=\"token-option-symbol\">{token.symbol}</span>\n                      <span className=\"token-option-contract\">{token.contract}</span>\n                    </div>\n                  </div>\n                  <div className=\"token-option-balance\">\n                    {parseFloat(token.amount).toFixed(4)}\n                  </div>\n                </button>\n              ))}\n              {tokens.length === 0 && (\n                <div className=\"token-dropdown-empty\">\n                  <span>No tokens available</span>\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default TokenDropdown","import React, { useState, useEffect, useCallback } from 'react'\nimport { useWallet } from '../contexts/WalletContext'\nimport { useNotifications } from '../hooks/useNotifications'\nimport { alcorService } from '../services/alcorService'\n\nimport { apiService } from '../services/api'\nimport { log } from '../services/loggingService'\nimport TokenDropdown from './TokenDropdown'\nimport '../css/swap-interface.css'\n\ninterface SwapInterfaceProps {\n  isModal?: boolean\n  onClose?: () => void\n  initialSellAmount?: number\n  initialBuyAmount?: number\n}\n\nconst SwapInterface: React.FC<SwapInterfaceProps> = ({ \n  isModal = false, \n  onClose, \n  initialSellAmount = 0,\n  initialBuyAmount = 1\n}) => {\n  const { showSuccess, showError } = useNotifications()\n  const { account, session } = useWallet()\n  const [sellAmount, setSellAmount] = useState<string>(initialSellAmount.toString())\n  const [buyAmount, setBuyAmount] = useState<string>(initialBuyAmount.toString())\n  const [sellToken, setSellToken] = useState<string>('WAX')\n  const [buyToken, setBuyToken] = useState<string>('WPIXAL')\n  const [loading, setLoading] = useState(false)\n  const [quoteData, setQuoteData] = useState<any>(null)\n  const [slippage, setSlippage] = useState<number>(0.5)\n  const [showSlippageSettings, setShowSlippageSettings] = useState(false)\n  const [balances, setBalances] = useState<Record<string, string>>({})\n  const [isLoadingBalances, setIsLoadingBalances] = useState(false)\n  const [alcorTokens, setAlcorTokens] = useState<any[]>([])\n\n  // Load Alcor tokens\n  const loadAlcorTokens = useCallback(async () => {\n    try {\n      const tokens = await alcorService.getAllTokens()\n      setAlcorTokens(tokens)\n      return tokens\n    } catch (error) {\n      log.error('Failed to load Alcor tokens', 'SwapInterface.loadAlcorTokens', error as Error)\n      return []\n    }\n  }, [])\n\n  // Favored tokens that should appear first and have priority\n   const favoredTokenConfigs: Record<string, { contract: string; precision: number; priority: number }> = {\n     'PXJ': { contract: 'pixeljourney', precision: 8, priority: 1 },\n     'WPIXAL': { contract: 'pixeljourney', precision: 8, priority: 2 },\n     'WAX': { contract: 'eosio.token', precision: 8, priority: 3 },\n     'KING': { contract: 'alpha.waxfun', precision: 8, priority: 4 },\n     'WAXUSDC': { contract: 'eth.token', precision: 8, priority: 5 },\n     'WAXWBTC': { contract: 'eth.token', precision: 8, priority: 6 },\n     'WUF': { contract: 'wuffi', precision: 4, priority: 7 },\n     'LSWAX': { contract: 'token.defi', precision: 8, priority: 8 },\n     'BRWL': { contract: 'brawlertoken', precision: 4, priority: 9 },\n     'TLM': { contract: 'alien.worlds', precision: 4, priority: 10 },\n     'WOMBAT': { contract: 'wombattoken', precision: 4, priority: 11 },\n     'TACO': { contract: 't.taco', precision: 8, priority: 12 },\n     'SHING': { contract: 't.taco', precision: 8, priority: 13 },\n     'YEET': { contract: 'token.yeet', precision: 4, priority: 14 },\n     'DMT': { contract: 'defiminingtk', precision: 4, priority: 15 },\n     'FGL': { contract: 'fgltokenmgmt', precision: 4, priority: 16 },\n     'SOREN': { contract: 'farfromhomes', precision: 4, priority: 17 }\n   }\n\n   // Get token info from favored tokens first, then Alcor tokens\n   const getTokenInfo = useCallback((symbol: string) => {\n     // Check favored tokens first\n     const favoredToken = favoredTokenConfigs[symbol]\n     if (favoredToken) {\n       return {\n         symbol,\n         contract: favoredToken.contract,\n         precision: favoredToken.precision,\n         token_id: `${favoredToken.contract}-${symbol}`,\n         priority: favoredToken.priority\n       }\n     }\n     \n     // Then check Alcor tokens\n     const token = alcorTokens.find(t => t.symbol === symbol)\n     if (token) {\n       return {\n         symbol: token.symbol,\n         contract: token.contract,\n         precision: token.precision,\n         token_id: token.id,\n         priority: 999 // Lower priority for non-favored tokens\n       }\n     }\n     \n     return null\n   }, [alcorTokens])\n\n  // Load user balances with live updates\n  const loadBalances = useCallback(async () => {\n    if (!account) {\n      setBalances({})\n      return\n    }\n    \n    setIsLoadingBalances(true)\n    try {\n      // Ensure Alcor tokens are loaded\n      if (alcorTokens.length === 0) {\n        await loadAlcorTokens()\n      }\n      \n      const lightApiResponse = await apiService.getLightApiBalances(account)\n      const newBalances: Record<string, string> = {}\n      \n      if (lightApiResponse && lightApiResponse.balances) {\n        // Process balances from Light API\n        for (const balance of lightApiResponse.balances) {\n          const tokenInfo = getTokenInfo(balance.currency)\n          if (tokenInfo && tokenInfo.contract === balance.contract) {\n            newBalances[balance.currency] = `${balance.amount} ${balance.currency}`\n          }\n        }\n        \n        // Ensure favored tokens are included even with 0 balance\n        Object.keys(favoredTokenConfigs).forEach(symbol => {\n          if (!newBalances[symbol]) {\n            newBalances[symbol] = `0.0000 ${symbol}`\n          }\n        })\n      } else {\n        // Fallback to favored tokens with 0 balance\n        Object.keys(favoredTokenConfigs).forEach(symbol => {\n          newBalances[symbol] = `0.0000 ${symbol}`\n        })\n      }\n      \n      setBalances(newBalances)\n    } catch (error) {\n      log.error('Error loading balances', 'SwapInterface.loadBalances', error as Error)\n      showError('Failed to load token balances')\n      \n      // Fallback to favored tokens with 0 balance on error\n      const defaultBalances: Record<string, string> = {}\n      Object.keys(favoredTokenConfigs).forEach(symbol => {\n        defaultBalances[symbol] = `0.0000 ${symbol}`\n      })\n      setBalances(defaultBalances)\n    } finally {\n      setIsLoadingBalances(false)\n    }\n  }, [account, showError, alcorTokens, loadAlcorTokens])\n\n  useEffect(() => {\n    loadAlcorTokens()\n  }, [])\n\n  useEffect(() => {\n    loadBalances()\n    \n    // Set up interval for live balance updates every 30 seconds\n    const balanceInterval = setInterval(loadBalances, 30000)\n    \n    return () => clearInterval(balanceInterval)\n  }, [loadBalances])\n\n  // Manual quote refresh function\n  const getQuote = useCallback(async () => {\n    if (!sellAmount || parseFloat(sellAmount) <= 0) {\n      setQuoteData(null)\n      setBuyAmount('0')\n      return\n    }\n\n    try {\n      setLoading(true)\n      \n      // Get token info for both sell and buy tokens\n      const sellTokenInfo = getTokenInfo(sellToken)\n      const buyTokenInfo = getTokenInfo(buyToken)\n      \n      if (!sellTokenInfo || !buyTokenInfo) {\n        throw new Error(`Token configuration not found for ${!sellTokenInfo ? sellToken : buyToken}`)\n      }\n      \n      // Use generic Alcor swap quote for any token pair\n      const quote = await alcorService.getSwapQuoteForPair(\n        sellTokenInfo,\n        buyTokenInfo,\n        sellAmount,\n        (slippage / 100).toString()\n      )\n      \n      if (quote && quote.output_amount) {\n        setQuoteData(quote)\n        setBuyAmount(parseFloat(quote.output_amount).toFixed(sellTokenInfo.precision || 4))\n      } else {\n        throw new Error('No valid quote received')\n      }\n    } catch (error) {\n      log.error('Error getting swap quote', 'SwapInterface.getQuote', error as Error)\n      setQuoteData(null)\n      setBuyAmount('0')\n    } finally {\n      setLoading(false)\n    }\n  }, [sellAmount, sellToken, buyToken, account, slippage, getTokenInfo])\n\n  // Auto-refresh quote when tokens change (but not on amount changes)\n  useEffect(() => {\n    if (sellToken && buyToken && sellToken !== buyToken) {\n      getQuote()\n    }\n  }, [sellToken, buyToken, getQuote])\n\n  const handleSwapTokens = () => {\n    const tempToken = sellToken\n    const tempAmount = sellAmount\n    \n    setSellToken(buyToken)\n    setBuyToken(tempToken)\n    setSellAmount(buyAmount)\n    setBuyAmount(tempAmount)\n  }\n\n  const handleMaxClick = () => {\n    const maxBalance = balances[sellToken] || `0.0000 ${sellToken}`\n    const amount = maxBalance.split(' ')[0]\n    setSellAmount(amount)\n  }\n\n  const handlePercentageClick = (percentage: number) => {\n    const balanceStr = balances[sellToken] || `0.0000 ${sellToken}`\n    const maxBalance = parseFloat(balanceStr.split(' ')[0])\n    const amount = (maxBalance * percentage / 100).toFixed(4)\n    setSellAmount(amount)\n  }\n\n  const executeSwap = async () => {\n    if (!account || !session) {\n      showError('Please connect your wallet first')\n      return\n    }\n\n    if (!quoteData) {\n      showError('No quote available')\n      return\n    }\n\n    try {\n      setLoading(true)\n      \n      // Get token info for both sell and buy tokens\n      const sellTokenInfo = getTokenInfo(sellToken)\n      const buyTokenInfo = getTokenInfo(buyToken)\n      \n      if (!sellTokenInfo || !buyTokenInfo) {\n        throw new Error(`Token configuration not found for ${!sellTokenInfo ? sellToken : buyToken}`)\n      }\n      \n      // Use generic Alcor swap execution for any token pair\n      const swapTransaction: any = await alcorService.executeSwapForPair(\n        sellTokenInfo,\n        buyTokenInfo,\n        sellAmount,\n        account,\n        'EXACT_INPUT',\n        slippage / 100\n      )\n      \n      const result: any = await session.transact({ actions: swapTransaction.actions })\n      \n      showSuccess(`Successfully swapped ${sellAmount} ${sellToken} for ${buyAmount} ${buyToken}`)\n      log.info('Swap transaction completed', 'SwapInterface.executeSwap', {\n        sellAmount,\n        sellToken,\n        buyAmount,\n        buyToken,\n        transactionId: result?.transaction?.id || result?.transactionId || result?.id || 'unknown'\n      })\n      \n      // Refresh balances after successful swap\n      await loadBalances()\n      \n      // Reset form\n      setSellAmount('0')\n      setBuyAmount('0')\n      setQuoteData(null)\n      \n      if (isModal && onClose) {\n        onClose()\n      }\n    } catch (error) {\n      log.error('Error executing swap', 'SwapInterface.executeSwap', error as Error)\n      showError('Failed to execute swap transaction')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const content = (\n    <div className={`swap-interface ${isModal ? 'modal-content' : ''}`}>\n      {isModal && (\n        <div className=\"swap-header\">\n          <h2>Swap Tokens</h2>\n          <button className=\"close-button\" onClick={onClose}>×</button>\n        </div>\n      )}\n      \n      <div className=\"swap-container\">\n        {/* Sell Section */}\n        <div className=\"swap-section sell-section\">\n          <div className=\"swap-section-header\">\n            <span className=\"section-label\">Sell</span>\n            <span className=\"balance\">\n              Balance: {isLoadingBalances ? 'Loading...' : (balances[sellToken] || `0.0000 ${sellToken}`)}\n            </span>\n          </div>\n          \n          <div className=\"input-container\">\n            <input\n              type=\"number\"\n              value={sellAmount}\n              onChange={(e) => setSellAmount(e.target.value)}\n              placeholder=\"0\"\n              className=\"amount-input\"\n            />\n            \n            <div className=\"token-selector\">\n              <TokenDropdown\n                selectedToken={sellToken}\n                onTokenSelect={setSellToken}\n                filterByAvailable={false}\n                className=\"sell-token-dropdown\"\n              />\n            </div>\n          </div>\n          \n          <div className=\"percentage-buttons\">\n            <button onClick={() => handlePercentageClick(15)}>15%</button>\n            <button onClick={() => handlePercentageClick(25)}>25%</button>\n            <button onClick={() => handlePercentageClick(50)}>50%</button>\n            <button onClick={() => handlePercentageClick(75)}>75%</button>\n            <button onClick={handleMaxClick} className=\"max-button\">MAX</button>\n          </div>\n        </div>\n\n        {/* Swap Arrow */}\n        <div className=\"swap-arrow-container\">\n          <button className=\"swap-arrow\" onClick={handleSwapTokens}>\n            ↓\n          </button>\n          <button \n            className=\"refresh-quote-button\" \n            onClick={getQuote}\n            disabled={loading || !sellAmount || parseFloat(sellAmount) <= 0}\n            title=\"Refresh price quote\"\n          >\n            {loading ? '⟳' : '🔄'}\n          </button>\n        </div>\n\n        {/* Buy Section */}\n        <div className=\"swap-section buy-section\">\n          <div className=\"swap-section-header\">\n            <span className=\"section-label\">Buy</span>\n            <span className=\"balance\">\n              Balance: {isLoadingBalances ? 'Loading...' : (balances[buyToken] || `0.0000 ${buyToken}`)}\n            </span>\n          </div>\n          \n          <div className=\"input-container\">\n            <input\n              type=\"number\"\n              value={buyAmount}\n              readOnly\n              placeholder=\"0\"\n              className=\"amount-input\"\n              title=\"Output amount is calculated automatically\"\n            />\n            \n            <div className=\"token-selector\">\n              <TokenDropdown\n                selectedToken={buyToken}\n                onTokenSelect={setBuyToken}\n                filterByAvailable={false}\n                className=\"buy-token-dropdown\"\n              />\n            </div>\n          </div>\n          \n          <div className=\"percentage-buttons\">\n            <button onClick={() => handlePercentageClick(15)}>15%</button>\n            <button onClick={() => handlePercentageClick(25)}>25%</button>\n            <button onClick={() => handlePercentageClick(50)}>50%</button>\n            <button onClick={() => handlePercentageClick(75)}>75%</button>\n          </div>\n        </div>\n\n        {/* Quote Information */}\n        {quoteData && (\n          <div className=\"quote-info\">\n            <div className=\"quote-row\">\n              <span className=\"quote-label\">Rate</span>\n              <span className=\"quote-value\">\n                {quoteData.rate || '0.00340412'} WPIXAL per WAX (0.02%)\n              </span>\n            </div>\n            <div className=\"quote-row\">\n              <span className=\"quote-label\">Expected Output</span>\n              <span className=\"quote-value\">{quoteData.expectedOutput || buyAmount}</span>\n            </div>\n            <div className=\"quote-row\">\n              <span className=\"quote-label\">Price Impact</span>\n              <span className=\"quote-value\">{quoteData.priceImpact || '< 0.01%'}</span>\n            </div>\n            <div className=\"quote-row\">\n              <span className=\"quote-label\">Maximum Send after slippage</span>\n              <span className=\"quote-value\">\n                {quoteData.maxSent || '309.45013892'} WAX (0.50%)\n              </span>\n            </div>\n          </div>\n        )}\n\n        {/* Slippage Settings */}\n        <div className=\"slippage-container\">\n          <button \n            className=\"slippage-toggle\"\n            onClick={() => setShowSlippageSettings(!showSlippageSettings)}\n          >\n            ⚙️ Multiroute\n          </button>\n          \n          {showSlippageSettings && (\n            <div className=\"slippage-settings\">\n              <label>Slippage Tolerance</label>\n              <div className=\"slippage-options\">\n                <button \n                  className={slippage === 0.1 ? 'active' : ''}\n                  onClick={() => setSlippage(0.1)}\n                >\n                  0.1%\n                </button>\n                <button \n                  className={slippage === 0.5 ? 'active' : ''}\n                  onClick={() => setSlippage(0.5)}\n                >\n                  0.5%\n                </button>\n                <button \n                  className={slippage === 1.0 ? 'active' : ''}\n                  onClick={() => setSlippage(1.0)}\n                >\n                  1.0%\n                </button>\n                <input\n                  type=\"number\"\n                  value={slippage}\n                  onChange={(e) => setSlippage(parseFloat(e.target.value) || 0.5)}\n                  step=\"0.1\"\n                  min=\"0.1\"\n                  max=\"50\"\n                  className=\"custom-slippage\"\n                />\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Swap Button */}\n        <button \n          className=\"swap-button\"\n          onClick={executeSwap}\n          disabled={loading || !account || !quoteData || parseFloat(sellAmount) <= 0}\n        >\n          {loading ? 'Processing ...' : `Swap ${sellToken} To ${buyToken}`}\n        </button>\n      </div>\n\n\n    </div>\n  )\n\n  if (isModal) {\n    return (\n      <div className=\"swap-modal-overlay\" onClick={onClose}>\n        <div onClick={(e) => e.stopPropagation()}>\n          {content}\n        </div>\n      </div>\n    )\n  }\n\n  return content\n}\n\nexport default SwapInterface","import React, { useState, useEffect, useCallback, useMemo } from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport { useWallet } from '../hooks/useWallet'\nimport { apiService } from '../services/api'\nimport { balanceService } from '../services/balanceService'\nimport { priceService } from '../services/priceService'\nimport type { WaxAccountInfo, WaxCurrencyBalance } from '../services/api'\nimport { useNotifications } from '../hooks/useNotifications'\nimport StakingModal from './StakingModal'\nimport RAMModal from './RAMModal'\nimport TokenTransferModal from './TokenTransferModal'\nimport PortfolioAnalytics from './PortfolioAnalytics'\nimport { useGetAccountResources } from './CustomHooks/useGetAccountResources'\nimport { useGetPowerupState } from './CustomHooks/useGetPowerupState'\nimport { useGetChainInfo } from './CustomHooks/useGetChainInfo'\nimport { estimateCpuWithElasticLimit, netCalc, predictResourceAmounts, submitPowerupTx, waxToCpuFrac, waxToNetFrac } from '../powerup_functions.js'\nimport { formatWAXPrice, formatNumber } from '../utils/formatUtils'\nimport { log } from '../services/loggingService' \nimport { badgeService } from '../services/badgeService'\nimport type { UserBadge } from '../services/badgeService'\nimport PxBadges from './PxBadges'\nimport '../css/user-profile.css'\nimport SwapInterface from './SwapInterface'\n\ninterface Transaction {\n  transaction_id: string\n  block_time: string\n  action_name: string\n  asset_id?: string\n  asset_name?: string\n  collection_name?: string\n  price?: string\n  from?: string\n  to?: string\n  type: 'purchase' | 'sale' | 'transfer' | 'mint' | 'token_send' | 'token_receive'\n  status: 'completed' | 'pending' | 'failed'\n  memo?: string\n}\n\ninterface UserStats {\n  totalPurchases: number\n  totalSales: number\n  totalSpent: string\n  totalEarned: string\n  favoriteCollections: string[]\n  joinDate: string\n  nftsOwned: number\n  nftsListed: number\n  reputation?: string\n  totalTransactions?: number\n  tierStatus?: string\n}\n\ninterface TokenInfo {\n  symbol: string\n  contract: string\n}\n\nconst UserProfile: React.FC = () => {\n  const { account, isConnected, session, login } = useWallet()\n  const { showError, showSuccess } = useNotifications()\n  const navigate = useNavigate()\n  const [activeTab, setActiveTab] = useState<'overview' | 'transactions' | 'portfolio' | 'pxbadges' | 'network-resources' | 'powerup' | 'token-balances' | 'swap'>('overview')\n  const [transactions, setTransactions] = useState<Transaction[]>([])\n  const [collectionAvatars, setCollectionAvatars] = useState<Record<string, string>>({})\n  const [userStats, setUserStats] = useState<UserStats | null>(null)\n  const [accountData, setAccountData] = useState<WaxAccountInfo | null>(null)\n  const [resourceData, setResourceData] = useState<{\n    cpu: { used: number; available: number; max: number }\n    net: { used: number; available: number; max: number }\n    ram: { used: number; available: number; max: number }\n  } | null>(null)\n  const [tokenBalances, setTokenBalances] = useState<(WaxCurrencyBalance & { value: string })[]>([])\n  const [waxBalance, setWaxBalance] = useState<string>('0.0000 WAX')\n  const [selectedTokens, setSelectedTokens] = useState<Set<string>>(new Set())\n  const [bulkSellLoading, setBulkSellLoading] = useState(false)\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [userBadges, setUserBadges] = useState<UserBadge[]>([])  \n  const [lastTransactionDate, setLastTransactionDate] = useState<string | null>(null)\n  const [transactionFilter, setTransactionFilter] = useState<'all' | 'purchase' | 'sale' | 'transfer' | 'tokens'>('all')\n  const [dateRange, setDateRange] = useState<'7d' | '30d' | '90d' | 'all' | 'custom'>('all')\n  const [customDateRange, setCustomDateRange] = useState({ start: '', end: '' })\n  const [searchQuery, setSearchQuery] = useState('')\n  const [currentPage, setCurrentPage] = useState(1)\n  const [transactionsPerPage] = useState(10)\n  const [sortBy, setSortBy] = useState<'date' | 'amount' | 'type'>('date')\n  const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('desc')\n  const [isExporting, setIsExporting] = useState(false)\n  const [isLoadingTransactions, setIsLoadingTransactions] = useState(false)\n  const [transactionError, setTransactionError] = useState<string | null>(null)\n  const [exportError, setExportError] = useState<string | null>(null)\n  \n  // Modal states\n  const [stakingModal, setStakingModal] = useState<{\n    isOpen: boolean\n    resourceType: 'cpu' | 'net'\n    action: 'stake' | 'unstake'\n  }>({ isOpen: false, resourceType: 'cpu', action: 'stake' })\n  const [ramModal, setRAMModal] = useState<{\n    isOpen: boolean\n    action: 'buy' | 'sell'\n  }>({ isOpen: false, action: 'buy' })\n  const [tokenTransferModal, setTokenTransferModal] = useState<{\n    isOpen: boolean\n    token: (WaxCurrencyBalance & { value: string }) | null\n  }>({ isOpen: false, token: null })\n\n  // Powerup state variables\n  const [accountToBoost, setAccountToBoost] = useState(account || '')\n  const [cpuAllocation, setCpuAllocation] = useState(100)\n  const [powerupAmount, setPowerupAmount] = useState(0)\n\n  const [txIsLoading, setTxIsLoading] = useState(false)\n\n  // Custom hooks for powerup functionality\n  const [, getResources] = useGetAccountResources()\n  const [powerupState, getPowerupState] = useGetPowerupState()\n  const [chainInfo, getChainInfo] = useGetChainInfo()\n\n  const loadTransactions = useCallback(async () => {\n    log.debug('loadTransactions called with account', 'UserProfile', { account })\n    setIsLoadingTransactions(true)\n    setTransactionError(null)\n    \n    if (!account) {\n      log.debug('No account connected, using test account', 'UserProfile')\n      // Use a test account with known transactions for demonstration\n      const testAccount = 'pixeljourney'\n      \n      try {\n        log.debug('Fetching transactions for test account', 'UserProfile', { testAccount })\n        const realTransactions = await apiService.getUserTransactions(testAccount, 20)\n        log.debug('Test transactions fetched', 'UserProfile', { count: realTransactions?.length || 0, sample: realTransactions?.slice(0, 2) })\n        \n        if (!realTransactions || realTransactions.length === 0) {\n          log.warn('No test transactions returned', 'UserProfile')\n          setTransactions([])\n        } else {\n          // Test transactions loaded successfully\n          const typedTransactions = realTransactions.map(tx => ({\n            ...tx,\n            type: tx.type as 'purchase' | 'sale' | 'transfer' | 'mint' | 'token_send' | 'token_receive',\n            status: (tx.status || 'completed') as 'completed' | 'pending' | 'failed'\n          }))\n          setTransactions(typedTransactions)\n        }\n      } catch (err) {\n        log.error('Error loading test transactions', 'UserProfile', err as Error, {\n          name: err instanceof Error ? err.name : 'Unknown',\n          message: err instanceof Error ? err.message : String(err),\n          stack: err instanceof Error ? err.stack : undefined\n        })\n        const errorMessage = err instanceof Error ? err.message : 'Unable to load transaction history. Please try again later.'\n        setTransactionError(errorMessage)\n        showError('Transaction Error', errorMessage)\n      } finally {\n        setIsLoadingTransactions(false)\n      }\n      return\n    }\n    \n    try {\n      log.debug('Loading transactions for connected account', 'UserProfile', { account, apiServiceAvailable: !!apiService, getUserTransactionsType: typeof apiService.getUserTransactions })\n      \n      // Fetch real transaction data from API\n      const realTransactions = await apiService.getUserTransactions(account, 20)\n      log.debug('Fetched transactions', 'UserProfile', { count: realTransactions?.length || 0, sample: realTransactions?.slice(0, 2) })\n      \n      if (!realTransactions || realTransactions.length === 0) {\n        log.warn('No transactions returned from API', 'UserProfile')\n        setTransactions([])\n      } else {\n        const typedTransactions = realTransactions.map(tx => ({\n          ...tx,\n          type: tx.type as 'purchase' | 'sale' | 'transfer' | 'mint' | 'token_send' | 'token_receive',\n          status: (tx.status || 'completed') as 'completed' | 'pending' | 'failed'\n        }))\n        setTransactions(typedTransactions)\n      }\n    } catch (err) {\n      log.error('Error loading transactions', 'UserProfile', err as Error, {\n        name: err instanceof Error ? err.name : 'Unknown',\n        message: err instanceof Error ? err.message : String(err),\n        stack: err instanceof Error ? err.stack : undefined\n      })\n      const errorMessage = err instanceof Error ? err.message : 'Unable to load transaction history. Please try again later.'\n      setTransactionError(errorMessage)\n      showError('Transaction Error', errorMessage)\n    } finally {\n      setIsLoadingTransactions(false)\n    }\n  }, [account, showError])\n\n  const loadUserStats = useCallback(async () => {\n    if (!account) return\n    \n    try {\n      // Fetch real user stats from API\n      const realStats = await apiService.getUserStats(account)\n      setUserStats(realStats)\n      \n      // Fetch collection avatars\n      if (realStats.favoriteCollections.length > 0) {\n        fetchCollectionAvatars(realStats.favoriteCollections)\n      }\n    } catch (err) {\n      log.error('Error loading user stats', 'UserProfile', err as Error)\n      throw err\n    }\n  }, [account])\n\n\n\n  // Fetch account data from WAX blockchain\n  const fetchAccountData = useCallback(async () => {\n    if (!account) return\n    \n    try {\n      const data = await apiService.getWaxAccountInfo(account)\n      if (data) {\n        setAccountData(data)\n        \n        // Extract resource data\n        if (data.cpu_limit && data.net_limit && data.ram_quota) {\n          setResourceData({\n            cpu: {\n              used: data.cpu_limit.used,\n              available: data.cpu_limit.available,\n              max: data.cpu_limit.max\n            },\n            net: {\n              used: data.net_limit.used,\n              available: data.net_limit.available,\n              max: data.net_limit.max\n            },\n            ram: {\n              used: data.ram_usage,\n              available: data.ram_quota - data.ram_usage,\n              max: data.ram_quota\n            }\n          })\n        }\n      }\n    } catch (error) {\n      log.error('Failed to fetch account data', 'UserProfile', error as Error)\n      showError('Account Data Error', 'Unable to fetch account information. Some features may not work properly.')\n    }\n  }, [account, showError])\n\n  // Fetch latest transaction date for \"Last Active\" field\n  const fetchLastTransactionDate = useCallback(async () => {\n    if (!account) return\n    \n    try {\n      const transactions = await apiService.getUserTransactions(account, 1)\n      if (transactions && transactions.length > 0) {\n        setLastTransactionDate(transactions[0].block_time)\n      }\n    } catch (error) {\n      log.error('Failed to fetch last transaction date', 'UserProfile', error as Error)\n      // Fallback to account creation date or last_code_update if transaction fetch fails\n      setLastTransactionDate(null)\n    }\n  }, [account])\n\n  // Define contracts to exclude from token balance fetching\n  const EXCLUDED_CONTRACTS = useMemo(() => [\n    'swap.taco',\n    'alpha.waxfun',\n    'beta.waxfun'\n  ], [])\n\n  // Define top tokens to prioritize for price fetching\n  const TOP_TOKENS = useMemo(() => [\n    { symbol: 'WAX', contract: 'eosio.token' },\n    { symbol: 'PXJ', contract: 'pixeljourney' },\n    { symbol: 'WPIXAL', contract: 'pixeljourney' },\n    { symbol: 'WUF', contract: 'wuffi' },\n    { symbol: 'TLM', contract: 'alien.worlds' }\n  ], [])\n\n  // Fallback method using individual token calls\n  const fetchTokenBalancesFallback = useCallback(async () => {\n    if (!account) return\n    \n    try {\n      const balances: (WaxCurrencyBalance & { value: string })[] = []\n      \n      // Filter TOP_TOKENS to exclude problematic contracts\n      const validTopTokens = TOP_TOKENS.filter((token: TokenInfo) => \n        !EXCLUDED_CONTRACTS.includes(token.contract)\n      )\n      \n      for (let i = 0; i < validTopTokens.length; i++) {\n        const token = validTopTokens[i]\n        try {\n          // Add delay between requests to avoid rate limiting (500ms)\n          if (i > 0) {\n            await delay(500)\n          }\n          \n          const tokenBalances = await apiService.getWaxCurrencyBalance(account, token.contract, token.symbol)\n          if (tokenBalances && tokenBalances.length > 0) {\n            let usdValue = 'N/A'\n            \n            // Fetch USD price for supported tokens using PriceService\n            const balanceAmount = parseFloat(tokenBalances[0].balance.split(' ')[0])\n            \n            try {\n              if (token.symbol === 'WAX' && token.contract === 'eosio.token') {\n                const waxPriceUSD = await priceService.getWaxPriceUSD()\n                usdValue = formatNumber(balanceAmount * waxPriceUSD, 2)\n              } else if (token.symbol === 'WPIXAL' && token.contract === 'pixeljourney') {\n                const wpixalPriceUSD = await priceService.getWpixalPriceUSD()\n                usdValue = formatNumber(balanceAmount * wpixalPriceUSD, 4)\n              } else if (token.symbol === 'PXJ' && token.contract === 'pixeljourney') {\n                const pxjPriceUSD = await priceService.getPxjPriceUSD()\n                usdValue = formatNumber(balanceAmount * pxjPriceUSD, 6)\n              } else if (token.symbol === 'WUF' && token.contract === 'wuffi') {\n                // WUF price not implemented yet\n                usdValue = '0.00'\n              } else {\n                usdValue = 'N/A'\n              }\n            } catch (error) {\n              log.warn(`Failed to fetch price for ${token.symbol} in fallback`, 'UserProfile', { error })\n              usdValue = '0.00'\n            }\n            \n            const balanceWithValue = {\n              ...tokenBalances[0],\n              value: usdValue\n            }\n            \n            // Set WAX balance state if this is WAX token - use shared balance service\n            if (token.symbol === 'WAX' && token.contract === 'eosio.token') {\n              try {\n                const waxBalance = await balanceService.getWaxBalance(account)\n                setWaxBalance(waxBalance)\n              } catch (error) {\n                log.warn('Failed to get WAX balance from balance service, using fallback', 'UserProfile', { error })\n                setWaxBalance(balanceWithValue.balance)\n              }\n            }\n            \n            balances.push(balanceWithValue as WaxCurrencyBalance & { value: string })\n          }\n        } catch (error) {\n          log.error(`Failed to fetch ${token.symbol} balance`, 'UserProfile', error as Error)\n        }\n      }\n      setTokenBalances(balances)\n    } catch (error) {\n      log.error('Failed to fetch token balances with fallback', 'UserProfile', error as Error)\n    }\n  }, [account, TOP_TOKENS, EXCLUDED_CONTRACTS])\n\n  const fetchUserBadges = useCallback(async () => {\n    if (!account) return\n    \n    try {\n      const badges = await badgeService.checkUserBadges(account)\n      setUserBadges(badges.badges)\n    } catch (error) {\n      log.error('Failed to fetch user badges', 'UserProfile.fetchUserBadges', error as Error, { account })\n    }\n  }, [account])\n\n  // Fetch token balances using WAX Light API\n  const fetchTokenBalances = useCallback(async () => {\n    if (!account) return\n    \n    try {\n      // Use WAX Light API to get all token balances at once\n      const lightApiBalances = await apiService.getLightApiBalances(account)\n      \n      if (lightApiBalances && lightApiBalances.balances) {\n        const balancesWithValues: (WaxCurrencyBalance & { value: string })[] = []\n        \n        // Sort balances by amount (descending) and prioritize top tokens\n        const sortedBalances = lightApiBalances.balances\n          .filter(balance => parseFloat(balance.amount) > 0.0001) // Filter out dust amounts to reduce processing\n          .sort((a, b) => parseFloat(b.amount) - parseFloat(a.amount))\n          .sort((a, b) => {\n            const aIsTop = TOP_TOKENS.some((token: TokenInfo) => token.symbol === a.currency && token.contract === a.contract)\n            const bIsTop = TOP_TOKENS.some((token: TokenInfo) => token.symbol === b.currency && token.contract === b.contract)\n            if (aIsTop && !bIsTop) return -1\n            if (!aIsTop && bIsTop) return 1\n            return 0\n          })\n        \n        // Filter out excluded contracts but allow all other tokens (we'll only fetch prices for specific ones)\n        const validBalances = sortedBalances.filter(balance => \n          !EXCLUDED_CONTRACTS.includes(balance.contract)\n        )\n        \n        // Show all valid tokens (no limit)\n        for (let i = 0; i < validBalances.length; i++) {\n          const balance = validBalances[i]\n          try {\n            // Add delay between requests to avoid rate limiting (300ms for better UX)\n            if (i > 0) {\n              await delay(300)\n            }\n            \n            // Get USD price for supported tokens using the updated PriceService\n            let usdValue = '0.00'\n            const balanceAmount = parseFloat(balance.amount)\n            \n            try {\n              if (balance.currency === 'WAX' && balance.contract === 'eosio.token') {\n                const waxPriceUSD = await priceService.getWaxPriceUSD()\n                usdValue = formatNumber(balanceAmount * waxPriceUSD, 2)\n              } else if (balance.currency === 'WPIXAL' && balance.contract === 'pixeljourney') {\n                const wpixalPriceUSD = await priceService.getWpixalPriceUSD()\n                usdValue = formatNumber(balanceAmount * wpixalPriceUSD, 4)\n              } else if (balance.currency === 'PXJ' && balance.contract === 'pixeljourney') {\n                const pxjPriceUSD = await priceService.getPxjPriceUSD()\n                usdValue = formatNumber(balanceAmount * pxjPriceUSD, 6)\n              } else if (balance.currency === 'WUF' && balance.contract === 'wuffi') {\n                // WUF price not implemented yet, set to 0.00\n                usdValue = '0.00'\n              } else {\n                usdValue = 'N/A' // No price data available for other tokens\n              }\n            } catch (error) {\n              log.warn(`Failed to fetch price for ${balance.currency}`, 'UserProfile', { error })\n              usdValue = '0.00'\n            }\n            \n            // Convert to WaxCurrencyBalance format\n            const formattedBalance = {\n              balance: `${balance.amount} ${balance.currency}`,\n              symbol: balance.currency,\n              contract: balance.contract,\n              value: usdValue\n            }\n            \n            // Set WAX balance state if this is WAX token - use shared balance service\n            if (balance.currency === 'WAX' && balance.contract === 'eosio.token') {\n              try {\n                const waxBalance = await balanceService.getWaxBalance(account)\n                setWaxBalance(waxBalance)\n              } catch (error) {\n                log.warn('Failed to get WAX balance from balance service, using fallback', 'UserProfile', { error })\n                setWaxBalance(formattedBalance.balance)\n              }\n            }\n            \n            balancesWithValues.push(formattedBalance as WaxCurrencyBalance & { value: string })\n          } catch (error) {\n            log.error(`Failed to get price for ${balance.currency}`, 'UserProfile', error as Error)\n            // Fallback with zero value if price fetch fails\n            const formattedBalance = {\n              balance: `${balance.amount} ${balance.currency}`,\n              symbol: balance.currency,\n              contract: balance.contract,\n              value: '0.00'\n            }\n            balancesWithValues.push(formattedBalance as WaxCurrencyBalance & { value: string })\n          }\n        }\n        \n        setTokenBalances(balancesWithValues)\n      }\n    } catch (error) {\n      log.error('Failed to fetch token balances', 'UserProfile', error as Error)\n      // Fallback to old method if Light API fails\n      await fetchTokenBalancesFallback()\n    }\n  }, [account, EXCLUDED_CONTRACTS, TOP_TOKENS, fetchTokenBalancesFallback])\n   \n  const loadUserData = useCallback(async () => {\n    if (!account) return\n    \n    setLoading(true)\n    setError(null)\n    \n    try {\n      // Load user transactions\n      await loadTransactions()\n      \n      // Load user statistics\n      await loadUserStats()\n      \n      // Fetch token balances (includes WAX balance)\n      await fetchTokenBalances()\n      \n      // Fetch user badges\n      await fetchUserBadges()\n      \n      // User settings functionality removed\n    } catch (err) {\n      log.error('Error loading user data', 'UserProfile', err as Error)\n      setError('Failed to load user data')\n      showError('User Data Error', 'Unable to load user profile data. Please try refreshing the page.')\n    } finally {\n      setLoading(false)\n    }\n  }, [account, showError, fetchTokenBalances, loadTransactions, loadUserStats, fetchUserBadges])\n\n  // Fetch token balances using WAX Light API\n\n  useEffect(() => {\n    if (isConnected && account) {\n      const initializeData = async () => {\n        try {\n          // Load user data (includes token balances which includes WAX)\n          await loadUserData()\n          await fetchAccountData()\n          await fetchLastTransactionDate()\n          // Initialize powerup data\n          await getPowerupState()\n          await getChainInfo()\n          getResources()\n        } catch (error) {\n          log.error('Error initializing user data', 'UserProfile', error as Error)\n          showError('Failed to Load User Data', 'Unable to initialize user profile. Please try refreshing the page.')\n          setError('Failed to load user data')\n        }\n      }\n      initializeData()\n    }\n  }, [isConnected, account]) // Removed function dependencies to prevent unnecessary re-renders\n\n  // Update account to boost when account changes\n  useEffect(() => {\n    if (account) {\n      setAccountToBoost(account)\n    }\n  }, [account])\n\n  // Helper functions for powerup\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value\n    if (value === '' || /^\\d*\\.?\\d*$/.test(value)) {\n      if (value === '' || !isNaN(Number(value))) {\n        if (value !== '') {\n          const maxWax = parseFloat(waxBalance.split(' ')[0])\n          if (Number(value) > maxWax) {\n            return\n          }\n        }\n        setPowerupAmount(Number(value))\n      }\n    }\n  }\n\n  const handleSliderChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const percentage = Number(e.target.value)\n    const maxWax = parseFloat(waxBalance.split(' ')[0])\n    const newAmount = Number((maxWax * percentage) / 100).toFixed(8)\n    setPowerupAmount(Number(newAmount))\n  }\n\n  const handleCpuSliderChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const percent = Number(e.target.value)\n    setCpuAllocation(percent)\n  }\n\n  const calculateResourceUsage = (currentUsed: number, max: number) => {\n    if (max === 0) return 0\n    return (currentUsed / max) * 100\n  }\n\n\n  \n\n  \n  // Helper function to add delay between API calls\n  const delay = (ms: number) => new Promise(resolve => setTimeout(resolve, ms))\n\n  // Define contracts to exclude from token balance fetching\n  // Define top tokens to prioritize for price fetching\n\n\n\n  \n\n  \n\n\n\n\n  // Modal handlers\n  const openStakingModal = (resourceType: 'cpu' | 'net', action: 'stake' | 'unstake') => {\n    setStakingModal({ isOpen: true, resourceType, action })\n  }\n\n  const closeStakingModal = () => {\n    setStakingModal({ isOpen: false, resourceType: 'cpu', action: 'stake' })\n  }\n\n  const openRAMModal = (action: 'buy' | 'sell') => {\n    setRAMModal({ isOpen: true, action })\n  }\n\n  const closeRAMModal = () => {\n    setRAMModal({ isOpen: false, action: 'buy' })\n  }\n\n  const openTokenTransferModal = (token: WaxCurrencyBalance & { value: string }) => {\n    setTokenTransferModal({ isOpen: true, token })\n  }\n\n  const closeTokenTransferModal = () => {\n    setTokenTransferModal({ isOpen: false, token: null })\n  }\n\n  const handleTokenTransferSuccess = () => {\n    // Refresh account data after successful transfer\n    fetchAccountData()\n    closeTokenTransferModal()\n  }\n\n  const handleResourceSuccess = () => {\n    // Refresh account data after successful transaction\n    fetchAccountData()\n  }\n\n\n\n  const handleSelectAll = () => {\n    if (selectedTokens.size === tokenBalances.length) {\n      setSelectedTokens(new Set())\n    } else {\n      const allTokenKeys = tokenBalances.map((_, index) => index.toString())\n      setSelectedTokens(new Set(allTokenKeys))\n    }\n  }\n\n  const handleBulkSell = async () => {\n     if (selectedTokens.size === 0 || !account) return\n     \n     setBulkSellLoading(true)\n     try {\n       const selectedTokenData = Array.from(selectedTokens).map(index => \n         tokenBalances[parseInt(index)]\n       ).filter(token => token.symbol !== 'PXJ') // Don't sell PXJ for PXJ\n       \n       if (selectedTokenData.length === 0) {\n         showError('Invalid Selection', 'No valid tokens selected for swap (PXJ cannot be swapped for itself)')\n         return\n       }\n       \n       let totalPxjReceived = 0\n       const swapResults = []\n       \n       for (const token of selectedTokenData) {\n         try {\n           // Get swap quote from Alcor\n           const amount = parseFloat(token.balance.split(' ')[0])\n           const swapQuote = await apiService.getAlcorSwapQuote({\n             from_token: token.symbol,\n             from_contract: token.contract,\n             to_token: 'PXJ',\n             to_contract: 'pixeljourney',\n             amount: amount.toString(),\n             slippage: 0.5\n           })\n           \n           if (swapQuote && parseFloat(swapQuote.output.amount) > 0) {\n             // In a real implementation, you would execute the swap here\n             // This would require wallet integration and transaction signing\n             swapResults.push({\n               token: token.symbol,\n               amount: amount,\n               pxjReceived: parseFloat(swapQuote.output.amount),\n               success: true\n             })\n             totalPxjReceived += parseFloat(swapQuote.output.amount)\n           } else {\n             swapResults.push({\n               token: token.symbol,\n               amount: amount,\n               pxjReceived: 0,\n               success: false,\n               error: 'No liquidity available'\n             })\n           }\n         } catch (error) {\n           log.error(`Failed to get swap quote for ${token.symbol}`, 'UserProfile', error as Error)\n           swapResults.push({\n             token: token.symbol,\n             amount: parseFloat(token.balance.split(' ')[0]),\n             pxjReceived: 0,\n             success: false,\n             error: 'Swap quote failed'\n           })\n         }\n       }\n       \n       // Show results summary\n       const successfulSwaps = swapResults.filter(r => r.success)\n       const failedSwaps = swapResults.filter(r => !r.success)\n       \n       let message = `Bulk Sell Summary:\\n\\n`\n       if (successfulSwaps.length > 0) {\n         message += `Successful swaps (${successfulSwaps.length}):\\n`\n         successfulSwaps.forEach(swap => {\n           message += `• ${swap.amount} ${swap.token} → ${swap.pxjReceived.toFixed(8)} PXJ\\n`\n         })\n         message += `\\nTotal PXJ received: ${totalPxjReceived.toFixed(8)} PXJ\\n`\n       }\n       \n       if (failedSwaps.length > 0) {\n         message += `\\nFailed swaps (${failedSwaps.length}):\\n`\n         failedSwaps.forEach(swap => {\n           message += `• ${swap.amount} ${swap.token} - ${swap.error}\\n`\n         })\n       }\n       \n       message += `\\nNote: This is a preview. Actual swaps would require wallet confirmation.`\n       \n       showSuccess('Bulk Sell Summary', message)\n       setSelectedTokens(new Set())\n       \n       // Refresh balances after successful swaps\n       if (successfulSwaps.length > 0) {\n         await fetchTokenBalances()\n       }\n       \n     } catch (error) {\n       log.error('Bulk sell failed', 'UserProfile', error as Error)\n       showError('Bulk Sell Failed', 'Bulk sell failed. Please try again.')\n     } finally {\n       setBulkSellLoading(false)\n     }\n   }\n\n\n\n  // Handle powerup operations\n\n\n\n\n  const fetchCollectionAvatars = async (collections: string[]) => {\n    const avatars: Record<string, string> = {}\n    \n    for (const collection of collections) {\n      try {\n        const response = await fetch(`https://aa.dapplica.io/atomicassets/v1/collections/${collection}`)\n        const data = await response.json()\n        \n        if (data.success && data.data?.img) {\n          const img = data.data.img\n          avatars[collection] = img.startsWith('http') ? img : `https://ipfs.io/ipfs/${img}`\n        }\n      } catch (error) {\n        log.error(`Error fetching avatar for collection ${collection}`, 'UserProfile', error as Error)\n      }\n    }\n    \n    setCollectionAvatars(avatars)\n  }\n\n\n\n\n\n  const filteredTransactions = transactions.filter(tx => {\n    // Filter by type\n    if (transactionFilter !== 'all') {\n      if (transactionFilter === 'tokens') {\n        // Show both token_send and token_receive for 'tokens' filter\n        if (tx.type !== 'token_send' && tx.type !== 'token_receive') return false\n      } else if (tx.type !== transactionFilter) {\n        return false\n      }\n    }\n    \n    // Filter by search query\n    if (searchQuery) {\n      const query = searchQuery.toLowerCase()\n      const matchesAssetName = tx.asset_name?.toLowerCase().includes(query)\n      const matchesCollection = tx.collection_name?.toLowerCase().includes(query)\n      const matchesTxId = tx.transaction_id.toLowerCase().includes(query)\n      const matchesFrom = tx.from?.toLowerCase().includes(query)\n      const matchesTo = tx.to?.toLowerCase().includes(query)\n      \n      if (!matchesAssetName && !matchesCollection && !matchesTxId && !matchesFrom && !matchesTo) {\n        return false\n      }\n    }\n    \n    // Filter by date range\n    if (dateRange !== 'all') {\n      const txDate = new Date(tx.block_time)\n      \n      if (dateRange === 'custom') {\n        // Custom date range filtering\n        if (customDateRange.start && customDateRange.end) {\n          const startDate = new Date(customDateRange.start)\n          const endDate = new Date(customDateRange.end)\n          endDate.setHours(23, 59, 59, 999) // Include the entire end date\n          \n          if (txDate < startDate || txDate > endDate) return false\n        } else if (customDateRange.start) {\n          // Only start date specified\n          const startDate = new Date(customDateRange.start)\n          if (txDate < startDate) return false\n        } else if (customDateRange.end) {\n          // Only end date specified\n          const endDate = new Date(customDateRange.end)\n          endDate.setHours(23, 59, 59, 999)\n          if (txDate > endDate) return false\n        }\n      } else {\n        // Predefined date ranges\n        const now = new Date()\n        const daysAgo = dateRange === '7d' ? 7 : dateRange === '30d' ? 30 : 90\n        const cutoffDate = new Date(now.getTime() - (daysAgo * 24 * 60 * 60 * 1000))\n        \n        if (txDate < cutoffDate) return false\n      }\n    }\n    \n    return true\n  })\n  \n  // Sort transactions\n  const sortedTransactions = [...filteredTransactions].sort((a, b) => {\n    let comparison = 0\n    \n    switch (sortBy) {\n      case 'date':\n        comparison = new Date(a.block_time).getTime() - new Date(b.block_time).getTime()\n        break\n      case 'amount': {\n        const aAmount = parseFloat(a.price?.replace(' WAX', '') || '0')\n        const bAmount = parseFloat(b.price?.replace(' WAX', '') || '0')\n        comparison = aAmount - bAmount\n        break\n      }\n      case 'type':\n        comparison = a.type.localeCompare(b.type)\n        break\n    }\n    \n    return sortOrder === 'desc' ? -comparison : comparison\n  })\n  \n  // Pagination\n  const totalPages = Math.ceil(sortedTransactions.length / transactionsPerPage)\n  const startIndex = (currentPage - 1) * transactionsPerPage\n  const paginatedTransactions = sortedTransactions.slice(startIndex, startIndex + transactionsPerPage)\n  \n  // Export functionality\n  const exportTransactions = (format: 'csv' | 'json') => {\n    setIsExporting(true)\n    setExportError(null)\n    \n    try {\n      let content: string\n      let filename: string\n      let mimeType: string\n      \n      if (format === 'csv') {\n        const headers = ['Transaction ID', 'Date', 'Type', 'Asset Name', 'Collection', 'Price', 'From', 'To', 'Status']\n        const csvRows = [headers.join(',')]\n        \n        filteredTransactions.forEach(tx => {\n          const row = [\n            tx.transaction_id,\n            tx.block_time,\n            tx.type,\n            tx.asset_name || '',\n            tx.collection_name || '',\n            tx.price || '',\n            tx.from || '',\n            tx.to || '',\n            tx.status\n          ].map(field => `\"${field}\"`)\n          csvRows.push(row.join(','))\n        })\n        \n        content = csvRows.join('\\n')\n        filename = `transactions_${account}_${new Date().toISOString().split('T')[0]}.csv`\n        mimeType = 'text/csv'\n      } else {\n        content = JSON.stringify(filteredTransactions, null, 2)\n        filename = `transactions_${account}_${new Date().toISOString().split('T')[0]}.json`\n        mimeType = 'application/json'\n      }\n      \n      const blob = new Blob([content], { type: mimeType })\n      const url = URL.createObjectURL(blob)\n      const link = document.createElement('a')\n      link.href = url\n      link.download = filename\n      document.body.appendChild(link)\n      link.click()\n      document.body.removeChild(link)\n      URL.revokeObjectURL(url)\n    } catch (error) {\n      log.error('Export failed', 'UserProfile', error as Error)\n      const errorMessage = error instanceof Error ? error.message : 'Failed to export transactions. Please try again.'\n      setExportError(errorMessage)\n      showError('Export Error', errorMessage)\n    } finally {\n      setIsExporting(false)\n    }\n  }\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    })\n  }\n\n  const formatWAX = (amount: string) => {\n    return formatWAXPrice(parseFloat(amount.replace(' WAX', '')))\n  }\n\n  if (!isConnected) {\n    return (\n      <div className=\"user-profile\">\n        <div className=\"profile-container\">\n          <div className=\"not-connected\">\n            <div className=\"not-connected-icon\">🔒</div>\n            <h2>Connect Your Wallet</h2>\n            <p>Please connect your wallet to view your profile and transaction history.</p>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"user-profile\">\n      <div className=\"profile-container\">\n        <div className=\"profile-header\">\n          <div className=\"profile-avatar\">\n            <div className=\"avatar-placeholder\">\n              {account?.charAt(0).toUpperCase()}\n            </div>\n          </div>\n          <div className=\"profile-info\">\n            <h1>{account}</h1>\n            <div className=\"profile-badges\">\n              {userBadges.map((badge) => (\n                <span key={badge.id} className={`badge ${badge.id}`} title={badge.description}>\n                  {badge.icon} {badge.name}\n                </span>\n              ))}\n              {userBadges.length === 0 && (\n                <span className=\"badge no-badges\">No badges earned yet</span>\n              )}\n            </div>\n          </div>\n          <div className=\"profile-stats-quick\">\n            {userStats && (\n              <>\n                <div className=\"stat-item\">\n                  <span className=\"stat-value\">{userStats.nftsOwned}</span>\n                  <span className=\"stat-label\">NFTs Owned</span>\n                </div>\n                <div className=\"stat-item\">\n                  <span className=\"stat-value\">{userStats.totalPurchases}</span>\n                  <span className=\"stat-label\">Purchases</span>\n                </div>\n                <div className=\"stat-item\">\n                  <span className=\"stat-value\">{userStats.totalSales}</span>\n                  <span className=\"stat-label\">Sales</span>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n\n        <div className=\"profile-tabs\" role=\"tablist\" aria-label=\"Profile sections\">\n          <div className=\"tab-row\">\n            <button \n              className={`tab-button ${activeTab === 'overview' ? 'active' : ''}`}\n              onClick={() => setActiveTab('overview')}\n              role=\"tab\"\n              aria-selected={activeTab === 'overview'}\n              aria-controls=\"overview-panel\"\n              id=\"overview-tab\"\n            >\n              Overview\n            </button>\n            <button \n              className={`tab-button ${activeTab === 'transactions' ? 'active' : ''}`}\n              onClick={() => setActiveTab('transactions')}\n              role=\"tab\"\n              aria-selected={activeTab === 'transactions'}\n              aria-controls=\"transactions-panel\"\n              id=\"transactions-tab\"\n            >\n              Transactions\n            </button>\n            <button \n              className={`tab-button ${activeTab === 'portfolio' ? 'active' : ''}`}\n              onClick={() => setActiveTab('portfolio')}\n              role=\"tab\"\n              aria-selected={activeTab === 'portfolio'}\n              aria-controls=\"portfolio-panel\"\n              id=\"portfolio-tab\"\n            >\n              Portfolio Analytics\n            </button>\n            <button \n              className={`tab-button ${activeTab === 'pxbadges' ? 'active' : ''}`}\n              onClick={() => setActiveTab('pxbadges')}\n              role=\"tab\"\n              aria-selected={activeTab === 'pxbadges'}\n              aria-controls=\"pxbadges-panel\"\n              id=\"pxbadges-tab\"\n            >\n              PxBadges\n            </button>\n          </div>\n          <div className=\"tab-row\">\n            <button \n              className={`tab-button ${activeTab === 'network-resources' ? 'active' : ''}`}\n              onClick={() => setActiveTab('network-resources')}\n              role=\"tab\"\n              aria-selected={activeTab === 'network-resources'}\n              aria-controls=\"network-resources-panel\"\n              id=\"network-resources-tab\"\n            >\n              Network Resources\n            </button>\n            <button \n              className={`tab-button ${activeTab === 'powerup' ? 'active' : ''}`}\n              onClick={() => setActiveTab('powerup')}\n              role=\"tab\"\n              aria-selected={activeTab === 'powerup'}\n              aria-controls=\"powerup-panel\"\n              id=\"powerup-tab\"\n            >\n              Powerup\n            </button>\n            <button \n              className={`tab-button ${activeTab === 'token-balances' ? 'active' : ''}`}\n              onClick={() => setActiveTab('token-balances')}\n              role=\"tab\"\n              aria-selected={activeTab === 'token-balances'}\n              aria-controls=\"token-balances-panel\"\n              id=\"token-balances-tab\"\n            >\n              Token Balances\n            </button>\n            <button \n              className={`tab-button ${activeTab === 'swap' ? 'active' : ''}`}\n              onClick={() => setActiveTab('swap')}\n              role=\"tab\"\n              aria-selected={activeTab === 'swap'}\n              aria-controls=\"swap-panel\"\n              id=\"swap-tab\"\n            >\n              Swap\n            </button>\n          </div>\n        </div>\n\n        <div className=\"profile-content\">\n          {loading && (\n            <div className=\"loading-state\">\n              <div className=\"loading-spinner\"></div>\n              <p>Loading profile data...</p>\n            </div>\n          )}\n\n          {error && (\n            <div className=\"error-state\">\n              <p>{error}</p>\n              <button onClick={loadUserData} className=\"retry-button\">\n                Retry\n              </button>\n            </div>\n          )}\n\n          {!loading && !error && (\n            <>\n              {activeTab === 'overview' && userStats && (\n                <div className=\"overview-tab\">\n                  <div className=\"balance-info\">\n                    <div className=\"balance-item\">\n                      <span className=\"balance-label\">WAX Balance:</span>\n                      <span className=\"balance-value\">{waxBalance}</span>\n                    </div>\n                    <div className=\"balance-item\">\n                      <span className=\"balance-label\">USD Value:</span>\n                      <span className=\"balance-value\">$0.00</span>\n                    </div>\n                  </div>\n\n                  <div className=\"account-info\">\n                    <div className=\"info-item\">\n                      <span className=\"info-label\">Account Name:</span>\n                      <span className=\"info-value\">{account}</span>\n                    </div>\n                    <div className=\"info-item\">\n                      <span className=\"info-label\">Created:</span>\n                      <span className=\"info-value\">{accountData?.created ? new Date(accountData.created).toLocaleDateString() : 'Loading...'}</span>\n                    </div>\n                    <div className=\"info-item\">\n                      <span className=\"info-label\">Last Active:</span>\n                      <span className=\"info-value\">{lastTransactionDate ? new Date(lastTransactionDate).toLocaleDateString() : (accountData?.last_code_update ? new Date(accountData.last_code_update).toLocaleDateString() : 'Loading...')}</span>\n                    </div>\n                    <div className=\"info-item\">\n                      <span className=\"info-label\">Reputation:</span>\n                      <span className=\"info-value\">{userStats?.reputation || '⭐⭐⭐⭐⭐ (4.8/5)'}</span>\n                    </div>\n                  </div>\n\n                  <div className=\"stats-grid\">\n                    <div className=\"stat-item\">\n                      <div className=\"stat-value\">{userStats?.nftsOwned || 0}</div>\n                      <div className=\"stat-label\">NFTs Owned</div>\n                    </div>\n                    <div className=\"stat-item\">\n                      <div className=\"stat-value\">{userStats?.totalTransactions || 0}</div>\n                      <div className=\"stat-label\">Transactions</div>\n                    </div>\n                    <div className=\"stat-item\">\n                      <div className=\"stat-value\">{userStats?.totalEarned || '0'}</div>\n                      <div className=\"stat-label\">WAX Earned</div>\n                    </div>\n                    <div className=\"stat-item\">\n                      <div className=\"stat-value\">{userStats?.tierStatus || 'Bronze'}</div>\n                      <div className=\"stat-label\">Tier Status</div>\n                    </div>\n                  </div>\n\n                  <div className=\"favorite-collections\">\n                    <h3>Favorite Collections</h3>\n                    <div className=\"collections-list\">\n                      {userStats.favoriteCollections.map((collection, index) => (\n                        <div key={index} className=\"collection-item\">\n                          <div className=\"user-collection-avatar\">\n                            {collectionAvatars[collection] ? (\n                              <img \n                                src={collectionAvatars[collection]} \n                                alt={`${collection} avatar`}\n                                onError={(e) => {\n                                  e.currentTarget.style.display = 'none';\n                                  (e.currentTarget.nextElementSibling as HTMLElement)!.style.display = 'flex';\n                                }}\n                              />\n                            ) : null}\n                            <div className=\"fallback-avatar\" style={{ display: collectionAvatars[collection] ? 'none' : 'flex' }}>\n                              {collection.charAt(0).toUpperCase()}\n                            </div>\n                          </div>\n                          <span className=\"collection-name\">{collection}</span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {activeTab === 'transactions' && (\n                <div className=\"transactions-tab\">\n                  {/* Wallet Connection Prompt */}\n                  {!isConnected && (\n                    <div className=\"wallet-connection-prompt\">\n                      <div className=\"prompt-content\">\n                        <h3>🔗 Connect Your Wallet</h3>\n                        <p>Connect your WAX wallet to view your personal transaction history and account details.</p>\n                        <button className=\"connect-wallet-btn\" onClick={login}>\n                          Connect Wallet\n                        </button>\n                        <div className=\"demo-notice\">\n                          <p>📊 Currently showing demo data from account: <strong>pixeljourney</strong></p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                  \n                  {/* Quick Filter Buttons */}\n                  <div className=\"quick-filters\">\n                    <button \n                      className={`filter-btn ${transactionFilter === 'all' ? 'active' : ''}`}\n                      onClick={() => setTransactionFilter('all')}\n                    >\n                      🔍 All Activity\n                    </button>\n                    <button \n                      className={`filter-btn ${transactionFilter === 'purchase' ? 'active' : ''}`}\n                      onClick={() => setTransactionFilter('purchase')}\n                    >\n                      🛒 Purchases\n                    </button>\n                    <button \n                      className={`filter-btn ${transactionFilter === 'sale' ? 'active' : ''}`}\n                      onClick={() => setTransactionFilter('sale')}\n                    >\n                      💰 Sales\n                    </button>\n                    <button \n                      className={`filter-btn ${transactionFilter === 'transfer' ? 'active' : ''}`}\n                      onClick={() => setTransactionFilter('transfer')}\n                    >\n                      🔄 Transfers\n                    </button>\n                    <button \n                      className={`filter-btn ${transactionFilter === 'tokens' ? 'active' : ''}`}\n                      onClick={() => setTransactionFilter('tokens')}\n                    >\n                      💸 Tokens\n                    </button>\n                  </div>\n                  \n                  <div className=\"transactions-header\">\n                    <div className=\"transactions-stats\">\n                      <div className=\"stat-item\">\n                        <span className=\"stat-value\">{sortedTransactions.length}</span>\n                        <span className=\"stat-label\">Total Found</span>\n                      </div>\n                      <div className=\"stat-item\">\n                        <span className=\"stat-value\">{transactions.length}</span>\n                        <span className=\"stat-label\">All Transactions</span>\n                      </div>\n                    </div>\n                    \n                    <div className=\"transactions-actions\">\n                      <button \n                        className=\"export-btn\"\n                        onClick={() => exportTransactions('csv')}\n                        disabled={isExporting || filteredTransactions.length === 0}\n                      >\n                        {isExporting ? '⏳' : '📊'} Export CSV\n                      </button>\n                      <button \n                        className=\"export-btn\"\n                        onClick={() => exportTransactions('json')}\n                        disabled={isExporting || filteredTransactions.length === 0}\n                      >\n                        {isExporting ? '⏳' : '📄'} Export JSON\n                      </button>\n                    </div>\n                  </div>\n\n                  <div className=\"transactions-controls\">\n                    <div className=\"search-section\">\n                      <div className=\"search-input-wrapper\">\n                        <input\n                          type=\"text\"\n                          placeholder=\"Search by asset name, collection, transaction ID, or address...\"\n                          value={searchQuery}\n                          onChange={(e) => {\n                            setSearchQuery(e.target.value)\n                            setCurrentPage(1) // Reset to first page when searching\n                          }}\n                          className=\"search-input\"\n                        />\n                        <span className=\"search-icon\">🔍</span>\n                      </div>\n                    </div>\n                    \n                    <div className=\"filters-section\">\n                      <div className=\"filter-group\">\n                        <label>Type:</label>\n                        <select \n                          value={transactionFilter} \n                          onChange={(e) => {\n                            setTransactionFilter(e.target.value as 'all' | 'purchase' | 'sale' | 'transfer' | 'tokens')\n                            setCurrentPage(1)\n                          }}\n                          className=\"filter-select\"\n                        >\n                          <option value=\"all\">All Types</option>\n                          <option value=\"purchase\">🛒 Purchases</option>\n                          <option value=\"sale\">💰 Sales</option>\n                          <option value=\"transfer\">🔄 Transfers</option>\n                          <option value=\"tokens\">💸 Token Transactions</option>\n                        </select>\n                      </div>\n                      \n                      <div className=\"filter-group\">\n                        <label>Date:</label>\n                        <select \n                          value={dateRange} \n                          onChange={(e) => {\n                            setDateRange(e.target.value as '7d' | '30d' | '90d' | 'all' | 'custom')\n                            setCurrentPage(1)\n                          }}\n                          className=\"filter-select\"\n                        >\n                          <option value=\"7d\">Last 7 days</option>\n                          <option value=\"30d\">Last 30 days</option>\n                          <option value=\"90d\">Last 90 days</option>\n                          <option value=\"all\">All time</option>\n                          <option value=\"custom\">📅 Custom Range</option>\n                        </select>\n                        \n                        {/* Custom Date Range Picker */}\n                        {dateRange === 'custom' && (\n                          <div className=\"custom-date-range\">\n                            <div className=\"date-input-group\">\n                              <label>From:</label>\n                              <input\n                                type=\"date\"\n                                className=\"date-input\"\n                                value={customDateRange.start}\n                                onChange={(e) => {\n                                  setCustomDateRange(prev => ({\n                                    ...prev,\n                                    start: e.target.value\n                                  }))\n                                  setCurrentPage(1)\n                                }}\n                              />\n                            </div>\n                            <div className=\"date-input-group\">\n                              <label>To:</label>\n                              <input\n                                type=\"date\"\n                                className=\"date-input\"\n                                value={customDateRange.end}\n                                onChange={(e) => {\n                                  setCustomDateRange(prev => ({\n                                    ...prev,\n                                    end: e.target.value\n                                  }))\n                                  setCurrentPage(1)\n                                }}\n                              />\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                      \n                      <div className=\"filter-group\">\n                        <label>Sort:</label>\n                        <select \n                          value={`${sortBy}-${sortOrder}`}\n                          onChange={(e) => {\n                            const [newSortBy, newSortOrder] = e.target.value.split('-') as [typeof sortBy, typeof sortOrder]\n                            setSortBy(newSortBy)\n                            setSortOrder(newSortOrder)\n                          }}\n                          className=\"filter-select\"\n                        >\n                          <option value=\"date-desc\">📅 Newest First</option>\n                          <option value=\"date-asc\">📅 Oldest First</option>\n                          <option value=\"amount-desc\">💰 Highest Amount</option>\n                          <option value=\"amount-asc\">💰 Lowest Amount</option>\n                          <option value=\"type-asc\">🔤 Type A-Z</option>\n                          <option value=\"type-desc\">🔤 Type Z-A</option>\n                        </select>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Loading State */}\n                  {isLoadingTransactions && (\n                    <div className=\"loading-state\">\n                      <div className=\"loading-spinner\">⏳</div>\n                      <h3>Loading Transactions...</h3>\n                      <p>Fetching your transaction history from the blockchain.</p>\n                    </div>\n                  )}\n                  \n                  {/* Error State */}\n                  {transactionError && !isLoadingTransactions && (\n                    <div className=\"error-state\">\n                      <div className=\"error-icon\">❌</div>\n                      <h3>Failed to Load Transactions</h3>\n                      <p>{transactionError}</p>\n                      <button \n                        className=\"retry-btn\"\n                        onClick={() => loadTransactions()}\n                      >\n                        🔄 Retry\n                      </button>\n                    </div>\n                  )}\n                  \n                  {/* Export Error */}\n                  {exportError && (\n                    <div className=\"export-error\">\n                      <span className=\"error-text\">Export failed: {exportError}</span>\n                      <button \n                        className=\"dismiss-error-btn\"\n                        onClick={() => setExportError(null)}\n                      >\n                        ✕\n                      </button>\n                    </div>\n                  )}\n\n                  <div className=\"transactions-list\">\n                    {!isLoadingTransactions && !transactionError && paginatedTransactions.length === 0 ? (\n                      <div className=\"no-transactions\">\n                        <div className=\"no-transactions-icon\">📭</div>\n                        <h3>No transactions found</h3>\n                        <p>\n                          {searchQuery ? \n                            `No transactions match your search \"${searchQuery}\"` : \n                            'No transactions found for the selected filters.'\n                          }\n                        </p>\n                        {(searchQuery || transactionFilter !== 'all' || dateRange !== 'all') && (\n                          <button \n                            className=\"clear-filters-btn\"\n                            onClick={() => {\n                              setSearchQuery('')\n                              setTransactionFilter('all')\n                              setDateRange('all')\n                              setCustomDateRange({ start: '', end: '' })\n                              setCurrentPage(1)\n                            }}\n                          >\n                            Clear All Filters\n                          </button>\n                        )}\n                      </div>\n                    ) : (\n                      <>\n                        <div className=\"transactions-grid\">\n                          {paginatedTransactions.map((tx) => (\n                            <div key={tx.transaction_id} className=\"transaction-card\">\n                              <div className=\"transaction-header\">\n                                <div className=\"transaction-icon\">\n                                  {tx.type === 'purchase' && '🛒'}\n                                  {tx.type === 'sale' && '💰'}\n                                  {tx.type === 'transfer' && '🔄'}\n                                  {tx.type === 'token_send' && '📤'}\n                                  {tx.type === 'token_receive' && '📥'}\n                                  {tx.type === 'mint' && '✨'}\n                                </div>\n                                <div className=\"transaction-type-badge\">\n                                  <span className={`type-badge ${tx.type}`}>\n                                    {tx.type.charAt(0).toUpperCase() + tx.type.slice(1).replace('_', ' ')}\n                                  </span>\n                                </div>\n                                <div className=\"transaction-status\">\n                                  <span className={`status-badge ${tx.status}`}>\n                                    {tx.status === 'completed' && '✅'}\n                                    {tx.status === 'pending' && '⏳'}\n                                    {tx.status === 'failed' && '❌'}\n                                  </span>\n                                </div>\n                              </div>\n                              \n                              <div className=\"transaction-content\">\n                                <div className=\"asset-info\">\n                                  <h4 className=\"asset-name\">{tx.asset_name || 'Unknown Asset'}</h4>\n                                  {tx.collection_name && (\n                                    <span className=\"collection-name\">{tx.collection_name}</span>\n                                  )}\n                                </div>\n                                \n                                {tx.price && (\n                                  <div className=\"transaction-amount\">\n                                    <span className={`amount ${(tx.type === 'sale' || tx.type === 'token_receive') ? 'positive' : 'negative'}`}>\n                                      {(tx.type === 'sale' || tx.type === 'token_receive') ? '+' : '-'}{formatWAX(tx.price)}\n                                    </span>\n                                  </div>\n                                )}\n                                \n                                <div className=\"transaction-meta\">\n                                  <div className=\"meta-row\">\n                                    <span className=\"meta-label\">Date:</span>\n                                    <span className=\"meta-value\">{formatDate(tx.block_time)}</span>\n                                  </div>\n                                  \n                                  {tx.from && tx.from !== account && (\n                                    <div className=\"meta-row\">\n                                      <span className=\"meta-label\">From:</span>\n                                      <span className=\"meta-value address\">{tx.from}</span>\n                                    </div>\n                                  )}\n                                  \n                                  {tx.to && tx.to !== account && (\n                                    <div className=\"meta-row\">\n                                      <span className=\"meta-label\">To:</span>\n                                      <span className=\"meta-value address\">{tx.to}</span>\n                                    </div>\n                                  )}\n                                  \n                                  <div className=\"meta-row\">\n                                    <span className=\"meta-label\">TX ID:</span>\n                                    <span \n                                      className=\"meta-value transaction-id-link\"\n                                      onClick={() => navigate(`/transactions/${tx.transaction_id}`)}\n                                      title=\"View transaction details\"\n                                    >\n                                      {tx.transaction_id.slice(0, 12)}...\n                                    </span>\n                                  </div>\n                                  \n                                  {tx.memo && (\n                                    <div className=\"meta-row\">\n                                      <span className=\"meta-label\">Memo:</span>\n                                      <span className=\"meta-value memo\">{tx.memo}</span>\n                                    </div>\n                                  )}\n                                </div>\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                        \n                        {totalPages > 1 && (\n                          <div className=\"pagination\">\n                            <div className=\"pagination-info\">\n                              <span>\n                                Showing {startIndex + 1}-{Math.min(startIndex + transactionsPerPage, sortedTransactions.length)} of {sortedTransactions.length} transactions\n                              </span>\n                            </div>\n                            \n                            <div className=\"pagination-controls\">\n                              <button \n                                className=\"pagination-btn\"\n                                onClick={() => setCurrentPage(1)}\n                                disabled={currentPage === 1}\n                                title=\"First page\"\n                              >\n                                ⏮️\n                              </button>\n                              \n                              <button \n                                className=\"pagination-btn\"\n                                onClick={() => setCurrentPage(currentPage - 1)}\n                                disabled={currentPage === 1}\n                                title=\"Previous page\"\n                              >\n                                ⏪\n                              </button>\n                              \n                              <div className=\"page-numbers\">\n                                {Array.from({ length: Math.min(5, totalPages) }, (_, i) => {\n                                  let pageNum\n                                  if (totalPages <= 5) {\n                                    pageNum = i + 1\n                                  } else if (currentPage <= 3) {\n                                    pageNum = i + 1\n                                  } else if (currentPage >= totalPages - 2) {\n                                    pageNum = totalPages - 4 + i\n                                  } else {\n                                    pageNum = currentPage - 2 + i\n                                  }\n                                  \n                                  return (\n                                    <button\n                                      key={pageNum}\n                                      className={`page-number ${currentPage === pageNum ? 'active' : ''}`}\n                                      onClick={() => setCurrentPage(pageNum)}\n                                    >\n                                      {pageNum}\n                                    </button>\n                                  )\n                                })}\n                              </div>\n                              \n                              <button \n                                className=\"pagination-btn\"\n                                onClick={() => setCurrentPage(currentPage + 1)}\n                                disabled={currentPage === totalPages}\n                                title=\"Next page\"\n                              >\n                                ⏩\n                              </button>\n                              \n                              <button \n                                className=\"pagination-btn\"\n                                onClick={() => setCurrentPage(totalPages)}\n                                disabled={currentPage === totalPages}\n                                title=\"Last page\"\n                              >\n                                ⏭️\n                              </button>\n                            </div>\n                          </div>\n                        )}\n                      </>\n                    )}\n                  </div>\n                </div>\n              )}\n\n              {activeTab === 'portfolio' && (\n                <div className=\"portfolio-tab\">\n                  <PortfolioAnalytics />\n                </div>\n              )}\n\n              {activeTab === 'pxbadges' && (\n                <PxBadges />\n              )}\n\n              {activeTab === 'network-resources' && (\n                <div className=\"network-resources-tab\">\n                  <div className=\"resources-header\">\n                    <h2>Network Resources</h2>\n                    <p>Manage your WAX account resources (CPU, NET, RAM)</p>\n                  </div>\n\n                  <div className=\"resources-grid\">\n                    <div className=\"resource-card cpu\">\n                      <div className=\"resource-header\">\n                        <div className=\"resource-icon\">⚡</div>\n                        <div className=\"resource-info\">\n                          <h3>CPU</h3>\n                          <p>Processing power for transactions</p>\n                        </div>\n                      </div>\n                      <div className=\"resource-stats\">\n                        <div className=\"usage-bar\">\n                          <div className=\"usage-fill cpu\" style={{width: resourceData ? `${(resourceData.cpu.used / resourceData.cpu.max) * 100}%` : '45%'}}></div>\n                        </div>\n                        <div className=\"usage-text\">\n                          {resourceData ? \n                            `${((resourceData.cpu.used / resourceData.cpu.max) * 100).toFixed(1)}% used (${(resourceData.cpu.used / 1000).toFixed(1)}ms / ${(resourceData.cpu.max / 1000).toFixed(1)}ms)` : \n                            '45% used (4.5ms / 10ms)'\n                          }\n                        </div>\n                      </div>\n                      <div className=\"resource-actions\">\n                        <button className=\"stake-btn\" onClick={() => openStakingModal('cpu', 'stake')}>Stake CPU</button>\n                        <button className=\"unstake-btn\" onClick={() => openStakingModal('cpu', 'unstake')}>Unstake CPU</button>\n                      </div>\n                    </div>\n\n                    <div className=\"resource-card net\">\n                      <div className=\"resource-header\">\n                        <div className=\"resource-icon\">🌐</div>\n                        <div className=\"resource-info\">\n                          <h3>NET</h3>\n                          <p>Network bandwidth for transactions</p>\n                        </div>\n                      </div>\n                      <div className=\"resource-stats\">\n                        <div className=\"usage-bar\">\n                          <div className=\"usage-fill net\" style={{width: resourceData ? `${(resourceData.net.used / resourceData.net.max) * 100}%` : '30%'}}></div>\n                        </div>\n                        <div className=\"usage-text\">\n                          {resourceData ? \n                            `${((resourceData.net.used / resourceData.net.max) * 100).toFixed(1)}% used (${(resourceData.net.used / 1024).toFixed(1)}KB / ${(resourceData.net.max / 1024).toFixed(1)}KB)` : \n                            '30% used (3KB / 10KB)'\n                          }\n                        </div>\n                      </div>\n                      <div className=\"resource-actions\">\n                        <button className=\"stake-btn\" onClick={() => openStakingModal('net', 'stake')}>Stake NET</button>\n                        <button className=\"unstake-btn\" onClick={() => openStakingModal('net', 'unstake')}>Unstake NET</button>\n                      </div>\n                    </div>\n\n                    <div className=\"resource-card ram\">\n                      <div className=\"resource-header\">\n                        <div className=\"resource-icon\">💾</div>\n                        <div className=\"resource-info\">\n                          <h3>RAM</h3>\n                          <p>Storage space for account data</p>\n                        </div>\n                      </div>\n                      <div className=\"resource-stats\">\n                        <div className=\"usage-bar\">\n                          <div className=\"usage-fill ram\" style={{width: resourceData ? `${(resourceData.ram.used / resourceData.ram.max) * 100}%` : '65%'}}></div>\n                        </div>\n                        <div className=\"usage-text\">\n                          {resourceData ? \n                            `${((resourceData.ram.used / resourceData.ram.max) * 100).toFixed(1)}% used (${(resourceData.ram.used / 1024).toFixed(1)}KB / ${(resourceData.ram.max / 1024).toFixed(1)}KB)` : \n                            '65% used (6.5KB / 10KB)'\n                          }\n                        </div>\n                      </div>\n                      <div className=\"resource-actions\">\n                        <button className=\"buy-ram-btn\" onClick={() => openRAMModal('buy')}>Buy RAM</button>\n                        <button className=\"sell-ram-btn\" onClick={() => openRAMModal('sell')}>Sell RAM</button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {activeTab === 'powerup' && (\n                <div className=\"powerup-tab\">\n                  <div className=\"powerup-header\">\n                    <h2>Powerup Resources</h2>\n                    <p>Boost your account resources for 24 hours</p>\n                  </div>\n\n                  <div className=\"powerup-stats\">\n                    <div className=\"current-usage\">\n                      <h3>Current Resource Usage</h3>\n                      <div className=\"usage-grid\">\n                        <div className=\"usage-item\">\n                          <span className=\"usage-label\">CPU:</span>\n                          <div className=\"usage-bar\">\n                            <div className=\"usage-fill\" style={{width: resourceData ? `${calculateResourceUsage(resourceData.cpu.used, resourceData.cpu.max)}%` : '0%'}}></div>\n                          </div>\n                          <span className=\"usage-percent\">{resourceData ? `${calculateResourceUsage(resourceData.cpu.used, resourceData.cpu.max).toFixed(1)}%` : '0%'}</span>\n                        </div>\n                        <div className=\"usage-item\">\n                          <span className=\"usage-label\">NET:</span>\n                          <div className=\"usage-bar\">\n                            <div className=\"usage-fill\" style={{width: resourceData ? `${calculateResourceUsage(resourceData.net.used, resourceData.net.max)}%` : '0%'}}></div>\n                          </div>\n                          <span className=\"usage-percent\">{resourceData ? `${calculateResourceUsage(resourceData.net.used, resourceData.net.max).toFixed(1)}%` : '0%'}</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"powerup-form\">\n                    <div className=\"form-section\">\n                      <label>Account to Boost:</label>\n                      <input \n                        type=\"text\" \n                        placeholder=\"Enter account name\" \n                        value={accountToBoost}\n                        onChange={(e) => setAccountToBoost(e.target.value)}\n                      />\n                    </div>\n\n                    <div className=\"form-section\">\n                      <label>WAX Amount to Spend:</label>\n                      <div className=\"amount-input-container\">\n                        <input \n                          type=\"number\" \n                          placeholder=\"0.0000\" \n                          value={powerupAmount || ''}\n                          onChange={handleInputChange}\n                          step=\"0.0001\"\n                          min=\"0\"\n                          max={parseFloat(waxBalance.split(' ')[0])}\n                        />\n                        <span className=\"wax-label\">WAX</span>\n                      </div>\n                      <div className=\"slider-container\">\n                        <input \n                          type=\"range\" \n                          min=\"0\" \n                          max=\"100\" \n                          value={parseFloat(waxBalance.split(' ')[0]) > 0 ? (powerupAmount / parseFloat(waxBalance.split(' ')[0])) * 100 : 0}\n                          onChange={handleSliderChange}\n                          className=\"slider\" \n                        />\n                        <div className=\"slider-value\">{formatWAXPrice(powerupAmount)} (Max: {waxBalance})</div>\n                      </div>\n                    </div>\n\n                    <div className=\"form-section\">\n                      <label>CPU/NET Ratio: {cpuAllocation}% CPU / {100 - cpuAllocation}% NET</label>\n                      <div className=\"progress-container\">\n                        <div className=\"progress-bar-container\">\n                          <div className=\"progress-bar cpu\" style={{width: `${cpuAllocation}%`}}></div>\n                          <div className=\"progress-bar net\" style={{width: `${100 - cpuAllocation}%`}}></div>\n                        </div>\n                        <div className=\"progress-text\">\n                          <span className=\"cpu-text\">{cpuAllocation}% CPU</span>\n                          <span className=\"separator\"> / </span>\n                          <span className=\"net-text\">{100 - cpuAllocation}% NET</span>\n                        </div>\n                      </div>\n                      <div className=\"slider-container\">\n                        <input \n                          type=\"range\" \n                          min=\"0\" \n                          max=\"100\" \n                          value={cpuAllocation}\n                          onChange={handleCpuSliderChange}\n                          className=\"slider\" \n                        />\n                      </div>\n                    </div>\n\n                    {powerupAmount > 0 && powerupState && chainInfo && (\n                      <div className=\"powerup-estimation\">\n                        <h4>Estimated Boost (24 hours):</h4>\n                        <div className=\"boost-details\">\n                          <div className=\"boost-item\">\n                            <span>CPU:</span>\n                            <span>{estimateCpuWithElasticLimit(\n                              waxToCpuFrac(powerupAmount, cpuAllocation),\n                              waxToNetFrac(powerupAmount, cpuAllocation),\n                              powerupState?.cpu,\n                              powerupState?.net,\n                              chainInfo\n                            )}</span>\n                          </div>\n                          <div className=\"boost-item\">\n                            <span>NET:</span>\n                            <span>{netCalc(\n                              predictResourceAmounts(\n                                waxToCpuFrac(powerupAmount, cpuAllocation),\n                                waxToNetFrac(powerupAmount, cpuAllocation),\n                                powerupState?.cpu,\n                                powerupState?.net\n                              ).netAmount,\n                              chainInfo\n                            )}</span>\n                          </div>\n                        </div>\n                        <div className=\"cost-info\">\n                          <div className=\"cost-item\">\n                            <span>CPU Cost:</span>\n                            <span>{predictResourceAmounts(\n                              waxToCpuFrac(powerupAmount, cpuAllocation),\n                              waxToNetFrac(powerupAmount, cpuAllocation),\n                              powerupState?.cpu,\n                              powerupState?.net\n                            ).cpuFee.toFixed(8)} WAX</span>\n                          </div>\n                          <div className=\"cost-item\">\n                            <span>NET Cost:</span>\n                            <span>{predictResourceAmounts(\n                              waxToCpuFrac(powerupAmount, cpuAllocation),\n                              waxToNetFrac(powerupAmount, cpuAllocation),\n                              powerupState?.cpu,\n                              powerupState?.net\n                            ).netFee.toFixed(8)} WAX</span>\n                          </div>\n                        </div>\n                      </div>\n                    )}\n\n                    <button \n                      className=\"powerup-btn\"\n                      disabled={!powerupAmount || powerupAmount <= 0 || !accountToBoost || txIsLoading}\n                      onClick={() => {\n                        if (powerupAmount > 0 && accountToBoost && session) {\n                          const cpuFrac = waxToCpuFrac(powerupAmount, cpuAllocation)\n                          const netFrac = waxToNetFrac(powerupAmount, cpuAllocation)\n                          submitPowerupTx(\n                            accountToBoost,\n                            powerupAmount,\n                            cpuFrac,\n                            netFrac,\n                            setTxIsLoading,\n                            session\n                          )\n                        }\n                      }}\n                    >\n                      {txIsLoading ? 'Processing...' : 'Boost Resources'}\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {activeTab === 'token-balances' && (\n                <div className=\"token-balances-tab\">\n                  <div className=\"balances-header\">\n                    <h2>Token Balances</h2>\n                    <p>View your token balances with USD values</p>\n                    <div className=\"balance-summary\">\n                      <div className=\"balance-summary-item\">\n                        <span className=\"balance-summary-label\">Total Tokens:</span>\n                        <span className=\"balance-summary-value\">{tokenBalances.length}</span>\n                      </div>\n                      <div className=\"balance-summary-item\">\n                        <span className=\"balance-summary-label\">With USD Values:</span>\n                        <span className=\"balance-summary-value\">{tokenBalances.filter(t => t.value !== 'N/A' && t.value !== '0.00').length}</span>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"balances-controls\">\n                    <div className=\"search-sort\">\n                      <input \n                        type=\"text\" \n                        placeholder=\"Search tokens...\" \n                        className=\"search-input\"\n                      />\n                      <select className=\"sort-select\">\n                        <option value=\"balance\">Sort by Balance</option>\n                        <option value=\"value\">Sort by Value</option>\n                        <option value=\"name\">Sort by Name</option>\n                      </select>\n                    </div>\n                    <div className=\"bulk-actions\">\n                      <button className=\"select-all-btn\" onClick={handleSelectAll}>\n                        {selectedTokens.size === tokenBalances.length ? 'Deselect All' : 'Select All'}\n                      </button>\n                      <span className=\"selected-info\">{selectedTokens.size} selected</span>\n                      <button \n                        className=\"bulk-sell-btn\" \n                        onClick={handleBulkSell}\n                        disabled={selectedTokens.size === 0 || bulkSellLoading}\n                      >\n                        {bulkSellLoading ? 'Processing...' : `Bulk Sell into PXJ ${selectedTokens.size > 0 ? `(${selectedTokens.size})` : '(Coming Soon)'}`}\n                      </button>\n                    </div>\n                  </div>\n\n                  <div className=\"token-balances-grid\">\n                    {tokenBalances.length === 0 ? (\n                      <div className=\"no-tokens-message\">\n                        <div className=\"no-tokens-icon\">🪙</div>\n                        <h3>No Token Balances Found</h3>\n                        <p>Your account doesn't have any token balances or they're still loading.</p>\n                      </div>\n                    ) : (\n                      tokenBalances.map((token, index) => (\n                        <div key={`${token.contract}-${token.symbol}-${index}`} className=\"token-balance-card\">\n                          <div className=\"token-header\">\n                            <div className=\"token-icon\">🪙</div>\n                            <div className=\"token-details\">\n                              <h3>{token.symbol}</h3>\n                              <p className=\"token-contract\">{token.contract}</p>\n                            </div>\n                          </div>\n                          <div className=\"token-amounts\">\n                            <div className=\"token-balance\">\n                              <span className=\"balance-label\">Balance:</span>\n                              <span className=\"balance-value\">{token.balance}</span>\n                            </div>\n                            <div className=\"token-usd-value\">\n                              <span className=\"usd-label\">USD Value:</span>\n                              <span className={`usd-value ${token.value === 'N/A' ? 'unavailable' : token.value === '0.00' ? 'zero' : 'available'}`}>\n                                {token.value === 'N/A' ? 'N/A' : `$${token.value}`}\n                              </span>\n                            </div>\n                          </div>\n                          <div className=\"token-actions\">\n                            <button \n                              className=\"token-action-btn transfer\" \n                              onClick={() => openTokenTransferModal(token)}\n                            >\n                              Transfer\n                            </button>\n                            <button className=\"token-action-btn trade\" disabled>\n                              Trade\n                            </button>\n                          </div>\n                        </div>\n                      ))\n                    )}\n                  </div>\n                </div>\n              )}\n\n              {activeTab === 'swap' && (\n                <div className=\"swap-tab\">\n                  <div className=\"swap-tab-header\">\n                    <h2>Token Swap</h2>\n                    <p>Swap tokens directly using Alcor DEX integration</p>\n                  </div>\n                  <SwapInterface />\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n      \n      {/* Modals */}\n      <StakingModal\n        isOpen={stakingModal.isOpen}\n        onClose={closeStakingModal}\n        resourceType={stakingModal.resourceType}\n        action={stakingModal.action}\n        onSuccess={handleResourceSuccess}\n      />\n      \n      <RAMModal\n        isOpen={ramModal.isOpen}\n        onClose={closeRAMModal}\n        action={ramModal.action}\n        onSuccess={handleResourceSuccess}\n      />\n      \n      <TokenTransferModal\n        isOpen={tokenTransferModal.isOpen}\n        onClose={closeTokenTransferModal}\n        token={tokenTransferModal.token}\n        onSuccess={handleTokenTransferSuccess}\n      />\n    </div>\n  )\n}\n\nexport default UserProfile","import { useState, useCallback } from 'react';\nimport { useWallet } from '../../hooks/useWallet';\nimport { log } from '../../services/loggingService';\n\n/**\n * Custom hook to fetch account resources (CPU, NET, RAM) from WAX blockchain\n * @returns {Array} [resources, getResources, resourcesAreLoading]\n */\nexport const useGetAccountResources = () => {\n  const { account, session } = useWallet();\n  const [resources, setResources] = useState(null);\n  const [resourcesAreLoading, setResourcesAreLoading] = useState(false);\n\n  const getResources = useCallback(async (accountName = null) => {\n    if (!session && !accountName) {\n      log.warn('No wallet session or account name provided');\n      return;\n    }\n\n    const targetAccount = accountName || account;\n    if (!targetAccount) {\n      log.warn('No target account found');\n      return;\n    }\n\n    setResourcesAreLoading(true);\n\n    try {\n      // Import apiService to use endpoint rotation\n      const { apiService } = await import('../../services/api');\n      \n      // Get account info from WAX RPC using apiService\n      const accountData = await apiService.getWaxAccountInfo(targetAccount);\n      \n      if (!accountData) {\n        throw new Error('Failed to fetch account resources: No data returned');\n      }\n      \n      // Extract resource information\n      const resourceData = {\n        account_name: targetAccount,\n        cpu_limit: {\n          used: accountData.cpu_limit?.used || 0,\n          available: accountData.cpu_limit?.available || 0,\n          max: accountData.cpu_limit?.max || 0\n        },\n        net_limit: {\n          used: accountData.net_limit?.used || 0,\n          available: accountData.net_limit?.available || 0,\n          max: accountData.net_limit?.max || 0\n        },\n        ram_usage: accountData.ram_usage || 0,\n        ram_quota: accountData.ram_quota || 0,\n        total_resources: accountData.total_resources || {},\n        self_delegated_bandwidth: accountData.self_delegated_bandwidth || {},\n        refund_request: accountData.refund_request || null,\n        voter_info: accountData.voter_info || null\n      };\n\n      setResources(resourceData);\n      log.info('Account resources fetched:', resourceData);\n      \n    } catch (error) {\n      log.error('Error fetching account resources:', error);\n      setResources(null);\n    } finally {\n      setResourcesAreLoading(false);\n    }\n  }, [session, account]);\n\n  return [resources, getResources, resourcesAreLoading];\n};\n\nexport default useGetAccountResources;","import { useState, useCallback } from 'react';\n\n/**\n * Custom hook to fetch powerup state from WAX blockchain\n * @returns {Array} [powerupState, getPowerupState, powerupStateIsLoading]\n */\nexport const useGetPowerupState = () => {\n  const [powerupState, setPowerupState] = useState(null);\n  const [powerupStateIsLoading, setPowerupStateIsLoading] = useState(false);\n\n  const getPowerupState = useCallback(async () => {\n    setPowerupStateIsLoading(true);\n\n    try {\n      // Import apiService to use endpoint rotation\n      const { apiService } = await import('../../services/api');\n      \n      // Get powerup state from WAX RPC using apiService\n      const data = await apiService.getPowerupState();\n      \n      if (data.rows && data.rows.length > 0) {\n        const state = data.rows[0];\n        \n        // Structure the powerup state data\n        const powerupStateData = {\n          version: state.version || 0,\n          net: {\n            version: state.net?.version || 0,\n            weight: state.net?.weight || '0',\n            weight_ratio: state.net?.weight_ratio || '0',\n            assumed_stake_weight: state.net?.assumed_stake_weight || '0',\n            initial_weight_ratio: state.net?.initial_weight_ratio || '0',\n            target_weight_ratio: state.net?.target_weight_ratio || '0',\n            initial_timestamp: state.net?.initial_timestamp || '',\n            target_timestamp: state.net?.target_timestamp || '',\n            exponent: state.net?.exponent || 2,\n            decay_secs: state.net?.decay_secs || 86400,\n            min_price: state.net?.min_price || '0',\n            max_price: state.net?.max_price || '0',\n            utilization: state.net?.utilization || '0',\n            adjusted_utilization: state.net?.adjusted_utilization || '0',\n            utilization_timestamp: state.net?.utilization_timestamp || ''\n          },\n          cpu: {\n            version: state.cpu?.version || 0,\n            weight: state.cpu?.weight || '0',\n            weight_ratio: state.cpu?.weight_ratio || '0',\n            assumed_stake_weight: state.cpu?.assumed_stake_weight || '0',\n            initial_weight_ratio: state.cpu?.initial_weight_ratio || '0',\n            target_weight_ratio: state.cpu?.target_weight_ratio || '0',\n            initial_timestamp: state.cpu?.initial_timestamp || '',\n            target_timestamp: state.cpu?.target_timestamp || '',\n            exponent: state.cpu?.exponent || 2,\n            decay_secs: state.cpu?.decay_secs || 86400,\n            min_price: state.cpu?.min_price || '0',\n            max_price: state.cpu?.max_price || '0',\n            utilization: state.cpu?.utilization || '0',\n            adjusted_utilization: state.cpu?.adjusted_utilization || '0',\n            utilization_timestamp: state.cpu?.utilization_timestamp || ''\n          },\n          powerup_days: state.powerup_days || 1,\n          min_powerup_fee: state.min_powerup_fee || '0.0001 WAX'\n        };\n\n        setPowerupState(powerupStateData);\n      } else {\n        console.warn('No powerup state data found');\n        setPowerupState(null);\n      }\n      \n    } catch (error) {\n      console.error('Error fetching powerup state:', error);\n      setPowerupState(null);\n    } finally {\n      setPowerupStateIsLoading(false);\n    }\n  }, []);\n\n  return [powerupState, getPowerupState, powerupStateIsLoading];\n};\n\nexport default useGetPowerupState;","import { useState, useCallback } from 'react';\n\n/**\n * Custom hook to fetch chain information from WAX blockchain\n * @returns {Array} [chainInfo, getChainInfo, chainInfoIsLoading]\n */\nexport const useGetChainInfo = () => {\n  const [chainInfo, setChainInfo] = useState(null);\n  const [chainInfoIsLoading, setChainInfoIsLoading] = useState(false);\n\n  const getChainInfo = useCallback(async () => {\n    setChainInfoIsLoading(true);\n\n    try {\n      // Import apiService to use endpoint rotation\n      const { apiService } = await import('../../services/api');\n      \n      // Get chain info from WAX RPC using apiService\n      const data = await apiService.getChainInfo();\n      \n      // Structure the chain info data\n      const chainInfoData = {\n        server_version: data.server_version || '',\n        chain_id: data.chain_id || '',\n        head_block_num: data.head_block_num || 0,\n        last_irreversible_block_num: data.last_irreversible_block_num || 0,\n        last_irreversible_block_id: data.last_irreversible_block_id || '',\n        head_block_id: data.head_block_id || '',\n        head_block_time: data.head_block_time || '',\n        head_block_producer: data.head_block_producer || '',\n        virtual_block_cpu_limit: data.virtual_block_cpu_limit || 0,\n        virtual_block_net_limit: data.virtual_block_net_limit || 0,\n        block_cpu_limit: data.block_cpu_limit || 0,\n        block_net_limit: data.block_net_limit || 0,\n        server_version_string: data.server_version_string || '',\n        fork_db_head_block_num: data.fork_db_head_block_num || 0,\n        fork_db_head_block_id: data.fork_db_head_block_id || ''\n      };\n\n      setChainInfo(chainInfoData);\n      \n    } catch (error) {\n      console.error('Error fetching chain info:', error);\n      setChainInfo(null);\n    } finally {\n      setChainInfoIsLoading(false);\n    }\n  }, []);\n\n  return [chainInfo, getChainInfo, chainInfoIsLoading];\n};\n\nexport default useGetChainInfo;","import React, { useState, useEffect, useCallback } from 'react'\nimport { useParams, useNavigate, useSearchParams } from 'react-router-dom'\nimport { apiService } from '../services/api'\nimport { balanceService } from '../services/balanceService'\nimport type { NFTAsset, WaxAccountInfo, WaxCurrencyBalance } from '../services/api'\nimport { badgeService } from '../services/badgeService'\nimport type { UserBadge } from '../services/badgeService'\nimport { log } from '../services/loggingService'\nimport NFTDetailsModal from './NFTDetailsModal'\nimport '../css/user-profile-lookup.css'\n\n\ninterface UserProfileData {\n  account: string\n  nftsOwned: NFTAsset[]\n  totalNFTs: number\n  collections: string[]\n  joinDate: string\n  isVerified: boolean\n  badges: string[]\n}\n\ninterface UserStats {\n  totalAssets: number\n  uniqueCollections: number\n  totalValue: string\n  rareAssets: number\n}\n\ninterface ResourceData {\n  cpu: { used: number; available: number; max: number }\n  net: { used: number; available: number; max: number }\n  ram: { used: number; available: number; max: number }\n}\n\n// Helper function to get account creation date from blockchain\nconst getAccountCreationDate = async (account: string): Promise<string> => {\n  try {\n    // Try to get account info from WAX API\n    const accountInfo = await apiService.getWaxAccountInfo(account);\n    if (accountInfo && accountInfo.created) {\n      return new Date(accountInfo.created).toISOString().split('T')[0];\n    }\n  } catch (error) {\n    log.warn('Could not fetch account creation date:', 'UserProfileLookup.getAccountCreationDate', error);\n  }\n  \n  try {\n    // Fallback: try to get first transaction date\n    const transactions = await apiService.getUserTransactions(account, 1);\n    if (transactions && transactions.length > 0) {\n      const firstTx = transactions[transactions.length - 1];\n      if (firstTx.block_time) {\n        return new Date(firstTx.block_time).toISOString().split('T')[0];\n      }\n    }\n  } catch (error) {\n    log.warn('Could not fetch first transaction date:', 'UserProfileLookup.getAccountCreationDate', error);\n  }\n  \n  // Final fallback: return a reasonable default\n  return '2023-01-01';\n};\n\nconst UserProfileLookup: React.FC = () => {\n  const { account: paramAccount } = useParams<{ account: string }>()\n  const [searchParams] = useSearchParams()\n  const navigate = useNavigate()\n  \n  // Get account from either URL params or query params\n  const account = paramAccount || searchParams.get('user')\n  const [profileData, setProfileData] = useState<UserProfileData | null>(null)\n  const [userStats, setUserStats] = useState<UserStats | null>(null)\n  const [accountInfo, setAccountInfo] = useState<WaxAccountInfo | null>(null)\n  const [waxBalance, setWaxBalance] = useState<string>('0.0000')\n  const [tokenBalances, setTokenBalances] = useState<(WaxCurrencyBalance & { value: string })[]>([])\n  const [resourceData, setResourceData] = useState<ResourceData | null>(null)\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [selectedNFT, setSelectedNFT] = useState<NFTAsset | null>(null)\n  const [isModalOpen, setIsModalOpen] = useState(false)\n  const [collectionAvatars, setCollectionAvatars] = useState<Record<string, string>>({})\n  const [currentPage, setCurrentPage] = useState(1)\n  const [filter, setFilter] = useState<'all' | 'pixals' | 'waxrock' | 'ingredients'>('all')\n  const [userBadges, setUserBadges] = useState<UserBadge[]>([])\n  const itemsPerPage = 20\n  \n  // Pixal metadata filters\n  const [pixalFilters, setPixalFilters] = useState({\n    Body: '',\n    Eyes: '',\n    Head: '',\n    Mouth: '',\n    WaxRock: '',\n    PixelPet: '',\n    Background: '',\n    'Hats and Hair': '',\n    'Glasses and Masks': '',\n    'Special Accessories': ''\n  })\n  const [availableTraits, setAvailableTraits] = useState<Record<string, string[]>>({})\n\n  const fetchTokenBalances = useCallback(async (userAccount: string) => {\n    try {\n      const tokenContracts = ['token.pxj', 'eosio.token']\n      const balances: (WaxCurrencyBalance & { value: string })[] = []\n      \n      for (const contract of tokenContracts) {\n        try {\n          const contractBalances = await apiService.getWaxCurrencyBalance(userAccount, contract)\n          const balancesWithValue = await Promise.all(contractBalances.map(async balance => ({\n            ...balance,\n            contract: contract,\n            value: await calculateTokenValue(balance.balance, balance.symbol)\n          })))\n          balances.push(...balancesWithValue)\n        } catch (error) {\n          log.error(`Failed to fetch balance for ${contract}:`, 'UserProfileLookup.fetchTokenBalances', error as Error)\n        }\n      }\n      \n      setTokenBalances(balances)\n    } catch (error) {\n      log.error('Error fetching token balances:', 'UserProfileLookup.fetchTokenBalances', error as Error)\n    }\n  }, [])\n\n  const loadUserProfile = useCallback(async () => {\n    if (!account) return\n    \n    setLoading(true)\n    setError(null)\n    \n    try {\n      // Load user's NFT inventory\n      const inventory = await apiService.getUserInventory(account)\n      \n      // Get unique collections\n      const collections = [...new Set(inventory.map(nft => nft.collection))]\n      \n      // Check for user badges\n        const badgeResult = await badgeService.checkUserBadges(account)\n        setUserBadges(badgeResult.badges)\n      \n      // Extract available traits from Pixal NFTs\n      const pixalNFTs = inventory.filter(nft => nft.collection === 'pixeljourney' && nft.schema === 'pixals')\n      const traits: Record<string, Set<string>> = {\n        Body: new Set(),\n        Eyes: new Set(),\n        Head: new Set(),\n        Mouth: new Set(),\n        WaxRock: new Set(),\n        PixelPet: new Set(),\n        Background: new Set(),\n        'Hats and Hair': new Set(),\n        'Glasses and Masks': new Set(),\n        'Special Accessories': new Set()\n      }\n      \n      pixalNFTs.forEach(nft => {\n        Object.keys(traits).forEach(trait => {\n          const value = nft.data?.[trait] as string\n          if (value && value !== 'none' && value !== '') {\n            traits[trait].add(value)\n          }\n        })\n      })\n      \n      const availableTraitsObj: Record<string, string[]> = {}\n      Object.entries(traits).forEach(([trait, values]) => {\n        availableTraitsObj[trait] = Array.from(values).sort()\n      })\n      setAvailableTraits(availableTraitsObj)\n      \n      // Load WAX Chain API data\n      await Promise.all([\n        fetchWaxAccountInfo(account),\n        fetchWaxBalance(account),\n        fetchTokenBalances(account)\n      ])\n      \n      // Get real account creation date from blockchain\n      const joinDate = await getAccountCreationDate(account);\n      \n      const profileData: UserProfileData = {\n          account,\n          nftsOwned: inventory,\n          totalNFTs: inventory.length,\n          collections,\n          joinDate,\n          isVerified: badgeResult.badges.some(badge => badge.id === 'pixal-pfp'),\n          badges: badgeResult.badges.map(badge => badge.name)\n        }\n      \n      // Calculate user stats\n      const totalValue = await calculateTotalValue(inventory)\n      const stats: UserStats = {\n        totalAssets: inventory.length,\n        uniqueCollections: collections.length,\n        totalValue,\n        rareAssets: inventory.filter(nft => nft.template_mint && nft.template_mint <= 100).length\n      }\n      \n      setProfileData(profileData)\n      setUserStats(stats)\n      \n      // Fetch collection avatars\n      if (collections.length > 0) {\n        fetchCollectionAvatars(collections)\n      }\n      \n\n    } catch (err) {\n      log.error('Error loading user profile:', 'UserProfileLookup.loadUserProfile', err as Error)\n      setError('Failed to load user profile. Please check the account name and try again.')\n    } finally {\n      setLoading(false)\n    }\n  }, [account, fetchTokenBalances])\n\n  useEffect(() => {\n    if (account) {\n      loadUserProfile()\n    }\n  }, [account, loadUserProfile])\n\n  const fetchWaxAccountInfo = async (userAccount: string) => {\n    try {\n      const accountInfo = await apiService.getWaxAccountInfo(userAccount)\n      setAccountInfo(accountInfo)\n      \n      // Extract resource data\n      if (accountInfo) {\n        const resources: ResourceData = {\n          cpu: {\n            used: accountInfo.cpu_limit.used,\n            available: accountInfo.cpu_limit.available,\n            max: accountInfo.cpu_limit.max\n          },\n          net: {\n            used: accountInfo.net_limit.used,\n            available: accountInfo.net_limit.available,\n            max: accountInfo.net_limit.max\n          },\n          ram: {\n            used: accountInfo.ram_usage,\n            available: accountInfo.ram_quota - accountInfo.ram_usage,\n            max: accountInfo.ram_quota\n          }\n        }\n        setResourceData(resources)\n      }\n    } catch (error) {\n      log.error('Failed to fetch WAX account info:', 'UserProfileLookup.fetchWaxAccountInfo', error as Error)\n    }\n  }\n\n  const fetchWaxBalance = async (userAccount: string) => {\n    try {\n      const balance = await balanceService.getWaxBalance(userAccount)\n      setWaxBalance(balance)\n    } catch (error) {\n      log.error('Failed to fetch WAX balance:', 'UserProfileLookup.fetchWaxBalance', error as Error)\n    }\n  }\n\n\n\n  const calculateTokenValue = async (balance: string, symbol: string): Promise<string> => {\n    const amount = parseFloat(balance.split(' ')[0])\n    \n    try {\n      // Get real token price from Alcor Exchange\n      const tokenContracts: Record<string, string> = {\n        'TLM': 'alien.worlds',\n        'NEFTY': 'neftyblocksp',\n        'SEST': 'sest.token'\n      }\n      \n      const contract = tokenContracts[symbol]\n      if (contract) {\n        const priceData = await apiService.getAlcorTokenPrice(symbol, contract)\n        if (priceData && priceData.usd_price) {\n          return `$${(amount * priceData.usd_price).toFixed(4)}`\n        }\n      }\n      \n      // Fallback prices if API fails\n      const fallbackPrices: Record<string, number> = {\n        'TLM': 0.02,\n        'NEFTY': 0.001,\n        'SEST': 0.0001\n      }\n      const price = fallbackPrices[symbol] || 0.001\n      return `$${(amount * price).toFixed(4)}`\n    } catch (error) {\n      log.error(`Error fetching price for ${symbol}:`, 'UserProfileLookup.fetchWaxAccountInfo', error as Error)\n      const fallbackPrices: Record<string, number> = {\n        'TLM': 0.02,\n        'NEFTY': 0.001,\n        'SEST': 0.0001\n      }\n      const price = fallbackPrices[symbol] || 0.001\n      return `$${(amount * price).toFixed(4)}`\n    }\n  }\n\n\n\n  const calculateTotalValue = async (inventory: NFTAsset[]): Promise<string> => {\n    if (inventory.length === 0) return '0.00 WAX'\n    \n    try {\n      // Group NFTs by collection for batch analysis\n      const collectionGroups = inventory.reduce((groups, nft) => {\n        const collection = nft.collection\n        if (!groups[collection]) groups[collection] = []\n        groups[collection].push(nft)\n        return groups\n      }, {} as Record<string, NFTAsset[]>)\n      \n      let totalValue = 0\n      \n      // Calculate value for each collection\n      for (const [collection, nfts] of Object.entries(collectionGroups)) {\n        try {\n          // Get collection stats including floor price\n          const stats = await apiService.getCollectionStats(collection)\n          let collectionFloorPrice = 0\n          \n          if (stats && stats.floor_price) {\n            collectionFloorPrice = parseFloat(stats.floor_price)\n          } else {\n            // Fallback: get recent sales data for the collection\n            const salesResponse = await fetch(\n              `${apiService.atomicMarketAPI}/atomicmarket/v1/sales?state=3&collection_name=${collection}&limit=50&order=desc&sort=updated`\n            )\n            const salesData = await salesResponse.json()\n            \n            if (salesData.success && salesData.data?.length > 0) {\n              interface SaleData {\n                price?: {\n                  amount: string\n                  token_precision?: number\n                }\n              }\n              \n              const prices = salesData.data\n                .filter((sale: SaleData) => sale.price?.amount)\n                .map((sale: SaleData) => parseFloat(sale.price!.amount) / Math.pow(10, sale.price!.token_precision || 8))\n              \n              if (prices.length > 0) {\n                collectionFloorPrice = Math.min(...prices)\n              }\n            }\n          }\n          \n          // If we still don't have a floor price, use a conservative estimate\n          if (collectionFloorPrice === 0) {\n            collectionFloorPrice = 1.0 // 1 WAX default for unknown collections\n          }\n          \n          // Calculate value for this collection's NFTs\n          // Use floor price as base, with adjustments for rarity\n          nfts.forEach(nft => {\n            let nftValue = collectionFloorPrice\n            \n            // Adjust for rarity based on template mint number\n            if (nft.template_mint) {\n              if (nft.template_mint <= 10) {\n                nftValue *= 3.0 // Very rare (top 10 mints)\n              } else if (nft.template_mint <= 50) {\n                nftValue *= 2.0 // Rare (top 50 mints)\n              } else if (nft.template_mint <= 100) {\n                nftValue *= 1.5 // Uncommon (top 100 mints)\n              }\n            }\n            \n            totalValue += nftValue\n          })\n          \n        } catch (error) {\n          log.warn(`Failed to get market data for collection ${collection}, using fallback pricing:`, 'UserProfileLookup.calculateTotalValue', error as Error)\n          // Fallback: use conservative estimate of 1.5 WAX per NFT\n          totalValue += nfts.length * 1.5\n        }\n      }\n      \n      return `${totalValue.toFixed(2)} WAX`\n      \n    } catch (error) {\n      log.error('Error calculating total portfolio value:', 'UserProfileLookup.calculateTotalValue', error as Error)\n      // Ultimate fallback to mock calculation\n      const fallbackValue = inventory.length * 2.0\n      return `${fallbackValue.toFixed(2)} WAX`\n    }\n  }\n\n  const getFilteredNFTs = () => {\n    if (!profileData) return []\n    \n    let filtered = profileData.nftsOwned\n    \n    switch (filter) {\n      case 'pixals':\n        filtered = filtered.filter(nft => nft.collection === 'pixeljourney' && nft.schema === 'pixals')\n        \n        // Apply Pixal metadata filters\n        Object.entries(pixalFilters).forEach(([trait, value]) => {\n          if (value && value !== '') {\n            filtered = filtered.filter(nft => {\n              const traitValue = nft.data?.[trait] as string\n              return traitValue && traitValue.toLowerCase().includes(value.toLowerCase())\n            })\n          }\n        })\n        break\n      case 'waxrock': {\n        // Fix WaxRock detection - check for Pixals with valid WaxRock traits\n        filtered = filtered.filter(nft => {\n          const waxRock = nft.data?.WaxRock as string\n          return nft.collection === 'pixeljourney' && \n                 nft.schema === 'pixals' && \n                 waxRock && \n                 waxRock !== 'none'\n        })\n        break\n      }\n      case 'ingredients':\n        filtered = filtered.filter(nft => nft.collection === 'pixeljourney' && nft.schema === 'ingredients')\n        break\n      default:\n        break\n    }\n    \n    return filtered\n  }\n\n  const getPaginatedNFTs = () => {\n    const filtered = getFilteredNFTs()\n    const startIndex = (currentPage - 1) * itemsPerPage\n    return filtered.slice(startIndex, startIndex + itemsPerPage)\n  }\n\n  const getTotalPages = () => {\n    const filtered = getFilteredNFTs()\n    return Math.ceil(filtered.length / itemsPerPage)\n  }\n\n  const handleNFTClick = (nft: NFTAsset) => {\n    setSelectedNFT(nft)\n    setIsModalOpen(true)\n  }\n\n  const fetchCollectionAvatars = async (collections: string[]) => {\n    const avatars: Record<string, string> = {}\n    \n    for (const collection of collections) {\n      try {\n        const response = await fetch(`https://aa.dapplica.io/atomicassets/v1/collections/${collection}`)\n        const data = await response.json()\n        \n        if (data.success && data.data?.img) {\n          const img = data.data.img\n          avatars[collection] = img.startsWith('http') ? img : `https://ipfs.io/ipfs/${img}`\n        }\n      } catch (error) {\n        log.error(`Error fetching avatar for collection ${collection}:`, 'UserProfileLookup.fetchCollectionAvatars', error as Error)\n      }\n    }\n    \n    setCollectionAvatars(avatars)\n  }\n\n\n\n  const handleCloseModal = () => {\n    setIsModalOpen(false)\n    setSelectedNFT(null)\n  }\n\n  const handlePageChange = (page: number) => {\n    setCurrentPage(page)\n    window.scrollTo({ top: 0, behavior: 'smooth' })\n  }\n\n  if (loading) {\n    return (\n      <div className=\"user-profile-lookup\">\n        <div className=\"profile-container\">\n          <div className=\"loading-state\">\n            <div className=\"loading-spinner\"></div>\n            <p>Loading user profile...</p>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"user-profile-lookup\">\n        <div className=\"profile-container\">\n          <div className=\"error-state\">\n            <div className=\"error-icon\">⚠️</div>\n            <h2>Profile Not Found</h2>\n            <p>{error}</p>\n            <div className=\"error-actions\">\n              <button onClick={() => navigate(-1)} className=\"btn-secondary\">\n                Go Back\n              </button>\n              <button onClick={loadUserProfile} className=\"btn-primary\">\n                Try Again\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  if (!profileData || !userStats) {\n    return (\n      <div className=\"user-profile-lookup\">\n        <div className=\"profile-container\">\n          <div className=\"no-data\">\n            <p>No profile data available</p>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  const filteredNFTs = getFilteredNFTs()\n  const paginatedNFTs = getPaginatedNFTs()\n  const totalPages = getTotalPages()\n\n  return (\n    <div className=\"user-profile-lookup\">\n      <div className=\"profile-container\">\n        {/* Profile Header */}\n        <div className=\"profile-header\">\n          <div className=\"profile-avatar\">\n            <div className=\"avatar-placeholder\">\n              {account?.charAt(0).toUpperCase()}\n            </div>\n          </div>\n          <div className=\"profile-info\">\n            <h1>{account}</h1>\n            <div className=\"profile-badges\">\n              {profileData.isVerified && (\n                <span className=\"badge verified\">✓ Verified</span>\n              )}\n              {userBadges.map((badge) => (\n                <span key={badge.id} className={`badge ${badge.id}`} title={badge.description}>\n                  {badge.icon} {badge.name}\n                </span>\n              ))}\n            </div>\n          </div>\n          <div className=\"profile-stats-quick\">\n            <div className=\"stat-item\">\n              <span className=\"stat-value\">{userStats.totalAssets}</span>\n              <span className=\"stat-label\">NFTs Owned</span>\n            </div>\n            <div className=\"stat-item\">\n              <span className=\"stat-value\">{userStats.uniqueCollections}</span>\n              <span className=\"stat-label\">Collections</span>\n            </div>\n            <div className=\"stat-item\">\n              <span className=\"stat-value\">{userStats.rareAssets}</span>\n              <span className=\"stat-label\">Rare Assets</span>\n            </div>\n          </div>\n        </div>\n\n        {/* WAX Account Information */}\n        {accountInfo && (\n          <div className=\"account-info-section\">\n            <h3>Account Information</h3>\n            <div className=\"account-info-grid\">\n              <div className=\"user-info-card\">\n                <div className=\"info-icon\">👤</div>\n                <div className=\"info-details\">\n                  <h4>Account Name</h4>\n                  <p>{accountInfo.account_name}</p>\n                </div>\n              </div>\n              <div className=\"user-info-card\">\n                <div className=\"info-icon\">📅</div>\n                <div className=\"info-details\">\n                  <h4>Created</h4>\n                  <p>{new Date(accountInfo.created).toLocaleDateString()}</p>\n                </div>\n              </div>\n              <div className=\"user-info-card\">\n                <div className=\"info-icon\">🔑</div>\n                <div className=\"info-details\">\n                  <h4>Permissions</h4>\n                  <p>{accountInfo.permissions?.length || 0} keys</p>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* WAX Balance & Tokens */}\n        <div className=\"balance-section\">\n          <h3>Balances</h3>\n          <div className=\"balance-grid\">\n            <div className=\"balance-card primary\">\n              <div className=\"balance-icon\">💰</div>\n              <div className=\"balance-details\">\n                <h4>WAX Balance</h4>\n                <p className=\"balance-value\">{waxBalance}</p>\n              </div>\n            </div>\n            {tokenBalances.map((token, index) => (\n              <div key={index} className=\"balance-card\">\n                <div className=\"balance-icon\">🪙</div>\n                <div className=\"balance-details\">\n                   <h4>{token.symbol}</h4>\n                   <p className=\"balance-value\">{token.balance}</p>\n                   <p className=\"balance-usd\">{token.value}</p>\n                 </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Resources */}\n        {resourceData && (\n          <div className=\"resources-section\">\n            <h3>Resources</h3>\n            <div className=\"resources-grid\">\n              <div className=\"resource-card\">\n                <div className=\"resource-header\">\n                  <span className=\"resource-icon\">⚡</span>\n                  <h4>CPU</h4>\n                </div>\n                <div className=\"resource-bar\">\n                  <div \n                    className=\"resource-fill\" \n                    style={{ width: `${(resourceData.cpu.used / resourceData.cpu.max) * 100}%` }}\n                  ></div>\n                </div>\n                <div className=\"resource-stats\">\n                  <span>{resourceData.cpu.used.toLocaleString()} / {resourceData.cpu.max.toLocaleString()}</span>\n                  <span>{((resourceData.cpu.used / resourceData.cpu.max) * 100).toFixed(1)}%</span>\n                </div>\n              </div>\n              <div className=\"resource-card\">\n                <div className=\"resource-header\">\n                  <span className=\"resource-icon\">🌐</span>\n                  <h4>NET</h4>\n                </div>\n                <div className=\"resource-bar\">\n                  <div \n                    className=\"resource-fill\" \n                    style={{ width: `${(resourceData.net.used / resourceData.net.max) * 100}%` }}\n                  ></div>\n                </div>\n                <div className=\"resource-stats\">\n                  <span>{resourceData.net.used.toLocaleString()} / {resourceData.net.max.toLocaleString()}</span>\n                  <span>{((resourceData.net.used / resourceData.net.max) * 100).toFixed(1)}%</span>\n                </div>\n              </div>\n              <div className=\"resource-card\">\n                <div className=\"resource-header\">\n                  <span className=\"resource-icon\">💾</span>\n                  <h4>RAM</h4>\n                </div>\n                <div className=\"resource-bar\">\n                  <div \n                    className=\"resource-fill\" \n                    style={{ width: `${(resourceData.ram.used / resourceData.ram.max) * 100}%` }}\n                  ></div>\n                </div>\n                <div className=\"resource-stats\">\n                  <span>{(resourceData.ram.used / 1024).toFixed(2)} KB / {(resourceData.ram.max / 1024).toFixed(2)} KB</span>\n                  <span>{((resourceData.ram.used / resourceData.ram.max) * 100).toFixed(1)}%</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Stats Cards */}\n        <div className=\"stats-grid\">\n          <div className=\"stat-card\">\n            <div className=\"stat-icon\">🎨</div>\n            <div className=\"stat-details\">\n              <h3>Total Assets</h3>\n              <p className=\"stat-value\">{userStats.totalAssets}</p>\n            </div>\n          </div>\n          <div className=\"stat-card\">\n            <div className=\"stat-icon\">📚</div>\n            <div className=\"stat-details\">\n              <h3>Collections</h3>\n              <p className=\"stat-value\">{userStats.uniqueCollections}</p>\n            </div>\n          </div>\n          <div className=\"stat-card\">\n            <div className=\"stat-icon\">💎</div>\n            <div className=\"stat-details\">\n              <h3>Estimated Value</h3>\n              <p className=\"stat-value\">{userStats.totalValue}</p>\n            </div>\n          </div>\n          <div className=\"stat-card\">\n            <div className=\"stat-icon\">⭐</div>\n            <div className=\"stat-details\">\n              <h3>Rare Assets</h3>\n              <p className=\"stat-value\">{userStats.rareAssets}</p>\n            </div>\n          </div>\n        </div>\n\n        {/* Collections List */}\n        <div className=\"collections-section\">\n          <h3>Collections ({profileData.collections.length})</h3>\n          <div className=\"collections-list\">\n            {profileData.collections.map((collection, index) => (\n              <div key={index} className=\"collection-item\" onClick={() => navigate(`/collections/${collection}`)}>\n                <div className=\"user-collection-avatar\">\n                  {collectionAvatars[collection] ? (\n                    <img \n                      src={collectionAvatars[collection]} \n                      alt={`${collection} avatar`}\n                      onError={(e) => {\n                        e.currentTarget.style.display = 'none';\n                        (e.currentTarget.nextElementSibling as HTMLElement)!.style.display = 'flex';\n                      }}\n                    />\n                  ) : null}\n                  <div className=\"fallback-avatar\" style={{ display: collectionAvatars[collection] ? 'none' : 'flex' }}>\n                    {collection.charAt(0).toUpperCase()}\n                  </div>\n                </div>\n                <span className=\"collection-name\">{collection}</span>\n                <span className=\"collection-count\">\n                  {profileData.nftsOwned.filter(nft => nft.collection === collection).length}\n                </span>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* NFT Inventory */}\n        <div className=\"inventory-section\">\n          <div className=\"inventory-header\">\n            <h3>NFT Inventory ({filteredNFTs.length})</h3>\n            <div className=\"filter-tabs\">\n              <button \n                className={`filter-tab ${filter === 'all' ? 'active' : ''}`}\n                onClick={() => { setFilter('all'); setCurrentPage(1) }}\n              >\n                All ({profileData.nftsOwned.length})\n              </button>\n              <button \n                className={`filter-tab ${filter === 'pixals' ? 'active' : ''}`}\n                onClick={() => { setFilter('pixals'); setCurrentPage(1) }}\n              >\n                Pixals ({profileData.nftsOwned.filter(nft => nft.collection === 'pixeljourney' && nft.schema === 'pixals').length})\n              </button>\n              <button \n                className={`filter-tab ${filter === 'waxrock' ? 'active' : ''}`}\n                onClick={() => { setFilter('waxrock'); setCurrentPage(1) }}\n              >\n                WaxRock ({profileData.nftsOwned.filter(nft => {\n                  const waxRock = nft.data?.WaxRock as string\n                  return nft.collection === 'pixeljourney' && \n                         nft.schema === 'pixals' && \n                         waxRock && \n                         waxRock !== 'none'\n                }).length})\n              </button>\n              <button \n                className={`filter-tab ${filter === 'ingredients' ? 'active' : ''}`}\n                onClick={() => { setFilter('ingredients'); setCurrentPage(1) }}\n              >\n                Ingredients ({profileData.nftsOwned.filter(nft => nft.collection === 'pixeljourney' && nft.schema === 'ingredients').length})\n              </button>\n            </div>\n            \n            {/* Pixal Metadata Filters */}\n            {filter === 'pixals' && (\n              <div className=\"pixal-filters\">\n                <h4>Filter by Traits</h4>\n                <div className=\"filters-grid\">\n                  {Object.entries(pixalFilters).map(([trait, value]) => (\n                    <div key={trait} className=\"filter-group\">\n                      <label>{trait}</label>\n                      <select\n                        value={value}\n                        onChange={(e) => {\n                          setPixalFilters(prev => ({\n                            ...prev,\n                            [trait]: e.target.value\n                          }))\n                          setCurrentPage(1)\n                        }}\n                      >\n                        <option value=\"\">All {trait}</option>\n                        {availableTraits[trait]?.map(traitValue => (\n                          <option key={traitValue} value={traitValue}>\n                            {traitValue}\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n                  ))}\n                </div>\n                <button \n                  className=\"clear-filters-btn\"\n                  onClick={() => {\n                    setPixalFilters({\n                      Body: '',\n                      Eyes: '',\n                      Head: '',\n                      Mouth: '',\n                      WaxRock: '',\n                      PixelPet: '',\n                      Background: '',\n                      'Hats and Hair': '',\n                      'Glasses and Masks': '',\n                      'Special Accessories': ''\n                    })\n                    setCurrentPage(1)\n                  }}\n                >\n                  Clear All Filters\n                </button>\n              </div>\n            )}\n          </div>\n\n          {paginatedNFTs.length === 0 ? (\n            <div className=\"empty-inventory\">\n              <div className=\"empty-icon\">📦</div>\n              <h3>No NFTs Found</h3>\n              <p>This user doesn't have any NFTs in the selected category.</p>\n            </div>\n          ) : (\n            <>\n              <div className=\"nft-grid\">\n                {paginatedNFTs.map((nft) => (\n                  <div key={nft.asset_id} className=\"nft-card\" onClick={() => handleNFTClick(nft)}>\n                    <div className=\"nft-image\">\n                      {nft.video ? (\n                        <video \n                          src={nft.video} \n                          className=\"nft-media\"\n                          muted \n                          loop\n                          onMouseEnter={(e) => e.currentTarget.play()}\n                          onMouseLeave={(e) => e.currentTarget.pause()}\n                          onError={(e) => {\n                            // Fallback to image if video fails\n                            const img = document.createElement('img')\n                            img.src = nft.image\n                            img.className = 'nft-media'\n                            img.alt = nft.name\n                            img.loading = 'lazy'\n                            e.currentTarget.parentNode?.replaceChild(img, e.currentTarget)\n                          }}\n                        />\n                      ) : (\n                        <img src={nft.image} alt={nft.name} className=\"nft-media\" loading=\"lazy\" />\n                      )}\n                    </div>\n                    <div className=\"nft-info\">\n                      <h4 className=\"nft-name\">{nft.name}</h4>\n                      <p className=\"nft-collection\">{nft.collection}</p>\n                      <div className=\"nft-schema-template\">\n                        <span className=\"nft-schema\">{nft.schema}</span>\n                        {nft.template_id && (\n                          <span className=\"nft-template\">T#{nft.template_id}</span>\n                        )}\n                      </div>\n                      <div className=\"nft-details\">\n                        <span className=\"nft-mint\">#{nft.template_mint}</span>\n                        {nft.max_supply && parseInt(nft.max_supply) > 0 && (\n                          <span className=\"nft-supply\">/{nft.max_supply}</span>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n\n              {/* Pagination */}\n              {totalPages > 1 && (\n                <div className=\"pagination\">\n                  <button \n                    className=\"pagination-btn\" \n                    onClick={() => handlePageChange(currentPage - 1)}\n                    disabled={currentPage === 1}\n                  >\n                    Previous\n                  </button>\n                  \n                  <div className=\"pagination-numbers\">\n                    {Array.from({ length: Math.min(5, totalPages) }, (_, i) => {\n                      let pageNum\n                      if (totalPages <= 5) {\n                        pageNum = i + 1\n                      } else if (currentPage <= 3) {\n                        pageNum = i + 1\n                      } else if (currentPage >= totalPages - 2) {\n                        pageNum = totalPages - 4 + i\n                      } else {\n                        pageNum = currentPage - 2 + i\n                      }\n                      \n                      return (\n                        <button\n                          key={pageNum}\n                          className={`pagination-number ${currentPage === pageNum ? 'active' : ''}`}\n                          onClick={() => handlePageChange(pageNum)}\n                        >\n                          {pageNum}\n                        </button>\n                      )\n                    })}\n                  </div>\n                  \n                  <button \n                    className=\"pagination-btn\" \n                    onClick={() => handlePageChange(currentPage + 1)}\n                    disabled={currentPage === totalPages}\n                  >\n                    Next\n                  </button>\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n\n      {/* NFT Details Modal */}\n      {selectedNFT && (\n        <NFTDetailsModal\n          nft={selectedNFT}\n          isOpen={isModalOpen}\n          onClose={handleCloseModal}\n        />\n      )}\n    </div>\n  )\n}\n\nexport default UserProfileLookup","import React, { useState, useEffect, useCallback, useMemo } from 'react'\nimport { useWallet } from '../hooks/useWallet'\nimport { apiService } from '../services/api'\nimport { NeftyBlendService } from '../services/neftyBlendService'\nimport NFTDetailsModal from './NFTDetailsModal'\nimport UnpackModal from './UnpackModal'\nimport MediaRenderer from './MediaRenderer'\nimport { getAssetImageUrl, getAssetVideoUrl } from '../utils/mediaUtils'\nimport { useDisplaySettings } from '../hooks/useDisplaySettings'\nimport { useNotifications } from '../hooks/useNotifications'\nimport '../css/inventory-page.css'\nimport '../css/packs-page.css'\n\nexport interface PackNFT {\n  asset_id: string\n  name: string\n  img: string\n  video?: string\n  collection: {\n    name: string\n    collection_name: string\n  }\n  schema: {\n    schema_name: string\n  }\n  template: {\n    template_id: string\n    max_supply: string\n  }\n  data: Record<string, string | number | boolean | null | undefined>\n  mint_number?: number\n}\n\nconst Packs: React.FC = () => {\n  const { settings } = useDisplaySettings()\n  const { showSuccess, showError } = useNotifications()\n  \n  const [packs, setPacks] = useState<PackNFT[]>([])\n  const [loading, setLoading] = useState(false)\n  const [selectedNft, setSelectedNft] = useState<PackNFT | null>(null)\n  const [isModalOpen, setIsModalOpen] = useState(false)\n  const [selectedItems, setSelectedItems] = useState<Set<string>>(new Set())\n  const [isMultiSelectMode, setIsMultiSelectMode] = useState(false)\n  const [showUnpackModal, setShowUnpackModal] = useState(false)\n  const [searchTerm, setSearchTerm] = useState('')\n  const [debouncedSearchTerm, setDebouncedSearchTerm] = useState('')\n  const [currentPage, setCurrentPage] = useState(1)\n  const [hasMoreNFTs, setHasMoreNFTs] = useState(false)\n  const [apiPage, setApiPage] = useState(1)\n\n  const { isConnected, account, login, session } = useWallet()\n\n  const itemsPerPage = 20\n\n  // Debounce search term\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedSearchTerm(searchTerm)\n    }, 300)\n\n    return () => clearTimeout(timer)\n  }, [searchTerm])\n\n  const loadPacks = useCallback(async (page = 1, append = false) => {\n    if (!account) return\n    \n    if (page === 1) {\n      setLoading(true)\n    }\n    \n    try {\n      const response = await apiService.getUserInventoryPaginated(account, page, 100)\n      \n      // Convert API response to PackNFT format and filter for packs only\n      const allNFTs: PackNFT[] = response.assets.map(nft => ({\n        asset_id: nft.asset_id,\n        name: nft.name,\n        img: nft.image,\n        video: nft.video || (nft.traits?.video as string) || undefined,\n        collection: {\n          name: nft.collection,\n          collection_name: nft.collection\n        },\n        schema: {\n          schema_name: nft.schema\n        },\n        template: {\n          template_id: nft.template_id?.toString() || '0',\n          max_supply: (nft.max_supply || 0).toString()\n        },\n        data: nft.traits || {},\n        mint_number: nft.template_mint\n      }))\n      \n      // Filter only pack NFTs\n      const packNFTs = allNFTs.filter(nft => NeftyBlendService.isPackNFT(nft))\n      \n      if (append) {\n        setPacks(prev => [...prev, ...packNFTs])\n      } else {\n        setPacks(packNFTs)\n        setCurrentPage(1)\n      }\n      \n      setHasMoreNFTs(response.assets.length === 100)\n      setApiPage(page)\n    } catch (error) {\n      console.error('Error loading packs:', error)\n      showError('Failed to load pack inventory')\n    } finally {\n      setLoading(false)\n    }\n  }, [account, showError])\n\n  useEffect(() => {\n    if (isConnected && account) {\n      loadPacks(1, false)\n    } else {\n      setPacks([])\n    }\n  }, [isConnected, account, loadPacks])\n\n  // Filter packs based on search term\n  const filteredPacks = useMemo(() => {\n    if (!debouncedSearchTerm) return packs\n    \n    const searchLower = debouncedSearchTerm.toLowerCase()\n    return packs.filter(pack => \n      pack.name.toLowerCase().includes(searchLower) ||\n      pack.collection.collection_name.toLowerCase().includes(searchLower) ||\n      pack.schema.schema_name.toLowerCase().includes(searchLower)\n    )\n  }, [packs, debouncedSearchTerm])\n\n  // Paginate filtered packs\n  const paginatedPacks = useMemo(() => {\n    const startIndex = (currentPage - 1) * itemsPerPage\n    const endIndex = startIndex + itemsPerPage\n    return filteredPacks.slice(startIndex, endIndex)\n  }, [filteredPacks, currentPage, itemsPerPage])\n\n  const totalPages = Math.ceil(filteredPacks.length / itemsPerPage)\n  const filteredCount = filteredPacks.length\n\n  const handleNFTClick = (pack: PackNFT) => {\n    if (isMultiSelectMode) {\n      const newSelected = new Set(selectedItems)\n      if (newSelected.has(pack.asset_id)) {\n        newSelected.delete(pack.asset_id)\n      } else {\n        newSelected.add(pack.asset_id)\n      }\n      setSelectedItems(newSelected)\n    } else {\n      setSelectedNft(pack)\n      setIsModalOpen(true)\n    }\n  }\n\n  const handleBulkUnpack = () => {\n    if (selectedItems.size === 0) return\n    setShowUnpackModal(true)\n  }\n\n  const handleLoadMore = () => {\n    if (hasMoreNFTs) {\n      loadPacks(apiPage + 1, true)\n    }\n  }\n\n  const handlePageChange = (page: number) => {\n    setCurrentPage(page)\n    window.scrollTo({ top: 0, behavior: 'smooth' })\n  }\n\n  const toggleMultiSelect = () => {\n    setIsMultiSelectMode(!isMultiSelectMode)\n    setSelectedItems(new Set())\n  }\n\n  if (!isConnected) {\n    return (\n      <div className=\"page-content\">\n        <div className=\"page-header\">\n          <h1>Pack Inventory</h1>\n          <p>Manage and unpack your NFT packs</p>\n        </div>\n        <div className=\"connect-wallet-prompt\">\n          <div className=\"connect-card\">\n            <h3>Connect Your Wallet</h3>\n            <p>Connect your WAX wallet to view your pack inventory</p>\n            <button className=\"connect-btn\" onClick={login}>\n              Connect Wallet\n            </button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"page-content packs-page\">\n      <div className=\"page-header\">\n        <h1>Pack Inventory</h1>\n        <p>Manage and unpack your NFT packs, chests, boxes, and containers</p>\n      </div>\n\n      {/* Search and Controls */}\n      <div className=\"inventory-controls\">\n        <div className=\"search-container\">\n          <input\n            type=\"text\"\n            placeholder=\"Search packs...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"search-input\"\n          />\n        </div>\n        \n        <div className=\"control-buttons\">\n          <button \n            className={`multi-select-btn ${isMultiSelectMode ? 'active' : ''}`}\n            onClick={toggleMultiSelect}\n          >\n            {isMultiSelectMode ? '✓ Multi-Select' : 'Multi-Select'}\n          </button>\n          \n          {isMultiSelectMode && selectedItems.size > 0 && (\n            <button className=\"bulk-btn unpack-btn\" onClick={handleBulkUnpack}>\n              📦 Unpack ({selectedItems.size})\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Loading State */}\n      {loading && (\n        <div className=\"loading-container\">\n          <div className=\"loading-spinner\"></div>\n          <p>Loading your packs...</p>\n        </div>\n      )}\n\n      {/* Pack Grid */}\n      {!loading && (\n        <>\n          <div className=\"inventory-page-stats\">\n            <p>{filteredCount} packs found</p>\n          </div>\n          \n          {packs.length > 0 ? (\n            <>\n              <div className=\"inventory-page-grid\">\n                {paginatedPacks.map((pack) => (\n                  <div\n                    key={pack.asset_id}\n                    className={`nft-card ${\n                      isMultiSelectMode && selectedItems.has(pack.asset_id) ? 'selected' : ''\n                    }`}\n                    onClick={() => handleNFTClick(pack)}\n                  >\n                    {isMultiSelectMode && (\n                      <div className=\"selection-checkbox\">\n                        <input\n                          type=\"checkbox\"\n                          checked={selectedItems.has(pack.asset_id)}\n                          onChange={() => {}}\n                        />\n                      </div>\n                    )}\n                    \n                    <div className=\"nft-image-container\">\n                      <MediaRenderer\n                          imageUrl={getAssetImageUrl({ img: pack.img })}\n                          videoUrl={pack.video ? getAssetVideoUrl({ video: pack.video }) : undefined}\n                          alt={pack.name}\n                          className=\"w-full h-full object-cover\"\n                          controls={settings.showVideoControls}\n                          autoPlay={settings.autoPlayVideos}\n                          muted={settings.muteVideos}\n                        />\n                      \n                      <div className=\"pack-indicator\">\n                        📦 Pack\n                      </div>\n                    </div>\n                    \n                    <div className=\"nft-info\">\n                      <h3 className=\"nft-name\">{pack.name}</h3>\n                      <p className=\"nft-collection\">{typeof pack.collection === 'string' ? pack.collection : pack.collection?.collection_name || pack.collection?.name || 'Unknown'}</p>\n                      <p className=\"nft-schema\">{pack.schema.schema_name}</p>\n                      {pack.mint_number && (\n                        <p className=\"nft-mint\">Mint #{pack.mint_number}</p>\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </div>\n\n              {/* Load More Button */}\n              {hasMoreNFTs && (\n                <div className=\"load-more-container\">\n                  <button className=\"load-more-btn\" onClick={handleLoadMore}>\n                    Load More Packs\n                  </button>\n                </div>\n              )}\n\n              {/* Pagination */}\n              {totalPages > 1 && (\n                <div className=\"pagination-container\">\n                  <div className=\"pagination\">\n                    <button\n                      className=\"pagination-btn\"\n                      onClick={() => handlePageChange(currentPage - 1)}\n                      disabled={currentPage === 1}\n                    >\n                      Previous\n                    </button>\n                    \n                    {Array.from({ length: Math.min(5, totalPages) }, (_, i) => {\n                      const page = i + 1\n                      return (\n                        <button\n                          key={page}\n                          className={`pagination-btn ${currentPage === page ? 'active' : ''}`}\n                          onClick={() => handlePageChange(page)}\n                        >\n                          {page}\n                        </button>\n                      )\n                    })}\n                    \n                    <button\n                      className=\"pagination-btn\"\n                      onClick={() => handlePageChange(currentPage + 1)}\n                      disabled={currentPage === totalPages}\n                    >\n                      Next\n                    </button>\n                  </div>\n                  \n                  <div className=\"pagination-info\">\n                    Page {currentPage} of {totalPages}\n                  </div>\n                </div>\n              )}\n            </>\n          ) : (\n            <div className=\"empty-state\">\n              <div className=\"empty-icon\">📦</div>\n              <h3>No Packs Found</h3>\n              <p>You don't have any pack NFTs in your inventory yet.</p>\n              <p>Packs, chests, boxes, and containers will appear here when you acquire them.</p>\n            </div>\n          )}\n        </>\n      )}\n\n      {/* NFT Details Modal */}\n      {selectedNft && (\n        <NFTDetailsModal\n          nft={{\n            asset_id: selectedNft.asset_id,\n            name: selectedNft.name,\n            image: selectedNft.img,\n            collection: selectedNft.collection.collection_name,\n            schema: selectedNft.schema.schema_name,\n            template_mint: selectedNft.mint_number,\n            traits: selectedNft.data,\n            price: null,\n            sale_id: null,\n            seller: null\n          }}\n          isOpen={isModalOpen}\n          onClose={() => {\n            setIsModalOpen(false)\n            setSelectedNft(null)\n          }}\n        />\n      )}\n\n      {/* Unpack Modal */}\n      <UnpackModal \n        selectedNFTs={packs.filter(pack => selectedItems.has(pack.asset_id))}\n        isOpen={showUnpackModal}\n        onClose={() => {\n          setShowUnpackModal(false)\n        }}\n        userAccount={account || ''}\n        walletSession={session}\n        onUnpackComplete={() => {\n          setSelectedItems(new Set())\n          setIsMultiSelectMode(false)\n          loadPacks(1, false)\n          showSuccess('Packs unpacked successfully!')\n        }}\n      />\n    </div>\n  )\n}\n\nexport default Packs","import React, { useState, useEffect } from 'react'\nimport type { NFTAsset } from '../services/api'\nimport { priceService } from '../services/priceService'\nimport { watchlistService } from '../services/watchlistService'\n\nimport { log } from '../services/loggingService'\nimport '../css/watchlist.css'\n\ninterface WatchlistItem {\n  nft: NFTAsset\n  targetPrice?: number\n  alertType: 'below' | 'above' | 'any'\n  addedAt: number\n  lastPrice: number\n  priceChange?: number\n}\n\nconst Watchlist: React.FC = () => {\n  const [watchlistItems, setWatchlistItems] = useState<WatchlistItem[]>([])\n  const [loading, setLoading] = useState(true)\n  const [usdPrices, setUsdPrices] = useState<Record<string, string>>({})\n  const [showAddAlert, setShowAddAlert] = useState<string | null>(null)\n  const [alertPrice, setAlertPrice] = useState('')\n  const [alertType, setAlertType] = useState<'below' | 'above' | 'any'>('below')\n\n  useEffect(() => {\n    loadWatchlist()\n  }, [])\n\n  useEffect(() => {\n    const loadUsdPrices = async () => {\n      const prices: Record<string, string> = {}\n      for (const item of watchlistItems) {\n        if (item.nft.price) {\n          prices[item.nft.asset_id] = await priceService.convertWaxToUSDAsync(item.nft.price)\n        }\n      }\n      setUsdPrices(prices)\n    }\n    \n    if (watchlistItems.length > 0) {\n      loadUsdPrices()\n    }\n  }, [watchlistItems])\n\n  const loadWatchlist = async () => {\n    try {\n      setLoading(true)\n      const items = await watchlistService.getWatchlist()\n      setWatchlistItems(items)\n    } catch (error) {\n      log.error('Error loading watchlist', 'Watchlist', error as Error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const removeFromWatchlist = async (assetId: string) => {\n    try {\n      await watchlistService.removeFromWatchlist(assetId)\n      setWatchlistItems(prev => prev.filter(item => item.nft.asset_id !== assetId))\n    } catch (error) {\n      log.error('Error removing from watchlist', 'Watchlist', error as Error)\n    }\n  }\n\n  const addPriceAlert = async (assetId: string) => {\n    if (!alertPrice) return\n    \n    try {\n      await watchlistService.setPriceAlert(assetId, {\n        targetPrice: parseFloat(alertPrice),\n        alertType,\n        enabled: true\n      })\n      \n      // Update local state\n      setWatchlistItems(prev => prev.map(item => \n        item.nft.asset_id === assetId \n          ? { ...item, targetPrice: parseFloat(alertPrice), alertType }\n          : item\n      ))\n      \n      setShowAddAlert(null)\n      setAlertPrice('')\n    } catch (error) {\n      log.error('Error adding price alert', 'Watchlist', error as Error)\n    }\n  }\n\n  const removePriceAlert = async (assetId: string) => {\n    try {\n      await watchlistService.removePriceAlert(assetId)\n      setWatchlistItems(prev => prev.map(item => \n        item.nft.asset_id === assetId \n          ? { ...item, targetPrice: undefined, alertType: 'any' }\n          : item\n      ))\n    } catch (error) {\n      log.error('Error removing price alert', 'Watchlist', error as Error)\n    }\n  }\n\n  const getPriceChangeColor = (change?: number) => {\n    if (!change) return 'var(--text-secondary)'\n    return change > 0 ? 'var(--success-color)' : 'var(--error-color)'\n  }\n\n  const getPriceChangeIcon = (change?: number) => {\n    if (!change) return ''\n    return change > 0 ? '↗' : '↘'\n  }\n\n  if (loading) {\n    return (\n      <div className=\"watchlist-container\">\n        <div className=\"watchlist-loading\">\n          <div className=\"loading-spinner\"></div>\n          <p>Loading your watchlist...</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"watchlist-container\">\n      <div className=\"watchlist-header\">\n        <h1>My Watchlist</h1>\n        <p className=\"watchlist-subtitle\">\n          Track your favorite NFTs and get notified when prices change\n        </p>\n      </div>\n\n      {watchlistItems.length === 0 ? (\n        <div className=\"watchlist-empty\">\n          <div className=\"empty-icon\">👁️</div>\n          <h3>Your watchlist is empty</h3>\n          <p>Add NFTs to your watchlist from the marketplace to track their prices</p>\n          <a href=\"/marketplace\" className=\"btn-primary\">\n            Browse Marketplace\n          </a>\n        </div>\n      ) : (\n        <div className=\"watchlist-grid\">\n          {watchlistItems.map((item) => (\n            <div key={item.nft.asset_id} className=\"watchlist-card\">\n              <div className=\"watchlist-card-image\">\n                <img \n                  src={item.nft.image} \n                  alt={item.nft.name}\n                  onError={(e) => {\n                    const target = e.target as HTMLImageElement\n                    target.src = 'https://pixeljourney.xyz/img/toppixals/10.webp'\n                  }}\n                />\n                {item.targetPrice && (\n                  <div className=\"alert-badge\">\n                    <span className=\"alert-icon\">🔔</span>\n                  </div>\n                )}\n              </div>\n              \n              <div className=\"watchlist-card-content\">\n                <h3 className=\"nft-name\">{item.nft.name}</h3>\n                <p className=\"nft-collection\">{item.nft.collection}</p>\n                \n                <div className=\"price-info\">\n                  <div className=\"current-price\">\n                    <span className=\"price-label\">Current Price:</span>\n                    <div className=\"price-values\">\n                      <span className=\"wax-price\">{item.nft.price} WAX</span>\n                      {usdPrices[item.nft.asset_id] && (\n                        <span className=\"usd-price\">${usdPrices[item.nft.asset_id]}</span>\n                      )}\n                    </div>\n                  </div>\n                  \n                  {item.priceChange !== undefined && (\n                    <div className=\"price-change\" style={{ color: getPriceChangeColor(item.priceChange) }}>\n                      <span className=\"change-icon\">{getPriceChangeIcon(item.priceChange)}</span>\n                      <span>{Math.abs(item.priceChange).toFixed(2)}%</span>\n                    </div>\n                  )}\n                </div>\n                \n                {item.targetPrice && (\n                  <div className=\"price-alert-info\">\n                    <span className=\"alert-label\">Alert when price is {item.alertType}:</span>\n                    <span className=\"alert-price\">{item.targetPrice} WAX</span>\n                  </div>\n                )}\n                \n                <div className=\"watchlist-actions\">\n                  {item.targetPrice ? (\n                    <button \n                      className=\"btn-secondary btn-sm\"\n                      onClick={() => removePriceAlert(item.nft.asset_id)}\n                    >\n                      Remove Alert\n                    </button>\n                  ) : (\n                    <button \n                      className=\"btn-primary btn-sm\"\n                      onClick={() => setShowAddAlert(item.nft.asset_id)}\n                    >\n                      Add Price Alert\n                    </button>\n                  )}\n                  \n                  <button \n                    className=\"btn-danger btn-sm\"\n                    onClick={() => removeFromWatchlist(item.nft.asset_id)}\n                  >\n                    Remove\n                  </button>\n                </div>\n              </div>\n              \n              {showAddAlert === item.nft.asset_id && (\n                <div className=\"price-alert-form\">\n                  <h4>Set Price Alert</h4>\n                  <div className=\"form-group\">\n                    <label>Alert Type:</label>\n                    <select \n                      value={alertType} \n                      onChange={(e) => setAlertType(e.target.value as 'below' | 'above' | 'any')}\n                    >\n                      <option value=\"below\">Price drops below</option>\n                      <option value=\"above\">Price rises above</option>\n                      <option value=\"any\">Any price change</option>\n                    </select>\n                  </div>\n                  \n                  {alertType !== 'any' && (\n                    <div className=\"form-group\">\n                      <label>Target Price (WAX):</label>\n                      <input \n                        type=\"number\" \n                        step=\"0.01\" \n                        value={alertPrice}\n                        onChange={(e) => setAlertPrice(e.target.value)}\n                        placeholder=\"Enter price in WAX\"\n                      />\n                    </div>\n                  )}\n                  \n                  <div className=\"form-actions\">\n                    <button \n                      className=\"btn-primary btn-sm\"\n                      onClick={() => addPriceAlert(item.nft.asset_id)}\n                      disabled={alertType !== 'any' && !alertPrice}\n                    >\n                      Set Alert\n                    </button>\n                    <button \n                      className=\"btn-secondary btn-sm\"\n                      onClick={() => setShowAddAlert(null)}\n                    >\n                      Cancel\n                    </button>\n                  </div>\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default Watchlist","import React from 'react'\nimport { Link } from 'react-router-dom'\n\nconst Footer: React.FC = () => {\n  const links = [\n    {\n      title: 'Pixel Journey',\n      url: 'https://pixeljourney.xyz',\n      icon: (\n        <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n          <circle cx=\"12\" cy=\"12\" r=\"10\"/>\n          <path d=\"M8 14s1.5 2 4 2 4-2 4-2\"/>\n          <line x1=\"9\" y1=\"9\" x2=\"9.01\" y2=\"9\"/>\n          <line x1=\"15\" y1=\"9\" x2=\"15.01\" y2=\"9\"/>\n        </svg>\n      )\n    },\n    {\n      title: 'Documentation',\n      url: 'https://docs.pixeljourney.xyz',\n      icon: (\n        <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n          <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"/>\n          <polyline points=\"14,2 14,8 20,8\"/>\n          <line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\"/>\n          <line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\"/>\n          <polyline points=\"10,9 9,9 8,9\"/>\n        </svg>\n      )\n    },\n    {\n      title: 'Discord',\n      url: 'http://discord.gg/pixel-journey-1130670500776005734',\n      icon: (\n        <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n          <path d=\"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z\"/>\n        </svg>\n      )\n    },\n    {\n      title: 'Twitter/X',\n      url: 'https://x.com/PXJourney',\n      icon: (\n        <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n          <path d=\"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z\"/>\n        </svg>\n      )\n    },\n\n  ]\n\n\n\n  return (\n    <footer className=\"footer\">\n      <div className=\"footer-container\">\n        <div className=\"footer-content\">\n          {/* Brand Section - Left */}\n          <div className=\"footer-brand\">\n            <a href=\"https://pixeljourney.xyz\" className=\"footer-logo\" target=\"_blank\" rel=\"noopener noreferrer\">\n              <img \n                src=\"https://pixeljourney.xyz/img/logo.png\" \n                alt=\"Pixel Journey\" \n                className=\"footer-logo-image\"\n              />\n              <span className=\"footer-logo-text\">Pixel Journey</span>\n            </a>\n            <p className=\"footer-description\">\n              Explore the Pixel Journey ecosystem - a comprehensive NFT marketplace \n              and gaming platform across multiple blockchains.\n            </p>\n          </div>\n\n          {/* PXJourney across Web3 - Center */}\n          <div className=\"footer-section footer-center\">\n            <h3 className=\"footer-section-title\">PXJourney across Web3</h3>\n            <div className=\"blockchain-grid\">\n              <a href=\"https://opensea.io/collection/pixeljourney-eth\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"blockchain-item\">\n                <img src=\"https://pixeljourney.xyz/img/blockchain-icons/ethereum.svg\" alt=\"Ethereum\" className=\"blockchain-logo\" />\n                <span className=\"blockchain-name\">Ethereum</span>\n              </a>\n              <a href=\"https://opensea.io/collection/pixeljourney-polygon\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"blockchain-item\">\n                <img src=\"https://pixeljourney.xyz/img/blockchain-icons/polygon.jpeg\" alt=\"Polygon\" className=\"blockchain-logo\" />\n                <span className=\"blockchain-name\">Polygon</span>\n              </a>\n              <a href=\"https://opensea.io/collection/pixeljourney-base\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"blockchain-item\">\n                <img src=\"https://pixeljourney.xyz/img/blockchain-icons/base.jpg\" alt=\"Base\" className=\"blockchain-logo\" />\n                <span className=\"blockchain-name\">Base</span>\n              </a>\n              <a href=\"https://nft.monbase.com/collections/66c4eb2ca339b05c5a660e44/detail\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"blockchain-item\">\n                <img src=\"https://pixeljourney.xyz/img/blockchain-icons/BSC.png\" alt=\"BNB Chain\" className=\"blockchain-logo\" />\n                <span className=\"blockchain-name\">BNB Chain</span>\n              </a>\n            </div>\n            <div className=\"bridge-section\">\n              <a href=\"https://bridge.mycloudwallet.com/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"bridge-link\">\n                Bridge Now\n              </a>\n            </div>\n          </div>\n\n          {/* PXJourney across WAX - New Section */}\n          <div className=\"footer-section footer-wax\">\n            <h3 className=\"footer-section-title\">\n              <a href=\"https://wax.io/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"wax-title-link\">\n                PXJourney across WAX\n              </a>\n            </h3>\n            <div className=\"wax-dapps-grid\">\n              <a href=\"https://market.pixeljourney.xyz\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"wax-dapp-item purple-glow\">\n                <span className=\"dapp-icon\">🛍️</span>\n                <span className=\"dapp-name\">PxMarket</span>\n              </a>\n              <a href=\"https://stake.pixeljourney.xyz\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"wax-dapp-item green-glow\">\n                <span className=\"dapp-icon\">🧑‍🌾</span>\n                <span className=\"dapp-name\">PxStaking</span>\n              </a>\n              <a href=\"https://lb.pixeljourney.xyz\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"wax-dapp-item golden-glow\">\n                <span className=\"dapp-icon\">🏆</span>\n                <span className=\"dapp-name\">PxLeaderboards</span>\n              </a>\n              <Link to=\"/pxcrafting\" className=\"wax-dapp-item craft-glow\">\n                <span className=\"dapp-icon\">♻️</span>\n                <span className=\"dapp-name\">PxCraft</span>\n              </Link>\n            </div>\n            <div className=\"journey-section\">\n              <Link to=\"/journeymap\" className=\"journey-link\">\n                Journey Map\n              </Link>\n            </div>\n          </div>\n\n          {/* Quick Links - Right */}\n          <div className=\"footer-section footer-right\">\n            <h4 className=\"footer-title\">Quick Links</h4>\n            <div className=\"footer-links\">\n              {links.map((link, index) => (\n                <a \n                  key={index}\n                  href={link.url}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"footer-link\"\n                >\n                  <span className=\"footer-link-icon\">{link.icon}</span>\n                  {link.title}\n                </a>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* Footer Bottom */}\n        <div className=\"footer-bottom\">\n          <div className=\"footer-bottom-content\">\n            <p className=\"footer-copyright\">\n              © 2025 Pixel Journey. All rights reserved.\n            </p>\n            <div className=\"footer-bottom-links\">\n              <span className=\"footer-note\">\n                Requires a Pixal PFP to unlock full market access\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </footer>\n  )\n}\n\nexport default Footer","import React, { useState, useEffect, useCallback } from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport { apiService } from '../services/api'\nimport type { CollectionData } from '../services/api'\nimport MediaRenderer from './MediaRenderer'\nimport { useDisplaySettings } from '../hooks/useDisplaySettings'\nimport { formatWAXPrice } from '../utils/formatUtils'\nimport '../css/activity-stats.css'\n\ninterface Sale {\n  sale_id: string\n  asset_id: string\n  collection_name: string\n  schema_name: string\n  template_id: string\n  asset_name: string\n  seller: string\n  buyer: string\n  price: string\n  updated_at_time: string\n  state: number\n  image?: string\n  video?: string\n}\n\n\n\ninterface CollectionStats {\n  collection_name: string\n  assets: string\n  burned: string\n  templates: string\n  schemas: string\n  volume: string\n  sales: string\n  floor_price: string\n}\n\ninterface MarketStats {\n  total_sales: string\n  total_volume: string\n  total_assets: string\n  active_listings: string\n}\n\ninterface NFTTradingStats {\n  dailyVolume: string\n  dailySales: number\n  totalTransactions: number\n  activeListings: number\n  averagePrice: string\n  topCollectionsByVolume: TopCollection[]\n}\n\ninterface TopCollection {\n  collection_name: string\n  volume_24h: string\n  sales_24h: number\n  floor_price: string\n  assets_count: string\n}\n\ninterface RecentTrade {\n  sale_id: string\n  collection_name: string\n  asset_name: string\n  price: string\n  buyer: string\n  seller: string\n  timestamp: string\n}\n\nconst ActivityStats: React.FC = React.memo(() => {\n  const navigate = useNavigate()\n  const { settings } = useDisplaySettings()\n  const [activeTab, setActiveTab] = useState<'activity' | 'stats'>('activity')\n  const [recentSales, setRecentSales] = useState<Sale[]>([])\n  const [collectionStats, setCollectionStats] = useState<CollectionStats[]>([])\n  const [marketStats, setMarketStats] = useState<MarketStats | null>(null)\n  const [nftTradingStats, setNftTradingStats] = useState<NFTTradingStats | null>(null)\n  const [recentTrades, setRecentTrades] = useState<RecentTrade[]>([])\n  const [topCollections, setTopCollections] = useState<TopCollection[]>([])\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [refreshing, setRefreshing] = useState(false)\n\n  const loadActivityData = async () => {\n    try {\n      setLoading(true)\n      setError(null)\n      \n      // Fetch recent sales using API service\n      const salesData = await apiService.getRecentSales(50)\n      setRecentSales(salesData.map(sale => {\n        const asset = sale.assets[0]\n        return {\n          sale_id: sale.sale_id,\n          asset_id: asset?.asset_id || '',\n          collection_name: asset?.collection?.collection_name || '',\n          schema_name: asset?.schema?.schema_name || '',\n          template_id: asset?.template?.template_id || '',\n          asset_name: asset?.name || '',\n          seller: sale.seller || '',\n          buyer: sale.buyer || '',\n          price: sale.listing_price || '0',\n          updated_at_time: sale.updated_at_time || '',\n          state: sale.state || 0,\n          image: asset?.data?.img as string || undefined,\n          video: asset?.data?.video as string || undefined\n        }\n      }))\n    } catch (err) {\n      console.error('Error loading activity data:', err)\n      setError('Failed to load activity data')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const loadStatsData = async () => {\n    try {\n      setLoading(true)\n      setError(null)\n      \n      // Fetch collections using API service\n      const collectionsData = await apiService.getCollections({ limit: 20, whitelistOnly: true })\n      \n      if (collectionsData.length > 0) {\n        // Get market stats for each collection\n        const statsPromises = collectionsData.slice(0, 10).map(async (collection: CollectionData) => {\n          try {\n            const marketData = await apiService.getCollectionStats(collection.collection_name)\n            \n            return {\n              collection_name: collection.collection_name,\n              assets: '0', // CollectionData doesn't have assets count, would need separate API call\n              burned: '0', // CollectionData doesn't have burned count, would need separate API call\n              templates: '0', // CollectionData doesn't have templates count, would need separate API call\n              schemas: '0', // CollectionData doesn't have schemas count, would need separate API call\n              volume: marketData?.volume || '0',\n              sales: marketData?.sales || '0',\n              floor_price: marketData?.floor || '0'\n            }\n          } catch {\n            return {\n              collection_name: collection.collection_name,\n              assets: '0',\n              burned: '0',\n              templates: '0',\n              schemas: '0',\n              volume: '0',\n              sales: '0',\n              floor_price: '0'\n            }\n          }\n        })\n        \n        const stats = await Promise.all(statsPromises)\n        setCollectionStats(stats)\n      }\n      \n      // Fetch overall market stats using API service\n      const latestData = await apiService.getMarketStats()\n      \n      if (latestData && latestData.results && latestData.results.length > 0) {\n        const latestResult = latestData.results[latestData.results.length - 1]\n        setMarketStats({\n          total_sales: latestResult.sales || '0',\n          total_volume: latestResult.volume || '0',\n          total_assets: '0', // This would need a separate API call\n          active_listings: '0' // This would need a separate API call\n        })\n      }\n      \n      // Load NFT Trading data from AtomicAssets API\n      const [nftStats, topCollectionsData, recentTrades] = await Promise.all([\n        apiService.getNFTTradingStats(),\n        apiService.getTopCollectionsByVolume(10),\n        apiService.getRecentNFTTrades(20)\n      ])\n      \n      if (nftStats) {\n        setNftTradingStats({\n          dailyVolume: nftStats.dailyVolume || '0',\n          dailySales: nftStats.dailySales || 0,\n          totalTransactions: nftStats.totalTransactions || 0,\n          activeListings: nftStats.activeListings || 0,\n          averagePrice: nftStats.averagePrice || '0',\n          topCollectionsByVolume: topCollectionsData.map(col => ({\n            collection_name: col.collection_name,\n            volume_24h: '0',\n            sales_24h: 0,\n            floor_price: '0',\n            assets_count: '0'\n          }))\n        })\n      }\n      setTopCollections(topCollectionsData.map(col => ({\n        collection_name: col.collection_name,\n        volume_24h: '0',\n        sales_24h: 0,\n        floor_price: '0',\n        assets_count: '0'\n      })) || [])\n      setRecentTrades((recentTrades || []).map(trade => ({\n        sale_id: trade.sale_id,\n        collection_name: trade.collection_name || '',\n        asset_name: String(trade.assets?.[0]?.data?.name || trade.assets?.[0]?.template?.immutable_data?.name || 'Unknown Asset'),\n        price: String(trade.listing_price || trade.price?.amount || '0'),\n        buyer: trade.buyer || '',\n        seller: trade.seller || '',\n        timestamp: trade.updated_at_time || ''\n      })))\n      \n    } catch (err) {\n      console.error('Error loading stats data:', err)\n      setError('Failed to load statistics data')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleRefresh = useCallback(async () => {\n    setRefreshing(true)\n    if (activeTab === 'activity') {\n      await loadActivityData()\n    } else {\n      await loadStatsData()\n    }\n    setRefreshing(false)\n  }, [activeTab])\n\n  const handleUserClick = useCallback((user: string) => {\n    navigate(`/user-profile-lookup?user=${encodeURIComponent(user)}`)\n  }, [navigate])\n\n  const handleAssetClick = useCallback((assetId: string) => {\n    navigate(`/assets/${assetId}`)\n  }, [navigate])\n\n  const handleCollectionClick = useCallback((collectionName: string) => {\n    navigate(`/collections/${encodeURIComponent(collectionName)}`)\n  }, [navigate])\n\n  const handleSaleClick = useCallback((saleId: string) => {\n    // For now, navigate to listing details. In the future, this could be transaction details\n    navigate(`/listings/${saleId}`)\n  }, [navigate])\n\n  const handleTradeClick = useCallback((saleId: string) => {\n    // Navigate to transaction details if we have a transaction ID, otherwise to listing\n    navigate(`/listings/${saleId}`)\n  }, [navigate])\n\n  useEffect(() => {\n    if (activeTab === 'activity') {\n      loadActivityData()\n    } else {\n      loadStatsData()\n    }\n  }, [activeTab])\n\n  const formatPrice = (price: string) => {\n    // If price is already formatted (contains WAX), return as is\n    if (typeof price === 'string' && price.includes('WAX')) {\n      return price\n    }\n    // Otherwise, handle raw price data\n    const numPrice = parseFloat(price) / 100000000\n    return formatWAXPrice(numPrice)\n  }\n\n  const formatNumber = (num: string) => {\n    const number = parseInt(num)\n    if (number >= 1000000) {\n      return `${(number / 1000000).toFixed(1)}M`\n    } else if (number >= 1000) {\n      return `${(number / 1000).toFixed(1)}K`\n    }\n    return number.toString()\n  }\n\n  const formatDate = (timestamp: string) => {\n    const date = new Date(parseInt(timestamp) * 1000)\n    return date.toLocaleString()\n  }\n\n  return (\n    <div className=\"activity-stats-page\">\n      <div className=\"activity-stats-header\">\n        <h1 className=\"activity-stats-title\">Market Activity & Statistics</h1>\n        <p className=\"activity-stats-subtitle\">Real-time marketplace data and analytics</p>\n      </div>\n\n      <div className=\"activity-stats-tabs\">\n        <button \n          className={`tab-btn ${activeTab === 'activity' ? 'active' : ''}`}\n          onClick={() => setActiveTab('activity')}\n        >\n          <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n            <path d=\"M3 3v18h18\"></path>\n            <path d=\"M7 12l4-4 4 4 6-6\"></path>\n          </svg>\n          Activity Feed\n        </button>\n        <button \n          className={`tab-btn ${activeTab === 'stats' ? 'active' : ''}`}\n          onClick={() => setActiveTab('stats')}\n        >\n          <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n            <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\n            <line x1=\"9\" y1=\"9\" x2=\"9\" y2=\"15\"></line>\n            <line x1=\"15\" y1=\"11\" x2=\"15\" y2=\"15\"></line>\n          </svg>\n          Statistics\n        </button>\n        \n        <button \n          className={`refresh-btn ${refreshing ? 'refreshing' : ''}`}\n          onClick={handleRefresh}\n          disabled={refreshing}\n        >\n          <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n            <polyline points=\"23 4 23 10 17 10\"></polyline>\n            <polyline points=\"1 20 1 14 7 14\"></polyline>\n            <path d=\"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15\"></path>\n          </svg>\n          {refreshing ? 'Refreshing...' : 'Refresh'}\n        </button>\n      </div>\n\n      {error && (\n        <div className=\"error-message\">\n          <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n            <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n            <line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line>\n            <line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line>\n          </svg>\n          {error}\n        </div>\n      )}\n\n      {activeTab === 'activity' && (\n        <div className=\"activity-content\">\n          <div className=\"section-header\">\n            <h2>Recent Sales</h2>\n            <p>Latest NFT sales across all collections</p>\n          </div>\n          \n          {loading ? (\n            <div className=\"loading-state\">\n              <div className=\"spinner\"></div>\n              <p>Loading recent sales...</p>\n            </div>\n          ) : (\n            <div className=\"sales-feed\">\n              {recentSales.map((sale) => (\n                <div key={sale.sale_id} className=\"sale-item clickable-sale\" onClick={() => handleSaleClick(sale.sale_id)}>\n                  <div className=\"sale-media\">\n                    <MediaRenderer\n                      imageUrl={sale.image}\n                      videoUrl={sale.video}\n                      alt={sale.asset_name || `Asset #${sale.asset_id}`}\n                      className=\"sale-image\"\n                      enableAnimations={settings.enableAnimatedNFTs}\n                    />\n                  </div>\n                  <div className=\"sale-info\">\n                    <div className=\"sale-asset\">\n                      <h4 \n                        className=\"clickable-asset-name\"\n                        onClick={(e) => {\n                          e.stopPropagation()\n                          handleAssetClick(sale.asset_id)\n                        }}\n                      >\n                        {sale.asset_name || `Asset #${sale.asset_id}`}\n                      </h4>\n                      <p \n                        className=\"sale-collection clickable-collection\"\n                        onClick={(e) => {\n                          e.stopPropagation()\n                          handleCollectionClick(sale.collection_name)\n                        }}\n                      >\n                        {sale.collection_name}\n                      </p>\n                    </div>\n                    <div className=\"sale-details\">\n                      <div className=\"sale-price\">{formatPrice(sale.price)}</div>\n                      <div className=\"sale-time\">{formatDate(sale.updated_at_time)}</div>\n                      <div className=\"sale-status\">\n                        {sale.state === 3 ? (\n                          <span className=\"status-sold\">✅ Sold</span>\n                        ) : sale.state === 2 ? (\n                          <span className=\"status-canceled\">❌ Canceled</span>\n                        ) : sale.state === 1 ? (\n                          <span className=\"status-active\">🔄 Active</span>\n                        ) : (\n                          <span className=\"status-active\">🔄 Active</span>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"sale-parties\">\n                    <div className=\"sale-party\">\n                      <span className=\"party-label\">Seller:</span>\n                      <span \n                        className=\"party-name clickable\" \n                        onClick={(e) => {\n                          e.stopPropagation()\n                          handleUserClick(sale.seller)\n                        }}\n                      >\n                        {sale.seller}\n                      </span>\n                    </div>\n                    <div className=\"sale-party\">\n                      <span className=\"party-label\">Buyer:</span>\n                      <span \n                        className=\"party-name clickable\" \n                        onClick={(e) => {\n                          e.stopPropagation()\n                          handleUserClick(sale.buyer)\n                        }}\n                      >\n                        {sale.buyer}\n                      </span>\n                    </div>\n                    <div className=\"sale-party\">\n                      <span className=\"party-label\">Sale ID:</span>\n                      <span \n                        className=\"sale-id-link clickable\" \n                        onClick={(e) => {\n                          e.stopPropagation()\n                          handleSaleClick(sale.sale_id)\n                        }}\n                        title=\"View sale details\"\n                      >\n                        {sale.sale_id.slice(0, 8)}...\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              ))}\n              \n              {recentSales.length === 0 && !loading && (\n                <div className=\"empty-state\">\n                  <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                    <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n                    <path d=\"M12 6v6l4 2\"></path>\n                  </svg>\n                  <h3>No recent sales</h3>\n                  <p>No sales data available at the moment</p>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      )}\n\n      {activeTab === 'stats' && (\n        <div className=\"stats-content\">\n          {marketStats && (\n            <div className=\"market-overview\">\n              <h2>Market Overview</h2>\n              <div className=\"stats-grid\">\n                <div className=\"stat-card\">\n                  <div className=\"stat-value\">{formatNumber(marketStats.total_sales)}</div>\n                  <div className=\"stat-label\">Total Sales</div>\n                </div>\n                <div className=\"stat-card\">\n                  <div className=\"stat-value\">{formatPrice(marketStats.total_volume)}</div>\n                  <div className=\"stat-label\">Total Volume</div>\n                </div>\n                <div className=\"stat-card\">\n                  <div className=\"stat-value\">{formatNumber(marketStats.total_assets)}</div>\n                  <div className=\"stat-label\">Total Assets</div>\n                </div>\n                <div className=\"stat-card\">\n                  <div className=\"stat-value\">{formatNumber(marketStats.active_listings)}</div>\n                  <div className=\"stat-label\">Active Listings</div>\n                </div>\n              </div>\n            </div>\n          )}\n          \n          {/* WAX NFT Trading Data */}\n          {nftTradingStats && (\n            <div className=\"nft-trading-stats-section\">\n              <h2>WAX NFT Trading Data</h2>\n              <div className=\"nft-stats-grid\">\n                <div className=\"stat-card nft-card\">\n                  <div className=\"stat-value\">{nftTradingStats.dailyVolume} WAX</div>\n                  <div className=\"stat-label\">24h Trading Volume</div>\n                </div>\n                <div className=\"stat-card nft-card\">\n                  <div className=\"stat-value\">{formatNumber(nftTradingStats.dailySales.toString())}</div>\n                  <div className=\"stat-label\">24h Sales</div>\n                </div>\n                <div className=\"stat-card nft-card\">\n                  <div className=\"stat-value\">{formatNumber(nftTradingStats.activeListings.toString())}</div>\n                  <div className=\"stat-label\">Active Listings</div>\n                </div>\n                <div className=\"stat-card nft-card\">\n                  <div className=\"stat-value\">{nftTradingStats.averagePrice} WAX</div>\n                  <div className=\"stat-label\">Average Sale Price</div>\n                </div>\n              </div>\n              \n              {/* Top Collections Section */}\n              {topCollections.length > 0 && (\n                <div className=\"top-collections-section\">\n                  <h3>Top Collections by Volume</h3>\n                  <div className=\"top-collections-grid\">\n                    {topCollections.slice(0, 6).map((collection) => (\n                      <div key={collection.collection_name} className=\"collection-card\">\n                        <div className=\"collection-name\">{collection.collection_name}</div>\n                        <div className=\"collection-volume\">{collection.volume_24h} WAX</div>\n                        <div className=\"collection-sales\">{collection.sales_24h} sales</div>\n                        <div className=\"collection-floor\">Floor: {collection.floor_price} WAX</div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n              \n              {/* Recent Trades Section */}\n              {recentTrades.length > 0 && (\n                <div className=\"recent-trades-section\">\n                  <h3>Recent NFT Trades</h3>\n                  <div className=\"recent-trades-list\">\n                    {recentTrades.slice(0, 8).map((trade) => (\n                      <div key={trade.sale_id} className=\"trade-item clickable-trade\" onClick={() => handleTradeClick(trade.sale_id)}>\n                        <div className=\"trade-asset\">\n                          <span \n                            className=\"asset-name clickable-asset-name\"\n                            onClick={(e) => {\n                              e.stopPropagation()\n                              // Note: We don't have asset_id in trade object, so we'll navigate to the sale for now\n                              handleTradeClick(trade.sale_id)\n                            }}\n                          >\n                            {trade.asset_name}\n                          </span>\n                          <span \n                            className=\"collection-name clickable-collection\"\n                            onClick={(e) => {\n                              e.stopPropagation()\n                              handleCollectionClick(trade.collection_name)\n                            }}\n                          >\n                            {trade.collection_name}\n                          </span>\n                        </div>\n                        <div className=\"trade-price\">{trade.price} WAX</div>\n                        <div className=\"trade-time\">{formatDate(trade.timestamp)}</div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n          \n          <div className=\"section-header\">\n            <h2>Collection Statistics</h2>\n            <p>Performance metrics for top collections</p>\n          </div>\n          \n          {loading ? (\n            <div className=\"loading-state\">\n              <div className=\"spinner\"></div>\n              <p>Loading collection statistics...</p>\n            </div>\n          ) : (\n            <div className=\"collections-table\">\n              <div className=\"table-header\">\n                <div className=\"table-cell\">Collection</div>\n                <div className=\"table-cell\">Assets</div>\n                <div className=\"table-cell\">Volume</div>\n                <div className=\"table-cell\">Sales</div>\n                <div className=\"table-cell\">Floor Price</div>\n              </div>\n              \n              {collectionStats.map((collection) => (\n                <div key={collection.collection_name} className=\"table-row\">\n                  <div className=\"table-cell collection-name\">{collection.collection_name}</div>\n                  <div className=\"table-cell\">{formatNumber(collection.assets)}</div>\n                  <div className=\"table-cell\">{formatPrice(collection.volume)}</div>\n                  <div className=\"table-cell\">{formatNumber(collection.sales)}</div>\n                  <div className=\"table-cell\">{formatPrice(collection.floor_price)}</div>\n                </div>\n              ))}\n              \n              {collectionStats.length === 0 && !loading && (\n                <div className=\"empty-state\">\n                  <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                    <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\n                    <line x1=\"9\" y1=\"9\" x2=\"9\" y2=\"15\"></line>\n                    <line x1=\"15\" y1=\"11\" x2=\"15\" y2=\"15\"></line>\n                  </svg>\n                  <h3>No statistics available</h3>\n                  <p>Statistics data is currently unavailable</p>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  )\n})\n\nActivityStats.displayName = 'ActivityStats'\n\nexport default ActivityStats","// Real-time auction service for AtomicMarket integration\nimport { ErrorMessageService } from './errorMessageService'\nimport { apiService } from './api'\nimport { logger } from './loggingService'\nimport { API_ENDPOINTS } from '../config/marketplaceConfig'\n\nexport interface AuctionBid {\n  bidder: string\n  bid_amount: string\n  timestamp: string\n  transaction_id?: string\n}\n\nexport interface AuctionUpdate {\n  auction_id: string\n  current_bid?: string\n  bidder?: string\n  end_time: string\n  status: 'active' | 'ended' | 'cancelled'\n  bid_count: number\n  last_bid_time?: string\n}\n\nexport interface AuctionSubscription {\n  auction_id: string\n  callback: (update: AuctionUpdate) => void\n}\n\nclass AuctionService {\n  private subscriptions: Map<string, AuctionSubscription[]> = new Map()\n  private pollInterval: NodeJS.Timeout | null = null\n  private isPolling = false\n  private readonly POLL_INTERVAL = 30000 // 30 seconds - reduced frequency\n  private readonly MAX_REQUESTS_PER_MINUTE = 30\n  private readonly REQUEST_DELAY = 2000 // 2 seconds between requests\n  private lastRequestTime = 0\n  private requestCount = 0\n  private requestResetTime = Date.now() + 60000\n  private auctionCache: Map<string, { data: AuctionUpdate; timestamp: number }> = new Map()\n  private readonly CACHE_DURATION = 15000 // 15 seconds cache\n\n  // Subscribe to auction updates\n  subscribe(auctionId: string, callback: (update: AuctionUpdate) => void): () => void {\n    if (!this.subscriptions.has(auctionId)) {\n      this.subscriptions.set(auctionId, [])\n    }\n    \n    const subscription: AuctionSubscription = { auction_id: auctionId, callback }\n    this.subscriptions.get(auctionId)!.push(subscription)\n    \n    // Start polling if not already started\n    this.startPolling()\n    \n    // Return unsubscribe function\n    return () => {\n      const subs = this.subscriptions.get(auctionId)\n      if (subs) {\n        const index = subs.indexOf(subscription)\n        if (index > -1) {\n          subs.splice(index, 1)\n        }\n        \n        // Remove auction from subscriptions if no more subscribers\n        if (subs.length === 0) {\n          this.subscriptions.delete(auctionId)\n        }\n      }\n      \n      // Stop polling if no more subscriptions\n      if (this.subscriptions.size === 0) {\n        this.stopPolling()\n      }\n    }\n  }\n\n  // Start polling for auction updates\n  private startPolling(): void {\n    if (this.isPolling) return\n    \n    this.isPolling = true\n    this.pollInterval = setInterval(() => {\n      this.pollAuctionUpdates()\n    }, this.POLL_INTERVAL)\n  }\n\n  // Stop polling\n  private stopPolling(): void {\n    if (this.pollInterval) {\n      clearInterval(this.pollInterval)\n      this.pollInterval = null\n    }\n    this.isPolling = false\n  }\n\n  // Poll for auction updates\n  private async pollAuctionUpdates(): Promise<void> {\n    const auctionIds = Array.from(this.subscriptions.keys())\n    \n    if (auctionIds.length === 0) {\n      this.stopPolling()\n      return\n    }\n\n    try {\n      // Clear expired cache entries periodically\n      this.clearExpiredCache()\n      \n      // Fetch updates for all subscribed auctions\n      const updates = await this.fetchAuctionUpdates(auctionIds)\n      \n      // Notify subscribers\n      updates.forEach(update => {\n        const subscribers = this.subscriptions.get(update.auction_id)\n        if (subscribers) {\n          subscribers.forEach(sub => {\n            try {\n              sub.callback(update)\n            } catch (error) {\n              ErrorMessageService.logError('AuctionService.pollAuctionUpdates.callback', error, {\n                auctionId: update.auction_id\n              })\n            }\n          })\n        }\n      })\n    } catch (error) {\n      ErrorMessageService.logError('AuctionService.pollAuctionUpdates', error, {\n        auctionIds\n      })\n    }\n  }\n\n  // Fetch auction updates from API with rate limiting and caching\n  private async fetchAuctionUpdates(auctionIds: string[]): Promise<AuctionUpdate[]> {\n    const updates: AuctionUpdate[] = []\n    const now = Date.now()\n    \n    // Reset request count if minute has passed\n    if (now > this.requestResetTime) {\n      this.requestCount = 0\n      this.requestResetTime = now + 60000\n    }\n    \n    for (const auctionId of auctionIds) {\n      // Check cache first\n      const cached = this.auctionCache.get(auctionId)\n      if (cached && (now - cached.timestamp) < this.CACHE_DURATION) {\n        updates.push(cached.data)\n        continue\n      }\n      \n      // Check rate limits\n      if (this.requestCount >= this.MAX_REQUESTS_PER_MINUTE) {\n        logger.warn('Rate limit reached, skipping auction', 'AUCTION', { auctionId })\n        // Use cached data if available, even if expired\n        if (cached) {\n          updates.push(cached.data)\n        }\n        continue\n      }\n      \n      // Ensure minimum delay between requests\n      const timeSinceLastRequest = now - this.lastRequestTime\n      if (timeSinceLastRequest < this.REQUEST_DELAY) {\n        await new Promise(resolve => setTimeout(resolve, this.REQUEST_DELAY - timeSinceLastRequest))\n      }\n      \n      try {\n        const url = `${apiService.getCurrentAtomicEndpoint()}/atomicmarket/v1/auctions/${auctionId}`\n        const response = await apiService.fetchWithRetry(url)\n        const data = await response.json()\n        \n        this.requestCount++\n        this.lastRequestTime = Date.now()\n        \n        if (data.success && data.data) {\n          const auction = data.data\n          const update: AuctionUpdate = {\n            auction_id: auctionId,\n            current_bid: auction.current_bid,\n            bidder: auction.current_bidder,\n            end_time: auction.end_time,\n            status: this.getAuctionStatus(auction),\n            bid_count: auction.bid_count || 0,\n            last_bid_time: auction.updated_at_time\n          }\n          \n          // Cache the result\n          this.auctionCache.set(auctionId, {\n            data: update,\n            timestamp: Date.now()\n          })\n          \n          updates.push(update)\n        }\n      } catch (error) {\n        ErrorMessageService.logError('AuctionService.fetchAuctionUpdates.single', error, {\n          auctionId\n        })\n        \n        // Use cached data if available on error\n        if (cached) {\n          updates.push(cached.data)\n        }\n      }\n    }\n    \n    return updates\n  }\n\n  // Determine auction status\n  private getAuctionStatus(auction: { end_time: string; state: number }): 'active' | 'ended' | 'cancelled' {\n    const now = Date.now()\n    const endTime = new Date(auction.end_time + 'Z').getTime()\n    \n    if (auction.state === 3) return 'cancelled'\n    if (now > endTime) return 'ended'\n    return 'active'\n  }\n\n  // Get auction bid history\n  async getAuctionBids(auctionId: string): Promise<AuctionBid[]> {\n    try {\n      // Get auction details first to find the seller and asset info\n      const auctionResponse = await apiService.getAuctions({ \n        limit: 1 \n      })\n      \n      if (!auctionResponse.success || !auctionResponse.data.length) {\n        return []\n      }\n      \n      const auction = auctionResponse.data[0]\n      const assetIds = auction.assets.map(asset => asset.asset_id)\n      \n      // Query Hyperion for auction bid transactions\n      const bidHistory = await this.fetchAuctionBidHistory(auctionId, assetIds)\n      \n      return bidHistory.sort((a, b) => \n        new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime()\n      )\n    } catch (error) {\n      ErrorMessageService.logError('AuctionService.getAuctionBids', error, { auctionId })\n      return []\n    }\n  }\n\n  // Fetch real auction bid history from blockchain\n  private async fetchAuctionBidHistory(auctionId: string, assetIds: string[]): Promise<AuctionBid[]> {\n    try {\n      // Query Hyperion API for atomicmarket auction bid actions\n      const hyperionEndpoints = [\n        API_ENDPOINTS.WAX_CHAIN.EOSRIO,\n        API_ENDPOINTS.WAX_CHAIN.WAXSWEDEN,\n        API_ENDPOINTS.HYPERION[2] // eosdetroit hyperion endpoint\n      ]\n      \n      for (const endpoint of hyperionEndpoints) {\n        try {\n          const response = await fetch(`${endpoint}/v2/history/get_actions?account=atomicmarket&filter=atomicmarket:auctionbid&limit=100&sort=desc&after=${new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString()}`, {\n            method: 'GET',\n            headers: {\n              'Accept': 'application/json'\n            }\n          })\n          \n          if (!response.ok) continue\n          \n          const data = await response.json()\n          const bids: AuctionBid[] = []\n          \n          if (data.actions) {\n            for (const action of data.actions) {\n              if (action.act?.data?.auction_id === auctionId) {\n                bids.push({\n                  bidder: action.act.data.bidder || action.act.authorization?.[0]?.actor || 'unknown',\n                  bid_amount: action.act.data.bid || '0.0000 WAX',\n                  timestamp: action.timestamp,\n                  transaction_id: action.trx_id\n                })\n              }\n            }\n          }\n          \n          return bids\n        } catch (endpointError) {\n          logger.warn('Failed to fetch from endpoint', 'AUCTION', { endpoint, error: endpointError })\n          continue\n        }\n      }\n      \n      // If all endpoints fail, return empty array\n      return []\n    } catch (error) {\n      ErrorMessageService.logError('AuctionService.fetchAuctionBidHistory', error, { auctionId, assetIds })\n      return []\n    }\n  }\n\n  // Calculate time remaining for auction\n  getTimeRemaining(endTime: string): {\n    total: number\n    days: number\n    hours: number\n    minutes: number\n    seconds: number\n    isExpired: boolean\n  } {\n    const now = Date.now()\n    \n    // Handle different date formats and validate\n    let end: number\n    if (!endTime) {\n      // If no endTime provided, consider expired\n      return {\n        total: 0,\n        days: 0,\n        hours: 0,\n        minutes: 0,\n        seconds: 0,\n        isExpired: true\n      }\n    }\n    \n    // Try different date parsing approaches\n    if (endTime.includes('T') && !endTime.endsWith('Z')) {\n      // ISO format without Z\n      end = new Date(endTime + 'Z').getTime()\n    } else if (endTime.includes('T') && endTime.endsWith('Z')) {\n      // ISO format with Z\n      end = new Date(endTime).getTime()\n    } else {\n      // Unix timestamp or other format\n      const timestamp = parseInt(endTime)\n      if (!isNaN(timestamp)) {\n        // If it's a valid number, treat as unix timestamp\n        end = timestamp > 1000000000000 ? timestamp : timestamp * 1000\n      } else {\n        // Try parsing as regular date\n        end = new Date(endTime).getTime()\n      }\n    }\n    \n    // Validate the parsed date\n    if (isNaN(end)) {\n      logger.warn('Invalid endTime format', 'AUCTION', { endTime })\n      return {\n        total: 0,\n        days: 0,\n        hours: 0,\n        minutes: 0,\n        seconds: 0,\n        isExpired: true\n      }\n    }\n    \n    const total = end - now\n    \n    if (total <= 0) {\n      return {\n        total: 0,\n        days: 0,\n        hours: 0,\n        minutes: 0,\n        seconds: 0,\n        isExpired: true\n      }\n    }\n    \n    const days = Math.floor(total / (1000 * 60 * 60 * 24))\n    const hours = Math.floor((total % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))\n    const minutes = Math.floor((total % (1000 * 60 * 60)) / (1000 * 60))\n    const seconds = Math.floor((total % (1000 * 60)) / 1000)\n    \n    return {\n      total,\n      days,\n      hours,\n      minutes,\n      seconds,\n      isExpired: false\n    }\n  }\n\n  // Format time remaining as string\n  formatTimeRemaining(endTime: string): string {\n    const time = this.getTimeRemaining(endTime)\n    \n    if (time.isExpired) {\n      return 'Auction ended'\n    }\n    \n    if (time.days > 0) {\n      return `${time.days}d ${time.hours}h ${time.minutes}m`\n    } else if (time.hours > 0) {\n      return `${time.hours}h ${time.minutes}m ${time.seconds}s`\n    } else if (time.minutes > 0) {\n      return `${time.minutes}m ${time.seconds}s`\n    } else {\n      return `${time.seconds}s`\n    }\n  }\n\n  // Check if auction is ending soon (less than 5 minutes)\n  isEndingSoon(endTime: string): boolean {\n    const time = this.getTimeRemaining(endTime)\n    return !time.isExpired && time.total < 5 * 60 * 1000 // 5 minutes in milliseconds\n  }\n\n  // Clear expired cache entries\n  private clearExpiredCache(): void {\n    const now = Date.now()\n    for (const [auctionId, cached] of this.auctionCache.entries()) {\n      if (now - cached.timestamp > this.CACHE_DURATION * 2) {\n        this.auctionCache.delete(auctionId)\n      }\n    }\n  }\n\n  // Cleanup all subscriptions\n  cleanup(): void {\n    this.subscriptions.clear()\n    this.stopPolling()\n    this.auctionCache.clear()\n  }\n}\n\n// Export singleton instance\nexport const auctionService = new AuctionService()","import React, { useState, useEffect, useCallback, useMemo } from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport { apiService } from '../services/api'\nimport { auctionService } from '../services/auctionService'\nimport { useWallet } from '../contexts/WalletContext'\nimport { useNotifications } from \"../hooks/useNotifications\";\nimport MediaRenderer from './MediaRenderer'\nimport { formatWAXPrice } from '../utils/formatUtils'\nimport { getAssetImageUrl, getAssetVideoUrl } from '../utils/mediaUtils'\nimport { log } from '../services/loggingService'\nimport { WharfKitService } from '../services/wharfkit'\n\nimport type { Auction } from '../types'\nimport '../css/auctions.css'\n\nconst Auctions: React.FC = React.memo(() => {\n  const navigate = useNavigate()\n  const { isConnected, account, session } = useWallet()\n  const { showSuccess, showError } = useNotifications()\n  const [auctions, setAuctions] = useState<Auction[]>([])\n  const [loading, setLoading] = useState(true)\n  const [loadingMore, setLoadingMore] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [currentPage, setCurrentPage] = useState(1)\n  const [hasMore, setHasMore] = useState(true)\n  const [totalPages, setTotalPages] = useState(1)\n  const [filter, setFilter] = useState<'all' | 'ending-soon' | 'new'>('all')\n  const [sortBy, setSortBy] = useState<'price_asc' | 'price_desc' | 'created_desc' | 'created_asc'>('created_desc')\n  const [searchTerm, setSearchTerm] = useState('')\n  const [selectedCollection, setSelectedCollection] = useState('')\n  const [hideEmptyAuctions, setHideEmptyAuctions] = useState(false)\n  const [showCreateModal, setShowCreateModal] = useState(false)\n  const [showBidModal, setShowBidModal] = useState(false)\n  const [selectedAuction, setSelectedAuction] = useState<Auction | null>(null)\n  const [bidAmount, setBidAmount] = useState('')\n  const [isPlacingBid, setIsPlacingBid] = useState(false)\n  const [isCreatingAuction, setIsCreatingAuction] = useState(false)\n  \n  // Create Auction form states\n  const [selectedAssets, setSelectedAssets] = useState<Set<string>>(new Set())\n  const [userAssets, setUserAssets] = useState<Array<{asset_id: string, name: string, image: string, collection_name: string, template_mint?: string}>>([])\n  const [isLoadingAssets, setIsLoadingAssets] = useState(false)\n  const [startingPrice, setStartingPrice] = useState('')\n  const [durationWeeks, setDurationWeeks] = useState(0)\n  const [durationDays, setDurationDays] = useState(1)\n  const [durationHours, setDurationHours] = useState(0)\n  const [durationMinutes, setDurationMinutes] = useState(0)\n  const [auctionMemo, setAuctionMemo] = useState('')\n  const [collections, setCollections] = useState<Array<{collection_name: string, name: string}>>([])  \n\n  const getSortField = useCallback(() => {\n    switch (sortBy) {\n      case 'price_asc':\n      case 'price_desc':\n        return 'price'\n      case 'created_desc':\n      case 'created_asc':\n      default:\n        return 'created'\n    }\n  }, [sortBy])\n\n  const getSortOrder = useCallback(() => {\n    switch (sortBy) {\n      case 'price_asc':\n      case 'created_asc':\n        return 'asc'\n      case 'price_desc':\n      case 'created_desc':\n      default:\n        return 'desc'\n    }\n  }, [sortBy])\n\n  const loadAuctions = useCallback(async (page: number = 1, append: boolean = false) => {\n    try {\n      if (page === 1) {\n        setLoading(true)\n        setCurrentPage(1)\n        setHasMore(true)\n      } else {\n        setLoadingMore(true)\n      }\n      setError(null)\n      \n      const response = await apiService.getAuctions({\n        state: 1, // Active auctions\n        limit: 36,\n        offset: (page - 1) * 36,\n        sort: getSortField(),\n        order: getSortOrder(),\n        hide_empty_auctions: hideEmptyAuctions,\n        search: searchTerm || undefined,\n        collection_name: selectedCollection || undefined,\n        collection_blacklist: 'flinttffunko,onlyfanzgaly,farmerpetsco,fantaspeop',\n        seller_blacklist: 'dximg.wam,xpvrs.wam,5rrrc.wam,nnmnmnmnn.gm',\n        symbol: 'WAX'\n      })\n      \n      if (!response.success || !response.data) {\n        throw new Error('Failed to fetch auctions data')\n      }\n      \n      // Use the formatted auction data from the API service\n      const formattedAuctions: Auction[] = response.data.map((auction) => ({\n        auction_id: auction.auction_id,\n        asset_id: auction.asset_id,\n        seller: auction.seller,\n        price: auction.price,\n        end_time: auction.end_time,\n        collection_name: auction.collection_name,\n        template_id: auction.template_id,\n        asset_name: auction.asset_name,\n        image: auction.image,\n        current_bid: auction.current_bid || null,\n        bidder: auction.bidder || null,\n        collection_info: undefined // Remove individual collection fetching to prevent API spam\n      }))\n      \n      if (append && page > 1) {\n        setAuctions(prev => [...prev, ...formattedAuctions])\n      } else {\n        setAuctions(formattedAuctions)\n      }\n      \n      // Update pagination state\n      const itemsPerPage = 36\n      const hasMoreData = formattedAuctions.length === itemsPerPage\n      setHasMore(hasMoreData)\n      setCurrentPage(page)\n      \n      if (hasMoreData) {\n        setTotalPages(page + 1)\n      } else {\n        setTotalPages(page)\n      }\n      \n    } catch (err) {\n      log.error('Error loading auctions', 'Auctions', err as Error)\n      setError('Failed to load auctions. Please try again later.')\n    } finally {\n      setLoading(false)\n      setLoadingMore(false)\n    }\n  }, [getSortField, getSortOrder, hideEmptyAuctions, searchTerm, selectedCollection])\n\n  const loadMoreAuctions = useCallback(() => {\n    if (!loadingMore && hasMore) {\n      loadAuctions(currentPage + 1, true)\n    }\n  }, [loadAuctions, currentPage, hasMore, loadingMore])\n\n  const resetAndLoadAuctions = useCallback(() => {\n    setCurrentPage(1)\n    setHasMore(true)\n    loadAuctions(1, false)\n  }, [loadAuctions])\n\n  useEffect(() => {\n    resetAndLoadAuctions()\n  }, [resetAndLoadAuctions, filter, searchTerm, selectedCollection, hideEmptyAuctions, sortBy])\n\n  // Load collections for filtering\n  useEffect(() => {\n    const loadCollections = async () => {\n      try {\n        const collectionsData = await apiService.getCollections({ limit: 50, whitelistOnly: true })\n        if (collectionsData && collectionsData.length > 0) {\n          const mappedCollections = collectionsData.map(col => ({\n            collection_name: col.collection_name,\n            name: col.name || col.collection_name\n          }))\n          setCollections(mappedCollections)\n        }\n      } catch (error) {\n        log.error('Failed to load collections', 'Auctions', error as Error)\n        // Fallback to default collections\n        setCollections([\n          { collection_name: 'pixeljourney', name: 'Pixel Journey' },\n          { collection_name: 'friedfactory', name: 'Fried Factory' }\n        ])\n      }\n    }\n    loadCollections()\n  }, [])\n\n  // Load user assets for auction creation\n  const loadUserAssets = async () => {\n    if (!account) return\n    \n    setIsLoadingAssets(true)\n    try {\n      const url = `${apiService.atomicAssetsAPI}/atomicassets/v1/assets?owner=${account}&limit=100`\n      const response = await apiService.fetchWithRetry(url)\n      const data = await response.json()\n      \n      if (data.success && data.data) {\n        const assets = data.data.map((asset: {asset_id: string, name?: string, collection: {collection_name: string}, template_mint?: string, data?: {img?: string}}) => ({\n          asset_id: asset.asset_id,\n          name: asset.name || `${asset.collection.collection_name} #${asset.template_mint || asset.asset_id}`,\n          collection_name: asset.collection.collection_name,\n          image: asset.data?.img ? `https://ipfs.io/ipfs/${asset.data.img}` : undefined,\n          template_mint: asset.template_mint,\n          isSelected: false\n        }))\n        setUserAssets(assets)\n      }\n    } catch (error) {\n      log.error('Error loading user assets', 'Auctions', error as Error)\n      setUserAssets([])\n    } finally {\n      setIsLoadingAssets(false)\n    }\n  }\n\n\n\n  const formatPrice = (price: string) => {\n    const waxPrice = parseFloat(price) / 100000000\n    return formatWAXPrice(waxPrice)\n  }\n\n  // Optimized filtering with useMemo\n  const filteredAuctions = useMemo(() => {\n    return auctions.filter(auction => {\n      // Search filter\n      if (searchTerm) {\n        const searchLower = searchTerm.toLowerCase()\n        const matchesSearch = \n          auction.asset_name?.toLowerCase().includes(searchLower) ||\n          auction.asset_id?.toString().includes(searchLower) ||\n          auction.collection_name?.toLowerCase().includes(searchLower)\n        if (!matchesSearch) return false\n      }\n\n      // Collection filter\n      if (selectedCollection && auction.collection_name !== selectedCollection) {\n        return false\n      }\n\n      // Hide empty auctions filter - check if auction has actual bids\n      if (hideEmptyAuctions && (!auction.bidder || !auction.current_bid || auction.current_bid === '0')) {\n        return false\n      }\n\n      return true\n    })\n  }, [auctions, searchTerm, selectedCollection, hideEmptyAuctions])\n\n  // Real-time auction updates\n  useEffect(() => {\n    const unsubscribeFunctions: (() => void)[] = []\n\n    // Subscribe to updates for all visible auctions\n    filteredAuctions.forEach(auction => {\n      const unsubscribe = auctionService.subscribe(auction.auction_id, (update) => {\n        setAuctions(prevAuctions => \n          prevAuctions.map(prevAuction => \n            prevAuction.auction_id === update.auction_id\n              ? {\n                  ...prevAuction,\n                  current_bid: update.current_bid || prevAuction.current_bid,\n                  bidder: update.bidder || prevAuction.bidder,\n                  end_time: update.end_time\n                }\n              : prevAuction\n          )\n        )\n      })\n      unsubscribeFunctions.push(unsubscribe)\n    })\n\n    // Cleanup subscriptions when component unmounts or auctions change\n    return () => {\n      unsubscribeFunctions.forEach(unsubscribe => unsubscribe())\n    }\n  }, [filteredAuctions])\n\n  const handlePlaceBid = (auction: Auction) => {\n    if (!isConnected || !account) {\n      showError('Wallet Required', 'Please connect your wallet to place bids')\n      return\n    }\n    \n    if (auction.seller === account) {\n      showError('Invalid Action', 'You cannot bid on your own auction')\n      return\n    }\n    \n    setSelectedAuction(auction)\n    setBidAmount('')\n    setShowBidModal(true)\n  }\n  \n  const submitBid = async () => {\n    if (!selectedAuction || !session || !account) {\n      showError('Error', 'Please connect your wallet first')\n      return\n    }\n    \n    const bidFloat = parseFloat(bidAmount)\n    if (isNaN(bidFloat) || bidFloat <= 0) {\n      showError('Invalid Bid', 'Please enter a valid bid amount')\n      return\n    }\n    \n    // Check if bid is valid\n    const currentBidAmount = parseFloat(selectedAuction.current_bid || selectedAuction.price) / 100000000\n    const hasExistingBids = selectedAuction.current_bid && selectedAuction.bidder\n    \n    if (hasExistingBids && bidFloat <= currentBidAmount) {\n      showError('Invalid Bid', `Bid must be higher than current bid of ${formatWAXPrice(currentBidAmount)}`)\n      return\n    } else if (!hasExistingBids && bidFloat < currentBidAmount) {\n      showError('Invalid Bid', `Bid must be at least the starting price of ${formatWAXPrice(currentBidAmount)}`)\n      return\n    }\n    \n    setIsPlacingBid(true)\n    \n    try {\n      // Format bid amount with WAX precision (8 decimals)\n      const formattedBid = bidFloat.toFixed(8)\n      const bidString = `${formattedBid} WAX`\n      \n      // Create the bid action for AtomicMarket\n      const action = {\n        account: 'atomicmarket',\n        name: 'auctionbid',\n        authorization: [{\n          actor: account,\n          permission: WharfKitService.safeGetPermission(session)\n        }],\n        data: {\n          bidder: account,\n          auction_id: selectedAuction.auction_id,\n          bid: bidString,\n          taker_marketplace: 'market.pxj'\n        }\n      }\n      \n      // Execute the transaction\n      const result = await session.transact({ actions: [action] })\n      \n      if (result) {\n        showSuccess('Bid Placed', `Successfully placed bid of ${formatWAXPrice(bidFloat)}`)\n        setShowBidModal(false)\n        setBidAmount('')\n        setSelectedAuction(null)\n        \n        // Reload auctions to show updated bid\n        loadAuctions()\n      }\n    } catch (error: unknown) {\n      log.error('Error placing bid', 'Auctions', error as Error)\n      const errorMessage = error instanceof Error ? error.message : 'Failed to place bid. Please try again.'\n      showError('Bid Failed', errorMessage)\n    } finally {\n      setIsPlacingBid(false)\n    }\n  }\n\n  const handleViewDetails = (auction: Auction) => {\n    // Navigate to asset details page\n    navigate(`/assets/${auction.asset_id}`)\n  }\n\n  const handleCreateAuction = () => {\n    setShowCreateModal(true)\n    if (account) {\n      loadUserAssets()\n    }\n  }\n\n  const toggleAssetSelection = (assetId: string) => {\n    const newSelected = new Set(selectedAssets)\n    if (newSelected.has(assetId)) {\n      newSelected.delete(assetId)\n    } else {\n      newSelected.add(assetId)\n    }\n    setSelectedAssets(newSelected)\n  }\n\n  // Calculate total duration in seconds\n  const calculateTotalDuration = () => {\n    return (durationWeeks * 7 * 24 * 60 * 60) + \n           (durationDays * 24 * 60 * 60) + \n           (durationHours * 60 * 60) + \n           (durationMinutes * 60)\n  }\n\n  // Update duration handlers\n  const updateDurationComponent = (component: 'weeks' | 'days' | 'hours' | 'minutes', value: number) => {\n    const clampedValue = Math.max(0, Math.min(value, getMaxValue(component)))\n    \n    switch (component) {\n      case 'weeks':\n        setDurationWeeks(clampedValue)\n        break\n      case 'days':\n        setDurationDays(clampedValue)\n        break\n      case 'hours':\n        setDurationHours(clampedValue)\n        break\n      case 'minutes':\n        setDurationMinutes(clampedValue)\n        break\n    }\n  }\n\n  const getMaxValue = (component: 'weeks' | 'days' | 'hours' | 'minutes') => {\n    switch (component) {\n      case 'weeks': return 4 // Max 4 weeks\n      case 'days': return 30 // Max 30 days\n      case 'hours': return 23 // Max 23 hours\n      case 'minutes': return 59 // Max 59 minutes\n      default: return 0\n    }\n  }\n\n  const formatDurationDisplay = () => {\n    const parts = []\n    if (durationWeeks > 0) parts.push(`${durationWeeks} week${durationWeeks > 1 ? 's' : ''}`)\n    if (durationDays > 0) parts.push(`${durationDays} day${durationDays > 1 ? 's' : ''}`)\n    if (durationHours > 0) parts.push(`${durationHours} hour${durationHours > 1 ? 's' : ''}`)\n    if (durationMinutes > 0) parts.push(`${durationMinutes} minute${durationMinutes > 1 ? 's' : ''}`)\n    \n    if (parts.length === 0) return 'No duration set'\n    return parts.join(', ')\n  }\n\n  const handleCreateAuctionSubmit = async () => {\n    if (selectedAssets.size === 0) {\n      showError('No Assets Selected', 'Please select at least one asset to auction')\n      return\n    }\n    \n    if (!startingPrice || parseFloat(startingPrice) <= 0) {\n      showError('Invalid Price', 'Please enter a valid starting price')\n      return\n    }\n    \n    const totalDurationSeconds = calculateTotalDuration()\n    if (totalDurationSeconds < 3600) { // Minimum 1 hour\n      showError('Invalid Duration', 'Auction duration must be at least 1 hour')\n      return\n    }\n    \n    if (totalDurationSeconds > 2592000) { // Maximum 30 days\n      showError('Invalid Duration', 'Auction duration cannot exceed 30 days')\n      return\n    }\n    \n    try {\n      setIsCreatingAuction(true)\n      \n      // Create auction transaction using AtomicMarket announceauct action\n      const assetIds = Array.from(selectedAssets).map(id => parseInt(id))\n      const startingBidAmount = `${parseFloat(startingPrice).toFixed(8)} WAX`\n      \n      const actions = [{\n        account: 'atomicmarket',\n        name: 'announceauct',\n        authorization: [{\n          actor: account || '',\n          permission: session?.permission || 'active'\n        }],\n        data: {\n          seller: account || '',\n          asset_ids: assetIds,\n          starting_bid: startingBidAmount,\n          duration: totalDurationSeconds,\n          maker_marketplace: 'market.pxj'\n        }\n      }]\n      \n      if (session) {\n        await session.transact({ actions })\n      }\n      \n      showSuccess('Auction Created', `Successfully created auction for ${selectedAssets.size} asset(s). Remember to transfer your assets to the atomicmarket contract to activate the auction.`)\n      setShowCreateModal(false)\n      \n      // Reset form\n      setSelectedAssets(new Set())\n      setStartingPrice('')\n      setDurationWeeks(0)\n      setDurationDays(1)\n      setDurationHours(0)\n      setDurationMinutes(0)\n      setAuctionMemo('')\n      \n      // Refresh auctions list\n      loadAuctions()\n    } catch (error) {\n      log.error('Failed to create auction', 'Auctions', error as Error)\n      showError('Auction Creation Failed', error instanceof Error ? error.message : 'Failed to create auction')\n    } finally {\n      setIsCreatingAuction(false)\n    }\n  }\n\n  return (\n    <div className=\"auctions-page\">\n      <div className=\"page-header\">\n        <div className=\"header-content\">\n          <div className=\"header-text\">\n            <h1>Auctions</h1>\n            <p>Discover and bid on unique NFTs from the WAX ecosystem</p>\n          </div>\n          <button className=\"create-auction-btn\" onClick={handleCreateAuction}>\n            Create Auction\n          </button>\n        </div>\n      </div>\n\n      <div className=\"auctions-controls\">\n        <div className=\"search-section\">\n          <div className=\"search-input-wrapper\">\n              <svg className=\"search-icon\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/>\n              </svg>\n              <input\n                type=\"text\"\n                placeholder=\"Search auctions by name or asset ID...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"search-input\"\n              />\n            </div>\n        </div>\n\n        <div className=\"filters-section\">\n          <div className=\"filter-group\">\n            <label>Collection:</label>\n            <select \n              value={selectedCollection} \n              onChange={(e) => setSelectedCollection(e.target.value)}\n              className=\"collection-filter\"\n            >\n              <option value=\"\">All Collections</option>\n              {collections.map(collection => (\n                <option key={collection.collection_name} value={collection.collection_name}>\n                  {collection.name}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div className=\"filter-group\">\n            <label>Sort by:</label>\n            <select \n              value={sortBy} \n              onChange={(e) => setSortBy(e.target.value as typeof sortBy)}\n              className=\"sort-filter\"\n            >\n              <option value=\"price_asc\">Price: Low to High</option>\n              <option value=\"price_desc\">Price: High to Low</option>\n              <option value=\"created_desc\">Newest First</option>\n              <option value=\"created_asc\">Oldest First</option>\n            </select>\n          </div>\n\n          <div className=\"filter-group\">\n            <label className=\"checkbox-label\">\n              <input\n                type=\"checkbox\"\n                checked={hideEmptyAuctions}\n                onChange={(e) => setHideEmptyAuctions(e.target.checked)}\n              />\n              <span className=\"checkmark\"></span>\n              Hide auctions without bids\n            </label>\n          </div>\n        </div>\n\n        <div className=\"auctions-filters\">\n          <button \n            className={`filter-btn ${filter === 'all' ? 'active' : ''}`}\n            onClick={() => setFilter('all')}\n          >\n            All Auctions\n          </button>\n          <button \n            className={`filter-btn ${filter === 'ending-soon' ? 'active' : ''}`}\n            onClick={() => setFilter('ending-soon')}\n          >\n            Ending Soon\n          </button>\n          <button \n            className={`filter-btn ${filter === 'new' ? 'active' : ''}`}\n            onClick={() => setFilter('new')}\n          >\n            New Auctions\n          </button>\n        </div>\n      </div>\n\n      {loading && (\n        <div className=\"loading-container\">\n          <div className=\"loading-spinner\"></div>\n          <p>Loading auctions...</p>\n        </div>\n      )}\n\n      {error && (\n        <div className=\"error-container\">\n          <p className=\"error-message\">{error}</p>\n          <button onClick={() => loadAuctions()} className=\"retry-btn\">\n            Try Again\n          </button>\n        </div>\n      )}\n\n      {!loading && !error && filteredAuctions.length === 0 && auctions.length > 0 && (\n        <div className=\"empty-state\">\n          <h3>No Matching Auctions</h3>\n          <p>No auctions match your current filters. Try adjusting your search criteria.</p>\n        </div>\n      )}\n\n      {!loading && !error && auctions.length === 0 && (\n        <div className=\"empty-state\">\n          <h3>No Active Auctions</h3>\n          <p>There are currently no active auctions. Check back later!</p>\n        </div>\n      )}\n\n      {!loading && !error && filteredAuctions.length > 0 && (\n        <div className=\"auctions-grid\">\n          {filteredAuctions.map((auction) => (\n            <div \n              key={auction.auction_id} \n              className=\"auction-card clickable-card\"\n              onClick={() => navigate(`/auctions/${auction.auction_id}`)}\n            >\n              <div className=\"auction-image\">\n                <MediaRenderer\n                  imageUrl={auction.image}\n                  videoUrl={auction.video}\n                  alt={auction.asset_name}\n                  className=\"auction-media\"\n                  enableAnimations={true}\n                />\n                <div className=\"auction-timer\">\n                  {auctionService.formatTimeRemaining(auction.end_time)}\n                </div>\n              </div>\n              \n              <div className=\"auction-info\">\n                <h3 className=\"auction-title\">{auction.asset_name}</h3>\n                \n                <div className=\"auction-collection-info\">\n                  {auction.collection_info?.img && (\n                    <img \n                      src={auction.collection_info.img} \n                      alt={auction.collection_info.name}\n                      className=\"collection-avatar\"\n                    />\n                  )}\n                  <div className=\"collection-details\">\n                    <p className=\"collection-name\">\n                      {auction.collection_info?.name || auction.collection_name}\n                    </p>\n                    {auction.collection_info?.description && (\n                      <p className=\"collection-description\">\n                        {auction.collection_info.description.length > 60 \n                          ? `${auction.collection_info.description.substring(0, 60)}...`\n                          : auction.collection_info.description\n                        }\n                      </p>\n                    )}\n                  </div>\n                </div>\n                \n                <div className=\"seller-info\">\n                  <span className=\"label\">Seller: </span>\n                  <button \n                    onClick={(e) => {\n                      e.stopPropagation();\n                      navigate(`/user-profile-lookup?user=${encodeURIComponent(auction.seller)}`);\n                    }}\n                    className=\"seller-account\"\n                  >\n                    {auction.seller}\n                  </button>\n                </div>\n                \n                <div className=\"auction-pricing\">\n                  <div className=\"current-bid\">\n                    <span className=\"label\">{auction.current_bid ? 'Current Bid:' : 'Starting Price:'}</span>\n                    <span className=\"price\">\n                      {auction.current_bid ? formatPrice(auction.current_bid) : formatPrice(auction.price)}\n                    </span>\n                  </div>\n                  \n                  {auction.bidder && (\n                    <div className=\"bidder\">\n                      <span className=\"label\">Top Bidder:</span>\n                      <button \n                        onClick={(e) => {\n                          e.stopPropagation();\n                          navigate(`/user-profile-lookup?user=${encodeURIComponent(auction.bidder || '')}`);\n                        }}\n                        className=\"account\"\n                      >\n                        {auction.bidder}\n                      </button>\n                    </div>\n                  )}\n                </div>\n                \n                <div className=\"auction-actions\">\n                  <button \n                    className=\"bid-btn\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      handlePlaceBid(auction);\n                    }}\n                    disabled={!isConnected || auction.seller === account}\n                  >\n                    {!isConnected ? 'Connect Wallet' : \n                     auction.seller === account ? 'Your Auction' : 'Place Bid'}\n                  </button>\n                  <button \n                    className=\"view-btn\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      handleViewDetails(auction);\n                    }}\n                  >\n                    View Details\n                  </button>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Pagination Controls */}\n      {!loading && !error && filteredAuctions.length > 0 && (\n        <div className=\"pagination-container\">\n          {hasMore && (\n            <button \n              className=\"load-more-btn\"\n              onClick={loadMoreAuctions}\n              disabled={loadingMore}\n            >\n              {loadingMore ? (\n                <>\n                  <div className=\"loading-spinner small\"></div>\n                  Loading more...\n                </>\n              ) : (\n                'Load More Auctions'\n              )}\n            </button>\n          )}\n          \n          <div className=\"pagination-info\">\n            <span>Page {currentPage} of {totalPages}</span>\n            <span>{filteredAuctions.length} auctions loaded</span>\n          </div>\n        </div>\n      )}\n\n      {/* Coming Soon Notice */}\n      <div className=\"coming-soon-notice\">\n        <h3>🚧 Integration in Progress</h3>\n        <p>\n          Full AtomicMarket auction integration is currently being implemented. \n          This page will soon display live auction data and allow bidding functionality.\n        </p>\n      </div>\n\n      {/* Enhanced Bid Modal */}\n      {showBidModal && selectedAuction && (\n        <div className=\"modal-overlay\" onClick={() => setShowBidModal(false)}>\n          <div className=\"bid-modal-content\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"bid-modal-header\">\n              <h2>Place Your Bid</h2>\n              <button \n                className=\"close-btn\"\n                onClick={() => setShowBidModal(false)}\n              >\n                ×\n              </button>\n            </div>\n            \n            <div className=\"bid-modal-body\">\n              {/* Enhanced Auction Summary */}\n              <div className=\"bid-auction-summary\">\n                <div className=\"bid-asset-image\">\n                  <MediaRenderer\n                    imageUrl={selectedAuction.image}\n                    videoUrl={selectedAuction.video}\n                    alt={selectedAuction.asset_name}\n                    className=\"bid-modal-media\"\n                    enableAnimations={true}\n                  />\n                  <div className=\"auction-timer-small\">\n                    {auctionService.formatTimeRemaining(selectedAuction.end_time)}\n                  </div>\n                </div>\n                <div className=\"bid-asset-info\">\n                  <h3>{selectedAuction.asset_name}</h3>\n                  <div className=\"bid-collection-info\">\n                    {selectedAuction.collection_info?.img && (\n                      <img \n                        src={selectedAuction.collection_info.img} \n                        alt={selectedAuction.collection_info.name}\n                        className=\"collection-avatar-small\"\n                      />\n                    )}\n                    <span className=\"collection-name\">{selectedAuction.collection_info?.name || selectedAuction.collection_name}</span>\n                  </div>\n                  <div className=\"bid-current-info\">\n                    <div className=\"current-bid-display\">\n                      <span className=\"label\">{selectedAuction.current_bid ? 'Current Bid' : 'Starting Price'}</span>\n                      <span className=\"amount\">{formatPrice(selectedAuction.current_bid || selectedAuction.price)}</span>\n                    </div>\n                    {selectedAuction.bidder && (\n                      <div className=\"current-bidder\">\n                        <span className=\"label\">Leading Bidder</span>\n                        <button \n                          onClick={(e) => {\n                            e.stopPropagation();\n                            navigate(`/user-profile-lookup?user=${encodeURIComponent(selectedAuction.bidder || '')}`);\n                          }}\n                          className=\"bidder-account\"\n                        >\n                          {selectedAuction.bidder}\n                        </button>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n\n              {/* Bid Input Section */}\n              <div className=\"bid-input-section\">\n                <div className=\"bid-form-group\">\n                  <label>Your Bid Amount</label>\n                  <div className=\"bid-input-wrapper\">\n                    <input \n                      type=\"number\" \n                      value={bidAmount}\n                      onChange={(e) => setBidAmount(e.target.value)}\n                      placeholder=\"0.0000\"\n                      step=\"0.0001\"\n                      min={selectedAuction.current_bid && selectedAuction.bidder ? parseFloat(selectedAuction.current_bid) / 100000000 + 0.0001 : parseFloat(selectedAuction.price) / 100000000}\n                      className=\"bid-amount-input\"\n                      disabled={isPlacingBid}\n                    />\n                    <span className=\"currency-label\">WAX</span>\n                  </div>\n                  <div className=\"bid-requirements\">\n                    <p className=\"minimum-bid\">\n                      {selectedAuction.current_bid && selectedAuction.bidder ? \n                        `Minimum: ${formatWAXPrice(parseFloat(selectedAuction.current_bid) / 100000000 + 0.0001)}` :\n                `Starting Price: ${formatWAXPrice(parseFloat(selectedAuction.price) / 100000000)}`\n                      }\n                    </p>\n                    {bidAmount && (\n                      <p className=\"bid-total\">\n                        Total: {formatWAXPrice(parseFloat(bidAmount))}\n                      </p>\n                    )}\n                  </div>\n                </div>\n              </div>\n\n              {/* Previous Bids Section */}\n              <div className=\"previous-bids-section\">\n                <h4>Bid History</h4>\n                <div className=\"bids-list\">\n                  {selectedAuction.bidder ? (\n                    <div className=\"bid-item\">\n                      <div className=\"bidder-info\">\n                        <button \n                          onClick={(e) => {\n                            e.stopPropagation();\n                            navigate(`/user-profile-lookup?user=${encodeURIComponent(selectedAuction.bidder || '')}`);\n                          }}\n                          className=\"bidder\"\n                        >\n                          {selectedAuction.bidder}\n                        </button>\n                        <span className=\"bid-time\">Current leading bid</span>\n                      </div>\n                      <span className=\"bid-amount\">{formatPrice(selectedAuction.current_bid || selectedAuction.price)}</span>\n                    </div>\n                  ) : (\n                    <div className=\"no-bids\">\n                      <p>No bids yet - be the first to bid!</p>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Bid Warning */}\n              <div className=\"bid-notice\">\n                <div className=\"notice-icon\">💡</div>\n                <div className=\"notice-text\">\n                  <p><strong>Important:</strong> Ensure you have sufficient WAX balance for your bid. Bids are binding and cannot be cancelled.</p>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"bid-modal-footer\">\n              <button \n                className=\"cancel-bid-btn\"\n                onClick={() => setShowBidModal(false)}\n                disabled={isPlacingBid}\n              >\n                Cancel\n              </button>\n              <button \n                className=\"submit-bid-btn\"\n                onClick={submitBid}\n                disabled={isPlacingBid || !bidAmount || \n                  (selectedAuction.current_bid && selectedAuction.bidder ? \n                    parseFloat(bidAmount) <= parseFloat(selectedAuction.current_bid) / 100000000 :\n                    parseFloat(bidAmount) < parseFloat(selectedAuction.price) / 100000000\n                  )}\n              >\n                {isPlacingBid ? (\n                  <>\n                    <span className=\"loading-spinner-small\"></span>\n                    Placing Bid...\n                  </>\n                ) : (\n                  `Place Bid • ${bidAmount || '0.0000'} WAX`\n                )}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Create Auction Modal */}\n      {showCreateModal && (\n        <div className=\"modal-overlay auction-modal\" onClick={() => setShowCreateModal(false)}>\n          <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h2>Create Auction</h2>\n              <button \n                className=\"close-btn\"\n                onClick={() => setShowCreateModal(false)}\n              >\n                ×\n              </button>\n            </div>\n            \n            <div className=\"modal-body\">\n              <div className=\"asset-selection-section\">\n                {/* Asset Selection Section */}\n                <div className=\"form-group\">\n                  <label>Select Assets to Auction</label>\n                  <div className=\"asset-selection-container\">\n                    {isLoadingAssets ? (\n                      <div className=\"loading-assets\">\n                        <div className=\"loading-spinner\"></div>\n                        <span>Loading your assets...</span>\n                      </div>\n                    ) : userAssets.length > 0 ? (\n                      <div className=\"assets-grid\">\n                        {userAssets.map(asset => (\n                          <div \n                            key={asset.asset_id}\n                            className={`asset-item ${selectedAssets.has(asset.asset_id) ? 'selected' : ''}`}\n                            onClick={() => toggleAssetSelection(asset.asset_id)}\n                          >\n                            <div className=\"asset-image\">\n                              <MediaRenderer\n                                imageUrl={getAssetImageUrl(asset)}\n                                videoUrl={getAssetVideoUrl(asset)}\n                                alt={asset.name || `Asset #${asset.asset_id}`}\n                                className=\"asset-media\"\n                                enableAnimations={true}\n                                loading=\"lazy\"\n                              />\n                              {selectedAssets.has(asset.asset_id) && (\n                                <div className=\"selection-indicator\">\n                                  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                                    <path d=\"M9,20.42l-6.21,-6.21l2.83,-2.83L9,14.77l9.88,-9.89l2.83,2.83L9,20.42z\"/>\n                                  </svg>\n                                </div>\n                              )}\n                            </div>\n                            <div className=\"asset-info\">\n                              <div className=\"asset-name\">{asset.name || `Asset #${asset.asset_id}`}</div>\n                              <div className=\"asset-collection\">{asset.collection_name}</div>\n                              {asset.template_mint && (\n                                <div className=\"asset-mint-info\">Mint #{asset.template_mint}</div>\n                              )}\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    ) : (\n                      <div className=\"no-assets\">\n                        <svg className=\"no-assets-icon\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                          <path d=\"M20,7l-8,-4l-8,4m16,0l-8,4m8,-4v10l-8,4m0,-10L4,7m8,4v10M4,7v10l8,4\"/>\n                        </svg>\n                        <h3>No Assets Found</h3>\n                        <p>You don't have any assets to auction. Visit the marketplace to acquire some NFTs first.</p>\n                      </div>\n                    )}\n                  </div>\n                  {selectedAssets.size > 0 && (\n                    <div className=\"selection-summary\">\n                      <span>{selectedAssets.size} asset{selectedAssets.size > 1 ? 's' : ''} selected</span>\n                    </div>\n                  )}\n                </div>\n              </div>\n              \n              <div className=\"auction-form-section\">\n              \n              <div className=\"form-group\">\n                <label>Starting Price (WAX)</label>\n                <input \n                  type=\"number\" \n                  placeholder=\"0.0000\"\n                  step=\"0.0001\"\n                  min=\"0\"\n                  value={startingPrice}\n                  onChange={(e) => setStartingPrice(e.target.value)}\n                  className=\"form-input\"\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>Auction Duration</label>\n                <div className=\"duration-inputs\">\n                  <div className=\"duration-field\">\n                    <label className=\"duration-label\">Weeks</label>\n                    <input \n                      type=\"number\"\n                      min=\"0\"\n                      max=\"4\"\n                      value={durationWeeks}\n                      onChange={(e) => updateDurationComponent('weeks', parseInt(e.target.value) || 0)}\n                      className=\"duration-input\"\n                    />\n                  </div>\n                  <div className=\"duration-field\">\n                    <label className=\"duration-label\">Days</label>\n                    <input \n                      type=\"number\"\n                      min=\"0\"\n                      max=\"30\"\n                      value={durationDays}\n                      onChange={(e) => updateDurationComponent('days', parseInt(e.target.value) || 0)}\n                      className=\"duration-input\"\n                    />\n                  </div>\n                  <div className=\"duration-field\">\n                    <label className=\"duration-label\">Hours</label>\n                    <input \n                      type=\"number\"\n                      min=\"0\"\n                      max=\"23\"\n                      value={durationHours}\n                      onChange={(e) => updateDurationComponent('hours', parseInt(e.target.value) || 0)}\n                      className=\"duration-input\"\n                    />\n                  </div>\n                  <div className=\"duration-field\">\n                    <label className=\"duration-label\">Minutes</label>\n                    <input \n                      type=\"number\"\n                      min=\"0\"\n                      max=\"59\"\n                      value={durationMinutes}\n                      onChange={(e) => updateDurationComponent('minutes', parseInt(e.target.value) || 0)}\n                      className=\"duration-input\"\n                    />\n                  </div>\n                </div>\n                <div className=\"duration-summary\">\n                  <span className=\"duration-display\">{formatDurationDisplay()}</span>\n                  <span className=\"duration-total\">Total: {Math.floor(calculateTotalDuration() / 3600)}h {Math.floor((calculateTotalDuration() % 3600) / 60)}m</span>\n                </div>\n              </div>\n              \n              <div className=\"form-group\">\n                <label>Memo (Optional)</label>\n                <textarea \n                  placeholder=\"Add a description for your auction\"\n                  className=\"form-textarea\"\n                  rows={3}\n                  value={auctionMemo}\n                  onChange={(e) => setAuctionMemo(e.target.value)}\n                />\n              </div>\n              </div>\n            </div>\n            \n            <div className=\"modal-footer\">\n              <button \n                className=\"cancel-btn\"\n                onClick={() => setShowCreateModal(false)}\n              >\n                Cancel\n              </button>\n              <button \n                className=\"create-btn\"\n                onClick={handleCreateAuctionSubmit}\n                disabled={selectedAssets.size === 0 || !startingPrice || parseFloat(startingPrice) <= 0 || isCreatingAuction}\n              >\n                {isCreatingAuction ? (\n                  <>\n                    <span className=\"loading-spinner-small\"></span>\n                    Creating Auction...\n                  </>\n                ) : (\n                  `Create Auction${selectedAssets.size > 0 ? ` (${selectedAssets.size} asset${selectedAssets.size > 1 ? 's' : ''})` : ''}`\n                )}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n})\n\nexport default Auctions","import React, { useState, useEffect, useCallback } from 'react'\nimport { useParams, useNavigate } from 'react-router-dom'\nimport { useWallet } from '../contexts/WalletContext'\nimport { useNotifications } from '../hooks/useNotifications'\nimport { apiService } from '../services/api'\nimport { auctionService } from '../services/auctionService'\nimport MediaRenderer from './MediaRenderer'\nimport { API_ENDPOINTS } from '../config/marketplaceConfig'\nimport type { Auction } from '../types'\nimport '../css/auction-detail.css'\n\nconst AuctionDetail: React.FC = () => {\n  const { id } = useParams<{ id: string }>()\n  const navigate = useNavigate()\n  const { isConnected, account, session } = useWallet()\n  const { showSuccess, showError } = useNotifications()\n  \n  const [auction, setAuction] = useState<Auction | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [showBidModal, setShowBidModal] = useState(false)\n  const [bidAmount, setBidAmount] = useState('')\n  const [isPlacingBid, setIsPlacingBid] = useState(false)\n\n  const loadAuction = useCallback(async () => {\n    if (!id) return\n    \n    setLoading(true)\n    setError(null)\n    \n    try {\n      const response = await apiService.getAuction(id)\n      \n      if (!response.success || !response.data) {\n        setError('Auction not found')\n        return\n      }\n      \n      setAuction(response.data as unknown as Auction)\n    } catch (err) {\n      console.error('Error loading auction:', err)\n      setError('Failed to load auction details')\n    } finally {\n      setLoading(false)\n    }\n  }, [id])\n\n  useEffect(() => {\n    if (id) {\n      loadAuction()\n    }\n  }, [id, loadAuction])\n\n  // Real-time updates for this specific auction\n  useEffect(() => {\n    if (!auction) return\n\n    const unsubscribe = auctionService.subscribe(auction.auction_id, (update) => {\n      setAuction(prevAuction => {\n        if (!prevAuction) return null\n        return {\n          ...prevAuction,\n          current_bid: update.current_bid || prevAuction.current_bid,\n          bidder: update.bidder || prevAuction.bidder,\n          end_time: update.end_time\n        }\n      })\n    })\n\n    return () => unsubscribe()\n  }, [auction])\n\n  const handlePlaceBid = () => {\n    if (!isConnected || !account) {\n      showError('Wallet Required', 'Please connect your wallet to place bids')\n      return\n    }\n    \n    if (auction?.seller === account) {\n      showError('Invalid Action', 'You cannot bid on your own auction')\n      return\n    }\n    \n    setBidAmount('')\n    setShowBidModal(true)\n  }\n\n  const submitBid = async () => {\n    if (!auction || !session || !account) {\n      showError('Error', 'Please connect your wallet first')\n      return\n    }\n    \n    const bidFloat = parseFloat(bidAmount)\n    if (isNaN(bidFloat) || bidFloat <= 0) {\n      showError('Invalid Bid', 'Please enter a valid bid amount')\n      return\n    }\n    \n    const currentBidAmount = parseFloat(auction.current_bid || auction.price) / 100000000\n    const hasExistingBids = auction.current_bid && auction.bidder\n    \n    if (hasExistingBids && bidFloat <= currentBidAmount) {\n      showError('Invalid Bid', `Bid must be higher than current bid of ${currentBidAmount.toFixed(4)} WAX`)\n      return\n    }\n    \n    if (!hasExistingBids && bidFloat < parseFloat(auction.price) / 100000000) {\n      showError('Invalid Bid', `Bid must be at least ${(parseFloat(auction.price) / 100000000).toFixed(4)} WAX`)\n      return\n    }\n    \n    setIsPlacingBid(true)\n    \n    try {\n      const bidAmountInt = Math.floor(bidFloat * 100000000)\n      \n      const result = await session.transact({\n        actions: [{\n          account: 'atomicmarket',\n          name: 'auctionbid',\n          authorization: [{\n            actor: account,\n            permission: 'active'\n          }],\n          data: {\n            bidder: account,\n            auction_id: auction.auction_id,\n            bid: `${bidAmountInt} WAX`,\n            taker_marketplace: 'market.pxj'\n          }\n        }]\n      })\n      \n      if (result) {\n        showSuccess('Bid Placed', `Successfully placed bid of ${bidFloat.toFixed(4)} WAX`)\n        setShowBidModal(false)\n        setBidAmount('')\n        \n        // Update auction state\n        setAuction(prev => prev ? {\n          ...prev,\n          current_bid: bidAmountInt.toString(),\n          bidder: account\n        } : null)\n      }\n    } catch (error: unknown) {\n      console.error('Error placing bid:', error)\n      showError('Bid Failed', error instanceof Error ? error.message : 'Failed to place bid')\n    } finally {\n      setIsPlacingBid(false)\n    }\n  }\n\n  const formatPrice = (price: string) => {\n    const waxPrice = parseFloat(price) / 100000000\n    return `${waxPrice.toFixed(4)} WAX`\n  }\n\n  // Use the robust auctionService formatTimeRemaining function\n  const formatTimeRemaining = (endTime: string) => {\n    return auctionService.formatTimeRemaining(endTime)\n  }\n\n  const handleUserClick = (userAccount: string) => {\n    navigate(`/user-profile-lookup?user=${encodeURIComponent(userAccount)}`)\n  }\n\n  if (loading) {\n    return (\n      <div className=\"auction-detail-page\">\n        <div className=\"loading-container\">\n          <div className=\"loading-spinner\"></div>\n          <p>Loading auction details...</p>\n        </div>\n      </div>\n    )\n  }\n\n  if (error || !auction) {\n    return (\n      <div className=\"auction-detail-page\">\n        <div className=\"error-container\">\n          <h2>Auction Not Found</h2>\n          <p>{error || 'The requested auction could not be found.'}</p>\n          <button \n            className=\"btn-primary\"\n            onClick={() => navigate('/auctions')}\n          >\n            Back to Auctions\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  const timeRemaining = formatTimeRemaining(auction.end_time)\n  const isEnded = timeRemaining === 'Auction ended'\n  const currentPrice = auction.current_bid ? formatPrice(auction.current_bid) : formatPrice(auction.price)\n\n  return (\n    <div className=\"auction-detail-page\">\n      <div className=\"auction-detail-container\">\n        {/* Back Navigation */}\n        <button \n          className=\"back-button\"\n          onClick={() => navigate('/auctions')}\n        >\n          ← Back to Auctions\n        </button>\n\n        <div className=\"auction-detail-content\">\n          {/* NFT Image and Info */}\n          <div className=\"auction-image-section\">\n            <div className=\"auction-image-container\">\n              <MediaRenderer\n                imageUrl={auction.image ? `${API_ENDPOINTS.IPFS.GATEWAYS[0]}${auction.image}` : undefined}\n                videoUrl={auction.video ? `${API_ENDPOINTS.IPFS.GATEWAYS[0]}${auction.video}` : undefined}\n                alt={auction.asset_name || 'NFT'}\n                className=\"auction-image\"\n                enableAnimations={true}\n              />\n            </div>\n            \n            <div className=\"auction-basic-info\">\n              <h1 className=\"auction-title\">\n                {auction.asset_name || `Asset #${auction.asset_id || 'Unknown'}`}\n              </h1>\n              \n              <div className=\"auction-collection\">\n                Collection: {auction.collection_name || 'Unknown'}\n              </div>\n              \n              <div className=\"auction-id\">\n                Auction ID: {auction.auction_id}\n              </div>\n            </div>\n          </div>\n\n          {/* Auction Details */}\n          <div className=\"auction-info-section\">\n            <div className=\"auction-status\">\n              <div className={`status-badge ${isEnded ? 'ended' : 'active'}`}>\n                {isEnded ? 'Ended' : 'Active'}\n              </div>\n              \n              {!isEnded && (\n                <div className=\"time-remaining\">\n                  <span className=\"time-label\">Time Remaining:</span>\n                  <span className=\"time-value\">{timeRemaining}</span>\n                </div>\n              )}\n            </div>\n\n            <div className=\"price-section\">\n              <div className=\"current-price\">\n                <span className=\"price-label\">\n                  {auction.current_bid ? 'Current Bid:' : 'Starting Price:'}\n                </span>\n                <span className=\"price-value\">{currentPrice}</span>\n              </div>\n            </div>\n\n            <div className=\"participants-section\">\n              <div className=\"seller-info\">\n                <span className=\"participant-label\">Seller:</span>\n                <button \n                  className=\"participant-link\"\n                  onClick={() => handleUserClick(auction.seller)}\n                >\n                  {auction.seller}\n                </button>\n              </div>\n              \n              {auction.bidder && (\n                <div className=\"bidder-info\">\n                  <span className=\"participant-label\">Top Bidder:</span>\n                  <button \n                    className=\"participant-link\"\n                    onClick={() => handleUserClick(auction.bidder || '')}\n                  >\n                    {auction.bidder}\n                  </button>\n                </div>\n              )}\n            </div>\n\n            {/* Action Buttons */}\n            <div className=\"auction-actions\">\n              {!isEnded && (\n                <button\n                  className=\"btn-primary bid-button\"\n                  onClick={handlePlaceBid}\n                  disabled={!isConnected || auction.seller === account}\n                >\n                  {!isConnected ? 'Connect Wallet' : \n                   auction.seller === account ? 'Your Auction' : 'Place Bid'}\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Bid Modal */}\n      {showBidModal && (\n        <div className=\"modal-overlay\" onClick={() => setShowBidModal(false)}>\n          <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h3>Place Bid</h3>\n              <button \n                className=\"modal-close\"\n                onClick={() => setShowBidModal(false)}\n              >\n                ×\n              </button>\n            </div>\n            \n            <div className=\"modal-body\">\n              <div className=\"auction-summary\">\n                <MediaRenderer\n                  imageUrl={auction.image ? `${API_ENDPOINTS.IPFS.GATEWAYS[0]}${auction.image}` : undefined}\n                  videoUrl={auction.video ? `${API_ENDPOINTS.IPFS.GATEWAYS[0]}${auction.video}` : undefined}\n                  alt={auction.asset_name || 'NFT'}\n                  className=\"modal-nft-image\"\n                  enableAnimations={true}\n                />\n                <div className=\"modal-nft-info\">\n                  <h4>{auction.asset_name || `Asset #${auction.asset_id || 'Unknown'}`}</h4>\n                  <p>Current: {currentPrice}</p>\n                </div>\n              </div>\n              \n              {auction.bidder && (\n                <div className=\"current-bidder\">\n                  <span className=\"label\">Leading Bidder</span>\n                  <button \n                    className=\"bidder-account\"\n                    onClick={() => handleUserClick(auction.bidder!)}\n                  >\n                    {auction.bidder}\n                  </button>\n                </div>\n              )}\n              \n              <div className=\"bid-input-section\">\n                <label htmlFor=\"bidAmount\">Your Bid (WAX)</label>\n                <input\n                  id=\"bidAmount\"\n                  type=\"number\"\n                  step=\"0.0001\"\n                  placeholder=\"Enter bid amount\"\n                  value={bidAmount}\n                  onChange={(e) => setBidAmount(e.target.value)}\n                  min={auction.current_bid && auction.bidder ? \n                    parseFloat(auction.current_bid) / 100000000 + 0.0001 : \n                    parseFloat(auction.price) / 100000000\n                  }\n                />\n                <div className=\"bid-requirement\">\n                  Minimum: {auction.current_bid && auction.bidder ?\n                    `${(parseFloat(auction.current_bid) / 100000000 + 0.0001).toFixed(4)} WAX` :\n                    `${(parseFloat(auction.price) / 100000000).toFixed(4)} WAX`\n                  }\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"modal-footer\">\n              <button \n                className=\"btn-secondary\"\n                onClick={() => setShowBidModal(false)}\n                disabled={isPlacingBid}\n              >\n                Cancel\n              </button>\n              <button \n                className=\"btn-primary\"\n                onClick={submitBid}\n                disabled={isPlacingBid || !bidAmount}\n              >\n                {isPlacingBid ? 'Placing Bid...' : 'Place Bid'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default AuctionDetail","import React, { useState } from 'react'\nimport '../css/learn.css'\n\ninterface GuideSection {\n  id: string\n  title: string\n  content: React.ReactNode\n}\n\nconst Learn: React.FC = () => {\n  const [activeSection, setActiveSection] = useState<string>('getting-started')\n\n  const guides: GuideSection[] = [\n    {\n      id: 'getting-started',\n      title: 'Getting Started on WAX',\n      content: (\n        <div className=\"guide-content\">\n          <h3>Welcome to the WAX Blockchain!</h3>\n          <p>\n            WAX (Worldwide Asset eXchange) is a purpose-built blockchain for NFTs and gaming. \n            Here's how to get started:\n          </p>\n          \n          <div className=\"step-list\">\n            <div className=\"step\">\n              <div className=\"step-number\">1</div>\n              <div className=\"step-content\">\n                <h4>Create a WAX Wallet</h4>\n                <p>Visit <a href=\"https://wallet.wax.io\" target=\"_blank\" rel=\"noopener noreferrer\">wallet.wax.io</a> to create your free WAX account. No gas fees required!</p>\n              </div>\n            </div>\n            \n            <div className=\"step\">\n              <div className=\"step-number\">2</div>\n              <div className=\"step-content\">\n                <h4>Get Some WAX Tokens</h4>\n                <p>Purchase WAX tokens from exchanges like Binance, KuCoin, or use the built-in WAX wallet exchange.</p>\n              </div>\n            </div>\n            \n            <div className=\"step\">\n              <div className=\"step-number\">3</div>\n              <div className=\"step-content\">\n                <h4>Connect Your Wallet</h4>\n                <p>Use the \"Connect Wallet\" button in the top right to connect your WAX wallet to PxMarket.</p>\n              </div>\n            </div>\n            \n            <div className=\"step\">\n              <div className=\"step-number\">4</div>\n              <div className=\"step-content\">\n                <h4>Start Trading!</h4>\n                <p>Browse collections, buy NFTs, and start building your digital asset portfolio.</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      )\n    },\n    {\n      id: 'pixel-journey',\n      title: 'About Pixel Journey',\n      content: (\n        <div className=\"guide-content\">\n          <h3>Welcome to Pixel Journey!</h3>\n          <p>\n            Pixel Journey is a comprehensive NFT ecosystem on the WAX blockchain, featuring \n            unique pixel art collections and gaming utilities.\n          </p>\n          \n          <div className=\"feature-grid\">\n            <div className=\"feature-card\">\n              <h4>🎨 Pixel Art NFTs</h4>\n              <p>Collect unique pixel art characters, items, and accessories with various rarity levels.</p>\n            </div>\n            \n            <div className=\"feature-card\">\n              <h4>🎮 Gaming Integration</h4>\n              <p>Use your NFTs in games and earn rewards through various gameplay mechanics.</p>\n            </div>\n            \n            <div className=\"feature-card\">\n              <h4>💎 Staking Rewards</h4>\n              <p>Stake your Pixel Journey NFTs to earn PXJ tokens and other rewards.</p>\n            </div>\n            \n            <div className=\"feature-card\">\n              <h4>🏪 Marketplace</h4>\n              <p>Trade your NFTs on our integrated marketplace with zero fees for holders.</p>\n            </div>\n          </div>\n          \n          <div className=\"collections-info\">\n            <h4>Main Collections:</h4>\n            <ul>\n              <li><strong>Pixals:</strong> The main character collection with various traits and rarities</li>\n              <li><strong>Pixel Ingredients:</strong> Crafting materials and consumables</li>\n              <li><strong>Pixel Tools:</strong> Equipment and utility items</li>\n              <li><strong>Pixel Lands:</strong> Virtual land parcels for building and development</li>\n            </ul>\n          </div>\n        </div>\n      )\n    },\n    {\n      id: 'trading-tips',\n      title: 'Trading Tips & Strategies',\n      content: (\n        <div className=\"guide-content\">\n          <h3>Smart Trading on WAX</h3>\n          \n          <div className=\"tip-section\">\n            <h4>🔍 Research Before Buying</h4>\n            <ul>\n              <li>Check the collection's total supply and rarity distribution</li>\n              <li>Look at recent sales history and price trends</li>\n              <li>Verify the authenticity of the collection</li>\n              <li>Join the project's Discord or Telegram for community insights</li>\n            </ul>\n          </div>\n          \n          <div className=\"tip-section\">\n            <h4>💰 Pricing Strategies</h4>\n            <ul>\n              <li>Use floor price as a baseline for common items</li>\n              <li>Factor in rarity and trait combinations for pricing</li>\n              <li>Consider market timing and overall WAX ecosystem trends</li>\n              <li>Set competitive prices for quick sales or premium prices for rare items</li>\n            </ul>\n          </div>\n          \n          <div className=\"tip-section\">\n            <h4>⚠️ Risk Management</h4>\n            <ul>\n              <li>Never invest more than you can afford to lose</li>\n              <li>Diversify across different collections and projects</li>\n              <li>Be aware of market volatility and seasonal trends</li>\n              <li>Keep some WAX liquid for opportunities</li>\n            </ul>\n          </div>\n        </div>\n      )\n    },\n    {\n      id: 'faq',\n      title: 'Frequently Asked Questions',\n      content: (\n        <div className=\"guide-content\">\n          <h3>Common Questions</h3>\n          \n          <div className=\"faq-list\">\n            <div className=\"faq-item\">\n              <h4>Q: Are there any fees for trading on PxMarket?</h4>\n              <p>A: PxMarket charges a small marketplace fee on sales. However, Pixel Journey NFT holders may receive fee discounts or exemptions.</p>\n            </div>\n            \n            <div className=\"faq-item\">\n              <h4>Q: How do I know if an NFT is authentic?</h4>\n              <p>A: Always verify the collection name and creator account. Authentic Pixel Journey NFTs are minted by verified accounts and will show the official collection badge.</p>\n            </div>\n            \n            <div className=\"faq-item\">\n              <h4>Q: Can I cancel a listing after it's posted?</h4>\n              <p>A: Yes, you can cancel your listings at any time from your inventory or profile page. There's no fee for canceling listings.</p>\n            </div>\n            \n            <div className=\"faq-item\">\n              <h4>Q: What happens if I lose access to my WAX wallet?</h4>\n              <p>A: Always keep your private keys and recovery phrases secure. If you lose access, you may lose your NFTs permanently. Consider using hardware wallets for valuable collections.</p>\n            </div>\n            \n            <div className=\"faq-item\">\n              <h4>Q: How do I participate in NFT drops and launches?</h4>\n              <p>A: Follow Pixel Journey on social media and join our Discord for announcements. Most drops happen directly through our platform or partner sites.</p>\n            </div>\n            \n            <div className=\"faq-item\">\n              <h4>Q: Can I use my NFTs in games?</h4>\n              <p>A: Many Pixel Journey NFTs have gaming utility. Check the NFT details page for specific game integrations and benefits.</p>\n            </div>\n          </div>\n        </div>\n      )\n    },\n    {\n      id: 'advanced',\n      title: 'Advanced Features',\n      content: (\n        <div className=\"guide-content\">\n          <h3>Power User Features</h3>\n          \n          <div className=\"advanced-section\">\n            <h4>🔧 Bulk Operations</h4>\n            <p>Use our bulk tools to:</p>\n            <ul>\n              <li>List multiple NFTs at once with smart pricing</li>\n              <li>Transfer multiple items to different recipients</li>\n              <li>Burn unwanted NFTs in batches</li>\n              <li>Stake multiple NFTs for rewards</li>\n            </ul>\n          </div>\n          \n          <div className=\"advanced-section\">\n            <h4>📊 Analytics & Tracking</h4>\n            <p>Monitor your portfolio with:</p>\n            <ul>\n              <li>Real-time portfolio value tracking</li>\n              <li>Transaction history and profit/loss analysis</li>\n              <li>Collection performance metrics</li>\n              <li>Market trend indicators</li>\n            </ul>\n          </div>\n          \n          <div className=\"advanced-section\">\n            <h4>🎯 Watchlists & Alerts</h4>\n            <p>Stay informed with:</p>\n            <ul>\n              <li>Custom watchlists for tracking specific NFTs</li>\n              <li>Price alerts for collections you're interested in</li>\n              <li>New listing notifications</li>\n              <li>Auction ending reminders</li>\n            </ul>\n          </div>\n        </div>\n      )\n    }\n  ]\n\n  return (\n    <div className=\"learn-page\">\n      <div className=\"page-header\">\n        <h1>Learn Hub</h1>\n        <p>Everything you need to know about WAX, NFTs, and Pixel Journey</p>\n      </div>\n\n      <div className=\"learn-container\">\n        <div className=\"learn-sidebar\">\n          <nav className=\"learn-nav\">\n            {guides.map((guide) => (\n              <button\n                key={guide.id}\n                className={`nav-item ${activeSection === guide.id ? 'active' : ''}`}\n                onClick={() => setActiveSection(guide.id)}\n              >\n                {guide.title}\n              </button>\n            ))}\n          </nav>\n        </div>\n\n        <div className=\"learn-content\">\n          {guides.find(guide => guide.id === activeSection)?.content}\n        </div>\n      </div>\n\n      <div className=\"help-section\">\n        <h3>Need More Help?</h3>\n        <p>Access our documentation and join our community for support:</p>\n        <div className=\"community-links\">\n          <a href=\"https://docs.pixeljourney.xyz\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"community-link docs\">\n            <span className=\"icon\">📚</span>\n            Documentation\n          </a>\n          <a href=\"#\" className=\"community-link discord\">\n            <span className=\"icon\">💬</span>\n            Discord Community\n          </a>\n          <a href=\"#\" className=\"community-link telegram\">\n            <span className=\"icon\">📱</span>\n            Telegram Group\n          </a>\n          <a href=\"#\" className=\"community-link twitter\">\n            <span className=\"icon\">🐦</span>\n            Twitter Updates\n          </a>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Learn","import React, { useState } from 'react'\nimport '../css/journeymap.css'\n\ninterface Section {\n  id: string\n  title: string\n  content: React.ReactNode\n}\n\nconst JourneyMap: React.FC = () => {\n  const [activeSection, setActiveSection] = useState('overview')\n\n  const sections: Section[] = [\n    {\n      id: 'overview',\n      title: 'Overview',\n      content: (\n        <div className=\"section-content\">\n          <h3>PxMarket Journey Map</h3>\n          <p>Welcome to the comprehensive roadmap of the Pixel Journey ecosystem. This page serves as both a sitemap for current features and a development roadmap for future enhancements.</p>\n          \n          <div className=\"ecosystem-grid\">\n            <div className=\"ecosystem-card current\">\n              <h4>🏪 Current Platform</h4>\n              <p>PxMarket - Your gateway to the Pixel Journey NFT ecosystem</p>\n            </div>\n            <div className=\"ecosystem-card future\">\n              <h4>🚀 Future dApps</h4>\n              <p>Expanding ecosystem of interconnected applications</p>\n            </div>\n          </div>\n        </div>\n      )\n    },\n    {\n      id: 'pxmarket-features',\n      title: 'PxMarket Features',\n      content: (\n        <div className=\"section-content\">\n          <h3>PxMarket Feature Map</h3>\n          <p>Explore all the features available in the current PxMarket platform:</p>\n          \n          <div className=\"feature-category\">\n            <h4>🛒 Marketplace Core</h4>\n            <div className=\"feature-list\">\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">NFT Marketplace</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">Collection Browser</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">Asset Details</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">Advanced Filtering</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"feature-category\">\n            <h4>👤 User Features</h4>\n            <div className=\"feature-list\">\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">User Profiles</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">Inventory Management</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">Watchlist</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">Activity Tracking</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"feature-category\">\n            <h4>💰 Trading & Economy</h4>\n            <div className=\"feature-list\">\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">Buy/Sell NFTs</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">Bulk Operations</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">Price Analytics</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">Auctions</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">Offers System</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">Shopping Cart</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"feature-category\">\n            <h4>🔄 WAX Integration</h4>\n            <div className=\"feature-list\">\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">RWAX Tokenization</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">WAX Balance Management</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">Resource Management (CPU/NET/RAM)</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">Multi-Wallet Support</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"feature-category\">\n            <h4>🏆 Staking & Rewards</h4>\n            <div className=\"feature-list\">\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">NFT Staking</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">Token Staking</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">Reward Distribution</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">PXJ Badge System</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"feature-category\">\n            <h4>🎁 Rewards & Gamification</h4>\n            <div className=\"feature-list\">\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">Pack Opening</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">Chat System</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">Live Transactions Feed</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">Social Sharing</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <div className=\"feature-item planned\">\n                <span className=\"feature-name\">Achievement System</span>\n                <span className=\"status-badge planned\">Planned</span>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"feature-category\">\n            <h4>🛠️ Advanced Features</h4>\n            <div className=\"feature-list\">\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">NFT Comparison Tool</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">Portfolio Analytics</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">Price Alerts</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">Collection Analytics</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">Accessibility Features</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <div className=\"feature-item live\">\n                <span className=\"feature-name\">PWA Support</span>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"feature-category\">\n            <h4>🎨 Crafting & Creation</h4>\n            <div className=\"feature-list\">\n              <div className=\"feature-item beta\">\n                <span className=\"feature-name\">NFT Crafting System</span>\n                <span className=\"status-badge beta\">Beta</span>\n              </div>\n              <div className=\"feature-item planned\">\n                <span className=\"feature-name\">Custom Templates</span>\n                <span className=\"status-badge planned\">Planned</span>\n              </div>\n              <div className=\"feature-item planned\">\n                <span className=\"feature-name\">Community Creations</span>\n                <span className=\"status-badge planned\">Planned</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      )\n    },\n    {\n      id: 'wax-ecosystem',\n      title: 'WAX Ecosystem',\n      content: (\n        <div className=\"section-content\">\n          <h3>PXJourney across WAX</h3>\n          <p>Explore the expanding Pixel Journey ecosystem on the WAX blockchain:</p>\n          \n          <div className=\"dapp-grid\">\n            <div className=\"dapp-card live purple-glow\">\n              <div className=\"dapp-header\">\n                <h4>PxMarket</h4>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <p>NFT marketplace and trading platform</p>\n              <a href=\"https://market.pixeljourney.xyz\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"dapp-link\">\n                Visit PxMarket →\n              </a>\n            </div>\n\n            <div className=\"dapp-card live green-glow\">\n              <div className=\"dapp-header\">\n                <h4>PxStaking</h4>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <p>Stake your Pixel Journey NFTs for rewards</p>\n              <a href=\"https://stake.pixeljourney.xyz\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"dapp-link\">\n                Visit PxStaking →\n              </a>\n            </div>\n\n            <div className=\"dapp-card live golden-glow\">\n              <div className=\"dapp-header\">\n                <h4>PxLeaderboards</h4>\n                <span className=\"status-badge live\">Live</span>\n              </div>\n              <p>Track rankings and compete with other players</p>\n              <a href=\"https://lb.pixeljourney.xyz\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"dapp-link\">\n                Visit PxLeaderboards →\n              </a>\n            </div>\n\n            <div className=\"dapp-card planned\">\n              <div className=\"dapp-header\">\n                <h4>PxDeFi</h4>\n                <span className=\"status-badge planned\">ETA TBD</span>\n              </div>\n              <p>Decentralized finance features for the ecosystem</p>\n              <div className=\"dapp-link disabled\">Coming via PxMilestones</div>\n            </div>\n\n            <div className=\"dapp-card coming-soon\">\n              <div className=\"dapp-header\">\n                <h4>PxCraft</h4>\n                <span className=\"status-badge coming-soon\">Coming Soon</span>\n              </div>\n              <p>Craft and create new NFTs from existing assets</p>\n              <div className=\"dapp-link disabled\">In Development</div>\n            </div>\n\n            <div className=\"dapp-card coming-soon\">\n              <div className=\"dapp-header\">\n                <h4>PxMilestones</h4>\n                <span className=\"status-badge coming-soon\">Coming Soon</span>\n              </div>\n              <p>Achievement and milestone tracking system</p>\n              <div className=\"dapp-link disabled\">In Development</div>\n            </div>\n\n            <div className=\"dapp-card planned\">\n              <div className=\"dapp-header\">\n                <h4>PxQuest</h4>\n                <span className=\"status-badge planned\">ETA TBD</span>\n              </div>\n              <p>Quest and mission system for earning rewards</p>\n              <div className=\"dapp-link disabled\">Coming via PxMilestones</div>\n            </div>\n\n            <div className=\"dapp-card planned\">\n              <div className=\"dapp-header\">\n                <h4>PxDAO</h4>\n                <span className=\"status-badge planned\">ETA TBD</span>\n              </div>\n              <p>Decentralized governance for the ecosystem</p>\n              <div className=\"dapp-link disabled\">Coming via PxMilestones</div>\n            </div>\n          </div>\n        </div>\n      )\n    },\n    {\n      id: 'external-links',\n      title: 'External Platforms',\n      content: (\n        <div className=\"section-content\">\n          <h3>Pixel Journey Across Platforms</h3>\n          <p>Find Pixel Journey on various platforms and marketplaces:</p>\n          \n          <div className=\"platform-category\">\n            <h4>🌐 Official Websites</h4>\n            <div className=\"link-grid\">\n              <a href=\"https://pixeljourney.xyz/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"platform-link\">\n                <span className=\"platform-name\">Main Website</span>\n                <span className=\"platform-desc\">Official Pixel Journey homepage</span>\n              </a>\n              <a href=\"https://docs.pixeljourney.xyz\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"platform-link\">\n                <span className=\"platform-name\">Documentation</span>\n                <span className=\"platform-desc\">Complete project documentation</span>\n              </a>\n            </div>\n          </div>\n\n          <div className=\"platform-category\">\n            <h4>🛒 NFT Marketplaces (WAX)</h4>\n            <div className=\"link-grid\">\n              <a href=\"https://atomichub.io/explorer/collection/wax-mainnet/pixeljourney\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"platform-link\">\n                <span className=\"platform-name\">AtomicHub</span>\n                <span className=\"platform-desc\">Primary WAX marketplace</span>\n              </a>\n              <a href=\"https://neftyblocks.com/collection/pixeljourney/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"platform-link\">\n                <span className=\"platform-name\">NeftyBlocks</span>\n                <span className=\"platform-desc\">WAX NFT marketplace</span>\n              </a>\n              <a href=\"https://nfthive.io/collection/pixeljourney\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"platform-link\">\n                <span className=\"platform-name\">NFTHive</span>\n                <span className=\"platform-desc\">WAX marketplace and drops</span>\n              </a>\n              <a href=\"https://www.pfpwizard.xyz/pfp/pixals/ranking/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"platform-link\">\n                <span className=\"platform-name\">PFP Wizard</span>\n                <span className=\"platform-desc\">Pixal PFP marketplace</span>\n              </a>\n            </div>\n          </div>\n\n          <div className=\"platform-category\">\n            <h4>🌉 Cross-Chain Marketplaces</h4>\n            <div className=\"link-grid\">\n              <a href=\"https://opensea.io/collection/pixeljourney-polygon\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"platform-link\">\n                <span className=\"platform-name\">OpenSea (Polygon)</span>\n                <span className=\"platform-desc\">Polygon bridged collection</span>\n              </a>\n              <a href=\"https://opensea.io/collection/pixeljourney-base\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"platform-link\">\n                <span className=\"platform-name\">OpenSea (Base)</span>\n                <span className=\"platform-desc\">Base bridged collection</span>\n              </a>\n              <a href=\"https://opensea.io/collection/pixeljourney-eth\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"platform-link\">\n                <span className=\"platform-name\">OpenSea (Ethereum)</span>\n                <span className=\"platform-desc\">Ethereum bridged collection</span>\n              </a>\n              <a href=\"https://nft.monbase.com/collections/66c4eb2ca339b05c5a660e44/detail\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"platform-link\">\n                <span className=\"platform-name\">MonBase</span>\n                <span className=\"platform-desc\">Base chain marketplace</span>\n              </a>\n            </div>\n          </div>\n\n          <div className=\"platform-category\">\n            <h4>💰 DeFi & Staking</h4>\n            <div className=\"link-grid\">\n              <a href=\"https://waxdao.io/v2/farm/pixeljourney\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"platform-link\">\n                <span className=\"platform-name\">WaxDAO Farm</span>\n                <span className=\"platform-desc\">NFT staking rewards</span>\n              </a>\n              <a href=\"https://www.pfpwizard.xyz/pfp/pixals/buy/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"platform-link\">\n                <span className=\"platform-name\">PFP Wizard Buy</span>\n                <span className=\"platform-desc\">Get your Pixal PFP</span>\n              </a>\n            </div>\n          </div>\n        </div>\n      )\n    },\n    {\n      id: 'social-community',\n      title: 'Social & Community',\n      content: (\n        <div className=\"section-content\">\n          <h3>Join the Community</h3>\n          <p>Connect with the Pixel Journey community across various platforms:</p>\n          \n          <div className=\"social-grid\">\n            <a href=\"https://twitter.com/PxJourney\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"social-link twitter\">\n              <div className=\"social-icon\">🐦</div>\n              <div className=\"social-info\">\n                <span className=\"social-name\">Twitter/X</span>\n                <span className=\"social-desc\">Latest updates and announcements</span>\n              </div>\n            </a>\n\n            <a href=\"https://t.me/pixel_journey\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"social-link telegram\">\n              <div className=\"social-icon\">📱</div>\n              <div className=\"social-info\">\n                <span className=\"social-name\">Telegram</span>\n                <span className=\"social-desc\">Community chat and discussions</span>\n              </div>\n            </a>\n\n            <a href=\"https://discord.gg/waxblockchain\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"social-link discord\">\n              <div className=\"social-icon\">💬</div>\n              <div className=\"social-info\">\n                <span className=\"social-name\">WAX Discord</span>\n                <span className=\"social-desc\">Join the broader WAX community</span>\n              </div>\n            </a>\n\n            <a href=\"https://instagram.com/pixeljourney_xyz\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"social-link instagram\">\n              <div className=\"social-icon\">📸</div>\n              <div className=\"social-info\">\n                <span className=\"social-name\">Instagram</span>\n                <span className=\"social-desc\">Visual updates and behind-the-scenes</span>\n              </div>\n            </a>\n\n            <a href=\"https://coinmarketcap.com/community/profile/pixeljourney/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"social-link cmc\">\n              <div className=\"social-icon\">📊</div>\n              <div className=\"social-info\">\n                <span className=\"social-name\">CoinMarketCap</span>\n                <span className=\"social-desc\">Project profile and metrics</span>\n              </div>\n            </a>\n\n            <a href=\"https://dappradar.com/nft-collection/pixel-journey\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"social-link dappradar\">\n              <div className=\"social-icon\">📈</div>\n              <div className=\"social-info\">\n                <span className=\"social-name\">DappRadar</span>\n                <span className=\"social-desc\">NFT collection analytics</span>\n              </div>\n            </a>\n\n            <a href=\"https://pixel-journey.uncut.network/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"social-link uncut\">\n              <div className=\"social-icon\">🎮</div>\n              <div className=\"social-info\">\n                <span className=\"social-name\">Uncut Network</span>\n                <span className=\"social-desc\">Gaming community presence</span>\n              </div>\n            </a>\n          </div>\n        </div>\n      )\n    },\n    {\n      id: 'roadmap',\n      title: 'Development Roadmap',\n      content: (\n        <div className=\"section-content\">\n          <h3>Future Development Roadmap</h3>\n          <p>Planned features and enhancements for the Pixel Journey ecosystem:</p>\n          \n          <div className=\"roadmap-timeline\">\n            <div className=\"roadmap-phase completed\">\n              <div className=\"phase-header\">\n                <h4>Phase 1: Foundation</h4>\n                <span className=\"phase-status completed\">Completed</span>\n              </div>\n              <ul>\n                <li>✅ PxMarket NFT marketplace launch</li>\n                <li>✅ Basic trading functionality</li>\n                <li>✅ User profiles and inventory</li>\n                <li>✅ PXJ token integration</li>\n              </ul>\n            </div>\n\n            <div className=\"roadmap-phase current\">\n              <div className=\"phase-header\">\n                <h4>Phase 2: Enhancement</h4>\n                <span className=\"phase-status current\">Current</span>\n              </div>\n              <ul>\n                <li>✅ Advanced filtering and search</li>\n                <li>✅ Bulk operations</li>\n                <li>🔄 Auction system (Beta)</li>\n                <li>🔄 Enhanced analytics</li>\n              </ul>\n            </div>\n\n            <div className=\"roadmap-phase planned\">\n              <div className=\"phase-header\">\n                <h4>Phase 3: Ecosystem Expansion</h4>\n                <span className=\"phase-status planned\">Q2 2025</span>\n              </div>\n              <ul>\n                <li>🔮 PxCraft crafting system</li>\n                <li>🔮 PxMilestones achievement system</li>\n                <li>🔮 Enhanced gamification</li>\n                <li>🔮 Cross-platform integration</li>\n              </ul>\n            </div>\n\n            <div className=\"roadmap-phase future\">\n              <div className=\"phase-header\">\n                <h4>Phase 4: Advanced Features</h4>\n                <span className=\"phase-status future\">Q3-Q4 2025</span>\n              </div>\n              <ul>\n                <li>🔮 PxQuest mission system</li>\n                <li>🔮 PxDeFi financial features</li>\n                <li>🔮 PxDAO governance</li>\n                <li>🔮 Mobile applications</li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      )\n    }\n  ]\n\n  return (\n    <div className=\"journeymap-page\">\n      <div className=\"page-header\">\n        <h1>Journey Map</h1>\n        <p>Your comprehensive guide to the Pixel Journey ecosystem - current features, future roadmap, and community links</p>\n      </div>\n\n      <div className=\"journeymap-container\">\n        <div className=\"journeymap-sidebar\">\n          <nav className=\"journeymap-nav\">\n            {sections.map((section) => (\n              <button\n                key={section.id}\n                className={`nav-item ${activeSection === section.id ? 'active' : ''}`}\n                onClick={() => setActiveSection(section.id)}\n              >\n                {section.title}\n              </button>\n            ))}\n          </nav>\n        </div>\n\n        <div className=\"journeymap-content\">\n          {sections.find(section => section.id === activeSection)?.content}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default JourneyMap","import React, { useState, useEffect } from 'react'\nimport { useWallet } from '../hooks/useWallet'\nimport { useNotifications } from '../hooks/useNotifications'\nimport { stakingService, type BatchTransactionResult } from '../services/stakingService'\nimport { NFTImage } from './FallbackImage'\nimport { log } from '../services/loggingService'\nimport '../css/modal.css'\n\ninterface NFTAsset {\n  asset_id: string\n  template_id: string\n  name: string\n  image: string\n  data: Record<string, unknown>\n}\n\ninterface StakeDataRow {\n  user: string\n  staked_assets: string[]\n}\n\ninterface NFTStakingModalProps {\n  isOpen: boolean\n  onClose: () => void\n  templateId: string\n  templateName: string\n  action: 'stake' | 'unstake'\n  onSuccess?: () => void\n}\n\nconst NFTStakingModal: React.FC<NFTStakingModalProps> = ({ \n  isOpen, \n  onClose, \n  templateId,\n  templateName,\n  action, \n  onSuccess \n}) => {\n  const [assets, setAssets] = useState<NFTAsset[]>([])\n  const [selectedAssets, setSelectedAssets] = useState<string[]>([])\n  const [isLoading, setIsLoading] = useState(false)\n  const [isProcessing, setIsProcessing] = useState(false)\n  const [batchProgress, setBatchProgress] = useState<{ current: number; total: number } | null>(null)\n  const [transactionResults, setTransactionResults] = useState<BatchTransactionResult | null>(null)\n  const { session, account } = useWallet()\n  const { addNotification, showSuccess, showError } = useNotifications()\n\n  useEffect(() => {\n    if (isOpen && account) {\n      fetchAssets()\n    }\n  }, [isOpen, account, templateId])\n\n  const fetchAssets = async () => {\n    if (!account) return\n    \n    setIsLoading(true)\n    try {\n      if (action === 'stake') {\n        // Fetch unstaked assets from AtomicAssets API\n        const { apiService } = await import('../services/api')\n        const endpoint = `${apiService.atomicAssetsAPI}/atomicassets/v1/assets?owner=${account}&template_id=${templateId}&page=1&limit=100&order=desc&sort=asset_id`\n        const response = await apiService.fetchWithRetry(endpoint)\n        const data = await response.json()\n        setAssets(data.data || [])\n      } else {\n        // For unstaking, we need to fetch staked assets from contract tables\n        const { apiService } = await import('../services/api')\n        const contractResponse = await apiService.waxRpcCall('/v1/chain/get_table_rows', {\n          json: true,\n          code: 'farms.waxdao',\n          scope: 'farms.waxdao',\n          table: 'stakers',\n          lower_bound: account,\n          upper_bound: account,\n          limit: 1\n        })\n        \n        const contractData = contractResponse as { rows: StakeDataRow[] }\n        const userStakeData = contractData.rows.find((row: StakeDataRow) => row.user === account)\n        const stakedAssetIds = userStakeData?.staked_assets || []\n        \n        // Fetch asset details from AtomicAssets API\n        if (stakedAssetIds.length === 0) {\n          setAssets([])\n        } else {\n          const assetsResponse = await apiService.fetchWithRetry(`${apiService.atomicAssetsAPI}/atomicassets/v1/assets?ids=${stakedAssetIds.join(',')}&page=1&limit=1000`)\n          if (!assetsResponse.ok) {\n            throw new Error('Failed to fetch asset details')\n          }\n          \n          const assetsData = await assetsResponse.json()\n          setAssets(assetsData.data || [])\n        }\n      }\n    } catch (error) {\n      log.error('Failed to fetch staking assets', 'NFTStakingModal.fetchAssets', error as Error, { account })\n      addNotification({ type: 'error', message: 'Failed to load assets' })\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const handleAssetToggle = (assetId: string) => {\n    setSelectedAssets(prev => \n      prev.includes(assetId) \n        ? prev.filter(id => id !== assetId)\n        : [...prev, assetId]\n    )\n  }\n\n  const handleSelectAll = () => {\n    if (selectedAssets.length === assets.length) {\n      setSelectedAssets([])\n    } else {\n      setSelectedAssets(assets.map(asset => asset.asset_id))\n    }\n  }\n\n  const handleSubmit = async () => {\n    if (!session || selectedAssets.length === 0) return\n\n    setIsProcessing(true)\n    setBatchProgress({ current: 0, total: selectedAssets.length })\n    setTransactionResults(null)\n    \n    try {\n      let result: BatchTransactionResult\n      \n      if (action === 'stake') {\n        result = await stakingService.stakeNFTsBatch(\n          session,\n          selectedAssets,\n          'pixeljourney'\n        )\n      } else {\n        result = await stakingService.unstakeNFTsBatch(\n          session,\n          selectedAssets\n        )\n      }\n      \n      setTransactionResults(result)\n      \n      if (result.success) {\n        showSuccess(\n          'Transaction Successful',\n          `Successfully ${action}d ${result.successful_transactions.length} ${templateName} NFT${result.successful_transactions.length > 1 ? 's' : ''}`\n        )\n        \n        // Close modal after successful transaction\n        setTimeout(() => {\n          onSuccess?.()\n          onClose()\n        }, 2000)\n      } else {\n        const successCount = result.successful_transactions.length\n        const failCount = result.failed_transactions.length\n        \n        if (successCount > 0) {\n          showSuccess(\n            'Partial Success',\n            `${successCount} NFTs ${action}d successfully, ${failCount} failed`\n          )\n        } else {\n          showError(\n            'Transaction Failed',\n            `Failed to ${action} NFTs. Please try again.`\n          )\n        }\n      }\n      \n    } catch (error: unknown) {\n      log.error(`NFT ${action} operation failed`, `NFTStakingModal.handleBatchAction`, error as Error, { action, selectedAssetsCount: selectedAssets.length })\n      const errorMessage = error instanceof Error ? error.message : `Failed to ${action} NFTs`\n      showError(\n        'Transaction Error',\n        errorMessage\n      )\n    } finally {\n      setIsProcessing(false)\n      setBatchProgress(null)\n    }\n  }\n\n  if (!isOpen) return null\n\n  return (\n    <div className=\"modal-overlay\" onClick={onClose}>\n      <div className=\"modal-content nft-staking-modal\" onClick={e => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h2>{action === 'stake' ? 'Stake' : 'Unstake'} {templateName} NFTs</h2>\n          <button className=\"modal-close\" onClick={onClose}>×</button>\n        </div>\n        \n        <div className=\"modal-body\">\n          {isLoading ? (\n            <div className=\"loading-state\">\n              <div className=\"loading-spinner\"></div>\n              <p>Loading your {templateName} NFTs...</p>\n            </div>\n          ) : isProcessing ? (\n            <div className=\"processing-state\">\n              <div className=\"loading-spinner\"></div>\n              <p>{action === 'stake' ? 'Staking' : 'Unstaking'} your NFTs...</p>\n              {batchProgress && (\n                <div className=\"batch-progress\">\n                  <div className=\"progress-bar\">\n                    <div \n                      className=\"progress-fill\"\n                      style={{ width: `${(batchProgress.current / batchProgress.total) * 100}%` }}\n                    ></div>\n                  </div>\n                  <p>Processing {batchProgress.current} of {batchProgress.total} NFTs</p>\n                </div>\n              )}\n              {transactionResults && (\n                <div className=\"transaction-results\">\n                  <div className=\"results-summary\">\n                    <div className=\"success-count\">\n                      ✅ {transactionResults.successful_transactions.length} successful\n                    </div>\n                    {transactionResults.failed_transactions.length > 0 && (\n                      <div className=\"error-count\">\n                        ❌ {transactionResults.failed_transactions.length} failed\n                      </div>\n                    )}\n                  </div>\n                  {transactionResults.failed_transactions.length > 0 && (\n                    <div className=\"failed-transactions\">\n                      <h4>Failed Transactions:</h4>\n                      {transactionResults.failed_transactions.slice(0, 5).map(failure => (\n                        <div key={failure.asset_id} className=\"failure-item\">\n                          <span>#{failure.asset_id}</span>\n                          <span className=\"error-message\">{failure.error}</span>\n                        </div>\n                      ))}\n                      {transactionResults.failed_transactions.length > 5 && (\n                        <p>... and {transactionResults.failed_transactions.length - 5} more</p>\n                      )}\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n          ) : (\n            <>\n              <div className=\"selection-controls\">\n                <button \n                  className=\"btn btn-secondary\"\n                  onClick={handleSelectAll}\n                >\n                  {selectedAssets.length === assets.length ? 'Deselect All' : 'Select All'}\n                </button>\n                <span className=\"selection-count\">\n                  {selectedAssets.length} of {assets.length} selected\n                </span>\n              </div>\n              \n              <div className=\"asset-grid\">\n                {assets.length === 0 ? (\n                  <div className=\"no-assets\">\n                    <p>No {templateName} NFTs available to {action}</p>\n                  </div>\n                ) : (\n                  assets.map(asset => (\n                    <div \n                      key={asset.asset_id}\n                      className={`asset-item ${selectedAssets.includes(asset.asset_id) ? 'selected' : ''}`}\n                      onClick={() => handleAssetToggle(asset.asset_id)}\n                    >\n                      <NFTImage \n                        src={asset.image || `https://ipfs.io/ipfs/${asset.data?.img || 'placeholder'}`} \n                        alt={asset.name}\n                      />\n                      <div className=\"asset-id\">#{asset.asset_id}</div>\n                      {selectedAssets.includes(asset.asset_id) && (\n                        <div className=\"selection-indicator\">✓</div>\n                      )}\n                    </div>\n                  ))\n                )}\n              </div>\n            </>\n          )}\n        </div>\n        \n        <div className=\"modal-footer\">\n          <button className=\"btn btn-secondary\" onClick={onClose}>\n            Cancel\n          </button>\n          <button \n            className=\"btn btn-primary\"\n            onClick={handleSubmit}\n            disabled={selectedAssets.length === 0 || isProcessing}\n          >\n            {isProcessing ? (\n              <>\n                <div className=\"loading-spinner\"></div>\n                {action === 'stake' ? 'Staking...' : 'Unstaking...'}\n              </>\n            ) : (\n              `${action === 'stake' ? 'Stake' : 'Unstake'} ${selectedAssets.length} NFT${selectedAssets.length !== 1 ? 's' : ''}`\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default NFTStakingModal","import React, { useState, useEffect, useCallback } from 'react'\nimport { useWallet } from '../hooks/useWallet'\nimport { useNotifications } from '../hooks/useNotifications'\nimport { stakingService, type TransactionResult, type TokenStakeInfo, type TokenFarmInfo } from '../services/stakingService'\nimport { TokenImage } from './FallbackImage'\nimport '../css/modal.css'\n\n// Helper function to get token icon URL\nconst getTokenIcon = (tokenSymbol: string): string => {\n  const tokenIcons: Record<string, string> = {\n    'PXJ': '/img/tokens/pxj.png',\n    'WUF': '/img/tokens/wuf.png',\n    'WAX': '/img/tokens/wax.png',\n    'PIXAL': '/img/tokens/pixal.png'\n  };\n  \n  return tokenIcons[tokenSymbol.toUpperCase()] || '/img/tokens/default.png';\n};\n\ninterface TokenStakingModalProps {\n  isOpen: boolean\n  onClose: () => void\n  action: 'stake' | 'unstake' | 'claim'\n  farmName?: string\n  onSuccess?: () => void\n}\n\nconst TokenStakingModal: React.FC<TokenStakingModalProps> = ({\n  isOpen,\n  onClose,\n  action,\n  farmName = 'pxjfarm1',\n  onSuccess\n}) => {\n  const { session } = useWallet()\n  const { showSuccess, showError } = useNotifications()\n  const [amount, setAmount] = useState('')\n  const [isProcessing, setIsProcessing] = useState(false)\n  const [farmInfo, setFarmInfo] = useState<TokenFarmInfo | null>(null)\n  const [userStakeInfo, setUserStakeInfo] = useState<TokenStakeInfo | null>(null)\n  const [userBalance, setUserBalance] = useState(0)\n  const [loading, setLoading] = useState(false)\n\n  // Fetch farm and user data when modal opens\n  const fetchData = useCallback(async () => {\n    if (!session) return\n    \n    setLoading(true)\n    try {\n      // Fetch farm info\n      const farm = await stakingService.getTokenFarmInfo(farmName)\n      setFarmInfo(farm)\n      \n      // Fetch user staking info\n      const userStake = await stakingService.getTokenStakingInfo(session.actor.toString(), farmName)\n      setUserStakeInfo(userStake)\n      \n      // Fetch user PXJ balance\n      const balanceResponse = await fetch('https://wax.greymass.com/v1/chain/get_currency_balance', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          code: 'pixeljourney',\n          account: session.actor.toString(),\n          symbol: 'PXJ'\n        })\n      })\n      \n      if (balanceResponse.ok) {\n        const balanceData = await balanceResponse.json()\n        const balance = balanceData.length > 0 ? parseFloat(balanceData[0].split(' ')[0]) : 0\n        setUserBalance(balance)\n      }\n    } catch (error) {\n      console.error('Error fetching data:', error)\n      showError('Failed to load staking data')\n    } finally {\n      setLoading(false)\n    }\n  }, [session, setLoading, farmName, setFarmInfo, setUserStakeInfo, setUserBalance, showError])\n\n  useEffect(() => {\n    if (isOpen && session) {\n      fetchData()\n    }\n  }, [isOpen, session, farmName, fetchData])\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!session || isProcessing) return\n\n    if (action !== 'claim' && (!amount || parseFloat(amount) <= 0)) {\n      showError('Please enter a valid amount')\n      return\n    }\n\n    if (action === 'stake' && parseFloat(amount) > userBalance) {\n      showError('Insufficient PXJ balance')\n      return\n    }\n\n    if (action === 'unstake' && userStakeInfo && parseFloat(amount) > userStakeInfo.staked_amount) {\n      showError('Amount exceeds staked balance')\n      return\n    }\n\n    setIsProcessing(true)\n    try {\n      let result: TransactionResult\n      const formattedAmount = `${parseFloat(amount).toFixed(4)} PXJ`\n\n      switch (action) {\n        case 'stake':\n          result = await stakingService.stakeTokens(session, formattedAmount, farmName)\n          break\n        case 'unstake':\n          result = await stakingService.unstakeTokens(session, formattedAmount, farmName)\n          break\n        case 'claim':\n          result = await stakingService.claimTokenFarmRewards(session, farmName)\n          break\n        default:\n          throw new Error('Invalid action')\n      }\n\n      if (result.success) {\n        showSuccess(`Successfully ${action === 'stake' ? 'staked' : action === 'unstake' ? 'unstaked' : 'claimed'} tokens!`)\n        onSuccess?.()\n        onClose()\n      } else {\n        showError(result.error || `Failed to ${action} tokens`)\n      }\n    } catch (error) {\n      console.error(`Error ${action}ing tokens:`, error)\n      showError(error instanceof Error ? error.message : `Failed to ${action} tokens`)\n    } finally {\n      setIsProcessing(false)\n    }\n  }\n\n  const formatTokenAmount = (amount: number) => {\n    return amount.toLocaleString(undefined, { minimumFractionDigits: 4, maximumFractionDigits: 4 })\n  }\n\n  const formatTimeRemaining = (timestamp: number) => {\n    const now = Date.now() / 1000\n    const remaining = timestamp - now\n    \n    if (remaining <= 0) return 'Available now'\n    \n    const days = Math.floor(remaining / 86400)\n    const hours = Math.floor((remaining % 86400) / 3600)\n    const minutes = Math.floor((remaining % 3600) / 60)\n    \n    if (days > 0) return `${days}d ${hours}h remaining`\n    if (hours > 0) return `${hours}h ${minutes}m remaining`\n    return `${minutes}m remaining`\n  }\n\n  if (!isOpen) return null\n\n  const getModalTitle = () => {\n    switch (action) {\n      case 'stake': return 'Stake PXJ Tokens'\n      case 'unstake': return 'Unstake PXJ Tokens'\n      case 'claim': return 'Claim Rewards'\n      default: return 'Token Staking'\n    }\n  }\n\n  const getActionButtonText = () => {\n    if (isProcessing) return 'Processing...'\n    switch (action) {\n      case 'stake': return 'Stake Tokens'\n      case 'unstake': return 'Unstake Tokens'\n      case 'claim': return 'Claim Rewards'\n      default: return 'Submit'\n    }\n  }\n\n  return (\n    <div className=\"modal-overlay\" onClick={onClose}>\n      <div className=\"modal-content token-staking-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h3>{getModalTitle()}</h3>\n          <button className=\"close-btn\" onClick={onClose}>×</button>\n        </div>\n        \n        <div className=\"modal-body\">\n          {loading ? (\n            <div className=\"loading-state\">\n              <div className=\"spinner\"></div>\n              <p>Loading staking data...</p>\n            </div>\n          ) : (\n            <>\n              {/* Farm Information */}\n              {farmInfo && (\n                <div className=\"farm-info-section\">\n                  <h4>Farm Information</h4>\n                  <div className=\"info-grid\">\n                    <div className=\"info-item\">\n                      <span className=\"label\">Farm:</span>\n                      <span className=\"value\">{farmInfo.farm_name}</span>\n                    </div>\n                    <div className=\"info-item\">\n                      <span className=\"label\">Total Staked:</span>\n                      <span className=\"value\">{formatTokenAmount(farmInfo.total_staked)} PXJ</span>\n                    </div>\n                    <div className=\"info-item\">\n                      <span className=\"label\">Vesting Period:</span>\n                      <span className=\"value\">{Math.floor(farmInfo.vesting_time / 86400)} days</span>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* User Staking Information */}\n              {userStakeInfo && (\n                <div className=\"user-stake-info\">\n                  <h4>Your Staking Position</h4>\n                  <div className=\"info-grid\">\n                    <div className=\"info-item\">\n                      <span className=\"label\">Staked Amount:</span>\n                      <span className=\"value\">{formatTokenAmount(userStakeInfo.staked_amount)} PXJ</span>\n                    </div>\n                    <div className=\"info-item\">\n                      <span className=\"label\">Pending Rewards:</span>\n                      <span className=\"value\">\n                        {userStakeInfo.pending_rewards.map(reward => \n                          `${formatTokenAmount(reward.amount)} ${reward.token}`\n                        ).join(', ') || 'None'}\n                      </span>\n                    </div>\n                    <div className=\"info-item\">\n                      <span className=\"label\">Unlock Time:</span>\n                      <span className=\"value\">{formatTimeRemaining(userStakeInfo.vesting_time)}</span>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Balance Information */}\n              <div className=\"balance-info\">\n                <div className=\"balance-item\">\n                  <TokenImage src={getTokenIcon('PXJ')} alt=\"PXJ\" />\n                  <span>Available: {formatTokenAmount(userBalance)} PXJ</span>\n                </div>\n              </div>\n\n              {/* Action Form */}\n              <form onSubmit={handleSubmit} className=\"staking-form\">\n                {action !== 'claim' && (\n                  <div className=\"form-group\">\n                    <label htmlFor=\"amount\">Amount (PXJ)</label>\n                    <div className=\"input-group\">\n                      <input\n                        type=\"number\"\n                        id=\"amount\"\n                        value={amount}\n                        onChange={(e) => setAmount(e.target.value)}\n                        placeholder=\"0.0000\"\n                        step=\"0.0001\"\n                        min=\"0\"\n                        max={action === 'stake' ? userBalance : userStakeInfo?.staked_amount || 0}\n                        required\n                        disabled={isProcessing}\n                      />\n                      <button\n                        type=\"button\"\n                        className=\"max-btn\"\n                        onClick={() => {\n                          const maxAmount = action === 'stake' ? userBalance : userStakeInfo?.staked_amount || 0\n                          setAmount(maxAmount.toFixed(4))\n                        }}\n                        disabled={isProcessing}\n                      >\n                        MAX\n                      </button>\n                    </div>\n                  </div>\n                )}\n\n                {action === 'claim' && userStakeInfo && userStakeInfo.pending_rewards.length > 0 && (\n                  <div className=\"rewards-preview\">\n                    <h4>Rewards to Claim:</h4>\n                    <div className=\"rewards-list\">\n                      {userStakeInfo.pending_rewards.map((reward, index) => (\n                        <div key={index} className=\"reward-item\">\n                          <TokenImage src={getTokenIcon(reward.token)} alt={reward.token} />\n                          <span>{formatTokenAmount(reward.amount)} {reward.token}</span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                <div className=\"form-actions\">\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-secondary\"\n                    onClick={onClose}\n                    disabled={isProcessing}\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"submit\"\n                    className=\"btn btn-primary\"\n                    disabled={isProcessing || (action !== 'claim' && !amount)}\n                  >\n                    {getActionButtonText()}\n                  </button>\n                </div>\n              </form>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default TokenStakingModal","import React, { useState, useEffect, useCallback, useMemo } from 'react'\nimport { Link } from 'react-router-dom'\nimport { useWallet } from '../hooks/useWallet'\nimport { useNotifications } from '../hooks/useNotifications'\nimport { stakingService, type TokenStakeInfo, type TokenFarmInfo } from '../services/stakingService'\nimport { apiService } from '../services/api'\nimport { log } from '../services/loggingService'\nimport { WharfKitService } from '../services/wharfkit'\nimport NFTStakingModal from './NFTStakingModal'\nimport TokenStakingModal from './TokenStakingModal'\nimport CraftingModal from './CraftingModal'\nimport { NFTImage, TokenImage } from './FallbackImage'\nimport '../css/staking.css'\n\ninterface NFTTemplate {\n  template_id: string\n  name: string\n  type: string\n  image: string\n  owned_count: number\n  staked_count: number\n  rewards_per_hour: {\n    pxj: number\n    wuf: number\n  }\n  estimated_value: number\n  apr: number\n  rarity: 'Common' | 'Uncommon' | 'Rare' | 'Epic' | 'Legendary'\n  market_price?: number\n  available_for_sale?: number\n}\n\ninterface StakingRewards {\n  pxj: number\n  wuf: number\n}\n\ninterface QuickBuyModalProps {\n  template: NFTTemplate | null\n  isOpen: boolean\n  onClose: () => void\n}\n\n// Helper functions to fetch real template data\nconst getTemplateEstimatedValue = async (templateId: string, rarity: string): Promise<number> => {\n  try {\n    // Try to get recent sales data for this template\n    const sales = await apiService.getSales({ template: templateId, limit: 10 });\n    if (sales && sales.data.length > 0) {\n      interface SaleData {\n        price?: {\n          amount: string\n        }\n      }\n      \n      // Calculate average price from recent sales\n      const avgPrice = sales.data.reduce((sum: number, sale: SaleData) => {\n        const price = parseFloat(sale.price?.amount || '0');\n        return sum + price;\n      }, 0) / sales.data.length;\n      return Math.floor(avgPrice * 100); // Convert to appropriate scale\n    }\n  } catch (error) {\n    log.warn('Could not fetch template sales data', 'Staking', error);\n  }\n  \n  // Fallback: estimate based on rarity\n  const rarityMultipliers = {\n    'Common': 1000,\n    'Uncommon': 2500,\n    'Rare': 5000,\n    'Epic': 15000,\n    'Legendary': 50000\n  };\n  return rarityMultipliers[rarity as keyof typeof rarityMultipliers] || 1000;\n};\n\nconst getTemplateMarketPrice = async (templateId: string): Promise<number> => {\n  try {\n    // Try to get current listings for this template\n    const listings = await apiService.getSales({ template: templateId, limit: 5 });\n    if (listings && listings.data.length > 0) {\n      interface ListingData {\n        price?: {\n          amount: string\n        }\n      }\n      \n      // Get the lowest listing price\n      const prices = listings.data.map((listing: ListingData) => parseFloat(listing.price?.amount || '0'));\n      const minPrice = Math.min(...prices.filter((p: number) => p > 0));\n      return Math.floor(minPrice);\n    }\n  } catch (error) {\n    log.warn('Could not fetch template listings', 'Staking', error);\n  }\n  \n  // Fallback: return a reasonable default\n  return 50;\n};\n\nconst QuickBuyModal: React.FC<QuickBuyModalProps> = ({ template, isOpen, onClose }) => {\n  if (!isOpen || !template) return null\n\n  return (\n    <div className=\"modal-overlay\" onClick={onClose}>\n      <div className=\"modal-content quick-buy-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h3>Quick Buy - {template.name}</h3>\n          <button className=\"close-btn\" onClick={onClose}>×</button>\n        </div>\n        <div className=\"modal-body\">\n          <div className=\"buy-item-preview\">\n            <NFTImage src={template.image} alt={template.name} />\n            <div className=\"item-details\">\n              <h4>{template.name}</h4>\n              <p className=\"rarity\">{template.rarity}</p>\n              <p className=\"price\">{template.market_price || 'N/A'} WAX</p>\n              <p className=\"available\">{template.available_for_sale || 0} available</p>\n            </div>\n          </div>\n        </div>\n        <div className=\"modal-footer\">\n          <button className=\"btn btn-secondary\" onClick={onClose}>Cancel</button>\n          <button className=\"btn btn-primary\">Buy Now</button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nconst Staking: React.FC = () => {\n  const { session, isConnected, login } = useWallet()\n  const { showSuccess, showError } = useNotifications()\n  const [loading, setLoading] = useState(false)\n  \n  // NFT Staking State\n  const [nftTemplates, setNftTemplates] = useState<NFTTemplate[]>([])\n  const [rewards, setRewards] = useState<StakingRewards>({ pxj: 0, wuf: 0 })\n  const [nftLoading, setNftLoading] = useState(false)\n  const [totalStakingPower, setTotalStakingPower] = useState(0)\n  const [selectedTemplate, setSelectedTemplate] = useState<NFTTemplate | null>(null)\n  const [stakingModalOpen, setStakingModalOpen] = useState(false)\n  const [craftingModalOpen, setCraftingModalOpen] = useState(false)\n  const [quickBuyModalOpen, setQuickBuyModalOpen] = useState(false)\n  const [selectedBuyTemplate, setSelectedBuyTemplate] = useState<NFTTemplate | null>(null)\n  const [simulationMode, setSimulationMode] = useState(false)\n\n  // Token Staking State\n  const [tokenStakeInfo, setTokenStakeInfo] = useState<TokenStakeInfo | null>(null)\n  const [tokenFarmInfo, setTokenFarmInfo] = useState<TokenFarmInfo | null>(null)\n  const [tokenStakingModalOpen, setTokenStakingModalOpen] = useState(false)\n  const [tokenStakingAction, setTokenStakingAction] = useState<'stake' | 'unstake' | 'claim'>('stake')\n  const [tokenLoading, setTokenLoading] = useState(false)\n  const [userPxjBalance, setUserPxjBalance] = useState(0)\n\n  // Default ingredient templates based on HTML example\n  const defaultTemplates: NFTTemplate[] = useMemo(() => [\n    {\n      template_id: '1001',\n      name: 'Black Ingredient',\n      type: 'Legendary',\n      rarity: 'Legendary',\n      image: '', // Will be handled by NFTImage component fallback\n      owned_count: 0,\n      staked_count: 0,\n      rewards_per_hour: { pxj: 50, wuf: 25 },\n      estimated_value: 100000,\n      apr: 120,\n      market_price: 2500,\n      available_for_sale: 3\n    },\n    {\n      template_id: '1002',\n      name: 'Tertiary Ingredient',\n      type: 'Epic',\n      rarity: 'Epic',\n      image: '', // Will be handled by NFTImage component fallback\n      owned_count: 0,\n      staked_count: 0,\n      rewards_per_hour: { pxj: 10, wuf: 5 },\n      estimated_value: 25000,\n      apr: 80,\n      market_price: 500,\n      available_for_sale: 12\n    },\n    {\n      template_id: '1003',\n      name: 'Secondary Ingredient',\n      type: 'Rare',\n      rarity: 'Rare',\n      image: '', // Will be handled by NFTImage component fallback\n      owned_count: 0,\n      staked_count: 0,\n      rewards_per_hour: { pxj: 2, wuf: 1 },\n      estimated_value: 5000,\n      apr: 40,\n      market_price: 100,\n      available_for_sale: 25\n    },\n    {\n      template_id: '1004',\n      name: 'Primary Ingredient',\n      type: 'Common',\n      rarity: 'Common',\n      image: '', // Will be handled by NFTImage component fallback\n      owned_count: 0,\n      staked_count: 0,\n      rewards_per_hour: { pxj: 0.1, wuf: 0.05 },\n      estimated_value: 1000,\n      apr: 10,\n      market_price: 25,\n      available_for_sale: 50\n    }\n  ], [])\n\n  const fetchNFTTemplates = useCallback(async () => {\n    setNftLoading(true)\n    try {\n      if (!session) {\n        // Show default templates when not connected\n        setNftTemplates(defaultTemplates)\n        setNftLoading(false)\n        return\n      }\n\n      // Try to fetch real data from APIs\n      try {\n        const { apiService } = await import('../services/api')\n        const templatesResponse = await apiService.fetchWithRetry(\n          `${apiService.atomicAssetsAPI}/atomicassets/v1/templates?collection_name=pixeljourney&schema_name=ingredients&page=1&limit=100&order=desc&sort=created`\n        )\n        \n        if (!templatesResponse.ok) {\n          throw new Error('AtomicAssets API failed')\n        }\n        \n        const templatesData = await templatesResponse.json()\n        \n        interface TemplateData {\n          template_id: string\n          name?: string\n          immutable_data?: Record<string, unknown>\n          [key: string]: unknown\n        }\n        \n        // Get owned counts for all templates using batch method\n        const templateIds = templatesData.data.slice(0, 10).map((t: TemplateData) => t.template_id)\n        const countsResult = await apiService.getAssetCountsBatch(templateIds, session.actor.toString())\n        \n        // Process templates with user data\n        const templates: NFTTemplate[] = await Promise.all(\n          templatesData.data.slice(0, 10).map(async (template: TemplateData) => {\n            try {\n              // Get owned count from batch result\n              const owned_count = countsResult.data[template.template_id] || 0\n              \n              // Get staked count from contract tables with fallback\n              let staked_count = 0\n              try {\n                const stakedResponse = await fetch('https://wax.greymass.com/v1/chain/get_table_rows', {\n                  method: 'POST',\n                  headers: {\n                    'Content-Type': 'application/json'\n                  },\n                  body: JSON.stringify({\n                    json: true,\n                    code: 'farms.waxdao',\n                    scope: 'farms.waxdao',\n                    table: 'stakers',\n                    lower_bound: WharfKitService.safeGetActor(session),\n                    upper_bound: WharfKitService.safeGetActor(session),\n                    limit: 1\n                  })\n                })\n                \n                if (stakedResponse.ok) {\n                  const stakedData = await stakedResponse.json()\n                  interface StakeRow {\n                    user: string\n                    staked_assets?: unknown[]\n                  }\n                  \n                  const userStakeData = stakedData.rows.find((row: StakeRow) => row.user === session.actor.toString())\n                  const stakedAssets = userStakeData?.staked_assets || []\n                  \n                  // Count assets for this specific template\n                  // Note: This would require fetching asset details to match template_id\n                  // For now, using total staked count as approximation\n                  staked_count = stakedAssets.length\n                }\n              } catch (error) {\n                log.warn('Failed to fetch staked count for template', 'Staking', { templateId: template.template_id, error })\n              }\n              \n              // Calculate rewards and APR based on rarity\n              const rarity = String(template.immutable_data?.rarity || 'Common')\n              let baseReward = 0.1\n              let apr = 5\n              \n              switch (rarity.toLowerCase()) {\n                case 'legendary':\n                  baseReward = 50\n                  apr = 120\n                  break\n                case 'epic':\n                  baseReward = 10\n                  apr = 80\n                  break\n                case 'rare':\n                  baseReward = 2\n                  apr = 40\n                  break\n                case 'uncommon':\n                  baseReward = 0.5\n                  apr = 20\n                  break\n                default: // common\n                  baseReward = 0.1\n                  apr = 10\n              }\n              \n              return {\n                template_id: template.template_id,\n                name: template.immutable_data?.name || `Template ${template.template_id}`,\n                type: template.immutable_data?.type || rarity,\n                rarity: rarity as 'Common' | 'Uncommon' | 'Rare' | 'Epic' | 'Legendary',\n                image: template.immutable_data?.img ? \n                  `https://ipfs.io/ipfs/${template.immutable_data.img}` : \n                  '', // Will be handled by NFTImage component fallback\n                owned_count,\n                staked_count,\n                rewards_per_hour: { \n                  pxj: baseReward, \n                  wuf: baseReward * 0.5 \n                },\n                estimated_value: await getTemplateEstimatedValue(template.template_id, rarity as string),\n                apr,\n                market_price: await getTemplateMarketPrice(template.template_id),\n                available_for_sale: Math.floor(Math.random() * 20) + 1\n              }\n            } catch (error) {\n              log.error('Error processing template', 'Staking', error as Error)\n              return null\n            }\n          })\n        )\n        \n        const validTemplates = templates.filter(t => t !== null) as NFTTemplate[]\n        setNftTemplates(validTemplates.length > 0 ? validTemplates : defaultTemplates)\n        \n        // Log any errors from batch operation\n        if (countsResult.errors.length > 0) {\n          log.warn('Some template counts could not be fetched', 'Staking', { errors: countsResult.errors })\n        }\n        \n      } catch (apiError) {\n        log.warn('API fetch failed, using default templates', 'Staking', apiError)\n        setNftTemplates(defaultTemplates)\n      }\n      \n    } catch (error) {\n      log.error('Failed to fetch NFT templates', 'Staking', error as Error)\n      setNftTemplates(defaultTemplates)\n    } finally {\n      setNftLoading(false)\n    }\n  }, [session, setNftLoading, setNftTemplates, defaultTemplates])\n\n  const fetchRewards = useCallback(async () => {\n    if (!session) return\n    \n    try {\n      const stakingInfo = await stakingService.getStakingInfo(session.actor.toString())\n      \n      // Convert StakingReward[] to our local format\n      const rewardsData = stakingInfo.pending_rewards.reduce((acc, reward) => {\n        if (reward.token === 'PXJ') {\n          acc.pxj = reward.amount\n        } else if (reward.token === 'WUF') {\n          acc.wuf = reward.amount\n        }\n        return acc\n      }, { pxj: 0, wuf: 0 })\n      \n      setRewards(rewardsData)\n      setTotalStakingPower(stakingInfo.total_staking_power)\n      \n      // Update NFT templates with actual staked counts\n      const updatedTemplates = nftTemplates.map(template => {\n        const stakedNfts = stakingInfo.staked_nfts.filter(\n          nft => nft.template_id === template.template_id\n        )\n        return {\n          ...template,\n          staked_count: stakedNfts.length,\n          rewards_per_hour: stakedNfts.length > 0 ? \n            stakedNfts[0].rewards_per_hour as { pxj: number; wuf: number } : template.rewards_per_hour\n        }\n      })\n      \n      setNftTemplates(updatedTemplates)\n      \n    } catch (error) {\n      log.error('Failed to fetch rewards', 'Staking', error as Error)\n      // Fallback to local calculation for backwards compatibility\n      const now = Date.now()\n      const lastClaimTime = localStorage.getItem(`lastClaimTime_${WharfKitService.safeGetActor(session)}`) || now.toString()\n      const elapsedSeconds = (now - parseInt(lastClaimTime)) / 1000\n      const elapsedHours = elapsedSeconds / 3600\n      \n      const calculatedRewards = nftTemplates.reduce((acc, template) => {\n        const stakedPxjRewards = template.staked_count * template.rewards_per_hour.pxj * Math.floor(elapsedHours)\n        const stakedWufRewards = template.staked_count * template.rewards_per_hour.wuf * Math.floor(elapsedHours)\n        return {\n          pxj: acc.pxj + stakedPxjRewards,\n          wuf: acc.wuf + stakedWufRewards\n        }\n      }, { pxj: 0, wuf: 0 })\n      \n      setRewards(calculatedRewards)\n    }\n  }, [session, nftTemplates, setRewards, setTotalStakingPower, setNftTemplates])\n\n  const fetchTokenStakingData = useCallback(async () => {\n    if (!session) return\n    \n    setTokenLoading(true)\n    try {\n      // Fetch token farm info\n      const farmInfo = await stakingService.getTokenFarmInfo('pxjfarm1')\n      setTokenFarmInfo(farmInfo)\n      \n      // Fetch user token staking info\n      const userStakeInfo = await stakingService.getTokenStakingInfo(session.actor.toString(), 'pxjfarm1')\n      setTokenStakeInfo(userStakeInfo)\n      \n      // Fetch user PXJ balance\n      const balanceResponse = await fetch('https://wax.greymass.com/v1/chain/get_currency_balance', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          code: 'pixeljourney',\n          account: session.actor.toString(),\n          symbol: 'PXJ'\n        })\n      })\n      \n      if (balanceResponse.ok) {\n        const balanceData = await balanceResponse.json()\n        const balance = balanceData.length > 0 ? parseFloat(balanceData[0].split(' ')[0]) : 0\n        setUserPxjBalance(balance)\n      }\n    } catch (error) {\n      log.error('Failed to fetch token staking data', 'Staking', error as Error)\n    } finally {\n      setTokenLoading(false)\n    }\n  }, [session, setTokenLoading, setTokenFarmInfo, setTokenStakeInfo, setUserPxjBalance])\n\n  const openTokenStakingModal = (action: 'stake' | 'unstake' | 'claim') => {\n    setTokenStakingAction(action)\n    setTokenStakingModalOpen(true)\n  }\n\n  const closeTokenStakingModal = () => {\n    setTokenStakingModalOpen(false)\n  }\n\n  const claimRewards = async () => {\n    if (!session) {\n      showError('Error', 'Please connect your wallet first')\n      return\n    }\n\n    // Check if there are rewards to claim\n    if (rewards.pxj === 0 && rewards.wuf === 0) {\n      showError('Error', 'No rewards available to claim')\n      return\n    }\n\n    setLoading(true)\n    try {\n      const result = await stakingService.claimAllRewards(session, 'pixeljourney')\n      \n      if (result.success) {\n        const claimedAmount = `PXJ: ${rewards.pxj.toFixed(1)} | WUF: ${rewards.wuf.toFixed(1)}`\n        showSuccess('Success', `Rewards claimed successfully! ${claimedAmount}`)\n        \n        // Reset rewards display and refresh data\n        setRewards({ pxj: 0, wuf: 0 })\n        await fetchRewards()\n        \n        // Store the claim time for local tracking\n        const now = Date.now()\n        localStorage.setItem(`lastClaimTime_${WharfKitService.safeGetActor(session)}`, now.toString())\n      } else {\n        showError('Error', result.error || 'Failed to claim rewards')\n      }\n      \n    } catch (error) {\n      log.error('Failed to claim rewards', 'Staking', error as Error)\n      showError('Error', 'Failed to claim rewards. Please try again.')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const openNFTStakingModal = (template: NFTTemplate) => {\n    setSelectedTemplate(template)\n    setStakingModalOpen(true)\n  }\n\n  const closeNFTStakingModal = () => {\n    setStakingModalOpen(false)\n    setSelectedTemplate(null)\n  }\n\n  const openQuickBuyModal = (template: NFTTemplate) => {\n    setSelectedBuyTemplate(template)\n    setQuickBuyModalOpen(true)\n  }\n\n  const closeQuickBuyModal = () => {\n    setQuickBuyModalOpen(false)\n    setSelectedBuyTemplate(null)\n  }\n\n  const refreshAllData = async () => {\n    setLoading(true)\n    await Promise.all([\n      fetchNFTTemplates(),\n      fetchRewards(),\n      fetchTokenStakingData()\n    ])\n    setLoading(false)\n  }\n\n  const getRarityColor = (rarity: string) => {\n    switch (rarity.toLowerCase()) {\n      case 'legendary': return '#f59e0b'\n      case 'epic': return '#8b5cf6'\n      case 'rare': return '#3b82f6'\n      case 'uncommon': return '#10b981'\n      default: return '#6b7280'\n    }\n  }\n\n  useEffect(() => {\n    fetchNFTTemplates()\n    if (session) {\n      fetchRewards()\n      fetchTokenStakingData()\n    }\n  }, [session, fetchNFTTemplates, fetchRewards, fetchTokenStakingData])\n\n  // Auto-refresh data\n  useEffect(() => {\n    const interval = setInterval(() => {\n      if (session) {\n        fetchRewards()\n        fetchTokenStakingData()\n      }\n    }, 30000) // Refresh rewards every 30 seconds\n\n    return () => clearInterval(interval)\n  }, [session, nftTemplates, fetchRewards, fetchTokenStakingData])\n\n  // Calculate total staking power\n  useEffect(() => {\n    const totalPower = nftTemplates.reduce((sum, template) => \n      sum + (template.staked_count * (template.rewards_per_hour.pxj + template.rewards_per_hour.wuf)), 0\n    )\n    setTotalStakingPower(totalPower)\n  }, [nftTemplates])\n\n  if (!isConnected) {\n    return (\n      <div className=\"staking-container\">\n        <div className=\"connect-wallet-prompt\">\n          <h2>Connect Your Wallet</h2>\n          <p>Connect your WAX wallet to access NFT staking features</p>\n          <button className=\"btn btn-primary\" onClick={login}>\n            Connect Wallet\n          </button>\n        </div>\n        \n        {/* Show default templates even when not connected */}\n        <div className=\"nft-staking-section\">\n          <h2>Pixel Journey NFT Staking</h2>\n          <p className=\"section-description\">Stake your Pixel Journey ingredients to earn PXJ and WUF rewards</p>\n          \n          <div className=\"template-grid\">\n            {defaultTemplates.map((template) => (\n              <div key={template.template_id} className=\"template-card\">\n                <div className=\"template-image\">\n                  <NFTImage \n                    src={template.image} \n                    alt={template.name}\n                    width={160}\n                    height={160}\n                    fallbackText={template.name}\n                  />\n                  <div \n                    className=\"rarity-badge\"\n                    style={{ backgroundColor: getRarityColor(template.rarity) }}\n                  >\n                    {template.rarity}\n                  </div>\n                </div>\n                <div className=\"template-info\">\n                  <div className=\"template-header\">\n                    <div className=\"template-name\">{template.name}</div>\n                    <div className=\"template-apr\">{template.apr}% APR</div>\n                  </div>\n                  <div className=\"template-stats\">\n                    <div className=\"stat-row\">\n                      <div className=\"stat-item\">\n                        <div className=\"stat-value\">{template.rewards_per_hour.pxj}</div>\n                        <div className=\"stat-label\">PXJ/hr</div>\n                      </div>\n                      <div className=\"stat-item\">\n                        <div className=\"stat-value\">{template.rewards_per_hour.wuf}</div>\n                        <div className=\"stat-label\">WUF/hr</div>\n                      </div>\n                    </div>\n                    <div className=\"staking-status\">\n                      <span>Connect wallet to view your assets</span>\n                    </div>\n                  </div>\n                  <div className=\"template-actions\">\n                    <button \n                      className=\"btn btn-secondary\"\n                      onClick={() => openQuickBuyModal(template)}\n                    >\n                      Quick Buy\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n        \n        <QuickBuyModal\n          template={selectedBuyTemplate}\n          isOpen={quickBuyModalOpen}\n          onClose={closeQuickBuyModal}\n        />\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"staking-container\">\n      {/* Header with refresh button */}\n      <div className=\"staking-header\">\n        <div className=\"header-content\">\n          <h1>NFT Staking Dashboard</h1>\n          <button\n            className=\"refresh-btn\"\n            onClick={refreshAllData}\n            disabled={loading}\n          >\n            {loading ? '🔄' : '↻'} Refresh\n          </button>\n        </div>\n      </div>\n\n      {/* Staking Portal Section */}\n      <div className=\"staking-portal-section\">\n        <div className=\"portal-card\">\n          <div className=\"portal-header\">\n            <div className=\"portal-icon\">🚀</div>\n            <div className=\"portal-info\">\n              <h2>Advanced Staking Portal</h2>\n              <p>Access our comprehensive staking platform with advanced features, analytics, and enhanced rewards management.</p>\n            </div>\n          </div>\n          <div className=\"portal-features\">\n            <div className=\"feature-item\">\n              <span className=\"feature-icon\">📊</span>\n              <span>Advanced Analytics</span>\n            </div>\n            <div className=\"feature-item\">\n              <span className=\"feature-icon\">⚡</span>\n              <span>Enhanced Rewards</span>\n            </div>\n            <div className=\"feature-item\">\n              <span className=\"feature-icon\">🔧</span>\n              <span>Advanced Tools</span>\n            </div>\n          </div>\n          <div className=\"portal-actions\">\n            <a \n              href=\"https://stake.pixeljourney.xyz\" \n              target=\"_blank\" \n              rel=\"noopener noreferrer\"\n              className=\"btn btn-primary portal-btn\"\n            >\n              Launch Staking Portal\n              <svg className=\"external-icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" />\n              </svg>\n            </a>\n          </div>\n        </div>\n      </div>\n\n      {/* Stats Bar - Hidden by default as per HTML example */}\n      <div className=\"stats-bar\" style={{ display: 'none' }}>\n        <div className=\"stat\">\n          <TokenImage src=\"/img/tokens/pxj.png\" alt=\"PXJ\" />\n          <span>PXJ Balance: 0</span>\n        </div>\n        <div className=\"stat\">\n          <TokenImage src=\"/img/tokens/wuf.png\" alt=\"WUF\" />\n          <span>WUF Balance: 0</span>\n        </div>\n      </div>\n\n      {/* Dashboard Row with Rewards and Quick Claim */}\n      <div className=\"dashboard-row\">\n        {/* Rewards Section */}\n        <div className=\"rewards-section\" id=\"rewardsSection\" style={{ display: (rewards.pxj > 0 || rewards.wuf > 0) ? 'block' : 'none' }}>\n          <div className=\"rewards-header\">\n            <h3>Claimable Rewards</h3>\n            <div className=\"simulation-toggle\" onClick={() => setSimulationMode(!simulationMode)}>\n              <div className={`toggle ${simulationMode ? 'active' : ''}`}></div>\n            </div>\n          </div>\n          <div id=\"claimableRewards\">\n            {rewards.pxj.toFixed(2)} PXJ + {rewards.wuf.toFixed(2)} WUF\n          </div>\n          <button \n            className=\"claim-btn\"\n            onClick={claimRewards}\n            disabled={loading}\n          >\n            {loading ? 'Claiming...' : 'Claim All Rewards'}\n          </button>\n          {simulationMode && (\n            <div className=\"simulation-status\">\n              🔴 SIMULATION MODE ACTIVE\n            </div>\n          )}\n        </div>\n\n        {/* Quick Claim Section */}\n        <div className=\"quick-claim-section\">\n          <h4>Quick Actions</h4>\n          <button \n            className=\"quick-claim-btn\"\n            onClick={() => setCraftingModalOpen(true)}\n          >\n            Open Crafting\n          </button>\n        </div>\n      </div>\n\n      {/* Total Staking Power */}\n      {totalStakingPower > 0 && (\n        <div className=\"total-power\">\n          <h3>Total Staking Power</h3>\n          <div className=\"power-value-container\">\n            <div className=\"power-value\">{totalStakingPower.toFixed(1)}</div>\n            <div className=\"power-rate\">/hr</div>\n          </div>\n          <p>Combined rewards per hour from all staked NFTs</p>\n        </div>\n      )}\n\n      {/* Token Staking Section */}\n      <div className=\"token-staking-section\">\n        <div className=\"token-staking-header\">\n          <h2>PXJ Token Staking</h2>\n          <p className=\"section-description\">Stake your PXJ tokens in the pxjfarm1 to earn additional rewards</p>\n        </div>\n\n        {tokenLoading ? (\n          <div className=\"loading-state\">\n            <div className=\"loading-spinner\"></div>\n            <p>Loading token staking data...</p>\n          </div>\n        ) : (\n          <div className=\"token-staking-content\">\n            {/* Token Farm Info Card */}\n            {tokenFarmInfo && (\n              <div className=\"token-farm-card\">\n                <div className=\"farm-header\">\n                  <div className=\"farm-icon\">\n                    <TokenImage src=\"/img/tokens/pxj.png\" alt=\"PXJ\" />\n                  </div>\n                  <div className=\"farm-info\">\n                    <h3>{tokenFarmInfo.farm_name}</h3>\n                    <p className=\"farm-description\">PXJ Token Farm</p>\n                  </div>\n                </div>\n                \n                <div className=\"farm-stats\">\n                  <div className=\"stat-item\">\n                    <div className=\"stat-label\">Total Staked</div>\n                    <div className=\"stat-value\">{tokenFarmInfo.total_staked.toLocaleString()} PXJ</div>\n                  </div>\n                  <div className=\"stat-item\">\n                    <div className=\"stat-label\">Vesting Period</div>\n                    <div className=\"stat-value\">{Math.floor(tokenFarmInfo.vesting_time / 86400)} days</div>\n                  </div>\n                  <div className=\"stat-item\">\n                    <div className=\"stat-label\">Your Balance</div>\n                    <div className=\"stat-value\">{userPxjBalance.toLocaleString()} PXJ</div>\n                  </div>\n                </div>\n\n                {/* User Staking Position */}\n                {tokenStakeInfo && (\n                  <div className=\"user-position\">\n                    <h4>Your Staking Position</h4>\n                    <div className=\"position-stats\">\n                      <div className=\"position-item\">\n                        <span className=\"label\">Staked:</span>\n                        <span className=\"value\">{tokenStakeInfo.staked_amount.toLocaleString()} PXJ</span>\n                      </div>\n                      <div className=\"position-item\">\n                        <span className=\"label\">Pending Rewards:</span>\n                        <span className=\"value\">\n                          {tokenStakeInfo.pending_rewards.length > 0 \n                            ? tokenStakeInfo.pending_rewards.map(r => `${r.amount.toFixed(4)} ${r.token}`).join(', ')\n                            : 'None'\n                          }\n                        </span>\n                      </div>\n                      <div className=\"position-item\">\n                        <span className=\"label\">Unlock Time:</span>\n                        <span className=\"value\">\n                          {tokenStakeInfo.vesting_time > Date.now() / 1000 \n                            ? `${Math.ceil((tokenStakeInfo.vesting_time - Date.now() / 1000) / 86400)} days remaining`\n                            : 'Available now'\n                          }\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {/* Action Buttons */}\n                <div className=\"token-actions\">\n                  <button \n                    className=\"btn btn-primary\"\n                    onClick={() => openTokenStakingModal('stake')}\n                    disabled={!isConnected || userPxjBalance <= 0}\n                  >\n                    Stake PXJ\n                  </button>\n                  <button \n                    className=\"btn btn-secondary\"\n                    onClick={() => openTokenStakingModal('unstake')}\n                    disabled={!isConnected || !tokenStakeInfo || tokenStakeInfo.staked_amount <= 0}\n                  >\n                    Unstake PXJ\n                  </button>\n                  <button \n                    className=\"btn btn-accent\"\n                    onClick={() => openTokenStakingModal('claim')}\n                    disabled={!isConnected || !tokenStakeInfo || tokenStakeInfo.pending_rewards.length === 0}\n                  >\n                    Claim Rewards\n                  </button>\n                </div>\n              </div>\n            )}\n\n            {/* Connect Wallet Prompt */}\n            {!isConnected && (\n              <div className=\"connect-prompt\">\n                <h3>Connect Your Wallet</h3>\n                <p>Connect your WAX wallet to view and manage your PXJ token staking</p>\n                <button className=\"btn btn-primary\" onClick={login}>\n                  Connect Wallet\n                </button>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* NFT Staking Section */}\n      <div className=\"nft-staking-section\">\n        <div className=\"nft-staking-header\">\n          <h2>Pixel Journey NFT Staking</h2>\n          <p className=\"section-description\">Stake your ingredients to earn PXJ and WUF rewards</p>\n        </div>\n\n        {nftLoading ? (\n          <div className=\"loading-state\">\n            <div className=\"loading-spinner\"></div>\n            <p>Loading NFT staking data...</p>\n          </div>\n        ) : (\n          <div className=\"template-grid\">\n            {nftTemplates.map((template) => (\n              <div key={template.template_id} className=\"template-card\">\n                <div \n                  className=\"template-image\"\n                  style={{ backgroundImage: `url(${template.image})` }}\n                >\n                  {template.owned_count > 0 && (\n                    <div className=\"asset-count\">{template.owned_count}</div>\n                  )}\n                  {template.staked_count > 0 && (\n                    <div className=\"staked-count\">⚡{template.staked_count}</div>\n                  )}\n                  <div \n                    className=\"rarity-badge\"\n                    style={{ backgroundColor: getRarityColor(template.rarity) }}\n                  >\n                    {template.rarity}\n                  </div>\n                  {!template.image.includes('placeholder') ? null : template.name}\n                </div>\n                <div className=\"template-info\">\n                  <div className=\"template-header\">\n                    <div className=\"template-name\">{template.name}</div>\n                    <div className=\"template-apr\">{template.apr}% APR</div>\n                  </div>\n                  <div className=\"template-stats\">\n                    <div className=\"stat-row\">\n                      <div className=\"stat-item\">\n                        <div className=\"stat-value\">{template.rewards_per_hour.pxj}</div>\n                        <div className=\"stat-label\">PXJ/hr</div>\n                      </div>\n                      <div className=\"stat-item\">\n                        <div className=\"stat-value\">{template.rewards_per_hour.wuf}</div>\n                        <div className=\"stat-label\">WUF/hr</div>\n                      </div>\n                    </div>\n                    <div className=\"staking-status\">\n                      <span>Staked: {template.staked_count}/{template.owned_count}</span>\n                    </div>\n                  </div>\n                  <div className=\"template-actions\">\n                    {template.owned_count > 0 ? (\n                      <button \n                        className=\"btn btn-primary\"\n                        onClick={() => openNFTStakingModal(template)}\n                      >\n                        Manage Staking\n                      </button>\n                    ) : (\n                      <button \n                        className=\"btn btn-secondary\"\n                        onClick={() => openQuickBuyModal(template)}\n                      >\n                        Quick Buy\n                      </button>\n                    )}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* PXJ Lockup & Leaderboard Info */}\n      <div className=\"crafting-mechanics\">\n        <h2>PXJ Lockup & Crafting Mechanics</h2>\n        <div className=\"mechanics-content\">\n          <div className=\"mechanics-overview\">\n            <h3>🔒 PXJ Lockup System</h3>\n            <p>Lock your PXJ tokens to participate in advanced crafting and upgrade systems. Each month, we distribute additional NFT rewards to collectors based on their PXJ lockup value.</p>\n            \n            <div className=\"leaderboard-info\">\n              <div className=\"leaderboard-card\">\n                <div className=\"leaderboard-header\">\n                  <span className=\"leaderboard-icon\">🏆</span>\n                  <h4>Monthly Leaderboard Rewards</h4>\n                </div>\n                <div className=\"leaderboard-details\">\n                  <p><strong>Entry Requirement:</strong> 25,000 PXJ locked per entry</p>\n                  <p>Rewards distributed based on upgraded ingredient lockup value</p>\n                  <a \n                    href=\"https://lb.pixeljourney.xyz/\" \n                    target=\"_blank\" \n                    rel=\"noopener noreferrer\"\n                    className=\"btn btn-primary\"\n                  >\n                    View Leaderboard\n                  </a>\n                </div>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"crafting-process\">\n            <h3>⚗️ Ingredient Combination System</h3>\n            <div className=\"process-flow\">\n              <div className=\"process-step\">\n                <div className=\"step-icon\">🧪</div>\n                <h4>Primary Ingredients</h4>\n                <p>Common base materials that form the foundation of all crafting recipes</p>\n              </div>\n              \n              <div className=\"process-arrow\">→</div>\n              \n              <div className=\"process-step\">\n                <div className=\"step-icon\">⚡</div>\n                <h4>Secondary Ingredients</h4>\n                <p>Rare catalysts that enhance and modify the properties of primary ingredients</p>\n              </div>\n              \n              <div className=\"process-arrow\">→</div>\n              \n              <div className=\"process-step\">\n                <div className=\"step-icon\">💎</div>\n                <h4>Tertiary Ingredients</h4>\n                <p>Epic components that unlock powerful abilities and unique traits</p>\n              </div>\n              \n              <div className=\"process-arrow\">→</div>\n              \n              <div className=\"process-step\">\n                <div className=\"step-icon\">🌟</div>\n                <h4>Black Ingredients</h4>\n                <p>Legendary materials that create the most powerful and sought-after items</p>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"learn-more-section\">\n            <div className=\"learn-more-card\">\n              <h3>📚 Want to Learn More?</h3>\n              <p>Dive deeper into the Pixel Journey ecosystem with our comprehensive documentation covering all aspects of crafting, staking, and gameplay mechanics.</p>\n              <div className=\"learn-actions\">\n                <Link to=\"/learn\" className=\"btn-primary\">Visit Learn Page</Link>\n                <a \n                  href=\"https://docs.pixeljourney.xyz/season-1/recycling-and-crafting\" \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                  className=\"btn-secondary\"\n                >\n                  Journey Docs\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Modals */}\n      <NFTStakingModal\n        isOpen={stakingModalOpen}\n        onClose={closeNFTStakingModal}\n        templateId={selectedTemplate?.template_id || ''}\n        templateName={selectedTemplate?.name || ''}\n        action=\"stake\"\n        onSuccess={() => {\n          fetchNFTTemplates()\n          fetchRewards()\n        }}\n      />\n\n      <TokenStakingModal\n        isOpen={tokenStakingModalOpen}\n        onClose={closeTokenStakingModal}\n        action={tokenStakingAction}\n        farmName=\"pxjfarm1\"\n        onSuccess={() => {\n          fetchTokenStakingData()\n          fetchRewards()\n        }}\n      />\n\n      <CraftingModal\n        isOpen={craftingModalOpen}\n        onClose={() => setCraftingModalOpen(false)}\n        ingredient={null}\n      />\n\n      <QuickBuyModal\n        template={selectedBuyTemplate}\n        isOpen={quickBuyModalOpen}\n        onClose={closeQuickBuyModal}\n      />\n    </div>\n  )\n}\n\nexport default Staking","import { log } from './loggingService'\nimport type { NFTAsset } from './api'\n\nexport interface AttributeValue {\n  value: string\n  maxSupply: number\n  numMinted: number\n}\n\nexport interface AttributeFilterData {\n  [attributeName: string]: {\n    values: AttributeValue[]\n  }\n}\n\nclass AttributeService {\n  private baseUrl = 'https://wax-api.hivebp.io/api'\n\n  /**\n   * Fetch available attribute filters for a collection\n   */\n  async getAttributeFilters(contract: string, schema?: string): Promise<AttributeFilterData> {\n    try {\n      const url = new URL(`${this.baseUrl}/filter-attributes/${contract}`)\n      \n      if (schema) {\n        url.searchParams.append('schema', schema)\n      }\n\n      const response = await fetch(url.toString())\n      \n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`)\n      }\n\n      const data = await response.json()\n      return data\n    } catch (error) {\n      log.error('Error fetching attribute filters from API, will use fallback', 'AttributeService', error as Error)\n      // Return empty data structure as fallback\n      return {}\n    }\n  }\n\n  /**\n   * Extract attribute filters from NFT data as fallback when API is unavailable\n   */\n  extractAttributesFromNFTs(nfts: NFTAsset[], schema?: string): AttributeFilterData {\n    const attributeMap = new Map<string, Map<string, number>>()\n    \n    // Filter by schema if specified\n    const filteredNFTs = schema ? nfts.filter(nft => nft.schema === schema) : nfts\n    \n    filteredNFTs.forEach(nft => {\n      if (nft.traits) {\n        Object.entries(nft.traits).forEach(([key, value]) => {\n          if (value !== null && value !== undefined) {\n            if (!attributeMap.has(key)) {\n              attributeMap.set(key, new Map())\n            }\n            \n            const valueMap = attributeMap.get(key)!\n            const stringValue = String(value)\n            const currentCount = valueMap.get(stringValue) || 0\n            valueMap.set(stringValue, currentCount + 1)\n          }\n        })\n      }\n    })\n    \n    // Convert to AttributeFilterData format\n    const result: AttributeFilterData = {}\n    \n    attributeMap.forEach((valueMap, attributeName) => {\n      const values: AttributeValue[] = []\n      \n      valueMap.forEach((count, value) => {\n        values.push({\n          value,\n          numMinted: count,\n          maxSupply: count // Use count as approximation since we don't have max supply data\n        })\n      })\n      \n      // Sort values by count (most common first)\n      values.sort((a, b) => b.numMinted - a.numMinted)\n      \n      result[attributeName] = { values }\n    })\n    \n    return result\n  }\n\n  /**\n   * Format attributes for API query string\n   * @param filters Object with attribute name as key and selected values as array\n   * @returns Formatted attribute string for API\n   */\n  formatAttributesForQuery(filters: Record<string, string[]>): string {\n    const attributePairs: string[] = []\n    \n    Object.entries(filters).forEach(([attributeName, values]) => {\n      values.forEach(value => {\n        attributePairs.push(`${attributeName}:${encodeURIComponent(value)}`)\n      })\n    })\n    \n    return attributePairs.join('&')\n  }\n\n  /**\n   * Parse attribute query string back to object\n   * @param attributeString Formatted attribute string from API\n   * @returns Object with attribute filters\n   */\n  parseAttributeQuery(attributeString: string): Record<string, string[]> {\n    const filters: Record<string, string[]> = {}\n    \n    if (!attributeString) return filters\n    \n    const pairs = attributeString.split('&')\n    pairs.forEach(pair => {\n      const [attributeName, value] = pair.split(':')\n      if (attributeName && value) {\n        const decodedValue = decodeURIComponent(value)\n        if (!filters[attributeName]) {\n          filters[attributeName] = []\n        }\n        filters[attributeName].push(decodedValue)\n      }\n    })\n    \n    return filters\n  }\n}\n\nexport const attributeService = new AttributeService()\n// Types are already exported above","import React, { useState, useEffect, useCallback } from 'react'\nimport { createPortal } from 'react-dom'\nimport { useWallet } from '../contexts/WalletContext'\nimport { useNotifications } from '../hooks/useNotifications'\nimport { rwaxService, type UserAsset, type FeeToken } from '../services/rwaxService'\nimport MediaRenderer from './MediaRenderer'\nimport { log } from '../services/loggingService'\n\ninterface TokenizeFromInventoryModalProps {\n  isOpen: boolean\n  onClose: () => void\n  onSuccess?: () => void\n}\n\nconst TokenizeFromInventoryModal: React.FC<TokenizeFromInventoryModalProps> = ({\n  isOpen,\n  onClose,\n  onSuccess\n}) => {\n  const { account } = useWallet()\n  const { showSuccess, showError } = useNotifications()\n  \n  const [userAssets, setUserAssets] = useState<UserAsset[]>([])\n  const [feeTokens, setFeeTokens] = useState<FeeToken[]>([])\n  const [selectedAssets, setSelectedAssets] = useState<Set<string>>(new Set())\n  const [selectedFeeToken, setSelectedFeeToken] = useState<FeeToken | null>(null)\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState('')\n  const [currentPage, setCurrentPage] = useState(1)\n  const [totalAssets, setTotalAssets] = useState(0)\n  const assetsPerPage = 12\n\n  // Load user's Pixal assets\n  const loadUserAssets = useCallback(async (page: number = 1) => {\n    if (!account) return\n    \n    setLoading(true)\n    setError('')\n    \n    try {\n      const offset = (page - 1) * assetsPerPage\n      const assets = await rwaxService.getUserPixalAssets(account, assetsPerPage, offset)\n      setUserAssets(assets)\n      setTotalAssets(assets.length) // In a real implementation, you'd get total count from API\n    } catch (error) {\n      log.error('Failed to load user Pixal assets', 'TokenizeFromInventoryModal.loadUserAssets', error as Error, { account, page })\n      setError('Failed to load your Pixal assets. Please try again.')\n      showError('Failed to load assets')\n    } finally {\n      setLoading(false)\n    }\n  }, [account, assetsPerPage, showError])\n\n  // Load fee tokens\n  const loadFeeTokens = useCallback(async () => {\n    try {\n      const tokens = await rwaxService.getFeeTokens()\n      setFeeTokens(tokens)\n    } catch (error) {\n      log.error('Failed to load fee tokens', 'TokenizeFromInventoryModal.loadFeeTokens', error as Error)\n      showError('Failed to load fee tokens')\n    }\n  }, [showError])\n\n  // Load data when modal opens\n  useEffect(() => {\n    if (isOpen && account) {\n      loadUserAssets(currentPage)\n      loadFeeTokens()\n    }\n  }, [isOpen, account, currentPage, loadUserAssets, loadFeeTokens])\n\n  // Handle asset selection\n  const toggleAssetSelection = (assetId: string) => {\n    const newSelection = new Set(selectedAssets)\n    if (newSelection.has(assetId)) {\n      newSelection.delete(assetId)\n    } else {\n      newSelection.add(assetId)\n    }\n    setSelectedAssets(newSelection)\n  }\n\n  // Select all assets on current page\n  const selectAllAssets = () => {\n    const allAssetIds = new Set(userAssets.map(asset => asset.assetId.toString()))\n    setSelectedAssets(allAssetIds)\n  }\n\n  // Clear all selections\n  const clearAllSelections = () => {\n    setSelectedAssets(new Set())\n  }\n\n  // Execute tokenization\n  const executeTokenization = async () => {\n    if (!account || selectedAssets.size === 0 || !selectedFeeToken) {\n      showError('Please select assets and a fee token')\n      return\n    }\n\n    setLoading(true)\n    try {\n      const assetIds = Array.from(selectedAssets)\n      const transaction = await rwaxService.executeTokenization(assetIds, selectedFeeToken)\n      \n      showSuccess(`Tokenization transaction prepared for ${assetIds.length} asset(s)`)\n      log.info('Tokenization transaction prepared', 'TokenizeFromInventoryModal.executeTokenization', { assetIds, feeToken: selectedFeeToken.symbol, transaction })\n      \n      // Reset selections and close modal\n      setSelectedAssets(new Set())\n      setSelectedFeeToken(null)\n      onClose()\n      \n      // Call success callback\n      if (onSuccess) {\n        onSuccess()\n      }\n    } catch (error) {\n      log.error('Tokenization execution failed', 'TokenizeFromInventoryModal.executeTokenization', error as Error, { assetIds: Array.from(selectedAssets), feeToken: selectedFeeToken?.symbol })\n      showError('Tokenization failed. Please try again.')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  // Handle page change\n  const handlePageChange = (page: number) => {\n    setCurrentPage(page)\n    setSelectedAssets(new Set()) // Clear selections when changing pages\n  }\n\n  if (!isOpen) return null\n\n  const totalPages = Math.ceil(totalAssets / assetsPerPage)\n  const selectedCount = selectedAssets.size\n\n  return createPortal(\n    <div className=\"modal-overlay\" onClick={onClose}>\n      <div className=\"tokenize-inventory-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h2>Tokenize from Inventory</h2>\n          <button className=\"close-button\" onClick={onClose}>×</button>\n        </div>\n        \n        <div className=\"modal-body\">\n          {error && (\n            <div className=\"error-message\">\n              {error}\n            </div>\n          )}\n          \n          {/* Selection Controls */}\n          <div className=\"selection-controls\">\n            <div className=\"selection-info\">\n              <span>{selectedCount} asset{selectedCount !== 1 ? 's' : ''} selected</span>\n            </div>\n            <div className=\"selection-actions\">\n              <button \n                className=\"select-all-btn\"\n                onClick={selectAllAssets}\n                disabled={loading}\n              >\n                Select All on Page\n              </button>\n              <button \n                className=\"clear-all-btn\"\n                onClick={clearAllSelections}\n                disabled={loading || selectedCount === 0}\n              >\n                Clear All\n              </button>\n            </div>\n          </div>\n\n          {/* Assets Grid */}\n          <div className=\"assets-section\">\n            <h3>Your Pixal Assets</h3>\n            {loading ? (\n              <div className=\"loading-spinner\">\n                <div className=\"spinner\"></div>\n                <p>Loading your assets...</p>\n              </div>\n            ) : (\n              <div className=\"assets-grid\">\n                {userAssets.map((asset) => (\n                  <div \n                    key={asset.assetId}\n                    className={`asset-card ${selectedAssets.has(asset.assetId.toString()) ? 'selected' : ''}`}\n                    onClick={() => toggleAssetSelection(asset.assetId.toString())}\n                  >\n                    <div className=\"asset-image-container\">\n                      <MediaRenderer \n                        imageUrl={asset.image}\n                        alt={asset.name}\n                        className=\"asset-image\"\n                      />\n                      {selectedAssets.has(asset.assetId.toString()) && (\n                        <div className=\"selection-indicator\">\n                          <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                            <path d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z\"/>\n                          </svg>\n                        </div>\n                      )}\n                    </div>\n                    <div className=\"asset-info\">\n                      <h4 className=\"asset-name\">{asset.name}</h4>\n                      <p className=\"asset-id\">#{asset.assetId.toString()}</p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n            \n            {/* Pagination */}\n            {totalPages > 1 && (\n              <div className=\"pagination\">\n                <button \n                  className=\"pagination-btn\"\n                  onClick={() => handlePageChange(currentPage - 1)}\n                  disabled={currentPage === 1 || loading}\n                >\n                  Previous\n                </button>\n                <span className=\"pagination-info\">\n                  Page {currentPage} of {totalPages}\n                </span>\n                <button \n                  className=\"pagination-btn\"\n                  onClick={() => handlePageChange(currentPage + 1)}\n                  disabled={currentPage === totalPages || loading}\n                >\n                  Next\n                </button>\n              </div>\n            )}\n          </div>\n\n          {/* Fee Token Selection */}\n          {selectedCount > 0 && (\n            <div className=\"fee-selection\">\n              <h3>Select Fee Token</h3>\n              <div className=\"fee-tokens-grid\">\n                {feeTokens.map((token, index) => (\n                  <div \n                    key={index}\n                    className={`fee-option ${selectedFeeToken === token ? 'selected' : ''}`}\n                    onClick={() => setSelectedFeeToken(token)}\n                  >\n                    <div className=\"fee-info\">\n                      <span className=\"fee-amount\">{token.fee}</span>\n                      <span className=\"fee-contract\">({token.contract})</span>\n                    </div>\n                    {token.wax_value && token.symbol !== 'WAX' && (\n                      <div className=\"wax-equivalent\">\n                        ≈ {parseFloat(token.wax_value).toFixed(4)} WAX\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n        \n        <div className=\"modal-footer\">\n          <button className=\"cancel-button\" onClick={onClose} disabled={loading}>\n            Cancel\n          </button>\n          <button \n            className=\"tokenize-button\"\n            onClick={executeTokenization}\n            disabled={loading || selectedCount === 0 || !selectedFeeToken}\n          >\n            {loading ? 'Processing...' : `Tokenize ${selectedCount} Asset${selectedCount !== 1 ? 's' : ''}`}\n          </button>\n        </div>\n      </div>\n    </div>,\n    document.body\n  )\n}\n\nexport default TokenizeFromInventoryModal","import React, { useState, useEffect } from 'react'\nimport { rwaxService, type TokenizedAsset, type FeeToken } from '../services/rwaxService'\nimport MediaRenderer from './MediaRenderer'\nimport { useWallet } from '../contexts/WalletContext'\nimport { useNotifications } from '../hooks/useNotifications'\nimport { log } from '../services/loggingService'\n\ninterface AssetDetailModalProps {\n  asset: TokenizedAsset | null\n  isOpen: boolean\n  onClose: () => void\n  onRedeem?: (asset: TokenizedAsset, feeToken: FeeToken) => void\n}\n\nconst AssetDetailModal: React.FC<AssetDetailModalProps> = ({\n  asset,\n  isOpen,\n  onClose,\n  onRedeem\n}) => {\n  const { account } = useWallet()\n  const { showError } = useNotifications()\n  \n  const [feeTokens, setFeeTokens] = useState<FeeToken[]>([])\n  const [selectedFeeToken, setSelectedFeeToken] = useState<FeeToken | null>(null)\n  const [loading, setLoading] = useState(false)\n  const [showRedeemSection, setShowRedeemSection] = useState(false)\n\n  const loadFeeTokens = async () => {\n    try {\n      const tokens = await rwaxService.getFeeTokens()\n      setFeeTokens(tokens)\n    } catch (error) {\n      log.error('Failed to load fee tokens', 'AssetDetailModal.loadFeeTokens', error as Error)\n      showError('Failed to load fee tokens')\n    }\n  }\n\n  // Load fee tokens when modal opens\n  useEffect(() => {\n    if (isOpen && asset) {\n      loadFeeTokens()\n    }\n  }, [isOpen, asset, loadFeeTokens])\n\n  const handleRedeem = async () => {\n    if (!asset || !selectedFeeToken || !account) {\n      showError('Please select a fee token')\n      return\n    }\n\n    setLoading(true)\n    try {\n      if (onRedeem) {\n        await onRedeem(asset, selectedFeeToken)\n      }\n      onClose()\n    } catch (error) {\n      log.error('Asset redemption failed', 'AssetDetailModal.handleRedeem', error as Error, { assetId: asset?.assetId, feeToken: selectedFeeToken?.symbol })\n      showError('Redemption failed. Please try again.')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  if (!isOpen || !asset) return null\n\n  return (\n    <div className=\"modal-overlay\" onClick={onClose}>\n      <div className=\"asset-detail-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h2>Asset Details</h2>\n          <button className=\"close-button\" onClick={onClose}>×</button>\n        </div>\n        \n        <div className=\"modal-body\">\n          <div className=\"asset-main-info\">\n            <div className=\"asset-image-section\">\n              <MediaRenderer\n                imageUrl={asset.image}\n        alt={asset.name}\n                className=\"asset-image\"\n              />\n            </div>\n            \n            <div className=\"asset-info-section\">\n              <h3 className=\"asset-name\">{asset.name}</h3>\n              <div className=\"asset-metadata\">\n                <div className=\"metadata-item\">\n                  <span className=\"label\">Asset ID:</span>\n                  <span className=\"value\">{asset.assetId}</span>\n                </div>\n                <div className=\"metadata-item\">\n                  <span className=\"label\">Collection:</span>\n                  <span className=\"value\">{asset.collection?.displayName || asset.collection?.collectionName}</span>\n                </div>\n                <div className=\"metadata-item\">\n                  <span className=\"label\">Schema:</span>\n                  <span className=\"value\">{asset.schema}</span>\n                </div>\n                <div className=\"metadata-item\">\n                  <span className=\"label\">Mint #:</span>\n                  <span className=\"value\">{asset.mint}</span>\n                </div>\n                <div className=\"metadata-item\">\n                  <span className=\"label\">Template ID:</span>\n                  <span className=\"value\">{asset.template?.templateId}</span>\n                </div>\n                <div className=\"metadata-item\">\n                  <span className=\"label\">WPIXAL Amount:</span>\n                  <span className=\"value highlight\">{asset.rwax.redeemAmount.toFixed(8)} WPIXAL</span>\n                </div>\n                {asset.rarityScore && (\n                  <div className=\"metadata-item\">\n                    <span className=\"label\">Rarity Score:</span>\n                    <span className=\"value highlight\">{asset.rarityScore.toFixed(2)}</span>\n                  </div>\n                )}\n                {asset.attributesFloor && (\n                  <div className=\"metadata-item\">\n                    <span className=\"label\">Attributes Floor:</span>\n                    <span className=\"value highlight\">{asset.attributesFloor.toFixed(8)} WPIXAL</span>\n                  </div>\n                )}\n                <div className=\"metadata-item\">\n                  <span className=\"label\">Contract:</span>\n                  <span className=\"value\">{asset.contract}</span>\n                </div>\n                <div className=\"metadata-item\">\n                  <span className=\"label\">Owner:</span>\n                  <span className=\"value\">{asset.owner}</span>\n                </div>\n              </div>\n              \n              {/* Asset Attributes/Traits */}\n              {asset.immutableData && asset.immutableData.length > 0 && (\n                <div className=\"asset-attributes\">\n                  <h4>NFT Traits</h4>\n                  <div className=\"attributes-grid\">\n                    {asset.immutableData\n                      .filter(({ key, value }) => {\n                        // Filter out technical fields and focus on actual traits\n                        const excludeKeys = ['image', 'img', 'video', 'audio', 'model', 'description', 'name']\n                        return !excludeKeys.includes(key.toLowerCase()) && value && value[1] !== null && value[1] !== undefined && value[1] !== ''\n                      })\n                      .map(({ key, value }) => {\n                        // Format key to be more readable\n                        const formattedKey = key.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())\n                        const displayValue = Array.isArray(value) ? value[1] : value\n                        \n                        return (\n                          <div key={key} className=\"trait-item\">\n                            <div className=\"trait-label\">{formattedKey}</div>\n                            <div className=\"trait-value\">{String(displayValue)}</div>\n                          </div>\n                        )\n                      })}\n                  </div>\n                  \n                  {/* Show description if available */}\n                  {(() => {\n                    const descriptionItem = asset.immutableData.find(item => item.key.toLowerCase() === 'description')\n                    const description = descriptionItem ? (Array.isArray(descriptionItem.value) ? descriptionItem.value[1] : descriptionItem.value) : null\n                    return description && String(description).trim() ? (\n                      <div className=\"asset-description\">\n                        <h4>Description</h4>\n                        <p>{String(description)}</p>\n                      </div>\n                    ) : null\n                  })()}\n                </div>\n              )}\n            </div>\n          </div>\n          \n          {/* Redemption Section */}\n          {account && (\n            <div className=\"redemption-section\">\n              {!showRedeemSection ? (\n                <button \n                  className=\"show-redeem-button\"\n                  onClick={() => setShowRedeemSection(true)}\n                >\n                  Redeem this Asset\n                </button>\n              ) : (\n                <div className=\"redeem-form\">\n                  <h4>Redeem Asset</h4>\n                  <p className=\"redeem-description\">\n                    Redeem this tokenized asset by paying {asset.rwax.redeemAmount.toFixed(8)} WPIXAL plus a fee.\n                  </p>\n                  \n                  <div className=\"fee-selection\">\n                    <h5>Select Fee Token:</h5>\n                    <div className=\"fee-options\">\n                      {feeTokens.map((token, index) => (\n                        <div \n                          key={index}\n                          className={`fee-option ${selectedFeeToken === token ? 'selected' : ''}`}\n                          onClick={() => setSelectedFeeToken(token)}\n                        >\n                          <div className=\"fee-info\">\n                            <span className=\"fee-amount\">{token.fee}</span>\n                            <span className=\"fee-contract\">({token.contract})</span>\n                          </div>\n                          {token.wax_value && token.symbol !== 'WAX' && (\n                            <div className=\"wax-equivalent\">\n                              ≈ {parseFloat(token.wax_value).toFixed(4)} WAX\n                            </div>\n                          )}\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                  \n                  <div className=\"redeem-actions\">\n                    <button \n                      className=\"cancel-redeem-button\"\n                      onClick={() => setShowRedeemSection(false)}\n                    >\n                      Cancel\n                    </button>\n                    <button \n                      className=\"confirm-redeem-button\"\n                      onClick={handleRedeem}\n                      disabled={!selectedFeeToken || loading}\n                    >\n                      {loading ? 'Processing...' : 'Confirm Redemption'}\n                    </button>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n          \n          {!account && (\n            <div className=\"wallet-connect-message\">\n              <p>Connect your wallet to redeem this asset</p>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default AssetDetailModal","import React, { useState, useEffect, useCallback } from 'react'\nimport { apiService } from '../services/api'\nimport { log } from '../services/loggingService'\nimport MediaRenderer from './MediaRenderer'\nimport '../css/rwax-live-transactions.css'\n\ninterface RWAXTransaction {\n  transfer_id: string\n  sender_name: string\n  recipient_name: string\n  assets: Array<{\n    asset_id?: string\n    name?: string\n    data?: {\n      img?: string\n      video?: string\n      [key: string]: string | number | boolean | undefined\n    }\n    template?: {\n      template_id: string\n      max_supply: string\n      immutable_data?: Record<string, string | number | boolean>\n    }\n    collection?: {\n      collection_name: string\n      name: string\n      img?: string\n    }\n    schema?: {\n      schema_name: string\n    }\n    template_mint?: string | number\n  }>\n  memo?: string\n  created_at_time: string\n  txid: string\n  type: 'tokenization' | 'redemption'\n}\n\ninterface RWAXLiveTransactionsProps {\n  limit?: number\n  refreshInterval?: number\n}\n\nconst RWAXLiveTransactions: React.FC<RWAXLiveTransactionsProps> = ({ \n  limit = 12, \n  refreshInterval = 30000 \n}) => {\n  const [transactions, setTransactions] = useState<RWAXTransaction[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [lastUpdate, setLastUpdate] = useState<Date | null>(null)\n  const [page, setPage] = useState(1)\n  const [hasMore, setHasMore] = useState(true)\n  const [loadingMore, setLoadingMore] = useState(false)\n\n  const fetchTransactions = useCallback(async (pageNum: number = 1, append: boolean = false) => {\n    try {\n      if (!append) {\n        setError(null)\n        setLoading(true)\n      } else {\n        setLoadingMore(true)\n      }\n      \n      const response = await apiService.getRWAXTransfers({\n        limit,\n        page: pageNum,\n        order: 'desc'\n      })\n      \n      if (response.success) {\n        const newTransactions = response.data\n        \n        if (append) {\n          setTransactions(prev => [...prev, ...newTransactions])\n        } else {\n          setTransactions(newTransactions)\n        }\n        \n        // Check if there are more transactions to load\n        setHasMore(newTransactions.length === limit)\n        setLastUpdate(new Date())\n      } else {\n        throw new Error('Failed to fetch RWAX transactions')\n      }\n      \n    } catch (err) {\n      log.error('Error fetching RWAX transactions', 'RWAXLiveTransactions', err as Error)\n      if (!append) {\n        setError('Failed to load RWAX transactions')\n      }\n    } finally {\n      setLoading(false)\n      setLoadingMore(false)\n    }\n  }, [limit])\n\n  const loadMore = async () => {\n    if (!loadingMore && hasMore) {\n      const nextPage = page + 1\n      setPage(nextPage)\n      await fetchTransactions(nextPage, true)\n    }\n  }\n\n  useEffect(() => {\n    fetchTransactions()\n    \n    // Set up auto-refresh\n    const interval = setInterval(() => {\n      fetchTransactions(1, false)\n      setPage(1)\n    }, refreshInterval)\n    \n    return () => clearInterval(interval)\n  }, [limit, refreshInterval, fetchTransactions])\n\n  const formatTime = (timestamp: string) => {\n    try {\n      const date = new Date(timestamp)\n      \n      // Check if date is valid\n      if (isNaN(date.getTime())) {\n        return 'Unknown'\n      }\n      \n      const now = new Date()\n      const diffMs = now.getTime() - date.getTime()\n      const diffMins = Math.floor(diffMs / 60000)\n      \n      // Handle negative differences (future dates)\n      if (diffMins < 0) return 'Just now'\n      if (diffMins < 1) return 'Just now'\n      if (diffMins < 60) return `${diffMins}m ago`\n      if (diffMins < 1440) return `${Math.floor(diffMins / 60)}h ago`\n      return `${Math.floor(diffMins / 1440)}d ago`\n    } catch (error) {\n      return 'Unknown'\n    }\n  }\n\n  const getTransactionIcon = (type: 'tokenization' | 'redemption') => {\n    return type === 'tokenization' ? '🔄' : '🎁'\n  }\n\n  const getTransactionLabel = (type: 'tokenization' | 'redemption') => {\n    return type === 'tokenization' ? 'Tokenized' : 'Redeemed'\n  }\n\n  const processImageUrl = (imageUrl?: string): string => {\n    if (!imageUrl) return '/placeholder-nft.png'\n    \n    // Handle IPFS URLs\n    if (imageUrl.startsWith('Qm') || imageUrl.startsWith('baf')) {\n      return `https://ipfs.io/ipfs/${imageUrl}`\n    }\n    \n    // Handle relative URLs\n    if (imageUrl.startsWith('/')) {\n      return `https://ipfs.io/ipfs${imageUrl}`\n    }\n    \n    return imageUrl\n  }\n\n  if (loading && transactions.length === 0) {\n    return (\n      <div className=\"rwax-live-transactions\">\n        <div className=\"rwax-live-transactions-header\">\n          <h3>Live RWAX Transactions</h3>\n          <div className=\"loading-spinner\"></div>\n        </div>\n        <div className=\"transactions-loading\">\n          <p>Loading RWAX transactions...</p>\n        </div>\n      </div>\n    )\n  }\n\n  if (error && transactions.length === 0) {\n    return (\n      <div className=\"rwax-live-transactions\">\n        <div className=\"rwax-live-transactions-header\">\n          <h3>Live RWAX Transactions</h3>\n          <button onClick={() => fetchTransactions()} className=\"refresh-button\">\n            🔄\n          </button>\n        </div>\n        <div className=\"transactions-error\">\n          <p>{error}</p>\n          <button onClick={() => fetchTransactions()} className=\"retry-button\">\n            Try Again\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"rwax-live-transactions\">\n      <div className=\"rwax-live-transactions-header\">\n        <h3>Live RWAX Transactions</h3>\n        <div className=\"header-actions\">\n          {lastUpdate && (\n            <span className=\"last-update\">\n              Updated {formatTime(lastUpdate.toISOString())}\n            </span>\n          )}\n          <button \n            onClick={() => {\n              fetchTransactions(1, false)\n              setPage(1)\n            }} \n            className=\"refresh-button\"\n            disabled={loading}\n          >\n            {loading ? '⏳' : '🔄'}\n          </button>\n        </div>\n      </div>\n      \n      <div className=\"rwax-transactions-grid\">\n        {transactions.length === 0 ? (\n          <div className=\"no-transactions\">\n            <p>No recent RWAX transactions found</p>\n          </div>\n        ) : (\n          transactions.map((tx, index) => (\n            <div key={`${tx.txid}-${tx.transfer_id}-${index}`} className=\"rwax-transaction-card\">\n              <div className=\"transaction-header\">\n                <div className=\"transaction-type\">\n                  <span className=\"transaction-icon\">\n                    {getTransactionIcon(tx.type)}\n                  </span>\n                  <span className={`transaction-label ${tx.type}`}>\n                    {getTransactionLabel(tx.type)}\n                  </span>\n                </div>\n                <span className=\"transaction-time\">\n                  {formatTime(tx.created_at_time)}\n                </span>\n              </div>\n              \n              <div className=\"transaction-assets\">\n                {tx.assets.slice(0, 1).map((asset) => (\n                  <div key={asset.asset_id} className=\"asset-preview\">\n                    <MediaRenderer \n                      imageUrl={processImageUrl(asset.data?.img)}\n                      alt={asset.name || 'Unknown Asset'}\n                      className=\"asset-image\"\n                    />\n                    <div className=\"asset-info\">\n                      <h4 className=\"asset-name\">{asset.name || 'Unknown Asset'}</h4>\n                      <p className=\"asset-mint\">#{asset.template_mint || asset.asset_id || 'N/A'}</p>\n                    </div>\n                  </div>\n                ))}\n                {tx.assets.length > 1 && (\n                  <div className=\"additional-assets\">\n                    +{tx.assets.length - 1} more\n                  </div>\n                )}\n              </div>\n              \n              <div className=\"transaction-details\">\n                <div className=\"transaction-accounts\">\n                  <span className=\"account from\">\n                    From: {tx.sender_name.length > 8 ? `${tx.sender_name.slice(0, 6)}...` : tx.sender_name}\n                  </span>\n                  <span className=\"account to\">\n                    To: {tx.recipient_name.length > 8 ? `${tx.recipient_name.slice(0, 6)}...` : tx.recipient_name}\n                  </span>\n                </div>\n                \n                <div className=\"transaction-actions\">\n                  <button \n                    className=\"view-tx-button\"\n                    onClick={() => window.open(`https://waxblock.io/transaction/${tx.txid}`, '_blank')}\n                    title=\"View on WAX Block Explorer\"\n                  >\n                    🔗\n                  </button>\n                </div>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n      \n      {hasMore && (\n        <div className=\"load-more-section\">\n          <button \n            onClick={loadMore}\n            className=\"load-more-button\"\n            disabled={loadingMore}\n          >\n            {loadingMore ? (\n              <>\n                <div className=\"loading-spinner small\"></div>\n                Loading more...\n              </>\n            ) : (\n              'Load More Transactions'\n            )}\n          </button>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default RWAXLiveTransactions","import React, { useState, useCallback, useEffect } from 'react'\nimport '../css/attribute-filter.css'\n\ninterface PixalAttributeFilterProps {\n  onFiltersChange: (filters: Record<string, string[]>) => void\n  initialFilters?: Record<string, string[]>\n}\n\ninterface FilterState {\n  [attributeName: string]: {\n    isExpanded: boolean\n    selectedValues: Set<string>\n    searchTerm: string\n  }\n}\n\n// Hardcoded Pixal attributes to prevent API refresh loops\nconst PIXAL_ATTRIBUTES = {\n  'Background': [\n    'Nefty Spot',\n    'Blue Sky',\n    'Forest',\n    'Desert',\n    'Ocean',\n    'Mountain',\n    'City',\n    'Space',\n    'Sunset',\n    'Rainbow'\n  ],\n  'Body': [\n    'Pink-Blue Overalls',\n    'Red Shirt',\n    'Blue Hoodie',\n    'Green Jacket',\n    'Yellow Dress',\n    'Purple Suit',\n    'Orange Tank',\n    'Black Tee',\n    'White Polo',\n    'Gray Sweater'\n  ],\n  'Eyes': [\n    'Kawaii Green',\n    'Brown',\n    'Blue',\n    'Hazel',\n    'Gray',\n    'Amber',\n    'Violet',\n    'Red',\n    'Black',\n    'Gold'\n  ],\n  'Head': [\n    'Grey',\n    'Black Hair',\n    'Brown Hair',\n    'Blonde Hair',\n    'Red Hair',\n    'Blue Hair',\n    'Green Hair',\n    'Purple Hair',\n    'Bald',\n    'Hat'\n  ]\n}\n\nexport const PixalAttributeFilter: React.FC<PixalAttributeFilterProps> = ({\n  onFiltersChange,\n  initialFilters = {}\n}) => {\n  const [filterState, setFilterState] = useState<FilterState>({})\n\n  // Initialize filter state\n  useEffect(() => {\n    const newFilterState: FilterState = {}\n    \n    Object.keys(PIXAL_ATTRIBUTES).forEach(attributeName => {\n      newFilterState[attributeName] = {\n        isExpanded: false,\n        selectedValues: new Set(initialFilters[attributeName] || []),\n        searchTerm: ''\n      }\n    })\n    \n    setFilterState(newFilterState)\n  }, []) // Only run once on mount\n\n  // Handle attribute value selection\n  const handleValueToggle = useCallback((attributeName: string, value: string) => {\n    setFilterState(prev => {\n      const newState = { ...prev }\n      if (!newState[attributeName]) {\n        newState[attributeName] = {\n          isExpanded: false,\n          selectedValues: new Set(),\n          searchTerm: ''\n        }\n      }\n      \n      const selectedValues = new Set(newState[attributeName].selectedValues)\n      if (selectedValues.has(value)) {\n        selectedValues.delete(value)\n      } else {\n        selectedValues.add(value)\n      }\n      \n      newState[attributeName] = {\n        ...newState[attributeName],\n        selectedValues\n      }\n      \n      return newState\n    })\n  }, [])\n\n  // Handle attribute expansion toggle\n  const handleAttributeToggle = useCallback((attributeName: string) => {\n    setFilterState(prev => ({\n      ...prev,\n      [attributeName]: {\n        ...prev[attributeName],\n        isExpanded: !prev[attributeName]?.isExpanded\n      }\n    }))\n  }, [])\n\n  // Handle search term change\n  const handleSearchChange = useCallback((attributeName: string, searchTerm: string) => {\n    setFilterState(prev => ({\n      ...prev,\n      [attributeName]: {\n        ...prev[attributeName],\n        searchTerm\n      }\n    }))\n  }, [])\n\n  // Clear all filters\n  const clearAllFilters = useCallback(() => {\n    const clearedState: FilterState = {}\n    Object.keys(PIXAL_ATTRIBUTES).forEach(attributeName => {\n      clearedState[attributeName] = {\n        isExpanded: false,\n        selectedValues: new Set(),\n        searchTerm: ''\n      }\n    })\n    setFilterState(clearedState)\n  }, [])\n\n  // Emit filter changes\n  useEffect(() => {\n    const filters: Record<string, string[]> = {}\n    Object.entries(filterState).forEach(([attributeName, state]) => {\n      if (state.selectedValues.size > 0) {\n        filters[attributeName] = Array.from(state.selectedValues)\n      }\n    })\n    onFiltersChange(filters)\n  }, [filterState, onFiltersChange])\n\n  // Get filtered attribute values based on search term\n  const getFilteredValues = (attributeName: string) => {\n    const searchTerm = filterState[attributeName]?.searchTerm?.toLowerCase() || ''\n    const values = PIXAL_ATTRIBUTES[attributeName as keyof typeof PIXAL_ATTRIBUTES] || []\n    \n    if (!searchTerm) return values\n    \n    return values.filter(value => \n      value.toLowerCase().includes(searchTerm)\n    )\n  }\n\n  // Calculate total selected filters\n  const totalSelected = Object.values(filterState).reduce(\n    (total, state) => total + state.selectedValues.size,\n    0\n  )\n\n  return (\n    <div className=\"attribute-filter-container\">\n      <div className=\"filter-header\">\n        <h3>Pixal Traits</h3>\n        {totalSelected > 0 && (\n          <button className=\"clear-all-button\" onClick={clearAllFilters}>\n            Clear All ({totalSelected})\n          </button>\n        )}\n      </div>\n\n      {Object.entries(PIXAL_ATTRIBUTES).map(([attributeName]) => {\n        const state = filterState[attributeName]\n        const filteredValues = getFilteredValues(attributeName)\n        const selectedCount = state?.selectedValues.size || 0\n\n        return (\n          <div key={attributeName} className=\"filter-group\">\n            <div \n              className=\"filter-group-header\"\n              onClick={() => handleAttributeToggle(attributeName)}\n            >\n              <div className=\"attribute-name\">\n                {attributeName}\n                {selectedCount > 0 && (\n                  <span className=\"selected-count\">{selectedCount}</span>\n                )}\n              </div>\n              <div className={`expand-icon ${state?.isExpanded ? 'expanded' : ''}`}>\n                ▼\n              </div>\n            </div>\n\n            {state?.isExpanded && (\n              <div className=\"filter-group-content\">\n                <input\n                  type=\"text\"\n                  placeholder={`Search ${attributeName.toLowerCase()}...`}\n                  value={state.searchTerm}\n                  onChange={(e) => handleSearchChange(attributeName, e.target.value)}\n                  className=\"attribute-search\"\n                />\n\n                <div className=\"attribute-values\">\n                  {filteredValues.length > 0 ? (\n                    filteredValues.map(value => {\n                      const isSelected = state.selectedValues.has(value)\n                      return (\n                        <div\n                          key={value}\n                          className={`attribute-value-item ${isSelected ? 'selected' : ''}`}\n                          onClick={() => handleValueToggle(attributeName, value)}\n                        >\n                          <span className=\"attribute-value-text\">{value}</span>\n                        </div>\n                      )\n                    })\n                  ) : (\n                    <div className=\"no-results\">\n                      No {attributeName.toLowerCase()} found matching \"{state.searchTerm}\"\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n          </div>\n        )\n      })}\n    </div>\n  )\n}","import React, { useState, useEffect, useCallback, useMemo } from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport { useWallet } from '../contexts/WalletContext'\nimport { useNotifications } from '../hooks/useNotifications'\nimport { rwaxService, type TokenizedAsset, type FeeToken, type UserAsset } from '../services/rwaxService'\nimport { attributeService } from '../services/attributeService'\nimport { alcorService } from '../services/alcorService'\nimport { priceService } from '../services/priceService'\nimport { balanceService } from '../services/balanceService'\nimport { wharfKitService } from '../services/wharfkit'\nimport MediaRenderer from './MediaRenderer'\nimport TokenizeFromInventoryModal from './TokenizeFromInventoryModal'\nimport AssetDetailModal from './AssetDetailModal'\nimport RWAXLiveTransactions from './RWAXLiveTransactions'\nimport { PixalAttributeFilter } from './PixalAttributeFilter'\nimport ShareModal from './ShareModal'\nimport { log } from '../services/loggingService'\nimport '../css/rwax.css'\nimport SwapInterface from './SwapInterface'\n\n\n\nconst RWax: React.FC = () => {\n  const navigate = useNavigate()\n  const { account, session } = useWallet()\n  const { showSuccess, showError } = useNotifications()\n  \n  const [activeTab, setActiveTab] = useState<'redeem' | 'other-collections'>('redeem')\n  const [tokenizedAssets, setTokenizedAssets] = useState<TokenizedAsset[]>([])\n\n  const [feeTokens, setFeeTokens] = useState<FeeToken[]>([])\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  \n  // Modal states\n  const [showTokenizeModal, setShowTokenizeModal] = useState(false)\n  const [showRedeemModal, setShowRedeemModal] = useState(false)\n  const [showInventoryModal, setShowInventoryModal] = useState(false)\n  const [showAssetDetailModal, setShowAssetDetailModal] = useState(false)\n  const [showWaxRedeemModal, setShowWaxRedeemModal] = useState(false)\n  const [selectedAsset, setSelectedAsset] = useState<UserAsset | TokenizedAsset | null>(null)\n  const [selectedDetailAsset, setSelectedDetailAsset] = useState<TokenizedAsset | null>(null)\n  const [selectedFeeToken, setSelectedFeeToken] = useState<FeeToken | null>(null)\n  const [waxRedeemStep, setWaxRedeemStep] = useState<'confirm' | 'swap' | 'redeem' | 'complete'>('confirm')\n  const [waxAmount, setWaxAmount] = useState<string>('')\n  \n  // New state for enhancements\n  const [selectedAssets, setSelectedAssets] = useState<Set<string>>(new Set())\n  const [showImageZoom, setShowImageZoom] = useState(false)\n  const [zoomedImage, setZoomedImage] = useState<{url: string, name: string} | null>(null)\n  const [showWpixalPurchaseModal, setShowWpixalPurchaseModal] = useState(false)\n  const [wpixalToPurchase, setWpixalToPurchase] = useState<number>(0)\n  const [wpixalPriceWAX, setWpixalPriceWAX] = useState<number>(0) // WPIXAL price in WAX\n  const [wpixalPriceUSD, setWpixalPriceUSD] = useState<number>(0) // WPIXAL price in USD\n  \n  // Filter sidebar state\n  const [isFilterSidebarOpen, setIsFilterSidebarOpen] = useState(false)\n  const [priceRange, setPriceRange] = useState({ min: '', max: '' })\n  const [waxPriceUSD, setWaxPriceUSD] = useState<number>(0) // WAX price in USD\n  const [showPriceAlertModal, setShowPriceAlertModal] = useState(false)\n  const [alertAsset] = useState<TokenizedAsset | null>(null)\n  const [alertPercentage, setAlertPercentage] = useState<number>(10)\n  \n  // Share modal state\n  const [showShareModal, setShowShareModal] = useState(false)\n  const [shareAsset, setShareAsset] = useState<TokenizedAsset | null>(null)\n  const [showWpixalAlertModal, setShowWpixalAlertModal] = useState(false)\n  const [wpixalAlertPrice, setWpixalAlertPrice] = useState<string>('')\n  const [waxBalance, setWaxBalance] = useState<string>('0.0000 WAX')\n  \n  // Pagination state for tokenized assets\n  const [assetsPage, setAssetsPage] = useState(1)\n  const [hasMoreAssets, setHasMoreAssets] = useState(true)\n  const [loadingMoreAssets, setLoadingMoreAssets] = useState(false)\n  \n  // Sorting and filtering state\n  const [sortBy, setSortBy] = useState('rarity_score_desc')\n  const [attributeFilters, setAttributeFilters] = useState('')\n  const [selectedAttributeFilters, setSelectedAttributeFilters] = useState<Record<string, string[]>>({})\n  const [searchTerm, setSearchTerm] = useState('')\n  \n  // Watchlist and sharing state\n  const [watchlist, setWatchlist] = useState<Set<string>>(new Set())\n  const [priceAlerts, setPriceAlerts] = useState<Map<string, {\n    assetId: string\n    assetName: string\n    originalPrice: number\n    alertPercentage: number\n    createdAt: number\n  }>>(new Map())\n\n  // Filter assets based on search term\n  const filteredAssets = useMemo(() => {\n    if (!searchTerm.trim()) {\n      return tokenizedAssets\n    }\n    \n    const searchLower = searchTerm.toLowerCase()\n    return tokenizedAssets.filter(asset => {\n      // Search in asset name\n      if (asset.name?.toLowerCase().includes(searchLower)) {\n        return true\n      }\n      \n      // Search in collection name and display name\n      if (asset.collection?.collectionName?.toLowerCase().includes(searchLower) ||\n          asset.collection?.displayName?.toLowerCase().includes(searchLower)) {\n        return true\n      }\n      \n      // Search in template ID\n      if (asset.template?.templateId?.toString().includes(searchLower)) {\n        return true\n      }\n      \n      // Search in immutable data attributes\n      if (asset.immutableData) {\n        for (const attr of asset.immutableData) {\n          if (attr.key?.toLowerCase().includes(searchLower) || \n              attr.value?.[1]?.toString().toLowerCase().includes(searchLower)) {\n            return true\n          }\n        }\n      }\n      \n      // Search in mutable data attributes\n      if (asset.mutableData) {\n        for (const attr of asset.mutableData) {\n          if (attr.key?.toLowerCase().includes(searchLower) || \n              attr.value?.[1]?.toString().toLowerCase().includes(searchLower)) {\n            return true\n          }\n        }\n      }\n      \n      return false\n    })\n  }, [tokenizedAssets, searchTerm])\n\n  // Load tokenized assets from RWAX\n  const loadTokenizedAssets = useCallback(async (page: number = 1, append: boolean = false) => {\n    log.debug('Loading tokenized assets', 'RWax.loadTokenizedAssets', { page, append, sortBy, attributeFilters })\n    try {\n      if (!append) {\n        setLoading(true)\n        setError(null)\n      } else {\n        setLoadingMoreAssets(true)\n      }\n      \n      const limit = 36\n      const offset = (page - 1) * limit\n      log.debug('Calling rwaxService.getTokenizedAssets', 'RWax.loadTokenizedAssets', { limit, offset, sortBy, attributeFilters })\n      const assets = await rwaxService.getTokenizedAssets(limit, offset, sortBy, attributeFilters)\n      log.info('Received tokenized assets', 'RWax.loadTokenizedAssets', { count: assets.length })\n      \n      if (append) {\n        setTokenizedAssets(prev => [...prev, ...assets])\n      } else {\n        setTokenizedAssets(assets)\n      }\n      \n      // Check if there are more assets to load\n      setHasMoreAssets(assets.length === limit)\n      \n    } catch (err) {\n      log.error('Error loading tokenized assets', 'RWax', err as Error)\n      if (!append) {\n        setError('Failed to load tokenized assets. Please try again later.')\n      }\n    } finally {\n      setLoading(false)\n      setLoadingMoreAssets(false)\n    }\n  }, [sortBy, attributeFilters])\n\n  // Load more tokenized assets\n  const loadMoreAssets = useCallback(async () => {\n    const nextPage = assetsPage + 1\n    await loadTokenizedAssets(nextPage, true)\n    setAssetsPage(nextPage)\n  }, [assetsPage, loadTokenizedAssets])\n  \n  // Handle sorting change\n  const handleSortChange = useCallback((newSortBy: string) => {\n    setSortBy(newSortBy)\n    setAssetsPage(1)\n  }, [])\n  \n  // Handle attribute filter changes with debouncing\n  const handleAttributeFiltersChange = useCallback((filters: Record<string, string[]>) => {\n    setSelectedAttributeFilters(filters)\n    const formattedFilters = attributeService.formatAttributesForQuery(filters)\n    setAttributeFilters(formattedFilters)\n    setAssetsPage(1)\n  }, [])\n  \n  // Effect to reload assets when sort or filters change\n  useEffect(() => {\n    const timeoutId = setTimeout(() => {\n      if (activeTab === 'redeem') {\n        loadTokenizedAssets(1, false)\n      }\n    }, 300) // 300ms debounce\n    \n    return () => clearTimeout(timeoutId)\n  }, [sortBy, attributeFilters, activeTab])\n\n\n\n  // Load fee tokens\n  const loadFeeTokens = useCallback(async () => {\n    try {\n      const tokens = await rwaxService.getFeeTokens()\n      setFeeTokens(tokens)\n    } catch (err) {\n      log.error('Error loading fee tokens', 'RWax', err as Error)\n    }\n  }, [])\n\n  // Load live price data\n  const loadPriceData = useCallback(async () => {\n    try {\n      const [wpixalWAX, wpixalUSD, waxUSD] = await Promise.all([\n        priceService.getWpixalPriceWAX(),\n        priceService.getWpixalPriceUSD(),\n        priceService.getWaxPriceUSD()\n      ])\n      \n      setWpixalPriceWAX(wpixalWAX)\n      setWpixalPriceUSD(wpixalUSD)\n      setWaxPriceUSD(waxUSD)\n    } catch (err) {\n      log.error('Error loading price data', 'RWax', err as Error)\n      // Use more realistic fallback prices and show error to user\n      setWpixalPriceWAX(0.0177) // More realistic WPIXAL/WAX ratio\n      setWpixalPriceUSD(0.0009) // More realistic WPIXAL USD price\n      setWaxPriceUSD(0.051) // More realistic WAX USD price\n      showError('Price Loading Error', 'Unable to fetch current prices. Using fallback values.')\n    }\n  }, [showError])\n\n  // Load WAX balance\n  const loadWaxBalance = useCallback(async () => {\n    if (!account) {\n      setWaxBalance('0.0000 WAX')\n      return\n    }\n\n    try {\n      const balance = await balanceService.getWaxBalance(account)\n      setWaxBalance(balance)\n    } catch (err) {\n      log.error('Error loading WAX balance', 'RWax', err as Error)\n      setWaxBalance('0.0000 WAX')\n    }\n  }, [account])\n\n  useEffect(() => {\n    loadFeeTokens()\n    loadPriceData()\n    loadWaxBalance()\n    if (activeTab === 'redeem') {\n      loadTokenizedAssets(1, false)\n    }\n  }, [activeTab, loadTokenizedAssets, loadFeeTokens, loadPriceData, loadWaxBalance])\n\n  // Refresh price data every 5 minutes\n  useEffect(() => {\n    const priceInterval = setInterval(loadPriceData, 5 * 60 * 1000)\n    return () => clearInterval(priceInterval)\n  }, [loadPriceData])\n\n\n\n  const handleRedeem = (asset: TokenizedAsset) => {\n    setSelectedAsset(asset)\n    setShowRedeemModal(true)\n  }\n\n  const handleWaxRedeem = (asset: TokenizedAsset) => {\n    setSelectedAsset(asset)\n    setShowWaxRedeemModal(true)\n    setWaxRedeemStep('confirm')\n    setWaxAmount('')\n  }\n\n  // New handler functions\n  const handleImageZoom = (imageUrl: string, name: string) => {\n    // Process IPFS URLs properly\n    let processedUrl = imageUrl\n    if (imageUrl && !imageUrl.startsWith('http')) {\n      if (imageUrl.startsWith('Qm') || imageUrl.startsWith('baf')) {\n        processedUrl = `https://ipfs.io/ipfs/${imageUrl}`\n      } else if (imageUrl.startsWith('/ipfs/')) {\n        processedUrl = `https://ipfs.io/ipfs/${imageUrl.replace('/ipfs/', '')}`\n      } else if (imageUrl.startsWith('ipfs://')) {\n        processedUrl = imageUrl.replace('ipfs://', 'https://ipfs.io/ipfs/')\n      }\n    }\n    setZoomedImage({ url: processedUrl, name })\n    setShowImageZoom(true)\n  }\n\n  const handleAssetSelection = (assetId: string) => {\n    const newSelected = new Set(selectedAssets)\n    if (newSelected.has(assetId)) {\n      newSelected.delete(assetId)\n    } else {\n      newSelected.add(assetId)\n    }\n    setSelectedAssets(newSelected)\n  }\n\n  const handleSelectAll = () => {\n    if (selectedAssets.size === tokenizedAssets.length) {\n      setSelectedAssets(new Set())\n    } else {\n      setSelectedAssets(new Set(tokenizedAssets.map(asset => asset.assetId.toString())))\n    }\n  }\n\n  const handleBatchRedeem = async () => {\n    if (selectedAssets.size === 0) return\n    \n    try {\n      setLoading(true)\n      const selectedAssetsList = tokenizedAssets.filter(asset => selectedAssets.has(asset.assetId.toString()))\n      \n      // Use the first available fee token for batch operations\n      const defaultFeeToken = feeTokens.length > 0 ? feeTokens[0] : null\n      if (!defaultFeeToken) {\n        showError('No fee tokens available for batch redemption')\n        return\n      }\n      \n      for (const asset of selectedAssetsList) {\n        if (!account) {\n          showError('Please connect your wallet')\n          return\n        }\n        \n        try {\n          // Create transaction actions for WharfKit\n          const actions = [\n            {\n              account: 'nft.hive',\n              name: 'boost',\n              authorization: [{\n                actor: account,\n                permission: 'active'\n              }],\n              data: {\n                booster: account\n              }\n            },\n            {\n              account: defaultFeeToken.contract,\n              name: 'transfer',\n              authorization: [{\n                actor: account,\n                permission: 'active'\n              }],\n              data: {\n                from: account,\n                to: 'rwax',\n                quantity: defaultFeeToken.fee,\n                memo: 'payfee'\n              }\n            },\n            {\n              account: 'pixeljourney',\n              name: 'transfer',\n              authorization: [{\n                actor: account,\n                permission: 'active'\n              }],\n              data: {\n                from: account,\n                to: 'rwax',\n                quantity: `${asset.rwax.redeemAmount.toFixed(8)} WPIXAL`,\n                memo: 'redeem'\n              }\n            },\n            {\n              account: 'rwax',\n              name: 'redeem',\n              authorization: [{\n                actor: account,\n                permission: 'active'\n              }],\n              data: {\n                redeemer: account,\n                contract: 'pixeljourney',\n                quantity: `${asset.rwax.redeemAmount.toFixed(8)} WPIXAL`,\n                asset_id: asset.assetId.toString(),\n                fee_currency: `8,${defaultFeeToken.symbol}`\n              }\n            }\n          ]\n          \n          // Execute transaction through WharfKit\n          const result = await wharfKitService.transact(actions)\n          log.info(`Redemption transaction completed for ${asset.name}`, 'RWax.handleBatchRedemption', { assetId: asset.assetId, result })\n        } catch (err) {\n          log.error(`Error redeeming asset ${asset.assetId}`, 'RWax', err as Error)\n          // Continue with other assets even if one fails\n        }\n      }\n      \n      showSuccess(`Successfully processed redemption for ${selectedAssets.size} assets!`)\n      setSelectedAssets(new Set())\n      loadTokenizedAssets()\n    } catch (error) {\n      log.error('Batch redemption failed', 'RWax', error as Error)\n      showError('Batch redemption failed. Please try again.')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleWpixalPurchase = (amount: number) => {\n    setWpixalToPurchase(amount)\n    setShowWpixalPurchaseModal(true)\n  }\n\n\n\n\n  const closeWaxRedeemModal = () => {\n    setShowWaxRedeemModal(false)\n    setWaxRedeemStep('confirm')\n    setWaxAmount('')\n    setLoading(false)\n    setSelectedAsset(null)\n  }\n\n  // Handle asset detail view\n  const handleViewAssetDetail = (asset: TokenizedAsset) => {\n    setSelectedDetailAsset(asset)\n    setShowAssetDetailModal(true)\n  }\n\n  // Filter sidebar functions\n  const toggleFilterSidebar = useCallback(() => {\n    setIsFilterSidebarOpen(prev => !prev)\n  }, [])\n\n  const closeFilterSidebar = useCallback(() => {\n    setIsFilterSidebarOpen(false)\n  }, [])\n\n  // Handle redemption from detail modal\n  const handleRedeemFromDetail = async (asset: TokenizedAsset, feeToken: FeeToken) => {\n    if (!account) {\n      showError('Please connect your wallet')\n      return\n    }\n\n    try {\n      setLoading(true)\n      \n      // Create transaction actions for WharfKit\n      const actions = [\n        {\n          account: 'nft.hive',\n          name: 'boost',\n          authorization: [{\n            actor: account,\n            permission: 'active'\n          }],\n          data: {\n            booster: account\n          }\n        },\n        {\n          account: feeToken.contract,\n          name: 'transfer',\n          authorization: [{\n            actor: account,\n            permission: 'active'\n          }],\n          data: {\n            from: account,\n            to: 'rwax',\n            quantity: feeToken.fee,\n            memo: 'payfee'\n          }\n        },\n        {\n          account: 'pixeljourney',\n          name: 'transfer',\n          authorization: [{\n            actor: account,\n            permission: 'active'\n          }],\n          data: {\n            from: account,\n            to: 'rwax',\n            quantity: `${asset.rwax.redeemAmount.toFixed(8)} WPIXAL`,\n            memo: 'redeem'\n          }\n        },\n        {\n          account: 'rwax',\n          name: 'redeem',\n          authorization: [{\n            actor: account,\n            permission: 'active'\n          }],\n          data: {\n            redeemer: account,\n            contract: 'pixeljourney',\n            quantity: `${asset.rwax.redeemAmount.toFixed(8)} WPIXAL`,\n            asset_id: asset.assetId.toString(),\n            fee_currency: `8,${feeToken.symbol}`\n          }\n        }\n      ]\n      \n      // Execute transaction through WharfKit\n      const result = await wharfKitService.transact(actions)\n      \n      showSuccess('Redemption transaction completed successfully!')\n      log.info('Redemption transaction completed', 'RWax.handleRedemption', { result })\n      setShowAssetDetailModal(false)\n      setSelectedDetailAsset(null)\n      // Refresh data\n      loadTokenizedAssets()\n    } catch (err) {\n      log.error('Error during redemption', 'RWax', err as Error)\n      showError('Redemption failed. Please try again.')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  // Execute WAX to WPIXAL swap and redemption\n  const executeWaxRedeem = async () => {\n    if (!selectedAsset || !account || !session || !isTokenizedAsset(selectedAsset)) {\n      showError('Missing required data for WAX redemption')\n      return\n    }\n\n    // Check if user has sufficient WAX balance\n    const userWaxAmount = parseFloat(waxBalance.split(' ')[0])\n    const requiredWaxAmount = parseFloat(waxAmount)\n    if (userWaxAmount < requiredWaxAmount) {\n      showError(`Insufficient WAX balance. You have ${waxBalance} but need ${requiredWaxAmount.toFixed(4)} WAX`)\n      return\n    }\n\n    try {\n      setLoading(true)\n      setWaxRedeemStep('swap')\n\n      // Step 1: Execute WAX to WPIXAL swap via Alcor\n      const swapTransaction = await alcorService.executeSwap(waxAmount, account)\n      \n      // Here you would normally execute the transaction with the wallet\n      // For now, we'll simulate the process\n      showSuccess('Swap transaction prepared')\n      log.info('Swap transaction prepared', 'RWax.handleWaxRedemption', { swapTransaction })\n      \n      // Simulate swap completion delay\n      await new Promise(resolve => setTimeout(resolve, 2000))\n      \n      setWaxRedeemStep('redeem')\n      \n      // Step 2: Execute redemption with the swapped WPIXAL\n      const feeToken: FeeToken = {\n        fee: '0.00000000',\n        contract: 'eosio.token',\n        exchange_rate: '1',\n        symbol: 'WAX',\n        amount: '0.00000000'\n      }\n      \n      if (!isTokenizedAsset(selectedAsset)) {\n        showError('Selected asset is not a tokenized asset')\n        return\n      }\n\n      const redeemTransaction = await rwaxService.executeRedemption(\n        selectedAsset.assetId.toString(), \n        selectedAsset.rwax.redeemAmount.toFixed(8) + ' WPIXAL', \n        feeToken\n      )\n      \n      showSuccess('Redemption transaction prepared')\n      log.info('Redemption transaction prepared', 'RWax.handleWaxRedemption', { redeemTransaction })\n      \n      // Simulate redemption completion\n      await new Promise(resolve => setTimeout(resolve, 2000))\n      \n      setWaxRedeemStep('complete')\n      showSuccess('WAX redemption completed successfully!')\n      \n    } catch (err) {\n      log.error('Error during WAX redemption', 'RWax', err as Error)\n      showError('WAX redemption failed. Please try again.')\n      setWaxRedeemStep('confirm')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const executeTokenization = async () => {\n    if (!selectedAsset || !selectedFeeToken || !session || !account) {\n      showError('Please select an asset and fee token')\n      return\n    }\n\n    try {\n      const transaction = await rwaxService.executeTokenization([selectedAsset.assetId.toString()], selectedFeeToken)\n      \n      // This would integrate with WAX wallet for transaction signing\n      // For now, just show success message\n      showSuccess('Tokenization transaction prepared')\n      log.info('Tokenization transaction prepared', 'RWax.handleTokenization', { transaction })\n      \n      setShowTokenizeModal(false)\n      \n      // Refresh data after tokenization\n      setTimeout(() => {\n        loadTokenizedAssets()\n      }, 2000)\n    } catch (err) {\n      log.error('Error during tokenization', 'RWax', err as Error)\n      showError('Tokenization failed. Please try again.')\n    }\n  }\n\n  // Type guard to check if asset is TokenizedAsset\n  const isTokenizedAsset = (asset: TokenizedAsset | UserAsset): asset is TokenizedAsset => {\n    return 'rwax' in asset && asset.rwax && 'redeemAmount' in asset.rwax\n  }\n\n  const executeRedemption = async () => {\n    if (!selectedAsset || !selectedFeeToken || !session || !account || !isTokenizedAsset(selectedAsset)) {\n      showError('Please select an asset and fee token')\n      return\n    }\n\n    try {\n      setLoading(true)\n      \n      // Create transaction actions for WharfKit\n      const actions = [\n        {\n          account: 'nft.hive',\n          name: 'boost',\n          authorization: [{\n            actor: account,\n            permission: 'active'\n          }],\n          data: {\n            booster: account\n          }\n        },\n        {\n          account: selectedFeeToken.contract,\n          name: 'transfer',\n          authorization: [{\n            actor: account,\n            permission: 'active'\n          }],\n          data: {\n            from: account,\n            to: 'rwax',\n            quantity: selectedFeeToken.fee,\n            memo: 'payfee'\n          }\n        },\n        {\n          account: 'pixeljourney',\n          name: 'transfer',\n          authorization: [{\n            actor: account,\n            permission: 'active'\n          }],\n          data: {\n            from: account,\n            to: 'rwax',\n            quantity: `${selectedAsset.rwax.redeemAmount.toFixed(8)} WPIXAL`,\n            memo: 'redeem'\n          }\n        },\n        {\n          account: 'rwax',\n          name: 'redeem',\n          authorization: [{\n            actor: account,\n            permission: 'active'\n          }],\n          data: {\n            redeemer: account,\n            contract: 'pixeljourney',\n            quantity: `${selectedAsset.rwax.redeemAmount.toFixed(8)} WPIXAL`,\n            asset_id: selectedAsset.assetId.toString(),\n            fee_currency: `8,${selectedFeeToken.symbol}`\n          }\n        }\n      ]\n      \n      // Execute transaction through WharfKit\n      const result = await wharfKitService.transact(actions)\n      \n      showSuccess('Redemption transaction completed successfully!')\n      log.info('Redemption transaction completed', 'RWax.handleRedeemFromModal', { result })\n      \n      setShowRedeemModal(false)\n      \n      // Refresh data after redemption\n      setTimeout(() => {\n        loadTokenizedAssets()\n      }, 2000)\n    } catch (err) {\n      log.error('Error during redemption', 'RWax', err as Error)\n      showError('Redemption failed. Please try again.')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  // Watchlist functionality\n  const handleToggleWatchlist = (assetId: string) => {\n    const newWatchlist = new Set(watchlist)\n    if (newWatchlist.has(assetId)) {\n      newWatchlist.delete(assetId)\n      showSuccess('Removed from watchlist')\n    } else {\n      newWatchlist.add(assetId)\n      showSuccess('Added to watchlist')\n    }\n    setWatchlist(newWatchlist)\n    \n    // Save to localStorage\n    localStorage.setItem('rwax-watchlist', JSON.stringify(Array.from(newWatchlist)))\n  }\n\n  // Load watchlist from localStorage on component mount\n  useEffect(() => {\n    const savedWatchlist = localStorage.getItem('rwax-watchlist')\n    if (savedWatchlist) {\n      try {\n        const watchlistArray = JSON.parse(savedWatchlist)\n        setWatchlist(new Set(watchlistArray))\n      } catch (err) {\n        log.error('Error loading watchlist', 'RWax', err as Error)\n      }\n    }\n  }, [])\n\n  // Sharing functionality - now uses unified ShareModal\n  const handleShareAsset = (asset: TokenizedAsset) => {\n    setShareAsset(asset)\n    setShowShareModal(true)\n  }\n\n  // Price alert functionality\n  const handleSetPriceAlert = useCallback((asset: TokenizedAsset, alertPercentage: number) => {\n    const currentPrice = parseFloat(asset.rwax.redeemAmount.toString())\n    const alertData = {\n      assetId: asset.assetId.toString(),\n        assetName: asset.name,\n      originalPrice: currentPrice,\n      alertPercentage,\n      createdAt: Date.now()\n    }\n    \n    const newPriceAlerts = new Map(priceAlerts)\n    newPriceAlerts.set(asset.assetId.toString(), alertData)\n    setPriceAlerts(newPriceAlerts)\n    \n    // Save to localStorage\n    const alertsArray = Array.from(newPriceAlerts.entries())\n    localStorage.setItem('rwax-price-alerts', JSON.stringify(alertsArray))\n    \n    showSuccess(`Price alert set for ${asset.name} at ${alertPercentage}% change`)\n  }, [priceAlerts, showSuccess])\n\n  const removePriceAlert = useCallback((assetId: string) => {\n    const newPriceAlerts = new Map(priceAlerts)\n    newPriceAlerts.delete(assetId)\n    setPriceAlerts(newPriceAlerts)\n    \n    // Save to localStorage\n    const alertsArray = Array.from(newPriceAlerts.entries())\n    localStorage.setItem('rwax-price-alerts', JSON.stringify(alertsArray))\n    \n    showSuccess('Price alert removed')\n  }, [priceAlerts, showSuccess])\n\n  // Check price alerts against current prices\n  const checkPriceAlerts = useCallback(() => {\n    if (priceAlerts.size === 0 || tokenizedAssets.length === 0) return\n    \n    priceAlerts.forEach((alertData, assetId) => {\n      const currentAsset = tokenizedAssets.find(asset => asset.assetId.toString() === assetId)\n      if (!currentAsset) {\n        // Asset no longer available - notify user\n        showError(`Alert: ${alertData.assetName} is no longer available on RWAX!`)\n        removePriceAlert(assetId)\n        return\n      }\n      \n      const currentPrice = parseFloat(currentAsset.rwax.redeemAmount.toString())\n      const priceChange = ((currentPrice - alertData.originalPrice) / alertData.originalPrice) * 100\n      \n      if (Math.abs(priceChange) >= alertData.alertPercentage) {\n        const direction = priceChange > 0 ? 'increased' : 'decreased'\n        showSuccess(`Price Alert: ${alertData.assetName} has ${direction} by ${Math.abs(priceChange).toFixed(2)}%!`)\n        \n        // Update the alert with new baseline price to avoid repeated notifications\n        handleSetPriceAlert(currentAsset, alertData.alertPercentage)\n      }\n    })\n  }, [priceAlerts, tokenizedAssets, showError, showSuccess, removePriceAlert, handleSetPriceAlert])\n\n  // Load price alerts from localStorage on component mount\n  useEffect(() => {\n    const savedAlerts = localStorage.getItem('rwax-price-alerts')\n    if (savedAlerts) {\n      try {\n        const alertsArray = JSON.parse(savedAlerts)\n        setPriceAlerts(new Map(alertsArray))\n      } catch (err) {\n        log.error('Error loading price alerts', 'RWax', err as Error)\n      }\n    }\n  }, [])\n\n  // Check price alerts when tokenized assets update\n  useEffect(() => {\n    checkPriceAlerts()\n  }, [checkPriceAlerts])\n\n  return (\n    <div className=\"rwax-container\">\n      <div className=\"rwax-header\">\n        <div className=\"rwax-header-top\">\n          <button className=\"rwax-back-button\" onClick={() => navigate('/marketplace')}>\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n              <path d=\"M19 12H5M12 19l-7-7 7-7\" />\n            </svg>\n            Back to Marketplace\n          </button>\n          <div className=\"header-actions\">\n          </div>\n        </div>\n        <h1>R-WAX Tokenization</h1>\n        <p>Tokenize your Pixals to WPIXAL or redeem WPIXAL back to Pixals</p>\n        <p style={{ marginTop: '16px', fontSize: '0.9rem', color: 'var(--text-secondary)' }}>\n          Visit the <a \n            href=\"https://r-wax.io/token/pixeljourney/WPIXAL\" \n            target=\"_blank\" \n            rel=\"noopener noreferrer\"\n            style={{ color: 'var(--primary-purple)', textDecoration: 'none', fontWeight: '500' }}\n            onMouseEnter={(e) => (e.target as HTMLAnchorElement).style.textDecoration = 'underline'}\n            onMouseLeave={(e) => (e.target as HTMLAnchorElement).style.textDecoration = 'none'}\n          >\n            official RWAX website\n          </a> for full WPIXAL markets and trading features.\n        </p>\n      </div>\n\n      <div className=\"rwax-tabs\">\n        <button \n          className={`tab-button ${activeTab === 'redeem' ? 'active' : ''}`}\n          onClick={() => setActiveTab('redeem')}\n        >\n          WPIXAL to Pixal PFP\n        </button>\n        <button \n          className={`tab-button ${activeTab === 'other-collections' ? 'active' : ''}`}\n          onClick={() => setActiveTab('other-collections')}\n        >\n          Other RWAX Collections\n        </button>\n      </div>\n\n      {error && (\n        <div className=\"error-message\">\n          {error}\n        </div>\n      )}\n\n      <div className=\"rwax-content\">\n        {activeTab === 'redeem' ? (\n          <div className=\"redeem-section\">\n                       \n            <div className=\"actions-and-controls-container\">\n              <div className=\"left-actions\">\n                <div className=\"action-group\">\n                  <button \n                    className=\"inventory-tokenize-button\"\n                    onClick={() => setShowInventoryModal(true)}\n                  >\n                    Tokenize from Inventory\n                  </button>\n                </div>\n                <div className=\"action-group\">\n                  <button \n                    className={`wpixal-alert-button ${localStorage.getItem('wpixalPriceAlert') ? 'has-alert' : ''}`}\n                    onClick={() => setShowWpixalAlertModal(true)}\n                  >\n                    <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                      <path d=\"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9\"/>\n                      <path d=\"M13.73 21a2 2 0 0 1-3.46 0\"/>\n                    </svg>\n                    WPIXAL Price Alert\n                  </button>\n                  {localStorage.getItem('wpixalPriceAlert') && (\n                    <div className=\"current-alert-display\">\n                      <span>Current Alert: {localStorage.getItem('wpixalPriceAlert')} WAX</span>\n                      <button \n                        className=\"remove-alert\"\n                        onClick={(e) => {\n                          e.stopPropagation()\n                          localStorage.removeItem('wpixalPriceAlert')\n                          // Force re-render by updating a state\n                          setWpixalAlertPrice('')\n                        }}\n                        title=\"Remove Alert\"\n                      >\n                        ×\n                      </button>\n                    </div>\n                  )}\n                </div>\n              </div>\n              \n              <div className=\"sorting-and-filter-controls\">\n                {/* Search Bar */}\n                <div className=\"search-bar-container\">\n                  <div className=\"search-input-container\">\n                    <svg className=\"search-icon\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                      <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/>\n                    </svg>\n                    <input\n                      type=\"text\"\n                      placeholder=\"Search R-WAX assets...\"\n                      value={searchTerm}\n                      onChange={(e) => setSearchTerm(e.target.value)}\n                      className=\"search-input\"\n                    />\n                    {searchTerm && (\n                      <button \n                        onClick={() => setSearchTerm('')}\n                        className=\"clear-search\"\n                        aria-label=\"Clear search\"\n                      >\n                        <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                          <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n                        </svg>\n                      </button>\n                    )}\n                  </div>\n                </div>\n              <div className=\"sorting-controls\">\n                <label htmlFor=\"sort-select\">Sort by:</label>\n                <select \n                  id=\"sort-select\"\n                  value={sortBy} \n                  onChange={(e) => handleSortChange(e.target.value)}\n                  className=\"sort-dropdown\"\n                >\n                  <option value=\"date_desc\">Date (Newest First)</option>\n                  <option value=\"date_asc\">Date (Oldest First)</option>\n                  <option value=\"price_desc\">Price (High to Low)</option>\n                  <option value=\"price_asc\">Price (Low to High)</option>\n                  <option value=\"floor_desc\">Floor Price (High to Low)</option>\n                  <option value=\"floor_asc\">Floor Price (Low to High)</option>\n                  <option value=\"mint_desc\">Mint Number (High to Low)</option>\n                  <option value=\"mint_asc\">Mint Number (Low to High)</option>\n                  <option value=\"rarity_score_desc\">Rarity Score (High to Low)</option>\n                  <option value=\"rarity_score_asc\">Rarity Score (Low to High)</option>\n                </select>\n\n                \n              <button \n                className=\"filter-toggle-btn\"\n                onClick={toggleFilterSidebar}\n                title=\"Open Filters\"\n              >\n                <svg width=\"40\" height=\"40\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z\" />\n                </svg>\n              </button>\n              </div>\n              \n            </div>\n            </div>\n             \n             {loading ? (\n               <div className=\"loading-spinner\">Loading tokenized assets...</div>\n             ) : (\n               <>\n                {filteredAssets.length > 0 && (\n                  <div className=\"multi-select-controls\">\n                    <button \n                      className=\"select-all-button\"\n                      onClick={handleSelectAll}\n                    >\n                      {selectedAssets.size === filteredAssets.length ? 'Deselect All' : 'Select All'}\n                    </button>\n                    <div className=\"selected-count-container\">\n                      <div className=\"selected-count\">\n                        {selectedAssets.size} of {filteredAssets.length} selected\n                      </div>\n                      {hasMoreAssets && (\n                        <button \n                          className=\"load-more-small-button\"\n                          onClick={loadMoreAssets}\n                          disabled={loadingMoreAssets}\n                          title=\"Load More Assets\"\n                        >\n                          {loadingMoreAssets ? 'Loading...' : 'Load More'}\n                        </button>\n                      )}\n                    </div>\n                    <button \n                      className=\"batch-redeem-button\"\n                      onClick={handleBatchRedeem}\n                      disabled={selectedAssets.size === 0 || !account}\n                    >\n                      Batch Redeem ({selectedAssets.size})\n                    </button>\n                  </div>\n                )}\n                \n                <div className=\"rwax-assets-grid\">\n                  {filteredAssets.map((asset, index) => (\n                    <div \n                      key={`${asset.assetId}-${index}`}\n                  className={`asset-card ${selectedAssets.has(asset.assetId.toString()) ? 'selected' : ''}`}\n                    >\n                      <div \n                         className={`selection-checkbox ${selectedAssets.has(asset.assetId.toString()) ? 'checked' : ''}`}\n                    onClick={(e) => {\n                      e.stopPropagation()\n                      handleAssetSelection(asset.assetId.toString())\n                    }}\n                       >\n                        {selectedAssets.has(asset.assetId.toString()) && (\n                          <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                            <path d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z\"/>\n                          </svg>\n                        )}\n                      </div>\n                      \n                      <div \n                        className=\"asset-card-content\"\n                        onClick={() => handleViewAssetDetail(asset)}\n                      >\n                        <div className=\"asset-image\">\n                          <MediaRenderer \n                            imageUrl={asset.image}\n                          alt={asset.name}\n                            className=\"nft-image\"\n                          />\n                          <div \n                            className=\"zoom-overlay\"\n                            onClick={(e) => {\n                              e.stopPropagation()\n                              handleImageZoom(asset.image, asset.name)\n                            }}\n                          >\n                            <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                              <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/>\n                              <path d=\"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z\"/>\n                            </svg>\n                          </div>\n                        </div>\n                        <div className=\"asset-info\">\n                          <h3>{asset.name}</h3>\n                          <div className=\"pricing-info\">\n                            <div \n                              className=\"wpixal-amount\"\n                              onClick={(e) => {\n                                e.stopPropagation()\n                                handleWpixalPurchase(parseFloat(asset.rwax.redeemAmount.toString()))\n                              }}\n                              title={`Exact amount: ${asset.rwax.redeemAmount} WPIXAL`}\n                            >\n                              {parseFloat(asset.rwax.redeemAmount.toString()).toFixed(1)} WPIXAL\n                            </div>\n                            <div className=\"rwax-price-convert\">\n                            <div className=\"wax-price\">\n                              ≈ {(parseFloat(asset.rwax.redeemAmount.toString()) * wpixalPriceWAX).toFixed(4)} WAX\n                            </div>\n                            <div className=\"usd-price\">\n                              ≈ ${(parseFloat(asset.rwax.redeemAmount.toString()) * wpixalPriceUSD).toFixed(4)} USD\n                            </div>\n                          </div>\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"asset-actions\">\n                        {/* Primary action - Green WPIXAL redeem button on top */}\n                        <button \n                          className=\"redeem-button primary\"\n                          onClick={(e) => {\n                            e.stopPropagation()\n                            handleRedeem(asset)\n                          }}\n                          disabled={!account}\n                        >\n                          Redeem (WPIXAL)\n                        </button>\n                        \n                        {/* Secondary actions - smaller buttons below */}\n                        <div className=\"secondary-actions\">\n                          <button \n                            className=\"wax-redeem-button secondary\"\n                            onClick={(e) => {\n                              e.stopPropagation()\n                              handleWaxRedeem(asset)\n                            }}\n                            disabled={!account}\n                          >\n                            Redeem (WAX)\n                          </button>\n                          <button \n                            className=\"info-button secondary\"\n                            onClick={(e) => {\n                              e.stopPropagation()\n                              handleViewAssetDetail(asset)\n                            }}\n                          >\n                            Info\n                          </button>\n                        </div>\n                        \n                        {/* Icon-only actions at bottom */}\n                        <div className=\"icon-actions\">\n                          \n                          <button \n                            className={`btn-watchlist icon-only ${watchlist.has(asset.assetId.toString()) ? 'active' : ''}`}\n                          onClick={(e) => {\n                            e.stopPropagation()\n                            handleToggleWatchlist(asset.assetId.toString())\n                          }}\n                          title={watchlist.has(asset.assetId.toString()) ? 'Remove from Watchlist' : 'Add to Watchlist'}\n                          >\n                            <svg viewBox=\"0 0 24 24\" fill={watchlist.has(asset.assetId.toString()) ? 'currentColor' : 'none'} stroke=\"currentColor\">\n                              <path d=\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z\"/>\n                            </svg>\n                          </button>\n\n                          <button \n                            className=\"btn-copy-link icon-only\"\n                            onClick={(e) => {\n                              e.stopPropagation()\n                              const assetUrl = `${window.location.origin}/asset/${asset.assetId}`\n                              navigator.clipboard.writeText(assetUrl).then(() => {\n                                showSuccess('Asset link copied to clipboard!')\n                              }).catch(() => {\n                                showError('Failed to copy link')\n                              })\n                            }}\n                            title=\"Copy Link\"\n                          >\n                            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                              <path d=\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"/>\n                              <path d=\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"/>\n                            </svg>\n                          </button>\n\n                          <button \n                            className=\"btn-share icon-only\"\n                            onClick={(e) => {\n                              e.stopPropagation()\n                              handleShareAsset(asset)\n                            }}\n                            title=\"Share Asset\"\n                          >\n                            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                              <path d=\"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8\"/>\n                              <polyline points=\"16,6 12,2 8,6\"/>\n                              <line x1=\"12\" y1=\"2\" x2=\"12\" y2=\"15\"/>\n                            </svg>\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n                \n                {/* Load More Assets Button */}\n                {hasMoreAssets && (\n                  <div className=\"load-more-section\">\n                    <button \n                      className=\"load-more-button\"\n                      onClick={loadMoreAssets}\n                      disabled={loadingMoreAssets}\n                    >\n                      {loadingMoreAssets ? 'Loading...' : 'Load More Assets'}\n                    </button>\n                  </div>\n                )}\n              </>\n            )}\n          </div>\n        ) : activeTab === 'other-collections' ? (\n          <div className=\"other-collections-section\">\n            <div className=\"construction-message\">\n              <div className=\"construction-icon\">\n                <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                  <path d=\"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z\"/>\n                </svg>\n              </div>\n              <h2>Other RWAX Collections</h2>\n              <p>Support for additional RWAX collections is coming soon!</p>\n              <div className=\"construction-details\">\n                <p>We're working on expanding RWAX tokenization to support more NFT collections beyond Pixals. Stay tuned for updates!</p>\n              </div>\n            </div>\n          </div>\n        ) : null}\n      </div>\n\n      {/* Tokenization Modal */}\n      {showTokenizeModal && selectedAsset && (\n        <div className=\"rwax-modal-overlay\" onClick={() => setShowTokenizeModal(false)}>\n          <div className=\"rwax-modal-content\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"rwax-modal-header\">\n              <h2>Tokenize Pixal</h2>\n              <button className=\"rwax-close-button\" onClick={() => setShowTokenizeModal(false)}>×</button>\n            </div>\n            <div className=\"rwax-modal-body\">\n              <div className=\"selected-asset\">\n                <MediaRenderer \n                  imageUrl={selectedAsset.image}\n                      alt={selectedAsset.name}\n                  className=\"modal-asset-image\"\n                />\n                <h3>{selectedAsset.name}</h3>\n              </div>\n              \n              <div className=\"fee-selection\">\n                <h4>Select Fee Token:</h4>\n                {feeTokens.map((token, index) => (\n                  <div \n                    key={index} \n                    className={`fee-option ${selectedFeeToken === token ? 'selected' : ''}`}\n                    onClick={() => setSelectedFeeToken(token)}\n                  >\n                    <span className=\"fee-amount\">{token.fee}</span>\n                    {token.wax_value && token.symbol !== 'WAX' && (\n                      <span className=\"wax-equivalent\">≈ {parseFloat(token.wax_value).toFixed(4)} WAX</span>\n                    )}\n                  </div>\n                ))}\n              </div>\n              \n              <div className=\"modal-actions\">\n                <button className=\"cancel-button\" onClick={() => setShowTokenizeModal(false)}>\n                  Cancel\n                </button>\n                <button \n                  className=\"confirm-button\"\n                  onClick={executeTokenization}\n                  disabled={!selectedFeeToken}\n                >\n                  Tokenize\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Redemption Modal */}\n      {showRedeemModal && selectedAsset && isTokenizedAsset(selectedAsset) && (\n        <div className=\"rwax-modal-overlay\" onClick={() => setShowRedeemModal(false)}>\n          <div className=\"rwax-modal-content\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"rwax-modal-header\">\n              <h2>Redeem WPIXAL</h2>\n              <button className=\"rwax-close-button\" onClick={() => setShowRedeemModal(false)}>×</button>\n            </div>\n            <div className=\"rwax-modal-body\">\n              <div className=\"selected-asset\">\n                <MediaRenderer \n                  imageUrl={selectedAsset.image}\n                  alt={selectedAsset.name}\n                  className=\"modal-asset-image\"\n                />\n                <h3>{selectedAsset.name}</h3>\n                {isTokenizedAsset(selectedAsset) && (\n                  <p className=\"wpixal-required\">Required: {selectedAsset.rwax.redeemAmount.toFixed(8)} WPIXAL</p>\n                )}\n              </div>\n              \n              <div className=\"fee-selection\">\n                <h4>Select Fee Token:</h4>\n                {feeTokens.map((token, index) => (\n                  <div \n                    key={index} \n                    className={`fee-option ${selectedFeeToken === token ? 'selected' : ''}`}\n                    onClick={() => setSelectedFeeToken(token)}\n                  >\n                    <span className=\"fee-amount\">{token.fee}</span>\n                    {token.wax_value && token.symbol !== 'WAX' && (\n                      <span className=\"wax-equivalent\">≈ {parseFloat(token.wax_value).toFixed(4)} WAX</span>\n                    )}\n                  </div>\n                ))}\n              </div>\n              \n              <div className=\"modal-actions\">\n                <button className=\"cancel-button\" onClick={() => setShowRedeemModal(false)}>\n                  Cancel\n                </button>\n                <button \n                  className=\"confirm-button\"\n                  onClick={executeRedemption}\n                  disabled={!selectedFeeToken}\n                >\n                  Redeem\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {/* Tokenize from Inventory Modal */}\n      <TokenizeFromInventoryModal \n        isOpen={showInventoryModal}\n        onClose={() => setShowInventoryModal(false)}\n        onSuccess={() => {\n          // Refresh tokenized assets after successful tokenization\n          if (activeTab === 'redeem') {\n            loadTokenizedAssets()\n          }\n        }}\n      />\n      \n      {/* Asset Detail Modal */}\n      <AssetDetailModal \n        asset={selectedDetailAsset}\n        isOpen={showAssetDetailModal}\n        onClose={() => {\n          setShowAssetDetailModal(false)\n          setSelectedDetailAsset(null)\n        }}\n        onRedeem={handleRedeemFromDetail}\n      />\n      \n      {/* WAX Redeem Modal */}\n      {showWaxRedeemModal && selectedAsset && (\n        <div className=\"rwax-modal-overlay\" onClick={closeWaxRedeemModal}>\n          <div className=\"rwax-modal-content rwax-wax-redeem-modal\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"rwax-modal-header\">\n              <h2>Pay with WAX</h2>\n              <button className=\"rwax-close-button\" onClick={closeWaxRedeemModal}>×</button>\n            </div>\n            <div className=\"rwax-modal-body\">\n              <div className=\"selected-asset\">\n                <MediaRenderer \n                  imageUrl={selectedAsset.image}\n                  alt={selectedAsset.name}\n                  className=\"modal-asset-image\"\n                />\n                <h3>{selectedAsset.name}</h3>\n                {isTokenizedAsset(selectedAsset) && (\n                  <>\n                    <p className=\"wpixal-required\">Required: {selectedAsset.rwax.redeemAmount.toFixed(8)} WPIXAL</p>\n                    <p className=\"wax-cost\">Cost: {(selectedAsset.rwax.redeemAmount * wpixalPriceWAX).toFixed(4)} WAX</p>\n                    <p className=\"usd-cost\">USD: ${(selectedAsset.rwax.redeemAmount * wpixalPriceUSD).toFixed(4)}</p>\n                  </>\n                )}\n              </div>\n              \n              {waxRedeemStep === 'confirm' && (\n                <div className=\"wax-redeem-step\">\n                  <h4>Step 1: Confirm WAX Payment</h4>\n                  <p className=\"step-description\">\n                    This process will swap your WAX for WPIXAL via Alcor, then use that WPIXAL to redeem your NFT.\n                  </p>\n                  \n                  <div className=\"wax-calculator-section\">\n                    <div className=\"available-wax\">\n                      <h4>Your Available WAX</h4>\n                      <div className=\"wax-balance\">\n                        <span className=\"nav-balance-amount\">{waxBalance}</span>\n                        <span className=\"balance-usd\">(${(parseFloat(waxBalance.split(' ')[0]) * waxPriceUSD).toFixed(2)} USD)</span>\n                      </div>\n                    </div>\n                    \n                    <div className=\"wpixal-calculator\">\n                      <h4>WPIXAL Calculator</h4>\n                      <div className=\"calculator-info\">\n                        <p>With your available WAX, you can buy:</p>\n                        <div className=\"max-wpixal\">\n                          <strong>{wpixalPriceWAX > 0 ? (100 / wpixalPriceWAX).toFixed(4) : '0.0000'} WPIXAL</strong>\n                        </div>\n                        <div className=\"rate-info\">\n                          <small>Rate: 1 WPIXAL = {wpixalPriceWAX.toFixed(6)} WAX</small>\n                        </div>\n                      </div>\n                      \n                      <div className=\"purchase-slider\">\n                        <label>Amount to purchase:</label>\n                        <input\n                          type=\"range\"\n                          min=\"0\"\n                          max={Math.min(100, wpixalPriceWAX > 0 && isTokenizedAsset(selectedAsset) ? selectedAsset.rwax.redeemAmount * wpixalPriceWAX : 0)}\n                          step=\"0.0001\"\n                          value={waxAmount ? parseFloat(waxAmount) : 0}\n                          onChange={(e) => setWaxAmount(parseFloat(e.target.value).toFixed(4))}\n                          className=\"wpixal-slider\"\n                        />\n                        <div className=\"slider-labels\">\n                          <span>0 WAX</span>\n                          <span>{Math.min(100, wpixalPriceWAX > 0 && isTokenizedAsset(selectedAsset) ? selectedAsset.rwax.redeemAmount * wpixalPriceWAX : 0).toFixed(4)} WAX</span>\n                        </div>\n                      </div>\n                      \n                      <div className=\"purchase-summary\">\n                        <div className=\"summary-row\">\n                          <span>WPIXAL to buy:</span>\n                          <span>{waxAmount ? (parseFloat(waxAmount) / wpixalPriceWAX).toFixed(4) : '0.0000'} WPIXAL</span>\n                        </div>\n                        <div className=\"summary-row\">\n                          <span>WAX cost:</span>\n                          <span>{waxAmount || '0.0000'} WAX</span>\n                        </div>\n                        <div className=\"summary-row\">\n                          <span>USD cost:</span>\n                          <span>${waxAmount ? (parseFloat(waxAmount) * waxPriceUSD).toFixed(4) : '0.0000'}</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"process-steps\">\n                    <div className=\"step-item\">\n                      <span className=\"step-number\">1</span>\n                      <span className=\"step-text\">Swap WAX → WPIXAL via Alcor</span>\n                    </div>\n                    <div className=\"step-item\">\n                      <span className=\"step-number\">2</span>\n                      <span className=\"step-text\">Redeem NFT with WPIXAL</span>\n                    </div>\n                  </div>\n                  \n                  <div className=\"modal-actions\">\n                    <button className=\"cancel-button\" onClick={closeWaxRedeemModal}>\n                      Cancel\n                    </button>\n                    <button \n                      className=\"confirm-button\"\n                      onClick={executeWaxRedeem}\n                      disabled={!waxAmount || parseFloat(waxAmount) <= 0 || wpixalPriceWAX <= 0 || !isTokenizedAsset(selectedAsset) || (parseFloat(waxAmount) / wpixalPriceWAX) > selectedAsset.rwax.redeemAmount}\n                    >\n                      Buy WPIXAL & Redeem\n                    </button>\n                  </div>\n                </div>\n              )}\n              \n              {waxRedeemStep === 'swap' && (\n                <div className=\"wax-redeem-step\">\n                  <h4>Step 2: Swapping WAX to WPIXAL</h4>\n                  <p className=\"step-description\">\n                    Connecting to Alcor to swap {waxAmount} WAX for WPIXAL...\n                  </p>\n                  \n                  <div className=\"swap-progress\">\n                    <div className=\"progress-spinner\"></div>\n                    <p>Processing swap transaction...</p>\n                  </div>\n                  \n                  <div className=\"modal-actions\">\n                    <button className=\"cancel-button\" onClick={closeWaxRedeemModal}>\n                      Cancel\n                    </button>\n                  </div>\n                </div>\n              )}\n              \n              {waxRedeemStep === 'redeem' && (\n                <div className=\"wax-redeem-step\">\n                  <h4>Step 3: Redeeming NFT</h4>\n                  <p className=\"step-description\">\n                    Using WPIXAL to redeem your NFT...\n                  </p>\n                  \n                  <div className=\"redeem-progress\">\n                    <div className=\"progress-spinner\"></div>\n                    <p>Processing redemption transaction...</p>\n                  </div>\n                </div>\n              )}\n              \n              {waxRedeemStep === 'complete' && (\n                <div className=\"wax-redeem-step\">\n                  <h4>✅ Redemption Complete!</h4>\n                  <p className=\"step-description success\">\n                    Your NFT has been successfully redeemed using WAX payment.\n                  </p>\n                  \n                  <div className=\"modal-actions\">\n                    <button \n                      className=\"confirm-button\"\n                      onClick={() => {\n                        closeWaxRedeemModal()\n                        loadTokenizedAssets() // Refresh the assets\n                      }}\n                    >\n                      Done\n                    </button>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {/* Live RWAX Transactions Section */}\n      <div className=\"live-transactions-section\">\n        <RWAXLiveTransactions limit={12} refreshInterval={30000} />\n      </div>\n      \n      {/* Image Zoom Modal */}\n      {showImageZoom && (\n        <div className=\"image-zoom-modal\" onClick={() => setShowImageZoom(false)}>\n          <div className=\"zoom-modal-content\" onClick={(e) => e.stopPropagation()}>\n            <button \n              className=\"zoom-modal-close\"\n              onClick={() => setShowImageZoom(false)}\n            >\n              ×\n            </button>\n            {zoomedImage && (\n              <>\n                <img \n                  src={zoomedImage.url} \n                  alt={zoomedImage.name}\n                  className=\"zoom-modal-image\"\n                />\n                <div className=\"zoom-modal-info\">\n                  <h3>{zoomedImage.name}</h3>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n      )}\n      \n      {/* WPIXAL Purchase Modal - Now using SwapInterface */}\n      {showWpixalPurchaseModal && (\n        <SwapInterface \n          isModal={true}\n          onClose={() => setShowWpixalPurchaseModal(false)}\n          initialBuyAmount={wpixalToPurchase}\n        />\n      )}\n      \n      {/* Price Alert Modal */}\n      {showPriceAlertModal && alertAsset && (\n        <div className=\"rwax-modal-overlay\" onClick={() => setShowPriceAlertModal(false)}>\n          <div className=\"rwax-modal-content\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"rwax-modal-header\">\n              <h2>Set Price Alert</h2>\n              <button \n                className=\"rwax-close-button\"\n                onClick={() => setShowPriceAlertModal(false)}\n              >\n                ×\n              </button>\n            </div>\n            <div className=\"rwax-modal-body\">\n              {alertAsset && (\n                <div className=\"alert-asset-info\">\n                  <MediaRenderer \n                    imageUrl={alertAsset.image}\n                    alt={alertAsset.name}\n                    className=\"modal-asset-image\"\n                  />\n                  <h3>{alertAsset.name}</h3>\n                  <p>Current Price: {alertAsset.rwax.redeemAmount.toFixed(8)} WPIXAL</p>\n                </div>\n              )}\n              \n              <div className=\"alert-settings\">\n                <h4>Alert when price changes by:</h4>\n                <div className=\"percentage-options\">\n                  {[5, 10, 15, 20, 25].map(percentage => (\n                    <button\n                      key={percentage}\n                      className={`percentage-option ${alertPercentage === percentage ? 'selected' : ''}`}\n                      onClick={() => setAlertPercentage(percentage)}\n                    >\n                      {percentage}%\n                    </button>\n                  ))}\n                </div>\n                \n                <div className=\"custom-percentage\">\n                  <label>Custom percentage:</label>\n                  <input\n                    type=\"number\"\n                    min=\"1\"\n                    max=\"100\"\n                    value={alertPercentage}\n                    onChange={(e) => setAlertPercentage(parseInt(e.target.value) || 10)}\n                    className=\"percentage-input\"\n                  />\n                  <span>%</span>\n                </div>\n                \n                <div className=\"alert-preview\">\n                  <p>You will be notified when the price moves {alertPercentage}% from the current value.</p>\n                  <div className=\"price-thresholds\">\n                    <div className=\"threshold-item\">\n                      <span className=\"threshold-label\">Alert above:</span>\n                      <span className=\"threshold-value\">\n                        {(alertAsset.rwax.redeemAmount * (1 + alertPercentage / 100)).toFixed(4)} WPIXAL\n                      </span>\n                    </div>\n                    <div className=\"threshold-item\">\n                      <span className=\"threshold-label\">Alert below:</span>\n                      <span className=\"threshold-value\">\n                        {(alertAsset.rwax.redeemAmount * (1 - alertPercentage / 100)).toFixed(4)} WPIXAL\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"modal-actions\">\n                <button \n                  className=\"cancel-button\"\n                  onClick={() => setShowPriceAlertModal(false)}\n                >\n                  Cancel\n                </button>\n                {alertAsset && priceAlerts.has(alertAsset.assetId.toString()) && (\n                  <button \n                    className=\"remove-alert-button\"\n                    onClick={() => {\n                      if (alertAsset) {\n                        removePriceAlert(alertAsset.assetId.toString())\n                        setShowPriceAlertModal(false)\n                      }\n                    }}\n                  >\n                    Remove Alert\n                  </button>\n                )}\n                <button \n                  className=\"confirm-button\"\n                  onClick={() => {\n                    if (alertAsset) {\n                      handleSetPriceAlert(alertAsset, alertPercentage)\n                      setShowPriceAlertModal(false)\n                    }\n                  }}\n                >\n                  {alertAsset && priceAlerts.has(alertAsset.assetId.toString()) ? 'Update Alert' : 'Set Alert'}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {/* WPIXAL Price Alert Modal */}\n      {showWpixalAlertModal && (\n        <div className=\"rwax-modal-overlay\" onClick={() => setShowWpixalAlertModal(false)}>\n          <div className=\"rwax-modal-content\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"rwax-modal-header\">\n              <h2>WPIXAL Price Alert</h2>\n              <button \n                className=\"rwax-close-button\"\n                onClick={() => setShowWpixalAlertModal(false)}\n              >\n                ×\n              </button>\n            </div>\n            <div className=\"rwax-modal-body\">\n              <div className=\"wpixal-alert-info\">\n                <h3>Set WPIXAL Price Alert</h3>\n                <div className=\"current-wpixal-prices\">\n                  <p>Current WPIXAL Price:</p>\n                  <div className=\"price-display\">\n                    <span className=\"wax-price\">{wpixalPriceWAX > 0 ? `${wpixalPriceWAX.toFixed(8)} WAX` : 'Loading...'}</span>\n                    <span className=\"usd-price\">{wpixalPriceUSD > 0 ? `($${wpixalPriceUSD.toFixed(6)} USD)` : ''}</span>\n                  </div>\n                </div>\n                {localStorage.getItem('wpixalPriceAlert') && (\n                  <div className=\"existing-alert-info\">\n                    <p>Your Current Alert: {localStorage.getItem('wpixalPriceAlert')} WAX</p>\n                    <p className=\"price-comparison\">\n                      {wpixalPriceWAX > 0 && localStorage.getItem('wpixalPriceAlert') ? \n                        `Current price is ${((wpixalPriceWAX - parseFloat(localStorage.getItem('wpixalPriceAlert')!)) / parseFloat(localStorage.getItem('wpixalPriceAlert')!) * 100).toFixed(2)}% ${wpixalPriceWAX > parseFloat(localStorage.getItem('wpixalPriceAlert')!) ? 'above' : 'below'} your alert` \n                        : ''\n                      }\n                    </p>\n                  </div>\n                )}\n                <p>Get notified when WPIXAL price drops below your target value</p>\n              </div>\n              \n              <div className=\"alert-settings\">\n                <h4>Alert when WPIXAL price (in WAX) drops below:</h4>\n                <div className=\"price-input-container\">\n                  <input\n                    type=\"number\"\n                    step=\"0.00000001\"\n                    min=\"0\"\n                    value={wpixalAlertPrice}\n                    onChange={(e) => setWpixalAlertPrice(e.target.value)}\n                    placeholder=\"Enter WAX amount\"\n                    className=\"price-alert-input\"\n                  />\n                  <span className=\"currency-label\">WAX</span>\n                </div>\n                \n              </div>\n              \n              <div className=\"modal-actions\">\n                <button \n                  className=\"cancel-button\"\n                  onClick={() => setShowWpixalAlertModal(false)}\n                >\n                  Cancel\n                </button>\n                <button \n                  className=\"confirm-button\"\n                  onClick={() => {\n                    if (wpixalAlertPrice && parseFloat(wpixalAlertPrice) > 0) {\n                      // Store WPIXAL alert in localStorage\n                      localStorage.setItem('wpixalPriceAlert', wpixalAlertPrice)\n                      setShowWpixalAlertModal(false)\n                      setWpixalAlertPrice('')\n                      // Show success message\n                      showSuccess('Price Alert Set', `WPIXAL price alert set for ${wpixalAlertPrice} WAX`)\n                    }\n                  }}\n                  disabled={!wpixalAlertPrice || parseFloat(wpixalAlertPrice) <= 0}\n                >\n                  Set Alert\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {/* Filter Sidebar */}\n      {isFilterSidebarOpen && (\n        <>\n          <div className=\"filter-sidebar-overlay\" onClick={closeFilterSidebar}></div>\n          <div className=\"filter-sidebar\">\n            <div className=\"filter-sidebar-header\">\n              <h3>Advanced Filters</h3>\n              <button className=\"close-sidebar-btn\" onClick={closeFilterSidebar}>\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n            \n            <div className=\"filter-section\">\n              <h4>Price Range (WPIXAL)</h4>\n              <div className=\"price-range-inputs\">\n                <input\n                  type=\"number\"\n                  placeholder=\"Min\"\n                  value={priceRange.min}\n                  onChange={(e) => setPriceRange(prev => ({ ...prev, min: e.target.value }))}\n                  className=\"price-input\"\n                />\n                <span>to</span>\n                <input\n                  type=\"number\"\n                  placeholder=\"Max\"\n                  value={priceRange.max}\n                  onChange={(e) => setPriceRange(prev => ({ ...prev, max: e.target.value }))}\n                  className=\"price-input\"\n                />\n              </div>\n            </div>\n            \n            <div className=\"filter-section\">\n              <PixalAttributeFilter\n                onFiltersChange={handleAttributeFiltersChange}\n                initialFilters={selectedAttributeFilters}\n              />\n            </div>\n          </div>\n        </>\n      )}\n      \n      {/* Share Modal */}\n      {showShareModal && shareAsset && (\n        <ShareModal\n          isOpen={showShareModal}\n          onClose={() => {\n            setShowShareModal(false)\n            setShareAsset(null)\n          }}\n          type=\"nft\"\n          title={''}\n          shareUrl={`${window.location.origin}/rwax/asset/${shareAsset.assetId}`}\n          defaultShareText={`Check out this tokenized Pixal: ${shareAsset.name} - ${shareAsset.rwax.redeemAmount.toFixed(8)} WPIXAL on PxMarket! 🎮✨`}\n        />\n      )}\n    </div>\n  )\n}\n\nexport default RWax","import React, { useState, useMemo } from 'react'\nimport CraftingModal from './CraftingModal'\nimport type { CraftingRecipe } from '../types/ingredients'\nimport { CRAFTING_RECIPES } from '../data/ingredients'\nimport '../css/pxcrafting.css'\n\n// Template data with staking values and upgrade costs\nconst templates = [\n  { id: 781515, pxj: 1, wuf: 22.0, pxjUpgrade: 0, name: \"Pixal PFP\", type: \"pixals\" },\n  { id: 820134, pxj: 2.22, wuf: 5.0, pxjUpgrade: 0, name: \"Pixel Ingredient Pack\", type: \"pixelpack\" },\n  { id: 858568, pxj: 142.0, wuf: 142.0, pxjUpgrade: 0, name: \"Black\", type: \"special\" },\n  { id: 858569, pxj: 0.42, wuf: 1.0, pxjUpgrade: 0, name: \"Blue\", type: \"primary ingredient\" },\n  { id: 858570, pxj: 0.42, wuf: 1.0, pxjUpgrade: 0, name: \"Red\", type: \"primary ingredient\" },\n  { id: 858571, pxj: 0.42, wuf: 1.0, pxjUpgrade: 0, name: \"Yellow\", type: \"primary ingredient\" },\n  { id: 858572, pxj: 2.22, wuf: 1.0, pxjUpgrade: 25000, name: \"Green\", type: \"secondary ingredient\" },\n  { id: 858573, pxj: 2.22, wuf: 1.0, pxjUpgrade: 25000, name: \"Orange\", type: \"secondary ingredient\" },\n  { id: 858574, pxj: 2.22, wuf: 1.0, pxjUpgrade: 25000, name: \"Purple\", type: \"secondary ingredient\" },\n  { id: 858575, pxj: 14.2, wuf: 14.2, pxjUpgrade: 150000, name: \"Amber\", type: \"tertiary ingredient\" },\n  { id: 858576, pxj: 14.2, wuf: 14.2, pxjUpgrade: 150000, name: \"Chartreuse\", type: \"tertiary ingredient\" },\n  { id: 858577, pxj: 14.2, wuf: 14.2, pxjUpgrade: 150000, name: \"Violet\", type: \"tertiary ingredient\" },\n  { id: 858578, pxj: 14.2, wuf: 14.2, pxjUpgrade: 150000, name: \"Teal\", type: \"tertiary ingredient\" },\n  { id: 858580, pxj: 14.2, wuf: 14.2, pxjUpgrade: 150000, name: \"Vermillion\", type: \"tertiary ingredient\" },\n  { id: 859273, pxj: 14.2, wuf: 14.2, pxjUpgrade: 150000, name: \"Magenta\", type: \"tertiary ingredient\" }\n]\n\ninterface ROICalculation {\n  craftingCost: number\n  dailyEarnings: number\n  roiDays: number\n  profitMargin: number\n}\n\nconst PxCrafting: React.FC = () => {\n\n  const [activeTab, setActiveTab] = useState<'overview' | 'calculator' | 'recipes' | 'staking'>('overview')\n  const [craftingModalOpen, setCraftingModalOpen] = useState(false)\n\n  const [pxjPrice, setPxjPrice] = useState(0.001) // Default PXJ price in WAX\n  const [wufPrice, setWufPrice] = useState(0.0005) // Default WUF price in WAX\n  const [collapsedSections, setCollapsedSections] = useState({\n    ingredients: true,\n    governance: true,\n    collectibles: true,\n    overviewIngredients: true\n  })\n\n  // Calculate ROI for crafting recipes\n  const calculateROI = (recipe: CraftingRecipe): ROICalculation => {\n    const template = templates.find(t => t.id === recipe.resultTemplateId)\n    if (!template) {\n      return { craftingCost: 0, dailyEarnings: 0, roiDays: 0, profitMargin: 0 }\n    }\n\n    // Calculate crafting cost (PXJ cost for ingredients + upgrade cost)\n    const ingredientCosts = recipe.ingredients.reduce((total: number, ing: any) => {\n      const ingTemplate = templates.find(t => t.id === ing.templateId)\n      return total + (ingTemplate ? ingTemplate.pxj * ing.quantity : 0)\n    }, 0)\n    \n    const craftingCost = (ingredientCosts + template.pxjUpgrade) * pxjPrice\n    const dailyEarnings = template.pxj * 24 * pxjPrice // PXJ per hour * 24 hours * PXJ price\n    const roiDays = craftingCost > 0 ? craftingCost / dailyEarnings : 0\n    const profitMargin = dailyEarnings > 0 ? ((dailyEarnings - (craftingCost / 365)) / dailyEarnings) * 100 + 100 : 100 // +100% baseline for NFT value retention\n\n    return { craftingCost, dailyEarnings, roiDays, profitMargin }\n  }\n\n  // Group templates by type\n  const templatesByType = useMemo(() => {\n    const groups: { [key: string]: typeof templates } = {\n      'special': [],\n      'primary ingredient': [],\n      'secondary ingredient': [],\n      'tertiary ingredient': [],\n      'pixals': [],\n      'pixelpack': []\n    }\n    \n    templates.forEach(template => {\n      if (groups[template.type]) {\n        groups[template.type].push(template)\n      }\n    })\n    \n    return groups\n  }, [])\n\n\n\n  const openCraftingModal = () => {\n    setCraftingModalOpen(true)\n  }\n\n  const getIngredientImage = (templateId: number) => {\n    const templateVideos: { [key: string]: string } = {\n      '858575': 'http://pixeljourney.xyz/ingredients/Pixel_Amber_vid_25fps_300px.mp4', // amber\n      '858576': 'http://pixeljourney.xyz/ingredients/Pixel_Chartreuse_vid_25fps_300px.mp4', // chartreuse\n      '858577': 'http://pixeljourney.xyz/ingredients/Pixel_Violet_vid_25fps_300px.mp4', // violet\n      '858578': 'http://pixeljourney.xyz/ingredients/Pixel_Teal_vid_25fps_300px.mp4', // teal\n      '858580': 'http://pixeljourney.xyz/ingredients/Pixel_Vermillion_vid_25fps_300px.mp4', // vermillion\n      '859273': 'http://pixeljourney.xyz/ingredients/Pixel_Magenta_vid_25fps_300px.mp4', // magenta\n      '858574': 'http://pixeljourney.xyz/ingredients/Pixel_Purple_vid_25fps_300px.mp4', // purple\n      '858573': 'http://pixeljourney.xyz/ingredients/Pixel_Orange_vid_25fps_300px.mp4', // orange\n      '858572': 'http://pixeljourney.xyz/ingredients/Pixel_Green_vid_25fps_300px.mp4', // green\n      '858570': 'http://pixeljourney.xyz/ingredients/Pixel_Red_vid_25fps_300px.mp4', // red\n      '858569': 'http://pixeljourney.xyz/ingredients/Pixel_Blue_vid_25fps_300px.mp4', // blue\n      '858571': 'http://pixeljourney.xyz/ingredients/Pixel_Yellow_vid_25fps_300px.mp4', // yellow\n      '858568': 'http://pixeljourney.xyz/ingredients/Pixel_Black_White_vid_25fps_300px.mp4', // black\n    };\n    \n    return templateVideos[templateId.toString()] || `/img/ingredients/${templateId}.png`;\n  };\n\n  const isVideoFormat = (src: string) => {\n    return src.includes('.mp4') || src.includes('.webm');\n  };\n\n  return (\n    <div className=\"pxcrafting-container\">\n      <div className=\"pxcrafting-header\">\n        <h1>Pixel Ingredient Crafting</h1>\n        <p className=\"pxcrafting-subtitle\">\n          Master the art of pixel ingredient crafting with comprehensive guides, ROI calculations, and staking insights.\n        </p>\n      </div>\n\n      <div className=\"pxcrafting-tabs\">\n        <button \n          className={`tab-btn ${activeTab === 'overview' ? 'active' : ''}`}\n          onClick={() => setActiveTab('overview')}\n        >\n          Overview\n        </button>\n        <button \n          className={`tab-btn ${activeTab === 'recipes' ? 'active' : ''}`}\n          onClick={() => setActiveTab('recipes')}\n        >\n          Recipes\n        </button>\n        <button \n          className={`tab-btn ${activeTab === 'calculator' ? 'active' : ''}`}\n          onClick={() => setActiveTab('calculator')}\n        >\n          ROI Calculator\n        </button>\n        <button \n          className={`tab-btn ${activeTab === 'staking' ? 'active' : ''}`}\n          onClick={() => setActiveTab('staking')}\n        >\n          Staking Info\n        </button>\n      </div>\n\n      <div className=\"pxcrafting-content\">\n        {activeTab === 'overview' && (\n          <div className=\"overview-tab\">\n            <div className=\"overview-grid\">\n              <div className=\"overview-card\">\n                <h3>🎨 Crafting System</h3>\n                <p>\n                  Create powerful pixel ingredients by combining primary colors into secondary and tertiary ingredients. \n                  Each tier offers increased staking rewards and unique properties.\n                </p>\n                <button \n                  className=\"cta-button\"\n                  onClick={() => openCraftingModal()}\n                >\n                  Start Crafting\n                </button>\n              </div>\n              \n              <div className=\"overview-card\">\n                <h3>💰 Staking Rewards</h3>\n                <p>\n                  Stake your crafted ingredients to earn PXJ and WUF tokens. Higher tier ingredients provide \n                  significantly better returns on your investment.\n                </p>\n                <button \n                  className=\"cta-button secondary\"\n                  onClick={() => setActiveTab('staking')}\n                >\n                  View Staking Info\n                </button>\n              </div>\n              \n              <div className=\"overview-card\">\n                <h3>📊 ROI Analysis</h3>\n                <p>\n                  Calculate the return on investment for different crafting strategies. Optimize your \n                  crafting decisions with real-time profitability analysis.\n                </p>\n                <button \n                  className=\"cta-button secondary\"\n                  onClick={() => setActiveTab('calculator')}\n                >\n                  Calculate ROI\n                </button>\n              </div>\n            </div>\n\n            {/* Main Staking Platform Section */}\n            <div className=\"main-staking-section\">\n              <div className=\"main-staking-card\">\n                <h3>🏛️ Main Staking Platform</h3>\n                <p>Visit the official Pixel Journey staking platform to stake all your NFT collectibles and earn rewards across the entire ecosystem.</p>\n                <a \n                  href=\"https://stake.pixeljourney.xyz\" \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                  className=\"main-staking-button\"\n                >\n                  Visit Staking Platform\n                </a>\n              </div>\n            </div>\n\n            <div className=\"ingredient-tiers\">\n              <div className=\"collapsible-section\">\n                <button className=\"section-header\" onClick={() => setCollapsedSections(prev => ({ ...prev, overviewIngredients: !prev.overviewIngredients }))}>\n                  <h2>Staking Values</h2>\n                  <span className={`collapse-icon ${collapsedSections.overviewIngredients ? 'collapsed' : ''}`}>▼</span>\n                </button>\n                {!collapsedSections.overviewIngredients && (\n                  <div className=\"smart-tier-layout\">\n                    {/* First Row: Pixelpack and Special Ingredients */}\n                    <div className=\"tier-row tier-row-premium\">\n                <div className=\"tier-card pixelpack\">\n                  <h4>Pixel Ingredient Pack</h4>\n                  <div className=\"tier-ingredients\">\n                    {templates.filter(t => t.type === 'pixelpack').map(template => {\n                        const imageSrc = getIngredientImage(template.id) || 'https://pixeljourney.xyz/img/pixel_journey_pack_002_500x500.gif'\n                        return (\n                          <div key={template.id} className=\"ingredient-preview\">\n                            {isVideoFormat(imageSrc) ? (\n                              <video \n                                src={imageSrc}\n                                autoPlay\n                                loop\n                                muted\n                                onError={(e) => {\n                                  e.currentTarget.style.display = 'none';\n                                  const img = document.createElement('img');\n                                  img.src = 'https://pixeljourney.xyz/img/pixel_journey_pack_002_500x500.gif';\n                                  img.alt = template.name;\n                                  e.currentTarget.parentNode?.appendChild(img);\n                                }}\n                              />\n                            ) : (\n                              <img \n                                src={imageSrc}\n                                alt={template.name}\n                                onError={(e) => {\n                                  e.currentTarget.src = 'https://pixeljourney.xyz/img/pixel_journey_pack_002_500x500.gif'\n                                }}\n                              />\n                            )}\n                          <span>{template.name} <span className=\"season-tag\">Season 1</span></span>\n                          <small>{template.pxj} PXJ/hr</small>\n                        </div>\n                      )\n                    })}\n                  </div>\n                </div>\n                \n                <div className=\"tier-card special\">\n                  <h4>Special Ingredients</h4>\n                  <div className=\"tier-ingredients\">\n                    {templates.filter(t => t.type === 'special').map(template => {\n                      const imageSrc = getIngredientImage(template.id)\n                      return (\n                        <div key={template.id} className=\"ingredient-preview\">\n                          {isVideoFormat(imageSrc) ? (\n                            <video \n                              src={imageSrc}\n                              autoPlay\n                              loop\n                              muted\n                              onError={(e) => {\n                                e.currentTarget.style.display = 'none';\n                                const img = document.createElement('img');\n                                img.src = '/img/placeholder-ingredient.png';\n                                img.alt = template.name;\n                                e.currentTarget.parentNode?.appendChild(img);\n                              }}\n                            />\n                          ) : (\n                            <img \n                              src={imageSrc}\n                              alt={template.name}\n                              onError={(e) => {\n                                e.currentTarget.src = '/img/placeholder-ingredient.png'\n                              }}\n                            />\n                          )}\n                          <span>{template.name} <span className=\"season-tag\">Season 1</span></span>\n                          <small>{template.pxj} PXJ/hr</small>\n                        </div>\n                      )\n                    })}\n                  </div>\n                </div>\n                    </div>\n                    \n                    {/* Second Row: Primary and Secondary Ingredients */}\n                    <div className=\"tier-row tier-row-standard\">\n                <div className=\"tier-card primary\">\n                  <h4>Primary Ingredients</h4>\n                  <div className=\"tier-ingredients\">\n                    {templates.filter(t => t.type === 'primary ingredient').map(template => {\n                      const imageSrc = getIngredientImage(template.id)\n                      return (\n                        <div key={template.id} className=\"ingredient-preview\">\n                          {isVideoFormat(imageSrc) ? (\n                            <video \n                              src={imageSrc}\n                              autoPlay\n                              loop\n                              muted\n                              onError={(e) => {\n                                e.currentTarget.style.display = 'none';\n                                const img = document.createElement('img');\n                                img.src = '/img/placeholder-ingredient.png';\n                                img.alt = template.name;\n                                e.currentTarget.parentNode?.appendChild(img);\n                              }}\n                            />\n                          ) : (\n                            <img \n                              src={imageSrc}\n                              alt={template.name}\n                              onError={(e) => {\n                                e.currentTarget.src = '/img/placeholder-ingredient.png'\n                              }}\n                            />\n                          )}\n                            <span>{template.name} <span className=\"season-tag\">Season 1</span></span>\n                            <small>{template.pxj} PXJ/hr</small>\n                        </div>\n                      )\n                    })}\n                  </div>\n                </div>\n                \n                <div className=\"tier-card secondary\">\n                  <h4>Secondary Ingredients</h4>\n                  <div className=\"tier-ingredients\">\n                    {templates.filter(t => t.type === 'secondary ingredient').map(template => {\n                      const imageSrc = getIngredientImage(template.id)\n                      return (\n                        <div key={template.id} className=\"ingredient-preview\">\n                          {isVideoFormat(imageSrc) ? (\n                            <video \n                              src={imageSrc}\n                              autoPlay\n                              loop\n                              muted\n                              onError={(e) => {\n                                e.currentTarget.style.display = 'none';\n                                const img = document.createElement('img');\n                                img.src = '/img/placeholder-ingredient.png';\n                                img.alt = template.name;\n                                e.currentTarget.parentNode?.appendChild(img);\n                              }}\n                            />\n                          ) : (\n                            <img \n                              src={imageSrc}\n                              alt={template.name}\n                              onError={(e) => {\n                                e.currentTarget.src = '/img/placeholder-ingredient.png'\n                              }}\n                            />\n                          )}\n                            <span>{template.name} <span className=\"season-tag\">Season 1</span></span>\n                            <small>{template.pxj} PXJ/hr</small>\n                        </div>\n                      )\n                    })}\n                  </div>\n                </div>\n                    </div>\n                    \n                    {/* Third Row: Tertiary Ingredients Grid */}\n                    <div className=\"tier-row tier-row-tertiary\">\n                <div className=\"tier-card tertiary\">\n                  <h4>Tertiary Ingredients</h4>\n                  <div className=\"tier-ingredients\">\n                    {templates.filter(t => t.type === 'tertiary ingredient').map(template => {\n                      const imageSrc = getIngredientImage(template.id)\n                      return (\n                        <div key={template.id} className=\"ingredient-preview\">\n                          {isVideoFormat(imageSrc) ? (\n                            <video \n                              src={imageSrc}\n                              autoPlay\n                              loop\n                              muted\n                              onError={(e) => {\n                                e.currentTarget.style.display = 'none';\n                                const img = document.createElement('img');\n                                img.src = '/img/placeholder-ingredient.png';\n                                img.alt = template.name;\n                                e.currentTarget.parentNode?.appendChild(img);\n                              }}\n                            />\n                          ) : (\n                            <img \n                              src={imageSrc}\n                              alt={template.name}\n                              onError={(e) => {\n                                e.currentTarget.src = '/img/placeholder-ingredient.png'\n                              }}\n                            />\n                          )}\n                            <span>{template.name} <span className=\"season-tag\">Season 1</span></span>\n                            <small>{template.pxj} PXJ/hr</small>\n                        </div>\n                      )\n                    })}\n                  </div>\n                </div>\n                \n                <div className=\"tier-card collectibles\">\n                  <h4>Collectibles</h4>\n                  <div className=\"tier-ingredients\">\n                    <div className=\"sub-tier\">\n                      <h5>PFPs</h5>\n                      {templates.filter(t => t.type === 'pixals').map(template => {\n                        const imageSrc = getIngredientImage(template.id) || 'https://ipfs.io/ipfs/QmQKA9fxWBAsoDnMRZj1v1vsjwZeWZpHmnoEyujmeMi2rp'\n                        return (\n                          <div key={template.id} className=\"ingredient-preview\">\n                            {isVideoFormat(imageSrc) ? (\n                              <video \n                                src={imageSrc}\n                                autoPlay\n                                loop\n                                muted\n                                onError={(e) => {\n                                  e.currentTarget.style.display = 'none';\n                                  const img = document.createElement('img');\n                                  img.src = 'https://ipfs.io/ipfs/QmQKA9fxWBAsoDnMRZj1v1vsjwZeWZpHmnoEyujmeMi2rp';\n                                  img.alt = template.name;\n                                  e.currentTarget.parentNode?.appendChild(img);\n                                }}\n                              />\n                            ) : (\n                              <img \n                                src={imageSrc}\n                                alt={template.name}\n                                onError={(e) => {\n                                  e.currentTarget.src = 'https://ipfs.io/ipfs/QmQKA9fxWBAsoDnMRZj1v1vsjwZeWZpHmnoEyujmeMi2rp'\n                                }}\n                              />\n                            )}\n                            <span>{template.name} <span className=\"season-tag\">Season 1</span></span>\n                            <small>{template.pxj} PXJ/hr</small>\n                          </div>\n                        )\n                      })}\n                    </div>\n                  </div>\n                </div>\n                    </div>\n                  </div>\n                  )\n                }\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'recipes' && (\n          <div className=\"recipes-tab\">\n            <div className=\"recipes-header\">\n              <h2>Crafting Recipes</h2>\n              <div className=\"recipe-category-tabs\">\n                <button className=\"recipe-tab active\">Ingredient</button>\n                <button className=\"recipe-tab disabled\" title=\"Coming Soon\">Collectibles</button>\n                <button className=\"recipe-tab disabled\" title=\"Coming Soon\">Event</button>\n                <button className=\"recipe-tab disabled\" title=\"Coming Soon\">Governance</button>\n              </div>\n            </div>\n            <div className=\"recipes-grid\">\n              {CRAFTING_RECIPES.map((recipe, index) => {\n                const roi = calculateROI(recipe)\n                const resultTemplate = templates.find(t => t.id === recipe.resultTemplateId)\n                \n                return (\n                  <div key={index} className=\"recipe-card\">\n                    <div className=\"recipe-header\">\n                      <h3>{recipe.name}</h3>\n                      <span className={`tier-badge ${recipe.tier}`}>{recipe.tier}</span>\n                    </div>\n                    \n                    <div className=\"recipe-ingredients\">\n                      <h4>Ingredients Required:</h4>\n                      {recipe.ingredients.map((ing, ingIndex) => {\n                        const ingTemplate = templates.find(t => t.id === ing.templateId)\n                        const imageSrc = getIngredientImage(ing.templateId)\n                        return (\n                          <div key={ingIndex} className=\"ingredient-requirement\">\n                            {isVideoFormat(imageSrc) ? (\n                              <video \n                                src={imageSrc}\n                                autoPlay\n                                loop\n                                muted\n                                onError={(e) => {\n                                  e.currentTarget.style.display = 'none';\n                                  const img = document.createElement('img');\n                                  img.src = '/img/placeholder-ingredient.png';\n                                  img.alt = ingTemplate?.name || 'Unknown';\n                                  e.currentTarget.parentNode?.appendChild(img);\n                                }}\n                              />\n                            ) : (\n                              <img \n                                src={imageSrc}\n                                alt={ingTemplate?.name || 'Unknown'}\n                                onError={(e) => {\n                                  e.currentTarget.src = '/img/placeholder-ingredient.png'\n                                }}\n                              />\n                            )}\n                            <span>{ing.quantity}x {ingTemplate?.name || 'Unknown'}</span>\n                          </div>\n                        )\n                      })}\n                    </div>\n                    \n                    <div className=\"recipe-result\">\n                      <h4>Creates:</h4>\n                      <div className=\"result-item\">\n                        {(() => {\n                          const imageSrc = getIngredientImage(recipe.resultTemplateId)\n                          return isVideoFormat(imageSrc) ? (\n                            <video \n                              src={imageSrc}\n                              autoPlay\n                              loop\n                              muted\n                              onError={(e) => {\n                                e.currentTarget.style.display = 'none';\n                                const img = document.createElement('img');\n                                img.src = '/img/placeholder-ingredient.png';\n                                img.alt = resultTemplate?.name || 'Unknown';\n                                e.currentTarget.parentNode?.appendChild(img);\n                              }}\n                            />\n                          ) : (\n                            <img \n                              src={imageSrc}\n                              alt={resultTemplate?.name || 'Unknown'}\n                              onError={(e) => {\n                                e.currentTarget.src = '/img/placeholder-ingredient.png'\n                              }}\n                            />\n                          )\n                        })()}\n                        <span>1x {resultTemplate?.name || 'Unknown'}</span>\n                      </div>\n                    </div>\n                    \n                    <div className=\"recipe-stats\">\n                      <div className=\"stat\">\n                        <label>Cost:</label>\n                        <span>{roi.craftingCost.toFixed(4)} WAX</span>\n                      </div>\n                      <div className=\"stat\">\n                        <label>Daily Earnings:</label>\n                        <span>{roi.dailyEarnings.toFixed(4)} WAX</span>\n                      </div>\n                      <div className=\"stat\">\n                        <label>ROI Period:</label>\n                        <span>{roi.roiDays.toFixed(1)} days</span>\n                      </div>\n                    </div>\n                    \n                    <button \n                      className=\"craft-button\"\n                      onClick={() => {\n                        openCraftingModal()\n                      }}\n                    >\n                      Craft This Recipe\n                    </button>\n                  </div>\n                )\n              })}\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'calculator' && (\n          <div className=\"calculator-tab\">\n            <h2>ROI Calculator</h2>\n            \n            <div className=\"price-inputs\">\n              <div className=\"input-group\">\n                <label>PXJ Price (WAX):</label>\n                <input \n                  type=\"number\" \n                  step=\"0.0001\" \n                  value={pxjPrice} \n                  onChange={(e) => setPxjPrice(parseFloat(e.target.value) || 0)}\n                />\n              </div>\n              <div className=\"input-group\">\n                <label>WUF Price (WAX):</label>\n                <input \n                  type=\"number\" \n                  step=\"0.0001\" \n                  value={wufPrice} \n                  onChange={(e) => setWufPrice(parseFloat(e.target.value) || 0)}\n                />\n              </div>\n            </div>\n            \n            <div className=\"roi-table\">\n              <table>\n                <thead>\n                  <tr>\n                    <th>Recipe</th>\n                    <th>Tier</th>\n                    <th>Crafting Cost</th>\n                    <th>Daily Earnings</th>\n                    <th>ROI Period</th>\n                    <th>Profit Margin</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {CRAFTING_RECIPES.map((recipe, index) => {\n                    const roi = calculateROI(recipe)\n                    return (\n                      <tr key={index}>\n                        <td>{recipe.name}</td>\n                        <td><span className={`tier-badge ${recipe.tier}`}>{recipe.tier}</span></td>\n                        <td>{roi.craftingCost.toFixed(4)} WAX</td>\n                        <td>{roi.dailyEarnings.toFixed(4)} WAX</td>\n                        <td>{roi.roiDays.toFixed(1)} days</td>\n                        <td className={roi.profitMargin > 0 ? 'positive' : 'negative'}>\n                          {roi.profitMargin.toFixed(1)}%\n                        </td>\n                      </tr>\n                    )\n                  })}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'staking' && (\n          <div className=\"staking-tab\">\n            <h2>Staking Information</h2>\n            <p className=\"staking-description\">\n              Stake your Pixel Journey NFTs to earn PXJ and WUF rewards. Use PXJ to infuse, upgrade, and unlock new journeys while earning returns over a 2-3 year period. Benefit from our yearly PXJ allocations (~25% of yearly inflation) that boost crafting incentives and reward active participants in the ecosystem.\n            </p>\n            \n            <div className=\"staking-tiers\">\n              <div className=\"collapsible-section\">\n                <button className=\"section-header\" onClick={() => setCollapsedSections(prev => ({ ...prev, collectibles: !prev.collectibles }))}>\n                  <h3>Collectibles</h3>\n                  <span className={`collapse-icon ${collapsedSections.collectibles ? 'collapsed' : ''}`}>▼</span>\n                </button>\n                {!collapsedSections.collectibles && (\n                  <div className=\"tiers-grid\">\n                    <div className=\"tier-section\">\n                      <h4 className=\"tier-title\">PFPs</h4>\n                      <div className=\"tier-items\">\n                        {templates.filter(t => t.type === 'pixals').map((template) => {\n                          const imageSrc = getIngredientImage(template.id)\n                          const fallbackUrl = 'https://ipfs.io/ipfs/QmQKA9fxWBAsoDnMRZj1v1vsjwZeWZpHmnoEyujmeMi2rp'\n                          return (\n                            <div key={template.id} className=\"tier-item\">\n                              {isVideoFormat(imageSrc) ? (\n                                <video \n                                  src={imageSrc}\n                                  autoPlay\n                                  loop\n                                  muted\n                                  onError={(e) => {\n                                    e.currentTarget.style.display = 'none';\n                                    const img = document.createElement('img');\n                                    img.src = fallbackUrl;\n                                    img.alt = template.name;\n                                    e.currentTarget.parentNode?.appendChild(img);\n                                  }}\n                                />\n                              ) : (\n                                <img \n                                  src={imageSrc}\n                                  alt={template.name}\n                                  onError={(e) => {\n                                    e.currentTarget.src = fallbackUrl\n                                  }}\n                                />\n                              )}\n                              <div className=\"tier-info\">\n                                <h5>{template.name}</h5>\n                                <div className=\"tier-stats\">\n                                  <span>PXJ: {template.pxj}</span>\n                                  <span>WUF: {template.wuf}</span>\n                                  {template.pxjUpgrade > 0 && (\n                                    <span>Upgrade: {template.pxjUpgrade.toLocaleString()} PXJ</span>\n                                  )}\n                                </div>\n                              </div>\n                            </div>\n                          )\n                        })}\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              <div className=\"collapsible-section\">\n                <button className=\"section-header\" onClick={() => setCollapsedSections(prev => ({ ...prev, ingredients: !prev.ingredients }))}>\n                  <h3>Ingredients</h3>\n                  <span className={`collapse-icon ${collapsedSections.ingredients ? 'collapsed' : ''}`}>▼</span>\n                </button>\n                {!collapsedSections.ingredients && (\n                  <div className=\"tiers-grid\">\n                    {/* Pixelpack first */}\n                    {templatesByType.pixelpack.length > 0 && (\n                      <div className=\"tier-section\">\n                        <h4 className=\"tier-title\">Pixel Ingredient Pack</h4>\n                        <div className=\"tier-items\">\n                          {templatesByType.pixelpack.map((template) => {\n                            const imageSrc = getIngredientImage(template.id)\n                            const fallbackUrl = 'https://pixeljourney.xyz/img/pixel_journey_pack_002_500x500.gif'\n                            return (\n                              <div key={template.id} className=\"tier-item\">\n                                {isVideoFormat(imageSrc) ? (\n                                  <video \n                                    src={imageSrc}\n                                    autoPlay\n                                    loop\n                                    muted\n                                    onError={(e) => {\n                                      e.currentTarget.style.display = 'none';\n                                      const img = document.createElement('img');\n                                      img.src = fallbackUrl;\n                                      img.alt = template.name;\n                                      e.currentTarget.parentNode?.appendChild(img);\n                                    }}\n                                  />\n                                ) : (\n                                  <img \n                                    src={imageSrc}\n                                    alt={template.name}\n                                    onError={(e) => {\n                                      e.currentTarget.src = fallbackUrl\n                                    }}\n                                  />\n                                )}\n                                <div className=\"ingredient-info\">\n                                  <h5>{template.name}</h5>\n                                  <div className=\"ingredient-stats\">\n                                    <span>PXJ: {template.pxj}</span>\n                                    <span>WUF: {template.wuf}</span>\n                                    {template.pxjUpgrade > 0 && (\n                                      <span>Cost: {template.pxjUpgrade.toLocaleString()} PXJ</span>\n                                    )}\n                                  </div>\n                                </div>\n                              </div>\n                            )\n                          })}\n                        </div>\n                      </div>\n                    )}\n                    {/* Other ingredient types excluding pixals and pixelpack */}\n                    {Object.entries(templatesByType).filter(([type]) => type !== 'pixals' && type !== 'pixelpack').map(([type, typeTemplates]) => (\n                      <div key={type} className=\"tier-section\">\n                        <h4 className=\"tier-title\">{type.charAt(0).toUpperCase() + type.slice(1)} Ingredients</h4>\n                        <div className=\"tier-items\">\n                          {typeTemplates.map((template) => {\n                            const imageSrc = getIngredientImage(template.id)\n                            const fallbackUrl = template.type === 'pixelpack' \n                              ? 'https://pixeljourney.xyz/img/pixel_journey_pack_002_500x500.gif'\n                              : template.type === 'pixals'\n                              ? 'https://ipfs.io/ipfs/QmQKA9fxWBAsoDnMRZj1v1vsjwZeWZpHmnoEyujmeMi2rp'\n                              : '/img/placeholder-ingredient.png'\n                            return (\n                              <div key={template.id} className=\"tier-item\">\n                                {isVideoFormat(imageSrc) ? (\n                                  <video \n                                    src={imageSrc}\n                                    autoPlay\n                                    loop\n                                    muted\n                                    onError={(e) => {\n                                      e.currentTarget.style.display = 'none';\n                                      const img = document.createElement('img');\n                                      img.src = fallbackUrl;\n                                      img.alt = template.name;\n                                      e.currentTarget.parentNode?.appendChild(img);\n                                    }}\n                                  />\n                                ) : (\n                                  <img \n                                    src={imageSrc}\n                                    alt={template.name}\n                                    onError={(e) => {\n                                      e.currentTarget.src = fallbackUrl\n                                    }}\n                                  />\n                                )}\n                                <div className=\"ingredient-info\">\n                                  <h5>{template.name}</h5>\n                                  <div className=\"ingredient-stats\">\n                                    <span>PXJ: {template.pxj}</span>\n                                    <span>WUF: {template.wuf}</span>\n                                    {template.pxjUpgrade > 0 && (\n                                      <span>Cost: {template.pxjUpgrade.toLocaleString()} PXJ</span>\n                                    )}\n                                  </div>\n                                </div>\n                              </div>\n                            )\n                          })}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n\n              <div className=\"collapsible-section\">\n                <button className=\"section-header\" onClick={() => setCollapsedSections(prev => ({ ...prev, governance: !prev.governance }))}>\n                  <h3>Governance NFTs</h3>\n                  <span className={`collapse-icon ${collapsedSections.governance ? 'collapsed' : ''}`}>▼</span>\n                </button>\n                {!collapsedSections.governance && (\n                  <div className=\"coming-soon-content\">\n                    <p>Coming soon at next PixelDAO expansions</p>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Crafting Modal */}\n      <CraftingModal \n        isOpen={craftingModalOpen}\n        onClose={() => setCraftingModalOpen(false)}\n        ingredient={null}\n      />\n    </div>\n  )\n}\n\nexport default PxCrafting","import { log } from './loggingService'\n\nexport interface FeaturedTokenPromo {\n  id: string\n  tokenSymbol: string\n  tokenContract: string\n  description: string\n  imageUrl?: string\n  websiteUrl?: string\n  paidAmount: number\n  startDate: Date\n  endDate: Date\n  transactionId: string\n  isActive: boolean\n}\n\nexport interface PromoPayment {\n  amount: number // PXJ amount (500K to 5M)\n  duration: number // days (30 to 365)\n  tokenSymbol: string\n  tokenContract: string\n  description: string\n  imageUrl?: string\n  websiteUrl?: string\n}\n\nclass FeaturedTokensService {\n  private readonly FEATURE_ACCOUNT = 'feature.pxj'\n  private readonly MIN_AMOUNT = 500000 // 500K PXJ\n  private readonly MAX_AMOUNT = 5000000 // 5M PXJ\n  private readonly MIN_DAYS = 30\n  private readonly MAX_DAYS = 365\n  \n  /**\n   * Calculate promotion duration based on PXJ amount\n   */\n  calculateDuration(pxjAmount: number): number {\n    // Linear scale: 500K PXJ = 30 days, 5M PXJ = 365 days\n    const ratio = (pxjAmount - this.MIN_AMOUNT) / (this.MAX_AMOUNT - this.MIN_AMOUNT)\n    return Math.floor(this.MIN_DAYS + (ratio * (this.MAX_DAYS - this.MIN_DAYS)))\n  }\n  \n  /**\n   * Calculate required PXJ amount for desired duration\n   */\n  calculateRequiredAmount(days: number): number {\n    const ratio = (days - this.MIN_DAYS) / (this.MAX_DAYS - this.MIN_DAYS)\n    return Math.floor(this.MIN_AMOUNT + (ratio * (this.MAX_AMOUNT - this.MIN_AMOUNT)))\n  }\n  \n  /**\n   * Generate compact memo for promotion payment\n   * Format: TOKEN@CONTRACT|DESCRIPTION|IMAGE|WEBSITE\n   */\n  generatePromoMemo(payment: PromoPayment): string {\n    const token = `${payment.tokenSymbol}@${payment.tokenContract}`\n    \n    // Calculate available space for description\n    const baseLength = token.length + 1 // 1 pipe after token\n    const imageLength = payment.imageUrl ? payment.imageUrl.length + 1 : 0 // +1 for pipe\n    const websiteLength = payment.websiteUrl ? payment.websiteUrl.length + 1 : 0 // +1 for pipe\n    const usedLength = baseLength + imageLength + websiteLength\n    const maxDescLength = Math.min(100, 235 - usedLength) // Leave 5 chars buffer\n    \n    // Truncate description if needed\n    let description = payment.description\n    if (description.length > maxDescLength) {\n      description = description.substring(0, maxDescLength - 3) + '...'\n    }\n    \n    // Build compact memo: TOKEN@CONTRACT|DESCRIPTION|IMAGE|WEBSITE\n    let memo = `${token}|${description}`\n    \n    if (payment.imageUrl) {\n      memo += `|${payment.imageUrl}`\n    }\n    \n    if (payment.websiteUrl) {\n      memo += `|${payment.websiteUrl}`\n    }\n    \n    return memo\n  }\n  \n  /**\n   * Parse memo from blockchain transaction\n   * Supports both new compact format and old JSON format for backward compatibility\n   */\n  parseMemo(memo: string): any {\n    if (!memo) return null\n    \n    try {\n      // Try parsing new compact format first: TOKEN@CONTRACT|DESCRIPTION|IMAGE|WEBSITE\n      if (memo.includes('|') && memo.includes('@') && !memo.startsWith('{')) {\n        const parts = memo.split('|')\n        if (parts.length >= 2) {\n          const [token, description, image = '', website = ''] = parts\n          const [tokenSymbol, tokenContract] = token.split('@')\n          \n          return {\n            type: 'feature_token',\n            token,\n            tokenSymbol,\n            tokenContract,\n            description,\n            image,\n            website\n          }\n        }\n      }\n      \n      // Fall back to old JSON format\n      const parsed = JSON.parse(memo)\n      if (parsed.type === 'feature_token') {\n        return parsed\n      }\n      \n      return null\n    } catch (error) {\n      log.error('Failed to parse memo:', 'FeaturedTokensService.parseMemo', error as Error)\n      return null\n    }\n  }\n  \n  /**\n   * Fetch featured token promotions from blockchain\n   */\n  async getFeaturedTokens(): Promise<FeaturedTokenPromo[]> {\n    try {\n      // Query transfers to feature.pxj account\n      const response = await fetch(`https://wax.eosrio.io/v2/history/get_actions?account=${this.FEATURE_ACCOUNT}&filter=eosio.token:transfer&limit=100&sort=desc`)\n      \n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`)\n      }\n      \n      const data = await response.json()\n      const promos: FeaturedTokenPromo[] = []\n      \n      for (const action of data.actions || []) {\n        try {\n          const transfer = action.act.data\n          const memo = this.parseMemo(transfer.memo)\n          \n          if (!memo || memo.type !== 'feature_token') continue\n          \n          const pxjAmount = parseFloat(transfer.quantity.split(' ')[0])\n          const startDate = new Date(action.timestamp)\n          const endDate = new Date(startDate.getTime() + (memo.duration * 24 * 60 * 60 * 1000))\n          const isActive = new Date() <= endDate\n          \n          // Only include valid promotions with sufficient payment\n          if (pxjAmount >= this.MIN_AMOUNT && isActive) {\n            const [tokenSymbol, tokenContract] = memo.token.split('@')\n            \n            promos.push({\n              id: action.trx_id,\n              tokenSymbol,\n              tokenContract,\n              description: memo.description,\n              imageUrl: memo.image,\n              websiteUrl: memo.website,\n              paidAmount: pxjAmount,\n              startDate,\n              endDate,\n              transactionId: action.trx_id,\n              isActive\n            })\n          }\n        } catch (error) {\n          log.error('Error processing featured token action:', 'FeaturedTokensService.getFeaturedTokens', error as Error)\n        }\n      }\n      \n      // Sort by paid amount (highest first) and then by start date (newest first)\n      return promos.sort((a, b) => {\n        if (a.paidAmount !== b.paidAmount) {\n          return b.paidAmount - a.paidAmount\n        }\n        return b.startDate.getTime() - a.startDate.getTime()\n      })\n      \n    } catch (error) {\n      log.error('Failed to fetch featured tokens:', 'FeaturedTokensService.getFeaturedTokens', error as Error)\n      return []\n    }\n  }\n  \n  /**\n   * Validate promotion payment parameters\n   */\n  validatePayment(payment: PromoPayment): { valid: boolean; error?: string } {\n    if (payment.amount < this.MIN_AMOUNT || payment.amount > this.MAX_AMOUNT) {\n      return {\n        valid: false,\n        error: `Amount must be between ${this.MIN_AMOUNT.toLocaleString()} and ${this.MAX_AMOUNT.toLocaleString()} PXJ`\n      }\n    }\n    \n    if (payment.duration < this.MIN_DAYS || payment.duration > this.MAX_DAYS) {\n      return {\n        valid: false,\n        error: `Duration must be between ${this.MIN_DAYS} and ${this.MAX_DAYS} days`\n      }\n    }\n    \n    if (!payment.tokenSymbol || !payment.tokenContract) {\n      return {\n        valid: false,\n        error: 'Token symbol and contract are required'\n      }\n    }\n    \n    if (!payment.description || payment.description.length < 10) {\n      return {\n        valid: false,\n        error: 'Description must be at least 10 characters'\n      }\n    }\n    \n    // Calculate max description length based on other fields\n    const token = `${payment.tokenSymbol}@${payment.tokenContract}`\n    const baseLength = token.length + 1 // 1 pipe after token\n    const imageLength = payment.imageUrl ? payment.imageUrl.length + 1 : 0\n    const websiteLength = payment.websiteUrl ? payment.websiteUrl.length + 1 : 0\n    const usedLength = baseLength + imageLength + websiteLength\n    const maxDescLength = Math.min(100, 235 - usedLength)\n    \n    if (payment.description.length > maxDescLength) {\n      return {\n        valid: false,\n        error: `Description too long. Maximum ${maxDescLength} characters allowed with current image/website URLs.`\n      }\n    }\n    \n    return { valid: true }\n  }\n}\n\nexport const featuredTokensService = new FeaturedTokensService()","import React, { useState, useEffect } from 'react'\nimport { useWallet } from '../contexts/WalletContext'\nimport { useNotifications } from '../hooks/useNotifications'\nimport { featuredTokensService, type FeaturedTokenPromo, type PromoPayment } from '../services/featuredTokensService'\nimport { log } from '../services/loggingService'\nimport '../css/featured-tokens.css'\n\ninterface FeaturedTokensProps {\n  className?: string\n}\n\nconst FeaturedTokens: React.FC<FeaturedTokensProps> = ({ className = '' }) => {\n  const { account, session } = useWallet()\n  const { showSuccess, showError } = useNotifications()\n  const [featuredTokens, setFeaturedTokens] = useState<FeaturedTokenPromo[]>([])\n  const [loading, setLoading] = useState(true)\n  const [showPromoModal, setShowPromoModal] = useState(false)\n  const [promoForm, setPromoForm] = useState<PromoPayment>({\n    amount: 500000,\n    duration: 30,\n    tokenSymbol: '',\n    tokenContract: '',\n    description: '',\n    imageUrl: '',\n    websiteUrl: ''\n  })\n\n  useEffect(() => {\n    loadFeaturedTokens()\n  }, [])\n\n  const loadFeaturedTokens = async () => {\n    try {\n      setLoading(true)\n      const tokens = await featuredTokensService.getFeaturedTokens()\n      setFeaturedTokens(tokens)\n    } catch (error) {\n      log.error('Failed to load featured tokens:', 'FeaturedTokens.loadFeaturedTokens', error as Error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleAmountChange = (amount: number) => {\n    const duration = featuredTokensService.calculateDuration(amount)\n    setPromoForm(prev => ({ ...prev, amount, duration }))\n  }\n\n\n\n  const submitPromotion = async () => {\n    if (!account || !session) {\n      showError('Please connect your wallet first')\n      return\n    }\n\n    const validation = featuredTokensService.validatePayment(promoForm)\n    if (!validation.valid) {\n      showError(validation.error || 'Invalid promotion parameters')\n      return\n    }\n\n    try {\n      const memo = featuredTokensService.generatePromoMemo(promoForm)\n      \n      const transaction = {\n        actions: [{\n          account: 'pixeljourney',\n          name: 'transfer',\n          authorization: [{\n            actor: account,\n            permission: 'active'\n          }],\n          data: {\n            from: account,\n            to: 'feature.pxj',\n            quantity: `${promoForm.amount.toFixed(4)} PXJ`,\n            memo: memo\n          }\n        }]\n      }\n\n      const result = await session.transact(transaction) as any\n      \n      // Extract transaction ID from various possible response formats\n      let transactionId: string | null = null\n      \n      if (result) {\n        transactionId = result.transaction_id || \n                       result.id || \n                       result.processed?.id || \n                       result.processed?.transaction_id ||\n                       (result.response && result.response.transaction_id) ||\n                       (result.transaction && result.transaction.id)\n      }\n      \n      if (transactionId) {\n        showSuccess(`Promotion submitted successfully! Transaction: ${transactionId}`)\n      } else {\n        showSuccess('Promotion submitted successfully!')\n      }\n      setShowPromoModal(false)\n      \n      // Reload featured tokens after a short delay\n      setTimeout(() => {\n        loadFeaturedTokens()\n      }, 3000)\n      \n    } catch (error) {\n      log.error('Failed to submit promotion:', 'FeaturedTokens.submitPromotion', error as Error)\n      showError(`Failed to submit promotion: ${error instanceof Error ? error.message : 'Unknown error'}`)\n    }\n  }\n\n  const formatTimeRemaining = (endDate: Date): string => {\n    const now = new Date()\n    const diff = endDate.getTime() - now.getTime()\n    const days = Math.floor(diff / (1000 * 60 * 60 * 24))\n    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))\n    \n    if (days > 0) {\n      return `${days}d ${hours}h remaining`\n    } else if (hours > 0) {\n      return `${hours}h remaining`\n    } else {\n      return 'Expires soon'\n    }\n  }\n\n  return (\n    <div className={`featured-tokens ${className}`}>\n      <div className=\"featured-tokens-header\">\n        <h3>🌟 Featured Tokens</h3>\n        <button \n          className=\"promote-button\"\n          onClick={() => setShowPromoModal(true)}\n          disabled={!account}\n        >\n          Promote Your Token\n        </button>\n      </div>\n\n      {loading ? (\n        <div className=\"featured-tokens-loading\">\n          <div className=\"loading-spinner\"></div>\n          <span>Loading featured tokens...</span>\n        </div>\n      ) : featuredTokens.length > 0 ? (\n        <div className=\"featured-tokens-grid\">\n          {featuredTokens.slice(0, 6).map((token) => (\n            <div key={token.id} className=\"featured-token-card\">\n              {token.imageUrl && (\n                <div className=\"token-image\">\n                  <img src={token.imageUrl} alt={token.tokenSymbol} />\n                </div>\n              )}\n              <div className=\"token-info\">\n                <div className=\"token-header\">\n                  <span className=\"token-symbol\">{token.tokenSymbol}</span>\n                  <span className=\"token-contract\">@{token.tokenContract}</span>\n                </div>\n                <p className=\"token-description\">{token.description}</p>\n                <div className=\"token-meta\">\n                  <span className=\"promo-amount\">{token.paidAmount.toLocaleString()} PXJ</span>\n                  <span className=\"time-remaining\">{formatTimeRemaining(token.endDate)}</span>\n                </div>\n                {token.websiteUrl && (\n                  <a \n                    href={token.websiteUrl} \n                    target=\"_blank\" \n                    rel=\"noopener noreferrer\"\n                    className=\"token-website\"\n                  >\n                    Visit Website →\n                  </a>\n                )}\n              </div>\n            </div>\n          ))}\n        </div>\n      ) : (\n        <div className=\"no-featured-tokens\">\n          <p>No featured tokens at the moment.</p>\n          <p>Be the first to promote your token!</p>\n        </div>\n      )}\n\n      {/* Promotion Modal */}\n      {showPromoModal && (\n        <div className=\"promo-modal-overlay\" onClick={() => setShowPromoModal(false)}>\n          <div className=\"promo-modal\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"promo-modal-header\">\n              <h3>Promote Your Token</h3>\n              <button \n                className=\"close-button\"\n                onClick={() => setShowPromoModal(false)}\n              >\n                ×\n              </button>\n            </div>\n\n            <div className=\"promo-form\">\n              <div className=\"form-group\">\n                <label>Token Symbol</label>\n                <input\n                  type=\"text\"\n                  value={promoForm.tokenSymbol}\n                  onChange={(e) => setPromoForm(prev => ({ ...prev, tokenSymbol: e.target.value.toUpperCase() }))}\n                  placeholder=\"e.g., MYTOKEN\"\n                />\n              </div>\n\n              <div className=\"form-group\">\n                <label>Token Contract</label>\n                <input\n                  type=\"text\"\n                  value={promoForm.tokenContract}\n                  onChange={(e) => setPromoForm(prev => ({ ...prev, tokenContract: e.target.value }))}\n                  placeholder=\"e.g., mycontract12\"\n                />\n              </div>\n\n              <div className=\"form-group\">\n                <label>Description</label>\n                <textarea\n                  value={promoForm.description}\n                  onChange={(e) => setPromoForm(prev => ({ ...prev, description: e.target.value }))}\n                  placeholder=\"Describe your token and why users should trade it...\"\n                  rows={3}\n                />\n              </div>\n\n              <div className=\"form-group\">\n                <label>Image URL (optional)</label>\n                <input\n                  type=\"url\"\n                  value={promoForm.imageUrl}\n                  onChange={(e) => setPromoForm(prev => ({ ...prev, imageUrl: e.target.value }))}\n                  placeholder=\"https://example.com/token-logo.png\"\n                />\n              </div>\n\n              <div className=\"form-group\">\n                <label>Website URL (optional)</label>\n                <input\n                  type=\"url\"\n                  value={promoForm.websiteUrl}\n                  onChange={(e) => setPromoForm(prev => ({ ...prev, websiteUrl: e.target.value }))}\n                  placeholder=\"https://yourtoken.com\"\n                />\n              </div>\n\n              <div className=\"form-group\">\n                <label>Promotion Amount: {promoForm.amount.toLocaleString()} PXJ</label>\n                <input\n                  type=\"range\"\n                  min={500000}\n                  max={5000000}\n                  step={50000}\n                  value={promoForm.amount}\n                  onChange={(e) => handleAmountChange(parseInt(e.target.value))}\n                  className=\"amount-slider\"\n                />\n                <div className=\"slider-labels\">\n                  <span>500K PXJ (30 days)</span>\n                  <span>5M PXJ (365 days)</span>\n                </div>\n              </div>\n\n              <div className=\"promotion-summary\">\n                <div className=\"summary-item\">\n                  <span>Duration:</span>\n                  <span>{promoForm.duration} days</span>\n                </div>\n                <div className=\"summary-item\">\n                  <span>Cost:</span>\n                  <span>{promoForm.amount.toLocaleString()} PXJ</span>\n                </div>\n              </div>\n\n              <div className=\"form-actions\">\n                <button \n                  className=\"cancel-button\"\n                  onClick={() => setShowPromoModal(false)}\n                >\n                  Cancel\n                </button>\n                <button \n                  className=\"submit-button\"\n                  onClick={submitPromotion}\n                  disabled={!promoForm.tokenSymbol || !promoForm.tokenContract || !promoForm.description}\n                >\n                  Submit Promotion\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default FeaturedTokens","import React from 'react'\nimport SwapInterface from './SwapInterface'\nimport FeaturedTokens from './FeaturedTokens'\nimport '../css/pxswap.css'\nimport '../styles/swap-info.css'\n\nconst PxSwap: React.FC = () => {\n  return (\n    <div className=\"pxswap-page\">\n      <div className=\"pxswap-container\">\n        <div className=\"pxswap-header\">\n          <h1>PxSwap</h1>\n          <p>Swap between WAX and WPIXAL tokens with live market rates</p>\n        </div>\n        \n        <div className=\"pxswap-content\">\n          <SwapInterface />\n        </div>\n        \n        <div className=\"pxswap-info\">\n          {/* Page Description & Routing Info */}\n          <div className=\"swap-info-section\">\n            <h3>🔄 PxSwap Platform Overview</h3>\n            <div className=\"info-grid\">\n              <div className=\"info-card\">\n                <h4>Universal Token Swapping</h4>\n                <p>\n                  PxSwap enables seamless trading of any tokens held directly on our platform. \n                  Trade between WAX ecosystem tokens, community tokens, and project-specific assets \n                  with ease using our integrated Alcor Exchange routing.\n                </p>\n              </div>\n              <div className=\"info-card routing-info\">\n                <h4>🛣️ Multi-DEX Routing</h4>\n                <p>\n                  PxSwap currently uses <strong>Alcor Exchange</strong> for all swaps, providing reliable \n                  liquidity and competitive rates. We're expanding to include multi-DEX routing in the future \n                  for even better prices and deeper liquidity.\n                </p>\n                <p>\n                  <strong>Want advanced routing now?</strong> Visit{' '}\n                  <a \n                    href=\"https://waxonedge.app/swap/WAX_eosio.token/PXJ_pixeljourney\" \n                    target=\"_blank\" \n                    rel=\"noopener noreferrer\"\n                    className=\"external-link\"\n                  >\n                    WaxOnEdge\n                  </a>{' '}\n                  for their ecosystem-MVP swap routing platform.\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Featured Tokens */}\n          <FeaturedTokens />\n\n          {/* DeFi and LP Farming */}\n          <div className=\"swap-info-section\">\n            <h3>💰 DeFi & LP Farming on WAX</h3>\n            <div className=\"info-grid\">\n              <div className=\"info-card\">\n                <h4>🏛️ Alcor Exchange</h4>\n                <p>The premier DEX on WAX with deep liquidity pools and farming opportunities.</p>\n                <a \n                  href=\"https://alcor.exchange/farm\" \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                  className=\"info-link\"\n                >\n                  Farm on Alcor →\n                </a>\n              </div>\n              <div className=\"info-card\">\n                <h4>🌮 TacoCrypto</h4>\n                <p>Innovative DeFi platform offering unique yield farming and staking mechanisms.</p>\n                <a \n                  href=\"https://swap.tacocrypto.io/meal\" \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                  className=\"info-link\"\n                >\n                  Explore TacoCrypto →\n                </a>\n              </div>\n            </div>\n          </div>\n\n          {/* PXJ Spot Markets */}\n          <div className=\"swap-info-section\">\n            <h3>📈 PXJ Spot Markets</h3>\n            <div className=\"info-grid\">\n              <div className=\"info-card\">\n                <h4>PXJ/WAX</h4>\n                <p>Primary trading pair with highest liquidity</p>\n                <a \n                  href=\"https://alcor.exchange/trade/pxj-pixeljourney_wax-eosio.token\" \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                  className=\"info-link\"\n                >\n                  Trade PXJ/WAX →\n                </a>\n              </div>\n              <div className=\"info-card\">\n                <h4>PXJ/WUF</h4>\n                <p>Community favorite pairing</p>\n                <a \n                  href=\"https://alcor.exchange/trade/pxj-pixeljourney_wuf-wuffi\" \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                  className=\"info-link\"\n                >\n                  Trade PXJ/WUF →\n                </a>\n              </div>\n              <div className=\"info-card community-request\">\n                <h4>🤔 What's Next?</h4>\n                <p>\n                  What market should we open next? WPIXAL/PXJ? WPIXAL/USDC? \n                  Let us and the WaxRock Council know on our Discord!\n                </p>\n                <a \n                  href=\"#\" \n                  className=\"info-link discord-link\"\n                >\n                  Join Discord →\n                </a>\n              </div>\n            </div>\n          </div>\n\n          {/* Analytics */}\n          <div className=\"swap-info-section\">\n            <h3>📊 WAX DeFi Analytics</h3>\n            <div className=\"info-grid\">\n              <div className=\"info-card\">\n                <h4>📈 Alcor Analytics</h4>\n                <p>Detailed trading data and market insights for Alcor Exchange</p>\n                <a \n                  href=\"https://alcor.exchange/analytics/\" \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                  className=\"info-link\"\n                >\n                  View Alcor Data →\n                </a>\n              </div>\n              <div className=\"info-card\">\n                <h4>🌊 WaxOnEdge Analytics</h4>\n                <p>Comprehensive ecosystem analytics and cross-DEX insights</p>\n                <a \n                  href=\"https://waxonedge.app/analytics\" \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                  className=\"info-link\"\n                >\n                  Explore WaxOnEdge →\n                </a>\n              </div>\n              <div className=\"info-card\">\n                <h4>🔍 WAX Network Overview</h4>\n                <p>Complete WAX blockchain DeFi metrics and network statistics</p>\n                <a \n                  href=\"https://grafana.waxtools.net/\" \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                  className=\"info-link\"\n                >\n                  View Network Stats →\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      \n    </div>\n  )\n}\n\nexport default PxSwap","import React, { useState, useEffect, useCallback } from 'react'\nimport '../css/price-alert-notification.css'\n\ninterface PriceAlertEvent {\n  item: {\n    nft: {\n      asset_id: string\n      name: string\n      image: string\n      price: string\n    }\n  }\n  message: string\n}\n\ninterface NotificationProps {\n  alert: PriceAlertEvent\n  onClose: () => void\n}\n\nconst PriceAlertNotification: React.FC<NotificationProps> = ({ alert, onClose }) => {\n  const [isVisible, setIsVisible] = useState(false)\n  const [isClosing, setIsClosing] = useState(false)\n\n  const handleClose = useCallback(() => {\n    setIsClosing(true)\n    setTimeout(() => {\n      onClose()\n    }, 300)\n  }, [onClose])\n\n  useEffect(() => {\n    // Show notification with animation\n    const showTimer = setTimeout(() => setIsVisible(true), 100)\n    \n    // Auto-close after 8 seconds\n    const autoCloseTimer = setTimeout(() => {\n      handleClose()\n    }, 8000)\n\n    return () => {\n      clearTimeout(showTimer)\n      clearTimeout(autoCloseTimer)\n    }\n  }, [handleClose])\n\n  const handleViewWatchlist = () => {\n    window.location.href = '/watchlist'\n    handleClose()\n  }\n\n  return (\n    <div className={`price-alert-notification ${\n      isVisible && !isClosing ? 'visible' : ''\n    } ${\n      isClosing ? 'closing' : ''\n    }`}>\n      <div className=\"notification-content\">\n        <div className=\"notification-header\">\n          <div className=\"notification-icon\">\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n              <path d=\"M15 17h5l-5 5-5-5h5v-5a7.5 7.5 0 1 0-15 0v5h5l-5 5-5-5h5v-5a12.5 12.5 0 1 1 25 0v5z\"></path>\n            </svg>\n          </div>\n          <div className=\"notification-title\">\n            <h4>Price Alert</h4>\n            <span className=\"notification-time\">{new Date().toLocaleTimeString()}</span>\n          </div>\n          <button className=\"notification-close\" onClick={handleClose}>\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n            </svg>\n          </button>\n        </div>\n        \n        <div className=\"notification-body\">\n          <div className=\"nft-preview\">\n            <img \n              src={alert.item.nft.image} \n              alt={alert.item.nft.name}\n              onError={(e) => {\n                const target = e.target as HTMLImageElement\n                target.src = 'https://pixeljourney.xyz/img/toppixals/10.webp'\n              }}\n            />\n          </div>\n          <div className=\"alert-details\">\n            <h5 className=\"nft-name\">{alert.item.nft.name}</h5>\n            <p className=\"alert-message\">{alert.message}</p>\n          </div>\n        </div>\n        \n        <div className=\"notification-actions\">\n          <button className=\"btn-secondary\" onClick={handleClose}>\n            Dismiss\n          </button>\n          <button className=\"btn-primary\" onClick={handleViewWatchlist}>\n            View Watchlist\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nconst PriceAlertManager: React.FC = () => {\n  const [alerts, setAlerts] = useState<PriceAlertEvent[]>([])\n\n  useEffect(() => {\n    const handlePriceAlert = (event: CustomEvent<PriceAlertEvent>) => {\n      setAlerts(prev => [...prev, event.detail])\n    }\n\n    window.addEventListener('priceAlert', handlePriceAlert as EventListener)\n    \n    return () => {\n      window.removeEventListener('priceAlert', handlePriceAlert as EventListener)\n    }\n  }, [])\n\n  const removeAlert = (index: number) => {\n    setAlerts(prev => prev.filter((_, i) => i !== index))\n  }\n\n  return (\n    <div className=\"price-alert-manager\">\n      {alerts.map((alert, index) => (\n        <PriceAlertNotification\n          key={`${alert.item.nft.asset_id}-${Date.now()}-${index}`}\n          alert={alert}\n          onClose={() => removeAlert(index)}\n        />\n      ))}\n    </div>\n  )\n}\n\nexport default PriceAlertManager\nexport { PriceAlertNotification }","import React, { useEffect, useRef, useCallback } from 'react'\nimport { useNotifications } from '../hooks/useNotifications'\nimport '../css/notifications.css'\n\nconst NotificationContainer: React.FC = () => {\n  const { notifications, removeNotification, soundEnabled } = useNotifications()\n  const audioContextRef = useRef<AudioContext | null>(null)\n  const soundsRef = useRef<{ [key: string]: AudioBuffer }>({})\n\n  const createTone = (audioContext: AudioContext, frequency: number, duration: number, type: OscillatorType): AudioBuffer => {\n    const sampleRate = audioContext.sampleRate\n    const frameCount = sampleRate * duration\n    const buffer = audioContext.createBuffer(1, frameCount, sampleRate)\n    const channelData = buffer.getChannelData(0)\n    \n    for (let i = 0; i < frameCount; i++) {\n      const t = i / sampleRate\n      let sample = 0\n      \n      switch (type) {\n        case 'sine':\n          sample = Math.sin(2 * Math.PI * frequency * t)\n          break\n        case 'square':\n          sample = Math.sign(Math.sin(2 * Math.PI * frequency * t))\n          break\n        case 'triangle':\n          sample = (2 / Math.PI) * Math.asin(Math.sin(2 * Math.PI * frequency * t))\n          break\n      }\n      \n      // Apply envelope for smooth sound\n      const envelope = Math.exp(-t * 5) // Exponential decay\n      channelData[i] = sample * envelope * 0.1 // Low volume\n    }\n    \n    return buffer\n  }\n\n  const playNotificationSound = useCallback((type: string) => {\n    if (!soundEnabled || !audioContextRef.current || !soundsRef.current[type]) return\n    \n    try {\n      const source = audioContextRef.current.createBufferSource()\n      source.buffer = soundsRef.current[type]\n      source.connect(audioContextRef.current.destination)\n      source.start()\n    } catch (error) {\n      console.warn('Failed to play notification sound:', error)\n    }\n  }, [soundEnabled])\n\n  // Initialize audio context and load sounds\n  useEffect(() => {\n    const initAudio = async () => {\n      try {\n        audioContextRef.current = new (window.AudioContext || (window as { webkitAudioContext?: typeof AudioContext }).webkitAudioContext)()\n        \n        // Create sound buffers for different notification types\n        const sounds = {\n          success: createTone(audioContextRef.current, 800, 0.1, 'sine'),\n          error: createTone(audioContextRef.current, 400, 0.2, 'square'),\n          warning: createTone(audioContextRef.current, 600, 0.15, 'triangle'),\n          info: createTone(audioContextRef.current, 500, 0.1, 'sine')\n        }\n        \n        soundsRef.current = sounds\n      } catch (error) {\n        console.warn('Audio context initialization failed:', error)\n      }\n    }\n    \n    initAudio()\n    \n    return () => {\n      if (audioContextRef.current) {\n        audioContextRef.current.close()\n      }\n    }\n  }, [])\n  \n  // Play sound when new notification appears\n  useEffect(() => {\n    if (notifications.length > 0) {\n      const latestNotification = notifications[notifications.length - 1]\n      playNotificationSound(latestNotification.type)\n    }\n  }, [notifications.length, notifications, playNotificationSound])\n\n  if (notifications.length === 0) {\n    return null\n  }\n  \n  const handleRemoveNotification = (id: string) => {\n    // Add removing class for exit animation\n    const notificationElement = document.querySelector(`[data-notification-id=\"${id}\"]`)\n    if (notificationElement) {\n      notificationElement.classList.add('removing')\n      setTimeout(() => {\n        removeNotification(id)\n      }, 300) // Match animation duration\n    } else {\n      removeNotification(id)\n    }\n  }\n\n  return (\n    <div className=\"notification-container\">\n      {notifications.map((notification) => (\n        <div\n          key={notification.id}\n          className={`notification notification-${notification.type}`}\n          data-notification-id={notification.id}\n        >\n          <div className=\"notification-content\">\n            <div className=\"notification-header\">\n              {notification.title && (\n                <h4 className=\"notification-title\">{notification.title}</h4>\n              )}\n              <button\n                className=\"notification-close\"\n                onClick={() => handleRemoveNotification(notification.id)}\n                aria-label=\"Close notification\"\n              >\n                <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                  <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n                  <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n                </svg>\n              </button>\n            </div>\n            <div className=\"notification-body\">\n              <div className=\"notification-icon\">\n                {notification.type === 'success' && (\n                  <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                    <path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"></path>\n                    <polyline points=\"22,4 12,14.01 9,11.01\"></polyline>\n                  </svg>\n                )}\n                {notification.type === 'error' && (\n                  <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                    <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n                    <line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line>\n                    <line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line>\n                  </svg>\n                )}\n                {notification.type === 'warning' && (\n                  <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                    <path d=\"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\"></path>\n                    <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line>\n                    <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n                  </svg>\n                )}\n                {notification.type === 'info' && (\n                  <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                    <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n                    <path d=\"M12 16v-4\"></path>\n                    <path d=\"M12 8h.01\"></path>\n                  </svg>\n                )}\n              </div>\n              <div className=\"notification-message\">\n                <p>{notification.message}</p>\n                {notification.action && (\n                  <button\n                    className=\"notification-action\"\n                    onClick={notification.action.onClick}\n                  >\n                    {notification.action.label}\n                  </button>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      ))}\n    </div>\n  )\n}\n\nexport default NotificationContainer","import React from 'react'\nimport { useNotifications } from '../hooks/useNotifications'\nimport '../css/notifications.css'\n\nconst ConfirmDialog: React.FC = () => {\n  const { confirmDialog, resolveConfirm } = useNotifications()\n\n  if (!confirmDialog) {\n    return null\n  }\n\n  const handleConfirm = () => {\n    resolveConfirm(true)\n  }\n\n  const handleCancel = () => {\n    resolveConfirm(false)\n  }\n\n  return (\n    <div className=\"modal-overlay\" onClick={handleCancel}>\n      <div className=\"modal confirm-dialog\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h3>{confirmDialog.title || 'Confirm Action'}</h3>\n          <button className=\"modal-close\" onClick={handleCancel}>\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n            </svg>\n          </button>\n        </div>\n        <div className=\"modal-body\">\n          <p>{confirmDialog.message}</p>\n        </div>\n        <div className=\"modal-actions\">\n          <button className=\"btn-secondary\" onClick={handleCancel}>\n            {confirmDialog.cancelText || 'Cancel'}\n          </button>\n          <button className=\"btn-primary\" onClick={handleConfirm}>\n            {confirmDialog.confirmText || 'Confirm'}\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ConfirmDialog","import React, { Component, type ReactNode } from 'react'\nimport { logger } from '../services/loggingService'\nimport ErrorMessage from './ErrorMessage'\nimport '../css/error-message.css'\n\ninterface Props {\n  children: ReactNode\n  fallback?: ReactNode\n  onError?: (error: Error, errorInfo: React.ErrorInfo) => void\n}\n\ninterface State {\n  hasError: boolean\n  error?: Error\n  errorInfo?: React.ErrorInfo\n  retryCount: number\n}\n\nclass ErrorBoundary extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props)\n    this.state = { hasError: false, retryCount: 0 }\n  }\n\n  static getDerivedStateFromError(error: Error): Partial<State> {\n    // Update state so the next render will show the fallback UI\n    return { hasError: true, error }\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    logger.error('ErrorBoundary caught an error', 'ErrorBoundary', error, {\n      componentStack: errorInfo.componentStack,\n      errorBoundary: this.constructor.name\n    })\n    \n    // Call custom error handler if provided\n    if (this.props.onError) {\n      this.props.onError(error, errorInfo)\n    }\n    \n    this.setState({\n      error,\n      errorInfo\n    })\n    \n    // Report error to monitoring service (if available)\n    this.reportError(error, errorInfo)\n  }\n\n  private reportError = async (error: Error, errorInfo: React.ErrorInfo) => {\n    try {\n      const errorReport = {\n        message: error.message,\n        stack: error.stack,\n        componentStack: errorInfo.componentStack,\n        timestamp: new Date().toISOString(),\n        userAgent: navigator.userAgent,\n        url: window.location.href\n      }\n      \n      logger.warn('Error Report generated', 'ErrorBoundary', errorReport)\n      \n      // Error reporting is now handled by the logging service\n      // The logger will automatically report errors in production\n    } catch (reportingError) {\n      logger.error('Failed to report error', 'ErrorBoundary', reportingError as Error)\n    }\n  }\n\n  handleRetry = () => {\n    const newRetryCount = this.state.retryCount + 1\n    \n    // Prevent infinite retry loops\n    if (newRetryCount > 3) {\n      logger.warn('Maximum retry attempts reached', 'ErrorBoundary')\n      return\n    }\n    \n    this.setState({ \n      hasError: false, \n      error: undefined, \n      errorInfo: undefined,\n      retryCount: newRetryCount\n    })\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // Custom fallback UI\n      if (this.props.fallback) {\n        return this.props.fallback\n      }\n\n      // Default error UI\n      const isMaxRetries = this.state.retryCount >= 3\n      \n      return (\n        <ErrorMessage\n          title=\"Something went wrong\"\n          message={isMaxRetries \n            ? \"Multiple errors occurred. Please refresh the page or contact support if the problem persists.\"\n            : \"An unexpected error occurred. Please try again or refresh the page.\"\n          }\n          onRetry={isMaxRetries ? undefined : this.handleRetry}\n          showRetry={!isMaxRetries}\n        />\n      )\n    }\n\n    return this.props.children\n  }\n}\n\nexport default ErrorBoundary","import React, { Component, type ReactNode } from 'react'\nimport ErrorMessage from './ErrorMessage'\nimport { ErrorMessageService } from '../services/errorMessageService'\nimport { log } from '../services/loggingService'\n\n\ninterface Props {\n  children: ReactNode\n  fallback?: ReactNode\n  onError?: (error: Error, errorInfo: React.ErrorInfo) => void\n}\n\ninterface State {\n  hasError: boolean\n  error?: Error\n  errorInfo?: React.ErrorInfo\n  retryCount: number\n  isRetrying: boolean\n  lastRetryTime?: number\n  errorCategory: 'network' | 'api' | 'timeout' | 'unknown'\n}\n\nclass APIErrorBoundary extends Component<Props, State> {\n  private maxRetries = 3\n  private retryTimeouts: NodeJS.Timeout[] = []\n\n  constructor(props: Props) {\n    super(props)\n    this.state = { \n      hasError: false, \n      retryCount: 0,\n      isRetrying: false,\n      errorCategory: 'unknown'\n    }\n  }\n\n  componentWillUnmount() {\n    // Clear any pending retry timeouts\n    this.retryTimeouts.forEach(timeout => clearTimeout(timeout))\n  }\n\n  static getDerivedStateFromError(error: Error): Partial<State> {\n    // Categorize the error\n    const errorMessage = error.message.toLowerCase()\n    let errorCategory: State['errorCategory'] = 'unknown'\n    \n    if (errorMessage.includes('fetch') || errorMessage.includes('network') || errorMessage.includes('connection')) {\n      errorCategory = 'network'\n    } else if (errorMessage.includes('timeout') || errorMessage.includes('aborted')) {\n      errorCategory = 'timeout'\n    } else if (errorMessage.includes('http') || errorMessage.includes('api') || errorMessage.includes('failed to load')) {\n      errorCategory = 'api'\n    }\n    \n    // Check if this is an error we should handle\n    const shouldHandle = ['network', 'api', 'timeout'].includes(errorCategory) ||\n                        error.name === 'ChunkLoadError' ||\n                        error.name === 'TypeError' && errorMessage.includes('fetch')\n    \n    if (shouldHandle) {\n      return { hasError: true, error, errorCategory }\n    }\n    \n    // Let other error boundaries handle non-API errors\n    throw error\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    // Use centralized error logging\n    ErrorMessageService.logError('APIErrorBoundary', error, {\n      errorInfo,\n      retryCount: this.state.retryCount,\n      componentStack: errorInfo.componentStack\n    })\n    \n    this.setState({\n      error,\n      errorInfo\n    })\n\n    // Call custom error handler if provided\n    if (this.props.onError) {\n      this.props.onError(error, errorInfo)\n    }\n  }\n\n  handleRetry = () => {\n    if (this.state.retryCount >= this.maxRetries) {\n      log.warn('Max retries reached for API error boundary')\n      return\n    }\n\n    // Calculate exponential backoff delay\n    const baseDelay = 1000 // 1 second\n    const delay = baseDelay * Math.pow(2, this.state.retryCount)\n    const jitter = Math.random() * 0.1 * delay // Add 10% jitter\n    const finalDelay = Math.min(delay + jitter, 30000) // Cap at 30 seconds\n\n    this.setState({ isRetrying: true, lastRetryTime: Date.now() })\n\n    const timeout = setTimeout(() => {\n      this.setState(prevState => ({ \n        hasError: false, \n        error: undefined, \n        errorInfo: undefined,\n        retryCount: prevState.retryCount + 1,\n        isRetrying: false\n      }))\n    }, finalDelay)\n\n    this.retryTimeouts.push(timeout)\n  }\n\n  handleReset = () => {\n    this.setState({ \n      hasError: false, \n      error: undefined, \n      errorInfo: undefined,\n      retryCount: 0\n    })\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // Custom fallback UI\n      if (this.props.fallback) {\n        return this.props.fallback\n      }\n\n      const canRetry = this.state.retryCount < this.maxRetries\n      \n      // Determine appropriate error type based on error category\n      let errorType: keyof typeof ErrorMessageService.MESSAGES\n      \n      switch (this.state.errorCategory) {\n        case 'network':\n          errorType = 'NETWORK_ERROR'\n          break\n        case 'timeout':\n          errorType = 'TIMEOUT_ERROR'\n          break\n        case 'api':\n          errorType = 'API_ERROR'\n          break\n        default:\n          errorType = 'LOAD_FAILED'\n      }\n      \n      return (\n        <div className=\"error-boundary-container\">\n          <ErrorMessage\n            errorType={errorType}\n            onRetry={canRetry ? this.handleRetry : this.handleReset}\n            showRetry={true}\n            isRetrying={this.state.isRetrying}\n            retryCount={this.state.retryCount}\n            maxRetries={this.maxRetries}\n          />\n          {this.state.retryCount > 0 && (\n            <div className=\"error-retry-info\">\n              <p>Retry attempt {this.state.retryCount} of {this.maxRetries}</p>\n              {this.state.isRetrying && (\n                <div className=\"retry-progress\">\n                  <div className=\"retry-spinner\"></div>\n                  <span>Retrying...</span>\n                </div>\n              )}\n            </div>\n          )}\n          {process.env.NODE_ENV === 'development' && this.state.error && (\n            <details className=\"error-details\">\n              <summary>Error Details (Development)</summary>\n              <pre>{this.state.error.stack}</pre>\n              {this.state.errorInfo && (\n                <pre>{this.state.errorInfo.componentStack}</pre>\n              )}\n            </details>\n          )}\n        </div>\n      )\n    }\n\n    return this.props.children\n  }\n}\n\nexport default APIErrorBoundary","import React, { useEffect } from 'react'\nimport { watchlistService } from '../services/watchlistService'\nimport { useWallet } from '../hooks/useWallet'\nimport { log } from '../services/loggingService'\nimport type { NFTAsset } from '../types'\n\n/**\n * Component that checks for triggered watchlist alerts on page load\n * and displays notifications for any alerts that have been triggered\n * since the user's last visit.\n */\nconst WatchlistAlertChecker: React.FC = () => {\n  const { isConnected, account } = useWallet()\n\n  useEffect(() => {\n    if (!isConnected || !account) return\n\n    const checkTriggeredAlerts = async () => {\n      try {\n        // Get the last check timestamp from localStorage\n        const lastCheckKey = `watchlist_last_check_${account}`\n        const lastCheck = localStorage.getItem(lastCheckKey)\n        const lastCheckTime = lastCheck ? parseInt(lastCheck) : 0\n        const now = Date.now()\n        \n        // Only check if it's been more than 5 minutes since last check\n        if (now - lastCheckTime < 5 * 60 * 1000) {\n          return\n        }\n\n        // Get watchlist items\n        const watchlistItems = await watchlistService.getWatchlist()\n        \n        if (watchlistItems.length === 0) {\n          // Update last check time even if no items\n          localStorage.setItem(lastCheckKey, now.toString())\n          return\n        }\n\n        // Check each item for recent alerts\n        interface AlertData {\n          targetPrice: number\n          alertType: 'below' | 'above' | 'any'\n          enabled: boolean\n          lastTriggered?: number\n        }\n        \n        interface WatchlistItem {\n          nft: NFTAsset\n          targetPrice?: number\n          alertType: 'below' | 'above' | 'any'\n          addedAt: number\n          lastPrice: number\n          priceChange?: number\n        }\n        \n        interface RecentAlert {\n          alert: AlertData\n          item: WatchlistItem\n          message: string\n          triggeredAt: number\n        }\n        \n        const recentAlerts: RecentAlert[] = []\n        \n        for (const item of watchlistItems) {\n          const alert = watchlistService.getPriceAlert(item.nft.asset_id)\n          \n          if (alert && alert.enabled && alert.lastTriggered) {\n            // Check if alert was triggered since last check\n            if (alert.lastTriggered > lastCheckTime) {\n              // Create alert message based on alert type\n              let message = ''\n              const currentPrice = item.lastPrice || parseFloat(item.nft.price || '0')\n              \n              switch (alert.alertType) {\n                case 'below':\n                  message = `${item.nft.name} price dropped to ${currentPrice.toFixed(2)} WAX (target: ${alert.targetPrice} WAX)`\n                  break\n                case 'above':\n                  message = `${item.nft.name} price rose to ${currentPrice.toFixed(2)} WAX (target: ${alert.targetPrice} WAX)`\n                  break\n                case 'any': {\n                  const changePercent = Math.abs(item.priceChange || 0)\n                  const direction = (item.priceChange || 0) > 0 ? 'increased' : 'decreased'\n                  message = `${item.nft.name} price ${direction} by ${changePercent.toFixed(1)}% to ${currentPrice.toFixed(2)} WAX`\n                  break\n                }\n              }\n              \n              recentAlerts.push({\n                alert,\n                item,\n                message,\n                triggeredAt: alert.lastTriggered\n              })\n            }\n          }\n        }\n\n        // Sort alerts by trigger time (most recent first)\n        recentAlerts.sort((a, b) => b.triggeredAt - a.triggeredAt)\n        \n        // Display alerts with a small delay between each\n        recentAlerts.forEach((alertData, index) => {\n          setTimeout(() => {\n            // Dispatch custom event for PriceAlertManager to handle\n            window.dispatchEvent(new CustomEvent('priceAlert', {\n              detail: {\n                item: alertData.item,\n                message: alertData.message\n              }\n            }))\n          }, index * 1000) // 1 second delay between alerts\n        })\n\n        // Update last check timestamp\n        localStorage.setItem(lastCheckKey, now.toString())\n        \n        if (recentAlerts.length > 0) {\n          log.info(`Found ${recentAlerts.length} triggered watchlist alerts since last visit`)\n        }\n        \n      } catch (error) {\n        log.error('Error checking watchlist alerts:', 'WatchlistAlertChecker.checkTriggeredAlerts', error as Error)\n      }\n    }\n\n    // Check alerts after a short delay to ensure everything is loaded\n    const timeoutId = setTimeout(checkTriggeredAlerts, 2000)\n    \n    return () => clearTimeout(timeoutId)\n  }, [isConnected, account])\n\n  // This component doesn't render anything visible\n  return null\n}\n\nexport default WatchlistAlertChecker","import { useState, useEffect } from 'react';\nimport { log } from '../services/loggingService';\n\ninterface BeforeInstallPromptEvent extends Event {\n  readonly platforms: string[];\n  readonly userChoice: Promise<{\n    outcome: 'accepted' | 'dismissed';\n    platform: string;\n  }>;\n  prompt(): Promise<void>;\n}\n\ninterface PWAState {\n  isInstallable: boolean;\n  isInstalled: boolean;\n  isOnline: boolean;\n  isStandalone: boolean;\n  installPrompt: BeforeInstallPromptEvent | null;\n  showInstallPrompt: () => Promise<void>;\n  dismissInstallPrompt: () => void;\n}\n\nexport const usePWA = (): PWAState => {\n  const [installPrompt, setInstallPrompt] = useState<BeforeInstallPromptEvent | null>(null);\n  const [isInstallable, setIsInstallable] = useState(false);\n  const [isInstalled, setIsInstalled] = useState(false);\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\n  const [isStandalone, setIsStandalone] = useState(false);\n\n  useEffect(() => {\n    // Check if app is running in standalone mode\n    const checkStandalone = () => {\n      const isStandaloneMode = \n        window.matchMedia('(display-mode: standalone)').matches ||\n        (window.navigator as { standalone?: boolean }).standalone ||\n        document.referrer.includes('android-app://');\n      \n      setIsStandalone(isStandaloneMode);\n      setIsInstalled(isStandaloneMode);\n    };\n\n    checkStandalone();\n\n    // Listen for beforeinstallprompt event\n    const handleBeforeInstallPrompt = (e: Event) => {\n      e.preventDefault();\n      const promptEvent = e as BeforeInstallPromptEvent;\n      setInstallPrompt(promptEvent);\n      setIsInstallable(true);\n    };\n\n    // Listen for appinstalled event\n    const handleAppInstalled = () => {\n      setIsInstalled(true);\n      setIsInstallable(false);\n      setInstallPrompt(null);\n    };\n\n    // Listen for online/offline events\n    const handleOnline = () => setIsOnline(true);\n    const handleOffline = () => setIsOnline(false);\n\n    // Add event listeners\n    window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n    window.addEventListener('appinstalled', handleAppInstalled);\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n\n    // Listen for display mode changes\n    const mediaQuery = window.matchMedia('(display-mode: standalone)');\n    const handleDisplayModeChange = (e: MediaQueryListEvent) => {\n      setIsStandalone(e.matches);\n      setIsInstalled(e.matches);\n    };\n    \n    if (mediaQuery.addEventListener) {\n      mediaQuery.addEventListener('change', handleDisplayModeChange);\n    } else {\n      // Fallback for older browsers\n      mediaQuery.addListener(handleDisplayModeChange);\n    }\n\n    // Cleanup\n    return () => {\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n      window.removeEventListener('appinstalled', handleAppInstalled);\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n      \n      if (mediaQuery.removeEventListener) {\n        mediaQuery.removeEventListener('change', handleDisplayModeChange);\n      } else {\n        mediaQuery.removeListener(handleDisplayModeChange);\n      }\n    };\n  }, []);\n\n  const showInstallPrompt = async (): Promise<void> => {\n    if (!installPrompt) return;\n\n    try {\n      await installPrompt.prompt();\n      const { outcome } = await installPrompt.userChoice;\n      \n      if (outcome === 'accepted') {\n        log.info('User accepted the install prompt');\n      } else {\n        log.info('User dismissed the install prompt');\n      }\n      \n      setInstallPrompt(null);\n      setIsInstallable(false);\n    } catch (error) {\n      log.error('Error showing install prompt:', 'usePWA.showInstallPrompt', error as Error);\n    }\n  };\n\n  const dismissInstallPrompt = (): void => {\n    setInstallPrompt(null);\n    setIsInstallable(false);\n  };\n\n  return {\n    isInstallable,\n    isInstalled,\n    isOnline,\n    isStandalone,\n    installPrompt,\n    showInstallPrompt,\n    dismissInstallPrompt,\n  };\n};\n\nexport default usePWA;","import React from 'react';\nimport { usePWA } from '../hooks/usePWA';\nimport '../css/pwa-install-banner.css';\n\ninterface PWAInstallBannerProps {\n  className?: string;\n}\n\nconst PWAInstallBanner: React.FC<PWAInstallBannerProps> = ({ className = '' }) => {\n  const { isInstallable, isInstalled, isStandalone, showInstallPrompt, dismissInstallPrompt } = usePWA();\n\n  // Don't show banner if app is already installed or not installable\n  if (!isInstallable || isInstalled || isStandalone) {\n    return null;\n  }\n\n  return (\n    <div className={`pwa-install-banner ${className}`} role=\"banner\" aria-label=\"Install app banner\">\n      <div className=\"pwa-banner-content\">\n        <div className=\"pwa-banner-icon\">\n          <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\">\n            <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" fill=\"currentColor\" fillOpacity=\"0.1\" stroke=\"currentColor\" strokeWidth=\"1.5\"/>\n            <path d=\"M8 12l2 2 4-4\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n          </svg>\n        </div>\n        \n        <div className=\"pwa-banner-text\">\n          <h3 className=\"pwa-banner-title\">Install PxMarket</h3>\n          <p className=\"pwa-banner-description\">\n            Get the full app experience with offline access and faster loading.\n          </p>\n        </div>\n        \n        <div className=\"pwa-banner-actions\">\n          <button\n            type=\"button\"\n            className=\"pwa-install-button\"\n            onClick={showInstallPrompt}\n            aria-label=\"Install PxMarket app\"\n          >\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\">\n              <path d=\"M8 1v10M4 7l4 4 4-4\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n            </svg>\n            Install\n          </button>\n          \n          <button\n            type=\"button\"\n            className=\"pwa-dismiss-button\"\n            onClick={dismissInstallPrompt}\n            aria-label=\"Dismiss install banner\"\n          >\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\">\n              <path d=\"M12 4L4 12M4 4l8 8\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n            </svg>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PWAInstallBanner;","import React from 'react';\nimport { usePWA } from '../hooks/usePWA';\nimport '../css/offline-indicator.css';\n\ninterface OfflineIndicatorProps {\n  className?: string;\n}\n\nconst OfflineIndicator: React.FC<OfflineIndicatorProps> = ({ className = '' }) => {\n  const { isOnline } = usePWA();\n\n  // Don't show indicator when online\n  if (isOnline) {\n    return null;\n  }\n\n  return (\n    <div \n      className={`offline-indicator ${className}`} \n      role=\"status\" \n      aria-live=\"polite\"\n      aria-label=\"You are currently offline\"\n    >\n      <div className=\"offline-content\">\n        <div className=\"offline-icon\">\n          <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\">\n            <path \n              d=\"M3 7c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v6c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2V7z\" \n              stroke=\"currentColor\" \n              strokeWidth=\"1.5\" \n              fill=\"none\"\n            />\n            <path \n              d=\"M7 9l6 4M13 9l-6 4\" \n              stroke=\"currentColor\" \n              strokeWidth=\"1.5\" \n              strokeLinecap=\"round\"\n            />\n          </svg>\n        </div>\n        \n        <div className=\"offline-text\">\n          <span className=\"offline-title\">You're offline</span>\n          <span className=\"offline-description\">Some features may be limited</span>\n        </div>\n        \n        <div className=\"offline-pulse\" aria-hidden=\"true\"></div>\n      </div>\n    </div>\n  );\n};\n\nexport default OfflineIndicator;","import React, { useState, useEffect, useCallback } from 'react'\nimport { useTransactionManager } from '../hooks/useTransactionManager'\nimport { useNotifications } from '../hooks/useNotifications'\n\nimport '../css/transaction-notifications.css'\n\ninterface NotificationItem {\n  id: string\n  type: 'success' | 'error' | 'info' | 'warning'\n  title: string\n  message: string\n  timestamp: number\n  transactionId?: string\n  autoHide?: boolean\n  duration?: number\n}\n\nconst TransactionNotifications: React.FC = () => {\n  const [notifications, setNotifications] = useState<NotificationItem[]>([])\n  const [processedTransactions, setProcessedTransactions] = useState<Set<string>>(new Set())\n  const { activeTransactions, completedTransactions } = useTransactionManager()\n  const { showSuccess, showError } = useNotifications()\n\n  const addNotification = useCallback((notification: Omit<NotificationItem, 'id' | 'timestamp'>) => {\n    const newNotification: NotificationItem = {\n      ...notification,\n      id: `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n      timestamp: Date.now(),\n      autoHide: notification.autoHide ?? true,\n      duration: notification.duration ?? 5000\n    }\n\n    setNotifications(prev => [newNotification, ...prev.slice(0, 4)]) // Keep max 5 notifications\n\n    // Auto-hide notification\n    if (newNotification.autoHide) {\n      setTimeout(() => {\n        removeNotification(newNotification.id)\n      }, newNotification.duration)\n    }\n  }, [])\n\n  const removeNotification = useCallback((id: string) => {\n    setNotifications(prev => prev.filter(n => n.id !== id))\n  }, [])\n\n  // Monitor transaction status changes\n  useEffect(() => {\n    const allTransactions = [...activeTransactions, ...completedTransactions]\n    \n    allTransactions.forEach(tx => {\n      if (processedTransactions.has(tx.id)) return\n      \n      // Mark as processed to avoid duplicate notifications\n      setProcessedTransactions(prev => new Set([...prev, tx.id]))\n      \n      // Handle different transaction statuses\n      switch (tx.status) {\n        case 'pending':\n          addNotification({\n            type: 'info',\n            title: 'Transaction Started',\n            message: `${getTransactionTypeLabel(tx.type)} transaction is being prepared...`,\n            transactionId: tx.id,\n            duration: 3000\n          })\n          break\n          \n        case 'processing':\n          addNotification({\n            type: 'info',\n            title: 'Processing Transaction',\n            message: `${getTransactionTypeLabel(tx.type)} is being processed on the blockchain...`,\n            transactionId: tx.id,\n            duration: 4000\n          })\n          break\n          \n        case 'success':\n          addNotification({\n            type: 'success',\n            title: 'Transaction Successful!',\n            message: `${getTransactionTypeLabel(tx.type)} completed successfully`,\n            transactionId: tx.id,\n            duration: 6000\n          })\n          \n          // Also use the global notification system\n          showSuccess(\n            'Transaction Complete',\n            `Your ${getTransactionTypeLabel(tx.type).toLowerCase()} has been processed successfully!`\n          )\n          break\n          \n        case 'failed':\n          addNotification({\n            type: 'error',\n            title: 'Transaction Failed',\n            message: tx.error || `${getTransactionTypeLabel(tx.type)} failed to process`,\n            transactionId: tx.id,\n            autoHide: false // Keep error notifications visible\n          })\n          \n          // Also use the global notification system\n          showError(\n            'Transaction Failed',\n            tx.error || 'Your transaction failed to process. Please try again.'\n          )\n          break\n          \n        case 'cancelled':\n          addNotification({\n            type: 'warning',\n            title: 'Transaction Cancelled',\n            message: `${getTransactionTypeLabel(tx.type)} was cancelled`,\n            transactionId: tx.id,\n            duration: 4000\n          })\n          break\n      }\n    })\n  }, [activeTransactions, completedTransactions, processedTransactions, addNotification, showSuccess, showError])\n\n  const getTransactionTypeLabel = (type: string): string => {\n    switch (type) {\n      case 'nft_purchase':\n        return 'NFT Purchase'\n      case 'nft_transfer':\n        return 'NFT Transfer'\n      case 'token_transfer':\n        return 'Token Transfer'\n      case 'nft_listing':\n        return 'NFT Listing'\n      case 'listing_cancel':\n        return 'Cancel Listing'\n      case 'crafting':\n        return 'Crafting'\n      case 'blend':\n        return 'Blend'\n      case 'burn':\n        return 'Burn Assets'\n      case 'unpack':\n        return 'Unpack Asset'\n      case 'auction_bid':\n        return 'Auction Bid'\n      case 'tokenize_wax':\n        return 'Tokenize WAX'\n      default:\n        return type.replace('_', ' ').replace(/\\b\\w/g, l => l.toUpperCase())\n    }\n  }\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case 'success':\n        return '✅'\n      case 'error':\n        return '❌'\n      case 'warning':\n        return '⚠️'\n      case 'info':\n      default:\n        return 'ℹ️'\n    }\n  }\n\n  const formatTimeAgo = (timestamp: number): string => {\n    const now = Date.now()\n    const diffMs = now - timestamp\n    const diffSecs = Math.floor(diffMs / 1000)\n    const diffMins = Math.floor(diffSecs / 60)\n    \n    if (diffSecs < 60) return 'Just now'\n    if (diffMins < 60) return `${diffMins}m ago`\n    \n    const diffHours = Math.floor(diffMins / 60)\n    if (diffHours < 24) return `${diffHours}h ago`\n    \n    return new Date(timestamp).toLocaleDateString()\n  }\n\n  if (notifications.length === 0) return null\n\n  return (\n    <div className=\"transaction-notifications\">\n      {notifications.map(notification => (\n        <div \n          key={notification.id}\n          className={`notification notification-${notification.type}`}\n        >\n          <div className=\"notification-content\">\n            <div className=\"notification-header\">\n              <span className=\"notification-icon\">\n                {getNotificationIcon(notification.type)}\n              </span>\n              <span className=\"notification-title\">\n                {notification.title}\n              </span>\n              <span className=\"notification-time\">\n                {formatTimeAgo(notification.timestamp)}\n              </span>\n              <button \n                className=\"notification-close\"\n                onClick={() => removeNotification(notification.id)}\n              >\n                ×\n              </button>\n            </div>\n            \n            <div className=\"notification-message\">\n              {notification.message}\n            </div>\n            \n            {notification.transactionId && (\n              <div className=\"notification-transaction-id\">\n                ID: {notification.transactionId.slice(0, 8)}...{notification.transactionId.slice(-8)}\n              </div>\n            )}\n          </div>\n          \n          {notification.autoHide && (\n            <div \n              className=\"notification-progress\"\n              style={{\n                animationDuration: `${notification.duration}ms`\n              }}\n            />\n          )}\n        </div>\n      ))}\n    </div>\n  )\n}\n\nexport default TransactionNotifications","import { useState, useCallback, useRef } from 'react'\nimport { useWallet } from './useWallet'\nimport { log } from '../services/loggingService'\nimport type { TransactionData, TransactionType } from '../services/transactionService'\n\ninterface TransactionManagerState {\n  activeTransactions: Map<string, TransactionData>\n  completedTransactions: TransactionData[]\n  isProcessing: boolean\n}\n\ninterface UseTransactionManagerReturn {\n  // State\n  activeTransactions: TransactionData[]\n  completedTransactions: TransactionData[]\n  isProcessing: boolean\n  \n  // Actions\n  startTransaction: (type: TransactionType, data: any) => Promise<string | null>\n  getTransaction: (id: string) => TransactionData | null\n  cancelTransaction: (id: string) => Promise<boolean>\n  clearCompleted: () => void\n  \n  // Status tracking\n  getActiveCount: () => number\n  getCompletedCount: () => number\n  hasFailedTransactions: () => boolean\n}\n\nexport const useTransactionManager = (): UseTransactionManagerReturn => {\n  const [state, setState] = useState<TransactionManagerState>({\n    activeTransactions: new Map(),\n    completedTransactions: [],\n    isProcessing: false\n  })\n  \n  const { \n    executeTransaction, \n    getTransaction: getWalletTransaction,\n    cancelTransaction: cancelWalletTransaction \n  } = useWallet()\n  \n  const pollIntervals = useRef<Map<string, NodeJS.Timeout>>(new Map())\n\n  const updateTransaction = useCallback((id: string, updates: Partial<TransactionData>) => {\n    setState(prev => {\n      const newActiveTransactions = new Map(prev.activeTransactions)\n      const existing = newActiveTransactions.get(id)\n      \n      if (existing) {\n        const updated = { ...existing, ...updates }\n        \n        // If transaction is completed, move to completed list\n        if (updated.status === 'success' || updated.status === 'failed' || updated.status === 'cancelled') {\n          newActiveTransactions.delete(id)\n          \n          // Clear polling interval\n          const interval = pollIntervals.current.get(id)\n          if (interval) {\n            clearInterval(interval)\n            pollIntervals.current.delete(id)\n          }\n          \n          return {\n            ...prev,\n            activeTransactions: newActiveTransactions,\n            completedTransactions: [updated, ...prev.completedTransactions.slice(0, 49)], // Keep last 50\n            isProcessing: newActiveTransactions.size > 0\n          }\n        } else {\n          newActiveTransactions.set(id, updated)\n          return {\n            ...prev,\n            activeTransactions: newActiveTransactions\n          }\n        }\n      }\n      \n      return prev\n    })\n  }, [])\n\n  const pollTransactionStatus = useCallback(async (id: string) => {\n    try {\n      if (!getWalletTransaction) {\n        log.warn('getWalletTransaction not available')\n        return\n      }\n      const txData = await getWalletTransaction(id)\n      if (txData) {\n        updateTransaction(id, txData)\n      }\n    } catch (error) {\n      log.error(`Error polling transaction ${id}:`, 'useTransactionManager.pollTransactionStatus', error as Error)\n      updateTransaction(id, { \n        status: 'failed', \n        error: 'Failed to check transaction status' \n      })\n    }\n  }, [getWalletTransaction, updateTransaction])\n\n  const startPolling = useCallback((id: string) => {\n    // Clear existing interval if any\n    const existingInterval = pollIntervals.current.get(id)\n    if (existingInterval) {\n      clearInterval(existingInterval)\n    }\n    \n    // Start new polling interval\n    const interval = setInterval(() => {\n      pollTransactionStatus(id)\n    }, 2000) // Poll every 2 seconds\n    \n    pollIntervals.current.set(id, interval)\n    \n    // Auto-cleanup after 5 minutes\n    setTimeout(() => {\n      const currentInterval = pollIntervals.current.get(id)\n      if (currentInterval === interval) {\n        clearInterval(interval)\n        pollIntervals.current.delete(id)\n        updateTransaction(id, { \n          status: 'failed', \n          error: 'Transaction timeout - please check manually' \n        })\n      }\n    }, 5 * 60 * 1000)\n  }, [pollTransactionStatus, updateTransaction])\n\n  const startTransaction = useCallback(async (type: TransactionType, data: any): Promise<string | null> => {\n    try {\n      setState(prev => ({ ...prev, isProcessing: true }))\n      \n      if (!executeTransaction) {\n        throw new Error('executeTransaction not available - wallet not connected')\n      }\n      \n      const transactionId = await executeTransaction(type, data)\n      \n      if (transactionId) {\n        // Add to active transactions\n        const newTransaction: TransactionData = {\n          id: transactionId,\n          type,\n          status: 'pending',\n          timestamp: Date.now(),\n          account: '', // Will be set by the transaction service\n          actions: [], // Will be populated by the transaction service\n          metadata: data // Store the data as metadata\n        }\n        \n        setState(prev => {\n          const newActiveTransactions = new Map(prev.activeTransactions)\n          newActiveTransactions.set(transactionId, newTransaction)\n          \n          return {\n            ...prev,\n            activeTransactions: newActiveTransactions\n          }\n        })\n        \n        // Start polling for status updates\n        startPolling(transactionId)\n        \n        return transactionId\n      }\n      \n      return null\n    } catch (error) {\n      log.error('Error starting transaction:', 'useTransactionManager.startTransaction', error as Error)\n      setState(prev => ({ ...prev, isProcessing: false }))\n      throw error\n    }\n  }, [executeTransaction, startPolling])\n\n  const getTransaction = useCallback((id: string): TransactionData | null => {\n    // Check active transactions first\n    const active = state.activeTransactions.get(id)\n    if (active) return active\n    \n    // Check completed transactions\n    const completed = state.completedTransactions.find(tx => tx.id === id)\n    return completed || null\n  }, [state.activeTransactions, state.completedTransactions])\n\n  const cancelTransaction = useCallback(async (id: string): Promise<boolean> => {\n    try {\n      if (!cancelWalletTransaction) {\n        log.warn('cancelWalletTransaction not available')\n        return false\n      }\n      \n      const success = await cancelWalletTransaction(id)\n      \n      if (success) {\n        updateTransaction(id, { \n          status: 'cancelled',\n          error: 'Transaction cancelled by user'\n        })\n      }\n      \n      return success\n    } catch (error) {\n      log.error('Error cancelling transaction:', 'useTransactionManager.cancelTransaction', error as Error)\n      return false\n    }\n  }, [cancelWalletTransaction, updateTransaction])\n\n  const clearCompleted = useCallback(() => {\n    setState(prev => ({\n      ...prev,\n      completedTransactions: []\n    }))\n  }, [])\n\n  const getActiveCount = useCallback(() => {\n    return state.activeTransactions.size\n  }, [state.activeTransactions.size])\n\n  const getCompletedCount = useCallback(() => {\n    return state.completedTransactions.length\n  }, [state.completedTransactions.length])\n\n  const hasFailedTransactions = useCallback(() => {\n    return state.completedTransactions.some(tx => tx.status === 'failed')\n  }, [state.completedTransactions])\n\n  return {\n    // State\n    activeTransactions: Array.from(state.activeTransactions.values()),\n    completedTransactions: state.completedTransactions,\n    isProcessing: state.isProcessing,\n    \n    // Actions\n    startTransaction,\n    getTransaction,\n    cancelTransaction,\n    clearCompleted,\n    \n    // Status tracking\n    getActiveCount,\n    getCompletedCount,\n    hasFailedTransactions\n  }\n}\n\nexport default useTransactionManager","import { StrictMode } from 'react'\nimport { createRoot } from 'react-dom/client'\nimport './index.css'\nimport App from './App.tsx'\n\ncreateRoot(document.getElementById('root')!).render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n)\n"],"file":"assets/js/index-B-aLfoiO.js"}