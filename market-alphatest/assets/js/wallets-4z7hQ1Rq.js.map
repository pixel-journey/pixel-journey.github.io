{"version":3,"mappings":";AAoDA,SAASA,EAAWC,EAAYC,EAAQC,EAAKC,GACzC,IAA2HC,EAAvHC,EAAIC,UAAUC,OAAQC,EAAIH,EAAI,EAAIJ,EAA+EE,EACrH,GAAuB,iBAAZM,SAAoD,mBAArBA,QAAQC,SAAyBF,EAAIC,QAAQC,SAASV,EAAYC,EAAQC,EAAKC,QACpH,QAASQ,EAAIX,EAAWO,OAAS,EAAGI,GAAK,EAAGA,KAASP,EAAIJ,EAAWW,MAAIH,GAAKH,EAAI,EAAID,EAAEI,GAAKH,EAAI,EAAID,EAAEH,EAAQC,EAAKM,GAAKJ,EAAEH,EAAQC,KAASM,GAChJ,OAAOH,EAAI,GAAKG,GAAKI,OAAOC,eAAeZ,EAAQC,EAAKM,GAAIA,CAChE,CAiDAM,eAAeC,EAAqBC,EAASC,EAAYC,EAAWC,GAC3DA,IACDA,EAAQC,GAAOC,UAEnB,MAAMC,EAASL,EAAWM,aAAaL,GACjCM,EA5BV,SAAkBL,EAAOG,GACrB,OAAOG,GAAYC,KAAKC,GAAWC,OAAO,CAAEC,OAAQV,IAASW,UAAUR,EAAOS,OAClF,CA0BeC,CAASb,EAAOG,GACrBW,QApCVnB,eAAkCQ,EAAQH,GACtC,MAAMjB,EAAMuB,GAAYC,KAAKC,GAAWC,OAAO,CAAEC,OAAQV,IAASW,UAAUR,EAAOS,QACnF,aAAaG,OAAOC,OAAOC,UAAU,MAAOlC,EAAI6B,MAAMM,MAAM,EAAG,IAAK,CAAEC,KAAM,YAAa,EAAO,CAC5F,UACA,WAER,CA8B+BC,CAAmBjB,EAAQH,GAChDqB,QA3BV1B,eAA8BU,EAAIS,EAAcjB,GAC5C,OAAOyB,GAAMC,WAAWR,OAAOC,OAAOQ,QAAQ,CAAEL,KAAM,UAAWd,GAAIA,EAAGO,MAAMM,MAAM,GAAI,KAAOJ,EAAcQ,GAAMC,KAAK1B,EAAS,QAAQe,OAC7I,CAyB6Ba,CAAepB,EAAIS,EAAcjB,GAEpD6B,EADe,IAAIC,SAASC,GAAYrB,KAAKF,EAAGO,OAAOA,MAAMiB,QACrCC,UAAU,GAAG,GAC3C,OAAO,IAAIC,GAAc,CACrBR,KAAMzB,EAAWkC,WACjBhC,QACAqB,aACAK,YAER,CCpEA,SAAS9C,EAAWC,EAAYC,EAAQC,EAAKC,GACzC,IAA2HC,EAAvHC,EAAIC,UAAUC,OAAQC,EAAIH,EAAI,EAAIJ,EAA+EE,EACrH,GAAuB,iBAAZM,SAAoD,mBAArBA,QAAQC,SAAyBF,EAAIC,QAAQC,SAASV,EAAYC,EAAQC,EAAKC,QACpH,QAASQ,EAAIX,EAAWO,OAAS,EAAGI,GAAK,EAAGA,KAASP,EAAIJ,EAAWW,MAAIH,GAAKH,EAAI,EAAID,EAAEI,GAAKH,EAAI,EAAID,EAAEH,EAAQC,EAAKM,GAAKJ,EAAEH,EAAQC,KAASM,GAChJ,OAAOH,EAAI,GAAKG,GAAKI,OAAOC,eAAeZ,EAAQC,EAAKM,GAAIA,CAChE,CAsEAM,eAAesC,EAAgBC,EAAcC,EAAQC,GAEjD,MAAMC,QC0FOC,ED1F0B,IAAKJ,EAAcK,UAAWJ,GAAUI,WC2FxE,IAAIC,QAAQ,CAACC,EAASC,KACzB,MAAMC,EAAW,IAAIC,GAAS,IAAKN,EAASO,aAAa,IACzD,IAAIC,EACAC,EACJ,MAAMC,EAAO,CAACC,EAAOpD,KACjBqD,aAAaJ,GACTG,EACAP,EAAOO,GAGPR,EAAQ5C,GAEZ8C,EAASQ,cAOTb,EAAQc,UACRN,EAAQO,WAAW,KACfL,EAAK,IAAIM,GAAa,YAAaP,KACpCT,EAAQc,UAEfT,EAASY,GAAG,QAAUN,IACZA,aAAiBO,GAInBT,EAAYE,EAHZD,EAAKC,KAMbN,EAASc,KAAK,UAAY5D,IACtBmD,OAAK,EAAWnD,QAlC5B,IAAiByC,EDzFb,IAAKD,EAED,MAAM,IAAIqB,MAAMrB,EAAiBsB,UAGrC,GAAyC,iBAA9BtB,EAAiBsB,SACxB,MAAM,IAAID,MAAMrB,EAAiBsB,UAGrC,MAAMC,EAAUC,KAAKC,MAAMzB,GAC3B,QAAmB,IAAfuB,EAAQG,SAAmC,IAAfH,EAAQI,SAAoC,IAAhBJ,EAAQK,IAChE,MAAM,IAAIP,MAAMtB,EAAE,kBAAmB,CAAE8B,QAAS,4CAEpD,OAAON,CACX,CAgCA,SAASO,IACL,IAAeC,EAAXD,EAAO,GACX,MAAME,EAAQ,mBACd,IAAKD,EAAK,EAAGA,EAAK,GAAIA,GAAM,EACxB,OAAQA,GACJ,KAAK,EACL,KAAK,GACL,KAAK,GACL,KAAK,GACDD,GAAQ,IACR,MACJ,KAAK,GACDA,GAAQ,IACR,MACJ,KAAK,GACDA,GAAQE,EAAuB,EAAhBC,KAAKpE,SAAiB,GACrC,MACJ,QACIiE,GAAQE,EAAuB,GAAhBC,KAAKpE,SAAiB,GAGjD,OAAOiE,CACX,CAEA,SAASI,IAEL,IAAIC,MAAqBC,IAAzB,CAGA,GAAIC,IAEA,MAAO,kBAEX,GAAIC,IAEA,MAAO,cAEX,GAAIH,KAAqBI,IAErB,MAAO,WAEX,GAAIJ,IAAmB,CAEnB,MAAMK,EAAW,iEACjB,IAAIC,EAAKC,OAAOC,SAASC,KAAKC,MAAM,KAAK,GAAK,IAC9C,QAAS1F,EAAI,EAAGA,EAAI,EAAGA,IACnBsF,GAAMD,EAASM,OAAOb,KAAKc,MAAMd,KAAKpE,SAAW2E,EAASzF,SAE9D,OAAO0F,CACX,CACA,OAAIO,KA8BG,WAAWC,KAAKC,UAAUC,WA7BtB,oCAEPH,KAoCG,MAAMC,KAAKC,UAAUC,WAnCjB,mCAEPH,MA8BG,MAAMC,KAAKC,UAAUC,YAAc,QAAQF,KAAKC,UAAUC,YA7BtD,kCAEPH,KAAeT,IACR,kCAEPS,KAAeI,IACR,wBAEPJ,KAAeK,IACR,mCAEJX,OAAOC,SAASC,IAxCvB,CAyCJ,CACA,SAAST,IACL,MAAO,kBAAkBc,KAAKC,UAAUC,UAC5C,CACA,SAASd,IACL,MAAO,QAAQY,KAAKC,UAAUC,UAClC,CACA,SAASE,IACL,MAAO,0BAA0BJ,KAAKC,UAAUC,UACpD,CAIA,SAASb,IACL,MAAO,QAAQW,KAAKC,UAAUC,UAClC,CAOA,SAASZ,IACL,OAAOW,UAAiB,OAA2C,mBAA/BA,UAAiB,MAAEX,OAC3D,CACA,SAASS,IACL,MAAO,UAAUC,KAAKC,UAAUC,UACpC,CACA,SAASf,IAGL,QAASM,OAAOY,kBACpB,CACA,SAASF,IACL,MAAQ,KAAKH,KAAKC,UAAUC,YACvB,UAAUF,KAAKC,UAAUC,YAAcf,GAChD,CA8EA,SAASmB,IAEL,IAAIC,EAAQ,+BAIZ,MAHyB,oBAAdN,YACPM,GAAS,IAAMN,UAAUC,WAEtBK,CACX,CACA,SAASC,EAAgBC,GACrB,MAAMC,QAAEA,EAAAC,QAASA,GAAYF,EAC7B,MAAO,CACHG,IAAK,GAAGF,KAAWC,IACnBE,YAAY,EAEpB,CACA,SAASC,EAAuBC,GAC5B,MAAO,CACHL,QAASK,EACTJ,QAAS9B,IAEjB,CAqBA,SAASmC,EAA8B1C,GACnC,MAAM2C,EAAa,GACnB,IAAIC,EAAQ,EACRC,EAAM7C,EAAQ6C,IAClB,KAAOA,GACHF,EAAWG,KAAKC,OAAOF,IACvBA,EAAM7C,EAAQ,MAAM4C,KACpBA,IAGJ,MAAO,IAAI,IAAII,IAAIL,IAAaM,IAAKC,GAAMC,GAAUxF,KAAKuF,GAC9D,CE1ZA,SAASE,EAAG1E,EAAS2E,EAAKC,GACtB,GAAIC,GAAOC,aAAeH,IAAQ3E,EAC9B,OAAO6E,GAAOC,aAGlB,MAAMC,GADN/E,EAAUA,GAAW,IACApC,QAAUoC,EAAQgF,SCN5B,WACX,IAAKC,GAAiB,CAClB,GAAsB,oBAAXxG,SAA2BA,OAAOwG,gBACzC,MAAM,IAAI7D,MAAM,4GAEpB6D,GAAkBxG,OAAOwG,gBAAgBC,KAAKzG,OAClD,CACA,OAAOwG,GAAgBE,GAC3B,CDFsDH,GAClD,GAAID,EAAKjI,OAAS,GACd,MAAM,IAAIsE,MAAM,qCAIpB,GAFA2D,EAAK,GAAgB,GAAVA,EAAK,GAAa,GAC7BA,EAAK,GAAgB,GAAVA,EAAK,GAAa,IACzBJ,EAAK,CAEL,IADAC,EAASA,GAAU,GACN,GAAKA,EAAS,GAAKD,EAAI7H,OAChC,MAAM,IAAIsI,WAAW,mBAAmBR,KAAUA,EAAS,8BAE/D,QAAS1H,EAAI,EAAGA,EAAI,KAAMA,EACtByH,EAAIC,EAAS1H,GAAK6H,EAAK7H,GAE3B,OAAOyH,CACX,CACA,OEnBG,SAAyBU,EAAKT,EAAS,GAC1C,OAAQU,GAAUD,EAAIT,EAAS,IAC3BU,GAAUD,EAAIT,EAAS,IACvBU,GAAUD,EAAIT,EAAS,IACvBU,GAAUD,EAAIT,EAAS,IACvB,IACAU,GAAUD,EAAIT,EAAS,IACvBU,GAAUD,EAAIT,EAAS,IACvB,IACAU,GAAUD,EAAIT,EAAS,IACvBU,GAAUD,EAAIT,EAAS,IACvB,IACAU,GAAUD,EAAIT,EAAS,IACvBU,GAAUD,EAAIT,EAAS,IACvB,IACAU,GAAUD,EAAIT,EAAS,KACvBU,GAAUD,EAAIT,EAAS,KACvBU,GAAUD,EAAIT,EAAS,KACvBU,GAAUD,EAAIT,EAAS,KACvBU,GAAUD,EAAIT,EAAS,KACvBU,GAAUD,EAAIT,EAAS,MAAMW,aACrC,CFFWC,CAAgBT,EAC3B,CGoJA,SAASU,EAAoBC,GACzB,MAAMC,EAAkB,GAgBxB,GAfID,EAAeE,UACfD,EAAgBE,QAtKxB,SAAsBC,GAClB,IAAKA,EACD,OAEJ,MAAMC,YAAEA,EAAAC,WAAaA,EAAAC,QAAYA,GAAYH,EAC7C,MAAO,CACHI,GAAI,CACAC,OAAQJ,EACRK,OAAQJ,EACRC,QAASA,GAAWI,EAAoBJ,IAGpD,CA0JkCK,CAAaZ,EAAeE,UAEtDF,EAAea,OACfZ,EAAgBa,KA5JxB,SAAmBC,GACf,IAAKA,EACD,OAEJ,MAAMC,aAAEA,EAAAC,oBAAcA,EAAAC,iBAAqBA,EAAAC,gBAAkBA,EAAAC,kBAAiBA,EAAAC,YAAmBA,EAAAC,mCAAaA,EAAAC,MAAoCA,EAAAC,oBAAOA,EAAAC,6BAAqBA,EAAAC,OAA8BA,GAAYX,EAClNY,EAAa,CACfC,QAAS,CACLC,WAAYb,EACZc,iBAAkBb,EAClBS,WAoDR,OAjDIR,IACAS,EAAWC,QAAU,IACdD,EAAWC,QACdG,eAAgBb,IAGpBC,IACAQ,EAAWC,QAAQI,eAAiB,CAChCC,iBAAkBd,EAAgBe,kBAClCC,eAAgBhB,EAAgBiB,gBAChCC,iBAAkBlB,EAAgBmB,kBAClCC,yBAA0BpB,EAAgBqB,gBAC1CC,UAAWtB,EAAgBuB,YAAc,IAG7CtB,IACAO,EAAWC,QAAQe,IAAM,CACrBC,OAAQC,EAAazB,GACrB0B,WAAYzB,GAAa0B,SAAS,OAClCC,YAAa3B,GAAa0B,SAAS,UAGvCzB,IACAK,EAAWC,QAAQqB,iBAAmB3B,GAEtCC,IACAI,EAAWC,QAAQsB,UAAY,CAC3B3B,MAAO,CACH4B,OAAQ5B,EAAM4B,OACdC,eAAgB7B,EAAM8B,qBACtBC,gBAAiB/B,EAAMgC,sBACvBC,aAAsC,UAAxBjC,EAAMkC,cAA4B,QAAU,OAC1DC,OAAQnC,EAAMmC,OACdC,UAAWC,EAAkBrC,EAAMsC,uBAI3CrC,IACAG,EAAWC,QAAQsB,UAAY,IACxBvB,EAAWC,QAAQsB,UACtBY,MAAOtC,EAAoBuB,SAAS,SACpCgB,MAAOvC,EAAoBuB,SAAS,gBAEpCiB,SAAUxC,EAAoBuB,SAAS,cAG3CtB,IACAE,EAAWC,QAAQqC,eAAiBxC,EAA6ByC,OAAO,CAACC,EAAKC,SAAeD,EAAKC,CAACA,GAAO,CAAEC,UAAU,KAAW,KAE9H1C,CACX,CA8F+B2C,CAAUtE,EAAea,OAEhDb,EAAeuE,YACftE,EAAgBuE,UAhGxB,SAAwBC,GACpB,IAAKA,GAAmCC,gBACpC,OAEJ,MAAMA,gBAAEA,GAAoBD,EAC5B,MAAO,CACHE,SAAU,CACNC,MAAOF,EAAgBG,OACvBnE,OAAQgE,EAAgBpE,YAGpC,CAqFoCwE,CAAe9E,EAAeuE,YAE1DvE,EAAe+E,MACf9E,EAAgB+E,IAvFxB,SAAkBP,GACd,IAAKA,EACD,OAEJ,MAAMnE,WAAEA,EAAA2E,qBAAYA,EAAAC,KAAsBA,EAAAC,eAAMA,GAAmBV,EACnE,MAAO,CACHW,gBAAiB,CACb1E,OAAQJ,EACR+E,cAAeF,EACfG,oBAAqBL,EACrBC,QAGZ,CA0E8BK,CAASvF,EAAe+E,MAE9C/E,EAAewF,OACfvF,EAAgBwF,IA5ExB,SAAmBC,GACf,IAAKA,EACD,OAEJ,MAAMpF,WAAEA,EAAAqF,2BAAYA,EAAAzH,IAA4BA,EAAA0H,QAAKA,EAAAC,oBAASA,GAAyBH,EAQvF,MAAO,CACHI,QARY,CACZC,SAAU7H,EACV8H,gBAAiBC,EAAmBN,GACpCjF,OAAQJ,EACR4F,OAAQN,EACRO,mBAAoBN,GAK5B,CA6D8BO,CAAUpG,EAAewF,OAE/CxF,EAAeqG,OAAQ,CACvB,MAAMC,EA/Dd,SAAqBC,GACjB,IAAKA,GAAgCC,OACjC,OAEJ,MAAMtI,IAAEA,EAAAoC,WAAKA,EAAAsF,QAAYA,EAAAD,2BAASA,GAA+BY,EAA+BC,OAOhG,MAAO,CACHC,OAPW,CACXV,SAAU7H,EACV8H,gBAAiBC,EAAmBN,GACpCjF,OAAQJ,EACR4F,OAAQN,GAKhB,CAiD6Bc,CAAY1G,EAAeqG,QAC5CC,GAAgB,WAAYA,IAC5BrG,EAAgBwF,IAAM,IAAKxF,EAAgBwF,OAAQa,GAE3D,CAIA,OAHItG,EAAe2G,gBACf1G,EAAgB2G,cAtDxB,SAA4BC,GACxB,IAAKA,EACD,OAEJ,MAAMvG,WAAEA,EAAAwG,SAAYA,EAAAC,uBAAUA,GAA2BF,EACnDG,EAAoBF,EAAS/D,SAAS,oBACtCkE,EAAsBH,EAAS/D,SAAS,SAAW+D,EAAS/D,SAAS,OAC3E,IAAMiE,IAAqBC,EACvB,OAGJ,MAAMC,EAAsB,GAiB5B,OAhBIF,IACAE,EAAoBC,eAAiB,CACjCxC,SAAU,CACNC,MAAOmC,EACPrG,OAAQJ,KAIhB2G,IACAC,EAAoBE,iBAAmB,CACnCzC,SAAU,CACNC,MAAOmC,EACPrG,OAAQJ,KAIb4G,CACX,CAyBwCG,CAAmBrH,EAAe2G,gBAE/D1G,CACX,CAQA,SAASgG,EAAmBqB,GACxB,OAAOC,GAAcD,EACzB,CAOA,SAAS1D,EAAkBD,EAAY,IACnC,OAAOA,EAAUO,OAAO,CAACsD,EAAgBC,UACL,IAA5BC,GAAcD,IACdD,EAAe9I,KAAKgJ,GAAcD,IAE/BD,GACR,GACP,CACA,SAAS3E,EAAa8E,GAClB,MAAyB,aAArBA,EACO,WACc,aAArBA,EACO,KACJ,KACX,CACA,SAAShH,EAAoBJ,GACzB,MAAMqH,EAAgB,GAmBtB,OAlBArH,EAAQsH,QAAQ,EAAG1O,OAAMkH,YAAayH,EAAYxH,WAAYI,EAAQqH,YAClE,GAAI5O,KAAQyO,EACR,MAAM,IAAIlM,MAAM,kCAAkCvC,2BAEtD,MAAM6O,EAAiBD,EACjBtQ,OAAOwQ,QAAQF,GAAO7D,OAAO,CAACC,GAAMpN,EAAKmR,WACzB,IAAVA,IACA/D,EAAIpN,GAAOmR,GAER/D,GACR,SACD,EACNyD,EAAczO,GAAQ,CAClB2O,aACApH,SACAqH,MAAOC,KAGRJ,CACX,CCtPO,SAASO,EAAgB3C,GAE5B,OAAIA,aAAgB4C,WACT5C,EACS,iBAATA,EACA6C,GAAS7C,GAEhB8C,YAAYC,OAAO/C,GACZ,IAAI4C,WAAW5C,EAAK3L,OAAQ2L,EAAKgD,WAAYhD,EAAKiD,WAAaL,WAAWM,mBAE9E,IAAIN,WAAW5C,EAC1B,CCwCA,SAASmD,EAAaC,EAAWC,GACzBC,KAAmBF,GAAcG,IACjC1N,WAAW,KAVfyN,QAAiB,EAYTC,IAAiB,EACjB1N,WAAW2N,GAnDO,MAoDnBH,EAEX,CClEO,SAASI,EAAWf,GACvB,MAAwB,mBAAVA,CAClB,CCFO,SAASgB,EAAUvJ,EAAKwJ,GAC3B,GAAIxJ,EAAK,CACL,IAAInB,EAAQmB,EAAIyJ,QAAQD,GACxB,GAAK3K,GAASmB,EAAI0J,OAAO7K,EAAO,EACpC,CACJ,CC6HO,SAAS8K,EAAepB,GAC3B,OAAQA,aAAiBqB,IACpBrB,GAAS,WAAYA,GAASe,EAAWf,EAAMsB,SAAWP,EAAWf,EAAMuB,MAAQR,EAAWf,EAAMwB,YAC7G,CACA,SAASC,EAAcC,GACfX,EAAWW,GACXA,IAGAA,EAAUF,aAElB,CC3IO,SAASG,EAAqBC,GACjCC,GAA2B,WAMnB,MAAMD,CAEd,EACJ,CCZO,SAASE,IAAS,CCkKzB,SAASC,EAAqBhP,GAKtB4O,EAAqB5O,EAE7B,CCzKO,SAASiP,EAASC,GACrB,OAAOA,CACX,CCyFA,SAASC,EAAeC,GACpB,IAAIC,EACJ,OAAgG,QAAxFA,EAAKD,QAAiDA,EAAcE,UAAmC,IAAPD,EAAgBA,EAAK9P,OACjI,CAIA,SAASgQ,EAAatC,GAClB,OAAQA,GAASA,aAAiBuC,IAJtC,SAAoBvC,GAChB,OAAOA,GAASe,EAAWf,EAAMwC,OAASzB,EAAWf,EAAMjN,QAAUgO,EAAWf,EAAMyC,SAC1F,CAEsDC,CAAW1C,IAAUoB,EAAepB,EAC1F,CChGO,SAAS2C,EAAQC,GACpB,OAAO,SAAUC,GACb,GALD,SAAiBA,GACpB,OAAO9B,EAAW8B,aAAuC,EAASA,EAAOC,KAC7E,CAGYC,CAAQF,GACR,OAAOA,EAAOC,KAAK,SAAUE,GACzB,IACI,OAAOJ,EAAKI,EAAcC,KAC9B,OACOrB,GACHqB,KAAKlQ,MAAM6O,EACf,CACJ,GAEJ,MAAM,IAAIsB,UAAU,yCACxB,CACJ,CChBO,SAASC,EAAyBC,EAAaC,EAAQC,EAAYC,EAASC,GAC/E,OAAO,IAAIC,GAAmBL,EAAaC,EAAQC,EAAYC,EAASC,EAC5E,CCHO,SAASE,EAAU1D,GACtB,OAAOe,EAAWf,aAAqC,EAASA,EAAM2D,KAC1E,CCDO,SAASC,EAAoBC,GAChC,OAAO9C,EAAW8C,EAAMC,IAC5B,CCHO,SAASC,EAAgBC,GAC5B,OAAOC,OAAOC,eAAiBnD,EAAWiD,aAAiC,EAASA,EAAIC,OAAOC,eACnG,CCHO,SAASC,EAAiCN,GAC7C,OAAO,IAAIX,UAAU,iBAA6B,OAAVW,GAAmC,iBAAVA,EAAqB,oBAAsB,IAAMA,EAAQ,KAAO,2HACrI,CCAO,SAASO,EAAWP,GACvB,OAAO9C,EAAW8C,aAAqC,EAASA,EAAMQ,IAC1E,CCFO,SAASC,EAAmCC,GAC/C,OAAOC,GAAiBvB,KAAMhU,UAAW,WACrC,IAAIwV,EAAQrC,EAAIpC,EAChB,OAAO0E,GAAYzB,KAAM,SAAU0B,GAC/B,OAAQA,EAAGC,OACP,KAAK,EACDH,EAASF,EAAeM,YACxBF,EAAGC,MAAQ,EACf,KAAK,EACDD,EAAGG,KAAKtO,KAAK,CAAC,EAAC,CAAI,EAAG,KACtBmO,EAAGC,MAAQ,EACf,KAAK,EAED,MAAO,CAAC,EAAGG,GAAQN,EAAOO,SAC9B,KAAK,EAED,OADA5C,EAAKuC,EAAGM,OAAQjF,EAAQoC,EAAGpC,MAAcoC,EAAGtP,KAErC,CAAC,EAAGiS,QAAQ,IADD,CAAC,EAAG,GAE1B,KAAK,EAAG,MAAO,CAAC,EAAGJ,EAAGM,QACtB,KAAK,EAAG,MAAO,CAAC,EAAGF,GAAQ/E,IAC3B,KAAK,EAAG,MAAO,CAAC,EAAG2E,EAAGM,QACtB,KAAK,EAED,OADAN,EAAGM,OACI,CAAC,EAAG,GACf,KAAK,EAAG,MAAO,CAAC,EAAG,IACnB,KAAK,EAED,OADAR,EAAOS,cACA,CAAC,GACZ,KAAK,GAAI,MAAO,CAAC,GAEzB,EACJ,EACJ,CACO,SAASC,EAAqBnB,GACjC,OAAOjD,EAAWiD,aAAiC,EAASA,EAAIa,UACpE,CCzBO,SAASO,EAAUvB,GACtB,GAAIA,aAAiBwB,GACjB,OAAOxB,EAEX,GAAa,MAATA,EAAe,CACf,GAAID,EAAoBC,GACpB,OAoB0BG,EApBGH,EAqB9B,IAAIwB,GAAW,SAAUC,GAC5B,IAAIC,EAAMvB,EAAIF,MACd,GAAI/C,EAAWwE,EAAIC,WACf,OAAOD,EAAIC,UAAUF,GAEzB,MAAM,IAAIpC,UAAU,iEACxB,GAzBI,GAAIuC,GAAY5B,GACZ,OA0BkBnT,EA1BGmT,EA2BtB,IAAIwB,GAAW,SAAUC,GAC5B,QAAShW,EAAI,EAAGA,EAAIoB,EAAMxB,SAAWoW,EAAWI,OAAQpW,IACpDgW,EAAW9C,KAAK9R,EAAMpB,IAE1BgW,EAAW7C,UACf,GA9BI,GAAIiB,EAAUG,GACV,OA+BgB8B,EA/BG9B,EAgCpB,IAAIwB,GAAW,SAAUC,GAC5BK,EACKhC,KAAK,SAAU3D,GACXsF,EAAWI,SACZJ,EAAW9C,KAAKxC,GAChBsF,EAAW7C,WAEnB,EAAG,SAAUb,GAAO,OAAO0D,EAAWvS,MAAM6O,EAAM,GAC7C+B,KAAK,KAAMhC,EACpB,GAvCI,GAAIoC,EAAgBF,GAChB,OAAO+B,EAAkB/B,GAE7B,GAAIO,EAAWP,GACX,OAqCiBgC,EArCGhC,EAsCrB,IAAIwB,GAAW,SAAUC,GAC5B,IAAIQ,EAAK1D,EACT,IACI,QAAS2D,EAAaC,GAASH,GAAWI,EAAeF,EAAWvD,QAASyD,EAAanT,KAAMmT,EAAeF,EAAWvD,OAAQ,CAC9H,IAAIxC,EAAQiG,EAAajG,MAEzB,GADAsF,EAAW9C,KAAKxC,GACZsF,EAAWI,OACX,MAER,CACJ,OACOQ,GAASJ,EAAM,CAAE/S,MAAOmT,EAAS,SAEpC,IACQD,IAAiBA,EAAanT,OAASsP,EAAK2D,EAAWI,SAAS/D,EAAGgE,KAAKL,EAChF,SACU,GAAID,QAAWA,EAAI/S,KAAO,CACxC,CACAuS,EAAW7C,UACf,GAvDI,GAAI0C,EAAqBtB,GACrB,OA8DD+B,EAAkBtB,EA9DaT,GAEtC,CA2DG,IA3BsBgC,EAZDF,EAREjV,EATQsT,EAFlC,MAAMG,EAAiCN,EAC3C,CAoDO,SAAS+B,EAAkBS,GAC9B,OAAO,IAAIhB,GAAW,SAAUC,IAOpC,SAAiBe,EAAef,GAC5B,IAAIgB,EAAiBC,EACjBC,EAAKpE,EACT,OAAOqE,GAAUxD,UAAM,OAAQ,EAAQ,WACnC,IAAIjD,EAAO0G,EACX,OAAOhC,GAAYzB,KAAM,SAAU0B,GAC/B,OAAQA,EAAGC,OACP,KAAK,EACDD,EAAGG,KAAKtO,KAAK,CAAC,EAAG,EAAG,EAAG,KACvB8P,EAAkBK,GAAcN,GAChC1B,EAAGC,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,EAAG0B,EAAgB9D,QACnC,KAAK,EACD,IAAM+D,EAAoB5B,EAAGM,QAA2BnS,KAAO,MAAO,CAAC,EAAG,GAG1E,GAFAkN,EAAQuG,EAAkBvG,MAC1BsF,EAAW9C,KAAKxC,GACZsF,EAAWI,OACX,MAAO,CAAC,GAEZf,EAAGC,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,EAAG,GACnB,KAAK,EAAG,MAAO,CAAC,EAAG,IACnB,KAAK,EAGD,OAFA8B,EAAQ/B,EAAGM,OACXuB,EAAM,CAAEzT,MAAO2T,GACR,CAAC,EAAG,IACf,KAAK,EAED,OADA/B,EAAGG,KAAKtO,KAAK,CAAC,EAAC,CAAI,EAAG,KAChB+P,IAAsBA,EAAkBzT,OAASsP,EAAKkE,EAAgBH,QACrE,CAAC,EAAG/D,EAAGgE,KAAKE,IAD0E,CAAC,EAAG,GAErG,KAAK,EACD3B,EAAGM,OACHN,EAAGC,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,EAAG,IACnB,KAAK,EACD,GAAI4B,QAAWA,EAAIzT,MACnB,MAAO,CAAC,GACZ,KAAK,GAAI,MAAO,CAAC,GACjB,KAAK,GAED,OADAuS,EAAW7C,WACJ,CAAC,GAEpB,EACJ,EACJ,EAlDQmE,CAAQP,EAAef,GAAYuB,MAAM,SAAUjF,GAAO,OAAO0D,EAAWvS,MAAM6O,EAAM,EAC5F,EACJ,CC7FO,SAASkF,EAAgBC,EAAoBC,EAAWC,EAAMtG,EAAOuG,QAC1D,IAAVvG,IAAoBA,EAAQ,QACjB,IAAXuG,IAAqBA,GAAS,GAClC,IAAIC,EAAuBH,EAAUI,SAAS,WAC1CH,IACIC,EACAH,EAAmBxF,IAAI0B,KAAKmE,SAAS,KAAMzG,IAG3CsC,KAAKzB,aAEb,EAAGb,GAEH,GADAoG,EAAmBxF,IAAI4F,IAClBD,EACD,OAAOC,CAEf,CCbO,SAASE,EAAUL,EAAWrG,GAEjC,YADc,IAAVA,IAAoBA,EAAQ,GACzBgC,EAAQ,SAAUE,EAAQyC,GAC7BzC,EAAO2C,UAAUrC,EAAyBmC,EAAY,SAAUtF,GAAS,OAAO8G,EAAgBxB,EAAY0B,EAAW,WAAc,OAAO1B,EAAW9C,KAAKxC,EAAQ,EAAGW,EAAQ,EAAG,WAAc,OAAOmG,EAAgBxB,EAAY0B,EAAW,WAAc,OAAO1B,EAAW7C,UAAY,EAAG9B,EAAQ,EAAG,SAAUiB,GAAO,OAAOkF,EAAgBxB,EAAY0B,EAAW,WAAc,OAAO1B,EAAWvS,MAAM6O,EAAM,EAAGjB,EAAQ,GACla,EACJ,CCPO,SAAS2G,EAAYN,EAAWrG,GAEnC,YADc,IAAVA,IAAoBA,EAAQ,GACzBgC,EAAQ,SAAUE,EAAQyC,GAC7BA,EAAW/D,IAAIyF,EAAUI,SAAS,WAAc,OAAOvE,EAAO2C,UAAUF,EAAa,EAAG3E,GAC5F,EACJ,CCJO,SAAS4G,EAAsB1D,EAAOmD,GACzC,IAAKnD,EACD,MAAM,IAAIrQ,MAAM,2BAEpB,OAAO,IAAI6R,GAAW,SAAUC,GAC5BwB,EAAgBxB,EAAY0B,EAAW,WACnC,IAAIQ,EAAW3D,EAAMI,OAAOC,iBAC5B4C,EAAgBxB,EAAY0B,EAAW,WACnCQ,EAAShF,OAAOmB,KAAK,SAAU8D,GACvBA,EAAO3U,KACPwS,EAAW7C,WAGX6C,EAAW9C,KAAKiF,EAAOzH,MAE/B,EACJ,EAAG,GAAG,EACV,EACJ,EACJ,CCRO,SAAS0H,EAAU7D,EAAOmD,GAC7B,GAAa,MAATnD,EAAe,CACf,GAAID,EAAoBC,GACpB,OCbL,SAA4BA,EAAOmD,GACtC,OAAO5B,EAAUvB,GAAO8D,KAAKL,EAAYN,GAAYK,EAAUL,GACnE,CDWmBY,CAAmB/D,EAAOmD,GAErC,GAAIvB,GAAY5B,GACZ,OElBL,SAAuBA,EAAOmD,GACjC,OAAO,IAAI3B,GAAW,SAAUC,GAC5B,IAAIhW,EAAI,EACR,OAAO0X,EAAUI,SAAS,WAClB9X,IAAMuU,EAAM3U,OACZoW,EAAW7C,YAGX6C,EAAW9C,KAAKqB,EAAMvU,MACjBgW,EAAWI,QACZzC,KAAKmE,WAGjB,EACJ,EACJ,CFGmBS,CAAchE,EAAOmD,GAEhC,GAAItD,EAAUG,GACV,OGnBL,SAAyBA,EAAOmD,GACnC,OAAO5B,EAAUvB,GAAO8D,KAAKL,EAAYN,GAAYK,EAAUL,GACnE,CHiBmBc,CAAgBjE,EAAOmD,GAElC,GAAIjD,EAAgBF,GAChB,OAAO0D,EAAsB1D,EAAOmD,GAExC,GAAI5C,EAAWP,GACX,OIxBL,SAA0BA,EAAOmD,GACpC,OAAO,IAAI3B,GAAW,SAAUC,GAC5B,IAAIkC,EAsBJ,OArBAV,EAAgBxB,EAAY0B,EAAW,WACnCQ,EAAW3D,EAAMQ,MACjByC,EAAgBxB,EAAY0B,EAAW,WACnC,IAAI5E,EACApC,EACAlN,EACJ,IAC2BkN,GAAtBoC,EAAKoF,EAAShF,QAAmBxC,MAAOlN,EAAOsP,EAAGtP,IACvD,OACO8O,GAEH,YADA0D,EAAWvS,MAAM6O,EAErB,CACI9O,EACAwS,EAAW7C,WAGX6C,EAAW9C,KAAKxC,EAExB,EAAG,GAAG,EACV,GACO,WAAc,OAAOe,EAAWyG,aAA2C,EAASA,EAASrB,SAAWqB,EAASrB,QAAU,CACtI,EACJ,CJFmB4B,CAAiBlE,EAAOmD,GAEnC,GAAI7B,EAAqBtB,GACrB,OK7BL,SAAoCA,EAAOmD,GAC9C,OAAOO,EAAsBjD,EAAmCT,GAAQmD,EAC5E,CL2BmBgB,CAA2BnE,EAAOmD,EAEjD,CACA,MAAM7C,EAAiCN,EAC3C,CMjCO,SAASlN,EAAIsR,EAASC,GACzB,OAAOvF,EAAQ,SAAUE,EAAQyC,GAC7B,IAAIhP,EAAQ,EACZuM,EAAO2C,UAAUrC,EAAyBmC,EAAY,SAAUtF,GAC5DsF,EAAW9C,KAAKyF,EAAQ7B,KAAK8B,EAASlI,EAAO1J,KACjD,GACJ,EACJ,CCNO,SAAS6R,EAAWC,GACvB,OAAOzF,EAAQ,SAAUE,EAAQyC,GAC7B,IAEI+C,EAFAC,EAAW,KACXC,GAAY,EAEhBD,EAAWzF,EAAO2C,UAAUrC,EAAyBmC,OAAY,OAAW,EAAW,SAAU1D,GAC7FyG,EAAgBjD,EAAUgD,EAASxG,EAAKuG,EAAWC,EAAXD,CAAqBtF,KACzDyF,GACAA,EAAS9G,cACT8G,EAAW,KACXD,EAAc7C,UAAUF,IAGxBiD,GAAY,CAEpB,IACIA,IACAD,EAAS9G,cACT8G,EAAW,KACXD,EAAc7C,UAAUF,GAEhC,EACJ,CCjBA,SAASkD,GAAgBC,ECNJ,KDSjB,OAAOC,IACH,MAAM/H,EAAQ,GAAK+H,EAHF,IACC,IAE0CtU,KAAKpE,SACjE,QAAO2Q,EAAQ8H,IAAqB9H,EAE5C,CEbA,SAASgI,GAAQ/Z,GACf,QAASU,EAAI,EAAGA,EAAIL,UAAUC,OAAQI,IAAK,CACzC,IAAIuT,EAAS5T,UAAUK,GACvB,QAAST,KAAOgU,EACdjU,EAAOC,GAAOgU,EAAOhU,EAEzB,CACA,OAAOD,CACT,CCHA,SAASga,GAA0BC,GAC/B,IAAIC,GAAiB,EAKjBA,IAJCD,MAKKA,EAAclP,cAAgBkP,EAAcjP,kBAEtDmP,GAAOD,EAAgBE,GAA2BC,sBACtD,CAQA,SAASC,GAA2BL,GAEhCE,KADsBF,GAAehP,eACjBmP,GAA2BG,+BACnD,CAOA,SAASC,GAAUC,GACf,MAAMC,EAAaD,EAAMrU,MAAM,KAC/B,GAA0B,IAAtBsU,EAAWpa,OACX,MAAM,IAAIsE,MAAM,iBAEpB,IACI,MACM+V,EADoBD,EAAW,GACJE,QAAQ,KAAM,KAAKA,QAAQ,KAAM,KAC5DC,EAAUC,mBAAmBC,GAC9BC,QAAQL,GACRvU,MAAM,IACN2B,IAAIkT,GAAQ,IAAI,KAAKA,EAAKC,WAAW,GAAGC,SAAS,MAAM/Y,OAAM,MAC7DgZ,KAAK,KAEV,MAAO,CACHD,SAAU,IAAMV,EAChB3V,QAHYC,KAAKC,MAAM6V,GAK/B,OACO7H,GACH,MAAM,IAAIpO,MAAM,wBACpB,CACJ,CCpDe,SAAS4D,KAEtB,IAAKC,KAEHA,GAAoC,oBAAXxG,QAA0BA,OAAOwG,iBAAmBxG,OAAOwG,gBAAgBC,KAAKzG,SAEpGwG,IACH,MAAM,IAAI7D,MAAM,4GAIpB,OAAO6D,GAAgBE,GACzB,CCyCA,SAASkJ,GAAaC,EAAWC,GACzBC,KAAmBF,GAAcG,IACjC1N,WAAW,KAVfyN,QAAiB,EAYTC,IAAiB,EACjB1N,WAAW2N,GAnDO,MAoDnBH,EAEX,CChEA,SAASsJ,IAAeC,UAAEA,EAAAC,WAAWA,EAAAC,UAAYA,EAAY,MAEzD,OADoBC,KAAKC,MACJH,EAAaC,EAAYF,CAClD,CCWA,SAASK,GAA4B1Q,GACjC,IAAKA,IAAmBA,EAAegB,SAAS,KAC5C,MAAM,IAAI2P,GAAU,CAChBvZ,KAAM,iCACNtB,QAAS,qCACT8a,mBAAoB,6DAG5B,OAAO5Q,EAAe7E,MAAM,KAAK,EACrC,CCkBA,SAAS0V,GAAiCC,GACtC,GA+BJ,SAA8CA,GAC1C,OAAOC,GAAgBD,KAAYA,GAAQE,YAC/C,CAjCQC,CAAqCH,GACrC,MAAMI,GAEV,IAyBJ,SAAyCJ,GACrC,OAAOC,GAAgBD,IAAWA,GAAQE,YAC9C,CA3BSG,CAAgCL,GACjC,MAAMM,EAEd,CAmBA,SAASL,GAAgBD,GACrB,OAAOA,GAAQO,aAAeP,GAAQQ,OAC1C,CClEA,SAASC,GAAmBrY,GACxB,IAAKA,GACc,UAAfA,EAAM9B,MACN8B,aAAiBmQ,UACjB,MAAM,IAAIsH,GAAU,CAChBvZ,KAAMoa,GAAiBC,QACvB3b,QAAS,iCACT4b,gBAAiBxY,GAG7B,CC6IA,SAASyY,GAAmBC,GACxB,MAAMC,EAAOnc,OAAOoc,OAAO,IAAKF,IAChC,MAAO,CAACG,EAAQC,IAAeH,EAAK1P,OAAO,CAACC,EAAK6P,KAAA,IAC1C7P,EACH6P,CAACA,GAAU,GAAGF,KAAUC,KAAcC,MACtC,GACR,CC7JA,SAASC,GAAcZ,GACnB,MAAMa,EAAS5C,GAAU+B,GAASzX,QAAQuY,IACpCC,EAAM,GACZ,IAAKF,EACD,MAAM,IAAIxB,GAAU,CAChBvZ,KAAM,0BACNtB,QAAS,qBAKjB,OADAuc,EADmBF,EAAOxC,QAAQ,gBAAiB,KACjC2B,EACXe,CACX,CCGAzc,eAAe0c,IAA0BxB,OAAEA,EAAAlR,WAAQA,EAAA2S,gBAAYA,IAC3DA,EAAgBC,cAAc,CAAE3S,QAASD,IAEzC,MAAM6S,QAAmBF,EAAgBG,iBACzC,GAAID,EACA,OAAOA,EAAWE,GAEtB,MAAMC,EAAS9B,GAAQQ,QACjBY,GAAcpB,EAAOQ,QAAQpB,YAC7B,GACA2C,QAQVjd,eAAkCgd,EAAQhT,GACtC,MAAMI,EAAiBJ,GAAYI,eAC7BrB,EAAS+R,GAA4B1Q,GACrC8S,GCjBiBtK,EDiBS,CAC5BuK,iBAAkBC,GAA0C,CACxDC,iBAAkBrT,EAAWsT,wBCnBHC,GAAkBC,GAAgCC,GAAuB,SAAUC,GAAmB,IACrIC,MACA/K,EACHgL,eAAgBC,QAHM,IAACjL,EDuBvB,IAAIkL,EAGJ,IACIA,SAAkBZ,EAAM,CACpBnU,UACD,CACCgV,eAAgB3T,EAChB4T,OAAQhB,KACRiB,UACR,OACOC,GAEH,MADAvC,GAAmBuC,GACb,IAAInD,GAAUmD,EACxB,CACA,IAAKJ,EACD,MAAM,IAAI/C,GAAU,CAChBvZ,KAAM,yBACNtB,QAAS,mDACT8a,mBAAoB,mEAG5B,OAAO8C,CACX,CAxCsCK,CAAmBnB,EAAQhT,GAM7D,OAJA2S,EAAgByB,gBAAgB,CAC5BrB,GAAIE,EACJoB,KAAMnD,EAAS,UAAY,UAExB+B,CACX,CErCA,SAASqB,GAAQ/J,GAAmV,OAAtO+J,GAArD,mBAAX9J,QAAoD,iBAApBA,OAAOuD,SAAmC,SAAiBxD,GAAO,cAAcA,CAAK,EAAsB,SAAiBA,GAAO,OAAOA,GAAyB,mBAAXC,QAAyBD,EAAIgK,cAAgB/J,QAAUD,IAAQC,OAAOgK,UAAY,gBAAkBjK,CAAK,GAAoBA,EAAM,CCQlX,SAASkK,GAAYrL,EAAQsL,GAMlC,IALA,IAGIC,EAHAC,EAAa,eACbC,EAAO,EACPC,EAASJ,EAAW,GAGhBC,EAAQC,EAAWG,KAAK3L,EAAO4L,QAAUL,EAAM9X,MAAQ6X,GAC7DG,GAAQ,EACRC,EAASJ,EAAW,GAAKC,EAAM9X,MAAQ8X,EAAM,GAAGlf,QAGlD,MAAO,CACLof,OACAC,SAEJ,CClBO,SAASG,GAAc5Z,GAC5B,OAAO6Z,GAAoB7Z,EAAS+N,OAAQqL,GAAYpZ,EAAS+N,OAAQ/N,EAAS8Z,OACpF,CAKO,SAASD,GAAoB9L,EAAQgM,GAC1C,IAAIC,EAAwBjM,EAAOkM,eAAeR,OAAS,EACvDE,EAAOO,GAAWF,GAAyBjM,EAAO4L,KAClDQ,EAAYJ,EAAeP,KAAO,EAClCY,EAAarM,EAAOkM,eAAeT,KAAO,EAC1Ca,EAAUN,EAAeP,KAAOY,EAChCE,EAAuC,IAAxBP,EAAeP,KAAaQ,EAAwB,EACnEO,EAAYR,EAAeN,OAASa,EACpCE,EAAc,GAAGC,OAAO1M,EAAO5R,KAAM,KAAKse,OAAOJ,EAAS,KAAKI,OAAOF,EAAW,MACjFG,EAAQf,EAAKzZ,MAAM,gBACnBya,EAAeD,EAAMP,GAEzB,GAAIQ,EAAavgB,OAAS,IAAK,CAK7B,IAJA,IAAIwgB,EAAetb,KAAKc,MAAMma,EAAY,IACtCM,EAAmBN,EAAY,GAC/BO,EAAW,GAENtgB,EAAI,EAAGA,EAAImgB,EAAavgB,OAAQI,GAAK,GAC5CsgB,EAASpZ,KAAKiZ,EAAaze,MAAM1B,EAAGA,EAAI,KAG1C,OAAOggB,EAAcO,GAAmB,CAAC,CAAC,GAAGN,OAAOJ,GAAUS,EAAS,KAAKL,OAAOK,EAAS5e,MAAM,EAAG0e,EAAe,GAAG/Y,IAAI,SAAUmZ,GACnI,MAAO,CAAC,GAAIA,EACd,GAAI,CAAC,CAAC,IAAKd,GAAWW,EAAmB,GAAK,KAAM,CAAC,GAAIC,EAASF,EAAe,MACnF,CAEA,OAAOJ,EAAcO,GAAmB,CACxC,CAAC,GAAGN,OAAOJ,EAAU,GAAIK,EAAMP,EAAY,IAAK,CAAC,GAAGM,OAAOJ,GAAUM,GAAe,CAAC,GAAIT,GAAWK,EAAY,GAAK,KAAM,CAAC,GAAGE,OAAOJ,EAAU,GAAIK,EAAMP,EAAY,KACxK,CAEA,SAASY,GAAmBL,GAC1B,IAAIO,EAAgBP,EAAMQ,OAAO,SAAUC,GAGzC,OAFQA,EAAK,QAEG,IADLA,EAAK,EAElB,GACIC,EAAS9b,KAAK+b,IAAIC,MAAMhc,KAAM2b,EAAcpZ,IAAI,SAAU0Z,GAE5D,OADaA,EAAM,GACLnhB,MAChB,IACA,OAAO6gB,EAAcpZ,IAAI,SAAU2Z,GACjC,IAUkBC,EAVd3E,EAAS0E,EAAM,GACfhC,EAAOgC,EAAM,GACjB,OASKtB,GATUkB,GAQGK,EARK3E,GASG1c,QAAUqhB,GATFjC,EAAO,MAAQA,EAAO,KAC1D,GAAGtE,KAAK,KACV,CAEA,SAASgF,GAAWwB,GAClB,OAAOC,MAAMD,EAAM,GAAGxG,KAAK,IAC7B,CC7DA,SAAS+D,GAAQ/J,GAAmV,OAAtO+J,GAArD,mBAAX9J,QAAoD,iBAApBA,OAAOuD,SAAmC,SAAiBxD,GAAO,cAAcA,CAAK,EAAsB,SAAiBA,GAAO,OAAOA,GAAyB,mBAAXC,QAAyBD,EAAIgK,cAAgB/J,QAAUD,IAAQC,OAAOgK,UAAY,gBAAkBjK,CAAK,GAAoBA,EAAM,CAEzX,SAAS0M,GAAQlgB,EAAQmgB,GAAkB,IAAIjF,EAAOnc,OAAOmc,KAAKlb,GAAS,GAAIjB,OAAOqhB,sBAAuB,CAAE,IAAIC,EAAUthB,OAAOqhB,sBAAsBpgB,GAAamgB,IAAgBE,EAAUA,EAAQb,OAAO,SAAUc,GAAO,OAAOvhB,OAAOwhB,yBAAyBvgB,EAAQsgB,GAAKE,UAAY,IAAItF,EAAKlV,KAAK4Z,MAAM1E,EAAMmF,EAAU,CAAE,OAAOnF,CAAM,CAIpV,SAASuF,GAAgBjN,EAAKnV,EAAKmR,GAAiK,OAApJnR,KAAOmV,EAAOzU,OAAOC,eAAewU,EAAKnV,EAAK,CAAEmR,QAAcgR,YAAY,EAAME,cAAc,EAAMC,UAAU,IAAkBnN,EAAInV,GAAOmR,EAAgBgE,CAAK,CAMhN,SAASoN,GAAaC,EAAaC,GAA+J,OAAhIA,GAFlE,SAA2B1iB,EAAQ2iB,GAAS,QAASjiB,EAAI,EAAGA,EAAIiiB,EAAMriB,OAAQI,IAAK,CAAE,IAAIkiB,EAAaD,EAAMjiB,GAAIkiB,EAAWR,WAAaQ,EAAWR,aAAc,EAAOQ,EAAWN,cAAe,EAAU,UAAWM,IAAYA,EAAWL,UAAW,GAAM5hB,OAAOC,eAAeZ,EAAQ4iB,EAAW3iB,IAAK2iB,EAAa,CAAE,CAE9OC,CAAkBJ,EAAYpD,UAAWqD,GAAkFD,CAAa,CAMtN,SAASK,GAA2BC,EAAMvL,GAAQ,OAAIA,GAA2B,WAAlB2H,GAAQ3H,IAAsC,mBAATA,EAA8CwL,GAAuBD,GAAtCvL,CAA6C,CAEhL,SAASwL,GAAuBD,GAAQ,QAAa,IAATA,EAAmB,MAAM,IAAIE,eAAe,6DAAgE,OAAOF,CAAM,CAErK,SAASG,GAAiBC,GAAS,IAAIC,EAAwB,mBAARC,IAAqB,IAAIA,SAAQ,EAA8nB,OAAnnBH,GAAmB,SAA0BC,GAA4S,SAASG,IAAY,OAAOC,GAAWJ,EAAO9iB,UAAWmjB,GAAgBnP,MAAM+K,YAAc,CAAhY,GAAc,OAAV+D,IAMlIM,EANuKN,GAMlG,IAAxDO,SAASvI,SAAS3D,KAAKiM,GAAInR,QAAQ,kBAN+H,OAAO6Q,EAMjN,IAA2BM,EAN6L,GAAqB,mBAAVN,EAAwB,MAAM,IAAI7O,UAAU,sDAAyD,QAAsB,IAAX8O,EAAwB,CAAE,GAAIA,EAAOO,IAAIR,GAAQ,OAAOC,EAAOQ,IAAIT,GAAQC,EAAOS,IAAIV,EAAOG,EAAU,CAAiP,OAAhJA,EAAQjE,UAAY1e,OAAOmjB,OAAOX,EAAM9D,UAAW,CAAED,YAAa,CAAEhO,MAAOkS,EAASlB,YAAY,EAAOG,UAAU,EAAMD,cAAc,KAAkByB,GAAgBT,EAASH,EAAQ,EAAUD,GAAiBC,EAAQ,CAEtvB,SAASI,GAAWS,EAAQC,EAAMd,GAAqV,OAAzSI,GAA/BW,KAA4C1jB,QAAQ2jB,UAAiC,SAAoBH,EAAQC,EAAMd,GAAS,IAAIiB,EAAI,CAAC,MAAOA,EAAExc,KAAK4Z,MAAM4C,EAAGH,GAAO,IAAsDI,EAAW,IAA/CX,SAAShb,KAAK8Y,MAAMwC,EAAQI,IAA6F,OAAnDjB,GAAOY,GAAgBM,EAAUlB,EAAM9D,WAAmBgF,CAAU,GAAuB7C,MAAM,KAAMnhB,UAAY,CAEja,SAAS6jB,KAA8B,GAAuB,oBAAZ1jB,UAA4BA,QAAQ2jB,UAAW,OAAO,EAAO,GAAI3jB,QAAQ2jB,UAAUG,KAAM,OAAO,EAAO,GAAqB,mBAAVC,MAAsB,OAAO,EAAM,IAAiF,OAA3E9I,KAAK4D,UAAUlE,SAAS3D,KAAKhX,QAAQ2jB,UAAU1I,KAAM,GAAI,WAAa,KAAY,CAAM,OAASsD,GAAK,OAAO,CAAO,CAAE,CAInU,SAASgF,GAAgBS,EAAGC,GAA+G,OAA1GV,GAAkBpjB,OAAO+jB,gBAAkB,SAAyBF,EAAGC,GAAsB,OAAjBD,EAAEG,UAAYF,EAAUD,CAAG,GAA0BA,EAAGC,EAAI,CAEzK,SAASjB,GAAgBgB,GAAwJ,OAAnJhB,GAAkB7iB,OAAO+jB,eAAiB/jB,OAAOikB,eAAiB,SAAyBJ,GAAK,OAAOA,EAAEG,WAAahkB,OAAOikB,eAAeJ,EAAI,GAA0BA,EAAI,CAgL5M,SAASK,GAAiB/iB,GACxB,YAAiB,IAAVA,GAAwC,IAAjBA,EAAMxB,YAAe,EAAYwB,CACjE,CC5MO,SAASgjB,GAAY7Q,EAAQsL,EAAUwF,GAC5C,OAAO,IAAIC,GAAa,iBAAiBrE,OAAOoE,QAAc,EAAW9Q,EAAQ,CAACsL,GACpF,CCFe,SAAS0F,GAAcC,GACpC,IAAIzB,EAAKyB,EAAY7F,UAAU8F,OACjB,mBAAP1B,GCRM,SAAmB2B,GAGhC,IAFuBC,QAAQD,GAG7B,MAAM,IAAIxgB,MAAkC,kCAEhD,CDE8B0gB,CAAU,GACtCJ,EAAY7F,UAAUkG,QAAU9B,EAE5B+B,KACFN,EAAY7F,UAAUmG,IAA6B/B,EAEvD,CEkGO,SAASgC,GAAOC,GACrB,OAAoB,MAAbA,GAA+C,iBAAnBA,EAAUC,IAC/C,CClHA,SAASxG,GAAQ/J,GAAmV,OAAtO+J,GAArD,mBAAX9J,QAAoD,iBAApBA,OAAOuD,SAAmC,SAAiBxD,GAAO,cAAcA,CAAK,EAAsB,SAAiBA,GAAO,OAAOA,GAAyB,mBAAXC,QAAyBD,EAAIgK,cAAgB/J,QAAUD,IAAQC,OAAOgK,UAAY,gBAAkBjK,CAAK,GAAoBA,EAAM,CAU1W,SAASmQ,GAAQnU,GAC9B,OAAOwU,GAAYxU,EAAO,GAC5B,CAEA,SAASwU,GAAYxU,EAAOyU,GAC1B,OAAQ1G,GAAQ/N,IACd,IAAK,SACH,OAAOrM,KAAK+gB,UAAU1U,GAExB,IAAK,WACH,OAAOA,EAAM/O,KAAO,aAAase,OAAOvP,EAAM/O,KAAM,KAAO,aAE7D,IAAK,SACH,OAAc,OAAV+O,EACK,OAUf,SAA2BA,EAAO2U,GAChC,IAA4C,IAAxCA,EAAqBzT,QAAQlB,GAC/B,MAAO,aAGT,IAAIyU,EAAa,GAAGlF,OAAOoF,EAAsB,CAAC3U,IAC9C4U,EA2DN,SAAqBpkB,GACnB,IAAIokB,EAAkBpkB,EAAOiG,OAAO2d,KAEpC,GAA+B,mBAApBQ,EACT,OAAOA,EAGT,GAA8B,mBAAnBpkB,EAAO2jB,QAChB,OAAO3jB,EAAO2jB,OAElB,CArEwBU,CAAY7U,GAElC,QAAwB,IAApB4U,EAA+B,CACjC,IAAIE,EAAcF,EAAgBxO,KAAKpG,GAEvC,GAAI8U,IAAgB9U,EAClB,MAA8B,iBAAhB8U,EAA2BA,EAAcN,GAAYM,EAAaL,EAEpF,SAAWhE,MAAMsE,QAAQ/U,GACvB,OAwBJ,SAAqBtP,EAAO+jB,GAC1B,GAAqB,IAAjB/jB,EAAMxB,OACR,MAAO,KAGT,GAAIulB,EAAWvlB,OAzES,EA0EtB,MAAO,UAOT,IAJA,IAAIshB,EAAMpc,KAAK4gB,IA9EM,GA8EgBtkB,EAAMxB,QACvC+lB,EAAYvkB,EAAMxB,OAASshB,EAC3B0E,EAAQ,GAEH5lB,EAAI,EAAGA,EAAIkhB,IAAOlhB,EACzB4lB,EAAM1e,KAAKge,GAAY9jB,EAAMpB,GAAImlB,IAGjB,IAAdQ,EACFC,EAAM1e,KAAK,mBACFye,EAAY,GACrBC,EAAM1e,KAAK,OAAO+Y,OAAO0F,EAAW,gBAGtC,MAAO,IAAMC,EAAMlL,KAAK,MAAQ,GAClC,CAhDWmL,CAAYnV,EAAOyU,GAG5B,OAGF,SAAsBjkB,EAAQikB,GAC5B,IAAI/I,EAAOnc,OAAOmc,KAAKlb,GAEvB,GAAoB,IAAhBkb,EAAKxc,OACP,MAAO,KAGT,GAAIulB,EAAWvlB,OAzDS,EA0DtB,MAAO,IAgDX,SAAsBsB,GACpB,IAAI4kB,EAAM7lB,OAAO0e,UAAUlE,SAAS3D,KAAK5V,GAAQgZ,QAAQ,aAAc,IAAIA,QAAQ,KAAM,IAEzF,GAAY,WAAR4L,GAAkD,mBAAvB5kB,EAAOwd,YAA4B,CAChE,IAAI/c,EAAOT,EAAOwd,YAAY/c,KAE9B,GAAoB,iBAATA,GAA8B,KAATA,EAC9B,OAAOA,CAEX,CAEA,OAAOmkB,CACT,CA5DiBC,CAAa7kB,GAAU,IAGtC,IAAI8kB,EAAa5J,EAAK/U,IAAI,SAAU9H,GAElC,OAAOA,EAAM,KADD2lB,GAAYhkB,EAAO3B,GAAM4lB,EAEvC,GACA,MAAO,KAAOa,EAAWtL,KAAK,MAAQ,IACxC,CAnBSuL,CAAavV,EAAOyU,EAC7B,CA1Bae,CAAkBxV,EAAOyU,GAElC,QACE,OAAOhe,OAAOuJ,GAEpB,CChCe,SAASyV,GAAUzB,EAAWrkB,GAG3C,IAFuBskB,QAAQD,GAG7B,MAAM,IAAIxgB,MAAM7D,EAEpB,CCJA,SAASyhB,GAAaC,EAAaC,GAA+J,OAAhIA,GAFlE,SAA2B1iB,EAAQ2iB,GAAS,QAASjiB,EAAI,EAAGA,EAAIiiB,EAAMriB,OAAQI,IAAK,CAAE,IAAIkiB,EAAaD,EAAMjiB,GAAIkiB,EAAWR,WAAaQ,EAAWR,aAAc,EAAOQ,EAAWN,cAAe,EAAU,UAAWM,IAAYA,EAAWL,UAAW,GAAM5hB,OAAOC,eAAeZ,EAAQ4iB,EAAW3iB,IAAK2iB,EAAa,CAAE,CAE9OC,CAAkBJ,EAAYpD,UAAWqD,GAAkFD,CAAa,CCM/M,SAASqE,GAAuBC,GAErC,IAAInG,EAAQmG,EAAU3gB,MAAM,gBAExB4gB,EAuCC,SAAmC5V,GAQxC,IAPA,IAAI6V,EAEAC,GAAc,EACdC,GAAc,EACdC,EAAS,EACTJ,EAAe,KAEVtmB,EAAI,EAAGA,EAAI0Q,EAAM9Q,SAAUI,EAClC,OAAQ0Q,EAAM8J,WAAWxa,IACvB,KAAK,GAE6B,KAA5B0Q,EAAM8J,WAAWxa,EAAI,MACrBA,EAKN,KAAK,GAEHwmB,GAAc,EACdC,GAAc,EACdC,EAAS,EACT,MAEF,KAAK,EAEL,KAAK,KAEDA,EACF,MAEF,QACMD,IAAgBD,IAAiC,OAAjBF,GAAyBI,EAASJ,KACpEA,EAAeI,GAGjBD,GAAc,EAIpB,OAA0C,QAAlCF,EAAgBD,SAA4C,IAAlBC,EAA2BA,EAAgB,CAC/F,CAjFqBI,CAA0BN,GAE7C,GAAqB,IAAjBC,EACF,QAAStmB,EAAI,EAAGA,EAAIkgB,EAAMtgB,OAAQI,IAChCkgB,EAAMlgB,GAAKkgB,EAAMlgB,GAAG0B,MAAM4kB,GAO9B,IAFA,IAAIM,EAAY,EAETA,EAAY1G,EAAMtgB,QAAUinB,GAAQ3G,EAAM0G,OAC7CA,EAKJ,IAFA,IAAIE,EAAU5G,EAAMtgB,OAEbknB,EAAUF,GAAaC,GAAQ3G,EAAM4G,EAAU,OAClDA,EAIJ,OAAO5G,EAAMxe,MAAMklB,EAAWE,GAASpM,KAAK,KAC9C,CAEA,SAASmM,GAAQ5F,GACf,QAASjhB,EAAI,EAAGA,EAAIihB,EAAIrhB,SAAUI,EAChC,GAAe,MAAXihB,EAAIjhB,IAAyB,OAAXihB,EAAIjhB,GACxB,OAAO,EAIX,OAAO,CACT,CCmCA,SAAS+mB,GAAcC,GACrB,OACEC,MAAMD,GAAQE,GAAUC,IACxBH,EAAO,IAAS3iB,KAAK+gB,UAAUje,OAAOigB,aAAaJ,IACnD,OAAQ/G,QAAQ,KAAO+G,EAAKvM,SAAS,IAAI4M,eAAe3lB,OAAM,GAAK,IAEvE,CAUA,SAAS4lB,GAAUC,EAAOC,GAMxB,IALA,IAAIjU,EAASgU,EAAMhU,OACf4L,EAAO5L,EAAO4L,KACdsI,EAAatI,EAAKvf,OAClB8nB,EAAMF,EAAKG,IAERD,EAAMD,GAAY,CACvB,IAAIT,EAAO7H,EAAK3E,WAAWkN,GACvBE,EAAQL,EAAMvI,KAEd6I,EAAO,EAAIH,EAAMH,EAAMO,UAG3B,OAAQd,GACN,KAAK,MAEL,KAAK,EAEL,KAAK,GAEL,KAAK,KAEDU,EACF,SAEF,KAAK,KAEDA,IACAH,EAAMvI,KACRuI,EAAMO,UAAYJ,EAClB,SAEF,KAAK,GAE8B,KAA7BvI,EAAK3E,WAAWkN,EAAM,GACxBA,GAAO,IAELA,IAGFH,EAAMvI,KACRuI,EAAMO,UAAYJ,EAClB,SAEF,KAAK,GAEH,OAAO,IAAIK,GAAMb,GAAUc,KAAMN,EAAKA,EAAM,EAAGE,EAAOC,EAAML,GAE9D,KAAK,GAEH,OAAOS,GAAY1U,EAAQmU,EAAKE,EAAOC,EAAML,GAE/C,KAAK,GAEH,OAAO,IAAIO,GAAMb,GAAUgB,OAAQR,EAAKA,EAAM,EAAGE,EAAOC,EAAML,GAEhE,KAAK,GAEH,OAAO,IAAIO,GAAMb,GAAUiB,IAAKT,EAAKA,EAAM,EAAGE,EAAOC,EAAML,GAE7D,KAAK,GAEH,OAAO,IAAIO,GAAMb,GAAUkB,QAASV,EAAKA,EAAM,EAAGE,EAAOC,EAAML,GAEjE,KAAK,GAEH,OAAO,IAAIO,GAAMb,GAAUmB,QAASX,EAAKA,EAAM,EAAGE,EAAOC,EAAML,GAEjE,KAAK,GAEH,GAAiC,KAA7BrI,EAAK3E,WAAWkN,EAAM,IAA0C,KAA7BvI,EAAK3E,WAAWkN,EAAM,GAC3D,OAAO,IAAIK,GAAMb,GAAUoB,OAAQZ,EAAKA,EAAM,EAAGE,EAAOC,EAAML,GAGhE,MAEF,KAAK,GAEH,OAAO,IAAIO,GAAMb,GAAUqB,MAAOb,EAAKA,EAAM,EAAGE,EAAOC,EAAML,GAE/D,KAAK,GAEH,OAAO,IAAIO,GAAMb,GAAUsB,OAAQd,EAAKA,EAAM,EAAGE,EAAOC,EAAML,GAEhE,KAAK,GAEH,OAAO,IAAIO,GAAMb,GAAUuB,GAAIf,EAAKA,EAAM,EAAGE,EAAOC,EAAML,GAE5D,KAAK,GAEH,OAAO,IAAIO,GAAMb,GAAUwB,UAAWhB,EAAKA,EAAM,EAAGE,EAAOC,EAAML,GAEnE,KAAK,GAEH,OAAO,IAAIO,GAAMb,GAAUyB,UAAWjB,EAAKA,EAAM,EAAGE,EAAOC,EAAML,GAEnE,KAAK,IAEH,OAAO,IAAIO,GAAMb,GAAU0B,QAASlB,EAAKA,EAAM,EAAGE,EAAOC,EAAML,GAEjE,KAAK,IAEH,OAAO,IAAIO,GAAMb,GAAU2B,KAAMnB,EAAKA,EAAM,EAAGE,EAAOC,EAAML,GAE9D,KAAK,IAEH,OAAO,IAAIO,GAAMb,GAAU4B,QAASpB,EAAKA,EAAM,EAAGE,EAAOC,EAAML,GAEjE,KAAK,GAEH,OAAiC,KAA7BrI,EAAK3E,WAAWkN,EAAM,IAA0C,KAA7BvI,EAAK3E,WAAWkN,EAAM,GACpDqB,GAAgBxV,EAAQmU,EAAKE,EAAOC,EAAML,EAAMD,GAGlDyB,GAAWzV,EAAQmU,EAAKE,EAAOC,EAAML,GAE9C,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEH,OAAOyB,GAAW1V,EAAQmU,EAAKV,EAAMY,EAAOC,EAAML,GAEpD,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,GAEL,KAAK,IAEL,KAAK,IAEL,KAAK,IAEL,KAAK,IAEL,KAAK,IAEL,KAAK,IAEL,KAAK,IAEL,KAAK,IAEL,KAAK,IAEL,KAAK,IAEL,KAAK,IAEL,KAAK,IAEL,KAAK,IAEL,KAAK,IAEL,KAAK,IAEL,KAAK,IAEL,KAAK,IAEL,KAAK,IAEL,KAAK,IAEL,KAAK,IAEL,KAAK,IAEL,KAAK,IAEL,KAAK,IAEH,OAAO0B,GAAS3V,EAAQmU,EAAKE,EAAOC,EAAML,GAG9C,MAAMpD,GAAY7Q,EAAQmU,EAAKyB,GAA2BnC,GAC5D,CAEA,IAAIhI,EAAOuI,EAAMvI,KACboK,EAAM,EAAI1B,EAAMH,EAAMO,UAC1B,OAAO,IAAIC,GAAMb,GAAUC,IAAKM,EAAYA,EAAYzI,EAAMoK,EAAK5B,EACrE,CAMA,SAAS2B,GAA2BnC,GAClC,OAAIA,EAAO,IAAmB,IAATA,GAA4B,KAATA,GAA4B,KAATA,EAClD,wCAAwC/G,OAAO8G,GAAcC,GAAO,KAGhE,KAATA,EAEK,kFAGF,yCAAyC/G,OAAO8G,GAAcC,GAAO,IAC9E,CAQA,SAASiB,GAAY1U,EAAQ+L,EAAON,EAAMoK,EAAK5B,GAC7C,IACIR,EADA7H,EAAO5L,EAAO4L,KAEdN,EAAWS,EAEf,GACE0H,EAAO7H,EAAK3E,aAAaqE,UACjBoI,MAAMD,KAChBA,EAAO,IAAmB,IAATA,IAEjB,OAAO,IAAIe,GAAMb,GAAUmC,QAAS/J,EAAOT,EAAUG,EAAMoK,EAAK5B,EAAMrI,EAAKzd,MAAM4d,EAAQ,EAAGT,GAC9F,CAUA,SAASoK,GAAW1V,EAAQ+L,EAAOgK,EAAWtK,EAAMoK,EAAK5B,GACvD,IAAIrI,EAAO5L,EAAO4L,KACd6H,EAAOsC,EACPzK,EAAWS,EACXiK,GAAU,EAOd,GALa,KAATvC,IAEFA,EAAO7H,EAAK3E,aAAaqE,IAGd,KAATmI,GAIF,IAFAA,EAAO7H,EAAK3E,aAAaqE,KAEb,IAAMmI,GAAQ,GACxB,MAAM5C,GAAY7Q,EAAQsL,EAAU,6CAA6CoB,OAAO8G,GAAcC,GAAO,WAG/GnI,EAAW2K,GAAWjW,EAAQsL,EAAUmI,GACxCA,EAAO7H,EAAK3E,WAAWqE,GA0BzB,GAvBa,KAATmI,IAEFuC,GAAU,EACVvC,EAAO7H,EAAK3E,aAAaqE,GACzBA,EAAW2K,GAAWjW,EAAQsL,EAAUmI,GACxCA,EAAO7H,EAAK3E,WAAWqE,IAGZ,KAATmI,GAAwB,MAATA,IAEjBuC,GAAU,EAGG,MAFbvC,EAAO7H,EAAK3E,aAAaqE,KAEG,KAATmI,IAEjBA,EAAO7H,EAAK3E,aAAaqE,IAG3BA,EAAW2K,GAAWjW,EAAQsL,EAAUmI,GACxCA,EAAO7H,EAAK3E,WAAWqE,IAIZ,KAATmI,GAsON,SAAqBA,GACnB,OAAgB,KAATA,GAAeA,GAAQ,IAAMA,GAAQ,IAAMA,GAAQ,IAAMA,GAAQ,GAC1E,CAxOqByC,CAAYzC,GAC7B,MAAM5C,GAAY7Q,EAAQsL,EAAU,2CAA2CoB,OAAO8G,GAAcC,GAAO,MAG7G,OAAO,IAAIe,GAAMwB,EAAUrC,GAAUwC,MAAQxC,GAAUyC,IAAKrK,EAAOT,EAAUG,EAAMoK,EAAK5B,EAAMrI,EAAKzd,MAAM4d,EAAOT,GAClH,CAMA,SAAS2K,GAAWjW,EAAQ+L,EAAOgK,GACjC,IAAInK,EAAO5L,EAAO4L,KACdN,EAAWS,EACX0H,EAAOsC,EAEX,GAAItC,GAAQ,IAAMA,GAAQ,GAAI,CAE5B,GACEA,EAAO7H,EAAK3E,aAAaqE,SAClBmI,GAAQ,IAAMA,GAAQ,IAG/B,OAAOnI,CACT,CAEA,MAAMuF,GAAY7Q,EAAQsL,EAAU,2CAA2CoB,OAAO8G,GAAcC,GAAO,KAC7G,CAQA,SAASgC,GAAWzV,EAAQ+L,EAAON,EAAMoK,EAAK5B,GAO5C,IANA,IAAIrI,EAAO5L,EAAO4L,KACdN,EAAWS,EAAQ,EACnBsK,EAAa/K,EACbmI,EAAO,EACPtW,EAAQ,GAELmO,EAAWM,EAAKvf,SAAWqnB,MAAMD,EAAO7H,EAAK3E,WAAWqE,KACtD,KAATmI,GAA4B,KAATA,GAAiB,CAElC,GAAa,KAATA,EAEF,OADAtW,GAASyO,EAAKzd,MAAMkoB,EAAY/K,GACzB,IAAIkJ,GAAMb,GAAU2C,OAAQvK,EAAOT,EAAW,EAAGG,EAAMoK,EAAK5B,EAAM9W,GAI3E,GAAIsW,EAAO,IAAmB,IAATA,EACnB,MAAM5C,GAAY7Q,EAAQsL,EAAU,oCAAoCoB,OAAO8G,GAAcC,GAAO,MAKtG,KAFEnI,EAEW,KAATmI,EAAa,CAKf,OAHAtW,GAASyO,EAAKzd,MAAMkoB,EAAY/K,EAAW,GAC3CmI,EAAO7H,EAAK3E,WAAWqE,IAGrB,KAAK,GACHnO,GAAS,IACT,MAEF,KAAK,GACHA,GAAS,IACT,MAEF,KAAK,GACHA,GAAS,KACT,MAEF,KAAK,GACHA,GAAS,KACT,MAEF,KAAK,IACHA,GAAS,KACT,MAEF,KAAK,IACHA,GAAS,KACT,MAEF,KAAK,IACHA,GAAS,KACT,MAEF,KAAK,IACHA,GAAS,KACT,MAEF,KAAK,IAGD,IAAIoZ,EAAWC,GAAY5K,EAAK3E,WAAWqE,EAAW,GAAIM,EAAK3E,WAAWqE,EAAW,GAAIM,EAAK3E,WAAWqE,EAAW,GAAIM,EAAK3E,WAAWqE,EAAW,IAEnJ,GAAIiL,EAAW,EAAG,CAChB,IAAIE,EAAkB7K,EAAKzd,MAAMmd,EAAW,EAAGA,EAAW,GAC1D,MAAMuF,GAAY7Q,EAAQsL,EAAU,yCAAyCoB,OAAO+J,EAAiB,KACvG,CAEAtZ,GAASvJ,OAAOigB,aAAa0C,GAC7BjL,GAAY,EACZ,MAGJ,QACE,MAAMuF,GAAY7Q,EAAQsL,EAAU,wCAAwCoB,OAAO9Y,OAAOigB,aAAaJ,GAAO,MAIlH4C,IADE/K,CAEJ,CACF,CAEA,MAAMuF,GAAY7Q,EAAQsL,EAAU,uBACtC,CAQA,SAASkK,GAAgBxV,EAAQ+L,EAAON,EAAMoK,EAAK5B,EAAMD,GAOvD,IANA,IAAIpI,EAAO5L,EAAO4L,KACdN,EAAWS,EAAQ,EACnBsK,EAAa/K,EACbmI,EAAO,EACPiD,EAAW,GAERpL,EAAWM,EAAKvf,SAAWqnB,MAAMD,EAAO7H,EAAK3E,WAAWqE,KAAY,CAEzE,GAAa,KAATmI,GAAiD,KAAlC7H,EAAK3E,WAAWqE,EAAW,IAA+C,KAAlCM,EAAK3E,WAAWqE,EAAW,GAEpF,OADAoL,GAAY9K,EAAKzd,MAAMkoB,EAAY/K,GAC5B,IAAIkJ,GAAMb,GAAUgD,aAAc5K,EAAOT,EAAW,EAAGG,EAAMoK,EAAK5B,EAAMpB,GAAuB6D,IAIxG,GAAIjD,EAAO,IAAmB,IAATA,GAA4B,KAATA,GAA4B,KAATA,EACzD,MAAM5C,GAAY7Q,EAAQsL,EAAU,oCAAoCoB,OAAO8G,GAAcC,GAAO,MAGzF,KAATA,KAEAnI,IACA0I,EAAMvI,KACRuI,EAAMO,UAAYjJ,GACA,KAATmI,GAE6B,KAAlC7H,EAAK3E,WAAWqE,EAAW,GAC7BA,GAAY,IAEVA,IAGF0I,EAAMvI,KACRuI,EAAMO,UAAYjJ,GAEX,KAATmI,GAAiD,KAAlC7H,EAAK3E,WAAWqE,EAAW,IAA+C,KAAlCM,EAAK3E,WAAWqE,EAAW,IAA+C,KAAlCM,EAAK3E,WAAWqE,EAAW,IACxHoL,GAAY9K,EAAKzd,MAAMkoB,EAAY/K,GAAY,MAE/C+K,EADA/K,GAAY,KAGVA,CAEN,CAEA,MAAMuF,GAAY7Q,EAAQsL,EAAU,uBACtC,CAaA,SAASkL,GAAYrG,EAAGyG,EAAGzqB,EAAGD,GAC5B,OAAO2qB,GAAS1G,IAAM,GAAK0G,GAASD,IAAM,EAAIC,GAAS1qB,IAAM,EAAI0qB,GAAS3qB,EAC5E,CAWA,SAAS2qB,GAAS1G,GAChB,OAAOA,GAAK,IAAMA,GAAK,GAAKA,EAAI,GAC9BA,GAAK,IAAMA,GAAK,GAAKA,EAAI,GACzBA,GAAK,IAAMA,GAAK,IAAMA,EAAI,IAC1B,CACJ,CAQA,SAASwF,GAAS3V,EAAQ+L,EAAON,EAAMoK,EAAK5B,GAM1C,IALA,IAAIrI,EAAO5L,EAAO4L,KACdsI,EAAatI,EAAKvf,OAClBif,EAAWS,EAAQ,EACnB0H,EAAO,EAEJnI,IAAa4I,IAAeR,MAAMD,EAAO7H,EAAK3E,WAAWqE,MAAwB,KAATmI,GAC/EA,GAAQ,IAAMA,GAAQ,IACtBA,GAAQ,IAAMA,GAAQ,IACtBA,GAAQ,IAAMA,GAAQ,QAElBnI,EAGJ,OAAO,IAAIkJ,GAAMb,GAAUmD,KAAM/K,EAAOT,EAAUG,EAAMoK,EAAK5B,EAAMrI,EAAKzd,MAAM4d,EAAOT,GACvF,CC/oBO,SAASva,GAAMiP,EAAQzQ,GAE5B,OADa,IAAIwnB,GAAO/W,EAAQzQ,GAClBynB,eAChB,CA6+CA,SAASC,GAAazQ,GACpB,IAAIrJ,EAAQqJ,EAAMrJ,MAClB,OAAO+Z,GAAiB1Q,EAAMkL,OAAkB,MAATvU,EAAgB,KAAMuP,OAAOvP,EAAO,KAAQ,GACrF,CAMA,SAAS+Z,GAAiBxF,GACxB,OD77CK,SAA+BA,GACpC,OAAOA,IAASiC,GAAUc,MAAQ/C,IAASiC,GAAUgB,QAAUjD,IAASiC,GAAUiB,KAAOlD,IAASiC,GAAUkB,SAAWnD,IAASiC,GAAUmB,SAAWpD,IAASiC,GAAUoB,QAAUrD,IAASiC,GAAUqB,OAAStD,IAASiC,GAAUsB,QAAUvD,IAASiC,GAAUuB,IAAMxD,IAASiC,GAAUwB,WAAazD,IAASiC,GAAUyB,WAAa1D,IAASiC,GAAU0B,SAAW3D,IAASiC,GAAU2B,MAAQ5D,IAASiC,GAAU4B,OAClZ,CC27CS4B,CAAsBzF,GAAQ,IAAKhF,OAAOgF,EAAM,KAAQA,CACjE,CC5qCO,SAAS0F,GAAWC,EAAS3F,EAAM4F,GACxC,IAAIC,EAAcF,EAAQ3F,GAE1B,GAAI6F,EAAa,CACf,IAAKD,GAAoC,mBAAhBC,EAEvB,OAAOA,EAGT,IAAIC,EAAsBF,EAAYC,EAAYE,MAAQF,EAAYG,MAEtE,GAAmC,mBAAxBF,EAET,OAAOA,CAEX,KAAO,CACL,IAAIG,EAAkBL,EAAYD,EAAQI,MAAQJ,EAAQK,MAE1D,GAAIC,EAAiB,CACnB,GAA+B,mBAApBA,EAET,OAAOA,EAGT,IAAIC,EAAsBD,EAAgBjG,GAE1C,GAAmC,mBAAxBkG,EAET,OAAOA,CAEX,CACF,CACF,CCvXO,SAASC,GAAMC,GACpB,ODsIK,SAAeC,EAAMV,GAC1B,IAAIW,EAAc5rB,UAAUC,OAAS,QAAsB,IAAjBD,UAAU,GAAmBA,UAAU,GAAK6rB,GAGlFC,OAAQ,EACRC,EAAUvK,MAAMsE,QAAQ6F,GACxBlP,EAAO,CAACkP,GACRtkB,GAAQ,EACR2kB,EAAQ,GACRC,OAAO,EACPrsB,OAAM,EACNssB,OAAS,EACTC,EAAO,GACPC,EAAY,GACZC,EAAUV,EAGd,EAAG,CAED,IAAIT,IADJ7jB,IAC0BoV,EAAKxc,OAC3BqsB,EAAWpB,GAA8B,IAAjBc,EAAM/rB,OAElC,GAAIirB,EAAW,CAKb,GAJAtrB,EAA2B,IAArBwsB,EAAUnsB,YAAe,EAAYksB,EAAKA,EAAKlsB,OAAS,GAC9DgsB,EAAOC,EACPA,EAASE,EAAUG,MAEfD,EAAU,CACZ,GAAIP,EACFE,EAAOA,EAAKlqB,YACP,CAGL,IAFA,IAAIyqB,EAAQ,GAEHC,EAAM,EAAGC,EAAgBpsB,OAAOmc,KAAKwP,GAAOQ,EAAMC,EAAczsB,OAAQwsB,IAAO,CACtF,IAAIE,EAAID,EAAcD,GACtBD,EAAMG,GAAKV,EAAKU,EAClB,CAEAV,EAAOO,CACT,CAIA,IAFA,IAAII,EAAa,EAER3nB,EAAK,EAAGA,EAAK+mB,EAAM/rB,OAAQgF,IAAM,CACxC,IAAI4nB,EAAUb,EAAM/mB,GAAI,GACpB6nB,EAAYd,EAAM/mB,GAAI,GAEtB8mB,IACFc,GAAWD,GAGTb,GAAyB,OAAde,GACbb,EAAK/Z,OAAO2a,EAAS,GACrBD,KAEAX,EAAKY,GAAWC,CAEpB,CACF,CAEAzlB,EAAQykB,EAAMzkB,MACdoV,EAAOqP,EAAMrP,KACbuP,EAAQF,EAAME,MACdD,EAAUD,EAAMC,QAChBD,EAAQA,EAAMjE,IAChB,KAAO,CAIL,GAHAjoB,EAAMssB,EAASH,EAAU1kB,EAAQoV,EAAKpV,QAAS,EAG3C4kB,OAFJA,EAAOC,EAASA,EAAOtsB,GAAOysB,GAG5B,SAGEH,GACFC,EAAK5kB,KAAK3H,EAEd,CAEA,IA2CMmtB,EA3CFvU,OAAS,EAEb,IAAKgJ,MAAMsE,QAAQmG,GAAO,CACxB,IAAK7G,GAAO6G,GACV,MAAM,IAAI1nB,MAAM,qBAAqB+b,OAAO4E,GAAQ+G,GAAO,MAG7D,IAAIe,EAAUhC,GAAWC,EAASgB,EAAK3G,KAAM4F,GAE7C,GAAI8B,EAAS,CAGX,IAFAxU,EAASwU,EAAQ7V,KAAK8T,EAASgB,EAAMrsB,EAAKssB,EAAQC,EAAMC,MAEzCa,GACb,MAGF,IAAe,IAAXzU,GACF,IAAK0S,EAAW,CACdiB,EAAKI,MACL,QACF,OACF,QAAsB,IAAX/T,IACTwT,EAAMzkB,KAAK,CAAC3H,EAAK4Y,KAEZ0S,GAAW,CACd,IAAI9F,GAAO5M,GAEJ,CACL2T,EAAKI,MACL,QACF,CAJEN,EAAOzT,CAKX,CAEJ,CACF,MAEe,IAAXA,GAAwB8T,GAC1BN,EAAMzkB,KAAK,CAAC3H,EAAKqsB,IAGff,EACFiB,EAAKI,OAILT,EAAQ,CACNC,UACA1kB,QACAoV,OACAuP,QACAnE,KAAMiE,GAGRrP,GADAsP,EAAUvK,MAAMsE,QAAQmG,IACPA,EAA4D,QAApDc,EAAwBnB,EAAYK,EAAK3G,aAA6C,IAA1ByH,EAAmCA,EAAwB,GAChJ1lB,GAAQ,EACR2kB,EAAQ,GAEJE,GACFE,EAAU7kB,KAAK2kB,GAGjBA,EAASD,EAEb,YAAmB,IAAVH,GAMT,OAJqB,IAAjBE,EAAM/rB,SACRosB,EAAUL,EAAMA,EAAM/rB,OAAS,GAAG,IAG7BosB,CACT,CC1RSa,CAAMxB,EAAK,CAChBL,MAAO8B,IAEX,CA6PA,SAASC,GAAeC,GACtB,OAAO,SAAUpB,GACf,OAAOlR,GAAK,CAACkR,EAAKvH,YAAa2I,EAAGpB,IAAQ,KAC5C,CACF,CAOA,SAASlR,GAAKuS,GACZ,IAAIC,EAEAC,EAAYxtB,UAAUC,OAAS,QAAsB,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GACpF,OAEwB,QAFhButB,EAAwBD,aAA+C,EAASA,EAAWvM,OAAO,SAAU/N,GAClH,OAAOA,CACT,GAAG+H,KAAKyS,UAAkD,IAA1BD,EAAmCA,EAAwB,EAC7F,CAOA,SAASE,GAAMhsB,GACb,OAAOisB,GAAK,MAAO3G,GAAOhM,GAAKtZ,EAAO,OAAQ,MAChD,CAMA,SAASisB,GAAK/N,EAAOgO,GAEnB,OAAsB,MAAfA,GAAuC,KAAhBA,EAAqBhO,EAAQgO,GADjD3tB,UAAUC,OAAS,QAAsB,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,IACC,EACjF,CAEA,SAAS+mB,GAAOzF,GACd,OAAOoM,GAAK,KAAMpM,EAAI/G,QAAQ,MAAO,QACvC,CAEA,SAASqT,GAAYtM,GACnB,OAA6B,IAAtBA,EAAIrP,QAAQ,KACrB,CAEA,SAAS4b,GAAkBP,GACzB,OAAqB,MAAdA,GAAsBA,EAAWQ,KAAKF,GAC/C,CCjTA,SAASG,GAA2BC,GAYhC,OAXIA,EAAQC,QAAUzM,MAAMsE,QAAQkI,EAAQC,SACxCD,EAAQC,OAAOvd,QAAQgO,KAY/B,SAA6B5a,GAEzB,GAAIA,GAAOoqB,eAAelsB,MAAMmsB,WAAW,yBACvC,OAAO,EAGX,GAAIrqB,EAAMpD,SAASytB,WAAW,uBAC1BrqB,EAAMpD,SAASkL,SAAS,qBACxB,OAAO,EAEX,OAAO,CACX,EAtBgBwiB,CAAoB1P,KACpBA,EAAEhe,QAAU,eACZge,EAAElD,mBACE,4NAMTwS,CACX,CCJA,SAASK,GAAaC,GAClB,MAAMvuB,EAAIuuB,EACV,MAAO,CACHC,QAASxuB,EAAEyuB,IACXzf,OAAQhP,EAAE0uB,IACVC,SAAU3uB,EAAE4uB,IACZC,UAAW7uB,EAAE8uB,IACbjgB,SAAU7O,EAAE+uB,IACZC,QAAShvB,EAAEivB,IAEnB,CCpBA,SAASC,GAAmBC,GACxB,MAAMC,MAAkB1nB,IACxB,UAAW2nB,KAAQF,EAAMG,YAAc,GACnC,GAAIC,GAAgBF,GAChB,UAAWG,KAAQH,EAAK/I,WAAWmJ,MACZ,UAAfD,EAAKE,MACLN,EAAY7c,IAAIid,EAAKG,YAAc,SAEf,WAAfH,EAAKE,YAA2C,IAArBF,EAAKI,aAIrCR,EAAY7c,IAAIid,EAAKI,aAKrC,OAAOnO,MAAMpf,KAAK+sB,EACtB,CAQA,SAASG,GAAgBM,GACrB,QAAwB,SAApBA,GAAW/Q,MAC0B,iBAA1B+Q,GAAWvJ,aACd7E,MAAMsE,QAAQ8J,GAAWvJ,YAAYmJ,UAC7BI,GAAWvJ,YAAYmJ,OAAOK,MAAON,KAAWA,EAAKE,MAK7E,CCrCA,SAASK,GAAWnoB,GAChB,MAAO,GAAGA,EAAE,GAAG+f,gBAAgB/f,EAAE5F,MAAM,IAC3C,CCYA,SAASguB,GAAeC,GACpB,IAAI1sB,EACAC,EACJ,MAAM0sB,EAAgB,IAAI5sB,QAAQ,CAAC4Z,EAAKiT,KACpC5sB,EAAU2Z,EACV1Z,EAAS2sB,IASb,OAPAF,EAASC,GACJvb,KAAM8D,IACPlV,EAAQkV,KAEPZ,MAAO9T,IACRP,EAAOO,KAEJmsB,CACX,CCrBA,SAASE,GAAqBC,EAA4BC,GAEtD,OADAC,GAAW9M,IAAI6M,EAAsBD,GAC9BA,EAA2BG,QAAQ,KACtCD,GAAWE,OAAOH,IAE1B,CCkGA,SAASI,GAA6BC,GAClC,MAAqC,iBAAtBA,EAAGC,UAAU9R,MACxB,UAAW6R,EAAGC,SAAS9R,MACW,iBAA3B6R,EAAGC,SAAS9R,KAAKqQ,OACxBwB,EAAGC,SAAS7K,SACZtE,MAAMsE,QAAQ4K,EAAG3f,OAAOkV,MAChC,CAQA,SAAS2K,GAAuBD,GAC5B,MAAkC,iBAAnBA,GAAU9R,MACrB,UAAW8R,EAAS9R,MACW,iBAAxB8R,EAAS9R,KAAKqQ,KAC7B,CAEA,SAAS2B,GAAgBvC,EAAQwC,EAAWtY,EAAQxJ,EAAoB0f,EAAUE,EAAWmC,GAAU,GACnG,MAAMC,EAAahiB,EAAmBiiB,OAAOH,GACvCI,EAAmBF,EAAWG,OAC9BC,EAAc9wB,OAAOwQ,QAAQogB,GAC9BnQ,OAAO,EAAEsQ,EAAGC,UAAkC,IAAvBA,GAAOzS,MAAMqQ,OACpCxnB,IAAI,EAAE6pB,KAAeA,GAC1B,OAAO/Y,EAAO9Q,IAAK8pB,IACf,GAAIA,QACA,OAAOA,EAEX,MAAMC,EAAgC,GACtC,UAAWF,KAAaH,EAAa,CACjC,MAAMM,EAAaR,EAAiBK,GAC9BI,EAAiBD,GAAY7S,KAC7B+S,EAAmBD,EAAezC,MAClC2C,EAAe7iB,EAAmBiiB,OAAOW,GACzCE,EAA0BD,EAAaE,eAAeC,oBACtDC,EAA2BJ,EAAaE,eAAeG,kBACvDC,EAAeT,EAAWU,aAAaC,eAC7C,IAAIC,EAAmB,GACnBZ,EAAWU,aACX,mBAAoBV,EAAWU,cAC/BE,EAAmBZ,EAAWU,YAAYG,gBAE9C,MAAMC,EAAc,GAIpB,OAHId,EAAWU,aAAe,gBAAiBV,EAAWU,aACtDI,EAAYjrB,QAAQmqB,EAAWU,YAAYI,aAEvCL,GACJ,KAAKE,GAA2B,CAC5B,MAAMI,EAAgBR,EAAyBllB,OAG/C,CAACC,EAAK0lB,KACElB,EAAOkB,KACP1lB,EAAI0lB,GAAUlB,EAAOkB,IAElB1lB,GACR,IAEH,QAA6C,IAAzCshB,EAAO2C,OAAOW,IAAmBrO,IACjC,MAGAkO,EAA8BF,GAD9BR,EAC2C,CAAC4B,EAAaxvB,IACjDquB,EAAOgB,EAAY,IACZlE,EAAO2C,OAAOW,GAAkBrO,IAAIoP,EAAa,CACpDb,CAACA,GAA0BN,EAAOgB,EAAY,OAC3CC,GACJ,CACC/D,SAAUvrB,GAASurB,UAAYA,EAC/BE,UAAWzrB,GAASyrB,WAAaA,IAGlC,CAAEvgB,KAAM,MAIyBlL,GACpCquB,EAAOgB,EAAY,IACZlE,EAAO2C,OAAOW,GAAkBrO,IAAI,CACvCuO,CAACA,GAA0BN,EAAOgB,EAAY,OAC3CC,GACJ,CACC/D,SAAUvrB,GAASurB,UAAYA,EAC/BE,UAAWzrB,GAASyrB,WAAaA,IAGlC,CAAEvgB,KAAM,MAGvB,KACJ,CACA,KAAKgkB,GACL,KAAKA,GAAyB,CAK1B,MAAMO,EAAYT,IAAiBE,GAC5B7Z,IACQ,CACHnK,KAAMmK,GAAQnK,KAAKwkB,SAAW,KAC9B5E,OAAQzV,EAAOyV,OACf6E,WAAYta,EAAOsa,aAGxBta,GAAWA,EACZua,EAAW/B,EAAWe,eAAeC,oBACrCgB,EAAWhC,EAAWe,eAAeG,kBAErCe,EAAoBpB,EAAaV,OAAOmB,EAAiB,IAE/D,GAD8BW,EAAkBpU,KACtBqQ,MAAO,CAC7B,IAAIgE,EAAqB,GACrBD,EAAkBb,aAClB,gBAAiBa,EAAkBb,cACnCc,EAAqBD,EAAkBb,aAAaI,aAExD,MAAMW,EAAgBD,EAAmBxrB,IAAI,CAAC4pB,EAAO8B,IACrC,IAARA,EACO,CAAE9B,CAACA,GAAQ,CAAE+B,GAAI7B,EAAOuB,KAE5B,CAAEzB,CAACA,GAAQ,CAAE+B,GAAI7B,EAAOwB,EAASI,EAAM,OAGlD,QAA8C,IAA1C9E,EAAO2C,OAAOW,IAAmB0B,KACjC,MAGA7B,EAA8BF,GAD9BR,EAC2C,CAAC4B,EAAaxvB,IACjDquB,EAAOuB,GACAhD,GAAevvB,MAAOyvB,IACzB,MAOMsD,EAAepD,GAPD7B,EAAO2C,OAAOW,GAAkB0B,KAAKX,EAAa,CAClE5R,OAAQ,CAAEyS,IAAKL,GACfM,MAAOtwB,GAASswB,MAChBC,UAAWvwB,GAASuwB,UACpBhF,SAAUvrB,GAASurB,UAAYA,EAC/BE,UAAWzrB,GAASyrB,WAAaA,IAEkBqB,GACvD,OAAO2C,QAAiBW,KAGzB,GAIiCpwB,GACpCquB,EAAOuB,GACAhD,GAAevvB,MAAOyvB,IACzB,MAOMsD,EAAepD,GAPD7B,EAAO2C,OAAOW,GAAkB0B,KAAK,CACrDvS,OAAQ,CAAEyS,IAAKL,GACfM,MAAOtwB,GAASswB,MAChBC,UAAWvwB,GAASuwB,UACpBhF,SAAUvrB,GAASurB,UAAYA,EAC/BE,UAAWzrB,GAASyrB,WAAaA,IAEkBqB,GACvD,OAAO2C,QAAiBW,KAGzB,GAGf,KACJ,CACA,MAAMJ,EAAgBb,EAAiB5qB,IAAI,CAAC4pB,EAAO8B,IACnC,IAARA,EACO,CAAE9B,CAACA,GAAQ,CAAE+B,GAAI7B,EAAOuB,KAE5B,CAAEzB,CAACA,GAAQ,CAAE+B,GAAI7B,EAAOwB,EAASI,EAAM,OAGlD,QAA8C,IAA1C9E,EAAO2C,OAAOW,IAAmB0B,KACjC,MAGA7B,EAA8BF,GAD9BR,EAC2C,CAAC4B,EAAaxvB,IACjDquB,EAAOuB,GACAhD,GAAevvB,MAAOyvB,IACzB,MAOMsD,EAAepD,GAPD7B,EAAO2C,OAAOW,GAAkB0B,KAAKX,EAAa,CAClE5R,OAAQ,CAAEyS,IAAKL,GACfM,MAAOtwB,GAASswB,MAChBC,UAAWvwB,GAASuwB,UACpBhF,SAAUvrB,GAASurB,UAAYA,EAC/BE,UAAWzrB,GAASyrB,WAAaA,IAEkBqB,GACvD,OAAO2C,QAAiBW,KAGzB,GAIiCpwB,GACpCquB,EAAOuB,GACAhD,GAAevvB,MAAOyvB,IACzB,MAOMsD,EAAepD,GAPD7B,EAAO2C,OAAOW,GAAkB0B,KAAK,CACrDvS,OAAQ,CAAEyS,IAAKL,GACfM,MAAOtwB,GAASswB,MAChBC,UAAWvwB,GAASuwB,UACpBhF,SAAUvrB,GAASurB,UAAYA,EAC/BE,UAAWzrB,GAASyrB,WAAaA,IAEkBqB,GACvD,OAAO2C,QAAiBW,KAGzB,GAGf,KACJ,EAER,CACA,MAAO,IAAK/B,KAAWC,IAE/B,CAuGA,SAASkC,GAAuB3kB,EAAoB8hB,EAAW8C,GAC3D,MAAMC,EAAsB,CAAC1H,EAAM2H,KAC/B,MAAOvC,KAAcwC,GAAQ5H,EAAKpmB,MAAM,KAClCiuB,EAASD,EAAK,GACdE,EAA4BjlB,EAAmBiiB,OAAO6C,IACxD9kB,EAAmBklB,UAAUJ,GAC3BK,EAAwBF,GAA2B9C,OACnDU,EAAesC,IAAwB5C,IAAY1S,MAAMqQ,MACzDkF,EAAyBplB,EAAmBiiB,OAAOY,GACnDwC,EAAkBF,IAAwB5C,IAAY1S,MAAMyV,SAC5DC,EAA4BvlB,EAAmBklB,UAAUG,GACzDG,EAA+BJ,EAC/B,QACAG,EACI,WACA,QACV,GAAqC,aAAjCC,EAA6C,CAC7C,IAAIhc,EAAS,GACb,IAAKwb,EACD,MAAMzvB,MAAM,GAAGgtB,2DAAmE8C,KAYtF,OATI7b,EAhHe,MA+Gfwb,EACS,CACLzC,CAACA,GAAYkD,GAAwCF,EAA2BvlB,IAI3E,CACLuiB,CAACA,GAAYsC,EAAoBE,EAAKhZ,KAAK,KAAMsZ,IAGlD7b,CACX,IAC0C,UAAjCgc,EAA0C,CAC/C,IAAIhc,EAAS,GACb,IAAKwb,EACD,MAAMzvB,MAAM,GAAGgtB,qDAA6DM,KAEhF,GAhImB,MAgIfmC,EAAmC,CACnC,MAAMU,EAA+B1lB,EAAmBiiB,OAAOY,GAC/DrZ,EAAS,CACL+Y,CAACA,GAAYoD,GAAqCD,EAA8B1lB,GAExF,MAEIwJ,EAAS,CACL+Y,CAACA,GAAYsC,EAAoBE,EAAKhZ,KAAK,KAAM8W,IAUzD,OAPIsC,EAAsB5C,IAAYzL,UAClCtN,EAAS,CACL+Y,CAACA,GAAY,CACTtL,MAAOzN,EAAO+Y,MAInB/Y,CACX,CACK,CACD,MAAMkZ,EAAayC,IAAwB5C,GACrCqD,EAAqB5lB,EAAmBklB,UAAUJ,GAClDe,EAAgBD,GAAoBzD,SAASI,GACnD,GAAKqD,GAOD,IAAKC,EACD,MAAMtwB,MAAM,GAAGgtB,mCAA2CuC,SARzC,CACrB,MAAMgB,EAAe7F,GAAmBgF,GAA2BroB,SAAS2lB,GAC5E,IAAKG,IAAeoD,EAChB,MAAMvwB,MAAM,GAAGgtB,6BAAqCuC,IAE5D,CAMA,MAAO,CAAEvC,CAACA,GAAYwD,GAC1B,GAEJ,OAAOnB,EAAa7mB,OAAO,CAACioB,EAAW7I,IAAS8I,GAA6BpB,EAAoB1H,EAAM2E,GAAYkE,GAAY,GACnI,CAgBA,SAASE,GAAuBngB,GAC5B,MAAMkI,EAAM,GAcZ,OAbA3c,OAAOwQ,QAAQiE,GAAKrE,QAAQ,EAAE6gB,EAAWxgB,MACjCA,IAAUgkB,GACV9X,EAAI1V,KAAKgqB,GAEa,iBAAVxgB,GAAgC,OAAVA,IAC9BA,GAAOkV,MACPhJ,EAAI1V,KAAKgqB,EAAW,IAAK,QAAS,IAAK2D,GAAuBnkB,EAAMkV,OAAQ,IAAK,KAGjFhJ,EAAI1V,KAAKgqB,EAAW,IAAK2D,GAAuBnkB,GAAQ,QAI7DkM,EAAIlC,KAAK,IACpB,CASA,SAASka,GAA6BrhB,EAAQjU,GAC1C,MAAMw1B,EAAYpgB,GAAQA,GAAsB,iBAARA,EACxC,UAAWnV,KAAOgU,EAETtT,OAAO0e,UAAUoW,eAAeje,KAAKvD,EAAQhU,KAE9CU,OAAO0e,UAAUoW,eAAeje,KAAKxX,EAAQC,IAC7Cu1B,EAASx1B,EAAOC,IAChBq1B,GAA6BrhB,EAAOhU,GAAMD,EAAOC,IAGjDD,EAAOC,GAAOgU,EAAOhU,IAG7B,OAAOD,CACX,CACA,SAAS01B,GAAqBrmB,EAAoB8hB,EAAW8C,GACzD,MAAM0B,EAAkBtmB,EAAmBiiB,OAAOH,GAC5CyE,EAAW5B,GAAuB3kB,EAAoB8hB,EAAW8C,GArL3E,SAAqC0B,GAGjC,MAAMnE,OAAEA,GAAWmE,EACbE,EAAiBl1B,OAAOoc,OAAOyU,GAEhCzpB,IAAI,EAAGmX,OAAM7c,WACd,GAAoB,iBAAT6c,EACP,OAAO7c,EACX,GAAoB,iBAAT6c,EAAmB,CAC1B,GAA0B,iBAAfA,GAAM4W,KACb,OAAOzzB,EACX,GACmC,iBAAnB6c,GAAMyV,SAClB,MAAO,GAAGtyB,KAElB,IAGC+e,OAAOiE,SAGNmK,EAAcF,GAAmBqG,GACvC,OAAO9T,MAAMpf,KAAK,IAAIqF,IAAI+tB,EAAelV,OAAO6O,IACpD,CA6J2FuG,CAA4BJ,IAEnH,OADqBJ,GAAuBK,EAEhD,CACA,SAASI,GAAwB3mB,EAAoBsmB,EAAiBM,EAAgBC,EAAUC,GAC5F,MAAQ9zB,kBAAM+zB,EAAA5E,OAAYA,EAAQY,gBAAgBiE,mBAAEA,EAAAhE,oBAAoBA,EAAAE,kBAAqBA,cAAsB7C,GAAgBiG,EAG7HW,EAAiBj0B,EAAKgE,OAAO,GAAG0hB,cAAgB1lB,EAAKD,MAAM,GAC3Dm0B,EAAuBH,EAAW/vB,OAAO,GAAG0hB,cAAgBqO,EAAWh0B,MAAM,IAC7Eo0B,gBAAEA,EAAAC,UAAiBA,GAAcC,GAAsBT,IACvDhC,aAAEA,GAAiBiC,GAAY,GACrC,IAAIS,EACAC,EAiDAC,EACAC,EACAC,EAlDJ,GAAIP,EACAG,EAAmB,GAAGH,IAAkBC,EAAYF,EAAuBD,aAEtEH,EA2CL,MAAM,IAAIvxB,MAAM,8DA3CA,CAChB,MAAMoyB,WAAEA,EAAAC,GAAYA,EAAAC,GAAIA,EAAK,IAAOf,EACpCQ,EAAmBK,EAenB,IAAIG,EAAc,GAClB,GAAkB,IAAdD,EAAG52B,OAAc,CACjB,MAAO82B,GAAWF,EACZhY,EAAwC,iBAAzBsS,EAAO4F,GAASlY,KAC/BsS,EAAO4F,GAASlY,KAChB,SACAmY,EAAiBC,GAAsBpY,GAC7CiY,EAAc,CACVC,CAACA,GAAU,QAAQC,qBAE3B,SACSH,EAAG52B,OAAS,EAAG,CACpB,MAAMi3B,EAAqBC,GAAeN,GACpCO,EAAU/H,GAAYgI,KAAMjI,GAASA,GAAM/I,YAAYsQ,aAAeA,IAAatQ,YAAYrkB,KACrG80B,EAAc,CACVI,CAACA,GAAqB,QAAQpH,GAAW9tB,KAAQ8tB,GAAWsH,+BAEpE,CACAb,EAAiB,CACbK,CAACA,GAAK,GAAGt2B,OAAO0e,UAAUoW,eAAeje,KAAKga,EAAOyF,GAAI/X,KAAM,QACzDsS,EAAOyF,GAAI/X,KAAK4W,KAChBtE,EAAOyF,GAAI/X,WACdiY,EAEX,CAGA,CAIA,MAAMQ,EAAqBjC,GAAqBrmB,EAAoBhN,EAAM4xB,GAGpE2D,EAAY,CACdvF,CAACA,GAAsB,GAAGb,EAAOa,GAAqBnT,SAEpD2Y,EAAa,GA0BbC,EAAkBC,IACpB,GAAiC,IAA7BxF,EAAkBjyB,OAClB,MAAO,GACX,GAAW,QAAPy3B,EACA,OAAOxF,EAAkBnlB,OAAO,CAACC,EAAKukB,KAClC,MAAMoG,EAAYxG,EAAOI,GAAW1S,KAIpC,MAHW,QAAP6Y,IACA1qB,EAAIukB,GAAa,GAAGoG,MAEjB3qB,GACR,IAIH,GAAiC,IAA7BklB,EAAkBjyB,OAAc,CAEhC,MAAO42B,GAAM3E,EACPrT,EAAmC,iBAApBsS,EAAO0F,GAAIhY,KAAoBsS,EAAO0F,GAAIhY,KAAO,SAChEmY,EAAiBC,GAAsBpY,GAC7C,MAAO,CACHgY,CAACA,GAAK,QAAQG,qBAEtB,CACK,CAED,MAAME,EAAqBC,GAAejF,GAC1C,MAAO,CACHgF,CAACA,GAAqB,QAAQpH,GAAW9tB,sCAEjD,GAYR,OATIg0B,IACA11B,OAAOoZ,OAAO6d,EAAWE,EAAe,QACxCn3B,OAAOoZ,OAAO8d,EAAY,CAGtBxF,CAACA,GAAsB,GAAGb,EAAOa,GAAqBnT,OACtD+Y,cAAe,sBAChBH,EAAe,UAEd7B,GACJ,IAAK,SACL,IAAK,SACL,IAAK,SACDc,IACKA,EAAmB,CAChB9hB,MAAO,GAAGuhB,EAAgBnwB,OAAO,GAAG6xB,oBAChC1B,EAAgBp0B,MAAM,KAAKk0B,YAEvCO,IAAyBA,EAAuB,YAGpD,IAAK,MACDE,IAAqBA,EAAmBa,GACxCd,IAAwBA,EAAsBa,GAGlD,IAAK,OACDZ,IACKA,EAAmB,IACbc,EAOHzW,OAAQ,QAAQkV,eAChBxC,MAAO,MACPC,UAAW,WAEnB8C,IAAyBA,EAAuB,SAChDC,IACKA,EAAsB,WAAWa,4BAG1C,IAAK,cACDZ,IACKA,EAAmB,IACbH,EACHxV,OAAQ,QAAQkV,eAChB2B,cAAe,qBACfnE,MAAO,MACPC,UAAW,WAEnB8C,IAAyBA,EAAuB,SAChDC,IACKA,EAAsB,WAAWa,4BAG1C,IAAK,WACL,IAAK,WACL,IAAK,WACDZ,IACKA,EAAmB,CAChB3V,OAAQ,oBAAoBkV,iBAEpCO,IAAyBA,EAAuB,gBAChDC,IAAwBA,EAAsBa,GAC9C,MAEJ,QACI,MAAM,IAAI/yB,MAAM,sGAOxB,MALwB,GAAGiyB,IAAuBE,EAC5C,IAAIp2B,OAAOwQ,QAAQ4lB,GAAkBhvB,IAAI,EAAE6pB,EAAW1S,KAAU,IAAI0S,MAAc1S,QAClF,QAAQyX,IAAmBI,EAC3B,IAAIp2B,OAAOmc,KAAKia,GAAkBhvB,IAAK6pB,GAAc,GAAGA,OAAeA,QACvE,QAAQkF,OAElB,CACA,SAASqB,GAAsBxC,EAAiByC,EAAWC,EAAKhpB,EAAoB8mB,GAChF,MAAM3E,OAAEA,EAAQY,gBAAgBiE,mBAAEA,sBAAoBhE,EAAAE,kBAAqBA,IAA0BoD,EAC/F2C,EAAS/F,GAAmBjyB,QAAUk3B,GAAejF,GAC3D,IAAIgG,EAAY,GAEhB,OAAQH,GACJ,IAAK,SACDG,EAAY,CACRtjB,MAAOojB,EACDG,GAAuBH,EAAK1C,EAAiBtmB,GAC7C,IAEV,MACJ,IAAK,SAEDkpB,EAAY,CACRtjB,MAAOojB,EACD13B,OAAO83B,YAAY93B,OAAOwQ,QAAQqnB,GAAuBH,EAAK1C,EAAiBtmB,IAAqB+R,OAAO,EAAEwQ,KAIpGJ,EAAOI,IACPJ,EAAOI,GAAW8G,YAClBpJ,GAAmBqG,GAAiB1pB,SAAS2lB,KAEtD,IAEV,MACJ,IAAK,MACL,IAAK,SAEGyG,IACAE,EAAYlC,EACN,CAAChE,KAAwBE,GAAmBnlB,OAAO,CAACC,EAAKukB,KACvDvkB,EAAIukB,GAAayG,EAAIzG,GACdvkB,GACR,IACD,CAAEglB,CAACA,GAAsBgG,EAAIhG,KAErB,WAAd+F,IACAG,EAAY,CAAEtjB,MAAOsjB,IAEzB,MACJ,IAAK,OACGF,GAAKjX,SACLmX,EAAUnX,OAASiX,EAAIjX,QAEvBiX,GAAKJ,gBACLM,EAAUN,cAAgBI,EAAIJ,eAE9BI,GAAOA,EAAIhG,KACXkG,EAAUlG,GAAuBgG,EAAIhG,IAErCiG,GAAUD,GAAOA,EAAIC,KACrBC,EAAUD,GAAUD,EAAIC,IAExBD,GAAKtE,YACLwE,EAAUxE,UAAYsE,EAAItE,WAE1BsE,GAAKvE,QACLyE,EAAUzE,MAAQuE,EAAIvE,OAE1B,MACJ,IAAK,cAAe,CAChB,MAAMmD,GAAEA,EAAAC,GAAIA,EAAK,IAAOf,EAClBwC,EAAmBzB,GAAI52B,QAAUk3B,GAAeN,GACtDqB,EAAUtB,GAAMoB,EAAIpB,GAChB0B,GAAoBN,GAAOA,EAAIM,KAC/BJ,EAAUI,GAAoBN,EAAIM,IAElCN,GAAKjX,SACLmX,EAAUnX,OAASiX,EAAIjX,QAEvBiX,GAAKJ,gBACLM,EAAUN,cAAgBI,EAAIJ,eAE9BI,GAAKtE,YACLwE,EAAUxE,UAAYsE,EAAItE,WAE1BsE,GAAKvE,QACLyE,EAAUzE,MAAQuE,EAAIvE,OAE1B,KACJ,CACA,IAAK,WACL,IAAK,WACL,IAAK,WACGuE,GAAKjX,SACLmX,EAAY,CAAEnX,OAAQiX,EAAIjX,SAE9B,MACJ,IAAK,eACD,MAAM,IAAIxc,MAAM,4FACpB,QAEI,MAAM,IAAIA,MAAM,6BADQwzB,KAIhC,OAAOG,CACX,CAeA,SAASC,GAAuBI,EAAerJ,EAAOlgB,GAClD,MAAMmiB,OAAEA,GAAWjC,EACbsJ,EAAa,GAiCnB,OAhCAl4B,OAAOwQ,QAAQynB,GAAe7nB,QAAQ,EAAE+nB,EAAgBC,MACpD,MAAMf,EAAYxG,EAAOsH,IAAiB5Z,KACpC+S,EAAmB+F,GAAWzI,MACpC,GAAI0C,EAAkB,CAClB,MAAMQ,EAAcjB,EAAOsH,IAAiBrG,YAEtCuG,EADkB3pB,EAAmBiiB,OAAOW,GACPG,eAC3C,GAAIK,GAAaC,iBAAmBA,GAAwB,CACxD,MAAMuG,EAAoBxG,EAC1BwG,EAAkBpG,YAAY9hB,QAAQ,CAACmoB,EAAYzF,KAC/C,MAAM0F,EAAsBF,EAAkBrG,eAAea,GAC7DoF,EAAWK,GAAcH,EAAWI,IAE5C,CACA,GAAI1G,GAAaC,iBAAmBA,GAA2B,CAC9BD,EACRI,YAAY9hB,QAAQ,CAACmoB,EAAYzF,KAClD,GAAY,IAARA,EAAW,CACX,MAAM0F,EAAsBH,EAAmB3G,oBAC/CwG,EAAWK,GAAcH,EAAWI,EACxC,KACK,CACD,MAAMA,EAAsBH,EAAmBzG,kBAAkBkB,EAAM,GACvEoF,EAAWK,GAAcH,EAAWI,EACxC,GAER,CACJ,MAEIN,EAAWC,GAAkBC,IAG9BF,CACX,CAUA,SAASO,GAAezK,EAAQD,EAAclrB,EAAU,IACpD,MAAM61B,EAAY3K,EAAaC,GAC/B,MAAO,CACHI,SAAUvrB,EAAQurB,UAAYsK,EAAUtK,SACxCE,UAAWzrB,EAAQyrB,WAAaoK,EAAUpK,UAElD,CAOA,SAASqK,GAAiB3K,EAAQD,EAAc6K,GAC5C,IAAInK,EAAUV,EAAaC,GAAQS,SAAW,GAM9C,OAHImK,IACAnK,EAAUmK,GAEPnK,CACX,CC77BA,SAASoK,GAAuBr1B,GAC5B,GAAIA,GAAOmqB,OAEP,MAAO,IACAnqB,EACHuK,KAAM,IAKV,MAAMvK,CAEd,CAIA,SAASs1B,GAA2Bt1B,GAChC,GAAIA,EAAMmqB,OAEN,MAAO,IACAnqB,EACHuK,KAAM,MAKV,MAAMvK,CAEd,CCGA,SAASu1B,GAAwBC,GAC7B,OAAOA,EACD,CAAEC,CAACA,IAA+BD,QAClC,CACV,CC4BA,SAASE,GAAgBlL,EAAQtf,EAAoByqB,EAAe1B,EAAW2B,EAAYrL,EAAciL,GAGrG,MAAMK,OAAsC,IAAxB5B,EAAU/3B,UA6B9B,MA5BW,IAAI4jB,KAEX,MAAMzgB,EAAUygB,EAAKA,EAAK3jB,OAAS,GACnC,IAAI0yB,EACAqF,EACJ,GAAI0B,EAAY,CACZ,IArEa,CAAC1B,GACc,iBAAtBA,GAAK5d,OAAOrJ,MAoEd6oB,CAAiBhW,EAAK,IAItB,MAAM,IAAIrf,MAAM,oCAAoCwzB,EAAU/1B,8BAH9D2wB,EAAc/O,EAAK,EAK3B,CASA,OARI+V,IAEI3B,EADA0B,EACM9V,EAAK,GAGLA,EAAK,IAGG,iBAAlB6V,EAmTZ,SAAyBnL,EAAQtf,EAAoB+oB,EAAW1J,EAAczK,EAAMzgB,EAASm2B,GACzF,MAAMG,EAAgB,gBACdz3B,KAAM63B,GAAkB9B,EAC1BruB,EAAOqvB,GAAezK,EAAQD,EAAclrB,GAC5C4rB,EAAUkK,GAAiB3K,EAAQD,EAAclrB,GAAS4rB,SAC1D+K,EAAkBC,GAAehC,GACjCiC,EAAkBC,GAAelC,GACjCnE,EAAesG,GAAsBlrB,EAAoB+oB,GACzDoC,EAAsBC,GAAerC,EAAUlZ,KAAM,SACrDkZ,EAAUlZ,KAAKqQ,WACf,EACAmL,EAAQ,SACZZ,EAAca,sBAAsBR,cAClCD,IAAgBG,KAAmBpG,eAGjCsE,EAAYqC,GAAmBxC,EAAWnU,GAC1C4W,EAAoBnB,GAAwBC,GAC5CmB,EAAanM,EAAOoM,QAAQ,IAC3BhxB,EACH2wB,QACAnC,eACGsC,GACJzL,GACH,OAAO0L,EAAW/hB,KAAKhR,EAAKqJ,IACxB,MAAOnR,GAAOU,OAAOmc,KAAK1L,EAAM1C,MAC1BA,EAAO0C,EAAM1C,KAAKzO,IACjB+6B,GAAeR,EAChBtJ,GAAgBvC,EAAQ6L,EAAqB,CAAC9rB,GAAOW,EAAoBtF,EAAKglB,SAAUhlB,EAAKklB,WAC7F,CAACvgB,GACP,OAAOssB,IAEf,CAlVmBC,CAEPtM,EAAQtf,EAAoB+oB,EAAW1J,EAAc2J,EAAK70B,EAASm2B,GAsL/E,SAAahL,EAAQtf,EAAoByqB,EAAe1B,EAAW1J,EAAczK,EAAMzgB,EAAS4tB,EAASuI,GACrG,OAAOvJ,GAAevvB,MAAOyvB,IACzB,MAAQjuB,KAAM63B,GAAkB9B,EAC1BruB,EAAOqvB,GAAezK,EAAQD,EAAclrB,GAC5C4rB,EAAUkK,GAAiB3K,EAAQD,EAAclrB,GAAS4rB,SAC1D+K,EAAkBC,GAAehC,GACjCiC,EAAkBC,GAAelC,GACjCnE,EAAesG,GAAsBlrB,EAAoB+oB,GACzDoC,EAAsBC,GAAerC,EAAUlZ,KAAM,SACrDkZ,EAAUlZ,KAAKqQ,WACf,EACAmL,EAAQ,SAChBZ,EAAca,sBAAsBR,cAClCD,IAAgBG,KAAmBpG,eAG7BsE,EAAYqC,GAAmBxC,EAAWnU,GAC1C4W,EAAoBnB,GAAwBC,GAClD,IACI,MAYMuB,EAAkB1K,GAZJY,EACdzC,EAAOoM,QAAQ3J,EAAS,IACnBrnB,EACH2wB,QACAnC,aACDnJ,GACDT,EAAOoM,QAAQ,IACVhxB,EACH2wB,QACAnC,eACGsC,GACJzL,GACmDkB,IACpD5hB,KAAEA,EAAAykB,WAAMA,SAAqB+H,EAEnC,GAAIxsB,EAAM,CACN,MAAOzO,GAAOU,OAAOmc,KAAKpO,GACpBysB,EAAgBtZ,MAAMsE,QAAQzX,EAAKzO,IAKnCm7B,EAAkBD,EAClBzsB,EAAKzO,GAAKmhB,OAAQ/N,GAAMA,GACxB3E,EAAKzO,GAGL+6B,EAAcR,EACdtJ,GAAgBvC,EAAQ6L,EAAqBW,EAAgBC,EAAkB,CAACA,GAAkB/rB,EAAoBtF,EAAKglB,SAAUhlB,EAAKklB,YAAamC,GACvJgK,EACN,MAAO,CACH1sB,MAAOysB,GAAiBtZ,MAAMsE,QAAQ6U,GAChCA,EAAY9H,QACZ8H,EACN7H,aAER,CAEI,MAAO,CAAEzkB,KAAM,KAAMykB,aAE7B,OACOhvB,GAQH,MAAMuK,KAAEA,EAAA4f,OAAMA,GAAWnqB,EAIzB,GAAIuK,GAAqC,IAA7B/N,OAAOmc,KAAKpO,GAAMpO,QAAgBguB,EAAQ,CAClD,MAAOruB,GAAOU,OAAOmc,KAAKpO,GACpBysB,EAAgBtZ,MAAMsE,QAAQzX,EAAKzO,IAKnCm7B,EAAkBD,EAClBzsB,EAAKzO,GAAKmhB,OAAQ/N,GAAMA,GACxB3E,EAAKzO,GAKX,GAAIm7B,EAAiB,CAGjB,MAAMJ,EAAcR,EACdtJ,GAAgBvC,EAAQ6L,EAAqBW,EAAgBC,EAAkB,CAACA,GAAkB/rB,EAAoBtF,EAAKglB,SAAUhlB,EAAKklB,YAAamC,GACvJgK,EACN,MAAO,CACH1sB,MAAOysB,GAAiBtZ,MAAMsE,QAAQ6U,GAChCA,EAAY9H,QACZ8H,EACN1M,SAER,CAGI,OAAOmL,GAA2Bt1B,EAE1C,CAGI,OAAOs1B,GAA2Bt1B,EAE1C,GAER,CAlSek3B,CAAI1M,EAAQtf,EAAoByqB,EAAe1B,EAAW1J,EAAc2J,EAAK70B,EAASwvB,EAAa2G,GAGlH,CAeA,SAASc,GAAejW,EAAGmN,GACvB,MAA2B,iBAAbnN,EAAEmN,EACpB,CAWA,SAAS2J,IAAuBpc,KAAEA,EAAAqc,WAAMA,IACpC,MAAMC,EAAeD,EAAa,IAAM,GACxC,OAZJ,SAAoBrc,GAChB,OAAOA,aAAgBve,QAAU,SAAUue,CAC/C,CAUQuc,CAAWvc,GACJ,GAAGA,EAAK4W,OAAO0F,IAV9B,SAAqBtc,GACjB,OAAOA,aAAgBve,QAAU,UAAWue,CAChD,CAUQwc,CAAYxc,GACL,GAAGA,EAAKjK,QAAQumB,IAEpB,GAAGtc,IAAOsc,GACrB,CAoBA,SAASpB,GAAehC,GACpB,QAA4B,IAAxBA,EAAU/3B,UACV,MAAO,GAEX,MAAM4jB,EAAOtjB,OAAOwQ,QAAQinB,EAAU/3B,WACjC0H,IAAI,EAAEilB,EAAG2O,MACV,MAAMC,EAAWN,GAAuBK,GAIxC,MAAO,IAAI3O,MAHO2O,EAASxV,QACrB,IAAIyV,KAAYD,EAASE,gBAAkB,GAAK,MAChDD,MAGLxgB,KAAK,MACV,OAAO6I,EAAK3jB,OAAS,EAAI,IAAI2jB,KAAU,EAC3C,CAoBA,SAASqW,GAAelC,GACpB,QAA4B,IAAxBA,EAAU/3B,UACV,MAAO,GAEX,MAAM4jB,EAAOtjB,OAAOmc,KAAKsb,EAAU/3B,WAC9B0H,IAAKilB,GAAM,GAAGA,OAAOA,KACrB5R,KAAK,MACV,OAAO6I,EAAK3jB,OAAS,EAAI,IAAI2jB,KAAU,EAC3C,CAwBA,SAASsW,GAAsBlrB,EAAoB+oB,GAC/C,GAAIqC,GAAerC,EAAW,SAC1BqC,GAAerC,EAAUlZ,KAAM,QAC/B,MAAO,GACX,GACSub,GAAerC,EAAUlZ,KAAM,YAAa,CACjD,MAAMyV,EAAWtlB,EAAmBklB,UAAU6D,EAAUlZ,KAAKyV,UAC7D,MAAO,IAAIY,GAAuBT,GAAwCH,EAAUtlB,MACxF,QACSorB,GAAerC,EAAUlZ,KAAM,SAC7B,IAAIwW,GAAqBrmB,EAAoB+oB,EAAUlZ,KAAKqQ,UAG5D,EAEf,CASA,SAASqL,GAAmBxC,EAAWnU,EAAO,IAC1C,MAAMsU,EAAY,GAClB,QAA4B,IAAxBH,EAAU/3B,UACV,OAAOk4B,EAEX,UAAWuD,KAAUn7B,OAAOoc,OAAOqb,EAAU/3B,WACzC,QAAiC,IAAtB4jB,EAAK6X,EAAOz5B,MACnBk2B,EAAUuD,EAAOz5B,MAAQ4hB,EAAK6X,EAAOz5B,WACzC,GACSy5B,EAAOP,WAGZ,MAAM,IAAI32B,MAAM,GAAGwzB,EAAU/1B,4BAA4By5B,EAAOz5B,SAGxE,OAAOk2B,CACX,CClQA,SAASwD,GAAiCpN,EAAQlb,EAAQuoB,EAAgBtN,GAItE,IAAKjb,EACD,MAAO,GAEX,MAAMpE,EAAqBoE,EAAOpE,mBAElC,IAAKA,EACD,MAAO,GAIX,MAAM4sB,EAAa5sB,EAAmB2sB,GACtC,IAAKC,EACD,MAAO,GAEX,MAAMC,EAAM,GACNnC,EAA8C,OAAjCrL,EAAaC,GAAQC,QACxC,UAAWwJ,KAAaz3B,OAAOoc,OAAOkf,GAClCC,EAAI9D,EAAU/1B,MAAQw3B,GAAgBlL,EAAQtf,EAAoB8sB,GAAiBH,GAAiB5D,EAAW2B,EAAYrL,GAE/H,OAAOwN,CACX,CCzBA,SAASE,GAAWzN,EAAQtf,EAAoBkgB,EAAO6I,EAAW1J,EAAcqL,GAAa,EAAOJ,GAOhG,OAAOI,EANgB,CAAC/G,EAAaqF,EAAK70B,IAC/B64B,GAAK1N,EAAQtf,EAAoBkgB,EAAO8I,EAAK70B,EAAS40B,EAAW1J,EAAcsE,EAAa2G,GAE3F,CAACtB,EAAK70B,IACP64B,GAAK1N,EAAQtf,EAAoBkgB,EAAO8I,EAAK70B,EAAS40B,EAAW1J,OAAc,EAAWiL,EAGzG,CACA,SAAS0C,GAAK1N,EAAQtf,EAAoBkgB,EAAO8I,EAAK70B,EAAS40B,EAAW1J,EAAc0C,EAASuI,GAC7F,OAAOvJ,GAAevvB,MAAOyvB,IACzB,MAAQjuB,QAASktB,EACXmL,EAAQ1E,GAAwB3mB,EAAoBkgB,EAAO6I,EAAW50B,GACtE+0B,EAAYJ,GAAsB5I,EAAO6I,EAAWC,EAAKhpB,GACzDtF,EAAOqvB,GAAezK,EAAQD,EAAclrB,GAC5C4rB,EAAUkK,GAAiB3K,EAAQD,EAAclrB,GAAS4rB,SAC1DyL,EAAoBnB,GAAwBC,GAClD,IACI,MAYMuB,EAAkB1K,GAZJY,EACdzC,EAAOoM,QAAQ3J,EAAS,IACnBrnB,EACH2wB,QACAnC,aACDnJ,GACDT,EAAOoM,QAAQ,IACVhxB,EACH2wB,QACAnC,eACGsC,GACJzL,GACmDkB,IACpD5hB,KAAEA,EAAAykB,WAAMA,SAAqB+H,EAEnC,GAAIxsB,EAAM,CACN,MAAOzO,GAAOU,OAAOmc,KAAKpO,GACpB0sB,EAAkBkB,GAAajtB,EAAoBhN,EAAMqM,EAAKzO,IACpE,GAAwB,OAApBm7B,EACA,MAAO,CAAE1sB,KAAM,KAAMykB,cACzB,GACS3vB,GAASywB,aACd,MAAO,CAAEvlB,KAAM0sB,EAAiBjI,cAE/B,CAED,MAAO6H,GAAe9J,GAAgBvC,EAAQtsB,EAAM,CAAC+4B,GAAkB/rB,EAAoBtF,EAAKglB,SAAUhlB,EAAKklB,YAAamC,GAC5H,MAAO,CAAE1iB,KAAMssB,EAAa7H,aAChC,CACJ,CAEI,MAAO,CAAEzkB,KAAM,KAAMykB,aAE7B,OACOhvB,GAQH,MAAMuK,KAAEA,EAAA4f,OAAMA,GAAWnqB,EAIzB,GAAIuK,GAAqC,IAA7B/N,OAAOmc,KAAKpO,GAAMpO,QAAgBguB,EAAQ,CAClD,MAAOruB,GAAOU,OAAOmc,KAAKpO,GACpB0sB,EAAkBkB,GAAajtB,EAAoBhN,EAAMqM,EAAKzO,IAKpE,GAAIm7B,EAAiB,CACjB,GAAI53B,GAASywB,aACT,MAAO,CAAEvlB,KAAM0sB,EAAiB9M,UAE/B,CAED,MAAO0M,GAAe9J,GAAgBvC,EAAQtsB,EAAM,CAAC+4B,GAAkB/rB,EAAoBtF,EAAKglB,SAAUhlB,EAAKklB,YAAamC,GAC5H,MAAO,CAAE1iB,KAAMssB,EAAa1M,SAChC,CACJ,CAGI,OAAOmL,GAA2Bt1B,EAE1C,CAGI,OAAOs1B,GAA2Bt1B,EAE1C,GAER,CC5FA,SAASo4B,GAAY5N,EAAQtf,EAAoBkgB,EAAOb,EAAc0C,GAAU,EAAOuI,GAOnF,OAAOvI,EANiB,CAAC4B,EAAa/O,IAC3BuY,GAAM7N,EAAQtf,EAAoBkgB,EAAOb,EAAczK,EAAM+O,EAAa2G,GAEvE1V,GACHuY,GAAM7N,EAAQtf,EAAoBkgB,EAAOb,EAAczK,OAAM,EAAW0V,EAGvF,CACA,SAAS6C,GAAM7N,EAAQtf,EAAoBkgB,EAAOb,EAAczK,EAAM+O,EAAa2G,GAC/E,OAAOvJ,GAAevvB,MAAOyvB,IACzB,MAAQjuB,QAASktB,EACXmL,EAAQ1E,GAAwB3mB,EAAoBkgB,EAAO,OAAQtL,GACnEsU,EAAYJ,GAAsB5I,EAAO,OAAQtL,EAAM5U,GACvDtF,EAAOqvB,GAAezK,EAAQD,EAAczK,GAC5CmL,EAAUkK,GAAiB3K,EAAQD,EAAczK,GAAMmL,SACvDyL,EAAoBnB,GAAwBC,GAClD,IACI,MAYMuB,EAAkB1K,GAZJwC,EACdrE,EAAOoM,QAAQ/H,EAAa,IACvBjpB,EACH2wB,QACAnC,aACDnJ,GACDT,EAAOoM,QAAQ,IACVhxB,EACH2wB,QACAnC,eACGsC,GACJzL,GACmDkB,IACpD5hB,KAAEA,EAAAykB,WAAMA,SAAqB+H,EAEnC,QAAa,IAATxsB,EAAoB,CACpB,MAAOzO,GAAOU,OAAOmc,KAAKpO,GAC1B,GAAIA,EAAKzO,GAAKqmB,MAAO,CACjB,MAAM8U,EAAkB1sB,EAAKzO,GAAKqmB,MAAMve,IAAKqJ,GAAUkrB,GAAajtB,EAAoBhN,EAAM+O,IAE9F,GAAI6S,GAAMgQ,aACN,MAAO,CACHvlB,KAAM0sB,EACNrH,UAAWrlB,EAAKzO,GAAK8zB,UACrBZ,cAKJ,MAAO,CACHzkB,KAFgBwiB,GAAgBvC,EAAQtsB,EAAM+4B,EAAiB/rB,EAAoBtF,EAAKglB,SAAUhlB,EAAKklB,YAAa+D,GAGpHe,UAAWrlB,EAAKzO,GAAK8zB,UACrBZ,aAGZ,CACA,MAAO,CACHzkB,KAAMA,EAAKzO,GACX8zB,UAAWrlB,EAAKzO,GAAK8zB,UACrBZ,aAER,CACJ,OACOhvB,GAQH,MAAMuK,KAAEA,EAAA4f,OAAMA,GAAWnqB,EAEzB,GAAIuK,SAE6B,IAA7B/N,OAAOmc,KAAKpO,GAAMpO,QAClBguB,EAAQ,CACR,MAAOruB,GAAOU,OAAOmc,KAAKpO,GAC1B,GAAIA,EAAKzO,IAAMqmB,MAAO,CAClB,MAAM8U,EAAkB1sB,EAAKzO,GAAKqmB,MAAMve,IAAKqJ,GAAUkrB,GAAajtB,EAAoBhN,EAAM+O,IAK9F,GAAIgqB,EAAiB,CAEjB,GAAInX,GAAMgQ,aACN,MAAO,CACHvlB,KAAM0sB,EACNrH,UAAWrlB,EAAKzO,IAAM8zB,UACtBzF,UAMJ,MAAO,CACH5f,KAHgBwiB,GAAgBvC,EAAQtsB,EAAM+4B,EAAiB/rB,EAAoBtF,EAAKglB,SAAUhlB,EAAKklB,YAAa+D,GAIpHe,UAAWrlB,EAAKzO,IAAM8zB,UACtBzF,SAGZ,CACA,MAAO,CACH5f,KAAMA,EAAKzO,GACX8zB,UAAWrlB,EAAKzO,IAAM8zB,UACtBzF,SAER,CAGI,OAAOkL,GAAuBr1B,EAEtC,CAGI,OAAOq1B,GAAuBr1B,EAEtC,GAER,CC1HO,SAASs4B,GAASC,GACrB,IAAIznB,EAEAA,EADkB,iBAAXynB,ECJS,CAACznB,IAAU,IAAI0nB,aAAch7B,OAAOsT,GDK5C1D,CAASmrB,GAGTA,EAEZ,MAAM7lB,EAA+B,iBAAV5B,GAA8C,iBAAjBA,EAAM3U,OACxDs8B,EAAgC,iBAAV3nB,GACI,iBAArBA,EAAMvD,YACe,iBAArBuD,EAAMtD,WACjB,IAAKkF,IAAgB+lB,EACjB,MAAM,IAAIh4B,MAAM,oFAEpB,IAAI+c,EAAM,GACV,QAASjhB,EAAI,EAAGA,EAAIuU,EAAM3U,OAAQI,GAAK,EAAG,CACtC,IAAIm8B,EAAO,EACPC,EAAY,EAChB,QAASC,EAAIr8B,EAAGozB,EAAQtuB,KAAK4gB,IAAI1lB,EAAI,EAAGuU,EAAM3U,QAASy8B,EAAIjJ,EAAOiJ,IAC9DF,GAAQ5nB,EAAM8nB,IEGN,GFHcjJ,EAAQiJ,EAAI,GAClCD,GEEQ,EFAZ,MAAME,EAAkBx3B,KAAKy3B,KAAKH,EEDpB,GFEdD,IEFc,EFELG,EAAkCF,EAC3C,QAAS9P,EAAI,EAAGA,GAAKgQ,EAAiBhQ,IAAK,CACvC,MAAM5kB,EEJI,GFIM40B,EAAkBhQ,GAClCrL,GAAOub,IAAiBL,EEHb,IFGuCz0B,IAAYA,EAClE,CACAuZ,GAAO,KAAKvf,MAAM,EAAG,EAAI46B,EAC7B,CACA,OAAOrb,CACX,CG7BA,SAASwb,GAAkBxO,EAAQtf,EAAoBkgB,EAAO4G,EAAWzH,EAAc0C,GAAU,GAa7F,OAAOA,EAZuB,CAAC4B,EAAa/O,EAAMzgB,IACvC45B,GAAYzO,EAAQtf,EAAoBkgB,EAAO4G,EAAWzH,EAAc,IACxEzK,KACAzgB,GACJwvB,GAEY,CAAC/O,EAAMzgB,IACf45B,GAAYzO,EAAQtf,EAAoBkgB,EAAO4G,EAAWzH,EAAc,IACxEzK,KACAzgB,GAIf,CAmBA,SAAS45B,GAAYzO,EAAQtf,EAAoBkgB,EAAO4G,EAAWzH,EAAczK,EAAM+O,GACnF,OAAO5C,GAAevvB,MAAOyvB,IACzB,MAAQjuB,QAASktB,EACXmL,EAAQ1E,GAAwB3mB,EAAoBkgB,EAAO,cAAetL,EAAMkS,GAChFoC,EAAYJ,GAAsB5I,EAAO,cAAetL,EAAM5U,EAAoB8mB,GAClFpsB,EAAOqvB,GAAezK,EAAQD,EAAczK,GAC5CoZ,EAAoBjC,GAAoBlK,GAAgBvC,EAAQtsB,EAAM+4B,EAAiB/rB,EAAoBtF,EAAKglB,SAAUhlB,EAAKklB,YAAa+D,GAClJ,IACI,MAAM5D,EAAUkK,GAAiB3K,EAAQD,EAAczK,GAAMmL,SAMvDkO,EAAc,CALE,IACfvzB,EACH2wB,QACAnC,aAEgCnJ,QAChB,IAAhB4D,GACAsK,EAAYC,QAAQvK,GAExB,MACMkI,EAAkB1K,GADJ7B,EAAOoM,WAAWuC,GACoBhN,GACpDkN,QAAiBtC,EACvB,QAAsB,IAAlBsC,EAAS9uB,KACT,OAxChB,SAAgC+uB,EAAkBtM,EAAWtY,EAAQob,EAAcoJ,GAC/E,MAAM3uB,KAAEA,EAAAykB,WAAMA,GAAeta,GACtB5Y,GAAOU,OAAOmc,KAAKpO,GAC1B,GAAIA,EAAKzO,GAAKqmB,MAAO,CACjB,MAAM8U,EAAkB1sB,EAAKzO,GAAKqmB,MAAMve,IAAKqJ,GAAUkrB,GAAamB,EAAkBtM,EAAW/f,IACjG,MAAO,CACH1C,KAAMulB,EAAemH,EAAkBiC,EAAiBjC,GACxDrH,UAAWrlB,EAAKzO,GAAK8zB,UACrBZ,aAER,CAEA,MAAO,CACHzkB,KAAMA,EAAKzO,GACX8zB,UAAWrlB,EAAKzO,GAAK8zB,UACrBZ,aAER,CAuBuBuK,CAAuBruB,EAAoBhN,EAAMm7B,EAAUvZ,GAAMgQ,aAAcoJ,EAE9F,OACOl5B,GAUH,MAAMuK,KAAEA,EAAA4f,OAAMA,GAAWnqB,EAEzB,GAAIuK,SAE6B,IAA7B/N,OAAOmc,KAAKpO,GAAMpO,QAClBguB,EAAQ,CACR,MAAOruB,GAAOU,OAAOmc,KAAKpO,GAC1B,GAAIA,EAAKzO,IAAMqmB,MAAO,CAClB,MAAM8U,EAAkB1sB,EAAKzO,IAAMqmB,MAAMve,IAAKqJ,GAAUkrB,GAAajtB,EAAoBhN,EAAM+O,IAK/F,GAAIgqB,EACA,MAAO,CACH1sB,KAAMuV,GAAMgQ,aACNmH,EACAiC,EAAiBjC,GACvBrH,UAAWrlB,EAAKzO,IAAM8zB,UAGlC,CAEA,MAAO,CACHrlB,KAAMA,EAAKzO,GACX8zB,UAAWrlB,EAAKzO,IAAM8zB,UAE9B,CAGI,OAAOyF,GAAuBr1B,EAEtC,GAER,CCtGA,SAASw5B,GAAoBhP,EAAQtf,EAAoBkgB,EAAO6I,EAAW1J,GACvE,MAAQrsB,QAASktB,EA2BjB,OA1BsBtL,IAClB,MAAMyW,EAAQ1E,GAAwB3mB,EAAoBkgB,EAAO6I,EAAWnU,GACtEsU,EAAYJ,GAAsB5I,EAAO6I,EAAWnU,EAAM5U,GAC1DtF,EAAOqvB,GAAezK,EAAQD,EAAczK,GAC5CmL,EAAUkK,GAAiB3K,EAAQD,EAAczK,GAAMmL,SAM7D,OALmBT,EAAOoM,QAAQ,IAC3BhxB,EACH2wB,QACAnC,aACDnJ,GACerW,KAAKhR,EAAKqJ,IACxB,MAAOnR,GAAOU,OAAOmc,KAAK1L,EAAM1C,MAC1BA,EAAO0C,EAAM1C,KAAKzO,GAClBm7B,EAAkBkB,GAAajtB,EAAoBhN,EAAMqM,GAC/D,GAAwB,OAApB0sB,EACA,OAAO,KACX,GACSnX,GAAMgQ,aACX,OAAOmH,EAEN,CACD,MAAOJ,GAAe9J,GAAgBvC,EAAQtsB,EAAM,CAAC+4B,GAAkB/rB,EAAoBtF,EAAKglB,SAAUhlB,EAAKklB,WAC/G,OAAO+L,CACX,KAIZ,CCxBA,SAAS4C,GAAkBC,EAAQC,EAAUC,GACzC,MAAMC,EAAer9B,OAAO83B,YAAYsF,EAAUh2B,IAAK6pB,GAAc,CAACA,EAAWiM,EAAOjM,MACxF,QAASlxB,EAAI,EAAGA,EAAIo9B,EAASx9B,OAAQI,IACjC,GAAIC,OAAOmc,KAAKkhB,GAAc9N,MAAOlD,GAAMgR,EAAahR,KAAO8Q,EAASp9B,GAAGssB,IACvE,OAAOtsB,EAGf,OAAO,CACX,CCZA,SAASu9B,GAAoB3M,EAAQ/B,GACjC,MAAQltB,QAASktB,EA4GjB,OA3GsB8I,GAAQ,IAAI5hB,GAAYC,IAsC1C,SAASwnB,EAAeC,GACpB,UAAWp9B,KAAWo9B,EAAU,CAC5B,MAAM1K,EAAMmK,GAAkB78B,EAAQsR,KAAMiU,EAAO8X,GACnD,OAAQr9B,EAAQme,MACZ,IAAK,SACGuU,EAAM,GACNnN,EAAM1e,KAAK7G,EAAQsR,MACvB,MACJ,IAAK,SACGohB,GAAO,IACPnN,EAAMmN,GAAO1yB,EAAQsR,MACzB,MACJ,IAAK,SACGohB,GAAO,GACPnN,EAAM/T,OAAOkhB,EAAK,GACtB,MACJ,QACI4K,QAAQl6B,MAAM,wCAAyCpD,GAEnE,CACA2V,EAAW9C,KAAK,CACZ0S,QACAgY,UAAU,GAElB,CA5DA,MAAMhY,EAAQ,GAGRiY,EAAe,GAIrB,IAAIC,EAAkB,IAAIL,IACfI,EAAa32B,QAAQu2B,GAGhC,MAAMM,EAAcnN,EAAOjvB,GAAMq8B,SAASrG,GAAKzhB,UAAU,CACrD,IAAAhD,CAAKvB,GACDmsB,EAAgB,CAAEnsB,OAAM6M,KAAM,UAClC,EACA,KAAA/a,CAAMA,GACFuS,EAAWvS,MAAM,CAAE+a,KAAM,WAAY/a,SACzC,IAEEw6B,EAAcrN,EAAOjvB,GAAMu8B,SAASvG,GAAKzhB,UAAU,CACrD,IAAAhD,CAAKvB,GACDmsB,EAAgB,CAAEnsB,OAAM6M,KAAM,UAClC,EACA,KAAA/a,CAAMA,GACFuS,EAAWvS,MAAM,CAAE+a,KAAM,WAAY/a,SACzC,IAEE06B,EAAcvN,EAAOjvB,GAAMy8B,SAASzG,GAAKzhB,UAAU,CACrD,IAAAhD,CAAKvB,GACDmsB,EAAgB,CAAEnsB,OAAM6M,KAAM,UAClC,EACA,KAAA/a,CAAMA,GACFuS,EAAWvS,MAAM,CAAE+a,KAAM,WAAY/a,SACzC,IA4BEi6B,EChEd,SAAyB7O,GACrB,MAAM8C,oBAAEA,EAAAE,kBAAqBA,GAAsBhD,EAAM6C,eACzD,MAAO,CAACC,KAAwBE,EACpC,CD6DyBwM,CAAgBxP,GAmCjC,MAjCA,WACI,IAAIyP,GAAY,EACZjL,EAAY,KAChB,MAAQrd,EAAWI,SAAWkoB,GAAajL,IAAY,CACnDiL,GAAY,EACZ,MAAQtwB,KAAMuwB,EAAA3Q,OAAMA,EAAQyF,UAAWmL,SAAsB5N,EAAOjvB,GAAMsxB,KAAK,IAAK0E,EAAKtE,cACzFA,EAAYmL,EACZ5Y,EAAM1e,QAAQq3B,GAGd,MAAMX,EAAmC,IAAxBC,EAAaj+B,QAAW,MACpCyzB,EAKL,GAJArd,EAAW9C,KAAK,CACZ0S,QACAgY,aAEAzc,MAAMsE,QAAQmI,GACd,UAAWnqB,KAASmqB,EAChB5X,EAAWvS,MAAMA,EAG7B,CAEIo6B,EAAaj+B,OAAS,GACtB49B,EAAeK,GAGnBC,EAAkB,IAAIL,KAClBD,EAAeC,GACR7X,EAAMhmB,OAErB,EA/BA,GAiCO,KAEHm+B,EAAY7rB,cACZ+rB,EAAY/rB,cACZisB,EAAYjsB,gBAMxB,CE3GA,SAASusB,GAAkBxQ,EAAQyQ,EAAkB1Q,GASjD,OhBOJ,SAAmCC,GAC/B,MAAM0Q,EAAc1Q,EAAO2Q,OAAO52B,KAAKimB,GACvCA,EAAO2Q,OAAS,SAAUvoB,EAAShW,GAC/B,MAAMw+B,MAAcz3B,IACpB,IAAI03B,EAAgBzoB,EACpB,KAAOyoB,GAAiB7O,GAAWhN,IAAI6b,IAAgB,CACnD,GAAID,EAAQ5b,IAAI6b,GACZ,MAAM,IAAI56B,MAAM,oGACpB26B,EAAQ5sB,IAAI6sB,GACZA,EAAgB7O,GAAW/M,IAAI4b,EACnC,CAGA,OAAOH,EAAYG,EAAez+B,EACtC,CACJ,CgB9BI0+B,CAA0B9Q,GAC1BA,EAAO2C,OCJX,SAAgC3C,EAAQ+Q,EAAkBhR,GACtD,MAAM4C,EAAS,GACTjiB,EAAqBqwB,EAAiBrwB,mBAC5C,IAAKA,EACD,MAAO,GAEX,MAAMswB,EAAmB,CAAC,WAAY,WAAY,YAClD,UAAWpQ,KAAS5uB,OAAOoc,OAAO1N,EAAmBiiB,QAAS,CAC1D,MAAQjvB,QAASktB,EACjB+B,EAAOjvB,GAAQ,GACf,MAAMu9B,EAAkBC,GAAmBxwB,EAAoBhN,GAC/D1B,OAAOwQ,QAAQyuB,GAAiB7uB,QAAQ,EAAE9Q,GAAOu2B,uBAC7C,MAAM4B,EAAYn4B,EACA,SAAdm4B,EACA9G,EAAOjvB,GAAMm0B,GAAmB+F,GAAY5N,EAAQtf,EAAoBkgB,EAAOb,GAE1EiR,EAAiB1zB,SAASmsB,GAC/B9G,EAAOjvB,GAAMm0B,GAAmBmH,GAAoBhP,EAAQtf,EAAoBkgB,EAAO6I,EAAW1J,GAGlG4C,EAAOjvB,GAAMm0B,GADM,iBAAd4B,EAC2B6F,GAAoB3M,EAAQ/B,GAG5B6M,GAAWzN,EAAQtf,EAAoBkgB,EAAO6I,EAAW1J,KAGjG,MAAMoR,EAAgBC,GAAmCxQ,GACzD,UAAWkE,KAAOqM,EACdxO,EAAOjvB,GAAMoxB,EAAIuD,YAAcmG,GAAkBxO,EAAQtf,EAAoBkgB,EAAOkE,EAAK/E,EAEjG,CACA,OAAO4C,CACX,CD5BoB0O,CAAuBrR,EAAQyQ,EAAkB1Q,GACjEC,EAAOsR,MEVmB,CAACC,IAC3B,MAAM7wB,EAAqB6wB,EAAc7wB,mBACzC,IAAKA,EACD,MAAO,GAEX,MAAM4wB,EAAQ,GACd,UAAYvO,EAAGyO,KAAax/B,OAAOwQ,QAAQ9B,EAAmB4wB,OAC1DA,EAAME,EAAS99B,MAAQ,CACnB0a,OAAQ,IAAMojB,EAASpjB,QAG/B,OAAOkjB,GFDQG,CAAsBhB,GACrCzQ,EAAO0R,QXsBX,SAAuC1R,EAAQlb,EAAQib,GACnD,OAAOqN,GAAiCpN,EAAQlb,EAAQ,UAAWib,EACvE,CWxBqB4R,CAA8B3R,EAAQyQ,EAAkB1Q,GACzEC,EAAO4R,UXkBX,SAAyC5R,EAAQlb,EAAQib,GACrD,OAAOqN,GAAiCpN,EAAQlb,EAAQ,YAAaib,EACzE,CWpBuB8R,CAAgC7R,EAAQyQ,EAAkB1Q,GAC7EC,EAAO8R,cXuBX,SAA6C9R,EAAQlb,EAAQib,GACzD,OAAOqN,GAAiCpN,EAAQlb,EAAQ,gBAAiBib,EAC7E,CWzB2BgS,CAAoC/R,EAAQyQ,EAAkB1Q,GACrFC,EAAOgS,cGRX,SAAuChS,EAAQ+Q,EAAkBhR,GAC7D,MAAMrf,EAAqBqwB,GAAkBrwB,mBAG7C,IAAKA,GAAoBsxB,cACrB,MAAO,GAEX,MAAMA,EAAgB,GACtB,UAAat+B,oBAAMu+B,EAAA7/B,QAAcA,EAAAuwB,OAASA,EAAAiD,UAAQA,EAAA0L,MAAWA,KAAYt/B,OAAOoc,OAAO1N,EAAmBsxB,eAAgB,CACtH,MAAME,EAAoBvP,EAAOsP,EAAazP,WACxC2P,EAA2BxP,EAAOvwB,EAAQowB,WAChD,IAAK0P,IAAsBC,EACvB,MAAO,GAEX,MAAMC,EAAiC,IAChC1xB,EACHiiB,OAAQ,IACDjiB,EAAmBiiB,UACnBA,GAEPiD,UAAW,IACJllB,EAAmBklB,aACnBA,GAEP0L,MAAO,IACA5wB,EAAmB4wB,SACnBA,IAGXU,EAAct+B,GAAQ,CAClB2+B,OAAQC,GAAiCtS,EAAQoS,EAAgC1+B,EAAMw+B,EAAmBC,EAA0BpS,GACpI5K,OAAQod,GAAiCvS,EAAQoS,EAAgC1+B,EAAMw+B,EAAmBC,EAA0BpS,GACpI9K,IAAKud,GAA8BxS,EAAQoS,EAAgC1+B,EAAMw+B,EAAmBC,EAA0BpS,GAC9HmC,OAAQuQ,GAAiCzS,EAAQoS,EAAgC1+B,EAAMw+B,EAAmBC,EAA0BpS,GACpIiF,KAAM0N,GAAgC1S,EAAQoS,EAAgC1+B,EAAMw+B,EAAmBC,EAA0BpS,GAEzI,CACA,OAAOiS,CACX,CH9B2BW,CAA8B3S,EAAQyQ,EAAkB1Q,GAC/EC,EAAO4S,YIZX,SAAqC5S,EAAQ+Q,EAAkBhR,GAC3D,MAAMrf,EAAqBqwB,GAAkBrwB,mBAG7C,IAAKA,GAAoBkyB,YACrB,MAAO,GAEX,MAAMA,EAAc,GACpB,UAAWC,KAAc7gC,OAAOoc,OAAO1N,EAAmBkyB,aACtDA,EAAYC,EAAWn/B,MAAQw3B,GAAgBlL,EAAQtf,EAAoB,QAASmyB,GAAY,EAAO9S,EAAc+S,GAA0BC,GAASC,aAE5J,OAAOJ,CACX,CJAyBK,CAA4BjT,EAAQyQ,EAAkB1Q,GACpEC,CACX,CKoEA,SAASoM,GAAQv3B,EAASq+B,GAEtB,MAAMxI,EAAY3K,GAAara,MAIzBytB,EAAiBzI,EAAUpqB,SAI3B8yB,EAAiB1I,EAAUtK,SAI3BiT,EAAe3I,EAAUjqB,OAe/B,GAHA5L,EAAQurB,SAAWvrB,EAAQurB,UAAYgT,EACvCv+B,EAAQ4L,OAAS5L,EAAQ4L,QAAU4yB,EACnCx+B,EAAQyrB,UAAYzrB,EAAQyrB,WAAaoK,EAAUpK,UAC/C6S,GAAuC,WAArBt+B,EAAQurB,WAA0BvrB,EAAQ4L,OAC5D,MAAM,IAAIxK,MAAM,+FAEpB,MAAMwqB,EAAUyS,GAAqBxI,EAAUjK,QAY/C,OANe6S,GAAWlH,QAE1B1B,EAAUzK,QAAS,IACZprB,EACHyL,SAAU6yB,GACX1S,EAEP,CAMA,SAASkQ,GAAOvoB,EAAShW,GACrB,OAAOkhC,GAAW3C,OAAOvoB,EAAShW,EACtC,CAMA,SAASmhC,GAAc/9B,GACnB,OAAO89B,GAAWC,cAAc/9B,EACpC,CClJA,SAASg+B,GAAmBzC,GACxB,YAA4B,IAArBA,CACX,CCKA,SAAS0C,KACL,OCQJ,SAAwBC,GACpB,MAAM1T,EAAS,CACXE,CAACA,IAAYwT,EAAOzT,QACpBI,CAACA,IAAaqT,EAAOtT,SACrBG,CAACA,IAAcmT,EAAOpT,UACtBH,CAACA,IAAW,WAAYuT,EAASA,EAAOjzB,YAAS,EACjD+f,CAACA,IAAa,aAAckT,EAASA,EAAOpzB,cAAW,EACvDogB,CAACA,IAAYgT,EAAOjT,QACpB2L,WACAuE,UACA4C,iBACA5Q,OAAQgR,GACRrC,MAAOqC,GACPjC,QAASiC,GACT/B,UAAW+B,GACX7B,cAAe6B,IAEblD,EAAmBiD,EAAOzT,QAAQ2T,YAAY5zB,KAAKK,QACzD,GAAI2f,EAAOQ,IAAa,CACpB,IAAKR,EAAOK,IACR,MAAM,IAAIpqB,MAAM,iFAEpB,GAA2B,WAAvB+pB,EAAOK,MAA6BL,EAAOG,IAC3C,MAAM,IAAIlqB,MAAM,wGAExB,CAqBA,OApBK+pB,EAAOQ,MACJgT,GAAmB/C,GACnBD,GAAkBxQ,EAAQyQ,EAAkB1Q,IAe5C8T,GAAyC7T,IAG1CA,CACX,CDvDW8T,CAAiB,CAEpB7T,QAAS8T,IAEjB,CEgBA7hC,eAAe8hC,GAAQx7B,EAAS3D,GAC5B,MAAMo/B,EClBQ,MACd,MAAMnvB,EAASivB,GAAQH,YACjBM,EAAepvB,EAAO9E,KAAKgB,OACjC,IAAKkzB,EACD,MAAM,IAAIj+B,MAAM,0EAEpB,MAAMk+B,EAAiBC,GAAcF,EAAa3zB,gBAAiB,UAC7D1L,EAAU,CACZw/B,uBAAwBH,EAAa5zB,SACrCrF,OAAQi5B,EAAaj5B,OACrBq5B,mBAAoBH,EACpB1zB,OAAQyzB,EAAazzB,QAEzB,OAAO5L,GDKiB0/B,GACxBN,EAAgBK,mBAAqBF,GAAcv/B,GAASurB,SAAU6T,EAAgBK,oBACtFL,EAAgBxzB,OAAS5L,GAAS4L,QAAUwzB,EAAgBxzB,OAC5DwzB,EAAgB3T,UAAYzrB,GAASyrB,WAAa2T,EAAgB3T,gBAC5DkU,GAAqBR,QAAQC,GACnC,MAAMQ,EAAYC,KAElB,IAAIC,EADJC,GAAa5wB,IAAIywB,GAwCjB,MAAO,CACHxsB,UAvCQ,CAAC4sB,EAAUC,KACnB,IAAKF,GAAa5f,IAAIyf,GAClB,MAAM,IAAIx+B,MAAM,qBAEpB,MAAM8+B,EAAmB,IAAKd,EAAiBlI,MAAOvzB,GAQtD,OAPAu8B,EAAiBT,mBAAqBF,GAAcU,GAAY1U,SAAU2U,EAAiBT,oBAC3FS,EAAiBt0B,OAASq0B,GAAYr0B,QAAUs0B,EAAiBt0B,OACjEs0B,EAAiBzU,UACbwU,GAAYxU,WAAayU,EAAiBzU,UAC9CqU,EAAgBH,GACXvsB,UAAU8sB,GACV9sB,UAAU4sB,GACRF,GA4BPK,MAXU9iC,UACVyiC,GAAiBA,EAAc1wB,cAC/B2wB,GAAa1S,OAAOuS,GACpB7+B,WAAW,KACmB,IAAtBg/B,GAAaK,MACbT,GAAqBU,+BAE1B,MAKHC,QA3BQjjC,MAAOkjC,EAAOC,KACtB,IAAKT,GAAa5f,IAAIyf,GAClB,MAAM,IAAIx+B,MAAM,qBAEpB,MAAMq/B,EAAiB,IAChBrB,EACHlI,MAAOvzB,EACPoxB,UAAWwL,GAMf,OAJAE,EAAehB,mBAAqBF,GAAciB,GAAYjV,SAAUkV,EAAehB,oBACvFgB,EAAe70B,OAAS40B,GAAY50B,QAAU60B,EAAe70B,OAC7D60B,EAAehV,UACX+U,GAAY/U,WAAagV,EAAehV,UACrCkU,GAAqBW,QAAQG,IAgB5C,CE1BA,SAASnkC,GAAWC,EAAYC,EAAQC,EAAKC,GACzC,IAA2HC,EAAvHC,EAAIC,UAAUC,OAAQC,EAAIH,EAAI,EAAIJ,EAA+EE,EACrH,GAAuB,iBAAZM,SAAoD,mBAArBA,QAAQC,SAAyBF,EAAIC,QAAQC,SAASV,EAAYC,EAAQC,EAAKC,QACpH,QAASQ,EAAIX,EAAWO,OAAS,EAAGI,GAAK,EAAGA,KAASP,EAAIJ,EAAWW,MAAIH,GAAKH,EAAI,EAAID,EAAEI,GAAKH,EAAI,EAAID,EAAEH,EAAQC,EAAKM,GAAKJ,EAAEH,EAAQC,KAASM,GAChJ,OAAOH,EAAI,GAAKG,GAAKI,OAAOC,eAAeZ,EAAQC,EAAKM,GAAIA,CAChE,CAwCA,SAAS2jC,GAAsBC,EAAUC,GAGrC,IADuBD,EAASE,QAAQnU,MAAOoU,GAAWF,EAASC,QAAQlW,KAAMoW,GAAmBD,EAAOE,OAAOD,KAE9G,MAAM,IAAI3/B,MAAM,uEAGpB,MAAM6/B,EAAaL,EAASC,QAAQjjB,OAAQkjB,IAChCH,EAASE,QAAQlW,KAAMuW,GAAmBJ,EAAOE,OAAOE,KAGpE,UAAWC,KAAaF,EAAY,CAKhC,GAHmBE,EAAUC,cAAclN,KAAM3tB,GACtCA,EAAK86B,QAAUV,EAASE,QAAQ,GAAGO,cAAc,GAAGC,OAE/C,CAGZ,GADwBF,EAAUG,QAAQN,OAAO,gBAAkBG,EAAUtiC,KAAKmiC,OAAO,YACpE,CACjB,MAAM91B,EAAOq2B,GAAStiC,KAAKkiC,EAAUj2B,MACrC,GAAIA,EAAKs2B,GAAGR,OAAO,cAAgB91B,EAAKu2B,KAAKzW,WAAW,eACpD,QAER,CAGA,GADsBmW,EAAUG,QAAQN,OAAO,UAAYG,EAAUtiC,KAAKmiC,OAAO,eAC9D,CAEf,GADaU,GAAYziC,KAAKkiC,EAAUj2B,MAC/By2B,SAASX,OAAOL,EAASE,QAAQ,GAAGO,cAAc,GAAGC,OAC1D,QAER,CAEA,MAAM,IAAIjgC,MAAM,8EACpB,CACJ,CACJ,CAEA,SAASwgC,GAAsB9hC,EAAG+hC,EAAOzhC,GACrC,MAAM0hC,EAAgBC,YAAY,KAC1BF,EAAMvuB,SACN0uB,cAAcF,GACd1hC,EAAON,EAAE,eAAgB,CACrB8B,QAAS,oEAGlB,KACH,OAAOkgC,CACX,CAMA,SAASG,GAAa1B,EAAO38B,EAAKnB,GAC9B,MACMy/B,EADc,IAAIC,IAAI5B,EAAM6B,QACFA,SAAWx+B,EAAIw+B,OACzCC,EAAc9B,EAAM9vB,SAAWhO,EAErC,QAD0C,iBAAf89B,EAAMr1B,OACZg3B,IAAgBG,EAIzC,CAuEA,SAASC,GAAcC,EAASr3B,GAC5B,MAAMs3B,EAAKv/B,UAAUC,UAAUqC,cAC/B,QAAIi9B,EAAGC,OAAO,WAAoBD,EAAGC,OAAO,WAAa,EACrD,OAAO,EAEX,IACI,IAAKv3B,EACD,OAAO,EACX,MAAMw3B,EAAYx3B,EAAKw3B,WACjB7B,QAAEA,GAAY0B,EAAQI,oBAC5B,OAAO9B,EAAQnU,MAAOoU,GACX4B,EAAUxO,KAAM0O,IACnB,GAAI9B,EAAOQ,QAAQN,OAAO4B,EAAMC,UAC5B,QAAI/B,EAAOQ,QAAQN,OAAO,gBACtBF,EAAOjiC,MACPiiC,EAAOjiC,KAAKmiC,OAAO,cACZ4B,EAAME,WAAWr6B,SAASpE,OAAOy8B,EAAO51B,KAAKs2B,OAMxE,OACOjmB,GAEP,CACA,OAAO,CACX,CAgCAle,eAAe0lC,GAAcjjC,EAAGkjC,EAAWT,EAASzhC,EAAU,KAC1D,MAAM8C,EAAM,IAAIu+B,IAAIa,GACdnB,QAAcp/B,OAAOwgC,KAAKr/B,EAAK,+BAAgC,wBACrE,IAAKi+B,EACD,MAAM,IAAIzgC,MAAMtB,EAAE,cAAe,CAC7B8B,QAAS,iFAGjB,OAAO,IAAI1B,QAAQ,CAACC,EAASC,KACzB,MAAM0hC,EAAgBF,GAAsB9hC,EAAG+hC,EAAOzhC,GAChD8iC,EAAe3C,IACjB,IAAK0B,GAAa1B,EAAO38B,EAAKi+B,GAC1B,OAEJA,GAAOsB,YAAY,CACfC,aAAa,EACbC,eAAe,EACfC,UA/JLthC,KAAKc,OAAA,IAAUmV,MAAOsrB,WAgKjBC,YAAajB,EAAQkB,sBACrB/nB,KAAM,eACPrX,OAAO2+B,IACV,MAAMU,EAAiBC,IACnB,GAAK1B,GAAa0B,EAAc//B,EAAKi+B,GAGrC,IACI1hC,EAAQwjC,EAAaz4B,KACzB,OACOqQ,GACHnb,EAAOmb,EACX,SAEI9Y,OAAOmhC,oBAAoB,UAAWV,GACtCzgC,OAAOmhC,oBAAoB,UAAWF,GACtC9iC,aAAaijC,GACb7B,cAAcF,EAClB,GAEJr/B,OAAOqhC,iBAAiB,UAAWJ,IAGjCG,EAAa9iC,WAAW,KAC1B8gC,EAAM1B,QACN19B,OAAOmhC,oBAAoB,UAAWV,GACtC9iC,EAAO,IAAIgB,MAAMtB,EAAE,gBAAiB,CAChC8B,QAAS,yEACTd,QAASA,EAAU,SAExBA,GAEH2B,OAAOqhC,iBAAiB,UAAWZ,IAE3C,CAoGA,SAASjhC,KAEL,IAAIC,OAAqBC,KAAzB,CAGA,GA6CO,QAAQa,KAAKC,UAAUC,WA3C1B,MAAO,kBAEX,GAkDO,QAAQF,KAAKC,UAAUC,WAhD1B,MAAO,cAEX,GAAIhB,MAAqBI,KAErB,MAAO,WAEX,GAAIJ,KAAmB,CAEnB,MAAMK,EAAW,iEACjB,IAAIC,EAAKC,OAAOC,SAASC,KAAKC,MAAM,KAAK,GAAK,IAC9C,QAAS1F,EAAI,EAAGA,EAAI,EAAGA,IACnBsF,GAAMD,EAASM,OAAOb,KAAKc,MAAMd,KAAKpE,SAAW2E,EAASzF,SAE9D,OAAO0F,CACX,CACA,OAAIO,MA8BG,WAAWC,KAAKC,UAAUC,WA7BtB,oCAEPH,MAoCG,MAAMC,KAAKC,UAAUC,WAnCjB,mCAEPH,OA8BG,MAAMC,KAAKC,UAAUC,YAAc,QAAQF,KAAKC,UAAUC,YA7BtD,kCAEPH,MAAeT,KACR,kCAEPS,OAyCI,KAAKC,KAAKC,UAAUC,YACvB,UAAUF,KAAKC,UAAUC,YAAcf,MAzCjC,wBAEPY,MAYG,0BAA0BC,KAAKC,UAAUC,WAXrC,mCAEJT,OAAOC,SAASC,IAxCvB,CAyCJ,CACA,SAAST,KACL,MAAO,kBAAkBc,KAAKC,UAAUC,UAC5C,CAmBA,SAASZ,KACL,OAAOW,UAAiB,OAA2C,mBAA/BA,UAAiB,MAAEX,OAC3D,CACA,SAASS,KACL,MAAO,UAAUC,KAAKC,UAAUC,UACpC,CACA,SAASf,KAGL,QAASM,OAAOY,kBACpB,0nDChgBA,SAAS8I,IAAS,CA4BlB,SAAS43B,EAAG9jB,EAAI2N,EAASzsB,GACvB0P,KAAKoP,GAAKA,EACVpP,KAAK+c,QAAUA,EACf/c,KAAK1P,KAAOA,IAAQ,CACtB,CAaA,SAAS6iC,EAAYC,EAAS1D,EAAOtgB,EAAI2N,EAASzsB,GAChD,GAAkB,mBAAP8e,EACT,MAAM,IAAInP,UAAU,mCAGtB,IAAIzQ,EAAW,IAAI0jC,EAAG9jB,EAAI2N,GAAWqW,EAAS9iC,GAC1C+iC,EAAM1qB,EAASA,EAAS+mB,EAAQA,EAMpC,OAJK0D,EAAQE,QAAQD,GACXD,EAAQE,QAAQD,GAAKjkB,GAC1BgkB,EAAQE,QAAQD,GAAO,CAACD,EAAQE,QAAQD,GAAM7jC,GADhB4jC,EAAQE,QAAQD,GAAK9/B,KAAK/D,MAD1B8jC,QAAQD,GAAO7jC,EAAU4jC,EAAQG,gBAI7DH,CACT,CASA,SAASI,EAAWJ,EAASC,GACI,MAAzBD,EAAQG,aAAoBH,EAAQE,QAAU,IAAIh4B,SAC5C83B,EAAQE,QAAQD,EAC9B,CASA,SAASI,IACPzzB,KAAKszB,QAAU,IAAIh4B,EACnB0E,KAAKuzB,aAAe,CACtB,CA5FA,IAAIjkB,EAAMhjB,OAAO0e,UAAUoW,eACvBzY,EAAS,IAkBTrc,OAAOmjB,SACTnU,EAAO0P,UAAY1e,OAAOmjB,OAAO,OAM5B,IAAInU,GAASgV,YAAW3H,GAAS,IA2ExC8qB,EAAazoB,UAAU0oB,WAAa,WAClC,IACIr4B,EACArN,EAFA2lC,EAAQ,GAIZ,GAA0B,IAAtB3zB,KAAKuzB,aAAoB,OAAOI,EAEpC,IAAK3lC,KAASqN,EAAS2E,KAAKszB,QACtBhkB,EAAInM,KAAK9H,EAAQrN,IAAO2lC,EAAMpgC,KAAKoV,EAAS3a,EAAKD,MAAM,GAAKC,GAGlE,OAAI1B,OAAOqhB,sBACFgmB,EAAMrnB,OAAOhgB,OAAOqhB,sBAAsBtS,IAG5Cs4B,CACT,EASAF,EAAazoB,UAAU4oB,UAAY,SAAmBlE,GACpD,IAAI2D,EAAM1qB,EAASA,EAAS+mB,EAAQA,EAChCmE,EAAW7zB,KAAKszB,QAAQD,GAE5B,IAAKQ,EAAU,MAAO,GACtB,GAAIA,EAASzkB,GAAI,MAAO,CAACykB,EAASzkB,IAElC,QAAS/iB,EAAI,EAAGynC,EAAID,EAAS5nC,OAAQ8nC,EAAK,IAAIvmB,MAAMsmB,GAAIznC,EAAIynC,EAAGznC,IAC7D0nC,EAAG1nC,GAAKwnC,EAASxnC,GAAG+iB,GAGtB,OAAO2kB,CACT,EASAN,EAAazoB,UAAUgpB,cAAgB,SAAuBtE,GAC5D,IAAI2D,EAAM1qB,EAASA,EAAS+mB,EAAQA,EAChCkE,EAAY5zB,KAAKszB,QAAQD,GAE7B,OAAKO,EACDA,EAAUxkB,GAAW,EAClBwkB,EAAU3nC,OAFM,CAGzB,EASAwnC,EAAazoB,UAAUipB,KAAO,SAAcvE,EAAOwE,EAAIC,EAAIC,EAAIC,EAAIC,GACjE,IAAIjB,EAAM1qB,EAASA,EAAS+mB,EAAQA,EAEpC,IAAK1vB,KAAKszB,QAAQD,GAAM,OAAO,EAE/B,IAEIzjB,EACAvjB,EAHAunC,EAAY5zB,KAAKszB,QAAQD,GACzB9lB,EAAMvhB,UAAUC,OAIpB,GAAI2nC,EAAUxkB,GAAI,CAGhB,OAFIwkB,EAAUtjC,MAAM0P,KAAKu0B,eAAe7E,EAAOkE,EAAUxkB,QAAI,GAAW,GAEhE7B,GACN,KAAK,EAAG,OAAOqmB,EAAUxkB,GAAGjM,KAAKywB,EAAU7W,UAAU,EACrD,KAAK,EAAG,OAAO6W,EAAUxkB,GAAGjM,KAAKywB,EAAU7W,QAASmX,IAAK,EACzD,KAAK,EAAG,OAAON,EAAUxkB,GAAGjM,KAAKywB,EAAU7W,QAASmX,EAAIC,IAAK,EAC7D,KAAK,EAAG,OAAOP,EAAUxkB,GAAGjM,KAAKywB,EAAU7W,QAASmX,EAAIC,EAAIC,IAAK,EACjE,KAAK,EAAG,OAAOR,EAAUxkB,GAAGjM,KAAKywB,EAAU7W,QAASmX,EAAIC,EAAIC,EAAIC,IAAK,EACrE,KAAK,EAAG,OAAOT,EAAUxkB,GAAGjM,KAAKywB,EAAU7W,QAASmX,EAAIC,EAAIC,EAAIC,EAAIC,IAAK,EAG3E,IAAKjoC,EAAI,EAAGujB,EAAO,IAAIpC,MAAMD,EAAK,GAAIlhB,EAAIkhB,EAAKlhB,IAC7CujB,EAAKvjB,EAAI,GAAKL,UAAUK,GAG1BunC,EAAUxkB,GAAGjC,MAAMymB,EAAU7W,QAASnN,EAC1C,KAAS,CACL,IACI8Y,EADAz8B,EAAS2nC,EAAU3nC,OAGvB,IAAKI,EAAI,EAAGA,EAAIJ,EAAQI,IAGtB,OAFIunC,EAAUvnC,GAAGiE,MAAM0P,KAAKu0B,eAAe7E,EAAOkE,EAAUvnC,GAAG+iB,QAAI,GAAW,GAEtE7B,GACN,KAAK,EAAGqmB,EAAUvnC,GAAG+iB,GAAGjM,KAAKywB,EAAUvnC,GAAG0wB,SAAU,MACpD,KAAK,EAAG6W,EAAUvnC,GAAG+iB,GAAGjM,KAAKywB,EAAUvnC,GAAG0wB,QAASmX,GAAK,MACxD,KAAK,EAAGN,EAAUvnC,GAAG+iB,GAAGjM,KAAKywB,EAAUvnC,GAAG0wB,QAASmX,EAAIC,GAAK,MAC5D,KAAK,EAAGP,EAAUvnC,GAAG+iB,GAAGjM,KAAKywB,EAAUvnC,GAAG0wB,QAASmX,EAAIC,EAAIC,GAAK,MAChE,QACE,IAAKxkB,EAAM,IAAK8Y,EAAI,EAAG9Y,EAAO,IAAIpC,MAAMD,EAAK,GAAImb,EAAInb,EAAKmb,IACxD9Y,EAAK8Y,EAAI,GAAK18B,UAAU08B,GAG1BkL,EAAUvnC,GAAG+iB,GAAGjC,MAAMymB,EAAUvnC,GAAG0wB,QAASnN,GAGtD,CAEE,OAAO,CACT,EAWA6jB,EAAazoB,UAAU5a,GAAK,SAAYs/B,EAAOtgB,EAAI2N,GACjD,OAAOoW,EAAYnzB,KAAM0vB,EAAOtgB,EAAI2N,GAAS,EAC/C,EAWA0W,EAAazoB,UAAU1a,KAAO,SAAco/B,EAAOtgB,EAAI2N,GACrD,OAAOoW,EAAYnzB,KAAM0vB,EAAOtgB,EAAI2N,GAAS,EAC/C,EAYA0W,EAAazoB,UAAUupB,eAAiB,SAAwB7E,EAAOtgB,EAAI2N,EAASzsB,GAClF,IAAI+iC,EAAM1qB,EAASA,EAAS+mB,EAAQA,EAEpC,IAAK1vB,KAAKszB,QAAQD,GAAM,OAAOrzB,KAC/B,IAAKoP,EAEH,OADAokB,EAAWxzB,KAAMqzB,GACVrzB,KAGT,IAAI4zB,EAAY5zB,KAAKszB,QAAQD,GAE7B,GAAIO,EAAUxkB,GAEVwkB,EAAUxkB,KAAOA,GACf9e,IAAQsjC,EAAUtjC,MAClBysB,GAAW6W,EAAU7W,UAAYA,GAEnCyW,EAAWxzB,KAAMqzB,OAEd,CACL,QAAShnC,EAAI,EAAGgP,EAAS,GAAIpP,EAAS2nC,EAAU3nC,OAAQI,EAAIJ,EAAQI,KAEhEunC,EAAUvnC,GAAG+iB,KAAOA,GACnB9e,IAASsjC,EAAUvnC,GAAGiE,MACtBysB,GAAW6W,EAAUvnC,GAAG0wB,UAAYA,IAErC1hB,EAAO9H,KAAKqgC,EAAUvnC,IAOtBgP,EAAOpP,OAAQ+T,KAAKszB,QAAQD,GAAyB,IAAlBh4B,EAAOpP,OAAeoP,EAAO,GAAKA,EACpEm4B,EAAWxzB,KAAMqzB,EAC1B,CAEE,OAAOrzB,IACT,EASAyzB,EAAazoB,UAAUwpB,mBAAqB,SAA4B9E,GACtE,IAAI2D,EAUJ,OARI3D,GACF2D,EAAM1qB,EAASA,EAAS+mB,EAAQA,EAC5B1vB,KAAKszB,QAAQD,IAAMG,EAAWxzB,KAAMqzB,KAExCrzB,KAAKszB,QAAU,IAAIh4B,EACnB0E,KAAKuzB,aAAe,GAGfvzB,IACT,EAKAyzB,EAAazoB,UAAUypB,IAAMhB,EAAazoB,UAAUupB,eACpDd,EAAazoB,UAAUmoB,YAAcM,EAAazoB,UAAU5a,GAK5DqjC,EAAaiB,SAAW/rB,EAKxB8qB,EAAaA,aAAeA,EAM1BkB,UAAiBlB,qBnGxSnB,MAAMpjC,WAAoBE,MAGtB,WAAAwa,CAAY2kB,GACRkF,MAAM,gBAHVC,GAAA70B,KAAA,SACA60B,GAAA70B,KAAA,OAAO,aAGHA,KAAK0vB,MAAQA,CACjB,EAGJ,MAAMv/B,WAAqBI,MAIvB,WAAAwa,CAAY+pB,EAAQxsB,GAChBssB,MAAME,GAJVD,GAAA70B,KAAA,UACA60B,GAAA70B,KAAA,mBACA60B,GAAA70B,KAAA,OAAO,aAGHA,KAAK80B,OAASA,EACd90B,KAAKsI,gBAAkBA,CAC3B,EAGJ,MAAMysB,GAAeC,YAAcpjC,OACnC,IAAIqjC,GACOA,OAIRA,KAAqBA,GAAmB,KAHd,OAAI,SAC7BA,GAAuB,KAAI,OAC3BA,GAAuB,KAAI,OAE/B,MAAMxlC,WAAiBgkC,GAQnB,WAAA1oB,CAAY5b,GAER,GADAylC,QARJC,GAAA70B,KAAA,OACA60B,GAAA70B,KAAA,UAAS,GACT60B,GAAA70B,KAAA,UACA60B,GAAA70B,KAAA,SACA60B,GAAA70B,KAAA,kBACA60B,GAAA70B,KAAA,YACA60B,GAAA70B,KAAA,cAGS7Q,EAAQ0D,QACT,MAAM,IAAItC,MAAM,sCAEpB,IAAKpB,EAAQ2D,QACT,MAAM,IAAIvC,MAAM,uCAEpB,MAAM2kC,EAAU/lC,EAAQ0D,QAAQ0T,QAAQ,QAAS,MAAMA,QAAQ,MAAO,IACtEvG,KAAKjN,IAAM,GAAGmiC,KAAW/lC,EAAQ2D,cACjCkN,KAAKm1B,SAAWhmC,EAAQgmC,UAAYF,GAAiBG,KACrDp1B,KAAK5Q,UAAYD,EAAQC,WAAa2lC,GAAa3lC,WACvB,IAAxBD,EAAQO,aACRsQ,KAAKsuB,SAEb,CACA,OAAAA,GACI,GAAItuB,KAAKq1B,OACL,OACJr1B,KAAKq1B,QAAS,EACd,IACIC,EADAC,EAAU,EAEd,MAAMjH,EAAU,KACZ,MAAMkH,EAAS,IAAIx1B,KAAK5Q,UAAU4Q,KAAKjN,KACvCyiC,EAAOC,UAAa/F,IAChB,GAAoB,oBAATgG,MAAwBhG,EAAMr1B,gBAAgBq7B,KAAM,CAC3D,MAAMl0B,EAAS,IAAIm0B,WACnBn0B,EAAOo0B,OAAS,KACZ51B,KAAK61B,cAAc,IAAI54B,WAAWuE,EAAOgD,UAE7ChD,EAAOs0B,QAAU,KACb91B,KAAKi0B,KAAK,QAAS,IAAI9jC,GAAa,4BAExCqR,EAAOu0B,kBAAkBrG,EAAMr1B,KACnC,SAC+B,iBAAfq1B,EAAMr1B,KAClB2F,KAAK61B,eAAc,IAAIvN,aAAch7B,OAAOoiC,EAAMr1B,YACtD,QACwC,IAAxB06B,GAAaiB,SACxBtG,EAAMr1B,gBAAgB06B,GAAaiB,QAAUxoB,MAAMsE,QAAQ4d,EAAMr1B,OAAQ,CAC1E,IAAI3L,EAASghC,EAAMr1B,KACd06B,GAAaiB,OAAOC,SAASvnC,KAC9BA,EAASqmC,GAAaiB,OAAO1pB,OAAO5d,IAExCsR,KAAK61B,cAAc,IAAI54B,WAAWvO,EAAOA,OAAQA,EAAO2O,WAAY3O,EAAO4O,YAC/E,MACSoyB,EAAMr1B,gBAAgB4C,WAC3B+C,KAAK61B,cAAcnG,EAAMr1B,MAEpBq1B,EAAMr1B,gBAAgB8C,YAC3B6C,KAAK61B,cAAc,IAAI54B,WAAWyyB,EAAMr1B,OAGxC2F,KAAKi0B,KAAK,QAAS,IAAI9jC,GAAa,+BAG5CqlC,EAAOM,QAAWpG,IACV1vB,KAAKw1B,SAAWA,GAAUx1B,KAAKq1B,QAC/Br1B,KAAKi0B,KAAK,QAAS,IAAI5jC,GAAYq/B,KAG3C8F,EAAOU,OAAS,KACZX,EAAU,EACVv1B,KAAKi0B,KAAK,YAEduB,EAAOW,QAAU,KA2E7B,IAAiBC,EA1EGp2B,KAAKq1B,SACLtlC,aAAaiQ,KAAKrQ,OAClBqQ,KAAKrQ,MAAQO,WAAWo+B,GAwE3B8H,EAxE4Cb,IAyElDpkC,KAAK4gB,IAAI5gB,KAAKklC,IAAY,EAARD,EAAW,GAAI,QAvE5Bp2B,KAAKw1B,YAAS,EACdzlC,aAAaulC,GACTt1B,KAAKs2B,gBACLnF,cAAcnxB,KAAKs2B,gBAEvBt2B,KAAKi0B,KAAK,eAGdj0B,KAAKu2B,yBAGL,MAAMC,EAAahB,EACU,mBAAlBgB,EAAWpmC,IAAqD,mBAAzBomC,EAAWC,WACzDD,EAAWpmC,GAAG,OAAQ,KAClBL,aAAaulC,GACbA,EAAYplC,WAAW,KACnBsmC,EAAWC,aACZ,QAGXz2B,KAAKw1B,OAASA,GAElBlH,GACJ,CACA,UAAAt+B,GACIgQ,KAAKq1B,QAAS,GACVr1B,KAAKw1B,QACJx1B,KAAKw1B,OAAOkB,aAAe12B,KAAK5Q,UAAUunC,MACvC32B,KAAKw1B,OAAOkB,aAAe12B,KAAK5Q,UAAUwnC,YAC9C52B,KAAKw1B,OAAOlG,MAAM,IAE1B,CACA,eAAIuH,GACA,OAAO72B,KAAKq1B,QAAUr1B,KAAKw1B,QAAQkB,YAAc12B,KAAK5Q,UAAUunC,IACpE,CACA,aAAAd,CAAciB,GAKV,IAAIpqC,EACJ,OALiB,KAAboqC,EAAM,IAA4B,KAAbA,EAAM,IAA4B,IAAbA,EAAM,KAChD92B,KAAKw1B,QAAQuB,KAAK,IAAI95B,WAAW,CAAC,GAAM,GAAM,EAAM65B,EAAM,MAC1DA,EAAQA,EAAME,SAAS,IAGnBh3B,KAAKm1B,UACT,KAAKF,GAAiBgC,OAClBvqC,EAAUoqC,EACV,MACJ,KAAK7B,GAAiBG,KAClB1oC,GAAU,IAAIwqC,aAAcC,OAAOL,GACnC,MACJ,KAAK7B,GAAiBmC,KAClB,IACI1qC,EAAUgE,KAAKC,OAAM,IAAIumC,aAAcC,OAAOL,GAClD,OACOhnC,GAEH,YADAkQ,KAAKi0B,KAAK,QAAS,IAAI9jC,GAAa,wBAAyBL,GAEjE,EAGRkQ,KAAKi0B,KAAK,UAAWvnC,EACzB,CACA,sBAAA6pC,GACIv2B,KAAKs2B,eAAiBpF,YAAY,KAC9BlxB,KAAKw1B,QAAQlG,MAAM,MACpB,IACP,EAqDJ,MAAM+H,GAAarC,YAAcpjC,OAEjC,IAAI0lC,GACOA,OAKRA,KAAeA,GAAa,KAHN,SAAI,WAEzBA,GAAsB,UAAI,YFhN9B,IAAI1oC,GAAgB,cAA4B2oC,KAEhD9rC,EAAW,CACP8rC,GAAOja,MAAM,eACd1uB,GAAcoc,UAAW,YAAQ,GACpCvf,EAAW,CACP8rC,GAAOja,MAAM,WACd1uB,GAAcoc,UAAW,aAAS,GACrCvf,EAAW,CACP8rC,GAAOja,MAAM,UACd1uB,GAAcoc,UAAW,kBAAc,GAC1Cvf,EAAW,CACP8rC,GAAOja,MAAM,WACd1uB,GAAcoc,UAAW,gBAAY,GACxCpc,GAAgBnD,EAAW,CACvB8rC,GAAO1sB,KAAK,mBACbjc,ICdwB,mBAApB4oC,iBAAiCA,gBAKxC,IAAIC,GAAa,cAAyBF,KAE1C9rC,EAAW,CACP8rC,GAAOja,MAAM,SACdma,GAAWzsB,UAAW,oBAAgB,GACzCvf,EAAW,CACP8rC,GAAOja,MAAM,eACdma,GAAWzsB,UAAW,mBAAe,GACxCvf,EAAW,CACP8rC,GAAOja,MAAM,SAAU,CAAEoa,WAAW,KACrCD,GAAWzsB,UAAW,kBAAc,GACvCysB,GAAahsC,EAAW,CACpB8rC,GAAO1sB,KAAK,gBACb4sB,IACH,IAAIE,GAAW,cAAuBJ,KAEtC9rC,EAAW,CACP8rC,GAAOja,MAAM,mBACdqa,GAAS3sB,UAAW,kBAAc,GACrC2sB,GAAWlsC,EAAW,CAClB8rC,GAAO1sB,KAAK,cACb8sB,IAEH,IAAIC,GAAc,cAA0BL,KAE5C9rC,EAAW,CACP8rC,GAAOja,MAAM,eACdsa,GAAY5sB,UAAW,YAAQ,GAClCvf,EAAW,CACP8rC,GAAOja,MAAM,WACdsa,GAAY5sB,UAAW,aAAS,GACnCvf,EAAW,CACP8rC,GAAOja,MAAM,UACdsa,GAAY5sB,UAAW,kBAAc,GACxCvf,EAAW,CACP8rC,GAAOja,MAAM,WACdsa,GAAY5sB,UAAW,gBAAY,GACtC4sB,GAAcnsC,EAAW,CACrB8rC,GAAO1sB,KAAK,iBACb+sB,IACH,IAAIC,GAAc,cAA0BN,KAE5C9rC,EAAW,CACP8rC,GAAOja,MAAM,SACdua,GAAY7sB,UAAW,oBAAgB,GAC1Cvf,EAAW,CACP8rC,GAAOja,MAAM,eACdua,GAAY7sB,UAAW,mBAAe,GACzCvf,EAAW,CACP8rC,GAAOja,MAAM,SAAU,CAAEoa,WAAW,KACrCG,GAAY7sB,UAAW,kBAAc,GACxC6sB,GAAcpsC,EAAW,CACrB8rC,GAAO1sB,KAAK,iBACbgtB,IACH,IAAIC,GAAW,cAAuBP,KAEtC9rC,EAAW,CACP8rC,GAAOja,MAAM,mBACdwa,GAAS9sB,UAAW,kBAAc,GACrC8sB,GAAWrsC,EAAW,CAClB8rC,GAAO1sB,KAAK,cACbitB,IqGxFH,IAwDIC,GAAsB,CAC1BC,GAvCS,CACRC,MAnBa,CACbC,MAAO,sBACP1sB,KAAM,2FACN2sB,KAAM,iBAiBNC,SAfgB,CAChBF,MAAO,wBACP1sB,KAAM,8FACN7J,MAAO,uCACPw2B,KAAM,mBACNE,MAAS,oCAWTvoC,MATa,CACbwoC,QAAS,yCACTC,iBAAkB,yFAClBC,cAAe,iCACfC,UAAW,2CA0CZC,GAlCS,CAET,EAiCI,UAbU,CACbT,MAnBW,CACXE,KAAM,qBACN3sB,KAAM,uIACN0sB,MAAO,sBAiBPpoC,MAfW,CACX2oC,UAAW,mDACXD,cAAe,6CACfD,iBAAkB,kIAClBD,QAAS,gEAYTF,SAVc,CACdC,MAAS,iCACTF,KAAM,2BACNx2B,MAAO,qEACP6J,KAAM,4IACN0sB,MAAO,mCAgBJ,UARU,CAEd,GASA,MAAMS,WAA2BC,GAC7B,WAAA7tB,CAAY5b,GACRylC,QAIA50B,KAAKuJ,GAAK,SAIVvJ,KAAK64B,aAAed,GAIpB/3B,KAAKZ,OAAS,CAEV05B,qBAAqB,EAErBC,0BAA0B,GAK9B/4B,KAAKg5B,SAAWC,GAAqB7qC,KAAK,CACtCJ,KAAM,SACN0iB,YAAa,GACbwoB,KAAMC,GAAK/qC,KAAK,CACZgrC,KAAM,y8CACNC,MAAO,mgCAEXC,SAAU,8BACVC,SAAU,yCAEdv5B,KAAK9M,QAAU/D,GAAS+D,SAAW,yBACnC8M,KAAKhR,OAASG,GAASH,MAC3B,CAOA,KAAAipC,CAAMlb,GACF,OAAO,IAAI1tB,QAAQ,CAACC,EAASC,KACzByQ,KAAKw5B,YAAYzc,GACZrc,KAAMyoB,IACP75B,EAAQ65B,KAEPvlB,MAAO9T,IACRP,EAAOO,MAGnB,CACA,iBAAM0pC,CAAYzc,GACd,IAAKA,EAAQ0c,GACT,MAAM,IAAIlpC,MAAM,mBAGpB,MAAMtB,EAAI8tB,EAAQ0c,GAAGC,aAAa15B,KAAKuJ,KAEjCowB,SAAEA,EAAAjI,QAAUA,EAAAkI,kBAASA,EAAAC,WAAmBA,EAAAltC,WAAYA,SrGyIlEH,eAAqCuwB,EAAS7pB,GAE1C,MAAMvG,EAAamtC,GAAWC,SAAS,MACjCF,EAAaltC,EAAWkC,WAExBmrC,EAAanC,GAAYzpC,KAAK,CAChC6rC,aAAcld,EAAQmd,QACtBC,YAAaN,EACbO,WAAY3nC,MAGV4nC,IAAiBtd,EAAQud,OAAmC,IAA1Bvd,EAAQwd,OAAOtuC,QAEjD2G,EAAkBK,EAAuBC,GAEzCsnC,EAAUH,EACV,KACAtd,EAAQud,MACJG,GAAQrsC,KAAK2uB,EAAQud,MAAM/wB,GAAG9b,OAC9B,KACJitC,EAAWL,EACXtd,EAAQwd,OAAO7mC,IAAK3H,GAAM0uC,GAAQrsC,KAAKrC,EAAEwd,GAAG9b,QAC5C,GAEAikC,EAAUiJ,GAAe57B,SAAS,CACpC46B,SAAUhnC,EAAgBC,GAC1BgoC,MAAOpnC,OAAOupB,EAAQmd,SACtBM,UACAE,WACAG,KAAM,CACF1C,KAAM6B,EACNY,MAAOpnC,OAAOupB,EAAQmd,WAE3Bnd,EAAQ+d,YACLlB,EAAoBlI,EAAQlZ,QAClC,GAAsB,oBAAX5mB,OAAwB,CAC/B,MAAMmpC,EAAY3pC,IAClBwoC,EAAkBoB,WAAW,eAAe,QAC1B,IAAdD,GACAnB,EAAkBoB,WAAW,cAAeD,EAEpD,CAEA,MAAO,CACHpB,SAAU/mC,EACV8+B,UACAkI,oBACAC,aACAltC,aAER,CqG3LuFsuC,CAAsBle,EAAS/c,KAAK9M,SAE7GgoC,EAAW,CACb,CACIrwB,KAAM,OACNlJ,MAAO1S,EAAE,aAAc,CAAE8B,QAAS,kBAClCsJ,KAAM,CACFvI,KAAM8nC,EAAkBtsC,QAAO,GAAM,EAAO,QAC5CqU,MAAO1S,EAAE,aAAc,CAAE8B,QAAS,kBAClCoqC,QAAS,arGkHjB9pC,KACJE,KACAgB,KACAf,KACAU,KACAI,KqGjHI4oC,EAAShS,QAAQ,CACbre,KAAM,KACNxQ,KAAMq3B,EAAQpkC,QAAO,GAAM,EAAO,UAI1CsE,OAAOC,SAASC,KAAO8nC,EAAkBtsC,QAAO,GAAM,EAAO,QAE7D,MAAM8tC,EAAiBre,EAAQ0c,IAAI4B,OAAO,CACtCnD,MAAOjpC,EAAE,cAAe,CAAE8B,QAAS,wBACnCya,KAAMvc,EAAE,aAAc,CAClB8B,QAAS,6FAEbmqC,aAEJE,EAAex3B,MAAM,KAEjBomB,QAAQ6Q,KAAK,kBAGjB,MAAM3rC,QAAyBJ,EAAgB6qC,EAAU35B,KAAKhR,OAAQC,GAEtE,GrG0LRzC,eAA2C0C,EAAkB6tB,GACzD,IAAK7tB,EAAiBoE,KAAuC,IAAhCpE,EAAiBoE,IAAIrH,OAC9C,MAAM,IAAIsE,MAAM,sDAEpB,IAAI+pC,EACJ,IAAKvd,EAAQud,OAASvd,EAAQwd,OAAOtuC,OAAS,GAC1C,IAAKiD,EAAiB4B,IAClB,MAAM,IAAIP,MAAM,0EAKpB,GADA+pC,EAAQvd,EAAQud,OAASvd,EAAQwd,OAAO,GACpCrrC,EAAiB4B,KAAO0C,OAAO8mC,EAAM/wB,MAAQra,EAAiB4B,IAC9D,MAAM,IAAIP,MAAM,kCAG5B,CqG3MQ+qC,CAA4BpsC,EAAkB6tB,IACzC7tB,EAAiB4B,MAAQ5B,EAAiB0B,KAAO1B,EAAiB2B,GACnE,MAAM,IAAIN,MAAM,6BAEpB,GAAIrB,EAAiBqsC,SAAWrsC,EAAiBssC,UAAYtsC,EAAiBusC,UAAW,CACrFz7B,KAAK3F,KAAKw/B,WAAaA,EACvB75B,KAAK3F,KAAK1N,WAAaA,EACvBqT,KAAK3F,KAAKqhC,UACNxsC,EAAiBssC,UAAYG,GAAUvtC,KAAKc,EAAiBssC,UACjEx7B,KAAK3F,KAAKuhC,WAAa1sC,EAAiBqsC,QACxCv7B,KAAK3F,KAAKwhC,YAAc3sC,EAAiBusC,UACzC,IACI,GAAIvsC,EAAiB4sC,UAAW,CAC5B,MAAM9C,EAAWtoC,KAAKC,MAAMzB,EAAiB4sC,WAC7C97B,KAAK3F,KAAK0hC,WAAa/C,EAAS+C,WAChC/7B,KAAK3F,KAAK2hC,UAAYhD,EAASgD,UAC/Bh8B,KAAK3F,KAAK4hC,WAAajD,EAASiD,UACpC,CACJ,OACOvxB,GAEP,CACJ,CACA,MACMwxB,SADyBC,GAAuBC,YAAYltC,EAAkB6tB,EAAQ+d,aACrDuB,iBAAiBntC,EAAiBoE,KACzE,MAAO,CACHgnC,MAAO7rC,GAAYL,KAAKc,EAAiB4B,KACzCwrC,gBAAiBC,GAAgBnuC,KAAK,CAClCoiC,MAAOthC,EAAiB0B,GACxB4rC,WAAYttC,EAAiB2B,KAEjCqrC,gBAER,CASA,IAAAO,CAAKC,EAAU3f,GACX,OAAO/c,KAAK28B,qBAAqBD,EAAU3f,EAC/C,CACA,0BAAM4f,CAAqBD,EAAU3f,GACjC,IAAKA,EAAQ0c,GACT,MAAM,IAAIlpC,MAAM,mBAGpB,MAAMtB,EAAI8tB,EAAQ0c,GAAGC,aAAa15B,KAAKuJ,IAEjCqzB,EAAaF,EAAS/J,YAAYiK,WAAWC,SAC7Cx1B,MAAUD,KACV01B,EAAY3rC,KAAKc,MAAM2qC,EAAWlK,UAAYrrB,EAAIqrB,WAElDqK,QAAwBhgB,EAAQigB,cAAc,CAAErK,YAAa+J,EAAS/J,cAE5EoK,EAAgB/B,WAAW,OAAQrD,GAASvpC,KAAK,CAC7CwuC,gBAGJ,MAAMjD,ErGgGd,SAAgCjI,EAASx+B,GACrC,MAAMymC,EAAW1mC,EAAuBC,GAExC,OADAw+B,EAAQuL,YAAY,GAAGtD,EAAS9mC,WAAW8mC,EAAS7mC,WAAW,GACxD6mC,CACX,CqGpGyBuD,CAAuBH,EAAiB/8B,KAAK9M,SACxDw+B,EAAUqL,EAAgBzvC,QAAO,GAAM,GAEvC6vC,GAAwC,IAAzBn9B,KAAK3F,KAAK0hC,WAEzBnC,EAAoBmD,EAAgBvkB,QACpCuiB,EAAY3pC,IAClBwoC,EAAkBoB,WAAW,eAAe,GACxCD,GACAnB,EAAkBoB,WAAW,cAAeD,GAE5C/6B,KAAK3F,KAAK0hC,aACN/7B,KAAK3F,KAAK2hC,UACVpqC,OAAOC,SAASC,KAAOkO,KAAK3F,KAAK2hC,UAE5B3qC,MACLO,OAAOC,SAASC,KAAO,kBAG/B,MAuBMsrC,EAAgBrgB,EAAQ0c,GAAG4B,OAAO,CACpCnD,MAAOjpC,EAAE,iBAAkB,CAAE8B,QAAS,0BACtCya,KAAMvc,EAAE,gBAAiB,CACrB4sC,YAAa77B,KAAK3F,KAAKwhC,YACvB9qC,QAAS,sCAAsCiP,KAAK3F,KAAKwhC,yDAE7DX,SAAU,CACN,CACIrwB,KAAM,YACNxQ,KAAM,CACFsH,MAAO1S,EAAE,iBAAkB,CAAE8B,QAAS,qCACtCijB,IAAK4oB,EAAWS,gBAGxB,CACIxyB,KAAM,SACNlJ,MAAO1S,EAAE,iBAAkB,CAAE8B,QAAS,yCACtCsJ,KAAM,CACFijC,QAASH,EACH,IAAOvrC,OAAOC,SAASC,KAAO8nC,EAAkBtsC,SA1CjD,KACjByvB,EAAQ0c,IAAI4B,OAAO,CACfnD,MAAOjpC,EAAE,+BAAgC,CAAE8B,QAAS,kBACpDya,KAAMvc,EAAE,8BAA+B,CACnC8B,QAAS,sFAEbmqC,SAAU,CACN,CACIrwB,KAAM,KACNxQ,KAAM7G,OAAOk+B,IAEjB,CACI7mB,KAAM,OACNlJ,MAAO1S,EAAE,oCAAqC,CAAE8B,QAAS,gBACzDsJ,KAAM,CACFvI,KAAM0B,OAAOomC,GACbj4B,MAAO1S,EAAE,oCAAqC,CAAE8B,QAAS,sBA4B7D4Q,MAAO1S,EAAE,iBAAkB,CACvB8B,QAAS,8CAOvBpB,EAAQO,WAAW,KACrB,IAAK6sB,EAAQ0c,GACT,MAAM,IAAIlpC,MAAM,mBAEpB6sC,EAAcnS,OAAOh8B,EAAE,gBAAiB,CAAE8B,QAAS,6CACpD+rC,GAEHM,EAAcx5B,MAAM,IAAM7T,aAAaJ,IAEvC,MAAM4tC,EAAkBzuC,EAAgB6qC,EAAU35B,KAAKhR,OAAQC,GAE/D,GAAI+Q,KAAK3F,KAAKuhC,WAAY,CACtB,MAAM/oC,EAAU,IAAIy+B,IAAItxB,KAAK3F,KAAKuhC,YAAYrK,OACxCz+B,EAAU,IAAIw+B,IAAItxB,KAAK3F,KAAKuhC,YAAY4B,SAASC,UAAU,GAC3DC,QrGqClBlxC,eAA2BE,EAASC,EAAYC,EAAWC,GACvD,OAAOJ,EAAqBC,EAASC,EAAYC,EAAWC,EAChE,CqGvCwC8wC,EAAa39B,KAAK3F,KAAK0hC,WAAanC,EAAoBmD,GAAiBzvC,QAAO,GAAM,EAAO,QAASwsC,GAAW1rC,KAAK4R,KAAK3F,KAAK1N,YAAagvC,GAAUvtC,KAAK4R,KAAK3F,KAAKqhC,apGvE9MlvC,eAAoBE,EAASyC,GACzB,MAAMyuC,EAAQzuC,EAAQyuC,OAASvG,GAAWuG,MAEpC7qC,EAAM,GADI5D,EAAQ0D,QAAQ0T,QAAQ,MAAO,QAAQA,QAAQ,MAAO,OAC5CpX,EAAQ2D,UAC5BioB,EAAU,GAChB,GAAI5rB,EAAQ0uC,gBAAiB,CACzB,IAAK1uC,EAAQc,QACT,MAAM,IAAIM,MAAM,iDAEpBwqB,EAAQ,eAAiB,GAAG5pB,KAAKy3B,KAAKz5B,EAAQc,QAAU,MAC5D,MACSd,EAAQc,UACb8qB,EAAQ,oBAAsB,GAAG5pB,KAAKy3B,KAAKz5B,EAAQc,QAAU,QAEjE,IAAIub,EAEAA,EADmB,iBAAZ9e,GAAwBA,aAAmBuQ,WAC3CvQ,EAGAgE,KAAK+gB,UAAU/kB,GAE1B,MAAMy8B,QAAiByU,EAAM7qC,EAAK,CAAE+qC,OAAQ,OAAQtyB,OAAMuP,YAC1D,GAA0C,IAAtC5pB,KAAKc,MAAMk3B,EAAS1xB,OAAS,KAC7B,MAAwB,MAApB0xB,EAAS1xB,OACH,IAAIlH,MAAM,6BAES,MAApB44B,EAAS1xB,OACR,IAAIlH,MAAM,qBAGV,IAAIA,MAAM,0BAA0B44B,EAAS1xB,UAGnD0xB,EAASpO,QAAQxL,IAAI,oBAAsB+nB,GAAWyG,QAClE,CoGsCYhH,CAAK1pC,GAAWC,OAAO,CAAEC,OAAQmwC,IAAiBjwC,MAAO,CACrDoF,UACAC,WAER,MAGIlB,OAAOC,SAASC,KAAO8nC,EAAkBtsC,SAG7C,MAAM4B,QAAyBG,QAAQ2uC,KAAK,CAACT,EAAiBH,IAAgB7gB,QAAQ,KAElFxsB,aAAaJ,KAIjB,GrGqDG,OqGvD8BT,GAC7BiE,EAA8BjE,GAAkBjD,OAAS,EAC1C,CAEf,MAAMgyC,QAAwB9B,GAAuBC,YAAYltC,EAAkB6tB,EAAQ+d,YAE3F,MAAO,CACH1nC,WAAYD,EAA8BjE,GAC1CwtC,SAAUuB,EAElB,CACA,MAAMC,EAAcjvC,EAAE,sBAAuB,CAAE8B,QAAS,mCAGxD,MAFAqsC,EAAcnS,OAAOiT,GAEf,IAAI3tC,MAAM2tC,EACpB,EjGtXJ,MAAMzpC,GAAY,GAClB,QAASpI,GAAI,EAAGA,GAAI,MAAOA,GACvBoI,GAAUlB,MAAMlH,GAAI,KAAOya,SAAS,IAAI/Y,MAAM,IDHlD,IAAIqG,GACJ,MAAME,GAAQ,IAAI2I,WAAW,ImGA7BkhC,GAAe,CAAAlqC,WADsB,oBAAXrG,QAA0BA,OAAOqG,YAAcrG,OAAOqG,WAAWI,KAAKzG,SCI1FwwC,GAAoB,mBCF1B,IAAIC,GACOA,OAORA,KAAYA,GAAU,KANN,MAAI,QACnBA,GAAe,MAAI,QACnBA,GAAc,KAAI,OAClBA,GAAc,KAAI,OAClBA,GAAiB,QAAI,UACrBA,GAAc,KAAI,OCHtB,MAAMC,GAAa,CACfC,QAAS,EACTC,MAAO,EACPC,KAAM,EACNC,KAAM,EACNC,MAAO,EACPC,KAAM,GAMV,IAAAC,GAAA,MAAMC,EAKF,WAAA/zB,CAAY/c,EAAM+wC,EAAQV,GAAQK,MAC9B1+B,KAAKhS,KAAOA,EACZgS,KAAK++B,MAAQA,EACb/+B,KAAKg/B,YAAc,EACvB,CACA,QAAAC,CAASC,GACL,OAAOA,EAAI,GAAK,IAAMA,EAAI,GAAKA,CACnC,CACA,GAAAC,GACI,MAAMC,MAASh4B,KACf,MAAQ,CAACpH,KAAKi/B,SAASG,EAAGC,cAAer/B,KAAKi/B,SAASG,EAAGE,eAAev4B,KAAK,KAC1E,IACAq4B,EAAGG,iBACX,CACA,SAAA1Q,CAAUzvB,GACN,OAAKA,GAELY,KAAKw/B,QAAUpgC,EACRY,KAAKw/B,SAFDx/B,KAAKw/B,OAGpB,CAQA,IAAAC,CAAK50B,KAAS60B,GACV,IAAIC,EAAkB3/B,KAAK++B,MACvBD,EAAcc,YACdD,EAAkBb,EAAcc,WAEd,oBAAXhuC,QAA0BA,OAAOguC,YACxCD,EAAkB/tC,OAAOguC,WAI7B,KADkBtB,GAAWzzB,IADTyzB,GAAWqB,IAI3B,OAEJ,IAAIE,EAAM7V,QAAQ6V,IAAIxrC,KAAK21B,SACvBnf,IAASwzB,GAAQM,OAAS3U,QAAQl6B,QAClC+vC,EAAM7V,QAAQl6B,MAAMuE,KAAK21B,UAEzBnf,IAASwzB,GAAQK,MAAQ1U,QAAQ8V,OACjCD,EAAM7V,QAAQ8V,KAAKzrC,KAAK21B,UAExB8U,EAAciB,sBACVl1B,IAASwzB,GAAQI,MAAQzU,QAAQ6Q,OACjCgF,EAAM7V,QAAQ6Q,KAAKxmC,KAAK21B,UAExBnf,IAASwzB,GAAQG,OAASxU,QAAQgW,QAClCH,EAAM7V,QAAQgW,MAAM3rC,KAAK21B,WAGjC,MAAMrhB,EAAS,IAAIkC,MAAS7K,KAAKm/B,SAASn/B,KAAKhS,OAC/C,IAAItB,EAAU,GACd,GAAmB,IAAfgzC,EAAIzzC,QAAkC,iBAAXyzC,EAAI,GAC/BhzC,EAAU,GAAGic,OAAY+2B,EAAI,KAC7BG,EAAInzC,QACR,GACwB,IAAfgzC,EAAIzzC,OACTS,EAAU,GAAGic,KAAU+2B,EAAI,KAC3BG,EAAIl3B,EAAQ+2B,EAAI,SACpB,GAC2B,iBAAXA,EAAI,GAAiB,CACjC,IAAI3+B,EAAM2+B,EAAI3xC,MAAM,GACD,IAAfgT,EAAI9U,SACJ8U,EAAMA,EAAI,IAEdrU,EAAU,GAAGic,OAAY+2B,EAAI,MAAM3+B,IACnC8+B,EAAI,GAAGl3B,OAAY+2B,EAAI,KAAM3+B,EACjC,MAEIrU,EAAU,GAAGic,KAAU+2B,IACvBG,EAAIl3B,EAAQ+2B,GAEhB,UAAWO,KAAUjgC,KAAKg/B,YAAa,CACnC,MAAMkB,EAAW,CAAExzC,UAASyzC,UAAW/4B,KAAKC,OAC5C44B,EAAOG,SAAS,CAACF,GACrB,CACJ,CAOA,GAAAL,IAAOH,GACH1/B,KAAKy/B,KAAKpB,GAAQI,QAASiB,EAC/B,CAOA,IAAA7E,IAAQ6E,GACJ1/B,KAAKy/B,KAAKpB,GAAQI,QAASiB,EAC/B,CAOA,IAAAI,IAAQJ,GACJ1/B,KAAKy/B,KAAKpB,GAAQK,QAASgB,EAC/B,CAOA,KAAA5vC,IAAS4vC,GACL1/B,KAAKy/B,KAAKpB,GAAQM,SAAUe,EAChC,CAOA,KAAAM,IAASN,GACL1/B,KAAKy/B,KAAKpB,GAAQG,SAAUkB,EAChC,CAOA,OAAAW,IAAWX,GACP1/B,KAAKy/B,KAAKpB,GAAQE,WAAYmB,EAClC,CACA,YAAAY,CAAaC,GACLA,GF9JoB,YE8JPA,EAAUC,oBACvBxgC,KAAKg/B,YAAYzrC,KAAKgtC,GACtBA,EAAU1R,UAAU7uB,KAAKw/B,SAEjC,CACA,cAAAiB,GACI,OAAOzgC,KAAKg/B,WAChB,GAEJF,GAAcc,UAAY,KAC1Bd,GAAciB,qBAAsB,SC3KpC,MAAMW,UAAqBnwC,MASvB,WAAAwa,EAAYre,QAAEA,EAASsB,0BAAMwZ,EAAAc,gBAAoBA,EAAA0wB,SAAiBA,IAK9D,GAJApE,MAAMloC,GACNsT,KAAKhS,KAAOA,EACZgS,KAAKsI,gBAAkBA,EACvBtI,KAAKwH,mBAAqBA,EACtBwxB,EAAU,CAEV,MAAM2H,kBAAEA,EAAAC,eAAmBA,EAAAC,UAAgBA,GAAc7H,EACzDh5B,KAAKg5B,SAAW,CAAE2H,oBAAmBC,iBAAgBC,YACzD,CAGA7gC,KAAK+K,YAAc21B,EACnBp0C,OAAO+jB,eAAerQ,KAAM0gC,EAAa11B,UAC7C,GCvBJ,IAAI5C,GACOA,OAKRA,KAAqBA,GAAmB,KAJR,aAAI,eACnCA,GAAuC,qBAAI,uBAC3CA,GAA0B,QAAI,UAC9BA,GAA+B,aAAI,eCGvC,MAAM04B,GAAoC,oBAAX9/B,OACzBA,OAAO,mBACP,oBACA+/B,GAAS,IAAIjC,GAAc,OAkGjC,MAAMkC,GAAM,IAjGZ,MACI,WAAAj2B,CAAY/c,GACRgS,KAAK4zB,cAAgB5kB,IACrBhP,KAAKihC,kBAAoB,CACrB,OACA,OACA,MACA,YACA,eACA,SACA,UACA,KACA,MAEJjhC,KAAKhS,KAAOA,CAChB,CAOA,OAAAkzC,CAAQpuC,EAAStD,GACb,MAAM2xC,EAASnhC,KAAK4zB,UAAUrkB,IAAIzc,GAC7BquC,EAILnhC,KAAK4zB,UAAUpkB,IAAI1c,EAAS,IACrBquC,EAAOp0B,OAAO,EAAG4sB,cAAeA,IAAanqC,KAJhDuxC,GAAOjB,KAAK,oBAAoBhtC,IAMxC,CACA,QAAAsuC,CAAStuC,EAASrC,EAASmP,EAAQyhC,GAC/B,GAAuB,iBAAZvuC,GACPkN,KAAKihC,kBAAkBhjC,QAAQnL,IAAW,EAAI,CAC5BuuC,IAAcP,IAE5BC,GAAOjB,KAAK,YAAYhtC,wEAEhC,CACA,MAAMwuC,EAAU,CACZxuC,UACArC,QAAS,IAAKA,GACdmP,SACA2hC,YAAa,IAEjB,IACIvhC,KAAKwhC,aAAaF,EACtB,OACO52B,GACHq2B,GAAOjxC,MAAM4a,EACjB,CACJ,CACA,MAAA+2B,CAAO3uC,EAAS6mC,EAAU+H,EAAe,UACrC,IAAIroB,EACJ,GAAwB,mBAAbsgB,EACP,MAAM,IAAI+G,GAAa,CACnB1yC,KL/D0B,iCKgE1BtB,QAAS,gCAKb2sB,EAAKsgB,EAET,IAAIwH,EAASnhC,KAAK4zB,UAAUrkB,IAAIzc,GAShC,OARKquC,IACDA,EAAS,GACTnhC,KAAK4zB,UAAUpkB,IAAI1c,EAASquC,IAEhCA,EAAO5tC,KAAK,CACRvF,KAAM0zC,EACN/H,SAAUtgB,IAEP,KACHrZ,KAAKkhC,QAAQpuC,EAASumB,GAE9B,CACA,YAAAmoB,CAAaF,GACT,MAAMxuC,QAAEA,EAAArC,QAASA,GAAY6wC,EACvBH,EAASnhC,KAAK4zB,UAAUrkB,IAAIzc,GAC9BquC,GACAA,EAAOzkC,QAAQlN,IACXuxC,GAAOf,MAAM,kBAAkBltC,UAAiBrC,GAChD,IACIjB,EAASmqC,SAAS2H,EACtB,OACO52B,GACHq2B,GAAOjxC,MAAM4a,EACjB,GAGZ,GAKqB,eC3GnBi3B,GAAuB5gC,GAElBA,GAAOA,EAAO,aCCnBggC,GAAS,IAAIjC,GAAc,aCH3B8C,GAAcr0C,IAChB,MAAMs0C,EAAY11C,QAAQshB,QAAQlgB,GAClC,UAAWS,KAAQ6zC,EAAW,CAC1B,MAAM9kC,EAAQxP,EAAOS,IAChB+O,GAA0B,iBAAVA,GAAwC,mBAAVA,IAC/C6kC,GAAW7kC,EAEnB,CACA,OAAOzQ,OAAOw1C,OAAOv0C,ICHnBwzC,GAAS,IAAIjC,GAAc,mBAC3BiD,GAAkB,CACpBC,QAAS,SACTC,QAAS,MACTC,0BAA2B,WAC3BC,eAAgB,OAChBvD,KAAM,OACNwD,WAAY,SAMZC,OAAQ,UAyMNC,GAAkBC,GAAgBA,GAAaxwC,MAAM,MAAQ,GAC7DywC,GAAiB,EAAGxqC,SAAQ4iC,QAAO3iC,iBAAgBE,kBAAiBE,oBACtEL,SACAO,OAAQqiC,EACR3iC,eAAgBqqC,GAAerqC,GAC/BE,gBAAiBmqC,GAAenqC,GAChCE,iBAEEoqC,GAAwBC,GACnBA,EAA6BhvC,IAAK4I,IACrC,MAAMqmC,EAAkBrmC,EAAS5H,cACjC,OAAOiuC,EAAgB3wC,OAAO,GAAG0hB,cAAgBivB,EAAgB50C,MAAM,KCtOzE60C,GAAqB5hC,OAAO,kB5GuM5B5E,GAAgB,CAClB8lC,0BAA2B,WAC3BF,QAAS,SACTC,QAAS,MACTG,WAAY,SACZD,eAAgB,QAKd5lC,GAAgB,CAClBsmC,OAAQ,SACRC,kBAAmB,SACnBC,SAAU,WACVC,mBAAoB,S6G5MlBC,GAAsBC,GACpB52C,OAAOmc,KAAKy6B,GAAeppB,QAAYluB,EAAIuuB,WAAW,SFkBtC,EAAC/a,EAAS,MAC9B,IAAK9S,OAAO0e,UAAUoW,eAAeje,KAAK/D,EAAQ,sBAC9C,MAAM,IAAIshC,GAAa,CACnB1yC,KAAM,4BACNtB,QAAS,4BACT8a,mBAAoB,iFAG5B,MAAM27B,mBAAEA,EAAAC,+BAAoBA,EAAAC,4BAAgCA,EAAAC,mBAA6BA,EAAAC,gBAAoBA,EAAAC,6BAAiBA,EAAAC,wCAA8BA,EAAAC,8BAAyCA,EAAAC,sBAA+BA,EAAAC,yCAAuBA,EAAAC,oCAA0CA,EAAAC,8BAAqCA,EAAApB,6BAA+BA,EAAAqB,gCAA8BA,EAAAC,sBAAiCA,EAAAC,4BAAuBA,EAAAC,gCAA6BA,EAAAC,yBAAiCA,EAAAC,gCAA0BA,EAAAC,mEAAiCA,EAAAC,kBAAoEA,EAAAC,6BAAmBA,EAAA3qC,IAA8BA,EAAAxD,MAAKA,EAAAouC,YAAOA,EAAAC,uBAAaA,EAAAhpC,cAAwBA,EAAAT,mBAAeA,GAAwBoE,EAC/vB8jC,EAAgB,GAElBe,IACAf,EAAc7pC,UAAY,CACtBG,SAAU,CACNC,MAAOwqC,EACP1uC,OAAQ2uC,KAKpB,MAAMloC,eAAEA,EAAA0oC,KAAgBA,GAASjpC,GAAiB,GAClD,GAAIO,GAAgB2oC,aAAeD,GAAMC,YAAa,CAClD,GAAI3oC,GAAgB2oC,YAAa,CAC7B,MAAMlrC,MAAEA,EAAAlE,OAAOA,GAAWyG,EAAe2oC,YACzCzB,EAAcznC,cAAgB,CAC1BO,eAAgB,CACZxC,SAAU,CACNC,QACAlE,WAIhB,CACA,GAAImvC,GAAMC,YAAa,CACnB,MAAMlrC,MAAEA,EAAAlE,OAAOA,GAAWmvC,EAAKC,YAC/BzB,EAAcznC,cAAgB,IACvBynC,EAAcznC,cACjBQ,iBAAkB,CACdzC,SAAU,CACNC,QACAlE,WAIhB,CACJ,CAQA,GANIiY,MAAMsE,QAAQyxB,KACdL,EAAc0B,aAAe,CACzBC,MAAOv4C,OAAO83B,YAAYmf,EAAgB7vC,IAAIoxC,GAAO,CAACA,EAAI92C,KAAM82C,OAIpEzB,EAA6B,CAC7B,MAAMxoC,EAAkBknC,GAAgBqB,GACnCvoC,GACDkmC,GAAOf,MAAM,+BAA+BoD,2BAEhDF,EAAc5oC,IAAM,CAChBK,QAAS,CACLC,SAAUyoC,EACVtoC,OAAQooC,EACR5tC,OAAQ+tC,EACRzoC,gBAAiBA,GAAmB,QAGxCG,IACAkoC,EAAc5oC,IAAIK,QAAQK,mBAAqBA,EAEvD,CAEA,MAAM+pC,EAAYrB,EACZ,CACEjsC,OAAQisC,GACJA,EAA8BhvC,cAClCmD,YAAa8rC,GAAuB/rC,SAAS,UAAW,EACxDD,WAAYgsC,GAAuB/rC,SAAS,SAAU,QAExD,EACAotC,EAAuBpB,EACvB,CACEtsC,UAAWssC,EAAyCqB,wBACpDnuC,iBAAkB8sC,EAAyCsB,0BAA0BttC,SAAS,wBAAyB,EACvHV,iBAAkB0sC,EAAyCsB,0BAA0BttC,SAAS,wBAAyB,EACvHZ,eAAgB4sC,EAAyCsB,0BAA0BttC,SAAS,sBAAuB,EACnHR,yBAA0BwsC,EAAyCsB,0BAA0BttC,SAAS,sBAAuB,QAE/H,EAKAkB,EAJuB0U,MAAMpf,KAAK,IAAIqF,IAAI,IACxCowC,GAAuC,MACvCC,GAAiC,MAEG/qC,OAAO,CAACsiB,EAAYzvB,KAAA,IACzDyvB,EAEH,CAACzvB,EAAI8I,eAAgB,CAAEwE,UAAU,KACjC,IACEisC,EAAwBpB,GAAiCnsC,SAAS,WAAY,EAC9EwtC,EAAwBrB,GAAiCnsC,SAAS,kBAAmB,GACvF4rC,GAAgCc,KAChCpB,EAAcvtC,KAAO,CACjBc,QAAS,CACLG,eAAgB4sC,EAChB1rC,iBAA4C,WAA1BksC,EAClBqB,yBAA0B5B,EAC1B3qC,iBACAnC,iBAAkB4tC,EAClB7tC,WAAY4tC,EACZ9sC,IAAKutC,EACLluC,eAAgBmuC,EAChBjtC,UAAW,CACPc,WAAYssC,GAAyBC,GACrCzsC,MAAOwsC,EACPvsC,MAAOwsC,MAKvB,MAAME,IAAiBlvC,GAAQ9J,OAAOmc,KAAKrS,GAAOnK,OAAS,EACrDs5C,IAA0B7C,GAC1BA,EAA6Bz2C,OAAS,EAwB5C,GAtBIi3C,EAAcvtC,MAAQ2vC,IACtBpC,EAAcvtC,KAAKc,QAAQsB,UAAY,IAChCmrC,EAAcvtC,KAAKc,QAAQsB,UAC9B3B,MAAO,IACAosC,GAAepsC,MACdmvC,GAA2B,CAC3B/sC,UAAWiqC,GAAqBC,OAM5CyB,IACAjB,EAAcluC,QAAU,CACpBK,GAAI,CACAC,OAAQ6uC,EACR5uC,OAAQ6uC,EACRoB,2CAA4CnB,KAKpDzqC,EAAK,CACL,MAAM6rC,wBAAEA,GAA4B7rC,EACpCspC,EAAcrpC,IAAM,CAChBI,gBAAiB,CACbF,KAAM0rC,EAAwB1rC,KAC9BI,oBAAqBsrC,EAAwBtrC,oBAC7CD,cAAeurC,EAAwBzrC,eACvCzE,OAAQkwC,EAAwBlwC,QAG5C,CAmBA,GAjBIkvC,IACAvB,EAAc5oC,IAAM,IACb4oC,EAAc5oC,IACjBorC,KAAMjB,EAAuB1rC,OAAO,CAACC,EAAK2sC,KACtC,MAAQ33C,gBAAM4M,EAAArF,OAAUA,EAAA1C,QAAQA,GAAY8yC,EAC5C,MAAO,IACA3sC,EACH4sC,CAAC53C,GAAO,CACJ4M,cACI/H,EAAU,CAAEA,gBAAY,KACxB0C,EAAS,CAAEA,eAAW,KAGnC,MAIPivC,EAAa,CAEb,MAAQqB,QAASC,GAAYtB,GAAa79B,SAASo/B,iBAAiBC,UAAY,GAChF9C,EAAc+C,YAAcH,EACtB,IACKtB,EACH79B,QAAS,IACF69B,EAAY79B,QACfo/B,gBAAiB,IACVvB,EAAY79B,QAAQo/B,gBACvBC,SAAU,CAAEF,cAItBtB,CACV,CACA,OAAOtB,GE9MIgD,CAAgBhD,G7GX/B,SAA0B9jC,GAEtB,MAAQ+mC,WAAY/mC,EACpB,QAAK+mC,GAGEA,EAAQhsB,WAAW,IAC9B,C6GMaisB,CAAiBlD,GACftuC,EAAoBsuC,GAGpBA,EChBR,IAAImD,GAAa,GAQbC,GAAM,IAAIC,YAAY,CAC7B,WACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,UACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,UACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,UACA,UACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,UACA,UACA,UACA,UACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,aAKOC,GAAO,CACd,WACA,WACA,WACA,WACA,WACA,WACA,UACA,YAKOC,GAAsBt1C,KAAKklC,IAAI,EAAG,IAAM,ECzF/CqQ,GAAA,WACA,SAASA,IACL1mC,KAAK2mC,MAAQC,WAAWx4C,KAAKo4C,IAC7BxmC,KAAK6mC,KAAO,IAAID,WAAW,IAC3B5mC,KAAKtR,OAAS,IAAIuO,WAAW,IAC7B+C,KAAK8mC,aAAe,EACpB9mC,KAAK+mC,YAAc,EAInB/mC,KAAKgnC,UAAW,CACpB,CAsGA,OArGAN,EAAU17B,UAAU2hB,OAAS,SAAUtyB,GACnC,GAAI2F,KAAKgnC,SACL,MAAM,IAAIz2C,MAAM,iDAEpB,IAAI2a,EAAW,EACX5N,EAAajD,EAAKi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","names":["__decorate","decorators","target","key","desc","d","c","arguments","length","r","Reflect","decorate","i","Object","defineProperty","async","sealedMessagePayload","message","privateKey","publicKey","nonce","UInt64","random","secret","sharedSecret","iv","Checksum512","hash","Serializer","encode","object","appending","array","createIV","symmetricKey","crypto","subtle","importKey","slice","name","createSymmetricKey","ciphertext","Bytes","from","encrypt","encryptMessage","checksum","DataView","Checksum256","buffer","getUint32","SealedMessage","toPublic","waitForCallback","callbackArgs","buoyWs","t","callbackResponse","options","WebSocket","Promise","resolve","reject","listener","Listener","autoConnect","timer","lastError","done","error","clearTimeout","disconnect","timeout","setTimeout","MessageError","on","SocketError","once","Error","rejected","payload","JSON","parse","sa","sp","cid","default","uuid","ii","chars","Math","generateReturnUrl","isAppleHandheld","isReactNativeApp","isChromeiOS","isFirefoxiOS","isBrave","alphabet","rv","window","location","href","split","charAt","floor","isAndroid","test","navigator","userAgent","isAndroidWebView","isChromeMobile","ReactNativeWebView","getUserAgent","agent","prepareCallback","callbackChannel","service","channel","url","background","prepareCallbackChannel","buoyUrl","extractSignaturesFromCallback","signatures","index","sig","push","String","Set","map","s","Signature","v4","buf","offset","native","randomUUID","rnds","rng","getRandomValues","bind","rnds8","RangeError","arr","byteToHex","toLowerCase","unsafeStringify","parseAmplifyOutputs","amplifyOutputs","resourcesConfig","storage","Storage","amplifyOutputsStorageProperties","bucket_name","aws_region","buckets","S3","bucket","region","createBucketInfoMap","parseStorage","auth","Auth","amplifyOutputsAuthProperties","user_pool_id","user_pool_client_id","identity_pool_id","password_policy","mfa_configuration","mfa_methods","unauthenticated_identities_enabled","oauth","username_attributes","standard_required_attributes","groups","authConfig","Cognito","userPoolId","userPoolClientId","identityPoolId","passwordFormat","requireLowercase","require_lowercase","requireNumbers","require_numbers","requireUppercase","require_uppercase","requireSpecialCharacters","require_symbols","minLength","min_length","mfa","status","getMfaStatus","smsEnabled","includes","totpEnabled","allowGuestAccess","loginWith","domain","redirectSignIn","redirect_sign_in_uri","redirectSignOut","redirect_sign_out_uri","responseType","response_type","scopes","providers","getOAuthProviders","identity_providers","email","phone","username","userAttributes","reduce","acc","curr","required","parseAuth","analytics","Analytics","amplifyOutputsAnalyticsProperties","amazon_pinpoint","Pinpoint","appId","app_id","parseAnalytics","geo","Geo","geofence_collections","maps","search_indices","LocationService","searchIndices","geofenceCollections","parseGeo","data","API","amplifyOutputsDataProperties","default_authorization_type","api_key","model_introspection","GraphQL","endpoint","defaultAuthMode","getGraphQLAuthMode","apiKey","modelIntrospection","parseData","custom","customConfig","amplifyOutputsCustomProperties","events","Events","parseCustom","notifications","Notifications","amplifyOutputsNotificationsProperties","channels","amazon_pinpoint_app_id","hasInAppMessaging","hasPushNotification","notificationsConfig","InAppMessaging","PushNotification","parseNotifications","authType","authModeNames","oAuthProviders","provider","providerNames","mfaConfiguration","mappedBuckets","forEach","bucketName","paths","sanitizedPaths","entries","value","convertToBuffer","Uint8Array","fromUtf8","ArrayBuffer","isView","byteOffset","byteLength","BYTES_PER_ELEMENT","resetTimeout","framework","delay","frameworkCache","resetTriggered","detectFramework","isFunction","arrRemove","item","indexOf","splice","isSubscription","Subscription","remove","add","unsubscribe","execFinalizer","finalizer","reportUnhandledError","err","timeoutProvider","noop","handleUnhandledError","identity","x","getPromiseCtor","promiseCtor","_a","config","isSubscriber","Subscriber","next","complete","isObserver","operate","init","source","lift","hasLift","liftedSource","this","TypeError","createOperatorSubscriber","destination","onNext","onComplete","onError","onFinalize","OperatorSubscriber","isPromise","then","isInteropObservable","input","Symbol_observable","isAsyncIterable","obj","Symbol","asyncIterator","createInvalidObservableTypeError","isIterable","Symbol_iterator","readableStreamLikeToAsyncGenerator","readableStream","__asyncGenerator","reader","__generator","_b","label","getReader","trys","__await","read","sent","releaseLock","isReadableStreamLike","innerFrom","Observable","subscriber","obs","subscribe","isArrayLike","closed","promise","fromAsyncIterable","iterable","e_1","iterable_1","__values","iterable_1_1","e_1_1","return","call","asyncIterable","asyncIterable_1","asyncIterable_1_1","e_2","__awaiter","e_2_1","__asyncValues","process","catch","executeSchedule","parentSubscription","scheduler","work","repeat","scheduleSubscription","schedule","observeOn","subscribeOn","scheduleAsyncIterable","iterator","result","scheduled","pipe","scheduleObservable","scheduleArray","schedulePromise","scheduleIterable","scheduleReadableStreamLike","project","thisArg","catchError","selector","handledResult","innerSub","syncUnsub","jitteredBackoff","maxDelayMs","attempt","assign","assertTokenProviderConfig","cognitoConfig","assertionValid","assert","AuthConfigurationErrorCode","AuthUserPoolException","assertIdentityPoolIdConfig","InvalidIdentityPoolIdException","decodeJWT","token","tokenParts","base64","replace","jsonStr","decodeURIComponent","base64Decoder","convert","char","charCodeAt","toString","join","isTokenExpired","expiresAt","clockDrift","tolerance","Date","now","getRegionFromIdentityPoolId","AuthError","recoverySuggestion","assertAuthTokensWithRefreshToken","tokens","isAuthenticated","refreshToken","isAuthenticatedWithImplicitOauthFlow","oAuthTokenRefreshException","isAuthenticatedWithRefreshToken","tokenRefreshException","accessToken","idToken","assertServiceError","AmplifyErrorCode","Unknown","underlyingError","getAuthStorageKeys","authKeys","keys","values","prefix","identifier","authKey","formLoginsMap","issuer","iss","res","cognitoIdentityIdProvider","identityIdStore","setAuthConfig","identityId","loadIdentityId","id","logins","generatedIdentityId","getId","endpointResolver","createCognitoIdentityPoolEndpointResolver","endpointOverride","identityPoolEndpoint","composeServiceApi","cognitoIdentityTransferHandler","createClientSerializer","getIdDeserializer","DEFAULT_SERVICE_CLIENT_API_CONFIG","userAgentValue","getAmplifyUserAgent","idResult","IdentityPoolId","Logins","IdentityId","e","generateIdentityId","storeIdentityId","type","_typeof","constructor","prototype","getLocation","position","match","lineRegexp","line","column","exec","body","printLocation","printSourceLocation","start","sourceLocation","firstLineColumnOffset","locationOffset","whitespace","lineIndex","lineOffset","lineNum","columnOffset","columnNum","locationStr","concat","lines","locationLine","subLineIndex","subLineColumnNum","subLines","printPrefixedLines","subLine","existingLines","filter","_ref","padLen","max","apply","_ref2","_ref3","str","len","Array","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","_defineProperty","configurable","writable","_createClass","Constructor","protoProps","props","descriptor","_defineProperties","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","_wrapNativeSuper","Class","_cache","Map","Wrapper","_construct","_getPrototypeOf","fn","Function","has","get","set","create","_setPrototypeOf","Parent","args","_isNativeReflectConstruct","construct","a","instance","sham","Proxy","o","p","setPrototypeOf","__proto__","getPrototypeOf","undefinedIfEmpty","syntaxError","description","GraphQLError","defineInspect","classObject","toJSON","condition","Boolean","invariant","inspect","nodejsCustomInspectSymbol","isNode","maybeNode","kind","formatValue","seenValues","stringify","previouslySeenValues","customInspectFn","getCustomFn","customValue","isArray","min","remaining","items","formatArray","tag","getObjectTag","properties","formatObject","formatObjectValue","devAssert","dedentBlockStringValue","rawString","commonIndent","_commonIndent","isFirstLine","isEmptyLine","indent","getBlockStringIndentation","startLine","isBlank","endLine","printCharCode","code","isNaN","TokenKind","EOF","fromCharCode","toUpperCase","readToken","lexer","prev","bodyLength","pos","end","_line","_col","lineStart","Token","BANG","readComment","DOLLAR","AMP","PAREN_L","PAREN_R","SPREAD","COLON","EQUALS","AT","BRACKET_L","BRACKET_R","BRACE_L","PIPE","BRACE_R","readBlockString","readString","readNumber","readName","unexpectedCharacterMessage","col","COMMENT","firstCode","isFloat","readDigits","isNameStart","FLOAT","INT","chunkStart","STRING","charCode","uniCharCode","invalidSequence","rawValue","BLOCK_STRING","b","char2hex","NAME","Parser","parseDocument","getTokenDesc","getTokenKindDesc","isPunctuatorTokenKind","getVisitFn","visitor","isLeaving","kindVisitor","kindSpecificVisitor","leave","enter","specificVisitor","specificKindVisitor","print","ast","root","visitorKeys","QueryDocumentKeys","stack","inArray","edits","node","parent","path","ancestors","newRoot","isEdited","pop","clone","_i2","_Object$keys2","k","editOffset","editKey","editValue","_visitorKeys$node$kin","visitFn","BREAK","visit","printDocASTReducer","addDescription","cb","maybeArray","_maybeArray$filter$jo","separator","block","wrap","maybeString","isMultiline","hasMultilineItems","some","repackageUnauthorizedError","content","errors","originalError","startsWith","isUnauthorizedError","getInternals","client","amplify","__amplify","__apiKey","authMode","__authMode","authToken","__authToken","__endpoint","headers","__headers","resolveOwnerFields","model","ownerFields","attr","attributes","isAuthAttribute","rule","rules","allow","ownerField","groupsField","attribute","every","capitalize","selfAwareAsync","resolver","resultPromise","rej","extendCancellability","existingCancellablePromise","newPromiseToRegister","promiseMap","finally","delete","isRelatedModelItemsArrayPair","dv","fieldDef","isRelatedModelProperty","initializeModel","modelName","context","introModel","models","introModelFields","fields","modelFields","_","field","fieldName","record","initializedRelationshipFields","modelField","modelFieldType","relatedModelName","relatedModel","relatedModelPKFieldName","primaryKeyInfo","primaryKeyFieldName","relatedModelSKFieldNames","sortKeyFieldNames","relationType","association","connectionType","connectionFields","associatedWith","targetNames","sortKeyValues","curVal","contextSpec","mapResult","shift","extensions","parentPk","parentSK","relatedModelField","relatedTargetNames","hasManyFilter","idx","eq","list","extendedBase","and","limit","nextToken","customSelectionSetToIR","selectionSet","dotNotationToObject","modelOrNonModelName","rest","nested","modelOrNonModelDefinition","nonModels","modelOrNonModelFields","relatedModelDefinition","relatedNonModel","nonModel","relatedNonModelDefinition","isModelOrNonModelOrFieldType","getDefaultSelectionSetForNonModelWithIR","nestedRelatedModelDefinition","getDefaultSelectionSetForModelWithIR","nonModelDefinition","nonModelField","isOwnerField","FIELD_IR","resultObj","deepMergeSelectionSetObjects","selectionSetIRToString","isObject","hasOwnProperty","generateSelectionSet","modelDefinition","selSetIr","explicitFields","enum","defaultSelectionSetForModel","generateGraphQLDocument","modelOperation","listArgs","indexMeta","pluralName","isCustomPrimaryKey","namePascalCase","pluralNamePascalCase","operationPrefix","usePlural","graphQLOperationsInfo","graphQLFieldName","indexQueryArgs","graphQLOperationType","graphQLSelectionSet","graphQLArguments","queryField","pk","sk","skQueryArgs","skField","normalizedType","skGraphQlFieldTypeMap","compositeSkArgName","resolvedSkName","keyName","find","selectionSetFields","getPkArgs","listPkArgs","generateSkArgs","op","fieldType","sortDirection","toLocaleUpperCase","buildGraphQLVariables","operation","arg","skName","variables","normalizeMutationInput","fromEntries","isReadOnly","indexQuerySkName","mutationInput","normalized","inputFieldName","inputValue","relatedModelPkInfo","associationHasOne","targetName","associatedFieldName","authModeParams","internals","getCustomHeaders","requestHeaders","handleListGraphQlError","handleSingularGraphQlError","createUserAgentOverride","customUserAgentDetails","INTERNAL_USER_AGENT_OVERRIDE","customOpFactory","operationType","useContext","argsDefined","argIsContextSpec","operationName","outerArgsString","outerArguments","innerArgsString","innerArguments","operationSelectionSet","returnTypeModelName","hasStringField","query","toLocaleLowerCase","operationVariables","userAgentOverride","observable","graphql","initialized","_opSubscription","extendedPromise","isArrayResult","flattenedResult","_op","argumentBaseTypeString","isRequired","requiredFlag","isEnumType","isInputType","argument","baseType","isArrayNullable","argDef","generateCustomOperationsProperty","operationsType","operations","ops","operationTypeMap","getFactory","_get","flattenItems","listFactory","_list","toBase64","_input","TextEncoder","isUint8Array","bits","bitLength","j","bitClusterCount","ceil","alphabetByValue","indexQueryFactory","_indexQuery","modelInitializer","requestArgs","unshift","response","modelIntroSchema","processGraphQlResponse","subscriptionFactory","findIndexByFields","needle","haystack","keyFields","searchObject","observeQueryFactory","ingestMessages","messages","pkFields","console","isSynced","messageQueue","receiveMessages","onCreateSub","onCreate","onUpdateSub","onUpdate","onDeleteSub","onDelete","resolvePKFields","firstPage","page","_nextToken","addSchemaToClient","apiGraphqlConfig","innerCancel","cancel","visited","targetPromise","upgradeClientCancellation","apiGraphQLConfig","SUBSCRIPTION_OPS","enabledModelOps","excludeDisabledOps","secondaryIdxs","getSecondaryIndexesFromSchemaModel","generateModelsProperty","enums","graphqlConfig","enumData","generateEnumsProperty","queries","generateCustomQueriesProperty","mutations","generateCustomMutationsProperty","subscriptions","generateCustomSubscriptionsProperty","conversations","conversation","conversationModel","conversationMessageModel","conversationModelIntrospection","update","createUpdateConversationFunction","createCreateConversationFunction","createGetConversationFunction","createDeleteConversationFunction","createListConversationsFunction","generateConversationsProperty","generations","generation","getCustomUserAgentDetails","AiAction","Generation","generateGenerationsProperty","additionalHeaders","clientEndpoint","clientAuthMode","clientApiKey","GraphQLAPI","isCancelError","isApiGraphQLConfig","generateClient","params","emptyProperty","getConfig","generateModelsPropertyOnAmplifyConfigure","generateClient$1","Amplify","connect","providerOptions","eventsConfig","configAuthMode","normalizeAuth","appSyncGraphqlEndpoint","authenticationType","configure","AppSyncEventProvider","channelId","amplifyUuid","_subscription","openChannels","observer","subOptions","subscribeOptions","close","size","closeIfNoActiveSubscription","publish","event","pubOptions","publishOptions","validateModifications","original","modified","actions","action","modifiedAction","equals","newActions","originalAction","newAction","authorization","actor","account","Transfer","to","memo","Buyrambytes","receiver","registerCloseListener","popup","closeListener","setInterval","clearInterval","isValidEvent","validOrigin","URL","origin","validSource","allowAutosign","request","ua","search","whitelist","resolvedTransaction","entry","contract","recipients","popupTransact","urlString","open","handleEvent","postMessage","feeFallback","freeBandwidth","startTime","getTime","transaction","serializedTransaction","handleSigning","signingEvent","removeEventListener","autoCancel","addEventListener","EE","addListener","emitter","evt","_events","_eventsCount","clearEvent","EventEmitter","eventNames","names","listeners","handlers","l","ee","listenerCount","emit","a1","a2","a3","a4","a5","removeListener","removeAllListeners","off","prefixed","module","super","__publicField","reason","globalBuoy$1","globalThis","ListenerEncoding","baseUrl","encoding","text","active","pingTimer","retries","socket","onmessage","Blob","FileReader","onload","handleMessage","onerror","readAsArrayBuffer","Buffer","isBuffer","onopen","onclose","tries","pow","reconnectTimer","setupReconnectionTimer","nodeSocket","terminate","readyState","OPEN","CONNECTING","isConnected","bytes","send","subarray","binary","TextDecoder","decode","json","globalBuoy","SendResult","Struct","SuppressedError","LinkCreate","extension","LinkInfo","BuoyMessage","BuoySession","BuoyInfo","defaultTranslations","en","login","title","link","transact","await","expired","invalid_response","not_completed","cancelled","ko","WalletPluginAnchor","AbstractWalletPlugin","translations","requiresChainSelect","requiresPermissionSelect","metadata","WalletPluginMetadata","logo","Logo","dark","light","homepage","download","handleLogin","ui","getTranslate","callback","sameDeviceRequest","requestKey","PrivateKey","generate","createInfo","session_name","appName","request_key","user_agent","isMultiChain","chain","chains","chainId","ChainId","chainIds","SigningRequest","scope","info","esrOptions","returnUrl","setInfoKey","createIdentityRequest","elements","variant","promptResponse","prompt","verifyLoginCallbackResponse","link_ch","link_key","link_name","signerKey","PublicKey","channelUrl","channelName","link_meta","sameDevice","launchUrl","triggerUrl","identityProof","ResolvedSigningRequest","fromPayload","getIdentityProof","permissionLevel","PermissionLevel","permission","sign","resolved","handleSigningRequest","expiration","toDate","expiresIn","modifiedRequest","createRequest","setCallback","setTransactionCallback","isSameDevice","promptPromise","toISOString","onClick","callbackPromise","pathname","substring","sealedMessage","sealMessage","fetch","requireDelivery","method","buffered","race","resolvedRequest","errorString","native$1","USER_AGENT_HEADER","LogType","LOG_LEVELS","VERBOSE","DEBUG","INFO","WARN","ERROR","NONE","ConsoleLogger$1","ConsoleLogger","level","_pluggables","_padding","n","_ts","dt","getMinutes","getSeconds","getMilliseconds","_config","_log","msg","loggerLevelName","LOG_LEVEL","log","warn","BIND_ALL_LOG_LEVELS","debug","plugin","logEvent","timestamp","pushLogs","verbose","addPluggable","pluggable","getCategoryName","listPluggables","AmplifyError","extendedRequestId","httpStatusCode","requestId","AMPLIFY_SYMBOL","logger","Hub","protectedChannels","_remove","holder","dispatch","ampSymbol","capsule","patternInfo","_toListeners","listen","listenerName","isNonRetryableError","deepFreeze","propNames","freeze","authTypeMapping","API_KEY","AWS_IAM","AMAZON_COGNITO_USER_POOLS","OPENID_CONNECT","AWS_LAMBDA","LAMBDA","getRedirectUrl","redirectStr","getOAuthConfig","parseSocialProviders","aws_cognito_social_providers","updatedProvider","ADD_OAUTH_LISTENER","GOOGLE","LOGIN_WITH_AMAZON","FACEBOOK","SIGN_IN_WITH_APPLE","parseAmplifyConfig","amplifyConfig","aws_appsync_apiKey","aws_appsync_authenticationType","aws_appsync_graphqlEndpoint","aws_appsync_region","aws_bots_config","aws_cognito_identity_pool_id","aws_cognito_sign_up_verification_method","aws_cognito_mfa_configuration","aws_cognito_mfa_types","aws_cognito_password_protection_settings","aws_cognito_verification_mechanisms","aws_cognito_signup_attributes","aws_cognito_username_attributes","aws_mandatory_sign_in","aws_mobile_analytics_app_id","aws_mobile_analytics_app_region","aws_user_files_s3_bucket","aws_user_files_s3_bucket_region","aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing","aws_user_pools_id","aws_user_pools_web_client_id","predictions","aws_cloud_logic_custom","Push","AWSPinpoint","Interactions","LexV1","bot","mfaConfig","passwordFormatConfig","passwordPolicyMinLength","passwordPolicyCharacters","loginWithEmailEnabled","loginWithPhoneEnabled","signUpVerificationMethod","hasOAuthConfig","hasSocialProviderConfig","dangerouslyConnectToHttpEndpointForTesting","amazon_location_service","REST","api","name2","VoiceId","voiceId","speechGenerator","defaults","Predictions","parseAWSExports","version","isAmplifyOutputs","BLOCK_SIZE","KEY","Uint32Array","INIT","MAX_HASHABLE_LENGTH","RawSha256","state","Int32Array","temp","bufferLength","bytesHashed","finished","hashBuffer","digest","bitsHashed","bufferView","undecoratedLength","setUint8","setUint32","out","state0","state1","state2","state3","state4","state5","state6","state7","u","t1_1","t2_1","t1","t2","Sha256","reset","toHash","digestSync","outer","inner","bufferHash","bufferFromSecret","SHORT_TO_HEX","encodedByte","Framework","Category","AnalyticsAction","ApiAction","AuthAction","DataStoreAction","GeoAction","InAppMessagingAction","InteractionsAction","PredictionsAction","PubSubAction","PushNotificationAction","StorageAction","globalExists","windowExists","documentExists","document","processExists","keyPrefixMatch","detectionMap","platform","Expo","detectionMethod","expo","ReactNative","product","NextJs","Nuxt","__NUXT__","$nuxt","Angular","angularVersionSetInDocument","querySelector","angularContentSetInWindow","ng","React","elementKeyPrefixedWithReact","querySelectorAll","element","VueJs","Svelte","WebUnknown","NextJsSSR","NuxtSSR","__NUXT_PATHS__","ReactSSR","define_process_env_default","VueJsSSR","AngularSSR","npm_lifecycle_script","SvelteSSR","frameworkChangeObservers","detectionEntry","ServerSideUnknown","fcn","customUserAgentState","getAmplifyUserAgentObject","category","amplifyVersion","customState","additionalDetails","getCustomUserAgent","agentKey","agentValue","ctorFunc","UnsubscriptionError","_super","createImpl","initialTeardown","_parentage","_finalizers","empty","_parentage_1","_parentage_1_1","initialFinalizer","_finalizers_1","_finalizers_1_1","__spreadArray","__read","teardown","_hasParent","_addParent","_removeParent","EMPTY","handler","_i","_this","isStopped","EMPTY_OBSERVER","__extends","SafeSubscriber","_next","_error","_complete","ConsumerObserver","partialObserver","observerOrNext","_subscribe","operator","_trySubscribe","sink","fns","toPromise","shouldUnsubscribe","closed_1","Reachability","networkMonitor","globalObj","selfContext","WorkerGlobalScope","isWebWorker","online","onLine","notifyOnline","notifyOffline","_observers","_observer","_observerOverride","AuthClass","authResourcesConfig","authOptions","userPoolEndpoint","getCustomEndpointWarningMessage","fetchAuthSession","credentialsAndIdentityId","userSub","getTokens","sub","credentialsProvider","getCredentialsAndIdentityId","authenticated","forceRefresh","credentials","clearCredentials","clearCredentialsAndIdentityId","tokenProvider","oAuthListener","isConfigured","libraryOptions","resolvedResourceConfig","notifyOAuthListener","fetchAuthSession$1","parseMetadata","statusCode","isMetadataBearer","$metadata","cfId","parseJsonBody","output","DEFAULT_MAX_DELAY_MS","jitteredBackoff$1","delayFunction","CLOCK_SKEW_ERROR_CODES","getRetryDecider","errorParser","parsedError","errorCode","retryable","isConnectionError","isThrottlingError","isClockSkewError","isServerSideError","THROTTLING_ERROR_CODES","TIMEOUT_ERROR_CODES","NetworkError","retryMiddlewareFactory","maxAttempts","retryDecider","computeDelay","abortSignal","attemptsCount","handleTerminalErrorOrResponse","addOrIncrementMetadataAttempts","aborted","isCredentialsExpiredError","isCredentialsExpired","cancellableSleep","timeoutMs","timeoutId","sleepPromiseResolveFn","sleepPromise","cancelSleep","nextHandlerOutput","attempts","userAgentMiddlewareFactory","userAgentHeader","trim","headerName","composeTransferHandler","coreHandler","middleware","composedHandler","composeHandlerRequest","m","resolvedMiddleware","withMemoization","payloadAccessor","cached","shouldSendBody","fetchTransferHandler","cache","withCrossDomainCredentials","resp","signal","responseHeaders","blob","AmplifyUrl","AmplifyUrlSearchParams","URLSearchParams","PlatformNotSupported","KeyValueStorage$1","setItem","PlatformNotSupportedError","getItem","removeItem","clear","InMemoryStorage$1","getSessionStorageWithFallback","sessionStorage","InMemoryStorage","SyncKeyValueStorage$1","_storage","converter","defaultAttributes","expires","toUTCString","encodeURIComponent","escape","stringifiedAttributes","attributeName","cookie","write","cookies","jar","parts","found","withAttributes","withConverter","CookieStorage","sameSite","secure","JsCookie","getData","promises","all","defaultStorage","KeyValueStorage","localStorage","getLocalStorageWithFallback","SyncKeyValueStorage","getSignedHeaders","sort","AMZ_DATE_HEADER","TOKEN_HEADER","KEY_TYPE_IDENTIFIER","SHA256_ALGORITHM_IDENTIFIER","getSigningValues","signingDate","signingRegion","signingService","uriEscapePath","accessKeyId","secretAccessKey","sessionToken","longDate","shortDate","date","getFormattedDates","credentialScope","getHashedData","sha256","getHashedDataAsHex","toHex","getCanonicalHeaders","escapeUri","uri","hexEncode","getCanonicalUri","getHashedPayload","isSourceData","isArrayBuffer","getSignature","canonicalRequest","searchParams","keyA","valA","keyB","valB","val","getCanonicalRequest","stringToSign","hashedRequest","getStringToSign","signature","dateKey","regionKey","serviceKey","getSigningKey","signRequest","signingValues","host","requestToSign","credentialEntry","signedHeadersEntry","signatureEntry","getSkewCorrectedDate","systemClockOffset","getUpdatedSystemClockOffset","clockTimeInMilliseconds","currentSystemClockOffset","clockOffsetInMilliseconds","abs","isClockSkewed","getDateHeader","NonRetryableError","nonRetryable","jitteredExponentialRetry","functionToRetry","MAX_DELAY_MS","delayFn","wakeUp","retryIn","_resolve","retry","ApiError","_response","replicateApiErrorResponse","base64Encoder","urlSafe","skipPadding","inputStr","byte","fromCodePoint","bytesToString","encodedStr","btoa","getBtoa","createAssertionFunction","errorMap","AssertionError","assertion","additionalContext","atob","getAtob","AuthTokenConfigException","AuthUserPoolAndIdentityPoolException","OAuthNotConfigureException","parseJsonError","cleanValue","sanitizeErrorCode","__type","Message","transferHandler","serializer","deserializer","defaultConfig","resolvedConfig","AMZ_SDK_INVOCATION_ID_HEADER","COGNITO_IDENTITY_SERVICE_NAME","unauthenticatedHandler","getSharedHeaders","buildHttpRpcRequest","createGetCredentialsForIdentityClient","getCredentialsForIdentityDeserializer","Credentials","deserializeCredentials","Expiration","defaultPartition","outputs","dnsSuffix","regionRegex","regions","partitionsInfo","partitions","getDnsSuffix","regex","RegExp","USER_UNAUTHENTICATED_EXCEPTION","OAuthStorageKeys","inflightOAuth","oauthSignIn","oauthPKCE","oauthState","cognitoUserPoolTransferHandler","COGNITO_IDP_SERVICE_NAME","createCognitoUserPoolEndpointResolver","cognitoUserPoolEndpointResolver","createGetTokensFromRefreshTokenClient","refreshAuthTokens","asyncFunction","inflightPromise","deDupeAsyncFunction","getRegionFromUserPoolId","getTokensFromRefreshToken","AuthenticationResult","ClientId","RefreshToken","DeviceKey","deviceMetadata","deviceKey","AccessToken","IdToken","iat","AuthTokenStorageKeys","oidcProvider","randomPasswordKey","deviceGroupKey","signInDetails","oauthMetadata","TokenProviderErrorCode","InvalidAuthTokens","AUTH_KEY_PREFIX","DefaultTokenStore","getKeyValueStorage","keyValueStorage","setKeyValueStorage","loadTokens","getAuthKeys","accessTokenString","itString","clockDriftString","Number","parseInt","getDeviceMetadata","getLastAuthUser","storeTokens","lastAuthUser","getLastAuthUserKey","randomPassword","clearTokens","clearDeviceMetadata","createKeysForAuthStorage","setOAuthMetadata","oauthMetadataKey","getOAuthMetadata","V5_HOSTED_UI_KEY","oAuthStore","clearOAuthInflightData","clearOAuthData","loadOAuthState","storeOAuthState","loadPKCE","storePKCE","pkce","authConfigParam","loadOAuthInFlight","storeOAuthInFlight","inflight","loadOAuthSignIn","isLegacyHostedUISignIn","isOAuthSignIn","preferPrivateSession","storeOAuthSignIn","TokenOrchestrator","waitForInflightOAuth","setTokenRefresher","tokenRefresher","setAuthTokenStore","tokenStore","getTokenStore","getTokenRefresher","_err","idTokenExpired","exp","accessTokenExpired","refreshTokens","newTokens","setTokens","handleErrors","cognitoUserPoolsTokenProvider","authTokenStore","tokenOrchestrator","IdentityIdStorageKeys","DefaultIdentityIdStore","_authKeys","_hasGuestIdentityId","_primaryIdentityId","storedIdentityId","clearIdentityId","cognitoIdentityPoolEndpointResolver","CREDENTIALS_TTL","CognitoAWSCredentialsAndIdentityIdProvider","_nextCredentialsRefresh","_identityIdStore","_credentialsAndIdentityId","getCredentialsOptions","tokenHasChanged","hasTokenChanged","assertIdTokenInAuthTokens","credsForOIDCTokens","getGuestCredentials","isPastTTL","isAuthenticatedCreds","getCredentialsForIdentity","clientResult","AccessKeyId","SecretKey","SessionToken","authTokens","associatedIdToken","cognitoCredentialsProvider","DefaultAmplify","resourceConfig","cookieBasedKeyValueStorage","resolvedKeyValueStorage","ssr","resolvedCredentialsProvider","authLibraryOptions","SYMBOL_TO_STRING_TAG","toStringTag","nodes","positions","_nodeLocations","_nodeLocations2","_nodeLocations3","_classCallCheck","nodeLocations","_this$nodes","loc","locations","originalExtensions","getOwnPropertyDescriptors","defineProperties","_objectSpread","captureStackTrace","subClass","superClass","_inherits","Derived","hasNativeReflectConstruct","Super","NewTarget","_i4","_error$nodes2","_i6","_error$locations2","printError","Kind","DOCUMENT","OPERATION_DEFINITION","VARIABLE_DEFINITION","SELECTION_SET","FIELD","ARGUMENT","FRAGMENT_SPREAD","INLINE_FRAGMENT","FRAGMENT_DEFINITION","VARIABLE","BOOLEAN","NULL","ENUM","LIST","OBJECT","OBJECT_FIELD","DIRECTIVE","NAMED_TYPE","LIST_TYPE","NON_NULL_TYPE","SCHEMA_DEFINITION","OPERATION_TYPE_DEFINITION","SCALAR_TYPE_DEFINITION","OBJECT_TYPE_DEFINITION","FIELD_DEFINITION","INPUT_VALUE_DEFINITION","INTERFACE_TYPE_DEFINITION","UNION_TYPE_DEFINITION","ENUM_TYPE_DEFINITION","ENUM_VALUE_DEFINITION","INPUT_OBJECT_TYPE_DEFINITION","DIRECTIVE_DEFINITION","SCHEMA_EXTENSION","SCALAR_TYPE_EXTENSION","OBJECT_TYPE_EXTENSION","INTERFACE_TYPE_EXTENSION","UNION_TYPE_EXTENSION","ENUM_TYPE_EXTENSION","INPUT_OBJECT_TYPE_EXTENSION","for","Location","startToken","endToken","SOF","Source","DirectiveLocation","QUERY","MUTATION","SUBSCRIPTION","SCHEMA","SCALAR","ARGUMENT_DEFINITION","INTERFACE","UNION","ENUM_VALUE","INPUT_OBJECT","INPUT_FIELD_DEFINITION","Lexer","startOfFileToken","lastToken","_proto","advance","lookahead","_token$next","sourceObj","isSource","_lexer","_options","parseName","expectToken","definitions","many","parseDefinition","peek","parseOperationDefinition","parseFragmentDefinition","parseTypeSystemDefinition","parseTypeSystemExtension","peekDescription","unexpected","variableDefinitions","directives","parseSelectionSet","parseOperationType","parseVariableDefinitions","parseDirectives","operationToken","optionalMany","parseVariableDefinition","variable","parseVariable","parseTypeReference","defaultValue","expectOptionalToken","parseValueLiteral","selections","parseSelection","parseFragment","parseField","alias","nameOrAlias","parseArguments","isConst","parseConstArgument","parseArgument","hasTypeCondition","expectOptionalKeyword","parseFragmentName","typeCondition","parseNamedType","_this$_options","expectKeyword","experimentalFragmentVariables","parseList","parseObject","parseStringLiteral","any","_this2","parseObjectField","parseDirective","keywordToken","parseSchemaDefinition","parseScalarTypeDefinition","parseObjectTypeDefinition","parseInterfaceTypeDefinition","parseUnionTypeDefinition","parseEnumTypeDefinition","parseInputObjectTypeDefinition","parseDirectiveDefinition","parseDescription","operationTypes","parseOperationTypeDefinition","interfaces","parseImplementsInterfaces","parseFieldsDefinition","_this$_options2","allowLegacySDLImplementsInterfaces","types","delimitedMany","_this$_options3","allowLegacySDLEmptyFields","parseFieldDefinition","parseArgumentDefs","parseInputValueDef","parseUnionMemberTypes","parseEnumValuesDefinition","parseEnumValueDefinition","parseInputFieldsDefinition","parseSchemaExtension","parseScalarTypeExtension","parseObjectTypeExtension","parseInterfaceTypeExtension","parseUnionTypeExtension","parseEnumTypeExtension","parseInputObjectTypeExtension","repeatable","parseDirectiveLocations","parseDirectiveLocation","_this$_options4","noLocation","atToken","openKind","parseFn","closeKind","delimiterKind","Name","Document","OperationDefinition","VariableDefinition","Variable","SelectionSet","Field","Argument","FragmentSpread","InlineFragment","FragmentDefinition","IntValue","FloatValue","StringValue","BooleanValue","NullValue","EnumValue","ListValue","ObjectValue","ObjectField","Directive","NamedType","ListType","NonNullType","SchemaDefinition","OperationTypeDefinition","ScalarTypeDefinition","ObjectTypeDefinition","FieldDefinition","InputValueDefinition","InterfaceTypeDefinition","UnionTypeDefinition","EnumTypeDefinition","EnumValueDefinition","InputObjectTypeDefinition","DirectiveDefinition","SchemaExtension","ScalarTypeExtension","ObjectTypeExtension","InterfaceTypeExtension","UnionTypeExtension","EnumTypeExtension","InputObjectTypeExtension","varDefs","argsLine","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","indentation","preferMultipleLines","isSingleLine","hasLeadingSpace","hasTrailingQuote","hasTrailingSlash","printAsMultipleLines","printBlockString","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","_ref18","_ref19","_ref20","_ref21","_ref22","_ref23","_ref24","_ref25","_ref26","_ref27","_ref28","_ref29","_ref30","_ref31","_ref32","_ref33","_ref34","_ref35","_ref36","_ref37","_ref38","RestApiError","CanceledError","RestApiValidationErrorCode","InvalidApiName","parseRestApiServiceError","parsedAwsError","stubErrorResponse","bodyText","buildRestApiError","bodyTextPromise","bodyProxy","prop","restApiError","DEFAULT_REST_IAM_SIGNING_SERVICE","DEFAULT_IAM_SIGNING_REGION","APIG_HOSTNAME_PATTERN","isIamAuthApplicableForGraphQL","signingServiceInfo","authenticatedHandler","signRequestOptions","signedRequest","dateString","iamAuthApplicable","withCredentials","retryStrategy","resolvedBody","FormData","resolvedHeaders","normalizedHeaders","contentType","resolveHeaders","baseOptions","getRetryDeciderFromStrategy","isIamAuthApplicable","resolveCredentials","signingInfoFromUrl","hostname","parseSigningInfo","strategy","cancelTokenMap","WeakMap","post","abortController","controller","AbortController","responsePromise","isInternalPost","publicApisAbortController","publicApisAbortSignal","internalPostAbortSignal","abortReason","job","canceledError","abortMessage","abort","createCancellableOperation","responseWithCleanUp","updateRequestToBeCancellable","NON_RETRYABLE_CODES","NON_RETRYABLE_ERROR_TYPES","MESSAGE_TYPES","SUBSCRIPTION_STATUS","SOCKET_STATUS","AWS_APPSYNC_REALTIME_HEADERS","accept","DEFAULT_KEEP_ALIVE_TIMEOUT","CONTROL_MSG","ConnectionState","ReachabilityMonitor","CONNECTION_CHANGE","KEEP_ALIVE_MISSED","keepAliveState","KEEP_ALIVE","CONNECTION_ESTABLISHED","connectionState","CONNECTION_FAILED","intendedConnectionState","CLOSING_CONNECTION","OPENING_CONNECTION","CLOSED","ONLINE","networkState","OFFLINE","ConnectionStateMonitor","_networkMonitoringSubscription","_linkedConnectionState","_initialNetworkStateSubscription","_linkedConnectionStateObservable","connectionStateObserver","_linkedConnectionStateObserver","enableNetworkMonitoring","disableNetworkMonitoring","connectionStateObservable","previous","connectionStatesTranslator","predicate","current","toInclude","statusUpdates","newSocketStatus","ConnectedPendingNetwork","ConnectedPendingDisconnect","ConnectionDisruptedPendingNetwork","ConnectionDisrupted","ConnectedPendingKeepAlive","Connecting","Disconnected","Connected","ReconnectEvent","ReconnectionMonitor","reconnectObservers","addObserver","reconnectObserver","START_RECONNECT","reconnectSetTimeoutId","reconnectIntervalId","_triggerReconnect","HALT_RECONNECT","protocol","standardDomainPattern","eventDomainPattern","customDomainPath","getRealtimeEndpointUrl","realtimeEndpoint","isCustomDomain","additionalHeadersFromOptions","libraryConfigHeaders","additionalCustomHeaders","_libraryConfigHeaders","requestOptions","queryString","Authorization","awsAuthTokenHeader","session","awsRealTimeApiKeyHeader","awsRealTimeIAMHeader","canonicalUri","endpointInfo","creds","customAuthHeader","awsRealTimeHeaderBasedAuth","headerHandler","iam","oidc","userPool","lambda","none","resolvedApiKey","dispatchApiEvent","AWSWebSocketProvider","subscriptionObserverMap","allowNoSubscriptions","socketStatus","keepAliveTimestamp","promiseArray","connectionStateMonitor","reconnectionMonitor","_establishConnection","awsRealTimeUrl","subprotocol","_openConnection","_initiateHandshake","errorType","providerName","wsProtocolName","wsConnectUri","connectUri","connectionStateMonitorSubscription","_startConnectionStateMonitoring","awsRealTimeSocket","_closeSocket","subscriptionStartInProgress","subscriptionId","startSubscription","_startSubscriptionWithAWSAppSyncRealTime","REALTIME_SUBSCRIPTION_INIT_ERROR","reconnectSubscription","reconnectSubscriptionObserver","_cleanupSubscription","READY","_connectWebSocket","_publishMessage","_initializeWebSocketConnection","serializedSubscriptionMessage","_prepareSubscriptionPayload","publishListener","cleanup","errorTypes","errorListener","_waitForSubscriptionToBeConnected","subscriptionState","CONNECTED","_sendUnsubscriptionMessage","_removeSubscriptionObserver","PENDING","startAckTimeoutId","_logStartSubscriptionError","subscriptionFailedCallback","subscriptionReadyCallback","_timeoutStartSubscriptionAck","subscriptionObserver","observedSubscriptionState","unsubscribeMessage","_unsubscribeMessage","stringToAWSRealTime","_closeSocketIfRequired","bufferedAmount","tempSocket","maintainKeepAlive","keepAliveHeartbeat","connectionTimeoutMs","currentTime","_errorDisconnect","TIMEOUT_DISCONNECT","_handleIncomingSubscriptionMessage","isData","_handleSubscriptionData","GQL_START_ACK","EVENT_SUBSCRIBE_ACK","SUBSCRIPTION_ACK","GQL_CONNECTION_KEEP_ALIVE","GQL_ERROR","EVENT_SUBSCRIBE_ERROR","FAILED","errorMessage","keepAliveHeartbeatIntervalId","payloadString","authHeader","headerString","authTokenSubprotocol","queryParams","nonAuthHeaders","extractNonAuthHeaders","v","append","queryParamsFromCustomHeaders","urlParams","realtimeEndpointUrl","existingParams","realtimeUrlWithQueryString","_establishRetryableConnection","newSocket","_getNewWebSocket","ackOk","_extractConnectionTimeout","GQL_CONNECTION_ACK","_registerWebsocketHandlers","GQL_CONNECTION_ERROR","_extractErrorCodeAndType","gqlInit","GQL_CONNECTION_INIT","checkAckOk","targetAckOk","CONNECTION_CLOSED","PROVIDER_NAME","AWSAppSyncRealTimeProvider","getProviderName","serializedData","subscriptionMessage","USER_AGENT_HEADER$1","GQL_START","DATA","GQL_STOP","GraphQLApiError","APIValidationErrorCode","validationErrorMap","NoAuthSession","NoRegion","NoCustomEndpoint","resolveConfig","customEndpoint","customEndpointRegion","assertValidationError","resolveLibraryOptions","GraphQLAuthError","NO_API_KEY","NO_VALID_CREDENTIALS","NO_CREDENTIALS","NO_VALID_AUTH_TOKEN","NO_FEDERATED_JWT","NO_SIGNED_IN_USER","NO_CURRENT_USER","NO_AUTH_TOKEN_HEADER","NO_AUTH_TOKEN","NO_ENDPOINT","createGraphQLResultWithError","InternalGraphQLAPIClass","appSyncRealTime","_api","cancelREST","isCancelErrorREST","getModuleName","getGraphqlOperationType","paramQuery","operationDef","def","isAmplifyInstance","_graphql","amplifyInstance","_graphqlSubscribe","authModeOverride","apiKeyOverride","initialAuthMode","customHeaders","authHeaders","headerBasedAuth","responseBody","isGraphQLResponseWithErrors","memoKey","realtimeProvider","ID","AWSDate","AWSTime","AWSDateTime","AWSTimestamp","AWSEmail","AWSPhone","AWSURL","AWSIPAddress","AWSJSON","Int","Float","modelRecord","mapped","dvPair","itemValue","CREATE","GET","UPDATE","DELETE","INDEX_QUERY","ONCREATE","ONUPDATE","ONDELETE","OBSERVEQUERY","mappedFields","pair","alphabetByEncoding","fromBase64","totalByteLength","dataView","chunkOffset","deserializeContent","image","deserializeImageBlock","deserializeDocumentBlock","toolUse","deserializeToolUseBlock","toolResult","deserializeToolResultBlock","removeNullsFromBlock","toolUseId","toolResultBlock","deserializeJsonBlock","convertItemToConversationMessage","createdAt","conversationId","role","createListMessagesFunction","ListMessages","contentBlockToolUse","removeNullsFromConversationStreamEvent","createOnStreamEventFunction","conversationRouteName","subscribeSchema","OnStreamEvent","subscribeOperation","associatedUserMessageId","contentBlockIndex","contentBlockDoneAtIndex","contentBlockDeltaIndex","contentBlockText","stopReason","convertItemToConversationStreamEvent","serializeAiContext","aiContext","serializeContent","serializeImageBlock","serializeDocumentBlock","serializeToolResultBlock","serializeToolConfiguration","tools","tool","toolSpec","inputSchema","serializeJsonBlock","createSendMessageFunction","processedInput","toolConfiguration","sendSchema","sendOperation","SendMessage","convertItemToConversation","conversationCreatedAt","conversationUpdatedAt","conversationMetadata","conversationName","updatedAt","onStreamEvent","sendMessage","listMessages","metadataObject","createOperation","CreateConversation","GetConversation","ListConversations","datum","deleteOperation","DeleteConversation","updateOperation","UpdateConversation","attributeIsSecondaryIndex","idxs","mis","modelAttrs","coarseToFineDict","disabledOps","disabledOpsUpper","userAgentDetails","GraphQl","isGraphQLOptionsWithOverride","internalUserAgentOverride","cleanOptions","clientRef","coreEvent","explicitAuthMode","serializeEvents","ev","eventJson","EVENT_PUBLISH","EVENT_SUBSCRIBE","deserializedEvent","EVENT_STOP","UInt32","Asset","connecting","exception","TransactionHandler","generateTransactionMessage","namedParams","dapp","isValidTransactionMessage","isMatchingTransaction","transactionId","processTransactionResult","SyncHandlerConfig","graphQLRelayEndpoint","graphQLRelayRegion","eventRelayEndpoint","eventRelayRegion","GraphQLSyncHandler","publishToChannel","subscribeToChannel","messageHandler","errorHandler","subscription","events.connect","TransactionSyncHandler","parseAuthHeaders","svc","mode","rawMessage","generateChannelName","ActivationFetchError","ActivationExpiredError","ActivationCancelledError","ActivationDeepLinkError","InvalidCodeError","MobileAppConnect","mobileAppConnectConfig","isCanceled","connectedType","WAX_SCHEME_DEEPLINK","activationEndpoint","dappInfo","dAppInfo","transactionSyncHandler","getConnectedType","showAppConnectPrompt","requisitionInfo","directConnectPromiseResolve","directConnectPromiseReject","checkActivationPromise","directConnectPromise","remote","fetchActivationInfo","getActivationPayload","qrCodeContent","direct","directConnect","currentPromptResponse","checkActivation","remoteTransact","user","txInfo","getRawActions","currentTxInfo","signTransaction","directTransact","activatedData","checkIfActivated","onLoginComplete","dAppName","logourl","schema","sut","getDappSingleUsedToken","dappClientId","ok","intervalId","currentTimestamp","expire","logoUrl","openDeepLinkWithFallback","visibilityState","callbackUrl","deviceHash","linkParams","antelope","callbackHttp","arbitrary","base64Nonce","interval","connectToDevice","re","accountName","isTemp","createData","proof","hasFocus","completeTransaction","encodeTransactions","transactionUuid","redirect","broadcast","encoded","decodeSignatureFromWallet","responseTransaction","Transaction","alert","events.closeAll","WalletPluginCloudWallet","supportedChains","autoUrl","loginTimeout","allowTemp","mobileAppConnect","showLoginPrompt","waxLogin","cancelable","canceled","webLoginPromiseResolve","webLoginPromiseReject","webLoginPromise","IdentityProof","TimePointSec","signer","isTempAccount","whitelistedContracts","autoLoginUrl","statusText","autoLogin","popupLoginUrl","popupLogin","verified","userAccount","mobileSign","waxSign","mobileSignCancelReject","mobileSignCancelPromise","optional","signPromise","getWalletResponse","objectify","processed","except","autoSign","logout","WalletPluginWombat","loadScatterProtocol","scatterProtocol","__vitePreload","import","__VITE_PRELOAD__","handleLogout","handleSignatureRequest"],"ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349],"sources":["../../../node_modules/@wharfkit/sealed-messages/lib/sealed-messages.m.js","../../../node_modules/@wharfkit/protocol-esr/lib/protocol-esr.m.js","../../../node_modules/@greymass/buoy/lib/buoy-client.m.js","../../../node_modules/uuid/dist/esm-browser/v4.js","../../../node_modules/uuid/dist/esm-browser/rng.js","../../../node_modules/uuid/dist/esm-browser/stringify.js","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/parseAmplifyOutputs.mjs","../../../node_modules/@aws-crypto/util/build/module/convertToBuffer.js","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/Platform/detectFramework.mjs","../../../node_modules/rxjs/dist/esm5/internal/util/isFunction.js","../../../node_modules/rxjs/dist/esm5/internal/util/arrRemove.js","../../../node_modules/rxjs/dist/esm5/internal/Subscription.js","../../../node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js","../../../node_modules/rxjs/dist/esm5/internal/util/noop.js","../../../node_modules/rxjs/dist/esm5/internal/Subscriber.js","../../../node_modules/rxjs/dist/esm5/internal/util/identity.js","../../../node_modules/rxjs/dist/esm5/internal/Observable.js","../../../node_modules/rxjs/dist/esm5/internal/util/lift.js","../../../node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js","../../../node_modules/rxjs/dist/esm5/internal/util/isPromise.js","../../../node_modules/rxjs/dist/esm5/internal/util/isInteropObservable.js","../../../node_modules/rxjs/dist/esm5/internal/util/isAsyncIterable.js","../../../node_modules/rxjs/dist/esm5/internal/util/throwUnobservableError.js","../../../node_modules/rxjs/dist/esm5/internal/util/isIterable.js","../../../node_modules/rxjs/dist/esm5/internal/util/isReadableStreamLike.js","../../../node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js","../../../node_modules/rxjs/dist/esm5/internal/util/executeSchedule.js","../../../node_modules/rxjs/dist/esm5/internal/operators/observeOn.js","../../../node_modules/rxjs/dist/esm5/internal/operators/subscribeOn.js","../../../node_modules/rxjs/dist/esm5/internal/scheduled/scheduleAsyncIterable.js","../../../node_modules/rxjs/dist/esm5/internal/scheduled/scheduled.js","../../../node_modules/rxjs/dist/esm5/internal/scheduled/scheduleObservable.js","../../../node_modules/rxjs/dist/esm5/internal/scheduled/scheduleArray.js","../../../node_modules/rxjs/dist/esm5/internal/scheduled/schedulePromise.js","../../../node_modules/rxjs/dist/esm5/internal/scheduled/scheduleIterable.js","../../../node_modules/rxjs/dist/esm5/internal/scheduled/scheduleReadableStreamLike.js","../../../node_modules/rxjs/dist/esm5/internal/operators/map.js","../../../node_modules/rxjs/dist/esm5/internal/operators/catchError.js","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/utils/retry/jitteredBackoff.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/utils/retry/constants.mjs","../../../node_modules/js-cookie/dist/js.cookie.mjs","../../../node_modules/@aws-amplify/core/dist/esm/singleton/Auth/utils/index.mjs","../../../node_modules/@aws-amplify/core/node_modules/uuid/dist/esm-browser/rng.js","../../../node_modules/@aws-amplify/core/dist/esm/Platform/detectFramework.mjs","../../../node_modules/@aws-amplify/core/dist/esm/utils/isTokenExpired.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/foundation/parsers/regionParsers.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/providers/cognito/utils/types.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/errors/utils/assertServiceError.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/providers/cognito/tokenProvider/TokenStore.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/providers/cognito/credentialsProvider/utils.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/providers/cognito/credentialsProvider/IdentityIdProvider.mjs","../../../node_modules/@aws-amplify/core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/createGetIdClient.mjs","../../../node_modules/graphql/jsutils/isObjectLike.mjs","../../../node_modules/graphql/language/location.mjs","../../../node_modules/graphql/language/printLocation.mjs","../../../node_modules/graphql/error/GraphQLError.mjs","../../../node_modules/graphql/error/syntaxError.mjs","../../../node_modules/graphql/jsutils/defineInspect.mjs","../../../node_modules/graphql/jsutils/invariant.mjs","../../../node_modules/graphql/language/ast.mjs","../../../node_modules/graphql/jsutils/inspect.mjs","../../../node_modules/graphql/jsutils/devAssert.mjs","../../../node_modules/graphql/language/source.mjs","../../../node_modules/graphql/language/blockString.mjs","../../../node_modules/graphql/language/lexer.mjs","../../../node_modules/graphql/language/parser.mjs","../../../node_modules/graphql/language/visitor.mjs","../../../node_modules/graphql/language/printer.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/utils/errors/repackageAuthError.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/types/index.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/utils/resolveOwnerFields.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/utils/stringTransformation.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/utils/selfAwareAsync.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/cancellation.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/APIClient.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/operations/utils.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/ai/getCustomUserAgentDetails.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/operations/custom.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/generateCustomOperationsProperty.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/operations/get.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/operations/list.mjs","../../../node_modules/@smithy/util-base64/dist-es/toBase64.browser.js","../../../node_modules/@smithy/util-base64/node_modules/@smithy/util-utf8/dist-es/fromUtf8.browser.js","../../../node_modules/@smithy/util-base64/dist-es/constants.browser.js","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/operations/indexQuery.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/operations/subscription.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/utils/findIndexByFields.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/operations/observeQuery.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/utils/resolvePKFields.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/addSchemaToClient.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/utils/clientProperties/generateModelsProperty.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/utils/clientProperties/generateEnumsProperty.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/utils/clientProperties/generateConversationsProperty.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/utils/clientProperties/generateGenerationsProperty.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/internals/v6.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/internals/utils/runtimeTypeGuards/isApiGraphQLProviderConfig.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api/dist/esm/API.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/internals/generateClient.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/internals/events/index.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/internals/events/utils.mjs","../../../node_modules/@wharfkit/wallet-plugin-cloudwallet/lib/wallet-plugin-cloudwallet.m.js","../../../node_modules/eventemitter3/index.js","../../../node_modules/@wharfkit/wallet-plugin-anchor/lib/wallet-plugin-anchor.m.js","../../../node_modules/uuid/dist/esm-browser/native.js","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/constants.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/Logger/types.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/Logger/ConsoleLogger.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/errors/AmplifyError.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/types/errors.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/Hub/index.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/utils/retry/isNonRetryableError.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/utils/retry/retry.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/utils/deepFreeze.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/parseAWSExports.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/singleton/constants.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/utils/parseAmplifyConfig.mjs","../../../node_modules/@aws-crypto/sha256-js/build/module/constants.js","../../../node_modules/@aws-crypto/sha256-js/build/module/RawSha256.js","../../../node_modules/@smithy/util-utf8/dist-es/fromUtf8.browser.js","../../../node_modules/@aws-crypto/sha256-js/build/module/jsSha256.js","../../../node_modules/@aws-crypto/util/build/module/isEmptyData.js","../../../node_modules/@smithy/util-hex-encoding/dist-es/index.js","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/Platform/types.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/Platform/version.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/Platform/detection/helpers.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/Platform/detection/index.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/Platform/detection/Expo.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/Platform/detection/ReactNative.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/Platform/detection/Next.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/Platform/detection/Nuxt.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/Platform/detection/Angular.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/Platform/detection/React.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/Platform/detection/Vue.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/Platform/detection/Svelte.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/Platform/detection/Web.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/Platform/customUserAgent.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/Platform/index.mjs","../../../node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js","../../../node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js","../../../node_modules/rxjs/dist/esm5/internal/config.js","../../../node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js","../../../node_modules/rxjs/dist/esm5/internal/symbol/observable.js","../../../node_modules/rxjs/dist/esm5/internal/util/errorContext.js","../../../node_modules/rxjs/dist/esm5/internal/util/pipe.js","../../../node_modules/rxjs/dist/esm5/internal/util/isArrayLike.js","../../../node_modules/rxjs/dist/esm5/internal/symbol/iterator.js","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/Reachability/Reachability.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/utils/isWebWorker.mjs","../../../node_modules/rxjs/dist/esm5/internal/observable/from.js","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/singleton/Auth/index.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/singleton/Amplify.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/singleton/apis/fetchAuthSession.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/singleton/apis/internal/fetchAuthSession.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/serde/responseInfo.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/serde/json.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/middleware/retry/constants.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/middleware/retry/jitteredBackoff.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/middleware/retry/isClockSkewError.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/middleware/retry/defaultRetryDecider.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/middleware/retry/retryMiddleware.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/utils/amplifyUuid/index.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/middleware/userAgent/middleware.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/internal/composeTransferHandler.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/utils/memoization.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/handlers/fetch.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/utils/amplifyUrl/index.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/errors/PlatformNotSupportedError.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/storage/KeyValueStorage.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/storage/InMemoryStorage.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/storage/utils.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/storage/SyncKeyValueStorage.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/storage/CookieStorage.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/storage/index.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/storage/DefaultStorage.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/storage/SessionStorage.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/storage/SyncSessionStorage.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSignedHeaders.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/constants.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSigningValues.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getFormattedDates.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCredentialScope.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/dataHashHelpers.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalHeaders.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalQueryString.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalUri.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getHashedPayload.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSignature.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getCanonicalRequest.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getStringToSign.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/utils/getSigningKey.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/signer/signatureV4/signRequest.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/utils/getSkewCorrectedDate.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/utils/getUpdatedSystemClockOffset.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/utils/isClockSkewed.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/clients/middleware/signing/middleware.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/utils/retry/NonRetryableError.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/utils/retry/jitteredExponentialRetry.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/errors/APIError.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/utils/convert/base64/base64Encoder.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/utils/convert/base64/bytesToString.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/core/dist/esm/utils/globalHelpers/index.mjs","../../../node_modules/@aws-amplify/core/dist/esm/Logger/types.mjs","../../../node_modules/@aws-amplify/core/dist/esm/Logger/ConsoleLogger.mjs","../../../node_modules/@aws-amplify/core/dist/esm/constants.mjs","../../../node_modules/@aws-amplify/core/dist/esm/errors/AmplifyError.mjs","../../../node_modules/@aws-amplify/core/dist/esm/types/errors.mjs","../../../node_modules/@aws-amplify/core/dist/esm/errors/createAssertionFunction.mjs","../../../node_modules/@aws-amplify/core/dist/esm/Hub/index.mjs","../../../node_modules/@aws-amplify/core/dist/esm/utils/convert/base64/base64Decoder.mjs","../../../node_modules/@aws-amplify/core/dist/esm/utils/globalHelpers/index.mjs","../../../node_modules/@aws-amplify/core/dist/esm/singleton/Auth/utils/errorHelpers.mjs","../../../node_modules/@aws-amplify/core/node_modules/uuid/dist/esm-browser/stringify.js","../../../node_modules/@aws-amplify/core/node_modules/uuid/dist/esm-browser/native.js","../../../node_modules/@aws-amplify/core/dist/esm/Platform/types.mjs","../../../node_modules/@aws-amplify/core/dist/esm/Platform/version.mjs","../../../node_modules/@aws-amplify/core/dist/esm/Platform/detection/helpers.mjs","../../../node_modules/@aws-amplify/core/dist/esm/Platform/detection/index.mjs","../../../node_modules/@aws-amplify/core/dist/esm/Platform/detection/Expo.mjs","../../../node_modules/@aws-amplify/core/dist/esm/Platform/detection/ReactNative.mjs","../../../node_modules/@aws-amplify/core/dist/esm/Platform/detection/Next.mjs","../../../node_modules/@aws-amplify/core/dist/esm/Platform/detection/Nuxt.mjs","../../../node_modules/@aws-amplify/core/dist/esm/Platform/detection/Angular.mjs","../../../node_modules/@aws-amplify/core/dist/esm/Platform/detection/React.mjs","../../../node_modules/@aws-amplify/core/dist/esm/Platform/detection/Vue.mjs","../../../node_modules/@aws-amplify/core/dist/esm/Platform/detection/Svelte.mjs","../../../node_modules/@aws-amplify/core/dist/esm/Platform/detection/Web.mjs","../../../node_modules/@aws-amplify/core/dist/esm/Platform/customUserAgent.mjs","../../../node_modules/@aws-amplify/core/dist/esm/Platform/index.mjs","../../../node_modules/@aws-amplify/core/dist/esm/clients/serde/responseInfo.mjs","../../../node_modules/@aws-amplify/core/dist/esm/clients/serde/json.mjs","../../../node_modules/@aws-amplify/core/dist/esm/clients/internal/composeServiceApi.mjs","../../../node_modules/@aws-amplify/core/dist/esm/clients/middleware/retry/constants.mjs","../../../node_modules/@aws-amplify/core/dist/esm/clients/middleware/retry/jitteredBackoff.mjs","../../../node_modules/@aws-amplify/core/dist/esm/utils/retry/jitteredBackoff.mjs","../../../node_modules/@aws-amplify/core/dist/esm/utils/retry/constants.mjs","../../../node_modules/@aws-amplify/core/dist/esm/clients/middleware/retry/isClockSkewError.mjs","../../../node_modules/@aws-amplify/core/dist/esm/clients/middleware/retry/defaultRetryDecider.mjs","../../../node_modules/@aws-amplify/core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/constants.mjs","../../../node_modules/@aws-amplify/core/dist/esm/clients/middleware/retry/retryMiddleware.mjs","../../../node_modules/@aws-amplify/core/dist/esm/utils/amplifyUuid/index.mjs","../../../node_modules/@aws-amplify/core/node_modules/uuid/dist/esm-browser/v4.js","../../../node_modules/@aws-amplify/core/dist/esm/clients/internal/composeTransferHandler.mjs","../../../node_modules/@aws-amplify/core/dist/esm/clients/utils/memoization.mjs","../../../node_modules/@aws-amplify/core/dist/esm/clients/handlers/fetch.mjs","../../../node_modules/@aws-amplify/core/dist/esm/clients/handlers/aws/unauthenticated.mjs","../../../node_modules/@aws-amplify/core/dist/esm/clients/middleware/userAgent/middleware.mjs","../../../node_modules/@aws-amplify/core/dist/esm/clients/middleware/retry/amzSdkInvocationIdHeaderMiddleware.mjs","../../../node_modules/@aws-amplify/core/dist/esm/clients/middleware/retry/amzSdkRequestHeaderMiddleware.mjs","../../../node_modules/@aws-amplify/core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/handler/cognitoIdentityTransferHandler.mjs","../../../node_modules/@aws-amplify/core/dist/esm/foundation/factories/middleware/createDisableCacheMiddleware.mjs","../../../node_modules/@aws-amplify/core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/serde/createClientSerializer.mjs","../../../node_modules/@aws-amplify/core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/createGetCredentialsForIdentityClient.mjs","../../../node_modules/@aws-amplify/core/dist/esm/clients/endpoints/partitions.mjs","../../../node_modules/@aws-amplify/core/dist/esm/clients/endpoints/getDnsSuffix.mjs","../../../node_modules/@aws-amplify/core/dist/esm/utils/amplifyUrl/index.mjs","../../../node_modules/@aws-amplify/core/dist/esm/errors/PlatformNotSupportedError.mjs","../../../node_modules/@aws-amplify/core/dist/esm/storage/KeyValueStorage.mjs","../../../node_modules/@aws-amplify/core/dist/esm/storage/InMemoryStorage.mjs","../../../node_modules/@aws-amplify/core/dist/esm/storage/utils.mjs","../../../node_modules/@aws-amplify/core/dist/esm/storage/SyncKeyValueStorage.mjs","../../../node_modules/@aws-amplify/core/dist/esm/storage/index.mjs","../../../node_modules/@aws-amplify/core/dist/esm/storage/DefaultStorage.mjs","../../../node_modules/@aws-amplify/core/dist/esm/storage/SessionStorage.mjs","../../../node_modules/@aws-amplify/core/dist/esm/storage/SyncSessionStorage.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/errors/AuthError.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/errors/constants.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/foundation/constants.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/providers/cognito/factories/createCognitoUserPoolEndpointResolver.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/foundation/cognitoUserPoolEndpointResolver.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/createGetTokensFromRefreshTokenClient.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/providers/cognito/utils/refreshAuthTokens.mjs","../../../node_modules/@aws-amplify/core/dist/esm/utils/deDupeAsyncFunction.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/providers/cognito/tokenProvider/types.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/providers/cognito/tokenProvider/errorHelpers.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/providers/cognito/tokenProvider/constants.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/providers/cognito/utils/signInWithRedirectStore.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/providers/cognito/utils/oauth/oAuthStore.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/providers/cognito/tokenProvider/TokenOrchestrator.mjs","../../../node_modules/@aws-amplify/core/dist/esm/utils/isBrowser.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/providers/cognito/tokenProvider/tokenProvider.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/providers/cognito/tokenProvider/CognitoUserPoolsTokenProvider.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/providers/cognito/credentialsProvider/types.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/providers/cognito/credentialsProvider/IdentityIdStore.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/providers/cognito/factories/createCognitoIdentityPoolEndpointResolver.mjs","../../../node_modules/@aws-amplify/core/dist/esm/foundation/factories/serviceClients/cognitoIdentity/cognitoIdentityPoolEndpointResolver.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/providers/cognito/credentialsProvider/credentialsProvider.mjs","../../../node_modules/@aws-amplify/auth/dist/esm/providers/cognito/credentialsProvider/index.mjs","../../../node_modules/aws-amplify/dist/esm/initSingleton.mjs","../../../node_modules/graphql/polyfills/symbols.mjs","../../../node_modules/graphql/language/kinds.mjs","../../../node_modules/graphql/jsutils/nodejsCustomInspectSymbol.mjs","../../../node_modules/graphql/language/tokenKind.mjs","../../../node_modules/graphql/language/directiveLocation.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-rest/dist/esm/errors/RestApiError.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-rest/dist/esm/errors/CanceledError.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-rest/dist/esm/errors/validation.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-rest/dist/esm/utils/serviceError.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-rest/dist/esm/utils/logger.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-rest/dist/esm/utils/constants.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-rest/dist/esm/utils/isIamAuthApplicable.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-rest/dist/esm/apis/common/baseHandlers/authenticatedHandler.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-rest/dist/esm/apis/common/baseHandlers/unauthenticatedHandler.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-rest/dist/esm/apis/common/transferHandler.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-rest/dist/esm/utils/resolveHeaders.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-rest/dist/esm/utils/parseSigningInfo.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-rest/dist/esm/apis/common/internalPost.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-rest/dist/esm/utils/createCancellableOperation.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/Providers/constants.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/types/PubSub.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/utils/ReachabilityMonitor/index.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/utils/ConnectionStateMonitor.mjs","../../../node_modules/rxjs/dist/esm5/internal/operators/filter.js","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/utils/ReconnectionMonitor.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/Providers/AWSWebSocketProvider/appsyncUrl.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/Providers/AWSWebSocketProvider/authHeaders.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/Providers/AWSWebSocketProvider/index.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/Providers/AWSAppSyncRealTimeProvider/index.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/utils/errors/GraphQLApiError.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/utils/errors/validation.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/utils/resolveConfig.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/utils/errors/assertValidationError.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/utils/resolveLibraryOptions.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/utils/errors/constants.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/utils/errors/createGraphQLResultWithError.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/internals/InternalGraphQLAPI.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/internals/graphqlAuth.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/internals/utils/runtimeTypeGuards/isGraphQLResponseWithErrors.mjs","../../../node_modules/@smithy/util-base64/dist-es/fromBase64.browser.js","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/ai/conversationMessageDeserializers.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/ai/convertItemToConversationMessage.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/ai/createListMessagesFunction.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/ai/conversationStreamEventDeserializers.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/ai/createOnStreamEventFunction.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/ai/conversationMessageSerializers.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/ai/createSendMessageFunction.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/ai/convertItemToConversation.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/ai/createCreateConversationFunction.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/ai/createGetConversationFunction.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/ai/createListConversationsFunction.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/ai/createDeleteConversationFunction.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/ai/createUpdateConversationFunction.mjs","../../../node_modules/@aws-amplify/data-schema/dist/esm/runtime/internals/clientUtils.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/GraphQLAPI.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/internals/utils/runtimeTypeGuards/isConfigureEventWithResourceConfig.mjs","../../../node_modules/aws-amplify/node_modules/@aws-amplify/api-graphql/dist/esm/Providers/AWSAppSyncEventsProvider/index.mjs","../../../node_modules/@wharfkit/wallet-plugin-wombat/lib/esm/index.js"],"sourcesContent":["/**\n * @wharfkit/sealed-messages v1.1.0\n * https://github.com/wharfkit/sealed-messages\n *\n * @license\n * Copyright (c) 2023 Greymass Inc. All Rights Reserved.\n * \n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n * \n * 1.  Redistribution of source code must retain the above copyright notice, this\n *     list of conditions and the following disclaimer.\n * \n * 2.  Redistribution in binary form must reproduce the above copyright notice,\n *     this list of conditions and the following disclaimer in the documentation\n *     and/or other materials provided with the distribution.\n * \n * 3.  Neither the name of the copyright holder nor the names of its contributors\n *     may be used to endorse or promote products derived from this software without\n *     specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE\n * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED\n * OF THE POSSIBILITY OF SUCH DAMAGE.\n * \n * YOU ACKNOWLEDGE THAT THIS SOFTWARE IS NOT DESIGNED, LICENSED OR INTENDED FOR USE\n * IN THE DESIGN, CONSTRUCTION, OPERATION OR MAINTENANCE OF ANY MILITARY FACILITY.\n */\nimport { Struct, Checksum512, Serializer, Bytes, UInt64, Checksum256 } from '@wharfkit/antelope';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\n\nlet SealedMessage = class SealedMessage extends Struct {\n};\n__decorate([\n    Struct.field('public_key')\n], SealedMessage.prototype, \"from\", void 0);\n__decorate([\n    Struct.field('uint64')\n], SealedMessage.prototype, \"nonce\", void 0);\n__decorate([\n    Struct.field('bytes')\n], SealedMessage.prototype, \"ciphertext\", void 0);\n__decorate([\n    Struct.field('uint32')\n], SealedMessage.prototype, \"checksum\", void 0);\nSealedMessage = __decorate([\n    Struct.type('sealed_message')\n], SealedMessage);\nasync function createSymmetricKey(secret, nonce) {\n    const key = Checksum512.hash(Serializer.encode({ object: nonce }).appending(secret.array));\n    return await crypto.subtle.importKey('raw', key.array.slice(0, 32), { name: 'AES-CBC' }, false, [\n        'encrypt',\n        'decrypt',\n    ]);\n}\nfunction createIV(nonce, secret) {\n    return Checksum512.hash(Serializer.encode({ object: nonce }).appending(secret.array));\n}\nasync function encryptMessage(iv, symmetricKey, message) {\n    return Bytes.from(await crypto.subtle.encrypt({ name: 'AES-CBC', iv: iv.array.slice(32, 48) }, symmetricKey, Bytes.from(message, 'utf8').array));\n}\nasync function decryptMessage(iv, symmetricKey, message) {\n    return await crypto.subtle.decrypt({ name: 'AES-CBC', iv: iv.array.slice(32, 48) }, symmetricKey, message.array);\n}\n/**\n * Seals a message using AES encryption and a shared secret derived from given keys.\n * @param message - The message to seal\n * @param privateKey - The private key to use for encryption\n * @param publicKey - The public key to use for encryption\n * @param nonce - A nonce to use for encryption\n * @returns The sealed message as Bytes\n */\nasync function sealMessage(message, privateKey, publicKey, nonce) {\n    const secret = privateKey.sharedSecret(publicKey);\n    const iv = createIV(nonce, secret);\n    const symmetricKey = await createSymmetricKey(secret, nonce);\n    return encryptMessage(iv, symmetricKey, message);\n}\nasync function sealedMessagePayload(message, privateKey, publicKey, nonce) {\n    if (!nonce) {\n        nonce = UInt64.random();\n    }\n    const secret = privateKey.sharedSecret(publicKey);\n    const iv = createIV(nonce, secret);\n    const symmetricKey = await createSymmetricKey(secret, nonce);\n    const ciphertext = await encryptMessage(iv, symmetricKey, message);\n    const checksumView = new DataView(Checksum256.hash(iv.array).array.buffer);\n    const checksum = checksumView.getUint32(0, true);\n    return new SealedMessage({\n        from: privateKey.toPublic(),\n        nonce,\n        ciphertext,\n        checksum,\n    });\n}\n/**\n * Decrypt a message using AES and shared secret derived from given keys.\n * @param message - The encrypted message bytes to decrypt\n * @param privateKey - The private key to use for deriving the shared secret\n * @param publicKey - The public key to use for deriving the shared secret\n * @param nonce - The nonce used in the encryption process\n * @returns The decrypted message as a UTF-8 string\n * @internal\n */\nasync function unsealMessage(message, privateKey, publicKey, nonce) {\n    const secret = privateKey.sharedSecret(publicKey);\n    const iv = createIV(nonce, secret);\n    const symmetricKey = await createSymmetricKey(secret, nonce);\n    const decryptedMessage = await decryptMessage(iv, symmetricKey, message);\n    return Bytes.from(decryptedMessage).toString('utf8');\n}\n\nexport { SealedMessage, createIV, createSymmetricKey, decryptMessage, encryptMessage, sealMessage, sealedMessagePayload, unsealMessage };\n//# sourceMappingURL=sealed-messages.m.js.map\n","/**\n * @wharfkit/protocol-esr v1.5.0\n * https://github.com/wharfkit/protocol-esr\n *\n * @license\n * Copyright (c) 2023 Greymass Inc. All Rights Reserved.\n * \n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n * \n * 1.  Redistribution of source code must retain the above copyright notice, this\n *     list of conditions and the following disclaimer.\n * \n * 2.  Redistribution in binary form must reproduce the above copyright notice,\n *     this list of conditions and the following disclaimer in the documentation\n *     and/or other materials provided with the distribution.\n * \n * 3.  Neither the name of the copyright holder nor the names of its contributors\n *     may be used to endorse or promote products derived from this software without\n *     specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE\n * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED\n * OF THE POSSIBILITY OF SUCH DAMAGE.\n * \n * YOU ACKNOWLEDGE THAT THIS SOFTWARE IS NOT DESIGNED, LICENSED OR INTENDED FOR USE\n * IN THE DESIGN, CONSTRUCTION, OPERATION OR MAINTENANCE OF ANY MILITARY FACILITY.\n */\nimport { Struct, PrivateKey, ChainId, SigningRequest, Signature } from '@wharfkit/session';\nimport { receive } from '@greymass/buoy';\nimport { sealedMessagePayload } from '@wharfkit/sealed-messages';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\n\nlet LinkCreate = class LinkCreate extends Struct {\n};\n__decorate([\n    Struct.field('name')\n], LinkCreate.prototype, \"session_name\", void 0);\n__decorate([\n    Struct.field('public_key')\n], LinkCreate.prototype, \"request_key\", void 0);\n__decorate([\n    Struct.field('string', { extension: true })\n], LinkCreate.prototype, \"user_agent\", void 0);\nLinkCreate = __decorate([\n    Struct.type('link_create')\n], LinkCreate);\nlet LinkInfo = class LinkInfo extends Struct {\n};\n__decorate([\n    Struct.field('time_point_sec')\n], LinkInfo.prototype, \"expiration\", void 0);\nLinkInfo = __decorate([\n    Struct.type('link_info')\n], LinkInfo);\n\nlet BuoyMessage = class BuoyMessage extends Struct {\n};\n__decorate([\n    Struct.field('public_key')\n], BuoyMessage.prototype, \"from\", void 0);\n__decorate([\n    Struct.field('uint64')\n], BuoyMessage.prototype, \"nonce\", void 0);\n__decorate([\n    Struct.field('bytes')\n], BuoyMessage.prototype, \"ciphertext\", void 0);\n__decorate([\n    Struct.field('uint32')\n], BuoyMessage.prototype, \"checksum\", void 0);\nBuoyMessage = __decorate([\n    Struct.type('buoy_message')\n], BuoyMessage);\nlet BuoySession = class BuoySession extends Struct {\n};\n__decorate([\n    Struct.field('name')\n], BuoySession.prototype, \"session_name\", void 0);\n__decorate([\n    Struct.field('public_key')\n], BuoySession.prototype, \"request_key\", void 0);\n__decorate([\n    Struct.field('string', { extension: true })\n], BuoySession.prototype, \"user_agent\", void 0);\nBuoySession = __decorate([\n    Struct.type('buoy_session')\n], BuoySession);\nlet BuoyInfo = class BuoyInfo extends Struct {\n};\n__decorate([\n    Struct.field('time_point_sec')\n], BuoyInfo.prototype, \"expiration\", void 0);\nBuoyInfo = __decorate([\n    Struct.type('buoy_info')\n], BuoyInfo);\n\nasync function waitForCallback(callbackArgs, buoyWs, t) {\n    // Use the buoy-client to create a promise and wait for a response to the identity request\n    const callbackResponse = await receive({ ...callbackArgs, WebSocket: buoyWs || WebSocket });\n    if (!callbackResponse) {\n        // If the promise was rejected, throw an error\n        throw new Error(callbackResponse.rejected);\n    }\n    // If the promise was rejected, throw an error\n    if (typeof callbackResponse.rejected === 'string') {\n        throw new Error(callbackResponse.rejected);\n    }\n    // Process the identity request callback payload\n    const payload = JSON.parse(callbackResponse);\n    if (payload.sa === undefined || payload.sp === undefined || payload.cid === undefined) {\n        throw new Error(t('error.cancelled', { default: 'The request was cancelled from Anchor.' }));\n    }\n    return payload;\n}\n\n/**\n * Return PascalCase version of snake_case string.\n * @internal\n */\nfunction snakeToPascal(name) {\n    return name\n        .split('_')\n        .map((v) => (v[0] ? v[0].toUpperCase() : '') + v.slice(1))\n        .join('');\n}\n/**\n * Return camelCase version of snake_case string.\n * @internal\n */\nfunction snakeToCamel(name) {\n    const pascal = snakeToPascal(name);\n    return (pascal[0] ? pascal[0].toLowerCase() : '') + pascal.slice(1);\n}\n/**\n * Print a warning message to console.\n * @internal\n **/\nfunction logWarn(...args) {\n    // eslint-disable-next-line no-console\n    console.warn('[anchor-link]', ...args);\n}\n/**\n * Generate a UUID.\n *  @internal\n * */\nfunction uuid() {\n    let uuid = '', ii;\n    const chars = '0123456789abcdef';\n    for (ii = 0; ii < 36; ii += 1) {\n        switch (ii) {\n            case 8:\n            case 13:\n            case 18:\n            case 23:\n                uuid += '-';\n                break;\n            case 14:\n                uuid += '4';\n                break;\n            case 19:\n                uuid += chars[(Math.random() * 4) | (0 + 8)];\n                break;\n            default:\n                uuid += chars[(Math.random() * 16) | 0];\n        }\n    }\n    return uuid;\n}\n/** Generate a return url that Anchor will redirect back to w/o reload. */\nfunction generateReturnUrl() {\n    // Return undefined for iOS React Native apps to prevent redirect to Safari\n    if (isAppleHandheld() && isReactNativeApp()) {\n        return undefined;\n    }\n    if (isChromeiOS()) {\n        // google chrome on iOS will always open new tab so we just ask it to open again as a workaround\n        return 'googlechrome://';\n    }\n    if (isFirefoxiOS()) {\n        // same for firefox\n        return 'firefox:://';\n    }\n    if (isAppleHandheld() && isBrave()) {\n        // and brave ios\n        return 'brave://';\n    }\n    if (isAppleHandheld()) {\n        // return url with unique fragment required for iOS safari to trigger the return url\n        const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n        let rv = window.location.href.split('#')[0] + '#';\n        for (let i = 0; i < 8; i++) {\n            rv += alphabet.charAt(Math.floor(Math.random() * alphabet.length));\n        }\n        return rv;\n    }\n    if (isAndroid() && isFirefox()) {\n        return 'android-app://org.mozilla.firefox';\n    }\n    if (isAndroid() && isEdge()) {\n        return 'android-app://com.microsoft.emmx';\n    }\n    if (isAndroid() && isOpera()) {\n        return 'android-app://com.opera.browser';\n    }\n    if (isAndroid() && isBrave()) {\n        return 'android-app://com.brave.browser';\n    }\n    if (isAndroid() && isAndroidWebView()) {\n        return 'android-app://webview';\n    }\n    if (isAndroid() && isChromeMobile()) {\n        return 'android-app://com.android.chrome';\n    }\n    return window.location.href;\n}\nfunction isAppleHandheld() {\n    return /iP(ad|od|hone)/i.test(navigator.userAgent);\n}\nfunction isChromeiOS() {\n    return /CriOS/.test(navigator.userAgent);\n}\nfunction isChromeMobile() {\n    return /Chrome\\/[.0-9]* Mobile/i.test(navigator.userAgent);\n}\nfunction isFirefox() {\n    return /Firefox/i.test(navigator.userAgent);\n}\nfunction isFirefoxiOS() {\n    return /FxiOS/.test(navigator.userAgent);\n}\nfunction isOpera() {\n    return /OPR/.test(navigator.userAgent) || /Opera/.test(navigator.userAgent);\n}\nfunction isEdge() {\n    return /Edg/.test(navigator.userAgent);\n}\nfunction isBrave() {\n    return navigator['brave'] && typeof navigator['brave'].isBrave === 'function';\n}\nfunction isAndroid() {\n    return /Android/.test(navigator.userAgent);\n}\nfunction isReactNativeApp() {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    return !!window.ReactNativeWebView;\n}\nfunction isAndroidWebView() {\n    return (/wv/.test(navigator.userAgent) ||\n        (/Android/.test(navigator.userAgent) && isReactNativeApp()));\n}\nfunction isKnownMobile() {\n    return (isAppleHandheld() ||\n        isChromeiOS() ||\n        isChromeMobile() ||\n        isFirefoxiOS() ||\n        isAndroid() ||\n        isAndroidWebView());\n}\n\n/**\n * createIdentityRequest\n *\n * @param context LoginContext\n * @returns\n */\nasync function createIdentityRequest(context, buoyUrl) {\n    // Create a new private key and public key to act as the request key\n    const privateKey = PrivateKey.generate('K1');\n    const requestKey = privateKey.toPublic();\n    // Create a new BuoySession struct to be used as the info field\n    const createInfo = BuoySession.from({\n        session_name: context.appName,\n        request_key: requestKey,\n        user_agent: getUserAgent(),\n    });\n    // Determine based on the options whether this is a multichain request\n    const isMultiChain = !(context.chain || context.chains.length === 1);\n    // Create the callback\n    const callbackChannel = prepareCallbackChannel(buoyUrl);\n    // Determine the chain id(s) to use\n    const chainId = isMultiChain\n        ? null\n        : context.chain\n            ? ChainId.from(context.chain.id.array)\n            : null;\n    const chainIds = isMultiChain\n        ? context.chains.map((c) => ChainId.from(c.id.array))\n        : [];\n    // Create the request\n    const request = SigningRequest.identity({\n        callback: prepareCallback(callbackChannel),\n        scope: String(context.appName),\n        chainId,\n        chainIds,\n        info: {\n            link: createInfo,\n            scope: String(context.appName),\n        },\n    }, context.esrOptions);\n    const sameDeviceRequest = request.clone();\n    if (typeof window !== 'undefined') {\n        const returnUrl = generateReturnUrl();\n        sameDeviceRequest.setInfoKey('same_device', true);\n        if (returnUrl !== undefined) {\n            sameDeviceRequest.setInfoKey('return_path', returnUrl);\n        }\n    }\n    // Return the request and the callback data\n    return {\n        callback: callbackChannel,\n        request,\n        sameDeviceRequest,\n        requestKey,\n        privateKey,\n    };\n}\n/**\n * prepareTransactionRequest\n *\n * @param resolved ResolvedSigningRequest\n * @returns\n */\nfunction setTransactionCallback(request, buoyUrl) {\n    const callback = prepareCallbackChannel(buoyUrl);\n    request.setCallback(`${callback.service}/${callback.channel}`, true);\n    return callback;\n}\nfunction getUserAgent() {\n    const version = '1.5.0';\n    let agent = `@wharfkit/protocol-esr ${version}`;\n    if (typeof navigator !== 'undefined') {\n        agent += ' ' + navigator.userAgent;\n    }\n    return agent;\n}\nfunction prepareCallback(callbackChannel) {\n    const { service, channel } = callbackChannel;\n    return {\n        url: `${service}/${channel}`,\n        background: true,\n    };\n}\nfunction prepareCallbackChannel(buoyUrl) {\n    return {\n        service: buoyUrl,\n        channel: uuid(),\n    };\n}\nasync function sealMessage(message, privateKey, publicKey, nonce) {\n    return sealedMessagePayload(message, privateKey, publicKey, nonce);\n}\nasync function verifyLoginCallbackResponse(callbackResponse, context) {\n    if (!callbackResponse.sig || callbackResponse.sig.length === 0) {\n        throw new Error('Invalid response, must have at least one signature');\n    }\n    let chain;\n    if (!context.chain && context.chains.length > 1) {\n        if (!callbackResponse.cid) {\n            throw new Error('Multi chain response payload must specify resolved chain id (cid)');\n        }\n    }\n    else {\n        chain = context.chain || context.chains[0];\n        if (callbackResponse.cid && String(chain.id) !== callbackResponse.cid) {\n            throw new Error('Got response for wrong chain id');\n        }\n    }\n}\nfunction extractSignaturesFromCallback(payload) {\n    const signatures = [];\n    let index = 0;\n    let sig = payload.sig;\n    while (sig) {\n        signatures.push(String(sig));\n        sig = payload[`sig${index}`];\n        index++;\n    }\n    // Deduplicate and make signatures\n    return [...new Set(signatures)].map((s) => Signature.from(s));\n}\nfunction isCallback(object) {\n    return 'tx' in object;\n}\n\nexport { BuoyInfo, BuoyMessage, BuoySession, LinkCreate, LinkInfo, createIdentityRequest, extractSignaturesFromCallback, generateReturnUrl, getUserAgent, isAndroid, isAndroidWebView, isAppleHandheld, isBrave, isCallback, isChromeMobile, isChromeiOS, isEdge, isFirefox, isFirefoxiOS, isKnownMobile, isOpera, isReactNativeApp, logWarn, prepareCallback, sealMessage, setTransactionCallback, snakeToCamel, snakeToPascal, uuid, verifyLoginCallbackResponse, waitForCallback };\n//# sourceMappingURL=protocol-esr.m.js.map\n","/**\n * @greymass/buoy v1.0.4\n * https://github.com/greymass/buoy-client\n *\n * @license\n * Copyright (c) 2021 FFF00 Agents AB & Greymass Inc. All Rights Reserved.\n * \n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n * \n *  1. Redistribution of source code must retain the above copyright notice, this\n *     list of conditions and the following disclaimer.\n * \n *  2. Redistribution in binary form must reproduce the above copyright notice,\n *     this list of conditions and the following disclaimer in the documentation\n *     and/or other materials provided with the distribution.\n * \n *  3. Neither the name of the copyright holder nor the names of its contributors\n *     may be used to endorse or promote products derived from this software without\n *     specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE\n * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED\n * OF THE POSSIBILITY OF SUCH DAMAGE.\n * \n * YOU ACKNOWLEDGE THAT THIS SOFTWARE IS NOT DESIGNED, LICENSED OR INTENDED FOR USE\n * IN THE DESIGN, CONSTRUCTION, OPERATION OR MAINTENANCE OF ANY MILITARY FACILITY.\n */\nimport EventEmitter from 'eventemitter3';\n\n/** Emitted when a network error occurs, can safely be ignored. */\nclass SocketError extends Error {\n    event;\n    code = 'E_NETWORK';\n    constructor(event) {\n        super('Socket error');\n        this.event = event;\n    }\n}\n/** Emitted when a message fails to parse or read, non-recoverable. */\nclass MessageError extends Error {\n    reason;\n    underlyingError;\n    code = 'E_MESSAGE';\n    constructor(reason, underlyingError) {\n        super(reason);\n        this.reason = reason;\n        this.underlyingError = underlyingError;\n    }\n}\n\nconst globalBuoy$1 = globalThis || window;\nvar ListenerEncoding;\n(function (ListenerEncoding) {\n    ListenerEncoding[\"binary\"] = \"binary\";\n    ListenerEncoding[\"text\"] = \"text\";\n    ListenerEncoding[\"json\"] = \"json\";\n})(ListenerEncoding || (ListenerEncoding = {}));\nclass Listener extends EventEmitter {\n    url;\n    active = false;\n    socket;\n    timer;\n    reconnectTimer;\n    encoding;\n    WebSocket;\n    constructor(options) {\n        super();\n        if (!options.service) {\n            throw new Error('Options must include a service url');\n        }\n        if (!options.channel) {\n            throw new Error('Options must include a channel name');\n        }\n        const baseUrl = options.service.replace(/^http/, 'ws').replace(/\\/$/, '');\n        this.url = `${baseUrl}/${options.channel}?v=2`;\n        this.encoding = options.encoding || ListenerEncoding.text;\n        this.WebSocket = options.WebSocket || globalBuoy$1.WebSocket;\n        if (options.autoConnect !== false) {\n            this.connect();\n        }\n    }\n    connect() {\n        if (this.active)\n            return;\n        this.active = true;\n        let retries = 0;\n        let pingTimer;\n        const connect = () => {\n            const socket = new this.WebSocket(this.url);\n            socket.onmessage = (event) => {\n                if (typeof Blob !== 'undefined' && event.data instanceof Blob) {\n                    const reader = new FileReader();\n                    reader.onload = () => {\n                        this.handleMessage(new Uint8Array(reader.result));\n                    };\n                    reader.onerror = () => {\n                        this.emit('error', new MessageError('Could not read message'));\n                    };\n                    reader.readAsArrayBuffer(event.data);\n                }\n                else if (typeof event.data === 'string') {\n                    this.handleMessage(new TextEncoder().encode(event.data));\n                }\n                else if (typeof globalBuoy$1.Buffer !== 'undefined' &&\n                    (event.data instanceof globalBuoy$1.Buffer || Array.isArray(event.data))) {\n                    let buffer = event.data;\n                    if (!globalBuoy$1.Buffer.isBuffer(buffer)) {\n                        buffer = globalBuoy$1.Buffer.concat(buffer);\n                    }\n                    this.handleMessage(new Uint8Array(buffer.buffer, buffer.byteOffset, buffer.byteLength));\n                }\n                else if (event.data instanceof Uint8Array) {\n                    this.handleMessage(event.data);\n                }\n                else if (event.data instanceof ArrayBuffer) {\n                    this.handleMessage(new Uint8Array(event.data));\n                }\n                else {\n                    this.emit('error', new MessageError('Unhandled event data type'));\n                }\n            };\n            socket.onerror = (event) => {\n                if (this.socket === socket && this.active) {\n                    this.emit('error', new SocketError(event));\n                }\n            };\n            socket.onopen = () => {\n                retries = 0;\n                this.emit('connect');\n            };\n            socket.onclose = () => {\n                if (this.active) {\n                    clearTimeout(this.timer);\n                    this.timer = setTimeout(connect, backoff(retries++));\n                }\n                this.socket = undefined;\n                clearTimeout(pingTimer);\n                if (this.reconnectTimer) {\n                    clearInterval(this.reconnectTimer);\n                }\n                this.emit('disconnect');\n            };\n            // Reconnect every 10 mins to keep the connection alive\n            this.setupReconnectionTimer();\n            // fix problem where node.js does not react to the socket going down\n            // this terminates the connection if we don't get a heartbeat in 15s (buoy-nodejs sends every 10s)\n            const nodeSocket = socket;\n            if (typeof nodeSocket.on === 'function' && typeof nodeSocket.terminate === 'function') {\n                nodeSocket.on('ping', () => {\n                    clearTimeout(pingTimer);\n                    pingTimer = setTimeout(() => {\n                        nodeSocket.terminate();\n                    }, 15 * 1000);\n                });\n            }\n            this.socket = socket;\n        };\n        connect();\n    }\n    disconnect() {\n        this.active = false;\n        if (this.socket &&\n            (this.socket.readyState === this.WebSocket.OPEN ||\n                this.socket.readyState === this.WebSocket.CONNECTING)) {\n            this.socket.close(1000);\n        }\n    }\n    get isConnected() {\n        return this.active && this.socket?.readyState == this.WebSocket.OPEN;\n    }\n    handleMessage(bytes) {\n        if (bytes[0] === 0x42 && bytes[1] === 0x42 && bytes[2] === 0x01) {\n            this.socket?.send(new Uint8Array([0x42, 0x42, 0x02, bytes[3]]));\n            bytes = bytes.subarray(4);\n        }\n        let message;\n        switch (this.encoding) {\n            case ListenerEncoding.binary:\n                message = bytes;\n                break;\n            case ListenerEncoding.text:\n                message = new TextDecoder().decode(bytes);\n                break;\n            case ListenerEncoding.json: {\n                try {\n                    message = JSON.parse(new TextDecoder().decode(bytes));\n                }\n                catch (error) {\n                    this.emit('error', new MessageError('Unable to decode JSON', error));\n                    return;\n                }\n            }\n        }\n        this.emit('message', message);\n    }\n    setupReconnectionTimer() {\n        this.reconnectTimer = setInterval(() => {\n            this.socket?.close(1000);\n        }, 10 * 60 * 1000);\n    }\n}\n/**\n * Exponential backoff function that caps off at 5s after 10 tries.\n * @internal\n */\nfunction backoff(tries) {\n    return Math.min(Math.pow(tries * 7, 2), 5 * 1000);\n}\n\n/**\n * Receive a single message from a buoy channel.\n * @note Instantiate a [[Listener]] if you want to receive multiple messages over the same channel.\n */\nfunction receive(options, ctx) {\n    return new Promise((resolve, reject) => {\n        const listener = new Listener({ ...options, autoConnect: true });\n        let timer;\n        let lastError;\n        const done = (error, message) => {\n            clearTimeout(timer);\n            if (error) {\n                reject(error);\n            }\n            else {\n                resolve(message);\n            }\n            listener.disconnect();\n        };\n        if (ctx) {\n            ctx.cancel = () => {\n                done(new MessageError('Cancelled', lastError));\n            };\n        }\n        if (options.timeout) {\n            timer = setTimeout(() => {\n                done(new MessageError('Timed out', lastError));\n            }, options.timeout);\n        }\n        listener.on('error', (error) => {\n            if (!(error instanceof SocketError)) {\n                done(error);\n            }\n            else {\n                lastError = error;\n            }\n        });\n        listener.once('message', (message) => {\n            done(undefined, message);\n        });\n    });\n}\n\nconst globalBuoy = globalThis || window;\n/** Result of a [[send]] call. */\nvar SendResult;\n(function (SendResult) {\n    /** Message was sent but not yet delivered. */\n    SendResult[\"buffered\"] = \"buffered\";\n    /** Message was delivered to at least 1 listener on the channel. */\n    SendResult[\"delivered\"] = \"delivered\";\n})(SendResult || (SendResult = {}));\n/**\n * Sends a message to the channel.\n * @returns a promise that resolves to a [[SendResult]].\n * @throws if the message can't be delivered if [[SendOptions.requireDelivery]] is set.\n */\nasync function send(message, options) {\n    const fetch = options.fetch || globalBuoy.fetch;\n    const baseUrl = options.service.replace(/^ws/, 'http').replace(/\\/$/, '');\n    const url = `${baseUrl}/${options.channel}`;\n    const headers = {};\n    if (options.requireDelivery) {\n        if (!options.timeout) {\n            throw new Error('requireDelivery can only be used with timeout');\n        }\n        headers['X-Buoy-Wait'] = `${Math.ceil(options.timeout / 1000)}`;\n    }\n    else if (options.timeout) {\n        headers['X-Buoy-Soft-Wait'] = `${Math.ceil(options.timeout / 1000)}`;\n    }\n    let body;\n    if (typeof message === 'string' || message instanceof Uint8Array) {\n        body = message;\n    }\n    else {\n        body = JSON.stringify(message);\n    }\n    const response = await fetch(url, { method: 'POST', body, headers });\n    if (Math.floor(response.status / 100) !== 2) {\n        if (response.status === 408) {\n            throw new Error('Unable to deliver message');\n        }\n        else if (response.status === 410) {\n            throw new Error('Request cancelled');\n        }\n        else {\n            throw new Error(`Unexpected status code ${response.status}`);\n        }\n    }\n    return (response.headers.get('X-Buoy-Delivery') || SendResult.buffered);\n}\n\nexport { Listener, ListenerEncoding, MessageError, SendResult, SocketError, receive, send };\n//# sourceMappingURL=buoy-client.m.js.map\n","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nexport default v4;\n","let getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\n","import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction isAmplifyOutputs(config) {\n    // version format initially will be '1' but is expected to be something like x.y where x is major and y minor version\n    const { version } = config;\n    if (!version) {\n        return false;\n    }\n    return version.startsWith('1');\n}\nfunction parseStorage(amplifyOutputsStorageProperties) {\n    if (!amplifyOutputsStorageProperties) {\n        return undefined;\n    }\n    const { bucket_name, aws_region, buckets } = amplifyOutputsStorageProperties;\n    return {\n        S3: {\n            bucket: bucket_name,\n            region: aws_region,\n            buckets: buckets && createBucketInfoMap(buckets),\n        },\n    };\n}\nfunction parseAuth(amplifyOutputsAuthProperties) {\n    if (!amplifyOutputsAuthProperties) {\n        return undefined;\n    }\n    const { user_pool_id, user_pool_client_id, identity_pool_id, password_policy, mfa_configuration, mfa_methods, unauthenticated_identities_enabled, oauth, username_attributes, standard_required_attributes, groups, } = amplifyOutputsAuthProperties;\n    const authConfig = {\n        Cognito: {\n            userPoolId: user_pool_id,\n            userPoolClientId: user_pool_client_id,\n            groups,\n        },\n    };\n    if (identity_pool_id) {\n        authConfig.Cognito = {\n            ...authConfig.Cognito,\n            identityPoolId: identity_pool_id,\n        };\n    }\n    if (password_policy) {\n        authConfig.Cognito.passwordFormat = {\n            requireLowercase: password_policy.require_lowercase,\n            requireNumbers: password_policy.require_numbers,\n            requireUppercase: password_policy.require_uppercase,\n            requireSpecialCharacters: password_policy.require_symbols,\n            minLength: password_policy.min_length ?? 6,\n        };\n    }\n    if (mfa_configuration) {\n        authConfig.Cognito.mfa = {\n            status: getMfaStatus(mfa_configuration),\n            smsEnabled: mfa_methods?.includes('SMS'),\n            totpEnabled: mfa_methods?.includes('TOTP'),\n        };\n    }\n    if (unauthenticated_identities_enabled) {\n        authConfig.Cognito.allowGuestAccess = unauthenticated_identities_enabled;\n    }\n    if (oauth) {\n        authConfig.Cognito.loginWith = {\n            oauth: {\n                domain: oauth.domain,\n                redirectSignIn: oauth.redirect_sign_in_uri,\n                redirectSignOut: oauth.redirect_sign_out_uri,\n                responseType: oauth.response_type === 'token' ? 'token' : 'code',\n                scopes: oauth.scopes,\n                providers: getOAuthProviders(oauth.identity_providers),\n            },\n        };\n    }\n    if (username_attributes) {\n        authConfig.Cognito.loginWith = {\n            ...authConfig.Cognito.loginWith,\n            email: username_attributes.includes('email'),\n            phone: username_attributes.includes('phone_number'),\n            // Signing in with a username is not currently supported in Gen2, this should always evaluate to false\n            username: username_attributes.includes('username'),\n        };\n    }\n    if (standard_required_attributes) {\n        authConfig.Cognito.userAttributes = standard_required_attributes.reduce((acc, curr) => ({ ...acc, [curr]: { required: true } }), {});\n    }\n    return authConfig;\n}\nfunction parseAnalytics(amplifyOutputsAnalyticsProperties) {\n    if (!amplifyOutputsAnalyticsProperties?.amazon_pinpoint) {\n        return undefined;\n    }\n    const { amazon_pinpoint } = amplifyOutputsAnalyticsProperties;\n    return {\n        Pinpoint: {\n            appId: amazon_pinpoint.app_id,\n            region: amazon_pinpoint.aws_region,\n        },\n    };\n}\nfunction parseGeo(amplifyOutputsAnalyticsProperties) {\n    if (!amplifyOutputsAnalyticsProperties) {\n        return undefined;\n    }\n    const { aws_region, geofence_collections, maps, search_indices } = amplifyOutputsAnalyticsProperties;\n    return {\n        LocationService: {\n            region: aws_region,\n            searchIndices: search_indices,\n            geofenceCollections: geofence_collections,\n            maps,\n        },\n    };\n}\nfunction parseData(amplifyOutputsDataProperties) {\n    if (!amplifyOutputsDataProperties) {\n        return undefined;\n    }\n    const { aws_region, default_authorization_type, url, api_key, model_introspection, } = amplifyOutputsDataProperties;\n    const GraphQL = {\n        endpoint: url,\n        defaultAuthMode: getGraphQLAuthMode(default_authorization_type),\n        region: aws_region,\n        apiKey: api_key,\n        modelIntrospection: model_introspection,\n    };\n    return {\n        GraphQL,\n    };\n}\nfunction parseCustom(amplifyOutputsCustomProperties) {\n    if (!amplifyOutputsCustomProperties?.events) {\n        return undefined;\n    }\n    const { url, aws_region, api_key, default_authorization_type } = amplifyOutputsCustomProperties.events;\n    const Events = {\n        endpoint: url,\n        defaultAuthMode: getGraphQLAuthMode(default_authorization_type),\n        region: aws_region,\n        apiKey: api_key,\n    };\n    return {\n        Events,\n    };\n}\nfunction parseNotifications(amplifyOutputsNotificationsProperties) {\n    if (!amplifyOutputsNotificationsProperties) {\n        return undefined;\n    }\n    const { aws_region, channels, amazon_pinpoint_app_id } = amplifyOutputsNotificationsProperties;\n    const hasInAppMessaging = channels.includes('IN_APP_MESSAGING');\n    const hasPushNotification = channels.includes('APNS') || channels.includes('FCM');\n    if (!(hasInAppMessaging || hasPushNotification)) {\n        return undefined;\n    }\n    // At this point, we know the Amplify outputs contains at least one supported channel\n    const notificationsConfig = {};\n    if (hasInAppMessaging) {\n        notificationsConfig.InAppMessaging = {\n            Pinpoint: {\n                appId: amazon_pinpoint_app_id,\n                region: aws_region,\n            },\n        };\n    }\n    if (hasPushNotification) {\n        notificationsConfig.PushNotification = {\n            Pinpoint: {\n                appId: amazon_pinpoint_app_id,\n                region: aws_region,\n            },\n        };\n    }\n    return notificationsConfig;\n}\nfunction parseAmplifyOutputs(amplifyOutputs) {\n    const resourcesConfig = {};\n    if (amplifyOutputs.storage) {\n        resourcesConfig.Storage = parseStorage(amplifyOutputs.storage);\n    }\n    if (amplifyOutputs.auth) {\n        resourcesConfig.Auth = parseAuth(amplifyOutputs.auth);\n    }\n    if (amplifyOutputs.analytics) {\n        resourcesConfig.Analytics = parseAnalytics(amplifyOutputs.analytics);\n    }\n    if (amplifyOutputs.geo) {\n        resourcesConfig.Geo = parseGeo(amplifyOutputs.geo);\n    }\n    if (amplifyOutputs.data) {\n        resourcesConfig.API = parseData(amplifyOutputs.data);\n    }\n    if (amplifyOutputs.custom) {\n        const customConfig = parseCustom(amplifyOutputs.custom);\n        if (customConfig && 'Events' in customConfig) {\n            resourcesConfig.API = { ...resourcesConfig.API, ...customConfig };\n        }\n    }\n    if (amplifyOutputs.notifications) {\n        resourcesConfig.Notifications = parseNotifications(amplifyOutputs.notifications);\n    }\n    return resourcesConfig;\n}\nconst authModeNames = {\n    AMAZON_COGNITO_USER_POOLS: 'userPool',\n    API_KEY: 'apiKey',\n    AWS_IAM: 'iam',\n    AWS_LAMBDA: 'lambda',\n    OPENID_CONNECT: 'oidc',\n};\nfunction getGraphQLAuthMode(authType) {\n    return authModeNames[authType];\n}\nconst providerNames = {\n    GOOGLE: 'Google',\n    LOGIN_WITH_AMAZON: 'Amazon',\n    FACEBOOK: 'Facebook',\n    SIGN_IN_WITH_APPLE: 'Apple',\n};\nfunction getOAuthProviders(providers = []) {\n    return providers.reduce((oAuthProviders, provider) => {\n        if (providerNames[provider] !== undefined) {\n            oAuthProviders.push(providerNames[provider]);\n        }\n        return oAuthProviders;\n    }, []);\n}\nfunction getMfaStatus(mfaConfiguration) {\n    if (mfaConfiguration === 'OPTIONAL')\n        return 'optional';\n    if (mfaConfiguration === 'REQUIRED')\n        return 'on';\n    return 'off';\n}\nfunction createBucketInfoMap(buckets) {\n    const mappedBuckets = {};\n    buckets.forEach(({ name, bucket_name: bucketName, aws_region: region, paths }) => {\n        if (name in mappedBuckets) {\n            throw new Error(`Duplicate friendly name found: ${name}. Name must be unique.`);\n        }\n        const sanitizedPaths = paths\n            ? Object.entries(paths).reduce((acc, [key, value]) => {\n                if (value !== undefined) {\n                    acc[key] = value;\n                }\n                return acc;\n            }, {})\n            : undefined;\n        mappedBuckets[name] = {\n            bucketName,\n            region,\n            paths: sanitizedPaths,\n        };\n    });\n    return mappedBuckets;\n}\n\nexport { isAmplifyOutputs, parseAmplifyOutputs, parseAnalytics };\n//# sourceMappingURL=parseAmplifyOutputs.mjs.map\n","// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { fromUtf8 as fromUtf8Browser } from \"@smithy/util-utf8\";\n// Quick polyfill\nvar fromUtf8 = typeof Buffer !== \"undefined\" && Buffer.from\n    ? function (input) { return Buffer.from(input, \"utf8\"); }\n    : fromUtf8Browser;\nexport function convertToBuffer(data) {\n    // Already a Uint8, do nothing\n    if (data instanceof Uint8Array)\n        return data;\n    if (typeof data === \"string\") {\n        return fromUtf8(data);\n    }\n    if (ArrayBuffer.isView(data)) {\n        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength / Uint8Array.BYTES_PER_ELEMENT);\n    }\n    return new Uint8Array(data);\n}\n//# sourceMappingURL=convertToBuffer.js.map","import { Framework } from './types.mjs';\nimport { detect } from './detection/index.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// We want to cache detection since the framework won't change\nlet frameworkCache;\nconst frameworkChangeObservers = [];\n// Setup the detection reset tracking / timeout delays\nlet resetTriggered = false;\nconst SSR_RESET_TIMEOUT = 10; // ms\nconst WEB_RESET_TIMEOUT = 10; // ms\nconst PRIME_FRAMEWORK_DELAY = 1000; // ms\nconst detectFramework = () => {\n    if (!frameworkCache) {\n        frameworkCache = detect();\n        if (resetTriggered) {\n            // The final run of detectFramework:\n            // Starting from this point, the `frameworkCache` becomes \"final\".\n            // So we don't need to notify the observers again so the observer\n            // can be removed after the final notice.\n            while (frameworkChangeObservers.length) {\n                frameworkChangeObservers.pop()?.();\n            }\n        }\n        else {\n            // The first run of detectFramework:\n            // Every time we update the cache, call each observer function\n            frameworkChangeObservers.forEach(fcn => {\n                fcn();\n            });\n        }\n        // Retry once for either Unknown type after a delay (explained below)\n        resetTimeout(Framework.ServerSideUnknown, SSR_RESET_TIMEOUT);\n        resetTimeout(Framework.WebUnknown, WEB_RESET_TIMEOUT);\n    }\n    return frameworkCache;\n};\n/**\n * @internal Setup observer callback that will be called everytime the framework changes\n */\nconst observeFrameworkChanges = (fcn) => {\n    // When the `frameworkCache` won't be updated again, we ignore all incoming\n    // observers.\n    if (resetTriggered) {\n        return;\n    }\n    frameworkChangeObservers.push(fcn);\n};\nfunction clearCache() {\n    frameworkCache = undefined;\n}\n// For a framework type and a delay amount, setup the event to re-detect\n//   During the runtime boot, it is possible that framework detection will\n//   be triggered before the framework has made modifications to the\n//   global/window/etc needed for detection. When no framework is detected\n//   we will reset and try again to ensure we don't use a cached\n//   non-framework detection result for all requests.\nfunction resetTimeout(framework, delay) {\n    if (frameworkCache === framework && !resetTriggered) {\n        setTimeout(() => {\n            clearCache();\n            resetTriggered = true;\n            setTimeout(detectFramework, PRIME_FRAMEWORK_DELAY);\n        }, delay);\n    }\n}\n\nexport { clearCache, detectFramework, frameworkChangeObservers, observeFrameworkChanges };\n//# sourceMappingURL=detectFramework.mjs.map\n","export function isFunction(value) {\n    return typeof value === 'function';\n}\n//# sourceMappingURL=isFunction.js.map","export function arrRemove(arr, item) {\n    if (arr) {\n        var index = arr.indexOf(item);\n        0 <= index && arr.splice(index, 1);\n    }\n}\n//# sourceMappingURL=arrRemove.js.map","import { __read, __spreadArray, __values } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { arrRemove } from './util/arrRemove';\nvar Subscription = (function () {\n    function Subscription(initialTeardown) {\n        this.initialTeardown = initialTeardown;\n        this.closed = false;\n        this._parentage = null;\n        this._finalizers = null;\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var e_1, _a, e_2, _b;\n        var errors;\n        if (!this.closed) {\n            this.closed = true;\n            var _parentage = this._parentage;\n            if (_parentage) {\n                this._parentage = null;\n                if (Array.isArray(_parentage)) {\n                    try {\n                        for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {\n                            var parent_1 = _parentage_1_1.value;\n                            parent_1.remove(this);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                }\n                else {\n                    _parentage.remove(this);\n                }\n            }\n            var initialFinalizer = this.initialTeardown;\n            if (isFunction(initialFinalizer)) {\n                try {\n                    initialFinalizer();\n                }\n                catch (e) {\n                    errors = e instanceof UnsubscriptionError ? e.errors : [e];\n                }\n            }\n            var _finalizers = this._finalizers;\n            if (_finalizers) {\n                this._finalizers = null;\n                try {\n                    for (var _finalizers_1 = __values(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {\n                        var finalizer = _finalizers_1_1.value;\n                        try {\n                            execFinalizer(finalizer);\n                        }\n                        catch (err) {\n                            errors = errors !== null && errors !== void 0 ? errors : [];\n                            if (err instanceof UnsubscriptionError) {\n                                errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));\n                            }\n                            else {\n                                errors.push(err);\n                            }\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n            if (errors) {\n                throw new UnsubscriptionError(errors);\n            }\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var _a;\n        if (teardown && teardown !== this) {\n            if (this.closed) {\n                execFinalizer(teardown);\n            }\n            else {\n                if (teardown instanceof Subscription) {\n                    if (teardown.closed || teardown._hasParent(this)) {\n                        return;\n                    }\n                    teardown._addParent(this);\n                }\n                (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);\n            }\n        }\n    };\n    Subscription.prototype._hasParent = function (parent) {\n        var _parentage = this._parentage;\n        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n    };\n    Subscription.prototype._addParent = function (parent) {\n        var _parentage = this._parentage;\n        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n    };\n    Subscription.prototype._removeParent = function (parent) {\n        var _parentage = this._parentage;\n        if (_parentage === parent) {\n            this._parentage = null;\n        }\n        else if (Array.isArray(_parentage)) {\n            arrRemove(_parentage, parent);\n        }\n    };\n    Subscription.prototype.remove = function (teardown) {\n        var _finalizers = this._finalizers;\n        _finalizers && arrRemove(_finalizers, teardown);\n        if (teardown instanceof Subscription) {\n            teardown._removeParent(this);\n        }\n    };\n    Subscription.EMPTY = (function () {\n        var empty = new Subscription();\n        empty.closed = true;\n        return empty;\n    })();\n    return Subscription;\n}());\nexport { Subscription };\nexport var EMPTY_SUBSCRIPTION = Subscription.EMPTY;\nexport function isSubscription(value) {\n    return (value instanceof Subscription ||\n        (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe)));\n}\nfunction execFinalizer(finalizer) {\n    if (isFunction(finalizer)) {\n        finalizer();\n    }\n    else {\n        finalizer.unsubscribe();\n    }\n}\n//# sourceMappingURL=Subscription.js.map","import { config } from '../config';\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\nexport function reportUnhandledError(err) {\n    timeoutProvider.setTimeout(function () {\n        var onUnhandledError = config.onUnhandledError;\n        if (onUnhandledError) {\n            onUnhandledError(err);\n        }\n        else {\n            throw err;\n        }\n    });\n}\n//# sourceMappingURL=reportUnhandledError.js.map","export function noop() { }\n//# sourceMappingURL=noop.js.map","import { __extends } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(destination) {\n        var _this = _super.call(this) || this;\n        _this.isStopped = false;\n        if (destination) {\n            _this.destination = destination;\n            if (isSubscription(destination)) {\n                destination.add(_this);\n            }\n        }\n        else {\n            _this.destination = EMPTY_OBSERVER;\n        }\n        return _this;\n    }\n    Subscriber.create = function (next, error, complete) {\n        return new SafeSubscriber(next, error, complete);\n    };\n    Subscriber.prototype.next = function (value) {\n        if (this.isStopped) {\n            handleStoppedNotification(nextNotification(value), this);\n        }\n        else {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (this.isStopped) {\n            handleStoppedNotification(errorNotification(err), this);\n        }\n        else {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (this.isStopped) {\n            handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n        }\n        else {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.isStopped = true;\n            _super.prototype.unsubscribe.call(this);\n            this.destination = null;\n        }\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        try {\n            this.destination.error(err);\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    Subscriber.prototype._complete = function () {\n        try {\n            this.destination.complete();\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar _bind = Function.prototype.bind;\nfunction bind(fn, thisArg) {\n    return _bind.call(fn, thisArg);\n}\nvar ConsumerObserver = (function () {\n    function ConsumerObserver(partialObserver) {\n        this.partialObserver = partialObserver;\n    }\n    ConsumerObserver.prototype.next = function (value) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.next) {\n            try {\n                partialObserver.next(value);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    ConsumerObserver.prototype.error = function (err) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.error) {\n            try {\n                partialObserver.error(err);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n        else {\n            handleUnhandledError(err);\n        }\n    };\n    ConsumerObserver.prototype.complete = function () {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.complete) {\n            try {\n                partialObserver.complete();\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    return ConsumerObserver;\n}());\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        var partialObserver;\n        if (isFunction(observerOrNext) || !observerOrNext) {\n            partialObserver = {\n                next: (observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined),\n                error: error !== null && error !== void 0 ? error : undefined,\n                complete: complete !== null && complete !== void 0 ? complete : undefined,\n            };\n        }\n        else {\n            var context_1;\n            if (_this && config.useDeprecatedNextContext) {\n                context_1 = Object.create(observerOrNext);\n                context_1.unsubscribe = function () { return _this.unsubscribe(); };\n                partialObserver = {\n                    next: observerOrNext.next && bind(observerOrNext.next, context_1),\n                    error: observerOrNext.error && bind(observerOrNext.error, context_1),\n                    complete: observerOrNext.complete && bind(observerOrNext.complete, context_1),\n                };\n            }\n            else {\n                partialObserver = observerOrNext;\n            }\n        }\n        _this.destination = new ConsumerObserver(partialObserver);\n        return _this;\n    }\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\nfunction handleUnhandledError(error) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        captureError(error);\n    }\n    else {\n        reportUnhandledError(error);\n    }\n}\nfunction defaultErrorHandler(err) {\n    throw err;\n}\nfunction handleStoppedNotification(notification, subscriber) {\n    var onStoppedNotification = config.onStoppedNotification;\n    onStoppedNotification && timeoutProvider.setTimeout(function () { return onStoppedNotification(notification, subscriber); });\n}\nexport var EMPTY_OBSERVER = {\n    closed: true,\n    next: noop,\n    error: defaultErrorHandler,\n    complete: noop,\n};\n//# sourceMappingURL=Subscriber.js.map","export function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map","import { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription } from './Subscription';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\nvar Observable = (function () {\n    function Observable(subscribe) {\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var _this = this;\n        var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n        errorContext(function () {\n            var _a = _this, operator = _a.operator, source = _a.source;\n            subscriber.add(operator\n                ?\n                    operator.call(subscriber, source)\n                : source\n                    ?\n                        _this._subscribe(subscriber)\n                    :\n                        _this._trySubscribe(subscriber));\n        });\n        return subscriber;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            sink.error(err);\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscriber = new SafeSubscriber({\n                next: function (value) {\n                    try {\n                        next(value);\n                    }\n                    catch (err) {\n                        reject(err);\n                        subscriber.unsubscribe();\n                    }\n                },\n                error: reject,\n                complete: resolve,\n            });\n            _this.subscribe(subscriber);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var _a;\n        return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return (value = x); }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    var _a;\n    return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\nfunction isObserver(value) {\n    return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\nfunction isSubscriber(value) {\n    return (value && value instanceof Subscriber) || (isObserver(value) && isSubscription(value));\n}\n//# sourceMappingURL=Observable.js.map","import { isFunction } from './isFunction';\nexport function hasLift(source) {\n    return isFunction(source === null || source === void 0 ? void 0 : source.lift);\n}\nexport function operate(init) {\n    return function (source) {\n        if (hasLift(source)) {\n            return source.lift(function (liftedSource) {\n                try {\n                    return init(liftedSource, this);\n                }\n                catch (err) {\n                    this.error(err);\n                }\n            });\n        }\n        throw new TypeError('Unable to lift unknown Observable type');\n    };\n}\n//# sourceMappingURL=lift.js.map","import { __extends } from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function createOperatorSubscriber(destination, onNext, onComplete, onError, onFinalize) {\n    return new OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize);\n}\nvar OperatorSubscriber = (function (_super) {\n    __extends(OperatorSubscriber, _super);\n    function OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize, shouldUnsubscribe) {\n        var _this = _super.call(this, destination) || this;\n        _this.onFinalize = onFinalize;\n        _this.shouldUnsubscribe = shouldUnsubscribe;\n        _this._next = onNext\n            ? function (value) {\n                try {\n                    onNext(value);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n            }\n            : _super.prototype._next;\n        _this._error = onError\n            ? function (err) {\n                try {\n                    onError(err);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._error;\n        _this._complete = onComplete\n            ? function () {\n                try {\n                    onComplete();\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._complete;\n        return _this;\n    }\n    OperatorSubscriber.prototype.unsubscribe = function () {\n        var _a;\n        if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\n            var closed_1 = this.closed;\n            _super.prototype.unsubscribe.call(this);\n            !closed_1 && ((_a = this.onFinalize) === null || _a === void 0 ? void 0 : _a.call(this));\n        }\n    };\n    return OperatorSubscriber;\n}(Subscriber));\nexport { OperatorSubscriber };\n//# sourceMappingURL=OperatorSubscriber.js.map","import { isFunction } from \"./isFunction\";\nexport function isPromise(value) {\n    return isFunction(value === null || value === void 0 ? void 0 : value.then);\n}\n//# sourceMappingURL=isPromise.js.map","import { observable as Symbol_observable } from '../symbol/observable';\nimport { isFunction } from './isFunction';\nexport function isInteropObservable(input) {\n    return isFunction(input[Symbol_observable]);\n}\n//# sourceMappingURL=isInteropObservable.js.map","import { isFunction } from './isFunction';\nexport function isAsyncIterable(obj) {\n    return Symbol.asyncIterator && isFunction(obj === null || obj === void 0 ? void 0 : obj[Symbol.asyncIterator]);\n}\n//# sourceMappingURL=isAsyncIterable.js.map","export function createInvalidObservableTypeError(input) {\n    return new TypeError(\"You provided \" + (input !== null && typeof input === 'object' ? 'an invalid object' : \"'\" + input + \"'\") + \" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.\");\n}\n//# sourceMappingURL=throwUnobservableError.js.map","import { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from './isFunction';\nexport function isIterable(input) {\n    return isFunction(input === null || input === void 0 ? void 0 : input[Symbol_iterator]);\n}\n//# sourceMappingURL=isIterable.js.map","import { __asyncGenerator, __await, __generator } from \"tslib\";\nimport { isFunction } from './isFunction';\nexport function readableStreamLikeToAsyncGenerator(readableStream) {\n    return __asyncGenerator(this, arguments, function readableStreamLikeToAsyncGenerator_1() {\n        var reader, _a, value, done;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    reader = readableStream.getReader();\n                    _b.label = 1;\n                case 1:\n                    _b.trys.push([1, , 9, 10]);\n                    _b.label = 2;\n                case 2:\n                    if (!true) return [3, 8];\n                    return [4, __await(reader.read())];\n                case 3:\n                    _a = _b.sent(), value = _a.value, done = _a.done;\n                    if (!done) return [3, 5];\n                    return [4, __await(void 0)];\n                case 4: return [2, _b.sent()];\n                case 5: return [4, __await(value)];\n                case 6: return [4, _b.sent()];\n                case 7:\n                    _b.sent();\n                    return [3, 2];\n                case 8: return [3, 10];\n                case 9:\n                    reader.releaseLock();\n                    return [7];\n                case 10: return [2];\n            }\n        });\n    });\n}\nexport function isReadableStreamLike(obj) {\n    return isFunction(obj === null || obj === void 0 ? void 0 : obj.getReader);\n}\n//# sourceMappingURL=isReadableStreamLike.js.map","import { __asyncValues, __awaiter, __generator, __values } from \"tslib\";\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isPromise } from '../util/isPromise';\nimport { Observable } from '../Observable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isIterable } from '../util/isIterable';\nimport { isReadableStreamLike, readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\nimport { isFunction } from '../util/isFunction';\nimport { reportUnhandledError } from '../util/reportUnhandledError';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport function innerFrom(input) {\n    if (input instanceof Observable) {\n        return input;\n    }\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return fromInteropObservable(input);\n        }\n        if (isArrayLike(input)) {\n            return fromArrayLike(input);\n        }\n        if (isPromise(input)) {\n            return fromPromise(input);\n        }\n        if (isAsyncIterable(input)) {\n            return fromAsyncIterable(input);\n        }\n        if (isIterable(input)) {\n            return fromIterable(input);\n        }\n        if (isReadableStreamLike(input)) {\n            return fromReadableStreamLike(input);\n        }\n    }\n    throw createInvalidObservableTypeError(input);\n}\nexport function fromInteropObservable(obj) {\n    return new Observable(function (subscriber) {\n        var obs = obj[Symbol_observable]();\n        if (isFunction(obs.subscribe)) {\n            return obs.subscribe(subscriber);\n        }\n        throw new TypeError('Provided object does not correctly implement Symbol.observable');\n    });\n}\nexport function fromArrayLike(array) {\n    return new Observable(function (subscriber) {\n        for (var i = 0; i < array.length && !subscriber.closed; i++) {\n            subscriber.next(array[i]);\n        }\n        subscriber.complete();\n    });\n}\nexport function fromPromise(promise) {\n    return new Observable(function (subscriber) {\n        promise\n            .then(function (value) {\n            if (!subscriber.closed) {\n                subscriber.next(value);\n                subscriber.complete();\n            }\n        }, function (err) { return subscriber.error(err); })\n            .then(null, reportUnhandledError);\n    });\n}\nexport function fromIterable(iterable) {\n    return new Observable(function (subscriber) {\n        var e_1, _a;\n        try {\n            for (var iterable_1 = __values(iterable), iterable_1_1 = iterable_1.next(); !iterable_1_1.done; iterable_1_1 = iterable_1.next()) {\n                var value = iterable_1_1.value;\n                subscriber.next(value);\n                if (subscriber.closed) {\n                    return;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (iterable_1_1 && !iterable_1_1.done && (_a = iterable_1.return)) _a.call(iterable_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        subscriber.complete();\n    });\n}\nexport function fromAsyncIterable(asyncIterable) {\n    return new Observable(function (subscriber) {\n        process(asyncIterable, subscriber).catch(function (err) { return subscriber.error(err); });\n    });\n}\nexport function fromReadableStreamLike(readableStream) {\n    return fromAsyncIterable(readableStreamLikeToAsyncGenerator(readableStream));\n}\nfunction process(asyncIterable, subscriber) {\n    var asyncIterable_1, asyncIterable_1_1;\n    var e_2, _a;\n    return __awaiter(this, void 0, void 0, function () {\n        var value, e_2_1;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    _b.trys.push([0, 5, 6, 11]);\n                    asyncIterable_1 = __asyncValues(asyncIterable);\n                    _b.label = 1;\n                case 1: return [4, asyncIterable_1.next()];\n                case 2:\n                    if (!(asyncIterable_1_1 = _b.sent(), !asyncIterable_1_1.done)) return [3, 4];\n                    value = asyncIterable_1_1.value;\n                    subscriber.next(value);\n                    if (subscriber.closed) {\n                        return [2];\n                    }\n                    _b.label = 3;\n                case 3: return [3, 1];\n                case 4: return [3, 11];\n                case 5:\n                    e_2_1 = _b.sent();\n                    e_2 = { error: e_2_1 };\n                    return [3, 11];\n                case 6:\n                    _b.trys.push([6, , 9, 10]);\n                    if (!(asyncIterable_1_1 && !asyncIterable_1_1.done && (_a = asyncIterable_1.return))) return [3, 8];\n                    return [4, _a.call(asyncIterable_1)];\n                case 7:\n                    _b.sent();\n                    _b.label = 8;\n                case 8: return [3, 10];\n                case 9:\n                    if (e_2) throw e_2.error;\n                    return [7];\n                case 10: return [7];\n                case 11:\n                    subscriber.complete();\n                    return [2];\n            }\n        });\n    });\n}\n//# sourceMappingURL=innerFrom.js.map","export function executeSchedule(parentSubscription, scheduler, work, delay, repeat) {\n    if (delay === void 0) { delay = 0; }\n    if (repeat === void 0) { repeat = false; }\n    var scheduleSubscription = scheduler.schedule(function () {\n        work();\n        if (repeat) {\n            parentSubscription.add(this.schedule(null, delay));\n        }\n        else {\n            this.unsubscribe();\n        }\n    }, delay);\n    parentSubscription.add(scheduleSubscription);\n    if (!repeat) {\n        return scheduleSubscription;\n    }\n}\n//# sourceMappingURL=executeSchedule.js.map","import { executeSchedule } from '../util/executeSchedule';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function observeOn(scheduler, delay) {\n    if (delay === void 0) { delay = 0; }\n    return operate(function (source, subscriber) {\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) { return executeSchedule(subscriber, scheduler, function () { return subscriber.next(value); }, delay); }, function () { return executeSchedule(subscriber, scheduler, function () { return subscriber.complete(); }, delay); }, function (err) { return executeSchedule(subscriber, scheduler, function () { return subscriber.error(err); }, delay); }));\n    });\n}\n//# sourceMappingURL=observeOn.js.map","import { operate } from '../util/lift';\nexport function subscribeOn(scheduler, delay) {\n    if (delay === void 0) { delay = 0; }\n    return operate(function (source, subscriber) {\n        subscriber.add(scheduler.schedule(function () { return source.subscribe(subscriber); }, delay));\n    });\n}\n//# sourceMappingURL=subscribeOn.js.map","import { Observable } from '../Observable';\nimport { executeSchedule } from '../util/executeSchedule';\nexport function scheduleAsyncIterable(input, scheduler) {\n    if (!input) {\n        throw new Error('Iterable cannot be null');\n    }\n    return new Observable(function (subscriber) {\n        executeSchedule(subscriber, scheduler, function () {\n            var iterator = input[Symbol.asyncIterator]();\n            executeSchedule(subscriber, scheduler, function () {\n                iterator.next().then(function (result) {\n                    if (result.done) {\n                        subscriber.complete();\n                    }\n                    else {\n                        subscriber.next(result.value);\n                    }\n                });\n            }, 0, true);\n        });\n    });\n}\n//# sourceMappingURL=scheduleAsyncIterable.js.map","import { scheduleObservable } from './scheduleObservable';\nimport { schedulePromise } from './schedulePromise';\nimport { scheduleArray } from './scheduleArray';\nimport { scheduleIterable } from './scheduleIterable';\nimport { scheduleAsyncIterable } from './scheduleAsyncIterable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isPromise } from '../util/isPromise';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isIterable } from '../util/isIterable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isReadableStreamLike } from '../util/isReadableStreamLike';\nimport { scheduleReadableStreamLike } from './scheduleReadableStreamLike';\nexport function scheduled(input, scheduler) {\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return scheduleObservable(input, scheduler);\n        }\n        if (isArrayLike(input)) {\n            return scheduleArray(input, scheduler);\n        }\n        if (isPromise(input)) {\n            return schedulePromise(input, scheduler);\n        }\n        if (isAsyncIterable(input)) {\n            return scheduleAsyncIterable(input, scheduler);\n        }\n        if (isIterable(input)) {\n            return scheduleIterable(input, scheduler);\n        }\n        if (isReadableStreamLike(input)) {\n            return scheduleReadableStreamLike(input, scheduler);\n        }\n    }\n    throw createInvalidObservableTypeError(input);\n}\n//# sourceMappingURL=scheduled.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { observeOn } from '../operators/observeOn';\nimport { subscribeOn } from '../operators/subscribeOn';\nexport function scheduleObservable(input, scheduler) {\n    return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\n}\n//# sourceMappingURL=scheduleObservable.js.map","import { Observable } from '../Observable';\nexport function scheduleArray(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var i = 0;\n        return scheduler.schedule(function () {\n            if (i === input.length) {\n                subscriber.complete();\n            }\n            else {\n                subscriber.next(input[i++]);\n                if (!subscriber.closed) {\n                    this.schedule();\n                }\n            }\n        });\n    });\n}\n//# sourceMappingURL=scheduleArray.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { observeOn } from '../operators/observeOn';\nimport { subscribeOn } from '../operators/subscribeOn';\nexport function schedulePromise(input, scheduler) {\n    return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\n}\n//# sourceMappingURL=schedulePromise.js.map","import { Observable } from '../Observable';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from '../util/isFunction';\nimport { executeSchedule } from '../util/executeSchedule';\nexport function scheduleIterable(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var iterator;\n        executeSchedule(subscriber, scheduler, function () {\n            iterator = input[Symbol_iterator]();\n            executeSchedule(subscriber, scheduler, function () {\n                var _a;\n                var value;\n                var done;\n                try {\n                    (_a = iterator.next(), value = _a.value, done = _a.done);\n                }\n                catch (err) {\n                    subscriber.error(err);\n                    return;\n                }\n                if (done) {\n                    subscriber.complete();\n                }\n                else {\n                    subscriber.next(value);\n                }\n            }, 0, true);\n        });\n        return function () { return isFunction(iterator === null || iterator === void 0 ? void 0 : iterator.return) && iterator.return(); };\n    });\n}\n//# sourceMappingURL=scheduleIterable.js.map","import { scheduleAsyncIterable } from './scheduleAsyncIterable';\nimport { readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\nexport function scheduleReadableStreamLike(input, scheduler) {\n    return scheduleAsyncIterable(readableStreamLikeToAsyncGenerator(input), scheduler);\n}\n//# sourceMappingURL=scheduleReadableStreamLike.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function map(project, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            subscriber.next(project.call(thisArg, value, index++));\n        }));\n    });\n}\n//# sourceMappingURL=map.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { operate } from '../util/lift';\nexport function catchError(selector) {\n    return operate(function (source, subscriber) {\n        var innerSub = null;\n        var syncUnsub = false;\n        var handledResult;\n        innerSub = source.subscribe(createOperatorSubscriber(subscriber, undefined, undefined, function (err) {\n            handledResult = innerFrom(selector(err, catchError(selector)(source)));\n            if (innerSub) {\n                innerSub.unsubscribe();\n                innerSub = null;\n                handledResult.subscribe(subscriber);\n            }\n            else {\n                syncUnsub = true;\n            }\n        }));\n        if (syncUnsub) {\n            innerSub.unsubscribe();\n            innerSub = null;\n            handledResult.subscribe(subscriber);\n        }\n    });\n}\n//# sourceMappingURL=catchError.js.map","import { MAX_DELAY_MS } from './constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @private\n * Internal use of Amplify only\n */\nfunction jitteredBackoff(maxDelayMs = MAX_DELAY_MS) {\n    const BASE_TIME_MS = 100;\n    const JITTER_FACTOR = 100;\n    return attempt => {\n        const delay = 2 ** attempt * BASE_TIME_MS + JITTER_FACTOR * Math.random();\n        return delay > maxDelayMs ? false : delay;\n    };\n}\n\nexport { jitteredBackoff };\n//# sourceMappingURL=jitteredBackoff.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst MAX_DELAY_MS = 5 * 60 * 1000;\n\nexport { MAX_DELAY_MS };\n//# sourceMappingURL=constants.mjs.map\n","/*! js-cookie v3.0.5 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (name, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    name = encodeURIComponent(name)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      name + '=' + converter.write(value, name) + stringifiedAttributes)\n  }\n\n  function get (name) {\n    if (typeof document === 'undefined' || (arguments.length && !name)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var found = decodeURIComponent(parts[0]);\n        jar[found] = converter.read(value, found);\n\n        if (name === found) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return name ? jar[name] : jar\n  }\n\n  return Object.create(\n    {\n      set,\n      get,\n      remove: function (name, attributes) {\n        set(\n          name,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\nexport { api as default };\n","import { base64Decoder } from '../../../utils/convert/base64/base64Decoder.mjs';\nimport '../../../types/errors.mjs';\nimport '../../../errors/errorHelpers.mjs';\nimport { assert, AuthConfigurationErrorCode } from './errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction assertTokenProviderConfig(cognitoConfig) {\n    let assertionValid = true; // assume valid until otherwise proveed\n    if (!cognitoConfig) {\n        assertionValid = false;\n    }\n    else {\n        assertionValid =\n            !!cognitoConfig.userPoolId && !!cognitoConfig.userPoolClientId;\n    }\n    assert(assertionValid, AuthConfigurationErrorCode.AuthUserPoolException);\n}\nfunction assertOAuthConfig(cognitoConfig) {\n    const validOAuthConfig = !!cognitoConfig?.loginWith?.oauth?.domain &&\n        !!cognitoConfig?.loginWith?.oauth?.redirectSignOut &&\n        !!cognitoConfig?.loginWith?.oauth?.redirectSignIn &&\n        !!cognitoConfig?.loginWith?.oauth?.responseType;\n    assert(validOAuthConfig, AuthConfigurationErrorCode.OAuthNotConfigureException);\n}\nfunction assertIdentityPoolIdConfig(cognitoConfig) {\n    const validConfig = !!cognitoConfig?.identityPoolId;\n    assert(validConfig, AuthConfigurationErrorCode.InvalidIdentityPoolIdException);\n}\n/**\n * Decodes payload of JWT token\n *\n * @param {String} token A string representing a token to be decoded\n * @throws {@link Error} - Throws error when token is invalid or payload malformed.\n */\nfunction decodeJWT(token) {\n    const tokenParts = token.split('.');\n    if (tokenParts.length !== 3) {\n        throw new Error('Invalid token');\n    }\n    try {\n        const base64WithUrlSafe = tokenParts[1];\n        const base64 = base64WithUrlSafe.replace(/-/g, '+').replace(/_/g, '/');\n        const jsonStr = decodeURIComponent(base64Decoder\n            .convert(base64)\n            .split('')\n            .map(char => `%${`00${char.charCodeAt(0).toString(16)}`.slice(-2)}`)\n            .join(''));\n        const payload = JSON.parse(jsonStr);\n        return {\n            toString: () => token,\n            payload,\n        };\n    }\n    catch (err) {\n        throw new Error('Invalid token payload');\n    }\n}\n\nexport { assertIdentityPoolIdConfig, assertOAuthConfig, assertTokenProviderConfig, decodeJWT };\n//# sourceMappingURL=index.mjs.map\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import { Framework } from './types.mjs';\nimport { detect } from './detection/index.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// We want to cache detection since the framework won't change\nlet frameworkCache;\nconst frameworkChangeObservers = [];\n// Setup the detection reset tracking / timeout delays\nlet resetTriggered = false;\nconst SSR_RESET_TIMEOUT = 10; // ms\nconst WEB_RESET_TIMEOUT = 10; // ms\nconst PRIME_FRAMEWORK_DELAY = 1000; // ms\nconst detectFramework = () => {\n    if (!frameworkCache) {\n        frameworkCache = detect();\n        if (resetTriggered) {\n            // The final run of detectFramework:\n            // Starting from this point, the `frameworkCache` becomes \"final\".\n            // So we don't need to notify the observers again so the observer\n            // can be removed after the final notice.\n            while (frameworkChangeObservers.length) {\n                frameworkChangeObservers.pop()?.();\n            }\n        }\n        else {\n            // The first run of detectFramework:\n            // Every time we update the cache, call each observer function\n            frameworkChangeObservers.forEach(fcn => {\n                fcn();\n            });\n        }\n        // Retry once for either Unknown type after a delay (explained below)\n        resetTimeout(Framework.ServerSideUnknown, SSR_RESET_TIMEOUT);\n        resetTimeout(Framework.WebUnknown, WEB_RESET_TIMEOUT);\n    }\n    return frameworkCache;\n};\n/**\n * @internal Setup observer callback that will be called everytime the framework changes\n */\nconst observeFrameworkChanges = (fcn) => {\n    // When the `frameworkCache` won't be updated again, we ignore all incoming\n    // observers.\n    if (resetTriggered) {\n        return;\n    }\n    frameworkChangeObservers.push(fcn);\n};\nfunction clearCache() {\n    frameworkCache = undefined;\n}\n// For a framework type and a delay amount, setup the event to re-detect\n//   During the runtime boot, it is possible that framework detection will\n//   be triggered before the framework has made modifications to the\n//   global/window/etc needed for detection. When no framework is detected\n//   we will reset and try again to ensure we don't use a cached\n//   non-framework detection result for all requests.\nfunction resetTimeout(framework, delay) {\n    if (frameworkCache === framework && !resetTriggered) {\n        setTimeout(() => {\n            clearCache();\n            resetTriggered = true;\n            setTimeout(detectFramework, PRIME_FRAMEWORK_DELAY);\n        }, delay);\n    }\n}\n\nexport { clearCache, detectFramework, frameworkChangeObservers, observeFrameworkChanges };\n//# sourceMappingURL=detectFramework.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction isTokenExpired({ expiresAt, clockDrift, tolerance = 5000, }) {\n    const currentTime = Date.now();\n    return currentTime + clockDrift + tolerance > expiresAt;\n}\n\nexport { isTokenExpired };\n//# sourceMappingURL=isTokenExpired.mjs.map\n","import { AuthError } from '../../errors/AuthError.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction getRegionFromUserPoolId(userPoolId) {\n    const region = userPoolId?.split('_')[0];\n    if (!userPoolId ||\n        userPoolId.indexOf('_') < 0 ||\n        !region ||\n        typeof region !== 'string')\n        throw new AuthError({\n            name: 'InvalidUserPoolId',\n            message: 'Invalid user pool id provided.',\n        });\n    return region;\n}\nfunction getRegionFromIdentityPoolId(identityPoolId) {\n    if (!identityPoolId || !identityPoolId.includes(':')) {\n        throw new AuthError({\n            name: 'InvalidIdentityPoolIdException',\n            message: 'Invalid identity pool id provided.',\n            recoverySuggestion: 'Make sure a valid identityPoolId is given in the config.',\n        });\n    }\n    return identityPoolId.split(':')[0];\n}\n\nexport { getRegionFromIdentityPoolId, getRegionFromUserPoolId };\n//# sourceMappingURL=regionParsers.mjs.map\n","import { AuthError } from '../../../errors/AuthError.mjs';\nimport { TOKEN_REFRESH_EXCEPTION, USER_UNAUTHENTICATED_EXCEPTION, DEVICE_METADATA_NOT_FOUND_EXCEPTION } from '../../../errors/constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction isTypeUserPoolConfig(authConfig) {\n    if (authConfig &&\n        authConfig.Cognito.userPoolId &&\n        authConfig.Cognito.userPoolClientId) {\n        return true;\n    }\n    return false;\n}\nfunction assertAuthTokens(tokens) {\n    if (!tokens || !tokens.accessToken) {\n        throw new AuthError({\n            name: USER_UNAUTHENTICATED_EXCEPTION,\n            message: 'User needs to be authenticated to call this API.',\n            recoverySuggestion: 'Sign in before calling this API again.',\n        });\n    }\n}\nfunction assertIdTokenInAuthTokens(tokens) {\n    if (!tokens || !tokens.idToken) {\n        throw new AuthError({\n            name: USER_UNAUTHENTICATED_EXCEPTION,\n            message: 'User needs to be authenticated to call this API.',\n            recoverySuggestion: 'Sign in before calling this API again.',\n        });\n    }\n}\nconst oAuthTokenRefreshException = new AuthError({\n    name: TOKEN_REFRESH_EXCEPTION,\n    message: `Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. \n\tPlease change your oauth configuration to use 'code grant' flow.`,\n    recoverySuggestion: `Please logout and change your Amplify configuration to use \"code grant\" flow. \n\tE.g { responseType: 'code' }`,\n});\nconst tokenRefreshException = new AuthError({\n    name: USER_UNAUTHENTICATED_EXCEPTION,\n    message: 'User needs to be authenticated to call this API.',\n    recoverySuggestion: 'Sign in before calling this API again.',\n});\nfunction assertAuthTokensWithRefreshToken(tokens) {\n    if (isAuthenticatedWithImplicitOauthFlow(tokens)) {\n        throw oAuthTokenRefreshException;\n    }\n    if (!isAuthenticatedWithRefreshToken(tokens)) {\n        throw tokenRefreshException;\n    }\n}\nfunction assertDeviceMetadata(deviceMetadata) {\n    if (!deviceMetadata ||\n        !deviceMetadata.deviceKey ||\n        !deviceMetadata.deviceGroupKey ||\n        !deviceMetadata.randomPassword) {\n        throw new AuthError({\n            name: DEVICE_METADATA_NOT_FOUND_EXCEPTION,\n            message: 'Either deviceKey, deviceGroupKey or secretPassword were not found during the sign-in process.',\n            recoverySuggestion: 'Make sure to not clear storage after calling the signIn API.',\n        });\n    }\n}\nconst OAuthStorageKeys = {\n    inflightOAuth: 'inflightOAuth',\n    oauthSignIn: 'oauthSignIn',\n    oauthPKCE: 'oauthPKCE',\n    oauthState: 'oauthState',\n};\nfunction isAuthenticated(tokens) {\n    return tokens?.accessToken || tokens?.idToken;\n}\nfunction isAuthenticatedWithRefreshToken(tokens) {\n    return isAuthenticated(tokens) && tokens?.refreshToken;\n}\nfunction isAuthenticatedWithImplicitOauthFlow(tokens) {\n    return isAuthenticated(tokens) && !tokens?.refreshToken;\n}\n\nexport { OAuthStorageKeys, assertAuthTokens, assertAuthTokensWithRefreshToken, assertDeviceMetadata, assertIdTokenInAuthTokens, isTypeUserPoolConfig, oAuthTokenRefreshException, tokenRefreshException };\n//# sourceMappingURL=types.mjs.map\n","import { AmplifyErrorCode } from '@aws-amplify/core/internals/utils';\nimport { AuthError } from '../AuthError.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction assertServiceError(error) {\n    if (!error ||\n        error.name === 'Error' ||\n        error instanceof TypeError) {\n        throw new AuthError({\n            name: AmplifyErrorCode.Unknown,\n            message: 'An unknown error has occurred.',\n            underlyingError: error,\n        });\n    }\n}\n\nexport { assertServiceError };\n//# sourceMappingURL=assertServiceError.mjs.map\n","import { decodeJWT, assertTokenProviderConfig } from '@aws-amplify/core/internals/utils';\nimport { AuthError } from '../../../errors/AuthError.mjs';\nimport { AuthTokenStorageKeys } from './types.mjs';\nimport { assert, TokenProviderErrorCode } from './errorHelpers.mjs';\nimport { AUTH_KEY_PREFIX } from './constants.mjs';\n\nclass DefaultTokenStore {\n    getKeyValueStorage() {\n        if (!this.keyValueStorage) {\n            throw new AuthError({\n                name: 'KeyValueStorageNotFoundException',\n                message: 'KeyValueStorage was not found in TokenStore',\n            });\n        }\n        return this.keyValueStorage;\n    }\n    setKeyValueStorage(keyValueStorage) {\n        this.keyValueStorage = keyValueStorage;\n    }\n    setAuthConfig(authConfig) {\n        this.authConfig = authConfig;\n    }\n    async loadTokens() {\n        // TODO(v6): migration logic should be here\n        // Reading V5 tokens old format\n        try {\n            const authKeys = await this.getAuthKeys();\n            const accessTokenString = await this.getKeyValueStorage().getItem(authKeys.accessToken);\n            if (!accessTokenString) {\n                throw new AuthError({\n                    name: 'NoSessionFoundException',\n                    message: 'Auth session was not found. Make sure to call signIn.',\n                });\n            }\n            const accessToken = decodeJWT(accessTokenString);\n            const itString = await this.getKeyValueStorage().getItem(authKeys.idToken);\n            const idToken = itString ? decodeJWT(itString) : undefined;\n            const refreshToken = (await this.getKeyValueStorage().getItem(authKeys.refreshToken)) ??\n                undefined;\n            const clockDriftString = (await this.getKeyValueStorage().getItem(authKeys.clockDrift)) ?? '0';\n            const clockDrift = Number.parseInt(clockDriftString);\n            const signInDetails = await this.getKeyValueStorage().getItem(authKeys.signInDetails);\n            const tokens = {\n                accessToken,\n                idToken,\n                refreshToken,\n                deviceMetadata: (await this.getDeviceMetadata()) ?? undefined,\n                clockDrift,\n                username: await this.getLastAuthUser(),\n            };\n            if (signInDetails) {\n                tokens.signInDetails = JSON.parse(signInDetails);\n            }\n            return tokens;\n        }\n        catch (err) {\n            return null;\n        }\n    }\n    async storeTokens(tokens) {\n        assert(tokens !== undefined, TokenProviderErrorCode.InvalidAuthTokens);\n        const lastAuthUser = tokens.username;\n        await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(), lastAuthUser);\n        const authKeys = await this.getAuthKeys();\n        await this.getKeyValueStorage().setItem(authKeys.accessToken, tokens.accessToken.toString());\n        if (tokens.idToken) {\n            await this.getKeyValueStorage().setItem(authKeys.idToken, tokens.idToken.toString());\n        }\n        else {\n            await this.getKeyValueStorage().removeItem(authKeys.idToken);\n        }\n        if (tokens.refreshToken) {\n            await this.getKeyValueStorage().setItem(authKeys.refreshToken, tokens.refreshToken);\n        }\n        else {\n            await this.getKeyValueStorage().removeItem(authKeys.refreshToken);\n        }\n        if (tokens.deviceMetadata) {\n            if (tokens.deviceMetadata.deviceKey) {\n                await this.getKeyValueStorage().setItem(authKeys.deviceKey, tokens.deviceMetadata.deviceKey);\n            }\n            if (tokens.deviceMetadata.deviceGroupKey) {\n                await this.getKeyValueStorage().setItem(authKeys.deviceGroupKey, tokens.deviceMetadata.deviceGroupKey);\n            }\n            await this.getKeyValueStorage().setItem(authKeys.randomPasswordKey, tokens.deviceMetadata.randomPassword);\n        }\n        if (tokens.signInDetails) {\n            await this.getKeyValueStorage().setItem(authKeys.signInDetails, JSON.stringify(tokens.signInDetails));\n        }\n        else {\n            await this.getKeyValueStorage().removeItem(authKeys.signInDetails);\n        }\n        await this.getKeyValueStorage().setItem(authKeys.clockDrift, `${tokens.clockDrift}`);\n    }\n    async clearTokens() {\n        const authKeys = await this.getAuthKeys();\n        // Not calling clear because it can remove data that is not managed by AuthTokenStore\n        await Promise.all([\n            this.getKeyValueStorage().removeItem(authKeys.accessToken),\n            this.getKeyValueStorage().removeItem(authKeys.idToken),\n            this.getKeyValueStorage().removeItem(authKeys.clockDrift),\n            this.getKeyValueStorage().removeItem(authKeys.refreshToken),\n            this.getKeyValueStorage().removeItem(authKeys.signInDetails),\n            this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),\n            this.getKeyValueStorage().removeItem(authKeys.oauthMetadata),\n        ]);\n    }\n    async getDeviceMetadata(username) {\n        const authKeys = await this.getAuthKeys(username);\n        const deviceKey = await this.getKeyValueStorage().getItem(authKeys.deviceKey);\n        const deviceGroupKey = await this.getKeyValueStorage().getItem(authKeys.deviceGroupKey);\n        const randomPassword = await this.getKeyValueStorage().getItem(authKeys.randomPasswordKey);\n        return randomPassword && deviceGroupKey && deviceKey\n            ? {\n                deviceKey,\n                deviceGroupKey,\n                randomPassword,\n            }\n            : null;\n    }\n    async clearDeviceMetadata(username) {\n        const authKeys = await this.getAuthKeys(username);\n        await Promise.all([\n            this.getKeyValueStorage().removeItem(authKeys.deviceKey),\n            this.getKeyValueStorage().removeItem(authKeys.deviceGroupKey),\n            this.getKeyValueStorage().removeItem(authKeys.randomPasswordKey),\n        ]);\n    }\n    async getAuthKeys(username) {\n        assertTokenProviderConfig(this.authConfig?.Cognito);\n        const lastAuthUser = username ?? (await this.getLastAuthUser());\n        return createKeysForAuthStorage(AUTH_KEY_PREFIX, `${this.authConfig.Cognito.userPoolClientId}.${lastAuthUser}`);\n    }\n    getLastAuthUserKey() {\n        assertTokenProviderConfig(this.authConfig?.Cognito);\n        const identifier = this.authConfig.Cognito.userPoolClientId;\n        return `${AUTH_KEY_PREFIX}.${identifier}.LastAuthUser`;\n    }\n    async getLastAuthUser() {\n        const lastAuthUser = (await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())) ??\n            'username';\n        return lastAuthUser;\n    }\n    async setOAuthMetadata(metadata) {\n        const { oauthMetadata: oauthMetadataKey } = await this.getAuthKeys();\n        await this.getKeyValueStorage().setItem(oauthMetadataKey, JSON.stringify(metadata));\n    }\n    async getOAuthMetadata() {\n        const { oauthMetadata: oauthMetadataKey } = await this.getAuthKeys();\n        const oauthMetadata = await this.getKeyValueStorage().getItem(oauthMetadataKey);\n        return oauthMetadata && JSON.parse(oauthMetadata);\n    }\n}\nconst createKeysForAuthStorage = (provider, identifier) => {\n    return getAuthStorageKeys(AuthTokenStorageKeys)(`${provider}`, identifier);\n};\nfunction getAuthStorageKeys(authKeys) {\n    const keys = Object.values({ ...authKeys });\n    return (prefix, identifier) => keys.reduce((acc, authKey) => ({\n        ...acc,\n        [authKey]: `${prefix}.${identifier}.${authKey}`,\n    }), {});\n}\n\nexport { DefaultTokenStore, createKeysForAuthStorage, getAuthStorageKeys };\n//# sourceMappingURL=TokenStore.mjs.map\n","import { decodeJWT } from '@aws-amplify/core/internals/utils';\nimport { AuthError } from '../../../errors/AuthError.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction formLoginsMap(idToken) {\n    const issuer = decodeJWT(idToken).payload.iss;\n    const res = {};\n    if (!issuer) {\n        throw new AuthError({\n            name: 'InvalidIdTokenException',\n            message: 'Invalid Idtoken.',\n        });\n    }\n    const domainName = issuer.replace(/(^\\w+:|^)\\/\\//, '');\n    res[domainName] = idToken;\n    return res;\n}\n\nexport { formLoginsMap };\n//# sourceMappingURL=utils.mjs.map\n","import { createGetIdClient } from '@aws-amplify/core';\nimport { AuthError } from '../../../errors/AuthError.mjs';\nimport { assertServiceError } from '../../../errors/utils/assertServiceError.mjs';\nimport { getRegionFromIdentityPoolId } from '../../../foundation/parsers/regionParsers.mjs';\nimport '@aws-amplify/core/internals/utils';\nimport '@aws-amplify/core/internals/aws-client-utils';\nimport { createCognitoIdentityPoolEndpointResolver } from '../factories/createCognitoIdentityPoolEndpointResolver.mjs';\nimport { formLoginsMap } from './utils.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Provides a Cognito identityId\n *\n * @param tokens - The AuthTokens received after SignIn\n * @returns string\n * @throws configuration exceptions: `InvalidIdentityPoolIdException`\n *  - Auth errors that may arise from misconfiguration.\n * @throws service exceptions: {@link GetIdException }\n */\nasync function cognitoIdentityIdProvider({ tokens, authConfig, identityIdStore, }) {\n    identityIdStore.setAuthConfig({ Cognito: authConfig });\n    // will return null only if there is no identityId cached or if there is an error retrieving it\n    const identityId = await identityIdStore.loadIdentityId();\n    if (identityId) {\n        return identityId.id;\n    }\n    const logins = tokens?.idToken\n        ? formLoginsMap(tokens.idToken.toString())\n        : {};\n    const generatedIdentityId = await generateIdentityId(logins, authConfig);\n    // Store generated identityId\n    identityIdStore.storeIdentityId({\n        id: generatedIdentityId,\n        type: tokens ? 'primary' : 'guest',\n    });\n    return generatedIdentityId;\n}\nasync function generateIdentityId(logins, authConfig) {\n    const identityPoolId = authConfig?.identityPoolId;\n    const region = getRegionFromIdentityPoolId(identityPoolId);\n    const getId = createGetIdClient({\n        endpointResolver: createCognitoIdentityPoolEndpointResolver({\n            endpointOverride: authConfig.identityPoolEndpoint,\n        }),\n    });\n    // IdentityId is absent so get it using IdentityPoolId with Cognito's GetId API\n    let idResult;\n    // for a first-time user, this will return a brand new identity\n    // for a returning user, this will retrieve the previous identity assocaited with the logins\n    try {\n        idResult = (await getId({\n            region,\n        }, {\n            IdentityPoolId: identityPoolId,\n            Logins: logins,\n        })).IdentityId;\n    }\n    catch (e) {\n        assertServiceError(e);\n        throw new AuthError(e);\n    }\n    if (!idResult) {\n        throw new AuthError({\n            name: 'GetIdResponseException',\n            message: 'Received undefined response from getId operation',\n            recoverySuggestion: 'Make sure to pass a valid identityPoolId in the configuration.',\n        });\n    }\n    return idResult;\n}\n\nexport { cognitoIdentityIdProvider };\n//# sourceMappingURL=IdentityIdProvider.mjs.map\n","import '../../../../types/errors.mjs';\nimport '../../../../errors/errorHelpers.mjs';\nimport '../../../../utils/getClientInfo/getClientInfo.mjs';\nimport '../../../../utils/retry/retry.mjs';\nimport '../../../../parseAWSExports.mjs';\nimport 'uuid';\nimport '../../../../singleton/Auth/utils/errorHelpers.mjs';\nimport '@aws-crypto/sha256-js';\nimport '@smithy/util-hex-encoding';\nimport { getAmplifyUserAgent } from '../../../../Platform/index.mjs';\nimport '../../../../Platform/types.mjs';\nimport '../../../../BackgroundProcessManager/types.mjs';\nimport '../../../../Reachability/Reachability.mjs';\nimport '../../../../Hub/index.mjs';\nimport '../../../../utils/sessionListener/index.mjs';\nimport { parseMetadata } from '../../../../clients/serde/responseInfo.mjs';\nimport { parseJsonError, parseJsonBody } from '../../../../clients/serde/json.mjs';\nimport { composeServiceApi } from '../../../../clients/internal/composeServiceApi.mjs';\nimport { DEFAULT_SERVICE_CLIENT_API_CONFIG } from './constants.mjs';\nimport { cognitoIdentityTransferHandler } from './handler/cognitoIdentityTransferHandler.mjs';\nimport { createClientSerializer } from './serde/createClientSerializer.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createGetIdClient = (config) => composeServiceApi(cognitoIdentityTransferHandler, createClientSerializer('GetId'), getIdDeserializer, {\n    ...DEFAULT_SERVICE_CLIENT_API_CONFIG,\n    ...config,\n    userAgentValue: getAmplifyUserAgent(),\n});\nconst getIdDeserializer = async (response) => {\n    if (response.statusCode >= 300) {\n        const error = await parseJsonError(response);\n        throw error;\n    }\n    const body = await parseJsonBody(response);\n    return {\n        IdentityId: body.IdentityId,\n        $metadata: parseMetadata(response),\n    };\n};\n\nexport { createGetIdClient };\n//# sourceMappingURL=createGetIdClient.mjs.map\n","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/**\n * Return true if `value` is object-like. A value is object-like if it's not\n * `null` and has a `typeof` result of \"object\".\n */\nexport default function isObjectLike(value) {\n  return _typeof(value) == 'object' && value !== null;\n}\n","/**\n * Represents a location in a Source.\n */\n\n/**\n * Takes a Source and a UTF-8 character offset, and returns the corresponding\n * line and column as a SourceLocation.\n */\nexport function getLocation(source, position) {\n  var lineRegexp = /\\r\\n|[\\n\\r]/g;\n  var line = 1;\n  var column = position + 1;\n  var match;\n\n  while ((match = lineRegexp.exec(source.body)) && match.index < position) {\n    line += 1;\n    column = position + 1 - (match.index + match[0].length);\n  }\n\n  return {\n    line: line,\n    column: column\n  };\n}\n","import { getLocation } from \"./location.mjs\";\n/**\n * Render a helpful description of the location in the GraphQL Source document.\n */\n\nexport function printLocation(location) {\n  return printSourceLocation(location.source, getLocation(location.source, location.start));\n}\n/**\n * Render a helpful description of the location in the GraphQL Source document.\n */\n\nexport function printSourceLocation(source, sourceLocation) {\n  var firstLineColumnOffset = source.locationOffset.column - 1;\n  var body = whitespace(firstLineColumnOffset) + source.body;\n  var lineIndex = sourceLocation.line - 1;\n  var lineOffset = source.locationOffset.line - 1;\n  var lineNum = sourceLocation.line + lineOffset;\n  var columnOffset = sourceLocation.line === 1 ? firstLineColumnOffset : 0;\n  var columnNum = sourceLocation.column + columnOffset;\n  var locationStr = \"\".concat(source.name, \":\").concat(lineNum, \":\").concat(columnNum, \"\\n\");\n  var lines = body.split(/\\r\\n|[\\n\\r]/g);\n  var locationLine = lines[lineIndex]; // Special case for minified documents\n\n  if (locationLine.length > 120) {\n    var subLineIndex = Math.floor(columnNum / 80);\n    var subLineColumnNum = columnNum % 80;\n    var subLines = [];\n\n    for (var i = 0; i < locationLine.length; i += 80) {\n      subLines.push(locationLine.slice(i, i + 80));\n    }\n\n    return locationStr + printPrefixedLines([[\"\".concat(lineNum), subLines[0]]].concat(subLines.slice(1, subLineIndex + 1).map(function (subLine) {\n      return ['', subLine];\n    }), [[' ', whitespace(subLineColumnNum - 1) + '^'], ['', subLines[subLineIndex + 1]]]));\n  }\n\n  return locationStr + printPrefixedLines([// Lines specified like this: [\"prefix\", \"string\"],\n  [\"\".concat(lineNum - 1), lines[lineIndex - 1]], [\"\".concat(lineNum), locationLine], ['', whitespace(columnNum - 1) + '^'], [\"\".concat(lineNum + 1), lines[lineIndex + 1]]]);\n}\n\nfunction printPrefixedLines(lines) {\n  var existingLines = lines.filter(function (_ref) {\n    var _ = _ref[0],\n        line = _ref[1];\n    return line !== undefined;\n  });\n  var padLen = Math.max.apply(Math, existingLines.map(function (_ref2) {\n    var prefix = _ref2[0];\n    return prefix.length;\n  }));\n  return existingLines.map(function (_ref3) {\n    var prefix = _ref3[0],\n        line = _ref3[1];\n    return leftPad(padLen, prefix) + (line ? ' | ' + line : ' |');\n  }).join('\\n');\n}\n\nfunction whitespace(len) {\n  return Array(len + 1).join(' ');\n}\n\nfunction leftPad(len, str) {\n  return whitespace(len - str.length) + str;\n}\n","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport isObjectLike from \"../jsutils/isObjectLike.mjs\";\nimport { SYMBOL_TO_STRING_TAG } from \"../polyfills/symbols.mjs\";\nimport { getLocation } from \"../language/location.mjs\";\nimport { printLocation, printSourceLocation } from \"../language/printLocation.mjs\";\n/**\n * A GraphQLError describes an Error found during the parse, validate, or\n * execute phases of performing a GraphQL operation. In addition to a message\n * and stack trace, it also includes information about the locations in a\n * GraphQL document and/or execution result that correspond to the Error.\n */\n\nexport var GraphQLError = /*#__PURE__*/function (_Error) {\n  _inherits(GraphQLError, _Error);\n\n  var _super = _createSuper(GraphQLError);\n\n  /**\n   * An array of { line, column } locations within the source GraphQL document\n   * which correspond to this error.\n   *\n   * Errors during validation often contain multiple locations, for example to\n   * point out two things with the same name. Errors during execution include a\n   * single location, the field which produced the error.\n   *\n   * Enumerable, and appears in the result of JSON.stringify().\n   */\n\n  /**\n   * An array describing the JSON-path into the execution response which\n   * corresponds to this error. Only included for errors during execution.\n   *\n   * Enumerable, and appears in the result of JSON.stringify().\n   */\n\n  /**\n   * An array of GraphQL AST Nodes corresponding to this error.\n   */\n\n  /**\n   * The source GraphQL document for the first location of this error.\n   *\n   * Note that if this Error represents more than one node, the source may not\n   * represent nodes after the first node.\n   */\n\n  /**\n   * An array of character offsets within the source GraphQL document\n   * which correspond to this error.\n   */\n\n  /**\n   * The original error thrown from a field resolver during execution.\n   */\n\n  /**\n   * Extension fields to add to the formatted error.\n   */\n  function GraphQLError(message, nodes, source, positions, path, originalError, extensions) {\n    var _nodeLocations, _nodeLocations2, _nodeLocations3;\n\n    var _this;\n\n    _classCallCheck(this, GraphQLError);\n\n    _this = _super.call(this, message);\n    _this.name = 'GraphQLError';\n    _this.originalError = originalError !== null && originalError !== void 0 ? originalError : undefined; // Compute list of blame nodes.\n\n    _this.nodes = undefinedIfEmpty(Array.isArray(nodes) ? nodes : nodes ? [nodes] : undefined);\n    var nodeLocations = [];\n\n    for (var _i2 = 0, _ref3 = (_this$nodes = _this.nodes) !== null && _this$nodes !== void 0 ? _this$nodes : []; _i2 < _ref3.length; _i2++) {\n      var _this$nodes;\n\n      var _ref4 = _ref3[_i2];\n      var loc = _ref4.loc;\n\n      if (loc != null) {\n        nodeLocations.push(loc);\n      }\n    }\n\n    nodeLocations = undefinedIfEmpty(nodeLocations); // Compute locations in the source for the given nodes/positions.\n\n    _this.source = source !== null && source !== void 0 ? source : (_nodeLocations = nodeLocations) === null || _nodeLocations === void 0 ? void 0 : _nodeLocations[0].source;\n    _this.positions = positions !== null && positions !== void 0 ? positions : (_nodeLocations2 = nodeLocations) === null || _nodeLocations2 === void 0 ? void 0 : _nodeLocations2.map(function (loc) {\n      return loc.start;\n    });\n    _this.locations = positions && source ? positions.map(function (pos) {\n      return getLocation(source, pos);\n    }) : (_nodeLocations3 = nodeLocations) === null || _nodeLocations3 === void 0 ? void 0 : _nodeLocations3.map(function (loc) {\n      return getLocation(loc.source, loc.start);\n    });\n    _this.path = path !== null && path !== void 0 ? path : undefined;\n    var originalExtensions = originalError === null || originalError === void 0 ? void 0 : originalError.extensions;\n\n    if (extensions == null && isObjectLike(originalExtensions)) {\n      _this.extensions = _objectSpread({}, originalExtensions);\n    } else {\n      _this.extensions = extensions !== null && extensions !== void 0 ? extensions : {};\n    } // By being enumerable, JSON.stringify will include bellow properties in the resulting output.\n    // This ensures that the simplest possible GraphQL service adheres to the spec.\n\n\n    Object.defineProperties(_assertThisInitialized(_this), {\n      message: {\n        enumerable: true\n      },\n      locations: {\n        enumerable: _this.locations != null\n      },\n      path: {\n        enumerable: _this.path != null\n      },\n      extensions: {\n        enumerable: _this.extensions != null && Object.keys(_this.extensions).length > 0\n      },\n      name: {\n        enumerable: false\n      },\n      nodes: {\n        enumerable: false\n      },\n      source: {\n        enumerable: false\n      },\n      positions: {\n        enumerable: false\n      },\n      originalError: {\n        enumerable: false\n      }\n    }); // Include (non-enumerable) stack trace.\n\n    if (originalError !== null && originalError !== void 0 && originalError.stack) {\n      Object.defineProperty(_assertThisInitialized(_this), 'stack', {\n        value: originalError.stack,\n        writable: true,\n        configurable: true\n      });\n      return _possibleConstructorReturn(_this);\n    } // istanbul ignore next (See: 'https://github.com/graphql/graphql-js/issues/2317')\n\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(_assertThisInitialized(_this), GraphQLError);\n    } else {\n      Object.defineProperty(_assertThisInitialized(_this), 'stack', {\n        value: Error().stack,\n        writable: true,\n        configurable: true\n      });\n    }\n\n    return _this;\n  }\n\n  _createClass(GraphQLError, [{\n    key: \"toString\",\n    value: function toString() {\n      return printError(this);\n    } // FIXME: workaround to not break chai comparisons, should be remove in v16\n    // $FlowFixMe[unsupported-syntax] Flow doesn't support computed properties yet\n\n  }, {\n    key: SYMBOL_TO_STRING_TAG,\n    get: function get() {\n      return 'Object';\n    }\n  }]);\n\n  return GraphQLError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n\nfunction undefinedIfEmpty(array) {\n  return array === undefined || array.length === 0 ? undefined : array;\n}\n/**\n * Prints a GraphQLError to a string, representing useful location information\n * about the error's position in the source.\n */\n\n\nexport function printError(error) {\n  var output = error.message;\n\n  if (error.nodes) {\n    for (var _i4 = 0, _error$nodes2 = error.nodes; _i4 < _error$nodes2.length; _i4++) {\n      var node = _error$nodes2[_i4];\n\n      if (node.loc) {\n        output += '\\n\\n' + printLocation(node.loc);\n      }\n    }\n  } else if (error.source && error.locations) {\n    for (var _i6 = 0, _error$locations2 = error.locations; _i6 < _error$locations2.length; _i6++) {\n      var location = _error$locations2[_i6];\n      output += '\\n\\n' + printSourceLocation(error.source, location);\n    }\n  }\n\n  return output;\n}\n","import { GraphQLError } from \"./GraphQLError.mjs\";\n/**\n * Produces a GraphQLError representing a syntax error, containing useful\n * descriptive information about the syntax error's position in the source.\n */\n\nexport function syntaxError(source, position, description) {\n  return new GraphQLError(\"Syntax Error: \".concat(description), undefined, source, [position]);\n}\n","import invariant from \"./invariant.mjs\";\nimport nodejsCustomInspectSymbol from \"./nodejsCustomInspectSymbol.mjs\";\n/**\n * The `defineInspect()` function defines `inspect()` prototype method as alias of `toJSON`\n */\n\nexport default function defineInspect(classObject) {\n  var fn = classObject.prototype.toJSON;\n  typeof fn === 'function' || invariant(0);\n  classObject.prototype.inspect = fn; // istanbul ignore else (See: 'https://github.com/graphql/graphql-js/issues/2317')\n\n  if (nodejsCustomInspectSymbol) {\n    classObject.prototype[nodejsCustomInspectSymbol] = fn;\n  }\n}\n","export default function invariant(condition, message) {\n  var booleanCondition = Boolean(condition); // istanbul ignore else (See transformation done in './resources/inlineInvariant.js')\n\n  if (!booleanCondition) {\n    throw new Error(message != null ? message : 'Unexpected invariant triggered.');\n  }\n}\n","import defineInspect from \"../jsutils/defineInspect.mjs\";\n\n/**\n * Contains a range of UTF-8 character offsets and token references that\n * identify the region of the source from which the AST derived.\n */\nexport var Location = /*#__PURE__*/function () {\n  /**\n   * The character offset at which this Node begins.\n   */\n\n  /**\n   * The character offset at which this Node ends.\n   */\n\n  /**\n   * The Token at which this Node begins.\n   */\n\n  /**\n   * The Token at which this Node ends.\n   */\n\n  /**\n   * The Source document the AST represents.\n   */\n  function Location(startToken, endToken, source) {\n    this.start = startToken.start;\n    this.end = endToken.end;\n    this.startToken = startToken;\n    this.endToken = endToken;\n    this.source = source;\n  }\n\n  var _proto = Location.prototype;\n\n  _proto.toJSON = function toJSON() {\n    return {\n      start: this.start,\n      end: this.end\n    };\n  };\n\n  return Location;\n}(); // Print a simplified form when appearing in `inspect` and `util.inspect`.\n\ndefineInspect(Location);\n/**\n * Represents a range of characters represented by a lexical token\n * within a Source.\n */\n\nexport var Token = /*#__PURE__*/function () {\n  /**\n   * The kind of Token.\n   */\n\n  /**\n   * The character offset at which this Node begins.\n   */\n\n  /**\n   * The character offset at which this Node ends.\n   */\n\n  /**\n   * The 1-indexed line number on which this Token appears.\n   */\n\n  /**\n   * The 1-indexed column number at which this Token begins.\n   */\n\n  /**\n   * For non-punctuation tokens, represents the interpreted value of the token.\n   */\n\n  /**\n   * Tokens exist as nodes in a double-linked-list amongst all tokens\n   * including ignored tokens. <SOF> is always the first node and <EOF>\n   * the last.\n   */\n  function Token(kind, start, end, line, column, prev, value) {\n    this.kind = kind;\n    this.start = start;\n    this.end = end;\n    this.line = line;\n    this.column = column;\n    this.value = value;\n    this.prev = prev;\n    this.next = null;\n  }\n\n  var _proto2 = Token.prototype;\n\n  _proto2.toJSON = function toJSON() {\n    return {\n      kind: this.kind,\n      value: this.value,\n      line: this.line,\n      column: this.column\n    };\n  };\n\n  return Token;\n}(); // Print a simplified form when appearing in `inspect` and `util.inspect`.\n\ndefineInspect(Token);\n/**\n * @internal\n */\n\nexport function isNode(maybeNode) {\n  return maybeNode != null && typeof maybeNode.kind === 'string';\n}\n/**\n * The list of all possible AST node types.\n */\n","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/* eslint-disable flowtype/no-weak-types */\nimport nodejsCustomInspectSymbol from \"./nodejsCustomInspectSymbol.mjs\";\nvar MAX_ARRAY_LENGTH = 10;\nvar MAX_RECURSIVE_DEPTH = 2;\n/**\n * Used to print values in error messages.\n */\n\nexport default function inspect(value) {\n  return formatValue(value, []);\n}\n\nfunction formatValue(value, seenValues) {\n  switch (_typeof(value)) {\n    case 'string':\n      return JSON.stringify(value);\n\n    case 'function':\n      return value.name ? \"[function \".concat(value.name, \"]\") : '[function]';\n\n    case 'object':\n      if (value === null) {\n        return 'null';\n      }\n\n      return formatObjectValue(value, seenValues);\n\n    default:\n      return String(value);\n  }\n}\n\nfunction formatObjectValue(value, previouslySeenValues) {\n  if (previouslySeenValues.indexOf(value) !== -1) {\n    return '[Circular]';\n  }\n\n  var seenValues = [].concat(previouslySeenValues, [value]);\n  var customInspectFn = getCustomFn(value);\n\n  if (customInspectFn !== undefined) {\n    var customValue = customInspectFn.call(value); // check for infinite recursion\n\n    if (customValue !== value) {\n      return typeof customValue === 'string' ? customValue : formatValue(customValue, seenValues);\n    }\n  } else if (Array.isArray(value)) {\n    return formatArray(value, seenValues);\n  }\n\n  return formatObject(value, seenValues);\n}\n\nfunction formatObject(object, seenValues) {\n  var keys = Object.keys(object);\n\n  if (keys.length === 0) {\n    return '{}';\n  }\n\n  if (seenValues.length > MAX_RECURSIVE_DEPTH) {\n    return '[' + getObjectTag(object) + ']';\n  }\n\n  var properties = keys.map(function (key) {\n    var value = formatValue(object[key], seenValues);\n    return key + ': ' + value;\n  });\n  return '{ ' + properties.join(', ') + ' }';\n}\n\nfunction formatArray(array, seenValues) {\n  if (array.length === 0) {\n    return '[]';\n  }\n\n  if (seenValues.length > MAX_RECURSIVE_DEPTH) {\n    return '[Array]';\n  }\n\n  var len = Math.min(MAX_ARRAY_LENGTH, array.length);\n  var remaining = array.length - len;\n  var items = [];\n\n  for (var i = 0; i < len; ++i) {\n    items.push(formatValue(array[i], seenValues));\n  }\n\n  if (remaining === 1) {\n    items.push('... 1 more item');\n  } else if (remaining > 1) {\n    items.push(\"... \".concat(remaining, \" more items\"));\n  }\n\n  return '[' + items.join(', ') + ']';\n}\n\nfunction getCustomFn(object) {\n  var customInspectFn = object[String(nodejsCustomInspectSymbol)];\n\n  if (typeof customInspectFn === 'function') {\n    return customInspectFn;\n  }\n\n  if (typeof object.inspect === 'function') {\n    return object.inspect;\n  }\n}\n\nfunction getObjectTag(object) {\n  var tag = Object.prototype.toString.call(object).replace(/^\\[object /, '').replace(/]$/, '');\n\n  if (tag === 'Object' && typeof object.constructor === 'function') {\n    var name = object.constructor.name;\n\n    if (typeof name === 'string' && name !== '') {\n      return name;\n    }\n  }\n\n  return tag;\n}\n","export default function devAssert(condition, message) {\n  var booleanCondition = Boolean(condition); // istanbul ignore else (See transformation done in './resources/inlineInvariant.js')\n\n  if (!booleanCondition) {\n    throw new Error(message);\n  }\n}\n","function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { SYMBOL_TO_STRING_TAG } from \"../polyfills/symbols.mjs\";\nimport inspect from \"../jsutils/inspect.mjs\";\nimport devAssert from \"../jsutils/devAssert.mjs\";\nimport instanceOf from \"../jsutils/instanceOf.mjs\";\n\n/**\n * A representation of source input to GraphQL. The `name` and `locationOffset` parameters are\n * optional, but they are useful for clients who store GraphQL documents in source files.\n * For example, if the GraphQL input starts at line 40 in a file named `Foo.graphql`, it might\n * be useful for `name` to be `\"Foo.graphql\"` and location to be `{ line: 40, column: 1 }`.\n * The `line` and `column` properties in `locationOffset` are 1-indexed.\n */\nexport var Source = /*#__PURE__*/function () {\n  function Source(body) {\n    var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'GraphQL request';\n    var locationOffset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n      line: 1,\n      column: 1\n    };\n    typeof body === 'string' || devAssert(0, \"Body must be a string. Received: \".concat(inspect(body), \".\"));\n    this.body = body;\n    this.name = name;\n    this.locationOffset = locationOffset;\n    this.locationOffset.line > 0 || devAssert(0, 'line in locationOffset is 1-indexed and must be positive.');\n    this.locationOffset.column > 0 || devAssert(0, 'column in locationOffset is 1-indexed and must be positive.');\n  } // $FlowFixMe[unsupported-syntax] Flow doesn't support computed properties yet\n\n\n  _createClass(Source, [{\n    key: SYMBOL_TO_STRING_TAG,\n    get: function get() {\n      return 'Source';\n    }\n  }]);\n\n  return Source;\n}();\n/**\n * Test if the given value is a Source object.\n *\n * @internal\n */\n\n// eslint-disable-next-line no-redeclare\nexport function isSource(source) {\n  return instanceOf(source, Source);\n}\n","/**\n * Produces the value of a block string from its parsed raw value, similar to\n * CoffeeScript's block string, Python's docstring trim or Ruby's strip_heredoc.\n *\n * This implements the GraphQL spec's BlockStringValue() static algorithm.\n *\n * @internal\n */\nexport function dedentBlockStringValue(rawString) {\n  // Expand a block string's raw value into independent lines.\n  var lines = rawString.split(/\\r\\n|[\\n\\r]/g); // Remove common indentation from all lines but first.\n\n  var commonIndent = getBlockStringIndentation(rawString);\n\n  if (commonIndent !== 0) {\n    for (var i = 1; i < lines.length; i++) {\n      lines[i] = lines[i].slice(commonIndent);\n    }\n  } // Remove leading and trailing blank lines.\n\n\n  var startLine = 0;\n\n  while (startLine < lines.length && isBlank(lines[startLine])) {\n    ++startLine;\n  }\n\n  var endLine = lines.length;\n\n  while (endLine > startLine && isBlank(lines[endLine - 1])) {\n    --endLine;\n  } // Return a string of the lines joined with U+000A.\n\n\n  return lines.slice(startLine, endLine).join('\\n');\n}\n\nfunction isBlank(str) {\n  for (var i = 0; i < str.length; ++i) {\n    if (str[i] !== ' ' && str[i] !== '\\t') {\n      return false;\n    }\n  }\n\n  return true;\n}\n/**\n * @internal\n */\n\n\nexport function getBlockStringIndentation(value) {\n  var _commonIndent;\n\n  var isFirstLine = true;\n  var isEmptyLine = true;\n  var indent = 0;\n  var commonIndent = null;\n\n  for (var i = 0; i < value.length; ++i) {\n    switch (value.charCodeAt(i)) {\n      case 13:\n        //  \\r\n        if (value.charCodeAt(i + 1) === 10) {\n          ++i; // skip \\r\\n as one symbol\n        }\n\n      // falls through\n\n      case 10:\n        //  \\n\n        isFirstLine = false;\n        isEmptyLine = true;\n        indent = 0;\n        break;\n\n      case 9: //   \\t\n\n      case 32:\n        //  <space>\n        ++indent;\n        break;\n\n      default:\n        if (isEmptyLine && !isFirstLine && (commonIndent === null || indent < commonIndent)) {\n          commonIndent = indent;\n        }\n\n        isEmptyLine = false;\n    }\n  }\n\n  return (_commonIndent = commonIndent) !== null && _commonIndent !== void 0 ? _commonIndent : 0;\n}\n/**\n * Print a block string in the indented block form by adding a leading and\n * trailing blank line. However, if a block string starts with whitespace and is\n * a single-line, adding a leading blank line would strip that whitespace.\n *\n * @internal\n */\n\nexport function printBlockString(value) {\n  var indentation = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var preferMultipleLines = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var isSingleLine = value.indexOf('\\n') === -1;\n  var hasLeadingSpace = value[0] === ' ' || value[0] === '\\t';\n  var hasTrailingQuote = value[value.length - 1] === '\"';\n  var hasTrailingSlash = value[value.length - 1] === '\\\\';\n  var printAsMultipleLines = !isSingleLine || hasTrailingQuote || hasTrailingSlash || preferMultipleLines;\n  var result = ''; // Format a multi-line block quote to account for leading space.\n\n  if (printAsMultipleLines && !(isSingleLine && hasLeadingSpace)) {\n    result += '\\n' + indentation;\n  }\n\n  result += indentation ? value.replace(/\\n/g, '\\n' + indentation) : value;\n\n  if (printAsMultipleLines) {\n    result += '\\n';\n  }\n\n  return '\"\"\"' + result.replace(/\"\"\"/g, '\\\\\"\"\"') + '\"\"\"';\n}\n","import { syntaxError } from \"../error/syntaxError.mjs\";\nimport { Token } from \"./ast.mjs\";\nimport { TokenKind } from \"./tokenKind.mjs\";\nimport { dedentBlockStringValue } from \"./blockString.mjs\";\n/**\n * Given a Source object, creates a Lexer for that source.\n * A Lexer is a stateful stream generator in that every time\n * it is advanced, it returns the next token in the Source. Assuming the\n * source lexes, the final Token emitted by the lexer will be of kind\n * EOF, after which the lexer will repeatedly return the same EOF token\n * whenever called.\n */\n\nexport var Lexer = /*#__PURE__*/function () {\n  /**\n   * The previously focused non-ignored token.\n   */\n\n  /**\n   * The currently focused non-ignored token.\n   */\n\n  /**\n   * The (1-indexed) line containing the current token.\n   */\n\n  /**\n   * The character offset at which the current line begins.\n   */\n  function Lexer(source) {\n    var startOfFileToken = new Token(TokenKind.SOF, 0, 0, 0, 0, null);\n    this.source = source;\n    this.lastToken = startOfFileToken;\n    this.token = startOfFileToken;\n    this.line = 1;\n    this.lineStart = 0;\n  }\n  /**\n   * Advances the token stream to the next non-ignored token.\n   */\n\n\n  var _proto = Lexer.prototype;\n\n  _proto.advance = function advance() {\n    this.lastToken = this.token;\n    var token = this.token = this.lookahead();\n    return token;\n  }\n  /**\n   * Looks ahead and returns the next non-ignored token, but does not change\n   * the state of Lexer.\n   */\n  ;\n\n  _proto.lookahead = function lookahead() {\n    var token = this.token;\n\n    if (token.kind !== TokenKind.EOF) {\n      do {\n        var _token$next;\n\n        // Note: next is only mutable during parsing, so we cast to allow this.\n        token = (_token$next = token.next) !== null && _token$next !== void 0 ? _token$next : token.next = readToken(this, token);\n      } while (token.kind === TokenKind.COMMENT);\n    }\n\n    return token;\n  };\n\n  return Lexer;\n}();\n/**\n * @internal\n */\n\nexport function isPunctuatorTokenKind(kind) {\n  return kind === TokenKind.BANG || kind === TokenKind.DOLLAR || kind === TokenKind.AMP || kind === TokenKind.PAREN_L || kind === TokenKind.PAREN_R || kind === TokenKind.SPREAD || kind === TokenKind.COLON || kind === TokenKind.EQUALS || kind === TokenKind.AT || kind === TokenKind.BRACKET_L || kind === TokenKind.BRACKET_R || kind === TokenKind.BRACE_L || kind === TokenKind.PIPE || kind === TokenKind.BRACE_R;\n}\n\nfunction printCharCode(code) {\n  return (// NaN/undefined represents access beyond the end of the file.\n    isNaN(code) ? TokenKind.EOF : // Trust JSON for ASCII.\n    code < 0x007f ? JSON.stringify(String.fromCharCode(code)) : // Otherwise print the escaped form.\n    \"\\\"\\\\u\".concat(('00' + code.toString(16).toUpperCase()).slice(-4), \"\\\"\")\n  );\n}\n/**\n * Gets the next token from the source starting at the given position.\n *\n * This skips over whitespace until it finds the next lexable token, then lexes\n * punctuators immediately or calls the appropriate helper function for more\n * complicated tokens.\n */\n\n\nfunction readToken(lexer, prev) {\n  var source = lexer.source;\n  var body = source.body;\n  var bodyLength = body.length;\n  var pos = prev.end;\n\n  while (pos < bodyLength) {\n    var code = body.charCodeAt(pos);\n    var _line = lexer.line;\n\n    var _col = 1 + pos - lexer.lineStart; // SourceCharacter\n\n\n    switch (code) {\n      case 0xfeff: // <BOM>\n\n      case 9: //   \\t\n\n      case 32: //  <space>\n\n      case 44:\n        //  ,\n        ++pos;\n        continue;\n\n      case 10:\n        //  \\n\n        ++pos;\n        ++lexer.line;\n        lexer.lineStart = pos;\n        continue;\n\n      case 13:\n        //  \\r\n        if (body.charCodeAt(pos + 1) === 10) {\n          pos += 2;\n        } else {\n          ++pos;\n        }\n\n        ++lexer.line;\n        lexer.lineStart = pos;\n        continue;\n\n      case 33:\n        //  !\n        return new Token(TokenKind.BANG, pos, pos + 1, _line, _col, prev);\n\n      case 35:\n        //  #\n        return readComment(source, pos, _line, _col, prev);\n\n      case 36:\n        //  $\n        return new Token(TokenKind.DOLLAR, pos, pos + 1, _line, _col, prev);\n\n      case 38:\n        //  &\n        return new Token(TokenKind.AMP, pos, pos + 1, _line, _col, prev);\n\n      case 40:\n        //  (\n        return new Token(TokenKind.PAREN_L, pos, pos + 1, _line, _col, prev);\n\n      case 41:\n        //  )\n        return new Token(TokenKind.PAREN_R, pos, pos + 1, _line, _col, prev);\n\n      case 46:\n        //  .\n        if (body.charCodeAt(pos + 1) === 46 && body.charCodeAt(pos + 2) === 46) {\n          return new Token(TokenKind.SPREAD, pos, pos + 3, _line, _col, prev);\n        }\n\n        break;\n\n      case 58:\n        //  :\n        return new Token(TokenKind.COLON, pos, pos + 1, _line, _col, prev);\n\n      case 61:\n        //  =\n        return new Token(TokenKind.EQUALS, pos, pos + 1, _line, _col, prev);\n\n      case 64:\n        //  @\n        return new Token(TokenKind.AT, pos, pos + 1, _line, _col, prev);\n\n      case 91:\n        //  [\n        return new Token(TokenKind.BRACKET_L, pos, pos + 1, _line, _col, prev);\n\n      case 93:\n        //  ]\n        return new Token(TokenKind.BRACKET_R, pos, pos + 1, _line, _col, prev);\n\n      case 123:\n        // {\n        return new Token(TokenKind.BRACE_L, pos, pos + 1, _line, _col, prev);\n\n      case 124:\n        // |\n        return new Token(TokenKind.PIPE, pos, pos + 1, _line, _col, prev);\n\n      case 125:\n        // }\n        return new Token(TokenKind.BRACE_R, pos, pos + 1, _line, _col, prev);\n\n      case 34:\n        //  \"\n        if (body.charCodeAt(pos + 1) === 34 && body.charCodeAt(pos + 2) === 34) {\n          return readBlockString(source, pos, _line, _col, prev, lexer);\n        }\n\n        return readString(source, pos, _line, _col, prev);\n\n      case 45: //  -\n\n      case 48: //  0\n\n      case 49: //  1\n\n      case 50: //  2\n\n      case 51: //  3\n\n      case 52: //  4\n\n      case 53: //  5\n\n      case 54: //  6\n\n      case 55: //  7\n\n      case 56: //  8\n\n      case 57:\n        //  9\n        return readNumber(source, pos, code, _line, _col, prev);\n\n      case 65: //  A\n\n      case 66: //  B\n\n      case 67: //  C\n\n      case 68: //  D\n\n      case 69: //  E\n\n      case 70: //  F\n\n      case 71: //  G\n\n      case 72: //  H\n\n      case 73: //  I\n\n      case 74: //  J\n\n      case 75: //  K\n\n      case 76: //  L\n\n      case 77: //  M\n\n      case 78: //  N\n\n      case 79: //  O\n\n      case 80: //  P\n\n      case 81: //  Q\n\n      case 82: //  R\n\n      case 83: //  S\n\n      case 84: //  T\n\n      case 85: //  U\n\n      case 86: //  V\n\n      case 87: //  W\n\n      case 88: //  X\n\n      case 89: //  Y\n\n      case 90: //  Z\n\n      case 95: //  _\n\n      case 97: //  a\n\n      case 98: //  b\n\n      case 99: //  c\n\n      case 100: // d\n\n      case 101: // e\n\n      case 102: // f\n\n      case 103: // g\n\n      case 104: // h\n\n      case 105: // i\n\n      case 106: // j\n\n      case 107: // k\n\n      case 108: // l\n\n      case 109: // m\n\n      case 110: // n\n\n      case 111: // o\n\n      case 112: // p\n\n      case 113: // q\n\n      case 114: // r\n\n      case 115: // s\n\n      case 116: // t\n\n      case 117: // u\n\n      case 118: // v\n\n      case 119: // w\n\n      case 120: // x\n\n      case 121: // y\n\n      case 122:\n        // z\n        return readName(source, pos, _line, _col, prev);\n    }\n\n    throw syntaxError(source, pos, unexpectedCharacterMessage(code));\n  }\n\n  var line = lexer.line;\n  var col = 1 + pos - lexer.lineStart;\n  return new Token(TokenKind.EOF, bodyLength, bodyLength, line, col, prev);\n}\n/**\n * Report a message that an unexpected character was encountered.\n */\n\n\nfunction unexpectedCharacterMessage(code) {\n  if (code < 0x0020 && code !== 0x0009 && code !== 0x000a && code !== 0x000d) {\n    return \"Cannot contain the invalid character \".concat(printCharCode(code), \".\");\n  }\n\n  if (code === 39) {\n    // '\n    return 'Unexpected single quote character (\\'), did you mean to use a double quote (\")?';\n  }\n\n  return \"Cannot parse the unexpected character \".concat(printCharCode(code), \".\");\n}\n/**\n * Reads a comment token from the source file.\n *\n * #[\\u0009\\u0020-\\uFFFF]*\n */\n\n\nfunction readComment(source, start, line, col, prev) {\n  var body = source.body;\n  var code;\n  var position = start;\n\n  do {\n    code = body.charCodeAt(++position);\n  } while (!isNaN(code) && ( // SourceCharacter but not LineTerminator\n  code > 0x001f || code === 0x0009));\n\n  return new Token(TokenKind.COMMENT, start, position, line, col, prev, body.slice(start + 1, position));\n}\n/**\n * Reads a number token from the source file, either a float\n * or an int depending on whether a decimal point appears.\n *\n * Int:   -?(0|[1-9][0-9]*)\n * Float: -?(0|[1-9][0-9]*)(\\.[0-9]+)?((E|e)(+|-)?[0-9]+)?\n */\n\n\nfunction readNumber(source, start, firstCode, line, col, prev) {\n  var body = source.body;\n  var code = firstCode;\n  var position = start;\n  var isFloat = false;\n\n  if (code === 45) {\n    // -\n    code = body.charCodeAt(++position);\n  }\n\n  if (code === 48) {\n    // 0\n    code = body.charCodeAt(++position);\n\n    if (code >= 48 && code <= 57) {\n      throw syntaxError(source, position, \"Invalid number, unexpected digit after 0: \".concat(printCharCode(code), \".\"));\n    }\n  } else {\n    position = readDigits(source, position, code);\n    code = body.charCodeAt(position);\n  }\n\n  if (code === 46) {\n    // .\n    isFloat = true;\n    code = body.charCodeAt(++position);\n    position = readDigits(source, position, code);\n    code = body.charCodeAt(position);\n  }\n\n  if (code === 69 || code === 101) {\n    // E e\n    isFloat = true;\n    code = body.charCodeAt(++position);\n\n    if (code === 43 || code === 45) {\n      // + -\n      code = body.charCodeAt(++position);\n    }\n\n    position = readDigits(source, position, code);\n    code = body.charCodeAt(position);\n  } // Numbers cannot be followed by . or NameStart\n\n\n  if (code === 46 || isNameStart(code)) {\n    throw syntaxError(source, position, \"Invalid number, expected digit but got: \".concat(printCharCode(code), \".\"));\n  }\n\n  return new Token(isFloat ? TokenKind.FLOAT : TokenKind.INT, start, position, line, col, prev, body.slice(start, position));\n}\n/**\n * Returns the new position in the source after reading digits.\n */\n\n\nfunction readDigits(source, start, firstCode) {\n  var body = source.body;\n  var position = start;\n  var code = firstCode;\n\n  if (code >= 48 && code <= 57) {\n    // 0 - 9\n    do {\n      code = body.charCodeAt(++position);\n    } while (code >= 48 && code <= 57); // 0 - 9\n\n\n    return position;\n  }\n\n  throw syntaxError(source, position, \"Invalid number, expected digit but got: \".concat(printCharCode(code), \".\"));\n}\n/**\n * Reads a string token from the source file.\n *\n * \"([^\"\\\\\\u000A\\u000D]|(\\\\(u[0-9a-fA-F]{4}|[\"\\\\/bfnrt])))*\"\n */\n\n\nfunction readString(source, start, line, col, prev) {\n  var body = source.body;\n  var position = start + 1;\n  var chunkStart = position;\n  var code = 0;\n  var value = '';\n\n  while (position < body.length && !isNaN(code = body.charCodeAt(position)) && // not LineTerminator\n  code !== 0x000a && code !== 0x000d) {\n    // Closing Quote (\")\n    if (code === 34) {\n      value += body.slice(chunkStart, position);\n      return new Token(TokenKind.STRING, start, position + 1, line, col, prev, value);\n    } // SourceCharacter\n\n\n    if (code < 0x0020 && code !== 0x0009) {\n      throw syntaxError(source, position, \"Invalid character within String: \".concat(printCharCode(code), \".\"));\n    }\n\n    ++position;\n\n    if (code === 92) {\n      // \\\n      value += body.slice(chunkStart, position - 1);\n      code = body.charCodeAt(position);\n\n      switch (code) {\n        case 34:\n          value += '\"';\n          break;\n\n        case 47:\n          value += '/';\n          break;\n\n        case 92:\n          value += '\\\\';\n          break;\n\n        case 98:\n          value += '\\b';\n          break;\n\n        case 102:\n          value += '\\f';\n          break;\n\n        case 110:\n          value += '\\n';\n          break;\n\n        case 114:\n          value += '\\r';\n          break;\n\n        case 116:\n          value += '\\t';\n          break;\n\n        case 117:\n          {\n            // uXXXX\n            var charCode = uniCharCode(body.charCodeAt(position + 1), body.charCodeAt(position + 2), body.charCodeAt(position + 3), body.charCodeAt(position + 4));\n\n            if (charCode < 0) {\n              var invalidSequence = body.slice(position + 1, position + 5);\n              throw syntaxError(source, position, \"Invalid character escape sequence: \\\\u\".concat(invalidSequence, \".\"));\n            }\n\n            value += String.fromCharCode(charCode);\n            position += 4;\n            break;\n          }\n\n        default:\n          throw syntaxError(source, position, \"Invalid character escape sequence: \\\\\".concat(String.fromCharCode(code), \".\"));\n      }\n\n      ++position;\n      chunkStart = position;\n    }\n  }\n\n  throw syntaxError(source, position, 'Unterminated string.');\n}\n/**\n * Reads a block string token from the source file.\n *\n * \"\"\"(\"?\"?(\\\\\"\"\"|\\\\(?!=\"\"\")|[^\"\\\\]))*\"\"\"\n */\n\n\nfunction readBlockString(source, start, line, col, prev, lexer) {\n  var body = source.body;\n  var position = start + 3;\n  var chunkStart = position;\n  var code = 0;\n  var rawValue = '';\n\n  while (position < body.length && !isNaN(code = body.charCodeAt(position))) {\n    // Closing Triple-Quote (\"\"\")\n    if (code === 34 && body.charCodeAt(position + 1) === 34 && body.charCodeAt(position + 2) === 34) {\n      rawValue += body.slice(chunkStart, position);\n      return new Token(TokenKind.BLOCK_STRING, start, position + 3, line, col, prev, dedentBlockStringValue(rawValue));\n    } // SourceCharacter\n\n\n    if (code < 0x0020 && code !== 0x0009 && code !== 0x000a && code !== 0x000d) {\n      throw syntaxError(source, position, \"Invalid character within String: \".concat(printCharCode(code), \".\"));\n    }\n\n    if (code === 10) {\n      // new line\n      ++position;\n      ++lexer.line;\n      lexer.lineStart = position;\n    } else if (code === 13) {\n      // carriage return\n      if (body.charCodeAt(position + 1) === 10) {\n        position += 2;\n      } else {\n        ++position;\n      }\n\n      ++lexer.line;\n      lexer.lineStart = position;\n    } else if ( // Escape Triple-Quote (\\\"\"\")\n    code === 92 && body.charCodeAt(position + 1) === 34 && body.charCodeAt(position + 2) === 34 && body.charCodeAt(position + 3) === 34) {\n      rawValue += body.slice(chunkStart, position) + '\"\"\"';\n      position += 4;\n      chunkStart = position;\n    } else {\n      ++position;\n    }\n  }\n\n  throw syntaxError(source, position, 'Unterminated string.');\n}\n/**\n * Converts four hexadecimal chars to the integer that the\n * string represents. For example, uniCharCode('0','0','0','f')\n * will return 15, and uniCharCode('0','0','f','f') returns 255.\n *\n * Returns a negative number on error, if a char was invalid.\n *\n * This is implemented by noting that char2hex() returns -1 on error,\n * which means the result of ORing the char2hex() will also be negative.\n */\n\n\nfunction uniCharCode(a, b, c, d) {\n  return char2hex(a) << 12 | char2hex(b) << 8 | char2hex(c) << 4 | char2hex(d);\n}\n/**\n * Converts a hex character to its integer value.\n * '0' becomes 0, '9' becomes 9\n * 'A' becomes 10, 'F' becomes 15\n * 'a' becomes 10, 'f' becomes 15\n *\n * Returns -1 on error.\n */\n\n\nfunction char2hex(a) {\n  return a >= 48 && a <= 57 ? a - 48 // 0-9\n  : a >= 65 && a <= 70 ? a - 55 // A-F\n  : a >= 97 && a <= 102 ? a - 87 // a-f\n  : -1;\n}\n/**\n * Reads an alphanumeric + underscore name from the source.\n *\n * [_A-Za-z][_0-9A-Za-z]*\n */\n\n\nfunction readName(source, start, line, col, prev) {\n  var body = source.body;\n  var bodyLength = body.length;\n  var position = start + 1;\n  var code = 0;\n\n  while (position !== bodyLength && !isNaN(code = body.charCodeAt(position)) && (code === 95 || // _\n  code >= 48 && code <= 57 || // 0-9\n  code >= 65 && code <= 90 || // A-Z\n  code >= 97 && code <= 122) // a-z\n  ) {\n    ++position;\n  }\n\n  return new Token(TokenKind.NAME, start, position, line, col, prev, body.slice(start, position));\n} // _ A-Z a-z\n\n\nfunction isNameStart(code) {\n  return code === 95 || code >= 65 && code <= 90 || code >= 97 && code <= 122;\n}\n","import { syntaxError } from \"../error/syntaxError.mjs\";\nimport { Kind } from \"./kinds.mjs\";\nimport { Location } from \"./ast.mjs\";\nimport { TokenKind } from \"./tokenKind.mjs\";\nimport { Source, isSource } from \"./source.mjs\";\nimport { DirectiveLocation } from \"./directiveLocation.mjs\";\nimport { Lexer, isPunctuatorTokenKind } from \"./lexer.mjs\";\n/**\n * Configuration options to control parser behavior\n */\n\n/**\n * Given a GraphQL source, parses it into a Document.\n * Throws GraphQLError if a syntax error is encountered.\n */\nexport function parse(source, options) {\n  var parser = new Parser(source, options);\n  return parser.parseDocument();\n}\n/**\n * Given a string containing a GraphQL value (ex. `[42]`), parse the AST for\n * that value.\n * Throws GraphQLError if a syntax error is encountered.\n *\n * This is useful within tools that operate upon GraphQL Values directly and\n * in isolation of complete GraphQL documents.\n *\n * Consider providing the results to the utility function: valueFromAST().\n */\n\nexport function parseValue(source, options) {\n  var parser = new Parser(source, options);\n  parser.expectToken(TokenKind.SOF);\n  var value = parser.parseValueLiteral(false);\n  parser.expectToken(TokenKind.EOF);\n  return value;\n}\n/**\n * Given a string containing a GraphQL Type (ex. `[Int!]`), parse the AST for\n * that type.\n * Throws GraphQLError if a syntax error is encountered.\n *\n * This is useful within tools that operate upon GraphQL Types directly and\n * in isolation of complete GraphQL documents.\n *\n * Consider providing the results to the utility function: typeFromAST().\n */\n\nexport function parseType(source, options) {\n  var parser = new Parser(source, options);\n  parser.expectToken(TokenKind.SOF);\n  var type = parser.parseTypeReference();\n  parser.expectToken(TokenKind.EOF);\n  return type;\n}\n/**\n * This class is exported only to assist people in implementing their own parsers\n * without duplicating too much code and should be used only as last resort for cases\n * such as experimental syntax or if certain features could not be contributed upstream.\n *\n * It is still part of the internal API and is versioned, so any changes to it are never\n * considered breaking changes. If you still need to support multiple versions of the\n * library, please use the `versionInfo` variable for version detection.\n *\n * @internal\n */\n\nexport var Parser = /*#__PURE__*/function () {\n  function Parser(source, options) {\n    var sourceObj = isSource(source) ? source : new Source(source);\n    this._lexer = new Lexer(sourceObj);\n    this._options = options;\n  }\n  /**\n   * Converts a name lex token into a name parse node.\n   */\n\n\n  var _proto = Parser.prototype;\n\n  _proto.parseName = function parseName() {\n    var token = this.expectToken(TokenKind.NAME);\n    return {\n      kind: Kind.NAME,\n      value: token.value,\n      loc: this.loc(token)\n    };\n  } // Implements the parsing rules in the Document section.\n\n  /**\n   * Document : Definition+\n   */\n  ;\n\n  _proto.parseDocument = function parseDocument() {\n    var start = this._lexer.token;\n    return {\n      kind: Kind.DOCUMENT,\n      definitions: this.many(TokenKind.SOF, this.parseDefinition, TokenKind.EOF),\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * Definition :\n   *   - ExecutableDefinition\n   *   - TypeSystemDefinition\n   *   - TypeSystemExtension\n   *\n   * ExecutableDefinition :\n   *   - OperationDefinition\n   *   - FragmentDefinition\n   */\n  ;\n\n  _proto.parseDefinition = function parseDefinition() {\n    if (this.peek(TokenKind.NAME)) {\n      switch (this._lexer.token.value) {\n        case 'query':\n        case 'mutation':\n        case 'subscription':\n          return this.parseOperationDefinition();\n\n        case 'fragment':\n          return this.parseFragmentDefinition();\n\n        case 'schema':\n        case 'scalar':\n        case 'type':\n        case 'interface':\n        case 'union':\n        case 'enum':\n        case 'input':\n        case 'directive':\n          return this.parseTypeSystemDefinition();\n\n        case 'extend':\n          return this.parseTypeSystemExtension();\n      }\n    } else if (this.peek(TokenKind.BRACE_L)) {\n      return this.parseOperationDefinition();\n    } else if (this.peekDescription()) {\n      return this.parseTypeSystemDefinition();\n    }\n\n    throw this.unexpected();\n  } // Implements the parsing rules in the Operations section.\n\n  /**\n   * OperationDefinition :\n   *  - SelectionSet\n   *  - OperationType Name? VariableDefinitions? Directives? SelectionSet\n   */\n  ;\n\n  _proto.parseOperationDefinition = function parseOperationDefinition() {\n    var start = this._lexer.token;\n\n    if (this.peek(TokenKind.BRACE_L)) {\n      return {\n        kind: Kind.OPERATION_DEFINITION,\n        operation: 'query',\n        name: undefined,\n        variableDefinitions: [],\n        directives: [],\n        selectionSet: this.parseSelectionSet(),\n        loc: this.loc(start)\n      };\n    }\n\n    var operation = this.parseOperationType();\n    var name;\n\n    if (this.peek(TokenKind.NAME)) {\n      name = this.parseName();\n    }\n\n    return {\n      kind: Kind.OPERATION_DEFINITION,\n      operation: operation,\n      name: name,\n      variableDefinitions: this.parseVariableDefinitions(),\n      directives: this.parseDirectives(false),\n      selectionSet: this.parseSelectionSet(),\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * OperationType : one of query mutation subscription\n   */\n  ;\n\n  _proto.parseOperationType = function parseOperationType() {\n    var operationToken = this.expectToken(TokenKind.NAME);\n\n    switch (operationToken.value) {\n      case 'query':\n        return 'query';\n\n      case 'mutation':\n        return 'mutation';\n\n      case 'subscription':\n        return 'subscription';\n    }\n\n    throw this.unexpected(operationToken);\n  }\n  /**\n   * VariableDefinitions : ( VariableDefinition+ )\n   */\n  ;\n\n  _proto.parseVariableDefinitions = function parseVariableDefinitions() {\n    return this.optionalMany(TokenKind.PAREN_L, this.parseVariableDefinition, TokenKind.PAREN_R);\n  }\n  /**\n   * VariableDefinition : Variable : Type DefaultValue? Directives[Const]?\n   */\n  ;\n\n  _proto.parseVariableDefinition = function parseVariableDefinition() {\n    var start = this._lexer.token;\n    return {\n      kind: Kind.VARIABLE_DEFINITION,\n      variable: this.parseVariable(),\n      type: (this.expectToken(TokenKind.COLON), this.parseTypeReference()),\n      defaultValue: this.expectOptionalToken(TokenKind.EQUALS) ? this.parseValueLiteral(true) : undefined,\n      directives: this.parseDirectives(true),\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * Variable : $ Name\n   */\n  ;\n\n  _proto.parseVariable = function parseVariable() {\n    var start = this._lexer.token;\n    this.expectToken(TokenKind.DOLLAR);\n    return {\n      kind: Kind.VARIABLE,\n      name: this.parseName(),\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * SelectionSet : { Selection+ }\n   */\n  ;\n\n  _proto.parseSelectionSet = function parseSelectionSet() {\n    var start = this._lexer.token;\n    return {\n      kind: Kind.SELECTION_SET,\n      selections: this.many(TokenKind.BRACE_L, this.parseSelection, TokenKind.BRACE_R),\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * Selection :\n   *   - Field\n   *   - FragmentSpread\n   *   - InlineFragment\n   */\n  ;\n\n  _proto.parseSelection = function parseSelection() {\n    return this.peek(TokenKind.SPREAD) ? this.parseFragment() : this.parseField();\n  }\n  /**\n   * Field : Alias? Name Arguments? Directives? SelectionSet?\n   *\n   * Alias : Name :\n   */\n  ;\n\n  _proto.parseField = function parseField() {\n    var start = this._lexer.token;\n    var nameOrAlias = this.parseName();\n    var alias;\n    var name;\n\n    if (this.expectOptionalToken(TokenKind.COLON)) {\n      alias = nameOrAlias;\n      name = this.parseName();\n    } else {\n      name = nameOrAlias;\n    }\n\n    return {\n      kind: Kind.FIELD,\n      alias: alias,\n      name: name,\n      arguments: this.parseArguments(false),\n      directives: this.parseDirectives(false),\n      selectionSet: this.peek(TokenKind.BRACE_L) ? this.parseSelectionSet() : undefined,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * Arguments[Const] : ( Argument[?Const]+ )\n   */\n  ;\n\n  _proto.parseArguments = function parseArguments(isConst) {\n    var item = isConst ? this.parseConstArgument : this.parseArgument;\n    return this.optionalMany(TokenKind.PAREN_L, item, TokenKind.PAREN_R);\n  }\n  /**\n   * Argument[Const] : Name : Value[?Const]\n   */\n  ;\n\n  _proto.parseArgument = function parseArgument() {\n    var start = this._lexer.token;\n    var name = this.parseName();\n    this.expectToken(TokenKind.COLON);\n    return {\n      kind: Kind.ARGUMENT,\n      name: name,\n      value: this.parseValueLiteral(false),\n      loc: this.loc(start)\n    };\n  };\n\n  _proto.parseConstArgument = function parseConstArgument() {\n    var start = this._lexer.token;\n    return {\n      kind: Kind.ARGUMENT,\n      name: this.parseName(),\n      value: (this.expectToken(TokenKind.COLON), this.parseValueLiteral(true)),\n      loc: this.loc(start)\n    };\n  } // Implements the parsing rules in the Fragments section.\n\n  /**\n   * Corresponds to both FragmentSpread and InlineFragment in the spec.\n   *\n   * FragmentSpread : ... FragmentName Directives?\n   *\n   * InlineFragment : ... TypeCondition? Directives? SelectionSet\n   */\n  ;\n\n  _proto.parseFragment = function parseFragment() {\n    var start = this._lexer.token;\n    this.expectToken(TokenKind.SPREAD);\n    var hasTypeCondition = this.expectOptionalKeyword('on');\n\n    if (!hasTypeCondition && this.peek(TokenKind.NAME)) {\n      return {\n        kind: Kind.FRAGMENT_SPREAD,\n        name: this.parseFragmentName(),\n        directives: this.parseDirectives(false),\n        loc: this.loc(start)\n      };\n    }\n\n    return {\n      kind: Kind.INLINE_FRAGMENT,\n      typeCondition: hasTypeCondition ? this.parseNamedType() : undefined,\n      directives: this.parseDirectives(false),\n      selectionSet: this.parseSelectionSet(),\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * FragmentDefinition :\n   *   - fragment FragmentName on TypeCondition Directives? SelectionSet\n   *\n   * TypeCondition : NamedType\n   */\n  ;\n\n  _proto.parseFragmentDefinition = function parseFragmentDefinition() {\n    var _this$_options;\n\n    var start = this._lexer.token;\n    this.expectKeyword('fragment'); // Experimental support for defining variables within fragments changes\n    // the grammar of FragmentDefinition:\n    //   - fragment FragmentName VariableDefinitions? on TypeCondition Directives? SelectionSet\n\n    if (((_this$_options = this._options) === null || _this$_options === void 0 ? void 0 : _this$_options.experimentalFragmentVariables) === true) {\n      return {\n        kind: Kind.FRAGMENT_DEFINITION,\n        name: this.parseFragmentName(),\n        variableDefinitions: this.parseVariableDefinitions(),\n        typeCondition: (this.expectKeyword('on'), this.parseNamedType()),\n        directives: this.parseDirectives(false),\n        selectionSet: this.parseSelectionSet(),\n        loc: this.loc(start)\n      };\n    }\n\n    return {\n      kind: Kind.FRAGMENT_DEFINITION,\n      name: this.parseFragmentName(),\n      typeCondition: (this.expectKeyword('on'), this.parseNamedType()),\n      directives: this.parseDirectives(false),\n      selectionSet: this.parseSelectionSet(),\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * FragmentName : Name but not `on`\n   */\n  ;\n\n  _proto.parseFragmentName = function parseFragmentName() {\n    if (this._lexer.token.value === 'on') {\n      throw this.unexpected();\n    }\n\n    return this.parseName();\n  } // Implements the parsing rules in the Values section.\n\n  /**\n   * Value[Const] :\n   *   - [~Const] Variable\n   *   - IntValue\n   *   - FloatValue\n   *   - StringValue\n   *   - BooleanValue\n   *   - NullValue\n   *   - EnumValue\n   *   - ListValue[?Const]\n   *   - ObjectValue[?Const]\n   *\n   * BooleanValue : one of `true` `false`\n   *\n   * NullValue : `null`\n   *\n   * EnumValue : Name but not `true`, `false` or `null`\n   */\n  ;\n\n  _proto.parseValueLiteral = function parseValueLiteral(isConst) {\n    var token = this._lexer.token;\n\n    switch (token.kind) {\n      case TokenKind.BRACKET_L:\n        return this.parseList(isConst);\n\n      case TokenKind.BRACE_L:\n        return this.parseObject(isConst);\n\n      case TokenKind.INT:\n        this._lexer.advance();\n\n        return {\n          kind: Kind.INT,\n          value: token.value,\n          loc: this.loc(token)\n        };\n\n      case TokenKind.FLOAT:\n        this._lexer.advance();\n\n        return {\n          kind: Kind.FLOAT,\n          value: token.value,\n          loc: this.loc(token)\n        };\n\n      case TokenKind.STRING:\n      case TokenKind.BLOCK_STRING:\n        return this.parseStringLiteral();\n\n      case TokenKind.NAME:\n        this._lexer.advance();\n\n        switch (token.value) {\n          case 'true':\n            return {\n              kind: Kind.BOOLEAN,\n              value: true,\n              loc: this.loc(token)\n            };\n\n          case 'false':\n            return {\n              kind: Kind.BOOLEAN,\n              value: false,\n              loc: this.loc(token)\n            };\n\n          case 'null':\n            return {\n              kind: Kind.NULL,\n              loc: this.loc(token)\n            };\n\n          default:\n            return {\n              kind: Kind.ENUM,\n              value: token.value,\n              loc: this.loc(token)\n            };\n        }\n\n      case TokenKind.DOLLAR:\n        if (!isConst) {\n          return this.parseVariable();\n        }\n\n        break;\n    }\n\n    throw this.unexpected();\n  };\n\n  _proto.parseStringLiteral = function parseStringLiteral() {\n    var token = this._lexer.token;\n\n    this._lexer.advance();\n\n    return {\n      kind: Kind.STRING,\n      value: token.value,\n      block: token.kind === TokenKind.BLOCK_STRING,\n      loc: this.loc(token)\n    };\n  }\n  /**\n   * ListValue[Const] :\n   *   - [ ]\n   *   - [ Value[?Const]+ ]\n   */\n  ;\n\n  _proto.parseList = function parseList(isConst) {\n    var _this = this;\n\n    var start = this._lexer.token;\n\n    var item = function item() {\n      return _this.parseValueLiteral(isConst);\n    };\n\n    return {\n      kind: Kind.LIST,\n      values: this.any(TokenKind.BRACKET_L, item, TokenKind.BRACKET_R),\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * ObjectValue[Const] :\n   *   - { }\n   *   - { ObjectField[?Const]+ }\n   */\n  ;\n\n  _proto.parseObject = function parseObject(isConst) {\n    var _this2 = this;\n\n    var start = this._lexer.token;\n\n    var item = function item() {\n      return _this2.parseObjectField(isConst);\n    };\n\n    return {\n      kind: Kind.OBJECT,\n      fields: this.any(TokenKind.BRACE_L, item, TokenKind.BRACE_R),\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * ObjectField[Const] : Name : Value[?Const]\n   */\n  ;\n\n  _proto.parseObjectField = function parseObjectField(isConst) {\n    var start = this._lexer.token;\n    var name = this.parseName();\n    this.expectToken(TokenKind.COLON);\n    return {\n      kind: Kind.OBJECT_FIELD,\n      name: name,\n      value: this.parseValueLiteral(isConst),\n      loc: this.loc(start)\n    };\n  } // Implements the parsing rules in the Directives section.\n\n  /**\n   * Directives[Const] : Directive[?Const]+\n   */\n  ;\n\n  _proto.parseDirectives = function parseDirectives(isConst) {\n    var directives = [];\n\n    while (this.peek(TokenKind.AT)) {\n      directives.push(this.parseDirective(isConst));\n    }\n\n    return directives;\n  }\n  /**\n   * Directive[Const] : @ Name Arguments[?Const]?\n   */\n  ;\n\n  _proto.parseDirective = function parseDirective(isConst) {\n    var start = this._lexer.token;\n    this.expectToken(TokenKind.AT);\n    return {\n      kind: Kind.DIRECTIVE,\n      name: this.parseName(),\n      arguments: this.parseArguments(isConst),\n      loc: this.loc(start)\n    };\n  } // Implements the parsing rules in the Types section.\n\n  /**\n   * Type :\n   *   - NamedType\n   *   - ListType\n   *   - NonNullType\n   */\n  ;\n\n  _proto.parseTypeReference = function parseTypeReference() {\n    var start = this._lexer.token;\n    var type;\n\n    if (this.expectOptionalToken(TokenKind.BRACKET_L)) {\n      type = this.parseTypeReference();\n      this.expectToken(TokenKind.BRACKET_R);\n      type = {\n        kind: Kind.LIST_TYPE,\n        type: type,\n        loc: this.loc(start)\n      };\n    } else {\n      type = this.parseNamedType();\n    }\n\n    if (this.expectOptionalToken(TokenKind.BANG)) {\n      return {\n        kind: Kind.NON_NULL_TYPE,\n        type: type,\n        loc: this.loc(start)\n      };\n    }\n\n    return type;\n  }\n  /**\n   * NamedType : Name\n   */\n  ;\n\n  _proto.parseNamedType = function parseNamedType() {\n    var start = this._lexer.token;\n    return {\n      kind: Kind.NAMED_TYPE,\n      name: this.parseName(),\n      loc: this.loc(start)\n    };\n  } // Implements the parsing rules in the Type Definition section.\n\n  /**\n   * TypeSystemDefinition :\n   *   - SchemaDefinition\n   *   - TypeDefinition\n   *   - DirectiveDefinition\n   *\n   * TypeDefinition :\n   *   - ScalarTypeDefinition\n   *   - ObjectTypeDefinition\n   *   - InterfaceTypeDefinition\n   *   - UnionTypeDefinition\n   *   - EnumTypeDefinition\n   *   - InputObjectTypeDefinition\n   */\n  ;\n\n  _proto.parseTypeSystemDefinition = function parseTypeSystemDefinition() {\n    // Many definitions begin with a description and require a lookahead.\n    var keywordToken = this.peekDescription() ? this._lexer.lookahead() : this._lexer.token;\n\n    if (keywordToken.kind === TokenKind.NAME) {\n      switch (keywordToken.value) {\n        case 'schema':\n          return this.parseSchemaDefinition();\n\n        case 'scalar':\n          return this.parseScalarTypeDefinition();\n\n        case 'type':\n          return this.parseObjectTypeDefinition();\n\n        case 'interface':\n          return this.parseInterfaceTypeDefinition();\n\n        case 'union':\n          return this.parseUnionTypeDefinition();\n\n        case 'enum':\n          return this.parseEnumTypeDefinition();\n\n        case 'input':\n          return this.parseInputObjectTypeDefinition();\n\n        case 'directive':\n          return this.parseDirectiveDefinition();\n      }\n    }\n\n    throw this.unexpected(keywordToken);\n  };\n\n  _proto.peekDescription = function peekDescription() {\n    return this.peek(TokenKind.STRING) || this.peek(TokenKind.BLOCK_STRING);\n  }\n  /**\n   * Description : StringValue\n   */\n  ;\n\n  _proto.parseDescription = function parseDescription() {\n    if (this.peekDescription()) {\n      return this.parseStringLiteral();\n    }\n  }\n  /**\n   * SchemaDefinition : Description? schema Directives[Const]? { OperationTypeDefinition+ }\n   */\n  ;\n\n  _proto.parseSchemaDefinition = function parseSchemaDefinition() {\n    var start = this._lexer.token;\n    var description = this.parseDescription();\n    this.expectKeyword('schema');\n    var directives = this.parseDirectives(true);\n    var operationTypes = this.many(TokenKind.BRACE_L, this.parseOperationTypeDefinition, TokenKind.BRACE_R);\n    return {\n      kind: Kind.SCHEMA_DEFINITION,\n      description: description,\n      directives: directives,\n      operationTypes: operationTypes,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * OperationTypeDefinition : OperationType : NamedType\n   */\n  ;\n\n  _proto.parseOperationTypeDefinition = function parseOperationTypeDefinition() {\n    var start = this._lexer.token;\n    var operation = this.parseOperationType();\n    this.expectToken(TokenKind.COLON);\n    var type = this.parseNamedType();\n    return {\n      kind: Kind.OPERATION_TYPE_DEFINITION,\n      operation: operation,\n      type: type,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * ScalarTypeDefinition : Description? scalar Name Directives[Const]?\n   */\n  ;\n\n  _proto.parseScalarTypeDefinition = function parseScalarTypeDefinition() {\n    var start = this._lexer.token;\n    var description = this.parseDescription();\n    this.expectKeyword('scalar');\n    var name = this.parseName();\n    var directives = this.parseDirectives(true);\n    return {\n      kind: Kind.SCALAR_TYPE_DEFINITION,\n      description: description,\n      name: name,\n      directives: directives,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * ObjectTypeDefinition :\n   *   Description?\n   *   type Name ImplementsInterfaces? Directives[Const]? FieldsDefinition?\n   */\n  ;\n\n  _proto.parseObjectTypeDefinition = function parseObjectTypeDefinition() {\n    var start = this._lexer.token;\n    var description = this.parseDescription();\n    this.expectKeyword('type');\n    var name = this.parseName();\n    var interfaces = this.parseImplementsInterfaces();\n    var directives = this.parseDirectives(true);\n    var fields = this.parseFieldsDefinition();\n    return {\n      kind: Kind.OBJECT_TYPE_DEFINITION,\n      description: description,\n      name: name,\n      interfaces: interfaces,\n      directives: directives,\n      fields: fields,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * ImplementsInterfaces :\n   *   - implements `&`? NamedType\n   *   - ImplementsInterfaces & NamedType\n   */\n  ;\n\n  _proto.parseImplementsInterfaces = function parseImplementsInterfaces() {\n    var _this$_options2;\n\n    if (!this.expectOptionalKeyword('implements')) {\n      return [];\n    }\n\n    if (((_this$_options2 = this._options) === null || _this$_options2 === void 0 ? void 0 : _this$_options2.allowLegacySDLImplementsInterfaces) === true) {\n      var types = []; // Optional leading ampersand\n\n      this.expectOptionalToken(TokenKind.AMP);\n\n      do {\n        types.push(this.parseNamedType());\n      } while (this.expectOptionalToken(TokenKind.AMP) || this.peek(TokenKind.NAME));\n\n      return types;\n    }\n\n    return this.delimitedMany(TokenKind.AMP, this.parseNamedType);\n  }\n  /**\n   * FieldsDefinition : { FieldDefinition+ }\n   */\n  ;\n\n  _proto.parseFieldsDefinition = function parseFieldsDefinition() {\n    var _this$_options3;\n\n    // Legacy support for the SDL?\n    if (((_this$_options3 = this._options) === null || _this$_options3 === void 0 ? void 0 : _this$_options3.allowLegacySDLEmptyFields) === true && this.peek(TokenKind.BRACE_L) && this._lexer.lookahead().kind === TokenKind.BRACE_R) {\n      this._lexer.advance();\n\n      this._lexer.advance();\n\n      return [];\n    }\n\n    return this.optionalMany(TokenKind.BRACE_L, this.parseFieldDefinition, TokenKind.BRACE_R);\n  }\n  /**\n   * FieldDefinition :\n   *   - Description? Name ArgumentsDefinition? : Type Directives[Const]?\n   */\n  ;\n\n  _proto.parseFieldDefinition = function parseFieldDefinition() {\n    var start = this._lexer.token;\n    var description = this.parseDescription();\n    var name = this.parseName();\n    var args = this.parseArgumentDefs();\n    this.expectToken(TokenKind.COLON);\n    var type = this.parseTypeReference();\n    var directives = this.parseDirectives(true);\n    return {\n      kind: Kind.FIELD_DEFINITION,\n      description: description,\n      name: name,\n      arguments: args,\n      type: type,\n      directives: directives,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * ArgumentsDefinition : ( InputValueDefinition+ )\n   */\n  ;\n\n  _proto.parseArgumentDefs = function parseArgumentDefs() {\n    return this.optionalMany(TokenKind.PAREN_L, this.parseInputValueDef, TokenKind.PAREN_R);\n  }\n  /**\n   * InputValueDefinition :\n   *   - Description? Name : Type DefaultValue? Directives[Const]?\n   */\n  ;\n\n  _proto.parseInputValueDef = function parseInputValueDef() {\n    var start = this._lexer.token;\n    var description = this.parseDescription();\n    var name = this.parseName();\n    this.expectToken(TokenKind.COLON);\n    var type = this.parseTypeReference();\n    var defaultValue;\n\n    if (this.expectOptionalToken(TokenKind.EQUALS)) {\n      defaultValue = this.parseValueLiteral(true);\n    }\n\n    var directives = this.parseDirectives(true);\n    return {\n      kind: Kind.INPUT_VALUE_DEFINITION,\n      description: description,\n      name: name,\n      type: type,\n      defaultValue: defaultValue,\n      directives: directives,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * InterfaceTypeDefinition :\n   *   - Description? interface Name Directives[Const]? FieldsDefinition?\n   */\n  ;\n\n  _proto.parseInterfaceTypeDefinition = function parseInterfaceTypeDefinition() {\n    var start = this._lexer.token;\n    var description = this.parseDescription();\n    this.expectKeyword('interface');\n    var name = this.parseName();\n    var interfaces = this.parseImplementsInterfaces();\n    var directives = this.parseDirectives(true);\n    var fields = this.parseFieldsDefinition();\n    return {\n      kind: Kind.INTERFACE_TYPE_DEFINITION,\n      description: description,\n      name: name,\n      interfaces: interfaces,\n      directives: directives,\n      fields: fields,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * UnionTypeDefinition :\n   *   - Description? union Name Directives[Const]? UnionMemberTypes?\n   */\n  ;\n\n  _proto.parseUnionTypeDefinition = function parseUnionTypeDefinition() {\n    var start = this._lexer.token;\n    var description = this.parseDescription();\n    this.expectKeyword('union');\n    var name = this.parseName();\n    var directives = this.parseDirectives(true);\n    var types = this.parseUnionMemberTypes();\n    return {\n      kind: Kind.UNION_TYPE_DEFINITION,\n      description: description,\n      name: name,\n      directives: directives,\n      types: types,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * UnionMemberTypes :\n   *   - = `|`? NamedType\n   *   - UnionMemberTypes | NamedType\n   */\n  ;\n\n  _proto.parseUnionMemberTypes = function parseUnionMemberTypes() {\n    return this.expectOptionalToken(TokenKind.EQUALS) ? this.delimitedMany(TokenKind.PIPE, this.parseNamedType) : [];\n  }\n  /**\n   * EnumTypeDefinition :\n   *   - Description? enum Name Directives[Const]? EnumValuesDefinition?\n   */\n  ;\n\n  _proto.parseEnumTypeDefinition = function parseEnumTypeDefinition() {\n    var start = this._lexer.token;\n    var description = this.parseDescription();\n    this.expectKeyword('enum');\n    var name = this.parseName();\n    var directives = this.parseDirectives(true);\n    var values = this.parseEnumValuesDefinition();\n    return {\n      kind: Kind.ENUM_TYPE_DEFINITION,\n      description: description,\n      name: name,\n      directives: directives,\n      values: values,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * EnumValuesDefinition : { EnumValueDefinition+ }\n   */\n  ;\n\n  _proto.parseEnumValuesDefinition = function parseEnumValuesDefinition() {\n    return this.optionalMany(TokenKind.BRACE_L, this.parseEnumValueDefinition, TokenKind.BRACE_R);\n  }\n  /**\n   * EnumValueDefinition : Description? EnumValue Directives[Const]?\n   *\n   * EnumValue : Name\n   */\n  ;\n\n  _proto.parseEnumValueDefinition = function parseEnumValueDefinition() {\n    var start = this._lexer.token;\n    var description = this.parseDescription();\n    var name = this.parseName();\n    var directives = this.parseDirectives(true);\n    return {\n      kind: Kind.ENUM_VALUE_DEFINITION,\n      description: description,\n      name: name,\n      directives: directives,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * InputObjectTypeDefinition :\n   *   - Description? input Name Directives[Const]? InputFieldsDefinition?\n   */\n  ;\n\n  _proto.parseInputObjectTypeDefinition = function parseInputObjectTypeDefinition() {\n    var start = this._lexer.token;\n    var description = this.parseDescription();\n    this.expectKeyword('input');\n    var name = this.parseName();\n    var directives = this.parseDirectives(true);\n    var fields = this.parseInputFieldsDefinition();\n    return {\n      kind: Kind.INPUT_OBJECT_TYPE_DEFINITION,\n      description: description,\n      name: name,\n      directives: directives,\n      fields: fields,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * InputFieldsDefinition : { InputValueDefinition+ }\n   */\n  ;\n\n  _proto.parseInputFieldsDefinition = function parseInputFieldsDefinition() {\n    return this.optionalMany(TokenKind.BRACE_L, this.parseInputValueDef, TokenKind.BRACE_R);\n  }\n  /**\n   * TypeSystemExtension :\n   *   - SchemaExtension\n   *   - TypeExtension\n   *\n   * TypeExtension :\n   *   - ScalarTypeExtension\n   *   - ObjectTypeExtension\n   *   - InterfaceTypeExtension\n   *   - UnionTypeExtension\n   *   - EnumTypeExtension\n   *   - InputObjectTypeDefinition\n   */\n  ;\n\n  _proto.parseTypeSystemExtension = function parseTypeSystemExtension() {\n    var keywordToken = this._lexer.lookahead();\n\n    if (keywordToken.kind === TokenKind.NAME) {\n      switch (keywordToken.value) {\n        case 'schema':\n          return this.parseSchemaExtension();\n\n        case 'scalar':\n          return this.parseScalarTypeExtension();\n\n        case 'type':\n          return this.parseObjectTypeExtension();\n\n        case 'interface':\n          return this.parseInterfaceTypeExtension();\n\n        case 'union':\n          return this.parseUnionTypeExtension();\n\n        case 'enum':\n          return this.parseEnumTypeExtension();\n\n        case 'input':\n          return this.parseInputObjectTypeExtension();\n      }\n    }\n\n    throw this.unexpected(keywordToken);\n  }\n  /**\n   * SchemaExtension :\n   *  - extend schema Directives[Const]? { OperationTypeDefinition+ }\n   *  - extend schema Directives[Const]\n   */\n  ;\n\n  _proto.parseSchemaExtension = function parseSchemaExtension() {\n    var start = this._lexer.token;\n    this.expectKeyword('extend');\n    this.expectKeyword('schema');\n    var directives = this.parseDirectives(true);\n    var operationTypes = this.optionalMany(TokenKind.BRACE_L, this.parseOperationTypeDefinition, TokenKind.BRACE_R);\n\n    if (directives.length === 0 && operationTypes.length === 0) {\n      throw this.unexpected();\n    }\n\n    return {\n      kind: Kind.SCHEMA_EXTENSION,\n      directives: directives,\n      operationTypes: operationTypes,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * ScalarTypeExtension :\n   *   - extend scalar Name Directives[Const]\n   */\n  ;\n\n  _proto.parseScalarTypeExtension = function parseScalarTypeExtension() {\n    var start = this._lexer.token;\n    this.expectKeyword('extend');\n    this.expectKeyword('scalar');\n    var name = this.parseName();\n    var directives = this.parseDirectives(true);\n\n    if (directives.length === 0) {\n      throw this.unexpected();\n    }\n\n    return {\n      kind: Kind.SCALAR_TYPE_EXTENSION,\n      name: name,\n      directives: directives,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * ObjectTypeExtension :\n   *  - extend type Name ImplementsInterfaces? Directives[Const]? FieldsDefinition\n   *  - extend type Name ImplementsInterfaces? Directives[Const]\n   *  - extend type Name ImplementsInterfaces\n   */\n  ;\n\n  _proto.parseObjectTypeExtension = function parseObjectTypeExtension() {\n    var start = this._lexer.token;\n    this.expectKeyword('extend');\n    this.expectKeyword('type');\n    var name = this.parseName();\n    var interfaces = this.parseImplementsInterfaces();\n    var directives = this.parseDirectives(true);\n    var fields = this.parseFieldsDefinition();\n\n    if (interfaces.length === 0 && directives.length === 0 && fields.length === 0) {\n      throw this.unexpected();\n    }\n\n    return {\n      kind: Kind.OBJECT_TYPE_EXTENSION,\n      name: name,\n      interfaces: interfaces,\n      directives: directives,\n      fields: fields,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * InterfaceTypeExtension :\n   *  - extend interface Name ImplementsInterfaces? Directives[Const]? FieldsDefinition\n   *  - extend interface Name ImplementsInterfaces? Directives[Const]\n   *  - extend interface Name ImplementsInterfaces\n   */\n  ;\n\n  _proto.parseInterfaceTypeExtension = function parseInterfaceTypeExtension() {\n    var start = this._lexer.token;\n    this.expectKeyword('extend');\n    this.expectKeyword('interface');\n    var name = this.parseName();\n    var interfaces = this.parseImplementsInterfaces();\n    var directives = this.parseDirectives(true);\n    var fields = this.parseFieldsDefinition();\n\n    if (interfaces.length === 0 && directives.length === 0 && fields.length === 0) {\n      throw this.unexpected();\n    }\n\n    return {\n      kind: Kind.INTERFACE_TYPE_EXTENSION,\n      name: name,\n      interfaces: interfaces,\n      directives: directives,\n      fields: fields,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * UnionTypeExtension :\n   *   - extend union Name Directives[Const]? UnionMemberTypes\n   *   - extend union Name Directives[Const]\n   */\n  ;\n\n  _proto.parseUnionTypeExtension = function parseUnionTypeExtension() {\n    var start = this._lexer.token;\n    this.expectKeyword('extend');\n    this.expectKeyword('union');\n    var name = this.parseName();\n    var directives = this.parseDirectives(true);\n    var types = this.parseUnionMemberTypes();\n\n    if (directives.length === 0 && types.length === 0) {\n      throw this.unexpected();\n    }\n\n    return {\n      kind: Kind.UNION_TYPE_EXTENSION,\n      name: name,\n      directives: directives,\n      types: types,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * EnumTypeExtension :\n   *   - extend enum Name Directives[Const]? EnumValuesDefinition\n   *   - extend enum Name Directives[Const]\n   */\n  ;\n\n  _proto.parseEnumTypeExtension = function parseEnumTypeExtension() {\n    var start = this._lexer.token;\n    this.expectKeyword('extend');\n    this.expectKeyword('enum');\n    var name = this.parseName();\n    var directives = this.parseDirectives(true);\n    var values = this.parseEnumValuesDefinition();\n\n    if (directives.length === 0 && values.length === 0) {\n      throw this.unexpected();\n    }\n\n    return {\n      kind: Kind.ENUM_TYPE_EXTENSION,\n      name: name,\n      directives: directives,\n      values: values,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * InputObjectTypeExtension :\n   *   - extend input Name Directives[Const]? InputFieldsDefinition\n   *   - extend input Name Directives[Const]\n   */\n  ;\n\n  _proto.parseInputObjectTypeExtension = function parseInputObjectTypeExtension() {\n    var start = this._lexer.token;\n    this.expectKeyword('extend');\n    this.expectKeyword('input');\n    var name = this.parseName();\n    var directives = this.parseDirectives(true);\n    var fields = this.parseInputFieldsDefinition();\n\n    if (directives.length === 0 && fields.length === 0) {\n      throw this.unexpected();\n    }\n\n    return {\n      kind: Kind.INPUT_OBJECT_TYPE_EXTENSION,\n      name: name,\n      directives: directives,\n      fields: fields,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * DirectiveDefinition :\n   *   - Description? directive @ Name ArgumentsDefinition? `repeatable`? on DirectiveLocations\n   */\n  ;\n\n  _proto.parseDirectiveDefinition = function parseDirectiveDefinition() {\n    var start = this._lexer.token;\n    var description = this.parseDescription();\n    this.expectKeyword('directive');\n    this.expectToken(TokenKind.AT);\n    var name = this.parseName();\n    var args = this.parseArgumentDefs();\n    var repeatable = this.expectOptionalKeyword('repeatable');\n    this.expectKeyword('on');\n    var locations = this.parseDirectiveLocations();\n    return {\n      kind: Kind.DIRECTIVE_DEFINITION,\n      description: description,\n      name: name,\n      arguments: args,\n      repeatable: repeatable,\n      locations: locations,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * DirectiveLocations :\n   *   - `|`? DirectiveLocation\n   *   - DirectiveLocations | DirectiveLocation\n   */\n  ;\n\n  _proto.parseDirectiveLocations = function parseDirectiveLocations() {\n    return this.delimitedMany(TokenKind.PIPE, this.parseDirectiveLocation);\n  }\n  /*\n   * DirectiveLocation :\n   *   - ExecutableDirectiveLocation\n   *   - TypeSystemDirectiveLocation\n   *\n   * ExecutableDirectiveLocation : one of\n   *   `QUERY`\n   *   `MUTATION`\n   *   `SUBSCRIPTION`\n   *   `FIELD`\n   *   `FRAGMENT_DEFINITION`\n   *   `FRAGMENT_SPREAD`\n   *   `INLINE_FRAGMENT`\n   *\n   * TypeSystemDirectiveLocation : one of\n   *   `SCHEMA`\n   *   `SCALAR`\n   *   `OBJECT`\n   *   `FIELD_DEFINITION`\n   *   `ARGUMENT_DEFINITION`\n   *   `INTERFACE`\n   *   `UNION`\n   *   `ENUM`\n   *   `ENUM_VALUE`\n   *   `INPUT_OBJECT`\n   *   `INPUT_FIELD_DEFINITION`\n   */\n  ;\n\n  _proto.parseDirectiveLocation = function parseDirectiveLocation() {\n    var start = this._lexer.token;\n    var name = this.parseName();\n\n    if (DirectiveLocation[name.value] !== undefined) {\n      return name;\n    }\n\n    throw this.unexpected(start);\n  } // Core parsing utility functions\n\n  /**\n   * Returns a location object, used to identify the place in the source that created a given parsed object.\n   */\n  ;\n\n  _proto.loc = function loc(startToken) {\n    var _this$_options4;\n\n    if (((_this$_options4 = this._options) === null || _this$_options4 === void 0 ? void 0 : _this$_options4.noLocation) !== true) {\n      return new Location(startToken, this._lexer.lastToken, this._lexer.source);\n    }\n  }\n  /**\n   * Determines if the next token is of a given kind\n   */\n  ;\n\n  _proto.peek = function peek(kind) {\n    return this._lexer.token.kind === kind;\n  }\n  /**\n   * If the next token is of the given kind, return that token after advancing the lexer.\n   * Otherwise, do not change the parser state and throw an error.\n   */\n  ;\n\n  _proto.expectToken = function expectToken(kind) {\n    var token = this._lexer.token;\n\n    if (token.kind === kind) {\n      this._lexer.advance();\n\n      return token;\n    }\n\n    throw syntaxError(this._lexer.source, token.start, \"Expected \".concat(getTokenKindDesc(kind), \", found \").concat(getTokenDesc(token), \".\"));\n  }\n  /**\n   * If the next token is of the given kind, return that token after advancing the lexer.\n   * Otherwise, do not change the parser state and return undefined.\n   */\n  ;\n\n  _proto.expectOptionalToken = function expectOptionalToken(kind) {\n    var token = this._lexer.token;\n\n    if (token.kind === kind) {\n      this._lexer.advance();\n\n      return token;\n    }\n\n    return undefined;\n  }\n  /**\n   * If the next token is a given keyword, advance the lexer.\n   * Otherwise, do not change the parser state and throw an error.\n   */\n  ;\n\n  _proto.expectKeyword = function expectKeyword(value) {\n    var token = this._lexer.token;\n\n    if (token.kind === TokenKind.NAME && token.value === value) {\n      this._lexer.advance();\n    } else {\n      throw syntaxError(this._lexer.source, token.start, \"Expected \\\"\".concat(value, \"\\\", found \").concat(getTokenDesc(token), \".\"));\n    }\n  }\n  /**\n   * If the next token is a given keyword, return \"true\" after advancing the lexer.\n   * Otherwise, do not change the parser state and return \"false\".\n   */\n  ;\n\n  _proto.expectOptionalKeyword = function expectOptionalKeyword(value) {\n    var token = this._lexer.token;\n\n    if (token.kind === TokenKind.NAME && token.value === value) {\n      this._lexer.advance();\n\n      return true;\n    }\n\n    return false;\n  }\n  /**\n   * Helper function for creating an error when an unexpected lexed token is encountered.\n   */\n  ;\n\n  _proto.unexpected = function unexpected(atToken) {\n    var token = atToken !== null && atToken !== void 0 ? atToken : this._lexer.token;\n    return syntaxError(this._lexer.source, token.start, \"Unexpected \".concat(getTokenDesc(token), \".\"));\n  }\n  /**\n   * Returns a possibly empty list of parse nodes, determined by the parseFn.\n   * This list begins with a lex token of openKind and ends with a lex token of closeKind.\n   * Advances the parser to the next lex token after the closing token.\n   */\n  ;\n\n  _proto.any = function any(openKind, parseFn, closeKind) {\n    this.expectToken(openKind);\n    var nodes = [];\n\n    while (!this.expectOptionalToken(closeKind)) {\n      nodes.push(parseFn.call(this));\n    }\n\n    return nodes;\n  }\n  /**\n   * Returns a list of parse nodes, determined by the parseFn.\n   * It can be empty only if open token is missing otherwise it will always return non-empty list\n   * that begins with a lex token of openKind and ends with a lex token of closeKind.\n   * Advances the parser to the next lex token after the closing token.\n   */\n  ;\n\n  _proto.optionalMany = function optionalMany(openKind, parseFn, closeKind) {\n    if (this.expectOptionalToken(openKind)) {\n      var nodes = [];\n\n      do {\n        nodes.push(parseFn.call(this));\n      } while (!this.expectOptionalToken(closeKind));\n\n      return nodes;\n    }\n\n    return [];\n  }\n  /**\n   * Returns a non-empty list of parse nodes, determined by the parseFn.\n   * This list begins with a lex token of openKind and ends with a lex token of closeKind.\n   * Advances the parser to the next lex token after the closing token.\n   */\n  ;\n\n  _proto.many = function many(openKind, parseFn, closeKind) {\n    this.expectToken(openKind);\n    var nodes = [];\n\n    do {\n      nodes.push(parseFn.call(this));\n    } while (!this.expectOptionalToken(closeKind));\n\n    return nodes;\n  }\n  /**\n   * Returns a non-empty list of parse nodes, determined by the parseFn.\n   * This list may begin with a lex token of delimiterKind followed by items separated by lex tokens of tokenKind.\n   * Advances the parser to the next lex token after last item in the list.\n   */\n  ;\n\n  _proto.delimitedMany = function delimitedMany(delimiterKind, parseFn) {\n    this.expectOptionalToken(delimiterKind);\n    var nodes = [];\n\n    do {\n      nodes.push(parseFn.call(this));\n    } while (this.expectOptionalToken(delimiterKind));\n\n    return nodes;\n  };\n\n  return Parser;\n}();\n/**\n * A helper function to describe a token as a string for debugging.\n */\n\nfunction getTokenDesc(token) {\n  var value = token.value;\n  return getTokenKindDesc(token.kind) + (value != null ? \" \\\"\".concat(value, \"\\\"\") : '');\n}\n/**\n * A helper function to describe a token kind as a string for debugging.\n */\n\n\nfunction getTokenKindDesc(kind) {\n  return isPunctuatorTokenKind(kind) ? \"\\\"\".concat(kind, \"\\\"\") : kind;\n}\n","import inspect from \"../jsutils/inspect.mjs\";\nimport { isNode } from \"./ast.mjs\";\n/**\n * A visitor is provided to visit, it contains the collection of\n * relevant functions to be called during the visitor's traversal.\n */\n\nexport var QueryDocumentKeys = {\n  Name: [],\n  Document: ['definitions'],\n  OperationDefinition: ['name', 'variableDefinitions', 'directives', 'selectionSet'],\n  VariableDefinition: ['variable', 'type', 'defaultValue', 'directives'],\n  Variable: ['name'],\n  SelectionSet: ['selections'],\n  Field: ['alias', 'name', 'arguments', 'directives', 'selectionSet'],\n  Argument: ['name', 'value'],\n  FragmentSpread: ['name', 'directives'],\n  InlineFragment: ['typeCondition', 'directives', 'selectionSet'],\n  FragmentDefinition: ['name', // Note: fragment variable definitions are experimental and may be changed\n  // or removed in the future.\n  'variableDefinitions', 'typeCondition', 'directives', 'selectionSet'],\n  IntValue: [],\n  FloatValue: [],\n  StringValue: [],\n  BooleanValue: [],\n  NullValue: [],\n  EnumValue: [],\n  ListValue: ['values'],\n  ObjectValue: ['fields'],\n  ObjectField: ['name', 'value'],\n  Directive: ['name', 'arguments'],\n  NamedType: ['name'],\n  ListType: ['type'],\n  NonNullType: ['type'],\n  SchemaDefinition: ['description', 'directives', 'operationTypes'],\n  OperationTypeDefinition: ['type'],\n  ScalarTypeDefinition: ['description', 'name', 'directives'],\n  ObjectTypeDefinition: ['description', 'name', 'interfaces', 'directives', 'fields'],\n  FieldDefinition: ['description', 'name', 'arguments', 'type', 'directives'],\n  InputValueDefinition: ['description', 'name', 'type', 'defaultValue', 'directives'],\n  InterfaceTypeDefinition: ['description', 'name', 'interfaces', 'directives', 'fields'],\n  UnionTypeDefinition: ['description', 'name', 'directives', 'types'],\n  EnumTypeDefinition: ['description', 'name', 'directives', 'values'],\n  EnumValueDefinition: ['description', 'name', 'directives'],\n  InputObjectTypeDefinition: ['description', 'name', 'directives', 'fields'],\n  DirectiveDefinition: ['description', 'name', 'arguments', 'locations'],\n  SchemaExtension: ['directives', 'operationTypes'],\n  ScalarTypeExtension: ['name', 'directives'],\n  ObjectTypeExtension: ['name', 'interfaces', 'directives', 'fields'],\n  InterfaceTypeExtension: ['name', 'interfaces', 'directives', 'fields'],\n  UnionTypeExtension: ['name', 'directives', 'types'],\n  EnumTypeExtension: ['name', 'directives', 'values'],\n  InputObjectTypeExtension: ['name', 'directives', 'fields']\n};\nexport var BREAK = Object.freeze({});\n/**\n * visit() will walk through an AST using a depth-first traversal, calling\n * the visitor's enter function at each node in the traversal, and calling the\n * leave function after visiting that node and all of its child nodes.\n *\n * By returning different values from the enter and leave functions, the\n * behavior of the visitor can be altered, including skipping over a sub-tree of\n * the AST (by returning false), editing the AST by returning a value or null\n * to remove the value, or to stop the whole traversal by returning BREAK.\n *\n * When using visit() to edit an AST, the original AST will not be modified, and\n * a new version of the AST with the changes applied will be returned from the\n * visit function.\n *\n *     const editedAST = visit(ast, {\n *       enter(node, key, parent, path, ancestors) {\n *         // @return\n *         //   undefined: no action\n *         //   false: skip visiting this node\n *         //   visitor.BREAK: stop visiting altogether\n *         //   null: delete this node\n *         //   any value: replace this node with the returned value\n *       },\n *       leave(node, key, parent, path, ancestors) {\n *         // @return\n *         //   undefined: no action\n *         //   false: no action\n *         //   visitor.BREAK: stop visiting altogether\n *         //   null: delete this node\n *         //   any value: replace this node with the returned value\n *       }\n *     });\n *\n * Alternatively to providing enter() and leave() functions, a visitor can\n * instead provide functions named the same as the kinds of AST nodes, or\n * enter/leave visitors at a named key, leading to four permutations of the\n * visitor API:\n *\n * 1) Named visitors triggered when entering a node of a specific kind.\n *\n *     visit(ast, {\n *       Kind(node) {\n *         // enter the \"Kind\" node\n *       }\n *     })\n *\n * 2) Named visitors that trigger upon entering and leaving a node of\n *    a specific kind.\n *\n *     visit(ast, {\n *       Kind: {\n *         enter(node) {\n *           // enter the \"Kind\" node\n *         }\n *         leave(node) {\n *           // leave the \"Kind\" node\n *         }\n *       }\n *     })\n *\n * 3) Generic visitors that trigger upon entering and leaving any node.\n *\n *     visit(ast, {\n *       enter(node) {\n *         // enter any node\n *       },\n *       leave(node) {\n *         // leave any node\n *       }\n *     })\n *\n * 4) Parallel visitors for entering and leaving nodes of a specific kind.\n *\n *     visit(ast, {\n *       enter: {\n *         Kind(node) {\n *           // enter the \"Kind\" node\n *         }\n *       },\n *       leave: {\n *         Kind(node) {\n *           // leave the \"Kind\" node\n *         }\n *       }\n *     })\n */\n\nexport function visit(root, visitor) {\n  var visitorKeys = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : QueryDocumentKeys;\n\n  /* eslint-disable no-undef-init */\n  var stack = undefined;\n  var inArray = Array.isArray(root);\n  var keys = [root];\n  var index = -1;\n  var edits = [];\n  var node = undefined;\n  var key = undefined;\n  var parent = undefined;\n  var path = [];\n  var ancestors = [];\n  var newRoot = root;\n  /* eslint-enable no-undef-init */\n\n  do {\n    index++;\n    var isLeaving = index === keys.length;\n    var isEdited = isLeaving && edits.length !== 0;\n\n    if (isLeaving) {\n      key = ancestors.length === 0 ? undefined : path[path.length - 1];\n      node = parent;\n      parent = ancestors.pop();\n\n      if (isEdited) {\n        if (inArray) {\n          node = node.slice();\n        } else {\n          var clone = {};\n\n          for (var _i2 = 0, _Object$keys2 = Object.keys(node); _i2 < _Object$keys2.length; _i2++) {\n            var k = _Object$keys2[_i2];\n            clone[k] = node[k];\n          }\n\n          node = clone;\n        }\n\n        var editOffset = 0;\n\n        for (var ii = 0; ii < edits.length; ii++) {\n          var editKey = edits[ii][0];\n          var editValue = edits[ii][1];\n\n          if (inArray) {\n            editKey -= editOffset;\n          }\n\n          if (inArray && editValue === null) {\n            node.splice(editKey, 1);\n            editOffset++;\n          } else {\n            node[editKey] = editValue;\n          }\n        }\n      }\n\n      index = stack.index;\n      keys = stack.keys;\n      edits = stack.edits;\n      inArray = stack.inArray;\n      stack = stack.prev;\n    } else {\n      key = parent ? inArray ? index : keys[index] : undefined;\n      node = parent ? parent[key] : newRoot;\n\n      if (node === null || node === undefined) {\n        continue;\n      }\n\n      if (parent) {\n        path.push(key);\n      }\n    }\n\n    var result = void 0;\n\n    if (!Array.isArray(node)) {\n      if (!isNode(node)) {\n        throw new Error(\"Invalid AST Node: \".concat(inspect(node), \".\"));\n      }\n\n      var visitFn = getVisitFn(visitor, node.kind, isLeaving);\n\n      if (visitFn) {\n        result = visitFn.call(visitor, node, key, parent, path, ancestors);\n\n        if (result === BREAK) {\n          break;\n        }\n\n        if (result === false) {\n          if (!isLeaving) {\n            path.pop();\n            continue;\n          }\n        } else if (result !== undefined) {\n          edits.push([key, result]);\n\n          if (!isLeaving) {\n            if (isNode(result)) {\n              node = result;\n            } else {\n              path.pop();\n              continue;\n            }\n          }\n        }\n      }\n    }\n\n    if (result === undefined && isEdited) {\n      edits.push([key, node]);\n    }\n\n    if (isLeaving) {\n      path.pop();\n    } else {\n      var _visitorKeys$node$kin;\n\n      stack = {\n        inArray: inArray,\n        index: index,\n        keys: keys,\n        edits: edits,\n        prev: stack\n      };\n      inArray = Array.isArray(node);\n      keys = inArray ? node : (_visitorKeys$node$kin = visitorKeys[node.kind]) !== null && _visitorKeys$node$kin !== void 0 ? _visitorKeys$node$kin : [];\n      index = -1;\n      edits = [];\n\n      if (parent) {\n        ancestors.push(parent);\n      }\n\n      parent = node;\n    }\n  } while (stack !== undefined);\n\n  if (edits.length !== 0) {\n    newRoot = edits[edits.length - 1][1];\n  }\n\n  return newRoot;\n}\n/**\n * Creates a new visitor instance which delegates to many visitors to run in\n * parallel. Each visitor will be visited for each node before moving on.\n *\n * If a prior visitor edits a node, no following visitors will see that node.\n */\n\nexport function visitInParallel(visitors) {\n  var skipping = new Array(visitors.length);\n  return {\n    enter: function enter(node) {\n      for (var i = 0; i < visitors.length; i++) {\n        if (skipping[i] == null) {\n          var fn = getVisitFn(visitors[i], node.kind,\n          /* isLeaving */\n          false);\n\n          if (fn) {\n            var result = fn.apply(visitors[i], arguments);\n\n            if (result === false) {\n              skipping[i] = node;\n            } else if (result === BREAK) {\n              skipping[i] = BREAK;\n            } else if (result !== undefined) {\n              return result;\n            }\n          }\n        }\n      }\n    },\n    leave: function leave(node) {\n      for (var i = 0; i < visitors.length; i++) {\n        if (skipping[i] == null) {\n          var fn = getVisitFn(visitors[i], node.kind,\n          /* isLeaving */\n          true);\n\n          if (fn) {\n            var result = fn.apply(visitors[i], arguments);\n\n            if (result === BREAK) {\n              skipping[i] = BREAK;\n            } else if (result !== undefined && result !== false) {\n              return result;\n            }\n          }\n        } else if (skipping[i] === node) {\n          skipping[i] = null;\n        }\n      }\n    }\n  };\n}\n/**\n * Given a visitor instance, if it is leaving or not, and a node kind, return\n * the function the visitor runtime should call.\n */\n\nexport function getVisitFn(visitor, kind, isLeaving) {\n  var kindVisitor = visitor[kind];\n\n  if (kindVisitor) {\n    if (!isLeaving && typeof kindVisitor === 'function') {\n      // { Kind() {} }\n      return kindVisitor;\n    }\n\n    var kindSpecificVisitor = isLeaving ? kindVisitor.leave : kindVisitor.enter;\n\n    if (typeof kindSpecificVisitor === 'function') {\n      // { Kind: { enter() {}, leave() {} } }\n      return kindSpecificVisitor;\n    }\n  } else {\n    var specificVisitor = isLeaving ? visitor.leave : visitor.enter;\n\n    if (specificVisitor) {\n      if (typeof specificVisitor === 'function') {\n        // { enter() {}, leave() {} }\n        return specificVisitor;\n      }\n\n      var specificKindVisitor = specificVisitor[kind];\n\n      if (typeof specificKindVisitor === 'function') {\n        // { enter: { Kind() {} }, leave: { Kind() {} } }\n        return specificKindVisitor;\n      }\n    }\n  }\n}\n","import { visit } from \"./visitor.mjs\";\nimport { printBlockString } from \"./blockString.mjs\";\n/**\n * Converts an AST into a string, using one set of reasonable\n * formatting rules.\n */\n\nexport function print(ast) {\n  return visit(ast, {\n    leave: printDocASTReducer\n  });\n}\nvar MAX_LINE_LENGTH = 80; // TODO: provide better type coverage in future\n\nvar printDocASTReducer = {\n  Name: function Name(node) {\n    return node.value;\n  },\n  Variable: function Variable(node) {\n    return '$' + node.name;\n  },\n  // Document\n  Document: function Document(node) {\n    return join(node.definitions, '\\n\\n') + '\\n';\n  },\n  OperationDefinition: function OperationDefinition(node) {\n    var op = node.operation;\n    var name = node.name;\n    var varDefs = wrap('(', join(node.variableDefinitions, ', '), ')');\n    var directives = join(node.directives, ' ');\n    var selectionSet = node.selectionSet; // Anonymous queries with no directives or variable definitions can use\n    // the query short form.\n\n    return !name && !directives && !varDefs && op === 'query' ? selectionSet : join([op, join([name, varDefs]), directives, selectionSet], ' ');\n  },\n  VariableDefinition: function VariableDefinition(_ref) {\n    var variable = _ref.variable,\n        type = _ref.type,\n        defaultValue = _ref.defaultValue,\n        directives = _ref.directives;\n    return variable + ': ' + type + wrap(' = ', defaultValue) + wrap(' ', join(directives, ' '));\n  },\n  SelectionSet: function SelectionSet(_ref2) {\n    var selections = _ref2.selections;\n    return block(selections);\n  },\n  Field: function Field(_ref3) {\n    var alias = _ref3.alias,\n        name = _ref3.name,\n        args = _ref3.arguments,\n        directives = _ref3.directives,\n        selectionSet = _ref3.selectionSet;\n    var prefix = wrap('', alias, ': ') + name;\n    var argsLine = prefix + wrap('(', join(args, ', '), ')');\n\n    if (argsLine.length > MAX_LINE_LENGTH) {\n      argsLine = prefix + wrap('(\\n', indent(join(args, '\\n')), '\\n)');\n    }\n\n    return join([argsLine, join(directives, ' '), selectionSet], ' ');\n  },\n  Argument: function Argument(_ref4) {\n    var name = _ref4.name,\n        value = _ref4.value;\n    return name + ': ' + value;\n  },\n  // Fragments\n  FragmentSpread: function FragmentSpread(_ref5) {\n    var name = _ref5.name,\n        directives = _ref5.directives;\n    return '...' + name + wrap(' ', join(directives, ' '));\n  },\n  InlineFragment: function InlineFragment(_ref6) {\n    var typeCondition = _ref6.typeCondition,\n        directives = _ref6.directives,\n        selectionSet = _ref6.selectionSet;\n    return join(['...', wrap('on ', typeCondition), join(directives, ' '), selectionSet], ' ');\n  },\n  FragmentDefinition: function FragmentDefinition(_ref7) {\n    var name = _ref7.name,\n        typeCondition = _ref7.typeCondition,\n        variableDefinitions = _ref7.variableDefinitions,\n        directives = _ref7.directives,\n        selectionSet = _ref7.selectionSet;\n    return (// Note: fragment variable definitions are experimental and may be changed\n      // or removed in the future.\n      \"fragment \".concat(name).concat(wrap('(', join(variableDefinitions, ', '), ')'), \" \") + \"on \".concat(typeCondition, \" \").concat(wrap('', join(directives, ' '), ' ')) + selectionSet\n    );\n  },\n  // Value\n  IntValue: function IntValue(_ref8) {\n    var value = _ref8.value;\n    return value;\n  },\n  FloatValue: function FloatValue(_ref9) {\n    var value = _ref9.value;\n    return value;\n  },\n  StringValue: function StringValue(_ref10, key) {\n    var value = _ref10.value,\n        isBlockString = _ref10.block;\n    return isBlockString ? printBlockString(value, key === 'description' ? '' : '  ') : JSON.stringify(value);\n  },\n  BooleanValue: function BooleanValue(_ref11) {\n    var value = _ref11.value;\n    return value ? 'true' : 'false';\n  },\n  NullValue: function NullValue() {\n    return 'null';\n  },\n  EnumValue: function EnumValue(_ref12) {\n    var value = _ref12.value;\n    return value;\n  },\n  ListValue: function ListValue(_ref13) {\n    var values = _ref13.values;\n    return '[' + join(values, ', ') + ']';\n  },\n  ObjectValue: function ObjectValue(_ref14) {\n    var fields = _ref14.fields;\n    return '{' + join(fields, ', ') + '}';\n  },\n  ObjectField: function ObjectField(_ref15) {\n    var name = _ref15.name,\n        value = _ref15.value;\n    return name + ': ' + value;\n  },\n  // Directive\n  Directive: function Directive(_ref16) {\n    var name = _ref16.name,\n        args = _ref16.arguments;\n    return '@' + name + wrap('(', join(args, ', '), ')');\n  },\n  // Type\n  NamedType: function NamedType(_ref17) {\n    var name = _ref17.name;\n    return name;\n  },\n  ListType: function ListType(_ref18) {\n    var type = _ref18.type;\n    return '[' + type + ']';\n  },\n  NonNullType: function NonNullType(_ref19) {\n    var type = _ref19.type;\n    return type + '!';\n  },\n  // Type System Definitions\n  SchemaDefinition: addDescription(function (_ref20) {\n    var directives = _ref20.directives,\n        operationTypes = _ref20.operationTypes;\n    return join(['schema', join(directives, ' '), block(operationTypes)], ' ');\n  }),\n  OperationTypeDefinition: function OperationTypeDefinition(_ref21) {\n    var operation = _ref21.operation,\n        type = _ref21.type;\n    return operation + ': ' + type;\n  },\n  ScalarTypeDefinition: addDescription(function (_ref22) {\n    var name = _ref22.name,\n        directives = _ref22.directives;\n    return join(['scalar', name, join(directives, ' ')], ' ');\n  }),\n  ObjectTypeDefinition: addDescription(function (_ref23) {\n    var name = _ref23.name,\n        interfaces = _ref23.interfaces,\n        directives = _ref23.directives,\n        fields = _ref23.fields;\n    return join(['type', name, wrap('implements ', join(interfaces, ' & ')), join(directives, ' '), block(fields)], ' ');\n  }),\n  FieldDefinition: addDescription(function (_ref24) {\n    var name = _ref24.name,\n        args = _ref24.arguments,\n        type = _ref24.type,\n        directives = _ref24.directives;\n    return name + (hasMultilineItems(args) ? wrap('(\\n', indent(join(args, '\\n')), '\\n)') : wrap('(', join(args, ', '), ')')) + ': ' + type + wrap(' ', join(directives, ' '));\n  }),\n  InputValueDefinition: addDescription(function (_ref25) {\n    var name = _ref25.name,\n        type = _ref25.type,\n        defaultValue = _ref25.defaultValue,\n        directives = _ref25.directives;\n    return join([name + ': ' + type, wrap('= ', defaultValue), join(directives, ' ')], ' ');\n  }),\n  InterfaceTypeDefinition: addDescription(function (_ref26) {\n    var name = _ref26.name,\n        interfaces = _ref26.interfaces,\n        directives = _ref26.directives,\n        fields = _ref26.fields;\n    return join(['interface', name, wrap('implements ', join(interfaces, ' & ')), join(directives, ' '), block(fields)], ' ');\n  }),\n  UnionTypeDefinition: addDescription(function (_ref27) {\n    var name = _ref27.name,\n        directives = _ref27.directives,\n        types = _ref27.types;\n    return join(['union', name, join(directives, ' '), types && types.length !== 0 ? '= ' + join(types, ' | ') : ''], ' ');\n  }),\n  EnumTypeDefinition: addDescription(function (_ref28) {\n    var name = _ref28.name,\n        directives = _ref28.directives,\n        values = _ref28.values;\n    return join(['enum', name, join(directives, ' '), block(values)], ' ');\n  }),\n  EnumValueDefinition: addDescription(function (_ref29) {\n    var name = _ref29.name,\n        directives = _ref29.directives;\n    return join([name, join(directives, ' ')], ' ');\n  }),\n  InputObjectTypeDefinition: addDescription(function (_ref30) {\n    var name = _ref30.name,\n        directives = _ref30.directives,\n        fields = _ref30.fields;\n    return join(['input', name, join(directives, ' '), block(fields)], ' ');\n  }),\n  DirectiveDefinition: addDescription(function (_ref31) {\n    var name = _ref31.name,\n        args = _ref31.arguments,\n        repeatable = _ref31.repeatable,\n        locations = _ref31.locations;\n    return 'directive @' + name + (hasMultilineItems(args) ? wrap('(\\n', indent(join(args, '\\n')), '\\n)') : wrap('(', join(args, ', '), ')')) + (repeatable ? ' repeatable' : '') + ' on ' + join(locations, ' | ');\n  }),\n  SchemaExtension: function SchemaExtension(_ref32) {\n    var directives = _ref32.directives,\n        operationTypes = _ref32.operationTypes;\n    return join(['extend schema', join(directives, ' '), block(operationTypes)], ' ');\n  },\n  ScalarTypeExtension: function ScalarTypeExtension(_ref33) {\n    var name = _ref33.name,\n        directives = _ref33.directives;\n    return join(['extend scalar', name, join(directives, ' ')], ' ');\n  },\n  ObjectTypeExtension: function ObjectTypeExtension(_ref34) {\n    var name = _ref34.name,\n        interfaces = _ref34.interfaces,\n        directives = _ref34.directives,\n        fields = _ref34.fields;\n    return join(['extend type', name, wrap('implements ', join(interfaces, ' & ')), join(directives, ' '), block(fields)], ' ');\n  },\n  InterfaceTypeExtension: function InterfaceTypeExtension(_ref35) {\n    var name = _ref35.name,\n        interfaces = _ref35.interfaces,\n        directives = _ref35.directives,\n        fields = _ref35.fields;\n    return join(['extend interface', name, wrap('implements ', join(interfaces, ' & ')), join(directives, ' '), block(fields)], ' ');\n  },\n  UnionTypeExtension: function UnionTypeExtension(_ref36) {\n    var name = _ref36.name,\n        directives = _ref36.directives,\n        types = _ref36.types;\n    return join(['extend union', name, join(directives, ' '), types && types.length !== 0 ? '= ' + join(types, ' | ') : ''], ' ');\n  },\n  EnumTypeExtension: function EnumTypeExtension(_ref37) {\n    var name = _ref37.name,\n        directives = _ref37.directives,\n        values = _ref37.values;\n    return join(['extend enum', name, join(directives, ' '), block(values)], ' ');\n  },\n  InputObjectTypeExtension: function InputObjectTypeExtension(_ref38) {\n    var name = _ref38.name,\n        directives = _ref38.directives,\n        fields = _ref38.fields;\n    return join(['extend input', name, join(directives, ' '), block(fields)], ' ');\n  }\n};\n\nfunction addDescription(cb) {\n  return function (node) {\n    return join([node.description, cb(node)], '\\n');\n  };\n}\n/**\n * Given maybeArray, print an empty string if it is null or empty, otherwise\n * print all items together separated by separator if provided\n */\n\n\nfunction join(maybeArray) {\n  var _maybeArray$filter$jo;\n\n  var separator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  return (_maybeArray$filter$jo = maybeArray === null || maybeArray === void 0 ? void 0 : maybeArray.filter(function (x) {\n    return x;\n  }).join(separator)) !== null && _maybeArray$filter$jo !== void 0 ? _maybeArray$filter$jo : '';\n}\n/**\n * Given array, print each item on its own line, wrapped in an\n * indented \"{ }\" block.\n */\n\n\nfunction block(array) {\n  return wrap('{\\n', indent(join(array, '\\n')), '\\n}');\n}\n/**\n * If maybeString is not null or empty, then wrap with start and end, otherwise print an empty string.\n */\n\n\nfunction wrap(start, maybeString) {\n  var end = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n  return maybeString != null && maybeString !== '' ? start + maybeString + end : '';\n}\n\nfunction indent(str) {\n  return wrap('  ', str.replace(/\\n/g, '\\n  '));\n}\n\nfunction isMultiline(str) {\n  return str.indexOf('\\n') !== -1;\n}\n\nfunction hasMultilineItems(maybeArray) {\n  return maybeArray != null && maybeArray.some(isMultiline);\n}\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Checks to see if the given response or subscription message contains an\n * Unauthorized error. If it does, it changes the error message to include instructions\n * for the app developer.\n */\nfunction repackageUnauthorizedError(content) {\n    if (content.errors && Array.isArray(content.errors)) {\n        content.errors.forEach(e => {\n            if (isUnauthorizedError(e)) {\n                e.message = 'Unauthorized';\n                e.recoverySuggestion =\n                    `If you're calling an Amplify-generated API, make sure ` +\n                        `to set the \"authMode\" in generateClient({ authMode: '...' }) to the backend authorization ` +\n                        `rule's auth provider ('apiKey', 'userPool', 'iam', 'oidc', 'lambda')`;\n            }\n        });\n    }\n    return content;\n}\nfunction isUnauthorizedError(error) {\n    // Error pattern corresponding to appsync calls\n    if (error?.originalError?.name?.startsWith('UnauthorizedException')) {\n        return true;\n    }\n    // Error pattern corresponding to appsync subscriptions\n    if (error.message?.startsWith('Connection failed:') &&\n        error.message?.includes('Permission denied')) {\n        return true;\n    }\n    return false;\n}\n\nexport { repackageUnauthorizedError };\n//# sourceMappingURL=repackageAuthError.mjs.map\n","export { CONTROL_MSG, ConnectionState } from './PubSub.mjs';\n\nvar GraphQLAuthError;\n(function (GraphQLAuthError) {\n    GraphQLAuthError[\"NO_API_KEY\"] = \"No api-key configured\";\n    GraphQLAuthError[\"NO_CURRENT_USER\"] = \"No current user\";\n    GraphQLAuthError[\"NO_CREDENTIALS\"] = \"No credentials\";\n    GraphQLAuthError[\"NO_FEDERATED_JWT\"] = \"No federated jwt\";\n    GraphQLAuthError[\"NO_AUTH_TOKEN\"] = \"No auth token specified\";\n})(GraphQLAuthError || (GraphQLAuthError = {}));\nconst __amplify = Symbol('amplify');\nconst __authMode = Symbol('authMode');\nconst __authToken = Symbol('authToken');\nconst __apiKey = Symbol('apiKey');\nconst __headers = Symbol('headers');\nconst __endpoint = Symbol('endpoint');\nfunction getInternals(client) {\n    const c = client;\n    return {\n        amplify: c[__amplify],\n        apiKey: c[__apiKey],\n        authMode: c[__authMode],\n        authToken: c[__authToken],\n        endpoint: c[__endpoint],\n        headers: c[__headers],\n    };\n}\n\nexport { GraphQLAuthError, __amplify, __apiKey, __authMode, __authToken, __endpoint, __headers, getInternals };\n//# sourceMappingURL=index.mjs.map\n","/**\n * Given an introspection schema model, returns all owner fields.\n *\n * @param model Model from an introspection schema\n * @returns List of owner field names\n */\nfunction resolveOwnerFields(model) {\n    const ownerFields = new Set();\n    for (const attr of model.attributes || []) {\n        if (isAuthAttribute(attr)) {\n            for (const rule of attr.properties.rules) {\n                if (rule.allow === 'owner') {\n                    ownerFields.add(rule.ownerField || 'owner');\n                }\n                else if (rule.allow === 'groups' && rule.groupsField !== undefined) {\n                    // only valid for dynamic group(s)\n                    // static group auth will have an array of predefined groups in the attribute, groups: string[]\n                    // but `groupsField` will be undefined\n                    ownerFields.add(rule.groupsField);\n                }\n            }\n        }\n    }\n    return Array.from(ownerFields);\n}\n/**\n * Type guard that identifies an auth attribute with an attached rules list that\n * specifies an `allow` attribute at a minimum.\n *\n * @param attribute Any object. Ideally a model introspection schema model attribute\n * @returns True if given object is an auth attribute\n */\nfunction isAuthAttribute(attribute) {\n    if (attribute?.type === 'auth') {\n        if (typeof attribute?.properties === 'object') {\n            if (Array.isArray(attribute?.properties?.rules)) {\n                return (attribute?.properties?.rules).every((rule) => !!rule.allow);\n            }\n        }\n    }\n    return false;\n}\n\nexport { resolveOwnerFields };\n//# sourceMappingURL=resolveOwnerFields.mjs.map\n","/**\n * @param s string to capitalize\n * @returns capitalized string\n */\nfunction capitalize(s) {\n    return `${s[0].toUpperCase()}${s.slice(1)}`;\n}\n\nexport { capitalize };\n//# sourceMappingURL=stringTransformation.mjs.map\n","/**\n * Executes an `async` resolver function, providing the `Promise`-to-be-returned as the\n * first argument to the resolver so that the resolver can refer to the `Promise` that\n * external callers will see.\n *\n * ```ts\n * const outer = selfAwareAsync(async inner => {\n *  console.log(outer === inner); // true\n * });\n * ```\n *\n * This utility exists to reduce boilerplate in cases where promise resolving code needs\n * to track or register its \"own\" `Promise` *as seen by the caller* in some way. E.g.,\n * when mapping `Promise` chains for `client.cancel()`.\n *\n * @param resolver\n * @returns\n */\nfunction selfAwareAsync(resolver) {\n    let resolve;\n    let reject;\n    const resultPromise = new Promise((res, rej) => {\n        resolve = res;\n        reject = rej;\n    });\n    resolver(resultPromise)\n        .then((result) => {\n        resolve(result);\n    })\n        .catch((error) => {\n        reject(error);\n    });\n    return resultPromise;\n}\n\nexport { selfAwareAsync };\n//# sourceMappingURL=selfAwareAsync.mjs.map\n","/**\n * A map of cancellable promise \"extensions\".\n *\n * Each entry value must either be a directly `cancel()`-able promise, or must\n * refer to another entry.\n *\n * When cancellation of a promise is requested, cancel\n * will check to see if the promise exists in the map. If it does, it pulls\n * the value and repeats the check. If not, it will perform the underlying\n * cancel operation.\n */\nconst promiseMap = new WeakMap();\nfunction extendCancellability(existingCancellablePromise, newPromiseToRegister) {\n    promiseMap.set(newPromiseToRegister, existingCancellablePromise);\n    return existingCancellablePromise.finally(() => {\n        promiseMap.delete(newPromiseToRegister);\n    });\n}\n/**\n * Wraps the existing `cancel()` method with logic to iteratively search for\n * the corresponding base level promise, if needed, that the core graphql client\n * knows how to cancel.\n *\n * @param client\n */\nfunction upgradeClientCancellation(client) {\n    const innerCancel = client.cancel.bind(client);\n    client.cancel = function (promise, message) {\n        const visited = new Set();\n        let targetPromise = promise;\n        while (targetPromise && promiseMap.has(targetPromise)) {\n            if (visited.has(targetPromise))\n                throw new Error('A cycle was detected in the modeled graphql cancellation chain. This is a bug. Please report it!');\n            visited.add(targetPromise);\n            targetPromise = promiseMap.get(targetPromise);\n        }\n        // call `innerCancel` with `targetPromise!` to defer to existing implementation\n        // on how to handle `null | undefined` or otherwise \"non-cancellable\" objects.\n        return innerCancel(targetPromise, message);\n    };\n}\n\nexport { extendCancellability, upgradeClientCancellation };\n//# sourceMappingURL=cancellation.mjs.map\n","import { resolveOwnerFields } from '../utils/resolveOwnerFields.mjs';\nimport { capitalize } from '../utils/stringTransformation.mjs';\nimport { selfAwareAsync } from '../utils/selfAwareAsync.mjs';\nimport { extendCancellability } from './cancellation.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\nconst connectionType = {\n    HAS_ONE: 'HAS_ONE',\n    HAS_MANY: 'HAS_MANY',\n    BELONGS_TO: 'BELONGS_TO',\n};\n// When generating an SK's KeyConditionInput name, string-like types map to String\nconst skGraphQlFieldTypeMap = {\n    ID: 'ID',\n    String: 'String',\n    AWSDate: 'String',\n    AWSTime: 'String',\n    AWSDateTime: 'String',\n    AWSTimestamp: 'Int',\n    AWSEmail: 'String',\n    AWSPhone: 'String',\n    AWSURL: 'String',\n    AWSIPAddress: 'String',\n    AWSJSON: 'String',\n    Boolean: 'Boolean',\n    Int: 'Int',\n    Float: 'Float',\n};\n// move to util\nconst resolvedSkName = (sk) => {\n    if (sk.length === 1) {\n        return sk[0];\n    }\n    else {\n        return sk.reduce((acc, curr, idx) => {\n            if (idx === 0) {\n                return curr;\n            }\n            else {\n                return acc + capitalize(curr);\n            }\n        }, '');\n    }\n};\n/**\n * Crawls a model tree, starting with a given **individual** model instance record, looking\n * for related hasMany children to extract from their `items` containers.\n *\n * E.g., if we have a record like this:\n *\n * ```js\n * {\n *   id: 'some-id',\n *   children: {\n *     items: [\n *       { name: 'a' }\n *       { name: 'b' }\n *       { name: 'c' }\n *     ]\n *   }\n * }\n * ```\n *\n * And if `children` refers to *an array of another model* (as opposed to a custom type),\n * the `items` will be extracted. We do this because `items` is just the mechanism for nesting\n * child records -- we don't want customers to have to dig the items out in application code.\n * Ultimately, we return this \"flattened\" structure:\n *\n * ```js\n * {\n *   id: 'some-id',\n *   children: [\n *     { name: 'a' }\n *     { name: 'b' }\n *     { name: 'c' }\n *   ]\n * }\n * ```\n *\n * Notably, an identical record could be the result of a nested custom type that contains an\n * `items` property. This will *not* be flattened, because in that case the `items` property is\n * actually part of the customer's schema. Similarly if a model contains an explicit `items` field.\n *\n * @param modelIntrospection Top-level model introspection schema.\n * @param modelName The name of the model. Can be `undefined`. E.g., for customOperation return types.\n * @param modelRecord The individual \"model instance record\" to normalize.\n */\nconst flattenItems = (modelIntrospection, modelName, modelRecord) => {\n    if (!modelRecord)\n        return null;\n    const mapped = {};\n    for (const [fieldName, value] of Object.entries(modelRecord)) {\n        const fieldDef = modelName\n            ? modelIntrospection.models[modelName]?.fields[fieldName]\n            : undefined;\n        const dvPair = { fieldDef, value };\n        if (isRelatedModelItemsArrayPair(dvPair)) {\n            mapped[fieldName] = dvPair.value.items.map((itemValue) => flattenItems(modelIntrospection, dvPair.fieldDef.type.model, itemValue));\n        }\n        else if (isRelatedModelProperty(fieldDef)) {\n            mapped[fieldName] = flattenItems(modelIntrospection, fieldDef.type.model, value);\n        }\n        else {\n            mapped[fieldName] = value;\n        }\n    }\n    return mapped;\n};\n/**\n * Determines whether the given field definition and associated result value\n * represent a related model array from a HasMany-type relationship.\n *\n * @param dv Pair of field definition and associated result value\n * @returns\n */\nfunction isRelatedModelItemsArrayPair(dv) {\n    return (typeof dv.fieldDef?.type === 'object' &&\n        'model' in dv.fieldDef.type &&\n        typeof dv.fieldDef.type.model === 'string' &&\n        dv.fieldDef.isArray &&\n        Array.isArray(dv.value?.items));\n}\n/**\n * Determines whether the given field definition represents a relationship\n * to another model.\n *\n * @param fieldDef\n * @returns\n */\nfunction isRelatedModelProperty(fieldDef) {\n    return (typeof fieldDef?.type === 'object' &&\n        'model' in fieldDef.type &&\n        typeof fieldDef.type.model === 'string');\n}\n// TODO: this should accept single result to support CRUD methods; create helper for array/list\nfunction initializeModel(client, modelName, result, modelIntrospection, authMode, authToken, context = false) {\n    const introModel = modelIntrospection.models[modelName];\n    const introModelFields = introModel.fields;\n    const modelFields = Object.entries(introModelFields)\n        .filter(([_, field]) => field?.type?.model !== undefined)\n        .map(([fieldName]) => fieldName);\n    return result.map((record) => {\n        if (record === null || record === undefined) {\n            return record;\n        }\n        const initializedRelationshipFields = {};\n        for (const fieldName of modelFields) {\n            const modelField = introModelFields[fieldName];\n            const modelFieldType = modelField?.type;\n            const relatedModelName = modelFieldType.model;\n            const relatedModel = modelIntrospection.models[relatedModelName];\n            const relatedModelPKFieldName = relatedModel.primaryKeyInfo.primaryKeyFieldName;\n            const relatedModelSKFieldNames = relatedModel.primaryKeyInfo.sortKeyFieldNames;\n            const relationType = modelField.association?.connectionType;\n            let connectionFields = [];\n            if (modelField.association &&\n                'associatedWith' in modelField.association) {\n                connectionFields = modelField.association.associatedWith;\n            }\n            const targetNames = [];\n            if (modelField.association && 'targetNames' in modelField.association) {\n                targetNames.push(...modelField.association.targetNames);\n            }\n            switch (relationType) {\n                case connectionType.BELONGS_TO: {\n                    const sortKeyValues = relatedModelSKFieldNames.reduce(\n                    // TODO(Eslint): is this implementation correct?\n                    // eslint-disable-next-line array-callback-return\n                    (acc, curVal) => {\n                        if (record[curVal]) {\n                            acc[curVal] = record[curVal];\n                        }\n                        return acc;\n                    }, {});\n                    // if get is disabled on the related model\n                    if (client.models[relatedModelName]?.get === undefined) {\n                        break;\n                    }\n                    if (context) {\n                        initializedRelationshipFields[fieldName] = (contextSpec, options) => {\n                            if (record[targetNames[0]]) {\n                                return client.models[relatedModelName].get(contextSpec, {\n                                    [relatedModelPKFieldName]: record[targetNames[0]],\n                                    ...sortKeyValues,\n                                }, {\n                                    authMode: options?.authMode || authMode,\n                                    authToken: options?.authToken || authToken,\n                                });\n                            }\n                            return { data: null };\n                        };\n                    }\n                    else {\n                        initializedRelationshipFields[fieldName] = (options) => {\n                            if (record[targetNames[0]]) {\n                                return client.models[relatedModelName].get({\n                                    [relatedModelPKFieldName]: record[targetNames[0]],\n                                    ...sortKeyValues,\n                                }, {\n                                    authMode: options?.authMode || authMode,\n                                    authToken: options?.authToken || authToken,\n                                });\n                            }\n                            return { data: null };\n                        };\n                    }\n                    break;\n                }\n                case connectionType.HAS_ONE:\n                case connectionType.HAS_MANY: {\n                    /**\n                     * If the loader is a HAS_ONE, we just need to attempt to grab the first item\n                     * from the result.\n                     */\n                    const mapResult = relationType === connectionType.HAS_ONE\n                        ? (result) => {\n                            return {\n                                data: result?.data.shift() || null,\n                                errors: result.errors,\n                                extensions: result.extensions,\n                            };\n                        }\n                        : (result) => result;\n                    const parentPk = introModel.primaryKeyInfo.primaryKeyFieldName;\n                    const parentSK = introModel.primaryKeyInfo.sortKeyFieldNames;\n                    // M:N check - TODO: refactor\n                    const relatedModelField = relatedModel.fields[connectionFields[0]];\n                    const relatedModelFieldType = relatedModelField.type;\n                    if (relatedModelFieldType.model) {\n                        let relatedTargetNames = [];\n                        if (relatedModelField.association &&\n                            'targetNames' in relatedModelField.association) {\n                            relatedTargetNames = relatedModelField.association?.targetNames;\n                        }\n                        const hasManyFilter = relatedTargetNames.map((field, idx) => {\n                            if (idx === 0) {\n                                return { [field]: { eq: record[parentPk] } };\n                            }\n                            return { [field]: { eq: record[parentSK[idx - 1]] } };\n                        });\n                        // if list is disabled on the related model\n                        if (client.models[relatedModelName]?.list === undefined) {\n                            break;\n                        }\n                        if (context) {\n                            initializedRelationshipFields[fieldName] = (contextSpec, options) => {\n                                if (record[parentPk]) {\n                                    return selfAwareAsync(async (resultPromise) => {\n                                        const basePromise = client.models[relatedModelName].list(contextSpec, {\n                                            filter: { and: hasManyFilter },\n                                            limit: options?.limit,\n                                            nextToken: options?.nextToken,\n                                            authMode: options?.authMode || authMode,\n                                            authToken: options?.authToken || authToken,\n                                        });\n                                        const extendedBase = extendCancellability(basePromise, resultPromise);\n                                        return mapResult((await extendedBase));\n                                    });\n                                }\n                                return [];\n                            };\n                        }\n                        else {\n                            initializedRelationshipFields[fieldName] = (options) => {\n                                if (record[parentPk]) {\n                                    return selfAwareAsync(async (resultPromise) => {\n                                        const basePromise = client.models[relatedModelName].list({\n                                            filter: { and: hasManyFilter },\n                                            limit: options?.limit,\n                                            nextToken: options?.nextToken,\n                                            authMode: options?.authMode || authMode,\n                                            authToken: options?.authToken || authToken,\n                                        });\n                                        const extendedBase = extendCancellability(basePromise, resultPromise);\n                                        return mapResult((await extendedBase));\n                                    });\n                                }\n                                return [];\n                            };\n                        }\n                        break;\n                    }\n                    const hasManyFilter = connectionFields.map((field, idx) => {\n                        if (idx === 0) {\n                            return { [field]: { eq: record[parentPk] } };\n                        }\n                        return { [field]: { eq: record[parentSK[idx - 1]] } };\n                    });\n                    // if list is disabled on the related model\n                    if (client.models[relatedModelName]?.list === undefined) {\n                        break;\n                    }\n                    if (context) {\n                        initializedRelationshipFields[fieldName] = (contextSpec, options) => {\n                            if (record[parentPk]) {\n                                return selfAwareAsync(async (resultPromise) => {\n                                    const basePromise = client.models[relatedModelName].list(contextSpec, {\n                                        filter: { and: hasManyFilter },\n                                        limit: options?.limit,\n                                        nextToken: options?.nextToken,\n                                        authMode: options?.authMode || authMode,\n                                        authToken: options?.authToken || authToken,\n                                    });\n                                    const extendedBase = extendCancellability(basePromise, resultPromise);\n                                    return mapResult((await extendedBase));\n                                });\n                            }\n                            return [];\n                        };\n                    }\n                    else {\n                        initializedRelationshipFields[fieldName] = (options) => {\n                            if (record[parentPk]) {\n                                return selfAwareAsync(async (resultPromise) => {\n                                    const basePromise = client.models[relatedModelName].list({\n                                        filter: { and: hasManyFilter },\n                                        limit: options?.limit,\n                                        nextToken: options?.nextToken,\n                                        authMode: options?.authMode || authMode,\n                                        authToken: options?.authToken || authToken,\n                                    });\n                                    const extendedBase = extendCancellability(basePromise, resultPromise);\n                                    return mapResult((await extendedBase));\n                                });\n                            }\n                            return [];\n                        };\n                    }\n                    break;\n                }\n            }\n        }\n        return { ...record, ...initializedRelationshipFields };\n    });\n}\nconst graphQLOperationsInfo = {\n    CREATE: { operationPrefix: 'create', usePlural: false },\n    GET: { operationPrefix: 'get', usePlural: false },\n    UPDATE: { operationPrefix: 'update', usePlural: false },\n    DELETE: { operationPrefix: 'delete', usePlural: false },\n    LIST: { operationPrefix: 'list', usePlural: true },\n    INDEX_QUERY: { operationPrefix: '', usePlural: false },\n    ONCREATE: { operationPrefix: 'onCreate', usePlural: false },\n    ONUPDATE: { operationPrefix: 'onUpdate', usePlural: false },\n    ONDELETE: { operationPrefix: 'onDelete', usePlural: false },\n    OBSERVEQUERY: { operationPrefix: 'observeQuery', usePlural: false },\n};\nconst SELECTION_SET_WILDCARD = '*';\nconst getDefaultSelectionSetForNonModelWithIR = (nonModelDefinition, modelIntrospection) => {\n    const { fields } = nonModelDefinition;\n    const mappedFields = Object.values(fields)\n        .map(({ type, name }) => {\n        if (typeof type.enum === 'string') {\n            return [name, FIELD_IR];\n        }\n        if (typeof type.nonModel === 'string') {\n            return [\n                name,\n                getDefaultSelectionSetForNonModelWithIR(modelIntrospection.nonModels[type.nonModel], modelIntrospection),\n            ];\n        }\n        if (typeof type === 'string') {\n            return [name, FIELD_IR];\n        }\n        return undefined;\n    })\n        .filter((pair) => pair !== undefined);\n    return Object.fromEntries(mappedFields);\n};\nconst getDefaultSelectionSetForModelWithIR = (modelDefinition, modelIntrospection) => {\n    const { fields } = modelDefinition;\n    const mappedFields = Object.values(fields)\n        .map(({ type, name }) => {\n        if (typeof type.enum === 'string' ||\n            typeof type === 'string') {\n            return [name, FIELD_IR];\n        }\n        if (typeof type.nonModel === 'string') {\n            return [\n                name,\n                getDefaultSelectionSetForNonModelWithIR(modelIntrospection.nonModels[type.nonModel], modelIntrospection),\n            ];\n        }\n        return undefined;\n    })\n        .filter((pair) => pair !== undefined);\n    const ownerFields = resolveOwnerFields(modelDefinition).map((field) => [\n        field,\n        FIELD_IR,\n    ]);\n    return Object.fromEntries(mappedFields.concat(ownerFields));\n};\nfunction defaultSelectionSetForModel(modelDefinition) {\n    // fields that are explicitly part of the graphql schema; not\n    // inferred from owner auth rules.\n    const { fields } = modelDefinition;\n    const explicitFields = Object.values(fields)\n        // Default selection set omits model fields\n        .map(({ type, name }) => {\n        if (typeof type === 'string')\n            return name;\n        if (typeof type === 'object') {\n            if (typeof type?.enum === 'string') {\n                return name;\n            }\n            else if (typeof type?.nonModel === 'string') {\n                return `${name}.${SELECTION_SET_WILDCARD}`;\n            }\n        }\n        return undefined;\n    })\n        .filter(Boolean);\n    // fields used for owner auth rules that may or may not also\n    // be explicit on the model.\n    const ownerFields = resolveOwnerFields(modelDefinition);\n    return Array.from(new Set(explicitFields.concat(ownerFields)));\n}\nconst FIELD_IR = '';\n/**\n * Generates nested Custom Selection Set IR from path\n *\n * @param modelDefinitions\n * @param modelName\n * @param selectionSet - array of object paths\n * @example\n * ### Given\n * `selectionSet = ['id', 'comments.post.id']`\n * ### Returns\n * ```ts\n * {\n *   id: '',\n *   comments: {\n *     items: { post: { id: '' } }\n *   }\n * }\n * ```\n */\nfunction customSelectionSetToIR(modelIntrospection, modelName, selectionSet) {\n    const dotNotationToObject = (path, modelOrNonModelName) => {\n        const [fieldName, ...rest] = path.split('.');\n        const nested = rest[0];\n        const modelOrNonModelDefinition = modelIntrospection.models[modelOrNonModelName] ??\n            modelIntrospection.nonModels[modelOrNonModelName];\n        const modelOrNonModelFields = modelOrNonModelDefinition?.fields;\n        const relatedModel = modelOrNonModelFields?.[fieldName]?.type?.model;\n        const relatedModelDefinition = modelIntrospection.models[relatedModel];\n        const relatedNonModel = modelOrNonModelFields?.[fieldName]?.type?.nonModel;\n        const relatedNonModelDefinition = modelIntrospection.nonModels[relatedNonModel];\n        const isModelOrNonModelOrFieldType = relatedModelDefinition\n            ? 'model'\n            : relatedNonModelDefinition\n                ? 'nonModel'\n                : 'field';\n        if (isModelOrNonModelOrFieldType === 'nonModel') {\n            let result = {};\n            if (!nested) {\n                throw Error(`${fieldName} must declare a wildcard (*) or a field of custom type ${relatedNonModel}`);\n            }\n            if (nested === SELECTION_SET_WILDCARD) {\n                result = {\n                    [fieldName]: getDefaultSelectionSetForNonModelWithIR(relatedNonModelDefinition, modelIntrospection),\n                };\n            }\n            else {\n                result = {\n                    [fieldName]: dotNotationToObject(rest.join('.'), relatedNonModel),\n                };\n            }\n            return result;\n        }\n        else if (isModelOrNonModelOrFieldType === 'model') {\n            let result = {};\n            if (!nested) {\n                throw Error(`${fieldName} must declare a wildcard (*) or a field of model ${relatedModel}`);\n            }\n            if (nested === SELECTION_SET_WILDCARD) {\n                const nestedRelatedModelDefinition = modelIntrospection.models[relatedModel];\n                result = {\n                    [fieldName]: getDefaultSelectionSetForModelWithIR(nestedRelatedModelDefinition, modelIntrospection),\n                };\n            }\n            else {\n                result = {\n                    [fieldName]: dotNotationToObject(rest.join('.'), relatedModel),\n                };\n            }\n            if (modelOrNonModelFields[fieldName]?.isArray) {\n                result = {\n                    [fieldName]: {\n                        items: result[fieldName],\n                    },\n                };\n            }\n            return result;\n        }\n        else {\n            const modelField = modelOrNonModelFields?.[fieldName];\n            const nonModelDefinition = modelIntrospection.nonModels[modelOrNonModelName];\n            const nonModelField = nonModelDefinition?.fields?.[fieldName];\n            if (!nonModelDefinition) {\n                const isOwnerField = resolveOwnerFields(modelOrNonModelDefinition).includes(fieldName);\n                if (!modelField && !isOwnerField) {\n                    throw Error(`${fieldName} is not a field of model ${modelOrNonModelName}`);\n                }\n            }\n            else {\n                if (!nonModelField) {\n                    throw Error(`${fieldName} is not a field of custom type ${modelOrNonModelName}`);\n                }\n            }\n            return { [fieldName]: FIELD_IR };\n        }\n    };\n    return selectionSet.reduce((resultObj, path) => deepMergeSelectionSetObjects(dotNotationToObject(path, modelName), resultObj), {});\n}\n/**\n * Stringifies selection set IR\n * * @example\n * ### Given\n * ```ts\n * {\n *   id: '',\n *   comments: {\n *     items: { post: { id: '' } }\n *   }\n * }\n * ```\n * ### Returns\n * `'id comments { items { post { id } } }'`\n */\nfunction selectionSetIRToString(obj) {\n    const res = [];\n    Object.entries(obj).forEach(([fieldName, value]) => {\n        if (value === FIELD_IR) {\n            res.push(fieldName);\n        }\n        else if (typeof value === 'object' && value !== null) {\n            if (value?.items) {\n                res.push(fieldName, '{', 'items', '{', selectionSetIRToString(value.items), '}', '}');\n            }\n            else {\n                res.push(fieldName, '{', selectionSetIRToString(value), '}');\n            }\n        }\n    });\n    return res.join(' ');\n}\n/**\n * Recursively merges selection set objects from `source` onto `target`.\n *\n * `target` will be updated. `source` will be left alone.\n *\n * @param source The object to merge into target.\n * @param target The object to be mutated.\n */\nfunction deepMergeSelectionSetObjects(source, target) {\n    const isObject = (obj) => obj && typeof obj === 'object';\n    for (const key in source) {\n        // This verification avoids 'Prototype Pollution' issue\n        if (!Object.prototype.hasOwnProperty.call(source, key))\n            continue;\n        if (Object.prototype.hasOwnProperty.call(target, key) &&\n            isObject(target[key])) {\n            deepMergeSelectionSetObjects(source[key], target[key]);\n        }\n        else {\n            target[key] = source[key];\n        }\n    }\n    return target;\n}\nfunction generateSelectionSet(modelIntrospection, modelName, selectionSet) {\n    const modelDefinition = modelIntrospection.models[modelName];\n    const selSetIr = customSelectionSetToIR(modelIntrospection, modelName, selectionSet ?? defaultSelectionSetForModel(modelDefinition));\n    const selSetString = selectionSetIRToString(selSetIr);\n    return selSetString;\n}\nfunction generateGraphQLDocument(modelIntrospection, modelDefinition, modelOperation, listArgs, indexMeta) {\n    const { name, pluralName, fields, primaryKeyInfo: { isCustomPrimaryKey, primaryKeyFieldName, sortKeyFieldNames, }, attributes, } = modelDefinition;\n    // Use pascal case of the model name to generate the operations and the arguments.\n    // This is required to be in sync with the resources generated by the GraphQL transformers.\n    const namePascalCase = name.charAt(0).toUpperCase() + name.slice(1);\n    const pluralNamePascalCase = pluralName.charAt(0).toUpperCase() + pluralName.slice(1);\n    const { operationPrefix, usePlural } = graphQLOperationsInfo[modelOperation];\n    const { selectionSet } = listArgs || {};\n    let graphQLFieldName;\n    let indexQueryArgs;\n    if (operationPrefix) {\n        graphQLFieldName = `${operationPrefix}${usePlural ? pluralNamePascalCase : namePascalCase}`;\n    }\n    else if (indexMeta) {\n        const { queryField, pk, sk = [] } = indexMeta;\n        graphQLFieldName = queryField;\n        /**\n         * **a. Single field SK** -> single arg where name is the field name and the type is `Model${gqlFieldType}KeyConditionInput` (nullable)\n         *  Note: string-like data types e.g.,  AWSDateTime, AWSEmail, AWSPhone, etc. should map to String. See `skGraphQlFieldTypeMap` above\n         * @example\n         * ```\n         * sk1: ModelStringKeyConditionInput\n         * ```\n         *\n         * **b. Composite SK** -> single arg where the name is camelCase concatenation of all the field names that comprise the SK\n         *  and the type is `Model${modelName}${keyAttributeName}CompositeKeyConditionInput` (nullable)\n         * @example\n         * ```\n         * sk1Sk2: ModelMyModelMyModelByPkAndSk1AndSk2CompositeKeyConditionInput\n         */\n        let skQueryArgs = {};\n        if (sk.length === 1) {\n            const [skField] = sk;\n            const type = (typeof fields[skField].type === 'string'\n                ? fields[skField].type\n                : 'String');\n            const normalizedType = skGraphQlFieldTypeMap[type];\n            skQueryArgs = {\n                [skField]: `Model${normalizedType}KeyConditionInput`,\n            };\n        }\n        else if (sk.length > 1) {\n            const compositeSkArgName = resolvedSkName(sk);\n            const keyName = attributes?.find((attr) => attr?.properties?.queryField === queryField)?.properties?.name;\n            skQueryArgs = {\n                [compositeSkArgName]: `Model${capitalize(name)}${capitalize(keyName)}CompositeKeyConditionInput`,\n            };\n        }\n        indexQueryArgs = {\n            [pk]: `${Object.prototype.hasOwnProperty.call(fields[pk].type, 'enum')\n                ? fields[pk].type.enum // AppSync schema sets enum type as the type of the enum fields that's used as PK\n                : fields[pk].type}!`,\n            ...skQueryArgs,\n        };\n    }\n    else {\n        throw new Error('Error generating GraphQL Document - invalid operation name');\n    }\n    let graphQLOperationType;\n    let graphQLSelectionSet;\n    let graphQLArguments;\n    const selectionSetFields = generateSelectionSet(modelIntrospection, name, selectionSet);\n    // default PK args for get and list operations\n    // modified below for CPK\n    const getPkArgs = {\n        [primaryKeyFieldName]: `${fields[primaryKeyFieldName].type}!`,\n    };\n    const listPkArgs = {};\n    /**\n     * Generate query field args for the SK if it's defined\n     *\n     * **1. Get queries** require each SK field to be present as a separate arg where the type is the field's GraphQL scalar type (non-nullable)\n     * @example\n     * ```\n     * sk1: String!, sk2: Int!\n     * ```\n     *\n     * **2. List queries**\n     *\n     * **a. Single field SK** -> single arg where name is the field name and the type is `Model${gqlFieldType}KeyConditionInput` (nullable)\n     *      Note: string-like data types e.g.,  AWSDateTime, AWSEmail, AWSPhone, etc. should map to String. See `skGraphQlFieldTypeMap` above\n     * @example\n     * ```\n     * sk1: ModelStringKeyConditionInput\n     * ```\n     *\n     * **b. Composite SK** -> single arg where the name is camelCase concatenation of all the field names that comprise the SK\n     *  and the type is `Model${modelName}PrimaryCompositeKeyConditionInput` (nullable)\n     * @example\n     * ```\n     * sk1Sk2: ModelMyModelPrimaryCompositeKeyConditionInput\n     * ```\n     */\n    const generateSkArgs = (op) => {\n        if (sortKeyFieldNames.length === 0)\n            return {};\n        if (op === 'get') {\n            return sortKeyFieldNames.reduce((acc, fieldName) => {\n                const fieldType = fields[fieldName].type;\n                if (op === 'get') {\n                    acc[fieldName] = `${fieldType}!`; // ! - SK args are non-nullable in Get queries\n                }\n                return acc;\n            }, {});\n        }\n        else {\n            // list SK\n            if (sortKeyFieldNames.length === 1) {\n                // Single SK\n                const [sk] = sortKeyFieldNames;\n                const type = (typeof fields[sk].type === 'string' ? fields[sk].type : 'String');\n                const normalizedType = skGraphQlFieldTypeMap[type];\n                return {\n                    [sk]: `Model${normalizedType}KeyConditionInput`,\n                };\n            }\n            else {\n                // Composite SK\n                const compositeSkArgName = resolvedSkName(sortKeyFieldNames);\n                return {\n                    [compositeSkArgName]: `Model${capitalize(name)}PrimaryCompositeKeyConditionInput`,\n                };\n            }\n        }\n    };\n    if (isCustomPrimaryKey) {\n        Object.assign(getPkArgs, generateSkArgs('get'));\n        Object.assign(listPkArgs, {\n            // PK is only included in list query field args in the generated GQL\n            // when explicitly specifying PK with .identifier(['fieldName']) or @primaryKey in the schema definition\n            [primaryKeyFieldName]: `${fields[primaryKeyFieldName].type}`, // PK is always a nullable arg for list (no `!` after the type)\n            sortDirection: 'ModelSortDirection',\n        }, generateSkArgs('list'));\n    }\n    switch (modelOperation) {\n        case 'CREATE':\n        case 'UPDATE':\n        case 'DELETE':\n            graphQLArguments ??\n                (graphQLArguments = {\n                    input: `${operationPrefix.charAt(0).toLocaleUpperCase() +\n                        operationPrefix.slice(1)}${namePascalCase}Input!`,\n                });\n            graphQLOperationType ?? (graphQLOperationType = 'mutation');\n        // TODO(Eslint): this this case clause correct without the break statement?\n        // eslint-disable-next-line no-fallthrough\n        case 'GET':\n            graphQLArguments ?? (graphQLArguments = getPkArgs);\n            graphQLSelectionSet ?? (graphQLSelectionSet = selectionSetFields);\n        // TODO(Eslint): this this case clause correct without the break statement?\n        // eslint-disable-next-line no-fallthrough\n        case 'LIST':\n            graphQLArguments ??\n                (graphQLArguments = {\n                    ...listPkArgs,\n                    // eslint doesn't like the ts-ignore, because it thinks it's unnecessary.\n                    // But TS doesn't like the `filter: ...` because it think it will always be\n                    // overwritten. (it won't be.) so, we need to ignore the TS error and then\n                    // ignore the eslint error on the ts-ignore.\n                    // eslint-disable-next-line\n                    // @ts-ignore\n                    filter: `Model${namePascalCase}FilterInput`,\n                    limit: 'Int',\n                    nextToken: 'String',\n                });\n            graphQLOperationType ?? (graphQLOperationType = 'query');\n            graphQLSelectionSet ??\n                (graphQLSelectionSet = `items { ${selectionSetFields} } nextToken __typename`);\n        // TODO(Eslint): this this case clause correct without the break statement?\n        // eslint-disable-next-line no-fallthrough\n        case 'INDEX_QUERY':\n            graphQLArguments ??\n                (graphQLArguments = {\n                    ...indexQueryArgs,\n                    filter: `Model${namePascalCase}FilterInput`,\n                    sortDirection: 'ModelSortDirection',\n                    limit: 'Int',\n                    nextToken: 'String',\n                });\n            graphQLOperationType ?? (graphQLOperationType = 'query');\n            graphQLSelectionSet ??\n                (graphQLSelectionSet = `items { ${selectionSetFields} } nextToken __typename`);\n        // TODO(Eslint): this this case clause correct without the break statement?\n        // eslint-disable-next-line no-fallthrough\n        case 'ONCREATE':\n        case 'ONUPDATE':\n        case 'ONDELETE':\n            graphQLArguments ??\n                (graphQLArguments = {\n                    filter: `ModelSubscription${namePascalCase}FilterInput`,\n                });\n            graphQLOperationType ?? (graphQLOperationType = 'subscription');\n            graphQLSelectionSet ?? (graphQLSelectionSet = selectionSetFields);\n            break;\n        case 'OBSERVEQUERY':\n        default:\n            throw new Error('Internal error: Attempted to generate graphql document for observeQuery. Please report this error.');\n    }\n    const graphQLDocument = `${graphQLOperationType}${graphQLArguments\n        ? `(${Object.entries(graphQLArguments).map(([fieldName, type]) => `$${fieldName}: ${type}`)})`\n        : ''} { ${graphQLFieldName}${graphQLArguments\n        ? `(${Object.keys(graphQLArguments).map((fieldName) => `${fieldName}: $${fieldName}`)})`\n        : ''} { ${graphQLSelectionSet} } }`;\n    return graphQLDocument;\n}\nfunction buildGraphQLVariables(modelDefinition, operation, arg, modelIntrospection, indexMeta) {\n    const { fields, primaryKeyInfo: { isCustomPrimaryKey, primaryKeyFieldName, sortKeyFieldNames, }, } = modelDefinition;\n    const skName = sortKeyFieldNames?.length && resolvedSkName(sortKeyFieldNames);\n    let variables = {};\n    // TODO: process input\n    switch (operation) {\n        case 'CREATE':\n            variables = {\n                input: arg\n                    ? normalizeMutationInput(arg, modelDefinition, modelIntrospection)\n                    : {},\n            };\n            break;\n        case 'UPDATE':\n            // readonly fields are not  updated\n            variables = {\n                input: arg\n                    ? Object.fromEntries(Object.entries(normalizeMutationInput(arg, modelDefinition, modelIntrospection)).filter(([fieldName]) => {\n                        // omit field from update input\n                        // if exists in fields and marked read only\n                        // if does not exist in fields but implicitly added to schema via ownership\n                        return fields[fieldName]\n                            ? !fields[fieldName].isReadOnly\n                            : !resolveOwnerFields(modelDefinition).includes(fieldName);\n                    }))\n                    : {},\n            };\n            break;\n        case 'GET':\n        case 'DELETE':\n            // only identifiers are sent\n            if (arg) {\n                variables = isCustomPrimaryKey\n                    ? [primaryKeyFieldName, ...sortKeyFieldNames].reduce((acc, fieldName) => {\n                        acc[fieldName] = arg[fieldName];\n                        return acc;\n                    }, {})\n                    : { [primaryKeyFieldName]: arg[primaryKeyFieldName] };\n            }\n            if (operation === 'DELETE') {\n                variables = { input: variables };\n            }\n            break;\n        case 'LIST':\n            if (arg?.filter) {\n                variables.filter = arg.filter;\n            }\n            if (arg?.sortDirection) {\n                variables.sortDirection = arg.sortDirection;\n            }\n            if (arg && arg[primaryKeyFieldName]) {\n                variables[primaryKeyFieldName] = arg[primaryKeyFieldName];\n            }\n            if (skName && arg && arg[skName]) {\n                variables[skName] = arg[skName];\n            }\n            if (arg?.nextToken) {\n                variables.nextToken = arg.nextToken;\n            }\n            if (arg?.limit) {\n                variables.limit = arg.limit;\n            }\n            break;\n        case 'INDEX_QUERY': {\n            const { pk, sk = [] } = indexMeta;\n            const indexQuerySkName = sk?.length && resolvedSkName(sk);\n            variables[pk] = arg[pk];\n            if (indexQuerySkName && arg && arg[indexQuerySkName]) {\n                variables[indexQuerySkName] = arg[indexQuerySkName];\n            }\n            if (arg?.filter) {\n                variables.filter = arg.filter;\n            }\n            if (arg?.sortDirection) {\n                variables.sortDirection = arg.sortDirection;\n            }\n            if (arg?.nextToken) {\n                variables.nextToken = arg.nextToken;\n            }\n            if (arg?.limit) {\n                variables.limit = arg.limit;\n            }\n            break;\n        }\n        case 'ONCREATE':\n        case 'ONUPDATE':\n        case 'ONDELETE':\n            if (arg?.filter) {\n                variables = { filter: arg.filter };\n            }\n            break;\n        case 'OBSERVEQUERY':\n            throw new Error('Internal error: Attempted to build variables for observeQuery. Please report this error.');\n        default: {\n            const exhaustiveCheck = operation;\n            throw new Error(`Unhandled operation case: ${exhaustiveCheck}`);\n        }\n    }\n    return variables;\n}\n/**\n * Iterates over mutation input values and resolves any model inputs to their corresponding join fields/values\n *\n * @example\n * ### Usage\n * ```ts\n * const result = normalizeMutationInput({ post: post }, model, modelDefinition);\n * ```\n * ### Result\n * ```ts\n * { postId: \"abc123\" }\n * ```\n *\n */\nfunction normalizeMutationInput(mutationInput, model, modelIntrospection) {\n    const { fields } = model;\n    const normalized = {};\n    Object.entries(mutationInput).forEach(([inputFieldName, inputValue]) => {\n        const fieldType = fields[inputFieldName]?.type;\n        const relatedModelName = fieldType?.model;\n        if (relatedModelName) {\n            const association = fields[inputFieldName]?.association;\n            const relatedModelDef = modelIntrospection.models[relatedModelName];\n            const relatedModelPkInfo = relatedModelDef.primaryKeyInfo;\n            if (association?.connectionType === connectionType.HAS_ONE) {\n                const associationHasOne = association;\n                associationHasOne.targetNames.forEach((targetName, idx) => {\n                    const associatedFieldName = associationHasOne.associatedWith[idx];\n                    normalized[targetName] = inputValue[associatedFieldName];\n                });\n            }\n            if (association?.connectionType === connectionType.BELONGS_TO) {\n                const associationBelongsTo = association;\n                associationBelongsTo.targetNames.forEach((targetName, idx) => {\n                    if (idx === 0) {\n                        const associatedFieldName = relatedModelPkInfo.primaryKeyFieldName;\n                        normalized[targetName] = inputValue[associatedFieldName];\n                    }\n                    else {\n                        const associatedFieldName = relatedModelPkInfo.sortKeyFieldNames[idx - 1];\n                        normalized[targetName] = inputValue[associatedFieldName];\n                    }\n                });\n            }\n        }\n        else {\n            normalized[inputFieldName] = inputValue;\n        }\n    });\n    return normalized;\n}\n/**\n * Produces a parameter object that can contains auth mode/token overrides\n * only if present in either `options` (first) or configured on the `client`\n * as a fallback.\n *\n * @param client Configured client from `generateClient`\n * @param options Args/Options object from call site.\n * @returns\n */\nfunction authModeParams(client, getInternals, options = {}) {\n    const internals = getInternals(client);\n    return {\n        authMode: options.authMode || internals.authMode,\n        authToken: options.authToken || internals.authToken,\n    };\n}\n/**\n * Retrieves custom headers from either the client or request options.\n * @param client V6Client | V6ClientSSRRequest | V6ClientSSRCookies - for extracting client headers\n * @param requestHeaders {@link CustomHeaders} - request headers\n * @returns custom headers as {@link CustomHeaders}\n */\nfunction getCustomHeaders(client, getInternals, requestHeaders) {\n    let headers = getInternals(client).headers || {};\n    // Individual request headers will take precedence over client headers.\n    // We intentionally do *not* merge client and request headers.\n    if (requestHeaders) {\n        headers = requestHeaders;\n    }\n    return headers;\n}\n\nexport { authModeParams, buildGraphQLVariables, customSelectionSetToIR, flattenItems, generateGraphQLDocument, generateSelectionSet, getCustomHeaders, getDefaultSelectionSetForNonModelWithIR, graphQLOperationsInfo, initializeModel, normalizeMutationInput, selectionSetIRToString };\n//# sourceMappingURL=APIClient.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// import { GraphQLFormattedError } from '@aws-amplify/data-schema-types';\n/**\n * Handle errors for list return types (list and index query operations)\n */\nfunction handleListGraphQlError(error) {\n    if (error?.errors) {\n        // graphql errors pass through\n        return {\n            ...error,\n            data: [],\n        };\n    }\n    else {\n        // non-graphql errors are re-thrown\n        throw error;\n    }\n}\n/**\n * Handle errors for singular return types (create, get, update, delete operations)\n */\nfunction handleSingularGraphQlError(error) {\n    if (error.errors) {\n        // graphql errors pass through\n        return {\n            ...error,\n            data: null,\n        };\n    }\n    else {\n        // non-graphql errors are re-thrown\n        throw error;\n    }\n}\n\nexport { handleListGraphQlError, handleSingularGraphQlError };\n//# sourceMappingURL=utils.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Symbol used for internal user agent overrides.\n *\n * @internal\n * This symbol is intended for internal use within the Amplify library.\n * It may change or be removed in future versions without notice.\n * External usage of this symbol is discouraged and may lead to unexpected behavior.\n */\nconst INTERNAL_USER_AGENT_OVERRIDE = Symbol('INTERNAL_USER_AGENT_OVERRIDE');\nvar AiAction;\n(function (AiAction) {\n    AiAction[\"CreateConversation\"] = \"1\";\n    AiAction[\"GetConversation\"] = \"2\";\n    AiAction[\"ListConversations\"] = \"3\";\n    AiAction[\"DeleteConversation\"] = \"4\";\n    AiAction[\"SendMessage\"] = \"5\";\n    AiAction[\"ListMessages\"] = \"6\";\n    AiAction[\"OnStreamEvent\"] = \"7\";\n    AiAction[\"Generation\"] = \"8\";\n    AiAction[\"UpdateConversation\"] = \"9\";\n})(AiAction || (AiAction = {}));\nconst getCustomUserAgentDetails = (action) => ({\n    category: 'ai',\n    action,\n});\n/**\n * Creates a user agent override object based on custom details.\n *\n * @internal\n * This function is intended for internal use within the Amplify library.\n * It may change or be removed in future versions without notice.\n *\n * @param customUserAgentDetails - Optional custom user agent details\n * @returns An object with INTERNAL_USER_AGENT_OVERRIDE symbol as key and customUserAgentDetails as value, or undefined if no details provided\n */\nfunction createUserAgentOverride(customUserAgentDetails) {\n    return customUserAgentDetails\n        ? { [INTERNAL_USER_AGENT_OVERRIDE]: customUserAgentDetails }\n        : undefined;\n}\n\nexport { AiAction, INTERNAL_USER_AGENT_OVERRIDE, createUserAgentOverride, getCustomUserAgentDetails };\n//# sourceMappingURL=getCustomUserAgentDetails.mjs.map\n","import { map } from 'rxjs';\nimport { authModeParams, getCustomHeaders, initializeModel, selectionSetIRToString, getDefaultSelectionSetForNonModelWithIR, generateSelectionSet } from '../APIClient.mjs';\nimport { handleSingularGraphQlError } from './utils.mjs';\nimport { selfAwareAsync } from '../../utils/selfAwareAsync.mjs';\nimport { extendCancellability } from '../cancellation.mjs';\nimport { createUserAgentOverride } from '../ai/getCustomUserAgentDetails.mjs';\n\n/**\n * Type guard for checking whether a Custom Operation argument is a contextSpec object\n */\nconst argIsContextSpec = (arg) => {\n    return typeof arg?.token?.value === 'symbol';\n};\n/**\n * Builds an operation function, embedded with all client and context data, that\n * can be attached to a client as a custom query or mutation.\n *\n * If we have this source schema:\n *\n * ```typescript\n * a.schema({\n *   echo: a.query()\n *     .arguments({input: a.string().required()})\n *     .returns(a.string())\n * })\n * ```\n *\n * Our model intro schema will contain an entry like this:\n *\n * ```ts\n * {\n *   queries: {\n *     echo: {\n *       name: \"echo\",\n *       isArray: false,\n *       type: 'String',\n *       isRequired: false,\n *       arguments: {\n *         input: {\n *           name: 'input',\n *           isArray: false,\n *           type: String,\n *           isRequired: true\n *         }\n *       }\n *     }\n *   }\n * }\n * ```\n *\n * The `echo` object is used to build the `echo' method that goes here:\n *\n * ```typescript\n * const client = generateClent()\n * const { data } = await client.queries.echo({input: 'a string'});\n * //                                    ^\n * //                                    |\n * //                                    +-- This one right here.\n * //\n * ```\n *\n *\n * @param client The client to run graphql queries through.\n * @param modelIntrospection The model introspection schema the op comes from.\n * @param operationType The broad category of graphql operation.\n * @param operation The operation definition from the introspection schema.\n * @param useContext Whether the function needs to accept an SSR context.\n * @returns The operation function to attach to query, mutations, etc.\n */\nfunction customOpFactory(client, modelIntrospection, operationType, operation, useContext, getInternals, customUserAgentDetails) {\n    // .arguments() are defined for the custom operation in the schema builder\n    // and are present in the model introspection schema\n    const argsDefined = operation.arguments !== undefined;\n    const op = (...args) => {\n        // options is always the last argument\n        const options = args[args.length - 1];\n        let contextSpec;\n        let arg;\n        if (useContext) {\n            if (argIsContextSpec(args[0])) {\n                contextSpec = args[0];\n            }\n            else {\n                throw new Error(`Invalid first argument passed to ${operation.name}. Expected contextSpec`);\n            }\n        }\n        if (argsDefined) {\n            if (useContext) {\n                arg = args[1];\n            }\n            else {\n                arg = args[0];\n            }\n        }\n        if (operationType === 'subscription') {\n            return _opSubscription(\n            // subscriptions are only enabled on the clientside\n            client, modelIntrospection, operation, getInternals, arg, options, customUserAgentDetails);\n        }\n        return _op(client, modelIntrospection, operationType, operation, getInternals, arg, options, contextSpec, customUserAgentDetails);\n    };\n    return op;\n}\n/**\n * Runtime test and type guard to check whether `o[field]` is a `String`.\n *\n * ```typescript\n * if (hasStringField(o, 'prop')) {\n *   const s = o.prop;\n *   //    ^? const s: string\n * }\n * ```\n *\n * @param o Object to inspect\n * @param field Field to look for\n * @returns Boolean: `true` if the `o[field]` is a `string`\n */\nfunction hasStringField(o, field) {\n    return typeof o[field] === 'string';\n}\nfunction isEnumType(type) {\n    return type instanceof Object && 'enum' in type;\n}\nfunction isInputType(type) {\n    return type instanceof Object && 'input' in type;\n}\n/**\n * @param argDef A single argument definition from a custom operation\n * @returns A string naming the base type including the `!` if the arg is required.\n */\nfunction argumentBaseTypeString({ type, isRequired }) {\n    const requiredFlag = isRequired ? '!' : '';\n    if (isEnumType(type)) {\n        return `${type.enum}${requiredFlag}`;\n    }\n    if (isInputType(type)) {\n        return `${type.input}${requiredFlag}`;\n    }\n    return `${type}${requiredFlag}`;\n}\n/**\n * Generates \"outer\" arguments string for a custom operation. For example,\n * in this operation:\n *\n * ```graphql\n * query MyQuery(InputString: String!) {\n *   echoString(InputString: $InputString)\n * }\n * ```\n *\n * This function returns the top/outer level arguments as a string:\n *\n * ```json\n * \"InputString: String!\"\n * ```\n *\n * @param operation Operation object from model introspection schema.\n * @returns \"outer\" arguments string\n */\nfunction outerArguments(operation) {\n    if (operation.arguments === undefined) {\n        return '';\n    }\n    const args = Object.entries(operation.arguments)\n        .map(([k, argument]) => {\n        const baseType = argumentBaseTypeString(argument);\n        const finalType = argument.isArray\n            ? `[${baseType}]${argument.isArrayNullable ? '' : '!'}`\n            : baseType;\n        return `$${k}: ${finalType}`;\n    })\n        .join(', ');\n    return args.length > 0 ? `(${args})` : '';\n}\n/**\n * Generates \"inner\" arguments string for a custom operation. For example,\n * in this operation:\n *\n * ```graphql\n * query MyQuery(InputString: String!) {\n *   echoString(InputString: $InputString)\n * }\n * ```\n *\n * This function returns the inner arguments as a string:\n *\n * ```json\n * \"InputString: $InputString\"\n * ```\n *\n * @param operation Operation object from model introspection schema.\n * @returns \"outer\" arguments string\n */\nfunction innerArguments(operation) {\n    if (operation.arguments === undefined) {\n        return '';\n    }\n    const args = Object.keys(operation.arguments)\n        .map((k) => `${k}: $${k}`)\n        .join(', ');\n    return args.length > 0 ? `(${args})` : '';\n}\n/**\n * Generates the selection set string for a custom operation. This is slightly\n * different than the selection set generation for models. If the custom op returns\n * a primitive or enum types, it doesn't require a selection set at all.\n *\n * E.g., the graphql might look like this:\n *\n * ```graphql\n * query MyQuery {\n *   echoString(inputString: \"whatever\")\n * }\n * #                                     ^\n * #                                     |\n * #                                     +-- no selection set\n * ```\n *\n * Non-primitive return type selection set generation will be similar to other\n * model operations.\n *\n * @param modelIntrospection The full code-generated introspection schema.\n * @param operation The operation object from the schema.\n * @returns The selection set as a string.\n */\nfunction operationSelectionSet(modelIntrospection, operation) {\n    if (hasStringField(operation, 'type') ||\n        hasStringField(operation.type, 'enum')) {\n        return '';\n    }\n    else if (hasStringField(operation.type, 'nonModel')) {\n        const nonModel = modelIntrospection.nonModels[operation.type.nonModel];\n        return `{${selectionSetIRToString(getDefaultSelectionSetForNonModelWithIR(nonModel, modelIntrospection))}}`;\n    }\n    else if (hasStringField(operation.type, 'model')) {\n        return `{${generateSelectionSet(modelIntrospection, operation.type.model)}}`;\n    }\n    else {\n        return '';\n    }\n}\n/**\n * Maps an arguments objec to graphql variables, removing superfluous args and\n * screaming loudly when required args are missing.\n *\n * @param operation The operation to construct graphql request variables for.\n * @param args The arguments to map variables from.\n * @returns The graphql variables object.\n */\nfunction operationVariables(operation, args = {}) {\n    const variables = {};\n    if (operation.arguments === undefined) {\n        return variables;\n    }\n    for (const argDef of Object.values(operation.arguments)) {\n        if (typeof args[argDef.name] !== 'undefined') {\n            variables[argDef.name] = args[argDef.name];\n        }\n        else if (argDef.isRequired) {\n            // At this point, the variable is both required and missing: We don't need\n            // to continue. The operation is expected to fail.\n            throw new Error(`${operation.name} requires arguments '${argDef.name}'`);\n        }\n    }\n    return variables;\n}\n/**\n * Executes an operation from the given model intro schema against a client, returning\n * a fully instantiated model when relevant.\n *\n * @param client The client to operate `graphql()` calls through.\n * @param modelIntrospection The model intro schema to construct requests from.\n * @param operationType The high level graphql operation type.\n * @param operation The specific operation name, args, return type details.\n * @param args The arguments to provide to the operation as variables.\n * @param options Request options like headers, etc.\n * @param context SSR context if relevant.\n * @returns Result from the graphql request, model-instantiated when relevant.\n */\nfunction _op(client, modelIntrospection, operationType, operation, getInternals, args, options, context, customUserAgentDetails) {\n    return selfAwareAsync(async (resultPromise) => {\n        const { name: operationName } = operation;\n        const auth = authModeParams(client, getInternals, options);\n        const headers = getCustomHeaders(client, getInternals, options?.headers);\n        const outerArgsString = outerArguments(operation);\n        const innerArgsString = innerArguments(operation);\n        const selectionSet = operationSelectionSet(modelIntrospection, operation);\n        const returnTypeModelName = hasStringField(operation.type, 'model')\n            ? operation.type.model\n            : undefined;\n        const query = `\n    ${operationType.toLocaleLowerCase()}${outerArgsString} {\n      ${operationName}${innerArgsString} ${selectionSet}\n    }\n  `;\n        const variables = operationVariables(operation, args);\n        const userAgentOverride = createUserAgentOverride(customUserAgentDetails);\n        try {\n            const basePromise = context\n                ? client.graphql(context, {\n                    ...auth,\n                    query,\n                    variables,\n                }, headers)\n                : client.graphql({\n                    ...auth,\n                    query,\n                    variables,\n                    ...userAgentOverride,\n                }, headers);\n            const extendedPromise = extendCancellability(basePromise, resultPromise);\n            const { data, extensions } = await extendedPromise;\n            // flatten response\n            if (data) {\n                const [key] = Object.keys(data);\n                const isArrayResult = Array.isArray(data[key]);\n                // TODO: when adding support for custom selection set, flattening will need\n                // to occur recursively. For now, it's expected that related models are not\n                // present in the result. Only FK's are present. Any related model properties\n                // should be replaced with lazy loaders under the current implementation.\n                const flattenedResult = isArrayResult\n                    ? data[key].filter((x) => x)\n                    : data[key];\n                // TODO: custom selection set. current selection set is default selection set only\n                // custom selection set requires data-schema-type + runtime updates above.\n                const initialized = returnTypeModelName\n                    ? initializeModel(client, returnTypeModelName, isArrayResult ? flattenedResult : [flattenedResult], modelIntrospection, auth.authMode, auth.authToken, !!context)\n                    : flattenedResult;\n                return {\n                    data: !isArrayResult && Array.isArray(initialized)\n                        ? initialized.shift()\n                        : initialized,\n                    extensions,\n                };\n            }\n            else {\n                return { data: null, extensions };\n            }\n        }\n        catch (error) {\n            /**\n             * The `data` type returned by `error` here could be:\n             * 1) `null`\n             * 2) an empty object\n             * 3) \"populated\" but with a `null` value `{ getPost: null }`\n             * 4) an actual record `{ getPost: { id: '1', title: 'Hello, World!' } }`\n             */\n            const { data, errors } = error;\n            /**\n             * `data` is not `null`, and is not an empty object:\n             */\n            if (data && Object.keys(data).length !== 0 && errors) {\n                const [key] = Object.keys(data);\n                const isArrayResult = Array.isArray(data[key]);\n                // TODO: when adding support for custom selection set, flattening will need\n                // to occur recursively. For now, it's expected that related models are not\n                // present in the result. Only FK's are present. Any related model properties\n                // should be replaced with lazy loaders under the current implementation.\n                const flattenedResult = isArrayResult\n                    ? data[key].filter((x) => x)\n                    : data[key];\n                /**\n                 * `flattenedResult` could be `null` here (e.g. `data: { getPost: null }`)\n                 * if `flattenedResult`, result is an actual record:\n                 */\n                if (flattenedResult) {\n                    // TODO: custom selection set. current selection set is default selection set only\n                    // custom selection set requires data-schema-type + runtime updates above.\n                    const initialized = returnTypeModelName\n                        ? initializeModel(client, returnTypeModelName, isArrayResult ? flattenedResult : [flattenedResult], modelIntrospection, auth.authMode, auth.authToken, !!context)\n                        : flattenedResult;\n                    return {\n                        data: !isArrayResult && Array.isArray(initialized)\n                            ? initialized.shift()\n                            : initialized,\n                        errors,\n                    };\n                }\n                else {\n                    // was `data: { getPost: null }`)\n                    return handleSingularGraphQlError(error);\n                }\n            }\n            else {\n                // `data` is `null`:\n                return handleSingularGraphQlError(error);\n            }\n        }\n    });\n}\n/**\n * Executes an operation from the given model intro schema against a client, returning\n * a fully instantiated model when relevant.\n *\n * @param client The client to operate `graphql()` calls through.\n * @param modelIntrospection The model intro schema to construct requests from.\n * @param operation The specific operation name, args, return type details.\n * @param args The arguments to provide to the operation as variables.\n * @param options Request options like headers, etc.\n * @returns Result from the graphql request, model-instantiated when relevant.\n */\nfunction _opSubscription(client, modelIntrospection, operation, getInternals, args, options, customUserAgentDetails) {\n    const operationType = 'subscription';\n    const { name: operationName } = operation;\n    const auth = authModeParams(client, getInternals, options);\n    const headers = getCustomHeaders(client, getInternals, options?.headers);\n    const outerArgsString = outerArguments(operation);\n    const innerArgsString = innerArguments(operation);\n    const selectionSet = operationSelectionSet(modelIntrospection, operation);\n    const returnTypeModelName = hasStringField(operation.type, 'model')\n        ? operation.type.model\n        : undefined;\n    const query = `\n    ${operationType.toLocaleLowerCase()}${outerArgsString} {\n      ${operationName}${innerArgsString} ${selectionSet}\n    }\n  `;\n    const variables = operationVariables(operation, args);\n    const userAgentOverride = createUserAgentOverride(customUserAgentDetails);\n    const observable = client.graphql({\n        ...auth,\n        query,\n        variables,\n        ...userAgentOverride,\n    }, headers);\n    return observable.pipe(map((value) => {\n        const [key] = Object.keys(value.data);\n        const data = value.data[key];\n        const [initialized] = returnTypeModelName\n            ? initializeModel(client, returnTypeModelName, [data], modelIntrospection, auth.authMode, auth.authToken)\n            : [data];\n        return initialized;\n    }));\n}\n\nexport { customOpFactory };\n//# sourceMappingURL=custom.mjs.map\n","import { customOpFactory } from './operations/custom.mjs';\n\nconst operationTypeMap = {\n    queries: 'query',\n    mutations: 'mutation',\n    subscriptions: 'subscription',\n};\nfunction generateCustomOperationsProperty(client, config, operationsType, getInternals) {\n    // some bundlers end up with `Amplify.configure` being called *after* generate client.\n    // if that occurs, we need to *not error* while we wait. handling for late configuration\n    // occurs in `generateClient()`. we do not need to subscribe to Hub events here.\n    if (!config) {\n        return {};\n    }\n    const modelIntrospection = config.modelIntrospection;\n    // model intro schema might be absent if there's not actually a configured GraphQL API\n    if (!modelIntrospection) {\n        return {};\n    }\n    // custom operations will be absent from model intro schema if no custom ops\n    // are present on the source schema.\n    const operations = modelIntrospection[operationsType];\n    if (!operations) {\n        return {};\n    }\n    const ops = {};\n    const useContext = getInternals(client).amplify === null;\n    for (const operation of Object.values(operations)) {\n        ops[operation.name] = customOpFactory(client, modelIntrospection, operationTypeMap[operationsType], operation, useContext, getInternals);\n    }\n    return ops;\n}\nfunction generateCustomMutationsProperty(client, config, getInternals) {\n    return generateCustomOperationsProperty(client, config, 'mutations', getInternals);\n}\nfunction generateCustomQueriesProperty(client, config, getInternals) {\n    return generateCustomOperationsProperty(client, config, 'queries', getInternals);\n}\nfunction generateCustomSubscriptionsProperty(client, config, getInternals) {\n    return generateCustomOperationsProperty(client, config, 'subscriptions', getInternals);\n}\n\nexport { generateCustomMutationsProperty, generateCustomOperationsProperty, generateCustomQueriesProperty, generateCustomSubscriptionsProperty };\n//# sourceMappingURL=generateCustomOperationsProperty.mjs.map\n","import { generateGraphQLDocument, buildGraphQLVariables, authModeParams, getCustomHeaders, flattenItems, initializeModel } from '../APIClient.mjs';\nimport { handleSingularGraphQlError } from './utils.mjs';\nimport { selfAwareAsync } from '../../utils/selfAwareAsync.mjs';\nimport { extendCancellability } from '../cancellation.mjs';\nimport { createUserAgentOverride } from '../ai/getCustomUserAgentDetails.mjs';\n\nfunction getFactory(client, modelIntrospection, model, operation, getInternals, useContext = false, customUserAgentDetails) {\n    const getWithContext = (contextSpec, arg, options) => {\n        return _get(client, modelIntrospection, model, arg, options, operation, getInternals, contextSpec, customUserAgentDetails);\n    };\n    const get = (arg, options) => {\n        return _get(client, modelIntrospection, model, arg, options, operation, getInternals, undefined, customUserAgentDetails);\n    };\n    return useContext ? getWithContext : get;\n}\nfunction _get(client, modelIntrospection, model, arg, options, operation, getInternals, context, customUserAgentDetails) {\n    return selfAwareAsync(async (resultPromise) => {\n        const { name } = model;\n        const query = generateGraphQLDocument(modelIntrospection, model, operation, options);\n        const variables = buildGraphQLVariables(model, operation, arg, modelIntrospection);\n        const auth = authModeParams(client, getInternals, options);\n        const headers = getCustomHeaders(client, getInternals, options?.headers);\n        const userAgentOverride = createUserAgentOverride(customUserAgentDetails);\n        try {\n            const basePromise = context\n                ? client.graphql(context, {\n                    ...auth,\n                    query,\n                    variables,\n                }, headers)\n                : client.graphql({\n                    ...auth,\n                    query,\n                    variables,\n                    ...userAgentOverride,\n                }, headers);\n            const extendedPromise = extendCancellability(basePromise, resultPromise);\n            const { data, extensions } = await extendedPromise;\n            // flatten response\n            if (data) {\n                const [key] = Object.keys(data);\n                const flattenedResult = flattenItems(modelIntrospection, name, data[key]);\n                if (flattenedResult === null) {\n                    return { data: null, extensions };\n                }\n                else if (options?.selectionSet) {\n                    return { data: flattenedResult, extensions };\n                }\n                else {\n                    // TODO: refactor to avoid destructuring here\n                    const [initialized] = initializeModel(client, name, [flattenedResult], modelIntrospection, auth.authMode, auth.authToken, !!context);\n                    return { data: initialized, extensions };\n                }\n            }\n            else {\n                return { data: null, extensions };\n            }\n        }\n        catch (error) {\n            /**\n             * The `data` type returned by `error` here could be:\n             * 1) `null`\n             * 2) an empty object\n             * 3) \"populated\" but with a `null` value `{ getPost: null }`\n             * 4) an actual record `{ getPost: { id: '1', title: 'Hello, World!' } }`\n             */\n            const { data, errors } = error;\n            /**\n             * `data` is not `null`, and is not an empty object:\n             */\n            if (data && Object.keys(data).length !== 0 && errors) {\n                const [key] = Object.keys(data);\n                const flattenedResult = flattenItems(modelIntrospection, name, data[key]);\n                /**\n                 * `flattenedResult` could be `null` here (e.g. `data: { getPost: null }`)\n                 * if `flattenedResult`, result is an actual record:\n                 */\n                if (flattenedResult) {\n                    if (options?.selectionSet) {\n                        return { data: flattenedResult, errors };\n                    }\n                    else {\n                        // TODO: refactor to avoid destructuring here\n                        const [initialized] = initializeModel(client, name, [flattenedResult], modelIntrospection, auth.authMode, auth.authToken, !!context);\n                        return { data: initialized, errors };\n                    }\n                }\n                else {\n                    // was `data: { getPost: null }`)\n                    return handleSingularGraphQlError(error);\n                }\n            }\n            else {\n                // `data` is `null`:\n                return handleSingularGraphQlError(error);\n            }\n        }\n    });\n}\n\nexport { getFactory };\n//# sourceMappingURL=get.mjs.map\n","import { generateGraphQLDocument, buildGraphQLVariables, authModeParams, getCustomHeaders, flattenItems, initializeModel } from '../APIClient.mjs';\nimport { handleListGraphQlError } from './utils.mjs';\nimport { selfAwareAsync } from '../../utils/selfAwareAsync.mjs';\nimport { extendCancellability } from '../cancellation.mjs';\nimport { createUserAgentOverride } from '../ai/getCustomUserAgentDetails.mjs';\n\nfunction listFactory(client, modelIntrospection, model, getInternals, context = false, customUserAgentDetails) {\n    const listWithContext = (contextSpec, args) => {\n        return _list(client, modelIntrospection, model, getInternals, args, contextSpec, customUserAgentDetails);\n    };\n    const list = (args) => {\n        return _list(client, modelIntrospection, model, getInternals, args, undefined, customUserAgentDetails);\n    };\n    return context ? listWithContext : list;\n}\nfunction _list(client, modelIntrospection, model, getInternals, args, contextSpec, customUserAgentDetails) {\n    return selfAwareAsync(async (resultPromise) => {\n        const { name } = model;\n        const query = generateGraphQLDocument(modelIntrospection, model, 'LIST', args);\n        const variables = buildGraphQLVariables(model, 'LIST', args, modelIntrospection);\n        const auth = authModeParams(client, getInternals, args);\n        const headers = getCustomHeaders(client, getInternals, args?.headers);\n        const userAgentOverride = createUserAgentOverride(customUserAgentDetails);\n        try {\n            const basePromise = contextSpec\n                ? client.graphql(contextSpec, {\n                    ...auth,\n                    query,\n                    variables,\n                }, headers)\n                : client.graphql({\n                    ...auth,\n                    query,\n                    variables,\n                    ...userAgentOverride,\n                }, headers);\n            const extendedPromise = extendCancellability(basePromise, resultPromise);\n            const { data, extensions } = await extendedPromise;\n            // flatten response\n            if (data !== undefined) {\n                const [key] = Object.keys(data);\n                if (data[key].items) {\n                    const flattenedResult = data[key].items.map((value) => flattenItems(modelIntrospection, name, value));\n                    // don't init if custom selection set\n                    if (args?.selectionSet) {\n                        return {\n                            data: flattenedResult,\n                            nextToken: data[key].nextToken,\n                            extensions,\n                        };\n                    }\n                    else {\n                        const initialized = initializeModel(client, name, flattenedResult, modelIntrospection, auth.authMode, auth.authToken, !!contextSpec);\n                        return {\n                            data: initialized,\n                            nextToken: data[key].nextToken,\n                            extensions,\n                        };\n                    }\n                }\n                return {\n                    data: data[key],\n                    nextToken: data[key].nextToken,\n                    extensions,\n                };\n            }\n        }\n        catch (error) {\n            /**\n             * The `data` type returned by `error` here could be:\n             * 1) `null`\n             * 2) an empty object\n             * 3) \"populated\" but with a `null` value `data: { listPosts: null }`\n             * 4) actual records `data: { listPosts: items: [{ id: '1', ...etc }] }`\n             */\n            const { data, errors } = error;\n            // `data` is not `null`, and is not an empty object:\n            if (data !== undefined &&\n                data !== null &&\n                Object.keys(data).length !== 0 &&\n                errors) {\n                const [key] = Object.keys(data);\n                if (data[key]?.items) {\n                    const flattenedResult = data[key].items.map((value) => flattenItems(modelIntrospection, name, value));\n                    /**\n                     * Check exists since `flattenedResult` could be `null`.\n                     * if `flattenedResult` exists, result is an actual record.\n                     */\n                    if (flattenedResult) {\n                        // don't init if custom selection set\n                        if (args?.selectionSet) {\n                            return {\n                                data: flattenedResult,\n                                nextToken: data[key]?.nextToken,\n                                errors,\n                            };\n                        }\n                        else {\n                            const initialized = initializeModel(client, name, flattenedResult, modelIntrospection, auth.authMode, auth.authToken, !!contextSpec);\n                            // data is full record w/out selection set:\n                            return {\n                                data: initialized,\n                                nextToken: data[key]?.nextToken,\n                                errors,\n                            };\n                        }\n                    }\n                    return {\n                        data: data[key],\n                        nextToken: data[key]?.nextToken,\n                        errors,\n                    };\n                }\n                else {\n                    // response is of type `data: { getPost: null }`)\n                    return handleListGraphQlError(error);\n                }\n            }\n            else {\n                // `data` is `null` or an empty object:\n                return handleListGraphQlError(error);\n            }\n        }\n    });\n}\n\nexport { listFactory };\n//# sourceMappingURL=list.mjs.map\n","import { fromUtf8 } from \"@smithy/util-utf8\";\nimport { alphabetByValue, bitsPerByte, bitsPerLetter, maxLetterValue } from \"./constants.browser\";\nexport function toBase64(_input) {\n    let input;\n    if (typeof _input === \"string\") {\n        input = fromUtf8(_input);\n    }\n    else {\n        input = _input;\n    }\n    const isArrayLike = typeof input === \"object\" && typeof input.length === \"number\";\n    const isUint8Array = typeof input === \"object\" &&\n        typeof input.byteOffset === \"number\" &&\n        typeof input.byteLength === \"number\";\n    if (!isArrayLike && !isUint8Array) {\n        throw new Error(\"@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.\");\n    }\n    let str = \"\";\n    for (let i = 0; i < input.length; i += 3) {\n        let bits = 0;\n        let bitLength = 0;\n        for (let j = i, limit = Math.min(i + 3, input.length); j < limit; j++) {\n            bits |= input[j] << ((limit - j - 1) * bitsPerByte);\n            bitLength += bitsPerByte;\n        }\n        const bitClusterCount = Math.ceil(bitLength / bitsPerLetter);\n        bits <<= bitClusterCount * bitsPerLetter - bitLength;\n        for (let k = 1; k <= bitClusterCount; k++) {\n            const offset = (bitClusterCount - k) * bitsPerLetter;\n            str += alphabetByValue[(bits & (maxLetterValue << offset)) >> offset];\n        }\n        str += \"==\".slice(0, 4 - bitClusterCount);\n    }\n    return str;\n}\n","export const fromUtf8 = (input) => new TextEncoder().encode(input);\n","const alphabetByEncoding = {};\nconst alphabetByValue = new Array(64);\nfor (let i = 0, start = \"A\".charCodeAt(0), limit = \"Z\".charCodeAt(0); i + start <= limit; i++) {\n    const char = String.fromCharCode(i + start);\n    alphabetByEncoding[char] = i;\n    alphabetByValue[i] = char;\n}\nfor (let i = 0, start = \"a\".charCodeAt(0), limit = \"z\".charCodeAt(0); i + start <= limit; i++) {\n    const char = String.fromCharCode(i + start);\n    const index = i + 26;\n    alphabetByEncoding[char] = index;\n    alphabetByValue[index] = char;\n}\nfor (let i = 0; i < 10; i++) {\n    alphabetByEncoding[i.toString(10)] = i + 52;\n    const char = i.toString(10);\n    const index = i + 52;\n    alphabetByEncoding[char] = index;\n    alphabetByValue[index] = char;\n}\nalphabetByEncoding[\"+\"] = 62;\nalphabetByValue[62] = \"+\";\nalphabetByEncoding[\"/\"] = 63;\nalphabetByValue[63] = \"/\";\nconst bitsPerLetter = 6;\nconst bitsPerByte = 8;\nconst maxLetterValue = 0b111111;\nexport { alphabetByEncoding, alphabetByValue, bitsPerLetter, bitsPerByte, maxLetterValue };\n","import { generateGraphQLDocument, buildGraphQLVariables, authModeParams, getCustomHeaders, initializeModel, flattenItems } from '../APIClient.mjs';\nimport { handleListGraphQlError } from './utils.mjs';\nimport { selfAwareAsync } from '../../utils/selfAwareAsync.mjs';\nimport { extendCancellability } from '../cancellation.mjs';\n\nfunction indexQueryFactory(client, modelIntrospection, model, indexMeta, getInternals, context = false) {\n    const indexQueryWithContext = (contextSpec, args, options) => {\n        return _indexQuery(client, modelIntrospection, model, indexMeta, getInternals, {\n            ...args,\n            ...options,\n        }, contextSpec);\n    };\n    const indexQuery = (args, options) => {\n        return _indexQuery(client, modelIntrospection, model, indexMeta, getInternals, {\n            ...args,\n            ...options,\n        });\n    };\n    return context ? indexQueryWithContext : indexQuery;\n}\nfunction processGraphQlResponse(modelIntroSchema, modelName, result, selectionSet, modelInitializer) {\n    const { data, extensions } = result;\n    const [key] = Object.keys(data);\n    if (data[key].items) {\n        const flattenedResult = data[key].items.map((value) => flattenItems(modelIntroSchema, modelName, value));\n        return {\n            data: selectionSet ? flattenedResult : modelInitializer(flattenedResult),\n            nextToken: data[key].nextToken,\n            extensions,\n        };\n    }\n    // Index queries are always list queries. No `items`? No flattening needed.\n    return {\n        data: data[key],\n        nextToken: data[key].nextToken,\n        extensions,\n    };\n}\nfunction _indexQuery(client, modelIntrospection, model, indexMeta, getInternals, args, contextSpec) {\n    return selfAwareAsync(async (resultPromise) => {\n        const { name } = model;\n        const query = generateGraphQLDocument(modelIntrospection, model, 'INDEX_QUERY', args, indexMeta);\n        const variables = buildGraphQLVariables(model, 'INDEX_QUERY', args, modelIntrospection, indexMeta);\n        const auth = authModeParams(client, getInternals, args);\n        const modelInitializer = (flattenedResult) => initializeModel(client, name, flattenedResult, modelIntrospection, auth.authMode, auth.authToken, !!contextSpec);\n        try {\n            const headers = getCustomHeaders(client, getInternals, args?.headers);\n            const graphQlParams = {\n                ...auth,\n                query,\n                variables,\n            };\n            const requestArgs = [graphQlParams, headers];\n            if (contextSpec !== undefined) {\n                requestArgs.unshift(contextSpec);\n            }\n            const basePromise = client.graphql(...requestArgs);\n            const extendedPromise = extendCancellability(basePromise, resultPromise);\n            const response = await extendedPromise;\n            if (response.data !== undefined) {\n                return processGraphQlResponse(modelIntrospection, name, response, args?.selectionSet, modelInitializer);\n            }\n        }\n        catch (error) {\n            /**\n             * The `data` type returned by `error` here could be:\n             * 1) `null`\n             * 2) an empty object\n             * 3) \"populated\" but with a `null` value:\n             *   `data: { listByExampleId: null }`\n             * 4) an actual record:\n             *   `data: { listByExampleId: items: [{ id: '1', ...etc } }]`\n             */\n            const { data, errors } = error;\n            // `data` is not `null`, and is not an empty object:\n            if (data !== undefined &&\n                data !== null &&\n                Object.keys(data).length !== 0 &&\n                errors) {\n                const [key] = Object.keys(data);\n                if (data[key]?.items) {\n                    const flattenedResult = data[key]?.items.map((value) => flattenItems(modelIntrospection, name, value));\n                    /**\n                     * Check exists since `flattenedResult` could be `null`.\n                     * if `flattenedResult` exists, result is an actual record.\n                     */\n                    if (flattenedResult) {\n                        return {\n                            data: args?.selectionSet\n                                ? flattenedResult\n                                : modelInitializer(flattenedResult),\n                            nextToken: data[key]?.nextToken,\n                        };\n                    }\n                }\n                // response is of type `data: { listByExampleId: null }`\n                return {\n                    data: data[key],\n                    nextToken: data[key]?.nextToken,\n                };\n            }\n            else {\n                // `data` is `null` or an empty object:\n                return handleListGraphQlError(error);\n            }\n        }\n    });\n}\n\nexport { indexQueryFactory };\n//# sourceMappingURL=indexQuery.mjs.map\n","import { map } from 'rxjs';\nimport { generateGraphQLDocument, buildGraphQLVariables, authModeParams, getCustomHeaders, flattenItems, initializeModel } from '../APIClient.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction subscriptionFactory(client, modelIntrospection, model, operation, getInternals) {\n    const { name } = model;\n    const subscription = (args) => {\n        const query = generateGraphQLDocument(modelIntrospection, model, operation, args);\n        const variables = buildGraphQLVariables(model, operation, args, modelIntrospection);\n        const auth = authModeParams(client, getInternals, args);\n        const headers = getCustomHeaders(client, getInternals, args?.headers);\n        const observable = client.graphql({\n            ...auth,\n            query,\n            variables,\n        }, headers);\n        return observable.pipe(map((value) => {\n            const [key] = Object.keys(value.data);\n            const data = value.data[key];\n            const flattenedResult = flattenItems(modelIntrospection, name, data);\n            if (flattenedResult === null) {\n                return null;\n            }\n            else if (args?.selectionSet) {\n                return flattenedResult;\n            }\n            else {\n                const [initialized] = initializeModel(client, name, [flattenedResult], modelIntrospection, auth.authMode, auth.authToken);\n                return initialized;\n            }\n        }));\n    };\n    return subscription;\n}\n\nexport { subscriptionFactory };\n//# sourceMappingURL=subscription.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Iterates through a collection to find a matching item and returns the index.\n *\n * @param needle The item to search for\n * @param haystack The collection to search\n * @param keyFields The fields used to indicate a match\n * @returns Index of `needle` in `haystack`, otherwise -1 if not found.\n */\nfunction findIndexByFields(needle, haystack, keyFields) {\n    const searchObject = Object.fromEntries(keyFields.map((fieldName) => [fieldName, needle[fieldName]]));\n    for (let i = 0; i < haystack.length; i++) {\n        if (Object.keys(searchObject).every((k) => searchObject[k] === haystack[i][k])) {\n            return i;\n        }\n    }\n    return -1;\n}\n\nexport { findIndexByFields };\n//# sourceMappingURL=findIndexByFields.mjs.map\n","import { Observable } from 'rxjs';\nimport { resolvePKFields } from '../../utils/resolvePKFields.mjs';\nimport { findIndexByFields } from '../../utils/findIndexByFields.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction observeQueryFactory(models, model) {\n    const { name } = model;\n    const observeQuery = (arg) => new Observable((subscriber) => {\n        // what we'll be sending to our subscribers\n        const items = [];\n        // To enqueue subscription messages while we collect our initial\n        // result set.\n        const messageQueue = [];\n        // operation to take when message(s) arrive.\n        // this operation will be swapped out once initial \"sync\" is complete\n        // to immediately ingest messsages.\n        let receiveMessages = (...messages) => {\n            return messageQueue.push(...messages);\n        };\n        // start subscriptions\n        const onCreateSub = models[name].onCreate(arg).subscribe({\n            next(item) {\n                receiveMessages({ item, type: 'create' });\n            },\n            error(error) {\n                subscriber.error({ type: 'onCreate', error });\n            },\n        });\n        const onUpdateSub = models[name].onUpdate(arg).subscribe({\n            next(item) {\n                receiveMessages({ item, type: 'update' });\n            },\n            error(error) {\n                subscriber.error({ type: 'onUpdate', error });\n            },\n        });\n        const onDeleteSub = models[name].onDelete(arg).subscribe({\n            next(item) {\n                receiveMessages({ item, type: 'delete' });\n            },\n            error(error) {\n                subscriber.error({ type: 'onDelete', error });\n            },\n        });\n        // consumes a list of messages and sends a snapshot\n        function ingestMessages(messages) {\n            for (const message of messages) {\n                const idx = findIndexByFields(message.item, items, pkFields);\n                switch (message.type) {\n                    case 'create':\n                        if (idx < 0)\n                            items.push(message.item);\n                        break;\n                    case 'update':\n                        if (idx >= 0)\n                            items[idx] = message.item;\n                        break;\n                    case 'delete':\n                        if (idx >= 0)\n                            items.splice(idx, 1);\n                        break;\n                    default:\n                        console.error('Unrecognized message in observeQuery.', message);\n                }\n            }\n            subscriber.next({\n                items,\n                isSynced: true,\n            });\n        }\n        const pkFields = resolvePKFields(model);\n        // initial results\n        (async () => {\n            let firstPage = true;\n            let nextToken = null;\n            while (!subscriber.closed && (firstPage || nextToken)) {\n                firstPage = false;\n                const { data: page, errors, nextToken: _nextToken, } = await models[name].list({ ...arg, nextToken });\n                nextToken = _nextToken;\n                items.push(...page);\n                // if there are no more pages and no items we already know about\n                // that need to be merged in from sub, we're \"synced\"\n                const isSynced = messageQueue.length === 0 &&\n                    (nextToken === null || nextToken === undefined);\n                subscriber.next({\n                    items,\n                    isSynced,\n                });\n                if (Array.isArray(errors)) {\n                    for (const error of errors) {\n                        subscriber.error(error);\n                    }\n                }\n            }\n            // play through the queue\n            if (messageQueue.length > 0) {\n                ingestMessages(messageQueue);\n            }\n            // switch the queue to write directly to the items collection\n            receiveMessages = (...messages) => {\n                ingestMessages(messages);\n                return items.length;\n            };\n        })();\n        // when subscriber unsubscribes, tear down internal subs\n        return () => {\n            // 1. tear down internal subs\n            onCreateSub.unsubscribe();\n            onUpdateSub.unsubscribe();\n            onDeleteSub.unsubscribe();\n            // 2. there is no need to explicitly stop paging. instead, we\n            // just check `subscriber.closed` above before fetching each page.\n        };\n    });\n    return observeQuery;\n}\n\nexport { observeQueryFactory };\n//# sourceMappingURL=observeQuery.mjs.map\n","/**\n * Given a SchemaModel from a ModelIntrospectionSchema, returns the primary key\n * as an array of field names.\n *\n * @param model The model object\n * @returns Array of field names\n */\nfunction resolvePKFields(model) {\n    const { primaryKeyFieldName, sortKeyFieldNames } = model.primaryKeyInfo;\n    return [primaryKeyFieldName, ...sortKeyFieldNames];\n}\n\nexport { resolvePKFields };\n//# sourceMappingURL=resolvePKFields.mjs.map\n","import { generateCustomQueriesProperty, generateCustomMutationsProperty, generateCustomSubscriptionsProperty } from './internals/generateCustomOperationsProperty.mjs';\nimport { generateConversationsProperty } from './internals/utils/clientProperties/generateConversationsProperty.mjs';\nimport { generateGenerationsProperty } from './internals/utils/clientProperties/generateGenerationsProperty.mjs';\nimport { generateEnumsProperty } from './internals/utils/clientProperties/generateEnumsProperty.mjs';\nimport { generateModelsProperty } from './internals/utils/clientProperties/generateModelsProperty.mjs';\nimport { upgradeClientCancellation } from './internals/cancellation.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction addSchemaToClient(client, apiGraphqlConfig, getInternals) {\n    upgradeClientCancellation(client);\n    client.models = generateModelsProperty(client, apiGraphqlConfig, getInternals);\n    client.enums = generateEnumsProperty(apiGraphqlConfig);\n    client.queries = generateCustomQueriesProperty(client, apiGraphqlConfig, getInternals);\n    client.mutations = generateCustomMutationsProperty(client, apiGraphqlConfig, getInternals);\n    client.subscriptions = generateCustomSubscriptionsProperty(client, apiGraphqlConfig, getInternals);\n    client.conversations = generateConversationsProperty(client, apiGraphqlConfig, getInternals);\n    client.generations = generateGenerationsProperty(client, apiGraphqlConfig, getInternals);\n    return client;\n}\n\nexport { addSchemaToClient };\n//# sourceMappingURL=addSchemaToClient.mjs.map\n","import { listFactory } from '../../operations/list.mjs';\nimport { indexQueryFactory } from '../../operations/indexQuery.mjs';\nimport { getFactory } from '../../operations/get.mjs';\nimport { subscriptionFactory } from '../../operations/subscription.mjs';\nimport { observeQueryFactory } from '../../operations/observeQuery.mjs';\nimport { excludeDisabledOps, getSecondaryIndexesFromSchemaModel } from '../../clientUtils.mjs';\n\nfunction generateModelsProperty(client, apiGraphQLConfig, getInternals) {\n    const models = {};\n    const modelIntrospection = apiGraphQLConfig.modelIntrospection;\n    if (!modelIntrospection) {\n        return {};\n    }\n    const SUBSCRIPTION_OPS = ['ONCREATE', 'ONUPDATE', 'ONDELETE'];\n    for (const model of Object.values(modelIntrospection.models)) {\n        const { name } = model;\n        models[name] = {};\n        const enabledModelOps = excludeDisabledOps(modelIntrospection, name);\n        Object.entries(enabledModelOps).forEach(([key, { operationPrefix }]) => {\n            const operation = key;\n            if (operation === 'LIST') {\n                models[name][operationPrefix] = listFactory(client, modelIntrospection, model, getInternals);\n            }\n            else if (SUBSCRIPTION_OPS.includes(operation)) {\n                models[name][operationPrefix] = subscriptionFactory(client, modelIntrospection, model, operation, getInternals);\n            }\n            else if (operation === 'OBSERVEQUERY') {\n                models[name][operationPrefix] = observeQueryFactory(models, model);\n            }\n            else {\n                models[name][operationPrefix] = getFactory(client, modelIntrospection, model, operation, getInternals);\n            }\n        });\n        const secondaryIdxs = getSecondaryIndexesFromSchemaModel(model);\n        for (const idx of secondaryIdxs) {\n            models[name][idx.queryField] = indexQueryFactory(client, modelIntrospection, model, idx, getInternals);\n        }\n    }\n    return models;\n}\n\nexport { generateModelsProperty };\n//# sourceMappingURL=generateModelsProperty.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst generateEnumsProperty = (graphqlConfig) => {\n    const modelIntrospection = graphqlConfig.modelIntrospection;\n    if (!modelIntrospection) {\n        return {};\n    }\n    const enums = {};\n    for (const [_, enumData] of Object.entries(modelIntrospection.enums)) {\n        enums[enumData.name] = {\n            values: () => enumData.values,\n        };\n    }\n    return enums;\n};\n\nexport { generateEnumsProperty };\n//# sourceMappingURL=generateEnumsProperty.mjs.map\n","import { createCreateConversationFunction } from '../../ai/createCreateConversationFunction.mjs';\nimport { createGetConversationFunction } from '../../ai/createGetConversationFunction.mjs';\nimport { createListConversationsFunction } from '../../ai/createListConversationsFunction.mjs';\nimport { createDeleteConversationFunction } from '../../ai/createDeleteConversationFunction.mjs';\nimport { createUpdateConversationFunction } from '../../ai/createUpdateConversationFunction.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction generateConversationsProperty(client, apiGraphQLConfig, getInternals) {\n    const modelIntrospection = apiGraphQLConfig?.modelIntrospection;\n    // conversations will be absent from model intro schema if no conversation routes\n    // are present on the source schema.\n    if (!modelIntrospection?.conversations) {\n        return {};\n    }\n    const conversations = {};\n    for (const { name, conversation, message, models, nonModels, enums, } of Object.values(modelIntrospection.conversations)) {\n        const conversationModel = models[conversation.modelName];\n        const conversationMessageModel = models[message.modelName];\n        if (!conversationModel || !conversationMessageModel) {\n            return {};\n        }\n        const conversationModelIntrospection = {\n            ...modelIntrospection,\n            models: {\n                ...modelIntrospection.models,\n                ...models,\n            },\n            nonModels: {\n                ...modelIntrospection.nonModels,\n                ...nonModels,\n            },\n            enums: {\n                ...modelIntrospection.enums,\n                ...enums,\n            },\n        };\n        conversations[name] = {\n            update: createUpdateConversationFunction(client, conversationModelIntrospection, name, conversationModel, conversationMessageModel, getInternals),\n            create: createCreateConversationFunction(client, conversationModelIntrospection, name, conversationModel, conversationMessageModel, getInternals),\n            get: createGetConversationFunction(client, conversationModelIntrospection, name, conversationModel, conversationMessageModel, getInternals),\n            delete: createDeleteConversationFunction(client, conversationModelIntrospection, name, conversationModel, conversationMessageModel, getInternals),\n            list: createListConversationsFunction(client, conversationModelIntrospection, name, conversationModel, conversationMessageModel, getInternals),\n        };\n    }\n    return conversations;\n}\n\nexport { generateConversationsProperty };\n//# sourceMappingURL=generateConversationsProperty.mjs.map\n","import { customOpFactory } from '../../operations/custom.mjs';\nimport { getCustomUserAgentDetails, AiAction } from '../../ai/getCustomUserAgentDetails.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction generateGenerationsProperty(client, apiGraphQLConfig, getInternals) {\n    const modelIntrospection = apiGraphQLConfig?.modelIntrospection;\n    // generations will be absent from model intro schema if no generation routes\n    // are present on the source schema.\n    if (!modelIntrospection?.generations) {\n        return {};\n    }\n    const generations = {};\n    for (const generation of Object.values(modelIntrospection.generations)) {\n        generations[generation.name] = customOpFactory(client, modelIntrospection, 'query', generation, false, getInternals, getCustomUserAgentDetails(AiAction.Generation));\n    }\n    return generations;\n}\n\nexport { generateGenerationsProperty };\n//# sourceMappingURL=generateGenerationsProperty.mjs.map\n","import { GraphQLAPI } from '../GraphQLAPI.mjs';\nimport { getInternals } from '../types/index.mjs';\n\n/**\n * Invokes graphql operations against a graphql service, providing correct input and\n * output types if Amplify-generated graphql from a recent version of the CLI/codegen\n * are used *or* correct typing is provided via the type argument.\n *\n * Amplify-generated \"branded\" graphql queries will look similar to this:\n *\n * ```ts\n *                               //\n *                               // |-- branding\n *                               // v\n * export const getModel = `...` as GeneratedQuery<\n * \tGetModelQueryVariables,\n * \tGetModelQuery\n * >;\n * ```\n *\n * If this branding is not in your generated graphql, update to a newer version of\n * CLI/codegen and regenerate your graphql using `amplify codegen`.\n *\n * ## Using Amplify-generated graphql\n *\n * ```ts\n * import * as queries from './graphql/queries';\n *\n * //\n * //    |-- correctly typed graphql response containing a Widget\n * //    v\n * const queryResult = await graphql({\n * \tquery: queries.getWidget,\n * \tvariables: {\n * \t\tid: \"abc\", // <-- type hinted/enforced\n * \t},\n * });\n *\n * //\n * //    |-- a correctly typed Widget\n * //    v\n * const fetchedWidget = queryResult.data?.getWidget!;\n * ```\n *\n * ## Custom input + result types\n *\n * To provide input types (`variables`) and result types:\n *\n * ```ts\n * type GetById_NameOnly = {\n * \tvariables: {\n * \t\tid: string\n * \t},\n * \tresult: Promise<{\n * \t\tdata: { getWidget: { name: string } }\n * \t}>\n * }\n *\n * //\n * //    |-- type is GetById_NameOnly[\"result\"]\n * //    v\n * const result = graphql<GetById_NameOnly>({\n * \tquery: \"...\",\n * \tvariables: { id: \"abc\" }  // <-- type of GetById_NameOnly[\"variables\"]\n * });\n * ```\n *\n * ## Custom result type only\n *\n * To specify result types only, use a type that is *not* in the `{variables, result}` shape:\n *\n * ```ts\n * type MyResultType = Promise<{\n * \tdata: {\n * \t\tgetWidget: { name: string }\n * \t}\n * }>\n *\n * //\n * //    |-- type is MyResultType\n * //    v\n * const result = graphql<MyResultType>({query: \"...\"});\n * ```\n *\n * @param options\n * @param additionalHeaders\n */\nfunction graphql(options, additionalHeaders) {\n    // inject client-level auth\n    const internals = getInternals(this);\n    /**\n     * The custom `endpoint` specific to the client\n     */\n    const clientEndpoint = internals.endpoint;\n    /**\n     * The `authMode` specific to the client.\n     */\n    const clientAuthMode = internals.authMode;\n    /**\n     * The `apiKey` specific to the client.\n     */\n    const clientApiKey = internals.apiKey;\n    /**\n     * The most specific `authMode` wins. Setting an `endpoint` value without also\n     * setting an `authMode` value is invalid. This helps to prevent customers apps\n     * from unexpectedly sending auth details to endpoints the auth details do not\n     * belong to.\n     *\n     * This is especially pronounced for `apiKey`. When both an `endpoint` *and*\n     * `authMode: 'apiKey'` are provided, an explicit `apiKey` override is required\n     * to prevent inadvertent sending of an API's `apiKey` to an endpoint is does\n     * not belong to.\n     */\n    options.authMode = options.authMode || clientAuthMode;\n    options.apiKey = options.apiKey ?? clientApiKey;\n    options.authToken = options.authToken || internals.authToken;\n    if (clientEndpoint && options.authMode === 'apiKey' && !options.apiKey) {\n        throw new Error(\"graphql() requires an explicit `apiKey` for a custom `endpoint` when `authMode = 'apiKey'`.\");\n    }\n    const headers = additionalHeaders || internals.headers;\n    /**\n     * The correctness of these typings depends on correct string branding or overrides.\n     * Neither of these can actually be validated at runtime. Hence, we don't perform\n     * any validation or type-guarding here.\n     */\n    const result = GraphQLAPI.graphql(\n    // TODO: move V6Client back into this package?\n    internals.amplify, {\n        ...options,\n        endpoint: clientEndpoint,\n    }, headers);\n    return result;\n}\n/**\n * Cancels an inflight request. Only applicable for graphql queries and mutations\n * @param {any} request - request to cancel\n * @returns - A boolean indicating if the request was cancelled\n */\nfunction cancel(promise, message) {\n    return GraphQLAPI.cancel(promise, message);\n}\n/**\n * Checks to see if an error thrown is from an api request cancellation\n * @param {any} error - Any error\n * @returns - A boolean indicating if the error was from an api request cancellation\n */\nfunction isCancelError(error) {\n    return GraphQLAPI.isCancelError(error);\n}\n\nexport { cancel, graphql, isCancelError };\n//# sourceMappingURL=v6.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction isApiGraphQLConfig(apiGraphQLConfig) {\n    return apiGraphQLConfig !== undefined;\n}\n\nexport { isApiGraphQLConfig };\n//# sourceMappingURL=isApiGraphQLProviderConfig.mjs.map\n","import { generateClient as generateClient$1 } from '@aws-amplify/api-graphql/internals';\nimport { Amplify } from '@aws-amplify/core';\n\n/**\n * Generates an API client that can work with models or raw GraphQL\n *\n * @returns {@link V6Client}\n * @throws {@link Error} - Throws error when client cannot be generated due to configuration issues.\n */\nfunction generateClient(options) {\n    return generateClient$1({\n        ...(options || {}),\n        amplify: Amplify,\n    });\n}\n\nexport { generateClient };\n//# sourceMappingURL=API.mjs.map\n","import { Hub } from '@aws-amplify/core';\nimport { addSchemaToClient } from '@aws-amplify/data-schema/runtime';\nimport { __headers, __endpoint, __apiKey, __authToken, __authMode, __amplify, getInternals } from '../types/index.mjs';\nimport { isApiGraphQLConfig } from './utils/runtimeTypeGuards/isApiGraphQLProviderConfig.mjs';\nimport { isConfigureEventWithResourceConfig } from './utils/runtimeTypeGuards/isConfigureEventWithResourceConfig.mjs';\nimport { isCancelError, cancel, graphql } from './v6.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @private\n *\n * Creates a client that can be used to make GraphQL requests, using a provided `AmplifyClassV6`\n * compatible context object for config and auth fetching.\n *\n * @param params\n * @returns\n */\nfunction generateClient(params) {\n    const client = {\n        [__amplify]: params.amplify,\n        [__authMode]: params.authMode,\n        [__authToken]: params.authToken,\n        [__apiKey]: 'apiKey' in params ? params.apiKey : undefined,\n        [__endpoint]: 'endpoint' in params ? params.endpoint : undefined,\n        [__headers]: params.headers,\n        graphql,\n        cancel,\n        isCancelError,\n        models: emptyProperty,\n        enums: emptyProperty,\n        queries: emptyProperty,\n        mutations: emptyProperty,\n        subscriptions: emptyProperty,\n    };\n    const apiGraphqlConfig = params.amplify.getConfig().API?.GraphQL;\n    if (client[__endpoint]) {\n        if (!client[__authMode]) {\n            throw new Error('generateClient() requires an explicit `authMode` when `endpoint` is provided.');\n        }\n        if (client[__authMode] === 'apiKey' && !client[__apiKey]) {\n            throw new Error(\"generateClient() requires an explicit `apiKey` when `endpoint` is provided and `authMode = 'apiKey'`.\");\n        }\n    }\n    if (!client[__endpoint]) {\n        if (isApiGraphQLConfig(apiGraphqlConfig)) {\n            addSchemaToClient(client, apiGraphqlConfig, getInternals);\n        }\n        else {\n            // This happens when the `Amplify.configure()` call gets evaluated after the `generateClient()` call.\n            //\n            // Cause: when the `generateClient()` and the `Amplify.configure()` calls are located in\n            // different source files, script bundlers may randomly arrange their orders in the production\n            // bundle.\n            //\n            // With the current implementation, the `client.models` instance created by `generateClient()`\n            // will be rebuilt on every `Amplify.configure()` call that's provided with a valid GraphQL\n            // provider configuration.\n            //\n            // TODO: revisit, and reverify this approach when enabling multiple clients for multi-endpoints\n            // configuration.\n            generateModelsPropertyOnAmplifyConfigure(client);\n        }\n    }\n    return client;\n}\nconst generateModelsPropertyOnAmplifyConfigure = (clientRef) => {\n    Hub.listen('core', coreEvent => {\n        if (!isConfigureEventWithResourceConfig(coreEvent.payload)) {\n            return;\n        }\n        const apiGraphQLConfig = coreEvent.payload.data.API?.GraphQL;\n        if (isApiGraphQLConfig(apiGraphQLConfig)) {\n            addSchemaToClient(clientRef, apiGraphQLConfig, getInternals);\n        }\n    });\n};\nconst emptyProperty = new Proxy({}, {\n    get() {\n        throw new Error('Client could not be generated. This is likely due to `Amplify.configure()` not being called prior to `generateClient()` or because the configuration passed to `Amplify.configure()` is missing GraphQL provider configuration.');\n    },\n});\n\nexport { generateClient };\n//# sourceMappingURL=generateClient.mjs.map\n","import { Amplify } from '@aws-amplify/core';\nimport { amplifyUuid } from '@aws-amplify/core/internals/utils';\nimport { AppSyncEventProvider } from '../../Providers/AWSAppSyncEventsProvider/index.mjs';\nimport { appsyncRequest } from './appsyncRequest.mjs';\nimport { configure, normalizeAuth, serializeEvents } from './utils.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Keeps a list of open channels in the websocket\nconst openChannels = new Set();\n/**\n * @experimental API may change in future versions\n *\n * Establish a WebSocket connection to an Events channel\n *\n * @example\n * const channel = await events.connect(\"default/channel\")\n *\n * channel.subscribe({\n *   next: (data) => { console.log(data) },\n *   error: (err) => { console.error(err) },\n * })\n *\n * @example // authMode override\n * const channel = await events.connect(\"default/channel\", { authMode: \"userPool\" })\n *\n * @param channel - channel path; `<namespace>/<channel>`\n * @param options - request overrides: `authMode`, `authToken`\n *\n */\nasync function connect(channel, options) {\n    const providerOptions = configure();\n    providerOptions.authenticationType = normalizeAuth(options?.authMode, providerOptions.authenticationType);\n    providerOptions.apiKey = options?.apiKey || providerOptions.apiKey;\n    providerOptions.authToken = options?.authToken || providerOptions.authToken;\n    await AppSyncEventProvider.connect(providerOptions);\n    const channelId = amplifyUuid();\n    openChannels.add(channelId);\n    let _subscription;\n    const sub = (observer, subOptions) => {\n        if (!openChannels.has(channelId)) {\n            throw new Error('Channel is closed');\n        }\n        const subscribeOptions = { ...providerOptions, query: channel };\n        subscribeOptions.authenticationType = normalizeAuth(subOptions?.authMode, subscribeOptions.authenticationType);\n        subscribeOptions.apiKey = subOptions?.apiKey || subscribeOptions.apiKey;\n        subscribeOptions.authToken =\n            subOptions?.authToken || subscribeOptions.authToken;\n        _subscription = AppSyncEventProvider\n            .subscribe(subscribeOptions)\n            .subscribe(observer);\n        return _subscription;\n    };\n    const pub = async (event, pubOptions) => {\n        if (!openChannels.has(channelId)) {\n            throw new Error('Channel is closed');\n        }\n        const publishOptions = {\n            ...providerOptions,\n            query: channel,\n            variables: event,\n        };\n        publishOptions.authenticationType = normalizeAuth(pubOptions?.authMode, publishOptions.authenticationType);\n        publishOptions.apiKey = pubOptions?.apiKey || publishOptions.apiKey;\n        publishOptions.authToken =\n            pubOptions?.authToken || publishOptions.authToken;\n        return AppSyncEventProvider.publish(publishOptions);\n    };\n    const close = async () => {\n        _subscription && _subscription.unsubscribe();\n        openChannels.delete(channelId);\n        setTimeout(() => {\n            if (openChannels.size === 0) {\n                AppSyncEventProvider.closeIfNoActiveSubscription();\n            }\n        }, 1000);\n    };\n    return {\n        subscribe: sub,\n        close,\n        publish: pub,\n    };\n}\n/**\n * @experimental API may change in future versions\n *\n * Publish events to a channel via HTTP request\n *\n * @example\n * await events.post(\"default/channel\", { some: \"event\" })\n *\n * @example // event batching\n * await events.post(\"default/channel\", [{ some: \"event\" }, { some: \"event2\" }])\n *\n * @example // authMode override\n * await events.post(\"default/channel\", { some: \"event\" }, { authMode: \"userPool\" })\n *\n * @param channel - channel path; `<namespace>/<channel>`\n * @param event - JSON-serializable value or an array of values\n * @param options - request overrides: `authMode`, `authToken`\n *\n * @returns void on success\n * @throws on error\n */\nasync function post(channel, event, options) {\n    const providerOptions = configure();\n    providerOptions.authenticationType = normalizeAuth(options?.authMode, providerOptions.authenticationType);\n    providerOptions.apiKey = options?.apiKey || providerOptions.apiKey;\n    providerOptions.authToken = options?.authToken || providerOptions.authToken;\n    // trailing slash required in publish\n    const normalizedChannelName = channel[0] === '/' ? channel : `/${channel}`;\n    const publishOptions = {\n        ...providerOptions,\n        query: normalizedChannelName,\n        variables: serializeEvents(event),\n    };\n    const abortController = new AbortController();\n    const res = await appsyncRequest(Amplify, publishOptions, {}, abortController);\n    if (res.failed?.length > 0) {\n        return res.failed;\n    }\n}\n/**\n * @experimental API may change in future versions\n *\n * Close WebSocket connection, disconnect listeners and reconnect observers\n *\n * @example\n * await events.closeAll()\n *\n * @returns void on success\n * @throws on error\n */\nasync function closeAll() {\n    await AppSyncEventProvider.close();\n}\n\nexport { closeAll, connect, post };\n//# sourceMappingURL=index.mjs.map\n","import { Amplify } from '@aws-amplify/core';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst normalizeAuth = (explicitAuthMode, defaultAuthMode) => {\n    if (!explicitAuthMode) {\n        return defaultAuthMode;\n    }\n    if (explicitAuthMode === 'identityPool') {\n        return 'iam';\n    }\n    return explicitAuthMode;\n};\nconst configure = () => {\n    const config = Amplify.getConfig();\n    const eventsConfig = config.API?.Events;\n    if (!eventsConfig) {\n        throw new Error('Amplify configuration is missing. Have you called Amplify.configure()?');\n    }\n    const configAuthMode = normalizeAuth(eventsConfig.defaultAuthMode, 'apiKey');\n    const options = {\n        appSyncGraphqlEndpoint: eventsConfig.endpoint,\n        region: eventsConfig.region,\n        authenticationType: configAuthMode,\n        apiKey: eventsConfig.apiKey,\n    };\n    return options;\n};\n/**\n * Event API expects an array of JSON strings\n *\n * @param events - JSON-serializable value or an array of values\n * @returns array of JSON strings\n */\nconst serializeEvents = (events) => {\n    if (Array.isArray(events)) {\n        return events.map((ev, idx) => {\n            const eventJson = JSON.stringify(ev);\n            if (eventJson === undefined) {\n                throw new Error(`Event must be a valid JSON value. Received ${ev} at index ${idx}`);\n            }\n            return eventJson;\n        });\n    }\n    const eventJson = JSON.stringify(events);\n    if (eventJson === undefined) {\n        throw new Error(`Event must be a valid JSON value. Received ${events}`);\n    }\n    return [eventJson];\n};\n\nexport { configure, normalizeAuth, serializeEvents };\n//# sourceMappingURL=utils.mjs.map\n","/**\n * @wharfkit/wallet-plugin-cloudwallet v1.5.0\n * https://github.com/wharfkit/wallet-plugin-cloudwallet\n *\n * @license\n * Copyright (c) 2023 Greymass Inc. All Rights Reserved.\n * \n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n * \n * 1.  Redistribution of source code must retain the above copyright notice, this\n *     list of conditions and the following disclaimer.\n * \n * 2.  Redistribution in binary form must reproduce the above copyright notice,\n *     this list of conditions and the following disclaimer in the documentation\n *     and/or other materials provided with the distribution.\n * \n * 3.  Neither the name of the copyright holder nor the names of its contributors\n *     may be used to endorse or promote products derived from this software without\n *     specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE\n * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED\n * OF THE POSSIBILITY OF SUCH DAMAGE.\n * \n * YOU ACKNOWLEDGE THAT THIS SOFTWARE IS NOT DESIGNED, LICENSED OR INTENDED FOR USE\n * IN THE DESIGN, CONSTRUCTION, OPERATION OR MAINTENANCE OF ANY MILITARY FACILITY.\n */\nimport { Struct, Name, UInt32, Asset, Serializer, Transaction, AbstractWalletPlugin, WalletPluginMetadata, cancelable, IdentityProof, ChainId, TimePointSec, PermissionLevel, Signature, SigningRequest, ResolvedSigningRequest } from '@wharfkit/session';\nimport { v4 } from 'uuid';\nimport { Amplify } from 'aws-amplify';\nimport { generateClient } from 'aws-amplify/api';\nimport { events } from 'aws-amplify/data';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\n\n// ABI Definitions to decode data\nlet Buyrambytes = class Buyrambytes extends Struct {\n};\n__decorate([\n    Struct.field(Name)\n], Buyrambytes.prototype, \"payer\", void 0);\n__decorate([\n    Struct.field(Name)\n], Buyrambytes.prototype, \"receiver\", void 0);\n__decorate([\n    Struct.field(UInt32)\n], Buyrambytes.prototype, \"bytes\", void 0);\nBuyrambytes = __decorate([\n    Struct.type('buyrambytes')\n], Buyrambytes);\nlet Transfer = class Transfer extends Struct {\n};\n__decorate([\n    Struct.field(Name)\n], Transfer.prototype, \"from\", void 0);\n__decorate([\n    Struct.field(Name)\n], Transfer.prototype, \"to\", void 0);\n__decorate([\n    Struct.field(Asset)\n], Transfer.prototype, \"quantity\", void 0);\n__decorate([\n    Struct.field('string')\n], Transfer.prototype, \"memo\", void 0);\nTransfer = __decorate([\n    Struct.type('transfer')\n], Transfer);\n\nfunction validateModifications(original, modified) {\n    // Ensure all the original actions exist within the modified transaction\n    const originalsExist = original.actions.every((action) => modified.actions.some((modifiedAction) => action.equals(modifiedAction)));\n    if (!originalsExist) {\n        throw new Error('The modified transaction does not contain all the original actions.');\n    }\n    // Find all new actions added to this transaction\n    const newActions = modified.actions.filter((action) => {\n        return !original.actions.some((originalAction) => action.equals(originalAction));\n    });\n    // Iterate and validate each new action\n    for (const newAction of newActions) {\n        // Determine if a new action has the authorization of the original actor\n        const authByUser = newAction.authorization.find((auth) => {\n            return auth.actor === original.actions[0].authorization[0].actor;\n        });\n        if (authByUser) {\n            // Ensure if a transaction fee is being paid by the user, it's going to the correct account\n            const isTokenTransfer = newAction.account.equals('eosio.token') && newAction.name.equals('transfer');\n            if (isTokenTransfer) {\n                const data = Transfer.from(newAction.data);\n                if (data.to.equals('txfee.wam') && data.memo.startsWith('WAX fee for')) {\n                    continue;\n                }\n            }\n            // Ensure if a RAM purchase is occurring during a modification, it's going to the user\n            const isRAMPurchase = newAction.account.equals('eosio') && newAction.name.equals('buyrambytes');\n            if (isRAMPurchase) {\n                const data = Buyrambytes.from(newAction.data);\n                if (data.receiver.equals(original.actions[0].authorization[0].actor)) {\n                    continue;\n                }\n            }\n            // If not passing the above rules, throw an error\n            throw new Error('The modified transaction contains one or more actions that are not allowed.');\n        }\n    }\n}\n// Create and return an interval that checks whether or not the window has been closed\nfunction registerCloseListener(t, popup, reject) {\n    const closeListener = setInterval(() => {\n        if (popup.closed) {\n            clearInterval(closeListener);\n            reject(t('error.closed', {\n                default: 'The Cloud Wallet was closed before the request was completed',\n            }));\n        }\n    }, 500);\n    return closeListener;\n}\n// Retrieve current time\nfunction getCurrentTime() {\n    return Math.floor(new Date().getTime());\n}\n// Ensure the MessageEvent returned from the popup is valid\nfunction isValidEvent(event, url, window) {\n    const eventOrigin = new URL(event.origin);\n    const validOrigin = eventOrigin.origin === url.origin;\n    const validSource = event.source === window;\n    const validObject = typeof event.data === 'object';\n    if (!validObject || !validOrigin || !validSource) {\n        return false;\n    }\n    return true;\n}\n\nasync function autoLogin(t, urlString) {\n    // TODO: Figure out what temp accounts are\n    //\n    // if (this.returnTempAccount) {\n    //   url.search = \"returnTemp=true\";\n    // } else {\n    //   url.search = \"\";\n    // }\n    const url = new URL(urlString);\n    const response = await fetch(String(url), {\n        credentials: 'include',\n        method: 'get',\n        headers: {\n            'X-Referer-Url': location.origin,\n        },\n    });\n    if (!response.ok) {\n        throw new Error(t('error.endpoint', {\n            default: `Login Endpoint Error {{status}} - {{statusText}}`,\n            status: response.status,\n            statusText: response.statusText,\n        }));\n    }\n    const data = await response.json();\n    return data;\n}\nasync function popupLogin(t, urlString, timeout = 300000) {\n    // Open the popup window\n    const url = new URL(urlString);\n    const popup = await window.open(url, 'WalletPluginCloudWalletPopup', 'height=800,width=600');\n    if (!popup) {\n        throw new Error(t('error.popup', {\n            default: 'Unable to open the popup window. Check your browser settings and try again.',\n        }));\n    }\n    // Return a promise that either times out or resolves when the popup resolves\n    return new Promise((resolve, reject) => {\n        const closeListener = registerCloseListener(t, popup, reject);\n        // Event handler awaiting response from WCW\n        const handleEvent = (event) => {\n            if (!isValidEvent(event, url, popup)) {\n                return;\n            }\n            try {\n                resolve(event.data);\n            }\n            catch (e) {\n                reject(e);\n            }\n            finally {\n                window.removeEventListener('message', handleEvent);\n                clearTimeout(autoCancel);\n                clearInterval(closeListener);\n            }\n        };\n        // Automatically cancel request after 5 minutes to cleanup windows/promises\n        const autoCancel = setTimeout(() => {\n            popup.close();\n            window.removeEventListener('message', handleEvent);\n            reject(new Error(t('error.timeout', {\n                default: 'The request has timed out after {{timeout}} seconds. Please try again.',\n                timeout: timeout / 1000,\n            })));\n        }, timeout);\n        // Add event listener awaiting WCW Response\n        window.addEventListener('message', handleEvent);\n    });\n}\n\nfunction allowAutosign(request, data) {\n    const ua = navigator.userAgent.toLowerCase();\n    if (ua.search('chrome') === -1 && ua.search('safari') >= 0) {\n        return false;\n    }\n    try {\n        if (!data)\n            return false;\n        const whitelist = data.whitelist;\n        const { actions } = request.resolvedTransaction;\n        return actions.every((action) => {\n            return whitelist.find((entry) => {\n                if (action.account.equals(entry.contract)) {\n                    if (action.account.equals('eosio.token') &&\n                        action.name &&\n                        action.name.equals('transfer')) {\n                        return entry.recipients.includes(String(action.data.to));\n                    }\n                    return true;\n                }\n            });\n        });\n    }\n    catch (e) {\n        // console.log('error in canAutoSign', e)\n    }\n    return false;\n}\nasync function autoSign(t, urlString, request) {\n    const url = new URL(urlString);\n    const controller = new AbortController();\n    setTimeout(() => controller.abort(), 5000);\n    const response = await fetch(url, {\n        body: JSON.stringify({\n            feeFallback: true,\n            freeBandwidth: true,\n            transaction: request.serializedTransaction,\n        }),\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' },\n        method: 'POST',\n        signal: controller.signal,\n    });\n    if (!response.ok) {\n        throw new Error(t('error.endpoint', {\n            default: `Login Endpoint Error {{status}} - {{statusText}}`,\n            status: response.status,\n            statusText: response.statusText,\n        }));\n    }\n    const data = await response.json();\n    if (data.processed && data.processed.except) {\n        throw new Error(t('error.exception', {\n            default: 'Signing exception occurred: {{exception}}',\n            exception: JSON.stringify(data),\n        }));\n    }\n    return data;\n}\nasync function popupTransact(t, urlString, request, timeout = 300000) {\n    const url = new URL(urlString);\n    const popup = await window.open(url, 'WalletPluginCloudWalletPopup', 'height=800,width=600');\n    if (!popup) {\n        throw new Error(t('error.popup', {\n            default: 'Unable to open the popup window. Check your browser settings and try again.',\n        }));\n    }\n    return new Promise((resolve, reject) => {\n        const closeListener = registerCloseListener(t, popup, reject);\n        const handleEvent = (event) => {\n            if (!isValidEvent(event, url, popup)) {\n                return;\n            }\n            popup?.postMessage({\n                feeFallback: true,\n                freeBandwidth: true,\n                startTime: getCurrentTime(),\n                transaction: request.serializedTransaction,\n                type: 'TRANSACTION',\n            }, String(urlString));\n            const handleSigning = (signingEvent) => {\n                if (!isValidEvent(signingEvent, url, popup)) {\n                    return;\n                }\n                try {\n                    resolve(signingEvent.data);\n                }\n                catch (e) {\n                    reject(e);\n                }\n                finally {\n                    window.removeEventListener('message', handleEvent);\n                    window.removeEventListener('message', handleSigning);\n                    clearTimeout(autoCancel);\n                    clearInterval(closeListener);\n                }\n            };\n            window.addEventListener('message', handleSigning);\n        };\n        // Automatically cancel request after 5 minutes to cleanup windows/promises\n        const autoCancel = setTimeout(() => {\n            popup.close();\n            window.removeEventListener('message', handleEvent);\n            reject(new Error(t('error.timeout', {\n                default: 'The request has timed out after {{timeout}} seconds. Please try again.',\n                timeout: timeout / 1000,\n            })));\n        }, timeout);\n        // Add event listener awaiting WCW Response\n        window.addEventListener('message', handleEvent);\n    });\n}\n\nvar connecting$3 = \"Connecting to Cloud Wallet\";\nvar error$3 = {\n\tclosed: \"The Cloud Wallet was closed before the request was completed\",\n\tendpoint: \"Login Endpoint Error {{status}} - {{statusText}}\",\n\texception: \"Signing exception occurred: {{exception}}\",\n\tpopup: \"Unable to open the popup window. Check your browser settings and try again.\",\n\tresponse: \"The Cloud Wallet failed to respond.\",\n\ttimeout: \"The request has timed out after {{timeout}} seconds. Please try again.\"\n};\nvar login$3 = {\n\tpopup: \"Login with the Cloud Wallet popup window\"\n};\nvar transact$3 = {\n\tpopup: \"Sign with the Cloud Wallet popup window\"\n};\nvar en = {\n\tconnecting: connecting$3,\n\terror: error$3,\n\tlogin: login$3,\n\ttransact: transact$3\n};\n\nvar connecting$2 = \"  \";\nvar error$2 = {\n\tclosed: \"     .\",\n\tendpoint: \"   {{status}} - {{statusText}}\",\n\texception: \"  : {{exception}}\",\n\tpopup: \"    .     .\",\n\tresponse: \"   .\",\n\ttimeout: \"{{timeout}}    .  .\"\n};\nvar login$2 = {\n\tpopup: \"    \"\n};\nvar transact$2 = {\n\tpopup: \"    \"\n};\nvar ko = {\n\tconnecting: connecting$2,\n\terror: error$2,\n\tlogin: login$2,\n\ttransact: transact$2\n};\n\nvar connecting$1 = \"\";\nvar error$1 = {\n\tclosed: \"\",\n\tendpoint: \" {{status}} - {{statusText}}\",\n\texception: \"{{exception}}\",\n\tpopup: \"\",\n\tresponse: \"\",\n\ttimeout: \" {{timeout}} \"\n};\nvar login$1 = {\n\tpopup: \"\"\n};\nvar transact$1 = {\n\tpopup: \"\"\n};\nvar zh_hans = {\n\tconnecting: connecting$1,\n\terror: error$1,\n\tlogin: login$1,\n\ttransact: transact$1\n};\n\nvar connecting = \"\";\nvar error = {\n\tclosed: \"\",\n\tendpoint: \" {{status}} - {{statusText}}\",\n\texception: \"{{exception}}\",\n\tpopup: \" \",\n\tresponse: \"\",\n\ttimeout: \" {{timeout}} \"\n};\nvar login = {\n\tpopup: \"\"\n};\nvar transact = {\n\tpopup: \"\"\n};\nvar zh_hant = {\n\tconnecting: connecting,\n\terror: error,\n\tlogin: login,\n\ttransact: transact\n};\n\nvar defaultTranslations = {\n    en,\n    ko,\n    'zh-Hans': zh_hans,\n    'zh-Hant': zh_hant,\n};\n\nconst isIos = () => {\n    return navigator.userAgent.includes('iPhone') || navigator.userAgent.includes('iPad');\n};\nfunction generateReturnUrl() {\n    // Return undefined for iOS React Native apps to prevent redirect to Safari\n    if (isAppleHandheld() && isReactNativeApp()) {\n        return undefined;\n    }\n    if (isChromeiOS()) {\n        // google chrome on iOS will always open new tab so we just ask it to open again as a workaround\n        return 'googlechrome://';\n    }\n    if (isFirefoxiOS()) {\n        // same for firefox\n        return 'firefox:://';\n    }\n    if (isAppleHandheld() && isBrave()) {\n        // and brave ios\n        return 'brave://';\n    }\n    if (isAppleHandheld()) {\n        // return url with unique fragment required for iOS safari to trigger the return url\n        const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n        let rv = window.location.href.split('#')[0] + '#';\n        for (let i = 0; i < 8; i++) {\n            rv += alphabet.charAt(Math.floor(Math.random() * alphabet.length));\n        }\n        return rv;\n    }\n    if (isAndroid() && isFirefox()) {\n        return 'android-app://org.mozilla.firefox';\n    }\n    if (isAndroid() && isEdge()) {\n        return 'android-app://com.microsoft.emmx';\n    }\n    if (isAndroid() && isOpera()) {\n        return 'android-app://com.opera.browser';\n    }\n    if (isAndroid() && isBrave()) {\n        return 'android-app://com.brave.browser';\n    }\n    if (isAndroid() && isAndroidWebView()) {\n        return 'android-app://webview';\n    }\n    if (isAndroid() && isChromeMobile()) {\n        return 'android-app://com.android.chrome';\n    }\n    return window.location.href;\n}\nfunction isAppleHandheld() {\n    return /iP(ad|od|hone)/i.test(navigator.userAgent);\n}\nfunction isChromeiOS() {\n    return /CriOS/.test(navigator.userAgent);\n}\nfunction isChromeMobile() {\n    return /Chrome\\/[.0-9]* Mobile/i.test(navigator.userAgent);\n}\nfunction isFirefox() {\n    return /Firefox/i.test(navigator.userAgent);\n}\nfunction isFirefoxiOS() {\n    return /FxiOS/.test(navigator.userAgent);\n}\nfunction isOpera() {\n    return /OPR/.test(navigator.userAgent) || /Opera/.test(navigator.userAgent);\n}\nfunction isEdge() {\n    return /Edg/.test(navigator.userAgent);\n}\nfunction isBrave() {\n    return navigator['brave'] && typeof navigator['brave'].isBrave === 'function';\n}\nfunction isAndroid() {\n    return /Android/.test(navigator.userAgent);\n}\nfunction isReactNativeApp() {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    return !!window.ReactNativeWebView;\n}\nfunction isAndroidWebView() {\n    return (/wv/.test(navigator.userAgent) ||\n        (/Android/.test(navigator.userAgent) && isReactNativeApp()));\n}\nfunction decodeSignatureFromWallet(encoded) {\n    // Convert from URL-safe base64 to standard base64\n    let base64 = encoded.replace(/-/g, '+').replace(/_/g, '/');\n    // Add padding if needed\n    while (base64.length % 4 !== 0) {\n        base64 += '=';\n    }\n    // Decode base64 using browser-compatible method\n    try {\n        const jsonStr = atob(base64);\n        return JSON.parse(jsonStr);\n    }\n    catch (error) {\n        console.error('Failed to decode signature from wallet:', error);\n        throw new Error('Invalid signature format');\n    }\n}\n\nclass TransactionHandler {\n    /**\n     * Generates a unique transaction message\n     * @param actions Array of transaction actions\n     * @param namedParams Named parameters for the transaction\n     * @param origin Origin of the dapp\n     * @returns TransactionMessage object\n     */\n    static generateTransactionMessage(actions, namedParams, origin) {\n        return {\n            id: v4(),\n            type: 'requesting',\n            actions,\n            namedParams,\n            dapp: origin,\n        };\n    }\n    /**\n     * Validates if a transaction message is valid\n     * @param message Transaction message to validate\n     * @returns boolean indicating if the message is valid\n     */\n    static isValidTransactionMessage(message) {\n        return (message &&\n            typeof message === 'object' &&\n            typeof message.id === 'string' &&\n            typeof message.type === 'string' &&\n            ['requesting', 'approved', 'rejected', 'error', 'ready', 'not-ready'].includes(message.type));\n    }\n    /**\n     * Checks if a transaction message matches a specific transaction ID\n     * @param message Transaction message to check\n     * @param transactionId Transaction ID to match against\n     * @returns boolean indicating if the message matches the transaction ID\n     */\n    static isMatchingTransaction(message, transactionId) {\n        return message.id === transactionId;\n    }\n    /**\n     * Processes transaction result and extracts signatures\n     * @param result Transaction result object\n     * @returns Array of decoded signatures\n     */\n    static processTransactionResult(result) {\n        if (!result?.signatures) {\n            return [];\n        }\n        return result.signatures.map((sig) => {\n            try {\n                // Check if the signature is base64 encoded\n                if (/^[A-Za-z0-9+/=]+$/.test(sig)) {\n                    return atob(sig);\n                }\n                return sig;\n            }\n            catch (e) {\n                console.warn('Failed to decode signature:', e);\n                return sig;\n            }\n        });\n    }\n}\n\nconst publish2channel = /* GraphQL */ `\n    mutation Publish2channel($data: AWSJSON!, $name: String!) {\n        publish2channel(data: $data, name: $name) {\n            data\n            name\n            __typename\n        }\n    }\n`;\nclass SyncHandlerConfig {\n    constructor(config) {\n        Amplify.configure({\n            API: {\n                GraphQL: {\n                    endpoint: config.graphQLRelayEndpoint,\n                    region: config.graphQLRelayRegion,\n                    defaultAuthMode: 'lambda',\n                },\n                Events: {\n                    endpoint: config.eventRelayEndpoint,\n                    region: config.eventRelayRegion,\n                    defaultAuthMode: 'lambda'\n                }\n            },\n        });\n    }\n}\nclass GraphQLSyncHandler {\n    constructor() {\n        this.client = generateClient();\n    }\n    async publishToChannel(channelName, data, authHeaders) {\n        await this.client.graphql({\n            query: publish2channel,\n            variables: {\n                name: channelName,\n                data: JSON.stringify(data),\n            },\n            authToken: authHeaders\n        });\n    }\n    async subscribeToChannel(channelName, messageHandler, errorHandler, authHeaders, timeoutMs = 180000) {\n        // Use the Event API for subscriptions if you want real-time pub/sub\n        // Otherwise, use GraphQL subscriptions as before (if your backend supports it)\n        try {\n            const channel = await events.connect(channelName);\n            const subscription = channel.subscribe({\n                next: (data) => {\n                    this.handleMessage(data, messageHandler, errorHandler);\n                },\n                error: (error) => {\n                    errorHandler(error);\n                }\n            });\n            // Set up timeout\n            const timeoutId = setTimeout(() => {\n                subscription.unsubscribe();\n                errorHandler(new Error('Subscription timeout after ' + timeoutMs + 'ms'));\n            }, timeoutMs);\n            return {\n                unsubscribe: () => {\n                    clearTimeout(timeoutId);\n                    subscription.unsubscribe();\n                },\n            };\n        }\n        catch (error) {\n            errorHandler(error);\n            return {\n                unsubscribe: () => { }\n            };\n        }\n    }\n}\nclass TransactionSyncHandler extends GraphQLSyncHandler {\n    static parseAuthHeaders(account, token, svc) {\n        // Ensure token is properly parsed if it's a string\n        if (typeof token === 'string') {\n            try {\n                // If token is a JSON string, parse it\n                if (token.startsWith('{')) {\n                    token = JSON.parse(token);\n                }\n            }\n            catch (e) {\n                console.warn('Failed to parse token:', e);\n            }\n        }\n        return JSON.stringify({\n            account,\n            token,\n            svc,\n            mode: 'dapp'\n        });\n    }\n    handleMessage(rawMessage, messageHandler, errorHandler) {\n        if (TransactionHandler.isValidTransactionMessage(rawMessage)) {\n            messageHandler(rawMessage);\n            return;\n        }\n        errorHandler(new Error('Invalid transaction message received'));\n    }\n    generateChannelName(origin, account) {\n        return `transact:${origin}:${account || ''}`;\n    }\n    generateTransactionMessage(actions, namedParams, origin) {\n        return TransactionHandler.generateTransactionMessage(actions, namedParams, origin);\n    }\n    processTransactionResult(message) {\n        if (message.type !== 'approved') {\n            throw new Error('Transaction not approved');\n        }\n        return {\n            signatures: TransactionHandler.processTransactionResult(message.result)\n        };\n    }\n}\n\n/** @format */\nclass ActivationFetchError extends Error {\n    constructor(message = '') {\n        super(message);\n        this.name = 'ActivationFetchError';\n    }\n}\nclass ActivationExpiredError extends Error {\n    constructor(message = '') {\n        super(message);\n        this.name = 'ActivationExpiredError';\n    }\n}\nclass ActivationCancelledError extends Error {\n    constructor(message = '') {\n        super(message);\n        this.name = 'ActivationCancelledError';\n    }\n}\nclass ActivationDeepLinkError extends Error {\n    constructor(message = '') {\n        super(message);\n        this.name = 'ActivationDeepLinkError';\n    }\n}\nclass InvalidCodeError extends Error {\n    constructor(message = '') {\n        super(message);\n        this.name = 'InvalidCodeError';\n    }\n}\nclass MobileAppConnect {\n    constructor(mobileAppConnectConfig) {\n        this.mobileAppConnectConfig = mobileAppConnectConfig;\n        this.isCanceled = false;\n        this.connectedType = null;\n        this.WAX_SCHEME_DEEPLINK = 'mycloudwallet';\n        this.activationEndpoint = 'https://login-api.mycloudwallet.com';\n        if (!mobileAppConnectConfig || !mobileAppConnectConfig.dappInfo) {\n            throw new Error('MobileAppConnect is required');\n        }\n        this.mobileAppConnectConfig = mobileAppConnectConfig;\n        this.dAppInfo = mobileAppConnectConfig.dappInfo;\n        this.origin = location.origin;\n        new SyncHandlerConfig({\n            graphQLRelayEndpoint: 'https://queue-relay.mycloudwallet.com/graphql',\n            graphQLRelayRegion: 'us-east-2',\n            eventRelayEndpoint: 'https://direct-connect-api.mycloudwallet.com/event',\n            eventRelayRegion: 'eu-east-2'\n        });\n        // Initialize transaction SyncHandler\n        this.transactionSyncHandler = new TransactionSyncHandler();\n        this.uuid = v4();\n        const connectedType = localStorage.getItem('connectedType');\n        if (connectedType === 'direct' || connectedType === 'remote' || connectedType === 'web') {\n            this.connectedType = connectedType;\n        }\n    }\n    getConnectedType() {\n        return this.connectedType;\n    }\n    async showAppConnectPrompt(context) {\n        const elements = [];\n        let requisitionInfo;\n        let directConnectPromiseResolve;\n        let directConnectPromiseReject;\n        let checkActivationPromise = undefined;\n        const directConnectPromise = new Promise((resolve, reject) => {\n            directConnectPromiseResolve = resolve;\n            directConnectPromiseReject = reject;\n        });\n        if (this.mobileAppConnectConfig.remote) {\n            requisitionInfo = await this.fetchActivationInfo(this.getActivationPayload(context));\n            elements.unshift({\n                type: 'qr',\n                data: requisitionInfo.qrCodeContent,\n            });\n        }\n        if (this.mobileAppConnectConfig.direct) {\n            elements.unshift({\n                type: 'button',\n                data: {\n                    label: 'Open in My Cloud Wallet',\n                    variant: 'primary',\n                    onClick: async () => {\n                        try {\n                            const result = await this.directConnect(context); // Wait for deeplink response\n                            directConnectPromiseResolve(result); // Resolve outer promise\n                        }\n                        catch (error) {\n                            directConnectPromiseReject(error);\n                        }\n                    }\n                },\n            });\n        }\n        // Show the prompt UI\n        const currentPromptResponse = context.ui.prompt({\n            title: 'Connect with My Cloud Wallet!!!',\n            body: 'Connect My Cloud Wallet on your mobile device',\n            elements,\n        });\n        currentPromptResponse.catch((error) => {\n            console.info('User cancelled modal::', error.message);\n            directConnectPromiseReject(error);\n            this.isCanceled = true;\n        });\n        // No longer waiting for prompt  go straight to activation\n        if (requisitionInfo) {\n            checkActivationPromise = this.checkActivation(context, requisitionInfo);\n        }\n        try {\n            if (checkActivationPromise) {\n                return await Promise.race([\n                    directConnectPromise,\n                    checkActivationPromise\n                ]);\n            }\n            else {\n                return await directConnectPromise;\n            }\n        }\n        catch (error) {\n            console.log('showAppConnectPrompt::directConnectPromise::error', error);\n            if (error instanceof ActivationCancelledError) {\n                console.log('currentPromptResponse', typeof currentPromptResponse);\n                //context.ui.onLoginComplete;\n                this.isCanceled = true;\n                this.connectedType = null;\n            }\n            throw error;\n        }\n    }\n    remoteTransact(resolved, context, namedParams) {\n        if (!this.user?.account || !this.user?.token) {\n            throw new Error('User not authenticated');\n        }\n        const channelName = this.transactionSyncHandler.generateChannelName(this.origin, this.user.account);\n        const txInfo = this.transactionSyncHandler.generateTransactionMessage(resolved.request.getRawActions(), namedParams, this.origin);\n        const authHeaders = TransactionSyncHandler.parseAuthHeaders(this.user.account, this.user.token, this.origin);\n        return new Promise((resolve, reject) => {\n            let subscription;\n            const currentTxInfo = txInfo;\n            console.log(`start listening on ${channelName} with transaction ID = ${currentTxInfo.id}...`);\n            // Publish transaction request\n            this.transactionSyncHandler.publishToChannel(channelName, txInfo, authHeaders)\n                .catch(error => {\n                console.error('Failed to publish to channel:', error);\n                reject(error);\n            });\n            // Subscribe to channel for response\n            subscription = this.transactionSyncHandler.subscribeToChannel(channelName, (message) => {\n                if (message.id !== currentTxInfo.id) {\n                    return;\n                }\n                switch (message.type) {\n                    case 'requesting':\n                        console.log('tx requesting...');\n                        break;\n                    case 'approved':\n                        try {\n                            const result = this.transactionSyncHandler.processTransactionResult(message);\n                            resolve(result);\n                        }\n                        catch (error) {\n                            console.error('Failed to process transaction result:', error);\n                            reject(error);\n                        }\n                        break;\n                    case 'rejected':\n                        reject(new Error('User rejected the transaction'));\n                        break;\n                    case 'error':\n                        reject(new Error(message.result));\n                        break;\n                    default:\n                        console.log(`Unknown status: ${JSON.stringify(message)}`);\n                        break;\n                }\n            }, (error) => {\n                console.error('Subscription error:', error);\n                reject(error);\n            }, authHeaders);\n            // Cleanup subscription on completion\n            return {\n                unsubscribe: () => {\n                    subscription?.unsubscribe();\n                }\n            };\n        });\n    }\n    async signTransaction(resolved, context, namedParams) {\n        if (!this.connectedType || this.connectedType === 'web') {\n            throw new Error('Activation_NotActivated!!!');\n        }\n        if (this.connectedType === 'direct') {\n            return await this.directTransact(resolved, context, namedParams);\n        }\n        else {\n            return this.remoteTransact(resolved, context, namedParams);\n        }\n    }\n    async checkActivation(context, requisitionInfo) {\n        try {\n            const activatedData = await this.checkIfActivated(requisitionInfo, this.origin);\n            if (!!activatedData) {\n                this.user = activatedData;\n                this.connectedType = 'remote';\n                context.ui.onLoginComplete();\n                return this.user;\n            }\n        }\n        catch (error) {\n            throw error;\n        }\n    }\n    async fetchActivationInfo({ origin, dAppName, logourl, schema, description, }) {\n        try {\n            if (!this.mobileAppConnectConfig.remote) {\n                throw new Error('mobileAppConnectConfig remote is required');\n            }\n            const sut = await this.mobileAppConnectConfig.remote.getDappSingleUsedToken();\n            const response = await fetch(`${this.activationEndpoint}/v1/wcw/dapp/code`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'X-dapp-sdk-sut': sut.toString(),\n                    'X-dapp-sdk-client-id': this.mobileAppConnectConfig.remote.dappClientId.toString(),\n                },\n                body: JSON.stringify({\n                    dapp: origin,\n                    dAppName: dAppName,\n                    logourl,\n                    schema,\n                    description,\n                    origin,\n                }),\n            });\n            if (!response.ok) {\n                throw new Error(`Network response was not ok: ${response.status}`);\n            }\n            const data = await response.json();\n            return data;\n        }\n        catch (error) {\n            console.error('Fetch error:', error);\n            throw new ActivationFetchError();\n        }\n    }\n    async checkIfActivated(requisitionInfo, origin) {\n        return new Promise((resolve, reject) => {\n            const intervalId = setInterval(async () => {\n                const currentTimestamp = Math.floor(Date.now() / 1000);\n                if (this.user || this.isCanceled) {\n                    clearInterval(intervalId);\n                }\n                if (currentTimestamp > requisitionInfo.expire) {\n                    console.log('Current time is greater than expiration. Stopping pulling checkActivation.', currentTimestamp, requisitionInfo.expire);\n                    clearInterval(intervalId);\n                    reject(new ActivationExpiredError());\n                }\n                try {\n                    const response = await fetch(`${this.activationEndpoint}/v1/wcw/dapp/code/check?dapp=${origin}`, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json',\n                        },\n                        body: JSON.stringify({\n                            code: requisitionInfo.code,\n                        }),\n                    });\n                    if (response.status === 422) {\n                        reject(new InvalidCodeError());\n                        return;\n                    }\n                    if (!response.ok) {\n                        throw new Error(`Network response was not ok: ${response.status}`);\n                    }\n                    const data = await response.json();\n                    if (response.status === 202) {\n                        console.log('Continuing pulling checkActivation');\n                    }\n                    else if (response.status === 200) {\n                        console.log('Stopping pulling checkActivation');\n                        clearInterval(intervalId);\n                        resolve(data);\n                        // Do something with the data, e.g., update state or trigger some action\n                        // Example: return a promise that resolves with the data\n                        // return Promise.resolve(data);\n                    }\n                }\n                catch (error) {\n                    console.error('Error checking activation:', error);\n                    clearInterval(intervalId);\n                    reject(error);\n                }\n            }, 5000);\n        });\n    }\n    getActivationPayload(context) {\n        return {\n            origin: this.origin,\n            dAppName: `${this.dAppInfo.name || context.appName}`,\n            logourl: this.dAppInfo.logoUrl,\n            schema: this.dAppInfo.schema,\n            description: this.dAppInfo.description,\n        };\n    }\n    openDeepLinkWithFallback(link) {\n        return new Promise((resolve, reject) => {\n            const timeoutId = setTimeout(() => {\n                reject(new ActivationDeepLinkError('App likely not installed, fallback triggered.'));\n            }, 4000);\n            const clear = () => {\n                clearTimeout(timeoutId);\n                resolve();\n            };\n            window.addEventListener('pagehide', clear, { once: true });\n            window.addEventListener('blur', clear, { once: true });\n            document.addEventListener('visibilitychange', () => {\n                if (document.visibilityState === 'hidden') {\n                    clear();\n                }\n            }, { once: true });\n            window.location.href = link;\n        });\n    }\n    async directConnect(context) {\n        const callbackUrl = btoa(generateReturnUrl() || '');\n        const deviceHash = encodeURIComponent('1234567890');\n        this.uuid = v4();\n        // Build the deep link URL with organized parameters\n        const linkParams = new URLSearchParams({\n            schema: this.dAppInfo.schema || 'none',\n            dapp: this.dAppInfo.name || context.appName || '',\n            origin: this.origin,\n            logourl: this.dAppInfo.logoUrl || '',\n            description: this.dAppInfo.description || '',\n            antelope: 'antelope-1',\n            callbackHttp: callbackUrl,\n            uuid: this.uuid,\n            deviceHash: deviceHash,\n        });\n        const nonce = context.arbitrary['nonce'];\n        // conditionally add non-falsy nonce to the link\n        if (nonce) {\n            const base64Nonce = btoa(nonce);\n            linkParams.set('n', base64Nonce);\n        }\n        const link = `${this.WAX_SCHEME_DEEPLINK}://connect?${linkParams.toString()}`;\n        try {\n            await this.openDeepLinkWithFallback(link);\n        }\n        catch (error) {\n            console.error('Failed to open deeplink:', error);\n            throw error;\n        }\n        return new Promise(async (resolve, reject) => {\n            const timeout = setTimeout(() => {\n                this.isCanceled = true;\n                cleanup();\n                reject(new Error('Connection timeout'));\n            }, 180000); // 3 min\n            let subscription;\n            let interval;\n            const cleanup = () => {\n                clearTimeout(timeout);\n                clearInterval(interval);\n                subscription?.unsubscribe?.();\n            };\n            const connectToDevice = async () => {\n                try {\n                    const re = await events.connect(`/device-connect/${this.uuid}`, { authToken: this.uuid });\n                    subscription = re.subscribe({\n                        next: (data) => {\n                            if (data?.type === 'data' && data?.event?.accountName) {\n                                this.user = {\n                                    account: data.event.accountName,\n                                    keys: [],\n                                    isTemp: false,\n                                    createData: {},\n                                    token: '',\n                                    proof: data.event.proof\n                                };\n                                this.connectedType = 'direct';\n                                localStorage.setItem('connectedType', this.connectedType);\n                                cleanup();\n                                resolve(this.user);\n                                re.close();\n                                return;\n                            }\n                            else if (data?.event?.error) {\n                                const msg = data.event.error === 'ConnectRejected'\n                                    ? 'User rejected the connection'\n                                    : 'Direct connection error';\n                                cleanup();\n                                reject(new ActivationCancelledError(msg));\n                                re.close();\n                                return;\n                            }\n                            else {\n                                cleanup();\n                                reject(new Error('Invalid account'));\n                                re.close();\n                                return;\n                            }\n                        },\n                        error: (err) => {\n                            console.error('Subscription error:', err);\n                            cleanup();\n                            reject(err);\n                            re.close();\n                            return;\n                        }\n                    });\n                }\n                catch (err) {\n                    cleanup();\n                    reject(err);\n                }\n            };\n            interval = setInterval(() => {\n                if (document.hasFocus()) {\n                    connectToDevice();\n                }\n            }, 500);\n        });\n    }\n    async directTransact(resolved, context, namedParams) {\n        if (!this.connectedType || this.connectedType === 'remote') {\n            throw new Error('Invalid connection type, expect direct connection');\n        }\n        // FIX: Send the complete serialized transaction as a single action string\n        // This preserves the original transaction structure while working with mobile app\n        const completeTransaction = Array.from(resolved.serializedTransaction);\n        const encodeTransactions = btoa(JSON.stringify(completeTransaction));\n        const callbackUrl = btoa(generateReturnUrl() || '');\n        const deviceHash = encodeURIComponent('1234567890');\n        // Generate a unique UUID for this specific transaction to prevent conflicts\n        const transactionUuid = v4();\n        // Build the deep link URL with organized parameters\n        const linkParams = new URLSearchParams({\n            transaction: encodeTransactions,\n            schema: this.dAppInfo.schema || 'none',\n            callbackHttp: callbackUrl,\n            redirect: 'true',\n            deviceHash: deviceHash,\n            uuid: transactionUuid,\n            broadcast: 'false'\n        });\n        const link = `${this.WAX_SCHEME_DEEPLINK}://transact?${linkParams.toString()}`;\n        try {\n            await this.openDeepLinkWithFallback(link);\n        }\n        catch (error) {\n            console.error('Failed to open deeplink:', error);\n            throw error;\n        }\n        return new Promise(async (resolve, reject) => {\n            const timeout = setTimeout(() => {\n                cleanup();\n                reject(new Error('Transaction timeout'));\n            }, 180000); // 3 min\n            let subscription;\n            let interval;\n            const cleanup = () => {\n                clearTimeout(timeout);\n                clearInterval(interval);\n                subscription?.unsubscribe?.();\n            };\n            const transact = async () => {\n                try {\n                    const re = await events.connect(`/device-transact/${transactionUuid}`, { authToken: transactionUuid });\n                    subscription = re.subscribe({\n                        next: (data) => {\n                            if (data?.type === 'data' && data?.event?.signatures) {\n                                const signatures = decodeSignatureFromWallet(data.event.signatures);\n                                // FIX: Only return signatures for the original transaction\n                                // Do not create a new resolved request if transaction was modified\n                                const result = {\n                                    signatures,\n                                };\n                                // If a modified transaction was returned, validate it but don't create new resolved request\n                                if (data.event.serializedTransaction) {\n                                    const responseTransaction = Serializer.decode({\n                                        data: data.event.serializedTransaction,\n                                        type: Transaction,\n                                    });\n                                    // Validate modifications but don't create new resolved request\n                                    if (!responseTransaction.equals(resolved.transaction)) {\n                                        validateModifications(resolved.transaction, responseTransaction);\n                                        // FIX: Return signatures for the original transaction, not the modified one\n                                        // This ensures cosigner signatures remain valid\n                                    }\n                                }\n                                resolve(result);\n                                re.close();\n                                return;\n                            }\n                            else if (data?.event?.error) {\n                                const msg = data.event.error === 'TransactionDeclined'\n                                    ? 'User rejected the transaction'\n                                    : data.event.error;\n                                cleanup();\n                                reject(new Error(msg));\n                                re.close();\n                                return;\n                            }\n                            else {\n                                cleanup();\n                                reject(new Error('Transaction unknown error'));\n                                re.close();\n                                return;\n                            }\n                        },\n                        error: (err) => {\n                            alert('subscription error::' + err?.message);\n                            console.error('Subscription error:', err);\n                            cleanup();\n                            reject(err);\n                            re.close();\n                            return;\n                        }\n                    });\n                }\n                catch (err) {\n                    cleanup();\n                    reject(err);\n                    return;\n                }\n            };\n            interval = setInterval(() => {\n                if (document.hasFocus()) {\n                    transact();\n                }\n            }, 350);\n            return;\n        });\n    }\n    async cleanup() {\n        // Reset connection state\n        this.connectedType = null;\n        this.user = undefined;\n        this.isCanceled = false;\n        // Clear stored connection type\n        localStorage.removeItem('connectedType');\n        // Close all event connections\n        await events.closeAll();\n    }\n}\n\nclass WalletPluginCloudWallet extends AbstractWalletPlugin {\n    /**\n     * Constructor to allow overriding of plugin configuration.\n     */\n    constructor(options) {\n        super();\n        /**\n         * The unique identifier for the wallet plugin.\n         */\n        this.id = 'cloudwallet';\n        /**\n         * The translations for this plugin\n         */\n        this.translations = defaultTranslations;\n        /**\n         * The logic configuration for the wallet plugin.\n         */\n        this.config = {\n            // Should the user interface display a chain selector?\n            requiresChainSelect: false,\n            // Should the user interface display a permission selector?\n            requiresPermissionSelect: false,\n            // The blockchains this WalletPlugin supports\n            supportedChains: [\n                '1064487b3cd1a897ce03ae5b6a865651747e2e152090f99c1d19d44e01aea5a4', // WAX (Mainnet)\n                // 'f16b1833c747c43682f4386fca9cbb327929334a762755ebec17f6f23c9b8a12', // NYI - WAX (Testnet)\n            ],\n        };\n        /**\n         * The metadata for the wallet plugin to be displayed in the user interface.\n         */\n        this.metadata = WalletPluginMetadata.from({\n            name: 'Cloud Wallet',\n            description: '',\n            logo: 'data:image/png;base64,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',\n            homepage: 'https://www.mycloudwallet.com',\n            download: 'https://www.mycloudwallet.com',\n        });\n        /**\n         * WAX Cloud Wallet Configuration\n         */\n        this.url = 'https://www.mycloudwallet.com';\n        this.autoUrl = 'https://idm-api.mycloudwallet.com/v1/accounts/auto-accept';\n        this.loginTimeout = 300000; // 5 minutes\n        this.allowTemp = false;\n        this.mobileAppConnect = null;\n        this.options = options;\n        if (options?.supportedChains) {\n            this.config.supportedChains = options.supportedChains;\n        }\n        if (options?.url) {\n            this.url = options.url;\n        }\n        if (options?.autoUrl) {\n            this.autoUrl = options.autoUrl;\n        }\n        if (options?.loginTimeout) {\n            this.loginTimeout = options.loginTimeout;\n        }\n        if (options?.allowTemp) {\n            this.allowTemp = options.allowTemp;\n        }\n        if (options?.mobileAppConnectConfig) {\n            this.mobileAppConnect = new MobileAppConnect(options.mobileAppConnectConfig);\n        }\n    }\n    /**\n     * Performs the wallet logic required to login and return the chain and permission level to use.\n     *\n     * @param options WalletPluginLoginOptions\n     * @returns Promise<WalletPluginLoginResponse>\n     */\n    login(context) {\n        let promise;\n        // if is android, ipad, ios, show login prompt\n        if (isAndroid() || isIos()) {\n            promise = this.showLoginPrompt(context);\n        }\n        else {\n            promise = this.waxLogin(context);\n        }\n        return cancelable(promise, (canceled) => {\n            console.log('[login]canceled', canceled);\n            throw canceled;\n        });\n    }\n    async showLoginPrompt(context) {\n        let directConnectPromiseResolve;\n        let directConnectPromiseReject;\n        const directConnectPromise = new Promise((resolve, reject) => {\n            directConnectPromiseResolve = resolve;\n            directConnectPromiseReject = reject;\n        });\n        let webLoginPromiseResolve;\n        let webLoginPromiseReject;\n        const webLoginPromise = new Promise((resolve, reject) => {\n            webLoginPromiseResolve = resolve;\n            webLoginPromiseReject = reject;\n        });\n        const elements = [];\n        if ((this.mobileAppConnect instanceof MobileAppConnect)) {\n            elements.push({\n                type: 'button',\n                data: {\n                    label: 'Open My Cloud Wallet app',\n                    variant: 'primary',\n                    onClick: async () => {\n                        try {\n                            if (!(this.mobileAppConnect instanceof MobileAppConnect)) {\n                                throw new Error('Mobile App Connect is not initialized');\n                            }\n                            if (!context.chain) {\n                                throw new Error('A chain must be selected to login with.');\n                            }\n                            const user = await this.mobileAppConnect.directConnect(context);\n                            // handle proof\n                            const signature = user?.proof?.data?.signature;\n                            const identityProof = signature &&\n                                IdentityProof.from({\n                                    chainId: ChainId.from(context?.chain?.id),\n                                    scope: Name.from(context.appName || ''),\n                                    expiration: TimePointSec.from(new Date().getTime() / 1000 + 60 * 60),\n                                    signer: PermissionLevel.from({\n                                        actor: `${user?.account}`,\n                                        permission: 'active',\n                                    }),\n                                    signature: Signature.from(signature),\n                                });\n                            this.data.identityProof = identityProof;\n                            this.data.proof = user?.proof;\n                            this.data.isTempAccount = user?.isTemp;\n                            this.data.whitelist = user?.whitelistedContracts;\n                            directConnectPromiseResolve({\n                                chain: context.chain.id,\n                                permissionLevel: PermissionLevel.from({\n                                    actor: `${user?.account}`,\n                                    permission: 'active',\n                                }),\n                                identityProof,\n                            });\n                        }\n                        catch (error) {\n                            directConnectPromiseReject(error);\n                        }\n                    }\n                }\n            });\n        }\n        elements.push({\n            type: 'button',\n            data: {\n                label: 'Login with web',\n                variant: 'primary',\n                onClick: async () => {\n                    try {\n                        const result = await this.waxLogin(context);\n                        webLoginPromiseResolve(result);\n                    }\n                    catch (error) {\n                        webLoginPromiseReject(error);\n                    }\n                }\n            }\n        });\n        // Show the prompt UI\n        const currentPromptResponse = context.ui.prompt({\n            title: 'Connect to My Cloud Wallet',\n            body: 'Connect My Cloud Wallet on your mobile device',\n            elements,\n        });\n        currentPromptResponse.catch((error) => {\n            console.info('User cancelled modal::', error.message);\n            directConnectPromiseReject(error);\n        });\n        return await Promise.race([directConnectPromise, webLoginPromise]);\n    }\n    async waxLogin(context) {\n        if (!context.chain) {\n            throw new Error('A chain must be selected to login with.');\n        }\n        // Retrieve translation helper from the UI, passing the app ID\n        const t = context.ui.getTranslate(this.id);\n        let response;\n        // Create common search parameters\n        const searchParams = new URLSearchParams();\n        const nonce = context.arbitrary['nonce'];\n        if (nonce) {\n            const base64Nonce = btoa(nonce);\n            searchParams.set('n', base64Nonce);\n        }\n        searchParams.set('returnTemp', this.allowTemp.toString());\n        try {\n            // Attempt automatic login\n            const autoLoginUrl = new URL('/login', this.autoUrl);\n            autoLoginUrl.search = searchParams.toString();\n            response = await autoLogin(t, autoLoginUrl.toString());\n        }\n        catch (e) {\n            // Fallback to popup login\n            const popupLoginUrl = new URL('/cloud-wallet/login', this.url);\n            popupLoginUrl.search = searchParams.toString();\n            response = await popupLogin(t, popupLoginUrl.toString());\n        }\n        // If failed due to no response or no verified response, throw error\n        if (!response) {\n            throw new Error(t('login.error.response', { default: 'Cloud Wallet failed to respond' }));\n        }\n        if (!response.verified) {\n            throw new Error(t('error.closed', {\n                default: 'Cloud Wallet closed before the login was completed',\n            }));\n        }\n        // Save our whitelisted contracts\n        this.data.whitelist = response.whitelistedContracts;\n        this.data.isTempAccount = response.isTemp;\n        this.data.proof = response?.proof;\n        console.log('waxLogin::response proof', response?.proof);\n        const signature = response?.proof?.data?.signature;\n        const identityProof = signature &&\n            IdentityProof.from({\n                chainId: ChainId.from(context?.chain?.id),\n                scope: Name.from(context.appName || ''),\n                expiration: TimePointSec.from(new Date().getTime() / 1000 + 60 * 60),\n                signer: PermissionLevel.from({\n                    actor: response.userAccount,\n                    permission: 'active',\n                }),\n                signature: Signature.from(response?.proof?.data?.signature),\n            });\n        this.data.identityProof = identityProof;\n        return new Promise((resolve) => {\n            if (!context.chain) {\n                throw new Error('A chain must be selected to login with.');\n            }\n            localStorage.setItem('connectedType', 'web');\n            // Return to session's transact call\n            resolve({\n                chain: context.chain.id,\n                permissionLevel: PermissionLevel.from({\n                    actor: response.userAccount,\n                    permission: 'active',\n                }),\n                identityProof,\n            });\n        });\n    }\n    /**\n     * Performs the wallet logic required to sign a transaction and return the signature.\n     *\n     * @param chain ChainDefinition\n     * @param resolved ResolvedSigningRequest\n     * @returns Promise<Signature>\n     */\n    sign(resolved, context) {\n        let promise;\n        const connectedType = localStorage.getItem('connectedType');\n        if ((this.mobileAppConnect instanceof MobileAppConnect\n            && (connectedType === 'direct' || connectedType === 'remote'))) {\n            console.log('mobileSign');\n            promise = this.mobileSign(resolved, context);\n        }\n        else {\n            console.log('waxSign');\n            promise = this.waxSign(resolved, context);\n        }\n        return cancelable(promise, (canceled) => {\n            throw canceled;\n        });\n    }\n    async mobileSign(resolved, context) {\n        if (!context.ui) {\n            throw new Error('A UserInterface must be defined to sign transactions.');\n        }\n        if (!(this.mobileAppConnect instanceof MobileAppConnect)) {\n            throw new Error('MobileAppConnect is not initialized');\n        }\n        let mobileSignCancelReject;\n        const mobileSignCancelPromise = new Promise((resolve, reject) => {\n            mobileSignCancelReject = reject;\n        });\n        context.ui.getTranslate(this.id);\n        const expiration = resolved.transaction.expiration.toDate();\n        const now = new Date();\n        const timeout = Math.floor(expiration.getTime() - now.getTime());\n        console.log('timeout', timeout);\n        let promptPromise = cancelable(new Promise(() => { }));\n        if (!allowAutosign(resolved, this.data)) {\n            // Tell Wharf we need to prompt the user with a countdown\n            promptPromise = context.ui.prompt({\n                title: 'Sign',\n                body: `Please complete the transaction using the Cloud Wallet app.`,\n                optional: true,\n                elements: [\n                    {\n                        type: 'countdown',\n                        data: expiration.toISOString(),\n                    },\n                ],\n            });\n            // Clear the timeout if the UI throws (which generally means it closed)\n            promptPromise.catch((error) => {\n                clearTimeout(timer);\n                mobileSignCancelReject(error);\n            });\n        }\n        const timer = setTimeout(() => {\n            if (!context.ui) {\n                throw new Error('No UI defined');\n            }\n            promptPromise.cancel('The request expired, please try again.');\n        }, timeout);\n        const signPromise = this.mobileAppConnect.signTransaction(resolved, context, {});\n        return Promise.race([mobileSignCancelPromise, signPromise]);\n    }\n    async waxSign(resolved, context) {\n        if (!context.ui) {\n            throw new Error('A UserInterface must be defined to sign transactions.');\n        }\n        // Retrieve translation helper from the UI, passing the app ID\n        const t = context.ui.getTranslate(this.id);\n        // Set expiration time frames for the request\n        const expiration = resolved.transaction.expiration.toDate();\n        const now = new Date();\n        const timeout = Math.floor(expiration.getTime() - now.getTime());\n        // Perform WAX Cloud Wallet signing\n        const callbackPromise = this.getWalletResponse(resolved, context, t, timeout);\n        let promptPromise = cancelable(new Promise(() => { }));\n        if (!allowAutosign(resolved, this.data)) {\n            // Tell Wharf we need to prompt the user with a countdown\n            promptPromise = context.ui.prompt({\n                title: 'Sign',\n                body: `Please complete the transaction using the Cloud Wallet popup window.`,\n                optional: true,\n                elements: [\n                    {\n                        type: 'countdown',\n                        data: expiration.toISOString(),\n                    },\n                ],\n            });\n            // Clear the timeout if the UI throws (which generally means it closed)\n            promptPromise.catch(() => clearTimeout(timer));\n        }\n        // Create a timer to test the external cancelation of the prompt, if defined\n        const timer = setTimeout(() => {\n            if (!context.ui) {\n                throw new Error('No UI defined');\n            }\n            promptPromise.cancel('The request expired, please try again.');\n        }, timeout);\n        // Wait for either the callback or the prompt to resolve\n        const callbackResponse = await Promise.race([callbackPromise, promptPromise]).finally(() => {\n            // Clear the automatic timeout once the race resolves\n            clearTimeout(timer);\n            promptPromise.cancel();\n        });\n        if (isCallback(callbackResponse)) {\n            // The response to return to the Session Kit\n            const result = {\n                signatures: callbackResponse.signatures,\n            };\n            // If a transaction was returned by the WCW\n            if (callbackResponse.serializedTransaction) {\n                // Convert the serialized transaction from the WCW to a Transaction object\n                const responseTransaction = Serializer.decode({\n                    data: callbackResponse.serializedTransaction,\n                    type: Transaction,\n                });\n                // Determine if the transaction changed from the requested transaction\n                if (!responseTransaction.equals(resolved.transaction)) {\n                    // Evalutate whether modifications are valid, if not throw error\n                    validateModifications(resolved.transaction, responseTransaction);\n                    // If transaction modified, return a new resolved request to Wharf\n                    const request = await SigningRequest.create({\n                        transaction: responseTransaction,\n                    }, context.esrOptions);\n                    // Created a resolved request\n                    result.resolved = new ResolvedSigningRequest(request, context.permissionLevel, Transaction.from(responseTransaction), Serializer.objectify(Transaction.from(responseTransaction)), ChainId.from(context.chain.id));\n                }\n            }\n            return new Promise((resolve) => resolve(result));\n        }\n        throw new Error('The Cloud Wallet failed to respond');\n    }\n    async getWalletResponse(resolved, context, t, timeout = 300000) {\n        let response;\n        if (!context.ui) {\n            throw new Error('The Cloud Wallet requires a UI to sign transactions.');\n        }\n        // Check if automatic signing is allowed\n        if (allowAutosign(resolved, this.data)) {\n            try {\n                // Try automatic signing\n                response = await autoSign(t, `${this.autoUrl}/signing`, resolved);\n            }\n            catch (e) {\n                // Fallback to poup signing\n                response = await popupTransact(t, `${this.url}/cloud-wallet/signing/`, resolved, timeout);\n            }\n        }\n        else {\n            // If automatic is not allowed use the popup\n            response = await popupTransact(t, `${this.url}/cloud-wallet/signing/`, resolved, timeout);\n        }\n        // Catch unknown errors where no response is returned\n        if (!response) {\n            throw new Error(t('login.error.response', { default: 'Cloud Wallet failed to respond' }));\n        }\n        // Ensure the response is verified, if not the user most likely cancelled the request\n        if (!response.verified) {\n            throw new Error(t('error.closed', {\n                default: 'The Cloud Wallet was closed before the request was completed',\n            }));\n        }\n        // Save our whitelisted contracts\n        this.data.whitelist = response.whitelistedContracts;\n        // Return the response from the API\n        return response;\n    }\n    async logout(context) {\n        if (this.mobileAppConnect) {\n            await this.mobileAppConnect.cleanup();\n        }\n        return;\n    }\n}\nfunction isCallback(object) {\n    return 'serializedTransaction' in object;\n}\n\nexport { WalletPluginCloudWallet };\n//# sourceMappingURL=wallet-plugin-cloudwallet.m.js.map\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","/**\n * @wharfkit/wallet-plugin-anchor v1.6.0\n * https://github.com/wharfkit/wallet-plugin-anchor\n *\n * @license\n * Copyright (c) 2023 Greymass Inc. All Rights Reserved.\n * \n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n * \n * 1.  Redistribution of source code must retain the above copyright notice, this\n *     list of conditions and the following disclaimer.\n * \n * 2.  Redistribution in binary form must reproduce the above copyright notice,\n *     this list of conditions and the following disclaimer in the documentation\n *     and/or other materials provided with the distribution.\n * \n * 3.  Neither the name of the copyright holder nor the names of its contributors\n *     may be used to endorse or promote products derived from this software without\n *     specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE\n * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED\n * OF THE POSSIBILITY OF SUCH DAMAGE.\n * \n * YOU ACKNOWLEDGE THAT THIS SOFTWARE IS NOT DESIGNED, LICENSED OR INTENDED FOR USE\n * IN THE DESIGN, CONSTRUCTION, OPERATION OR MAINTENANCE OF ANY MILITARY FACILITY.\n */\nimport { send } from '@greymass/buoy';\nimport { AbstractWalletPlugin, WalletPluginMetadata, Logo, PublicKey, ResolvedSigningRequest, Checksum256, PermissionLevel, PrivateKey, Serializer } from '@wharfkit/session';\nimport { createIdentityRequest, isKnownMobile, waitForCallback, verifyLoginCallbackResponse, LinkInfo, setTransactionCallback, generateReturnUrl, isAppleHandheld, sealMessage, isCallback, extractSignaturesFromCallback } from '@wharfkit/protocol-esr';\n\nvar login$1 = {\n\ttitle: \"Connect with Anchor\",\n\tbody: \"Scan with Anchor on your mobile device or click the button below to open on this device.\",\n\tlink: \"Launch Anchor\"\n};\nvar transact$1 = {\n\ttitle: \"Complete using Anchor\",\n\tbody: \"Please open your Anchor Wallet on \\\"{{channelName}}\\\" to review and approve this transaction.\",\n\tlabel: \"Sign manually or with another device\",\n\tlink: \"Trigger Manually\",\n\t\"await\": \"Waiting for response from Anchor\"\n};\nvar error$1 = {\n\texpired: \"The request expired, please try again.\",\n\tinvalid_response: \"Invalid response from Anchor, must contain link_ch, link_key, link_name and cid flags.\",\n\tnot_completed: \"The request was not completed.\",\n\tcancelled: \"The request was cancelled from Anchor.\"\n};\nvar en = {\n\tlogin: login$1,\n\ttransact: transact$1,\n\terror: error$1\n};\n\nvar ko = {\n\t\n};\n\nvar login = {\n\tlink: \"Anchor\",\n\tbody: \"Anchor\",\n\ttitle: \"Anchor\"\n};\nvar error = {\n\tcancelled: \"Anchor\",\n\tnot_completed: \"\",\n\tinvalid_response: \"Anchorlink_ch, link_key, link_namecid\",\n\texpired: \"\"\n};\nvar transact = {\n\t\"await\": \"Anchor\",\n\tlink: \"\",\n\tlabel: \"\",\n\tbody: \"\\\"{{channelName}}\\\"Anchor\",\n\ttitle: \"Anchor\"\n};\nvar zh_hans = {\n\tlogin: login,\n\terror: error,\n\ttransact: transact\n};\n\nvar zh_hant = {\n\t\n};\n\nvar defaultTranslations = {\n    en,\n    ko,\n    'zh-Hans': zh_hans,\n    'zh-Hant': zh_hant,\n};\n\nclass WalletPluginAnchor extends AbstractWalletPlugin {\n    constructor(options) {\n        super();\n        /**\n         * The unique identifier for the wallet plugin.\n         */\n        this.id = 'anchor';\n        /**\n         * The translations for this plugin\n         */\n        this.translations = defaultTranslations;\n        /**\n         * The logic configuration for the wallet plugin.\n         */\n        this.config = {\n            // Should the user interface display a chain selector?\n            requiresChainSelect: false,\n            // Should the user interface display a permission selector?\n            requiresPermissionSelect: false,\n        };\n        /**\n         * The metadata for the wallet plugin to be displayed in the user interface.\n         */\n        this.metadata = WalletPluginMetadata.from({\n            name: 'Anchor',\n            description: '',\n            logo: Logo.from({\n                dark: 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB3aWR0aD0iMTYwIiBoZWlnaHQ9IjE2MCIgdmlld0JveD0iMCAwIDI1NiAyNTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMS40NCwgMCwgMCwgMS40NCwgLTguNTAxOTI1LCAtNTcuMDc0NTcpIiBzdHlsZT0iIj4KICAgIDx0aXRsZT5XaGl0ZTwvdGl0bGU+CiAgICA8Y2lyY2xlIGN4PSI5NC43OTMiIGN5PSIxMjguNTI0IiByPSI4MCIgZmlsbD0iI0ZCRkRGRiIvPgogICAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0gOTQuNzk5IDc4LjUyNCBDIDk3LjA5OCA3OC41MjQgOTkuMTk1IDc5LjgzNyAxMDAuMTk4IDgxLjkwNiBMIDEyNC4yMDQgMTMxLjQwNiBMIDEyNC43NDYgMTMyLjUyNCBMIDExMS40MDkgMTMyLjUyNCBMIDEwNy41MyAxMjQuNTI0IEwgODIuMDY5IDEyNC41MjQgTCA3OC4xODkgMTMyLjUyNCBMIDY0Ljg1MyAxMzIuNTI0IEwgNjUuMzk1IDEzMS40MDYgTCA4OS40MDEgODEuOTA2IEMgOTAuNDA0IDc5LjgzNyA5Mi41MDEgNzguNTI0IDk0Ljc5OSA3OC41MjQgWiBNIDg2LjkxOSAxMTQuNTI0IEwgMTAyLjY4IDExNC41MjQgTCA5NC43OTkgOTguMjc0IEwgODYuOTE5IDExNC41MjQgWiBNIDExMi43OTMgMTQ5LjUyNCBMIDEyNC43OTggMTQ5LjUyNCBDIDEyNC40MzcgMTY1LjY3NiAxMTEuMDY3IDE3OC41MjQgOTQuNzk5IDE3OC41MjQgQyA3OC41MzIgMTc4LjUyNCA2NS4xNjIgMTY1LjY3NiA2NC44MDEgMTQ5LjUyNCBMIDc2LjgwNiAxNDkuNTI0IEMgNzcuMDg3IDE1Ni44NzggODEuOTc0IDE2My4xNTUgODguNzkzIDE2NS41MiBMIDg4Ljc5MyAxNDEuNTI0IEMgODguNzkzIDEzOC4yMSA5MS40OCAxMzUuNTI0IDk0Ljc5MyAxMzUuNTI0IEMgOTguMTA3IDEzNS41MjQgMTAwLjc5MyAxMzguMjEgMTAwLjc5MyAxNDEuNTI0IEwgMTAwLjc5MyAxNjUuNTI0IEMgMTA3LjYyIDE2My4xNjIgMTEyLjUxMSAxNTYuODgzIDExMi43OTMgMTQ5LjUyNCBaIiBmaWxsPSIjMzY1MEEyIi8+CiAgPC9nPgo8L3N2Zz4=',\n                light: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYwIiBoZWlnaHQ9IjE2MCIgdmlld0JveD0iMCAwIDE2MCAxNjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxjaXJjbGUgY3g9IjgwIiBjeT0iODAiIHI9IjgwIiBmaWxsPSIjMzY1MEEyIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNODAuMDA2MyAzMEM4Mi4zMDUxIDMwIDg0LjQwMTkgMzEuMzEzNCA4NS40MDUgMzMuMzgxOEwxMDkuNDExIDgyLjg4MjJMMTA5Ljk1MyA4NEg5Ni42MTYzTDkyLjczNjYgNzZINjcuMjc1OUw2My4zOTYxIDg0SDUwLjA1OTRMNTAuNjAxNyA4Mi44ODE4TDc0LjYwNzcgMzMuMzgxOEM3NS42MTA4IDMxLjMxMzQgNzcuNzA3NSAzMCA4MC4wMDYzIDMwWk03Mi4xMjU2IDY2SDg3Ljg4N0w4MC4wMDYzIDQ5Ljc1MDFMNzIuMTI1NiA2NlpNOTcuOTk5NSAxMDFIMTEwLjAwNUMxMDkuNjQ0IDExNy4xNTIgOTYuMjczOCAxMzAgODAuMDA2MyAxMzBDNjMuNzM4OCAxMzAgNTAuMzY4NiAxMTcuMTUyIDUwLjAwNzggMTAxSDYyLjAxMzFDNjIuMjk0MSAxMDguMzU0IDY3LjE4MDQgMTE0LjYzMSA3NC4wMDAzIDExNi45OTZWOTNDNzQuMDAwMyA4OS42ODYzIDc2LjY4NjYgODcgODAuMDAwMyA4N0M4My4zMTQgODcgODYuMDAwMyA4OS42ODYzIDg2LjAwMDMgOTNWMTE3QzkyLjgyNjUgMTE0LjYzOCA5Ny43MTgzIDEwOC4zNTkgOTcuOTk5NSAxMDFaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K',\n            }),\n            homepage: 'https://greymass.com/anchor',\n            download: 'https://greymass.com/anchor/download',\n        });\n        this.buoyUrl = options?.buoyUrl || 'https://cb.anchor.link';\n        this.buoyWs = options?.buoyWs;\n    }\n    /**\n     * Performs the wallet logic required to login and return the chain and permission level to use.\n     *\n     * @param options WalletPluginLoginOptions\n     * @returns Promise<WalletPluginLoginResponse>\n     */\n    login(context) {\n        return new Promise((resolve, reject) => {\n            this.handleLogin(context)\n                .then((response) => {\n                resolve(response);\n            })\n                .catch((error) => {\n                reject(error);\n            });\n        });\n    }\n    async handleLogin(context) {\n        if (!context.ui) {\n            throw new Error('No UI available');\n        }\n        // Retrieve translation helper from the UI, passing the app ID\n        const t = context.ui.getTranslate(this.id);\n        // Create the identity request to be presented to the user\n        const { callback, request, sameDeviceRequest, requestKey, privateKey } = await createIdentityRequest(context, this.buoyUrl);\n        // Elements for the login prompt\n        const elements = [\n            {\n                type: 'link',\n                label: t('login.link', { default: 'Launch Anchor' }),\n                data: {\n                    href: sameDeviceRequest.encode(true, false, 'esr:'),\n                    label: t('login.link', { default: 'Launch Anchor' }),\n                    variant: 'primary',\n                },\n            },\n        ];\n        // If we know this is NOT a mobile device, show the QR code\n        if (!isKnownMobile()) {\n            elements.unshift({\n                type: 'qr',\n                data: request.encode(true, false, 'esr:'),\n            });\n        }\n        // Automatically try to open the link\n        window.location.href = sameDeviceRequest.encode(true, false, 'esr:');\n        // Tell Wharf we need to prompt the user with a QR code and a button\n        const promptResponse = context.ui?.prompt({\n            title: t('login.title', { default: 'Connect with Anchor' }),\n            body: t('login.body', {\n                default: 'Scan with Anchor on your mobile device or click the button below to open on this device.',\n            }),\n            elements,\n        });\n        promptResponse.catch(() => {\n            // eslint-disable-next-line no-console\n            console.info('Modal closed');\n        });\n        // Await a promise race to wait for either the wallet response or the cancel\n        const callbackResponse = await waitForCallback(callback, this.buoyWs, t);\n        verifyLoginCallbackResponse(callbackResponse, context);\n        if (!callbackResponse.cid || !callbackResponse.sa || !callbackResponse.sp) {\n            throw new Error('Invalid callback response');\n        }\n        if (callbackResponse.link_ch && callbackResponse.link_key && callbackResponse.link_name) {\n            this.data.requestKey = requestKey;\n            this.data.privateKey = privateKey;\n            this.data.signerKey =\n                callbackResponse.link_key && PublicKey.from(callbackResponse.link_key);\n            this.data.channelUrl = callbackResponse.link_ch;\n            this.data.channelName = callbackResponse.link_name;\n            try {\n                if (callbackResponse.link_meta) {\n                    const metadata = JSON.parse(callbackResponse.link_meta);\n                    this.data.sameDevice = metadata.sameDevice;\n                    this.data.launchUrl = metadata.launchUrl;\n                    this.data.triggerUrl = metadata.triggerUrl;\n                }\n            }\n            catch (e) {\n                // console.log('Error processing link_meta', e)\n            }\n        }\n        const resolvedResponse = await ResolvedSigningRequest.fromPayload(callbackResponse, context.esrOptions);\n        const identityProof = resolvedResponse.getIdentityProof(callbackResponse.sig);\n        return {\n            chain: Checksum256.from(callbackResponse.cid),\n            permissionLevel: PermissionLevel.from({\n                actor: callbackResponse.sa,\n                permission: callbackResponse.sp,\n            }),\n            identityProof,\n        };\n    }\n    /**\n     * Performs the wallet logic required to sign a transaction and return the signature.\n     *\n     * @param chain ChainDefinition\n     * @param resolved ResolvedSigningRequest\n     * @returns Promise<Signature>\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    sign(resolved, context) {\n        return this.handleSigningRequest(resolved, context);\n    }\n    async handleSigningRequest(resolved, context) {\n        if (!context.ui) {\n            throw new Error('No UI available');\n        }\n        // Retrieve translation helper from the UI, passing the app ID\n        const t = context.ui.getTranslate(this.id);\n        // Set expiration time frames for the request\n        const expiration = resolved.transaction.expiration.toDate();\n        const now = new Date();\n        const expiresIn = Math.floor(expiration.getTime() - now.getTime());\n        // Create a new signing request based on the existing resolved request\n        const modifiedRequest = await context.createRequest({ transaction: resolved.transaction });\n        // Set the expiration on the request LinkInfo\n        modifiedRequest.setInfoKey('link', LinkInfo.from({\n            expiration,\n        }));\n        // Add the callback to the request\n        const callback = setTransactionCallback(modifiedRequest, this.buoyUrl);\n        const request = modifiedRequest.encode(true, false);\n        // Mobile will return true or false, desktop will return undefined\n        const isSameDevice = this.data.sameDevice !== false;\n        // Same device request\n        const sameDeviceRequest = modifiedRequest.clone();\n        const returnUrl = generateReturnUrl();\n        sameDeviceRequest.setInfoKey('same_device', true);\n        if (returnUrl) {\n            sameDeviceRequest.setInfoKey('return_path', returnUrl);\n        }\n        if (this.data.sameDevice) {\n            if (this.data.launchUrl) {\n                window.location.href = this.data.launchUrl;\n            }\n            else if (isAppleHandheld()) {\n                window.location.href = 'anchor://link';\n            }\n        }\n        const signManually = () => {\n            context.ui?.prompt({\n                title: t('transact.sign_manually.title', { default: 'Sign manually' }),\n                body: t('transact.sign_manually.body', {\n                    default: 'Scan the QR-code with Anchor on another device or use the button to open it here.',\n                }),\n                elements: [\n                    {\n                        type: 'qr',\n                        data: String(request),\n                    },\n                    {\n                        type: 'link',\n                        label: t('transact.sign_manually.link.title', { default: 'Open Anchor' }),\n                        data: {\n                            href: String(sameDeviceRequest),\n                            label: t('transact.sign_manually.link.title', { default: 'Open Anchor' }),\n                        },\n                    },\n                ],\n            });\n        };\n        // Tell Wharf we need to prompt the user with a QR code and a button\n        const promptPromise = context.ui.prompt({\n            title: t('transact.title', { default: 'Complete using Anchor' }),\n            body: t('transact.body', {\n                channelName: this.data.channelName,\n                default: `Please open your Anchor Wallet on \"${this.data.channelName}\" to review and approve this transaction.`,\n            }),\n            elements: [\n                {\n                    type: 'countdown',\n                    data: {\n                        label: t('transact.await', { default: 'Waiting for response from Anchor' }),\n                        end: expiration.toISOString(),\n                    },\n                },\n                {\n                    type: 'button',\n                    label: t('transact.label', { default: 'Sign manually or with another device' }),\n                    data: {\n                        onClick: isSameDevice\n                            ? () => (window.location.href = sameDeviceRequest.encode())\n                            : signManually,\n                        label: t('transact.label', {\n                            default: 'Sign manually or with another device',\n                        }),\n                    },\n                },\n            ],\n        });\n        // Create a timer to test the external cancelation of the prompt, if defined\n        const timer = setTimeout(() => {\n            if (!context.ui) {\n                throw new Error('No UI available');\n            }\n            promptPromise.cancel(t('error.expired', { default: 'The request expired, please try again.' }));\n        }, expiresIn);\n        // Clear the timeout if the UI throws (which generally means it closed)\n        promptPromise.catch(() => clearTimeout(timer));\n        // Wait for the callback from the wallet\n        const callbackPromise = waitForCallback(callback, this.buoyWs, t);\n        // Assemble and send the payload to the wallet\n        if (this.data.channelUrl) {\n            const service = new URL(this.data.channelUrl).origin;\n            const channel = new URL(this.data.channelUrl).pathname.substring(1);\n            const sealedMessage = await sealMessage((this.data.sameDevice ? sameDeviceRequest : modifiedRequest).encode(true, false, 'esr:'), PrivateKey.from(this.data.privateKey), PublicKey.from(this.data.signerKey));\n            send(Serializer.encode({ object: sealedMessage }).array, {\n                service,\n                channel,\n            });\n        }\n        else {\n            // If no channel is defined, fallback to the same device request and trigger immediately\n            window.location.href = sameDeviceRequest.encode();\n        }\n        // Wait for either the callback or the prompt to resolve\n        const callbackResponse = await Promise.race([callbackPromise, promptPromise]).finally(() => {\n            // Clear the automatic timeout once the race resolves\n            clearTimeout(timer);\n        });\n        const wasSuccessful = isCallback(callbackResponse) &&\n            extractSignaturesFromCallback(callbackResponse).length > 0;\n        if (wasSuccessful) {\n            // If the callback was resolved, create a new request from the response\n            const resolvedRequest = await ResolvedSigningRequest.fromPayload(callbackResponse, context.esrOptions);\n            // Return the new request and the signatures from the wallet\n            return {\n                signatures: extractSignaturesFromCallback(callbackResponse),\n                resolved: resolvedRequest,\n            };\n        }\n        const errorString = t('error.not_completed', { default: 'The request was not completed.' });\n        promptPromise.cancel(errorString);\n        // This shouldn't ever trigger, but just in case\n        throw new Error(errorString);\n    }\n}\n\nexport { WalletPluginAnchor };\n//# sourceMappingURL=wallet-plugin-anchor.m.js.map\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default { randomUUID };\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Logging constants\nconst AWS_CLOUDWATCH_CATEGORY = 'Logging';\nconst USER_AGENT_HEADER = 'x-amz-user-agent';\n// Error exception code constants\nconst NO_HUBCALLBACK_PROVIDED_EXCEPTION = 'NoHubcallbackProvidedException';\n\nexport { AWS_CLOUDWATCH_CATEGORY, NO_HUBCALLBACK_PROVIDED_EXCEPTION, USER_AGENT_HEADER };\n//# sourceMappingURL=constants.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nvar LogType;\n(function (LogType) {\n    LogType[\"DEBUG\"] = \"DEBUG\";\n    LogType[\"ERROR\"] = \"ERROR\";\n    LogType[\"INFO\"] = \"INFO\";\n    LogType[\"WARN\"] = \"WARN\";\n    LogType[\"VERBOSE\"] = \"VERBOSE\";\n    LogType[\"NONE\"] = \"NONE\";\n})(LogType || (LogType = {}));\n\nexport { LogType };\n//# sourceMappingURL=types.mjs.map\n","import { AWS_CLOUDWATCH_CATEGORY } from '../constants.mjs';\nimport { LogType } from './types.mjs';\n\n/* eslint-disable no-console */\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst LOG_LEVELS = {\n    VERBOSE: 1,\n    DEBUG: 2,\n    INFO: 3,\n    WARN: 4,\n    ERROR: 5,\n    NONE: 6,\n};\n/**\n * Write logs\n * @class Logger\n */\nclass ConsoleLogger {\n    /**\n     * @constructor\n     * @param {string} name - Name of the logger\n     */\n    constructor(name, level = LogType.WARN) {\n        this.name = name;\n        this.level = level;\n        this._pluggables = [];\n    }\n    _padding(n) {\n        return n < 10 ? '0' + n : '' + n;\n    }\n    _ts() {\n        const dt = new Date();\n        return ([this._padding(dt.getMinutes()), this._padding(dt.getSeconds())].join(':') +\n            '.' +\n            dt.getMilliseconds());\n    }\n    configure(config) {\n        if (!config)\n            return this._config;\n        this._config = config;\n        return this._config;\n    }\n    /**\n     * Write log\n     * @method\n     * @memeberof Logger\n     * @param {LogType|string} type - log type, default INFO\n     * @param {string|object} msg - Logging message or object\n     */\n    _log(type, ...msg) {\n        let loggerLevelName = this.level;\n        if (ConsoleLogger.LOG_LEVEL) {\n            loggerLevelName = ConsoleLogger.LOG_LEVEL;\n        }\n        if (typeof window !== 'undefined' && window.LOG_LEVEL) {\n            loggerLevelName = window.LOG_LEVEL;\n        }\n        const loggerLevel = LOG_LEVELS[loggerLevelName];\n        const typeLevel = LOG_LEVELS[type];\n        if (!(typeLevel >= loggerLevel)) {\n            // Do nothing if type is not greater than or equal to logger level (handle undefined)\n            return;\n        }\n        let log = console.log.bind(console);\n        if (type === LogType.ERROR && console.error) {\n            log = console.error.bind(console);\n        }\n        if (type === LogType.WARN && console.warn) {\n            log = console.warn.bind(console);\n        }\n        if (ConsoleLogger.BIND_ALL_LOG_LEVELS) {\n            if (type === LogType.INFO && console.info) {\n                log = console.info.bind(console);\n            }\n            if (type === LogType.DEBUG && console.debug) {\n                log = console.debug.bind(console);\n            }\n        }\n        const prefix = `[${type}] ${this._ts()} ${this.name}`;\n        let message = '';\n        if (msg.length === 1 && typeof msg[0] === 'string') {\n            message = `${prefix} - ${msg[0]}`;\n            log(message);\n        }\n        else if (msg.length === 1) {\n            message = `${prefix} ${msg[0]}`;\n            log(prefix, msg[0]);\n        }\n        else if (typeof msg[0] === 'string') {\n            let obj = msg.slice(1);\n            if (obj.length === 1) {\n                obj = obj[0];\n            }\n            message = `${prefix} - ${msg[0]} ${obj}`;\n            log(`${prefix} - ${msg[0]}`, obj);\n        }\n        else {\n            message = `${prefix} ${msg}`;\n            log(prefix, msg);\n        }\n        for (const plugin of this._pluggables) {\n            const logEvent = { message, timestamp: Date.now() };\n            plugin.pushLogs([logEvent]);\n        }\n    }\n    /**\n     * Write General log. Default to INFO\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    log(...msg) {\n        this._log(LogType.INFO, ...msg);\n    }\n    /**\n     * Write INFO log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    info(...msg) {\n        this._log(LogType.INFO, ...msg);\n    }\n    /**\n     * Write WARN log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    warn(...msg) {\n        this._log(LogType.WARN, ...msg);\n    }\n    /**\n     * Write ERROR log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    error(...msg) {\n        this._log(LogType.ERROR, ...msg);\n    }\n    /**\n     * Write DEBUG log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    debug(...msg) {\n        this._log(LogType.DEBUG, ...msg);\n    }\n    /**\n     * Write VERBOSE log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    verbose(...msg) {\n        this._log(LogType.VERBOSE, ...msg);\n    }\n    addPluggable(pluggable) {\n        if (pluggable && pluggable.getCategoryName() === AWS_CLOUDWATCH_CATEGORY) {\n            this._pluggables.push(pluggable);\n            pluggable.configure(this._config);\n        }\n    }\n    listPluggables() {\n        return this._pluggables;\n    }\n}\nConsoleLogger.LOG_LEVEL = null;\nConsoleLogger.BIND_ALL_LOG_LEVELS = false;\n\nexport { ConsoleLogger };\n//# sourceMappingURL=ConsoleLogger.mjs.map\n","class AmplifyError extends Error {\n    /**\n     *  Constructs an AmplifyError.\n     *\n     * @param message text that describes the main problem.\n     * @param underlyingError the underlying cause of the error.\n     * @param recoverySuggestion suggestion to recover from the error.\n     *\n     */\n    constructor({ message, name, recoverySuggestion, underlyingError, metadata, }) {\n        super(message);\n        this.name = name;\n        this.underlyingError = underlyingError;\n        this.recoverySuggestion = recoverySuggestion;\n        if (metadata) {\n            // If metadata exists, explicitly only record the following properties.\n            const { extendedRequestId, httpStatusCode, requestId } = metadata;\n            this.metadata = { extendedRequestId, httpStatusCode, requestId };\n        }\n        // Hack for making the custom error class work when transpiled to es5\n        // TODO: Delete the following 2 lines after we change the build target to >= es2015\n        this.constructor = AmplifyError;\n        Object.setPrototypeOf(this, AmplifyError.prototype);\n    }\n}\n\nexport { AmplifyError };\n//# sourceMappingURL=AmplifyError.mjs.map\n","var AmplifyErrorCode;\n(function (AmplifyErrorCode) {\n    AmplifyErrorCode[\"NoEndpointId\"] = \"NoEndpointId\";\n    AmplifyErrorCode[\"PlatformNotSupported\"] = \"PlatformNotSupported\";\n    AmplifyErrorCode[\"Unknown\"] = \"Unknown\";\n    AmplifyErrorCode[\"NetworkError\"] = \"NetworkError\";\n})(AmplifyErrorCode || (AmplifyErrorCode = {}));\n\nexport { AmplifyErrorCode };\n//# sourceMappingURL=errors.mjs.map\n","import { ConsoleLogger } from '../Logger/ConsoleLogger.mjs';\nimport { NO_HUBCALLBACK_PROVIDED_EXCEPTION } from '../constants.mjs';\nimport { AmplifyError } from '../errors/AmplifyError.mjs';\nimport '../types/errors.mjs';\nimport '../errors/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst AMPLIFY_SYMBOL = (typeof Symbol !== 'undefined'\n    ? Symbol('amplify_default')\n    : '@@amplify_default');\nconst logger = new ConsoleLogger('Hub');\nclass HubClass {\n    constructor(name) {\n        this.listeners = new Map();\n        this.protectedChannels = [\n            'core',\n            'auth',\n            'api',\n            'analytics',\n            'interactions',\n            'pubsub',\n            'storage',\n            'ui',\n            'xr',\n        ];\n        this.name = name;\n    }\n    /**\n     * Used internally to remove a Hub listener.\n     *\n     * @remarks\n     * This private method is for internal use only. Instead of calling Hub.remove, call the result of Hub.listen.\n     */\n    _remove(channel, listener) {\n        const holder = this.listeners.get(channel);\n        if (!holder) {\n            logger.warn(`No listeners for ${channel}`);\n            return;\n        }\n        this.listeners.set(channel, [\n            ...holder.filter(({ callback }) => callback !== listener),\n        ]);\n    }\n    dispatch(channel, payload, source, ampSymbol) {\n        if (typeof channel === 'string' &&\n            this.protectedChannels.indexOf(channel) > -1) {\n            const hasAccess = ampSymbol === AMPLIFY_SYMBOL;\n            if (!hasAccess) {\n                logger.warn(`WARNING: ${channel} is protected and dispatching on it can have unintended consequences`);\n            }\n        }\n        const capsule = {\n            channel,\n            payload: { ...payload },\n            source,\n            patternInfo: [],\n        };\n        try {\n            this._toListeners(capsule);\n        }\n        catch (e) {\n            logger.error(e);\n        }\n    }\n    listen(channel, callback, listenerName = 'noname') {\n        let cb;\n        if (typeof callback !== 'function') {\n            throw new AmplifyError({\n                name: NO_HUBCALLBACK_PROVIDED_EXCEPTION,\n                message: 'No callback supplied to Hub',\n            });\n        }\n        else {\n            // Needs to be casted as a more generic type\n            cb = callback;\n        }\n        let holder = this.listeners.get(channel);\n        if (!holder) {\n            holder = [];\n            this.listeners.set(channel, holder);\n        }\n        holder.push({\n            name: listenerName,\n            callback: cb,\n        });\n        return () => {\n            this._remove(channel, cb);\n        };\n    }\n    _toListeners(capsule) {\n        const { channel, payload } = capsule;\n        const holder = this.listeners.get(channel);\n        if (holder) {\n            holder.forEach(listener => {\n                logger.debug(`Dispatching to ${channel} with `, payload);\n                try {\n                    listener.callback(capsule);\n                }\n                catch (e) {\n                    logger.error(e);\n                }\n            });\n        }\n    }\n}\n/* We export a __default__ instance of HubClass to use it as a\npseudo Singleton for the main messaging bus, however you can still create\nyour own instance of HubClass() for a separate \"private bus\" of events. */\nconst Hub = new HubClass('__default__');\n/**\n * @internal\n *\n * Internal hub used for core Amplify functionality. Not intended for use outside of Amplify.\n *\n */\nconst HubInternal = new HubClass('internal-hub');\n\nexport { AMPLIFY_SYMBOL, Hub, HubClass, HubInternal };\n//# sourceMappingURL=index.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst isNonRetryableError = (obj) => {\n    const key = 'nonRetryable';\n    return obj && obj[key];\n};\n\nexport { isNonRetryableError };\n//# sourceMappingURL=isNonRetryableError.mjs.map\n","import { ConsoleLogger } from '../../Logger/ConsoleLogger.mjs';\nimport { isNonRetryableError } from './isNonRetryableError.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('retryUtil');\n/**\n * @private\n * Internal use of Amplify only\n */\nasync function retry(functionToRetry, args, delayFn, onTerminate) {\n    if (typeof functionToRetry !== 'function') {\n        throw Error('functionToRetry must be a function');\n    }\n    // TODO(eslint): remove this linter suppression with refactoring.\n    // eslint-disable-next-line no-async-promise-executor\n    return new Promise(async (resolve, reject) => {\n        let attempt = 0;\n        let terminated = false;\n        let timeout;\n        let wakeUp = () => {\n            // no-op\n        }; // will be replaced with a resolver()\n        // used after the loop if terminated while waiting for a timer.\n        let lastError;\n        onTerminate &&\n            onTerminate.then(() => {\n                // signal not to try anymore.\n                terminated = true;\n                // stop sleeping if we're sleeping.\n                clearTimeout(timeout);\n                wakeUp();\n            });\n        // TODO(eslint): remove this linter suppression with refactoring.\n        // eslint-disable-next-line no-unmodified-loop-condition\n        while (!terminated) {\n            attempt++;\n            logger.debug(`${functionToRetry.name} attempt #${attempt} with this vars: ${JSON.stringify(args)}`);\n            try {\n                resolve(await functionToRetry(...args));\n                return;\n            }\n            catch (err) {\n                lastError = err;\n                logger.debug(`error on ${functionToRetry.name}`, err);\n                if (isNonRetryableError(err)) {\n                    logger.debug(`${functionToRetry.name} non retryable error`, err);\n                    reject(err);\n                    return;\n                }\n                const retryIn = delayFn(attempt, args, err);\n                logger.debug(`${functionToRetry.name} retrying in ${retryIn} ms`);\n                // we check `terminated` again here because it could have flipped\n                // in the time it took `functionToRetry` to return.\n                if (retryIn === false || terminated) {\n                    reject(err);\n                    return;\n                }\n                else {\n                    await new Promise(_resolve => {\n                        wakeUp = _resolve; // export wakeUp for onTerminate handling\n                        timeout = setTimeout(wakeUp, retryIn);\n                    });\n                }\n            }\n        }\n        // reached if terminated while waiting for a timer.\n        reject(lastError);\n    });\n}\n\nexport { retry };\n//# sourceMappingURL=retry.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst deepFreeze = (object) => {\n    const propNames = Reflect.ownKeys(object);\n    for (const name of propNames) {\n        const value = object[name];\n        if ((value && typeof value === 'object') || typeof value === 'function') {\n            deepFreeze(value);\n        }\n    }\n    return Object.freeze(object);\n};\n\nexport { deepFreeze };\n//# sourceMappingURL=deepFreeze.mjs.map\n","import { ConsoleLogger } from './Logger/ConsoleLogger.mjs';\nimport { AmplifyError } from './errors/AmplifyError.mjs';\nimport './types/errors.mjs';\nimport './errors/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('parseAWSExports');\nconst authTypeMapping = {\n    API_KEY: 'apiKey',\n    AWS_IAM: 'iam',\n    AMAZON_COGNITO_USER_POOLS: 'userPool',\n    OPENID_CONNECT: 'oidc',\n    NONE: 'none',\n    AWS_LAMBDA: 'lambda',\n    // `LAMBDA` is an incorrect value that was added during the v6 rewrite.\n    // Keeping it as a valid value until v7 to prevent breaking customers who might\n    // be relying on it as a workaround.\n    // ref: https://github.com/aws-amplify/amplify-js/pull/12922\n    // TODO: @v7 remove next line\n    LAMBDA: 'lambda',\n};\n/**\n * Converts the object imported from `aws-exports.js` or `amplifyconfiguration.json` files generated by\n * the Amplify CLI into an object that conforms to the {@link ResourcesConfig}.\n *\n * @param config A configuration object imported  from `aws-exports.js` or `amplifyconfiguration.json`.\n *\n * @returns An object that conforms to the {@link ResourcesConfig} .\n */\nconst parseAWSExports = (config = {}) => {\n    if (!Object.prototype.hasOwnProperty.call(config, 'aws_project_region')) {\n        throw new AmplifyError({\n            name: 'InvalidParameterException',\n            message: 'Invalid config parameter.',\n            recoverySuggestion: 'Ensure passing the config object imported from  `amplifyconfiguration.json`.',\n        });\n    }\n    const { aws_appsync_apiKey, aws_appsync_authenticationType, aws_appsync_graphqlEndpoint, aws_appsync_region, aws_bots_config, aws_cognito_identity_pool_id, aws_cognito_sign_up_verification_method, aws_cognito_mfa_configuration, aws_cognito_mfa_types, aws_cognito_password_protection_settings, aws_cognito_verification_mechanisms, aws_cognito_signup_attributes, aws_cognito_social_providers, aws_cognito_username_attributes, aws_mandatory_sign_in, aws_mobile_analytics_app_id, aws_mobile_analytics_app_region, aws_user_files_s3_bucket, aws_user_files_s3_bucket_region, aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing, aws_user_pools_id, aws_user_pools_web_client_id, geo, oauth, predictions, aws_cloud_logic_custom, Notifications, modelIntrospection, } = config;\n    const amplifyConfig = {};\n    // Analytics\n    if (aws_mobile_analytics_app_id) {\n        amplifyConfig.Analytics = {\n            Pinpoint: {\n                appId: aws_mobile_analytics_app_id,\n                region: aws_mobile_analytics_app_region,\n            },\n        };\n    }\n    // Notifications\n    const { InAppMessaging, Push } = Notifications ?? {};\n    if (InAppMessaging?.AWSPinpoint || Push?.AWSPinpoint) {\n        if (InAppMessaging?.AWSPinpoint) {\n            const { appId, region } = InAppMessaging.AWSPinpoint;\n            amplifyConfig.Notifications = {\n                InAppMessaging: {\n                    Pinpoint: {\n                        appId,\n                        region,\n                    },\n                },\n            };\n        }\n        if (Push?.AWSPinpoint) {\n            const { appId, region } = Push.AWSPinpoint;\n            amplifyConfig.Notifications = {\n                ...amplifyConfig.Notifications,\n                PushNotification: {\n                    Pinpoint: {\n                        appId,\n                        region,\n                    },\n                },\n            };\n        }\n    }\n    // Interactions\n    if (Array.isArray(aws_bots_config)) {\n        amplifyConfig.Interactions = {\n            LexV1: Object.fromEntries(aws_bots_config.map(bot => [bot.name, bot])),\n        };\n    }\n    // API\n    if (aws_appsync_graphqlEndpoint) {\n        const defaultAuthMode = authTypeMapping[aws_appsync_authenticationType];\n        if (!defaultAuthMode) {\n            logger.debug(`Invalid authentication type ${aws_appsync_authenticationType}. Falling back to IAM.`);\n        }\n        amplifyConfig.API = {\n            GraphQL: {\n                endpoint: aws_appsync_graphqlEndpoint,\n                apiKey: aws_appsync_apiKey,\n                region: aws_appsync_region,\n                defaultAuthMode: defaultAuthMode ?? 'iam',\n            },\n        };\n        if (modelIntrospection) {\n            amplifyConfig.API.GraphQL.modelIntrospection = modelIntrospection;\n        }\n    }\n    // Auth\n    const mfaConfig = aws_cognito_mfa_configuration\n        ? {\n            status: aws_cognito_mfa_configuration &&\n                aws_cognito_mfa_configuration.toLowerCase(),\n            totpEnabled: aws_cognito_mfa_types?.includes('TOTP') ?? false,\n            smsEnabled: aws_cognito_mfa_types?.includes('SMS') ?? false,\n        }\n        : undefined;\n    const passwordFormatConfig = aws_cognito_password_protection_settings\n        ? {\n            minLength: aws_cognito_password_protection_settings.passwordPolicyMinLength,\n            requireLowercase: aws_cognito_password_protection_settings.passwordPolicyCharacters?.includes('REQUIRES_LOWERCASE') ?? false,\n            requireUppercase: aws_cognito_password_protection_settings.passwordPolicyCharacters?.includes('REQUIRES_UPPERCASE') ?? false,\n            requireNumbers: aws_cognito_password_protection_settings.passwordPolicyCharacters?.includes('REQUIRES_NUMBERS') ?? false,\n            requireSpecialCharacters: aws_cognito_password_protection_settings.passwordPolicyCharacters?.includes('REQUIRES_SYMBOLS') ?? false,\n        }\n        : undefined;\n    const mergedUserAttributes = Array.from(new Set([\n        ...(aws_cognito_verification_mechanisms ?? []),\n        ...(aws_cognito_signup_attributes ?? []),\n    ]));\n    const userAttributes = mergedUserAttributes.reduce((attributes, key) => ({\n        ...attributes,\n        // All user attributes generated by the CLI are required\n        [key.toLowerCase()]: { required: true },\n    }), {});\n    const loginWithEmailEnabled = aws_cognito_username_attributes?.includes('EMAIL') ?? false;\n    const loginWithPhoneEnabled = aws_cognito_username_attributes?.includes('PHONE_NUMBER') ?? false;\n    if (aws_cognito_identity_pool_id || aws_user_pools_id) {\n        amplifyConfig.Auth = {\n            Cognito: {\n                identityPoolId: aws_cognito_identity_pool_id,\n                allowGuestAccess: aws_mandatory_sign_in !== 'enable',\n                signUpVerificationMethod: aws_cognito_sign_up_verification_method,\n                userAttributes,\n                userPoolClientId: aws_user_pools_web_client_id,\n                userPoolId: aws_user_pools_id,\n                mfa: mfaConfig,\n                passwordFormat: passwordFormatConfig,\n                loginWith: {\n                    username: !(loginWithEmailEnabled || loginWithPhoneEnabled),\n                    email: loginWithEmailEnabled,\n                    phone: loginWithPhoneEnabled,\n                },\n            },\n        };\n    }\n    const hasOAuthConfig = oauth ? Object.keys(oauth).length > 0 : false;\n    const hasSocialProviderConfig = aws_cognito_social_providers\n        ? aws_cognito_social_providers.length > 0\n        : false;\n    if (amplifyConfig.Auth && hasOAuthConfig) {\n        amplifyConfig.Auth.Cognito.loginWith = {\n            ...amplifyConfig.Auth.Cognito.loginWith,\n            oauth: {\n                ...getOAuthConfig(oauth),\n                ...(hasSocialProviderConfig && {\n                    providers: parseSocialProviders(aws_cognito_social_providers),\n                }),\n            },\n        };\n    }\n    // Storage\n    if (aws_user_files_s3_bucket) {\n        amplifyConfig.Storage = {\n            S3: {\n                bucket: aws_user_files_s3_bucket,\n                region: aws_user_files_s3_bucket_region,\n                dangerouslyConnectToHttpEndpointForTesting: aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing,\n            },\n        };\n    }\n    // Geo\n    if (geo) {\n        const { amazon_location_service } = geo;\n        amplifyConfig.Geo = {\n            LocationService: {\n                maps: amazon_location_service.maps,\n                geofenceCollections: amazon_location_service.geofenceCollections,\n                searchIndices: amazon_location_service.search_indices,\n                region: amazon_location_service.region,\n            },\n        };\n    }\n    // REST API\n    if (aws_cloud_logic_custom) {\n        amplifyConfig.API = {\n            ...amplifyConfig.API,\n            REST: aws_cloud_logic_custom.reduce((acc, api) => {\n                const { name, endpoint, region, service } = api;\n                return {\n                    ...acc,\n                    [name]: {\n                        endpoint,\n                        ...(service ? { service } : undefined),\n                        ...(region ? { region } : undefined),\n                    },\n                };\n            }, {}),\n        };\n    }\n    // Predictions\n    if (predictions) {\n        // map VoiceId from speechGenerator defaults to voiceId\n        const { VoiceId: voiceId } = predictions?.convert?.speechGenerator?.defaults ?? {};\n        amplifyConfig.Predictions = voiceId\n            ? {\n                ...predictions,\n                convert: {\n                    ...predictions.convert,\n                    speechGenerator: {\n                        ...predictions.convert.speechGenerator,\n                        defaults: { voiceId },\n                    },\n                },\n            }\n            : predictions;\n    }\n    return amplifyConfig;\n};\nconst getRedirectUrl = (redirectStr) => redirectStr?.split(',') ?? [];\nconst getOAuthConfig = ({ domain, scope, redirectSignIn, redirectSignOut, responseType, }) => ({\n    domain,\n    scopes: scope,\n    redirectSignIn: getRedirectUrl(redirectSignIn),\n    redirectSignOut: getRedirectUrl(redirectSignOut),\n    responseType,\n});\nconst parseSocialProviders = (aws_cognito_social_providers) => {\n    return aws_cognito_social_providers.map((provider) => {\n        const updatedProvider = provider.toLowerCase();\n        return updatedProvider.charAt(0).toUpperCase() + updatedProvider.slice(1);\n    });\n};\n\nexport { parseAWSExports };\n//# sourceMappingURL=parseAWSExports.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst ADD_OAUTH_LISTENER = Symbol('oauth-listener');\n\nexport { ADD_OAUTH_LISTENER };\n//# sourceMappingURL=constants.mjs.map\n","import { parseAWSExports } from '../parseAWSExports.mjs';\nimport { isAmplifyOutputs, parseAmplifyOutputs } from '../parseAmplifyOutputs.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Parses the variety of configuration shapes that Amplify can accept into a ResourcesConfig.\n *\n * @param amplifyConfig An Amplify configuration object conforming to one of the supported schemas.\n * @return A ResourcesConfig for the provided configuration object.\n */\nconst parseAmplifyConfig = (amplifyConfig) => {\n    if (Object.keys(amplifyConfig).some(key => key.startsWith('aws_'))) {\n        return parseAWSExports(amplifyConfig);\n    }\n    else if (isAmplifyOutputs(amplifyConfig)) {\n        return parseAmplifyOutputs(amplifyConfig);\n    }\n    else {\n        return amplifyConfig;\n    }\n};\n\nexport { parseAmplifyConfig };\n//# sourceMappingURL=parseAmplifyConfig.mjs.map\n","/**\n * @internal\n */\nexport var BLOCK_SIZE = 64;\n/**\n * @internal\n */\nexport var DIGEST_LENGTH = 32;\n/**\n * @internal\n */\nexport var KEY = new Uint32Array([\n    0x428a2f98,\n    0x71374491,\n    0xb5c0fbcf,\n    0xe9b5dba5,\n    0x3956c25b,\n    0x59f111f1,\n    0x923f82a4,\n    0xab1c5ed5,\n    0xd807aa98,\n    0x12835b01,\n    0x243185be,\n    0x550c7dc3,\n    0x72be5d74,\n    0x80deb1fe,\n    0x9bdc06a7,\n    0xc19bf174,\n    0xe49b69c1,\n    0xefbe4786,\n    0x0fc19dc6,\n    0x240ca1cc,\n    0x2de92c6f,\n    0x4a7484aa,\n    0x5cb0a9dc,\n    0x76f988da,\n    0x983e5152,\n    0xa831c66d,\n    0xb00327c8,\n    0xbf597fc7,\n    0xc6e00bf3,\n    0xd5a79147,\n    0x06ca6351,\n    0x14292967,\n    0x27b70a85,\n    0x2e1b2138,\n    0x4d2c6dfc,\n    0x53380d13,\n    0x650a7354,\n    0x766a0abb,\n    0x81c2c92e,\n    0x92722c85,\n    0xa2bfe8a1,\n    0xa81a664b,\n    0xc24b8b70,\n    0xc76c51a3,\n    0xd192e819,\n    0xd6990624,\n    0xf40e3585,\n    0x106aa070,\n    0x19a4c116,\n    0x1e376c08,\n    0x2748774c,\n    0x34b0bcb5,\n    0x391c0cb3,\n    0x4ed8aa4a,\n    0x5b9cca4f,\n    0x682e6ff3,\n    0x748f82ee,\n    0x78a5636f,\n    0x84c87814,\n    0x8cc70208,\n    0x90befffa,\n    0xa4506ceb,\n    0xbef9a3f7,\n    0xc67178f2\n]);\n/**\n * @internal\n */\nexport var INIT = [\n    0x6a09e667,\n    0xbb67ae85,\n    0x3c6ef372,\n    0xa54ff53a,\n    0x510e527f,\n    0x9b05688c,\n    0x1f83d9ab,\n    0x5be0cd19\n];\n/**\n * @internal\n */\nexport var MAX_HASHABLE_LENGTH = Math.pow(2, 53) - 1;\n//# sourceMappingURL=constants.js.map","import { BLOCK_SIZE, DIGEST_LENGTH, INIT, KEY, MAX_HASHABLE_LENGTH } from \"./constants\";\n/**\n * @internal\n */\nvar RawSha256 = /** @class */ (function () {\n    function RawSha256() {\n        this.state = Int32Array.from(INIT);\n        this.temp = new Int32Array(64);\n        this.buffer = new Uint8Array(64);\n        this.bufferLength = 0;\n        this.bytesHashed = 0;\n        /**\n         * @internal\n         */\n        this.finished = false;\n    }\n    RawSha256.prototype.update = function (data) {\n        if (this.finished) {\n            throw new Error(\"Attempted to update an already finished hash.\");\n        }\n        var position = 0;\n        var byteLength = data.byteLength;\n        this.bytesHashed += byteLength;\n        if (this.bytesHashed * 8 > MAX_HASHABLE_LENGTH) {\n            throw new Error(\"Cannot hash more than 2^53 - 1 bits\");\n        }\n        while (byteLength > 0) {\n            this.buffer[this.bufferLength++] = data[position++];\n            byteLength--;\n            if (this.bufferLength === BLOCK_SIZE) {\n                this.hashBuffer();\n                this.bufferLength = 0;\n            }\n        }\n    };\n    RawSha256.prototype.digest = function () {\n        if (!this.finished) {\n            var bitsHashed = this.bytesHashed * 8;\n            var bufferView = new DataView(this.buffer.buffer, this.buffer.byteOffset, this.buffer.byteLength);\n            var undecoratedLength = this.bufferLength;\n            bufferView.setUint8(this.bufferLength++, 0x80);\n            // Ensure the final block has enough room for the hashed length\n            if (undecoratedLength % BLOCK_SIZE >= BLOCK_SIZE - 8) {\n                for (var i = this.bufferLength; i < BLOCK_SIZE; i++) {\n                    bufferView.setUint8(i, 0);\n                }\n                this.hashBuffer();\n                this.bufferLength = 0;\n            }\n            for (var i = this.bufferLength; i < BLOCK_SIZE - 8; i++) {\n                bufferView.setUint8(i, 0);\n            }\n            bufferView.setUint32(BLOCK_SIZE - 8, Math.floor(bitsHashed / 0x100000000), true);\n            bufferView.setUint32(BLOCK_SIZE - 4, bitsHashed);\n            this.hashBuffer();\n            this.finished = true;\n        }\n        // The value in state is little-endian rather than big-endian, so flip\n        // each word into a new Uint8Array\n        var out = new Uint8Array(DIGEST_LENGTH);\n        for (var i = 0; i < 8; i++) {\n            out[i * 4] = (this.state[i] >>> 24) & 0xff;\n            out[i * 4 + 1] = (this.state[i] >>> 16) & 0xff;\n            out[i * 4 + 2] = (this.state[i] >>> 8) & 0xff;\n            out[i * 4 + 3] = (this.state[i] >>> 0) & 0xff;\n        }\n        return out;\n    };\n    RawSha256.prototype.hashBuffer = function () {\n        var _a = this, buffer = _a.buffer, state = _a.state;\n        var state0 = state[0], state1 = state[1], state2 = state[2], state3 = state[3], state4 = state[4], state5 = state[5], state6 = state[6], state7 = state[7];\n        for (var i = 0; i < BLOCK_SIZE; i++) {\n            if (i < 16) {\n                this.temp[i] =\n                    ((buffer[i * 4] & 0xff) << 24) |\n                        ((buffer[i * 4 + 1] & 0xff) << 16) |\n                        ((buffer[i * 4 + 2] & 0xff) << 8) |\n                        (buffer[i * 4 + 3] & 0xff);\n            }\n            else {\n                var u = this.temp[i - 2];\n                var t1_1 = ((u >>> 17) | (u << 15)) ^ ((u >>> 19) | (u << 13)) ^ (u >>> 10);\n                u = this.temp[i - 15];\n                var t2_1 = ((u >>> 7) | (u << 25)) ^ ((u >>> 18) | (u << 14)) ^ (u >>> 3);\n                this.temp[i] =\n                    ((t1_1 + this.temp[i - 7]) | 0) + ((t2_1 + this.temp[i - 16]) | 0);\n            }\n            var t1 = ((((((state4 >>> 6) | (state4 << 26)) ^\n                ((state4 >>> 11) | (state4 << 21)) ^\n                ((state4 >>> 25) | (state4 << 7))) +\n                ((state4 & state5) ^ (~state4 & state6))) |\n                0) +\n                ((state7 + ((KEY[i] + this.temp[i]) | 0)) | 0)) |\n                0;\n            var t2 = ((((state0 >>> 2) | (state0 << 30)) ^\n                ((state0 >>> 13) | (state0 << 19)) ^\n                ((state0 >>> 22) | (state0 << 10))) +\n                ((state0 & state1) ^ (state0 & state2) ^ (state1 & state2))) |\n                0;\n            state7 = state6;\n            state6 = state5;\n            state5 = state4;\n            state4 = (state3 + t1) | 0;\n            state3 = state2;\n            state2 = state1;\n            state1 = state0;\n            state0 = (t1 + t2) | 0;\n        }\n        state[0] += state0;\n        state[1] += state1;\n        state[2] += state2;\n        state[3] += state3;\n        state[4] += state4;\n        state[5] += state5;\n        state[6] += state6;\n        state[7] += state7;\n    };\n    return RawSha256;\n}());\nexport { RawSha256 };\n//# sourceMappingURL=RawSha256.js.map","export const fromUtf8 = (input) => new TextEncoder().encode(input);\n","import { __awaiter, __generator } from \"tslib\";\nimport { BLOCK_SIZE } from \"./constants\";\nimport { RawSha256 } from \"./RawSha256\";\nimport { isEmptyData, convertToBuffer } from \"@aws-crypto/util\";\nvar Sha256 = /** @class */ (function () {\n    function Sha256(secret) {\n        this.secret = secret;\n        this.hash = new RawSha256();\n        this.reset();\n    }\n    Sha256.prototype.update = function (toHash) {\n        if (isEmptyData(toHash) || this.error) {\n            return;\n        }\n        try {\n            this.hash.update(convertToBuffer(toHash));\n        }\n        catch (e) {\n            this.error = e;\n        }\n    };\n    /* This synchronous method keeps compatibility\n     * with the v2 aws-sdk.\n     */\n    Sha256.prototype.digestSync = function () {\n        if (this.error) {\n            throw this.error;\n        }\n        if (this.outer) {\n            if (!this.outer.finished) {\n                this.outer.update(this.hash.digest());\n            }\n            return this.outer.digest();\n        }\n        return this.hash.digest();\n    };\n    /* The underlying digest method here is synchronous.\n     * To keep the same interface with the other hash functions\n     * the default is to expose this as an async method.\n     * However, it can sometimes be useful to have a sync method.\n     */\n    Sha256.prototype.digest = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.digestSync()];\n            });\n        });\n    };\n    Sha256.prototype.reset = function () {\n        this.hash = new RawSha256();\n        if (this.secret) {\n            this.outer = new RawSha256();\n            var inner = bufferFromSecret(this.secret);\n            var outer = new Uint8Array(BLOCK_SIZE);\n            outer.set(inner);\n            for (var i = 0; i < BLOCK_SIZE; i++) {\n                inner[i] ^= 0x36;\n                outer[i] ^= 0x5c;\n            }\n            this.hash.update(inner);\n            this.outer.update(outer);\n            // overwrite the copied key in memory\n            for (var i = 0; i < inner.byteLength; i++) {\n                inner[i] = 0;\n            }\n        }\n    };\n    return Sha256;\n}());\nexport { Sha256 };\nfunction bufferFromSecret(secret) {\n    var input = convertToBuffer(secret);\n    if (input.byteLength > BLOCK_SIZE) {\n        var bufferHash = new RawSha256();\n        bufferHash.update(input);\n        input = bufferHash.digest();\n    }\n    var buffer = new Uint8Array(BLOCK_SIZE);\n    buffer.set(input);\n    return buffer;\n}\n//# sourceMappingURL=jsSha256.js.map","// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport function isEmptyData(data) {\n    if (typeof data === \"string\") {\n        return data.length === 0;\n    }\n    return data.byteLength === 0;\n}\n//# sourceMappingURL=isEmptyData.js.map","const SHORT_TO_HEX = {};\nconst HEX_TO_SHORT = {};\nfor (let i = 0; i < 256; i++) {\n    let encodedByte = i.toString(16).toLowerCase();\n    if (encodedByte.length === 1) {\n        encodedByte = `0${encodedByte}`;\n    }\n    SHORT_TO_HEX[i] = encodedByte;\n    HEX_TO_SHORT[encodedByte] = i;\n}\nexport function fromHex(encoded) {\n    if (encoded.length % 2 !== 0) {\n        throw new Error(\"Hex encoded strings must have an even number length\");\n    }\n    const out = new Uint8Array(encoded.length / 2);\n    for (let i = 0; i < encoded.length; i += 2) {\n        const encodedByte = encoded.slice(i, i + 2).toLowerCase();\n        if (encodedByte in HEX_TO_SHORT) {\n            out[i / 2] = HEX_TO_SHORT[encodedByte];\n        }\n        else {\n            throw new Error(`Cannot decode unrecognized sequence ${encodedByte} as hexadecimal`);\n        }\n    }\n    return out;\n}\nexport function toHex(bytes) {\n    let out = \"\";\n    for (let i = 0; i < bytes.byteLength; i++) {\n        out += SHORT_TO_HEX[bytes[i]];\n    }\n    return out;\n}\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nvar Framework;\n(function (Framework) {\n    // < 100 - Web frameworks\n    Framework[\"WebUnknown\"] = \"0\";\n    Framework[\"React\"] = \"1\";\n    Framework[\"NextJs\"] = \"2\";\n    Framework[\"Angular\"] = \"3\";\n    Framework[\"VueJs\"] = \"4\";\n    Framework[\"Nuxt\"] = \"5\";\n    Framework[\"Svelte\"] = \"6\";\n    // 100s - Server side frameworks\n    Framework[\"ServerSideUnknown\"] = \"100\";\n    Framework[\"ReactSSR\"] = \"101\";\n    Framework[\"NextJsSSR\"] = \"102\";\n    Framework[\"AngularSSR\"] = \"103\";\n    Framework[\"VueJsSSR\"] = \"104\";\n    Framework[\"NuxtSSR\"] = \"105\";\n    Framework[\"SvelteSSR\"] = \"106\";\n    // 200s - Mobile framework\n    Framework[\"ReactNative\"] = \"201\";\n    Framework[\"Expo\"] = \"202\";\n})(Framework || (Framework = {}));\nvar Category;\n(function (Category) {\n    Category[\"AI\"] = \"ai\";\n    Category[\"API\"] = \"api\";\n    Category[\"Auth\"] = \"auth\";\n    Category[\"Analytics\"] = \"analytics\";\n    Category[\"DataStore\"] = \"datastore\";\n    Category[\"Geo\"] = \"geo\";\n    Category[\"InAppMessaging\"] = \"inappmessaging\";\n    Category[\"Interactions\"] = \"interactions\";\n    Category[\"Predictions\"] = \"predictions\";\n    Category[\"PubSub\"] = \"pubsub\";\n    Category[\"PushNotification\"] = \"pushnotification\";\n    Category[\"Storage\"] = \"storage\";\n})(Category || (Category = {}));\nvar AiAction;\n(function (AiAction) {\n    AiAction[\"CreateConversation\"] = \"1\";\n    AiAction[\"GetConversation\"] = \"2\";\n    AiAction[\"ListConversations\"] = \"3\";\n    AiAction[\"DeleteConversation\"] = \"4\";\n    AiAction[\"SendMessage\"] = \"5\";\n    AiAction[\"ListMessages\"] = \"6\";\n    AiAction[\"OnMessage\"] = \"7\";\n    AiAction[\"Generation\"] = \"8\";\n    AiAction[\"UpdateConversation\"] = \"9\";\n})(AiAction || (AiAction = {}));\nvar AnalyticsAction;\n(function (AnalyticsAction) {\n    AnalyticsAction[\"Record\"] = \"1\";\n    AnalyticsAction[\"IdentifyUser\"] = \"2\";\n})(AnalyticsAction || (AnalyticsAction = {}));\nvar ApiAction;\n(function (ApiAction) {\n    ApiAction[\"GraphQl\"] = \"1\";\n    ApiAction[\"Get\"] = \"2\";\n    ApiAction[\"Post\"] = \"3\";\n    ApiAction[\"Put\"] = \"4\";\n    ApiAction[\"Patch\"] = \"5\";\n    ApiAction[\"Del\"] = \"6\";\n    ApiAction[\"Head\"] = \"7\";\n})(ApiAction || (ApiAction = {}));\nvar AuthAction;\n(function (AuthAction) {\n    AuthAction[\"SignUp\"] = \"1\";\n    AuthAction[\"ConfirmSignUp\"] = \"2\";\n    AuthAction[\"ResendSignUpCode\"] = \"3\";\n    AuthAction[\"SignIn\"] = \"4\";\n    AuthAction[\"FetchMFAPreference\"] = \"6\";\n    AuthAction[\"UpdateMFAPreference\"] = \"7\";\n    AuthAction[\"SetUpTOTP\"] = \"10\";\n    AuthAction[\"VerifyTOTPSetup\"] = \"11\";\n    AuthAction[\"ConfirmSignIn\"] = \"12\";\n    AuthAction[\"DeleteUserAttributes\"] = \"15\";\n    AuthAction[\"DeleteUser\"] = \"16\";\n    AuthAction[\"UpdateUserAttributes\"] = \"17\";\n    AuthAction[\"FetchUserAttributes\"] = \"18\";\n    AuthAction[\"ConfirmUserAttribute\"] = \"22\";\n    AuthAction[\"SignOut\"] = \"26\";\n    AuthAction[\"UpdatePassword\"] = \"27\";\n    AuthAction[\"ResetPassword\"] = \"28\";\n    AuthAction[\"ConfirmResetPassword\"] = \"29\";\n    AuthAction[\"FederatedSignIn\"] = \"30\";\n    AuthAction[\"RememberDevice\"] = \"32\";\n    AuthAction[\"ForgetDevice\"] = \"33\";\n    AuthAction[\"FetchDevices\"] = \"34\";\n    AuthAction[\"SendUserAttributeVerificationCode\"] = \"35\";\n    AuthAction[\"SignInWithRedirect\"] = \"36\";\n    AuthAction[\"StartWebAuthnRegistration\"] = \"37\";\n    AuthAction[\"CompleteWebAuthnRegistration\"] = \"38\";\n    AuthAction[\"ListWebAuthnCredentials\"] = \"39\";\n    AuthAction[\"DeleteWebAuthnCredential\"] = \"40\";\n})(AuthAction || (AuthAction = {}));\nvar DataStoreAction;\n(function (DataStoreAction) {\n    DataStoreAction[\"Subscribe\"] = \"1\";\n    DataStoreAction[\"GraphQl\"] = \"2\";\n})(DataStoreAction || (DataStoreAction = {}));\nvar GeoAction;\n(function (GeoAction) {\n    GeoAction[\"SearchByText\"] = \"0\";\n    GeoAction[\"SearchByCoordinates\"] = \"1\";\n    GeoAction[\"SearchForSuggestions\"] = \"2\";\n    GeoAction[\"SearchByPlaceId\"] = \"3\";\n    GeoAction[\"SaveGeofences\"] = \"4\";\n    GeoAction[\"GetGeofence\"] = \"5\";\n    GeoAction[\"ListGeofences\"] = \"6\";\n    GeoAction[\"DeleteGeofences\"] = \"7\";\n})(GeoAction || (GeoAction = {}));\nvar InAppMessagingAction;\n(function (InAppMessagingAction) {\n    InAppMessagingAction[\"SyncMessages\"] = \"1\";\n    InAppMessagingAction[\"IdentifyUser\"] = \"2\";\n    InAppMessagingAction[\"NotifyMessageInteraction\"] = \"3\";\n})(InAppMessagingAction || (InAppMessagingAction = {}));\nvar InteractionsAction;\n(function (InteractionsAction) {\n    InteractionsAction[\"None\"] = \"0\";\n})(InteractionsAction || (InteractionsAction = {}));\nvar PredictionsAction;\n(function (PredictionsAction) {\n    PredictionsAction[\"Convert\"] = \"1\";\n    PredictionsAction[\"Identify\"] = \"2\";\n    PredictionsAction[\"Interpret\"] = \"3\";\n})(PredictionsAction || (PredictionsAction = {}));\nvar PubSubAction;\n(function (PubSubAction) {\n    PubSubAction[\"Subscribe\"] = \"1\";\n})(PubSubAction || (PubSubAction = {}));\nvar PushNotificationAction;\n(function (PushNotificationAction) {\n    PushNotificationAction[\"InitializePushNotifications\"] = \"1\";\n    PushNotificationAction[\"IdentifyUser\"] = \"2\";\n})(PushNotificationAction || (PushNotificationAction = {}));\nvar StorageAction;\n(function (StorageAction) {\n    StorageAction[\"UploadData\"] = \"1\";\n    StorageAction[\"DownloadData\"] = \"2\";\n    StorageAction[\"List\"] = \"3\";\n    StorageAction[\"Copy\"] = \"4\";\n    StorageAction[\"Remove\"] = \"5\";\n    StorageAction[\"GetProperties\"] = \"6\";\n    StorageAction[\"GetUrl\"] = \"7\";\n    StorageAction[\"GetDataAccess\"] = \"8\";\n    StorageAction[\"ListCallerAccessGrants\"] = \"9\";\n})(StorageAction || (StorageAction = {}));\n\nexport { AiAction, AnalyticsAction, ApiAction, AuthAction, Category, DataStoreAction, Framework, GeoAction, InAppMessagingAction, InteractionsAction, PredictionsAction, PubSubAction, PushNotificationAction, StorageAction };\n//# sourceMappingURL=types.mjs.map\n","// generated by genversion\nconst version = '6.15.6';\n\nexport { version };\n//# sourceMappingURL=version.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst globalExists = () => {\n    return typeof global !== 'undefined';\n};\nconst globalThisExists = () => {\n    return typeof globalThis !== 'undefined';\n};\nconst windowExists = () => {\n    return typeof window !== 'undefined';\n};\nconst documentExists = () => {\n    return typeof document !== 'undefined';\n};\nconst processExists = () => {\n    return typeof process !== 'undefined';\n};\nconst keyPrefixMatch = (object, prefix) => {\n    return !!Object.keys(object).find(key => key.startsWith(prefix));\n};\n\nexport { documentExists, globalExists, globalThisExists, keyPrefixMatch, processExists, windowExists };\n//# sourceMappingURL=helpers.mjs.map\n","import { Framework } from '../types.mjs';\nimport { reactWebDetect, reactSSRDetect } from './React.mjs';\nimport { vueWebDetect, vueSSRDetect } from './Vue.mjs';\nimport { svelteWebDetect, svelteSSRDetect } from './Svelte.mjs';\nimport { nextWebDetect, nextSSRDetect } from './Next.mjs';\nimport { nuxtWebDetect, nuxtSSRDetect } from './Nuxt.mjs';\nimport { angularWebDetect, angularSSRDetect } from './Angular.mjs';\nimport { reactNativeDetect } from './ReactNative.mjs';\nimport { expoDetect } from './Expo.mjs';\nimport { webDetect } from './Web.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// These are in the order of detection where when both are detectable, the early Framework will be reported\nconst detectionMap = [\n    // First, detect mobile\n    { platform: Framework.Expo, detectionMethod: expoDetect },\n    { platform: Framework.ReactNative, detectionMethod: reactNativeDetect },\n    // Next, detect web frameworks\n    { platform: Framework.NextJs, detectionMethod: nextWebDetect },\n    { platform: Framework.Nuxt, detectionMethod: nuxtWebDetect },\n    { platform: Framework.Angular, detectionMethod: angularWebDetect },\n    { platform: Framework.React, detectionMethod: reactWebDetect },\n    { platform: Framework.VueJs, detectionMethod: vueWebDetect },\n    { platform: Framework.Svelte, detectionMethod: svelteWebDetect },\n    { platform: Framework.WebUnknown, detectionMethod: webDetect },\n    // Last, detect ssr frameworks\n    { platform: Framework.NextJsSSR, detectionMethod: nextSSRDetect },\n    { platform: Framework.NuxtSSR, detectionMethod: nuxtSSRDetect },\n    { platform: Framework.ReactSSR, detectionMethod: reactSSRDetect },\n    { platform: Framework.VueJsSSR, detectionMethod: vueSSRDetect },\n    { platform: Framework.AngularSSR, detectionMethod: angularSSRDetect },\n    { platform: Framework.SvelteSSR, detectionMethod: svelteSSRDetect },\n];\nfunction detect() {\n    return (detectionMap.find(detectionEntry => detectionEntry.detectionMethod())\n        ?.platform || Framework.ServerSideUnknown);\n}\n\nexport { detect };\n//# sourceMappingURL=index.mjs.map\n","import { globalExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with expo 48 / react-native 0.71.3\nfunction expoDetect() {\n    return globalExists() && typeof global.expo !== 'undefined';\n}\n\nexport { expoDetect };\n//# sourceMappingURL=Expo.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with react-native 0.17.7\nfunction reactNativeDetect() {\n    return (typeof navigator !== 'undefined' &&\n        typeof navigator.product !== 'undefined' &&\n        navigator.product === 'ReactNative');\n}\n\nexport { reactNativeDetect };\n//# sourceMappingURL=ReactNative.mjs.map\n","import { windowExists, globalExists, keyPrefixMatch } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with next 13.4 / react 18.2\nfunction nextWebDetect() {\n    return (windowExists() &&\n        window.next &&\n        typeof window.next === 'object');\n}\nfunction nextSSRDetect() {\n    return (globalExists() &&\n        (keyPrefixMatch(global, '__next') || keyPrefixMatch(global, '__NEXT')));\n}\n\nexport { nextSSRDetect, nextWebDetect };\n//# sourceMappingURL=Next.mjs.map\n","import { windowExists, globalExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with nuxt 2.15 / vue 2.7\nfunction nuxtWebDetect() {\n    return (windowExists() &&\n        (window.__NUXT__ !== undefined ||\n            window.$nuxt !== undefined));\n}\nfunction nuxtSSRDetect() {\n    return (globalExists() && typeof global.__NUXT_PATHS__ !== 'undefined');\n}\n\nexport { nuxtSSRDetect, nuxtWebDetect };\n//# sourceMappingURL=Nuxt.mjs.map\n","import { documentExists, processExists, windowExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with @angular/core 16.0.0\nfunction angularWebDetect() {\n    const angularVersionSetInDocument = Boolean(documentExists() && document.querySelector('[ng-version]'));\n    const angularContentSetInWindow = Boolean(windowExists() && typeof window.ng !== 'undefined');\n    return angularVersionSetInDocument || angularContentSetInWindow;\n}\nfunction angularSSRDetect() {\n    return ((processExists() &&\n        typeof process.env === 'object' &&\n        process.env.npm_lifecycle_script?.startsWith('ng ')) ||\n        false);\n}\n\nexport { angularSSRDetect, angularWebDetect };\n//# sourceMappingURL=Angular.mjs.map\n","import { documentExists, processExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with react 18.2 - built using Vite\nfunction reactWebDetect() {\n    const elementKeyPrefixedWithReact = (key) => {\n        return key.startsWith('_react') || key.startsWith('__react');\n    };\n    const elementIsReactEnabled = (element) => {\n        return Object.keys(element).find(elementKeyPrefixedWithReact);\n    };\n    const allElementsWithId = () => Array.from(document.querySelectorAll('[id]'));\n    return documentExists() && allElementsWithId().some(elementIsReactEnabled);\n}\nfunction reactSSRDetect() {\n    return (processExists() &&\n        typeof process.env !== 'undefined' &&\n        !!Object.keys(process.env).find(key => key.includes('react')));\n}\n// use the some\n\nexport { reactSSRDetect, reactWebDetect };\n//# sourceMappingURL=React.mjs.map\n","import { windowExists, keyPrefixMatch, globalExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with vue 3.3.2\nfunction vueWebDetect() {\n    return windowExists() && keyPrefixMatch(window, '__VUE');\n}\nfunction vueSSRDetect() {\n    return globalExists() && keyPrefixMatch(global, '__VUE');\n}\n\nexport { vueSSRDetect, vueWebDetect };\n//# sourceMappingURL=Vue.mjs.map\n","import { windowExists, keyPrefixMatch, processExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with svelte 3.59\nfunction svelteWebDetect() {\n    return windowExists() && keyPrefixMatch(window, '__SVELTE');\n}\nfunction svelteSSRDetect() {\n    return (processExists() &&\n        typeof process.env !== 'undefined' &&\n        !!Object.keys(process.env).find(key => key.includes('svelte')));\n}\n\nexport { svelteSSRDetect, svelteWebDetect };\n//# sourceMappingURL=Svelte.mjs.map\n","import { windowExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction webDetect() {\n    return windowExists();\n}\n\nexport { webDetect };\n//# sourceMappingURL=Web.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Maintains custom user-agent state set by external consumers.\nconst customUserAgentState = {};\n/**\n * Sets custom user agent state which will be appended to applicable requests. Returns a function that can be used to\n * clean up any custom state set with this API.\n *\n * @note\n * This API operates globally. Calling this API multiple times will result in the most recently set values for a\n * particular API being used.\n *\n * @note\n * This utility IS NOT compatible with SSR.\n *\n * @param input - SetCustomUserAgentInput that defines custom state to apply to the specified APIs.\n */\nconst setCustomUserAgent = (input) => {\n    // Save custom user-agent state & increment reference counter\n    // TODO Remove `any` when we upgrade to TypeScript 5.2, see: https://github.com/microsoft/TypeScript/issues/44373\n    customUserAgentState[input.category] = input.apis.reduce((acc, api) => ({\n        ...acc,\n        [api]: {\n            refCount: acc[api]?.refCount ? acc[api].refCount + 1 : 1,\n            additionalDetails: input.additionalDetails,\n        },\n    }), customUserAgentState[input.category] ?? {});\n    // Callback that cleans up state for APIs recorded by this call\n    let cleanUpCallbackCalled = false;\n    const cleanUpCallback = () => {\n        // Only allow the cleanup callback to be called once\n        if (cleanUpCallbackCalled) {\n            return;\n        }\n        cleanUpCallbackCalled = true;\n        input.apis.forEach(api => {\n            const apiRefCount = customUserAgentState[input.category][api].refCount;\n            if (apiRefCount > 1) {\n                customUserAgentState[input.category][api].refCount = apiRefCount - 1;\n            }\n            else {\n                delete customUserAgentState[input.category][api];\n                // Clean up category if no more APIs set\n                if (!Object.keys(customUserAgentState[input.category]).length) {\n                    delete customUserAgentState[input.category];\n                }\n            }\n        });\n    };\n    return cleanUpCallback;\n};\nconst getCustomUserAgent = (category, api) => customUserAgentState[category]?.[api]?.additionalDetails;\n\nexport { getCustomUserAgent, setCustomUserAgent };\n//# sourceMappingURL=customUserAgent.mjs.map\n","import { Framework } from './types.mjs';\nimport { version } from './version.mjs';\nimport { detectFramework, observeFrameworkChanges } from './detectFramework.mjs';\nimport { getCustomUserAgent } from './customUserAgent.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst BASE_USER_AGENT = `aws-amplify`;\n/** Sanitize Amplify version string be removing special character + and character post the special character  */\nconst sanitizeAmplifyVersion = (amplifyVersion) => amplifyVersion.replace(/\\+.*/, '');\nclass PlatformBuilder {\n    constructor() {\n        this.userAgent = `${BASE_USER_AGENT}/${sanitizeAmplifyVersion(version)}`;\n    }\n    get framework() {\n        return detectFramework();\n    }\n    get isReactNative() {\n        return (this.framework === Framework.ReactNative ||\n            this.framework === Framework.Expo);\n    }\n    observeFrameworkChanges(fcn) {\n        observeFrameworkChanges(fcn);\n    }\n}\nconst Platform = new PlatformBuilder();\nconst getAmplifyUserAgentObject = ({ category, action, } = {}) => {\n    const userAgent = [\n        [BASE_USER_AGENT, sanitizeAmplifyVersion(version)],\n    ];\n    if (category) {\n        userAgent.push([category, action]);\n    }\n    userAgent.push(['framework', detectFramework()]);\n    if (category && action) {\n        const customState = getCustomUserAgent(category, action);\n        if (customState) {\n            customState.forEach(state => {\n                userAgent.push(state);\n            });\n        }\n    }\n    return userAgent;\n};\nconst getAmplifyUserAgent = (customUserAgentDetails) => {\n    const userAgent = getAmplifyUserAgentObject(customUserAgentDetails);\n    const userAgentString = userAgent\n        .map(([agentKey, agentValue]) => agentKey && agentValue ? `${agentKey}/${agentValue}` : agentKey)\n        .join(' ');\n    return userAgentString;\n};\n\nexport { Platform, getAmplifyUserAgent, getAmplifyUserAgentObject, sanitizeAmplifyVersion };\n//# sourceMappingURL=index.mjs.map\n","import { createErrorClass } from './createErrorClass';\nexport var UnsubscriptionError = createErrorClass(function (_super) {\n    return function UnsubscriptionErrorImpl(errors) {\n        _super(this);\n        this.message = errors\n            ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ')\n            : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n    };\n});\n//# sourceMappingURL=UnsubscriptionError.js.map","export function createErrorClass(createImpl) {\n    var _super = function (instance) {\n        Error.call(instance);\n        instance.stack = new Error().stack;\n    };\n    var ctorFunc = createImpl(_super);\n    ctorFunc.prototype = Object.create(Error.prototype);\n    ctorFunc.prototype.constructor = ctorFunc;\n    return ctorFunc;\n}\n//# sourceMappingURL=createErrorClass.js.map","export var config = {\n    onUnhandledError: null,\n    onStoppedNotification: null,\n    Promise: undefined,\n    useDeprecatedSynchronousErrorHandling: false,\n    useDeprecatedNextContext: false,\n};\n//# sourceMappingURL=config.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var timeoutProvider = {\n    setTimeout: function (handler, timeout) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var delegate = timeoutProvider.delegate;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {\n            return delegate.setTimeout.apply(delegate, __spreadArray([handler, timeout], __read(args)));\n        }\n        return setTimeout.apply(void 0, __spreadArray([handler, timeout], __read(args)));\n    },\n    clearTimeout: function (handle) {\n        var delegate = timeoutProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=timeoutProvider.js.map","export var observable = (function () { return (typeof Symbol === 'function' && Symbol.observable) || '@@observable'; })();\n//# sourceMappingURL=observable.js.map","import { config } from '../config';\nvar context = null;\nexport function errorContext(cb) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        var isRoot = !context;\n        if (isRoot) {\n            context = { errorThrown: false, error: null };\n        }\n        cb();\n        if (isRoot) {\n            var _a = context, errorThrown = _a.errorThrown, error = _a.error;\n            context = null;\n            if (errorThrown) {\n                throw error;\n            }\n        }\n    }\n    else {\n        cb();\n    }\n}\nexport function captureError(err) {\n    if (config.useDeprecatedSynchronousErrorHandling && context) {\n        context.errorThrown = true;\n        context.error = err;\n    }\n}\n//# sourceMappingURL=errorContext.js.map","import { identity } from './identity';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (fns.length === 0) {\n        return identity;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map","export var isArrayLike = (function (x) { return x && typeof x.length === 'number' && typeof x !== 'function'; });\n//# sourceMappingURL=isArrayLike.js.map","export function getSymbolIterator() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nexport var iterator = getSymbolIterator();\n//# sourceMappingURL=iterator.js.map","import { from, Observable } from 'rxjs';\nimport '../types/errors.mjs';\nimport '../errors/errorHelpers.mjs';\nimport '../utils/getClientInfo/getClientInfo.mjs';\nimport { isWebWorker } from '../utils/isWebWorker.mjs';\nimport '../utils/retry/retry.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nclass Reachability {\n    networkMonitor(_) {\n        const globalObj = isWebWorker()\n            ? self\n            : typeof window !== 'undefined' && window;\n        if (!globalObj) {\n            return from([{ online: true }]);\n        }\n        return new Observable(observer => {\n            observer.next({ online: globalObj.navigator.onLine });\n            const notifyOnline = () => {\n                observer.next({ online: true });\n            };\n            const notifyOffline = () => {\n                observer.next({ online: false });\n            };\n            globalObj.addEventListener('online', notifyOnline);\n            globalObj.addEventListener('offline', notifyOffline);\n            Reachability._observers.push(observer);\n            return () => {\n                globalObj.removeEventListener('online', notifyOnline);\n                globalObj.removeEventListener('offline', notifyOffline);\n                Reachability._observers = Reachability._observers.filter(_observer => _observer !== observer);\n            };\n        });\n    }\n    // expose observers to simulate offline mode for integration testing\n    static _observerOverride(status) {\n        for (const observer of this._observers) {\n            if (observer.closed) {\n                this._observers = this._observers.filter(_observer => _observer !== observer);\n                continue;\n            }\n            observer?.next && observer.next(status);\n        }\n    }\n}\nReachability._observers = [];\n\nexport { Reachability };\n//# sourceMappingURL=Reachability.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst isWebWorker = () => {\n    if (typeof self === 'undefined') {\n        return false;\n    }\n    const selfContext = self;\n    return (typeof selfContext.WorkerGlobalScope !== 'undefined' &&\n        self instanceof selfContext.WorkerGlobalScope);\n};\n\nexport { isWebWorker };\n//# sourceMappingURL=isWebWorker.mjs.map\n","import { scheduled } from '../scheduled/scheduled';\nimport { innerFrom } from './innerFrom';\nexport function from(input, scheduler) {\n    return scheduler ? scheduled(input, scheduler) : innerFrom(input);\n}\n//# sourceMappingURL=from.js.map","import { ConsoleLogger } from '../../Logger/ConsoleLogger.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('Auth');\nclass AuthClass {\n    /**\n     * Configure Auth category\n     *\n     * @internal\n     *\n     * @param authResourcesConfig - Resources configurations required by Auth providers.\n     * @param authOptions - Client options used by library\n     *\n     * @returns void\n     */\n    configure(authResourcesConfig, authOptions) {\n        this.authConfig = authResourcesConfig;\n        this.authOptions = authOptions;\n        if (authResourcesConfig && authResourcesConfig.Cognito?.userPoolEndpoint) {\n            logger.warn(getCustomEndpointWarningMessage('Amazon Cognito User Pool'));\n        }\n        if (authResourcesConfig &&\n            authResourcesConfig.Cognito?.identityPoolEndpoint) {\n            logger.warn(getCustomEndpointWarningMessage('Amazon Cognito Identity Pool'));\n        }\n    }\n    /**\n     * Fetch the auth tokens, and the temporary AWS credentials and identity if they are configured. By default it\n     * will automatically refresh expired auth tokens if a valid refresh token is present. You can force a refresh\n     * of non-expired tokens with `{ forceRefresh: true }` input.\n     *\n     * @param options - Options configuring the fetch behavior.\n     *\n     * @returns Promise of current auth session {@link AuthSession}.\n     */\n    async fetchAuthSession(options = {}) {\n        let credentialsAndIdentityId;\n        let userSub;\n        // Get tokens will throw if session cannot be refreshed (network or service error) or return null if not available\n        const tokens = await this.getTokens(options);\n        if (tokens) {\n            userSub = tokens.accessToken?.payload?.sub;\n            // getCredentialsAndIdentityId will throw if cannot get credentials (network or service error)\n            credentialsAndIdentityId =\n                await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({\n                    authConfig: this.authConfig,\n                    tokens,\n                    authenticated: true,\n                    forceRefresh: options.forceRefresh,\n                });\n        }\n        else {\n            // getCredentialsAndIdentityId will throw if cannot get credentials (network or service error)\n            credentialsAndIdentityId =\n                await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({\n                    authConfig: this.authConfig,\n                    authenticated: false,\n                    forceRefresh: options.forceRefresh,\n                });\n        }\n        return {\n            tokens,\n            credentials: credentialsAndIdentityId?.credentials,\n            identityId: credentialsAndIdentityId?.identityId,\n            userSub,\n        };\n    }\n    async clearCredentials() {\n        await this.authOptions?.credentialsProvider?.clearCredentialsAndIdentityId();\n    }\n    async getTokens(options) {\n        return ((await this.authOptions?.tokenProvider?.getTokens(options)) ?? undefined);\n    }\n}\nconst getCustomEndpointWarningMessage = (target) => `You are using a custom Amazon ${target} endpoint, ensure the endpoint is correct.`;\n\nexport { AuthClass };\n//# sourceMappingURL=index.mjs.map\n","import { Hub, AMPLIFY_SYMBOL } from '../Hub/index.mjs';\nimport '../types/errors.mjs';\nimport '../errors/errorHelpers.mjs';\nimport '../utils/getClientInfo/getClientInfo.mjs';\nimport '../utils/retry/retry.mjs';\nimport { deepFreeze } from '../utils/deepFreeze.mjs';\nimport '../parseAWSExports.mjs';\nimport { ADD_OAUTH_LISTENER } from './constants.mjs';\nimport 'uuid';\nimport { parseAmplifyConfig } from '../utils/parseAmplifyConfig.mjs';\nimport './Auth/utils/errorHelpers.mjs';\nimport '@aws-crypto/sha256-js';\nimport '@smithy/util-hex-encoding';\nimport '../Platform/index.mjs';\nimport '../Platform/types.mjs';\nimport '../BackgroundProcessManager/types.mjs';\nimport '../Reachability/Reachability.mjs';\nimport '../utils/sessionListener/index.mjs';\nimport { AuthClass } from './Auth/index.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nclass AmplifyClass {\n    constructor() {\n        this.oAuthListener = undefined;\n        this.isConfigured = false;\n        this.resourcesConfig = {};\n        this.libraryOptions = {};\n        this.Auth = new AuthClass();\n    }\n    /**\n     * Configures Amplify for use with your back-end resources.\n     *\n     * @remarks\n     * This API does not perform any merging of either `resourcesConfig` or `libraryOptions`. The most recently\n     * provided values will be used after configuration.\n     *\n     * @remarks\n     * `configure` can be used to specify additional library options where available for supported categories.\n     *\n     * @param resourceConfig - Back-end resource configuration. Typically provided via the `aws-exports.js` file.\n     * @param libraryOptions - Additional options for customizing the behavior of the library.\n     */\n    configure(resourcesConfig, libraryOptions) {\n        const resolvedResourceConfig = parseAmplifyConfig(resourcesConfig);\n        this.resourcesConfig = resolvedResourceConfig;\n        if (libraryOptions) {\n            this.libraryOptions = libraryOptions;\n        }\n        // Make resource config immutable\n        this.resourcesConfig = deepFreeze(this.resourcesConfig);\n        this.Auth.configure(this.resourcesConfig.Auth, this.libraryOptions.Auth);\n        Hub.dispatch('core', {\n            event: 'configure',\n            data: this.resourcesConfig,\n        }, 'Configure', AMPLIFY_SYMBOL);\n        this.notifyOAuthListener();\n        this.isConfigured = true;\n    }\n    /**\n     * Provides access to the current back-end resource configuration for the Library.\n     *\n     * @returns Returns the immutable back-end resource configuration.\n     */\n    getConfig() {\n        if (!this.isConfigured) {\n            // eslint-disable-next-line no-console\n            console.warn(`Amplify has not been configured. Please call Amplify.configure() before using this service.`);\n        }\n        return this.resourcesConfig;\n    }\n    /** @internal */\n    [ADD_OAUTH_LISTENER](listener) {\n        if (this.resourcesConfig.Auth?.Cognito.loginWith?.oauth) {\n            // when Amplify has been configured with a valid OAuth config while adding the listener, run it directly\n            listener(this.resourcesConfig.Auth?.Cognito);\n        }\n        else {\n            // otherwise register the listener and run it later when Amplify gets configured with a valid oauth config\n            this.oAuthListener = listener;\n        }\n    }\n    notifyOAuthListener() {\n        if (!this.resourcesConfig.Auth?.Cognito.loginWith?.oauth ||\n            !this.oAuthListener) {\n            return;\n        }\n        this.oAuthListener(this.resourcesConfig.Auth?.Cognito);\n        // the listener should only be notified once with a valid oauth config\n        this.oAuthListener = undefined;\n    }\n}\n/**\n * The `Amplify` utility is used to configure the library.\n *\n * @remarks\n * `Amplify` orchestrates cross-category communication within the library.\n */\nconst Amplify = new AmplifyClass();\n\nexport { Amplify, AmplifyClass };\n//# sourceMappingURL=Amplify.mjs.map\n","import { Amplify } from '../Amplify.mjs';\nimport { fetchAuthSession as fetchAuthSession$1 } from './internal/fetchAuthSession.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Fetch the auth session including the tokens and credentials if they are available. By default it\n * will automatically refresh expired auth tokens if a valid refresh token is present. You can force a refresh\n * of non-expired tokens with `{ forceRefresh: true }` input.\n *\n * @param options - Options configuring the fetch behavior.\n * @throws {@link AuthError} - Throws error when session information cannot be refreshed.\n * @returns Promise<AuthSession>\n */\nconst fetchAuthSession = (options) => {\n    return fetchAuthSession$1(Amplify, options);\n};\n\nexport { fetchAuthSession };\n//# sourceMappingURL=fetchAuthSession.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst fetchAuthSession = (amplify, options) => {\n    return amplify.Auth.fetchAuthSession(options);\n};\n\nexport { fetchAuthSession };\n//# sourceMappingURL=fetchAuthSession.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst parseMetadata = (response) => {\n    const { headers, statusCode } = response;\n    return {\n        ...(isMetadataBearer(response) ? response.$metadata : {}),\n        httpStatusCode: statusCode,\n        requestId: headers['x-amzn-requestid'] ??\n            headers['x-amzn-request-id'] ??\n            headers['x-amz-request-id'],\n        extendedRequestId: headers['x-amz-id-2'],\n        cfId: headers['x-amz-cf-id'],\n    };\n};\nconst isMetadataBearer = (response) => typeof response?.$metadata === 'object';\n\nexport { parseMetadata };\n//# sourceMappingURL=responseInfo.mjs.map\n","import { parseMetadata } from './responseInfo.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Utility functions for serializing and deserializing of JSON protocol in general(including: REST-JSON, JSON-RPC, etc.)\n */\n/**\n * Error parser for AWS JSON protocol.\n */\nconst parseJsonError = async (response) => {\n    if (!response || response.statusCode < 300) {\n        return;\n    }\n    const body = await parseJsonBody(response);\n    const sanitizeErrorCode = (rawValue) => {\n        const [cleanValue] = rawValue.toString().split(/[,:]+/);\n        if (cleanValue.includes('#')) {\n            return cleanValue.split('#')[1];\n        }\n        return cleanValue;\n    };\n    const code = sanitizeErrorCode(response.headers['x-amzn-errortype'] ??\n        body.code ??\n        body.__type ??\n        'UnknownError');\n    const message = body.message ?? body.Message ?? 'Unknown error';\n    const error = new Error(message);\n    return Object.assign(error, {\n        name: code,\n        $metadata: parseMetadata(response),\n    });\n};\n/**\n * Parse JSON response body to JavaScript object.\n */\nconst parseJsonBody = async (response) => {\n    if (!response.body) {\n        throw new Error('Missing response payload');\n    }\n    const output = await response.body.json();\n    return Object.assign(output, {\n        $metadata: parseMetadata(response),\n    });\n};\n\nexport { parseJsonBody, parseJsonError };\n//# sourceMappingURL=json.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst DEFAULT_RETRY_ATTEMPTS = 3;\nconst AMZ_SDK_INVOCATION_ID_HEADER = 'amz-sdk-invocation-id';\nconst AMZ_SDK_REQUEST_HEADER = 'amz-sdk-request';\nconst DEFAULT_MAX_DELAY_MS = 5 * 60 * 1000;\n\nexport { AMZ_SDK_INVOCATION_ID_HEADER, AMZ_SDK_REQUEST_HEADER, DEFAULT_MAX_DELAY_MS, DEFAULT_RETRY_ATTEMPTS };\n//# sourceMappingURL=constants.mjs.map\n","import '../../../types/errors.mjs';\nimport '../../../errors/errorHelpers.mjs';\nimport '../../../utils/getClientInfo/getClientInfo.mjs';\nimport { jitteredBackoff as jitteredBackoff$1 } from '../../../utils/retry/jitteredBackoff.mjs';\nimport '../../../utils/retry/retry.mjs';\nimport { DEFAULT_MAX_DELAY_MS } from './constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// TODO: [v6] The separate retry utility is used by Data packages now and will replaced by retry middleware.\nconst jitteredBackoff = attempt => {\n    const delayFunction = jitteredBackoff$1(DEFAULT_MAX_DELAY_MS);\n    const delay = delayFunction(attempt);\n    // The delayFunction returns false when the delay is greater than the max delay(5 mins).\n    // In this case, the retry middleware will delay 5 mins instead, as a ceiling of the delay.\n    return delay === false ? DEFAULT_MAX_DELAY_MS : delay;\n};\n\nexport { jitteredBackoff };\n//# sourceMappingURL=jitteredBackoff.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// via https://github.com/aws/aws-sdk-js-v3/blob/ab0e7be36e7e7f8a0c04834357aaad643c7912c3/packages/service-error-classification/src/constants.ts#L8\nconst CLOCK_SKEW_ERROR_CODES = [\n    'AuthFailure',\n    'InvalidSignatureException',\n    'RequestExpired',\n    'RequestInTheFuture',\n    'RequestTimeTooSkewed',\n    'SignatureDoesNotMatch',\n    'BadRequestException', // API Gateway\n];\n/**\n * Given an error code, returns true if it is related to a clock skew error.\n *\n * @param errorCode String representation of some error.\n * @returns True if given error is present in `CLOCK_SKEW_ERROR_CODES`, false otherwise.\n *\n * @internal\n */\nconst isClockSkewError = (errorCode) => !!errorCode && CLOCK_SKEW_ERROR_CODES.includes(errorCode);\n\nexport { isClockSkewError };\n//# sourceMappingURL=isClockSkewError.mjs.map\n","import { AmplifyErrorCode } from '../../../types/errors.mjs';\nimport { isClockSkewError } from './isClockSkewError.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Get retry decider function\n * @param errorParser Function to load JavaScript error from HTTP response\n */\nconst getRetryDecider = (errorParser) => async (response, error) => {\n    const parsedError = error ??\n        (await errorParser(response)) ??\n        undefined;\n    const errorCode = parsedError?.code || parsedError?.name;\n    const statusCode = response?.statusCode;\n    const isRetryable = isConnectionError(error) ||\n        isThrottlingError(statusCode, errorCode) ||\n        isClockSkewError(errorCode) ||\n        isServerSideError(statusCode, errorCode);\n    return {\n        retryable: isRetryable,\n    };\n};\n// reference: https://github.com/aws/aws-sdk-js-v3/blob/ab0e7be36e7e7f8a0c04834357aaad643c7912c3/packages/service-error-classification/src/constants.ts#L22-L37\nconst THROTTLING_ERROR_CODES = [\n    'BandwidthLimitExceeded',\n    'EC2ThrottledException',\n    'LimitExceededException',\n    'PriorRequestNotComplete',\n    'ProvisionedThroughputExceededException',\n    'RequestLimitExceeded',\n    'RequestThrottled',\n    'RequestThrottledException',\n    'SlowDown',\n    'ThrottledException',\n    'Throttling',\n    'ThrottlingException',\n    'TooManyRequestsException',\n];\nconst TIMEOUT_ERROR_CODES = [\n    'TimeoutError',\n    'RequestTimeout',\n    'RequestTimeoutException',\n];\nconst isThrottlingError = (statusCode, errorCode) => statusCode === 429 ||\n    (!!errorCode && THROTTLING_ERROR_CODES.includes(errorCode));\nconst isConnectionError = (error) => [\n    AmplifyErrorCode.NetworkError,\n    // TODO(vNext): unify the error code `ERR_NETWORK` used by the Storage XHR handler\n    'ERR_NETWORK',\n].includes(error?.name);\nconst isServerSideError = (statusCode, errorCode) => (!!statusCode && [500, 502, 503, 504].includes(statusCode)) ||\n    (!!errorCode && TIMEOUT_ERROR_CODES.includes(errorCode));\n\nexport { getRetryDecider };\n//# sourceMappingURL=defaultRetryDecider.mjs.map\n","import { DEFAULT_RETRY_ATTEMPTS } from './constants.mjs';\n\n/**\n * Middleware that executes the retry logic.\n */\nconst retryMiddlewareFactory = ({ maxAttempts = DEFAULT_RETRY_ATTEMPTS, retryDecider, computeDelay, abortSignal, }) => {\n    if (maxAttempts < 1) {\n        throw new Error('maxAttempts must be greater than 0');\n    }\n    return (next, context) => async function retryMiddleware(request) {\n        let error;\n        let attemptsCount = context.attemptsCount ?? 0;\n        let response;\n        // When retry is not needed or max attempts is reached, either error or response will be set. This function handles either cases.\n        const handleTerminalErrorOrResponse = () => {\n            if (response) {\n                addOrIncrementMetadataAttempts(response, attemptsCount);\n                return response;\n            }\n            else {\n                addOrIncrementMetadataAttempts(error, attemptsCount);\n                throw error;\n            }\n        };\n        while (!abortSignal?.aborted && attemptsCount < maxAttempts) {\n            try {\n                response = await next(request);\n                error = undefined;\n            }\n            catch (e) {\n                error = e;\n                response = undefined;\n            }\n            // context.attemptsCount may be updated after calling next handler which may retry the request by itself.\n            attemptsCount =\n                (context.attemptsCount ?? 0) > attemptsCount\n                    ? (context.attemptsCount ?? 0)\n                    : attemptsCount + 1;\n            context.attemptsCount = attemptsCount;\n            const { isCredentialsExpiredError, retryable } = await retryDecider(response, error, context);\n            if (retryable) {\n                // Setting isCredentialsInvalid flag to notify signing middleware to forceRefresh credentials provider.\n                context.isCredentialsExpired = !!isCredentialsExpiredError;\n                if (!abortSignal?.aborted && attemptsCount < maxAttempts) {\n                    // prevent sleep for last attempt or cancelled request;\n                    const delay = computeDelay(attemptsCount);\n                    await cancellableSleep(delay, abortSignal);\n                }\n                continue;\n            }\n            else {\n                return handleTerminalErrorOrResponse();\n            }\n        }\n        if (abortSignal?.aborted) {\n            throw new Error('Request aborted.');\n        }\n        else {\n            return handleTerminalErrorOrResponse();\n        }\n    };\n};\nconst cancellableSleep = (timeoutMs, abortSignal) => {\n    if (abortSignal?.aborted) {\n        return Promise.resolve();\n    }\n    let timeoutId;\n    let sleepPromiseResolveFn;\n    const sleepPromise = new Promise(resolve => {\n        sleepPromiseResolveFn = resolve;\n        timeoutId = setTimeout(resolve, timeoutMs);\n    });\n    abortSignal?.addEventListener('abort', function cancelSleep(_) {\n        clearTimeout(timeoutId);\n        abortSignal?.removeEventListener('abort', cancelSleep);\n        sleepPromiseResolveFn();\n    });\n    return sleepPromise;\n};\nconst addOrIncrementMetadataAttempts = (nextHandlerOutput, attempts) => {\n    if (Object.prototype.toString.call(nextHandlerOutput) !== '[object Object]') {\n        return;\n    }\n    nextHandlerOutput.$metadata = {\n        ...(nextHandlerOutput.$metadata ?? {}),\n        attempts,\n    };\n};\n\nexport { retryMiddlewareFactory };\n//# sourceMappingURL=retryMiddleware.mjs.map\n","import { v4 } from 'uuid';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst amplifyUuid = v4;\n\nexport { amplifyUuid };\n//# sourceMappingURL=index.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Middleware injects user agent string to specified header(default to 'x-amz-user-agent'),\n * if the header is not set already.\n *\n * TODO: incorporate new user agent design\n */\nconst userAgentMiddlewareFactory = ({ userAgentHeader = 'x-amz-user-agent', userAgentValue = '', }) => next => {\n    return async function userAgentMiddleware(request) {\n        if (userAgentValue.trim().length === 0) {\n            const result = await next(request);\n            return result;\n        }\n        else {\n            const headerName = userAgentHeader.toLowerCase();\n            request.headers[headerName] = request.headers[headerName]\n                ? `${request.headers[headerName]} ${userAgentValue}`\n                : userAgentValue;\n            const response = await next(request);\n            return response;\n        }\n    };\n};\n\nexport { userAgentMiddlewareFactory };\n//# sourceMappingURL=middleware.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Compose a transfer handler with a core transfer handler and a list of middleware.\n * @param coreHandler Core transfer handler\n * @param middleware\tList of middleware\n * @returns A transfer handler whose option type is the union of the core\n * \ttransfer handler's option type and the middleware's option type.\n * @internal\n */\nconst composeTransferHandler = (coreHandler, middleware) => (request, options) => {\n    const context = {};\n    let composedHandler = (composeHandlerRequest) => coreHandler(composeHandlerRequest, options);\n    for (let i = middleware.length - 1; i >= 0; i--) {\n        const m = middleware[i];\n        const resolvedMiddleware = m(options);\n        composedHandler = resolvedMiddleware(composedHandler, context);\n    }\n    return composedHandler(request);\n};\n\nexport { composeTransferHandler };\n//# sourceMappingURL=composeTransferHandler.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Cache the payload of a response body. It allows multiple calls to the body,\n * for example, when reading the body in both retry decider and error deserializer.\n * Caching body is allowed here because we call the body accessor(blob(), json(),\n * etc.) when body is small or streaming implementation is not available(RN).\n *\n * @internal\n */\nconst withMemoization = (payloadAccessor) => {\n    let cached;\n    return () => {\n        if (!cached) {\n            // Explicitly not awaiting. Intermediate await would add overhead and\n            // introduce a possible race in the event that this wrapper is called\n            // again before the first `payloadAccessor` call resolves.\n            cached = payloadAccessor();\n        }\n        return cached;\n    };\n};\n\nexport { withMemoization };\n//# sourceMappingURL=memoization.mjs.map\n","import { AmplifyError } from '../../errors/AmplifyError.mjs';\nimport { AmplifyErrorCode } from '../../types/errors.mjs';\nimport '../../errors/errorHelpers.mjs';\nimport { withMemoization } from '../utils/memoization.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst shouldSendBody = (method) => !['HEAD', 'GET'].includes(method.toUpperCase());\n// TODO[AllanZhengYP]: we need to provide isCanceledError utility\nconst fetchTransferHandler = async ({ url, method, headers, body }, { abortSignal, cache, withCrossDomainCredentials }) => {\n    let resp;\n    try {\n        resp = await fetch(url, {\n            method,\n            headers,\n            body: shouldSendBody(method) ? body : undefined,\n            signal: abortSignal,\n            cache,\n            credentials: withCrossDomainCredentials ? 'include' : 'same-origin',\n        });\n    }\n    catch (e) {\n        if (e instanceof TypeError) {\n            throw new AmplifyError({\n                name: AmplifyErrorCode.NetworkError,\n                message: 'A network error has occurred.',\n                underlyingError: e,\n            });\n        }\n        throw e;\n    }\n    const responseHeaders = {};\n    resp.headers?.forEach((value, key) => {\n        responseHeaders[key.toLowerCase()] = value;\n    });\n    const httpResponse = {\n        statusCode: resp.status,\n        headers: responseHeaders,\n        body: null,\n    };\n    // resp.body is a ReadableStream according to Fetch API spec, but React Native\n    // does not implement it.\n    const bodyWithMixin = Object.assign(resp.body ?? {}, {\n        text: withMemoization(() => resp.text()),\n        blob: withMemoization(() => resp.blob()),\n        json: withMemoization(() => resp.json()),\n    });\n    return {\n        ...httpResponse,\n        body: bodyWithMixin,\n    };\n};\n\nexport { fetchTransferHandler };\n//# sourceMappingURL=fetch.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst AmplifyUrl = URL;\nconst AmplifyUrlSearchParams = URLSearchParams;\n\nexport { AmplifyUrl, AmplifyUrlSearchParams };\n//# sourceMappingURL=index.mjs.map\n","import { AmplifyErrorCode } from '../types/errors.mjs';\nimport { AmplifyError } from './AmplifyError.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nclass PlatformNotSupportedError extends AmplifyError {\n    constructor() {\n        super({\n            name: AmplifyErrorCode.PlatformNotSupported,\n            message: 'Function not supported on current platform',\n        });\n    }\n}\n\nexport { PlatformNotSupportedError };\n//# sourceMappingURL=PlatformNotSupportedError.mjs.map\n","import { PlatformNotSupportedError } from '../errors/PlatformNotSupportedError.mjs';\nimport '../errors/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nclass KeyValueStorage {\n    constructor(storage) {\n        this.storage = storage;\n    }\n    /**\n     * This is used to set a specific item in storage\n     * @param {string} key - the key for the item\n     * @param {object} value - the value\n     * @returns {string} value that was set\n     */\n    async setItem(key, value) {\n        if (!this.storage)\n            throw new PlatformNotSupportedError();\n        this.storage.setItem(key, value);\n    }\n    /**\n     * This is used to get a specific key from storage\n     * @param {string} key - the key for the item\n     * This is used to clear the storage\n     * @returns {string} the data item\n     */\n    async getItem(key) {\n        if (!this.storage)\n            throw new PlatformNotSupportedError();\n        return this.storage.getItem(key);\n    }\n    /**\n     * This is used to remove an item from storage\n     * @param {string} key - the key being set\n     * @returns {string} value - value that was deleted\n     */\n    async removeItem(key) {\n        if (!this.storage)\n            throw new PlatformNotSupportedError();\n        this.storage.removeItem(key);\n    }\n    /**\n     * This is used to clear the storage\n     * @returns {string} nothing\n     */\n    async clear() {\n        if (!this.storage)\n            throw new PlatformNotSupportedError();\n        this.storage.clear();\n    }\n}\n\nexport { KeyValueStorage };\n//# sourceMappingURL=KeyValueStorage.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nclass InMemoryStorage {\n    constructor() {\n        this.storage = new Map();\n    }\n    get length() {\n        return this.storage.size;\n    }\n    key(index) {\n        if (index > this.length - 1) {\n            return null;\n        }\n        return Array.from(this.storage.keys())[index];\n    }\n    setItem(key, value) {\n        this.storage.set(key, value);\n    }\n    getItem(key) {\n        return this.storage.get(key) ?? null;\n    }\n    removeItem(key) {\n        this.storage.delete(key);\n    }\n    clear() {\n        this.storage.clear();\n    }\n}\n\nexport { InMemoryStorage };\n//# sourceMappingURL=InMemoryStorage.mjs.map\n","import { ConsoleLogger } from '../Logger/ConsoleLogger.mjs';\nimport { InMemoryStorage } from './InMemoryStorage.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n * @returns Either a reference to window.localStorage or an in-memory storage as fallback\n */\nconst logger = new ConsoleLogger('CoreStorageUtils');\nconst getLocalStorageWithFallback = () => {\n    try {\n        // Attempt to use localStorage directly\n        if (typeof window !== 'undefined' && window.localStorage) {\n            return window.localStorage;\n        }\n    }\n    catch (e) {\n        // Handle any errors related to localStorage access\n        logger.info('localStorage not found. InMemoryStorage is used as a fallback.');\n    }\n    // Return in-memory storage as a fallback if localStorage is not accessible\n    return new InMemoryStorage();\n};\n/**\n * @internal\n * @returns Either a reference to window.sessionStorage or an in-memory storage as fallback\n */\nconst getSessionStorageWithFallback = () => {\n    try {\n        // Attempt to use sessionStorage directly\n        if (typeof window !== 'undefined' && window.sessionStorage) {\n            // Verify we can actually use it by testing access\n            window.sessionStorage.getItem('test');\n            return window.sessionStorage;\n        }\n        throw new Error('sessionStorage is not defined');\n    }\n    catch (e) {\n        // Handle any errors related to sessionStorage access\n        logger.info('sessionStorage not found. InMemoryStorage is used as a fallback.');\n        return new InMemoryStorage();\n    }\n};\n\nexport { getLocalStorageWithFallback, getSessionStorageWithFallback };\n//# sourceMappingURL=utils.mjs.map\n","import { PlatformNotSupportedError } from '../errors/PlatformNotSupportedError.mjs';\nimport '../errors/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nclass SyncKeyValueStorage {\n    constructor(storage) {\n        this._storage = storage;\n    }\n    get storage() {\n        if (!this._storage)\n            throw new PlatformNotSupportedError();\n        return this._storage;\n    }\n    /**\n     * This is used to set a specific item in storage\n     * @param {string} key - the key for the item\n     * @param {object} value - the value\n     * @returns {string} value that was set\n     */\n    setItem(key, value) {\n        this.storage.setItem(key, value);\n    }\n    /**\n     * This is used to get a specific key from storage\n     * @param {string} key - the key for the item\n     * This is used to clear the storage\n     * @returns {string} the data item\n     */\n    getItem(key) {\n        return this.storage.getItem(key);\n    }\n    /**\n     * This is used to remove an item from storage\n     * @param {string} key - the key being set\n     * @returns {string} value - value that was deleted\n     */\n    removeItem(key) {\n        this.storage.removeItem(key);\n    }\n    /**\n     * This is used to clear the storage\n     * @returns {string} nothing\n     */\n    clear() {\n        this.storage.clear();\n    }\n}\n\nexport { SyncKeyValueStorage };\n//# sourceMappingURL=SyncKeyValueStorage.mjs.map\n","import JsCookie from 'js-cookie';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nclass CookieStorage {\n    constructor(data = {}) {\n        const { path, domain, expires, sameSite, secure } = data;\n        this.domain = domain;\n        this.path = path || '/';\n        this.expires = Object.prototype.hasOwnProperty.call(data, 'expires')\n            ? expires\n            : 365;\n        this.secure = Object.prototype.hasOwnProperty.call(data, 'secure')\n            ? secure\n            : true;\n        if (Object.prototype.hasOwnProperty.call(data, 'sameSite')) {\n            if (!sameSite || !['strict', 'lax', 'none'].includes(sameSite)) {\n                throw new Error('The sameSite value of cookieStorage must be \"lax\", \"strict\" or \"none\".');\n            }\n            if (sameSite === 'none' && !this.secure) {\n                throw new Error('sameSite = None requires the Secure attribute in latest browser versions.');\n            }\n            this.sameSite = sameSite;\n        }\n    }\n    async setItem(key, value) {\n        JsCookie.set(key, value, this.getData());\n    }\n    async getItem(key) {\n        const item = JsCookie.get(key);\n        return item ?? null;\n    }\n    async removeItem(key) {\n        JsCookie.remove(key, this.getData());\n    }\n    async clear() {\n        const cookie = JsCookie.get();\n        const promises = Object.keys(cookie).map(key => this.removeItem(key));\n        await Promise.all(promises);\n    }\n    getData() {\n        return {\n            path: this.path,\n            expires: this.expires,\n            domain: this.domain,\n            secure: this.secure,\n            ...(this.sameSite && { sameSite: this.sameSite }),\n        };\n    }\n}\n\nexport { CookieStorage };\n//# sourceMappingURL=CookieStorage.mjs.map\n","import { DefaultStorage } from './DefaultStorage.mjs';\nimport { InMemoryStorage } from './InMemoryStorage.mjs';\nimport { KeyValueStorage } from './KeyValueStorage.mjs';\nimport { SessionStorage } from './SessionStorage.mjs';\nimport { SyncSessionStorage } from './SyncSessionStorage.mjs';\nexport { CookieStorage } from './CookieStorage.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst defaultStorage = new DefaultStorage();\nconst sessionStorage = new SessionStorage();\nconst syncSessionStorage = new SyncSessionStorage();\nconst sharedInMemoryStorage = new KeyValueStorage(new InMemoryStorage());\n\nexport { defaultStorage, sessionStorage, sharedInMemoryStorage, syncSessionStorage };\n//# sourceMappingURL=index.mjs.map\n","import { KeyValueStorage } from './KeyValueStorage.mjs';\nimport { getLocalStorageWithFallback } from './utils.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nclass DefaultStorage extends KeyValueStorage {\n    constructor() {\n        super(getLocalStorageWithFallback());\n    }\n}\n\nexport { DefaultStorage };\n//# sourceMappingURL=DefaultStorage.mjs.map\n","import { KeyValueStorage } from './KeyValueStorage.mjs';\nimport { getSessionStorageWithFallback } from './utils.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nclass SessionStorage extends KeyValueStorage {\n    constructor() {\n        super(getSessionStorageWithFallback());\n    }\n}\n\nexport { SessionStorage };\n//# sourceMappingURL=SessionStorage.mjs.map\n","import { SyncKeyValueStorage } from './SyncKeyValueStorage.mjs';\nimport { getSessionStorageWithFallback } from './utils.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nclass SyncSessionStorage extends SyncKeyValueStorage {\n    constructor() {\n        super(getSessionStorageWithFallback());\n    }\n}\n\nexport { SyncSessionStorage };\n//# sourceMappingURL=SyncSessionStorage.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns signed headers.\n *\n * @param headers `headers` from the request.\n * @returns List of headers included in canonical headers, separated by semicolons (;). This indicates which headers\n * are part of the signing process. Header names must use lowercase characters and must appear in alphabetical order.\n *\n * @internal\n */\nconst getSignedHeaders = (headers) => Object.keys(headers)\n    .map(key => key.toLowerCase())\n    .sort()\n    .join(';');\n\nexport { getSignedHeaders };\n//# sourceMappingURL=getSignedHeaders.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// query params\nconst ALGORITHM_QUERY_PARAM = 'X-Amz-Algorithm';\nconst AMZ_DATE_QUERY_PARAM = 'X-Amz-Date';\nconst CREDENTIAL_QUERY_PARAM = 'X-Amz-Credential';\nconst EXPIRES_QUERY_PARAM = 'X-Amz-Expires';\nconst REGION_SET_PARAM = 'X-Amz-Region-Set';\nconst SIGNATURE_QUERY_PARAM = 'X-Amz-Signature';\nconst SIGNED_HEADERS_QUERY_PARAM = 'X-Amz-SignedHeaders';\nconst TOKEN_QUERY_PARAM = 'X-Amz-Security-Token';\n// headers\nconst AUTH_HEADER = 'authorization';\nconst HOST_HEADER = 'host';\nconst AMZ_DATE_HEADER = AMZ_DATE_QUERY_PARAM.toLowerCase();\nconst TOKEN_HEADER = TOKEN_QUERY_PARAM.toLowerCase();\n// identifiers\nconst KEY_TYPE_IDENTIFIER = 'aws4_request';\nconst SHA256_ALGORITHM_IDENTIFIER = 'AWS4-HMAC-SHA256';\nconst SIGNATURE_IDENTIFIER = 'AWS4';\n// preset values\nconst EMPTY_HASH = 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855';\nconst UNSIGNED_PAYLOAD = 'UNSIGNED-PAYLOAD';\n\nexport { ALGORITHM_QUERY_PARAM, AMZ_DATE_HEADER, AMZ_DATE_QUERY_PARAM, AUTH_HEADER, CREDENTIAL_QUERY_PARAM, EMPTY_HASH, EXPIRES_QUERY_PARAM, HOST_HEADER, KEY_TYPE_IDENTIFIER, REGION_SET_PARAM, SHA256_ALGORITHM_IDENTIFIER, SIGNATURE_IDENTIFIER, SIGNATURE_QUERY_PARAM, SIGNED_HEADERS_QUERY_PARAM, TOKEN_HEADER, TOKEN_QUERY_PARAM, UNSIGNED_PAYLOAD };\n//# sourceMappingURL=constants.mjs.map\n","import { getCredentialScope } from './getCredentialScope.mjs';\nimport { getFormattedDates } from './getFormattedDates.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Extracts common values used for signing both requests and urls.\n *\n * @param options `SignRequestOptions` object containing values used to construct the signature.\n * @returns Common `SigningValues` used for signing.\n *\n * @internal\n */\nconst getSigningValues = ({ credentials, signingDate = new Date(), signingRegion, signingService, uriEscapePath = true, }) => {\n    // get properties from credentials\n    const { accessKeyId, secretAccessKey, sessionToken } = credentials;\n    // get formatted dates for signing\n    const { longDate, shortDate } = getFormattedDates(signingDate);\n    // copy header and set signing properties\n    const credentialScope = getCredentialScope(shortDate, signingRegion, signingService);\n    return {\n        accessKeyId,\n        credentialScope,\n        longDate,\n        secretAccessKey,\n        sessionToken,\n        shortDate,\n        signingRegion,\n        signingService,\n        uriEscapePath,\n    };\n};\n\nexport { getSigningValues };\n//# sourceMappingURL=getSigningValues.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns expected date strings to be used in signing.\n *\n * @param date JavaScript `Date` object.\n * @returns `FormattedDates` object containing the following:\n * - longDate: A date string in 'YYYYMMDDThhmmssZ' format\n * - shortDate: A date string in 'YYYYMMDD' format\n *\n * @internal\n */\nconst getFormattedDates = (date) => {\n    const longDate = date.toISOString().replace(/[:-]|\\.\\d{3}/g, '');\n    return {\n        longDate,\n        shortDate: longDate.slice(0, 8),\n    };\n};\n\nexport { getFormattedDates };\n//# sourceMappingURL=getFormattedDates.mjs.map\n","import { KEY_TYPE_IDENTIFIER } from '../constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns the credential scope which restricts the resulting signature to the specified region and service.\n *\n * @param date Current date in the format 'YYYYMMDD'.\n * @param region AWS region in which the service resides.\n * @param service Service to which the signed request is being sent.\n *\n * @returns  A string representing the credential scope with format 'YYYYMMDD/region/service/aws4_request'.\n *\n * @internal\n */\nconst getCredentialScope = (date, region, service) => `${date}/${region}/${service}/${KEY_TYPE_IDENTIFIER}`;\n\nexport { getCredentialScope };\n//# sourceMappingURL=getCredentialScope.mjs.map\n","import { Sha256 } from '@aws-crypto/sha256-js';\nimport { toHex } from '@smithy/util-hex-encoding';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// TODO: V6 update to different crypto dependency?\n/**\n * Returns the hashed data a `Uint8Array`.\n *\n * @param key `SourceData` to be used as hashing key.\n * @param data Hashable `SourceData`.\n * @returns `Uint8Array` created from the data as input to a hash function.\n */\nconst getHashedData = (key, data) => {\n    const sha256 = new Sha256(key ?? undefined);\n    sha256.update(data);\n    // TODO: V6 flip to async digest\n    const hashedData = sha256.digestSync();\n    return hashedData;\n};\n/**\n * Returns the hashed data as a hex string.\n *\n * @param key `SourceData` to be used as hashing key.\n * @param data Hashable `SourceData`.\n * @returns String using lowercase hexadecimal characters created from the data as input to a hash function.\n *\n * @internal\n */\nconst getHashedDataAsHex = (key, data) => {\n    const hashedData = getHashedData(key, data);\n    return toHex(hashedData);\n};\n\nexport { getHashedData, getHashedDataAsHex };\n//# sourceMappingURL=dataHashHelpers.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns canonical headers.\n *\n * @param headers Headers from the request.\n * @returns Request headers that will be signed, and their values, separated by newline characters. Header names must\n * use lowercase characters, must appear in alphabetical order, and must be followed by a colon (:). For the values,\n * trim any leading or trailing spaces, convert sequential spaces to a single space, and separate the values\n * for a multi-value header using commas.\n *\n * @internal\n */\nconst getCanonicalHeaders = (headers) => Object.entries(headers)\n    .map(([key, value]) => ({\n    key: key.toLowerCase(),\n    value: value?.trim().replace(/\\s+/g, ' ') ?? '',\n}))\n    .sort((a, b) => (a.key < b.key ? -1 : 1))\n    .map(entry => `${entry.key}:${entry.value}\\n`)\n    .join('');\n\nexport { getCanonicalHeaders };\n//# sourceMappingURL=getCanonicalHeaders.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a canonical query string.\n *\n * @param searchParams `searchParams` from the request url.\n * @returns URL-encoded query string parameters, separated by ampersands (&). Percent-encode reserved characters,\n * including the space character. Encode names and values separately. If there are empty parameters, append the equals\n * sign to the parameter name before encoding. After encoding, sort the parameters alphabetically by key name. If there\n * is no query string, use an empty string (\"\").\n *\n * @internal\n */\nconst getCanonicalQueryString = (searchParams) => Array.from(searchParams)\n    .sort(([keyA, valA], [keyB, valB]) => {\n    if (keyA === keyB) {\n        return valA < valB ? -1 : 1;\n    }\n    return keyA < keyB ? -1 : 1;\n})\n    .map(([key, val]) => `${escapeUri(key)}=${escapeUri(val)}`)\n    .join('&');\nconst escapeUri = (uri) => encodeURIComponent(uri).replace(/[!'()*]/g, hexEncode);\nconst hexEncode = (c) => `%${c.charCodeAt(0).toString(16).toUpperCase()}`;\n\nexport { getCanonicalQueryString };\n//# sourceMappingURL=getCanonicalQueryString.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a canonical uri.\n *\n * @param pathname `pathname` from request url.\n * @param uriEscapePath Whether to uri encode the path as part of canonical uri. It's used for S3 only where the\n *   pathname is already uri encoded, and the signing process is not expected to uri encode it again. Defaults to true.\n * @returns URI-encoded version of the absolute path component URL (everything between the host and the question mark\n * character (?) that starts the query string parameters). If the absolute path is empty, a forward slash character (/).\n *\n * @internal\n */\nconst getCanonicalUri = (pathname, uriEscapePath = true) => pathname\n    ? uriEscapePath\n        ? encodeURIComponent(pathname).replace(/%2F/g, '/')\n        : pathname\n    : '/';\n\nexport { getCanonicalUri };\n//# sourceMappingURL=getCanonicalUri.mjs.map\n","import { EMPTY_HASH, UNSIGNED_PAYLOAD } from '../constants.mjs';\nimport { getHashedDataAsHex } from './dataHashHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns the hashed payload.\n *\n * @param body `body` (payload) from the request.\n * @returns String created using the payload in the body of the HTTP request as input to a hash function. This string\n * uses lowercase hexadecimal characters. If the payload is empty, return precalculated result of an empty hash.\n *\n * @internal\n */\nconst getHashedPayload = (body) => {\n    // return precalculated empty hash if body is undefined or null\n    if (body == null) {\n        return EMPTY_HASH;\n    }\n    if (isSourceData(body)) {\n        const hashedData = getHashedDataAsHex(null, body);\n        return hashedData;\n    }\n    // Defined body is not signable. Return unsigned payload which may or may not be accepted by the service.\n    return UNSIGNED_PAYLOAD;\n};\nconst isSourceData = (body) => typeof body === 'string' || ArrayBuffer.isView(body) || isArrayBuffer(body);\nconst isArrayBuffer = (arg) => (typeof ArrayBuffer === 'function' && arg instanceof ArrayBuffer) ||\n    Object.prototype.toString.call(arg) === '[object ArrayBuffer]';\n\nexport { getHashedPayload };\n//# sourceMappingURL=getHashedPayload.mjs.map\n","import { getHashedDataAsHex } from './dataHashHelpers.mjs';\nimport { getCanonicalRequest } from './getCanonicalRequest.mjs';\nimport { getSigningKey } from './getSigningKey.mjs';\nimport { getStringToSign } from './getStringToSign.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Calculates and returns an AWS API Signature.\n * https://docs.aws.amazon.com/IAM/latest/UserGuide/create-signed-request.html\n *\n * @param request `HttpRequest` to be signed.\n * @param signRequestOptions `SignRequestOptions` object containing values used to construct the signature.\n * @returns AWS API Signature to sign a request or url with.\n *\n * @internal\n */\nconst getSignature = (request, { credentialScope, longDate, secretAccessKey, shortDate, signingRegion, signingService, uriEscapePath, }) => {\n    // step 1: create a canonical request\n    const canonicalRequest = getCanonicalRequest(request, uriEscapePath);\n    // step 2: create a hash of the canonical request\n    const hashedRequest = getHashedDataAsHex(null, canonicalRequest);\n    // step 3: create a string to sign\n    const stringToSign = getStringToSign(longDate, credentialScope, hashedRequest);\n    // step 4: calculate the signature\n    const signature = getHashedDataAsHex(getSigningKey(secretAccessKey, shortDate, signingRegion, signingService), stringToSign);\n    return signature;\n};\n\nexport { getSignature };\n//# sourceMappingURL=getSignature.mjs.map\n","import { getCanonicalHeaders } from './getCanonicalHeaders.mjs';\nimport { getCanonicalQueryString } from './getCanonicalQueryString.mjs';\nimport { getCanonicalUri } from './getCanonicalUri.mjs';\nimport { getHashedPayload } from './getHashedPayload.mjs';\nimport { getSignedHeaders } from './getSignedHeaders.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a canonical request.\n *\n * @param request `HttpRequest` from which to create the canonical request from.\n * @param uriEscapePath Whether to uri encode the path as part of canonical uri. It's used for S3 only where the\n *   pathname is already uri encoded, and the signing process is not expected to uri encode it again. Defaults to true.\n * @returns String created by by concatenating the following strings, separated by newline characters:\n * - HTTPMethod\n * - CanonicalUri\n * - CanonicalQueryString\n * - CanonicalHeaders\n * - SignedHeaders\n * - HashedPayload\n *\n * @internal\n */\nconst getCanonicalRequest = ({ body, headers, method, url }, uriEscapePath = true) => [\n    method,\n    getCanonicalUri(url.pathname, uriEscapePath),\n    getCanonicalQueryString(url.searchParams),\n    getCanonicalHeaders(headers),\n    getSignedHeaders(headers),\n    getHashedPayload(body),\n].join('\\n');\n\nexport { getCanonicalRequest };\n//# sourceMappingURL=getCanonicalRequest.mjs.map\n","import { SHA256_ALGORITHM_IDENTIFIER } from '../constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a string to be signed.\n *\n * @param date Current date in the format 'YYYYMMDDThhmmssZ'.\n * @param credentialScope String representing the credential scope with format 'YYYYMMDD/region/service/aws4_request'.\n * @param hashedRequest Hashed canonical request.\n *\n * @returns A string created by by concatenating the following strings, separated by newline characters:\n * - Algorithm\n * - RequestDateTime\n * - CredentialScope\n * - HashedCanonicalRequest\n *\n * @internal\n */\nconst getStringToSign = (date, credentialScope, hashedRequest) => [SHA256_ALGORITHM_IDENTIFIER, date, credentialScope, hashedRequest].join('\\n');\n\nexport { getStringToSign };\n//# sourceMappingURL=getStringToSign.mjs.map\n","import { KEY_TYPE_IDENTIFIER, SIGNATURE_IDENTIFIER } from '../constants.mjs';\nimport { getHashedData } from './dataHashHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a signing key to be used for signing requests.\n *\n * @param secretAccessKey AWS secret access key from credentials.\n * @param date Current date in the format 'YYYYMMDD'.\n * @param region AWS region in which the service resides.\n * @param service Service to which the signed request is being sent.\n *\n * @returns `Uint8Array` calculated from its composite parts.\n *\n * @internal\n */\nconst getSigningKey = (secretAccessKey, date, region, service) => {\n    const key = `${SIGNATURE_IDENTIFIER}${secretAccessKey}`;\n    const dateKey = getHashedData(key, date);\n    const regionKey = getHashedData(dateKey, region);\n    const serviceKey = getHashedData(regionKey, service);\n    const signingKey = getHashedData(serviceKey, KEY_TYPE_IDENTIFIER);\n    return signingKey;\n};\n\nexport { getSigningKey };\n//# sourceMappingURL=getSigningKey.mjs.map\n","import { getSignedHeaders } from './utils/getSignedHeaders.mjs';\nimport { getSigningValues } from './utils/getSigningValues.mjs';\nimport { HOST_HEADER, AMZ_DATE_HEADER, TOKEN_HEADER, SHA256_ALGORITHM_IDENTIFIER, AUTH_HEADER } from './constants.mjs';\nimport { getSignature } from './utils/getSignature.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Given a `HttpRequest`, returns a Signature Version 4 signed `HttpRequest`.\n *\n * @param request `HttpRequest` to be signed.\n * @param signRequestOptions `SignRequestOptions` object containing values used to construct the signature.\n * @returns A `HttpRequest` with authentication headers which can grant temporary access to AWS resources.\n */\nconst signRequest = (request, options) => {\n    const signingValues = getSigningValues(options);\n    const { accessKeyId, credentialScope, longDate, sessionToken } = signingValues;\n    // create the request to sign\n    const headers = { ...request.headers };\n    headers[HOST_HEADER] = request.url.host;\n    headers[AMZ_DATE_HEADER] = longDate;\n    if (sessionToken) {\n        headers[TOKEN_HEADER] = sessionToken;\n    }\n    const requestToSign = { ...request, headers };\n    // calculate and add the signature to the request\n    const signature = getSignature(requestToSign, signingValues);\n    const credentialEntry = `Credential=${accessKeyId}/${credentialScope}`;\n    const signedHeadersEntry = `SignedHeaders=${getSignedHeaders(headers)}`;\n    const signatureEntry = `Signature=${signature}`;\n    headers[AUTH_HEADER] =\n        `${SHA256_ALGORITHM_IDENTIFIER} ${credentialEntry}, ${signedHeadersEntry}, ${signatureEntry}`;\n    return requestToSign;\n};\n\nexport { signRequest };\n//# sourceMappingURL=signRequest.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns a `Date` that is corrected for clock skew.\n *\n * @param systemClockOffset The offset of the system clock in milliseconds.\n *\n * @returns `Date` representing the current time adjusted by the system clock offset.\n *\n * @internal\n */\nconst getSkewCorrectedDate = (systemClockOffset) => new Date(Date.now() + systemClockOffset);\n\nexport { getSkewCorrectedDate };\n//# sourceMappingURL=getSkewCorrectedDate.mjs.map\n","import { isClockSkewed } from './isClockSkewed.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Returns the difference between clock time and the current system time if clock is skewed.\n *\n * @param clockTimeInMilliseconds Clock time in milliseconds.\n * @param currentSystemClockOffset Current system clock offset in milliseconds.\n *\n * @internal\n */\nconst getUpdatedSystemClockOffset = (clockTimeInMilliseconds, currentSystemClockOffset) => {\n    if (isClockSkewed(clockTimeInMilliseconds, currentSystemClockOffset)) {\n        return clockTimeInMilliseconds - Date.now();\n    }\n    return currentSystemClockOffset;\n};\n\nexport { getUpdatedSystemClockOffset };\n//# sourceMappingURL=getUpdatedSystemClockOffset.mjs.map\n","import { getSkewCorrectedDate } from './getSkewCorrectedDate.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// 5 mins in milliseconds. Ref: https://github.com/aws/aws-sdk-js-v3/blob/6c0f44fab30a1bb2134af47362a31332abc3666b/packages/middleware-signing/src/utils/isClockSkewed.ts#L10\nconst SKEW_WINDOW = 5 * 60 * 1000;\n/**\n * Checks if the provided date is within the skew window of 5 minutes.\n *\n * @param clockTimeInMilliseconds Time to check for skew in milliseconds.\n * @param clockOffsetInMilliseconds Offset to check clock against in milliseconds.\n *\n * @returns True if skewed. False otherwise.\n *\n * @internal\n */\nconst isClockSkewed = (clockTimeInMilliseconds, clockOffsetInMilliseconds) => Math.abs(getSkewCorrectedDate(clockOffsetInMilliseconds).getTime() -\n    clockTimeInMilliseconds) >= SKEW_WINDOW;\n\nexport { isClockSkewed };\n//# sourceMappingURL=isClockSkewed.mjs.map\n","import { signRequest } from './signer/signatureV4/signRequest.mjs';\nimport '@aws-crypto/sha256-js';\nimport '@smithy/util-hex-encoding';\nimport { getSkewCorrectedDate } from './utils/getSkewCorrectedDate.mjs';\nimport { getUpdatedSystemClockOffset } from './utils/getUpdatedSystemClockOffset.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Middleware that SigV4 signs request with AWS credentials, and correct system clock offset.\n * This middleware is expected to be placed after retry middleware.\n */\nconst signingMiddlewareFactory = ({ credentials, region, service, uriEscapePath = true, }) => {\n    let currentSystemClockOffset;\n    return (next, context) => async function signingMiddleware(request) {\n        currentSystemClockOffset = currentSystemClockOffset ?? 0;\n        const signRequestOptions = {\n            credentials: typeof credentials === 'function'\n                ? await credentials({\n                    forceRefresh: !!context?.isCredentialsExpired,\n                })\n                : credentials,\n            signingDate: getSkewCorrectedDate(currentSystemClockOffset),\n            signingRegion: region,\n            signingService: service,\n            uriEscapePath,\n        };\n        const signedRequest = await signRequest(request, signRequestOptions);\n        const response = await next(signedRequest);\n        // Update system clock offset if response contains date header, regardless of the status code.\n        // non-2xx response will still be returned from next handler instead of thrown, because it's\n        // only thrown by the retry middleware.\n        const dateString = getDateHeader(response);\n        if (dateString) {\n            currentSystemClockOffset = getUpdatedSystemClockOffset(Date.parse(dateString), currentSystemClockOffset);\n        }\n        return response;\n    };\n};\nconst getDateHeader = ({ headers } = {}) => headers?.date ?? headers?.Date ?? headers?.['x-amz-date'];\n\nexport { signingMiddlewareFactory };\n//# sourceMappingURL=middleware.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nclass NonRetryableError extends Error {\n    constructor() {\n        super(...arguments);\n        this.nonRetryable = true;\n    }\n}\n\nexport { NonRetryableError };\n//# sourceMappingURL=NonRetryableError.mjs.map\n","import { MAX_DELAY_MS } from './constants.mjs';\nimport { jitteredBackoff } from './jitteredBackoff.mjs';\nimport { retry } from './retry.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @private\n * Internal use of Amplify only\n */\nconst jitteredExponentialRetry = (functionToRetry, args, maxDelayMs = MAX_DELAY_MS, onTerminate) => retry(functionToRetry, args, jitteredBackoff(maxDelayMs), onTerminate);\n\nexport { jitteredExponentialRetry };\n//# sourceMappingURL=jitteredExponentialRetry.mjs.map\n","import { AmplifyError } from './AmplifyError.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Error class for errors that associated with unsuccessful HTTP responses.\n * It's throw by API category REST API handlers and GraphQL query handlers for now.\n */\nclass ApiError extends AmplifyError {\n    /**\n     * The unwrapped HTTP response causing the given API error.\n     */\n    get response() {\n        return this._response\n            ? replicateApiErrorResponse(this._response)\n            : undefined;\n    }\n    constructor(params) {\n        super(params);\n        // TODO: Delete the following 2 lines after we change the build target to >= es2015\n        this.constructor = ApiError;\n        Object.setPrototypeOf(this, ApiError.prototype);\n        if (params.response) {\n            this._response = params.response;\n        }\n    }\n}\nconst replicateApiErrorResponse = (response) => ({\n    ...response,\n    headers: { ...response.headers },\n});\n\nexport { ApiError };\n//# sourceMappingURL=APIError.mjs.map\n","import { getBtoa } from '../../globalHelpers/index.mjs';\nimport { bytesToString } from './bytesToString.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst base64Encoder = {\n    /**\n     * Convert input to base64-encoded string\n     * @param input - string to convert to base64\n     * @param options - encoding options that can optionally produce a base64url string\n     * @returns base64-encoded string\n     */\n    convert(input, options = {\n        urlSafe: false,\n        skipPadding: false,\n    }) {\n        const inputStr = typeof input === 'string' ? input : bytesToString(input);\n        let encodedStr = getBtoa()(inputStr);\n        // urlSafe char replacement and skipPadding options conform to the base64url spec\n        // https://datatracker.ietf.org/doc/html/rfc4648#section-5\n        if (options.urlSafe) {\n            encodedStr = encodedStr.replace(/\\+/g, '-').replace(/\\//g, '_');\n        }\n        if (options.skipPadding) {\n            encodedStr = encodedStr.replace(/=/g, '');\n        }\n        return encodedStr;\n    },\n};\n\nexport { base64Encoder };\n//# sourceMappingURL=base64Encoder.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction bytesToString(input) {\n    return Array.from(input, byte => String.fromCodePoint(byte)).join('');\n}\n\nexport { bytesToString };\n//# sourceMappingURL=bytesToString.mjs.map\n","import { AmplifyError } from '../../errors/AmplifyError.mjs';\nimport '../../types/errors.mjs';\nimport '../../errors/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst getCrypto = () => {\n    if (typeof window === 'object' && typeof window.crypto === 'object') {\n        return window.crypto;\n    }\n    // Next.js global polyfill\n    if (typeof crypto === 'object') {\n        return crypto;\n    }\n    throw new AmplifyError({\n        name: 'MissingPolyfill',\n        message: 'Cannot resolve the `crypto` function from the environment.',\n    });\n};\nconst getBtoa = () => {\n    // browser\n    if (typeof window !== 'undefined' && typeof window.btoa === 'function') {\n        return window.btoa;\n    }\n    // Next.js global polyfill\n    if (typeof btoa === 'function') {\n        return btoa;\n    }\n    throw new AmplifyError({\n        name: 'Base64EncoderError',\n        message: 'Cannot resolve the `btoa` function from the environment.',\n    });\n};\nconst getAtob = () => {\n    // browser\n    if (typeof window !== 'undefined' && typeof window.atob === 'function') {\n        return window.atob;\n    }\n    // Next.js global polyfill\n    if (typeof atob === 'function') {\n        return atob;\n    }\n    throw new AmplifyError({\n        name: 'Base64EncoderError',\n        message: 'Cannot resolve the `atob` function from the environment.',\n    });\n};\n\nexport { getAtob, getBtoa, getCrypto };\n//# sourceMappingURL=index.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nvar LogType;\n(function (LogType) {\n    LogType[\"DEBUG\"] = \"DEBUG\";\n    LogType[\"ERROR\"] = \"ERROR\";\n    LogType[\"INFO\"] = \"INFO\";\n    LogType[\"WARN\"] = \"WARN\";\n    LogType[\"VERBOSE\"] = \"VERBOSE\";\n    LogType[\"NONE\"] = \"NONE\";\n})(LogType || (LogType = {}));\n\nexport { LogType };\n//# sourceMappingURL=types.mjs.map\n","import { AWS_CLOUDWATCH_CATEGORY } from '../constants.mjs';\nimport { LogType } from './types.mjs';\n\n/* eslint-disable no-console */\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst LOG_LEVELS = {\n    VERBOSE: 1,\n    DEBUG: 2,\n    INFO: 3,\n    WARN: 4,\n    ERROR: 5,\n    NONE: 6,\n};\n/**\n * Write logs\n * @class Logger\n */\nclass ConsoleLogger {\n    /**\n     * @constructor\n     * @param {string} name - Name of the logger\n     */\n    constructor(name, level = LogType.WARN) {\n        this.name = name;\n        this.level = level;\n        this._pluggables = [];\n    }\n    _padding(n) {\n        return n < 10 ? '0' + n : '' + n;\n    }\n    _ts() {\n        const dt = new Date();\n        return ([this._padding(dt.getMinutes()), this._padding(dt.getSeconds())].join(':') +\n            '.' +\n            dt.getMilliseconds());\n    }\n    configure(config) {\n        if (!config)\n            return this._config;\n        this._config = config;\n        return this._config;\n    }\n    /**\n     * Write log\n     * @method\n     * @memeberof Logger\n     * @param {LogType|string} type - log type, default INFO\n     * @param {string|object} msg - Logging message or object\n     */\n    _log(type, ...msg) {\n        let loggerLevelName = this.level;\n        if (ConsoleLogger.LOG_LEVEL) {\n            loggerLevelName = ConsoleLogger.LOG_LEVEL;\n        }\n        if (typeof window !== 'undefined' && window.LOG_LEVEL) {\n            loggerLevelName = window.LOG_LEVEL;\n        }\n        const loggerLevel = LOG_LEVELS[loggerLevelName];\n        const typeLevel = LOG_LEVELS[type];\n        if (!(typeLevel >= loggerLevel)) {\n            // Do nothing if type is not greater than or equal to logger level (handle undefined)\n            return;\n        }\n        let log = console.log.bind(console);\n        if (type === LogType.ERROR && console.error) {\n            log = console.error.bind(console);\n        }\n        if (type === LogType.WARN && console.warn) {\n            log = console.warn.bind(console);\n        }\n        if (ConsoleLogger.BIND_ALL_LOG_LEVELS) {\n            if (type === LogType.INFO && console.info) {\n                log = console.info.bind(console);\n            }\n            if (type === LogType.DEBUG && console.debug) {\n                log = console.debug.bind(console);\n            }\n        }\n        const prefix = `[${type}] ${this._ts()} ${this.name}`;\n        let message = '';\n        if (msg.length === 1 && typeof msg[0] === 'string') {\n            message = `${prefix} - ${msg[0]}`;\n            log(message);\n        }\n        else if (msg.length === 1) {\n            message = `${prefix} ${msg[0]}`;\n            log(prefix, msg[0]);\n        }\n        else if (typeof msg[0] === 'string') {\n            let obj = msg.slice(1);\n            if (obj.length === 1) {\n                obj = obj[0];\n            }\n            message = `${prefix} - ${msg[0]} ${obj}`;\n            log(`${prefix} - ${msg[0]}`, obj);\n        }\n        else {\n            message = `${prefix} ${msg}`;\n            log(prefix, msg);\n        }\n        for (const plugin of this._pluggables) {\n            const logEvent = { message, timestamp: Date.now() };\n            plugin.pushLogs([logEvent]);\n        }\n    }\n    /**\n     * Write General log. Default to INFO\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    log(...msg) {\n        this._log(LogType.INFO, ...msg);\n    }\n    /**\n     * Write INFO log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    info(...msg) {\n        this._log(LogType.INFO, ...msg);\n    }\n    /**\n     * Write WARN log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    warn(...msg) {\n        this._log(LogType.WARN, ...msg);\n    }\n    /**\n     * Write ERROR log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    error(...msg) {\n        this._log(LogType.ERROR, ...msg);\n    }\n    /**\n     * Write DEBUG log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    debug(...msg) {\n        this._log(LogType.DEBUG, ...msg);\n    }\n    /**\n     * Write VERBOSE log\n     * @method\n     * @memeberof Logger\n     * @param {string|object} msg - Logging message or object\n     */\n    verbose(...msg) {\n        this._log(LogType.VERBOSE, ...msg);\n    }\n    addPluggable(pluggable) {\n        if (pluggable && pluggable.getCategoryName() === AWS_CLOUDWATCH_CATEGORY) {\n            this._pluggables.push(pluggable);\n            pluggable.configure(this._config);\n        }\n    }\n    listPluggables() {\n        return this._pluggables;\n    }\n}\nConsoleLogger.LOG_LEVEL = null;\nConsoleLogger.BIND_ALL_LOG_LEVELS = false;\n\nexport { ConsoleLogger };\n//# sourceMappingURL=ConsoleLogger.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Logging constants\nconst AWS_CLOUDWATCH_CATEGORY = 'Logging';\nconst USER_AGENT_HEADER = 'x-amz-user-agent';\n// Error exception code constants\nconst NO_HUBCALLBACK_PROVIDED_EXCEPTION = 'NoHubcallbackProvidedException';\n\nexport { AWS_CLOUDWATCH_CATEGORY, NO_HUBCALLBACK_PROVIDED_EXCEPTION, USER_AGENT_HEADER };\n//# sourceMappingURL=constants.mjs.map\n","class AmplifyError extends Error {\n    /**\n     *  Constructs an AmplifyError.\n     *\n     * @param message text that describes the main problem.\n     * @param underlyingError the underlying cause of the error.\n     * @param recoverySuggestion suggestion to recover from the error.\n     *\n     */\n    constructor({ message, name, recoverySuggestion, underlyingError, metadata, }) {\n        super(message);\n        this.name = name;\n        this.underlyingError = underlyingError;\n        this.recoverySuggestion = recoverySuggestion;\n        if (metadata) {\n            // If metadata exists, explicitly only record the following properties.\n            const { extendedRequestId, httpStatusCode, requestId } = metadata;\n            this.metadata = { extendedRequestId, httpStatusCode, requestId };\n        }\n        // Hack for making the custom error class work when transpiled to es5\n        // TODO: Delete the following 2 lines after we change the build target to >= es2015\n        this.constructor = AmplifyError;\n        Object.setPrototypeOf(this, AmplifyError.prototype);\n    }\n}\n\nexport { AmplifyError };\n//# sourceMappingURL=AmplifyError.mjs.map\n","var AmplifyErrorCode;\n(function (AmplifyErrorCode) {\n    AmplifyErrorCode[\"NoEndpointId\"] = \"NoEndpointId\";\n    AmplifyErrorCode[\"PlatformNotSupported\"] = \"PlatformNotSupported\";\n    AmplifyErrorCode[\"Unknown\"] = \"Unknown\";\n    AmplifyErrorCode[\"NetworkError\"] = \"NetworkError\";\n})(AmplifyErrorCode || (AmplifyErrorCode = {}));\n\nexport { AmplifyErrorCode };\n//# sourceMappingURL=errors.mjs.map\n","import { AmplifyError } from './AmplifyError.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createAssertionFunction = (errorMap, AssertionError = AmplifyError) => (assertion, name, additionalContext) => {\n    const { message, recoverySuggestion } = errorMap[name];\n    if (!assertion) {\n        throw new AssertionError({\n            name,\n            message: additionalContext\n                ? `${message} ${additionalContext}`\n                : message,\n            recoverySuggestion,\n        });\n    }\n};\n\nexport { createAssertionFunction };\n//# sourceMappingURL=createAssertionFunction.mjs.map\n","import { ConsoleLogger } from '../Logger/ConsoleLogger.mjs';\nimport { NO_HUBCALLBACK_PROVIDED_EXCEPTION } from '../constants.mjs';\nimport { AmplifyError } from '../errors/AmplifyError.mjs';\nimport '../types/errors.mjs';\nimport '../errors/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst AMPLIFY_SYMBOL = (typeof Symbol !== 'undefined'\n    ? Symbol('amplify_default')\n    : '@@amplify_default');\nconst logger = new ConsoleLogger('Hub');\nclass HubClass {\n    constructor(name) {\n        this.listeners = new Map();\n        this.protectedChannels = [\n            'core',\n            'auth',\n            'api',\n            'analytics',\n            'interactions',\n            'pubsub',\n            'storage',\n            'ui',\n            'xr',\n        ];\n        this.name = name;\n    }\n    /**\n     * Used internally to remove a Hub listener.\n     *\n     * @remarks\n     * This private method is for internal use only. Instead of calling Hub.remove, call the result of Hub.listen.\n     */\n    _remove(channel, listener) {\n        const holder = this.listeners.get(channel);\n        if (!holder) {\n            logger.warn(`No listeners for ${channel}`);\n            return;\n        }\n        this.listeners.set(channel, [\n            ...holder.filter(({ callback }) => callback !== listener),\n        ]);\n    }\n    dispatch(channel, payload, source, ampSymbol) {\n        if (typeof channel === 'string' &&\n            this.protectedChannels.indexOf(channel) > -1) {\n            const hasAccess = ampSymbol === AMPLIFY_SYMBOL;\n            if (!hasAccess) {\n                logger.warn(`WARNING: ${channel} is protected and dispatching on it can have unintended consequences`);\n            }\n        }\n        const capsule = {\n            channel,\n            payload: { ...payload },\n            source,\n            patternInfo: [],\n        };\n        try {\n            this._toListeners(capsule);\n        }\n        catch (e) {\n            logger.error(e);\n        }\n    }\n    listen(channel, callback, listenerName = 'noname') {\n        let cb;\n        if (typeof callback !== 'function') {\n            throw new AmplifyError({\n                name: NO_HUBCALLBACK_PROVIDED_EXCEPTION,\n                message: 'No callback supplied to Hub',\n            });\n        }\n        else {\n            // Needs to be casted as a more generic type\n            cb = callback;\n        }\n        let holder = this.listeners.get(channel);\n        if (!holder) {\n            holder = [];\n            this.listeners.set(channel, holder);\n        }\n        holder.push({\n            name: listenerName,\n            callback: cb,\n        });\n        return () => {\n            this._remove(channel, cb);\n        };\n    }\n    _toListeners(capsule) {\n        const { channel, payload } = capsule;\n        const holder = this.listeners.get(channel);\n        if (holder) {\n            holder.forEach(listener => {\n                logger.debug(`Dispatching to ${channel} with `, payload);\n                try {\n                    listener.callback(capsule);\n                }\n                catch (e) {\n                    logger.error(e);\n                }\n            });\n        }\n    }\n}\n/* We export a __default__ instance of HubClass to use it as a\npseudo Singleton for the main messaging bus, however you can still create\nyour own instance of HubClass() for a separate \"private bus\" of events. */\nconst Hub = new HubClass('__default__');\n/**\n * @internal\n *\n * Internal hub used for core Amplify functionality. Not intended for use outside of Amplify.\n *\n */\nconst HubInternal = new HubClass('internal-hub');\n\nexport { AMPLIFY_SYMBOL, Hub, HubClass, HubInternal };\n//# sourceMappingURL=index.mjs.map\n","import { getAtob } from '../../globalHelpers/index.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst base64Decoder = {\n    convert(input, options) {\n        let inputStr = input;\n        // urlSafe character replacement options conform to the base64 url spec\n        // https://datatracker.ietf.org/doc/html/rfc4648#page-7\n        if (options?.urlSafe) {\n            inputStr = inputStr.replace(/-/g, '+').replace(/_/g, '/');\n        }\n        return getAtob()(inputStr);\n    },\n};\n\nexport { base64Decoder };\n//# sourceMappingURL=base64Decoder.mjs.map\n","import { AmplifyError } from '../../errors/AmplifyError.mjs';\nimport '../../types/errors.mjs';\nimport '../../errors/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst getCrypto = () => {\n    if (typeof window === 'object' && typeof window.crypto === 'object') {\n        return window.crypto;\n    }\n    // Next.js global polyfill\n    if (typeof crypto === 'object') {\n        return crypto;\n    }\n    throw new AmplifyError({\n        name: 'MissingPolyfill',\n        message: 'Cannot resolve the `crypto` function from the environment.',\n    });\n};\nconst getBtoa = () => {\n    // browser\n    if (typeof window !== 'undefined' && typeof window.btoa === 'function') {\n        return window.btoa;\n    }\n    // Next.js global polyfill\n    if (typeof btoa === 'function') {\n        return btoa;\n    }\n    throw new AmplifyError({\n        name: 'Base64EncoderError',\n        message: 'Cannot resolve the `btoa` function from the environment.',\n    });\n};\nconst getAtob = () => {\n    // browser\n    if (typeof window !== 'undefined' && typeof window.atob === 'function') {\n        return window.atob;\n    }\n    // Next.js global polyfill\n    if (typeof atob === 'function') {\n        return atob;\n    }\n    throw new AmplifyError({\n        name: 'Base64EncoderError',\n        message: 'Cannot resolve the `atob` function from the environment.',\n    });\n};\n\nexport { getAtob, getBtoa, getCrypto };\n//# sourceMappingURL=index.mjs.map\n","import { createAssertionFunction } from '../../../errors/createAssertionFunction.mjs';\nimport '../../../types/errors.mjs';\nimport '../../../errors/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nvar AuthConfigurationErrorCode;\n(function (AuthConfigurationErrorCode) {\n    AuthConfigurationErrorCode[\"AuthTokenConfigException\"] = \"AuthTokenConfigException\";\n    AuthConfigurationErrorCode[\"AuthUserPoolAndIdentityPoolException\"] = \"AuthUserPoolAndIdentityPoolException\";\n    AuthConfigurationErrorCode[\"AuthUserPoolException\"] = \"AuthUserPoolException\";\n    AuthConfigurationErrorCode[\"InvalidIdentityPoolIdException\"] = \"InvalidIdentityPoolIdException\";\n    AuthConfigurationErrorCode[\"OAuthNotConfigureException\"] = \"OAuthNotConfigureException\";\n})(AuthConfigurationErrorCode || (AuthConfigurationErrorCode = {}));\nconst authConfigurationErrorMap = {\n    [AuthConfigurationErrorCode.AuthTokenConfigException]: {\n        message: 'Auth Token Provider not configured.',\n        recoverySuggestion: 'Make sure to call Amplify.configure in your app.',\n    },\n    [AuthConfigurationErrorCode.AuthUserPoolAndIdentityPoolException]: {\n        message: 'Auth UserPool or IdentityPool not configured.',\n        recoverySuggestion: 'Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId.',\n    },\n    [AuthConfigurationErrorCode.AuthUserPoolException]: {\n        message: 'Auth UserPool not configured.',\n        recoverySuggestion: 'Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId.',\n    },\n    [AuthConfigurationErrorCode.InvalidIdentityPoolIdException]: {\n        message: 'Invalid identity pool id provided.',\n        recoverySuggestion: 'Make sure a valid identityPoolId is given in the config.',\n    },\n    [AuthConfigurationErrorCode.OAuthNotConfigureException]: {\n        message: 'oauth param not configured.',\n        recoverySuggestion: 'Make sure to call Amplify.configure with oauth parameter in your app.',\n    },\n};\nconst assert = createAssertionFunction(authConfigurationErrorMap);\n\nexport { AuthConfigurationErrorCode, assert };\n//# sourceMappingURL=errorHelpers.mjs.map\n","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nvar Framework;\n(function (Framework) {\n    // < 100 - Web frameworks\n    Framework[\"WebUnknown\"] = \"0\";\n    Framework[\"React\"] = \"1\";\n    Framework[\"NextJs\"] = \"2\";\n    Framework[\"Angular\"] = \"3\";\n    Framework[\"VueJs\"] = \"4\";\n    Framework[\"Nuxt\"] = \"5\";\n    Framework[\"Svelte\"] = \"6\";\n    // 100s - Server side frameworks\n    Framework[\"ServerSideUnknown\"] = \"100\";\n    Framework[\"ReactSSR\"] = \"101\";\n    Framework[\"NextJsSSR\"] = \"102\";\n    Framework[\"AngularSSR\"] = \"103\";\n    Framework[\"VueJsSSR\"] = \"104\";\n    Framework[\"NuxtSSR\"] = \"105\";\n    Framework[\"SvelteSSR\"] = \"106\";\n    // 200s - Mobile framework\n    Framework[\"ReactNative\"] = \"201\";\n    Framework[\"Expo\"] = \"202\";\n})(Framework || (Framework = {}));\nvar Category;\n(function (Category) {\n    Category[\"AI\"] = \"ai\";\n    Category[\"API\"] = \"api\";\n    Category[\"Auth\"] = \"auth\";\n    Category[\"Analytics\"] = \"analytics\";\n    Category[\"DataStore\"] = \"datastore\";\n    Category[\"Geo\"] = \"geo\";\n    Category[\"InAppMessaging\"] = \"inappmessaging\";\n    Category[\"Interactions\"] = \"interactions\";\n    Category[\"Predictions\"] = \"predictions\";\n    Category[\"PubSub\"] = \"pubsub\";\n    Category[\"PushNotification\"] = \"pushnotification\";\n    Category[\"Storage\"] = \"storage\";\n})(Category || (Category = {}));\nvar AiAction;\n(function (AiAction) {\n    AiAction[\"CreateConversation\"] = \"1\";\n    AiAction[\"GetConversation\"] = \"2\";\n    AiAction[\"ListConversations\"] = \"3\";\n    AiAction[\"DeleteConversation\"] = \"4\";\n    AiAction[\"SendMessage\"] = \"5\";\n    AiAction[\"ListMessages\"] = \"6\";\n    AiAction[\"OnMessage\"] = \"7\";\n    AiAction[\"Generation\"] = \"8\";\n    AiAction[\"UpdateConversation\"] = \"9\";\n})(AiAction || (AiAction = {}));\nvar AnalyticsAction;\n(function (AnalyticsAction) {\n    AnalyticsAction[\"Record\"] = \"1\";\n    AnalyticsAction[\"IdentifyUser\"] = \"2\";\n})(AnalyticsAction || (AnalyticsAction = {}));\nvar ApiAction;\n(function (ApiAction) {\n    ApiAction[\"GraphQl\"] = \"1\";\n    ApiAction[\"Get\"] = \"2\";\n    ApiAction[\"Post\"] = \"3\";\n    ApiAction[\"Put\"] = \"4\";\n    ApiAction[\"Patch\"] = \"5\";\n    ApiAction[\"Del\"] = \"6\";\n    ApiAction[\"Head\"] = \"7\";\n})(ApiAction || (ApiAction = {}));\nvar AuthAction;\n(function (AuthAction) {\n    AuthAction[\"SignUp\"] = \"1\";\n    AuthAction[\"ConfirmSignUp\"] = \"2\";\n    AuthAction[\"ResendSignUpCode\"] = \"3\";\n    AuthAction[\"SignIn\"] = \"4\";\n    AuthAction[\"FetchMFAPreference\"] = \"6\";\n    AuthAction[\"UpdateMFAPreference\"] = \"7\";\n    AuthAction[\"SetUpTOTP\"] = \"10\";\n    AuthAction[\"VerifyTOTPSetup\"] = \"11\";\n    AuthAction[\"ConfirmSignIn\"] = \"12\";\n    AuthAction[\"DeleteUserAttributes\"] = \"15\";\n    AuthAction[\"DeleteUser\"] = \"16\";\n    AuthAction[\"UpdateUserAttributes\"] = \"17\";\n    AuthAction[\"FetchUserAttributes\"] = \"18\";\n    AuthAction[\"ConfirmUserAttribute\"] = \"22\";\n    AuthAction[\"SignOut\"] = \"26\";\n    AuthAction[\"UpdatePassword\"] = \"27\";\n    AuthAction[\"ResetPassword\"] = \"28\";\n    AuthAction[\"ConfirmResetPassword\"] = \"29\";\n    AuthAction[\"FederatedSignIn\"] = \"30\";\n    AuthAction[\"RememberDevice\"] = \"32\";\n    AuthAction[\"ForgetDevice\"] = \"33\";\n    AuthAction[\"FetchDevices\"] = \"34\";\n    AuthAction[\"SendUserAttributeVerificationCode\"] = \"35\";\n    AuthAction[\"SignInWithRedirect\"] = \"36\";\n    AuthAction[\"StartWebAuthnRegistration\"] = \"37\";\n    AuthAction[\"CompleteWebAuthnRegistration\"] = \"38\";\n    AuthAction[\"ListWebAuthnCredentials\"] = \"39\";\n    AuthAction[\"DeleteWebAuthnCredential\"] = \"40\";\n})(AuthAction || (AuthAction = {}));\nvar DataStoreAction;\n(function (DataStoreAction) {\n    DataStoreAction[\"Subscribe\"] = \"1\";\n    DataStoreAction[\"GraphQl\"] = \"2\";\n})(DataStoreAction || (DataStoreAction = {}));\nvar GeoAction;\n(function (GeoAction) {\n    GeoAction[\"SearchByText\"] = \"0\";\n    GeoAction[\"SearchByCoordinates\"] = \"1\";\n    GeoAction[\"SearchForSuggestions\"] = \"2\";\n    GeoAction[\"SearchByPlaceId\"] = \"3\";\n    GeoAction[\"SaveGeofences\"] = \"4\";\n    GeoAction[\"GetGeofence\"] = \"5\";\n    GeoAction[\"ListGeofences\"] = \"6\";\n    GeoAction[\"DeleteGeofences\"] = \"7\";\n})(GeoAction || (GeoAction = {}));\nvar InAppMessagingAction;\n(function (InAppMessagingAction) {\n    InAppMessagingAction[\"SyncMessages\"] = \"1\";\n    InAppMessagingAction[\"IdentifyUser\"] = \"2\";\n    InAppMessagingAction[\"NotifyMessageInteraction\"] = \"3\";\n})(InAppMessagingAction || (InAppMessagingAction = {}));\nvar InteractionsAction;\n(function (InteractionsAction) {\n    InteractionsAction[\"None\"] = \"0\";\n})(InteractionsAction || (InteractionsAction = {}));\nvar PredictionsAction;\n(function (PredictionsAction) {\n    PredictionsAction[\"Convert\"] = \"1\";\n    PredictionsAction[\"Identify\"] = \"2\";\n    PredictionsAction[\"Interpret\"] = \"3\";\n})(PredictionsAction || (PredictionsAction = {}));\nvar PubSubAction;\n(function (PubSubAction) {\n    PubSubAction[\"Subscribe\"] = \"1\";\n})(PubSubAction || (PubSubAction = {}));\nvar PushNotificationAction;\n(function (PushNotificationAction) {\n    PushNotificationAction[\"InitializePushNotifications\"] = \"1\";\n    PushNotificationAction[\"IdentifyUser\"] = \"2\";\n})(PushNotificationAction || (PushNotificationAction = {}));\nvar StorageAction;\n(function (StorageAction) {\n    StorageAction[\"UploadData\"] = \"1\";\n    StorageAction[\"DownloadData\"] = \"2\";\n    StorageAction[\"List\"] = \"3\";\n    StorageAction[\"Copy\"] = \"4\";\n    StorageAction[\"Remove\"] = \"5\";\n    StorageAction[\"GetProperties\"] = \"6\";\n    StorageAction[\"GetUrl\"] = \"7\";\n    StorageAction[\"GetDataAccess\"] = \"8\";\n    StorageAction[\"ListCallerAccessGrants\"] = \"9\";\n})(StorageAction || (StorageAction = {}));\n\nexport { AiAction, AnalyticsAction, ApiAction, AuthAction, Category, DataStoreAction, Framework, GeoAction, InAppMessagingAction, InteractionsAction, PredictionsAction, PubSubAction, PushNotificationAction, StorageAction };\n//# sourceMappingURL=types.mjs.map\n","// generated by genversion\nconst version = '6.15.0';\n\nexport { version };\n//# sourceMappingURL=version.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst globalExists = () => {\n    return typeof global !== 'undefined';\n};\nconst globalThisExists = () => {\n    return typeof globalThis !== 'undefined';\n};\nconst windowExists = () => {\n    return typeof window !== 'undefined';\n};\nconst documentExists = () => {\n    return typeof document !== 'undefined';\n};\nconst processExists = () => {\n    return typeof process !== 'undefined';\n};\nconst keyPrefixMatch = (object, prefix) => {\n    return !!Object.keys(object).find(key => key.startsWith(prefix));\n};\n\nexport { documentExists, globalExists, globalThisExists, keyPrefixMatch, processExists, windowExists };\n//# sourceMappingURL=helpers.mjs.map\n","import { Framework } from '../types.mjs';\nimport { reactWebDetect, reactSSRDetect } from './React.mjs';\nimport { vueWebDetect, vueSSRDetect } from './Vue.mjs';\nimport { svelteWebDetect, svelteSSRDetect } from './Svelte.mjs';\nimport { nextWebDetect, nextSSRDetect } from './Next.mjs';\nimport { nuxtWebDetect, nuxtSSRDetect } from './Nuxt.mjs';\nimport { angularWebDetect, angularSSRDetect } from './Angular.mjs';\nimport { reactNativeDetect } from './ReactNative.mjs';\nimport { expoDetect } from './Expo.mjs';\nimport { webDetect } from './Web.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// These are in the order of detection where when both are detectable, the early Framework will be reported\nconst detectionMap = [\n    // First, detect mobile\n    { platform: Framework.Expo, detectionMethod: expoDetect },\n    { platform: Framework.ReactNative, detectionMethod: reactNativeDetect },\n    // Next, detect web frameworks\n    { platform: Framework.NextJs, detectionMethod: nextWebDetect },\n    { platform: Framework.Nuxt, detectionMethod: nuxtWebDetect },\n    { platform: Framework.Angular, detectionMethod: angularWebDetect },\n    { platform: Framework.React, detectionMethod: reactWebDetect },\n    { platform: Framework.VueJs, detectionMethod: vueWebDetect },\n    { platform: Framework.Svelte, detectionMethod: svelteWebDetect },\n    { platform: Framework.WebUnknown, detectionMethod: webDetect },\n    // Last, detect ssr frameworks\n    { platform: Framework.NextJsSSR, detectionMethod: nextSSRDetect },\n    { platform: Framework.NuxtSSR, detectionMethod: nuxtSSRDetect },\n    { platform: Framework.ReactSSR, detectionMethod: reactSSRDetect },\n    { platform: Framework.VueJsSSR, detectionMethod: vueSSRDetect },\n    { platform: Framework.AngularSSR, detectionMethod: angularSSRDetect },\n    { platform: Framework.SvelteSSR, detectionMethod: svelteSSRDetect },\n];\nfunction detect() {\n    return (detectionMap.find(detectionEntry => detectionEntry.detectionMethod())\n        ?.platform || Framework.ServerSideUnknown);\n}\n\nexport { detect };\n//# sourceMappingURL=index.mjs.map\n","import { globalExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with expo 48 / react-native 0.71.3\nfunction expoDetect() {\n    return globalExists() && typeof global.expo !== 'undefined';\n}\n\nexport { expoDetect };\n//# sourceMappingURL=Expo.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with react-native 0.17.7\nfunction reactNativeDetect() {\n    return (typeof navigator !== 'undefined' &&\n        typeof navigator.product !== 'undefined' &&\n        navigator.product === 'ReactNative');\n}\n\nexport { reactNativeDetect };\n//# sourceMappingURL=ReactNative.mjs.map\n","import { windowExists, globalExists, keyPrefixMatch } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with next 13.4 / react 18.2\nfunction nextWebDetect() {\n    return (windowExists() &&\n        window.next &&\n        typeof window.next === 'object');\n}\nfunction nextSSRDetect() {\n    return (globalExists() &&\n        (keyPrefixMatch(global, '__next') || keyPrefixMatch(global, '__NEXT')));\n}\n\nexport { nextSSRDetect, nextWebDetect };\n//# sourceMappingURL=Next.mjs.map\n","import { windowExists, globalExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with nuxt 2.15 / vue 2.7\nfunction nuxtWebDetect() {\n    return (windowExists() &&\n        (window.__NUXT__ !== undefined ||\n            window.$nuxt !== undefined));\n}\nfunction nuxtSSRDetect() {\n    return (globalExists() && typeof global.__NUXT_PATHS__ !== 'undefined');\n}\n\nexport { nuxtSSRDetect, nuxtWebDetect };\n//# sourceMappingURL=Nuxt.mjs.map\n","import { documentExists, processExists, windowExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with @angular/core 16.0.0\nfunction angularWebDetect() {\n    const angularVersionSetInDocument = Boolean(documentExists() && document.querySelector('[ng-version]'));\n    const angularContentSetInWindow = Boolean(windowExists() && typeof window.ng !== 'undefined');\n    return angularVersionSetInDocument || angularContentSetInWindow;\n}\nfunction angularSSRDetect() {\n    return ((processExists() &&\n        typeof process.env === 'object' &&\n        process.env.npm_lifecycle_script?.startsWith('ng ')) ||\n        false);\n}\n\nexport { angularSSRDetect, angularWebDetect };\n//# sourceMappingURL=Angular.mjs.map\n","import { documentExists, processExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with react 18.2 - built using Vite\nfunction reactWebDetect() {\n    const elementKeyPrefixedWithReact = (key) => {\n        return key.startsWith('_react') || key.startsWith('__react');\n    };\n    const elementIsReactEnabled = (element) => {\n        return Object.keys(element).find(elementKeyPrefixedWithReact);\n    };\n    const allElementsWithId = () => Array.from(document.querySelectorAll('[id]'));\n    return documentExists() && allElementsWithId().some(elementIsReactEnabled);\n}\nfunction reactSSRDetect() {\n    return (processExists() &&\n        typeof process.env !== 'undefined' &&\n        !!Object.keys(process.env).find(key => key.includes('react')));\n}\n// use the some\n\nexport { reactSSRDetect, reactWebDetect };\n//# sourceMappingURL=React.mjs.map\n","import { windowExists, keyPrefixMatch, globalExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with vue 3.3.2\nfunction vueWebDetect() {\n    return windowExists() && keyPrefixMatch(window, '__VUE');\n}\nfunction vueSSRDetect() {\n    return globalExists() && keyPrefixMatch(global, '__VUE');\n}\n\nexport { vueSSRDetect, vueWebDetect };\n//# sourceMappingURL=Vue.mjs.map\n","import { windowExists, keyPrefixMatch, processExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Tested with svelte 3.59\nfunction svelteWebDetect() {\n    return windowExists() && keyPrefixMatch(window, '__SVELTE');\n}\nfunction svelteSSRDetect() {\n    return (processExists() &&\n        typeof process.env !== 'undefined' &&\n        !!Object.keys(process.env).find(key => key.includes('svelte')));\n}\n\nexport { svelteSSRDetect, svelteWebDetect };\n//# sourceMappingURL=Svelte.mjs.map\n","import { windowExists } from './helpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction webDetect() {\n    return windowExists();\n}\n\nexport { webDetect };\n//# sourceMappingURL=Web.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// Maintains custom user-agent state set by external consumers.\nconst customUserAgentState = {};\n/**\n * Sets custom user agent state which will be appended to applicable requests. Returns a function that can be used to\n * clean up any custom state set with this API.\n *\n * @note\n * This API operates globally. Calling this API multiple times will result in the most recently set values for a\n * particular API being used.\n *\n * @note\n * This utility IS NOT compatible with SSR.\n *\n * @param input - SetCustomUserAgentInput that defines custom state to apply to the specified APIs.\n */\nconst setCustomUserAgent = (input) => {\n    // Save custom user-agent state & increment reference counter\n    // TODO Remove `any` when we upgrade to TypeScript 5.2, see: https://github.com/microsoft/TypeScript/issues/44373\n    customUserAgentState[input.category] = input.apis.reduce((acc, api) => ({\n        ...acc,\n        [api]: {\n            refCount: acc[api]?.refCount ? acc[api].refCount + 1 : 1,\n            additionalDetails: input.additionalDetails,\n        },\n    }), customUserAgentState[input.category] ?? {});\n    // Callback that cleans up state for APIs recorded by this call\n    let cleanUpCallbackCalled = false;\n    const cleanUpCallback = () => {\n        // Only allow the cleanup callback to be called once\n        if (cleanUpCallbackCalled) {\n            return;\n        }\n        cleanUpCallbackCalled = true;\n        input.apis.forEach(api => {\n            const apiRefCount = customUserAgentState[input.category][api].refCount;\n            if (apiRefCount > 1) {\n                customUserAgentState[input.category][api].refCount = apiRefCount - 1;\n            }\n            else {\n                delete customUserAgentState[input.category][api];\n                // Clean up category if no more APIs set\n                if (!Object.keys(customUserAgentState[input.category]).length) {\n                    delete customUserAgentState[input.category];\n                }\n            }\n        });\n    };\n    return cleanUpCallback;\n};\nconst getCustomUserAgent = (category, api) => customUserAgentState[category]?.[api]?.additionalDetails;\n\nexport { getCustomUserAgent, setCustomUserAgent };\n//# sourceMappingURL=customUserAgent.mjs.map\n","import { Framework } from './types.mjs';\nimport { version } from './version.mjs';\nimport { detectFramework, observeFrameworkChanges } from './detectFramework.mjs';\nimport { getCustomUserAgent } from './customUserAgent.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst BASE_USER_AGENT = `aws-amplify`;\n/** Sanitize Amplify version string be removing special character + and character post the special character  */\nconst sanitizeAmplifyVersion = (amplifyVersion) => amplifyVersion.replace(/\\+.*/, '');\nclass PlatformBuilder {\n    constructor() {\n        this.userAgent = `${BASE_USER_AGENT}/${sanitizeAmplifyVersion(version)}`;\n    }\n    get framework() {\n        return detectFramework();\n    }\n    get isReactNative() {\n        return (this.framework === Framework.ReactNative ||\n            this.framework === Framework.Expo);\n    }\n    observeFrameworkChanges(fcn) {\n        observeFrameworkChanges(fcn);\n    }\n}\nconst Platform = new PlatformBuilder();\nconst getAmplifyUserAgentObject = ({ category, action, } = {}) => {\n    const userAgent = [\n        [BASE_USER_AGENT, sanitizeAmplifyVersion(version)],\n    ];\n    if (category) {\n        userAgent.push([category, action]);\n    }\n    userAgent.push(['framework', detectFramework()]);\n    if (category && action) {\n        const customState = getCustomUserAgent(category, action);\n        if (customState) {\n            customState.forEach(state => {\n                userAgent.push(state);\n            });\n        }\n    }\n    return userAgent;\n};\nconst getAmplifyUserAgent = (customUserAgentDetails) => {\n    const userAgent = getAmplifyUserAgentObject(customUserAgentDetails);\n    const userAgentString = userAgent\n        .map(([agentKey, agentValue]) => agentKey && agentValue ? `${agentKey}/${agentValue}` : agentKey)\n        .join(' ');\n    return userAgentString;\n};\n\nexport { Platform, getAmplifyUserAgent, getAmplifyUserAgentObject, sanitizeAmplifyVersion };\n//# sourceMappingURL=index.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst parseMetadata = (response) => {\n    const { headers, statusCode } = response;\n    return {\n        ...(isMetadataBearer(response) ? response.$metadata : {}),\n        httpStatusCode: statusCode,\n        requestId: headers['x-amzn-requestid'] ??\n            headers['x-amzn-request-id'] ??\n            headers['x-amz-request-id'],\n        extendedRequestId: headers['x-amz-id-2'],\n        cfId: headers['x-amz-cf-id'],\n    };\n};\nconst isMetadataBearer = (response) => typeof response?.$metadata === 'object';\n\nexport { parseMetadata };\n//# sourceMappingURL=responseInfo.mjs.map\n","import { parseMetadata } from './responseInfo.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Utility functions for serializing and deserializing of JSON protocol in general(including: REST-JSON, JSON-RPC, etc.)\n */\n/**\n * Error parser for AWS JSON protocol.\n */\nconst parseJsonError = async (response) => {\n    if (!response || response.statusCode < 300) {\n        return;\n    }\n    const body = await parseJsonBody(response);\n    const sanitizeErrorCode = (rawValue) => {\n        const [cleanValue] = rawValue.toString().split(/[,:]+/);\n        if (cleanValue.includes('#')) {\n            return cleanValue.split('#')[1];\n        }\n        return cleanValue;\n    };\n    const code = sanitizeErrorCode(response.headers['x-amzn-errortype'] ??\n        body.code ??\n        body.__type ??\n        'UnknownError');\n    const message = body.message ?? body.Message ?? 'Unknown error';\n    const error = new Error(message);\n    return Object.assign(error, {\n        name: code,\n        $metadata: parseMetadata(response),\n    });\n};\n/**\n * Parse JSON response body to JavaScript object.\n */\nconst parseJsonBody = async (response) => {\n    if (!response.body) {\n        throw new Error('Missing response payload');\n    }\n    const output = await response.body.json();\n    return Object.assign(output, {\n        $metadata: parseMetadata(response),\n    });\n};\n\nexport { parseJsonBody, parseJsonError };\n//# sourceMappingURL=json.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Compose a service API handler that accepts input as defined shape and responds conforming to defined output shape.\n * A service API handler is composed with:\n * * A transfer handler\n * * A serializer function\n * * A deserializer function\n * * A default config object\n *\n * The returned service API handler, when called, will trigger the following workflow:\n * 1. When calling the service API handler function, the default config object is merged into the input config\n * object to assign the default values of some omitted configs, resulting to a resolved config object.\n * 2. The `endpointResolver` function from the default config object will be invoked with the resolved config object and\n * API input object resulting to an endpoint instance.\n * 3. The serializer function is invoked with API input object and the endpoint instance resulting to an HTTP request\n * instance.\n * 4. The HTTP request instance and the resolved config object is passed to the transfer handler function.\n * 5. The transfer handler function resolves to an HTTP response instance(can be either successful or failed status code).\n * 6. The deserializer function is invoked with the HTTP response instance resulting to the API output object, and\n * return to the caller.\n *\n *\n * @param transferHandler Async function for dispatching HTTP requests and returning HTTP response.\n * @param serializer  Async function for converting object in defined input shape into HTTP request targeting a given\n * \tendpoint.\n * @param deserializer Async function for converting HTTP response into output object in defined output shape, or error\n * \tshape.\n * @param defaultConfig  object containing default options to be consumed by transfer handler, serializer and\n *  deserializer.\n * @returns a async service API handler function that accepts a config object and input object in defined shape, returns\n * \tan output object in defined shape. It may also throw error instance in defined shape in deserializer. The config\n *  object type is composed with options type of transferHandler, endpointResolver function as well as endpointResolver\n *  function's input options type, region string. The config object property will be marked as optional if it's also\n * \tdefined in defaultConfig.\n *\n * @internal\n */\nconst composeServiceApi = (transferHandler, serializer, deserializer, defaultConfig) => {\n    return async (config, input) => {\n        const resolvedConfig = {\n            ...defaultConfig,\n            ...config,\n        };\n        // We need to allow different endpoints based on both given config(other than region) and input.\n        // However for most of non-S3 services, region is the only input for endpoint resolver.\n        const endpoint = await resolvedConfig.endpointResolver(resolvedConfig, input);\n        // Unlike AWS SDK clients, a serializer should NOT populate the `host` or `content-length` headers.\n        // Both of these headers are prohibited per Spec(https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_header_name).\n        // They will be populated automatically by browser, or node-fetch polyfill.\n        const request = await serializer(input, endpoint);\n        const response = await transferHandler(request, {\n            ...resolvedConfig,\n        });\n        return deserializer(response);\n    };\n};\n\nexport { composeServiceApi };\n//# sourceMappingURL=composeServiceApi.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst DEFAULT_RETRY_ATTEMPTS = 3;\nconst AMZ_SDK_INVOCATION_ID_HEADER = 'amz-sdk-invocation-id';\nconst AMZ_SDK_REQUEST_HEADER = 'amz-sdk-request';\nconst DEFAULT_MAX_DELAY_MS = 5 * 60 * 1000;\n\nexport { AMZ_SDK_INVOCATION_ID_HEADER, AMZ_SDK_REQUEST_HEADER, DEFAULT_MAX_DELAY_MS, DEFAULT_RETRY_ATTEMPTS };\n//# sourceMappingURL=constants.mjs.map\n","import '../../../types/errors.mjs';\nimport '../../../errors/errorHelpers.mjs';\nimport '../../../utils/getClientInfo/getClientInfo.mjs';\nimport { jitteredBackoff as jitteredBackoff$1 } from '../../../utils/retry/jitteredBackoff.mjs';\nimport '../../../utils/retry/retry.mjs';\nimport { DEFAULT_MAX_DELAY_MS } from './constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// TODO: [v6] The separate retry utility is used by Data packages now and will replaced by retry middleware.\nconst jitteredBackoff = attempt => {\n    const delayFunction = jitteredBackoff$1(DEFAULT_MAX_DELAY_MS);\n    const delay = delayFunction(attempt);\n    // The delayFunction returns false when the delay is greater than the max delay(5 mins).\n    // In this case, the retry middleware will delay 5 mins instead, as a ceiling of the delay.\n    return delay === false ? DEFAULT_MAX_DELAY_MS : delay;\n};\n\nexport { jitteredBackoff };\n//# sourceMappingURL=jitteredBackoff.mjs.map\n","import { MAX_DELAY_MS } from './constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @private\n * Internal use of Amplify only\n */\nfunction jitteredBackoff(maxDelayMs = MAX_DELAY_MS) {\n    const BASE_TIME_MS = 100;\n    const JITTER_FACTOR = 100;\n    return attempt => {\n        const delay = 2 ** attempt * BASE_TIME_MS + JITTER_FACTOR * Math.random();\n        return delay > maxDelayMs ? false : delay;\n    };\n}\n\nexport { jitteredBackoff };\n//# sourceMappingURL=jitteredBackoff.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst MAX_DELAY_MS = 5 * 60 * 1000;\n\nexport { MAX_DELAY_MS };\n//# sourceMappingURL=constants.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// via https://github.com/aws/aws-sdk-js-v3/blob/ab0e7be36e7e7f8a0c04834357aaad643c7912c3/packages/service-error-classification/src/constants.ts#L8\nconst CLOCK_SKEW_ERROR_CODES = [\n    'AuthFailure',\n    'InvalidSignatureException',\n    'RequestExpired',\n    'RequestInTheFuture',\n    'RequestTimeTooSkewed',\n    'SignatureDoesNotMatch',\n    'BadRequestException', // API Gateway\n];\n/**\n * Given an error code, returns true if it is related to a clock skew error.\n *\n * @param errorCode String representation of some error.\n * @returns True if given error is present in `CLOCK_SKEW_ERROR_CODES`, false otherwise.\n *\n * @internal\n */\nconst isClockSkewError = (errorCode) => !!errorCode && CLOCK_SKEW_ERROR_CODES.includes(errorCode);\n\nexport { isClockSkewError };\n//# sourceMappingURL=isClockSkewError.mjs.map\n","import { AmplifyErrorCode } from '../../../types/errors.mjs';\nimport { isClockSkewError } from './isClockSkewError.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Get retry decider function\n * @param errorParser Function to load JavaScript error from HTTP response\n */\nconst getRetryDecider = (errorParser) => async (response, error) => {\n    const parsedError = error ??\n        (await errorParser(response)) ??\n        undefined;\n    const errorCode = parsedError?.code || parsedError?.name;\n    const statusCode = response?.statusCode;\n    const isRetryable = isConnectionError(error) ||\n        isThrottlingError(statusCode, errorCode) ||\n        isClockSkewError(errorCode) ||\n        isServerSideError(statusCode, errorCode);\n    return {\n        retryable: isRetryable,\n    };\n};\n// reference: https://github.com/aws/aws-sdk-js-v3/blob/ab0e7be36e7e7f8a0c04834357aaad643c7912c3/packages/service-error-classification/src/constants.ts#L22-L37\nconst THROTTLING_ERROR_CODES = [\n    'BandwidthLimitExceeded',\n    'EC2ThrottledException',\n    'LimitExceededException',\n    'PriorRequestNotComplete',\n    'ProvisionedThroughputExceededException',\n    'RequestLimitExceeded',\n    'RequestThrottled',\n    'RequestThrottledException',\n    'SlowDown',\n    'ThrottledException',\n    'Throttling',\n    'ThrottlingException',\n    'TooManyRequestsException',\n];\nconst TIMEOUT_ERROR_CODES = [\n    'TimeoutError',\n    'RequestTimeout',\n    'RequestTimeoutException',\n];\nconst isThrottlingError = (statusCode, errorCode) => statusCode === 429 ||\n    (!!errorCode && THROTTLING_ERROR_CODES.includes(errorCode));\nconst isConnectionError = (error) => [\n    AmplifyErrorCode.NetworkError,\n    // TODO(vNext): unify the error code `ERR_NETWORK` used by the Storage XHR handler\n    'ERR_NETWORK',\n].includes(error?.name);\nconst isServerSideError = (statusCode, errorCode) => (!!statusCode && [500, 502, 503, 504].includes(statusCode)) ||\n    (!!errorCode && TIMEOUT_ERROR_CODES.includes(errorCode));\n\nexport { getRetryDecider };\n//# sourceMappingURL=defaultRetryDecider.mjs.map\n","import '../../../../types/errors.mjs';\nimport '../../../../errors/errorHelpers.mjs';\nimport { jitteredBackoff } from '../../../../clients/middleware/retry/jitteredBackoff.mjs';\nimport { getRetryDecider } from '../../../../clients/middleware/retry/defaultRetryDecider.mjs';\nimport '../../../../utils/getClientInfo/getClientInfo.mjs';\nimport '../../../../utils/retry/retry.mjs';\nimport '../../../../parseAWSExports.mjs';\nimport 'uuid';\nimport '../../../../singleton/Auth/utils/errorHelpers.mjs';\nimport '@aws-crypto/sha256-js';\nimport '@smithy/util-hex-encoding';\nimport '../../../../Platform/index.mjs';\nimport '../../../../Platform/types.mjs';\nimport '../../../../BackgroundProcessManager/types.mjs';\nimport '../../../../Reachability/Reachability.mjs';\nimport '../../../../Hub/index.mjs';\nimport '../../../../utils/sessionListener/index.mjs';\nimport { parseJsonError } from '../../../../clients/serde/json.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * The service name used to sign requests if the API requires authentication.\n */\nconst COGNITO_IDENTITY_SERVICE_NAME = 'cognito-identity';\nconst DEFAULT_SERVICE_CLIENT_API_CONFIG = {\n    service: COGNITO_IDENTITY_SERVICE_NAME,\n    retryDecider: getRetryDecider(parseJsonError),\n    computeDelay: jitteredBackoff,\n    cache: 'no-store',\n};\n\nexport { COGNITO_IDENTITY_SERVICE_NAME, DEFAULT_SERVICE_CLIENT_API_CONFIG };\n//# sourceMappingURL=constants.mjs.map\n","import { DEFAULT_RETRY_ATTEMPTS } from './constants.mjs';\n\n/**\n * Middleware that executes the retry logic.\n */\nconst retryMiddlewareFactory = ({ maxAttempts = DEFAULT_RETRY_ATTEMPTS, retryDecider, computeDelay, abortSignal, }) => {\n    if (maxAttempts < 1) {\n        throw new Error('maxAttempts must be greater than 0');\n    }\n    return (next, context) => async function retryMiddleware(request) {\n        let error;\n        let attemptsCount = context.attemptsCount ?? 0;\n        let response;\n        // When retry is not needed or max attempts is reached, either error or response will be set. This function handles either cases.\n        const handleTerminalErrorOrResponse = () => {\n            if (response) {\n                addOrIncrementMetadataAttempts(response, attemptsCount);\n                return response;\n            }\n            else {\n                addOrIncrementMetadataAttempts(error, attemptsCount);\n                throw error;\n            }\n        };\n        while (!abortSignal?.aborted && attemptsCount < maxAttempts) {\n            try {\n                response = await next(request);\n                error = undefined;\n            }\n            catch (e) {\n                error = e;\n                response = undefined;\n            }\n            // context.attemptsCount may be updated after calling next handler which may retry the request by itself.\n            attemptsCount =\n                (context.attemptsCount ?? 0) > attemptsCount\n                    ? (context.attemptsCount ?? 0)\n                    : attemptsCount + 1;\n            context.attemptsCount = attemptsCount;\n            const { isCredentialsExpiredError, retryable } = await retryDecider(response, error, context);\n            if (retryable) {\n                // Setting isCredentialsInvalid flag to notify signing middleware to forceRefresh credentials provider.\n                context.isCredentialsExpired = !!isCredentialsExpiredError;\n                if (!abortSignal?.aborted && attemptsCount < maxAttempts) {\n                    // prevent sleep for last attempt or cancelled request;\n                    const delay = computeDelay(attemptsCount);\n                    await cancellableSleep(delay, abortSignal);\n                }\n                continue;\n            }\n            else {\n                return handleTerminalErrorOrResponse();\n            }\n        }\n        if (abortSignal?.aborted) {\n            throw new Error('Request aborted.');\n        }\n        else {\n            return handleTerminalErrorOrResponse();\n        }\n    };\n};\nconst cancellableSleep = (timeoutMs, abortSignal) => {\n    if (abortSignal?.aborted) {\n        return Promise.resolve();\n    }\n    let timeoutId;\n    let sleepPromiseResolveFn;\n    const sleepPromise = new Promise(resolve => {\n        sleepPromiseResolveFn = resolve;\n        timeoutId = setTimeout(resolve, timeoutMs);\n    });\n    abortSignal?.addEventListener('abort', function cancelSleep(_) {\n        clearTimeout(timeoutId);\n        abortSignal?.removeEventListener('abort', cancelSleep);\n        sleepPromiseResolveFn();\n    });\n    return sleepPromise;\n};\nconst addOrIncrementMetadataAttempts = (nextHandlerOutput, attempts) => {\n    if (Object.prototype.toString.call(nextHandlerOutput) !== '[object Object]') {\n        return;\n    }\n    nextHandlerOutput.$metadata = {\n        ...(nextHandlerOutput.$metadata ?? {}),\n        attempts,\n    };\n};\n\nexport { retryMiddlewareFactory };\n//# sourceMappingURL=retryMiddleware.mjs.map\n","import { v4 } from 'uuid';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst amplifyUuid = v4;\n\nexport { amplifyUuid };\n//# sourceMappingURL=index.mjs.map\n","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Compose a transfer handler with a core transfer handler and a list of middleware.\n * @param coreHandler Core transfer handler\n * @param middleware\tList of middleware\n * @returns A transfer handler whose option type is the union of the core\n * \ttransfer handler's option type and the middleware's option type.\n * @internal\n */\nconst composeTransferHandler = (coreHandler, middleware) => (request, options) => {\n    const context = {};\n    let composedHandler = (composeHandlerRequest) => coreHandler(composeHandlerRequest, options);\n    for (let i = middleware.length - 1; i >= 0; i--) {\n        const m = middleware[i];\n        const resolvedMiddleware = m(options);\n        composedHandler = resolvedMiddleware(composedHandler, context);\n    }\n    return composedHandler(request);\n};\n\nexport { composeTransferHandler };\n//# sourceMappingURL=composeTransferHandler.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Cache the payload of a response body. It allows multiple calls to the body,\n * for example, when reading the body in both retry decider and error deserializer.\n * Caching body is allowed here because we call the body accessor(blob(), json(),\n * etc.) when body is small or streaming implementation is not available(RN).\n *\n * @internal\n */\nconst withMemoization = (payloadAccessor) => {\n    let cached;\n    return () => {\n        if (!cached) {\n            // Explicitly not awaiting. Intermediate await would add overhead and\n            // introduce a possible race in the event that this wrapper is called\n            // again before the first `payloadAccessor` call resolves.\n            cached = payloadAccessor();\n        }\n        return cached;\n    };\n};\n\nexport { withMemoization };\n//# sourceMappingURL=memoization.mjs.map\n","import { AmplifyError } from '../../errors/AmplifyError.mjs';\nimport { AmplifyErrorCode } from '../../types/errors.mjs';\nimport '../../errors/errorHelpers.mjs';\nimport { withMemoization } from '../utils/memoization.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst shouldSendBody = (method) => !['HEAD', 'GET', 'DELETE'].includes(method.toUpperCase());\n// TODO[AllanZhengYP]: we need to provide isCanceledError utility\nconst fetchTransferHandler = async ({ url, method, headers, body }, { abortSignal, cache, withCrossDomainCredentials }) => {\n    let resp;\n    try {\n        resp = await fetch(url, {\n            method,\n            headers,\n            body: shouldSendBody(method) ? body : undefined,\n            signal: abortSignal,\n            cache,\n            credentials: withCrossDomainCredentials ? 'include' : 'same-origin',\n        });\n    }\n    catch (e) {\n        if (e instanceof TypeError) {\n            throw new AmplifyError({\n                name: AmplifyErrorCode.NetworkError,\n                message: 'A network error has occurred.',\n                underlyingError: e,\n            });\n        }\n        throw e;\n    }\n    const responseHeaders = {};\n    resp.headers?.forEach((value, key) => {\n        responseHeaders[key.toLowerCase()] = value;\n    });\n    const httpResponse = {\n        statusCode: resp.status,\n        headers: responseHeaders,\n        body: null,\n    };\n    // resp.body is a ReadableStream according to Fetch API spec, but React Native\n    // does not implement it.\n    const bodyWithMixin = Object.assign(resp.body ?? {}, {\n        text: withMemoization(() => resp.text()),\n        blob: withMemoization(() => resp.blob()),\n        json: withMemoization(() => resp.json()),\n    });\n    return {\n        ...httpResponse,\n        body: bodyWithMixin,\n    };\n};\n\nexport { fetchTransferHandler };\n//# sourceMappingURL=fetch.mjs.map\n","import { retryMiddlewareFactory } from '../../middleware/retry/retryMiddleware.mjs';\nimport '../../../types/errors.mjs';\nimport '../../../errors/errorHelpers.mjs';\nimport '../../../utils/getClientInfo/getClientInfo.mjs';\nimport '../../../utils/retry/retry.mjs';\nimport { amzSdkInvocationIdHeaderMiddlewareFactory } from '../../middleware/retry/amzSdkInvocationIdHeaderMiddleware.mjs';\nimport { amzSdkRequestHeaderMiddlewareFactory } from '../../middleware/retry/amzSdkRequestHeaderMiddleware.mjs';\nimport { userAgentMiddlewareFactory } from '../../middleware/userAgent/middleware.mjs';\nimport { composeTransferHandler } from '../../internal/composeTransferHandler.mjs';\nimport { fetchTransferHandler } from '../fetch.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst unauthenticatedHandler = composeTransferHandler(fetchTransferHandler, [\n    userAgentMiddlewareFactory,\n    amzSdkInvocationIdHeaderMiddlewareFactory,\n    retryMiddlewareFactory,\n    amzSdkRequestHeaderMiddlewareFactory,\n]);\n\nexport { unauthenticatedHandler };\n//# sourceMappingURL=unauthenticated.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Middleware injects user agent string to specified header(default to 'x-amz-user-agent'),\n * if the header is not set already.\n *\n * TODO: incorporate new user agent design\n */\nconst userAgentMiddlewareFactory = ({ userAgentHeader = 'x-amz-user-agent', userAgentValue = '', }) => next => {\n    return async function userAgentMiddleware(request) {\n        if (userAgentValue.trim().length === 0) {\n            const result = await next(request);\n            return result;\n        }\n        else {\n            const headerName = userAgentHeader.toLowerCase();\n            request.headers[headerName] = request.headers[headerName]\n                ? `${request.headers[headerName]} ${userAgentValue}`\n                : userAgentValue;\n            const response = await next(request);\n            return response;\n        }\n    };\n};\n\nexport { userAgentMiddlewareFactory };\n//# sourceMappingURL=middleware.mjs.map\n","import '../../../types/errors.mjs';\nimport '../../../errors/errorHelpers.mjs';\nimport '../../../utils/getClientInfo/getClientInfo.mjs';\nimport '../../../utils/retry/retry.mjs';\nimport '../../../parseAWSExports.mjs';\nimport { amplifyUuid } from '../../../utils/amplifyUuid/index.mjs';\nimport '../../../singleton/Auth/utils/errorHelpers.mjs';\nimport '@aws-crypto/sha256-js';\nimport '@smithy/util-hex-encoding';\nimport '../../../Platform/index.mjs';\nimport '../../../Platform/types.mjs';\nimport '../../../BackgroundProcessManager/types.mjs';\nimport '../../../Reachability/Reachability.mjs';\nimport '../../../Hub/index.mjs';\nimport '../../../utils/sessionListener/index.mjs';\nimport { AMZ_SDK_INVOCATION_ID_HEADER } from './constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Middleware injects a UUID string to `amz-sdk-invocation-id` header.\n * if the header is not set already. This header is helpful to provide\n * observability to group the requests caused by automatic retry.\n *\n * This middleware is standalone because of extra UUID dependency, we will\n * NOT use this middleware for API categories.\n *\n * Ref: https://sdk.amazonaws.com/kotlin/api/smithy-kotlin/api/1.0.9/http-client/aws.smithy.kotlin.runtime.http.operation/-http-operation-context/-sdk-invocation-id.html\n */\nconst amzSdkInvocationIdHeaderMiddlewareFactory = () => next => {\n    return async function amzSdkInvocationIdHeaderMiddleware(request) {\n        if (!request.headers[AMZ_SDK_INVOCATION_ID_HEADER]) {\n            request.headers[AMZ_SDK_INVOCATION_ID_HEADER] = amplifyUuid();\n        }\n        return next(request);\n    };\n};\n\nexport { amzSdkInvocationIdHeaderMiddlewareFactory };\n//# sourceMappingURL=amzSdkInvocationIdHeaderMiddleware.mjs.map\n","import { DEFAULT_RETRY_ATTEMPTS, AMZ_SDK_REQUEST_HEADER } from './constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Middleware injects `amz-sdk-request` header to indicate the retry state at the time an HTTP request is made.\n * This middleware should co-exist with retryMiddleware as it relies on the retryAttempts value in middleware context\n * set by the retry middleware.\n *\n * Example header: `amz-sdk-request: attempt=1; max=3`.\n *\n * This middleware is standalone because of extra headers may conflict with custom endpoint settings(e.g. CORS), we will\n * NOT use this middleware for API categories.\n */\nconst amzSdkRequestHeaderMiddlewareFactory = ({ maxAttempts = DEFAULT_RETRY_ATTEMPTS }) => (next, context) => {\n    return async function amzSdkRequestHeaderMiddleware(request) {\n        const attemptsCount = context.attemptsCount ?? 0;\n        request.headers[AMZ_SDK_REQUEST_HEADER] =\n            `attempt=${attemptsCount + 1}; max=${maxAttempts}`;\n        return next(request);\n    };\n};\n\nexport { amzSdkRequestHeaderMiddlewareFactory };\n//# sourceMappingURL=amzSdkRequestHeaderMiddleware.mjs.map\n","import '../../../../../types/errors.mjs';\nimport '../../../../../errors/errorHelpers.mjs';\nimport { unauthenticatedHandler } from '../../../../../clients/handlers/aws/unauthenticated.mjs';\nimport '../../../../../utils/getClientInfo/getClientInfo.mjs';\nimport '../../../../../utils/retry/retry.mjs';\nimport '../../../../../parseAWSExports.mjs';\nimport 'uuid';\nimport '../../../../../singleton/Auth/utils/errorHelpers.mjs';\nimport '@aws-crypto/sha256-js';\nimport '@smithy/util-hex-encoding';\nimport '../../../../../Platform/index.mjs';\nimport '../../../../../Platform/types.mjs';\nimport '../../../../../BackgroundProcessManager/types.mjs';\nimport '../../../../../Reachability/Reachability.mjs';\nimport '../../../../../Hub/index.mjs';\nimport '../../../../../utils/sessionListener/index.mjs';\nimport { composeTransferHandler } from '../../../../../clients/internal/composeTransferHandler.mjs';\nimport { createDisableCacheMiddleware } from '../../../middleware/createDisableCacheMiddleware.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * A Cognito Identity-specific transfer handler that does NOT sign requests, and\n * disables caching.\n *\n * @internal\n */\nconst cognitoIdentityTransferHandler = composeTransferHandler(unauthenticatedHandler, [createDisableCacheMiddleware]);\n\nexport { cognitoIdentityTransferHandler };\n//# sourceMappingURL=cognitoIdentityTransferHandler.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * A Cognito Identity-specific middleware that disables caching for all requests.\n */\nconst createDisableCacheMiddleware = () => next => async function disableCacheMiddleware(request) {\n    request.headers['cache-control'] = 'no-store';\n    return next(request);\n};\n\nexport { createDisableCacheMiddleware };\n//# sourceMappingURL=createDisableCacheMiddleware.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createClientSerializer = (operation) => (input, endpoint) => {\n    const headers = getSharedHeaders(operation);\n    const body = JSON.stringify(input);\n    return buildHttpRpcRequest(endpoint, headers, body);\n};\nconst getSharedHeaders = (operation) => ({\n    'content-type': 'application/x-amz-json-1.1',\n    'x-amz-target': `AWSCognitoIdentityService.${operation}`,\n});\nconst buildHttpRpcRequest = ({ url }, headers, body) => ({\n    headers,\n    url,\n    body,\n    method: 'POST',\n});\n\nexport { buildHttpRpcRequest, createClientSerializer };\n//# sourceMappingURL=createClientSerializer.mjs.map\n","import '../../../../types/errors.mjs';\nimport '../../../../errors/errorHelpers.mjs';\nimport '../../../../utils/getClientInfo/getClientInfo.mjs';\nimport '../../../../utils/retry/retry.mjs';\nimport '../../../../parseAWSExports.mjs';\nimport 'uuid';\nimport '../../../../singleton/Auth/utils/errorHelpers.mjs';\nimport '@aws-crypto/sha256-js';\nimport '@smithy/util-hex-encoding';\nimport { getAmplifyUserAgent } from '../../../../Platform/index.mjs';\nimport '../../../../Platform/types.mjs';\nimport '../../../../BackgroundProcessManager/types.mjs';\nimport '../../../../Reachability/Reachability.mjs';\nimport '../../../../Hub/index.mjs';\nimport '../../../../utils/sessionListener/index.mjs';\nimport { parseMetadata } from '../../../../clients/serde/responseInfo.mjs';\nimport { parseJsonError, parseJsonBody } from '../../../../clients/serde/json.mjs';\nimport { composeServiceApi } from '../../../../clients/internal/composeServiceApi.mjs';\nimport { DEFAULT_SERVICE_CLIENT_API_CONFIG } from './constants.mjs';\nimport { cognitoIdentityTransferHandler } from './handler/cognitoIdentityTransferHandler.mjs';\nimport { createClientSerializer } from './serde/createClientSerializer.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createGetCredentialsForIdentityClient = (config) => composeServiceApi(cognitoIdentityTransferHandler, createClientSerializer('GetCredentialsForIdentity'), getCredentialsForIdentityDeserializer, {\n    ...DEFAULT_SERVICE_CLIENT_API_CONFIG,\n    ...config,\n    userAgentValue: getAmplifyUserAgent(),\n});\nconst getCredentialsForIdentityDeserializer = async (response) => {\n    if (response.statusCode >= 300) {\n        const error = await parseJsonError(response);\n        throw error;\n    }\n    const body = await parseJsonBody(response);\n    return {\n        IdentityId: body.IdentityId,\n        Credentials: deserializeCredentials(body.Credentials),\n        $metadata: parseMetadata(response),\n    };\n};\nconst deserializeCredentials = ({ Expiration, ...rest } = {}) => ({\n    ...rest,\n    Expiration: Expiration && new Date(Expiration * 1000),\n});\n\nexport { createGetCredentialsForIdentityClient };\n//# sourceMappingURL=createGetCredentialsForIdentityClient.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Default partition for AWS services. This is used when the region is not provided or the region is not recognized.\n *\n * @internal\n */\nconst defaultPartition = {\n    id: 'aws',\n    outputs: {\n        dnsSuffix: 'amazonaws.com',\n    },\n    regionRegex: '^(us|eu|ap|sa|ca|me|af)\\\\-\\\\w+\\\\-\\\\d+$',\n    regions: ['aws-global'],\n};\n/**\n * This data is adapted from the partition file from AWS SDK shared utilities but remove some contents for bundle size\n * concern. Information removed are `dualStackDnsSuffix`, `supportDualStack`, `supportFIPS`, restricted partitions, and\n * list of regions for each partition other than global regions.\n *\n * * Ref: https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints\n * * Ref: https://github.com/aws/aws-sdk-js-v3/blob/0201baef03c2379f1f6f7150b9d401d4b230d488/packages/util-endpoints/src/lib/aws/partitions.json#L1\n *\n * @internal\n */\nconst partitionsInfo = {\n    partitions: [\n        defaultPartition,\n        {\n            id: 'aws-cn',\n            outputs: {\n                dnsSuffix: 'amazonaws.com.cn',\n            },\n            regionRegex: '^cn\\\\-\\\\w+\\\\-\\\\d+$',\n            regions: ['aws-cn-global'],\n        },\n    ],\n};\n\nexport { defaultPartition, partitionsInfo };\n//# sourceMappingURL=partitions.mjs.map\n","import { partitionsInfo, defaultPartition } from './partitions.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Get the AWS Services endpoint URL's DNS suffix for a given region. A typical AWS regional service endpoint URL will\n * follow this pattern: {endpointPrefix}.{region}.{dnsSuffix}. For example, the endpoint URL for Cognito Identity in\n * us-east-1 will be cognito-identity.us-east-1.amazonaws.com. Here the DnsSuffix is `amazonaws.com`.\n *\n * @param region\n * @returns The DNS suffix\n *\n * @internal\n */\nconst getDnsSuffix = (region) => {\n    const { partitions } = partitionsInfo;\n    for (const { regions, outputs, regionRegex } of partitions) {\n        const regex = new RegExp(regionRegex);\n        if (regions.includes(region) || regex.test(region)) {\n            return outputs.dnsSuffix;\n        }\n    }\n    return defaultPartition.outputs.dnsSuffix;\n};\n\nexport { getDnsSuffix };\n//# sourceMappingURL=getDnsSuffix.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst AmplifyUrl = URL;\nconst AmplifyUrlSearchParams = URLSearchParams;\n\nexport { AmplifyUrl, AmplifyUrlSearchParams };\n//# sourceMappingURL=index.mjs.map\n","import { AmplifyErrorCode } from '../types/errors.mjs';\nimport { AmplifyError } from './AmplifyError.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nclass PlatformNotSupportedError extends AmplifyError {\n    constructor() {\n        super({\n            name: AmplifyErrorCode.PlatformNotSupported,\n            message: 'Function not supported on current platform',\n        });\n    }\n}\n\nexport { PlatformNotSupportedError };\n//# sourceMappingURL=PlatformNotSupportedError.mjs.map\n","import { PlatformNotSupportedError } from '../errors/PlatformNotSupportedError.mjs';\nimport '../errors/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nclass KeyValueStorage {\n    constructor(storage) {\n        this.storage = storage;\n    }\n    /**\n     * This is used to set a specific item in storage\n     * @param {string} key - the key for the item\n     * @param {object} value - the value\n     * @returns {string} value that was set\n     */\n    async setItem(key, value) {\n        if (!this.storage)\n            throw new PlatformNotSupportedError();\n        this.storage.setItem(key, value);\n    }\n    /**\n     * This is used to get a specific key from storage\n     * @param {string} key - the key for the item\n     * This is used to clear the storage\n     * @returns {string} the data item\n     */\n    async getItem(key) {\n        if (!this.storage)\n            throw new PlatformNotSupportedError();\n        return this.storage.getItem(key);\n    }\n    /**\n     * This is used to remove an item from storage\n     * @param {string} key - the key being set\n     * @returns {string} value - value that was deleted\n     */\n    async removeItem(key) {\n        if (!this.storage)\n            throw new PlatformNotSupportedError();\n        this.storage.removeItem(key);\n    }\n    /**\n     * This is used to clear the storage\n     * @returns {string} nothing\n     */\n    async clear() {\n        if (!this.storage)\n            throw new PlatformNotSupportedError();\n        this.storage.clear();\n    }\n}\n\nexport { KeyValueStorage };\n//# sourceMappingURL=KeyValueStorage.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nclass InMemoryStorage {\n    constructor() {\n        this.storage = new Map();\n    }\n    get length() {\n        return this.storage.size;\n    }\n    key(index) {\n        if (index > this.length - 1) {\n            return null;\n        }\n        return Array.from(this.storage.keys())[index];\n    }\n    setItem(key, value) {\n        this.storage.set(key, value);\n    }\n    getItem(key) {\n        return this.storage.get(key) ?? null;\n    }\n    removeItem(key) {\n        this.storage.delete(key);\n    }\n    clear() {\n        this.storage.clear();\n    }\n}\n\nexport { InMemoryStorage };\n//# sourceMappingURL=InMemoryStorage.mjs.map\n","import { ConsoleLogger } from '../Logger/ConsoleLogger.mjs';\nimport { InMemoryStorage } from './InMemoryStorage.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n * @returns Either a reference to window.localStorage or an in-memory storage as fallback\n */\nconst logger = new ConsoleLogger('CoreStorageUtils');\nconst getLocalStorageWithFallback = () => {\n    try {\n        // Attempt to use localStorage directly\n        if (typeof window !== 'undefined' && window.localStorage) {\n            return window.localStorage;\n        }\n    }\n    catch (e) {\n        // Handle any errors related to localStorage access\n        logger.info('localStorage not found. InMemoryStorage is used as a fallback.');\n    }\n    // Return in-memory storage as a fallback if localStorage is not accessible\n    return new InMemoryStorage();\n};\n/**\n * @internal\n * @returns Either a reference to window.sessionStorage or an in-memory storage as fallback\n */\nconst getSessionStorageWithFallback = () => {\n    try {\n        // Attempt to use sessionStorage directly\n        if (typeof window !== 'undefined' && window.sessionStorage) {\n            // Verify we can actually use it by testing access\n            window.sessionStorage.getItem('test');\n            return window.sessionStorage;\n        }\n        throw new Error('sessionStorage is not defined');\n    }\n    catch (e) {\n        // Handle any errors related to sessionStorage access\n        logger.info('sessionStorage not found. InMemoryStorage is used as a fallback.');\n        return new InMemoryStorage();\n    }\n};\n\nexport { getLocalStorageWithFallback, getSessionStorageWithFallback };\n//# sourceMappingURL=utils.mjs.map\n","import { PlatformNotSupportedError } from '../errors/PlatformNotSupportedError.mjs';\nimport '../errors/errorHelpers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nclass SyncKeyValueStorage {\n    constructor(storage) {\n        this._storage = storage;\n    }\n    get storage() {\n        if (!this._storage)\n            throw new PlatformNotSupportedError();\n        return this._storage;\n    }\n    /**\n     * This is used to set a specific item in storage\n     * @param {string} key - the key for the item\n     * @param {object} value - the value\n     * @returns {string} value that was set\n     */\n    setItem(key, value) {\n        this.storage.setItem(key, value);\n    }\n    /**\n     * This is used to get a specific key from storage\n     * @param {string} key - the key for the item\n     * This is used to clear the storage\n     * @returns {string} the data item\n     */\n    getItem(key) {\n        return this.storage.getItem(key);\n    }\n    /**\n     * This is used to remove an item from storage\n     * @param {string} key - the key being set\n     * @returns {string} value - value that was deleted\n     */\n    removeItem(key) {\n        this.storage.removeItem(key);\n    }\n    /**\n     * This is used to clear the storage\n     * @returns {string} nothing\n     */\n    clear() {\n        this.storage.clear();\n    }\n}\n\nexport { SyncKeyValueStorage };\n//# sourceMappingURL=SyncKeyValueStorage.mjs.map\n","import { DefaultStorage } from './DefaultStorage.mjs';\nimport { InMemoryStorage } from './InMemoryStorage.mjs';\nimport { KeyValueStorage } from './KeyValueStorage.mjs';\nimport { SessionStorage } from './SessionStorage.mjs';\nimport { SyncSessionStorage } from './SyncSessionStorage.mjs';\nexport { CookieStorage } from './CookieStorage.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst defaultStorage = new DefaultStorage();\nconst sessionStorage = new SessionStorage();\nconst syncSessionStorage = new SyncSessionStorage();\nconst sharedInMemoryStorage = new KeyValueStorage(new InMemoryStorage());\n\nexport { defaultStorage, sessionStorage, sharedInMemoryStorage, syncSessionStorage };\n//# sourceMappingURL=index.mjs.map\n","import { KeyValueStorage } from './KeyValueStorage.mjs';\nimport { getLocalStorageWithFallback } from './utils.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nclass DefaultStorage extends KeyValueStorage {\n    constructor() {\n        super(getLocalStorageWithFallback());\n    }\n}\n\nexport { DefaultStorage };\n//# sourceMappingURL=DefaultStorage.mjs.map\n","import { KeyValueStorage } from './KeyValueStorage.mjs';\nimport { getSessionStorageWithFallback } from './utils.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nclass SessionStorage extends KeyValueStorage {\n    constructor() {\n        super(getSessionStorageWithFallback());\n    }\n}\n\nexport { SessionStorage };\n//# sourceMappingURL=SessionStorage.mjs.map\n","import { SyncKeyValueStorage } from './SyncKeyValueStorage.mjs';\nimport { getSessionStorageWithFallback } from './utils.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nclass SyncSessionStorage extends SyncKeyValueStorage {\n    constructor() {\n        super(getSessionStorageWithFallback());\n    }\n}\n\nexport { SyncSessionStorage };\n//# sourceMappingURL=SyncSessionStorage.mjs.map\n","import { AmplifyError } from '@aws-amplify/core/internals/utils';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nclass AuthError extends AmplifyError {\n    constructor(params) {\n        super(params);\n        // Hack for making the custom error class work when transpiled to es5\n        // TODO: Delete the following 2 lines after we change the build target to >= es2015\n        this.constructor = AuthError;\n        Object.setPrototypeOf(this, AuthError.prototype);\n    }\n}\n\nexport { AuthError };\n//# sourceMappingURL=AuthError.mjs.map\n","import { AuthError } from './AuthError.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst USER_UNAUTHENTICATED_EXCEPTION = 'UserUnAuthenticatedException';\nconst USER_ALREADY_AUTHENTICATED_EXCEPTION = 'UserAlreadyAuthenticatedException';\nconst DEVICE_METADATA_NOT_FOUND_EXCEPTION = 'DeviceMetadataNotFoundException';\nconst AUTO_SIGN_IN_EXCEPTION = 'AutoSignInException';\nconst INVALID_REDIRECT_EXCEPTION = 'InvalidRedirectException';\nconst INVALID_APP_SCHEME_EXCEPTION = 'InvalidAppSchemeException';\nconst INVALID_PREFERRED_REDIRECT_EXCEPTION = 'InvalidPreferredRedirectUrlException';\nconst invalidRedirectException = new AuthError({\n    name: INVALID_REDIRECT_EXCEPTION,\n    message: 'signInRedirect or signOutRedirect had an invalid format or was not found.',\n    recoverySuggestion: 'Please make sure the signIn/Out redirect in your oauth config is valid.',\n});\nconst invalidAppSchemeException = new AuthError({\n    name: INVALID_APP_SCHEME_EXCEPTION,\n    message: 'A valid non-http app scheme was not found in the config.',\n    recoverySuggestion: 'Please make sure a valid custom app scheme is present in the config.',\n});\nconst invalidPreferredRedirectUrlException = new AuthError({\n    name: INVALID_PREFERRED_REDIRECT_EXCEPTION,\n    message: 'The given preferredRedirectUrl does not match any items in the redirectSignOutUrls array from the config.',\n    recoverySuggestion: 'Please make sure a matching preferredRedirectUrl is provided.',\n});\nconst INVALID_ORIGIN_EXCEPTION = 'InvalidOriginException';\nconst invalidOriginException = new AuthError({\n    name: INVALID_ORIGIN_EXCEPTION,\n    message: 'redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin',\n    recoverySuggestion: 'Please call signInWithRedirect from the same origin.',\n});\nconst OAUTH_SIGNOUT_EXCEPTION = 'OAuthSignOutException';\nconst TOKEN_REFRESH_EXCEPTION = 'TokenRefreshException';\nconst UNEXPECTED_SIGN_IN_INTERRUPTION_EXCEPTION = 'UnexpectedSignInInterruptionException';\n\nexport { AUTO_SIGN_IN_EXCEPTION, DEVICE_METADATA_NOT_FOUND_EXCEPTION, INVALID_APP_SCHEME_EXCEPTION, INVALID_ORIGIN_EXCEPTION, INVALID_PREFERRED_REDIRECT_EXCEPTION, INVALID_REDIRECT_EXCEPTION, OAUTH_SIGNOUT_EXCEPTION, TOKEN_REFRESH_EXCEPTION, UNEXPECTED_SIGN_IN_INTERRUPTION_EXCEPTION, USER_ALREADY_AUTHENTICATED_EXCEPTION, USER_UNAUTHENTICATED_EXCEPTION, invalidAppSchemeException, invalidOriginException, invalidPreferredRedirectUrlException, invalidRedirectException };\n//# sourceMappingURL=constants.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createUserPoolSerializer = (operation) => (input, endpoint) => {\n    const headers = getSharedHeaders(operation);\n    const body = JSON.stringify(input);\n    return buildHttpRpcRequest(endpoint, headers, body);\n};\nconst getSharedHeaders = (operation) => ({\n    'content-type': 'application/x-amz-json-1.1',\n    'x-amz-target': `AWSCognitoIdentityProviderService.${operation}`,\n});\nconst buildHttpRpcRequest = ({ url }, headers, body) => ({\n    headers,\n    url,\n    body,\n    method: 'POST',\n});\n\nexport { createUserPoolSerializer };\n//# sourceMappingURL=createUserPoolSerializer.mjs.map\n","import { composeTransferHandler } from '@aws-amplify/core/internals/aws-client-utils/composers';\nimport { unauthenticatedHandler } from '@aws-amplify/core/internals/aws-client-utils';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * A Cognito Identity-specific middleware that disables caching for all requests.\n */\nconst disableCacheMiddlewareFactory = () => (next, _) => async function disableCacheMiddleware(request) {\n    request.headers['cache-control'] = 'no-store';\n    return next(request);\n};\n/**\n * A Cognito Identity-specific transfer handler that does NOT sign requests, and\n * disables caching.\n *\n * @internal\n */\nconst cognitoUserPoolTransferHandler = composeTransferHandler(unauthenticatedHandler, [disableCacheMiddlewareFactory]);\n\nexport { cognitoUserPoolTransferHandler };\n//# sourceMappingURL=cognitoUserPoolTransferHandler.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * The service name used to sign requests if the API requires authentication.\n */\nconst COGNITO_IDP_SERVICE_NAME = 'cognito-idp';\n\nexport { COGNITO_IDP_SERVICE_NAME };\n//# sourceMappingURL=constants.mjs.map\n","import { getRetryDecider, parseJsonError, jitteredBackoff } from '@aws-amplify/core/internals/aws-client-utils';\nimport { getAmplifyUserAgent } from '@aws-amplify/core/internals/utils';\nimport { COGNITO_IDP_SERVICE_NAME } from '../../../constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst DEFAULT_SERVICE_CLIENT_API_CONFIG = {\n    service: COGNITO_IDP_SERVICE_NAME,\n    retryDecider: getRetryDecider(parseJsonError),\n    computeDelay: jitteredBackoff,\n    get userAgentValue() {\n        return getAmplifyUserAgent();\n    },\n    cache: 'no-store',\n};\n\nexport { DEFAULT_SERVICE_CLIENT_API_CONFIG };\n//# sourceMappingURL=constants.mjs.map\n","import { AmplifyUrl } from '@aws-amplify/core/internals/utils';\nimport { cognitoUserPoolEndpointResolver } from '../../../foundation/cognitoUserPoolEndpointResolver.mjs';\n\nconst createCognitoUserPoolEndpointResolver = ({ endpointOverride }) => (input) => {\n    if (endpointOverride) {\n        return { url: new AmplifyUrl(endpointOverride) };\n    }\n    return cognitoUserPoolEndpointResolver(input);\n};\n\nexport { createCognitoUserPoolEndpointResolver };\n//# sourceMappingURL=createCognitoUserPoolEndpointResolver.mjs.map\n","import { getDnsSuffix } from '@aws-amplify/core/internals/aws-client-utils';\nimport { AmplifyUrl } from '@aws-amplify/core/internals/utils';\nimport { COGNITO_IDP_SERVICE_NAME } from './constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst cognitoUserPoolEndpointResolver = ({ region, }) => ({\n    url: new AmplifyUrl(`https://${COGNITO_IDP_SERVICE_NAME}.${region}.${getDnsSuffix(region)}`),\n});\n\nexport { cognitoUserPoolEndpointResolver };\n//# sourceMappingURL=cognitoUserPoolEndpointResolver.mjs.map\n","import { composeServiceApi } from '@aws-amplify/core/internals/aws-client-utils/composers';\nimport { createUserPoolSerializer } from './shared/serde/createUserPoolSerializer.mjs';\nimport { createUserPoolDeserializer } from './shared/serde/createUserPoolDeserializer.mjs';\nimport '@aws-amplify/core/internals/aws-client-utils';\nimport '@aws-amplify/core/internals/utils';\nimport { cognitoUserPoolTransferHandler } from './shared/handler/cognitoUserPoolTransferHandler.mjs';\nimport { DEFAULT_SERVICE_CLIENT_API_CONFIG } from './constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createGetTokensFromRefreshTokenClient = (config) => composeServiceApi(cognitoUserPoolTransferHandler, createUserPoolSerializer('GetTokensFromRefreshToken'), createUserPoolDeserializer(), {\n    ...DEFAULT_SERVICE_CLIENT_API_CONFIG,\n    ...config,\n});\n\nexport { createGetTokensFromRefreshTokenClient };\n//# sourceMappingURL=createGetTokensFromRefreshTokenClient.mjs.map\n","import { parseJsonError, parseJsonBody } from '@aws-amplify/core/internals/aws-client-utils';\nimport { assertServiceError } from '../../../../../../errors/utils/assertServiceError.mjs';\nimport { AuthError } from '../../../../../../errors/AuthError.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createUserPoolDeserializer = () => async (response) => {\n    if (response.statusCode >= 300) {\n        const error = await parseJsonError(response);\n        assertServiceError(error);\n        throw new AuthError({\n            name: error.name,\n            message: error.message,\n            metadata: error.$metadata,\n        });\n    }\n    return parseJsonBody(response);\n};\n\nexport { createUserPoolDeserializer };\n//# sourceMappingURL=createUserPoolDeserializer.mjs.map\n","import { deDupeAsyncFunction, assertTokenProviderConfig, decodeJWT } from '@aws-amplify/core/internals/utils';\nimport { getRegionFromUserPoolId } from '../../../foundation/parsers/regionParsers.mjs';\nimport { assertAuthTokensWithRefreshToken } from './types.mjs';\nimport { AuthError } from '../../../errors/AuthError.mjs';\nimport { createCognitoUserPoolEndpointResolver } from '../factories/createCognitoUserPoolEndpointResolver.mjs';\nimport '@aws-amplify/core';\nimport '@aws-amplify/core/internals/aws-client-utils/composers';\nimport '@aws-amplify/core/internals/aws-client-utils';\nimport '../../../foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.mjs';\nimport '../../../foundation/factories/serviceClients/cognitoIdentityProvider/constants.mjs';\nimport { createGetTokensFromRefreshTokenClient } from '../../../foundation/factories/serviceClients/cognitoIdentityProvider/createGetTokensFromRefreshTokenClient.mjs';\nimport '../../../common/AuthErrorStrings.mjs';\nimport '../../../errors/types/validation.mjs';\nimport '../types/errors.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst refreshAuthTokensFunction = async ({ tokens, authConfig, username, }) => {\n    assertTokenProviderConfig(authConfig?.Cognito);\n    const { userPoolId, userPoolClientId, userPoolEndpoint } = authConfig.Cognito;\n    const region = getRegionFromUserPoolId(userPoolId);\n    assertAuthTokensWithRefreshToken(tokens);\n    const getTokensFromRefreshToken = createGetTokensFromRefreshTokenClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    const { AuthenticationResult } = await getTokensFromRefreshToken({ region }, {\n        ClientId: userPoolClientId,\n        RefreshToken: tokens.refreshToken,\n        DeviceKey: tokens.deviceMetadata?.deviceKey,\n    });\n    const accessToken = decodeJWT(AuthenticationResult?.AccessToken ?? '');\n    const idToken = AuthenticationResult?.IdToken\n        ? decodeJWT(AuthenticationResult.IdToken)\n        : undefined;\n    const { iat } = accessToken.payload;\n    // This should never happen. If it does, it's a bug from the service.\n    if (!iat) {\n        throw new AuthError({\n            name: 'iatNotFoundException',\n            message: 'iat not found in access token',\n        });\n    }\n    const clockDrift = iat * 1000 - new Date().getTime();\n    return {\n        accessToken,\n        idToken,\n        clockDrift,\n        refreshToken: AuthenticationResult?.RefreshToken ?? tokens.refreshToken,\n        username,\n    };\n};\nconst refreshAuthTokens = deDupeAsyncFunction(refreshAuthTokensFunction);\nconst refreshAuthTokensWithoutDedupe = refreshAuthTokensFunction;\n\nexport { refreshAuthTokens, refreshAuthTokensWithoutDedupe };\n//# sourceMappingURL=refreshAuthTokens.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * returns in-flight promise if there is one\n *\n * @param asyncFunction - asyncFunction to be deduped.\n * @returns - the return type of the callback\n */\nconst deDupeAsyncFunction = (asyncFunction) => {\n    let inflightPromise;\n    return async (...args) => {\n        if (inflightPromise)\n            return inflightPromise;\n        inflightPromise = new Promise((resolve, reject) => {\n            asyncFunction(...args)\n                .then(result => {\n                resolve(result);\n            })\n                .catch(error => {\n                reject(error);\n            })\n                .finally(() => {\n                inflightPromise = undefined;\n            });\n        });\n        return inflightPromise;\n    };\n};\n\nexport { deDupeAsyncFunction };\n//# sourceMappingURL=deDupeAsyncFunction.mjs.map\n","const AuthTokenStorageKeys = {\n    accessToken: 'accessToken',\n    idToken: 'idToken',\n    oidcProvider: 'oidcProvider',\n    clockDrift: 'clockDrift',\n    refreshToken: 'refreshToken',\n    deviceKey: 'deviceKey',\n    randomPasswordKey: 'randomPasswordKey',\n    deviceGroupKey: 'deviceGroupKey',\n    signInDetails: 'signInDetails',\n    oauthMetadata: 'oauthMetadata',\n};\n\nexport { AuthTokenStorageKeys };\n//# sourceMappingURL=types.mjs.map\n","import { createAssertionFunction } from '@aws-amplify/core/internals/utils';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nvar TokenProviderErrorCode;\n(function (TokenProviderErrorCode) {\n    TokenProviderErrorCode[\"InvalidAuthTokens\"] = \"InvalidAuthTokens\";\n})(TokenProviderErrorCode || (TokenProviderErrorCode = {}));\nconst tokenValidationErrorMap = {\n    [TokenProviderErrorCode.InvalidAuthTokens]: {\n        message: 'Invalid tokens.',\n        recoverySuggestion: 'Make sure the tokens are valid.',\n    },\n};\nconst assert = createAssertionFunction(tokenValidationErrorMap);\n\nexport { TokenProviderErrorCode, assert };\n//# sourceMappingURL=errorHelpers.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst AUTH_KEY_PREFIX = 'CognitoIdentityServiceProvider';\n\nexport { AUTH_KEY_PREFIX };\n//# sourceMappingURL=constants.mjs.map\n","import { assertTokenProviderConfig } from '@aws-amplify/core/internals/utils';\nimport { getAuthStorageKeys } from '../tokenProvider/TokenStore.mjs';\nimport { OAuthStorageKeys } from './types.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst V5_HOSTED_UI_KEY = 'amplify-signin-with-hostedUI';\nconst name = 'CognitoIdentityServiceProvider';\nclass DefaultOAuthStore {\n    constructor(keyValueStorage) {\n        this.keyValueStorage = keyValueStorage;\n    }\n    async clearOAuthInflightData() {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        await Promise.all([\n            this.keyValueStorage.removeItem(authKeys.inflightOAuth),\n            this.keyValueStorage.removeItem(authKeys.oauthPKCE),\n            this.keyValueStorage.removeItem(authKeys.oauthState),\n        ]);\n    }\n    async clearOAuthData() {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        await this.clearOAuthInflightData();\n        await this.keyValueStorage.removeItem(V5_HOSTED_UI_KEY); // remove in case a customer migrated an App from v5 to v6\n        return this.keyValueStorage.removeItem(authKeys.oauthSignIn);\n    }\n    loadOAuthState() {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        return this.keyValueStorage.getItem(authKeys.oauthState);\n    }\n    storeOAuthState(state) {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        return this.keyValueStorage.setItem(authKeys.oauthState, state);\n    }\n    loadPKCE() {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        return this.keyValueStorage.getItem(authKeys.oauthPKCE);\n    }\n    storePKCE(pkce) {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        return this.keyValueStorage.setItem(authKeys.oauthPKCE, pkce);\n    }\n    setAuthConfig(authConfigParam) {\n        this.cognitoConfig = authConfigParam;\n    }\n    async loadOAuthInFlight() {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        return ((await this.keyValueStorage.getItem(authKeys.inflightOAuth)) === 'true');\n    }\n    async storeOAuthInFlight(inflight) {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        await this.keyValueStorage.setItem(authKeys.inflightOAuth, `${inflight}`);\n    }\n    async loadOAuthSignIn() {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        const isLegacyHostedUISignIn = await this.keyValueStorage.getItem(V5_HOSTED_UI_KEY);\n        const [isOAuthSignIn, preferPrivateSession] = (await this.keyValueStorage.getItem(authKeys.oauthSignIn))?.split(',') ??\n            [];\n        return {\n            isOAuthSignIn: isOAuthSignIn === 'true' || isLegacyHostedUISignIn === 'true',\n            preferPrivateSession: preferPrivateSession === 'true',\n        };\n    }\n    async storeOAuthSignIn(oauthSignIn, preferPrivateSession = false) {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        await this.keyValueStorage.setItem(authKeys.oauthSignIn, `${oauthSignIn},${preferPrivateSession}`);\n    }\n}\nconst createKeysForAuthStorage = (provider, identifier) => {\n    return getAuthStorageKeys(OAuthStorageKeys)(provider, identifier);\n};\n\nexport { DefaultOAuthStore };\n//# sourceMappingURL=signInWithRedirectStore.mjs.map\n","import { defaultStorage } from '@aws-amplify/core';\nimport { DefaultOAuthStore } from '../signInWithRedirectStore.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst oAuthStore = new DefaultOAuthStore(defaultStorage);\n\nexport { oAuthStore };\n//# sourceMappingURL=oAuthStore.mjs.map\n","import { Hub } from '@aws-amplify/core';\nimport { isBrowser, assertTokenProviderConfig, isTokenExpired, AMPLIFY_SYMBOL, AmplifyErrorCode } from '@aws-amplify/core/internals/utils';\nimport { assertServiceError } from '../../../errors/utils/assertServiceError.mjs';\nimport { AuthError } from '../../../errors/AuthError.mjs';\nimport { oAuthStore } from '../utils/oauth/oAuthStore.mjs';\nimport { addInflightPromise } from '../utils/oauth/inflightPromise.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nclass TokenOrchestrator {\n    constructor() {\n        this.waitForInflightOAuth = isBrowser()\n            ? async () => {\n                if (!(await oAuthStore.loadOAuthInFlight())) {\n                    return;\n                }\n                if (this.inflightPromise) {\n                    return this.inflightPromise;\n                }\n                // when there is valid oauth config and there is an inflight oauth flow, try\n                // to block async calls that require fetching tokens before the oauth flow completes\n                // e.g. getCurrentUser, fetchAuthSession etc.\n                this.inflightPromise = new Promise((resolve, _reject) => {\n                    addInflightPromise(resolve);\n                });\n                return this.inflightPromise;\n            }\n            : async () => {\n                // no-op for non-browser environments\n            };\n    }\n    setAuthConfig(authConfig) {\n        oAuthStore.setAuthConfig(authConfig.Cognito);\n        this.authConfig = authConfig;\n    }\n    setTokenRefresher(tokenRefresher) {\n        this.tokenRefresher = tokenRefresher;\n    }\n    setAuthTokenStore(tokenStore) {\n        this.tokenStore = tokenStore;\n    }\n    getTokenStore() {\n        if (!this.tokenStore) {\n            throw new AuthError({\n                name: 'EmptyTokenStoreException',\n                message: 'TokenStore not set',\n            });\n        }\n        return this.tokenStore;\n    }\n    getTokenRefresher() {\n        if (!this.tokenRefresher) {\n            throw new AuthError({\n                name: 'EmptyTokenRefresherException',\n                message: 'TokenRefresher not set',\n            });\n        }\n        return this.tokenRefresher;\n    }\n    async getTokens(options) {\n        let tokens;\n        try {\n            assertTokenProviderConfig(this.authConfig?.Cognito);\n        }\n        catch (_err) {\n            // Token provider not configured\n            return null;\n        }\n        await this.waitForInflightOAuth();\n        this.inflightPromise = undefined;\n        tokens = await this.getTokenStore().loadTokens();\n        const username = await this.getTokenStore().getLastAuthUser();\n        if (tokens === null) {\n            return null;\n        }\n        const idTokenExpired = !!tokens?.idToken &&\n            isTokenExpired({\n                expiresAt: (tokens.idToken?.payload?.exp ?? 0) * 1000,\n                clockDrift: tokens.clockDrift ?? 0,\n            });\n        const accessTokenExpired = isTokenExpired({\n            expiresAt: (tokens.accessToken?.payload?.exp ?? 0) * 1000,\n            clockDrift: tokens.clockDrift ?? 0,\n        });\n        if (options?.forceRefresh || idTokenExpired || accessTokenExpired) {\n            tokens = await this.refreshTokens({\n                tokens,\n                username,\n            });\n            if (tokens === null) {\n                return null;\n            }\n        }\n        return {\n            accessToken: tokens?.accessToken,\n            idToken: tokens?.idToken,\n            signInDetails: tokens?.signInDetails,\n        };\n    }\n    async refreshTokens({ tokens, username, }) {\n        try {\n            const { signInDetails } = tokens;\n            const newTokens = await this.getTokenRefresher()({\n                tokens,\n                authConfig: this.authConfig,\n                username,\n            });\n            newTokens.signInDetails = signInDetails;\n            await this.setTokens({ tokens: newTokens });\n            Hub.dispatch('auth', { event: 'tokenRefresh' }, 'Auth', AMPLIFY_SYMBOL);\n            return newTokens;\n        }\n        catch (err) {\n            return this.handleErrors(err);\n        }\n    }\n    handleErrors(err) {\n        assertServiceError(err);\n        if (err.name !== AmplifyErrorCode.NetworkError) {\n            // TODO(v6): Check errors on client\n            this.clearTokens();\n        }\n        Hub.dispatch('auth', {\n            event: 'tokenRefresh_failure',\n            data: { error: err },\n        }, 'Auth', AMPLIFY_SYMBOL);\n        if (err.name.startsWith('NotAuthorizedException')) {\n            return null;\n        }\n        throw err;\n    }\n    async setTokens({ tokens }) {\n        return this.getTokenStore().storeTokens(tokens);\n    }\n    async clearTokens() {\n        return this.getTokenStore().clearTokens();\n    }\n    getDeviceMetadata(username) {\n        return this.getTokenStore().getDeviceMetadata(username);\n    }\n    clearDeviceMetadata(username) {\n        return this.getTokenStore().clearDeviceMetadata(username);\n    }\n    setOAuthMetadata(metadata) {\n        return this.getTokenStore().setOAuthMetadata(metadata);\n    }\n    getOAuthMetadata() {\n        return this.getTokenStore().getOAuthMetadata();\n    }\n}\n\nexport { TokenOrchestrator };\n//# sourceMappingURL=TokenOrchestrator.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst isBrowser = () => typeof window !== 'undefined' && typeof window.document !== 'undefined';\n\nexport { isBrowser };\n//# sourceMappingURL=isBrowser.mjs.map\n","import { CognitoUserPoolsTokenProvider } from './CognitoUserPoolsTokenProvider.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * The default provider for the JWT access token and ID token issued from the configured Cognito user pool. It manages\n * the refresh and storage of the tokens. It stores the tokens in `window.localStorage` if available, and falls back to\n * in-memory storage if not.\n */\nconst cognitoUserPoolsTokenProvider = new CognitoUserPoolsTokenProvider();\nconst { tokenOrchestrator } = cognitoUserPoolsTokenProvider;\n\nexport { cognitoUserPoolsTokenProvider, tokenOrchestrator };\n//# sourceMappingURL=tokenProvider.mjs.map\n","import { defaultStorage } from '@aws-amplify/core';\nimport { refreshAuthTokens } from '../utils/refreshAuthTokens.mjs';\nimport { DefaultTokenStore } from './TokenStore.mjs';\nimport { TokenOrchestrator } from './TokenOrchestrator.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nclass CognitoUserPoolsTokenProvider {\n    constructor() {\n        this.authTokenStore = new DefaultTokenStore();\n        this.authTokenStore.setKeyValueStorage(defaultStorage);\n        this.tokenOrchestrator = new TokenOrchestrator();\n        this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore);\n        this.tokenOrchestrator.setTokenRefresher(refreshAuthTokens);\n    }\n    getTokens({ forceRefresh } = { forceRefresh: false }) {\n        return this.tokenOrchestrator.getTokens({ forceRefresh });\n    }\n    setKeyValueStorage(keyValueStorage) {\n        this.authTokenStore.setKeyValueStorage(keyValueStorage);\n    }\n    setAuthConfig(authConfig) {\n        this.authTokenStore.setAuthConfig(authConfig);\n        this.tokenOrchestrator.setAuthConfig(authConfig);\n    }\n}\n\nexport { CognitoUserPoolsTokenProvider };\n//# sourceMappingURL=CognitoUserPoolsTokenProvider.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst IdentityIdStorageKeys = {\n    identityId: 'identityId',\n};\n\nexport { IdentityIdStorageKeys };\n//# sourceMappingURL=types.mjs.map\n","import { ConsoleLogger } from '@aws-amplify/core';\nimport { assertIdentityPoolIdConfig } from '@aws-amplify/core/internals/utils';\nimport { getAuthStorageKeys } from '../tokenProvider/TokenStore.mjs';\nimport { IdentityIdStorageKeys } from './types.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('DefaultIdentityIdStore');\nclass DefaultIdentityIdStore {\n    setAuthConfig(authConfigParam) {\n        assertIdentityPoolIdConfig(authConfigParam.Cognito);\n        this.authConfig = authConfigParam;\n        this._authKeys = createKeysForAuthStorage('Cognito', authConfigParam.Cognito.identityPoolId);\n    }\n    constructor(keyValueStorage) {\n        this._authKeys = {};\n        this._hasGuestIdentityId = false;\n        this.keyValueStorage = keyValueStorage;\n    }\n    async loadIdentityId() {\n        assertIdentityPoolIdConfig(this.authConfig?.Cognito);\n        try {\n            if (this._primaryIdentityId) {\n                return {\n                    id: this._primaryIdentityId,\n                    type: 'primary',\n                };\n            }\n            else {\n                const storedIdentityId = await this.keyValueStorage.getItem(this._authKeys.identityId);\n                if (storedIdentityId) {\n                    this._hasGuestIdentityId = true;\n                    return {\n                        id: storedIdentityId,\n                        type: 'guest',\n                    };\n                }\n                return null;\n            }\n        }\n        catch (err) {\n            logger.log('Error getting stored IdentityId.', err);\n            return null;\n        }\n    }\n    async storeIdentityId(identity) {\n        assertIdentityPoolIdConfig(this.authConfig?.Cognito);\n        if (identity.type === 'guest') {\n            this.keyValueStorage.setItem(this._authKeys.identityId, identity.id);\n            // Clear in-memory storage of primary identityId\n            this._primaryIdentityId = undefined;\n            this._hasGuestIdentityId = true;\n        }\n        else {\n            this._primaryIdentityId = identity.id;\n            // Clear locally stored guest id\n            if (this._hasGuestIdentityId) {\n                this.keyValueStorage.removeItem(this._authKeys.identityId);\n                this._hasGuestIdentityId = false;\n            }\n        }\n    }\n    async clearIdentityId() {\n        this._primaryIdentityId = undefined;\n        await this.keyValueStorage.removeItem(this._authKeys.identityId);\n    }\n}\nconst createKeysForAuthStorage = (provider, identifier) => {\n    return getAuthStorageKeys(IdentityIdStorageKeys)(`com.amplify.${provider}`, identifier);\n};\n\nexport { DefaultIdentityIdStore };\n//# sourceMappingURL=IdentityIdStore.mjs.map\n","import { cognitoIdentityPoolEndpointResolver } from '@aws-amplify/core';\nimport { AmplifyUrl } from '@aws-amplify/core/internals/utils';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createCognitoIdentityPoolEndpointResolver = ({ endpointOverride }) => (input) => {\n    if (endpointOverride) {\n        return { url: new AmplifyUrl(endpointOverride) };\n    }\n    return cognitoIdentityPoolEndpointResolver(input);\n};\n\nexport { createCognitoIdentityPoolEndpointResolver };\n//# sourceMappingURL=createCognitoIdentityPoolEndpointResolver.mjs.map\n","import { getDnsSuffix } from '../../../../clients/endpoints/getDnsSuffix.mjs';\nimport '../../../../types/errors.mjs';\nimport '../../../../errors/errorHelpers.mjs';\nimport '../../../../utils/getClientInfo/getClientInfo.mjs';\nimport '../../../../utils/retry/retry.mjs';\nimport '../../../../parseAWSExports.mjs';\nimport 'uuid';\nimport { AmplifyUrl } from '../../../../utils/amplifyUrl/index.mjs';\nimport '../../../../singleton/Auth/utils/errorHelpers.mjs';\nimport '@aws-crypto/sha256-js';\nimport '@smithy/util-hex-encoding';\nimport '../../../../Platform/index.mjs';\nimport '../../../../Platform/types.mjs';\nimport '../../../../BackgroundProcessManager/types.mjs';\nimport '../../../../Reachability/Reachability.mjs';\nimport '../../../../Hub/index.mjs';\nimport '../../../../utils/sessionListener/index.mjs';\nimport { COGNITO_IDENTITY_SERVICE_NAME } from './constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst cognitoIdentityPoolEndpointResolver = ({ region, }) => ({\n    url: new AmplifyUrl(`https://${COGNITO_IDENTITY_SERVICE_NAME}.${region}.${getDnsSuffix(region)}`),\n});\n\nexport { cognitoIdentityPoolEndpointResolver };\n//# sourceMappingURL=cognitoIdentityPoolEndpointResolver.mjs.map\n","import { ConsoleLogger, createGetCredentialsForIdentityClient } from '@aws-amplify/core';\nimport { assertIdentityPoolIdConfig } from '@aws-amplify/core/internals/utils';\nimport { AuthError } from '../../../errors/AuthError.mjs';\nimport { assertServiceError } from '../../../errors/utils/assertServiceError.mjs';\nimport { getRegionFromIdentityPoolId } from '../../../foundation/parsers/regionParsers.mjs';\nimport { assertIdTokenInAuthTokens } from '../utils/types.mjs';\nimport '@aws-amplify/core/internals/aws-client-utils';\nimport { createCognitoIdentityPoolEndpointResolver } from '../factories/createCognitoIdentityPoolEndpointResolver.mjs';\nimport { cognitoIdentityIdProvider } from './IdentityIdProvider.mjs';\nimport { formLoginsMap } from './utils.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('CognitoCredentialsProvider');\nconst CREDENTIALS_TTL = 50 * 60 * 1000; // 50 min, can be modified on config if required in the future\nclass CognitoAWSCredentialsAndIdentityIdProvider {\n    constructor(identityIdStore) {\n        this._nextCredentialsRefresh = 0;\n        this._identityIdStore = identityIdStore;\n    }\n    async clearCredentialsAndIdentityId() {\n        logger.debug('Clearing out credentials and identityId');\n        this._credentialsAndIdentityId = undefined;\n        await this._identityIdStore.clearIdentityId();\n    }\n    async clearCredentials() {\n        logger.debug('Clearing out in-memory credentials');\n        this._credentialsAndIdentityId = undefined;\n    }\n    async getCredentialsAndIdentityId(getCredentialsOptions) {\n        const isAuthenticated = getCredentialsOptions.authenticated;\n        const { tokens } = getCredentialsOptions;\n        const { authConfig } = getCredentialsOptions;\n        try {\n            assertIdentityPoolIdConfig(authConfig?.Cognito);\n        }\n        catch {\n            // No identity pool configured, skipping\n            return;\n        }\n        if (!isAuthenticated && !authConfig.Cognito.allowGuestAccess) {\n            // TODO(V6): return partial result like Native platforms\n            return;\n        }\n        const { forceRefresh } = getCredentialsOptions;\n        const tokenHasChanged = this.hasTokenChanged(tokens);\n        const identityId = await cognitoIdentityIdProvider({\n            tokens,\n            authConfig: authConfig.Cognito,\n            identityIdStore: this._identityIdStore,\n        });\n        // Clear cached credentials when forceRefresh is true OR the cache token has changed\n        if (forceRefresh || tokenHasChanged) {\n            this.clearCredentials();\n        }\n        if (!isAuthenticated) {\n            return this.getGuestCredentials(identityId, authConfig.Cognito);\n        }\n        else {\n            assertIdTokenInAuthTokens(tokens);\n            return this.credsForOIDCTokens(authConfig.Cognito, tokens, identityId);\n        }\n    }\n    async getGuestCredentials(identityId, authConfig) {\n        // Return existing in-memory cached credentials only if it exists, is not past it's lifetime and is unauthenticated credentials\n        if (this._credentialsAndIdentityId &&\n            !this.isPastTTL() &&\n            this._credentialsAndIdentityId.isAuthenticatedCreds === false) {\n            logger.info('returning stored credentials as they neither past TTL nor expired.');\n            return this._credentialsAndIdentityId;\n        }\n        // Clear to discard if any authenticated credentials are set and start with a clean slate\n        this.clearCredentials();\n        const region = getRegionFromIdentityPoolId(authConfig.identityPoolId);\n        const getCredentialsForIdentity = createGetCredentialsForIdentityClient({\n            endpointResolver: createCognitoIdentityPoolEndpointResolver({\n                endpointOverride: authConfig.identityPoolEndpoint,\n            }),\n        });\n        // use identityId to obtain guest credentials\n        // save credentials in-memory\n        // No logins params should be passed for guest creds:\n        // https://docs.aws.amazon.com/cognitoidentity/latest/APIReference/API_GetCredentialsForIdentity.html\n        let clientResult;\n        try {\n            clientResult = await getCredentialsForIdentity({ region }, {\n                IdentityId: identityId,\n            });\n        }\n        catch (e) {\n            assertServiceError(e);\n            throw new AuthError(e);\n        }\n        if (clientResult?.Credentials?.AccessKeyId &&\n            clientResult?.Credentials?.SecretKey) {\n            this._nextCredentialsRefresh = new Date().getTime() + CREDENTIALS_TTL;\n            const res = {\n                credentials: {\n                    accessKeyId: clientResult.Credentials.AccessKeyId,\n                    secretAccessKey: clientResult.Credentials.SecretKey,\n                    sessionToken: clientResult.Credentials.SessionToken,\n                    expiration: clientResult.Credentials.Expiration,\n                },\n                identityId,\n            };\n            if (clientResult.IdentityId) {\n                res.identityId = clientResult.IdentityId;\n                this._identityIdStore.storeIdentityId({\n                    id: clientResult.IdentityId,\n                    type: 'guest',\n                });\n            }\n            this._credentialsAndIdentityId = {\n                ...res,\n                isAuthenticatedCreds: false,\n            };\n            return res;\n        }\n        else {\n            throw new AuthError({\n                name: 'CredentialsNotFoundException',\n                message: `Cognito did not respond with either Credentials, AccessKeyId or SecretKey.`,\n            });\n        }\n    }\n    async credsForOIDCTokens(authConfig, authTokens, identityId) {\n        if (this._credentialsAndIdentityId &&\n            !this.isPastTTL() &&\n            this._credentialsAndIdentityId.isAuthenticatedCreds === true) {\n            logger.debug('returning stored credentials as they neither past TTL nor expired.');\n            return this._credentialsAndIdentityId;\n        }\n        // Clear to discard if any unauthenticated credentials are set and start with a clean slate\n        this.clearCredentials();\n        const logins = authTokens.idToken\n            ? formLoginsMap(authTokens.idToken.toString())\n            : {};\n        const region = getRegionFromIdentityPoolId(authConfig.identityPoolId);\n        const getCredentialsForIdentity = createGetCredentialsForIdentityClient({\n            endpointResolver: createCognitoIdentityPoolEndpointResolver({\n                endpointOverride: authConfig.identityPoolEndpoint,\n            }),\n        });\n        let clientResult;\n        try {\n            clientResult = await getCredentialsForIdentity({ region }, {\n                IdentityId: identityId,\n                Logins: logins,\n            });\n        }\n        catch (e) {\n            assertServiceError(e);\n            throw new AuthError(e);\n        }\n        if (clientResult?.Credentials?.AccessKeyId &&\n            clientResult?.Credentials?.SecretKey) {\n            this._nextCredentialsRefresh = new Date().getTime() + CREDENTIALS_TTL;\n            const res = {\n                credentials: {\n                    accessKeyId: clientResult.Credentials.AccessKeyId,\n                    secretAccessKey: clientResult.Credentials.SecretKey,\n                    sessionToken: clientResult.Credentials.SessionToken,\n                    expiration: clientResult.Credentials.Expiration,\n                },\n                identityId,\n            };\n            if (clientResult.IdentityId) {\n                res.identityId = clientResult.IdentityId;\n                // note: the following call removes guest identityId from the persistent store (localStorage)\n                this._identityIdStore.storeIdentityId({\n                    id: clientResult.IdentityId,\n                    type: 'primary',\n                });\n            }\n            // Store the credentials in-memory along with the expiration\n            this._credentialsAndIdentityId = {\n                ...res,\n                isAuthenticatedCreds: true,\n                associatedIdToken: authTokens.idToken?.toString(),\n            };\n            return res;\n        }\n        else {\n            throw new AuthError({\n                name: 'CredentialsException',\n                message: `Cognito did not respond with either Credentials, AccessKeyId or SecretKey.`,\n            });\n        }\n    }\n    isPastTTL() {\n        return this._nextCredentialsRefresh === undefined\n            ? true\n            : this._nextCredentialsRefresh <= Date.now();\n    }\n    hasTokenChanged(tokens) {\n        return (!!tokens &&\n            !!this._credentialsAndIdentityId?.associatedIdToken &&\n            tokens.idToken?.toString() !==\n                this._credentialsAndIdentityId.associatedIdToken);\n    }\n}\n\nexport { CognitoAWSCredentialsAndIdentityIdProvider };\n//# sourceMappingURL=credentialsProvider.mjs.map\n","import { defaultStorage } from '@aws-amplify/core';\nimport { DefaultIdentityIdStore } from './IdentityIdStore.mjs';\nimport { CognitoAWSCredentialsAndIdentityIdProvider } from './credentialsProvider.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Cognito specific implmentation of the CredentialsProvider interface\n * that manages setting and getting of AWS Credentials.\n *\n * @throws configuration expections: `InvalidIdentityPoolIdException`\n *  - Auth errors that may arise from misconfiguration.\n * @throws service expections: {@link GetCredentialsForIdentityException}, {@link GetIdException}\n *\n */\nconst cognitoCredentialsProvider = new CognitoAWSCredentialsAndIdentityIdProvider(new DefaultIdentityIdStore(defaultStorage));\n\nexport { CognitoAWSCredentialsAndIdentityIdProvider, DefaultIdentityIdStore, cognitoCredentialsProvider };\n//# sourceMappingURL=index.mjs.map\n","import { Amplify, CookieStorage, defaultStorage } from '@aws-amplify/core';\nimport { parseAmplifyConfig } from '@aws-amplify/core/internals/utils';\nimport { CognitoAWSCredentialsAndIdentityIdProvider, DefaultIdentityIdStore, cognitoCredentialsProvider, cognitoUserPoolsTokenProvider } from '@aws-amplify/auth/cognito';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst DefaultAmplify = {\n    /**\n     * Configures Amplify with the {@link resourceConfig} and {@link libraryOptions}.\n     *\n     * @param resourceConfig The {@link ResourcesConfig} object that is typically imported from the\n     * `amplifyconfiguration.json` file. It can also be an object literal created inline when calling `Amplify.configure`.\n     * @param libraryOptions The {@link LibraryOptions} additional options for the library.\n     *\n     * @example\n     * import config from './amplifyconfiguration.json';\n     *\n     * Amplify.configure(config);\n     */\n    configure(resourceConfig, libraryOptions) {\n        const resolvedResourceConfig = parseAmplifyConfig(resourceConfig);\n        const cookieBasedKeyValueStorage = new CookieStorage({ sameSite: 'lax' });\n        const resolvedKeyValueStorage = libraryOptions?.ssr\n            ? cookieBasedKeyValueStorage\n            : defaultStorage;\n        const resolvedCredentialsProvider = libraryOptions?.ssr\n            ? new CognitoAWSCredentialsAndIdentityIdProvider(new DefaultIdentityIdStore(cookieBasedKeyValueStorage))\n            : cognitoCredentialsProvider;\n        // If no Auth config is provided, no special handling will be required, configure as is.\n        // Otherwise, we can assume an Auth config is provided from here on.\n        if (!resolvedResourceConfig.Auth) {\n            Amplify.configure(resolvedResourceConfig, libraryOptions);\n            return;\n        }\n        // If Auth options are provided, always just configure as is.\n        // Otherwise, we can assume no Auth libraryOptions were provided from here on.\n        if (libraryOptions?.Auth) {\n            Amplify.configure(resolvedResourceConfig, libraryOptions);\n            return;\n        }\n        // If no Auth libraryOptions were previously configured, then always add default providers.\n        if (!Amplify.libraryOptions.Auth) {\n            cognitoUserPoolsTokenProvider.setAuthConfig(resolvedResourceConfig.Auth);\n            cognitoUserPoolsTokenProvider.setKeyValueStorage(\n            // TODO: allow configure with a public interface\n            resolvedKeyValueStorage);\n            Amplify.configure(resolvedResourceConfig, {\n                ...libraryOptions,\n                Auth: {\n                    tokenProvider: cognitoUserPoolsTokenProvider,\n                    credentialsProvider: resolvedCredentialsProvider,\n                },\n            });\n            return;\n        }\n        // At this point, Auth libraryOptions would have been previously configured and no overriding\n        // Auth options were given, so we should preserve the currently configured Auth libraryOptions.\n        if (libraryOptions) {\n            const authLibraryOptions = Amplify.libraryOptions.Auth;\n            // If ssr is provided through libraryOptions, we should respect the intentional reconfiguration.\n            if (libraryOptions.ssr !== undefined) {\n                cognitoUserPoolsTokenProvider.setKeyValueStorage(\n                // TODO: allow configure with a public interface\n                resolvedKeyValueStorage);\n                authLibraryOptions.credentialsProvider = resolvedCredentialsProvider;\n            }\n            Amplify.configure(resolvedResourceConfig, {\n                Auth: authLibraryOptions,\n                ...libraryOptions,\n            });\n            return;\n        }\n        // Finally, if there were no libraryOptions given at all, we should simply not touch the currently\n        // configured libraryOptions.\n        Amplify.configure(resolvedResourceConfig);\n    },\n    /**\n     * Returns the {@link ResourcesConfig} object passed in as the `resourceConfig` parameter when calling\n     * `Amplify.configure`.\n     *\n     * @returns An {@link ResourcesConfig} object.\n     */\n    getConfig() {\n        return Amplify.getConfig();\n    },\n};\n\nexport { DefaultAmplify };\n//# sourceMappingURL=initSingleton.mjs.map\n","// In ES2015 (or a polyfilled) environment, this will be Symbol.iterator\n// istanbul ignore next (See: 'https://github.com/graphql/graphql-js/issues/2317')\nexport var SYMBOL_ITERATOR = typeof Symbol === 'function' && Symbol.iterator != null ? Symbol.iterator : '@@iterator'; // In ES2017 (or a polyfilled) environment, this will be Symbol.asyncIterator\n// istanbul ignore next (See: 'https://github.com/graphql/graphql-js/issues/2317')\n\nexport var SYMBOL_ASYNC_ITERATOR = typeof Symbol === 'function' && Symbol.asyncIterator != null ? Symbol.asyncIterator : '@@asyncIterator'; // istanbul ignore next (See: 'https://github.com/graphql/graphql-js/issues/2317')\n\nexport var SYMBOL_TO_STRING_TAG = typeof Symbol === 'function' && Symbol.toStringTag != null ? Symbol.toStringTag : '@@toStringTag';\n","/**\n * The set of allowed kind values for AST nodes.\n */\nexport var Kind = Object.freeze({\n  // Name\n  NAME: 'Name',\n  // Document\n  DOCUMENT: 'Document',\n  OPERATION_DEFINITION: 'OperationDefinition',\n  VARIABLE_DEFINITION: 'VariableDefinition',\n  SELECTION_SET: 'SelectionSet',\n  FIELD: 'Field',\n  ARGUMENT: 'Argument',\n  // Fragments\n  FRAGMENT_SPREAD: 'FragmentSpread',\n  INLINE_FRAGMENT: 'InlineFragment',\n  FRAGMENT_DEFINITION: 'FragmentDefinition',\n  // Values\n  VARIABLE: 'Variable',\n  INT: 'IntValue',\n  FLOAT: 'FloatValue',\n  STRING: 'StringValue',\n  BOOLEAN: 'BooleanValue',\n  NULL: 'NullValue',\n  ENUM: 'EnumValue',\n  LIST: 'ListValue',\n  OBJECT: 'ObjectValue',\n  OBJECT_FIELD: 'ObjectField',\n  // Directives\n  DIRECTIVE: 'Directive',\n  // Types\n  NAMED_TYPE: 'NamedType',\n  LIST_TYPE: 'ListType',\n  NON_NULL_TYPE: 'NonNullType',\n  // Type System Definitions\n  SCHEMA_DEFINITION: 'SchemaDefinition',\n  OPERATION_TYPE_DEFINITION: 'OperationTypeDefinition',\n  // Type Definitions\n  SCALAR_TYPE_DEFINITION: 'ScalarTypeDefinition',\n  OBJECT_TYPE_DEFINITION: 'ObjectTypeDefinition',\n  FIELD_DEFINITION: 'FieldDefinition',\n  INPUT_VALUE_DEFINITION: 'InputValueDefinition',\n  INTERFACE_TYPE_DEFINITION: 'InterfaceTypeDefinition',\n  UNION_TYPE_DEFINITION: 'UnionTypeDefinition',\n  ENUM_TYPE_DEFINITION: 'EnumTypeDefinition',\n  ENUM_VALUE_DEFINITION: 'EnumValueDefinition',\n  INPUT_OBJECT_TYPE_DEFINITION: 'InputObjectTypeDefinition',\n  // Directive Definitions\n  DIRECTIVE_DEFINITION: 'DirectiveDefinition',\n  // Type System Extensions\n  SCHEMA_EXTENSION: 'SchemaExtension',\n  // Type Extensions\n  SCALAR_TYPE_EXTENSION: 'ScalarTypeExtension',\n  OBJECT_TYPE_EXTENSION: 'ObjectTypeExtension',\n  INTERFACE_TYPE_EXTENSION: 'InterfaceTypeExtension',\n  UNION_TYPE_EXTENSION: 'UnionTypeExtension',\n  ENUM_TYPE_EXTENSION: 'EnumTypeExtension',\n  INPUT_OBJECT_TYPE_EXTENSION: 'InputObjectTypeExtension'\n});\n/**\n * The enum type representing the possible kind values of AST nodes.\n */\n","// istanbul ignore next (See: 'https://github.com/graphql/graphql-js/issues/2317')\nvar nodejsCustomInspectSymbol = typeof Symbol === 'function' && typeof Symbol.for === 'function' ? Symbol.for('nodejs.util.inspect.custom') : undefined;\nexport default nodejsCustomInspectSymbol;\n","/**\n * An exported enum describing the different kinds of tokens that the\n * lexer emits.\n */\nexport var TokenKind = Object.freeze({\n  SOF: '<SOF>',\n  EOF: '<EOF>',\n  BANG: '!',\n  DOLLAR: '$',\n  AMP: '&',\n  PAREN_L: '(',\n  PAREN_R: ')',\n  SPREAD: '...',\n  COLON: ':',\n  EQUALS: '=',\n  AT: '@',\n  BRACKET_L: '[',\n  BRACKET_R: ']',\n  BRACE_L: '{',\n  PIPE: '|',\n  BRACE_R: '}',\n  NAME: 'Name',\n  INT: 'Int',\n  FLOAT: 'Float',\n  STRING: 'String',\n  BLOCK_STRING: 'BlockString',\n  COMMENT: 'Comment'\n});\n/**\n * The enum type representing the token kinds values.\n */\n","/**\n * The set of allowed directive location values.\n */\nexport var DirectiveLocation = Object.freeze({\n  // Request Definitions\n  QUERY: 'QUERY',\n  MUTATION: 'MUTATION',\n  SUBSCRIPTION: 'SUBSCRIPTION',\n  FIELD: 'FIELD',\n  FRAGMENT_DEFINITION: 'FRAGMENT_DEFINITION',\n  FRAGMENT_SPREAD: 'FRAGMENT_SPREAD',\n  INLINE_FRAGMENT: 'INLINE_FRAGMENT',\n  VARIABLE_DEFINITION: 'VARIABLE_DEFINITION',\n  // Type System Definitions\n  SCHEMA: 'SCHEMA',\n  SCALAR: 'SCALAR',\n  OBJECT: 'OBJECT',\n  FIELD_DEFINITION: 'FIELD_DEFINITION',\n  ARGUMENT_DEFINITION: 'ARGUMENT_DEFINITION',\n  INTERFACE: 'INTERFACE',\n  UNION: 'UNION',\n  ENUM: 'ENUM',\n  ENUM_VALUE: 'ENUM_VALUE',\n  INPUT_OBJECT: 'INPUT_OBJECT',\n  INPUT_FIELD_DEFINITION: 'INPUT_FIELD_DEFINITION'\n});\n/**\n * The enum type representing the directive location values.\n */\n","import { ApiError } from '@aws-amplify/core/internals/utils';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nclass RestApiError extends ApiError {\n    constructor(params) {\n        super(params);\n        // TODO: Delete the following 2 lines after we change the build target to >= es2015\n        this.constructor = RestApiError;\n        Object.setPrototypeOf(this, RestApiError.prototype);\n    }\n}\n\nexport { RestApiError };\n//# sourceMappingURL=RestApiError.mjs.map\n","import { RestApiError } from './RestApiError.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Internal-only class for CanceledError.\n *\n * @internal\n */\nclass CanceledError extends RestApiError {\n    constructor(params = {}) {\n        super({\n            name: 'CanceledError',\n            message: 'Request is canceled by user',\n            ...params,\n        });\n        // TODO: Delete the following 2 lines after we change the build target to >= es2015\n        this.constructor = CanceledError;\n        Object.setPrototypeOf(this, CanceledError.prototype);\n    }\n}\n/**\n * Check if an error is caused by user calling `cancel()` in REST API.\n *\n * @note This function works **ONLY** for errors thrown by REST API. For GraphQL APIs, use `client.isCancelError(error)`\n *   instead. `client` is generated from  `generateClient()` API from `aws-amplify/api`.\n *\n * @param {unknown} error The unknown exception to be checked.\n * @returns - A boolean indicating if the error was from an upload cancellation\n */\nconst isCancelError = (error) => !!error && error instanceof CanceledError;\n\nexport { CanceledError, isCancelError };\n//# sourceMappingURL=CanceledError.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nvar RestApiValidationErrorCode;\n(function (RestApiValidationErrorCode) {\n    RestApiValidationErrorCode[\"InvalidApiName\"] = \"InvalidApiName\";\n})(RestApiValidationErrorCode || (RestApiValidationErrorCode = {}));\nconst validationErrorMap = {\n    [RestApiValidationErrorCode.InvalidApiName]: {\n        message: 'API name is invalid.',\n        recoverySuggestion: 'Check if the API name matches the one in your configuration or `aws-exports.js`',\n    },\n};\n\nexport { RestApiValidationErrorCode, validationErrorMap };\n//# sourceMappingURL=validation.mjs.map\n","import { parseJsonError } from '@aws-amplify/core/internals/aws-client-utils';\nimport { RestApiError } from '../errors/RestApiError.mjs';\nimport '../errors/validation.mjs';\n\n/**\n * Parses both AWS and non-AWS error responses coming from the users' backend code.\n * * AWS errors generated by the AWS services(e.g. API Gateway, Bedrock). They can be Signature errors,\n *   ClockSkew errors, etc. These responses will be parsed to errors with proper name and message from the AWS\n *   services.\n * * non-AWS errors thrown by the user code. They can contain any headers or body. Users need to access the\n *   error.response to get the headers and body and parse them accordingly. The JS error name and message will\n *   be `UnknownError` and `Unknown error` respectively.\n */\nconst parseRestApiServiceError = async (response) => {\n    if (!response) {\n        // Response is not considered an error.\n        return;\n    }\n    const parsedAwsError = await parseJsonError(stubErrorResponse(response));\n    if (!parsedAwsError) ;\n    else {\n        const bodyText = await response.body?.text();\n        return buildRestApiError(parsedAwsError, {\n            statusCode: response.statusCode,\n            headers: response.headers,\n            body: bodyText,\n        });\n    }\n};\n/**\n * The response object needs to be stub here because the parseAwsJsonError assumes the response body to be valid JSON.\n * Although this is true for AWS services, it is not true for responses from user's code. Once the response body is\n * unwrapped as JSON(and fail), it cannot be read as text again. Therefore, we need to stub the response body here to\n * make sure we can read the error response body as a JSON, and may fall back to read as text if it is not a valid JSON.\n */\nconst stubErrorResponse = (response) => {\n    let bodyTextPromise;\n    const bodyProxy = new Proxy(response.body, {\n        get(target, prop, receiver) {\n            if (prop === 'json') {\n                // For potential AWS errors, error parser will try to parse the body as JSON first.\n                return async () => {\n                    if (!bodyTextPromise) {\n                        bodyTextPromise = target.text();\n                    }\n                    try {\n                        return JSON.parse(await bodyTextPromise);\n                    }\n                    catch (error) {\n                        // If response body is not a valid JSON, we stub it to be an empty object and eventually parsed\n                        // as an unknown error\n                        return {};\n                    }\n                };\n            }\n            else if (prop === 'text') {\n                // For non-AWS errors, users can access the body as a string as a fallback.\n                return async () => {\n                    if (!bodyTextPromise) {\n                        bodyTextPromise = target.text();\n                    }\n                    return bodyTextPromise;\n                };\n            }\n            else {\n                return Reflect.get(target, prop, receiver);\n            }\n        },\n    });\n    const responseProxy = new Proxy(response, {\n        get(target, prop, receiver) {\n            if (prop === 'body') {\n                return bodyProxy;\n            }\n            else {\n                return Reflect.get(target, prop, receiver);\n            }\n        },\n    });\n    return responseProxy;\n};\n/**\n * Utility to create a new RestApiError from a service error.\n */\nconst buildRestApiError = (error, response) => {\n    const restApiError = new RestApiError({\n        name: error?.name,\n        message: error.message,\n        underlyingError: error,\n        response,\n    });\n    // $metadata is only required for backwards compatibility.\n    return Object.assign(restApiError, { $metadata: error.$metadata });\n};\n\nexport { parseRestApiServiceError };\n//# sourceMappingURL=serviceError.mjs.map\n","import { ConsoleLogger } from '@aws-amplify/core';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('RestApis');\n\nexport { logger };\n//# sourceMappingURL=logger.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst DEFAULT_REST_IAM_SIGNING_SERVICE = 'execute-api';\nconst DEFAULT_APPSYNC_API_SERVICE = 'appsync-api';\nconst DEFAULT_IAM_SIGNING_REGION = 'us-east-1';\n/**\n * The REST endpoints generated by API Gateway\n * @see {@link https://docs.aws.amazon.com/general/latest/gr/apigateway.html#apigateway_region_data_plane}\n */\nconst APIG_HOSTNAME_PATTERN = /^.+\\.([a-z0-9-]+)\\.([a-z0-9-]+)\\.amazonaws\\.com/;\n\nexport { APIG_HOSTNAME_PATTERN, DEFAULT_APPSYNC_API_SERVICE, DEFAULT_IAM_SIGNING_REGION, DEFAULT_REST_IAM_SIGNING_SERVICE };\n//# sourceMappingURL=constants.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Determines if IAM authentication should be applied for a GraphQL request.\n *\n * This function checks the `headers` of the HTTP request to determine if IAM authentication\n * is applicable. IAM authentication is considered applicable if there is no `authorization`\n * header, no `x-api-key` header, and `signingServiceInfo` is provided.\n *\n * @param request - The HTTP request object containing headers.\n * @param signingServiceInfo - Optional signing service information,\n * including service and region.\n * @returns A boolean `true` if IAM authentication should be applied.\n *\n * @internal\n */\nconst isIamAuthApplicableForGraphQL = ({ headers }, signingServiceInfo) => !headers.authorization && !headers['x-api-key'] && !!signingServiceInfo;\n/**\n * Determines if IAM authentication should be applied for a REST request.\n *\n * This function checks the `headers` of the HTTP request to determine if IAM authentication\n * is applicable. IAM authentication is considered applicable if there is no `authorization`\n * header and `signingServiceInfo` is provided.\n *\n * @param request - The HTTP request object containing headers.\n * @param signingServiceInfo - Optional signing service information,\n * including service and region.\n * @returns A boolean `true` if IAM authentication should be applied.\n *\n * @internal\n */\nconst isIamAuthApplicableForRest = ({ headers }, signingServiceInfo) => !headers.authorization && !!signingServiceInfo;\n\nexport { isIamAuthApplicableForGraphQL, isIamAuthApplicableForRest };\n//# sourceMappingURL=isIamAuthApplicable.mjs.map\n","import { fetchTransferHandler, userAgentMiddlewareFactory, retryMiddlewareFactory, signingMiddlewareFactory } from '@aws-amplify/core/internals/aws-client-utils';\nimport { composeTransferHandler } from '@aws-amplify/core/internals/aws-client-utils/composers';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nconst authenticatedHandler = composeTransferHandler(fetchTransferHandler, [\n    userAgentMiddlewareFactory,\n    retryMiddlewareFactory,\n    signingMiddlewareFactory,\n]);\n\nexport { authenticatedHandler };\n//# sourceMappingURL=authenticatedHandler.mjs.map\n","import { fetchTransferHandler, userAgentMiddlewareFactory, retryMiddlewareFactory } from '@aws-amplify/core/internals/aws-client-utils';\nimport { composeTransferHandler } from '@aws-amplify/core/internals/aws-client-utils/composers';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nconst unauthenticatedHandler = composeTransferHandler(fetchTransferHandler, [userAgentMiddlewareFactory, retryMiddlewareFactory]);\n\nexport { unauthenticatedHandler };\n//# sourceMappingURL=unauthenticatedHandler.mjs.map\n","import { jitteredBackoff, getRetryDecider } from '@aws-amplify/core/internals/aws-client-utils';\nimport '@aws-amplify/core/internals/utils';\nimport '../../errors/validation.mjs';\nimport { parseRestApiServiceError } from '../../utils/serviceError.mjs';\nimport { logger } from '../../utils/logger.mjs';\nimport { parseSigningInfo } from '../../utils/parseSigningInfo.mjs';\nimport { resolveHeaders } from '../../utils/resolveHeaders.mjs';\nimport { authenticatedHandler } from './baseHandlers/authenticatedHandler.mjs';\nimport { unauthenticatedHandler } from './baseHandlers/unauthenticatedHandler.mjs';\n\n/**\n * Make REST API call with best-effort IAM auth.\n * @param amplify Amplify instance to to resolve credentials and tokens. Should use different instance in client-side\n *   and SSR\n * @param options Options accepted from public API options when calling the handlers.\n * @param signingServiceInfo Internal-only options enable IAM auth as well as to to overwrite the IAM signing service\n *   and region. If specified, and NONE of API Key header or Auth header is present, IAM auth will be used.\n * @param iamAuthApplicable Callback function that is used to determine if IAM Auth should be used or not.\n *\n * @internal\n */\nconst transferHandler = async (amplify, options, iamAuthApplicable, signingServiceInfo) => {\n    const { url, method, headers, body, withCredentials, abortSignal, retryStrategy, } = options;\n    const resolvedBody = body\n        ? body instanceof FormData\n            ? body\n            : JSON.stringify(body ?? '')\n        : undefined;\n    const resolvedHeaders = resolveHeaders(headers, body);\n    const request = {\n        url,\n        headers: resolvedHeaders,\n        method,\n        body: resolvedBody,\n    };\n    const baseOptions = {\n        retryDecider: getRetryDeciderFromStrategy(retryStrategy ?? amplify?.libraryOptions?.API?.REST?.retryStrategy),\n        computeDelay: jitteredBackoff,\n        withCrossDomainCredentials: withCredentials,\n        abortSignal,\n    };\n    const isIamAuthApplicable = iamAuthApplicable(request, signingServiceInfo);\n    let response;\n    const credentials = await resolveCredentials(amplify);\n    if (isIamAuthApplicable && credentials) {\n        const signingInfoFromUrl = parseSigningInfo(url);\n        const signingService = signingServiceInfo?.service ?? signingInfoFromUrl.service;\n        const signingRegion = signingServiceInfo?.region ?? signingInfoFromUrl.region;\n        response = await authenticatedHandler(request, {\n            ...baseOptions,\n            credentials,\n            region: signingRegion,\n            service: signingService,\n        });\n    }\n    else {\n        response = await unauthenticatedHandler(request, {\n            ...baseOptions,\n        });\n    }\n    // Clean-up un-modeled properties from response.\n    return {\n        statusCode: response.statusCode,\n        headers: response.headers,\n        body: response.body,\n    };\n};\nconst getRetryDeciderFromStrategy = (retryStrategy) => {\n    const strategy = retryStrategy?.strategy;\n    if (strategy === 'no-retry') {\n        return () => Promise.resolve({ retryable: false });\n    }\n    return getRetryDecider(parseRestApiServiceError);\n};\nconst resolveCredentials = async (amplify) => {\n    try {\n        const { credentials } = await amplify.Auth.fetchAuthSession();\n        if (credentials) {\n            return credentials;\n        }\n    }\n    catch (e) {\n        logger.debug('No credentials available, the request will be unsigned.');\n    }\n    return null;\n};\n\nexport { transferHandler };\n//# sourceMappingURL=transferHandler.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst resolveHeaders = (headers, body) => {\n    const normalizedHeaders = {};\n    for (const key in headers) {\n        normalizedHeaders[key.toLowerCase()] = headers[key];\n    }\n    if (body) {\n        const contentType = normalizedHeaders['content-type'];\n        const isJsonCompatible = contentType &&\n            (contentType.startsWith('application/json') ||\n                (contentType.startsWith('application/') &&\n                    contentType.includes('+json')));\n        if (!isJsonCompatible) {\n            normalizedHeaders['content-type'] = 'application/json; charset=UTF-8';\n        }\n        if (body instanceof FormData) {\n            /**\n             * If body is a FormData we should not allow setting content-type.\n             * It's because runtime HTTP handlers(xhr, fetch, undici, node-fetch,\n             * etc.) will modify the content-type value when setting multipart\n             * boundary.\n             */\n            delete normalizedHeaders['content-type'];\n        }\n    }\n    return normalizedHeaders;\n};\n\nexport { resolveHeaders };\n//# sourceMappingURL=resolveHeaders.mjs.map\n","import { DEFAULT_IAM_SIGNING_REGION, DEFAULT_REST_IAM_SIGNING_SERVICE, APIG_HOSTNAME_PATTERN } from './constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Infer the signing service and region from the given URL, and for REST API only, from the Amplify configuration.\n * It supports raw API Gateway endpoint and AppSync endpoint.\n *\n * @internal\n */\nconst parseSigningInfo = (url, restApiOptions) => {\n    const { service: signingService = DEFAULT_REST_IAM_SIGNING_SERVICE, region: signingRegion = DEFAULT_IAM_SIGNING_REGION, } = restApiOptions?.amplify.getConfig()?.API?.REST?.[restApiOptions?.apiName] ??\n        {};\n    const { hostname } = url;\n    const [, service, region] = APIG_HOSTNAME_PATTERN.exec(hostname) ?? [];\n    if (service === DEFAULT_REST_IAM_SIGNING_SERVICE) {\n        // The configured endpoint is an API Gateway endpoint\n        // @see: https://docs.aws.amazon.com/apigateway/latest/developerguide/how-to-call-api.html\n        return {\n            service,\n            region: region ?? signingRegion,\n        };\n    }\n    else if (service === 'appsync-api') {\n        // AppSync endpoint is internally supported because GraphQL operation will send request using POST handler.\n        // example: https://xxxx.appsync-api.us-east-1.amazonaws.com/graphql\n        return {\n            service: 'appsync',\n            region: region ?? signingRegion,\n        };\n    }\n    else {\n        return {\n            service: signingService,\n            region: signingRegion,\n        };\n    }\n};\n\nexport { parseSigningInfo };\n//# sourceMappingURL=parseSigningInfo.mjs.map\n","import { createCancellableOperation } from '../../utils/createCancellableOperation.mjs';\nimport '@aws-amplify/core/internals/aws-client-utils';\nimport '@aws-amplify/core/internals/utils';\nimport '../../errors/validation.mjs';\nimport '../../utils/logger.mjs';\nimport { isIamAuthApplicableForGraphQL } from '../../utils/isIamAuthApplicable.mjs';\nimport { transferHandler } from './transferHandler.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * This weak map provides functionality to cancel a request given the promise containing the `post` request.\n *\n * 1. For every GraphQL POST request, an abort controller is created and supplied to the request.\n * 2. The promise fulfilled by GraphGL POST request is then mapped to that abort controller.\n * 3. The promise is returned to the external caller.\n * 4. The caller can either wait for the promise to fulfill or call `cancel(promise)` to cancel the request.\n * 5. If `cancel(promise)` is called, then the corresponding abort controller is retrieved from the map below.\n * 6. GraphQL POST request will be rejected with the error message provided during cancel.\n * 7. Caller can check if the error is because of cancelling by calling `isCancelError(error)`.\n */\nconst cancelTokenMap = new WeakMap();\n/**\n * @internal\n *\n * REST POST handler to send GraphQL request to given endpoint. By default, it will use IAM to authorize\n * the request. In some auth modes, the IAM auth has to be disabled. Here's how to set up the request auth correctly:\n * * If auth mode is 'iam', you MUST NOT set 'authorization' header and 'x-api-key' header, since it would disable IAM\n *   auth. You MUST also set 'input.options.signingServiceInfo' option.\n *   * The including 'input.options.signingServiceInfo.service' and 'input.options.signingServiceInfo.region' are\n *     optional. If omitted, the signing service and region will be inferred from url.\n * * If auth mode is 'none', you MUST NOT set 'options.signingServiceInfo' option.\n * * If auth mode is 'apiKey', you MUST set 'x-api-key' custom header.\n * * If auth mode is 'oidc' or 'lambda' or 'userPool', you MUST set 'authorization' header.\n *\n * To make the internal post cancellable, you must also call `updateRequestToBeCancellable()` with the promise from\n * internal post call and the abort controller supplied to the internal post call.\n *\n * @param amplify the AmplifyClassV6 instance - it may be the singleton used on Web, or an instance created within\n * a context created by `runWithAmplifyServerContext`\n * @param postInput an object of {@link InternalPostInput}\n * @param postInput.url The URL that the POST request sends to\n * @param postInput.options Options of the POST request\n * @param postInput.abortController The abort controller used to cancel the POST request\n * @returns a {@link RestApiResponse}\n *\n * @throws an {@link AmplifyError} with `Network Error` as the `message` when the external resource is unreachable due to one\n * of the following reasons:\n *   1. no network connection\n *   2. CORS error\n * @throws a {@link CanceledError} when the ongoing POST request get cancelled\n */\nconst post = (amplify, { url, options, abortController }) => {\n    const controller = abortController ?? new AbortController();\n    const responsePromise = createCancellableOperation(async () => {\n        const response = transferHandler(amplify, {\n            url,\n            method: 'POST',\n            ...options,\n            abortSignal: controller.signal,\n            retryStrategy: {\n                strategy: 'jittered-exponential-backoff',\n            },\n        }, isIamAuthApplicableForGraphQL, options?.signingServiceInfo);\n        return response;\n    }, controller);\n    const responseWithCleanUp = responsePromise.finally(() => {\n        cancelTokenMap.delete(responseWithCleanUp);\n    });\n    return responseWithCleanUp;\n};\n/**\n * Cancels a request given the promise returned by `post`.\n * If the request is already completed, this function does nothing.\n * It MUST be used after `updateRequestToBeCancellable` is called.\n */\nconst cancel = (promise, message) => {\n    const controller = cancelTokenMap.get(promise);\n    if (controller) {\n        controller.abort(message);\n        if (message && controller.signal.reason !== message) {\n            // In runtimes where `AbortSignal.reason` is not supported, we track the reason ourselves.\n            // @ts-expect-error reason is read-only property.\n            controller.signal.reason = message;\n        }\n        return true;\n    }\n    return false;\n};\n/**\n * MUST be used to make a promise including internal `post` API call cancellable.\n */\nconst updateRequestToBeCancellable = (promise, controller) => {\n    cancelTokenMap.set(promise, controller);\n};\n\nexport { cancel, post, updateRequestToBeCancellable };\n//# sourceMappingURL=internalPost.mjs.map\n","import { CanceledError } from '../errors/CanceledError.mjs';\nimport '@aws-amplify/core/internals/utils';\nimport '../errors/validation.mjs';\nimport { parseRestApiServiceError } from './serviceError.mjs';\nimport { logger } from './logger.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nfunction createCancellableOperation(handler, abortController) {\n    const isInternalPost = (targetHandler) => !!abortController;\n    // For creating a cancellable operation for public REST APIs, we need to create an AbortController\n    // internally. Whereas for internal POST APIs, we need to accept in the AbortController from the\n    // callers.\n    const publicApisAbortController = new AbortController();\n    const publicApisAbortSignal = publicApisAbortController.signal;\n    const internalPostAbortSignal = abortController?.signal;\n    let abortReason;\n    const job = async () => {\n        try {\n            const response = await (isInternalPost(handler)\n                ? handler()\n                : handler(publicApisAbortSignal));\n            if (response.statusCode >= 300) {\n                throw await parseRestApiServiceError(response);\n            }\n            return response;\n        }\n        catch (error) {\n            const abortSignal = internalPostAbortSignal ?? publicApisAbortSignal;\n            const message = abortReason ?? abortSignal.reason;\n            if (error.name === 'AbortError' || abortSignal?.aborted === true) {\n                const canceledError = new CanceledError({\n                    ...(message && { message }),\n                    underlyingError: error,\n                    recoverySuggestion: 'The API request was explicitly canceled. If this is not intended, validate if you called the `cancel()` function on the API request erroneously.',\n                });\n                logger.debug(error);\n                throw canceledError;\n            }\n            logger.debug(error);\n            throw error;\n        }\n    };\n    if (isInternalPost()) {\n        return job();\n    }\n    else {\n        const cancel = (abortMessage) => {\n            if (publicApisAbortSignal.aborted === true) {\n                return;\n            }\n            publicApisAbortController.abort(abortMessage);\n            // If abort reason is not supported, set a scoped reasons instead. The reason property inside an\n            // AbortSignal is a readonly property and trying to set it would throw an error.\n            if (abortMessage && publicApisAbortSignal.reason !== abortMessage) {\n                abortReason = abortMessage;\n            }\n        };\n        return { response: job(), cancel };\n    }\n}\n\nexport { createCancellableOperation };\n//# sourceMappingURL=createCancellableOperation.mjs.map\n","export { AMPLIFY_SYMBOL } from '@aws-amplify/core/internals/utils';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst MAX_DELAY_MS = 5000;\nconst NON_RETRYABLE_CODES = [400, 401, 403];\nconst NON_RETRYABLE_ERROR_TYPES = [\n    'BadRequestException',\n    'UnauthorizedException',\n];\nconst CONNECTION_STATE_CHANGE = 'ConnectionStateChange';\nvar MESSAGE_TYPES;\n(function (MESSAGE_TYPES) {\n    /**\n     * Client -> Server message.\n     * This message type is the first message after handshake and this will initialize AWS AppSync RealTime communication\n     */\n    MESSAGE_TYPES[\"GQL_CONNECTION_INIT\"] = \"connection_init\";\n    /**\n     * Server -> Client message\n     * This message type is in case there is an issue with AWS AppSync RealTime when establishing connection\n     */\n    MESSAGE_TYPES[\"GQL_CONNECTION_ERROR\"] = \"connection_error\";\n    /**\n     * Server -> Client message.\n     * This message type is for the ack response from AWS AppSync RealTime for GQL_CONNECTION_INIT message\n     */\n    MESSAGE_TYPES[\"GQL_CONNECTION_ACK\"] = \"connection_ack\";\n    /**\n     * Client -> Server message.\n     * This message type is for register subscriptions with AWS AppSync RealTime\n     */\n    MESSAGE_TYPES[\"GQL_START\"] = \"start\";\n    /**\n     * Server -> Client message.\n     * This message type is for the ack response from AWS AppSync RealTime for GQL_START message\n     */\n    MESSAGE_TYPES[\"GQL_START_ACK\"] = \"start_ack\";\n    /**\n     * Server -> Client message.\n     * This message type is for subscription message from AWS AppSync RealTime or Events\n     */\n    MESSAGE_TYPES[\"DATA\"] = \"data\";\n    /**\n     * Server -> Client message.\n     * This message type helps the client to know is still receiving messages from AWS AppSync RealTime\n     */\n    MESSAGE_TYPES[\"GQL_CONNECTION_KEEP_ALIVE\"] = \"ka\";\n    /**\n     * Client -> Server message.\n     * This message type is for unregister subscriptions with AWS AppSync RealTime\n     */\n    MESSAGE_TYPES[\"GQL_STOP\"] = \"stop\";\n    /**\n     * Server -> Client message.\n     * This message type is for the ack response from AWS AppSync RealTime for GQL_STOP message\n     */\n    MESSAGE_TYPES[\"GQL_COMPLETE\"] = \"complete\";\n    /**\n     * Server -> Client message.\n     * This message type is for sending error messages from AWS AppSync RealTime to the client\n     */\n    MESSAGE_TYPES[\"GQL_ERROR\"] = \"error\";\n    /**\n     * Client -> Server message.\n     * This message type is for registering subscriptions with Events\n     */\n    MESSAGE_TYPES[\"EVENT_SUBSCRIBE\"] = \"subscribe\";\n    /**\n     * Client -> Server message.\n     * This message type is for publishing a message with Events\n     */\n    MESSAGE_TYPES[\"EVENT_PUBLISH\"] = \"publish\";\n    /**\n     * Server -> Client message.\n     * Server acknowledges successful subscription\n     */\n    MESSAGE_TYPES[\"EVENT_SUBSCRIBE_ACK\"] = \"subscribe_success\";\n    /**\n     * Server -> Client message.\n     * Server acknowledges successful publish\n     */\n    MESSAGE_TYPES[\"EVENT_PUBLISH_ACK\"] = \"publish_success\";\n    /**\n     * Client -> Server message.\n     * This message type is for unregister subscriptions with AWS AppSync RealTime\n     */\n    MESSAGE_TYPES[\"EVENT_STOP\"] = \"unsubscribe\";\n    /**\n     * Server -> Client message.\n     * This is the ack response from AWS AppSync Events to EVENT_STOP message\n     */\n    MESSAGE_TYPES[\"EVENT_COMPLETE\"] = \"unsubscribe_success\";\n    /**\n     * Server -> Client message.\n     * This message type is for sending error messages from AWS AppSync Events to the client\n     */\n    MESSAGE_TYPES[\"EVENT_SUBSCRIBE_ERROR\"] = \"subscribe_error\";\n})(MESSAGE_TYPES || (MESSAGE_TYPES = {}));\nvar SUBSCRIPTION_STATUS;\n(function (SUBSCRIPTION_STATUS) {\n    SUBSCRIPTION_STATUS[SUBSCRIPTION_STATUS[\"PENDING\"] = 0] = \"PENDING\";\n    SUBSCRIPTION_STATUS[SUBSCRIPTION_STATUS[\"CONNECTED\"] = 1] = \"CONNECTED\";\n    SUBSCRIPTION_STATUS[SUBSCRIPTION_STATUS[\"FAILED\"] = 2] = \"FAILED\";\n})(SUBSCRIPTION_STATUS || (SUBSCRIPTION_STATUS = {}));\nvar SOCKET_STATUS;\n(function (SOCKET_STATUS) {\n    SOCKET_STATUS[SOCKET_STATUS[\"CLOSED\"] = 0] = \"CLOSED\";\n    SOCKET_STATUS[SOCKET_STATUS[\"READY\"] = 1] = \"READY\";\n    SOCKET_STATUS[SOCKET_STATUS[\"CONNECTING\"] = 2] = \"CONNECTING\";\n})(SOCKET_STATUS || (SOCKET_STATUS = {}));\nconst AWS_APPSYNC_REALTIME_HEADERS = {\n    accept: 'application/json, text/javascript',\n    'content-encoding': 'amz-1.0',\n    'content-type': 'application/json; charset=UTF-8',\n};\n/**\n * Time in milleseconds to wait for GQL_CONNECTION_INIT message\n */\nconst CONNECTION_INIT_TIMEOUT = 15000;\n/**\n * Time in milleseconds to wait for GQL_START_ACK message\n */\nconst START_ACK_TIMEOUT = 15000;\n/**\n * Default Time in milleseconds to wait for GQL_CONNECTION_KEEP_ALIVE message\n */\nconst DEFAULT_KEEP_ALIVE_TIMEOUT = 5 * 60 * 1000;\n/**\n * Default Time in milleseconds between monitoring checks of keep alive status\n */\nconst DEFAULT_KEEP_ALIVE_HEARTBEAT_TIMEOUT = 5 * 1000;\n/**\n * Default Time in milleseconds to alert for missed GQL_CONNECTION_KEEP_ALIVE message\n */\nconst DEFAULT_KEEP_ALIVE_ALERT_TIMEOUT = 65 * 1000;\n/**\n * Default delay time in milleseconds between when reconnect is triggered vs when it is attempted\n */\nconst RECONNECT_DELAY = 5 * 1000;\n/**\n * Default interval time in milleseconds between when reconnect is re-attempted\n */\nconst RECONNECT_INTERVAL = 60 * 1000;\n\nexport { AWS_APPSYNC_REALTIME_HEADERS, CONNECTION_INIT_TIMEOUT, CONNECTION_STATE_CHANGE, DEFAULT_KEEP_ALIVE_ALERT_TIMEOUT, DEFAULT_KEEP_ALIVE_HEARTBEAT_TIMEOUT, DEFAULT_KEEP_ALIVE_TIMEOUT, MAX_DELAY_MS, MESSAGE_TYPES, NON_RETRYABLE_CODES, NON_RETRYABLE_ERROR_TYPES, RECONNECT_DELAY, RECONNECT_INTERVAL, SOCKET_STATUS, START_ACK_TIMEOUT, SUBSCRIPTION_STATUS };\n//# sourceMappingURL=constants.mjs.map\n","var CONTROL_MSG;\n(function (CONTROL_MSG) {\n    CONTROL_MSG[\"CONNECTION_CLOSED\"] = \"Connection closed\";\n    CONTROL_MSG[\"CONNECTION_FAILED\"] = \"Connection failed\";\n    CONTROL_MSG[\"REALTIME_SUBSCRIPTION_INIT_ERROR\"] = \"AppSync Realtime subscription init error\";\n    CONTROL_MSG[\"SUBSCRIPTION_ACK\"] = \"Subscription ack\";\n    CONTROL_MSG[\"TIMEOUT_DISCONNECT\"] = \"Timeout disconnect\";\n})(CONTROL_MSG || (CONTROL_MSG = {}));\n/** @enum {string} */\nvar ConnectionState;\n(function (ConnectionState) {\n    /*\n     * The connection is alive and healthy\n     */\n    ConnectionState[\"Connected\"] = \"Connected\";\n    /*\n     * The connection is alive, but the connection is offline\n     */\n    ConnectionState[\"ConnectedPendingNetwork\"] = \"ConnectedPendingNetwork\";\n    /*\n     * The connection has been disconnected while in use\n     */\n    ConnectionState[\"ConnectionDisrupted\"] = \"ConnectionDisrupted\";\n    /*\n     * The connection has been disconnected and the network is offline\n     */\n    ConnectionState[\"ConnectionDisruptedPendingNetwork\"] = \"ConnectionDisruptedPendingNetwork\";\n    /*\n     * The connection is in the process of connecting\n     */\n    ConnectionState[\"Connecting\"] = \"Connecting\";\n    /*\n     * The connection is not in use and is being disconnected\n     */\n    ConnectionState[\"ConnectedPendingDisconnect\"] = \"ConnectedPendingDisconnect\";\n    /*\n     * The connection is not in use and has been disconnected\n     */\n    ConnectionState[\"Disconnected\"] = \"Disconnected\";\n    /*\n     * The connection is alive, but a keep alive message has been missed\n     */\n    ConnectionState[\"ConnectedPendingKeepAlive\"] = \"ConnectedPendingKeepAlive\";\n})(ConnectionState || (ConnectionState = {}));\n\nexport { CONTROL_MSG, ConnectionState };\n//# sourceMappingURL=PubSub.mjs.map\n","import { Reachability } from '@aws-amplify/core/internals/utils';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst ReachabilityMonitor = () => new Reachability().networkMonitor();\n\nexport { ReachabilityMonitor };\n//# sourceMappingURL=index.mjs.map\n","import { Observable, map, filter } from 'rxjs';\nimport { ConnectionState } from '../types/PubSub.mjs';\nimport { ReachabilityMonitor } from './ReachabilityMonitor/index.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst CONNECTION_CHANGE = {\n    KEEP_ALIVE_MISSED: { keepAliveState: 'unhealthy' },\n    KEEP_ALIVE: { keepAliveState: 'healthy' },\n    CONNECTION_ESTABLISHED: { connectionState: 'connected' },\n    CONNECTION_FAILED: {\n        intendedConnectionState: 'disconnected',\n        connectionState: 'disconnected',\n    },\n    CLOSING_CONNECTION: { intendedConnectionState: 'disconnected' },\n    OPENING_CONNECTION: {\n        intendedConnectionState: 'connected',\n        connectionState: 'connecting',\n    },\n    CLOSED: { connectionState: 'disconnected' },\n    ONLINE: { networkState: 'connected' },\n    OFFLINE: { networkState: 'disconnected' },\n};\nclass ConnectionStateMonitor {\n    constructor() {\n        this._networkMonitoringSubscription = undefined;\n        this._linkedConnectionState = {\n            networkState: 'connected',\n            connectionState: 'disconnected',\n            intendedConnectionState: 'disconnected',\n            keepAliveState: 'healthy',\n        };\n        // Attempt to update the state with the current actual network state\n        this._initialNetworkStateSubscription = ReachabilityMonitor().subscribe(({ online }) => {\n            this.record(online ? CONNECTION_CHANGE.ONLINE : CONNECTION_CHANGE.OFFLINE);\n            this._initialNetworkStateSubscription?.unsubscribe();\n        });\n        this._linkedConnectionStateObservable =\n            new Observable(connectionStateObserver => {\n                connectionStateObserver.next(this._linkedConnectionState);\n                this._linkedConnectionStateObserver = connectionStateObserver;\n            });\n    }\n    /**\n     * Turn network state monitoring on if it isn't on already\n     */\n    enableNetworkMonitoring() {\n        // If no initial network state was discovered, stop trying\n        this._initialNetworkStateSubscription?.unsubscribe();\n        // Maintain the network state based on the reachability monitor\n        if (this._networkMonitoringSubscription === undefined) {\n            this._networkMonitoringSubscription = ReachabilityMonitor().subscribe(({ online }) => {\n                this.record(online ? CONNECTION_CHANGE.ONLINE : CONNECTION_CHANGE.OFFLINE);\n            });\n        }\n    }\n    /**\n     * Turn network state monitoring off if it isn't off already\n     */\n    disableNetworkMonitoring() {\n        this._networkMonitoringSubscription?.unsubscribe();\n        this._networkMonitoringSubscription = undefined;\n    }\n    /**\n     * Get the observable that allows us to monitor the connection state\n     *\n     * @returns {Observable<ConnectionState>} - The observable that emits ConnectionState updates\n     */\n    get connectionStateObservable() {\n        let previous;\n        // The linked state aggregates state changes to any of the network, connection,\n        // intendedConnection and keepAliveHealth. Some states will change these independent\n        // states without changing the overall connection state.\n        // After translating from linked states to ConnectionState, then remove any duplicates\n        return this._linkedConnectionStateObservable\n            .pipe(map(value => {\n            return this.connectionStatesTranslator(value);\n        }))\n            .pipe(filter(current => {\n            const toInclude = current !== previous;\n            previous = current;\n            return toInclude;\n        }));\n    }\n    /*\n     * Updates local connection state and emits the full state to the observer.\n     */\n    record(statusUpdates) {\n        // Maintain the network monitor\n        if (statusUpdates.intendedConnectionState === 'connected') {\n            this.enableNetworkMonitoring();\n        }\n        else if (statusUpdates.intendedConnectionState === 'disconnected') {\n            this.disableNetworkMonitoring();\n        }\n        // Maintain the socket state\n        const newSocketStatus = {\n            ...this._linkedConnectionState,\n            ...statusUpdates,\n        };\n        this._linkedConnectionState = { ...newSocketStatus };\n        this._linkedConnectionStateObserver?.next(this._linkedConnectionState);\n    }\n    /*\n     * Translate the ConnectionState structure into a specific ConnectionState string literal union\n     */\n    connectionStatesTranslator({ connectionState, networkState, intendedConnectionState, keepAliveState, }) {\n        if (connectionState === 'connected' && networkState === 'disconnected')\n            return ConnectionState.ConnectedPendingNetwork;\n        if (connectionState === 'connected' &&\n            intendedConnectionState === 'disconnected')\n            return ConnectionState.ConnectedPendingDisconnect;\n        if (connectionState === 'disconnected' &&\n            intendedConnectionState === 'connected' &&\n            networkState === 'disconnected')\n            return ConnectionState.ConnectionDisruptedPendingNetwork;\n        if (connectionState === 'disconnected' &&\n            intendedConnectionState === 'connected')\n            return ConnectionState.ConnectionDisrupted;\n        if (connectionState === 'connected' && keepAliveState === 'unhealthy')\n            return ConnectionState.ConnectedPendingKeepAlive;\n        // All remaining states directly correspond to the connection state\n        if (connectionState === 'connecting')\n            return ConnectionState.Connecting;\n        if (connectionState === 'disconnected')\n            return ConnectionState.Disconnected;\n        return ConnectionState.Connected;\n    }\n}\n\nexport { CONNECTION_CHANGE, ConnectionStateMonitor };\n//# sourceMappingURL=ConnectionStateMonitor.mjs.map\n","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function filter(predicate, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) { return predicate.call(thisArg, value, index++) && subscriber.next(value); }));\n    });\n}\n//# sourceMappingURL=filter.js.map","import { RECONNECT_INTERVAL, RECONNECT_DELAY } from '../Providers/constants.mjs';\n\nvar ReconnectEvent;\n(function (ReconnectEvent) {\n    ReconnectEvent[\"START_RECONNECT\"] = \"START_RECONNECT\";\n    ReconnectEvent[\"HALT_RECONNECT\"] = \"HALT_RECONNECT\";\n})(ReconnectEvent || (ReconnectEvent = {}));\n/**\n * Captures the reconnect event logic used to determine when to reconnect to PubSub providers.\n *   Reconnect attempts are delayed by 5 seconds to let the interface settle.\n *   Attempting to reconnect only once creates unrecoverable states when the network state isn't\n *   supported by the browser, so this keeps retrying every minute until halted.\n */\nclass ReconnectionMonitor {\n    constructor() {\n        this.reconnectObservers = [];\n    }\n    /**\n     * Add reconnect observer to the list of observers to alert on reconnect\n     */\n    addObserver(reconnectObserver) {\n        this.reconnectObservers.push(reconnectObserver);\n    }\n    /**\n     * Given a reconnect event, start the appropriate behavior\n     */\n    record(event) {\n        if (event === ReconnectEvent.START_RECONNECT) {\n            // If the reconnection hasn't been started\n            if (this.reconnectSetTimeoutId === undefined &&\n                this.reconnectIntervalId === undefined) {\n                this.reconnectSetTimeoutId = setTimeout(() => {\n                    // Reconnect now\n                    this._triggerReconnect();\n                    // Retry reconnect every periodically until it works\n                    this.reconnectIntervalId = setInterval(() => {\n                        this._triggerReconnect();\n                    }, RECONNECT_INTERVAL);\n                }, RECONNECT_DELAY);\n            }\n        }\n        if (event === ReconnectEvent.HALT_RECONNECT) {\n            if (this.reconnectIntervalId) {\n                clearInterval(this.reconnectIntervalId);\n                this.reconnectIntervalId = undefined;\n            }\n            if (this.reconnectSetTimeoutId) {\n                clearTimeout(this.reconnectSetTimeoutId);\n                this.reconnectSetTimeoutId = undefined;\n            }\n        }\n    }\n    /**\n     * Complete all reconnect observers\n     */\n    close() {\n        this.reconnectObservers.forEach(reconnectObserver => {\n            reconnectObserver.complete?.();\n        });\n    }\n    _triggerReconnect() {\n        this.reconnectObservers.forEach(reconnectObserver => {\n            reconnectObserver.next?.();\n        });\n    }\n}\n\nexport { ReconnectEvent, ReconnectionMonitor };\n//# sourceMappingURL=ReconnectionMonitor.mjs.map\n","import { AmplifyUrlSearchParams, AmplifyUrl } from '@aws-amplify/core/internals/utils';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst protocol = 'wss://';\nconst standardDomainPattern = /^https:\\/\\/\\w{26}\\.appsync-api\\.\\w{2}(?:(?:-\\w{2,})+)-\\d\\.amazonaws.com(?:\\.cn)?\\/graphql$/i;\nconst eventDomainPattern = /^https:\\/\\/\\w{26}\\.\\w+-api\\.\\w{2}(?:(?:-\\w{2,})+)-\\d\\.amazonaws.com(?:\\.cn)?\\/event$/i;\nconst customDomainPath = '/realtime';\nconst isCustomDomain = (url) => {\n    return url.match(standardDomainPattern) === null;\n};\nconst isEventDomain = (url) => url.match(eventDomainPattern) !== null;\nconst getRealtimeEndpointUrl = (appSyncGraphqlEndpoint) => {\n    let realtimeEndpoint = appSyncGraphqlEndpoint ?? '';\n    if (isEventDomain(realtimeEndpoint)) {\n        realtimeEndpoint = realtimeEndpoint\n            .concat(customDomainPath)\n            .replace('ddpg-api', 'grt-gamma')\n            .replace('appsync-api', 'appsync-realtime-api');\n    }\n    else if (isCustomDomain(realtimeEndpoint)) {\n        realtimeEndpoint = realtimeEndpoint.concat(customDomainPath);\n    }\n    else {\n        realtimeEndpoint = realtimeEndpoint\n            .replace('appsync-api', 'appsync-realtime-api')\n            .replace('gogi-beta', 'grt-beta')\n            .replace('ddpg-api', 'grt-gamma');\n    }\n    realtimeEndpoint = realtimeEndpoint\n        .replace('https://', protocol)\n        .replace('http://', protocol);\n    return new AmplifyUrl(realtimeEndpoint);\n};\n/**\n * Strips out `Authorization` header if present\n */\nconst extractNonAuthHeaders = (headers) => {\n    if (!headers) {\n        return {};\n    }\n    if ('Authorization' in headers) {\n        const { Authorization: _, ...nonAuthHeaders } = headers;\n        return nonAuthHeaders;\n    }\n    return headers;\n};\n/**\n *\n * @param headers - http headers\n * @returns uri-encoded query parameters derived from custom headers\n */\nconst queryParamsFromCustomHeaders = (headers) => {\n    const nonAuthHeaders = extractNonAuthHeaders(headers);\n    const params = new AmplifyUrlSearchParams();\n    Object.entries(nonAuthHeaders).forEach(([k, v]) => {\n        params.append(k, v);\n    });\n    return params;\n};\n/**\n * Normalizes AppSync realtime endpoint URL\n *\n * @param appSyncGraphqlEndpoint - AppSync endpointUri from config\n * @param urlParams - URLSearchParams\n * @returns fully resolved string realtime endpoint URL\n */\nconst realtimeUrlWithQueryString = (appSyncGraphqlEndpoint, urlParams) => {\n    const realtimeEndpointUrl = getRealtimeEndpointUrl(appSyncGraphqlEndpoint);\n    // preserves any query params a customer might manually set in the configuration\n    const existingParams = new AmplifyUrlSearchParams(realtimeEndpointUrl.search);\n    for (const [k, v] of urlParams.entries()) {\n        existingParams.append(k, v);\n    }\n    realtimeEndpointUrl.search = existingParams.toString();\n    return realtimeEndpointUrl.toString();\n};\n// TODO: move to separate file?\nconst additionalHeadersFromOptions = async (options) => {\n    const { appSyncGraphqlEndpoint, query, libraryConfigHeaders = () => ({}), additionalHeaders = {}, authToken, } = options;\n    let additionalCustomHeaders = {};\n    const _libraryConfigHeaders = await libraryConfigHeaders();\n    if (typeof additionalHeaders === 'function') {\n        const requestOptions = {\n            url: appSyncGraphqlEndpoint || '',\n            queryString: query || '',\n        };\n        additionalCustomHeaders = await additionalHeaders(requestOptions);\n    }\n    else {\n        additionalCustomHeaders = additionalHeaders;\n    }\n    // if an authorization header is set, have the explicit, operation-level authToken take precedence\n    if (authToken) {\n        additionalCustomHeaders = {\n            ...additionalCustomHeaders,\n            Authorization: authToken,\n        };\n    }\n    return {\n        additionalCustomHeaders,\n        libraryConfigHeaders: _libraryConfigHeaders,\n    };\n};\n\nexport { additionalHeadersFromOptions, getRealtimeEndpointUrl, isCustomDomain, queryParamsFromCustomHeaders, realtimeUrlWithQueryString };\n//# sourceMappingURL=appsyncUrl.mjs.map\n","import { ConsoleLogger, fetchAuthSession } from '@aws-amplify/core';\nimport { signRequest } from '@aws-amplify/core/internals/aws-client-utils';\nimport { AmplifyUrl } from '@aws-amplify/core/internals/utils';\nimport { AWS_APPSYNC_REALTIME_HEADERS } from '../constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('AWSAppSyncRealTimeProvider Auth');\nconst awsAuthTokenHeader = async ({ host }) => {\n    const session = await fetchAuthSession();\n    return {\n        Authorization: session?.tokens?.accessToken?.toString(),\n        host,\n    };\n};\nconst awsRealTimeApiKeyHeader = async ({ apiKey, host, }) => {\n    const dt = new Date();\n    const dtStr = dt.toISOString().replace(/[:-]|\\.\\d{3}/g, '');\n    return {\n        host,\n        'x-amz-date': dtStr,\n        'x-api-key': apiKey,\n    };\n};\nconst awsRealTimeIAMHeader = async ({ payload, canonicalUri, appSyncGraphqlEndpoint, region, }) => {\n    const endpointInfo = {\n        region,\n        service: 'appsync',\n    };\n    const creds = (await fetchAuthSession()).credentials;\n    const request = {\n        url: `${appSyncGraphqlEndpoint}${canonicalUri}`,\n        data: payload,\n        method: 'POST',\n        headers: { ...AWS_APPSYNC_REALTIME_HEADERS },\n    };\n    const signedParams = signRequest({\n        headers: request.headers,\n        method: request.method,\n        url: new AmplifyUrl(request.url),\n        body: request.data,\n    }, {\n        credentials: creds,\n        signingRegion: endpointInfo.region,\n        signingService: endpointInfo.service,\n    });\n    return signedParams.headers;\n};\nconst customAuthHeader = async ({ host, additionalCustomHeaders, }) => {\n    /**\n     * If `additionalHeaders` was provided to the subscription as a function,\n     * the headers that are returned by that function will already have been\n     * provided before this function is called.\n     */\n    if (!additionalCustomHeaders?.Authorization) {\n        throw new Error('No auth token specified');\n    }\n    return {\n        Authorization: additionalCustomHeaders.Authorization,\n        host,\n    };\n};\nconst awsRealTimeHeaderBasedAuth = async ({ apiKey, authenticationType, canonicalUri, appSyncGraphqlEndpoint, region, additionalCustomHeaders, payload, }) => {\n    const headerHandler = {\n        apiKey: awsRealTimeApiKeyHeader,\n        iam: awsRealTimeIAMHeader,\n        oidc: awsAuthTokenHeader,\n        userPool: awsAuthTokenHeader,\n        lambda: customAuthHeader,\n        none: customAuthHeader,\n    };\n    if (!authenticationType || !headerHandler[authenticationType]) {\n        logger.debug(`Authentication type ${authenticationType} not supported`);\n        return undefined;\n    }\n    else {\n        const handler = headerHandler[authenticationType];\n        const host = appSyncGraphqlEndpoint\n            ? new AmplifyUrl(appSyncGraphqlEndpoint).host\n            : undefined;\n        const resolvedApiKey = authenticationType === 'apiKey' ? apiKey : undefined;\n        logger.debug(`Authenticating with ${JSON.stringify(authenticationType)}`);\n        const result = await handler({\n            payload,\n            canonicalUri,\n            appSyncGraphqlEndpoint,\n            apiKey: resolvedApiKey,\n            region,\n            host,\n            additionalCustomHeaders,\n        });\n        return result;\n    }\n};\n\nexport { awsRealTimeHeaderBasedAuth };\n//# sourceMappingURL=authHeaders.mjs.map\n","import { Observable } from 'rxjs';\nimport { GraphQLError } from 'graphql';\nimport { ConsoleLogger, Hub } from '@aws-amplify/core';\nimport { NonRetryableError, amplifyUuid, isNonRetryableError, base64Encoder, jitteredExponentialRetry, AMPLIFY_SYMBOL } from '@aws-amplify/core/internals/utils';\nimport { ConnectionState, CONTROL_MSG } from '../../types/PubSub.mjs';\nimport { SOCKET_STATUS, NON_RETRYABLE_CODES, NON_RETRYABLE_ERROR_TYPES, SUBSCRIPTION_STATUS, START_ACK_TIMEOUT, DEFAULT_KEEP_ALIVE_ALERT_TIMEOUT, MESSAGE_TYPES, MAX_DELAY_MS, CONNECTION_INIT_TIMEOUT, DEFAULT_KEEP_ALIVE_HEARTBEAT_TIMEOUT, CONNECTION_STATE_CHANGE } from '../constants.mjs';\nimport { ConnectionStateMonitor, CONNECTION_CHANGE } from '../../utils/ConnectionStateMonitor.mjs';\nimport { ReconnectionMonitor, ReconnectEvent } from '../../utils/ReconnectionMonitor.mjs';\nimport { additionalHeadersFromOptions, queryParamsFromCustomHeaders, realtimeUrlWithQueryString } from './appsyncUrl.mjs';\nimport { awsRealTimeHeaderBasedAuth } from './authHeaders.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst dispatchApiEvent = (payload) => {\n    Hub.dispatch('api', payload, 'PubSub', AMPLIFY_SYMBOL);\n};\nclass AWSWebSocketProvider {\n    constructor(args) {\n        this.subscriptionObserverMap = new Map();\n        this.allowNoSubscriptions = false;\n        this.socketStatus = SOCKET_STATUS.CLOSED;\n        this.keepAliveTimestamp = Date.now();\n        this.promiseArray = [];\n        this.connectionStateMonitor = new ConnectionStateMonitor();\n        this.reconnectionMonitor = new ReconnectionMonitor();\n        /**\n         * Open WebSocket connection & perform handshake\n         * Ref: https://docs.aws.amazon.com/appsync/latest/devguide/real-time-websocket-client.html#appsynclong-real-time-websocket-client-implementation-guide-for-graphql-subscriptions\n         *\n         * @param subprotocol -\n         */\n        this._establishConnection = async (awsRealTimeUrl, subprotocol) => {\n            this.logger.debug(`Establishing WebSocket connection to ${awsRealTimeUrl}`);\n            try {\n                await this._openConnection(awsRealTimeUrl, subprotocol);\n                await this._initiateHandshake();\n            }\n            catch (err) {\n                const { errorType, errorCode } = err;\n                if (NON_RETRYABLE_CODES.includes(errorCode) ||\n                    // Event API does not currently return `errorCode`. This may change in the future.\n                    // For now fall back to also checking known non-retryable error types\n                    NON_RETRYABLE_ERROR_TYPES.includes(errorType)) {\n                    throw new NonRetryableError(errorType);\n                }\n                else if (errorType) {\n                    throw new Error(errorType);\n                }\n                else {\n                    throw err;\n                }\n            }\n        };\n        this.logger = new ConsoleLogger(args.providerName);\n        this.wsProtocolName = args.wsProtocolName;\n        this.wsConnectUri = args.connectUri;\n        this.connectionStateMonitorSubscription =\n            this._startConnectionStateMonitoring();\n    }\n    /**\n     * Mark the socket closed and release all active listeners\n     */\n    close() {\n        // Mark the socket closed both in status and the connection monitor\n        this.socketStatus = SOCKET_STATUS.CLOSED;\n        this.connectionStateMonitor.record(CONNECTION_CHANGE.CONNECTION_FAILED);\n        // Turn off the subscription monitor Hub publishing\n        this.connectionStateMonitorSubscription.unsubscribe();\n        // Complete all reconnect observers\n        this.reconnectionMonitor.close();\n        return new Promise((resolve, reject) => {\n            if (this.awsRealTimeSocket) {\n                this.awsRealTimeSocket.onclose = (_) => {\n                    this._closeSocket();\n                    this.subscriptionObserverMap = new Map();\n                    this.awsRealTimeSocket = undefined;\n                    resolve();\n                };\n                this.awsRealTimeSocket.onerror = (err) => {\n                    reject(err);\n                };\n                this.awsRealTimeSocket.close();\n            }\n            else {\n                resolve();\n            }\n        });\n    }\n    subscribe(options, customUserAgentDetails) {\n        return new Observable(observer => {\n            if (!options?.appSyncGraphqlEndpoint) {\n                observer.error({\n                    errors: [\n                        {\n                            ...new GraphQLError(`Subscribe only available for AWS AppSync endpoint`),\n                        },\n                    ],\n                });\n                observer.complete();\n                return;\n            }\n            let subscriptionStartInProgress = false;\n            const subscriptionId = amplifyUuid();\n            const startSubscription = () => {\n                if (!subscriptionStartInProgress) {\n                    subscriptionStartInProgress = true;\n                    this._startSubscriptionWithAWSAppSyncRealTime({\n                        options,\n                        observer,\n                        subscriptionId,\n                        customUserAgentDetails,\n                    })\n                        .catch(err => {\n                        this.logger.debug(`${CONTROL_MSG.REALTIME_SUBSCRIPTION_INIT_ERROR}: ${err}`);\n                        this._closeSocket();\n                    })\n                        .finally(() => {\n                        subscriptionStartInProgress = false;\n                    });\n                }\n            };\n            // Add an observable to the reconnection list to manage reconnection for this subscription\n            const reconnectSubscription = new Observable(reconnectSubscriptionObserver => {\n                this.reconnectionMonitor.addObserver(reconnectSubscriptionObserver);\n            }).subscribe(() => {\n                startSubscription();\n            });\n            startSubscription();\n            return async () => {\n                await this._cleanupSubscription(subscriptionId, reconnectSubscription);\n            };\n        });\n    }\n    async connect(options) {\n        if (this.socketStatus === SOCKET_STATUS.READY) {\n            return;\n        }\n        await this._connectWebSocket(options);\n    }\n    async publish(options, customUserAgentDetails) {\n        if (this.socketStatus !== SOCKET_STATUS.READY) {\n            throw new Error('Subscription has not been initialized');\n        }\n        return this._publishMessage(options, customUserAgentDetails);\n    }\n    async _connectWebSocket(options) {\n        const { apiKey, appSyncGraphqlEndpoint, authenticationType, region } = options;\n        const { additionalCustomHeaders } = await additionalHeadersFromOptions(options);\n        this.connectionStateMonitor.record(CONNECTION_CHANGE.OPENING_CONNECTION);\n        await this._initializeWebSocketConnection({\n            apiKey,\n            appSyncGraphqlEndpoint,\n            authenticationType,\n            region,\n            additionalCustomHeaders,\n        });\n    }\n    async _publishMessage(options, customUserAgentDetails) {\n        const subscriptionId = amplifyUuid();\n        const { additionalCustomHeaders, libraryConfigHeaders } = await additionalHeadersFromOptions(options);\n        const serializedSubscriptionMessage = await this._prepareSubscriptionPayload({\n            options,\n            subscriptionId,\n            customUserAgentDetails,\n            additionalCustomHeaders,\n            libraryConfigHeaders,\n            publish: true,\n        });\n        return new Promise((resolve, reject) => {\n            if (this.awsRealTimeSocket) {\n                const publishListener = (event) => {\n                    const data = JSON.parse(event.data);\n                    if (data.id === subscriptionId && data.type === 'publish_success') {\n                        this.awsRealTimeSocket &&\n                            this.awsRealTimeSocket.removeEventListener('message', publishListener);\n                        cleanup();\n                        resolve();\n                    }\n                    if (data.errors && data.errors.length > 0) {\n                        const errorTypes = data.errors.map((error) => error.errorType);\n                        cleanup();\n                        reject(new Error(`Publish errors: ${errorTypes.join(', ')}`));\n                    }\n                };\n                const errorListener = (error) => {\n                    cleanup();\n                    reject(new Error(`WebSocket error: ${error}`));\n                };\n                const closeListener = () => {\n                    cleanup();\n                    reject(new Error('WebSocket is closed'));\n                };\n                const cleanup = () => {\n                    this.awsRealTimeSocket?.removeEventListener('message', publishListener);\n                    this.awsRealTimeSocket?.removeEventListener('error', errorListener);\n                    this.awsRealTimeSocket?.removeEventListener('close', closeListener);\n                };\n                this.awsRealTimeSocket.addEventListener('message', publishListener);\n                this.awsRealTimeSocket.addEventListener('error', errorListener);\n                this.awsRealTimeSocket.addEventListener('close', closeListener);\n                this.awsRealTimeSocket.send(serializedSubscriptionMessage);\n            }\n            else {\n                reject(new Error('WebSocket is not connected'));\n            }\n        });\n    }\n    async _cleanupSubscription(subscriptionId, reconnectSubscription) {\n        // Cleanup reconnection subscription\n        reconnectSubscription?.unsubscribe();\n        // Cleanup after unsubscribing or observer.complete was called after _startSubscriptionWithAWSAppSyncRealTime\n        try {\n            // Waiting that subscription has been connected before trying to unsubscribe\n            await this._waitForSubscriptionToBeConnected(subscriptionId);\n            const { subscriptionState } = this.subscriptionObserverMap.get(subscriptionId) || {};\n            if (!subscriptionState) {\n                // subscription already unsubscribed\n                return;\n            }\n            if (subscriptionState === SUBSCRIPTION_STATUS.CONNECTED) {\n                this._sendUnsubscriptionMessage(subscriptionId);\n            }\n            else {\n                throw new Error('Subscription never connected');\n            }\n        }\n        catch (err) {\n            this.logger.debug(`Error while unsubscribing ${err}`);\n        }\n        finally {\n            this._removeSubscriptionObserver(subscriptionId);\n        }\n    }\n    // Monitor the connection state and pass changes along to Hub\n    _startConnectionStateMonitoring() {\n        return this.connectionStateMonitor.connectionStateObservable.subscribe(connectionState => {\n            dispatchApiEvent({\n                event: CONNECTION_STATE_CHANGE,\n                data: {\n                    provider: this,\n                    connectionState,\n                },\n                message: `Connection state is ${connectionState}`,\n            });\n            this.connectionState = connectionState;\n            // Trigger START_RECONNECT when the connection is disrupted\n            if (connectionState === ConnectionState.ConnectionDisrupted) {\n                this.reconnectionMonitor.record(ReconnectEvent.START_RECONNECT);\n            }\n            // Trigger HALT_RECONNECT to halt reconnection attempts when the state is anything other than\n            // ConnectionDisrupted or Connecting\n            if ([\n                ConnectionState.Connected,\n                ConnectionState.ConnectedPendingDisconnect,\n                ConnectionState.ConnectedPendingKeepAlive,\n                ConnectionState.ConnectedPendingNetwork,\n                ConnectionState.ConnectionDisruptedPendingNetwork,\n                ConnectionState.Disconnected,\n            ].includes(connectionState)) {\n                this.reconnectionMonitor.record(ReconnectEvent.HALT_RECONNECT);\n            }\n        });\n    }\n    async _startSubscriptionWithAWSAppSyncRealTime({ options, observer, subscriptionId, customUserAgentDetails, }) {\n        const { query, variables } = options;\n        this.subscriptionObserverMap.set(subscriptionId, {\n            observer,\n            query: query ?? '',\n            variables: variables ?? {},\n            subscriptionState: SUBSCRIPTION_STATUS.PENDING,\n            startAckTimeoutId: undefined,\n        });\n        const { additionalCustomHeaders, libraryConfigHeaders } = await additionalHeadersFromOptions(options);\n        const serializedSubscriptionMessage = await this._prepareSubscriptionPayload({\n            options,\n            subscriptionId,\n            customUserAgentDetails,\n            additionalCustomHeaders,\n            libraryConfigHeaders,\n        });\n        try {\n            await this._connectWebSocket(options);\n        }\n        catch (err) {\n            this._logStartSubscriptionError(subscriptionId, observer, err);\n            return;\n        }\n        // Potential race condition can occur when unsubscribe is called during _initializeWebSocketConnection.\n        // E.g.unsubscribe gets invoked prior to finishing WebSocket handshake or START_ACK.\n        // Both subscriptionFailedCallback and subscriptionReadyCallback are used to synchronized this.\n        const { subscriptionFailedCallback, subscriptionReadyCallback } = this.subscriptionObserverMap.get(subscriptionId) ?? {};\n        // This must be done before sending the message in order to be listening immediately\n        this.subscriptionObserverMap.set(subscriptionId, {\n            observer,\n            subscriptionState: SUBSCRIPTION_STATUS.PENDING,\n            query: query ?? '',\n            variables: variables ?? {},\n            subscriptionReadyCallback,\n            subscriptionFailedCallback,\n            startAckTimeoutId: setTimeout(() => {\n                this._timeoutStartSubscriptionAck(subscriptionId);\n            }, START_ACK_TIMEOUT),\n        });\n        if (this.awsRealTimeSocket) {\n            this.awsRealTimeSocket.send(serializedSubscriptionMessage);\n        }\n    }\n    // Log logic for start subscription failures\n    _logStartSubscriptionError(subscriptionId, observer, err) {\n        this.logger.debug({ err });\n        const message = String(err.message ?? '');\n        // Resolving to give the state observer time to propogate the update\n        this._closeSocket();\n        // Capture the error only when the network didn't cause disruption\n        if (this.connectionState !== ConnectionState.ConnectionDisruptedPendingNetwork) {\n            // When the error is non-retriable, error out the observable\n            if (isNonRetryableError(err)) {\n                observer.error({\n                    errors: [\n                        {\n                            ...new GraphQLError(`${CONTROL_MSG.CONNECTION_FAILED}: ${message}`),\n                        },\n                    ],\n                });\n            }\n            else {\n                this.logger.debug(`${CONTROL_MSG.CONNECTION_FAILED}: ${message}`);\n            }\n            const { subscriptionFailedCallback } = this.subscriptionObserverMap.get(subscriptionId) || {};\n            // Notify concurrent unsubscription\n            if (typeof subscriptionFailedCallback === 'function') {\n                subscriptionFailedCallback();\n            }\n        }\n    }\n    // Waiting that subscription has been connected before trying to unsubscribe\n    async _waitForSubscriptionToBeConnected(subscriptionId) {\n        const subscriptionObserver = this.subscriptionObserverMap.get(subscriptionId);\n        if (subscriptionObserver) {\n            const { subscriptionState } = subscriptionObserver;\n            // This in case unsubscribe is invoked before sending start subscription message\n            if (subscriptionState === SUBSCRIPTION_STATUS.PENDING) {\n                return new Promise((resolve, reject) => {\n                    const { observer, subscriptionState: observedSubscriptionState, variables, query, } = subscriptionObserver;\n                    this.subscriptionObserverMap.set(subscriptionId, {\n                        observer,\n                        subscriptionState: observedSubscriptionState,\n                        variables,\n                        query,\n                        subscriptionReadyCallback: resolve,\n                        subscriptionFailedCallback: reject,\n                    });\n                });\n            }\n        }\n    }\n    _sendUnsubscriptionMessage(subscriptionId) {\n        try {\n            if (this.awsRealTimeSocket &&\n                this.awsRealTimeSocket.readyState === WebSocket.OPEN &&\n                this.socketStatus === SOCKET_STATUS.READY) {\n                // Preparing unsubscribe message to stop receiving messages for that subscription\n                const unsubscribeMessage = this._unsubscribeMessage(subscriptionId);\n                const stringToAWSRealTime = JSON.stringify(unsubscribeMessage);\n                this.awsRealTimeSocket.send(stringToAWSRealTime);\n            }\n        }\n        catch (err) {\n            // If GQL_STOP is not sent because of disconnection issue, then there is nothing the client can do\n            this.logger.debug({ err });\n        }\n    }\n    _removeSubscriptionObserver(subscriptionId) {\n        this.subscriptionObserverMap.delete(subscriptionId);\n        // Verifying 1000ms after removing subscription in case there are new subscription unmount/mount\n        if (!this.allowNoSubscriptions) {\n            setTimeout(this._closeSocketIfRequired.bind(this), 1000);\n        }\n    }\n    _closeSocketIfRequired() {\n        if (this.subscriptionObserverMap.size > 0) {\n            // Active subscriptions on the WebSocket\n            return;\n        }\n        if (!this.awsRealTimeSocket) {\n            this.socketStatus = SOCKET_STATUS.CLOSED;\n            return;\n        }\n        this.connectionStateMonitor.record(CONNECTION_CHANGE.CLOSING_CONNECTION);\n        if (this.awsRealTimeSocket.bufferedAmount > 0) {\n            // Still data on the WebSocket\n            setTimeout(this._closeSocketIfRequired.bind(this), 1000);\n        }\n        else {\n            this.logger.debug('closing WebSocket...');\n            const tempSocket = this.awsRealTimeSocket;\n            // Cleaning callbacks to avoid race condition, socket still exists\n            tempSocket.onclose = null;\n            tempSocket.onerror = null;\n            tempSocket.close(1000);\n            this.awsRealTimeSocket = undefined;\n            this.socketStatus = SOCKET_STATUS.CLOSED;\n            this._closeSocket();\n        }\n    }\n    maintainKeepAlive() {\n        this.keepAliveTimestamp = Date.now();\n    }\n    keepAliveHeartbeat(connectionTimeoutMs) {\n        const currentTime = Date.now();\n        // Check for missed KA message\n        if (currentTime - this.keepAliveTimestamp >\n            DEFAULT_KEEP_ALIVE_ALERT_TIMEOUT) {\n            this.connectionStateMonitor.record(CONNECTION_CHANGE.KEEP_ALIVE_MISSED);\n        }\n        else {\n            this.connectionStateMonitor.record(CONNECTION_CHANGE.KEEP_ALIVE);\n        }\n        // Recognize we are disconnected if we haven't seen messages in the keep alive timeout period\n        if (currentTime - this.keepAliveTimestamp > connectionTimeoutMs) {\n            this._errorDisconnect(CONTROL_MSG.TIMEOUT_DISCONNECT);\n        }\n    }\n    _handleIncomingSubscriptionMessage(message) {\n        if (typeof message.data !== 'string') {\n            return;\n        }\n        const [isData, data] = this._handleSubscriptionData(message);\n        if (isData) {\n            this.maintainKeepAlive();\n            return;\n        }\n        const { type, id, payload } = data;\n        const { observer = null, query = '', variables = {}, startAckTimeoutId, subscriptionReadyCallback, subscriptionFailedCallback, } = this.subscriptionObserverMap.get(id) || {};\n        if (type === MESSAGE_TYPES.GQL_START_ACK ||\n            type === MESSAGE_TYPES.EVENT_SUBSCRIBE_ACK) {\n            this.logger.debug(`subscription ready for ${JSON.stringify({ query, variables })}`);\n            if (typeof subscriptionReadyCallback === 'function') {\n                subscriptionReadyCallback();\n            }\n            if (startAckTimeoutId)\n                clearTimeout(startAckTimeoutId);\n            dispatchApiEvent({\n                event: CONTROL_MSG.SUBSCRIPTION_ACK,\n                data: { query, variables },\n                message: 'Connection established for subscription',\n            });\n            const subscriptionState = SUBSCRIPTION_STATUS.CONNECTED;\n            if (observer) {\n                this.subscriptionObserverMap.set(id, {\n                    observer,\n                    query,\n                    variables,\n                    startAckTimeoutId: undefined,\n                    subscriptionState,\n                    subscriptionReadyCallback,\n                    subscriptionFailedCallback,\n                });\n            }\n            this.connectionStateMonitor.record(CONNECTION_CHANGE.CONNECTION_ESTABLISHED);\n            return;\n        }\n        if (type === MESSAGE_TYPES.GQL_CONNECTION_KEEP_ALIVE) {\n            this.maintainKeepAlive();\n            return;\n        }\n        if (type === MESSAGE_TYPES.GQL_ERROR ||\n            type === MESSAGE_TYPES.EVENT_SUBSCRIBE_ERROR) {\n            const subscriptionState = SUBSCRIPTION_STATUS.FAILED;\n            if (observer) {\n                this.subscriptionObserverMap.set(id, {\n                    observer,\n                    query,\n                    variables,\n                    startAckTimeoutId,\n                    subscriptionReadyCallback,\n                    subscriptionFailedCallback,\n                    subscriptionState,\n                });\n                let errorMessage = JSON.stringify(payload ?? data);\n                if (type === MESSAGE_TYPES.EVENT_SUBSCRIBE_ERROR) {\n                    const { errors } = JSON.parse(String(message.data));\n                    if (Array.isArray(errors) && errors.length > 0) {\n                        const error = errors[0];\n                        errorMessage = `${error.errorType}: ${error.message}`;\n                    }\n                }\n                this.logger.debug(`${CONTROL_MSG.CONNECTION_FAILED}: ${errorMessage}`);\n                observer.error({\n                    errors: [\n                        {\n                            ...new GraphQLError(`${CONTROL_MSG.CONNECTION_FAILED}: ${errorMessage}`),\n                        },\n                    ],\n                });\n                if (startAckTimeoutId)\n                    clearTimeout(startAckTimeoutId);\n                if (typeof subscriptionFailedCallback === 'function') {\n                    subscriptionFailedCallback();\n                }\n            }\n        }\n    }\n    _errorDisconnect(msg) {\n        this.logger.debug(`Disconnect error: ${msg}`);\n        if (this.awsRealTimeSocket) {\n            this._closeSocket();\n            this.awsRealTimeSocket.close();\n        }\n        this.socketStatus = SOCKET_STATUS.CLOSED;\n    }\n    _closeSocket() {\n        if (this.keepAliveHeartbeatIntervalId) {\n            clearInterval(this.keepAliveHeartbeatIntervalId);\n            this.keepAliveHeartbeatIntervalId = undefined;\n        }\n        this.connectionStateMonitor.record(CONNECTION_CHANGE.CLOSED);\n    }\n    _timeoutStartSubscriptionAck(subscriptionId) {\n        const subscriptionObserver = this.subscriptionObserverMap.get(subscriptionId);\n        if (subscriptionObserver) {\n            const { observer, query, variables } = subscriptionObserver;\n            if (!observer) {\n                return;\n            }\n            this.subscriptionObserverMap.set(subscriptionId, {\n                observer,\n                query,\n                variables,\n                subscriptionState: SUBSCRIPTION_STATUS.FAILED,\n            });\n            this._closeSocket();\n            this.logger.debug('timeoutStartSubscription', JSON.stringify({ query, variables }));\n        }\n    }\n    _initializeWebSocketConnection({ appSyncGraphqlEndpoint, authenticationType, apiKey, region, additionalCustomHeaders, }) {\n        if (this.socketStatus === SOCKET_STATUS.READY) {\n            return;\n        }\n        // TODO(Eslint): refactor to now use async function as the promise executor\n        // eslint-disable-next-line no-async-promise-executor\n        return new Promise(async (resolve, reject) => {\n            this.promiseArray.push({ res: resolve, rej: reject });\n            if (this.socketStatus === SOCKET_STATUS.CLOSED) {\n                try {\n                    this.socketStatus = SOCKET_STATUS.CONNECTING;\n                    // Empty payload on connect\n                    const payloadString = '{}';\n                    const authHeader = await awsRealTimeHeaderBasedAuth({\n                        authenticationType,\n                        payload: payloadString,\n                        canonicalUri: this.wsConnectUri,\n                        apiKey,\n                        appSyncGraphqlEndpoint,\n                        region,\n                        additionalCustomHeaders,\n                    });\n                    const headerString = authHeader ? JSON.stringify(authHeader) : '';\n                    // base64url-encoded string\n                    const encodedHeader = base64Encoder.convert(headerString, {\n                        urlSafe: true,\n                        skipPadding: true,\n                    });\n                    const authTokenSubprotocol = `header-${encodedHeader}`;\n                    const queryParams = queryParamsFromCustomHeaders(additionalCustomHeaders);\n                    const awsRealTimeUrl = realtimeUrlWithQueryString(appSyncGraphqlEndpoint, queryParams);\n                    await this._establishRetryableConnection(awsRealTimeUrl, authTokenSubprotocol);\n                    this.promiseArray.forEach(({ res }) => {\n                        this.logger.debug('Notifying connection successful');\n                        res();\n                    });\n                    this.socketStatus = SOCKET_STATUS.READY;\n                    this.promiseArray = [];\n                }\n                catch (err) {\n                    this.logger.debug('Connection exited with', err);\n                    this.promiseArray.forEach(({ rej }) => {\n                        rej(err);\n                    });\n                    this.promiseArray = [];\n                    if (this.awsRealTimeSocket &&\n                        this.awsRealTimeSocket.readyState === WebSocket.OPEN) {\n                        this.awsRealTimeSocket.close(3001);\n                    }\n                    this.awsRealTimeSocket = undefined;\n                    this.socketStatus = SOCKET_STATUS.CLOSED;\n                }\n            }\n        });\n    }\n    async _establishRetryableConnection(awsRealTimeUrl, subprotocol) {\n        this.logger.debug(`Establishing retryable connection`);\n        await jitteredExponentialRetry(this._establishConnection.bind(this), [awsRealTimeUrl, subprotocol], MAX_DELAY_MS);\n    }\n    async _openConnection(awsRealTimeUrl, subprotocol) {\n        return new Promise((resolve, reject) => {\n            const newSocket = this._getNewWebSocket(awsRealTimeUrl, [\n                this.wsProtocolName,\n                subprotocol,\n            ]);\n            newSocket.onerror = () => {\n                this.logger.debug(`WebSocket connection error`);\n            };\n            newSocket.onclose = () => {\n                this._closeSocket();\n                reject(new Error('Connection handshake error'));\n            };\n            newSocket.onopen = () => {\n                this.awsRealTimeSocket = newSocket;\n                resolve();\n            };\n        });\n    }\n    _getNewWebSocket(url, protocol) {\n        return new WebSocket(url, protocol);\n    }\n    async _initiateHandshake() {\n        return new Promise((resolve, reject) => {\n            if (!this.awsRealTimeSocket) {\n                reject(new Error('awsRealTimeSocket undefined'));\n                return;\n            }\n            let ackOk = false;\n            this.awsRealTimeSocket.onerror = error => {\n                this.logger.debug(`WebSocket error ${JSON.stringify(error)}`);\n            };\n            this.awsRealTimeSocket.onclose = event => {\n                this.logger.debug(`WebSocket closed ${event.reason}`);\n                this._closeSocket();\n                reject(new Error(JSON.stringify(event)));\n            };\n            this.awsRealTimeSocket.onmessage = (message) => {\n                if (typeof message.data !== 'string') {\n                    return;\n                }\n                this.logger.debug(`subscription message from AWS AppSyncRealTime: ${message.data} `);\n                const data = JSON.parse(message.data);\n                const { type } = data;\n                const connectionTimeoutMs = this._extractConnectionTimeout(data);\n                if (type === MESSAGE_TYPES.GQL_CONNECTION_ACK) {\n                    ackOk = true;\n                    this._registerWebsocketHandlers(connectionTimeoutMs);\n                    resolve('Connected to AWS AppSyncRealTime');\n                    return;\n                }\n                if (type === MESSAGE_TYPES.GQL_CONNECTION_ERROR) {\n                    const { errorType, errorCode } = this._extractErrorCodeAndType(data);\n                    // TODO(Eslint): refactor to reject an Error object instead of a plain object\n                    // eslint-disable-next-line prefer-promise-reject-errors\n                    reject({ errorType, errorCode });\n                }\n            };\n            const gqlInit = {\n                type: MESSAGE_TYPES.GQL_CONNECTION_INIT,\n            };\n            this.awsRealTimeSocket.send(JSON.stringify(gqlInit));\n            const checkAckOk = (targetAckOk) => {\n                if (!targetAckOk) {\n                    this.connectionStateMonitor.record(CONNECTION_CHANGE.CONNECTION_FAILED);\n                    reject(new Error(`Connection timeout: ack from AWSAppSyncRealTime was not received after ${CONNECTION_INIT_TIMEOUT} ms`));\n                }\n            };\n            setTimeout(() => {\n                checkAckOk(ackOk);\n            }, CONNECTION_INIT_TIMEOUT);\n        });\n    }\n    _registerWebsocketHandlers(connectionTimeoutMs) {\n        if (!this.awsRealTimeSocket) {\n            return;\n        }\n        // Set up a keep alive heartbeat for this connection\n        this.keepAliveHeartbeatIntervalId = setInterval(() => {\n            this.keepAliveHeartbeat(connectionTimeoutMs);\n        }, DEFAULT_KEEP_ALIVE_HEARTBEAT_TIMEOUT);\n        this.awsRealTimeSocket.onmessage =\n            this._handleIncomingSubscriptionMessage.bind(this);\n        this.awsRealTimeSocket.onerror = err => {\n            this.logger.debug(err);\n            this._errorDisconnect(CONTROL_MSG.CONNECTION_CLOSED);\n        };\n        this.awsRealTimeSocket.onclose = event => {\n            this.logger.debug(`WebSocket closed ${event.reason}`);\n            this._closeSocket();\n            this._errorDisconnect(CONTROL_MSG.CONNECTION_CLOSED);\n        };\n    }\n}\n\nexport { AWSWebSocketProvider };\n//# sourceMappingURL=index.mjs.map\n","import { USER_AGENT_HEADER, getAmplifyUserAgent } from '@aws-amplify/core/internals/utils';\nimport { MESSAGE_TYPES, DEFAULT_KEEP_ALIVE_TIMEOUT } from '../constants.mjs';\nimport { AWSWebSocketProvider } from '../AWSWebSocketProvider/index.mjs';\nimport { awsRealTimeHeaderBasedAuth } from '../AWSWebSocketProvider/authHeaders.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst PROVIDER_NAME = 'AWSAppSyncRealTimeProvider';\nconst WS_PROTOCOL_NAME = 'graphql-ws';\nconst CONNECT_URI = '/connect';\nclass AWSAppSyncRealTimeProvider extends AWSWebSocketProvider {\n    constructor() {\n        super({\n            providerName: PROVIDER_NAME,\n            wsProtocolName: WS_PROTOCOL_NAME,\n            connectUri: CONNECT_URI,\n        });\n    }\n    getProviderName() {\n        return PROVIDER_NAME;\n    }\n    subscribe(options, customUserAgentDetails) {\n        return super.subscribe(options, customUserAgentDetails);\n    }\n    async _prepareSubscriptionPayload({ options, subscriptionId, customUserAgentDetails, additionalCustomHeaders, libraryConfigHeaders, }) {\n        const { appSyncGraphqlEndpoint, authenticationType, query, variables, apiKey, region, } = options;\n        const data = {\n            query,\n            variables,\n        };\n        const serializedData = JSON.stringify(data);\n        const headers = {\n            ...(await awsRealTimeHeaderBasedAuth({\n                apiKey,\n                appSyncGraphqlEndpoint,\n                authenticationType,\n                payload: serializedData,\n                canonicalUri: '',\n                region,\n                additionalCustomHeaders,\n            })),\n            ...libraryConfigHeaders,\n            ...additionalCustomHeaders,\n            [USER_AGENT_HEADER]: getAmplifyUserAgent(customUserAgentDetails),\n        };\n        const subscriptionMessage = {\n            id: subscriptionId,\n            payload: {\n                data: serializedData,\n                extensions: {\n                    authorization: {\n                        ...headers,\n                    },\n                },\n            },\n            type: MESSAGE_TYPES.GQL_START,\n        };\n        const serializedSubscriptionMessage = JSON.stringify(subscriptionMessage);\n        return serializedSubscriptionMessage;\n    }\n    _handleSubscriptionData(message) {\n        this.logger.debug(`subscription message from AWS AppSync RealTime: ${message.data}`);\n        const { id = '', payload, type } = JSON.parse(String(message.data));\n        const { observer = null, query = '', variables = {}, } = this.subscriptionObserverMap.get(id) || {};\n        this.logger.debug({ id, observer, query, variables });\n        if (type === MESSAGE_TYPES.DATA && payload && payload.data) {\n            if (observer) {\n                observer.next(payload);\n            }\n            else {\n                this.logger.debug(`observer not found for id: ${id}`);\n            }\n            return [true, { id, type, payload }];\n        }\n        return [false, { id, type, payload }];\n    }\n    _unsubscribeMessage(subscriptionId) {\n        return {\n            id: subscriptionId,\n            type: MESSAGE_TYPES.GQL_STOP,\n        };\n    }\n    _extractConnectionTimeout(data) {\n        const { payload: { connectionTimeoutMs = DEFAULT_KEEP_ALIVE_TIMEOUT } = {}, } = data;\n        return connectionTimeoutMs;\n    }\n    _extractErrorCodeAndType(data) {\n        const { payload: { errors: [{ errorType = '', errorCode = 0 } = {}] = [] } = {}, } = data;\n        return { errorCode, errorType };\n    }\n}\n\nexport { AWSAppSyncRealTimeProvider };\n//# sourceMappingURL=index.mjs.map\n","import { AmplifyError } from '@aws-amplify/core/internals/utils';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nclass GraphQLApiError extends AmplifyError {\n    constructor(params) {\n        super(params);\n        // Hack for making the custom error class work when transpiled to es5\n        // TODO: Delete the following 2 lines after we change the build target to >= es2015\n        this.constructor = GraphQLApiError;\n        Object.setPrototypeOf(this, GraphQLApiError.prototype);\n    }\n}\n\nexport { GraphQLApiError };\n//# sourceMappingURL=GraphQLApiError.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nvar APIValidationErrorCode;\n(function (APIValidationErrorCode) {\n    APIValidationErrorCode[\"NoAuthSession\"] = \"NoAuthSession\";\n    APIValidationErrorCode[\"NoRegion\"] = \"NoRegion\";\n    APIValidationErrorCode[\"NoCustomEndpoint\"] = \"NoCustomEndpoint\";\n})(APIValidationErrorCode || (APIValidationErrorCode = {}));\nconst validationErrorMap = {\n    [APIValidationErrorCode.NoAuthSession]: {\n        message: 'Auth session should not be empty.',\n    },\n    // TODO: re-enable when working in all test environments:\n    // [APIValidationErrorCode.NoEndpoint]: {\n    // \tmessage: 'Missing endpoint',\n    // },\n    [APIValidationErrorCode.NoRegion]: {\n        message: 'Missing region.',\n    },\n    [APIValidationErrorCode.NoCustomEndpoint]: {\n        message: 'Custom endpoint region is present without custom endpoint.',\n    },\n};\n\nexport { APIValidationErrorCode, validationErrorMap };\n//# sourceMappingURL=validation.mjs.map\n","import { ConsoleLogger } from '@aws-amplify/core';\nimport '@aws-amplify/core/internals/utils';\nimport { assertValidationError } from './errors/assertValidationError.mjs';\nimport { APIValidationErrorCode } from './errors/validation.mjs';\nimport 'graphql';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst logger = new ConsoleLogger('GraphQLAPI resolveConfig');\n/**\n * @internal\n */\nconst resolveConfig = (amplify) => {\n    const config = amplify.getConfig();\n    if (!config.API?.GraphQL) {\n        logger.warn('The API configuration is missing. This is likely due to Amplify.configure() not being called prior to generateClient().');\n    }\n    const { apiKey, customEndpoint, customEndpointRegion, defaultAuthMode, endpoint, region, } = config.API?.GraphQL ?? {};\n    // TODO: re-enable when working in all test environments:\n    // assertValidationError(!!endpoint, APIValidationErrorCode.NoEndpoint);\n    assertValidationError(!(!customEndpoint && customEndpointRegion), APIValidationErrorCode.NoCustomEndpoint);\n    return {\n        apiKey,\n        customEndpoint,\n        customEndpointRegion,\n        defaultAuthMode,\n        endpoint,\n        region,\n    };\n};\n\nexport { resolveConfig };\n//# sourceMappingURL=resolveConfig.mjs.map\n","import { GraphQLApiError } from './GraphQLApiError.mjs';\nimport { validationErrorMap } from './validation.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nfunction assertValidationError(assertion, name) {\n    const { message, recoverySuggestion } = validationErrorMap[name];\n    if (!assertion) {\n        throw new GraphQLApiError({ name, message, recoverySuggestion });\n    }\n}\n\nexport { assertValidationError };\n//# sourceMappingURL=assertValidationError.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nconst resolveLibraryOptions = (amplify) => {\n    const headers = amplify.libraryOptions?.API?.GraphQL?.headers;\n    const withCredentials = amplify.libraryOptions?.API?.GraphQL?.withCredentials;\n    return { headers, withCredentials };\n};\n\nexport { resolveLibraryOptions };\n//# sourceMappingURL=resolveLibraryOptions.mjs.map\n","import { GraphQLAuthError } from '../../types/index.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst NO_API_KEY = {\n    name: 'NoApiKey',\n    // ideal: No API key configured.\n    message: GraphQLAuthError.NO_API_KEY,\n    recoverySuggestion: 'The API request was made with `authMode: \"apiKey\"` but no API Key was passed into `Amplify.configure()`. Review if your API key is passed into the `Amplify.configure()` function.',\n};\nconst NO_VALID_CREDENTIALS = {\n    name: 'NoCredentials',\n    // ideal: No auth credentials available.\n    message: GraphQLAuthError.NO_CREDENTIALS,\n    recoverySuggestion: `The API request was made with \\`authMode: \"iam\"\\` but no authentication credentials are available.\n\nIf you intended to make a request using an authenticated role, review if your user is signed in before making the request.\n\nIf you intend to make a request using an unauthenticated role or also known as \"guest access\", verify if \"Auth.Cognito.allowGuestAccess\" is set to \"true\" in the \\`Amplify.configure()\\` function.`,\n};\nconst NO_VALID_AUTH_TOKEN = {\n    name: 'NoValidAuthTokens',\n    // ideal: No valid JWT auth token provided to make the API request..\n    message: GraphQLAuthError.NO_FEDERATED_JWT,\n    recoverySuggestion: 'If you intended to make an authenticated API request, review if the current user is signed in.',\n};\nconst NO_SIGNED_IN_USER = {\n    name: 'NoSignedUser',\n    // ideal: Couldn't retrieve authentication credentials to make the API request.\n    message: GraphQLAuthError.NO_CURRENT_USER,\n    recoverySuggestion: 'Review the underlying exception field for more details. If you intended to make an authenticated API request, review if the current user is signed in.',\n};\nconst NO_AUTH_TOKEN_HEADER = {\n    name: 'NoAuthorizationHeader',\n    // ideal: Authorization header not specified.\n    message: GraphQLAuthError.NO_AUTH_TOKEN,\n    recoverySuggestion: 'The API request was made with `authMode: \"lambda\"` but no `authToken` is set. Review if a valid authToken is passed into the request options or in the `Amplify.configure()` function.',\n};\nconst NO_ENDPOINT = {\n    name: 'NoEndpoint',\n    message: 'No GraphQL endpoint configured in `Amplify.configure()`.',\n    recoverySuggestion: 'Review if the GraphQL API endpoint is set in the `Amplify.configure()` function.',\n};\n\nexport { NO_API_KEY, NO_AUTH_TOKEN_HEADER, NO_ENDPOINT, NO_SIGNED_IN_USER, NO_VALID_AUTH_TOKEN, NO_VALID_CREDENTIALS };\n//# sourceMappingURL=constants.mjs.map\n","import { GraphQLError } from 'graphql';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createGraphQLResultWithError = (error) => {\n    return {\n        data: {},\n        errors: [new GraphQLError(error.message, null, null, null, null, error)],\n    };\n};\n\nexport { createGraphQLResultWithError };\n//# sourceMappingURL=createGraphQLResultWithError.mjs.map\n","import { parse, print } from 'graphql';\nimport { catchError } from 'rxjs';\nimport { AmplifyUrl, getAmplifyUserAgent } from '@aws-amplify/core/internals/utils';\nimport { isCancelError } from '@aws-amplify/api-rest';\nimport { updateRequestToBeCancellable, cancel, post } from '@aws-amplify/api-rest/internals';\nimport { AWSAppSyncRealTimeProvider } from '../Providers/AWSAppSyncRealTimeProvider/index.mjs';\nimport { resolveConfig } from '../utils/resolveConfig.mjs';\nimport { resolveLibraryOptions } from '../utils/resolveLibraryOptions.mjs';\nimport { repackageUnauthorizedError } from '../utils/errors/repackageAuthError.mjs';\nimport { NO_ENDPOINT } from '../utils/errors/constants.mjs';\nimport { GraphQLApiError } from '../utils/errors/GraphQLApiError.mjs';\nimport '../utils/errors/validation.mjs';\nimport { createGraphQLResultWithError } from '../utils/errors/createGraphQLResultWithError.mjs';\nimport { isGraphQLResponseWithErrors } from './utils/runtimeTypeGuards/isGraphQLResponseWithErrors.mjs';\nimport { headerBasedAuth } from './graphqlAuth.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst USER_AGENT_HEADER = 'x-amz-user-agent';\nconst isAmplifyInstance = (amplify) => {\n    return typeof amplify !== 'function';\n};\n/**\n * Export Cloud Logic APIs\n */\nclass InternalGraphQLAPIClass {\n    constructor() {\n        /**\n         * @private\n         */\n        this.appSyncRealTime = new Map();\n        this._api = {\n            post,\n            cancelREST: cancel,\n            isCancelErrorREST: isCancelError,\n            updateRequestToBeCancellable,\n        };\n    }\n    getModuleName() {\n        return 'InternalGraphQLAPI';\n    }\n    /**\n     * to get the operation type\n     * @param operation\n     */\n    getGraphqlOperationType(operation) {\n        const doc = parse(operation);\n        const definitions = doc.definitions;\n        const [{ operation: operationType }] = definitions;\n        return operationType;\n    }\n    /**\n     * Executes a GraphQL operation\n     *\n     * @param options - GraphQL Options\n     * @param [additionalHeaders] - headers to merge in after any `libraryConfigHeaders` set in the config\n     * @returns An Observable if the query is a subscription query, else a promise of the graphql result.\n     */\n    graphql(amplify, { query: paramQuery, variables = {}, authMode, authToken, endpoint, apiKey, }, additionalHeaders, customUserAgentDetails) {\n        const query = typeof paramQuery === 'string'\n            ? parse(paramQuery)\n            : parse(print(paramQuery));\n        const [operationDef = {}] = query.definitions.filter(def => def.kind === 'OperationDefinition');\n        const { operation: operationType } = operationDef;\n        const headers = additionalHeaders || {};\n        switch (operationType) {\n            case 'query':\n            case 'mutation': {\n                const abortController = new AbortController();\n                let responsePromise;\n                if (isAmplifyInstance(amplify)) {\n                    responsePromise = this._graphql(amplify, { query, variables, authMode, apiKey, endpoint }, headers, abortController, customUserAgentDetails, authToken);\n                }\n                else {\n                    // NOTE: this wrapper function must be await-able so the Amplify server context manager can\n                    // destroy the context only after it completes\n                    const wrapper = async (amplifyInstance) => {\n                        const result = await this._graphql(amplifyInstance, { query, variables, authMode, apiKey, endpoint }, headers, abortController, customUserAgentDetails, authToken);\n                        return result;\n                    };\n                    responsePromise = amplify(wrapper);\n                }\n                this._api.updateRequestToBeCancellable(responsePromise, abortController);\n                return responsePromise;\n            }\n            case 'subscription':\n                return this._graphqlSubscribe(amplify, { query, variables, authMode, apiKey, endpoint }, headers, customUserAgentDetails, authToken);\n            default:\n                throw new Error(`invalid operation type: ${operationType}`);\n        }\n    }\n    async _graphql(amplify, { query, variables, authMode: authModeOverride, endpoint: endpointOverride, apiKey: apiKeyOverride, }, additionalHeaders = {}, abortController, customUserAgentDetails, authToken) {\n        const { apiKey, region, endpoint: appSyncGraphqlEndpoint, customEndpoint, customEndpointRegion, defaultAuthMode, } = resolveConfig(amplify);\n        const initialAuthMode = authModeOverride || defaultAuthMode || 'iam';\n        // identityPool is an alias for iam. TODO: remove 'iam' in v7\n        const authMode = initialAuthMode === 'identityPool' ? 'iam' : initialAuthMode;\n        /**\n         * Retrieve library options from Amplify configuration.\n         * `customHeaders` here are from the Amplify configuration options,\n         * and are for non-AppSync endpoints only. These are *not* the same as\n         * `additionalHeaders`, which are custom headers that are either 1)\n         * included when configuring the API client or 2) passed along with\n         * individual requests.\n         */\n        const { headers: customHeaders, withCredentials } = resolveLibraryOptions(amplify);\n        /**\n         * Client or request-specific custom headers that may or may not be\n         * returned by a function:\n         */\n        let additionalCustomHeaders;\n        if (typeof additionalHeaders === 'function') {\n            const requestOptions = {\n                method: 'POST',\n                url: new AmplifyUrl(endpointOverride || customEndpoint || appSyncGraphqlEndpoint || '').toString(),\n                queryString: print(query),\n            };\n            additionalCustomHeaders = await additionalHeaders(requestOptions);\n        }\n        else {\n            additionalCustomHeaders = additionalHeaders;\n        }\n        // if an authorization header is set, have the explicit authToken take precedence\n        if (authToken) {\n            additionalCustomHeaders = {\n                ...additionalCustomHeaders,\n                Authorization: authToken,\n            };\n        }\n        const authHeaders = await headerBasedAuth(amplify, authMode, apiKeyOverride ?? apiKey, additionalCustomHeaders);\n        const headers = {\n            ...(!customEndpoint && authHeaders),\n            /**\n             * Custom endpoint headers.\n             * If there is both a custom endpoint and custom region present, we get the headers.\n             * If there is a custom endpoint but no region, we return an empty object.\n             * If neither are present, we return an empty object.\n             */\n            ...((customEndpoint && (customEndpointRegion ? authHeaders : {})) || {}),\n            // Custom headers included in Amplify configuration options:\n            ...(customHeaders &&\n                (await customHeaders({\n                    query: print(query),\n                    variables,\n                }))),\n            // Custom headers from individual requests or API client configuration:\n            ...additionalCustomHeaders,\n            // User agent headers:\n            ...(!customEndpoint && {\n                [USER_AGENT_HEADER]: getAmplifyUserAgent(customUserAgentDetails),\n            }),\n        };\n        const body = {\n            query: print(query),\n            variables: variables || null,\n        };\n        let signingServiceInfo;\n        /**\n         * We do not send the signing service info to the REST API under the\n         * following conditions (i.e. it will not sign the request):\n         *   - there is a custom endpoint but no region\n         *   - the auth mode is `none`, or `apiKey`\n         *   - the auth mode is a type other than the types listed below\n         */\n        if ((customEndpoint && !customEndpointRegion) ||\n            (authMode !== 'oidc' &&\n                authMode !== 'userPool' &&\n                authMode !== 'iam' &&\n                authMode !== 'lambda')) {\n            signingServiceInfo = undefined;\n        }\n        else {\n            signingServiceInfo = {\n                service: !customEndpointRegion ? 'appsync' : 'execute-api',\n                region: !customEndpointRegion ? region : customEndpointRegion,\n            };\n        }\n        const endpoint = endpointOverride || customEndpoint || appSyncGraphqlEndpoint;\n        if (!endpoint) {\n            throw createGraphQLResultWithError(new GraphQLApiError(NO_ENDPOINT));\n        }\n        let response;\n        try {\n            // \t// // See the inline doc of the REST `post()` API for possible errors to be thrown.\n            // \t// // As these errors are catastrophic they should be caught and handled by GraphQL\n            // \t// // API consumers.\n            const { body: responseBody } = await this._api.post(amplify, {\n                url: new AmplifyUrl(endpoint),\n                options: {\n                    headers,\n                    body,\n                    signingServiceInfo,\n                    withCredentials,\n                },\n                abortController,\n            });\n            response = await responseBody.json();\n        }\n        catch (error) {\n            if (this.isCancelError(error)) {\n                throw error;\n            }\n            response = createGraphQLResultWithError(error);\n        }\n        if (isGraphQLResponseWithErrors(response)) {\n            throw repackageUnauthorizedError(response);\n        }\n        return response;\n    }\n    /**\n     * Checks to see if an error thrown is from an api request cancellation\n     * @param {any} error - Any error\n     * @return {boolean} - A boolean indicating if the error was from an api request cancellation\n     */\n    isCancelError(error) {\n        return this._api.isCancelErrorREST(error);\n    }\n    /**\n     * Cancels an inflight request. Only applicable for graphql queries and mutations\n     * @param {any} request - request to cancel\n     * @returns - A boolean indicating if the request was cancelled\n     */\n    cancel(request, message) {\n        return this._api.cancelREST(request, message);\n    }\n    _graphqlSubscribe(amplify, { query, variables, authMode: authModeOverride, apiKey: apiKeyOverride, endpoint, }, additionalHeaders = {}, customUserAgentDetails, authToken) {\n        const config = resolveConfig(amplify);\n        const initialAuthMode = authModeOverride || config?.defaultAuthMode || 'iam';\n        // identityPool is an alias for iam. TODO: remove 'iam' in v7\n        const authMode = initialAuthMode === 'identityPool' ? 'iam' : initialAuthMode;\n        /**\n         * Retrieve library options from Amplify configuration.\n         * `libraryConfigHeaders` are from the Amplify configuration options,\n         * and will not be overwritten by other custom headers. These are *not*\n         * the same as `additionalHeaders`, which are custom headers that are\n         * either 1)included when configuring the API client or 2) passed along\n         * with individual requests.\n         */\n        const { headers: libraryConfigHeaders } = resolveLibraryOptions(amplify);\n        const appSyncGraphqlEndpoint = endpoint ?? config?.endpoint;\n        // TODO: This could probably be an exception. But, lots of tests rely on\n        // attempting to connect to nowhere. So, I'm treating as the opposite of\n        // a Chesterton's fence for now. (A fence I shouldn't build, because I don't\n        // know why somethings depends on its absence!)\n        const memoKey = appSyncGraphqlEndpoint ?? 'none';\n        const realtimeProvider = this.appSyncRealTime.get(memoKey) ?? new AWSAppSyncRealTimeProvider();\n        this.appSyncRealTime.set(memoKey, realtimeProvider);\n        return realtimeProvider\n            .subscribe({\n            query: print(query),\n            variables,\n            appSyncGraphqlEndpoint,\n            region: config?.region,\n            authenticationType: authMode,\n            apiKey: apiKeyOverride ?? config?.apiKey,\n            additionalHeaders,\n            authToken,\n            libraryConfigHeaders,\n        }, customUserAgentDetails)\n            .pipe(catchError(e => {\n            if (e.errors) {\n                throw repackageUnauthorizedError(e);\n            }\n            throw e;\n        }));\n    }\n}\nconst InternalGraphQLAPI = new InternalGraphQLAPIClass();\n\nexport { InternalGraphQLAPI, InternalGraphQLAPIClass };\n//# sourceMappingURL=InternalGraphQLAPI.mjs.map\n","import { GraphQLApiError } from '../utils/errors/GraphQLApiError.mjs';\nimport '../utils/errors/validation.mjs';\nimport 'graphql';\nimport { NO_AUTH_TOKEN_HEADER, NO_SIGNED_IN_USER, NO_VALID_AUTH_TOKEN, NO_VALID_CREDENTIALS, NO_API_KEY } from '../utils/errors/constants.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nasync function headerBasedAuth(amplify, authMode, apiKey, additionalHeaders = {}) {\n    let headers = {};\n    switch (authMode) {\n        case 'apiKey':\n            if (!apiKey) {\n                throw new GraphQLApiError(NO_API_KEY);\n            }\n            headers = {\n                'X-Api-Key': apiKey,\n            };\n            break;\n        case 'iam': {\n            const session = await amplify.Auth.fetchAuthSession();\n            if (session.credentials === undefined) {\n                throw new GraphQLApiError(NO_VALID_CREDENTIALS);\n            }\n            break;\n        }\n        case 'oidc':\n        case 'userPool': {\n            let token;\n            try {\n                token = (await amplify.Auth.fetchAuthSession()).tokens?.accessToken.toString();\n            }\n            catch (e) {\n                // fetchAuthSession failed\n                throw new GraphQLApiError({\n                    ...NO_SIGNED_IN_USER,\n                    underlyingError: e,\n                });\n            }\n            // `fetchAuthSession()` succeeded but didn't return `tokens`.\n            // This may happen when unauthenticated access is enabled and there is\n            // no user signed in.\n            if (!token) {\n                throw new GraphQLApiError(NO_VALID_AUTH_TOKEN);\n            }\n            headers = {\n                Authorization: token,\n            };\n            break;\n        }\n        case 'lambda':\n            if (typeof additionalHeaders === 'object' &&\n                !additionalHeaders.Authorization) {\n                throw new GraphQLApiError(NO_AUTH_TOKEN_HEADER);\n            }\n            headers = {\n                Authorization: additionalHeaders.Authorization,\n            };\n            break;\n    }\n    return headers;\n}\n\nexport { headerBasedAuth };\n//# sourceMappingURL=graphqlAuth.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction isGraphQLResponseWithErrors(response) {\n    if (!response) {\n        return false;\n    }\n    const r = response;\n    return Array.isArray(r.errors) && r.errors.length > 0;\n}\n\nexport { isGraphQLResponseWithErrors };\n//# sourceMappingURL=isGraphQLResponseWithErrors.mjs.map\n","import { alphabetByEncoding, bitsPerByte, bitsPerLetter } from \"./constants.browser\";\nexport const fromBase64 = (input) => {\n    let totalByteLength = (input.length / 4) * 3;\n    if (input.slice(-2) === \"==\") {\n        totalByteLength -= 2;\n    }\n    else if (input.slice(-1) === \"=\") {\n        totalByteLength--;\n    }\n    const out = new ArrayBuffer(totalByteLength);\n    const dataView = new DataView(out);\n    for (let i = 0; i < input.length; i += 4) {\n        let bits = 0;\n        let bitLength = 0;\n        for (let j = i, limit = i + 3; j <= limit; j++) {\n            if (input[j] !== \"=\") {\n                if (!(input[j] in alphabetByEncoding)) {\n                    throw new TypeError(`Invalid character ${input[j]} in base64 string.`);\n                }\n                bits |= alphabetByEncoding[input[j]] << ((limit - j) * bitsPerLetter);\n                bitLength += bitsPerLetter;\n            }\n            else {\n                bits >>= bitsPerLetter;\n            }\n        }\n        const chunkOffset = (i / 4) * 3;\n        bits >>= bitLength % bitsPerByte;\n        const byteLength = Math.floor(bitLength / bitsPerByte);\n        for (let k = 0; k < byteLength; k++) {\n            const offset = (byteLength - k - 1) * bitsPerByte;\n            dataView.setUint8(chunkOffset + k, (bits & (255 << offset)) >> offset);\n        }\n    }\n    return new Uint8Array(out);\n};\n","import { fromBase64 } from '@smithy/util-base64';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst deserializeContent = (content) => content.map((block) => {\n    if (block.image) {\n        return deserializeImageBlock(block);\n    }\n    if (block.document) {\n        return deserializeDocumentBlock(block);\n    }\n    if (block.toolUse) {\n        return deserializeToolUseBlock(block);\n    }\n    if (block.toolResult) {\n        return deserializeToolResultBlock(block);\n    }\n    return removeNullsFromBlock(block);\n});\nconst deserializeImageBlock = ({ image }) => ({\n    image: {\n        ...image,\n        source: {\n            ...image.source,\n            bytes: fromBase64(image.source.bytes),\n        },\n    },\n});\nconst deserializeDocumentBlock = ({ document }) => ({\n    document: {\n        ...document,\n        source: {\n            ...document.source,\n            bytes: fromBase64(document.source.bytes),\n        },\n    },\n});\nconst deserializeJsonBlock = ({ json }) => ({\n    json: JSON.parse(json),\n});\nconst deserializeToolUseBlock = ({ toolUse }) => ({\n    toolUse: {\n        ...toolUse,\n        input: JSON.parse(toolUse.input),\n    },\n});\nconst deserializeToolResultBlock = ({ toolResult, }) => ({\n    toolResult: {\n        toolUseId: toolResult.toolUseId,\n        content: toolResult.content.map((toolResultBlock) => {\n            if (toolResultBlock.image) {\n                return deserializeImageBlock(toolResultBlock);\n            }\n            if (toolResultBlock.json) {\n                return deserializeJsonBlock(toolResultBlock);\n            }\n            return removeNullsFromBlock(toolResultBlock);\n        }),\n    },\n});\nconst removeNullsFromBlock = (block) => Object.fromEntries(Object.entries(block).filter(([_, v]) => v !== null));\n\nexport { deserializeContent };\n//# sourceMappingURL=conversationMessageDeserializers.mjs.map\n","import { deserializeContent } from './conversationMessageDeserializers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst convertItemToConversationMessage = ({ content, createdAt, id, conversationId, role, }) => ({\n    content: deserializeContent(content ?? []),\n    conversationId,\n    createdAt,\n    id,\n    role,\n});\n\nexport { convertItemToConversationMessage };\n//# sourceMappingURL=convertItemToConversationMessage.mjs.map\n","import { listFactory } from '../operations/list.mjs';\nimport { convertItemToConversationMessage } from './convertItemToConversationMessage.mjs';\nimport { getCustomUserAgentDetails, AiAction } from './getCustomUserAgentDetails.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createListMessagesFunction = (client, modelIntrospection, conversationId, conversationMessageModel, getInternals) => async (input) => {\n    const list = listFactory(client, modelIntrospection, conversationMessageModel, getInternals, false, getCustomUserAgentDetails(AiAction.ListMessages));\n    const { data, nextToken, errors } = await list({\n        ...input,\n        filter: { conversationId: { eq: conversationId } },\n    });\n    return {\n        data: data.map((item) => convertItemToConversationMessage(item)),\n        nextToken,\n        errors,\n    };\n};\n\nexport { createListMessagesFunction };\n//# sourceMappingURL=createListMessagesFunction.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst convertItemToConversationStreamEvent = ({ id, conversationId, associatedUserMessageId, contentBlockIndex, contentBlockDoneAtIndex, contentBlockDeltaIndex, contentBlockText, contentBlockToolUse, stopReason, errors, }) => {\n    if (errors) {\n        const error = {\n            id,\n            conversationId,\n            associatedUserMessageId,\n            errors,\n        };\n        return { error };\n    }\n    const next = removeNullsFromConversationStreamEvent({\n        id,\n        conversationId,\n        associatedUserMessageId,\n        contentBlockIndex,\n        contentBlockDoneAtIndex,\n        contentBlockDeltaIndex,\n        text: contentBlockText,\n        toolUse: deserializeToolUseBlock(contentBlockToolUse),\n        stopReason,\n    });\n    return { next };\n};\nconst deserializeToolUseBlock = (contentBlockToolUse) => {\n    if (contentBlockToolUse) {\n        const toolUseBlock = {\n            ...contentBlockToolUse,\n            input: JSON.parse(contentBlockToolUse.input),\n        };\n        return toolUseBlock;\n    }\n};\nconst removeNullsFromConversationStreamEvent = (block) => Object.fromEntries(Object.entries(block).filter(([_, v]) => v !== null));\n\nexport { convertItemToConversationStreamEvent };\n//# sourceMappingURL=conversationStreamEventDeserializers.mjs.map\n","import { customOpFactory } from '../operations/custom.mjs';\nimport { getCustomUserAgentDetails, AiAction } from './getCustomUserAgentDetails.mjs';\nimport { convertItemToConversationStreamEvent } from './conversationStreamEventDeserializers.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createOnStreamEventFunction = (client, modelIntrospection, conversationId, conversationRouteName, getInternals) => (handler) => {\n    const { conversations } = modelIntrospection;\n    // Safe guard for standalone function. When called as part of client generation, this should never be falsy.\n    if (!conversations) {\n        return {};\n    }\n    const subscribeSchema = conversations[conversationRouteName].message.subscribe;\n    const subscribeOperation = customOpFactory(client, modelIntrospection, 'subscription', subscribeSchema, false, getInternals, getCustomUserAgentDetails(AiAction.OnStreamEvent));\n    return subscribeOperation({ conversationId }).subscribe((data) => {\n        const { next, error } = convertItemToConversationStreamEvent(data);\n        if (error)\n            handler.error(error);\n        if (next)\n            handler.next(next);\n    });\n};\n\nexport { createOnStreamEventFunction };\n//# sourceMappingURL=createOnStreamEventFunction.mjs.map\n","import { toBase64 } from '@smithy/util-base64';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst serializeAiContext = (aiContext) => JSON.stringify(aiContext);\nconst serializeContent = (content) => content.map((block) => {\n    if (block.image) {\n        return serializeImageBlock(block);\n    }\n    if (block.document) {\n        return serializeDocumentBlock(block);\n    }\n    if (block.toolResult) {\n        return serializeToolResultBlock(block);\n    }\n    return block;\n});\nconst serializeToolConfiguration = ({ tools }) => ({\n    tools: Object.entries(tools).map(([name, tool]) => ({\n        toolSpec: {\n            name,\n            description: tool.description,\n            inputSchema: {\n                json: JSON.stringify(tool.inputSchema.json),\n            },\n        },\n    })),\n});\nconst serializeImageBlock = ({ image }) => ({\n    image: {\n        ...image,\n        source: {\n            ...image.source,\n            bytes: toBase64(image.source.bytes),\n        },\n    },\n});\nconst serializeDocumentBlock = ({ document, }) => ({\n    document: {\n        ...document,\n        source: {\n            ...document.source,\n            bytes: toBase64(document.source.bytes),\n        },\n    },\n});\nconst serializeJsonBlock = ({ json }) => ({\n    json: JSON.stringify(json),\n});\nconst serializeToolResultBlock = ({ toolResult, }) => ({\n    toolResult: {\n        ...toolResult,\n        content: toolResult.content.map((toolResultBlock) => {\n            if (toolResultBlock.image) {\n                return serializeImageBlock(toolResultBlock);\n            }\n            if (toolResultBlock.json) {\n                return serializeJsonBlock(toolResultBlock);\n            }\n            return toolResultBlock;\n        }),\n    },\n});\n\nexport { serializeAiContext, serializeContent, serializeToolConfiguration };\n//# sourceMappingURL=conversationMessageSerializers.mjs.map\n","import { customOpFactory } from '../operations/custom.mjs';\nimport { convertItemToConversationMessage } from './convertItemToConversationMessage.mjs';\nimport { serializeToolConfiguration, serializeAiContext, serializeContent } from './conversationMessageSerializers.mjs';\nimport { getCustomUserAgentDetails, AiAction } from './getCustomUserAgentDetails.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createSendMessageFunction = (client, modelIntrospection, conversationId, conversationRouteName, getInternals) => async (input) => {\n    const { conversations } = modelIntrospection;\n    // Safe guard for standalone function. When called as part of client generation, this should never be falsy.\n    if (!conversations) {\n        return {};\n    }\n    const processedInput = typeof input === 'string' ? { content: [{ text: input }] } : input;\n    const { content, aiContext, toolConfiguration } = processedInput;\n    const sendSchema = conversations[conversationRouteName].message.send;\n    const sendOperation = customOpFactory(client, modelIntrospection, 'mutation', sendSchema, false, getInternals, getCustomUserAgentDetails(AiAction.SendMessage));\n    const { data, errors } = await sendOperation({\n        conversationId,\n        content: serializeContent(content),\n        ...(aiContext && { aiContext: serializeAiContext(aiContext) }),\n        ...(toolConfiguration && {\n            toolConfiguration: serializeToolConfiguration(toolConfiguration),\n        }),\n    });\n    return {\n        data: data ? convertItemToConversationMessage(data) : data,\n        errors,\n    };\n};\n\nexport { createSendMessageFunction };\n//# sourceMappingURL=createSendMessageFunction.mjs.map\n","import { createListMessagesFunction } from './createListMessagesFunction.mjs';\nimport { createOnStreamEventFunction } from './createOnStreamEventFunction.mjs';\nimport { createSendMessageFunction } from './createSendMessageFunction.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst convertItemToConversation = (client, modelIntrospection, conversationId, conversationCreatedAt, conversationUpdatedAt, conversationRouteName, conversationMessageModel, getInternals, conversationMetadata, conversationName) => {\n    if (!conversationId) {\n        throw new Error(`An error occurred converting a ${conversationRouteName} conversation: Missing ID`);\n    }\n    return {\n        id: conversationId,\n        createdAt: conversationCreatedAt,\n        updatedAt: conversationUpdatedAt,\n        metadata: conversationMetadata,\n        name: conversationName,\n        onStreamEvent: createOnStreamEventFunction(client, modelIntrospection, conversationId, conversationRouteName, getInternals),\n        sendMessage: createSendMessageFunction(client, modelIntrospection, conversationId, conversationRouteName, getInternals),\n        listMessages: createListMessagesFunction(client, modelIntrospection, conversationId, conversationMessageModel, getInternals),\n    };\n};\n\nexport { convertItemToConversation };\n//# sourceMappingURL=convertItemToConversation.mjs.map\n","import { getFactory } from '../operations/get.mjs';\nimport { convertItemToConversation } from './convertItemToConversation.mjs';\nimport { getCustomUserAgentDetails, AiAction } from './getCustomUserAgentDetails.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createCreateConversationFunction = (client, modelIntrospection, conversationRouteName, conversationModel, conversationMessageModel, getInternals) => async (input) => {\n    const { name, metadata: metadataObject } = input ?? {};\n    const metadata = JSON.stringify(metadataObject);\n    const createOperation = getFactory(client, modelIntrospection, conversationModel, 'CREATE', getInternals, false, getCustomUserAgentDetails(AiAction.CreateConversation));\n    const { data, errors } = await createOperation({ name, metadata });\n    return {\n        data: convertItemToConversation(client, modelIntrospection, data?.id, data?.createdAt, data?.updatedAt, conversationRouteName, conversationMessageModel, getInternals, data?.metadata, data?.name),\n        errors,\n    };\n};\n\nexport { createCreateConversationFunction };\n//# sourceMappingURL=createCreateConversationFunction.mjs.map\n","import { getFactory } from '../operations/get.mjs';\nimport { convertItemToConversation } from './convertItemToConversation.mjs';\nimport { getCustomUserAgentDetails, AiAction } from './getCustomUserAgentDetails.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createGetConversationFunction = (client, modelIntrospection, conversationRouteName, conversationModel, conversationMessageModel, getInternals) => async ({ id }) => {\n    const get = getFactory(client, modelIntrospection, conversationModel, 'GET', getInternals, false, getCustomUserAgentDetails(AiAction.GetConversation));\n    const { data, errors } = await get({ id });\n    return {\n        data: data\n            ? convertItemToConversation(client, modelIntrospection, data.id, data.createdAt, data.updatedAt, conversationRouteName, conversationMessageModel, getInternals, data?.metadata, data?.name)\n            : data,\n        errors,\n    };\n};\n\nexport { createGetConversationFunction };\n//# sourceMappingURL=createGetConversationFunction.mjs.map\n","import { listFactory } from '../operations/list.mjs';\nimport { convertItemToConversation } from './convertItemToConversation.mjs';\nimport { getCustomUserAgentDetails, AiAction } from './getCustomUserAgentDetails.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createListConversationsFunction = (client, modelIntrospection, conversationRouteName, conversationModel, conversationMessageModel, getInternals) => async (input) => {\n    const list = listFactory(client, modelIntrospection, conversationModel, getInternals, false, getCustomUserAgentDetails(AiAction.ListConversations));\n    const { data, nextToken, errors } = await list(input);\n    return {\n        data: data.map((datum) => {\n            return convertItemToConversation(client, modelIntrospection, datum.id, datum.createdAt, datum.updatedAt, conversationRouteName, conversationMessageModel, getInternals, datum?.metadata, datum?.name);\n        }),\n        nextToken,\n        errors,\n    };\n};\n\nexport { createListConversationsFunction };\n//# sourceMappingURL=createListConversationsFunction.mjs.map\n","import { getFactory } from '../operations/get.mjs';\nimport { convertItemToConversation } from './convertItemToConversation.mjs';\nimport { getCustomUserAgentDetails, AiAction } from './getCustomUserAgentDetails.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createDeleteConversationFunction = (client, modelIntrospection, conversationRouteName, conversationModel, conversationMessageModel, getInternals) => async ({ id }) => {\n    const deleteOperation = getFactory(client, modelIntrospection, conversationModel, 'DELETE', getInternals, false, getCustomUserAgentDetails(AiAction.DeleteConversation));\n    const { data, errors } = await deleteOperation({ id });\n    return {\n        data: data\n            ? convertItemToConversation(client, modelIntrospection, data?.id, data?.createdAt, data?.updatedAt, conversationRouteName, conversationMessageModel, getInternals, data?.metadata, data?.name)\n            : data,\n        errors,\n    };\n};\n\nexport { createDeleteConversationFunction };\n//# sourceMappingURL=createDeleteConversationFunction.mjs.map\n","import { getFactory } from '../operations/get.mjs';\nimport { convertItemToConversation } from './convertItemToConversation.mjs';\nimport { getCustomUserAgentDetails, AiAction } from './getCustomUserAgentDetails.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst createUpdateConversationFunction = (client, modelIntrospection, conversationRouteName, conversationModel, conversationMessageModel, getInternals) => async ({ id, metadata: metadataObject, name }) => {\n    const metadata = JSON.stringify(metadataObject);\n    const updateOperation = getFactory(client, modelIntrospection, conversationModel, 'UPDATE', getInternals, false, getCustomUserAgentDetails(AiAction.UpdateConversation));\n    const { data, errors } = await updateOperation({ id, metadata, name });\n    return {\n        data: data\n            ? convertItemToConversation(client, modelIntrospection, data?.id, data?.createdAt, data?.updatedAt, conversationRouteName, conversationMessageModel, getInternals, data?.metadata, data?.name)\n            : data,\n        errors,\n    };\n};\n\nexport { createUpdateConversationFunction };\n//# sourceMappingURL=createUpdateConversationFunction.mjs.map\n","import { graphQLOperationsInfo } from './APIClient.mjs';\n\nconst attributeIsSecondaryIndex = (attr) => {\n    return (attr.type === 'key' &&\n        // presence of `name` property distinguishes GSI from primary index\n        attr.properties?.name &&\n        attr.properties?.queryField &&\n        attr.properties?.fields.length > 0);\n};\nconst getSecondaryIndexesFromSchemaModel = (model) => {\n    const idxs = model.attributes\n        ?.filter(attributeIsSecondaryIndex)\n        .map((attr) => {\n        const queryField = attr.properties.queryField;\n        const [pk, ...sk] = attr.properties.fields;\n        return {\n            queryField,\n            pk,\n            sk,\n        };\n    });\n    return idxs || [];\n};\n/**\n * returns graphQLOperationsInfo, but filters out operations that were disabled via model().disableOperations([...])\n */\nconst excludeDisabledOps = (mis, modelName) => {\n    /* Example model attributes in MIS {\n      \"type\": \"model\",\n      \"properties\": {\n        \"subscriptions\": null,\n        \"mutations\": { \"delete\": null }\n        \"timestamps\": null\n      } }*/\n    const modelAttrs = mis.models[modelName].attributes?.find((attr) => attr.type === 'model');\n    const coarseToFineDict = {\n        queries: ['list', 'get', 'observeQuery'],\n        mutations: ['create', 'update', 'delete'],\n        subscriptions: ['onCreate', 'onUpdate', 'onDelete'],\n    };\n    const disabledOps = [];\n    if (!modelAttrs) {\n        return graphQLOperationsInfo;\n    }\n    if (modelAttrs.properties) {\n        for (const [key, value] of Object.entries(modelAttrs.properties)) {\n            // model.properties can contain other values that are not relevant to disabling ops, e.g. timestamps\n            if (!(key in coarseToFineDict)) {\n                continue;\n            }\n            if (value === null) {\n                // coarse-grained disable, e.g. \"subscriptions\": null,\n                disabledOps.push(...coarseToFineDict[key]);\n            }\n            else if (value instanceof Object) {\n                // fine-grained, e.g. \"mutations\": { \"delete\": null }\n                disabledOps.push(...Object.keys(value));\n            }\n        }\n    }\n    // observeQuery only exists on the client side, so can't be explicitly disabled via schema builder.\n    // It's unusable without `list`\n    if (disabledOps.includes('list')) {\n        disabledOps.push('observeQuery');\n    }\n    // graphQLOperationsInfo keys are in caps\n    const disabledOpsUpper = disabledOps.map((op) => op.toUpperCase());\n    const filteredGraphQLOperations = Object.fromEntries(Object.entries(graphQLOperationsInfo).filter(([key]) => !disabledOpsUpper.includes(key)));\n    return filteredGraphQLOperations;\n};\n\nexport { excludeDisabledOps, getSecondaryIndexesFromSchemaModel };\n//# sourceMappingURL=clientUtils.mjs.map\n","import { ApiAction, Category } from '@aws-amplify/core/internals/utils';\nimport { INTERNAL_USER_AGENT_OVERRIDE } from '@aws-amplify/data-schema/runtime';\nimport { InternalGraphQLAPIClass } from './internals/InternalGraphQLAPI.mjs';\n\nfunction isGraphQLOptionsWithOverride(options) {\n    return INTERNAL_USER_AGENT_OVERRIDE in options;\n}\nconst graphqlOperation = (query, variables = {}, authToken) => ({\n    query,\n    variables,\n    authToken,\n});\n/**\n * Export Cloud Logic APIs\n */\nclass GraphQLAPIClass extends InternalGraphQLAPIClass {\n    getModuleName() {\n        return 'GraphQLAPI';\n    }\n    /**\n     * Executes a GraphQL operation\n     *\n     * @param options - GraphQL Options\n     * @param [additionalHeaders] - headers to merge in after any `libraryConfigHeaders` set in the config\n     * @returns An Observable if the query is a subscription query, else a promise of the graphql result.\n     */\n    graphql(amplify, options, additionalHeaders) {\n        const userAgentDetails = {\n            category: Category.API,\n            action: ApiAction.GraphQl,\n        };\n        if (isGraphQLOptionsWithOverride(options)) {\n            const { [INTERNAL_USER_AGENT_OVERRIDE]: internalUserAgentOverride, ...cleanOptions } = options;\n            return super.graphql(amplify, cleanOptions, additionalHeaders, {\n                ...userAgentDetails,\n                ...internalUserAgentOverride,\n            });\n        }\n        return super.graphql(amplify, options, additionalHeaders, {\n            ...userAgentDetails,\n        });\n    }\n    /**\n     * Checks to see if an error thrown is from an api request cancellation\n     * @param error - Any error\n     * @returns A boolean indicating if the error was from an api request cancellation\n     */\n    isCancelError(error) {\n        return super.isCancelError(error);\n    }\n    /**\n     * Cancels an inflight request. Only applicable for graphql queries and mutations\n     * @param {any} request - request to cancel\n     * @returns A boolean indicating if the request was cancelled\n     */\n    cancel(request, message) {\n        return super.cancel(request, message);\n    }\n}\nconst GraphQLAPI = new GraphQLAPIClass();\n\nexport { GraphQLAPI, GraphQLAPIClass, graphqlOperation };\n//# sourceMappingURL=GraphQLAPI.mjs.map\n","// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction isConfigureEventWithResourceConfig(payload) {\n    return payload.event === 'configure';\n}\n\nexport { isConfigureEventWithResourceConfig };\n//# sourceMappingURL=isConfigureEventWithResourceConfig.mjs.map\n","import { USER_AGENT_HEADER, getAmplifyUserAgent } from '@aws-amplify/core/internals/utils';\nimport { MESSAGE_TYPES, DEFAULT_KEEP_ALIVE_TIMEOUT } from '../constants.mjs';\nimport { AWSWebSocketProvider } from '../AWSWebSocketProvider/index.mjs';\nimport { awsRealTimeHeaderBasedAuth } from '../AWSWebSocketProvider/authHeaders.mjs';\nimport { serializeEvents } from '../../internals/events/utils.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst PROVIDER_NAME = 'AWSAppSyncEventsProvider';\nconst WS_PROTOCOL_NAME = 'aws-appsync-event-ws';\nconst CONNECT_URI = ''; // events does not expect a connect uri\nclass AWSAppSyncEventProvider extends AWSWebSocketProvider {\n    constructor() {\n        super({\n            providerName: PROVIDER_NAME,\n            wsProtocolName: WS_PROTOCOL_NAME,\n            connectUri: CONNECT_URI,\n        });\n        this.allowNoSubscriptions = true;\n    }\n    getProviderName() {\n        return PROVIDER_NAME;\n    }\n    async connect(options) {\n        return super.connect(options);\n    }\n    subscribe(options, customUserAgentDetails) {\n        return super.subscribe(options, customUserAgentDetails).pipe();\n    }\n    async publish(options, customUserAgentDetails) {\n        return super.publish(options, customUserAgentDetails);\n    }\n    closeIfNoActiveSubscription() {\n        this._closeSocketIfRequired();\n    }\n    async _prepareSubscriptionPayload({ options, subscriptionId, customUserAgentDetails, additionalCustomHeaders, libraryConfigHeaders, publish, }) {\n        const { appSyncGraphqlEndpoint, authenticationType, query, apiKey, region, variables, } = options;\n        const data = {\n            channel: query,\n            events: variables !== undefined ? serializeEvents(variables) : undefined,\n        };\n        const serializedData = JSON.stringify(data);\n        const headers = {\n            ...(await awsRealTimeHeaderBasedAuth({\n                apiKey,\n                appSyncGraphqlEndpoint,\n                authenticationType,\n                payload: serializedData,\n                canonicalUri: '',\n                region,\n                additionalCustomHeaders,\n            })),\n            ...libraryConfigHeaders,\n            ...additionalCustomHeaders,\n            [USER_AGENT_HEADER]: getAmplifyUserAgent(customUserAgentDetails),\n        };\n        const subscriptionMessage = {\n            id: subscriptionId,\n            channel: query,\n            events: variables !== undefined ? serializeEvents(variables) : undefined,\n            authorization: {\n                ...headers,\n            },\n            payload: {\n                events: variables !== undefined ? serializeEvents(variables) : undefined,\n                channel: query,\n                extensions: {\n                    authorization: {\n                        ...headers,\n                    },\n                },\n            },\n            type: publish\n                ? MESSAGE_TYPES.EVENT_PUBLISH\n                : MESSAGE_TYPES.EVENT_SUBSCRIBE,\n        };\n        const serializedSubscriptionMessage = JSON.stringify(subscriptionMessage);\n        return serializedSubscriptionMessage;\n    }\n    _handleSubscriptionData(message) {\n        this.logger.debug(`subscription message from AWS AppSync Events: ${message.data}`);\n        const { id = '', event: payload, type, } = JSON.parse(String(message.data));\n        const { observer = null, query = '', variables = {}, } = this.subscriptionObserverMap.get(id) || {};\n        this.logger.debug({ id, observer, query, variables });\n        if (type === MESSAGE_TYPES.DATA && payload) {\n            const deserializedEvent = JSON.parse(payload);\n            if (observer) {\n                observer.next({ id, type, event: deserializedEvent });\n            }\n            else {\n                this.logger.debug(`observer not found for id: ${id}`);\n            }\n            return [true, { id, type, payload: deserializedEvent }];\n        }\n        return [false, { id, type, payload }];\n    }\n    _unsubscribeMessage(subscriptionId) {\n        return {\n            id: subscriptionId,\n            type: MESSAGE_TYPES.EVENT_STOP,\n        };\n    }\n    _extractConnectionTimeout(data) {\n        const { connectionTimeoutMs = DEFAULT_KEEP_ALIVE_TIMEOUT } = data;\n        return connectionTimeoutMs;\n    }\n    _extractErrorCodeAndType(data) {\n        const { errors: [{ errorType = '', errorCode = 0 } = {}] = [] } = data;\n        return { errorCode, errorType };\n    }\n}\nconst AppSyncEventProvider = new AWSAppSyncEventProvider();\n\nexport { AWSAppSyncEventProvider, AppSyncEventProvider };\n//# sourceMappingURL=index.mjs.map\n","/**\n * @wharfkit/wallet-plugin-wombat v1.5.1\n * https://github.com/wharfkit/wallet-plugin-wombat\n *\n * @license\n * Copyright (c) 2023 Greymass Inc. All Rights Reserved.\n * \n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n * \n * 1.  Redistribution of source code must retain the above copyright notice, this\n *     list of conditions and the following disclaimer.\n * \n * 2.  Redistribution in binary form must reproduce the above copyright notice,\n *     this list of conditions and the following disclaimer in the documentation\n *     and/or other materials provided with the distribution.\n * \n * 3.  Neither the name of the copyright holder nor the names of its contributors\n *     may be used to endorse or promote products derived from this software without\n *     specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE\n * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED\n * OF THE POSSIBILITY OF SUCH DAMAGE.\n * \n * YOU ACKNOWLEDGE THAT THIS SOFTWARE IS NOT DESIGNED, LICENSED OR INTENDED FOR USE\n * IN THE DESIGN, CONSTRUCTION, OPERATION OR MAINTENANCE OF ANY MILITARY FACILITY.\n */\nimport { AbstractWalletPlugin, WalletPluginMetadata } from '@wharfkit/session';\n\nclass WalletPluginWombat extends AbstractWalletPlugin {\n    constructor() {\n        super();\n        this.id = 'wombat';\n        this.translations = {};\n        /**\n         * The logic configuration for the wallet plugin.\n         */\n        this.config = {\n            // Should the user interface display a chain selector?\n            requiresChainSelect: true,\n            // Should the user interface display a permission selector?\n            requiresPermissionSelect: false,\n        };\n        /**\n         * The metadata for the wallet plugin to be displayed in the user interface.\n         */\n        this.metadata = WalletPluginMetadata.from({\n            name: 'Wombat',\n            description: '',\n            logo: 'data:image/png;base64,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',\n            homepage: 'https://www.wombat.app/',\n            download: 'https://www.wombat.app/the-app',\n        });\n    }\n    async loadScatterProtocol() {\n        let scatterProtocol;\n        if (typeof window !== 'undefined') {\n            scatterProtocol = await import('@wharfkit/protocol-scatter');\n        }\n        if (!scatterProtocol) {\n            throw new Error('Scatter protocol is not available in this environment');\n        }\n        return scatterProtocol;\n    }\n    /**\n     * Performs the wallet logic required to login and return the chain and permission level to use.\n     *\n     * @param context LoginContext\n     * @returns Promise<WalletPluginLoginResponse>\n     */\n    async login(context) {\n        const scatterProtocol = await this.loadScatterProtocol();\n        return scatterProtocol.handleLogin(context);\n    }\n    /**\n     * Performs the wallet logic required to logout.\n     *\n     * @param context: LogoutContext\n     * @returns Promise<void>\n     */\n    async logout(context) {\n        const scatterProtocol = await this.loadScatterProtocol();\n        return scatterProtocol.handleLogout(context);\n    }\n    /**\n     * Performs the wallet logic required to sign a transaction and return the signature.\n     *\n     * @param chain ChainDefinition\n     * @param resolved ResolvedSigningRequest\n     * @returns Promise<Signature>\n     */\n    async sign(resolved, context) {\n        const scatterProtocol = await this.loadScatterProtocol();\n        return scatterProtocol.handleSignatureRequest(resolved, context);\n    }\n}\n\nexport { WalletPluginWombat };\n//# sourceMappingURL=index.js.map\n"],"file":"assets/js/wallets-4z7hQ1Rq.js"}