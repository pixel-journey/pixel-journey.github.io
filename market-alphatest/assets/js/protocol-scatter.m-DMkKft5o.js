import{J as t,g as n,C as i,S as r,K as e,q as s,d as o}from"./wharfkit-CpEkzKdn.js";import"./vendor-WE9EuH_2.js";var u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};function a(t){if(t.t)return t;var n=t.default;if("function"==typeof n){var i=function t(){return this instanceof t?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};i.prototype=n.prototype}else i={};return Object.defineProperty(i,"t",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(i,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),i}var f={},c={},h={},l={},d=function(){return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,n){var i=[],r=!0,e=!1,s=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done)&&(i.push(o.value),!n||i.length!==n);r=!0);}catch(a){e=!0,s=a}finally{try{!r&&u.return&&u.return()}finally{if(e)throw s}}return i}(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=function(){function t(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,i,r){return i&&t(n.prototype,i),r&&t(n,r),n}}(),w={RIPEMD160:function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)}return v(t,null,[{key:"get_n_pad_bytes",value:function(t){return 64-(t+8&63)}},{key:"pad",value:function(n){var i,r,e=n.byteLength,s=t.get_n_pad_bytes(e),o=(i=e,r=536870912,[Math.floor(i/r),i%r]).map(function(t,n){return n?8*t:t}),u=d(o,2),a=u[0],f=u[1],c=new Uint8Array(e+s+8);c.set(new Uint8Array(n),0);var h=new DataView(c.buffer);return h.setUint8(e,128),h.setUint32(e+s,f,!0),h.setUint32(e+s+4,a,!0),c.buffer}},{key:"f",value:function(t,n,i,r){return 0<=t&&t<=15?n^i^r:16<=t&&t<=31?n&i|~n&r:32<=t&&t<=47?(n|~i)^r:48<=t&&t<=63?n&r|i&~r:64<=t&&t<=79?n^(i|~r):void 0}},{key:"K",value:function(t){return 0<=t&&t<=15?0:16<=t&&t<=31?1518500249:32<=t&&t<=47?1859775393:48<=t&&t<=63?2400959708:64<=t&&t<=79?2840853838:void 0}},{key:"KP",value:function(t){return 0<=t&&t<=15?1352829926:16<=t&&t<=31?1548603684:32<=t&&t<=47?1836072691:48<=t&&t<=63?2053994217:64<=t&&t<=79?0:void 0}},{key:"add_modulo32",value:function(){return 0|Array.from(arguments).reduce(function(t,n){return t+n},0)}},{key:"rol32",value:function(t,n){return t<<n|t>>>32-n}},{key:"hash",value:function(n){for(var i=t.pad(n),r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],e=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],o=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],u=i.byteLength/64,a=new Array(u).fill(void 0).map(function(t,n){return function(t){return new DataView(i,64*n,64).getUint32(4*t,!0)}}),f=[1732584193,4023233417,2562383102,271733878,3285377520],c=0;c<u;++c){for(var h=f[0],l=f[1],d=f[2],v=f[3],w=f[4],y=h,p=l,m=d,b=v,g=w,_=0;_<80;++_){var E=t.add_modulo32(t.rol32(t.add_modulo32(h,t.f(_,l,d,v),a[c](r[_]),t.K(_)),s[_]),w);h=w,w=v,v=t.rol32(d,10),d=l,l=E,E=t.add_modulo32(t.rol32(t.add_modulo32(y,t.f(79-_,p,m,b),a[c](e[_]),t.KP(_)),o[_]),g),y=g,g=b,b=t.rol32(m,10),m=p,p=E}var k=t.add_modulo32(f[1],d,b);f[1]=t.add_modulo32(f[2],v,g),f[2]=t.add_modulo32(f[3],w,y),f[3]=t.add_modulo32(f[4],h,p),f[4]=t.add_modulo32(f[0],l,m),f[0]=k}var S=new ArrayBuffer(20),O=new DataView(S);return f.forEach(function(t,n){return O.setUint32(4*n,t,!0)}),S}}]),t}()};!function(t){var n=u&&u.i||function(t,n){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,e,s=i.call(t),o=[];try{for(;(void 0===n||n-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(u){e={error:u}}finally{try{r&&!r.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}return o},i=u&&u.o||function(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(n(arguments[i]));return t},r=u&&u.u||function(t){var n="function"==typeof Symbol&&t[Symbol.iterator],i=0;return n?n.call(t):{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}};Object.defineProperty(t,"t",{value:!0});var e,s,o=w.RIPEMD160.hash,a="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",f=function(){for(var t=Array(256).fill(-1),n=0;n<58;++n)t[a.charCodeAt(n)]=n;return t}(),c=function(){for(var t=Array(256).fill(-1),n=0;n<64;++n)t["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(n)]=n;return t["=".charCodeAt(0)]=0,t}();function h(t){return!!(128&t[t.length-1])}function l(t){for(var n=1,i=0;i<t.length;++i){var r=(255&~t[i])+n;t[i]=r,n=r>>8}}function d(t,n){for(var i=new Uint8Array(t),r=0;r<n.length;++r){var e=n.charCodeAt(r);if(e<"0".charCodeAt(0)||e>"9".charCodeAt(0))throw new Error("invalid number");for(var s=e-"0".charCodeAt(0),o=0;o<t;++o){var u=10*i[o]+s;i[o]=u,s=u>>8}if(s)throw new Error("number is out of range")}return i}function v(t,n){void 0===n&&(n=1);for(var r=Array(n).fill("0".charCodeAt(0)),e=t.length-1;e>=0;--e){for(var s=t[e],o=0;o<r.length;++o){var u=(r[o]-"0".charCodeAt(0)<<8)+s;r[o]="0".charCodeAt(0)+u%10,s=u/10|0}for(;s;)r.push("0".charCodeAt(0)+s%10),s=s/10|0}return r.reverse(),String.fromCharCode.apply(String,i(r))}function y(t,n){for(var i=new Uint8Array(t),r=0;r<n.length;++r){var e=f[n.charCodeAt(r)];if(e<0)throw new Error("invalid base-58 value");for(var s=0;s<t;++s){var o=58*i[s]+e;i[s]=o,e=o>>8}if(e)throw new Error("base-58 value is out of range")}return i.reverse(),i}function p(t,n){var e,s,o,u,c=[];try{for(var h=r(t),l=h.next();!l.done;l=h.next()){for(var d=l.value,v=0;v<c.length;++v){var w=(f[c[v]]<<8)+d;c[v]=a.charCodeAt(w%58),d=w/58|0}for(;d;)c.push(a.charCodeAt(d%58)),d=d/58|0}}catch(m){e={error:m}}finally{try{l&&!l.done&&(s=h.return)&&s.call(h)}finally{if(e)throw e.error}}try{for(var y=r(t),p=y.next();!p.done&&!p.value;p=y.next())c.push("1".charCodeAt(0))}catch(b){o={error:b}}finally{try{p&&!p.done&&(u=y.return)&&u.call(y)}finally{if(o)throw o.error}}return c.reverse(),String.fromCharCode.apply(String,i(c))}function m(t,n){for(var i=new Uint8Array(t.length+n.length),r=0;r<t.length;++r)i[r]=t[r];for(r=0;r<n.length;++r)i[t.length+r]=n.charCodeAt(r);return o(i)}function b(t,n,i,r){var e=y(i+4,t),s={type:n,data:new Uint8Array(e.buffer,0,i)},o=new Uint8Array(m(s.data,r));if(o[0]!==e[i+0]||o[1]!==e[i+1]||o[2]!==e[i+2]||o[3]!==e[i+3])throw new Error("checksum doesn't match");return s}function g(t,n,i){for(var r=new Uint8Array(m(t.data,n)),e=new Uint8Array(t.data.length+4),s=0;s<t.data.length;++s)e[s]=t.data[s];for(s=0;s<4;++s)e[s+t.data.length]=r[s];return i+p(e)}function _(n){if("string"!=typeof n)throw new Error("expected string containing public key");if("EOS"===n.substr(0,3)){for(var i=y(t.publicKeyDataSize+4,n.substr(3)),r={type:e.k1,data:new Uint8Array(t.publicKeyDataSize)},s=0;s<t.publicKeyDataSize;++s)r.data[s]=i[s];var u=new Uint8Array(o(r.data));if(u[0]!==i[t.publicKeyDataSize]||u[1]!==i[34]||u[2]!==i[35]||u[3]!==i[36])throw new Error("checksum doesn't match");return r}if("PUB_K1_"===n.substr(0,7))return b(n.substr(7),e.k1,t.publicKeyDataSize,"K1");if("PUB_R1_"===n.substr(0,7))return b(n.substr(7),e.r1,t.publicKeyDataSize,"R1");throw new Error("unrecognized public key format")}function E(n){if(n.type===e.k1&&n.data.length===t.publicKeyDataSize)return g(n,"K1","PUB_K1_");if(n.type===e.r1&&n.data.length===t.publicKeyDataSize)return g(n,"R1","PUB_R1_");throw new Error("unrecognized public key format")}function k(t){return"EOS"===t.substr(0,3)?E(_(t)):t}t.isNegative=h,t.negate=l,t.decimalToBinary=d,t.signedDecimalToBinary=function(t,n){var i="-"===n[0];i&&(n=n.substr(1));var r=d(t,n);if(i){if(l(r),!h(r))throw new Error("number is out of range")}else if(h(r))throw new Error("number is out of range");return r},t.binaryToDecimal=v,t.signedBinaryToDecimal=function(t,n){if(void 0===n&&(n=1),h(t)){var i=t.slice();return l(i),"-"+v(i,n)}return v(t,n)},t.base58ToBinary=y,t.binaryToBase58=p,t.base64ToBinary=function(t){var n=t.length;if(1==(3&n)&&"="===t[n-1]&&(n-=1),3&n)throw new Error("base-64 value is not padded correctly");var i=n>>2,r=3*i;n>0&&"="===t[n-1]&&("="===t[n-2]?r-=2:r-=1);for(var e=new Uint8Array(r),s=0;s<i;++s){var o=c[t.charCodeAt(4*s+0)],u=c[t.charCodeAt(4*s+1)],a=c[t.charCodeAt(4*s+2)],f=c[t.charCodeAt(4*s+3)];e[3*s+0]=o<<2|u>>4,3*s+1<r&&(e[3*s+1]=(15&u)<<4|a>>2),3*s+2<r&&(e[3*s+2]=(3&a)<<6|f)}return e},(s=e=t.KeyType||(t.KeyType={}))[s.k1=0]="k1",s[s.r1=1]="r1",t.publicKeyDataSize=33,t.privateKeyDataSize=32,t.signatureDataSize=65,t.stringToPublicKey=_,t.publicKeyToString=E,t.convertLegacyPublicKey=k,t.convertLegacyPublicKeys=function(t){return t.map(k)},t.stringToPrivateKey=function(n){if("string"!=typeof n)throw new Error("expected string containing private key");if("PVT_R1_"===n.substr(0,7))return b(n.substr(7),e.r1,t.privateKeyDataSize,"R1");throw new Error("unrecognized private key format")},t.privateKeyToString=function(t){if(t.type===e.r1)return g(t,"R1","PVT_R1_");throw new Error("unrecognized private key format")},t.stringToSignature=function(n){if("string"!=typeof n)throw new Error("expected string containing signature");if("SIG_K1_"===n.substr(0,7))return b(n.substr(7),e.k1,t.signatureDataSize,"K1");if("SIG_R1_"===n.substr(0,7))return b(n.substr(7),e.r1,t.signatureDataSize,"R1");throw new Error("unrecognized signature format")},t.signatureToString=function(t){if(t.type===e.k1)return g(t,"K1","SIG_K1_");if(t.type===e.r1)return g(t,"R1","SIG_R1_");throw new Error("unrecognized signature format")}}(l);var y=u&&u.h||function(){return y=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var e in n=arguments[i])({}).hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t},y.apply(this,arguments)},p=u&&u.i||function(t,n){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,e,s=i.call(t),o=[];try{for(;(void 0===n||n-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(u){e={error:u}}finally{try{r&&!r.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}return o},m=u&&u.o||function(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(p(arguments[n]));return t},b=u&&u.u||function(t){var n="function"==typeof Symbol&&t[Symbol.iterator],i=0;return n?n.call(t):{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}};Object.defineProperty(h,"t",{value:!0});var g=l,_=function(){return function(t){void 0===t&&(t={}),this.skippedBinaryExtension=!1,this.options=t}}();h.SerializerState=_;var E=function(){function t(t){var n=void 0===t?{}:t,i=n.textEncoder,r=n.textDecoder,e=n.array;this.readPos=0,this.array=e||new Uint8Array(1024),this.length=e?e.length:0,this.textEncoder=i||new TextEncoder,this.textDecoder=r||new TextDecoder("utf-8",{fatal:!0})}return t.prototype.reserve=function(t){if(!(this.length+t<=this.array.length)){for(var n=this.array.length;this.length+t>n;)n=Math.ceil(1.5*n);var i=new Uint8Array(n);i.set(this.array),this.array=i}},t.prototype.haveReadData=function(){return this.readPos<this.length},t.prototype.restartRead=function(){this.readPos=0},t.prototype.asUint8Array=function(){return new Uint8Array(this.array.buffer,this.array.byteOffset,this.length)},t.prototype.pushArray=function(t){this.reserve(t.length),this.array.set(t,this.length),this.length+=t.length},t.prototype.push=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.pushArray(t)},t.prototype.get=function(){if(this.readPos<this.length)return this.array[this.readPos++];throw new Error("Read past end of buffer")},t.prototype.pushUint8ArrayChecked=function(t,n){if(t.length!==n)throw new Error("Binary data has incorrect size");this.pushArray(t)},t.prototype.getUint8Array=function(t){if(this.readPos+t>this.length)throw new Error("Read past end of buffer");var n=new Uint8Array(this.array.buffer,this.array.byteOffset+this.readPos,t);return this.readPos+=t,n},t.prototype.pushUint16=function(t){this.push(255&t,t>>8&255)},t.prototype.getUint16=function(){var t=0;return(t|=0|this.get())|this.get()<<8},t.prototype.pushUint32=function(t){this.push(255&t,t>>8&255,t>>16&255,t>>24&255)},t.prototype.getUint32=function(){var t=0;return t|=0|this.get(),t|=this.get()<<8,t|=this.get()<<16,(t|=this.get()<<24)>>>0},t.prototype.pushNumberAsUint64=function(t){this.pushUint32(t>>>0),this.pushUint32(Math.floor(t/4294967296)>>>0)},t.prototype.getUint64AsNumber=function(){var t=this.getUint32();return 4294967296*(this.getUint32()>>>0)+(t>>>0)},t.prototype.pushVaruint32=function(t){for(;;){if(!(t>>>7)){this.push(t);break}this.push(128|127&t),t>>>=7}},t.prototype.getVaruint32=function(){for(var t=0,n=0;;){var i=this.get();if(t|=(127&i)<<n,n+=7,!(128&i))break}return t>>>0},t.prototype.pushVarint32=function(t){this.pushVaruint32(t<<1^t>>31)},t.prototype.getVarint32=function(){var t=this.getVaruint32();return 1&t?~t>>1|2147483648:t>>>1},t.prototype.pushFloat32=function(t){this.pushArray(new Uint8Array(new Float32Array([t]).buffer))},t.prototype.getFloat32=function(){return new Float32Array(this.getUint8Array(4).slice().buffer)[0]},t.prototype.pushFloat64=function(t){this.pushArray(new Uint8Array(new Float64Array([t]).buffer))},t.prototype.getFloat64=function(){return new Float64Array(this.getUint8Array(8).slice().buffer)[0]},t.prototype.pushName=function(t){if("string"!=typeof t)throw new Error("Expected string containing name");function n(t){return t>="a".charCodeAt(0)&&t<="z".charCodeAt(0)?t-"a".charCodeAt(0)+6:t>="1".charCodeAt(0)&&t<="5".charCodeAt(0)?t-"1".charCodeAt(0)+1:0}for(var i=new Uint8Array(8),r=63,e=0;e<t.length;++e){var s=n(t.charCodeAt(e));r<5&&(s<<=1);for(var o=4;o>=0;--o)r>=0&&(i[Math.floor(r/8)]|=(s>>o&1)<<r%8,--r)}this.pushArray(i)},t.prototype.getName=function(){for(var t=this.getUint8Array(8),n="",i=63;i>=0;){for(var r=0,e=0;e<5;++e)i>=0&&(r=r<<1|t[Math.floor(i/8)]>>i%8&1,--i);n+=r>=6?String.fromCharCode(r+"a".charCodeAt(0)-6):r>=1?String.fromCharCode(r+"1".charCodeAt(0)-1):"."}for(;n.endsWith(".");)n=n.substr(0,n.length-1);return n},t.prototype.pushBytes=function(t){this.pushVaruint32(t.length),this.pushArray(t)},t.prototype.getBytes=function(){return this.getUint8Array(this.getVaruint32())},t.prototype.pushString=function(t){this.pushBytes(this.textEncoder.encode(t))},t.prototype.getString=function(){return this.textDecoder.decode(this.getBytes())},t.prototype.pushSymbolCode=function(t){if("string"!=typeof t)throw new Error("Expected string containing symbol_code");var n=[];for(n.push.apply(n,m(this.textEncoder.encode(t)));n.length<8;)n.push(0);this.pushArray(n.slice(0,8))},t.prototype.getSymbolCode=function(){var t,n=this.getUint8Array(8);for(t=0;t<n.length&&n[t];++t);return this.textDecoder.decode(new Uint8Array(n.buffer,n.byteOffset,t))},t.prototype.pushSymbol=function(t){var n=t.name,i=[255&t.precision];for(i.push.apply(i,m(this.textEncoder.encode(n)));i.length<8;)i.push(0);this.pushArray(i.slice(0,8))},t.prototype.getSymbol=function(){var t,n=this.get(),i=this.getUint8Array(7);for(t=0;t<i.length&&i[t];++t);return{name:this.textDecoder.decode(new Uint8Array(i.buffer,i.byteOffset,t)),precision:n}},t.prototype.pushAsset=function(t){if("string"!=typeof t)throw new Error("Expected string containing asset");var n=0,i="",r=0;"-"===(t=t.trim())[n]&&(i+="-",++n);for(var e=!1;n<t.length&&t.charCodeAt(n)>="0".charCodeAt(0)&&t.charCodeAt(n)<="9".charCodeAt(0);)e=!0,i+=t[n],++n;if(!e)throw new Error("Asset must begin with a number");if("."===t[n])for(++n;n<t.length&&t.charCodeAt(n)>="0".charCodeAt(0)&&t.charCodeAt(n)<="9".charCodeAt(0);)i+=t[n],++r,++n;var s=t.substr(n).trim();this.pushArray(g.signedDecimalToBinary(8,i)),this.pushSymbol({name:s,precision:r})},t.prototype.getAsset=function(){var t=this.getUint8Array(8),n=this.getSymbol(),i=n.name,r=n.precision,e=g.signedBinaryToDecimal(t,r+1);return r&&(e=e.substr(0,e.length-r)+"."+e.substr(e.length-r)),e+" "+i},t.prototype.pushPublicKey=function(t){var n=g.stringToPublicKey(t);this.push(n.type),this.pushArray(n.data)},t.prototype.getPublicKey=function(){var t=this.get(),n=this.getUint8Array(g.publicKeyDataSize);return g.publicKeyToString({type:t,data:n})},t.prototype.pushPrivateKey=function(t){var n=g.stringToPrivateKey(t);this.push(n.type),this.pushArray(n.data)},t.prototype.getPrivateKey=function(){var t=this.get(),n=this.getUint8Array(g.privateKeyDataSize);return g.privateKeyToString({type:t,data:n})},t.prototype.pushSignature=function(t){var n=g.stringToSignature(t);this.push(n.type),this.pushArray(n.data)},t.prototype.getSignature=function(){var t=this.get(),n=this.getUint8Array(g.signatureDataSize);return g.signatureToString({type:t,data:n})},t}();function k(t){var n=Date.parse(t);if(Number.isNaN(n))throw new Error("Invalid time format");return n}function S(t){return Math.round(1e3*k(t+"Z"))}function O(t){var n=new Date(t/1e3).toISOString();return n.substr(0,n.length-1)}function A(t){return Math.round(k(t+"Z")/1e3)}function x(t){var n=new Date(1e3*t).toISOString();return n.substr(0,n.length-1)}function T(t){return Math.round((k(t+"Z")-9466848e5)/500)}function j(t){var n=new Date(500*t+9466848e5).toISOString();return n.substr(0,n.length-1)}function R(t){if("string"!=typeof t)throw new Error("Expected string containing symbol");var n=t.match(/^([0-9]+),([A-Z]+)$/);if(!n)throw new Error("Invalid symbol");return{name:n[2],precision:+n[1]}}function P(t){var n=t.name;return t.precision+","+n}function M(t){var n,i,r="";try{for(var e=b(t),s=e.next();!s.done;s=e.next())r+=("00"+s.value.toString(16)).slice(-2)}catch(o){n={error:o}}finally{try{s&&!s.done&&(i=e.return)&&i.call(e)}finally{if(n)throw n.error}}return r.toUpperCase()}function z(t){if("string"!=typeof t)throw new Error("Expected string containing hex digits");if(t.length%2)throw new Error("Odd number of hex digits");for(var n=t.length/2,i=new Uint8Array(n),r=0;r<n;++r){var e=parseInt(t.substr(2*r,2),16);if(Number.isNaN(e))throw new Error("Expected hex string");i[r]=e}return i}function U(t,n){throw new Error("Don't know how to serialize "+this.name)}function I(t){throw new Error("Don't know how to deserialize "+this.name)}function N(t,n,i,r){var e,s;if(void 0===i&&(i=new _),void 0===r&&(r=!0),"object"!=typeof n)throw new Error("expected object containing data: "+JSON.stringify(n));this.base&&this.base.serialize(t,n,i,r);try{for(var o=b(this.fields),u=o.next();!u.done;u=o.next()){var a=u.value;if(a.name in n){if(i.skippedBinaryExtension)throw new Error("unexpected "+this.name+"."+a.name);a.type.serialize(t,n[a.name],i,r&&a===this.fields[this.fields.length-1])}else{if(!r||!a.type.extensionOf)throw new Error("missing "+this.name+"."+a.name+" (type="+a.type.name+")");i.skippedBinaryExtension=!0}}}catch(f){e={error:f}}finally{try{u&&!u.done&&(s=o.return)&&s.call(o)}finally{if(e)throw e.error}}}function F(t,n,i){var r,e,s;void 0===n&&(n=new _),void 0===i&&(i=!0),s=this.base?this.base.deserialize(t,n,i):{};try{for(var o=b(this.fields),u=o.next();!u.done;u=o.next()){var a=u.value;i&&a.type.extensionOf&&!t.haveReadData()?n.skippedBinaryExtension=!0:s[a.name]=a.type.deserialize(t,n,i)}}catch(f){r={error:f}}finally{try{u&&!u.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}return s}function W(t,n,i,r){if(!Array.isArray(n)||2!==n.length||"string"!=typeof n[0])throw new Error('expected variant: ["type", value]');var e=this.fields.findIndex(function(t){return t.name===n[0]});if(e<0)throw new Error('type "'+n[0]+'" is not valid for variant');t.pushVaruint32(e),this.fields[e].type.serialize(t,n[1],i,r)}function B(t,n,i){var r=t.getVaruint32();if(r>=this.fields.length)throw new Error("type index "+r+" is not valid for variant");var e=this.fields[r];return[e.name,e.type.deserialize(t,n,i)]}function C(t,n,i,r){var e,s;t.pushVaruint32(n.length);try{for(var o=b(n),u=o.next();!u.done;u=o.next()){var a=u.value;this.arrayOf.serialize(t,a,i,!1)}}catch(f){e={error:f}}finally{try{u&&!u.done&&(s=o.return)&&s.call(o)}finally{if(e)throw e.error}}}function D(t,n,i){for(var r=t.getVaruint32(),e=[],s=0;s<r;++s)e.push(this.arrayOf.deserialize(t,n,!1));return e}function L(t,n,i,r){null==n?t.push(0):(t.push(1),this.optionalOf.serialize(t,n,i,r))}function K(t,n,i){return t.get()?this.optionalOf.deserialize(t,n,i):null}function H(t,n,i,r){this.extensionOf.serialize(t,n,i,r)}function X(t,n,i){return this.extensionOf.deserialize(t,n,i)}function q(t){return y({name:"<missing name>",aliasOfName:"",arrayOf:null,optionalOf:null,extensionOf:null,baseName:"",base:null,fields:[],serialize:U,deserialize:I},t)}function $(t,n){if(Number.isNaN(+t)||Number.isNaN(+n)||"number"!=typeof t&&"string"!=typeof t)throw new Error("Expected number");if(+t!==+n)throw new Error("Number is out of range");return+t}function J(t,n){var i=t.get(n);if(i&&i.aliasOfName)return J(t,i.aliasOfName);if(i)return i;if(n.endsWith("[]"))return q({name:n,arrayOf:J(t,n.substr(0,n.length-2)),serialize:C,deserialize:D});if(n.endsWith("?"))return q({name:n,optionalOf:J(t,n.substr(0,n.length-1)),serialize:L,deserialize:K});if(n.endsWith("$"))return q({name:n,extensionOf:J(t,n.substr(0,n.length-1)),serialize:H,deserialize:X});throw new Error("Unknown type: "+n)}function V(t,n,i,r,e,s){var o=t.actions.get(i);if(!o)throw new Error("Unknown action "+i+" in contract "+n);var u=new E({textEncoder:e,textDecoder:s});return o.serialize(u,r),M(u.asUint8Array())}function G(t,n,i,r,e,s){var o=t.actions.get(i);if("string"==typeof r&&(r=z(r)),!o)throw new Error("Unknown action "+i+" in contract "+n);var u=new E({textDecoder:s,textEncoder:e});return u.pushArray(r),o.deserialize(u)}h.SerialBuffer=E,h.supportedAbiVersion=function(t){return t.startsWith("eosio::abi/1.")},h.dateToTimePoint=S,h.timePointToDate=O,h.dateToTimePointSec=A,h.timePointSecToDate=x,h.dateToBlockTimestamp=T,h.blockTimestampToDate=j,h.stringToSymbol=R,h.symbolToString=P,h.arrayToHex=M,h.hexToUint8Array=z,h.createInitialTypes=function(){var t=new Map(Object.entries({bool:q({name:"bool",serialize:function(t,n){if("boolean"!=typeof n)throw new Error("Expected true or false");t.push(n?1:0)},deserialize:function(t){return!!t.get()}}),uint8:q({name:"uint8",serialize:function(t,n){t.push($(n,255&n))},deserialize:function(t){return t.get()}}),int8:q({name:"int8",serialize:function(t,n){t.push($(n,n<<24>>24))},deserialize:function(t){return t.get()<<24>>24}}),uint16:q({name:"uint16",serialize:function(t,n){t.pushUint16($(n,65535&n))},deserialize:function(t){return t.getUint16()}}),int16:q({name:"int16",serialize:function(t,n){t.pushUint16($(n,n<<16>>16))},deserialize:function(t){return t.getUint16()<<16>>16}}),uint32:q({name:"uint32",serialize:function(t,n){t.pushUint32($(n,n>>>0))},deserialize:function(t){return t.getUint32()}}),uint64:q({name:"uint64",serialize:function(t,n){t.pushArray(g.decimalToBinary(8,""+n))},deserialize:function(t){return g.binaryToDecimal(t.getUint8Array(8))}}),int64:q({name:"int64",serialize:function(t,n){t.pushArray(g.signedDecimalToBinary(8,""+n))},deserialize:function(t){return g.signedBinaryToDecimal(t.getUint8Array(8))}}),int32:q({name:"int32",serialize:function(t,n){t.pushUint32($(n,0|n))},deserialize:function(t){return 0|t.getUint32()}}),varuint32:q({name:"varuint32",serialize:function(t,n){t.pushVaruint32($(n,n>>>0))},deserialize:function(t){return t.getVaruint32()}}),varint32:q({name:"varint32",serialize:function(t,n){t.pushVarint32($(n,0|n))},deserialize:function(t){return t.getVarint32()}}),uint128:q({name:"uint128",serialize:function(t,n){t.pushArray(g.decimalToBinary(16,""+n))},deserialize:function(t){return g.binaryToDecimal(t.getUint8Array(16))}}),int128:q({name:"int128",serialize:function(t,n){t.pushArray(g.signedDecimalToBinary(16,""+n))},deserialize:function(t){return g.signedBinaryToDecimal(t.getUint8Array(16))}}),float32:q({name:"float32",serialize:function(t,n){t.pushFloat32(n)},deserialize:function(t){return t.getFloat32()}}),float64:q({name:"float64",serialize:function(t,n){t.pushFloat64(n)},deserialize:function(t){return t.getFloat64()}}),float128:q({name:"float128",serialize:function(t,n){t.pushUint8ArrayChecked(z(n),16)},deserialize:function(t){return M(t.getUint8Array(16))}}),bytes:q({name:"bytes",serialize:function(t,n){n instanceof Uint8Array||Array.isArray(n)?t.pushBytes(n):t.pushBytes(z(n))},deserialize:function(t,n){return n&&n.options.bytesAsUint8Array?t.getBytes():M(t.getBytes())}}),string:q({name:"string",serialize:function(t,n){t.pushString(n)},deserialize:function(t){return t.getString()}}),name:q({name:"name",serialize:function(t,n){t.pushName(n)},deserialize:function(t){return t.getName()}}),time_point:q({name:"time_point",serialize:function(t,n){t.pushNumberAsUint64(S(n))},deserialize:function(t){return O(t.getUint64AsNumber())}}),time_point_sec:q({name:"time_point_sec",serialize:function(t,n){t.pushUint32(A(n))},deserialize:function(t){return x(t.getUint32())}}),block_timestamp_type:q({name:"block_timestamp_type",serialize:function(t,n){t.pushUint32(T(n))},deserialize:function(t){return j(t.getUint32())}}),symbol_code:q({name:"symbol_code",serialize:function(t,n){t.pushSymbolCode(n)},deserialize:function(t){return t.getSymbolCode()}}),symbol:q({name:"symbol",serialize:function(t,n){t.pushSymbol(R(n))},deserialize:function(t){return P(t.getSymbol())}}),asset:q({name:"asset",serialize:function(t,n){t.pushAsset(n)},deserialize:function(t){return t.getAsset()}}),checksum160:q({name:"checksum160",serialize:function(t,n){t.pushUint8ArrayChecked(z(n),20)},deserialize:function(t){return M(t.getUint8Array(20))}}),checksum256:q({name:"checksum256",serialize:function(t,n){t.pushUint8ArrayChecked(z(n),32)},deserialize:function(t){return M(t.getUint8Array(32))}}),checksum512:q({name:"checksum512",serialize:function(t,n){t.pushUint8ArrayChecked(z(n),64)},deserialize:function(t){return M(t.getUint8Array(64))}}),public_key:q({name:"public_key",serialize:function(t,n){t.pushPublicKey(n)},deserialize:function(t){return t.getPublicKey()}}),private_key:q({name:"private_key",serialize:function(t,n){t.pushPrivateKey(n)},deserialize:function(t){return t.getPrivateKey()}}),signature:q({name:"signature",serialize:function(t,n){t.pushSignature(n)},deserialize:function(t){return t.getSignature()}})}));return t.set("extended_asset",q({name:"extended_asset",baseName:"",fields:[{name:"quantity",typeName:"asset",type:t.get("asset")},{name:"contract",typeName:"name",type:t.get("name")}],serialize:N,deserialize:F})),t},h.getType=J,h.getTypesFromAbi=function(t,n){var i,r,e,s,o,u,a,f,c,h,l=new Map(t);if(n.types)try{for(var d=b(n.types),v=d.next();!v.done;v=d.next()){var w=v.value,y=w.new_type_name,m=w.type;l.set(y,q({name:y,aliasOfName:m}))}}catch(D){i={error:D}}finally{try{v&&!v.done&&(r=d.return)&&r.call(d)}finally{if(i)throw i.error}}if(n.structs)try{for(var g=b(n.structs),_=g.next();!_.done;_=g.next()){var E=_.value,k=E.name,S=E.base,O=E.fields;l.set(k,q({name:k,baseName:S,fields:O.map(function(t){return{name:t.name,typeName:t.type,type:null}}),serialize:N,deserialize:F}))}}catch(L){e={error:L}}finally{try{_&&!_.done&&(s=g.return)&&s.call(g)}finally{if(e)throw e.error}}if(n.variants)try{for(var A=b(n.variants),x=A.next();!x.done;x=A.next()){var T=x.value,j=T.name,R=T.types;l.set(j,q({name:j,fields:R.map(function(t){return{name:t,typeName:t,type:null}}),serialize:W,deserialize:B}))}}catch(K){o={error:K}}finally{try{x&&!x.done&&(u=A.return)&&u.call(A)}finally{if(o)throw o.error}}try{for(var P=b(l),M=P.next();!M.done;M=P.next()){var z=p(M.value,2);z[0],(m=z[1]).baseName&&(m.base=J(l,m.baseName));try{for(var U=b(m.fields),I=U.next();!I.done;I=U.next()){var C=I.value;C.type=J(l,C.typeName)}}catch(H){c={error:H}}finally{try{I&&!I.done&&(h=U.return)&&h.call(U)}finally{if(c)throw c.error}}}}catch(X){a={error:X}}finally{try{M&&!M.done&&(f=P.return)&&f.call(P)}finally{if(a)throw a.error}}return l},h.transactionHeader=function(t,n){return{expiration:x(A(t.timestamp)+n),ref_block_num:65535&t.block_num,ref_block_prefix:t.ref_block_prefix}},h.serializeActionData=V,h.serializeAction=function(t,n,i,r,e,s,o){return{account:n,name:i,authorization:r,data:V(t,n,i,e,s,o)}},h.deserializeActionData=G,h.deserializeAction=function(t,n,i,r,e,s,o){return{account:n,name:i,authorization:r,data:G(t,n,i,e,s,o)}};var Y=u&&u.h||function(){return Y=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var e in n=arguments[i])({}).hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t},Y.apply(this,arguments)},Z=u&&u.l||function(t,n,i,r){return new(i||(i=Promise))(function(e,s){function o(t){try{a(r.next(t))}catch(n){s(n)}}function u(t){try{a(r.throw(t))}catch(n){s(n)}}function a(t){t.done?e(t.value):new i(function(n){n(t.value)}).then(o,u)}a((r=r.apply(t,n||[])).next())})},Q=u&&u.v||function(t,n){var i,r,e,s,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,r&&(e=2&s[0]?r.return:s[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,s[1])).done)return e;switch(r=0,e&&(s=[2&s[0],e.value]),s[0]){case 0:case 1:e=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((e=(e=o.trys).length>0&&e[e.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!e||s[1]>e[0]&&s[1]<e[3])){o.label=s[1];break}if(6===s[0]&&o.label<e[1]){o.label=e[1],e=s;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(s);break}e[2]&&o.ops.pop(),o.trys.pop();continue}s=n.call(t,o)}catch(u){s=[6,u],r=0}finally{i=e=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},tt=u&&u.p||function(t,n){var i={};for(var r in t)({}).hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(r=Object.getOwnPropertySymbols(t);e<r.length;e++)n.indexOf(r[e])<0&&(i[r[e]]=t[r[e]])}return i},nt=u&&u.i||function(t,n){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,e,s=i.call(t),o=[];try{for(;(void 0===n||n-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(u){e={error:u}}finally{try{r&&!r.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}return o},it=u&&u.o||function(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(nt(arguments[n]));return t},rt=u&&u.u||function(t){var n="function"==typeof Symbol&&t[Symbol.iterator],i=0;return n?n.call(t):{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}};Object.defineProperty(c,"t",{value:!0});var et=h,st={version:"eosio::abi/1.1",structs:[{name:"extensions_entry",base:"",fields:[{name:"tag",type:"uint16"},{name:"value",type:"bytes"}]},{name:"type_def",base:"",fields:[{name:"new_type_name",type:"string"},{name:"type",type:"string"}]},{name:"field_def",base:"",fields:[{name:"name",type:"string"},{name:"type",type:"string"}]},{name:"struct_def",base:"",fields:[{name:"name",type:"string"},{name:"base",type:"string"},{name:"fields",type:"field_def[]"}]},{name:"action_def",base:"",fields:[{name:"name",type:"name"},{name:"type",type:"string"},{name:"ricardian_contract",type:"string"}]},{name:"table_def",base:"",fields:[{name:"name",type:"name"},{name:"index_type",type:"string"},{name:"key_names",type:"string[]"},{name:"key_types",type:"string[]"},{name:"type",type:"string"}]},{name:"clause_pair",base:"",fields:[{name:"id",type:"string"},{name:"body",type:"string"}]},{name:"error_message",base:"",fields:[{name:"error_code",type:"uint64"},{name:"error_msg",type:"string"}]},{name:"variant_def",base:"",fields:[{name:"name",type:"string"},{name:"types",type:"string[]"}]},{name:"abi_def",base:"",fields:[{name:"version",type:"string"},{name:"types",type:"type_def[]"},{name:"structs",type:"struct_def[]"},{name:"actions",type:"action_def[]"},{name:"tables",type:"table_def[]"},{name:"ricardian_clauses",type:"clause_pair[]"},{name:"error_messages",type:"error_message[]"},{name:"abi_extensions",type:"extensions_entry[]"},{name:"variants",type:"variant_def[]$"}]}]},ot={version:"eosio::abi/1.0",types:[{new_type_name:"account_name",type:"name"},{new_type_name:"action_name",type:"name"},{new_type_name:"permission_name",type:"name"}],structs:[{name:"permission_level",base:"",fields:[{name:"actor",type:"account_name"},{name:"permission",type:"permission_name"}]},{name:"action",base:"",fields:[{name:"account",type:"account_name"},{name:"name",type:"action_name"},{name:"authorization",type:"permission_level[]"},{name:"data",type:"bytes"}]},{name:"extension",base:"",fields:[{name:"type",type:"uint16"},{name:"data",type:"bytes"}]},{name:"transaction_header",base:"",fields:[{name:"expiration",type:"time_point_sec"},{name:"ref_block_num",type:"uint16"},{name:"ref_block_prefix",type:"uint32"},{name:"max_net_usage_words",type:"varuint32"},{name:"max_cpu_usage_ms",type:"uint8"},{name:"delay_sec",type:"varuint32"}]},{name:"transaction",base:"transaction_header",fields:[{name:"context_free_actions",type:"action[]"},{name:"actions",type:"action[]"},{name:"transaction_extensions",type:"extension[]"}]}]},ut=function(){function t(t){this.contracts=new Map,this.cachedAbis=new Map,this.rpc=t.rpc,this.authorityProvider=t.authorityProvider||t.rpc,this.abiProvider=t.abiProvider||t.rpc,this.signatureProvider=t.signatureProvider,this.chainId=t.chainId,this.textEncoder=t.textEncoder,this.textDecoder=t.textDecoder,this.abiTypes=et.getTypesFromAbi(et.createInitialTypes(),st),this.transactionTypes=et.getTypesFromAbi(et.createInitialTypes(),ot)}return t.prototype.rawAbiToJson=function(t){var n=new et.SerialBuffer({textEncoder:this.textEncoder,textDecoder:this.textDecoder,array:t});if(!et.supportedAbiVersion(n.getString()))throw new Error("Unsupported abi version");return n.restartRead(),this.abiTypes.get("abi_def").deserialize(n)},t.prototype.getCachedAbi=function(t,n){return void 0===n&&(n=!1),Z(this,void 0,void 0,function(){var i,r,e,s;return Q(this,function(o){switch(o.label){case 0:if(!n&&this.cachedAbis.get(t))return[2,this.cachedAbis.get(t)];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.abiProvider.getRawAbi(t)];case 2:return r=o.sent().abi,e=this.rawAbiToJson(r),i={rawAbi:r,abi:e},[3,4];case 3:throw(s=o.sent()).message="fetching abi for "+t+": "+s.message,s;case 4:if(!i)throw new Error("Missing abi for "+t);return this.cachedAbis.set(t,i),[2,i]}})})},t.prototype.getAbi=function(t,n){return void 0===n&&(n=!1),Z(this,void 0,void 0,function(){return Q(this,function(i){switch(i.label){case 0:return[4,this.getCachedAbi(t,n)];case 1:return[2,i.sent().abi]}})})},t.prototype.getTransactionAbis=function(t,n){return void 0===n&&(n=!1),Z(this,void 0,void 0,function(){var i,r,e,s=this;return Q(this,function(o){return i=t.actions.map(function(t){return t.account}),r=new Set(i),e=it(r).map(function(t){return Z(s,void 0,void 0,function(){var i;return Q(this,function(r){switch(r.label){case 0:return i={accountName:t},[4,this.getCachedAbi(t,n)];case 1:return[2,(i.abi=r.sent().rawAbi,i)]}})})}),[2,Promise.all(e)]})})},t.prototype.getContract=function(t,n){return void 0===n&&(n=!1),Z(this,void 0,void 0,function(){var i,r,e,s,o,u,a,f,c,h,l;return Q(this,function(d){switch(d.label){case 0:return!n&&this.contracts.get(t)?[2,this.contracts.get(t)]:[4,this.getAbi(t,n)];case 1:e=d.sent(),s=et.getTypesFromAbi(et.createInitialTypes(),e),o=new Map;try{for(u=rt(e.actions),a=u.next();!a.done;a=u.next())f=a.value,c=f.name,h=f.type,o.set(c,et.getType(s,h))}catch(v){i={error:v}}finally{try{a&&!a.done&&(r=u.return)&&r.call(u)}finally{if(i)throw i.error}}return l={types:s,actions:o},this.contracts.set(t,l),[2,l]}})})},t.prototype.serialize=function(t,n,i){this.transactionTypes.get(n).serialize(t,i)},t.prototype.deserialize=function(t,n){return this.transactionTypes.get(n).deserialize(t)},t.prototype.serializeTransaction=function(t){var n=new et.SerialBuffer({textEncoder:this.textEncoder,textDecoder:this.textDecoder});return this.serialize(n,"transaction",Y({max_net_usage_words:0,max_cpu_usage_ms:0,delay_sec:0,context_free_actions:[],actions:[],transaction_extensions:[]},t)),n.asUint8Array()},t.prototype.deserializeTransaction=function(t){var n=new et.SerialBuffer({textEncoder:this.textEncoder,textDecoder:this.textDecoder});return n.pushArray(t),this.deserialize(n,"transaction")},t.prototype.serializeActions=function(t){return Z(this,void 0,void 0,function(){var n=this;return Q(this,function(i){switch(i.label){case 0:return[4,Promise.all(t.map(function(t){var i=t.account,r=t.name,e=t.authorization,s=t.data;return Z(n,void 0,void 0,function(){var t;return Q(this,function(n){switch(n.label){case 0:return[4,this.getContract(i)];case 1:return t=n.sent(),[2,et.serializeAction(t,i,r,e,s,this.textEncoder,this.textDecoder)]}})})}))];case 1:return[2,i.sent()]}})})},t.prototype.deserializeActions=function(t){return Z(this,void 0,void 0,function(){var n=this;return Q(this,function(i){switch(i.label){case 0:return[4,Promise.all(t.map(function(t){var i=t.account,r=t.name,e=t.authorization,s=t.data;return Z(n,void 0,void 0,function(){var t;return Q(this,function(n){switch(n.label){case 0:return[4,this.getContract(i)];case 1:return t=n.sent(),[2,et.deserializeAction(t,i,r,e,s,this.textEncoder,this.textDecoder)]}})})}))];case 1:return[2,i.sent()]}})})},t.prototype.deserializeTransactionWithActions=function(t){return Z(this,void 0,void 0,function(){var n,i;return Q(this,function(r){switch(r.label){case 0:return"string"==typeof t&&(t=et.hexToUint8Array(t)),n=this.deserializeTransaction(t),[4,this.deserializeActions(n.actions)];case 1:return i=r.sent(),[2,Y({},n,{actions:i})]}})})},t.prototype.transact=function(t,n){var i=void 0===n?{}:n,r=i.broadcast,e=void 0===r||r,s=i.sign,o=void 0===s||s,u=i.blocksBehind,a=i.expireSeconds;return Z(this,void 0,void 0,function(){var n,i,r,s,f,c,h,l,d;return Q(this,function(v){switch(v.label){case 0:return this.chainId?[3,2]:[4,this.rpc.get_info()];case 1:n=v.sent(),this.chainId=n.chain_id,v.label=2;case 2:return"number"==typeof u&&a?n?[3,4]:[4,this.rpc.get_info()]:[3,6];case 3:n=v.sent(),v.label=4;case 4:return[4,this.rpc.get_block(n.head_block_num-u)];case 5:i=v.sent(),t=Y({},et.transactionHeader(i,a),t),v.label=6;case 6:if(!this.hasRequiredTaposFields(t))throw new Error("Required configuration or TAPOS fields are not present");return[4,this.getTransactionAbis(t)];case 7:return r=v.sent(),s=[{},t],f={},[4,this.serializeActions(t.actions)];case 8:return t=Y.apply(void 0,s.concat([(f.actions=v.sent(),f)])),c=this.serializeTransaction(t),h={serializedTransaction:c,signatures:[]},o?[4,this.signatureProvider.getAvailableKeys()]:[3,12];case 9:return l=v.sent(),[4,this.authorityProvider.getRequiredKeys({transaction:t,availableKeys:l})];case 10:return d=v.sent(),[4,this.signatureProvider.sign({chainId:this.chainId,requiredKeys:d,serializedTransaction:c,abis:r})];case 11:h=v.sent(),v.label=12;case 12:return e?[2,this.pushSignedTransaction(h)]:[2,h]}})})},t.prototype.pushSignedTransaction=function(t){var n=t.signatures,i=t.serializedTransaction;return Z(this,void 0,void 0,function(){return Q(this,function(t){return[2,this.rpc.push_transaction({signatures:n,serializedTransaction:i})]})})},t.prototype.hasRequiredTaposFields=function(t){var n=t.expiration,i=t.ref_block_num,r=t.ref_block_prefix;return tt(t,["expiration","ref_block_num","ref_block_prefix"]),!!(n&&i&&r)},t}();c.Api=ut;var at={};Object.defineProperty(at,"t",{value:!0});var ft={},ct={},ht=u&&u.m||function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(n,i)};return function(n,i){function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(ct,"t",{value:!0});var lt=function(t){function n(i){var r=this;return r=i.error&&i.error.details&&i.error.details.length&&i.error.details[0].message?t.call(this,i.error.details[0].message)||this:i.processed&&i.processed.except&&i.processed.except.message?t.call(this,i.processed.except.message)||this:t.call(this,i.message)||this,Object.setPrototypeOf(r,n.prototype),r.json=i,r}return ht(n,t),n}(Error);ct.RpcError=lt;var dt=u&&u.l||function(t,n,i,r){return new(i||(i=Promise))(function(e,s){function o(t){try{a(r.next(t))}catch(n){s(n)}}function u(t){try{a(r.throw(t))}catch(n){s(n)}}function a(t){t.done?e(t.value):new i(function(n){n(t.value)}).then(o,u)}a((r=r.apply(t,n||[])).next())})},vt=u&&u.v||function(t,n){var i,r,e,s,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,r&&(e=2&s[0]?r.return:s[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,s[1])).done)return e;switch(r=0,e&&(s=[2&s[0],e.value]),s[0]){case 0:case 1:e=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((e=(e=o.trys).length>0&&e[e.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!e||s[1]>e[0]&&s[1]<e[3])){o.label=s[1];break}if(6===s[0]&&o.label<e[1]){o.label=e[1],e=s;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(s);break}e[2]&&o.ops.pop(),o.trys.pop();continue}s=n.call(t,o)}catch(u){s=[6,u],r=0}finally{i=e=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},wt=u&&u.u||function(t){var n="function"==typeof Symbol&&t[Symbol.iterator],i=0;return n?n.call(t):{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}};Object.defineProperty(ft,"t",{value:!0});var yt=l,pt=ct;function mt(t){var n,i,r="";try{for(var e=wt(t),s=e.next();!s.done;s=e.next())r+=("00"+s.value.toString(16)).slice(-2)}catch(o){n={error:o}}finally{try{s&&!s.done&&(i=e.return)&&i.call(e)}finally{if(n)throw n.error}}return r}var bt=function(){function t(t,n){void 0===n&&(n={}),this.endpoint=t,n.fetch?this.fetchBuiltin=n.fetch:this.fetchBuiltin=u.fetch}return t.prototype.fetch=function(t,n){return dt(this,void 0,void 0,function(){var i,r,e;return vt(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,(0,this.fetchBuiltin)(this.endpoint+t,{body:JSON.stringify(n),method:"POST"})];case 1:return[4,(i=s.sent()).json()];case 2:if((r=s.sent()).processed&&r.processed.except)throw new pt.RpcError(r);return[3,4];case 3:throw(e=s.sent()).isFetchError=!0,e;case 4:if(!i.ok)throw new pt.RpcError(r);return[2,r]}})})},t.prototype.get_abi=function(t){return dt(this,void 0,void 0,function(){return vt(this,function(n){switch(n.label){case 0:return[4,this.fetch("/v1/chain/get_abi",{account_name:t})];case 1:return[2,n.sent()]}})})},t.prototype.get_account=function(t){return dt(this,void 0,void 0,function(){return vt(this,function(n){switch(n.label){case 0:return[4,this.fetch("/v1/chain/get_account",{account_name:t})];case 1:return[2,n.sent()]}})})},t.prototype.get_block_header_state=function(t){return dt(this,void 0,void 0,function(){return vt(this,function(n){switch(n.label){case 0:return[4,this.fetch("/v1/chain/get_block_header_state",{block_num_or_id:t})];case 1:return[2,n.sent()]}})})},t.prototype.get_block=function(t){return dt(this,void 0,void 0,function(){return vt(this,function(n){switch(n.label){case 0:return[4,this.fetch("/v1/chain/get_block",{block_num_or_id:t})];case 1:return[2,n.sent()]}})})},t.prototype.get_code=function(t){return dt(this,void 0,void 0,function(){return vt(this,function(n){switch(n.label){case 0:return[4,this.fetch("/v1/chain/get_code",{account_name:t})];case 1:return[2,n.sent()]}})})},t.prototype.get_currency_balance=function(t,n,i){return void 0===i&&(i=null),dt(this,void 0,void 0,function(){return vt(this,function(r){switch(r.label){case 0:return[4,this.fetch("/v1/chain/get_currency_balance",{code:t,account:n,symbol:i})];case 1:return[2,r.sent()]}})})},t.prototype.get_currency_stats=function(t,n){return dt(this,void 0,void 0,function(){return vt(this,function(i){switch(i.label){case 0:return[4,this.fetch("/v1/chain/get_currency_stats",{code:t,symbol:n})];case 1:return[2,i.sent()]}})})},t.prototype.get_info=function(){return dt(this,void 0,void 0,function(){return vt(this,function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/get_info",{})];case 1:return[2,t.sent()]}})})},t.prototype.get_producer_schedule=function(){return dt(this,void 0,void 0,function(){return vt(this,function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/get_producer_schedule",{})];case 1:return[2,t.sent()]}})})},t.prototype.get_producers=function(t,n,i){return void 0===t&&(t=!0),void 0===n&&(n=""),void 0===i&&(i=50),dt(this,void 0,void 0,function(){return vt(this,function(r){switch(r.label){case 0:return[4,this.fetch("/v1/chain/get_producers",{json:t,lower_bound:n,limit:i})];case 1:return[2,r.sent()]}})})},t.prototype.get_raw_code_and_abi=function(t){return dt(this,void 0,void 0,function(){return vt(this,function(n){switch(n.label){case 0:return[4,this.fetch("/v1/chain/get_raw_code_and_abi",{account_name:t})];case 1:return[2,n.sent()]}})})},t.prototype.getRawAbi=function(t){return dt(this,void 0,void 0,function(){var n,i;return vt(this,function(r){switch(r.label){case 0:return[4,this.get_raw_code_and_abi(t)];case 1:return n=r.sent(),i=yt.base64ToBinary(n.abi),[2,{accountName:n.account_name,abi:i}]}})})},t.prototype.get_table_rows=function(t){var n=t.json,i=void 0===n||n,r=t.code,e=t.scope,s=t.table,o=t.table_key,u=void 0===o?"":o,a=t.lower_bound,f=void 0===a?"":a,c=t.upper_bound,h=void 0===c?"":c,l=t.index_position,d=void 0===l?1:l,v=t.key_type,w=void 0===v?"":v,y=t.limit,p=void 0===y?10:y,m=t.reverse,b=void 0!==m&&m,g=t.show_payer,_=void 0!==g&&g;return dt(this,void 0,void 0,function(){return vt(this,function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/get_table_rows",{json:i,code:r,scope:e,table:s,table_key:u,lower_bound:f,upper_bound:h,index_position:d,key_type:w,limit:p,reverse:b,show_payer:_})];case 1:return[2,t.sent()]}})})},t.prototype.get_table_by_scope=function(t){var n=t.code,i=t.table,r=t.lower_bound,e=void 0===r?"":r,s=t.upper_bound,o=void 0===s?"":s,u=t.limit,a=void 0===u?10:u;return dt(this,void 0,void 0,function(){return vt(this,function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/get_table_by_scope",{code:n,table:i,lower_bound:e,upper_bound:o,limit:a})];case 1:return[2,t.sent()]}})})},t.prototype.getRequiredKeys=function(t){return dt(this,void 0,void 0,function(){var n;return vt(this,function(i){switch(i.label){case 0:return n=yt.convertLegacyPublicKeys,[4,this.fetch("/v1/chain/get_required_keys",{transaction:t.transaction,available_keys:t.availableKeys})];case 1:return[2,n.apply(void 0,[i.sent().required_keys])]}})})},t.prototype.push_transaction=function(t){var n=t.signatures,i=t.serializedTransaction;return dt(this,void 0,void 0,function(){return vt(this,function(t){switch(t.label){case 0:return[4,this.fetch("/v1/chain/push_transaction",{signatures:n,compression:0,packed_context_free_data:"",packed_trx:mt(i)})];case 1:return[2,t.sent()]}})})},t.prototype.db_size_get=function(){return dt(this,void 0,void 0,function(){return vt(this,function(t){switch(t.label){case 0:return[4,this.fetch("/v1/db_size/get",{})];case 1:return[2,t.sent()]}})})},t.prototype.history_get_actions=function(t,n,i){return void 0===n&&(n=null),void 0===i&&(i=null),dt(this,void 0,void 0,function(){return vt(this,function(r){switch(r.label){case 0:return[4,this.fetch("/v1/history/get_actions",{account_name:t,pos:n,offset:i})];case 1:return[2,r.sent()]}})})},t.prototype.history_get_transaction=function(t,n){return void 0===n&&(n=null),dt(this,void 0,void 0,function(){return vt(this,function(i){switch(i.label){case 0:return[4,this.fetch("/v1/history/get_transaction",{id:t,block_num_hint:n})];case 1:return[2,i.sent()]}})})},t.prototype.history_get_key_accounts=function(t){return dt(this,void 0,void 0,function(){return vt(this,function(n){switch(n.label){case 0:return[4,this.fetch("/v1/history/get_key_accounts",{public_key:t})];case 1:return[2,n.sent()]}})})},t.prototype.history_get_controlled_accounts=function(t){return dt(this,void 0,void 0,function(){return vt(this,function(n){switch(n.label){case 0:return[4,this.fetch("/v1/history/get_controlled_accounts",{controlling_account:t})];case 1:return[2,n.sent()]}})})},t}();ft.JsonRpc=bt;var gt={};Object.defineProperty(gt,"t",{value:!0}),Object.defineProperty(f,"t",{value:!0});var _t=c,Et=f.Api=_t.Api,kt=at;f.ApiInterfaces=kt;var St=ft,Ot=f.JsonRpc=St.JsonRpc,At=l;f.Numeric=At;var xt=gt;f.RpcInterfaces=xt;var Tt=ct;f.RpcError=Tt.RpcError;var jt=h;f.Serialize=jt;var Rt={},Pt=null;"undefined"!=typeof WebSocket?Pt=WebSocket:"undefined"!=typeof MozWebSocket?Pt=MozWebSocket:void 0!==u?Pt=u.WebSocket||u.MozWebSocket:"undefined"!=typeof window?Pt=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&(Pt=self.WebSocket||self.MozWebSocket);var Mt=Pt;Mt.default;var zt="function"==typeof Object.create?function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,n){t.super_=n;var i=function(){};i.prototype=n.prototype,t.prototype=new i,t.prototype.constructor=t},Ut=a(Object.freeze({__proto__:null,default:zt})),It={exports:{}},Nt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Ft=[],Wt=[],Bt="undefined"!=typeof Uint8Array?Uint8Array:Array,Ct=!1;function Dt(){Ct=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0;n<64;++n)Ft[n]=t[n],Wt[t.charCodeAt(n)]=n;Wt["-".charCodeAt(0)]=62,Wt["_".charCodeAt(0)]=63}function Lt(t){return Ft[t>>18&63]+Ft[t>>12&63]+Ft[t>>6&63]+Ft[63&t]}function Kt(t,n,i){for(var r,e=[],s=n;s<i;s+=3)r=(t[s]<<16)+(t[s+1]<<8)+t[s+2],e.push(Lt(r));return e.join("")}function Ht(t){var n;Ct||Dt();for(var i=t.length,r=i%3,e="",s=[],o=16383,u=0,a=i-r;u<a;u+=o)s.push(Kt(t,u,u+o>a?a:u+o));return 1===r?(n=t[i-1],e+=Ft[n>>2],e+=Ft[n<<4&63],e+="=="):2===r&&(n=(t[i-2]<<8)+t[i-1],e+=Ft[n>>10],e+=Ft[n>>4&63],e+=Ft[n<<2&63],e+="="),s.push(e),s.join("")}function Xt(t,n,i,r,e){var s,o,u=8*e-r-1,a=(1<<u)-1,f=a>>1,c=-7,h=i?e-1:0,l=i?-1:1,d=t[n+h];for(h+=l,s=d&(1<<-c)-1,d>>=-c,c+=u;c>0;s=256*s+t[n+h],h+=l,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=r;c>0;o=256*o+t[n+h],h+=l,c-=8);if(0===s)s=1-f;else{if(s===a)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),s-=f}return(d?-1:1)*o*Math.pow(2,s-r)}function qt(t,n,i,r,e,s){var o,u,a,f=8*s-e-1,c=(1<<f)-1,h=c>>1,l=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:s-1,v=r?1:-1,w=n<0||0===n&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(u=isNaN(n)?1:0,o=c):(o=Math.floor(Math.log(n)/Math.LN2),n*(a=Math.pow(2,-o))<1&&(o--,a*=2),(n+=o+h>=1?l/a:l*Math.pow(2,1-h))*a>=2&&(o++,a/=2),o+h>=c?(u=0,o=c):o+h>=1?(u=(n*a-1)*Math.pow(2,e),o+=h):(u=n*Math.pow(2,h-1)*Math.pow(2,e),o=0));e>=8;t[i+d]=255&u,d+=v,u/=256,e-=8);for(o=o<<e|u,f+=e;f>0;t[i+d]=255&o,d+=v,o/=256,f-=8);t[i+d-v]|=128*w}var $t={}.toString,Jt=Array.isArray||function(t){return"[object Array]"==$t.call(t)};Zt.TYPED_ARRAY_SUPPORT=void 0===Nt.TYPED_ARRAY_SUPPORT||Nt.TYPED_ARRAY_SUPPORT;var Vt=Gt();function Gt(){return Zt.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Yt(t,n){if(Gt()<n)throw new RangeError("Invalid typed array length");return Zt.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(n)).__proto__=Zt.prototype:(null===t&&(t=new Zt(n)),t.length=n),t}function Zt(t,n,i){if(!(Zt.TYPED_ARRAY_SUPPORT||this instanceof Zt))return new Zt(t,n,i);if("number"==typeof t){if("string"==typeof n)throw new Error("If encoding is specified then the first argument must be a string");return nn(this,t)}return Qt(this,t,n,i)}function Qt(t,n,i,r){if("number"==typeof n)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer?function(t,n,i,r){if(n.byteLength,i<0||n.byteLength<i)throw new RangeError("'offset' is out of bounds");if(n.byteLength<i+(r||0))throw new RangeError("'length' is out of bounds");return n=void 0===i&&void 0===r?new Uint8Array(n):void 0===r?new Uint8Array(n,i):new Uint8Array(n,i,r),Zt.TYPED_ARRAY_SUPPORT?(t=n).__proto__=Zt.prototype:t=rn(t,n),t}(t,n,i,r):"string"==typeof n?function(t,n,i){if("string"==typeof i&&""!==i||(i="utf8"),!Zt.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var r=0|on(n,i),e=(t=Yt(t,r)).write(n,i);return e!==r&&(t=t.slice(0,e)),t}(t,n,i):function(t,n){if(sn(n)){var i=0|en(n.length);return 0===(t=Yt(t,i)).length||n.copy(t,0,0,i),t}if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||(r=n.length)!=r?Yt(t,0):rn(t,n);if("Buffer"===n.type&&Jt(n.data))return rn(t,n.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,n)}function tn(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function nn(t,n){if(tn(n),t=Yt(t,n<0?0:0|en(n)),!Zt.TYPED_ARRAY_SUPPORT)for(var i=0;i<n;++i)t[i]=0;return t}function rn(t,n){var i=n.length<0?0:0|en(n.length);t=Yt(t,i);for(var r=0;r<i;r+=1)t[r]=255&n[r];return t}function en(t){if(t>=Gt())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Gt().toString(16)+" bytes");return 0|t}function sn(t){return!(null==t||!t._)}function on(t,n){if(sn(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var r=!1;;)switch(n){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return zn(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return Un(t).length;default:if(r)return zn(t).length;n=(""+n).toLowerCase(),r=!0}}function un(t,n,i){var r=!1;if((void 0===n||n<0)&&(n=0),n>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(n>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return En(this,n,i);case"utf8":case"utf-8":return mn(this,n,i);case"ascii":return gn(this,n,i);case"latin1":case"binary":return _n(this,n,i);case"base64":return pn(this,n,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return kn(this,n,i);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function an(t,n,i){var r=t[n];t[n]=t[i],t[i]=r}function fn(t,n,i,r,e){if(0===t.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=e?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(e)return-1;i=t.length-1}else if(i<0){if(!e)return-1;i=0}if("string"==typeof n&&(n=Zt.from(n,r)),sn(n))return 0===n.length?-1:cn(t,n,i,r,e);if("number"==typeof n)return n&=255,Zt.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(t,n,i):Uint8Array.prototype.lastIndexOf.call(t,n,i):cn(t,[n],i,r,e);throw new TypeError("val must be string, number or Buffer")}function cn(t,n,i,r,e){var s,o=1,u=t.length,a=n.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||n.length<2)return-1;o=2,u/=2,a/=2,i/=2}function f(t,n){return 1===o?t[n]:t.readUInt16BE(n*o)}if(e){var c=-1;for(s=i;s<u;s++)if(f(t,s)===f(n,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===a)return c*o}else-1!==c&&(s-=s-c),c=-1}else for(i+a>u&&(i=u-a),s=i;s>=0;s--){for(var h=!0,l=0;l<a;l++)if(f(t,s+l)!==f(n,l)){h=!1;break}if(h)return s}return-1}function hn(t,n,i,r){i=Number(i)||0;var e=t.length-i;r?(r=Number(r))>e&&(r=e):r=e;var s=n.length;if(s%2!=0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;++o){var u=parseInt(n.substr(2*o,2),16);if(isNaN(u))return o;t[i+o]=u}return o}function ln(t,n,i,r){return In(zn(n,t.length-i),t,i,r)}function dn(t,n,i,r){return In(function(t){for(var n=[],i=0;i<t.length;++i)n.push(255&t.charCodeAt(i));return n}(n),t,i,r)}function vn(t,n,i,r){return dn(t,n,i,r)}function wn(t,n,i,r){return In(Un(n),t,i,r)}function yn(t,n,i,r){return In(function(t,n){for(var i,r,e,s=[],o=0;o<t.length&&!((n-=2)<0);++o)r=(i=t.charCodeAt(o))>>8,e=i%256,s.push(e),s.push(r);return s}(n,t.length-i),t,i,r)}function pn(t,n,i){return 0===n&&i===t.length?Ht(t):Ht(t.slice(n,i))}function mn(t,n,i){i=Math.min(t.length,i);for(var r=[],e=n;e<i;){var s,o,u,a,f=t[e],c=null,h=f>239?4:f>223?3:f>191?2:1;if(e+h<=i)switch(h){case 1:f<128&&(c=f);break;case 2:128==(192&(s=t[e+1]))&&(a=(31&f)<<6|63&s)>127&&(c=a);break;case 3:s=t[e+1],o=t[e+2],128==(192&s)&&128==(192&o)&&(a=(15&f)<<12|(63&s)<<6|63&o)>2047&&(a<55296||a>57343)&&(c=a);break;case 4:s=t[e+1],o=t[e+2],u=t[e+3],128==(192&s)&&128==(192&o)&&128==(192&u)&&(a=(15&f)<<18|(63&s)<<12|(63&o)<<6|63&u)>65535&&a<1114112&&(c=a)}null===c?(c=65533,h=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),e+=h}return function(t){var n=t.length;if(n<=bn)return String.fromCharCode.apply(String,t);for(var i="",r=0;r<n;)i+=String.fromCharCode.apply(String,t.slice(r,r+=bn));return i}(r)}Zt.poolSize=8192,Zt.k=function(t){return t.__proto__=Zt.prototype,t},Zt.from=function(t,n,i){return Qt(null,t,n,i)},Zt.TYPED_ARRAY_SUPPORT&&(Zt.prototype.__proto__=Uint8Array.prototype,Zt.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Zt[Symbol.species]),Zt.alloc=function(t,n,i){return function(t,n,i,r){return tn(n),n<=0?Yt(t,n):void 0!==i?"string"==typeof r?Yt(t,n).fill(i,r):Yt(t,n).fill(i):Yt(t,n)}(null,t,n,i)},Zt.allocUnsafe=function(t){return nn(null,t)},Zt.allocUnsafeSlow=function(t){return nn(null,t)},Zt.isBuffer=Nn,Zt.compare=function(t,n){if(!sn(t)||!sn(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var i=t.length,r=n.length,e=0,s=Math.min(i,r);e<s;++e)if(t[e]!==n[e]){i=t[e],r=n[e];break}return i<r?-1:r<i?1:0},Zt.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Zt.concat=function(t,n){if(!Jt(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return Zt.alloc(0);var i;if(void 0===n)for(n=0,i=0;i<t.length;++i)n+=t[i].length;var r=Zt.allocUnsafe(n),e=0;for(i=0;i<t.length;++i){var s=t[i];if(!sn(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,e),e+=s.length}return r},Zt.byteLength=on,Zt.prototype._=!0,Zt.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<t;n+=2)an(this,n,n+1);return this},Zt.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<t;n+=4)an(this,n,n+3),an(this,n+1,n+2);return this},Zt.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<t;n+=8)an(this,n,n+7),an(this,n+1,n+6),an(this,n+2,n+5),an(this,n+3,n+4);return this},Zt.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?mn(this,0,t):un.apply(this,arguments)},Zt.prototype.equals=function(t){if(!sn(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Zt.compare(this,t)},Zt.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},Zt.prototype.compare=function(t,n,i,r,e){if(!sn(t))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=0),void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===e&&(e=this.length),n<0||i>t.length||r<0||e>this.length)throw new RangeError("out of range index");if(r>=e&&n>=i)return 0;if(r>=e)return-1;if(n>=i)return 1;if(this===t)return 0;for(var s=(e>>>=0)-(r>>>=0),o=(i>>>=0)-(n>>>=0),u=Math.min(s,o),a=this.slice(r,e),f=t.slice(n,i),c=0;c<u;++c)if(a[c]!==f[c]){s=a[c],o=f[c];break}return s<o?-1:o<s?1:0},Zt.prototype.includes=function(t,n,i){return-1!==this.indexOf(t,n,i)},Zt.prototype.indexOf=function(t,n,i){return fn(this,t,n,i,!0)},Zt.prototype.lastIndexOf=function(t,n,i){return fn(this,t,n,i,!1)},Zt.prototype.write=function(t,n,i,r){if(void 0===n)r="utf8",i=this.length,n=0;else if(void 0===i&&"string"==typeof n)r=n,i=this.length,n=0;else{if(!isFinite(n))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");n|=0,isFinite(i)?(i|=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}var e=this.length-n;if((void 0===i||i>e)&&(i=e),t.length>0&&(i<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return hn(this,t,n,i);case"utf8":case"utf-8":return ln(this,t,n,i);case"ascii":return dn(this,t,n,i);case"latin1":case"binary":return vn(this,t,n,i);case"base64":return wn(this,t,n,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return yn(this,t,n,i);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},Zt.prototype.toJSON=function(){return{type:"Buffer",data:[].slice.call(this.S||this,0)}};var bn=4096;function gn(t,n,i){var r="";i=Math.min(t.length,i);for(var e=n;e<i;++e)r+=String.fromCharCode(127&t[e]);return r}function _n(t,n,i){var r="";i=Math.min(t.length,i);for(var e=n;e<i;++e)r+=String.fromCharCode(t[e]);return r}function En(t,n,i){var r=t.length;(!n||n<0)&&(n=0),(!i||i<0||i>r)&&(i=r);for(var e="",s=n;s<i;++s)e+=Mn(t[s]);return e}function kn(t,n,i){for(var r=t.slice(n,i),e="",s=0;s<r.length;s+=2)e+=String.fromCharCode(r[s]+256*r[s+1]);return e}function Sn(t,n,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+n>i)throw new RangeError("Trying to access beyond buffer length")}function On(t,n,i,r,e,s){if(!sn(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>e||n<s)throw new RangeError('"value" argument is out of bounds');if(i+r>t.length)throw new RangeError("Index out of range")}function An(t,n,i,r){n<0&&(n=65535+n+1);for(var e=0,s=Math.min(t.length-i,2);e<s;++e)t[i+e]=(n&255<<8*(r?e:1-e))>>>8*(r?e:1-e)}function xn(t,n,i,r){n<0&&(n=4294967295+n+1);for(var e=0,s=Math.min(t.length-i,4);e<s;++e)t[i+e]=n>>>8*(r?e:3-e)&255}function Tn(t,n,i,r,e,s){if(i+r>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function jn(t,n,i,r,e){return e||Tn(t,0,i,4),qt(t,n,i,r,23,4),i+4}function Rn(t,n,i,r,e){return e||Tn(t,0,i,8),qt(t,n,i,r,52,8),i+8}Zt.prototype.slice=function(t,n){var i,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(n=void 0===n?r:~~n)<0?(n+=r)<0&&(n=0):n>r&&(n=r),n<t&&(n=t),Zt.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,n)).__proto__=Zt.prototype;else{var e=n-t;i=new Zt(e,void 0);for(var s=0;s<e;++s)i[s]=this[s+t]}return i},Zt.prototype.readUIntLE=function(t,n,i){t|=0,n|=0,i||Sn(t,n,this.length);for(var r=this[t],e=1,s=0;++s<n&&(e*=256);)r+=this[t+s]*e;return r},Zt.prototype.readUIntBE=function(t,n,i){t|=0,n|=0,i||Sn(t,n,this.length);for(var r=this[t+--n],e=1;n>0&&(e*=256);)r+=this[t+--n]*e;return r},Zt.prototype.readUInt8=function(t,n){return n||Sn(t,1,this.length),this[t]},Zt.prototype.readUInt16LE=function(t,n){return n||Sn(t,2,this.length),this[t]|this[t+1]<<8},Zt.prototype.readUInt16BE=function(t,n){return n||Sn(t,2,this.length),this[t]<<8|this[t+1]},Zt.prototype.readUInt32LE=function(t,n){return n||Sn(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Zt.prototype.readUInt32BE=function(t,n){return n||Sn(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Zt.prototype.readIntLE=function(t,n,i){t|=0,n|=0,i||Sn(t,n,this.length);for(var r=this[t],e=1,s=0;++s<n&&(e*=256);)r+=this[t+s]*e;return r>=(e*=128)&&(r-=Math.pow(2,8*n)),r},Zt.prototype.readIntBE=function(t,n,i){t|=0,n|=0,i||Sn(t,n,this.length);for(var r=n,e=1,s=this[t+--r];r>0&&(e*=256);)s+=this[t+--r]*e;return s>=(e*=128)&&(s-=Math.pow(2,8*n)),s},Zt.prototype.readInt8=function(t,n){return n||Sn(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},Zt.prototype.readInt16LE=function(t,n){n||Sn(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},Zt.prototype.readInt16BE=function(t,n){n||Sn(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},Zt.prototype.readInt32LE=function(t,n){return n||Sn(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Zt.prototype.readInt32BE=function(t,n){return n||Sn(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Zt.prototype.readFloatLE=function(t,n){return n||Sn(t,4,this.length),Xt(this,t,!0,23,4)},Zt.prototype.readFloatBE=function(t,n){return n||Sn(t,4,this.length),Xt(this,t,!1,23,4)},Zt.prototype.readDoubleLE=function(t,n){return n||Sn(t,8,this.length),Xt(this,t,!0,52,8)},Zt.prototype.readDoubleBE=function(t,n){return n||Sn(t,8,this.length),Xt(this,t,!1,52,8)},Zt.prototype.writeUIntLE=function(t,n,i,r){t=+t,n|=0,i|=0,r||On(this,t,n,i,Math.pow(2,8*i)-1,0);var e=1,s=0;for(this[n]=255&t;++s<i&&(e*=256);)this[n+s]=t/e&255;return n+i},Zt.prototype.writeUIntBE=function(t,n,i,r){t=+t,n|=0,i|=0,r||On(this,t,n,i,Math.pow(2,8*i)-1,0);var e=i-1,s=1;for(this[n+e]=255&t;--e>=0&&(s*=256);)this[n+e]=t/s&255;return n+i},Zt.prototype.writeUInt8=function(t,n,i){return t=+t,n|=0,i||On(this,t,n,1,255,0),Zt.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=255&t,n+1},Zt.prototype.writeUInt16LE=function(t,n,i){return t=+t,n|=0,i||On(this,t,n,2,65535,0),Zt.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):An(this,t,n,!0),n+2},Zt.prototype.writeUInt16BE=function(t,n,i){return t=+t,n|=0,i||On(this,t,n,2,65535,0),Zt.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):An(this,t,n,!1),n+2},Zt.prototype.writeUInt32LE=function(t,n,i){return t=+t,n|=0,i||On(this,t,n,4,4294967295,0),Zt.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=255&t):xn(this,t,n,!0),n+4},Zt.prototype.writeUInt32BE=function(t,n,i){return t=+t,n|=0,i||On(this,t,n,4,4294967295,0),Zt.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):xn(this,t,n,!1),n+4},Zt.prototype.writeIntLE=function(t,n,i,r){if(t=+t,n|=0,!r){var e=Math.pow(2,8*i-1);On(this,t,n,i,e-1,-e)}var s=0,o=1,u=0;for(this[n]=255&t;++s<i&&(o*=256);)t<0&&0===u&&0!==this[n+s-1]&&(u=1),this[n+s]=(t/o|0)-u&255;return n+i},Zt.prototype.writeIntBE=function(t,n,i,r){if(t=+t,n|=0,!r){var e=Math.pow(2,8*i-1);On(this,t,n,i,e-1,-e)}var s=i-1,o=1,u=0;for(this[n+s]=255&t;--s>=0&&(o*=256);)t<0&&0===u&&0!==this[n+s+1]&&(u=1),this[n+s]=(t/o|0)-u&255;return n+i},Zt.prototype.writeInt8=function(t,n,i){return t=+t,n|=0,i||On(this,t,n,1,127,-128),Zt.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[n]=255&t,n+1},Zt.prototype.writeInt16LE=function(t,n,i){return t=+t,n|=0,i||On(this,t,n,2,32767,-32768),Zt.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):An(this,t,n,!0),n+2},Zt.prototype.writeInt16BE=function(t,n,i){return t=+t,n|=0,i||On(this,t,n,2,32767,-32768),Zt.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):An(this,t,n,!1),n+2},Zt.prototype.writeInt32LE=function(t,n,i){return t=+t,n|=0,i||On(this,t,n,4,2147483647,-2147483648),Zt.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):xn(this,t,n,!0),n+4},Zt.prototype.writeInt32BE=function(t,n,i){return t=+t,n|=0,i||On(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Zt.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):xn(this,t,n,!1),n+4},Zt.prototype.writeFloatLE=function(t,n,i){return jn(this,t,n,!0,i)},Zt.prototype.writeFloatBE=function(t,n,i){return jn(this,t,n,!1,i)},Zt.prototype.writeDoubleLE=function(t,n,i){return Rn(this,t,n,!0,i)},Zt.prototype.writeDoubleBE=function(t,n,i){return Rn(this,t,n,!1,i)},Zt.prototype.copy=function(t,n,i,r){if(i||(i=0),r||0===r||(r=this.length),n>=t.length&&(n=t.length),n||(n=0),r>0&&r<i&&(r=i),r===i)return 0;if(0===t.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-n<r-i&&(r=t.length-n+i);var e,s=r-i;if(this===t&&i<n&&n<r)for(e=s-1;e>=0;--e)t[e+n]=this[e+i];else if(s<1e3||!Zt.TYPED_ARRAY_SUPPORT)for(e=0;e<s;++e)t[e+n]=this[e+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+s),n);return s},Zt.prototype.fill=function(t,n,i,r){if("string"==typeof t){if("string"==typeof n?(r=n,n=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),1===t.length){var e=t.charCodeAt(0);e<256&&(t=e)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Zt.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(n<0||this.length<n||this.length<i)throw new RangeError("Out of range index");if(i<=n)return this;var s;if(n>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(s=n;s<i;++s)this[s]=t;else{var o=sn(t)?t:zn(new Zt(t,r).toString()),u=o.length;for(s=0;s<i-n;++s)this[s+n]=o[s%u]}return this};var Pn=/[^+\/0-9A-Za-z-_]/g;function Mn(t){return t<16?"0"+t.toString(16):t.toString(16)}function zn(t,n){var i;n=n||1/0;for(var r=t.length,e=null,s=[],o=0;o<r;++o){if((i=t.charCodeAt(o))>55295&&i<57344){if(!e){if(i>56319){(n-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(n-=3)>-1&&s.push(239,191,189);continue}e=i;continue}if(i<56320){(n-=3)>-1&&s.push(239,191,189),e=i;continue}i=65536+(e-55296<<10|i-56320)}else e&&(n-=3)>-1&&s.push(239,191,189);if(e=null,i<128){if((n-=1)<0)break;s.push(i)}else if(i<2048){if((n-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((n-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((n-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function Un(t){return function(t){var n,i,r,e,s,o;Ct||Dt();var u=t.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s="="===t[u-2]?2:"="===t[u-1]?1:0,o=new Bt(3*u/4-s),r=s>0?u-4:u;var a=0;for(n=0,i=0;n<r;n+=4,i+=3)e=Wt[t.charCodeAt(n)]<<18|Wt[t.charCodeAt(n+1)]<<12|Wt[t.charCodeAt(n+2)]<<6|Wt[t.charCodeAt(n+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=255&e;return 2===s?(e=Wt[t.charCodeAt(n)]<<2|Wt[t.charCodeAt(n+1)]>>4,o[a++]=255&e):1===s&&(e=Wt[t.charCodeAt(n)]<<10|Wt[t.charCodeAt(n+1)]<<4|Wt[t.charCodeAt(n+2)]>>2,o[a++]=e>>8&255,o[a++]=255&e),o}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(Pn,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function In(t,n,i,r){for(var e=0;e<r&&!(e+i>=n.length||e>=t.length);++e)n[e+i]=t[e];return e}function Nn(t){return null!=t&&(!!t._||Fn(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&Fn(t.slice(0,0))}(t))}function Fn(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var Wn=a(Object.freeze({__proto__:null,Buffer:Zt,INSPECT_MAX_BYTES:50,SlowBuffer:function(t){return+t!=t&&(t=0),Zt.alloc(+t)},isBuffer:Nn,kMaxLength:Vt}));!function(t,n){var i=Wn,r=i.Buffer;function e(t,n){for(var i in t)n[i]=t[i]}function s(t,n,i){return r(t,n,i)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=i:(e(i,n),n.Buffer=s),s.prototype=Object.create(r.prototype),e(r,s),s.from=function(t,n,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return r(t,n,i)},s.alloc=function(t,n,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var e=r(t);return void 0!==n?"string"==typeof i?e.fill(n,i):e.fill(n):e.fill(0),e},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i.SlowBuffer(t)}}(It,It.exports);var Bn=It.exports;Bn.default;var Cn={exports:{}};function Dn(){throw new Error("setTimeout has not been defined")}function Ln(){throw new Error("clearTimeout has not been defined")}var Kn=Dn,Hn=Ln;function Xn(t){if(Kn===setTimeout)return setTimeout(t,0);if((Kn===Dn||!Kn)&&setTimeout)return Kn=setTimeout,setTimeout(t,0);try{return Kn(t,0)}catch(n){try{return Kn.call(null,t,0)}catch(i){return Kn.call(this,t,0)}}}"function"==typeof Nt.setTimeout&&(Kn=setTimeout),"function"==typeof Nt.clearTimeout&&(Hn=clearTimeout);var qn,$n=[],Jn=!1,Vn=-1;function Gn(){Jn&&qn&&(Jn=!1,qn.length?$n=qn.concat($n):Vn=-1,$n.length&&Yn())}function Yn(){if(!Jn){var t=Xn(Gn);Jn=!0;for(var n=$n.length;n;){for(qn=$n,$n=[];++Vn<n;)qn&&qn[Vn].run();Vn=-1,n=$n.length}qn=null,Jn=!1,function(t){if(Hn===clearTimeout)return clearTimeout(t);if((Hn===Ln||!Hn)&&clearTimeout)return Hn=clearTimeout,clearTimeout(t);try{return Hn(t)}catch(n){try{return Hn.call(null,t)}catch(i){return Hn.call(this,t)}}}(t)}}function Zn(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)n[i-1]=arguments[i];$n.push(new Qn(t,n)),1!==$n.length||Jn||Xn(Yn)}function Qn(t,n){this.fun=t,this.array=n}function ti(){}Qn.prototype.run=function(){this.fun.apply(null,this.array)};var ni=ti,ii=ti,ri=ti,ei=ti,si=ti,oi=ti,ui=ti,ai=Nt.performance||{},fi=ai.now||ai.mozNow||ai.msNow||ai.oNow||ai.webkitNow||function(){return(new Date).getTime()},ci=new Date,hi={nextTick:Zn,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:ni,addListener:ii,once:ri,off:ei,removeListener:si,removeAllListeners:oi,emit:ui,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var n=.001*fi.call(ai),i=Math.floor(n),r=Math.floor(n%1*1e9);return t&&(i-=t[0],(r-=t[1])<0&&(i--,r+=1e9)),[i,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-ci)/1e3}};function li(){}function di(){di.init.call(this)}function vi(t){return void 0===t.O?di.defaultMaxListeners:t.O}function wi(t,n,i,r){var e,s,o;if("function"!=typeof i)throw new TypeError('"listener" argument must be a function');if((s=t.A)?(s.newListener&&(t.emit("newListener",n,i.listener?i.listener:i),s=t.A),o=s[n]):(s=t.A=new li,t.T=0),o){if("function"==typeof o?o=s[n]=r?[i,o]:[o,i]:r?o.unshift(i):o.push(i),!o.warned&&(e=vi(t))&&e>0&&o.length>e){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+n+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=n,u.count=o.length,console.warn}}else o=s[n]=i,++t.T;return t}function yi(t,n,i){var r=!1;function e(){t.removeListener(n,e),r||(r=!0,i.apply(t,arguments))}return e.listener=i,e}function pi(t){var n=this.A;if(n){var i=n[t];if("function"==typeof i)return 1;if(i)return i.length}return 0}function mi(t,n){for(var i=new Array(n);n--;)i[n]=t[n];return i}li.prototype=Object.create(null),di.EventEmitter=di,di.usingDomains=!1,di.prototype.domain=void 0,di.prototype.A=void 0,di.prototype.O=void 0,di.defaultMaxListeners=10,di.init=function(){this.domain=null,di.usingDomains&&(void 0).active,this.A&&this.A!==Object.getPrototypeOf(this).A||(this.A=new li,this.T=0),this.O=this.O||void 0},di.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this.O=t,this},di.prototype.getMaxListeners=function(){return vi(this)},di.prototype.emit=function(t){var n,i,r,e,s,o,u,a="error"===t;if(o=this.A)a=a&&null==o.error;else if(!a)return!1;if(u=this.domain,a){if(n=arguments[1],!u){if(n instanceof Error)throw n;var f=new Error('Uncaught, unspecified "error" event. ('+n+")");throw f.context=n,f}return n||(n=new Error('Uncaught, unspecified "error" event')),n.domainEmitter=this,n.domain=u,n.domainThrown=!1,u.emit("error",n),!1}if(!(i=o[t]))return!1;var c="function"==typeof i;switch(r=arguments.length){case 1:!function(t,n,i){if(n)t.call(i);else for(var r=t.length,e=mi(t,r),s=0;s<r;++s)e[s].call(i)}(i,c,this);break;case 2:!function(t,n,i,r){if(n)t.call(i,r);else for(var e=t.length,s=mi(t,e),o=0;o<e;++o)s[o].call(i,r)}(i,c,this,arguments[1]);break;case 3:!function(t,n,i,r,e){if(n)t.call(i,r,e);else for(var s=t.length,o=mi(t,s),u=0;u<s;++u)o[u].call(i,r,e)}(i,c,this,arguments[1],arguments[2]);break;case 4:!function(t,n,i,r,e,s){if(n)t.call(i,r,e,s);else for(var o=t.length,u=mi(t,o),a=0;a<o;++a)u[a].call(i,r,e,s)}(i,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(e=new Array(r-1),s=1;s<r;s++)e[s-1]=arguments[s];!function(t,n,i,r){if(n)t.apply(i,r);else for(var e=t.length,s=mi(t,e),o=0;o<e;++o)s[o].apply(i,r)}(i,c,this,e)}return!0},di.prototype.addListener=function(t,n){return wi(this,t,n,!1)},di.prototype.on=di.prototype.addListener,di.prototype.prependListener=function(t,n){return wi(this,t,n,!0)},di.prototype.once=function(t,n){if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');return this.on(t,yi(this,t,n)),this},di.prototype.prependOnceListener=function(t,n){if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,yi(this,t,n)),this},di.prototype.removeListener=function(t,n){var i,r,e,s,o;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if(!(r=this.A))return this;if(!(i=r[t]))return this;if(i===n||i.listener&&i.listener===n)0===--this.T?this.A=new li:(delete r[t],r.removeListener&&this.emit("removeListener",t,i.listener||n));else if("function"!=typeof i){for(e=-1,s=i.length;s-- >0;)if(i[s]===n||i[s].listener&&i[s].listener===n){o=i[s].listener,e=s;break}if(e<0)return this;if(1===i.length){if(i[0]=void 0,0===--this.T)return this.A=new li,this;delete r[t]}else!function(t,n){for(var i=n,r=i+1,e=t.length;r<e;i+=1,r+=1)t[i]=t[r];t.pop()}(i,e);r.removeListener&&this.emit("removeListener",t,o||n)}return this},di.prototype.off=function(t,n){return this.removeListener(t,n)},di.prototype.removeAllListeners=function(t){var n,i;if(!(i=this.A))return this;if(!i.removeListener)return 0===arguments.length?(this.A=new li,this.T=0):i[t]&&(0===--this.T?this.A=new li:delete i[t]),this;if(0===arguments.length){for(var r,e=Object.keys(i),s=0;s<e.length;++s)"removeListener"!==(r=e[s])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this.A=new li,this.T=0,this}if("function"==typeof(n=i[t]))this.removeListener(t,n);else if(n)do{this.removeListener(t,n[n.length-1])}while(n[0]);return this},di.prototype.listeners=function(t){var n,i=this.A;return i&&(n=i[t])?"function"==typeof n?[n.listener||n]:function(t){for(var n=new Array(t.length),i=0;i<n.length;++i)n[i]=t[i].listener||t[i];return n}(n):[]},di.listenerCount=function(t,n){return"function"==typeof t.listenerCount?t.listenerCount(n):pi.call(t,n)},di.prototype.listenerCount=pi,di.prototype.eventNames=function(){return this.T>0?Reflect.ownKeys(this.A):[]};var bi,gi,_i=a(Object.freeze({__proto__:null,EventEmitter:di,default:di}));function Ei(){return gi?bi:(gi=1,bi=_i.EventEmitter)}var ki="function"==typeof Object.create?function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,n){t.super_=n;var i=function(){};i.prototype=n.prototype,t.prototype=new i,t.prototype.constructor=t},Si=Object.getOwnPropertyDescriptors||function(t){for(var n=Object.keys(t),i={},r=0;r<n.length;r++)i[n[r]]=Object.getOwnPropertyDescriptor(t,n[r]);return i},Oi=/%[sdj%]/g;function Ai(t){if(!Li(t)){for(var n=[],i=0;i<arguments.length;i++)n.push(Pi(arguments[i]));return n.join(" ")}i=1;for(var r=arguments,e=r.length,s=String(t).replace(Oi,function(t){if("%%"===t)return"%";if(i>=e)return t;switch(t){case"%s":return String(r[i++]);case"%d":return Number(r[i++]);case"%j":try{return JSON.stringify(r[i++])}catch(n){return"[Circular]"}default:return t}}),o=r[i];i<e;o=r[++i])Bi(o)||!qi(o)?s+=" "+o:s+=" "+Pi(o);return s}function xi(t,n){if(Hi(Nt.process))return function(){return xi(t,n).apply(this,arguments)};if(!0===hi.noDeprecation)return t;var i=!1;return function(){if(!i){if(hi.throwDeprecation)throw new Error(n);hi.traceDeprecation,i=!0}return t.apply(this,arguments)}}var Ti,ji={};function Ri(t){return Hi(Ti)&&(Ti=hi.env.NODE_DEBUG||""),t=t.toUpperCase(),ji[t]||(new RegExp("\\b"+t+"\\b","i").test(Ti)?ji[t]=function(){Ai.apply(null,arguments)}:ji[t]=function(){}),ji[t]}function Pi(t,n){var i={seen:[],stylize:zi};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),Wi(n)?i.showHidden=n:n&&tr(i,n),Hi(i.showHidden)&&(i.showHidden=!1),Hi(i.depth)&&(i.depth=2),Hi(i.colors)&&(i.colors=!1),Hi(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=Mi),Ui(i,t,i.depth)}function Mi(t,n){var i=Pi.styles[n];return i?"\x1b["+Pi.colors[i][0]+"m"+t+"\x1b["+Pi.colors[i][1]+"m":t}function zi(t,n){return t}function Ui(t,n,i){if(t.customInspect&&n&&Vi(n.inspect)&&n.inspect!==Pi&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,t);return Li(r)||(r=Ui(t,r,i)),r}var e=function(t,n){if(Hi(n))return t.stylize("undefined","undefined");if(Li(n)){var i="'"+JSON.stringify(n).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}return Di(n)?t.stylize(""+n,"number"):Wi(n)?t.stylize(""+n,"boolean"):Bi(n)?t.stylize("null","null"):void 0}(t,n);if(e)return e;var s=Object.keys(n),o=function(t){var n={};return t.forEach(function(t,i){n[t]=!0}),n}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),Ji(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return Ii(n);if(0===s.length){if(Vi(n)){var u=n.name?": "+n.name:"";return t.stylize("[Function"+u+"]","special")}if(Xi(n))return t.stylize(/t/.toString.call(n),"regexp");if($i(n))return t.stylize(Date.prototype.toString.call(n),"date");if(Ji(n))return Ii(n)}var a,f="",c=!1,h=["{","}"];return Fi(n)&&(c=!0,h=["[","]"]),Vi(n)&&(f=" [Function"+(n.name?": "+n.name:"")+"]"),Xi(n)&&(f=" "+/t/.toString.call(n)),$i(n)&&(f=" "+Date.prototype.toUTCString.call(n)),Ji(n)&&(f=" "+Ii(n)),0!==s.length||c&&0!=n.length?i<0?Xi(n)?t.stylize(/t/.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),a=c?function(t,n,i,r,e){for(var s=[],o=0,u=n.length;o<u;++o)nr(n,String(o))?s.push(Ni(t,n,i,r,String(o),!0)):s.push("");return e.forEach(function(e){e.match(/^\d+$/)||s.push(Ni(t,n,i,r,e,!0))}),s}(t,n,i,o,s):s.map(function(r){return Ni(t,n,i,o,r,c)}),t.seen.pop(),function(t,n,i){return t.reduce(function(t,n){return n.indexOf("\n"),t+n.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?i[0]+(""===n?"":n+"\n ")+" "+t.join(",\n  ")+" "+i[1]:i[0]+n+" "+t.join(", ")+" "+i[1]}(a,f,h)):h[0]+f+h[1]}function Ii(t){return"["+Error.prototype.toString.call(t)+"]"}function Ni(t,n,i,r,e,s){var o,u,a;if((a=Object.getOwnPropertyDescriptor(n,e)||{value:n[e]}).get?u=a.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):a.set&&(u=t.stylize("[Setter]","special")),nr(r,e)||(o="["+e+"]"),u||(t.seen.indexOf(a.value)<0?(u=Bi(i)?Ui(t,a.value,null):Ui(t,a.value,i-1)).indexOf("\n")>-1&&(u=s?u.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+u.split("\n").map(function(t){return"   "+t}).join("\n")):u=t.stylize("[Circular]","special")),Hi(o)){if(s&&e.match(/^\d+$/))return u;(o=JSON.stringify(""+e)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+u}function Fi(t){return Array.isArray(t)}function Wi(t){return"boolean"==typeof t}function Bi(t){return null===t}function Ci(t){return null==t}function Di(t){return"number"==typeof t}function Li(t){return"string"==typeof t}function Ki(t){return"symbol"==typeof t}function Hi(t){return void 0===t}function Xi(t){return qi(t)&&"[object RegExp]"===Zi(t)}function qi(t){return"object"==typeof t&&null!==t}function $i(t){return qi(t)&&"[object Date]"===Zi(t)}function Ji(t){return qi(t)&&("[object Error]"===Zi(t)||t instanceof Error)}function Vi(t){return"function"==typeof t}function Gi(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function Yi(t){return Zt.isBuffer(t)}function Zi(t){return{}.toString.call(t)}function Qi(){}function tr(t,n){if(!n||!qi(n))return t;for(var i=Object.keys(n),r=i.length;r--;)t[i[r]]=n[i[r]];return t}function nr(t,n){return{}.hasOwnProperty.call(t,n)}Pi.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Pi.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var ir="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function rr(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(ir&&t[ir]){var n;if("function"!=typeof(n=t[ir]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(n,ir,{value:n,enumerable:!1,writable:!1,configurable:!0}),n}function n(){for(var n,i,r=new Promise(function(t,r){n=t,i=r}),e=[],s=0;s<arguments.length;s++)e.push(arguments[s]);e.push(function(t,r){t?i(t):n(r)});try{t.apply(this,e)}catch(o){i(o)}return r}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),ir&&Object.defineProperty(n,ir,{value:n,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(n,Si(t))}function er(t,n){if(!t){var i=new Error("Promise was rejected with a falsy value");i.reason=t,t=i}return n(t)}function sr(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i]);var r=n.pop();if("function"!=typeof r)throw new TypeError("The last argument must be of type Function");var e=this,s=function(){return r.apply(e,arguments)};t.apply(this,n).then(function(t){hi.nextTick(s.bind(null,null,t))},function(t){hi.nextTick(er.bind(null,t,s))})}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,Si(t)),n}rr.custom=ir;var or,ur,ar,fr,cr={inherits:ki,j:tr,log:Qi,isBuffer:Yi,isPrimitive:Gi,isFunction:Vi,isError:Ji,isDate:$i,isObject:qi,isRegExp:Xi,isUndefined:Hi,isSymbol:Ki,isString:Li,isNumber:Di,isNullOrUndefined:Ci,isNull:Bi,isBoolean:Wi,isArray:Fi,inspect:Pi,deprecate:xi,format:Ai,debuglog:Ri,promisify:rr,callbackify:sr},hr=a(Object.freeze({__proto__:null,j:tr,callbackify:sr,debuglog:Ri,default:cr,deprecate:xi,format:Ai,inherits:ki,inspect:Pi,isArray:Fi,isBoolean:Wi,isBuffer:Yi,isDate:$i,isError:Ji,isFunction:Vi,isNull:Bi,isNullOrUndefined:Ci,isNumber:Di,isObject:qi,isPrimitive:Gi,isRegExp:Xi,isString:Li,isSymbol:Ki,isUndefined:Hi,log:Qi,promisify:rr}));function lr(){if(ur)return or;function t(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function n(n){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?t(Object(e),!0).forEach(function(t){i(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):t(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function i(t,n,i){return(n=r(n))in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}function r(t){var n=function(t){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof n?n:String(n)}ur=1;var e=Wn.Buffer,s=hr.inspect,o=s&&s.custom||"inspect";function u(t,n,i){e.prototype.copy.call(t,n,i)}return or=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return i=t,a=[{key:"push",value:function(t){var n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(t){var n={data:t,next:this.head};0===this.length&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=t+n.data;return i}},{key:"concat",value:function(t){if(0===this.length)return e.alloc(0);for(var n=e.allocUnsafe(t>>>0),i=this.head,r=0;i;)u(i.data,n,r),r+=i.data.length,i=i.next;return n}},{key:"consume",value:function(t,n){var i;return t<this.head.data.length?(i=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):i=t===this.head.data.length?this.shift():n?this.R(t):this.P(t),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var n=this.head,i=1,r=n.data;for(t-=r.length;n=n.next;){var e=n.data,s=t>e.length?e.length:t;if(s===e.length?r+=e:r+=e.slice(0,t),0===(t-=s)){s===e.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=e.slice(s));break}++i}return this.length-=i,r}},{key:"_getBuffer",value:function(t){var n=e.allocUnsafe(t),i=this.head,r=1;for(i.data.copy(n),t-=i.data.length;i=i.next;){var s=i.data,o=t>s.length?s.length:t;if(s.copy(n,n.length-t,0,o),0===(t-=o)){o===s.length?(++r,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=s.slice(o));break}++r}return this.length-=r,n}},{key:o,value:function(t,i){return s(this,n(n({},i),{},{depth:0,customInspect:!1}))}}],a&&function(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,r(e.key),e)}}(i.prototype,a),Object.defineProperty(i,"prototype",{writable:!1}),t;var i,a}(),or}function dr(){if(fr)return ar;function t(t,r){i(t,r),n(t)}function n(t){t.M&&!t.M.emitClose||t.U&&!t.U.emitClose||t.emit("close")}function i(t,n){t.emit("error",n)}return fr=1,ar={destroy:function(r,e){var s=this,o=this.U&&this.U.destroyed,u=this.M&&this.M.destroyed;return o||u?(e?e(r):r&&(this.M?this.M.errorEmitted||(this.M.errorEmitted=!0,hi.nextTick(i,this,r)):hi.nextTick(i,this,r)),this):(this.U&&(this.U.destroyed=!0),this.M&&(this.M.destroyed=!0),this.I(r||null,function(i){!e&&i?s.M?s.M.errorEmitted?hi.nextTick(n,s):(s.M.errorEmitted=!0,hi.nextTick(t,s,i)):hi.nextTick(t,s,i):e?(hi.nextTick(n,s),e(i)):hi.nextTick(n,s)}),this)},undestroy:function(){this.U&&(this.U.destroyed=!1,this.U.reading=!1,this.U.ended=!1,this.U.endEmitted=!1),this.M&&(this.M.destroyed=!1,this.M.ended=!1,this.M.ending=!1,this.M.finalCalled=!1,this.M.prefinished=!1,this.M.finished=!1,this.M.errorEmitted=!1)},errorOrDestroy:function(t,n){var i=t.U,r=t.M;i&&i.autoDestroy||r&&r.autoDestroy?t.destroy(n):t.emit("error",n)}}}var vr,wr,yr,pr,mr,br,gr,_r,Er={},kr={};function Sr(t,n,i){i||(i=Error);var r=function(t){var i,r;function e(i,r,e){return t.call(this,function(t,i,r){return"string"==typeof n?n:n(t,i,r)}(i,r,e))||this}return r=t,(i=e).prototype=Object.create(r.prototype),i.prototype.constructor=i,i.__proto__=r,e}(i);r.prototype.name=i.name,r.prototype.code=t,kr[t]=r}function Or(t,n){if(Array.isArray(t)){var i=t.length;return t=t.map(function(t){return String(t)}),i>2?"one of ".concat(n," ").concat(t.slice(0,i-1).join(", "),", or ")+t[i-1]:2===i?"one of ".concat(n," ").concat(t[0]," or ").concat(t[1]):"of ".concat(n," ").concat(t[0])}return"of ".concat(n," ").concat(String(t))}function Ar(){if(wr)return vr;wr=1;var t=Er.codes.ERR_INVALID_OPT_VALUE;return vr={getHighWaterMark:function(n,i,r,e){var s=function(t,n,i){return null!=t.highWaterMark?t.highWaterMark:n?t[i]:null}(i,e,r);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new t(e?r:"highWaterMark",s);return Math.floor(s)}return n.objectMode?16:16384}}}function xr(){if(pr)return yr;function t(t){try{if(!u.localStorage)return!1}catch(i){return!1}var n=u.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}return pr=1,yr=function(n,i){if(t("noDeprecation"))return n;var r=!1;return function(){if(!r){if(t("throwDeprecation"))throw new Error(i);t("traceDeprecation"),r=!0}return n.apply(this,arguments)}},yr}function Tr(){if(br)return mr;function t(t){var n=this;this.next=null,this.entry=null,this.finish=function(){!function(t,n){var i=t.entry;for(t.entry=null;i;){var r=i.callback;n.pendingcb--,r(undefined),i=i.next}n.corkedRequestsFree.next=t}(n,t)}}var n;br=1,mr=E,E.WritableState=_;var i,r={deprecate:xr()},e=Ei(),s=Wn.Buffer,o=(void 0!==u?u:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},a=dr(),f=Ar().getHighWaterMark,c=Er.codes,h=c.ERR_INVALID_ARG_TYPE,l=c.ERR_METHOD_NOT_IMPLEMENTED,d=c.ERR_MULTIPLE_CALLBACK,v=c.ERR_STREAM_CANNOT_PIPE,w=c.ERR_STREAM_DESTROYED,y=c.ERR_STREAM_NULL_VALUES,p=c.ERR_STREAM_WRITE_AFTER_END,m=c.ERR_UNKNOWN_ENCODING,b=a.errorOrDestroy;function g(){}function _(i,r,e){n=n||jr(),i=i||{},"boolean"!=typeof e&&(e=r instanceof n),this.objectMode=!!i.objectMode,e&&(this.objectMode=this.objectMode||!!i.writableObjectMode),this.highWaterMark=f(this,i,"writableHighWaterMark",e),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===i.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=i.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,n){var i=t.M,r=i.sync,e=i.writecb;if("function"!=typeof e)throw new d;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(i),n)!function(t,n,i,r,e){--n.pendingcb,i?(hi.nextTick(e,r),hi.nextTick(T,t,n),t.M.errorEmitted=!0,b(t,r)):(e(r),t.M.errorEmitted=!0,b(t,r),T(t,n))}(t,i,r,n,e);else{var s=A(i)||t.destroyed;s||i.corked||i.bufferProcessing||!i.bufferedRequest||O(t,i),r?hi.nextTick(S,t,i,s,e):S(t,i,s,e)}}(r,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==i.emitClose,this.autoDestroy=!!i.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}function E(t){var r=this instanceof(n=n||jr());if(!r&&!i.call(E,this))return new E(t);this.M=new _(t,this,r),this.writable=!0,t&&("function"==typeof t.write&&(this.N=t.write),"function"==typeof t.writev&&(this.F=t.writev),"function"==typeof t.destroy&&(this.I=t.destroy),"function"==typeof t.final&&(this.W=t.final)),e.call(this)}function k(t,n,i,r,e,s,o){n.writelen=r,n.writecb=o,n.writing=!0,n.sync=!0,n.destroyed?n.onwrite(new w("write")):i?t.F(e,n.onwrite):t.N(e,s,n.onwrite),n.sync=!1}function S(t,n,i,r){i||function(t,n){0===n.length&&n.needDrain&&(n.needDrain=!1,t.emit("drain"))}(t,n),n.pendingcb--,r(),T(t,n)}function O(n,i){i.bufferProcessing=!0;var r=i.bufferedRequest;if(n.F&&r&&r.next){var e=i.bufferedRequestCount,s=new Array(e),o=i.corkedRequestsFree;o.entry=r;for(var u=0,a=!0;r;)s[u]=r,r.isBuf||(a=!1),r=r.next,u+=1;s.allBuffers=a,k(n,i,!0,i.length,s,"",o.finish),i.pendingcb++,i.lastBufferedRequest=null,o.next?(i.corkedRequestsFree=o.next,o.next=null):i.corkedRequestsFree=new t(i),i.bufferedRequestCount=0}else{for(;r;){var f=r.chunk,c=r.encoding,h=r.callback;if(k(n,i,!1,i.objectMode?1:f.length,f,c,h),r=r.next,i.bufferedRequestCount--,i.writing)break}null===r&&(i.lastBufferedRequest=null)}i.bufferedRequest=r,i.bufferProcessing=!1}function A(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function x(t,n){t.W(function(i){n.pendingcb--,i&&b(t,i),n.prefinished=!0,t.emit("prefinish"),T(t,n)})}function T(t,n){var i=A(n);if(i&&(function(t,n){n.prefinished||n.finalCalled||("function"!=typeof t.W||n.destroyed?(n.prefinished=!0,t.emit("prefinish")):(n.pendingcb++,n.finalCalled=!0,hi.nextTick(x,t,n)))}(t,n),0===n.pendingcb&&(n.finished=!0,t.emit("finish"),n.autoDestroy))){var r=t.U;(!r||r.autoDestroy&&r.endEmitted)&&t.destroy()}return i}return Ut(E,e),_.prototype.getBuffer=function(){for(var t=this.bufferedRequest,n=[];t;)n.push(t),t=t.next;return n},function(){try{Object.defineProperty(_.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(i=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(t){return!!i.call(this,t)||this===E&&t&&t.M instanceof _}})):i=function(t){return t instanceof this},E.prototype.pipe=function(){b(this,new v)},E.prototype.write=function(t,n,i){var r,e=this.M,u=!1,a=!e.objectMode&&(r=t,s.isBuffer(r)||r instanceof o);return a&&!s.isBuffer(t)&&(t=function(t){return s.from(t)}(t)),"function"==typeof n&&(i=n,n=null),a?n="buffer":n||(n=e.defaultEncoding),"function"!=typeof i&&(i=g),e.ending?function(t,n){var i=new p;b(t,i),hi.nextTick(n,i)}(this,i):(a||function(t,n,i,r){var e;return null===i?e=new y:"string"==typeof i||n.objectMode||(e=new h("chunk",["string","Buffer"],i)),!e||(b(t,e),hi.nextTick(r,e),!1)}(this,e,t,i))&&(e.pendingcb++,u=function(t,n,i,r,e,o){if(!i){var u=function(t,n,i){return t.objectMode||!1===t.decodeStrings||"string"!=typeof n||(n=s.from(n,i)),n}(n,r,e);r!==u&&(i=!0,e="buffer",r=u)}var a=n.objectMode?1:r.length;n.length+=a;var f=n.length<n.highWaterMark;if(f||(n.needDrain=!0),n.writing||n.corked){var c=n.lastBufferedRequest;n.lastBufferedRequest={chunk:r,encoding:e,isBuf:i,callback:o,next:null},c?c.next=n.lastBufferedRequest:n.bufferedRequest=n.lastBufferedRequest,n.bufferedRequestCount+=1}else k(t,n,!1,a,r,e,o);return f}(this,e,a,t,n,i)),u},E.prototype.cork=function(){this.M.corked++},E.prototype.uncork=function(){var t=this.M;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||O(this,t))},E.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new m(t);return this.M.defaultEncoding=t,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this.M&&this.M.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this.M.highWaterMark}}),E.prototype.N=function(t,n,i){i(new l("_write()"))},E.prototype.F=null,E.prototype.end=function(t,n,i){var r=this.M;return"function"==typeof t?(i=t,t=null,n=null):"function"==typeof n&&(i=n,n=null),null!=t&&this.write(t,n),r.corked&&(r.corked=1,this.uncork()),r.ending||function(t,n,i){n.ending=!0,T(t,n),i&&(n.finished?hi.nextTick(i):t.once("finish",i)),n.ended=!0,t.writable=!1}(this,r,i),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this.M.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this.M&&this.M.destroyed},set:function(t){this.M&&(this.M.destroyed=t)}}),E.prototype.destroy=a.destroy,E.prototype.B=a.undestroy,E.prototype.I=function(t,n){n(t)},mr}function jr(){if(_r)return gr;_r=1;var t=Object.keys||function(t){var n=[];for(var i in t)n.push(i);return n};gr=o;var n=qr(),i=Tr();Ut(o,n);for(var r=t(i.prototype),e=0;e<r.length;e++){var s=r[e];o.prototype[s]||(o.prototype[s]=i.prototype[s])}function o(t){if(!(this instanceof o))return new o(t);n.call(this,t),i.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this.M.ended||hi.nextTick(a,this)}function a(t){t.end()}return Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this.M.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this.M&&this.M.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this.M.length}}),Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this.U&&void 0!==this.M&&this.U.destroyed&&this.M.destroyed},set:function(t){void 0!==this.U&&void 0!==this.M&&(this.U.destroyed=t,this.M.destroyed=t)}}),gr}Sr("ERR_INVALID_OPT_VALUE",function(t,n){return'The value "'+n+'" is invalid for option "'+t+'"'},TypeError),Sr("ERR_INVALID_ARG_TYPE",function(t,n,i){var r,e,s,o,u;if("string"==typeof n&&(e="not ",n.substr(0,4)===e)?(r="must not be",n=n.replace(/^not /,"")):r="must be",function(t,n,i){return(void 0===i||i>t.length)&&(i=t.length),t.substring(i-9,i)===n}(t," argument"))s="The ".concat(t," ").concat(r," ").concat(Or(n,"type"));else{var a=("number"!=typeof u&&(u=0),u+1>(o=t).length||-1===o.indexOf(".",u)?"argument":"property");s='The "'.concat(t,'" ').concat(a," ").concat(r," ").concat(Or(n,"type"))}return s+". Received type ".concat(typeof i)},TypeError),Sr("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),Sr("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"}),Sr("ERR_STREAM_PREMATURE_CLOSE","Premature close"),Sr("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"}),Sr("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),Sr("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),Sr("ERR_STREAM_WRITE_AFTER_END","write after end"),Sr("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),Sr("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError),Sr("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Er.codes=kr;var Rr=Zt.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Pr(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),function(t){if(t&&!Rr(t))throw new Error("Unknown encoding: "+t)}(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=zr;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=Ur;break;default:return void(this.write=Mr)}this.charBuffer=new Zt(6),this.charReceived=0,this.charLength=0}function Mr(t){return t.toString(this.encoding)}function zr(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function Ur(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}Pr.prototype.write=function(t){for(var n="";this.charLength;){var i=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,i),this.charReceived+=i,this.charReceived<this.charLength)return"";if(t=t.slice(i,t.length),!((r=(n=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(n.length-1))>=55296&&r<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return n;break}this.charLength+=this.surrogateSize,n=""}this.detectIncompleteChar(t);var r,e=t.length;if(this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,e),e-=this.charReceived),e=(n+=t.toString(this.encoding,0,e)).length-1,(r=n.charCodeAt(e))>=55296&&r<=56319){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),t.copy(this.charBuffer,0,0,s),n.substring(0,e)}return n},Pr.prototype.detectIncompleteChar=function(t){for(var n=t.length>=3?3:t.length;n>0;n--){var i=t[t.length-n];if(1==n&&i>>5==6){this.charLength=2;break}if(n<=2&&i>>4==14){this.charLength=3;break}if(n<=3&&i>>3==30){this.charLength=4;break}}this.charReceived=n},Pr.prototype.end=function(t){var n="";if(t&&t.length&&(n=this.write(t)),this.charReceived){var i=this.charReceived,r=this.charBuffer,e=this.encoding;n+=r.slice(0,i).toString(e)}return n};var Ir=a(Object.freeze({__proto__:null,StringDecoder:Pr})),Nr=Er.codes.ERR_STREAM_PREMATURE_CLOSE;function Fr(){}var Wr,Br,Cr,Dr,Lr,Kr,Hr=function t(n,i,r){if("function"==typeof i)return t(n,null,i);i||(i={}),r=function(t){var n=!1;return function(){if(!n){n=!0;for(var i=arguments.length,r=new Array(i),e=0;e<i;e++)r[e]=arguments[e];t.apply(this,r)}}}(r||Fr);var e=i.readable||!1!==i.readable&&n.readable,s=i.writable||!1!==i.writable&&n.writable,o=function(){n.writable||a()},u=n.M&&n.M.finished,a=function(){s=!1,u=!0,e||r.call(n)},f=n.U&&n.U.endEmitted,c=function(){e=!1,f=!0,s||r.call(n)},h=function(t){r.call(n,t)},l=function(){var t;return e&&!f?(n.U&&n.U.ended||(t=new Nr),r.call(n,t)):s&&!u?(n.M&&n.M.ended||(t=new Nr),r.call(n,t)):void 0},d=function(){n.req.on("finish",a)};return function(t){return t.setHeader&&"function"==typeof t.abort}(n)?(n.on("complete",a),n.on("abort",l),n.req?d():n.on("request",d)):s&&!n.M&&(n.on("end",o),n.on("close",o)),n.on("end",c),n.on("finish",a),!1!==i.error&&n.on("error",h),n.on("close",l),function(){n.removeListener("complete",a),n.removeListener("abort",l),n.removeListener("request",d),n.req&&n.req.removeListener("finish",a),n.removeListener("end",o),n.removeListener("close",o),n.removeListener("finish",a),n.removeListener("end",c),n.removeListener("error",h),n.removeListener("close",l)}};function Xr(){if(Br)return Wr;var t;function n(t,n,i){return(n=function(t){var n=function(t,n){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,n);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==typeof n?n:String(n)}(n))in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}Br=1;var i=Hr,r=Symbol("lastResolve"),e=Symbol("lastReject"),s=Symbol("error"),o=Symbol("ended"),u=Symbol("lastPromise"),a=Symbol("handlePromise"),f=Symbol("stream");function c(t,n){return{value:t,done:n}}function h(t){var n=t[r];if(null!==n){var i=t[f].read();null!==i&&(t[u]=null,t[r]=null,t[e]=null,n(c(i,!1)))}}function l(t){hi.nextTick(h,t)}var d=Object.getPrototypeOf(function(){}),v=Object.setPrototypeOf((n(t={get stream(){return this[f]},next:function(){var t=this,n=this[s];if(null!==n)return Promise.reject(n);if(this[o])return Promise.resolve(c(void 0,!0));if(this[f].destroyed)return new Promise(function(n,i){hi.nextTick(function(){t[s]?i(t[s]):n(c(void 0,!0))})});var i,r=this[u];if(r)i=new Promise(function(t,n){return function(i,r){t.then(function(){n[o]?i(c(void 0,!0)):n[a](i,r)},r)}}(r,this));else{var e=this[f].read();if(null!==e)return Promise.resolve(c(e,!1));i=new Promise(this[a])}return this[u]=i,i}},Symbol.asyncIterator,function(){return this}),n(t,"return",function(){var t=this;return new Promise(function(n,i){t[f].destroy(null,function(t){t?i(t):n(c(void 0,!0))})})}),t),d);return Wr=function(t){var h,d=Object.create(v,(n(h={},f,{value:t,writable:!0}),n(h,r,{value:null,writable:!0}),n(h,e,{value:null,writable:!0}),n(h,s,{value:null,writable:!0}),n(h,o,{value:t.U.endEmitted,writable:!0}),n(h,a,{value:function(t,n){var i=d[f].read();i?(d[u]=null,d[r]=null,d[e]=null,t(c(i,!1))):(d[r]=t,d[e]=n)},writable:!0}),h));return d[u]=null,i(t,function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var n=d[e];return null!==n&&(d[u]=null,d[r]=null,d[e]=null,n(t)),void(d[s]=t)}var i=d[r];null!==i&&(d[u]=null,d[r]=null,d[e]=null,i(c(void 0,!0))),d[o]=!0}),t.on("readable",l.bind(null,d)),d}}function qr(){if(Kr)return Lr;var t;Kr=1,Lr=E,E.ReadableState=_,_i.EventEmitter;var n,i=function(t,n){return t.listeners(n).length},r=Ei(),e=Wn.Buffer,s=(void 0!==u?u:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},o=hr;n=o&&o.debuglog?o.debuglog("stream"):function(){};var a,f,c,h=lr(),l=dr(),d=Ar().getHighWaterMark,v=Er.codes,w=v.ERR_INVALID_ARG_TYPE,y=v.ERR_STREAM_PUSH_AFTER_EOF,p=v.ERR_METHOD_NOT_IMPLEMENTED,m=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;Ut(E,r);var b=l.errorOrDestroy,g=["error","close","destroy","pause","resume"];function _(n,i,r){t=t||jr(),n=n||{},"boolean"!=typeof r&&(r=i instanceof t),this.objectMode=!!n.objectMode,r&&(this.objectMode=this.objectMode||!!n.readableObjectMode),this.highWaterMark=d(this,n,"readableHighWaterMark",r),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==n.emitClose,this.autoDestroy=!!n.autoDestroy,this.destroyed=!1,this.defaultEncoding=n.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,n.encoding&&(a||(a=Ir.StringDecoder),this.decoder=new a(n.encoding),this.encoding=n.encoding)}function E(n){if(t=t||jr(),!(this instanceof E))return new E(n);var i=this instanceof t;this.U=new _(n,this,i),this.readable=!0,n&&("function"==typeof n.read&&(this.C=n.read),"function"==typeof n.destroy&&(this.I=n.destroy)),r.call(this)}function k(t,i,r,o,u){n("readableAddChunk",i);var a,f=t.U;if(null===i)f.reading=!1,function(t,i){if(n("onEofChunk"),!i.ended){if(i.decoder){var r=i.decoder.end();r&&r.length&&(i.buffer.push(r),i.length+=i.objectMode?1:r.length)}i.ended=!0,i.sync?x(t):(i.needReadable=!1,i.emittedReadable||(i.emittedReadable=!0,T(t)))}}(t,f);else if(u||(a=function(t,n){var i,r;return r=n,e.isBuffer(r)||r instanceof s||"string"==typeof n||void 0===n||t.objectMode||(i=new w("chunk",["string","Buffer","Uint8Array"],n)),i}(f,i)),a)b(t,a);else if(f.objectMode||i&&i.length>0)if("string"==typeof i||f.objectMode||Object.getPrototypeOf(i)===e.prototype||(i=function(t){return e.from(t)}(i)),o)f.endEmitted?b(t,new m):S(t,f,i,!0);else if(f.ended)b(t,new y);else{if(f.destroyed)return!1;f.reading=!1,f.decoder&&!r?(i=f.decoder.write(i),f.objectMode||0!==i.length?S(t,f,i,!1):j(t,f)):S(t,f,i,!1)}else o||(f.reading=!1,j(t,f));return!f.ended&&(f.length<f.highWaterMark||0===f.length)}function S(t,n,i,r){n.flowing&&0===n.length&&!n.sync?(n.awaitDrain=0,t.emit("data",i)):(n.length+=n.objectMode?1:i.length,r?n.buffer.unshift(i):n.buffer.push(i),n.needReadable&&x(t)),j(t,n)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this.U&&this.U.destroyed},set:function(t){this.U&&(this.U.destroyed=t)}}),E.prototype.destroy=l.destroy,E.prototype.B=l.undestroy,E.prototype.I=function(t,n){n(t)},E.prototype.push=function(t,n){var i,r=this.U;return r.objectMode?i=!0:"string"==typeof t&&((n=n||r.defaultEncoding)!==r.encoding&&(t=e.from(t,n),n=""),i=!0),k(this,t,n,!1,i)},E.prototype.unshift=function(t){return k(this,t,null,!0,!1)},E.prototype.isPaused=function(){return!1===this.U.flowing},E.prototype.setEncoding=function(t){a||(a=Ir.StringDecoder);var n=new a(t);this.U.decoder=n,this.U.encoding=this.U.decoder.encoding;for(var i=this.U.buffer.head,r="";null!==i;)r+=n.write(i.data),i=i.next;return this.U.buffer.clear(),""!==r&&this.U.buffer.push(r),this.U.length=r.length,this};var O=1073741824;function A(t,n){return t<=0||0===n.length&&n.ended?0:n.objectMode?1:t!=t?n.flowing&&n.length?n.buffer.head.data.length:n.length:(t>n.highWaterMark&&(n.highWaterMark=function(t){return t>=O?t=O:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=n.length?t:n.ended?n.length:(n.needReadable=!0,0))}function x(t){var i=t.U;n("emitReadable",i.needReadable,i.emittedReadable),i.needReadable=!1,i.emittedReadable||(n("emitReadable",i.flowing),i.emittedReadable=!0,hi.nextTick(T,t))}function T(t){var i=t.U;n("emitReadable_",i.destroyed,i.length,i.ended),i.destroyed||!i.length&&!i.ended||(t.emit("readable"),i.emittedReadable=!1),i.needReadable=!i.flowing&&!i.ended&&i.length<=i.highWaterMark,U(t)}function j(t,n){n.readingMore||(n.readingMore=!0,hi.nextTick(R,t,n))}function R(t,i){for(;!i.reading&&!i.ended&&(i.length<i.highWaterMark||i.flowing&&0===i.length);){var r=i.length;if(n("maybeReadMore read 0"),t.read(0),r===i.length)break}i.readingMore=!1}function P(t){var n=t.U;n.readableListening=t.listenerCount("readable")>0,n.resumeScheduled&&!n.paused?n.flowing=!0:t.listenerCount("data")>0&&t.resume()}function M(t){n("readable nexttick read 0"),t.read(0)}function z(t,i){n("resume",i.reading),i.reading||t.read(0),i.resumeScheduled=!1,t.emit("resume"),U(t),i.flowing&&!i.reading&&t.read(0)}function U(t){var i=t.U;for(n("flow",i.flowing);i.flowing&&null!==t.read(););}function I(t,n){return 0===n.length?null:(n.objectMode?i=n.buffer.shift():!t||t>=n.length?(i=n.decoder?n.buffer.join(""):1===n.buffer.length?n.buffer.first():n.buffer.concat(n.length),n.buffer.clear()):i=n.buffer.consume(t,n.decoder),i);var i}function N(t){var i=t.U;n("endReadable",i.endEmitted),i.endEmitted||(i.ended=!0,hi.nextTick(F,i,t))}function F(t,i){if(n("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,i.readable=!1,i.emit("end"),t.autoDestroy)){var r=i.M;(!r||r.autoDestroy&&r.finished)&&i.destroy()}}function W(t,n){for(var i=0,r=t.length;i<r;i++)if(t[i]===n)return i;return-1}return E.prototype.read=function(t){n("read",t),t=parseInt(t,10);var i=this.U,r=t;if(0!==t&&(i.emittedReadable=!1),0===t&&i.needReadable&&((0!==i.highWaterMark?i.length>=i.highWaterMark:i.length>0)||i.ended))return n("read: emitReadable",i.length,i.ended),0===i.length&&i.ended?N(this):x(this),null;if(0===(t=A(t,i))&&i.ended)return 0===i.length&&N(this),null;var e,s=i.needReadable;return n("need readable",s),(0===i.length||i.length-t<i.highWaterMark)&&n("length less than watermark",s=!0),i.ended||i.reading?n("reading or ended",s=!1):s&&(n("do read"),i.reading=!0,i.sync=!0,0===i.length&&(i.needReadable=!0),this.C(i.highWaterMark),i.sync=!1,i.reading||(t=A(r,i))),null===(e=t>0?I(t,i):null)?(i.needReadable=i.length<=i.highWaterMark,t=0):(i.length-=t,i.awaitDrain=0),0===i.length&&(i.ended||(i.needReadable=!0),r!==t&&i.ended&&N(this)),null!==e&&this.emit("data",e),e},E.prototype.C=function(t){b(this,new p("_read()"))},E.prototype.pipe=function(t,r){var e=this,s=this.U;switch(s.pipesCount){case 0:s.pipes=t;break;case 1:s.pipes=[s.pipes,t];break;default:s.pipes.push(t)}s.pipesCount+=1,n("pipe count=%d opts=%j",s.pipesCount,r);var o=r&&!1===r.end||t===hi.stdout||t===hi.stderr?v:u;function u(){n("onend"),t.end()}s.endEmitted?hi.nextTick(o):e.once("end",o),t.on("unpipe",function i(r,o){n("onunpipe"),r===e&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,n("cleanup"),t.removeListener("close",l),t.removeListener("finish",d),t.removeListener("drain",a),t.removeListener("error",h),t.removeListener("unpipe",i),e.removeListener("end",u),e.removeListener("end",v),e.removeListener("data",c),f=!0,!s.awaitDrain||t.M&&!t.M.needDrain||a())});var a=function(t){return function(){var r=t.U;n("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,0===r.awaitDrain&&i(t,"data")&&(r.flowing=!0,U(t))}}(e);t.on("drain",a);var f=!1;function c(i){n("ondata");var r=t.write(i);n("dest.write",r),!1===r&&((1===s.pipesCount&&s.pipes===t||s.pipesCount>1&&-1!==W(s.pipes,t))&&!f&&(n("false write response, pause",s.awaitDrain),s.awaitDrain++),e.pause())}function h(r){n("onerror",r),v(),t.removeListener("error",h),0===i(t,"error")&&b(t,r)}function l(){t.removeListener("finish",d),v()}function d(){n("onfinish"),t.removeListener("close",l),v()}function v(){n("unpipe"),e.unpipe(t)}return e.on("data",c),function(t,n,i){if("function"==typeof t.prependListener)return t.prependListener(n,i);t.A&&t.A[n]?Array.isArray(t.A[n])?t.A[n].unshift(i):t.A[n]=[i,t.A[n]]:t.on(n,i)}(t,"error",h),t.once("close",l),t.once("finish",d),t.emit("pipe",e),s.flowing||(n("pipe resume"),e.resume()),t},E.prototype.unpipe=function(t){var n=this.U,i={hasUnpiped:!1};if(0===n.pipesCount)return this;if(1===n.pipesCount)return t&&t!==n.pipes||(t||(t=n.pipes),n.pipes=null,n.pipesCount=0,n.flowing=!1,t&&t.emit("unpipe",this,i)),this;if(!t){var r=n.pipes,e=n.pipesCount;n.pipes=null,n.pipesCount=0,n.flowing=!1;for(var s=0;s<e;s++)r[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=W(n.pipes,t);return-1===o||(n.pipes.splice(o,1),n.pipesCount-=1,1===n.pipesCount&&(n.pipes=n.pipes[0]),t.emit("unpipe",this,i)),this},E.prototype.on=function(t,i){var e=r.prototype.on.call(this,t,i),s=this.U;return"data"===t?(s.readableListening=this.listenerCount("readable")>0,!1!==s.flowing&&this.resume()):"readable"===t&&(s.endEmitted||s.readableListening||(s.readableListening=s.needReadable=!0,s.flowing=!1,s.emittedReadable=!1,n("on readable",s.length,s.reading),s.length?x(this):s.reading||hi.nextTick(M,this))),e},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(t,n){var i=r.prototype.removeListener.call(this,t,n);return"readable"===t&&hi.nextTick(P,this),i},E.prototype.removeAllListeners=function(t){var n=r.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||hi.nextTick(P,this),n},E.prototype.resume=function(){var t=this.U;return t.flowing||(n("resume"),t.flowing=!t.readableListening,function(t,n){n.resumeScheduled||(n.resumeScheduled=!0,hi.nextTick(z,t,n))}(this,t)),t.paused=!1,this},E.prototype.pause=function(){return n("call pause flowing=%j",this.U.flowing),!1!==this.U.flowing&&(n("pause"),this.U.flowing=!1,this.emit("pause")),this.U.paused=!0,this},E.prototype.wrap=function(t){var i=this,r=this.U,e=!1;for(var s in t.on("end",function(){if(n("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&i.push(t)}i.push(null)}),t.on("data",function(s){n("wrapped data"),r.decoder&&(s=r.decoder.write(s)),r.objectMode&&null==s||(r.objectMode||s&&s.length)&&(i.push(s)||(e=!0,t.pause()))}),t)void 0===this[s]&&"function"==typeof t[s]&&(this[s]=function(n){return function(){return t[n].apply(t,arguments)}}(s));for(var o=0;o<g.length;o++)t.on(g[o],this.emit.bind(this,g[o]));return this.C=function(i){n("wrapped _read",i),e&&(e=!1,t.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=Xr()),f(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this.U.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this.U&&this.U.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this.U.flowing},set:function(t){this.U&&(this.U.flowing=t)}}),E.D=I,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this.U.length}}),"function"==typeof Symbol&&(E.from=function(t,n){return void 0===c&&(c=Dr?Cr:(Dr=1,Cr=function(){throw new Error("Readable.from is not available in the browser")})),c(E,t,n)}),Lr}Hr.default;var $r=ne,Jr=Er.codes,Vr=Jr.ERR_METHOD_NOT_IMPLEMENTED,Gr=Jr.ERR_MULTIPLE_CALLBACK,Yr=Jr.ERR_TRANSFORM_ALREADY_TRANSFORMING,Zr=Jr.ERR_TRANSFORM_WITH_LENGTH_0,Qr=jr();function te(t,n){var i=this.L;i.transforming=!1;var r=i.writecb;if(null===r)return this.emit("error",new Gr);i.writechunk=null,i.writecb=null,null!=n&&this.push(n),r(t);var e=this.U;e.reading=!1,(e.needReadable||e.length<e.highWaterMark)&&this.C(e.highWaterMark)}function ne(t){if(!(this instanceof ne))return new ne(t);Qr.call(this,t),this.L={afterTransform:te.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this.U.needReadable=!0,this.U.sync=!1,t&&("function"==typeof t.transform&&(this.H=t.transform),"function"==typeof t.flush&&(this.X=t.flush)),this.on("prefinish",ie)}function ie(){var t=this;"function"!=typeof this.X||this.U.destroyed?re(this,null,null):this.X(function(n,i){re(t,n,i)})}function re(t,n,i){if(n)return t.emit("error",n);if(null!=i&&t.push(i),t.M.length)throw new Zr;if(t.L.transforming)throw new Yr;return t.push(null)}Ut(ne,Qr),ne.prototype.push=function(t,n){return this.L.needTransform=!1,Qr.prototype.push.call(this,t,n)},ne.prototype.H=function(t,n,i){i(new Vr("_transform()"))},ne.prototype.N=function(t,n,i){var r=this.L;if(r.writecb=i,r.writechunk=t,r.writeencoding=n,!r.transforming){var e=this.U;(r.needTransform||e.needReadable||e.length<e.highWaterMark)&&this.C(e.highWaterMark)}},ne.prototype.C=function(t){var n=this.L;null===n.writechunk||n.transforming?n.needTransform=!0:(n.transforming=!0,this.H(n.writechunk,n.writeencoding,n.afterTransform))},ne.prototype.I=function(t,n){Qr.prototype.I.call(this,t,function(t){n(t)})},$r.default;var ee,se=ue,oe=$r;function ue(t){if(!(this instanceof ue))return new ue(t);oe.call(this,t)}Ut(ue,oe),ue.prototype.H=function(t,n,i){i(null,t)},se.default;var ae=Er.codes,fe=ae.ERR_MISSING_ARGS,ce=ae.ERR_STREAM_DESTROYED;function he(t){if(t)throw t}function le(t){t()}function de(t,n){return t.pipe(n)}var ve;ve=Cn.exports,(ve=Cn.exports=qr()).Stream=ve,ve.Readable=ve,ve.Writable=Tr(),ve.Duplex=jr(),ve.Transform=$r,ve.PassThrough=se,ve.finished=Hr,ve.pipeline=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r,e=function(t){return t.length?"function"!=typeof t[t.length-1]?he:t.pop():he}(n);if(Array.isArray(n[0])&&(n=n[0]),n.length<2)throw new fe("streams");var s=n.map(function(t,i){var o=i<n.length-1;return function(t,n,i,r){r=function(t){var n=!1;return function(){n||(n=!0,t.apply(void 0,arguments))}}(r);var e=!1;t.on("close",function(){e=!0}),void 0===ee&&(ee=Hr),ee(t,{readable:n,writable:i},function(t){if(t)return r(t);e=!0,r()});var s=!1;return function(n){if(!e&&!s)return s=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void r(n||new ce("pipe"))}}(t,o,i>0,function(t){r||(r=t),t&&s.forEach(le),o||(s.forEach(le),e(r))})});return n.reduce(de)};var we=Cn.exports;we.default;var ye=Bn.Buffer,pe=we.Transform;function me(t){pe.call(this),this.q=ye.allocUnsafe(t),this.$=t,this.J=0,this.V=[0,0,0,0],this.G=!1}Ut(me,pe),me.prototype.H=function(t,n,i){var r=null;try{this.update(t,n)}catch(e){r=e}i(r)},me.prototype.X=function(t){var n=null;try{this.push(this.digest())}catch(i){n=i}t(n)},me.prototype.update=function(t,n){if(function(t){if(!ye.isBuffer(t)&&"string"!=typeof t)throw new TypeError("Data must be a string or a buffer")}(t),this.G)throw new Error("Digest already called");ye.isBuffer(t)||(t=ye.from(t,n));for(var i=this.q,r=0;this.J+t.length-r>=this.$;){for(var e=this.J;e<this.$;)i[e++]=t[r++];this.Y(),this.J=0}for(;r<t.length;)i[this.J++]=t[r++];for(var s=0,o=8*t.length;o>0;++s)this.V[s]+=o,(o=this.V[s]/4294967296|0)>0&&(this.V[s]-=4294967296*o);return this},me.prototype.Y=function(){throw new Error("_update is not implemented")},me.prototype.digest=function(t){if(this.G)throw new Error("Digest already called");this.G=!0;var n=this.Z();void 0!==t&&(n=n.toString(t)),this.q.fill(0),this.J=0;for(var i=0;i<4;++i)this.V[i]=0;return n},me.prototype.Z=function(){throw new Error("_digest is not implemented")};var be=me;be.default;var ge=Ut,_e=be,Ee=Bn.Buffer,ke=new Array(16);function Se(){_e.call(this,64),this.tt=1732584193,this.nt=4023233417,this.it=2562383102,this.rt=271733878}function Oe(t,n){return t<<n|t>>>32-n}function Ae(t,n,i,r,e,s,o){return Oe(t+(n&i|~n&r)+e+s|0,o)+n|0}function xe(t,n,i,r,e,s,o){return Oe(t+(n&r|i&~r)+e+s|0,o)+n|0}function Te(t,n,i,r,e,s,o){return Oe(t+(n^i^r)+e+s|0,o)+n|0}function je(t,n,i,r,e,s,o){return Oe(t+(i^(n|~r))+e+s|0,o)+n|0}ge(Se,_e),Se.prototype.Y=function(){for(var t=ke,n=0;n<16;++n)t[n]=this.q.readInt32LE(4*n);var i=this.tt,r=this.nt,e=this.it,s=this.rt;i=Ae(i,r,e,s,t[0],3614090360,7),s=Ae(s,i,r,e,t[1],3905402710,12),e=Ae(e,s,i,r,t[2],606105819,17),r=Ae(r,e,s,i,t[3],3250441966,22),i=Ae(i,r,e,s,t[4],4118548399,7),s=Ae(s,i,r,e,t[5],1200080426,12),e=Ae(e,s,i,r,t[6],2821735955,17),r=Ae(r,e,s,i,t[7],4249261313,22),i=Ae(i,r,e,s,t[8],1770035416,7),s=Ae(s,i,r,e,t[9],2336552879,12),e=Ae(e,s,i,r,t[10],4294925233,17),r=Ae(r,e,s,i,t[11],2304563134,22),i=Ae(i,r,e,s,t[12],1804603682,7),s=Ae(s,i,r,e,t[13],4254626195,12),e=Ae(e,s,i,r,t[14],2792965006,17),i=xe(i,r=Ae(r,e,s,i,t[15],1236535329,22),e,s,t[1],4129170786,5),s=xe(s,i,r,e,t[6],3225465664,9),e=xe(e,s,i,r,t[11],643717713,14),r=xe(r,e,s,i,t[0],3921069994,20),i=xe(i,r,e,s,t[5],3593408605,5),s=xe(s,i,r,e,t[10],38016083,9),e=xe(e,s,i,r,t[15],3634488961,14),r=xe(r,e,s,i,t[4],3889429448,20),i=xe(i,r,e,s,t[9],568446438,5),s=xe(s,i,r,e,t[14],3275163606,9),e=xe(e,s,i,r,t[3],4107603335,14),r=xe(r,e,s,i,t[8],1163531501,20),i=xe(i,r,e,s,t[13],2850285829,5),s=xe(s,i,r,e,t[2],4243563512,9),e=xe(e,s,i,r,t[7],1735328473,14),i=Te(i,r=xe(r,e,s,i,t[12],2368359562,20),e,s,t[5],4294588738,4),s=Te(s,i,r,e,t[8],2272392833,11),e=Te(e,s,i,r,t[11],1839030562,16),r=Te(r,e,s,i,t[14],4259657740,23),i=Te(i,r,e,s,t[1],2763975236,4),s=Te(s,i,r,e,t[4],1272893353,11),e=Te(e,s,i,r,t[7],4139469664,16),r=Te(r,e,s,i,t[10],3200236656,23),i=Te(i,r,e,s,t[13],681279174,4),s=Te(s,i,r,e,t[0],3936430074,11),e=Te(e,s,i,r,t[3],3572445317,16),r=Te(r,e,s,i,t[6],76029189,23),i=Te(i,r,e,s,t[9],3654602809,4),s=Te(s,i,r,e,t[12],3873151461,11),e=Te(e,s,i,r,t[15],530742520,16),i=je(i,r=Te(r,e,s,i,t[2],3299628645,23),e,s,t[0],4096336452,6),s=je(s,i,r,e,t[7],1126891415,10),e=je(e,s,i,r,t[14],2878612391,15),r=je(r,e,s,i,t[5],4237533241,21),i=je(i,r,e,s,t[12],1700485571,6),s=je(s,i,r,e,t[3],2399980690,10),e=je(e,s,i,r,t[10],4293915773,15),r=je(r,e,s,i,t[1],2240044497,21),i=je(i,r,e,s,t[8],1873313359,6),s=je(s,i,r,e,t[15],4264355552,10),e=je(e,s,i,r,t[6],2734768916,15),r=je(r,e,s,i,t[13],1309151649,21),i=je(i,r,e,s,t[4],4149444226,6),s=je(s,i,r,e,t[11],3174756917,10),e=je(e,s,i,r,t[2],718787259,15),r=je(r,e,s,i,t[9],3951481745,21),this.tt=this.tt+i|0,this.nt=this.nt+r|0,this.it=this.it+e|0,this.rt=this.rt+s|0},Se.prototype.Z=function(){this.q[this.J++]=128,this.J>56&&(this.q.fill(0,this.J,64),this.Y(),this.J=0),this.q.fill(0,this.J,56),this.q.writeUInt32LE(this.V[0],56),this.q.writeUInt32LE(this.V[1],60),this.Y();var t=Ee.allocUnsafe(16);return t.writeInt32LE(this.tt,0),t.writeInt32LE(this.nt,4),t.writeInt32LE(this.it,8),t.writeInt32LE(this.rt,12),t};var Re=Se;Re.default;var Pe=Wn.Buffer,Me=Ut,ze=be,Ue=new Array(16),Ie=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Ne=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Fe=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],We=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Be=[0,1518500249,1859775393,2400959708,2840853838],Ce=[1352829926,1548603684,1836072691,2053994217,0];function De(){ze.call(this,64),this.tt=1732584193,this.nt=4023233417,this.it=2562383102,this.rt=271733878,this.et=3285377520}function Le(t,n){return t<<n|t>>>32-n}function Ke(t,n,i,r,e,s,o,u){return Le(t+(n^i^r)+s+o|0,u)+e|0}function He(t,n,i,r,e,s,o,u){return Le(t+(n&i|~n&r)+s+o|0,u)+e|0}function Xe(t,n,i,r,e,s,o,u){return Le(t+((n|~i)^r)+s+o|0,u)+e|0}function qe(t,n,i,r,e,s,o,u){return Le(t+(n&r|i&~r)+s+o|0,u)+e|0}function $e(t,n,i,r,e,s,o,u){return Le(t+(n^(i|~r))+s+o|0,u)+e|0}Me(De,ze),De.prototype.Y=function(){for(var t=Ue,n=0;n<16;++n)t[n]=this.q.readInt32LE(4*n);for(var i=0|this.tt,r=0|this.nt,e=0|this.it,s=0|this.rt,o=0|this.et,u=0|this.tt,a=0|this.nt,f=0|this.it,c=0|this.rt,h=0|this.et,l=0;l<80;l+=1){var d,v;l<16?(d=Ke(i,r,e,s,o,t[Ie[l]],Be[0],Fe[l]),v=$e(u,a,f,c,h,t[Ne[l]],Ce[0],We[l])):l<32?(d=He(i,r,e,s,o,t[Ie[l]],Be[1],Fe[l]),v=qe(u,a,f,c,h,t[Ne[l]],Ce[1],We[l])):l<48?(d=Xe(i,r,e,s,o,t[Ie[l]],Be[2],Fe[l]),v=Xe(u,a,f,c,h,t[Ne[l]],Ce[2],We[l])):l<64?(d=qe(i,r,e,s,o,t[Ie[l]],Be[3],Fe[l]),v=He(u,a,f,c,h,t[Ne[l]],Ce[3],We[l])):(d=$e(i,r,e,s,o,t[Ie[l]],Be[4],Fe[l]),v=Ke(u,a,f,c,h,t[Ne[l]],Ce[4],We[l])),i=o,o=s,s=Le(e,10),e=r,r=d,u=h,h=c,c=Le(f,10),f=a,a=v}var w=this.nt+e+c|0;this.nt=this.it+s+h|0,this.it=this.rt+o+u|0,this.rt=this.et+i+a|0,this.et=this.tt+r+f|0,this.tt=w},De.prototype.Z=function(){this.q[this.J++]=128,this.J>56&&(this.q.fill(0,this.J,64),this.Y(),this.J=0),this.q.fill(0,this.J,56),this.q.writeUInt32LE(this.V[0],56),this.q.writeUInt32LE(this.V[1],60),this.Y();var t=Pe.alloc?Pe.alloc(20):new Pe(20);return t.writeInt32LE(this.tt,0),t.writeInt32LE(this.nt,4),t.writeInt32LE(this.it,8),t.writeInt32LE(this.rt,12),t.writeInt32LE(this.et,16),t};var Je=De;Je.default;var Ve={exports:{}},Ge=Bn.Buffer;function Ye(t,n){this.q=Ge.alloc(t),this.st=n,this.$=t,this.ot=0}Ye.prototype.update=function(t,n){"string"==typeof t&&(n=n||"utf8",t=Ge.from(t,n));for(var i=this.q,r=this.$,e=t.length,s=this.ot,o=0;o<e;){for(var u=s%r,a=Math.min(e-o,r-u),f=0;f<a;f++)i[u+f]=t[o+f];o+=a,(s+=a)%r===0&&this.Y(i)}return this.ot+=e,this},Ye.prototype.digest=function(t){var n=this.ot%this.$;this.q[n]=128,this.q.fill(0,n+1),n>=this.st&&(this.Y(this.q),this.q.fill(0));var i=8*this.ot;if(i<=4294967295)this.q.writeUInt32BE(i,this.$-4);else{var r=(4294967295&i)>>>0,e=(i-r)/4294967296;this.q.writeUInt32BE(e,this.$-8),this.q.writeUInt32BE(r,this.$-4)}this.Y(this.q);var s=this.ut();return t?s.toString(t):s},Ye.prototype.Y=function(){throw new Error("_update must be implemented by subclass")};var Ze=Ye;Ze.default;var Qe=Ut,ts=Ze,ns=Bn.Buffer,is=[1518500249,1859775393,-1894007588,-899497514],rs=new Array(80);function es(){this.init(),this.ft=rs,ts.call(this,64,56)}function ss(t){return t<<5|t>>>27}function os(t){return t<<30|t>>>2}function us(t,n,i,r){return 0===t?n&i|~n&r:2===t?n&i|n&r|i&r:n^i^r}Qe(es,ts),es.prototype.init=function(){return this.tt=1732584193,this.nt=4023233417,this.it=2562383102,this.rt=271733878,this.et=3285377520,this},es.prototype.Y=function(t){for(var n=this.ft,i=0|this.tt,r=0|this.nt,e=0|this.it,s=0|this.rt,o=0|this.et,u=0;u<16;++u)n[u]=t.readInt32BE(4*u);for(;u<80;++u)n[u]=n[u-3]^n[u-8]^n[u-14]^n[u-16];for(var a=0;a<80;++a){var f=~~(a/20),c=ss(i)+us(f,r,e,s)+o+n[a]+is[f]|0;o=s,s=e,e=os(r),r=i,i=c}this.tt=i+this.tt|0,this.nt=r+this.nt|0,this.it=e+this.it|0,this.rt=s+this.rt|0,this.et=o+this.et|0},es.prototype.ut=function(){var t=ns.allocUnsafe(20);return t.writeInt32BE(0|this.tt,0),t.writeInt32BE(0|this.nt,4),t.writeInt32BE(0|this.it,8),t.writeInt32BE(0|this.rt,12),t.writeInt32BE(0|this.et,16),t};var as=es;as.default;var fs=Ut,cs=Ze,hs=Bn.Buffer,ls=[1518500249,1859775393,-1894007588,-899497514],ds=new Array(80);function vs(){this.init(),this.ft=ds,cs.call(this,64,56)}function ws(t){return t<<1|t>>>31}function ys(t){return t<<5|t>>>27}function ps(t){return t<<30|t>>>2}function ms(t,n,i,r){return 0===t?n&i|~n&r:2===t?n&i|n&r|i&r:n^i^r}fs(vs,cs),vs.prototype.init=function(){return this.tt=1732584193,this.nt=4023233417,this.it=2562383102,this.rt=271733878,this.et=3285377520,this},vs.prototype.Y=function(t){for(var n=this.ft,i=0|this.tt,r=0|this.nt,e=0|this.it,s=0|this.rt,o=0|this.et,u=0;u<16;++u)n[u]=t.readInt32BE(4*u);for(;u<80;++u)n[u]=ws(n[u-3]^n[u-8]^n[u-14]^n[u-16]);for(var a=0;a<80;++a){var f=~~(a/20),c=ys(i)+ms(f,r,e,s)+o+n[a]+ls[f]|0;o=s,s=e,e=ps(r),r=i,i=c}this.tt=i+this.tt|0,this.nt=r+this.nt|0,this.it=e+this.it|0,this.rt=s+this.rt|0,this.et=o+this.et|0},vs.prototype.ut=function(){var t=hs.allocUnsafe(20);return t.writeInt32BE(0|this.tt,0),t.writeInt32BE(0|this.nt,4),t.writeInt32BE(0|this.it,8),t.writeInt32BE(0|this.rt,12),t.writeInt32BE(0|this.et,16),t};var bs=vs;bs.default;var gs=Ut,_s=Ze,Es=Bn.Buffer,ks=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Ss=new Array(64);function Os(){this.init(),this.ft=Ss,_s.call(this,64,56)}function As(t,n,i){return i^t&(n^i)}function xs(t,n,i){return t&n|i&(t|n)}function Ts(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function js(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function Rs(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function Ps(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}gs(Os,_s),Os.prototype.init=function(){return this.tt=1779033703,this.nt=3144134277,this.it=1013904242,this.rt=2773480762,this.et=1359893119,this.ct=2600822924,this.ht=528734635,this.lt=1541459225,this},Os.prototype.Y=function(t){for(var n=this.ft,i=0|this.tt,r=0|this.nt,e=0|this.it,s=0|this.rt,o=0|this.et,u=0|this.ct,a=0|this.ht,f=0|this.lt,c=0;c<16;++c)n[c]=t.readInt32BE(4*c);for(;c<64;++c)n[c]=Ps(n[c-2])+n[c-7]+Rs(n[c-15])+n[c-16]|0;for(var h=0;h<64;++h){var l=f+js(o)+As(o,u,a)+ks[h]+n[h]|0,d=Ts(i)+xs(i,r,e)|0;f=a,a=u,u=o,o=s+l|0,s=e,e=r,r=i,i=l+d|0}this.tt=i+this.tt|0,this.nt=r+this.nt|0,this.it=e+this.it|0,this.rt=s+this.rt|0,this.et=o+this.et|0,this.ct=u+this.ct|0,this.ht=a+this.ht|0,this.lt=f+this.lt|0},Os.prototype.ut=function(){var t=Es.allocUnsafe(32);return t.writeInt32BE(this.tt,0),t.writeInt32BE(this.nt,4),t.writeInt32BE(this.it,8),t.writeInt32BE(this.rt,12),t.writeInt32BE(this.et,16),t.writeInt32BE(this.ct,20),t.writeInt32BE(this.ht,24),t.writeInt32BE(this.lt,28),t};var Ms=Os;Ms.default;var zs=Ut,Us=Ms,Is=Ze,Ns=Bn.Buffer,Fs=new Array(64);function Ws(){this.init(),this.ft=Fs,Is.call(this,64,56)}zs(Ws,Us),Ws.prototype.init=function(){return this.tt=3238371032,this.nt=914150663,this.it=812702999,this.rt=4144912697,this.et=4290775857,this.ct=1750603025,this.ht=1694076839,this.lt=3204075428,this},Ws.prototype.ut=function(){var t=Ns.allocUnsafe(28);return t.writeInt32BE(this.tt,0),t.writeInt32BE(this.nt,4),t.writeInt32BE(this.it,8),t.writeInt32BE(this.rt,12),t.writeInt32BE(this.et,16),t.writeInt32BE(this.ct,20),t.writeInt32BE(this.ht,24),t};var Bs=Ws;Bs.default;var Cs=Ut,Ds=Ze,Ls=Bn.Buffer,Ks=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],Hs=new Array(160);function Xs(){this.init(),this.ft=Hs,Ds.call(this,128,112)}function qs(t,n,i){return i^t&(n^i)}function $s(t,n,i){return t&n|i&(t|n)}function Js(t,n){return(t>>>28|n<<4)^(n>>>2|t<<30)^(n>>>7|t<<25)}function Vs(t,n){return(t>>>14|n<<18)^(t>>>18|n<<14)^(n>>>9|t<<23)}function Gs(t,n){return(t>>>1|n<<31)^(t>>>8|n<<24)^t>>>7}function Ys(t,n){return(t>>>1|n<<31)^(t>>>8|n<<24)^(t>>>7|n<<25)}function Zs(t,n){return(t>>>19|n<<13)^(n>>>29|t<<3)^t>>>6}function Qs(t,n){return(t>>>19|n<<13)^(n>>>29|t<<3)^(t>>>6|n<<26)}function to(t,n){return t>>>0<n>>>0?1:0}Cs(Xs,Ds),Xs.prototype.init=function(){return this.dt=1779033703,this.vt=3144134277,this.wt=1013904242,this.yt=2773480762,this.bt=1359893119,this.gt=2600822924,this._t=528734635,this.Et=1541459225,this.kt=4089235720,this.St=2227873595,this.Ot=4271175723,this.At=1595750129,this.xt=2917565137,this.Tt=725511199,this.jt=4215389547,this.Rt=327033209,this},Xs.prototype.Y=function(t){for(var n=this.ft,i=0|this.dt,r=0|this.vt,e=0|this.wt,s=0|this.yt,o=0|this.bt,u=0|this.gt,a=0|this._t,f=0|this.Et,c=0|this.kt,h=0|this.St,l=0|this.Ot,d=0|this.At,v=0|this.xt,w=0|this.Tt,y=0|this.jt,p=0|this.Rt,m=0;m<32;m+=2)n[m]=t.readInt32BE(4*m),n[m+1]=t.readInt32BE(4*m+4);for(;m<160;m+=2){var b=n[m-30],g=n[m-30+1],_=Gs(b,g),E=Ys(g,b),k=Zs(b=n[m-4],g=n[m-4+1]),S=Qs(g,b),O=n[m-14],A=n[m-14+1],x=n[m-32],T=n[m-32+1],j=E+A|0,R=_+O+to(j,E)|0;R=(R=R+k+to(j=j+S|0,S)|0)+x+to(j=j+T|0,T)|0,n[m]=R,n[m+1]=j}for(var P=0;P<160;P+=2){R=n[P],j=n[P+1];var M=$s(i,r,e),z=$s(c,h,l),U=Js(i,c),I=Js(c,i),N=Vs(o,v),F=Vs(v,o),W=Ks[P],B=Ks[P+1],C=qs(o,u,a),D=qs(v,w,y),L=p+F|0,K=f+N+to(L,p)|0;K=(K=(K=K+C+to(L=L+D|0,D)|0)+W+to(L=L+B|0,B)|0)+R+to(L=L+j|0,j)|0;var H=I+z|0,X=U+M+to(H,I)|0;f=a,p=y,a=u,y=w,u=o,w=v,o=s+K+to(v=d+L|0,d)|0,s=e,d=l,e=r,l=h,r=i,h=c,i=K+X+to(c=L+H|0,L)|0}this.kt=this.kt+c|0,this.St=this.St+h|0,this.Ot=this.Ot+l|0,this.At=this.At+d|0,this.xt=this.xt+v|0,this.Tt=this.Tt+w|0,this.jt=this.jt+y|0,this.Rt=this.Rt+p|0,this.dt=this.dt+i+to(this.kt,c)|0,this.vt=this.vt+r+to(this.St,h)|0,this.wt=this.wt+e+to(this.Ot,l)|0,this.yt=this.yt+s+to(this.At,d)|0,this.bt=this.bt+o+to(this.xt,v)|0,this.gt=this.gt+u+to(this.Tt,w)|0,this._t=this._t+a+to(this.jt,y)|0,this.Et=this.Et+f+to(this.Rt,p)|0},Xs.prototype.ut=function(){var t=Ls.allocUnsafe(64);function n(n,i,r){t.writeInt32BE(n,r),t.writeInt32BE(i,r+4)}return n(this.dt,this.kt,0),n(this.vt,this.St,8),n(this.wt,this.Ot,16),n(this.yt,this.At,24),n(this.bt,this.xt,32),n(this.gt,this.Tt,40),n(this._t,this.jt,48),n(this.Et,this.Rt,56),t};var no=Xs;no.default;var io=Ut,ro=no,eo=Ze,so=Bn.Buffer,oo=new Array(160);function uo(){this.init(),this.ft=oo,eo.call(this,128,112)}io(uo,ro),uo.prototype.init=function(){return this.dt=3418070365,this.vt=1654270250,this.wt=2438529370,this.yt=355462360,this.bt=1731405415,this.gt=2394180231,this._t=3675008525,this.Et=1203062813,this.kt=3238371032,this.St=914150663,this.Ot=812702999,this.At=4144912697,this.xt=4290775857,this.Tt=1750603025,this.jt=1694076839,this.Rt=3204075428,this},uo.prototype.ut=function(){var t=so.allocUnsafe(48);function n(n,i,r){t.writeInt32BE(n,r),t.writeInt32BE(i,r+4)}return n(this.dt,this.kt,0),n(this.vt,this.St,8),n(this.wt,this.Ot,16),n(this.yt,this.At,24),n(this.bt,this.xt,32),n(this.gt,this.Tt,40),t};var ao=uo;ao.default;var fo=Ve.exports=function(t){t=t.toLowerCase();var n=fo[t];if(!n)throw new Error(t+" is not supported (we accept pull requests)");return new n};fo.sha=as,fo.sha1=bs,fo.sha224=Bs,fo.sha256=Ms,fo.sha384=ao,fo.sha512=no;var co=Ve.exports;function ho(){this.head=null,this.tail=null,this.length=0}ho.prototype.push=function(t){var n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},ho.prototype.unshift=function(t){var n={data:t,next:this.head};0===this.length&&(this.tail=n),this.head=n,++this.length},ho.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},ho.prototype.clear=function(){this.head=this.tail=null,this.length=0},ho.prototype.join=function(t){if(0===this.length)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=t+n.data;return i},ho.prototype.concat=function(t){if(0===this.length)return Zt.alloc(0);if(1===this.length)return this.head.data;for(var n=Zt.allocUnsafe(t>>>0),i=this.head,r=0;i;)i.data.copy(n,r),r+=i.data.length,i=i.next;return n},wo.ReadableState=vo;var lo=Ri("stream");function vo(t,n){t=t||{},this.objectMode=!!t.objectMode,n instanceof Ko&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r,this.highWaterMark=~~this.highWaterMark,this.buffer=new ho,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(this.decoder=new Pr(t.encoding),this.encoding=t.encoding)}function wo(t){if(!(this instanceof wo))return new wo(t);this.U=new vo(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this.C=t.read),di.call(this)}function yo(t,n,i,r,e){var s=function(t,n){var i=null;return Zt.isBuffer(n)||"string"==typeof n||null==n||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk")),i}(n,i);if(s)t.emit("error",s);else if(null===i)n.reading=!1,function(t,n){if(!n.ended){if(n.decoder){var i=n.decoder.end();i&&i.length&&(n.buffer.push(i),n.length+=n.objectMode?1:i.length)}n.ended=!0,bo(t)}}(t,n);else if(n.objectMode||i&&i.length>0)if(n.ended&&!e){var o=new Error("stream.push() after EOF");t.emit("error",o)}else if(n.endEmitted&&e){var u=new Error("stream.unshift() after end event");t.emit("error",u)}else{var a;!n.decoder||e||r||(i=n.decoder.write(i),a=!n.objectMode&&0===i.length),e||(n.reading=!1),a||(n.flowing&&0===n.length&&!n.sync?(t.emit("data",i),t.read(0)):(n.length+=n.objectMode?1:i.length,e?n.buffer.unshift(i):n.buffer.push(i),n.needReadable&&bo(t))),function(t,n){n.readingMore||(n.readingMore=!0,Zn(_o,t,n))}(t,n)}else e||(n.reading=!1);return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(n)}ki(wo,di),wo.prototype.push=function(t,n){var i=this.U;return i.objectMode||"string"!=typeof t||(n=n||i.defaultEncoding)!==i.encoding&&(t=Zt.from(t,n),n=""),yo(this,i,t,n,!1)},wo.prototype.unshift=function(t){return yo(this,this.U,t,"",!0)},wo.prototype.isPaused=function(){return!1===this.U.flowing},wo.prototype.setEncoding=function(t){return this.U.decoder=new Pr(t),this.U.encoding=t,this};var po=8388608;function mo(t,n){return t<=0||0===n.length&&n.ended?0:n.objectMode?1:t!=t?n.flowing&&n.length?n.buffer.head.data.length:n.length:(t>n.highWaterMark&&(n.highWaterMark=function(t){return t>=po?t=po:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=n.length?t:n.ended?n.length:(n.needReadable=!0,0))}function bo(t){var n=t.U;n.needReadable=!1,n.emittedReadable||(lo("emitReadable",n.flowing),n.emittedReadable=!0,n.sync?Zn(go,t):go(t))}function go(t){lo("emit readable"),t.emit("readable"),So(t)}function _o(t,n){for(var i=n.length;!n.reading&&!n.flowing&&!n.ended&&n.length<n.highWaterMark&&(lo("maybeReadMore read 0"),t.read(0),i!==n.length);)i=n.length;n.readingMore=!1}function Eo(t){lo("readable nexttick read 0"),t.read(0)}function ko(t,n){n.reading||(lo("resume read 0"),t.read(0)),n.resumeScheduled=!1,n.awaitDrain=0,t.emit("resume"),So(t),n.flowing&&!n.reading&&t.read(0)}function So(t){var n=t.U;for(lo("flow",n.flowing);n.flowing&&null!==t.read(););}function Oo(t,n){return 0===n.length?null:(n.objectMode?i=n.buffer.shift():!t||t>=n.length?(i=n.decoder?n.buffer.join(""):1===n.buffer.length?n.buffer.head.data:n.buffer.concat(n.length),n.buffer.clear()):i=function(t,n,i){var r;return t<n.head.data.length?(r=n.head.data.slice(0,t),n.head.data=n.head.data.slice(t)):r=t===n.head.data.length?n.shift():i?function(t,n){var i=n.head,r=1,e=i.data;for(t-=e.length;i=i.next;){var s=i.data,o=t>s.length?s.length:t;if(o===s.length?e+=s:e+=s.slice(0,t),0===(t-=o)){o===s.length?(++r,i.next?n.head=i.next:n.head=n.tail=null):(n.head=i,i.data=s.slice(o));break}++r}return n.length-=r,e}(t,n):function(t,n){var i=Zt.allocUnsafe(t),r=n.head,e=1;for(r.data.copy(i),t-=r.data.length;r=r.next;){var s=r.data,o=t>s.length?s.length:t;if(s.copy(i,i.length-t,0,o),0===(t-=o)){o===s.length?(++e,r.next?n.head=r.next:n.head=n.tail=null):(n.head=r,r.data=s.slice(o));break}++e}return n.length-=e,i}(t,n),r}(t,n.buffer,n.decoder),i);var i}function Ao(t){var n=t.U;if(n.length>0)throw new Error('"endReadable()" called on non-empty stream');n.endEmitted||(n.ended=!0,Zn(xo,n,t))}function xo(t,n){t.endEmitted||0!==t.length||(t.endEmitted=!0,n.readable=!1,n.emit("end"))}function To(t,n){for(var i=0,r=t.length;i<r;i++)if(t[i]===n)return i;return-1}function jo(){}function Ro(t,n,i){this.chunk=t,this.encoding=n,this.callback=i,this.next=null}function Po(t,n){Object.defineProperty(this,"buffer",{get:xi(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),t=t||{},this.objectMode=!!t.objectMode,n instanceof Ko&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var e=!1===t.decodeStrings;this.decodeStrings=!e,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,n){var i=t.M,r=i.sync,e=i.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(i),n)!function(t,n,i,r,e){--n.pendingcb,i?Zn(e,r):e(r),t.M.errorEmitted=!0,t.emit("error",r)}(t,i,r,n,e);else{var s=No(i);s||i.corked||i.bufferProcessing||!i.bufferedRequest||Io(t,i),r?Zn(Uo,t,i,s,e):Uo(t,i,s,e)}}(n,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Bo(this)}function Mo(t){if(!(this instanceof Mo||this instanceof Ko))return new Mo(t);this.M=new Po(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this.N=t.write),"function"==typeof t.writev&&(this.F=t.writev)),di.call(this)}function zo(t,n,i,r,e,s,o){n.writelen=r,n.writecb=o,n.writing=!0,n.sync=!0,i?t.F(e,n.onwrite):t.N(e,s,n.onwrite),n.sync=!1}function Uo(t,n,i,r){i||function(t,n){0===n.length&&n.needDrain&&(n.needDrain=!1,t.emit("drain"))}(t,n),n.pendingcb--,r(),Wo(t,n)}function Io(t,n){n.bufferProcessing=!0;var i=n.bufferedRequest;if(t.F&&i&&i.next){var r=n.bufferedRequestCount,e=new Array(r),s=n.corkedRequestsFree;s.entry=i;for(var o=0;i;)e[o]=i,i=i.next,o+=1;zo(t,n,!0,n.length,e,"",s.finish),n.pendingcb++,n.lastBufferedRequest=null,s.next?(n.corkedRequestsFree=s.next,s.next=null):n.corkedRequestsFree=new Bo(n)}else{for(;i;){var u=i.chunk,a=i.encoding,f=i.callback;if(zo(t,n,!1,n.objectMode?1:u.length,u,a,f),i=i.next,n.writing)break}null===i&&(n.lastBufferedRequest=null)}n.bufferedRequestCount=0,n.bufferedRequest=i,n.bufferProcessing=!1}function No(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function Fo(t,n){n.prefinished||(n.prefinished=!0,t.emit("prefinish"))}function Wo(t,n){var i=No(n);return i&&(0===n.pendingcb?(Fo(t,n),n.finished=!0,t.emit("finish")):Fo(t,n)),i}function Bo(t){var n=this;this.next=null,this.entry=null,this.finish=function(i){var r=n.entry;for(n.entry=null;r;){var e=r.callback;t.pendingcb--,e(i),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=n:t.corkedRequestsFree=n}}wo.prototype.read=function(t){lo("read",t),t=parseInt(t,10);var n=this.U,i=t;if(0!==t&&(n.emittedReadable=!1),0===t&&n.needReadable&&(n.length>=n.highWaterMark||n.ended))return lo("read: emitReadable",n.length,n.ended),0===n.length&&n.ended?Ao(this):bo(this),null;if(0===(t=mo(t,n))&&n.ended)return 0===n.length&&Ao(this),null;var r,e=n.needReadable;return lo("need readable",e),(0===n.length||n.length-t<n.highWaterMark)&&lo("length less than watermark",e=!0),n.ended||n.reading?lo("reading or ended",e=!1):e&&(lo("do read"),n.reading=!0,n.sync=!0,0===n.length&&(n.needReadable=!0),this.C(n.highWaterMark),n.sync=!1,n.reading||(t=mo(i,n))),null===(r=t>0?Oo(t,n):null)?(n.needReadable=!0,t=0):n.length-=t,0===n.length&&(n.ended||(n.needReadable=!0),i!==t&&n.ended&&Ao(this)),null!==r&&this.emit("data",r),r},wo.prototype.C=function(t){this.emit("error",new Error("not implemented"))},wo.prototype.pipe=function(t,n){var i=this,r=this.U;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t)}r.pipesCount+=1,lo("pipe count=%d opts=%j",r.pipesCount,n);var e=n&&!1===n.end?f:o;function s(t){lo("onunpipe"),t===i&&f()}function o(){lo("onend"),t.end()}r.endEmitted?Zn(e):i.once("end",e),t.on("unpipe",s);var u=function(t){return function(){var n=t.U;lo("pipeOnDrain",n.awaitDrain),n.awaitDrain&&n.awaitDrain--,0===n.awaitDrain&&t.listeners("data").length&&(n.flowing=!0,So(t))}}(i);t.on("drain",u);var a=!1;function f(){lo("cleanup"),t.removeListener("close",d),t.removeListener("finish",v),t.removeListener("drain",u),t.removeListener("error",l),t.removeListener("unpipe",s),i.removeListener("end",o),i.removeListener("end",f),i.removeListener("data",h),a=!0,!r.awaitDrain||t.M&&!t.M.needDrain||u()}var c=!1;function h(n){lo("ondata"),c=!1,!1!==t.write(n)||c||((1===r.pipesCount&&r.pipes===t||r.pipesCount>1&&-1!==To(r.pipes,t))&&!a&&(lo("false write response, pause",i.U.awaitDrain),i.U.awaitDrain++,c=!0),i.pause())}function l(n){lo("onerror",n),w(),t.removeListener("error",l),0===t.listeners("error").length&&t.emit("error",n)}function d(){t.removeListener("finish",v),w()}function v(){lo("onfinish"),t.removeListener("close",d),w()}function w(){lo("unpipe"),i.unpipe(t)}return i.on("data",h),function(t,n,i){if("function"==typeof t.prependListener)return t.prependListener(n,i);t.A&&t.A[n]?Array.isArray(t.A[n])?t.A[n].unshift(i):t.A[n]=[i,t.A[n]]:t.on(n,i)}(t,"error",l),t.once("close",d),t.once("finish",v),t.emit("pipe",i),r.flowing||(lo("pipe resume"),i.resume()),t},wo.prototype.unpipe=function(t){var n=this.U;if(0===n.pipesCount)return this;if(1===n.pipesCount)return t&&t!==n.pipes||(t||(t=n.pipes),n.pipes=null,n.pipesCount=0,n.flowing=!1,t&&t.emit("unpipe",this)),this;if(!t){var i=n.pipes,r=n.pipesCount;n.pipes=null,n.pipesCount=0,n.flowing=!1;for(var e=0;e<r;e++)i[e].emit("unpipe",this);return this}var s=To(n.pipes,t);return-1===s||(n.pipes.splice(s,1),n.pipesCount-=1,1===n.pipesCount&&(n.pipes=n.pipes[0]),t.emit("unpipe",this)),this},wo.prototype.on=function(t,n){var i=di.prototype.on.call(this,t,n);if("data"===t)!1!==this.U.flowing&&this.resume();else if("readable"===t){var r=this.U;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&bo(this):Zn(Eo,this))}return i},wo.prototype.addListener=wo.prototype.on,wo.prototype.resume=function(){var t=this.U;return t.flowing||(lo("resume"),t.flowing=!0,function(t,n){n.resumeScheduled||(n.resumeScheduled=!0,Zn(ko,t,n))}(this,t)),this},wo.prototype.pause=function(){return lo("call pause flowing=%j",this.U.flowing),!1!==this.U.flowing&&(lo("pause"),this.U.flowing=!1,this.emit("pause")),this},wo.prototype.wrap=function(t){var n=this.U,i=!1,r=this;for(var e in t.on("end",function(){if(lo("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),t.on("data",function(e){lo("wrapped data"),n.decoder&&(e=n.decoder.write(e)),n.objectMode&&null==e||(n.objectMode||e&&e.length)&&(r.push(e)||(i=!0,t.pause()))}),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(n){return function(){return t[n].apply(t,arguments)}}(e));return function(t,n){for(var i=0,r=t.length;i<r;i++)n(t[i])}(["error","close","destroy","pause","resume"],function(n){t.on(n,r.emit.bind(r,n))}),r.C=function(n){lo("wrapped _read",n),i&&(i=!1,t.resume())},r},wo.D=Oo,Mo.WritableState=Po,ki(Mo,di),Po.prototype.getBuffer=function(){for(var t=this.bufferedRequest,n=[];t;)n.push(t),t=t.next;return n},Mo.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Mo.prototype.write=function(t,n,i){var r=this.M,e=!1;return"function"==typeof n&&(i=n,n=null),Zt.isBuffer(t)?n="buffer":n||(n=r.defaultEncoding),"function"!=typeof i&&(i=jo),r.ended?function(t,n){var i=new Error("write after end");t.emit("error",i),Zn(n,i)}(this,i):function(t,n,i,r){var e=!0,s=!1;return null===i?s=new TypeError("May not write null values to stream"):Zt.isBuffer(i)||"string"==typeof i||void 0===i||n.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),Zn(r,s),e=!1),e}(this,r,t,i)&&(r.pendingcb++,e=function(t,n,i,r,e){i=function(t,n,i){return t.objectMode||!1===t.decodeStrings||"string"!=typeof n||(n=Zt.from(n,i)),n}(n,i,r),Zt.isBuffer(i)&&(r="buffer");var s=n.objectMode?1:i.length;n.length+=s;var o=n.length<n.highWaterMark;if(o||(n.needDrain=!0),n.writing||n.corked){var u=n.lastBufferedRequest;n.lastBufferedRequest=new Ro(i,r,e),u?u.next=n.lastBufferedRequest:n.bufferedRequest=n.lastBufferedRequest,n.bufferedRequestCount+=1}else zo(t,n,!1,s,i,r,e);return o}(this,r,t,n,i)),e},Mo.prototype.cork=function(){this.M.corked++},Mo.prototype.uncork=function(){var t=this.M;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||Io(this,t))},Mo.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this.M.defaultEncoding=t,this},Mo.prototype.N=function(t,n,i){i(new Error("not implemented"))},Mo.prototype.F=null,Mo.prototype.end=function(t,n,i){var r=this.M;"function"==typeof t?(i=t,t=null,n=null):"function"==typeof n&&(i=n,n=null),null!=t&&this.write(t,n),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,n,i){n.ending=!0,Wo(t,n),i&&(n.finished?Zn(i):t.once("finish",i)),n.ended=!0,t.writable=!1}(this,r,i)},ki(Ko,wo);for(var Co=Object.keys(Mo.prototype),Do=0;Do<Co.length;Do++){var Lo=Co[Do];Ko.prototype[Lo]||(Ko.prototype[Lo]=Mo.prototype[Lo])}function Ko(t){if(!(this instanceof Ko))return new Ko(t);wo.call(this,t),Mo.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",Ho)}function Ho(){this.allowHalfOpen||this.M.ended||Zn(Xo,this)}function Xo(t){t.end()}function qo(t){this.afterTransform=function(n,i){return function(t,n,i){var r=t.L;r.transforming=!1;var e=r.writecb;if(!e)return t.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!=i&&t.push(i),e(n);var s=t.U;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&t.C(s.highWaterMark)}(t,n,i)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function $o(t){if(!(this instanceof $o))return new $o(t);Ko.call(this,t),this.L=new qo(this);var n=this;this.U.needReadable=!0,this.U.sync=!1,t&&("function"==typeof t.transform&&(this.H=t.transform),"function"==typeof t.flush&&(this.X=t.flush)),this.once("prefinish",function(){"function"==typeof this.X?this.X(function(t){Jo(n,t)}):Jo(n)})}function Jo(t,n){if(n)return t.emit("error",n);var i=t.M,r=t.L;if(i.length)throw new Error("Calling transform done when ws.length != 0");if(r.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}function Vo(t){if(!(this instanceof Vo))return new Vo(t);$o.call(this,t)}function Go(){di.call(this)}ki($o,Ko),$o.prototype.push=function(t,n){return this.L.needTransform=!1,Ko.prototype.push.call(this,t,n)},$o.prototype.H=function(t,n,i){throw new Error("Not implemented")},$o.prototype.N=function(t,n,i){var r=this.L;if(r.writecb=i,r.writechunk=t,r.writeencoding=n,!r.transforming){var e=this.U;(r.needTransform||e.needReadable||e.length<e.highWaterMark)&&this.C(e.highWaterMark)}},$o.prototype.C=function(t){var n=this.L;null!==n.writechunk&&n.writecb&&!n.transforming?(n.transforming=!0,this.H(n.writechunk,n.writeencoding,n.afterTransform)):n.needTransform=!0},ki(Vo,$o),Vo.prototype.H=function(t,n,i){i(null,t)},ki(Go,di),Go.Readable=wo,Go.Writable=Mo,Go.Duplex=Ko,Go.Transform=$o,Go.PassThrough=Vo,Go.Stream=Go,Go.prototype.pipe=function(t,n){var i=this;function r(n){t.writable&&!1===t.write(n)&&i.pause&&i.pause()}function e(){i.readable&&i.resume&&i.resume()}i.on("data",r),t.on("drain",e),t.Pt||n&&!1===n.end||(i.on("end",o),i.on("close",u));var s=!1;function o(){s||(s=!0,t.end())}function u(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function a(t){if(f(),0===di.listenerCount(this,"error"))throw t}function f(){i.removeListener("data",r),t.removeListener("drain",e),i.removeListener("end",o),i.removeListener("close",u),i.removeListener("error",a),t.removeListener("error",a),i.removeListener("end",f),i.removeListener("close",f),t.removeListener("close",f)}return i.on("error",a),t.on("error",a),i.on("end",f),i.on("close",f),t.on("close",f),t.emit("pipe",i),t};var Yo=a(Object.freeze({__proto__:null,Duplex:Ko,PassThrough:Vo,Readable:wo,Stream:Go,Transform:$o,Writable:Mo,default:Go})),Zo=Bn.Buffer,Qo=Yo.Transform,tu=Ir.StringDecoder;function nu(t){Qo.call(this),this.hashMode="string"==typeof t,this.hashMode?this[t]=this.Mt:this.final=this.Mt,this.W&&(this.zt=this.W,this.W=null),this.Ut=null,this.It=null}Ut(nu,Qo),nu.prototype.update=function(t,n,i){"string"==typeof t&&(t=Zo.from(t,n));var r=this.Y(t);return this.hashMode?this:(i&&(r=this.Nt(r,i)),r)},nu.prototype.setAutoPadding=function(){},nu.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},nu.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},nu.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},nu.prototype.H=function(t,n,i){var r;try{this.hashMode?this.Y(t):this.push(this.Y(t))}catch(e){r=e}finally{i(r)}},nu.prototype.X=function(t){var n;try{this.push(this.zt())}catch(i){n=i}t(n)},nu.prototype.Mt=function(t){var n=this.zt()||Zo.alloc(0);return t&&(n=this.Nt(n,t,!0)),n},nu.prototype.Nt=function(t,n,i){if(this.Ut||(this.Ut=new tu(n),this.It=n),this.It!==n)throw new Error("can't switch encodings");var r=this.Ut.write(t);return i&&(r+=this.Ut.end()),r};var iu=nu;iu.default;var ru=Re,eu=Je,su=co,ou=iu;function uu(t){ou.call(this,"digest"),this.ut=t}Ut(uu,ou),uu.prototype.Y=function(t){this.ut.update(t)},uu.prototype.W=function(){return this.ut.digest()};var au="undefined"!=typeof window?window:void 0!==u?u:"undefined"!=typeof self?self:{};au.default;var fu=au,cu=a(Object.freeze({__proto__:null,default:{}}));Object.defineProperty(Rt,"t",{value:!0});var hu=function(t){return"md5"===(t=t.toLowerCase())?new ru:"rmd160"===t||"ripemd160"===t?new eu:new uu(su(t))},lu=function(t){if(fu.crypto&&fu.crypto.getRandomValues)return fu.crypto.getRandomValues(t);if("object"==typeof fu.msCrypto&&"function"==typeof fu.msCrypto.getRandomValues)return fu.msCrypto.getRandomValues(t);if(cu.randomBytes){if(!(t instanceof Uint8Array))throw new TypeError("expected Uint8Array");if(t.length>65536){var n=new Error;throw n.code=22,n.message="Failed to execute 'getRandomValues' on 'Crypto': The ArrayBufferView's byte length ("+t.length+") exceeds the number of bytes of entropy available via this API (65536).",n.name="QuotaExceededError",n}var i=cu.randomBytes(t.length);return t.set(i),t}throw new Error("No secure random number generator available.")},du=Wn;function vu(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var wu=vu(Mt),yu=vu(hu),pu=vu(lu);const mu={EOS:"eos",ETH:"eth",TRX:"trx"};Object.keys(mu).map(t=>({key:t,value:mu[t]}));class bu{constructor(t=mu.EOS,n="",i="",r=null,e=null){this.blockchain=t,this.contract=n,this.symbol=i,this.name=r||i,this.decimals=e}static placeholder(){return new bu}static fromJson(t){return Object.assign(this.placeholder(),t)}}const gu="blockchain_support",_u="wallet_support";var Eu=Object.freeze({__proto__:null,BLOCKCHAIN_SUPPORT:gu,WALLET_SUPPORT:_u});class ku{constructor(t="",n=""){this.name=t,this.type=n}static placeholder(){return new ku}static fromJson(t){return Object.assign(ku.placeholder(),t)}isSignatureProvider(){return this.type===gu}isValid(){return Object.keys(Eu).map(t=>Eu[t]).includes(this.type)}}const Su={disconnect:"disconnect",isConnected:"isConnected",isPaired:"isPaired",addEventHandler:"addEventHandler",removeEventHandler:"removeEventHandler",listen:"listen",getVersion:"getVersion",getIdentity:"getIdentity",getAllAccountsFor:"getAllAccountsFor",getIdentityFromPermissions:"getIdentityFromPermissions",forgetIdentity:"forgetIdentity",updateIdentity:"updateIdentity",authenticate:"authenticate",getArbitrarySignature:"getArbitrarySignature",getPublicKey:"getPublicKey",linkAccount:"linkAccount",hasAccountFor:"hasAccountFor",suggestNetwork:"suggestNetwork",requestTransfer:"requestTransfer",getAvatar:"getAvatar",requestSignature:"requestSignature",createTransaction:"createTransaction",addToken:"addToken",createEncryptionKey:"createEncryptionKey"},Ou={[Su.getIdentity]:"login",[Su.getAllAccountsFor]:"loginAll",[Su.forgetIdentity]:"logout",[Su.getIdentityFromPermissions]:"checkLogin"};class Au{constructor(t,n,i){const r=n=>()=>{throw new Error(`${t} does not support the ${n} method.`)};Object.keys(Su).map(t=>((t,n)=>{void 0===i[n]&&(i[n]=t||r(n)),Ou[n]&&void 0===i[Ou[n]]&&(i[Ou[n]]=i[n]?i[n]:r(n))})(n[t],t))}static bindBasics(t){t.account=n=>{if(t.identity&&t.identity.accounts)return t.identity.accounts.find(t=>t.blockchain===n)}}}class xu{static getMethods(t,n){const i=(n,i)=>((n||i)&&(t.holderFns.get().identity=n),i||n);return{[Su.disconnect]:()=>n().disconnect(),[Su.isConnected]:()=>n().isConnected(),[Su.isPaired]:()=>n().isPaired(),[Su.addEventHandler]:(t,i=null)=>n().addEventHandler(t,i),[Su.removeEventHandler]:(t=null)=>n().removeEventHandler(t),[Su.listen]:t=>n().addEventHandler(t),[Su.getVersion]:()=>n().sendApiRequest({type:"getVersion",payload:{}}),[Su.getIdentity]:r=>n().sendApiRequest({type:"getOrRequestIdentity",payload:{fields:r||{accounts:[t.holderFns.get().network]}}}).then(i),[Su.getAllAccountsFor]:r=>n().sendApiRequest({type:"getAllAccountsFor",payload:{fields:r||{accounts:[t.holderFns.get().network]}}}).then(i),[Su.getIdentityFromPermissions]:()=>n().sendApiRequest({type:"identityFromPermissions",payload:{}}).then(i),[Su.forgetIdentity]:()=>n().sendApiRequest({type:"forgetIdentity",payload:{}}).then(t=>i(null,t)),[Su.updateIdentity]:({name:t,kyc:r})=>n().sendApiRequest({type:"updateIdentity",payload:{name:t,kyc:r}}).then(t=>t?i(t):null),[Su.authenticate]:(t,i=null,r=null)=>n().sendApiRequest({type:"authenticate",payload:{nonce:t,data:i,publicKey:r}}),[Su.getArbitrarySignature]:(t,i)=>n().sendApiRequest({type:"requestArbitrarySignature",payload:{publicKey:t,data:i}}),[Su.getPublicKey]:t=>n().sendApiRequest({type:"getPublicKey",payload:{blockchain:t}}),[Su.linkAccount]:(i,r)=>n().sendApiRequest({type:"linkAccount",payload:{account:i,network:r||t.holderFns.get().network}}),[Su.hasAccountFor]:i=>n().sendApiRequest({type:"hasAccountFor",payload:{network:i||t.holderFns.get().network}}),[Su.suggestNetwork]:i=>n().sendApiRequest({type:"requestAddNetwork",payload:{network:i||t.holderFns.get().network}}),[Su.requestTransfer]:(i,r,e,s={})=>n().sendApiRequest({type:"requestTransfer",payload:{network:i||t.holderFns.get().network,to:r,amount:e,options:s}}),[Su.getAvatar]:()=>n().sendApiRequest({type:"getAvatar",payload:{}}),[Su.requestSignature]:t=>n().sendApiRequest({type:"requestSignature",payload:t}),[Su.createTransaction]:(i,r,e,s)=>n().sendApiRequest({type:"createTransaction",payload:{blockchain:i,actions:r,account:e,network:s||t.holderFns.get().network}}),[Su.addToken]:(i,r)=>n().sendApiRequest({type:"addToken",payload:{token:i,network:r||t.holderFns.get().network}}),[Su.createEncryptionKey]:(t,i,r=null)=>n().sendApiRequest({type:"createEncryptionKey",payload:{scatterPublicKey:t,otherPublicKey:i,nonce:r}})}}}let Tu=!1;"undefined"!=typeof document&&document.addEventListener("walletLoaded",()=>Tu=!0);const ju=async(t=null,n=0)=>new Promise(i=>(t||(t=i),Tu||"undefined"!=typeof window&&void 0!==window.wallet&&(Tu=!0,1)?t(!0):n>5?t(!1):void setTimeout(()=>ju(t,n+1),100)));class Ru extends ku{constructor(t,n){super("InjectedWalletV2",_u),this.name="InjectedWalletV2",this.context=t,this.holderFns=n}async connect(){return new Promise(async t=>{await ju()&&(this.holderFns&&!this.holderFns.get().wallet&&(this.holderFns.get().wallet=this.name),t({disconnect:()=>{},sendApiRequest:window.wallet.sendApiRequest}))})}async runAfterInterfacing(){return this.holderFns.get().identity=await this.holderFns.get().getIdentityFromPermissions(),!0}methods(){return xu.getMethods(this,()=>window.wallet)}}class Pu{constructor(t="",n="https",i="",r=0,e=mu.EOS,s=""){this.name=t,this.protocol=n,this.host=i,this.port=r,this.blockchain=e,this.chainId=s.toString(),this.token=null}static placeholder(){return new Pu}static fromJson(t){const n=Object.assign(Pu.placeholder(),t);return n.chainId=n.chainId?n.chainId.toString():"",n.token=t.hasOwnProperty("token")&&t.token?bu.fromJson(t.token):null,n}fullhost(){return`${this.protocol}://${this.host}${this.port?":":""}${this.port}`}unique(){return(`${this.blockchain}:`+(this.chainId.length?`chain:${this.chainId}`:`${this.host}:${this.port}`)).toLowerCase()}}let Mu={};const zu=()=>"undefined"!=typeof window?window:{localStorage:{setItem:(t,n)=>Mu[t]=n,getItem:t=>Mu[t]||null,removeItem:t=>delete Mu[t]}};class Uu{constructor(){}static setAppKey(t){zu().localStorage.setItem("appkey",t)}static getAppKey(){return zu().localStorage.getItem("appkey")}static removeAppKey(){return zu().localStorage.removeItem("appkey")}static setNonce(t){zu().localStorage.setItem("nonce",t)}static getNonce(){return zu().localStorage.getItem("nonce")}static removeNonce(){return zu().localStorage.removeItem("nonce")}}var Iu=new RegExp("^.*("+["\\+https:\\/\\/developers.google.com\\/\\+\\/web\\/snippet\\/","googlebot","baiduspider","gurujibot","yandexbot","slurp","msnbot","bingbot","facebookexternalhit","linkedinbot","twitterbot","slackbot","telegrambot","applebot","pingdom","tumblr ","Embedly","spbot"].join("|")+").*$"),Nu=function(t){t=t||{};var n={version:!1,language:!1,platform:!0,os:!0,pixelDepth:!0,colorDepth:!0,resolution:!1,isAuthoritative:!0,silkAccelerated:!0,isKindleFire:!0,isDesktop:!0,isMobile:!0,isTablet:!0,isWindows:!0,isLinux:!0,isLinux64:!0,isChromeOS:!0,isMac:!0,isiPad:!0,isiPhone:!0,isiPod:!0,isAndroid:!0,isSamsung:!0,isSmartTV:!0,isRaspberry:!0,isBlackberry:!0,isTouchScreen:!0,isOpera:!1,isIE:!1,isEdge:!1,isIECompatibilityMode:!1,isSafari:!1,isFirefox:!1,isWebkit:!1,isChrome:!1,isKonqueror:!1,isOmniWeb:!1,isSeaMonkey:!1,isFlock:!1,isAmaya:!1,isPhantomJS:!1,isEpiphany:!1,source:!1,cpuCores:!1};for(var i in t)t.hasOwnProperty(i)&&void 0!==n[i]&&(n[i]=t[i]);return this.options=n,this.version="1.0.0",this.Ft={Edge:/Edge\/([\d\w\.\-]+)/i,Firefox:/firefox\/([\d\w\.\-]+)/i,IE:/msie\s([\d\.]+[\d])|trident\/\d+\.\d+;.*[rv:]+(\d+\.\d)/i,Chrome:/chrome\/([\d\w\.\-]+)/i,Chromium:/(?:chromium|crios)\/([\d\w\.\-]+)/i,Safari:/version\/([\d\w\.\-]+)/i,Opera:/version\/([\d\w\.\-]+)|OPR\/([\d\w\.\-]+)/i,Ps3:/([\d\w\.\-]+)\)\s*$/i,Psp:/([\d\w\.\-]+)\)?\s*$/i,Amaya:/amaya\/([\d\w\.\-]+)/i,SeaMonkey:/seamonkey\/([\d\w\.\-]+)/i,OmniWeb:/omniweb\/v([\d\w\.\-]+)/i,Flock:/flock\/([\d\w\.\-]+)/i,Epiphany:/epiphany\/([\d\w\.\-]+)/i,WinJs:/msapphost\/([\d\w\.\-]+)/i,PhantomJS:/phantomjs\/([\d\w\.\-]+)/i,UC:/UCBrowser\/([\d\w\.]+)/i},this.Wt={Edge:/edge/i,Amaya:/amaya/i,Konqueror:/konqueror/i,Epiphany:/epiphany/i,SeaMonkey:/seamonkey/i,Flock:/flock/i,OmniWeb:/omniweb/i,Chromium:/chromium|crios/i,Chrome:/chrome/i,Safari:/safari/i,IE:/msie|trident/i,Opera:/opera|OPR/i,PS3:/playstation 3/i,PSP:/playstation portable/i,Firefox:/firefox/i,WinJs:/msapphost/i,PhantomJS:/phantomjs/i,UC:/UCBrowser/i},this.Bt={Windows10:/windows nt 10\.0/i,Windows81:/windows nt 6\.3/i,Windows8:/windows nt 6\.2/i,Windows7:/windows nt 6\.1/i,UnknownWindows:/windows nt 6\.\d+/i,WindowsVista:/windows nt 6\.0/i,Windows2003:/windows nt 5\.2/i,WindowsXP:/windows nt 5\.1/i,Windows2000:/windows nt 5\.0/i,WindowsPhone8:/windows phone 8\./,OSXCheetah:/os x 10[._]0/i,OSXPuma:/os x 10[._]1(\D|$)/i,OSXJaguar:/os x 10[._]2/i,OSXPanther:/os x 10[._]3/i,OSXTiger:/os x 10[._]4/i,OSXLeopard:/os x 10[._]5/i,OSXSnowLeopard:/os x 10[._]6/i,OSXLion:/os x 10[._]7/i,OSXMountainLion:/os x 10[._]8/i,OSXMavericks:/os x 10[._]9/i,OSXYosemite:/os x 10[._]10/i,OSXElCapitan:/os x 10[._]11/i,OSXSierra:/os x 10[._]12/i,Mac:/os x/i,Linux:/linux/i,Linux64:/linux x86_64/i,ChromeOS:/cros/i,Wii:/wii/i,PS3:/playstation 3/i,PSP:/playstation portable/i,iPad:/\(iPad.*os (\d+)[._](\d+)/i,iPhone:/\(iPhone.*os (\d+)[._](\d+)/i,Bada:/Bada\/(\d+)\.(\d+)/i,Curl:/curl\/(\d+)\.(\d+)\.(\d+)/i},this.Ct={Windows:/windows nt/i,WindowsPhone:/windows phone/i,Mac:/macintosh/i,Linux:/linux/i,Wii:/wii/i,Playstation:/playstation/i,iPad:/ipad/i,iPod:/ipod/i,iPhone:/iphone/i,Android:/android/i,Blackberry:/blackberry/i,Samsung:/samsung/i,Curl:/curl/i},this.DefaultAgent={isAuthoritative:!0,isMobile:!1,isTablet:!1,isiPad:!1,isiPod:!1,isiPhone:!1,isAndroid:!1,isBlackberry:!1,isOpera:!1,isIE:!1,isEdge:!1,isIECompatibilityMode:!1,isSafari:!1,isFirefox:!1,isWebkit:!1,isChrome:!1,isKonqueror:!1,isOmniWeb:!1,isSeaMonkey:!1,isFlock:!1,isAmaya:!1,isPhantomJS:!1,isEpiphany:!1,isDesktop:!1,isWindows:!1,isLinux:!1,isLinux64:!1,isMac:!1,isChromeOS:!1,isBada:!1,isSamsung:!1,isRaspberry:!1,isBot:!1,isCurl:!1,isAndroidTablet:!1,isWinJs:!1,isKindleFire:!1,isSilk:!1,isCaptive:!1,isSmartTV:!1,isUC:!1,isTouchScreen:!1,silkAccelerated:!1,colorDepth:-1,pixelDepth:-1,resolution:[],cpuCores:-1,language:"unknown",browser:"unknown",version:"unknown",os:"unknown",platform:"unknown",geoIp:{},source:"",hashInt:function(t){var n,i,r=0;if(0===t.length)return r;for(n=0,i=t.length;n<i;n++)r=(r<<5)-r+t.charCodeAt(n),r|=0;return r},hashMD5:function(t){function n(t,n){return t<<n|t>>>32-n}function i(t,n){var i,r,e,s,o;return e=2147483648&t,s=2147483648&n,o=(1073741823&t)+(1073741823&n),(i=1073741824&t)&(r=1073741824&n)?2147483648^o^e^s:i|r?1073741824&o?3221225472^o^e^s:1073741824^o^e^s:o^e^s}function r(t,r,e,s,o,u,a){return t=i(t,i(i(function(t,n,i){return t&n|~t&i}(r,e,s),o),a)),i(n(t,u),r)}function e(t,r,e,s,o,u,a){return t=i(t,i(i(function(t,n,i){return t&i|n&~i}(r,e,s),o),a)),i(n(t,u),r)}function s(t,r,e,s,o,u,a){return t=i(t,i(i(function(t,n,i){return t^n^i}(r,e,s),o),a)),i(n(t,u),r)}function o(t,r,e,s,o,u,a){return t=i(t,i(i(function(t,n,i){return n^(t|~i)}(r,e,s),o),a)),i(n(t,u),r)}function u(t){var n,i="",r="";for(n=0;n<=3;n++)i+=(r="0"+(t>>>8*n&255).toString(16)).substr(r.length-2,2);return i}var a,f,c,h,l,d,v,w,y,p;for(a=function(t){for(var n,i=t.length,r=i+8,e=16*((r-r%64)/64+1),s=new Array(e-1),o=0,u=0;u<i;)o=u%4*8,s[n=(u-u%4)/4]=s[n]|t.charCodeAt(u)<<o,u++;return o=u%4*8,s[n=(u-u%4)/4]=s[n]|128<<o,s[e-2]=i<<3,s[e-1]=i>>>29,s}(t=function(t){t=t.replace(/\r\n/g,"\n");for(var n="",i=0;i<t.length;i++){var r=t.charCodeAt(i);r<128?n+=String.fromCharCode(r):r>127&&r<2048?(n+=String.fromCharCode(r>>6|192),n+=String.fromCharCode(63&r|128)):(n+=String.fromCharCode(r>>12|224),n+=String.fromCharCode(r>>6&63|128),n+=String.fromCharCode(63&r|128))}return n}(t)),v=1732584193,w=4023233417,y=2562383102,p=271733878,f=0;f<a.length;f+=16)c=v,h=w,l=y,d=p,v=r(v,w,y,p,a[f+0],7,3614090360),p=r(p,v,w,y,a[f+1],12,3905402710),y=r(y,p,v,w,a[f+2],17,606105819),w=r(w,y,p,v,a[f+3],22,3250441966),v=r(v,w,y,p,a[f+4],7,4118548399),p=r(p,v,w,y,a[f+5],12,1200080426),y=r(y,p,v,w,a[f+6],17,2821735955),w=r(w,y,p,v,a[f+7],22,4249261313),v=r(v,w,y,p,a[f+8],7,1770035416),p=r(p,v,w,y,a[f+9],12,2336552879),y=r(y,p,v,w,a[f+10],17,4294925233),w=r(w,y,p,v,a[f+11],22,2304563134),v=r(v,w,y,p,a[f+12],7,1804603682),p=r(p,v,w,y,a[f+13],12,4254626195),y=r(y,p,v,w,a[f+14],17,2792965006),v=e(v,w=r(w,y,p,v,a[f+15],22,1236535329),y,p,a[f+1],5,4129170786),p=e(p,v,w,y,a[f+6],9,3225465664),y=e(y,p,v,w,a[f+11],14,643717713),w=e(w,y,p,v,a[f+0],20,3921069994),v=e(v,w,y,p,a[f+5],5,3593408605),p=e(p,v,w,y,a[f+10],9,38016083),y=e(y,p,v,w,a[f+15],14,3634488961),w=e(w,y,p,v,a[f+4],20,3889429448),v=e(v,w,y,p,a[f+9],5,568446438),p=e(p,v,w,y,a[f+14],9,3275163606),y=e(y,p,v,w,a[f+3],14,4107603335),w=e(w,y,p,v,a[f+8],20,1163531501),v=e(v,w,y,p,a[f+13],5,2850285829),p=e(p,v,w,y,a[f+2],9,4243563512),y=e(y,p,v,w,a[f+7],14,1735328473),v=s(v,w=e(w,y,p,v,a[f+12],20,2368359562),y,p,a[f+5],4,4294588738),p=s(p,v,w,y,a[f+8],11,2272392833),y=s(y,p,v,w,a[f+11],16,1839030562),w=s(w,y,p,v,a[f+14],23,4259657740),v=s(v,w,y,p,a[f+1],4,2763975236),p=s(p,v,w,y,a[f+4],11,1272893353),y=s(y,p,v,w,a[f+7],16,4139469664),w=s(w,y,p,v,a[f+10],23,3200236656),v=s(v,w,y,p,a[f+13],4,681279174),p=s(p,v,w,y,a[f+0],11,3936430074),y=s(y,p,v,w,a[f+3],16,3572445317),w=s(w,y,p,v,a[f+6],23,76029189),v=s(v,w,y,p,a[f+9],4,3654602809),p=s(p,v,w,y,a[f+12],11,3873151461),y=s(y,p,v,w,a[f+15],16,530742520),v=o(v,w=s(w,y,p,v,a[f+2],23,3299628645),y,p,a[f+0],6,4096336452),p=o(p,v,w,y,a[f+7],10,1126891415),y=o(y,p,v,w,a[f+14],15,2878612391),w=o(w,y,p,v,a[f+5],21,4237533241),v=o(v,w,y,p,a[f+12],6,1700485571),p=o(p,v,w,y,a[f+3],10,2399980690),y=o(y,p,v,w,a[f+10],15,4293915773),w=o(w,y,p,v,a[f+1],21,2240044497),v=o(v,w,y,p,a[f+8],6,1873313359),p=o(p,v,w,y,a[f+15],10,4264355552),y=o(y,p,v,w,a[f+6],15,2734768916),w=o(w,y,p,v,a[f+13],21,1309151649),v=o(v,w,y,p,a[f+4],6,4149444226),p=o(p,v,w,y,a[f+11],10,3174756917),y=o(y,p,v,w,a[f+2],15,718787259),w=o(w,y,p,v,a[f+9],21,3951481745),v=i(v,c),w=i(w,h),y=i(y,l),p=i(p,d);return(u(v)+u(w)+u(y)+u(p)).toLowerCase()}},this.Agent={},this.getBrowser=function(t){switch(!0){case this.Wt.Edge.test(t):return this.Agent.isEdge=!0,"Edge";case this.Wt.PhantomJS.test(t):return this.Agent.isPhantomJS=!0,"PhantomJS";case this.Wt.Konqueror.test(t):return this.Agent.isKonqueror=!0,"Konqueror";case this.Wt.Amaya.test(t):return this.Agent.isAmaya=!0,"Amaya";case this.Wt.Epiphany.test(t):return this.Agent.isEpiphany=!0,"Epiphany";case this.Wt.SeaMonkey.test(t):return this.Agent.isSeaMonkey=!0,"SeaMonkey";case this.Wt.Flock.test(t):return this.Agent.isFlock=!0,"Flock";case this.Wt.OmniWeb.test(t):return this.Agent.isOmniWeb=!0,"OmniWeb";case this.Wt.Opera.test(t):return this.Agent.isOpera=!0,"Opera";case this.Wt.Chromium.test(t):return this.Agent.isChrome=!0,"Chromium";case this.Wt.Chrome.test(t):return this.Agent.isChrome=!0,"Chrome";case this.Wt.Safari.test(t):return this.Agent.isSafari=!0,"Safari";case this.Wt.WinJs.test(t):return this.Agent.isWinJs=!0,"WinJs";case this.Wt.IE.test(t):return this.Agent.isIE=!0,"IE";case this.Wt.PS3.test(t):return"ps3";case this.Wt.PSP.test(t):return"psp";case this.Wt.Firefox.test(t):return this.Agent.isFirefox=!0,"Firefox";case this.Wt.UC.test(t):return this.Agent.isUC=!0,"UCBrowser";default:return 0!==t.indexOf("Mozilla")&&/^([\d\w\-\.]+)\/[\d\w\.\-]+/i.test(t)?(this.Agent.isAuthoritative=!1,RegExp.$1):"unknown"}},this.getBrowserVersion=function(t){switch(this.Agent.browser){case"Edge":if(this.Ft.Edge.test(t))return RegExp.$1;break;case"PhantomJS":if(this.Ft.PhantomJS.test(t))return RegExp.$1;break;case"Chrome":if(this.Ft.Chrome.test(t))return RegExp.$1;break;case"Chromium":if(this.Ft.Chromium.test(t))return RegExp.$1;break;case"Safari":if(this.Ft.Safari.test(t))return RegExp.$1;break;case"Opera":if(this.Ft.Opera.test(t))return RegExp.$1?RegExp.$1:RegExp.$2;break;case"Firefox":if(this.Ft.Firefox.test(t))return RegExp.$1;break;case"WinJs":if(this.Ft.WinJs.test(t))return RegExp.$1;break;case"IE":if(this.Ft.IE.test(t))return RegExp.$2?RegExp.$2:RegExp.$1;break;case"ps3":if(this.Ft.Ps3.test(t))return RegExp.$1;break;case"psp":if(this.Ft.Psp.test(t))return RegExp.$1;break;case"Amaya":if(this.Ft.Amaya.test(t))return RegExp.$1;break;case"Epiphany":if(this.Ft.Epiphany.test(t))return RegExp.$1;break;case"SeaMonkey":if(this.Ft.SeaMonkey.test(t))return RegExp.$1;break;case"Flock":if(this.Ft.Flock.test(t))return RegExp.$1;break;case"OmniWeb":if(this.Ft.OmniWeb.test(t))return RegExp.$1;break;case"UCBrowser":if(this.Ft.UC.test(t))return RegExp.$1;break;default:if("unknown"!==this.Agent.browser&&new RegExp(this.Agent.browser+"[\\/ ]([\\d\\w\\.\\-]+)","i").test(t))return RegExp.$1}},this.getOS=function(t){switch(!0){case this.Bt.WindowsVista.test(t):return this.Agent.isWindows=!0,"Windows Vista";case this.Bt.Windows7.test(t):return this.Agent.isWindows=!0,"Windows 7";case this.Bt.Windows8.test(t):return this.Agent.isWindows=!0,"Windows 8";case this.Bt.Windows81.test(t):return this.Agent.isWindows=!0,"Windows 8.1";case this.Bt.Windows10.test(t):return this.Agent.isWindows=!0,"Windows 10.0";case this.Bt.Windows2003.test(t):return this.Agent.isWindows=!0,"Windows 2003";case this.Bt.WindowsXP.test(t):return this.Agent.isWindows=!0,"Windows XP";case this.Bt.Windows2000.test(t):return this.Agent.isWindows=!0,"Windows 2000";case this.Bt.WindowsPhone8.test(t):return"Windows Phone 8";case this.Bt.Linux64.test(t):return this.Agent.isLinux=!0,this.Agent.isLinux64=!0,"Linux 64";case this.Bt.Linux.test(t):return this.Agent.isLinux=!0,"Linux";case this.Bt.ChromeOS.test(t):return this.Agent.isChromeOS=!0,"Chrome OS";case this.Bt.Wii.test(t):return"Wii";case this.Bt.PS3.test(t):case this.Bt.PSP.test(t):return"Playstation";case this.Bt.OSXCheetah.test(t):return this.Agent.isMac=!0,"OS X Cheetah";case this.Bt.OSXPuma.test(t):return this.Agent.isMac=!0,"OS X Puma";case this.Bt.OSXJaguar.test(t):return this.Agent.isMac=!0,"OS X Jaguar";case this.Bt.OSXPanther.test(t):return this.Agent.isMac=!0,"OS X Panther";case this.Bt.OSXTiger.test(t):return this.Agent.isMac=!0,"OS X Tiger";case this.Bt.OSXLeopard.test(t):return this.Agent.isMac=!0,"OS X Leopard";case this.Bt.OSXSnowLeopard.test(t):return this.Agent.isMac=!0,"OS X Snow Leopard";case this.Bt.OSXLion.test(t):return this.Agent.isMac=!0,"OS X Lion";case this.Bt.OSXMountainLion.test(t):return this.Agent.isMac=!0,"OS X Mountain Lion";case this.Bt.OSXMavericks.test(t):return this.Agent.isMac=!0,"OS X Mavericks";case this.Bt.OSXYosemite.test(t):return this.Agent.isMac=!0,"OS X Yosemite";case this.Bt.OSXElCapitan.test(t):return this.Agent.isMac=!0,"OS X El Capitan";case this.Bt.OSXSierra.test(t):return this.Agent.isMac=!0,"macOS Sierra";case this.Bt.Mac.test(t):return this.Agent.isMac=!0,"OS X";case this.Bt.iPad.test(t):return this.Agent.isiPad=!0,t.match(this.Bt.iPad)[0].replace("_",".");case this.Bt.iPhone.test(t):return this.Agent.isiPhone=!0,t.match(this.Bt.iPhone)[0].replace("_",".");case this.Bt.Bada.test(t):return this.Agent.isBada=!0,"Bada";case this.Bt.Curl.test(t):return this.Agent.isCurl=!0,"Curl";default:return"unknown"}},this.getPlatform=function(t){switch(!0){case this.Ct.Windows.test(t):return"Microsoft Windows";case this.Ct.WindowsPhone.test(t):return this.Agent.isWindowsPhone=!0,"Microsoft Windows Phone";case this.Ct.Mac.test(t):return"Apple Mac";case this.Ct.Curl.test(t):return"Curl";case this.Ct.Android.test(t):return this.Agent.isAndroid=!0,"Android";case this.Ct.Blackberry.test(t):return this.Agent.isBlackberry=!0,"Blackberry";case this.Ct.Linux.test(t):return"Linux";case this.Ct.Wii.test(t):return"Wii";case this.Ct.Playstation.test(t):return"Playstation";case this.Ct.iPad.test(t):return this.Agent.isiPad=!0,"iPad";case this.Ct.iPod.test(t):return this.Agent.isiPod=!0,"iPod";case this.Ct.iPhone.test(t):return this.Agent.isiPhone=!0,"iPhone";case this.Ct.Samsung.test(t):return this.Agent.isiSamsung=!0,"Samsung";default:return"unknown"}},this.testCompatibilityMode=function(){var t=this;if(this.Agent.isIE&&/Trident\/(\d)\.0/i.test(t.Agent.source)){var n=parseInt(RegExp.$1,10),i=parseInt(t.Agent.version,10);7===i&&7===n&&(t.Agent.isIECompatibilityMode=!0,t.Agent.version=11),7===i&&6===n&&(t.Agent.isIECompatibilityMode=!0,t.Agent.version=10),7===i&&5===n&&(t.Agent.isIECompatibilityMode=!0,t.Agent.version=9),7===i&&4===n&&(t.Agent.isIECompatibilityMode=!0,t.Agent.version=8)}},this.testSilk=function(){return!0===new RegExp("silk","gi").test(this.Agent.source)&&(this.Agent.isSilk=!0),/Silk-Accelerated=true/gi.test(this.Agent.source)&&(this.Agent.SilkAccelerated=!0),!!this.Agent.isSilk&&"Silk"},this.testKindleFire=function(){var t=this;switch(!0){case/KFOT/gi.test(t.Agent.source):return this.Agent.isKindleFire=!0,"Kindle Fire";case/KFTT/gi.test(t.Agent.source):return this.Agent.isKindleFire=!0,"Kindle Fire HD";case/KFJWI/gi.test(t.Agent.source):return this.Agent.isKindleFire=!0,"Kindle Fire HD 8.9";case/KFJWA/gi.test(t.Agent.source):return this.Agent.isKindleFire=!0,"Kindle Fire HD 8.9 4G";case/KFSOWI/gi.test(t.Agent.source):return this.Agent.isKindleFire=!0,"Kindle Fire HD 7";case/KFTHWI/gi.test(t.Agent.source):return this.Agent.isKindleFire=!0,"Kindle Fire HDX 7";case/KFTHWA/gi.test(t.Agent.source):return this.Agent.isKindleFire=!0,"Kindle Fire HDX 7 4G";case/KFAPWI/gi.test(t.Agent.source):return this.Agent.isKindleFire=!0,"Kindle Fire HDX 8.9";case/KFAPWA/gi.test(t.Agent.source):return this.Agent.isKindleFire=!0,"Kindle Fire HDX 8.9 4G";default:return!1}},this.testCaptiveNetwork=function(){var t=this;return!0===/CaptiveNetwork/gi.test(t.Agent.source)&&(t.Agent.isCaptive=!0,t.Agent.isMac=!0,t.Agent.platform="Apple Mac","CaptiveNetwork")},this.testMobile=function(){var t=this;switch(!0){case t.Agent.isWindows:case t.Agent.isLinux:case t.Agent.isMac:case t.Agent.isChromeOS:t.Agent.isDesktop=!0;break;case t.Agent.isAndroid:case t.Agent.isSamsung:t.Agent.isMobile=!0,t.Agent.isDesktop=!1}switch(!0){case t.Agent.isiPad:case t.Agent.isiPod:case t.Agent.isiPhone:case t.Agent.isBada:case t.Agent.isBlackberry:case t.Agent.isAndroid:case t.Agent.isWindowsPhone:t.Agent.isMobile=!0,t.Agent.isDesktop=!1}/mobile/i.test(t.Agent.source)&&(t.Agent.isMobile=!0,t.Agent.isDesktop=!1)},this.testTablet=function(){var t=this;switch(!0){case t.Agent.isiPad:case t.Agent.isAndroidTablet:case t.Agent.isKindleFire:t.Agent.isTablet=!0}/tablet/i.test(t.Agent.source)&&(t.Agent.isTablet=!0)},this.testNginxGeoIP=function(t){var n=this;Object.keys(t).forEach(function(i){/^GEOIP/i.test(i)&&(n.Agent.geoIp[i]=t[i])})},this.testBot=function(){var t=this,n=Iu.exec(t.Agent.source.toLowerCase());n?t.Agent.isBot=n[1]:t.Agent.isAuthoritative||(t.Agent.isBot=/bot/i.test(t.Agent.source))},this.testSmartTV=function(){var t=new RegExp("smart-tv|smarttv|googletv|appletv|hbbtv|pov_tv|netcast.tv","gi").exec(this.Agent.source.toLowerCase());t&&(this.Agent.isSmartTV=t[1])},this.testAndroidTablet=function(){var t=this;t.Agent.isAndroid&&!/mobile/i.test(t.Agent.source)&&(t.Agent.isAndroidTablet=!0)},this.testTouchSupport=function(){this.Agent.isTouchScreen="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0},this.getLaguage=function(){this.Agent.language=(navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||"").toLowerCase()},this.getColorDepth=function(){this.Agent.colorDepth=screen.colorDepth||-1},this.getScreenResolution=function(){this.Agent.resolution=[screen.availWidth,screen.availHeight]},this.getPixelDepth=function(){this.Agent.pixelDepth=screen.pixelDepth||-1},this.getCPU=function(){this.Agent.cpuCores=navigator.hardwareConcurrency||-1},this.reset=function(){var t=this;for(var n in t.DefaultAgent)t.DefaultAgent.hasOwnProperty(n)&&(t.Agent[n]=t.DefaultAgent[n]);return t},this.parse=function(t){t=t||navigator.userAgent;var n=new Nu;return n.Agent.source=t.replace(/^\s*/,"").replace(/\s*$/,""),n.Agent.os=n.getOS(n.Agent.source),n.Agent.platform=n.getPlatform(n.Agent.source),n.Agent.browser=n.getBrowser(n.Agent.source),n.Agent.version=n.getBrowserVersion(n.Agent.source),n.testBot(),n.testSmartTV(),n.testMobile(),n.testAndroidTablet(),n.testTablet(),n.testCompatibilityMode(),n.testSilk(),n.testKindleFire(),n.testCaptiveNetwork(),n.testTouchSupport(),n.getLaguage(),n.getColorDepth(),n.getPixelDepth(),n.getScreenResolution(),n.getCPU(),n.Agent},this.get=function(t){var n=this.parse(),i=[];for(var r in this.options)this.options.hasOwnProperty(r)&&!0===this.options[r]&&i.push(n[r]);t&&i.push(t),!this.options.resolution&&n.isMobile&&i.push(n.resolution);var e=n.hashMD5(i.join(":"));return[e.slice(0,8),e.slice(8,12),"4"+e.slice(12,15),"b"+e.slice(15,18),e.slice(20)].join("-")},this.Agent=this.DefaultAgent,this};let Fu;if("undefined"==typeof navigator)Fu="nodejs_env";else{const t=(new Nu).parse(),n=[t.language,t.platform,t.os,t.cpuCores,t.colorDepth];Fu=t.hashMD5(n.join(":"))}var Wu=Fu;const Bu=t=>yu.default("sha256").update(t).digest("hex"),Cu=()=>{let t=new Uint8Array(24);return pu.default(t),t.join("")};class Du{constructor(t,n){this.plugin=t,this.timeout=n,this.uuid=null,this.socket=null,this.connected=!1,this.paired=!1,this.openRequests=[],this.pairingPromise=null,this.eventHandlers={},this.appkey=Uu.getAppKey(),this.appkey||(this.appkey="appkey:"+Cu())}addEventHandler(t,n){n||(n="app"),this.eventHandlers[n]=t}removeEventHandler(t){t||(t="app"),delete this.eventHandlers[t]}link(t=!0,n=null,i=null){return this.uuid=n,new Promise(async n=>{const r=()=>{this.socket.onmessage=e=>{if(-1===e.data.indexOf("42/scatter"))return!1;const[s,o]=JSON.parse(e.data.replace("42/scatter,",""));if("pong"!==s){if("ping"===s)return this.socket.send('42/scatter,["pong"]');switch(s){case"paired":return t(o);case"rekey":return n();case"api":return i(o);case"event":return r(o)}}};const t=t=>{if(this.paired=t,this.paired){const t=Uu.getAppKey(),n=this.appkey.indexOf("appkey:")>-1?Bu(this.appkey):this.appkey;t&&t===n||(Uu.setAppKey(n),this.appkey=Uu.getAppKey())}this.pairingPromise.resolve(t)},n=()=>{this.appkey="appkey:"+Cu(),this.send("rekeyed",{data:{appkey:this.appkey,origin:this.getOrigin()},plugin:this.plugin})},i=t=>{try{t=JSON.parse(t)}catch(i){}const n=this.openRequests.find(n=>n.id===t.id);n&&(this.openRequests=this.openRequests.filter(n=>n.id!==t.id),"object"==typeof t.result&&null!==t.result&&t.result.hasOwnProperty("isError")?n.reject(t.result):n.resolve(t.result))},r=({event:t,payload:n})=>{Object.keys(this.eventHandlers).length&&Object.keys(this.eventHandlers).map(i=>{this.eventHandlers[i](t,n)})}},e=(t,n)=>i||(n?`local.get-scatter.com:${t}`:`127.0.0.1:${t}`),s=await new Promise(async n=>{if(i)return n([50006]);const r=(t,n)=>fetch(t).then(t=>t.text()).then(t=>n("scatter"===t)).catch(()=>n(!1));let s=[],o=!1;const u=(i=null)=>{o||(o=!0,null!==i&&s.push(i),n((s.length?s:[50006,50005]).filter(n=>!(!t&&n%2)).sort((t,n)=>n%2?t%2?0:-1:1)))};await Promise.all([...new Array(5).keys()].map(async n=>{if(o)return;const i=50005+1500*n;return await r("https://"+e(i+1,!0),t=>t?u(i+1):null),t&&await r("http://"+e(i,!1),t=>t?u(i):null),!0})),u()}),o=t=>new Promise(n=>{const i=!(t%2),r=e(t,i),s=i?"wss://":"ws://",o=new wu.default(`${s}${r}/socket.io/?EIO=3&transport=websocket`);o.onerror=()=>n(!1),o.onopen=()=>n(o)});let u=!1;for(let t=0;t<s.length;t++){if(u)continue;const i=await o(s[t]);if(i){u=!0,this.socket=i,this.send(),this.connected=!0,r(),this.pairingPromise=null,this.pair(!0).then(()=>n(!0));break}}})}isConnected(){return this.socket&&1===this.socket.readyState}isPaired(){return this.paired}disconnect(){return this.socket&&this.socket.close(),!0}sendApiRequest(t){return new Promise((n,i)=>{if("identityFromPermissions"===t.type&&!this.paired)return n(!1);this.pair().then(()=>{if(!this.paired)return i({code:"not_paired",message:"The user did not allow this app to connect to their Scatter"});t.id=Cu(),t.appkey=this.appkey,t.nonce=Uu.getNonce()||0;const r=Cu();t.nextNonce=Bu(r),Uu.setNonce(r),t.hasOwnProperty("payload")&&!t.payload.hasOwnProperty("origin")&&(t.payload.origin=this.getOrigin()),this.openRequests.push(Object.assign(t,{resolve:n,reject:i})),this.send("api",{data:t,plugin:this.plugin})})})}pair(t=!1){return new Promise((n,i)=>{this.pairingPromise={resolve:n,reject:i},this.send("pair",{data:{appkey:this.appkey,origin:this.getOrigin(),passthrough:t},plugin:this.plugin})})}send(t=null,n=null){null===t&&null===n?this.socket.send("40/scatter"):this.socket.send("42/scatter,"+JSON.stringify([t,Object.assign(n,{device:Wu,uuid:this.uuid})]))}getOrigin(){return Du.getOriginOrPlugin(this.plugin)}static getOriginOrPlugin(t){let n;return n="undefined"!=typeof location&&location.hasOwnProperty("hostname")&&location.hostname.length&&"localhost"!==location.hostname?location.hostname:t,"www."===n.substr(0,4)&&(n=n.replace("www.","")),n}}class Lu extends ku{constructor(t,n){super("LocalSocket",_u),this.name="LocalSocket",this.context=t,this.holderFns=n}connect(t,n={}){return new Promise(i=>{if(!t||!t.length)throw new Error("You must specify a name for this connection");n=Object.assign({linkTimeout:3e3,allowHttp:!0},n),this.socketService=new Du(t,n.linkTimeout),this.socketService.link(n.allowHttp).then(async t=>t?(this.holderFns.get().isExtension=!1,this.holderFns.get().wallet||(this.holderFns.get().wallet=this.name),i(this.socketService)):i(!1))})}async runAfterInterfacing(){return this.holderFns.get().addEventHandler((t,n)=>this.eventHandler(t,n),"internal"),this.holderFns.get().identity=await this.holderFns.get().getIdentityFromPermissions(),!0}methods(){return xu.getMethods(this,()=>this.socketService)}async eventHandler(t,n){switch(t){case Ju.Disconnected:this.holderFns.get().identity=null;break;case Ju.LoggedOut:this.holderFns.get().identity=await this.holderFns.get().getIdentityFromPermissions()}}}class Ku extends ku{constructor(t,n){super("RelaySocket",_u),this.name="RelaySocket",this.context=t,this.holderFns=n}connect(t,n={}){return new Promise(async i=>{if(!t||!t.length)throw new Error("You must specify a name for this connection");n=Object.assign({linkTimeout:3e3,allowHttp:!0},n);const r=await fetch(`https://relay.get-scatter.com:443/app/connect/${Wu}`).then(t=>200===t.status?t.json():null);if(!r)return i(!1);this.socketService=new Du(t,n.linkTimeout),this.socketService.link(n.allowHttp,r,"relaysock.get-scatter.com:443").then(async t=>t?(this.holderFns.get().isExtension=!1,this.holderFns.get().wallet||(this.holderFns.get().wallet=this.name),i(this.socketService)):i(!1))})}async runAfterInterfacing(){return this.holderFns.get().identity=await this.holderFns.get().getIdentityFromPermissions(),!0}methods(){return Lu.getMethods(this)}async eventHandler(t,n){switch(t){case Ju.Disconnected:this.holderFns.get().identity=null;break;case Ju.LoggedOut:this.holderFns.get().identity=await this.holderFns.get().getIdentityFromPermissions()}}}let Hu=!1;"undefined"!=typeof window&&"undefined"!=typeof document&&(void 0!==window.scatter?Hu=!0:document.addEventListener("scatterLoaded",()=>Hu=!0));const Xu=async(t=null,n=0)=>new Promise(i=>(t||(t=i),Hu?t(!0):n>5?t(!1):void setTimeout(()=>Xu(t,n+1),100)));class qu extends ku{constructor(t,n){super("InjectedWallet",_u),this.name="InjectedWallet",this.context=t,this.holderFns=n}async connect(){return new Promise(async t=>{await Xu()&&(this.holderFns&&!this.holderFns.get().wallet&&(this.holderFns.get().wallet=this.name),t("injection"))})}async runBeforeInterfacing(){const t=this.context.network;if(t){const n=window.scatter.getIdentity.bind(window.scatter),i=window.scatter.useIdentity.bind(window.scatter);window.scatter.getIdentity=r=>n(r||{accounts:[t]}).then(t=>(this.holderFns.get().identity=t,i(t),t));const r=window.scatter.suggestNetwork.bind(window.scatter);window.scatter.suggestNetwork=n=>r(n||t)}return this.holderFns.get().wallet===this.name&&(window.scatter.wallet=this.name),this.holderFns.set(window.scatter),this.context=this.holderFns.get(),!0}async runAfterInterfacing(){return this.context.isExtension=!0,this.context.connect=this.connect,!0}methods(){return{}}}const $u=new class{constructor(){this.plugins=[]}loadPlugin(t){this.plugin(t.name)||this.plugins.push(t)}wallets(){return this.plugins.filter(t=>t.type===_u)}signatureProviders(){return this.plugins.filter(t=>t.type===gu)}supportedBlockchains(){return this.signatureProviders().map(t=>name)}plugin(t){return this.plugins.find(n=>n.name===t)}async endorsedNetworks(){return await Promise.all(this.signatureProviders().map(async t=>await t.getEndorsedNetwork()))}},Ju={Disconnected:"dced",LoggedOut:"logout"};let Vu=null,Gu=[],Yu={},Zu=new Proxy(new class{constructor(t){this.scatter=t}plugins(...t){this.scatter.isExtension||t.map(t=>this.scatter.loadPlugin(t))}connect(...t){return this.scatter.connect(...t)}catchAll(...t){}}(new class{constructor(){this.identity=null,this.network=null,$u.loadPlugin(new Ku(this,Yu)),$u.loadPlugin(new Lu(this,Yu)),$u.loadPlugin(new Ru(this,Yu)),$u.loadPlugin(new qu(this,Yu))}loadPlugin(t){if(!t.isValid())throw new Error(`${t.name} doesn't seem to be a valid ScatterJS plugin.`);$u.loadPlugin(t),t.type===gu&&(this[t.name]=t.signatureProvider(()=>{if(!Yu.get().identity)throw new Error("No Identity")},()=>Yu.get().identity),this[t.name+"Hook"]=t.hookProvider,"function"==typeof t.multiHook&&(this[t.name+"MultiHook"]=t.multiHook),Gu.push(t.setSocketService)),t.type===_u&&t.init(this,Yu,Gu)}async connect(t,n){return new Promise(async i=>{n||(n={}),this.network=n.hasOwnProperty("network")?n.network:null;const r=$u.wallets();Vu&&(Vu.disconnect(),Vu=null);let e=!1,s=[];for(let o=0;o<r.length;o++){if(e)return;const u=r[o];s.push(Promise.race([u.connect(t,n).then(async t=>{t&&("injection"!==t&&(Vu=t,Gu.map(n=>n(t))),"function"==typeof u.runBeforeInterfacing&&await u.runBeforeInterfacing(),new Au(u.name,u.methods(),Yu.get()),"function"==typeof u.runAfterInterfacing&&await u.runAfterInterfacing(),Au.bindBasics(Yu.get()),e=!0,i(!0))}).catch(()=>!1),new Promise(t=>setTimeout(()=>t(!1),5e3))]))}await Promise.all(s),i(!1)})}}),{get:(t,n)=>void 0!==t[n]?t[n]:t.scatter[n]});Yu.set=t=>Zu.scatter=t,Yu.get=()=>Zu.scatter,"undefined"!=typeof window&&(window.ScatterJS=Zu),Zu.Plugin=ku,Zu.PluginTypes=Eu,Zu.Blockchains=mu,Zu.Network=Pu,Zu.Token=bu,Zu.SocketService=Du,Zu.EVENTS=Ju,Zu.WalletInterface=Au,Zu.WALLET_METHODS=Su;let Qu=Du;class ta extends ku{constructor(){super(mu.EOS,gu)}setSocketService(t){Qu=t}hookProvider(t,n=null){return t=Pu.fromJson(t),{requiredFields:{},getAvailableKeys:async()=>await Qu.sendApiRequest({type:"identityFromPermissions",payload:{}}).then(t=>t?t.accounts.filter(t=>t.blockchain===mu.EOS).map(t=>t.publicKey):[]),sign:async i=>{const r=n?n():{};return i.serializedTransaction=du.Buffer.from(i.serializedTransaction).toString("hex"),new Promise(async(n,e)=>{Qu.sendApiRequest({type:"requestSignature",payload:{transaction:i,blockchain:mu.EOS,network:t,requiredFields:r}}).then(t=>{n({signatures:t.signatures,serializedTransaction:du.Buffer.from(i.serializedTransaction,"hex")})}).catch(t=>e(t))})}}}multiHook(t,n){const i=this.eosHook(t);return Array.isArray(n)||(n=[n]),{getAvailableKeys:async()=>{try{const t=await i.getAvailableKeys();let r=[];return await Promise.all(n.map(async t=>(await t.getAvailableKeys().then(t=>{t.map(t=>r.push(t))}),!0))),t.concat(r)}catch(t){throw new Error(t)}},sign:async r=>{try{const e=du.Buffer.from(r.serializedTransaction,"hex"),s=async n=>({abis:r.abis,chainId:t.chainId,requiredKeys:await n.getAvailableKeys(),serializedTransaction:e}),o=t=>"object"==typeof t&&t.hasOwnProperty("signatures")?t.signatures:t,u=await i.sign(await s(i)).then(t=>o(t));let a=[];return await Promise.all(n.map(async t=>(await t.sign(await s(t)).then(t=>{o(t).map(t=>a.push(t))}),!0))),{signatures:u.concat(a),serializedTransaction:e}}catch(e){throw new Error(e)}}}}signatureProvider(...t){return t[0],(t,n,i={})=>{t=Pu.fromJson(t);let r={};const e=this.hookProvider(t,()=>r);return s=new n(Object.assign(i,{signatureProvider:e})),o={get:(t,n)=>(...i)=>{if(void 0===t[n])throw new Error(`${n} does not exist on the eosjs.Api() object.`);const e=i.find(t=>t.hasOwnProperty("requiredFields"));return r=e?e.requiredFields:{},t[n](...i)}},new Proxy(s,o);var s,o}}}"undefined"!=typeof window&&(window.ScatterEOS=ta),Rt.Blockchains=mu,Rt.EVENTS=Ju,Rt.Network=Pu,Rt.Plugin=ku,Rt.PluginTypes=Eu;var na=Rt.ScatterEOS=ta,ia=Rt.ScatterJS=Zu;async function ra(t){ia.plugins(new na);const n=new URL(t.chain.url),i="https"===n.protocol.replace(":","")?"https":"http",r=ia.Network.fromJson({blockchain:t.chain.name,chainId:String(t.chain.id),host:n.hostname,port:n.port?Number(n.port):"https"===i?443:80,protocol:i});if(!(await ia.connect(t.appName,{network:r})))throw new Error("Unable to connect with Scatter wallet");const e=new Ot(r.fullhost());e.getRequiredKeys=async()=>[];const s=ia.eos(r,Et,{rpc:e});return{scatter:ia,connector:s}}async function ea(r){if(!r.ui)throw new Error("No UI available");const{scatter:e}=await ra(r),s=await e.login();if(!s||!s.accounts)throw new Error("Unable to retrieve account from Scatter");const o=s.accounts[0];let u;if(o.chainId)u=o.chainId;else{if(!o.blockchain||!Object.keys(t).includes(o.blockchain.toUpperCase()))throw new Error("Unknown chain");u=t[o.blockchain.toUpperCase()].id}return{chain:i.from(u),permissionLevel:n.from(`${o.name}@${o.authority}`)}}async function sa(t){if(void 0===t.session)throw new Error("Unknown session");const{scatter:n}=await ra({appName:t.appName,chain:t.session.chain});await n.logout()}async function oa(t,n){if(!n.ui)throw new Error("No UI available");const{scatter:i,connector:u}=await ra(n),a=await i.checkLogin();if(!a||!a.accounts)throw new Error("Please login first");const f=r.encode({object:t.transaction}),c=await u.deserializeTransactionWithActions(f.array),h=await u.transact(c,{broadcast:!1});if(!h.serializedTransaction)throw new e("User Canceled request");const l=r.decode({data:h.serializedTransaction,type:s}),d=await o.create({transaction:l},n.esrOptions),v=await d.fetchAbis(n.abiCache),w=d.resolve(v,n.permissionLevel);return{signatures:h.signatures,resolved:w}}Rt.SocketService=Du,Rt.WALLET_METHODS=Su,Rt.WalletInterface=Au;export{ra as getScatter,ea as handleLogin,sa as handleLogout,oa as handleSignatureRequest};
