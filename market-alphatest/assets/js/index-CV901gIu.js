function e(){return be||(be=1,Pe.exports=(ye||(ye=1,function(e){function t(e,t){var s=e.length;e.push(t);e:for(;0<s;){var a=s-1>>>1,i=e[a];if(!(0<n(i,t)))break e;e[a]=t,e[s]=i,s=a}}function s(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],s=e.pop();if(s!==t){e[0]=s;e:for(var a=0,i=e.length,r=i>>>1;a<r;){var l=2*(a+1)-1,o=e[l],c=l+1,d=e[c];if(0>n(o,s))c<i&&0>n(d,o)?(e[a]=d,e[c]=s,a=c):(e[a]=o,e[l]=s,a=l);else{if(!(c<i&&0>n(d,s)))break e;e[a]=d,e[c]=s,a=c}}}return t}function n(e,t){var s=e.sortIndex-t.sortIndex;return 0!==s?s:e.id-t.id}function i(e){for(var n=s(f);null!==n;){if(null===n.callback)a(f);else{if(!(n.startTime<=e))break;a(f),n.sortIndex=n.expirationTime,t(p,n)}n=s(f)}}function r(e){if(b=!1,i(e),!y)if(null!==s(p))y=!0,S||(S=!0,m());else{var t=s(f);null!==t&&c(r,t.startTime-e)}}function l(){return!(!N&&e.unstable_now()-P<A)}function o(){if(N=!1,S){var t=e.unstable_now();P=t;var n=!0;try{e:{y=!1,b&&(b=!1,k(C),C=-1),j=!0;var o=v;try{t:{for(i(t),g=s(p);null!==g&&!(g.expirationTime>t&&l());){var d=g.callback;if("function"==typeof d){g.callback=null,v=g.priorityLevel;var u=d(g.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof u){g.callback=u,i(t),n=!0;break t}g===s(p)&&a(p),i(t)}else a(p);g=s(p)}if(null!==g)n=!0;else{var h=s(f);null!==h&&c(r,h.startTime-t),n=!1}}break e}finally{g=null,v=o,j=!1}n=void 0}}finally{n?m():S=!1}}}function c(t,s){C=w(function(){t(e.unstable_now())},s)}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var d=performance;e.unstable_now=function(){return d.now()}}else{var u=Date,h=u.now();e.unstable_now=function(){return u.now()-h}}var m,p=[],f=[],x=1,g=null,v=3,j=!1,y=!1,b=!1,N=!1,w="function"==typeof setTimeout?setTimeout:null,k="function"==typeof clearTimeout?clearTimeout:null,_="undefined"!=typeof setImmediate?setImmediate:null,S=!1,C=-1,A=5,P=-1;if("function"==typeof _)m=function(){_(o)};else if("undefined"!=typeof MessageChannel){var T=new MessageChannel,E=T.port2;T.port1.onmessage=o,m=function(){E.postMessage(null)}}else m=function(){w(o,0)};e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_next=function(e){switch(v){case 1:case 2:case 3:var t=3;break;default:t=v}var s=v;v=t;try{return e()}finally{v=s}},e.unstable_requestPaint=function(){N=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var s=v;v=e;try{return t()}finally{v=s}},e.unstable_scheduleCallback=function(a,n,i){var l=e.unstable_now();switch(i="object"==typeof i&&null!==i&&"number"==typeof(i=i.delay)&&0<i?l+i:l,a){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return a={id:x++,callback:n,priorityLevel:a,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>l?(a.sortIndex=i,t(f,a),null===s(p)&&a===s(f)&&(b?(k(C),C=-1):b=!0,c(r,i-l))):(a.sortIndex=o,t(p,a),y||j||(y=!0,S||(S=!0,m()))),a},e.unstable_shouldYield=l,e.unstable_wrapCallback=function(e){var t=v;return function(){var s=v;v=t;try{return e.apply(this,arguments)}finally{v=s}}}}(Te)),Te)),Pe.exports}function t(){function t(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function a(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(s=t.return),e=t.return}while(e)}return 3===t.tag?s:null}function n(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function i(e){if(a(e)!==e)throw Error(t(188))}function r(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=r(e)))return t;e=e.sibling}return null}function l(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=El&&e[El]||e["@@iterator"])?e:null}function o(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===Fl?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case vl:return"Fragment";case yl:return"Profiler";case jl:return"StrictMode";case _l:return"Suspense";case Sl:return"SuspenseList";case Pl:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case gl:return"Portal";case wl:return(e.displayName||"Context")+".Provider";case Nl:return(e._context.displayName||"Context")+".Consumer";case kl:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Cl:return null!==(t=e.displayName||null)?t:o(e.type)||"Memo";case Al:t=e._payload,e=e._init;try{return o(e(t))}catch(s){}}return null}function c(e){return{current:e}}function d(e){0>Wl||(e.current=Rl[Wl],Rl[Wl]=null,Wl--)}function u(e,t){Wl++,Rl[Wl]=e.current,e.current=t}function h(e,t){switch(u(zl,t),u(Dl,e),u(Ol,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?or(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=cr(t=or(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}d(Ol),u(Ol,e)}function m(){d(Ol),d(Dl),d(zl)}function p(e){null!==e.memoizedState&&u(Bl,e);var t=Ol.current,s=cr(t,e.type);t!==s&&(u(Dl,e),u(Ol,s))}function f(e){Dl.current===e&&(d(Ol),d(Dl)),Bl.current===e&&(d(Bl),yh._currentValue=Ml)}function x(e){if("function"==typeof to&&so(e),no&&"function"==typeof no.setStrictMode)try{no.setStrictMode(ao,e)}catch(t){}}function g(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function v(e,t,s){var a=e.pendingLanes;if(0===a)return 0;var n=0,i=e.suspendedLanes,r=e.pingedLanes;e=e.warmLanes;var l=134217727&a;return 0!==l?0!==(a=l&~i)?n=g(a):0!==(r&=l)?n=g(r):s||0!==(s=l&~e)&&(n=g(s)):0!==(l=a&~i)?n=g(l):0!==r?n=g(r):s||0!==(s=a&~e)&&(n=g(s)),0===n?0:0!==t&&t!==n&&0===(t&i)&&((i=n&-n)>=(s=t&-t)||32===i&&4194048&s)?t:n}function j(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function y(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function b(){var e=oo;return!(4194048&(oo<<=1))&&(oo=256),e}function N(){var e=co;return!(62914560&(co<<=1))&&(co=4194304),e}function w(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function k(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function _(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-io(t);e.entangledLanes|=t,e.entanglements[a]=1073741824|e.entanglements[a]|4194090&s}function S(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var a=31-io(s),n=1<<a;n&t|e[a]&t&&(e[a]|=t),s&=~n}}function C(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function A(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function P(){var e=Ll.p;return 0!==e?e:void 0===(e=window.event)?32:Kr(e.type)}function T(e){delete e[ho],delete e[mo],delete e[fo],delete e[xo],delete e[go]}function E(e){var t=e[ho];if(t)return t;for(var s=e.parentNode;s;){if(t=s[po]||s[ho]){if(s=t.alternate,null!==t.child||null!==s&&null!==s.child)for(e=gr(e);null!==e;){if(s=e[ho])return s;e=gr(e)}return t}s=(e=s).parentNode}return null}function F(e){if(e=e[ho]||e[po]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function I(e){var s=e.tag;if(5===s||26===s||27===s||6===s)return e.stateNode;throw Error(t(33))}function $(e){var t=e[vo];return t||(t=e[vo]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function L(e){e[jo]=!0}function M(e,t){O(e,t),O(e+"Capture",t)}function O(e,t){for(bo[e]=t,e=0;e<t.length;e++)yo.add(t[e])}function D(e,t,s){if(n=t,Ul.call(ko,n)||!Ul.call(wo,n)&&(No.test(n)?ko[n]=!0:(wo[n]=!0,0)))if(null===s)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var a=t.toLowerCase().slice(0,5);if("data-"!==a&&"aria-"!==a)return void e.removeAttribute(t)}e.setAttribute(t,""+s)}var n}function z(e,t,s){if(null===s)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+s)}}function B(e,t,s,a){if(null===a)e.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(s)}e.setAttributeNS(t,s,""+a)}}function U(e){if(void 0===cl)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);cl=t&&t[1]||"",dl=-1<s.stack.indexOf("\n    at")?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+cl+e+dl}function X(e,t){if(!e||_o)return"";_o=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var s=function(){throw Error()};if(Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(s,[])}catch(n){var a=n}Reflect.construct(e,[],s)}else{try{s.call()}catch(i){a=i}e.call(s.prototype)}}else{try{throw Error()}catch(r){a=r}(s=e())&&"function"==typeof s.catch&&s.catch(function(){})}}catch(l){if(l&&a&&"string"==typeof l.stack)return[l.stack,a.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=a.DetermineComponentFrameRoot(),r=i[0],l=i[1];if(r&&l){var o=r.split("\n"),c=l.split("\n");for(n=a=0;a<o.length&&!o[a].includes("DetermineComponentFrameRoot");)a++;for(;n<c.length&&!c[n].includes("DetermineComponentFrameRoot");)n++;if(a===o.length||n===c.length)for(a=o.length-1,n=c.length-1;1<=a&&0<=n&&o[a]!==c[n];)n--;for(;1<=a&&0<=n;a--,n--)if(o[a]!==c[n]){if(1!==a||1!==n)do{if(a--,0>--n||o[a]!==c[n]){var d="\n"+o[a].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}}while(1<=a&&0<=n);break}}}finally{_o=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?U(s):""}function q(e){switch(e.tag){case 26:case 27:case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 15:return X(e.type,!1);case 11:return X(e.type.render,!1);case 1:return X(e.type,!0);case 31:return U("Activity");default:return""}}function H(e){try{var t="";do{t+=q(e),e=e.return}while(e);return t}catch(s){return"\nError generating stack: "+s.message+"\n"+s.stack}}function J(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==s&&"function"==typeof s.get&&"function"==typeof s.set){var n=s.get,i=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(e){a=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),a="";return e&&(a=V(e)?e.checked?"true":"false":e.value),(e=a)!==s&&(t.setValue(e),!0)}function K(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e){return e.replace(So,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Z(e,t,s,a,n,i,r,l){e.name="",null!=r&&"function"!=typeof r&&"symbol"!=typeof r&&"boolean"!=typeof r?e.type=r:e.removeAttribute("type"),null!=t?"number"===r?(0===t&&""===e.value||e.value!=t)&&(e.value=""+J(t)):e.value!==""+J(t)&&(e.value=""+J(t)):"submit"!==r&&"reset"!==r||e.removeAttribute("value"),null!=t?te(e,r,J(t)):null!=s?te(e,r,J(s)):null!=a&&e.removeAttribute("value"),null==n&&null!=i&&(e.defaultChecked=!!i),null!=n&&(e.checked=n&&"function"!=typeof n&&"symbol"!=typeof n),null!=l&&"function"!=typeof l&&"symbol"!=typeof l&&"boolean"!=typeof l?e.name=""+J(l):e.removeAttribute("name")}function ee(e,t,s,a,n,i,r,l){if(null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i&&(e.type=i),null!=t||null!=s){if(("submit"===i||"reset"===i)&&null==t)return;s=null!=s?""+J(s):"",t=null!=t?""+J(t):s,l||t===e.value||(e.value=t),e.defaultValue=t}a="function"!=typeof(a=null!=a?a:n)&&"symbol"!=typeof a&&!!a,e.checked=l?e.checked:!!a,e.defaultChecked=!!a,null!=r&&"function"!=typeof r&&"symbol"!=typeof r&&"boolean"!=typeof r&&(e.name=r)}function te(e,t,s){"number"===t&&K(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function se(e,t,s,a){if(e=e.options,t){t={};for(var n=0;n<s.length;n++)t["$"+s[n]]=!0;for(s=0;s<e.length;s++)n=t.hasOwnProperty("$"+e[s].value),e[s].selected!==n&&(e[s].selected=n),n&&a&&(e[s].defaultSelected=!0)}else{for(s=""+J(s),t=null,n=0;n<e.length;n++){if(e[n].value===s)return e[n].selected=!0,void(a&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function ae(e,t,s){null==t||((t=""+J(t))!==e.value&&(e.value=t),null!=s)?e.defaultValue=null!=s?""+J(s):"":e.defaultValue!==t&&(e.defaultValue=t)}function ne(e,s,a,n){if(null==s){if(null!=n){if(null!=a)throw Error(t(92));if(Il(n)){if(1<n.length)throw Error(t(93));n=n[0]}a=n}null==a&&(a=""),s=a}a=J(s),e.defaultValue=a,(n=e.textContent)===a&&""!==n&&null!==n&&(e.value=n)}function ie(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&3===s.nodeType)return void(s.nodeValue=t)}e.textContent=t}function re(e,t,s){var a=0===t.indexOf("--");null==s||"boolean"==typeof s||""===s?a?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":a?e.setProperty(t,s):"number"!=typeof s||0===s||Co.has(t)?"float"===t?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function le(e,s,a){if(null!=s&&"object"!=typeof s)throw Error(t(62));if(e=e.style,null!=a){for(var n in a)!a.hasOwnProperty(n)||null!=s&&s.hasOwnProperty(n)||(0===n.indexOf("--")?e.setProperty(n,""):"float"===n?e.cssFloat="":e[n]="");for(var i in s)n=s[i],s.hasOwnProperty(i)&&a[i]!==n&&re(e,i,n)}else for(var r in s)s.hasOwnProperty(r)&&re(e,r,s[r])}function oe(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function ce(e){return Po.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function de(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ue(e){var s=F(e);if(s&&(e=s.stateNode)){var a=e[mo]||null;e:switch(e=s.stateNode,s.type){case"input":if(Z(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,"radio"===a.type&&null!=s){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Q(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var n=a[s];if(n!==e&&n.form===e.form){var i=n[mo]||null;if(!i)throw Error(t(90));Z(n,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(s=0;s<a.length;s++)(n=a[s]).form===e.form&&Y(n)}break e;case"textarea":ae(e,a.value,a.defaultValue);break e;case"select":null!=(s=a.value)&&se(e,!!a.multiple,s,!1)}}}function he(e,t,s){if(Io)return e(t,s);Io=!0;try{return e(t)}finally{if(Io=!1,(null!==Eo||null!==Fo)&&(ri(),Eo&&(t=Eo,e=Fo,Fo=Eo=null,ue(t),e)))for(t=0;t<e.length;t++)ue(e[t])}}function me(e,s){var a=e.stateNode;if(null===a)return null;var n=a[mo]||null;if(null===n)return null;a=n[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(a&&"function"!=typeof a)throw Error(t(231,s,typeof a));return a}function pe(){if(Bo)return Bo;var e,t,s=zo,a=s.length,n="value"in Do?Do.value:Do.textContent,i=n.length;for(e=0;e<a&&s[e]===n[e];e++);var r=a-e;for(t=1;t<=r&&s[a-t]===n[i-t];t++);return Bo=n.slice(e,1<t?1-t:void 0)}function fe(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function xe(){return!0}function ge(){return!1}function ve(e){function t(t,s,a,n,i){for(var r in this._reactName=t,this._targetInst=a,this.type=s,this.nativeEvent=n,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(r)&&(t=e[r],this[r]=t?t(n):n[r]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?xe:ge,this.isPropagationStopped=ge,this}return pl(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=xe)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=xe)},persist:function(){},isPersistent:xe}),t}function je(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=sc[e])&&!!t[e]}function ye(){return je}function be(e,t){switch(e){case"keyup":return-1!==cc.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function we(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}function ke(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!gc[e.type]:"textarea"===t}function _e(e,t,s,a){Eo?Fo?Fo.push(a):Fo=[a]:Eo=a,0<(t=Qi(t,"onChange")).length&&(s=new Xo("onChange","change",null,s,a),e.push({event:s,listeners:t}))}function Se(e){qi(e,0)}function Ce(e){if(Y(I(e)))return e}function Pe(e,t){if("change"===e)return t}function Te(){vc&&(vc.detachEvent("onpropertychange",Ee),jc=vc=null)}function Ee(e){if("value"===e.propertyName&&Ce(jc)){var t=[];_e(t,jc,e,de(e)),he(Se,t)}}function Fe(e,t,s){"focusin"===e?(Te(),jc=s,(vc=t).attachEvent("onpropertychange",Ee)):"focusout"===e&&Te()}function Ie(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ce(jc)}function $e(e,t){if("click"===e)return Ce(t)}function Le(e,t){if("input"===e||"change"===e)return Ce(t)}function Me(e,t){if(kc(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var n=s[a];if(!Ul.call(t,n)||!kc(e[n],t[n]))return!1}return!0}function Re(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function We(e,t){var s,a=Re(e);for(e=0;a;){if(3===a.nodeType){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Re(a)}}function Oe(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Oe(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function De(e){for(var t=K((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var s="string"==typeof t.contentWindow.location.href}catch(a){s=!1}if(!s)break;t=K((e=t.contentWindow).document)}return t}function ze(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Be(e,t,s){var a=s.window===s?s.document:9===s.nodeType?s:s.ownerDocument;Pc||null==Sc||Sc!==K(a)||("selectionStart"in(a=Sc)&&ze(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},Ac&&Me(Ac,a)||(Ac=a,0<(a=Qi(Cc,"onSelect")).length&&(t=new Xo("onSelect","select",null,t,s),e.push({event:t,listeners:a}),t.target=Sc)))}function Ue(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}function Xe(e){if(Ec[e])return Ec[e];if(!Tc[e])return e;var t,s=Tc[e];for(t in s)if(s.hasOwnProperty(t)&&t in Fc)return Ec[e]=s[t];return e}function qe(e,t){Dc.set(e,t),M(t,[e])}function He(e,t){if("object"==typeof e&&null!==e){var s=Bc.get(e);return void 0!==s?s:(t={value:e,source:t,stack:H(t)},Bc.set(e,t),t)}return{value:e,source:t,stack:H(t)}}function Je(){for(var e=Xc,t=qc=Xc=0;t<e;){var s=Uc[t];Uc[t++]=null;var a=Uc[t];Uc[t++]=null;var n=Uc[t];Uc[t++]=null;var i=Uc[t];if(Uc[t++]=null,null!==a&&null!==n){var r=a.pending;null===r?n.next=n:(n.next=r.next,r.next=n),a.pending=n}0!==i&&Ke(s,n,i)}}function Ve(e,t,s,a){Uc[Xc++]=e,Uc[Xc++]=t,Uc[Xc++]=s,Uc[Xc++]=a,qc|=a,e.lanes|=a,null!==(e=e.alternate)&&(e.lanes|=a)}function Ge(e,t,s,a){return Ve(e,t,s,a),Qe(e)}function Ye(e,t){return Ve(e,null,null,t),Qe(e)}function Ke(e,t,s){e.lanes|=s;var a=e.alternate;null!==a&&(a.lanes|=s);for(var n=!1,i=e.return;null!==i;)i.childLanes|=s,null!==(a=i.alternate)&&(a.childLanes|=s),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(n=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,n&&null!==t&&(n=31-io(s),null===(a=(e=i.hiddenUpdates)[n])?e[n]=[t]:a.push(t),t.lane=536870912|s),i):null}function Qe(e){if(50<Xu)throw Xu=0,qu=null,Error(t(185));for(var s=e.return;null!==s;)s=(e=s).return;return 3===e.tag?e.stateNode:null}function Ze(e,t,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function et(e,t,s,a){return new Ze(e,t,s,a)}function tt(e){return!(!(e=e.prototype)||!e.isReactComponent)}function st(e,t){var s=e.alternate;return null===s?((s=et(e.tag,t,e.key,e.mode)).elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=65011712&e.flags,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function at(e,t){e.flags&=65011714;var s=e.alternate;return null===s?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function nt(e,s,a,n,i,r){var l=0;if(n=e,"function"==typeof e)tt(e)&&(l=1);else if("string"==typeof e)l=function(e,t,s){if(1===s||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,a,Ol.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case Pl:return(e=et(31,a,s,i)).elementType=Pl,e.lanes=r,e;case vl:return it(a.children,i,r,s);case jl:l=8,i|=24;break;case yl:return(e=et(12,a,s,2|i)).elementType=yl,e.lanes=r,e;case _l:return(e=et(13,a,s,i)).elementType=_l,e.lanes=r,e;case Sl:return(e=et(19,a,s,i)).elementType=Sl,e.lanes=r,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case bl:case wl:l=10;break e;case Nl:l=9;break e;case kl:l=11;break e;case Cl:l=14;break e;case Al:l=16,n=null;break e}l=29,a=Error(t(130,null===e?"null":typeof e,"")),n=null}return(s=et(l,a,s,i)).elementType=e,s.type=n,s.lanes=r,s}function it(e,t,s,a){return(e=et(7,e,a,t)).lanes=s,e}function rt(e,t,s){return(e=et(6,e,null,t)).lanes=s,e}function lt(e,t,s){return(t=et(4,null!==e.children?e.children:[],e.key,t)).lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ot(e,t){Jc[Vc++]=Yc,Jc[Vc++]=Gc,Gc=e,Yc=t}function ct(e,t,s){Kc[Qc++]=ed,Kc[Qc++]=td,Kc[Qc++]=Zc,Zc=e;var a=ed;e=td;var n=32-io(a)-1;a&=~(1<<n),s+=1;var i=32-io(t)+n;if(30<i){var r=n-n%5;i=(a&(1<<r)-1).toString(32),a>>=r,n-=r,ed=1<<32-io(t)+n|s<<n|a,td=i+e}else ed=1<<i|s<<n|a,td=e}function dt(e){null!==e.return&&(ot(e,1),ct(e,1,0))}function ut(e){for(;e===Gc;)Gc=Jc[--Vc],Jc[Vc]=null,Yc=Jc[--Vc],Jc[Vc]=null;for(;e===Zc;)Zc=Kc[--Qc],Kc[Qc]=null,td=Kc[--Qc],Kc[Qc]=null,ed=Kc[--Qc],Kc[Qc]=null}function ht(e){throw vt(He(Error(t(418,"")),e)),ld}function mt(e){var t=e.stateNode,s=e.type,a=e.memoizedProps;switch(t[ho]=e,t[mo]=a,s){case"dialog":Hi("cancel",t),Hi("close",t);break;case"iframe":case"object":case"embed":Hi("load",t);break;case"video":case"audio":for(s=0;s<eh.length;s++)Hi(eh[s],t);break;case"source":Hi("error",t);break;case"img":case"image":case"link":Hi("error",t),Hi("load",t);break;case"details":Hi("toggle",t);break;case"input":Hi("invalid",t),ee(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0),G(t);break;case"select":Hi("invalid",t);break;case"textarea":Hi("invalid",t),ne(t,a.value,a.defaultValue,a.children),G(t)}"string"!=typeof(s=a.children)&&"number"!=typeof s&&"bigint"!=typeof s||t.textContent===""+s||!0===a.suppressHydrationWarning||sr(t.textContent,s)?(null!=a.popover&&(Hi("beforetoggle",t),Hi("toggle",t)),null!=a.onScroll&&Hi("scroll",t),null!=a.onScrollEnd&&Hi("scrollend",t),null!=a.onClick&&(t.onclick=ar),t=!0):t=!1,t||ht(e)}function pt(e){for(sd=e.return;sd;)switch(sd.tag){case 5:case 13:return void(rd=!1);case 27:case 3:return void(rd=!0);default:sd=sd.return}}function ft(e){if(e!==sd)return!1;if(!nd)return pt(e),nd=!0,!1;var s,a=e.tag;if((s=3!==a&&27!==a)&&((s=5===a)&&(s=!("form"!==(s=e.type)&&"button"!==s)||dr(e.type,e.memoizedProps)),s=!s),s&&ad&&ht(e),pt(e),13===a){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(t(317));e:{for(e=e.nextSibling,a=0;e;){if(8===e.nodeType)if("/$"===(s=e.data)){if(0===a){ad=xr(e.nextSibling);break e}a--}else"$"!==s&&"$!"!==s&&"$?"!==s||a++;e=e.nextSibling}ad=null}}else 27===a?(a=ad,hr(e.type)?(e=hh,hh=null,ad=e):ad=a):ad=sd?xr(e.stateNode.nextSibling):null;return!0}function xt(){ad=sd=null,nd=!1}function gt(){var e=id;return null!==e&&(null===Eu?Eu=e:Eu.push.apply(Eu,e),id=null),e}function vt(e){null===id?id=[e]:id.push(e)}function jt(e,t,s){u(od,t._currentValue),t._currentValue=s}function yt(e){e._currentValue=od.current,d(od)}function bt(e,t,s){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===s)break;e=e.return}}function Nt(e,s,a,n){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var r=i.dependencies;if(null!==r){var l=i.child;r=r.firstContext;e:for(;null!==r;){var o=r;r=i;for(var c=0;c<s.length;c++)if(o.context===s[c]){r.lanes|=a,null!==(o=r.alternate)&&(o.lanes|=a),bt(r.return,a,e),n||(l=null);break e}r=o.next}}else if(18===i.tag){if(null===(l=i.return))throw Error(t(341));l.lanes|=a,null!==(r=l.alternate)&&(r.lanes|=a),bt(l,a,e),l=null}else l=i.child;if(null!==l)l.return=i;else for(l=i;null!==l;){if(l===e){l=null;break}if(null!==(i=l.sibling)){i.return=l.return,l=i;break}l=l.return}i=l}}function wt(e,s,a,n){e=null;for(var i=s,r=!1;null!==i;){if(!r)if(524288&i.flags)r=!0;else if(262144&i.flags)break;if(10===i.tag){var l=i.alternate;if(null===l)throw Error(t(387));if(null!==(l=l.memoizedProps)){var o=i.type;kc(i.pendingProps.value,l.value)||(null!==e?e.push(o):e=[o])}}else if(i===Bl.current){if(null===(l=i.alternate))throw Error(t(387));l.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(yh):e=[yh])}i=i.return}null!==e&&Nt(s,e,a,n),s.flags|=262144}function kt(e){for(e=e.firstContext;null!==e;){if(!kc(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function _t(e){cd=e,dd=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function St(e){return At(cd,e)}function Ct(e,t){return null===cd&&_t(e),At(e,t)}function At(e,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},null===dd){if(null===e)throw Error(t(308));dd=s,e.dependencies={lanes:0,firstContext:s},e.flags|=524288}else dd=dd.next=s;return a}function Pt(){return{controller:new ud,data:new Map,refCount:0}}function Tt(e){e.refCount--,0===e.refCount&&hd(md,function(){e.controller.abort()})}function Et(){if(0===--xd&&null!==fd){null!==vd&&(vd.status="fulfilled");var e=fd;fd=null,gd=0,vd=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Ft(){var e=yd.current;return null!==e?e:fu.pooledCache}function It(e,t){u(yd,null===t?yd.current:t.pool)}function $t(){var e=Ft();return null===e?null:{parent:pd._currentValue,pool:e}}function Lt(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Mt(){}function Rt(e,s,a){switch(void 0===(a=e[a])?e.push(s):a!==s&&(s.then(Mt,Mt),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw Ot(e=s.reason),e;default:if("string"==typeof s.status)s.then(Mt,Mt);else{if(null!==(e=fu)&&100<e.shellSuspendCounter)throw Error(t(482));(e=s).status="pending",e.then(function(e){if("pending"===s.status){var t=s;t.status="fulfilled",t.value=e}},function(e){if("pending"===s.status){var t=s;t.status="rejected",t.reason=e}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw Ot(e=s.reason),e}throw _d=s,bd}}function Wt(){if(null===_d)throw Error(t(459));var e=_d;return _d=null,e}function Ot(e){if(e===bd||e===wd)throw Error(t(483))}function Dt(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zt(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Bt(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ut(e,t,s){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,2&pu){var n=a.pending;return null===n?t.next=t:(t.next=n.next,n.next=t),a.pending=t,t=Qe(e),Ke(e,null,s),t}return Ve(e,a,t,s),Qe(e)}function Xt(e,t,s){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&s)){var a=t.lanes;s|=a&=e.pendingLanes,t.lanes=s,S(e,s)}}function qt(e,t){var s=e.updateQueue,a=e.alternate;if(null!==a&&s===(a=a.updateQueue)){var n=null,i=null;if(null!==(s=s.firstBaseUpdate)){do{var r={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};null===i?n=i=r:i=i.next=r,s=s.next}while(null!==s);null===i?n=i=t:i=i.next=t}else n=i=t;return s={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:a.shared,callbacks:a.callbacks},void(e.updateQueue=s)}null===(e=s.lastBaseUpdate)?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Ht(){if(Cd){if(null!==vd)throw vd}}function Jt(e,t,s,a){Cd=!1;var n=e.updateQueue;Sd=!1;var i=n.firstBaseUpdate,r=n.lastBaseUpdate,l=n.shared.pending;if(null!==l){n.shared.pending=null;var o=l,c=o.next;o.next=null,null===r?i=c:r.next=c,r=o;var d=e.alternate;null!==d&&((l=(d=d.updateQueue).lastBaseUpdate)!==r&&(null===l?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=o))}if(null!==i){var u=n.baseState;for(r=0,d=c=o=null,l=i;;){var h=-536870913&l.lane,m=h!==l.lane;if(m?(gu&h)===h:(a&h)===h){0!==h&&h===gd&&(Cd=!0),null!==d&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var p=e,f=l;h=t;var x=s;switch(f.tag){case 1:if("function"==typeof(p=f.payload)){u=p.call(x,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=f.payload)?p.call(x,u,h):p))break e;u=pl({},u,h);break e;case 2:Sd=!0}}null!==(h=l.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=n.callbacks)?n.callbacks=[h]:m.push(h))}else m={lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(c=d=m,o=u):d=d.next=m,r|=h;if(null===(l=l.next)){if(null===(l=n.shared.pending))break;l=(m=l).next,m.next=null,n.lastBaseUpdate=m,n.shared.pending=null}}null===d&&(o=u),n.baseState=o,n.firstBaseUpdate=c,n.lastBaseUpdate=d,null===i&&(n.shared.lanes=0),_u|=r,e.lanes=r,e.memoizedState=u}}function Vt(e,s){if("function"!=typeof e)throw Error(t(191,e));e.call(s)}function Gt(e,t){var s=e.callbacks;if(null!==s)for(e.callbacks=null,e=0;e<s.length;e++)Vt(s[e],t)}function Yt(e,t){u(Pd,e=wu),u(Ad,t),wu=e|t.baseLanes}function Kt(){u(Pd,wu),u(Ad,Ad.current)}function Qt(){wu=Pd.current,d(Ad),d(Pd)}function Zt(){throw Error(t(321))}function es(e,t){if(null===t)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!kc(e[s],t[s]))return!1;return!0}function ts(e,t,s,a,n,i){return Td=i,Ed=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$l.H=null===e||null===e.memoizedState?Bd:Ud,Md=!1,i=s(a,n),Md=!1,Ld&&(i=as(t,s,a,n)),ss(e),i}function ss(e){$l.H=zd;var s=null!==Fd&&null!==Fd.next;if(Td=0,Id=Fd=Ed=null,$d=!1,Wd=0,Od=null,s)throw Error(t(300));null===e||tu||null!==(e=e.dependencies)&&kt(e)&&(tu=!0)}function as(e,s,a,n){Ed=e;var i=0;do{if(Ld&&(Od=null),Wd=0,Ld=!1,25<=i)throw Error(t(301));if(i+=1,Id=Fd=null,null!=e.updateQueue){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,null!=r.memoCache&&(r.memoCache.index=0)}$l.H=Xd,r=s(a,n)}while(Ld);return r}function ns(){var e=$l.H,t=e.useState()[0];return t="function"==typeof t.then?ds(t):t,e=e.useState()[0],(null!==Fd?Fd.memoizedState:null)!==e&&(Ed.flags|=1024),t}function is(){var e=0!==Rd;return Rd=0,e}function rs(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function ls(e){if($d){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}$d=!1}Td=0,Id=Fd=Ed=null,Ld=!1,Wd=Rd=0,Od=null}function os(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Id?Ed.memoizedState=Id=e:Id=Id.next=e,Id}function cs(){if(null===Fd){var e=Ed.alternate;e=null!==e?e.memoizedState:null}else e=Fd.next;var s=null===Id?Ed.memoizedState:Id.next;if(null!==s)Id=s,Fd=e;else{if(null===e){if(null===Ed.alternate)throw Error(t(467));throw Error(t(310))}e={memoizedState:(Fd=e).memoizedState,baseState:Fd.baseState,baseQueue:Fd.baseQueue,queue:Fd.queue,next:null},null===Id?Ed.memoizedState=Id=e:Id=Id.next=e}return Id}function ds(e){var t=Wd;return Wd+=1,null===Od&&(Od=[]),e=Rt(Od,e,t),t=Ed,null===(null===Id?t.memoizedState:Id.next)&&(t=t.alternate,$l.H=null===t||null===t.memoizedState?Bd:Ud),e}function us(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return ds(e);if(e.$$typeof===wl)return St(e)}throw Error(t(438,String(e)))}function hs(e){var t=null,s=Ed.updateQueue;if(null!==s&&(t=s.memoCache),null==t){var a=Ed.alternate;null!==a&&(null!==(a=a.updateQueue)&&(null!=(a=a.memoCache)&&(t={data:a.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===s&&(s={lastEffect:null,events:null,stores:null,memoCache:null},Ed.updateQueue=s),s.memoCache=t,void 0===(s=t.data[t.index]))for(s=t.data[t.index]=Array(e),a=0;a<e;a++)s[a]=Tl;return t.index++,s}function ms(e,t){return"function"==typeof t?t(e):t}function ps(e){return fs(cs(),Fd,e)}function fs(e,s,a){var n=e.queue;if(null===n)throw Error(t(311));n.lastRenderedReducer=a;var i=e.baseQueue,r=n.pending;if(null!==r){if(null!==i){var l=i.next;i.next=r.next,r.next=l}s.baseQueue=i=r,n.pending=null}if(r=e.baseState,null===i)e.memoizedState=r;else{var o=l=null,c=null,d=s=i.next,u=!1;do{var h=-536870913&d.lane;if(h!==d.lane?(gu&h)===h:(Td&h)===h){var m=d.revertLane;if(0===m)null!==c&&(c=c.next={lane:0,revertLane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),h===gd&&(u=!0);else{if((Td&m)===m){d=d.next,m===gd&&(u=!0);continue}h={lane:0,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(o=c=h,l=r):c=c.next=h,Ed.lanes|=m,_u|=m}h=d.action,Md&&a(r,h),r=d.hasEagerState?d.eagerState:a(r,h)}else m={lane:h,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(o=c=m,l=r):c=c.next=m,Ed.lanes|=h,_u|=h;d=d.next}while(null!==d&&d!==s);if(null===c?l=r:c.next=o,!kc(r,e.memoizedState)&&(tu=!0,u&&null!==(a=vd)))throw a;e.memoizedState=r,e.baseState=l,e.baseQueue=c,n.lastRenderedState=r}return null===i&&(n.lanes=0),[e.memoizedState,n.dispatch]}function xs(e){var s=cs(),a=s.queue;if(null===a)throw Error(t(311));a.lastRenderedReducer=e;var n=a.dispatch,i=a.pending,r=s.memoizedState;if(null!==i){a.pending=null;var l=i=i.next;do{r=e(r,l.action),l=l.next}while(l!==i);kc(r,s.memoizedState)||(tu=!0),s.memoizedState=r,null===s.baseQueue&&(s.baseState=r),a.lastRenderedState=r}return[r,n]}function gs(e,s,a){var n=Ed,i=cs(),r=nd;if(r){if(void 0===a)throw Error(t(407));a=a()}else a=s();var l=!kc((Fd||i).memoizedState,a);if(l&&(i.memoizedState=a,tu=!0),i=i.queue,Ds(2048,8,ys.bind(null,n,i,e),[e]),i.getSnapshot!==s||l||null!==Id&&1&Id.memoizedState.tag){if(n.flags|=2048,Rs(9,{destroy:void 0,resource:void 0},js.bind(null,n,i,a,s),null),null===fu)throw Error(t(349));r||124&Td||vs(n,s,a)}return a}function vs(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},null===(t=Ed.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Ed.updateQueue=t,t.stores=[e]):null===(s=t.stores)?t.stores=[e]:s.push(e)}function js(e,t,s,a){t.value=s,t.getSnapshot=a,bs(t)&&Ns(e)}function ys(e,t,s){return s(function(){bs(t)&&Ns(e)})}function bs(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!kc(e,s)}catch(a){return!0}}function Ns(e){var t=Ye(e,2);null!==t&&ti(t,e,2)}function ws(e){var t=os();if("function"==typeof e){var s=e;if(e=s(),Md){x(!0);try{s()}finally{x(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:e},t}function ks(e,t,s,a){return e.baseState=s,fs(e,Fd,"function"==typeof a?a:ms)}function _s(e,s,a,n,i){if(ua(e))throw Error(t(485));if(null!==(e=s.action)){var r={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){r.listeners.push(e)}};null!==$l.T?a(!0):r.isTransition=!1,n(r),null===(a=s.pending)?(r.next=s.pending=r,Ss(s,r)):(r.next=a.next,s.pending=a.next=r)}}function Ss(e,t){var s=t.action,a=t.payload,n=e.state;if(t.isTransition){var i=$l.T,r={};$l.T=r;try{var l=s(n,a),o=$l.S;null!==o&&o(r,l),Cs(e,t,l)}catch(c){Ps(e,t,c)}finally{$l.T=i}}else try{Cs(e,t,i=s(n,a))}catch(d){Ps(e,t,d)}}function Cs(e,t,s){null!==s&&"object"==typeof s&&"function"==typeof s.then?s.then(function(s){As(e,t,s)},function(s){return Ps(e,t,s)}):As(e,t,s)}function As(e,t,s){t.status="fulfilled",t.value=s,Ts(t),e.state=s,null!==(t=e.pending)&&((s=t.next)===t?e.pending=null:(s=s.next,t.next=s,Ss(e,s)))}function Ps(e,t,s){var a=e.pending;if(e.pending=null,null!==a){a=a.next;do{t.status="rejected",t.reason=s,Ts(t),t=t.next}while(t!==a)}e.action=null}function Ts(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Es(e,t){return t}function Fs(e,t){if(nd){var s=fu.formState;if(null!==s){e:{var a=Ed;if(nd){if(ad){t:{for(var n=ad,i=rd;8!==n.nodeType;){if(!i){n=null;break t}if(null===(n=xr(n.nextSibling))){n=null;break t}}n="F!"===(i=n.data)||"F"===i?n:null}if(n){ad=xr(n.nextSibling),a="F!"===n.data;break e}}ht(a)}a=!1}a&&(t=s[0])}}return(s=os()).memoizedState=s.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:t},s.queue=a,s=oa.bind(null,Ed,a),a.dispatch=s,a=ws(!1),i=da.bind(null,Ed,!1,a.queue),n={state:t,dispatch:null,action:e,pending:null},(a=os()).queue=n,s=_s.bind(null,Ed,n,i,s),n.dispatch=s,a.memoizedState=e,[t,s,!1]}function Is(e){return $s(cs(),Fd,e)}function $s(e,t,s){if(t=fs(e,t,Es)[0],e=ps(ms)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var a=ds(t)}catch(r){if(r===bd)throw wd;throw r}else a=t;var n=(t=cs()).queue,i=n.dispatch;return s!==t.memoizedState&&(Ed.flags|=2048,Rs(9,{destroy:void 0,resource:void 0},Ls.bind(null,n,s),null)),[a,i,e]}function Ls(e,t){e.action=t}function Ms(e){var t=cs(),s=Fd;if(null!==s)return $s(t,s,e);cs(),t=t.memoizedState;var a=(s=cs()).queue.dispatch;return s.memoizedState=e,[t,a,!1]}function Rs(e,t,s,a){return e={tag:e,create:s,deps:a,inst:t,next:null},null===(t=Ed.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Ed.updateQueue=t),null===(s=t.lastEffect)?t.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,t.lastEffect=e),e}function Ws(){return cs().memoizedState}function Os(e,t,s,a){var n=os();a=void 0===a?null:a,Ed.flags|=e,n.memoizedState=Rs(1|t,{destroy:void 0,resource:void 0},s,a)}function Ds(e,t,s,a){var n=cs();a=void 0===a?null:a;var i=n.memoizedState.inst;null!==Fd&&null!==a&&es(a,Fd.memoizedState.deps)?n.memoizedState=Rs(t,i,s,a):(Ed.flags|=e,n.memoizedState=Rs(1|t,i,s,a))}function zs(e,t){Os(8390656,8,e,t)}function Bs(e,t){Ds(2048,8,e,t)}function Us(e,t){return Ds(4,2,e,t)}function Xs(e,t){return Ds(4,4,e,t)}function qs(e,t){if("function"==typeof t){e=e();var s=t(e);return function(){"function"==typeof s?s():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Hs(e,t,s){s=null!=s?s.concat([e]):null,Ds(4,4,qs.bind(null,t,e),s)}function Js(){}function Vs(e,t){var s=cs();t=void 0===t?null:t;var a=s.memoizedState;return null!==t&&es(t,a[1])?a[0]:(s.memoizedState=[e,t],e)}function Gs(e,t){var s=cs();t=void 0===t?null:t;var a=s.memoizedState;if(null!==t&&es(t,a[1]))return a[0];if(a=e(),Md){x(!0);try{e()}finally{x(!1)}}return s.memoizedState=[a,t],a}function Ys(e,t,s){return void 0===s||1073741824&Td?e.memoizedState=t:(e.memoizedState=s,e=ei(),Ed.lanes|=e,_u|=e,s)}function Ks(e,t,s,a){return kc(s,t)?s:null!==Ad.current?(e=Ys(e,s,a),kc(e,t)||(tu=!0),e):42&Td?(e=ei(),Ed.lanes|=e,_u|=e,t):(tu=!0,e.memoizedState=s)}function Qs(e,t,s,a,n){var i=Ll.p;Ll.p=0!==i&&8>i?i:8;var r,l,o,c=$l.T,d={};$l.T=d,da(e,!1,t,s);try{var u=n(),h=$l.S;if(null!==h&&h(d,u),null!==u&&"object"==typeof u&&"function"==typeof u.then)ca(e,t,(r=a,l=[],o={status:"pending",value:null,reason:null,then:function(e){l.push(e)}},u.then(function(){o.status="fulfilled",o.value=r;for(var e=0;e<l.length;e++)(0,l[e])(r)},function(e){for(o.status="rejected",o.reason=e,e=0;e<l.length;e++)(0,l[e])(void 0)}),o),Zn());else ca(e,t,a,Zn())}catch(m){ca(e,t,{then:function(){},status:"rejected",reason:m},Zn())}finally{Ll.p=i,$l.T=c}}function Zs(){}function ea(e,s,a,n){if(5!==e.tag)throw Error(t(476));var i=ta(e).queue;Qs(e,i,s,Ml,null===a?Zs:function(){return sa(e),a(n)})}function ta(e){var t=e.memoizedState;if(null!==t)return t;var s={};return(t={memoizedState:Ml,baseState:Ml,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:Ml},next:null}).next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:s},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function sa(e){ca(e,ta(e).next.queue,{},Zn())}function aa(){return St(yh)}function na(){return cs().memoizedState}function ia(){return cs().memoizedState}function ra(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var s=Zn(),a=Ut(t,e=Bt(s),s);return null!==a&&(ti(a,t,s),Xt(a,t,s)),t={cache:Pt()},void(e.payload=t)}t=t.return}}function la(e,t,s){var a=Zn();s={lane:a,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},ua(e)?ha(t,s):null!==(s=Ge(e,t,s,a))&&(ti(s,e,a),ma(s,t,a))}function oa(e,t,s){ca(e,t,s,Zn())}function ca(e,t,s,a){var n={lane:a,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(ua(e))ha(t,n);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var r=t.lastRenderedState,l=i(r,s);if(n.hasEagerState=!0,n.eagerState=l,kc(l,r))return Ve(e,t,n,0),null===fu&&Je(),!1}catch(o){}if(null!==(s=Ge(e,t,n,a)))return ti(s,e,a),ma(s,t,a),!0}return!1}function da(e,s,a,n){if(n={lane:2,revertLane:Bi(),action:n,hasEagerState:!1,eagerState:null,next:null},ua(e)){if(s)throw Error(t(479))}else null!==(s=Ge(e,a,n,2))&&ti(s,e,2)}function ua(e){var t=e.alternate;return e===Ed||null!==t&&t===Ed}function ha(e,t){Ld=$d=!0;var s=e.pending;null===s?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function ma(e,t,s){if(4194048&s){var a=t.lanes;s|=a&=e.pendingLanes,t.lanes=s,S(e,s)}}function pa(e){var t=Hd;return Hd+=1,null===qd&&(qd=[]),Rt(qd,e,t)}function fa(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function xa(e,s){if(s.$$typeof===fl)throw Error(t(525));throw e=Object.prototype.toString.call(s),Error(t(31,"[object Object]"===e?"object with keys {"+Object.keys(s).join(", ")+"}":e))}function ga(e){return(0,e._init)(e._payload)}function va(e){function s(t,s){if(e){var a=t.deletions;null===a?(t.deletions=[s],t.flags|=16):a.push(s)}}function a(t,a){if(!e)return null;for(;null!==a;)s(t,a),a=a.sibling;return null}function n(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=st(e,t)).index=0,e.sibling=null,e}function r(t,s,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<s?(t.flags|=67108866,s):a:(t.flags|=67108866,s):(t.flags|=1048576,s)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function c(e,t,s,a){return null===t||6!==t.tag?((t=rt(s,e.mode,a)).return=e,t):((t=i(t,s)).return=e,t)}function d(e,t,s,a){var n=s.type;return n===vl?h(e,t,s.props.children,a,s.key):null!==t&&(t.elementType===n||"object"==typeof n&&null!==n&&n.$$typeof===Al&&ga(n)===t.type)?(fa(t=i(t,s.props),s),t.return=e,t):(fa(t=nt(s.type,s.key,s.props,null,e.mode,a),s),t.return=e,t)}function u(e,t,s,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==s.containerInfo||t.stateNode.implementation!==s.implementation?((t=lt(s,e.mode,a)).return=e,t):((t=i(t,s.children||[])).return=e,t)}function h(e,t,s,a,n){return null===t||7!==t.tag?((t=it(s,e.mode,a,n)).return=e,t):((t=i(t,s)).return=e,t)}function m(e,t,s){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=rt(""+t,e.mode,s)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case xl:return fa(s=nt(t.type,t.key,t.props,null,e.mode,s),t),s.return=e,s;case gl:return(t=lt(t,e.mode,s)).return=e,t;case Al:return m(e,t=(0,t._init)(t._payload),s)}if(Il(t)||l(t))return(t=it(t,e.mode,s,null)).return=e,t;if("function"==typeof t.then)return m(e,pa(t),s);if(t.$$typeof===wl)return m(e,Ct(e,t),s);xa(e,t)}return null}function p(e,t,s,a){var n=null!==t?t.key:null;if("string"==typeof s&&""!==s||"number"==typeof s||"bigint"==typeof s)return null!==n?null:c(e,t,""+s,a);if("object"==typeof s&&null!==s){switch(s.$$typeof){case xl:return s.key===n?d(e,t,s,a):null;case gl:return s.key===n?u(e,t,s,a):null;case Al:return p(e,t,s=(n=s._init)(s._payload),a)}if(Il(s)||l(s))return null!==n?null:h(e,t,s,a,null);if("function"==typeof s.then)return p(e,t,pa(s),a);if(s.$$typeof===wl)return p(e,t,Ct(e,s),a);xa(e,s)}return null}function f(e,t,s,a,n){if("string"==typeof a&&""!==a||"number"==typeof a||"bigint"==typeof a)return c(t,e=e.get(s)||null,""+a,n);if("object"==typeof a&&null!==a){switch(a.$$typeof){case xl:return d(t,e=e.get(null===a.key?s:a.key)||null,a,n);case gl:return u(t,e=e.get(null===a.key?s:a.key)||null,a,n);case Al:return f(e,t,s,a=(0,a._init)(a._payload),n)}if(Il(a)||l(a))return h(t,e=e.get(s)||null,a,n,null);if("function"==typeof a.then)return f(e,t,s,pa(a),n);if(a.$$typeof===wl)return f(e,t,s,Ct(t,a),n);xa(t,a)}return null}function x(c,d,u,h){if("object"==typeof u&&null!==u&&u.type===vl&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case xl:e:{for(var g=u.key;null!==d;){if(d.key===g){if((g=u.type)===vl){if(7===d.tag){a(c,d.sibling),(h=i(d,u.props.children)).return=c,c=h;break e}}else if(d.elementType===g||"object"==typeof g&&null!==g&&g.$$typeof===Al&&ga(g)===d.type){a(c,d.sibling),fa(h=i(d,u.props),u),h.return=c,c=h;break e}a(c,d);break}s(c,d),d=d.sibling}u.type===vl?((h=it(u.props.children,c.mode,h,u.key)).return=c,c=h):(fa(h=nt(u.type,u.key,u.props,null,c.mode,h),u),h.return=c,c=h)}return o(c);case gl:e:{for(g=u.key;null!==d;){if(d.key===g){if(4===d.tag&&d.stateNode.containerInfo===u.containerInfo&&d.stateNode.implementation===u.implementation){a(c,d.sibling),(h=i(d,u.children||[])).return=c,c=h;break e}a(c,d);break}s(c,d),d=d.sibling}(h=lt(u,c.mode,h)).return=c,c=h}return o(c);case Al:return x(c,d,u=(g=u._init)(u._payload),h)}if(Il(u))return function(t,i,l,o){for(var c=null,d=null,u=i,h=i=0,x=null;null!==u&&h<l.length;h++){u.index>h?(x=u,u=null):x=u.sibling;var g=p(t,u,l[h],o);if(null===g){null===u&&(u=x);break}e&&u&&null===g.alternate&&s(t,u),i=r(g,i,h),null===d?c=g:d.sibling=g,d=g,u=x}if(h===l.length)return a(t,u),nd&&ot(t,h),c;if(null===u){for(;h<l.length;h++)null!==(u=m(t,l[h],o))&&(i=r(u,i,h),null===d?c=u:d.sibling=u,d=u);return nd&&ot(t,h),c}for(u=n(u);h<l.length;h++)null!==(x=f(u,t,h,l[h],o))&&(e&&null!==x.alternate&&u.delete(null===x.key?h:x.key),i=r(x,i,h),null===d?c=x:d.sibling=x,d=x);return e&&u.forEach(function(e){return s(t,e)}),nd&&ot(t,h),c}(c,d,u,h);if(l(u)){if("function"!=typeof(g=l(u)))throw Error(t(150));return function(i,l,o,c){if(null==o)throw Error(t(151));for(var d=null,u=null,h=l,x=l=0,g=null,v=o.next();null!==h&&!v.done;x++,v=o.next()){h.index>x?(g=h,h=null):g=h.sibling;var j=p(i,h,v.value,c);if(null===j){null===h&&(h=g);break}e&&h&&null===j.alternate&&s(i,h),l=r(j,l,x),null===u?d=j:u.sibling=j,u=j,h=g}if(v.done)return a(i,h),nd&&ot(i,x),d;if(null===h){for(;!v.done;x++,v=o.next())null!==(v=m(i,v.value,c))&&(l=r(v,l,x),null===u?d=v:u.sibling=v,u=v);return nd&&ot(i,x),d}for(h=n(h);!v.done;x++,v=o.next())null!==(v=f(h,i,x,v.value,c))&&(e&&null!==v.alternate&&h.delete(null===v.key?x:v.key),l=r(v,l,x),null===u?d=v:u.sibling=v,u=v);return e&&h.forEach(function(e){return s(i,e)}),nd&&ot(i,x),d}(c,d,u=g.call(u),h)}if("function"==typeof u.then)return x(c,d,pa(u),h);if(u.$$typeof===wl)return x(c,d,Ct(c,u),h);xa(c,u)}return"string"==typeof u&&""!==u||"number"==typeof u||"bigint"==typeof u?(u=""+u,null!==d&&6===d.tag?(a(c,d.sibling),(h=i(d,u)).return=c,c=h):(a(c,d),(h=rt(u,c.mode,h)).return=c,c=h),o(c)):a(c,d)}return function(e,t,s,a){try{Hd=0;var n=x(e,t,s,a);return qd=null,n}catch(r){if(r===bd||r===wd)throw r;var i=et(29,r,null,e.mode);return i.lanes=a,i.return=e,i}}}function ja(e){var t=e.alternate;u(Kd,1&Kd.current),u(Gd,e),null===Yd&&(null===t||null!==Ad.current||null!==t.memoizedState)&&(Yd=e)}function ya(e){if(22===e.tag){if(u(Kd,Kd.current),u(Gd,e),null===Yd){var t=e.alternate;null!==t&&null!==t.memoizedState&&(Yd=e)}}else ba()}function ba(){u(Kd,Kd.current),u(Gd,Gd.current)}function Na(e){d(Gd),Yd===e&&(Yd=null),d(Kd)}function wa(e){for(var t=e;null!==t;){if(13===t.tag){var s=t.memoizedState;if(null!==s&&(null===(s=s.dehydrated)||"$?"===s.data||fr(s)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ka(e,t,s,a){s=null==(s=s(a,t=e.memoizedState))?t:pl({},t,s),e.memoizedState=s,0===e.lanes&&(e.updateQueue.baseState=s)}function _a(e,t,s,a,n,i,r){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,i,r):!t.prototype||!t.prototype.isPureReactComponent||(!Me(s,a)||!Me(n,i))}function Sa(e,t,s,a){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(s,a),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(s,a),t.state!==e&&Qd.enqueueReplaceState(t,t.state,null)}function Ca(e,t){var s=t;if("ref"in t)for(var a in s={},t)"ref"!==a&&(s[a]=t[a]);if(e=e.defaultProps)for(var n in s===t&&(s=pl({},s)),e)void 0===s[n]&&(s[n]=e[n]);return s}function Aa(e){Zd(e)}function Pa(e){console.error(e)}function Ta(e){Zd(e)}function Ea(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function Fa(e,t,s){try{(0,e.onCaughtError)(s.value,{componentStack:s.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function Ia(e,t,s){return(s=Bt(s)).tag=3,s.payload={element:null},s.callback=function(){Ea(e,t)},s}function $a(e){return(e=Bt(e)).tag=3,e}function La(e,t,s,a){var n=s.type.getDerivedStateFromError;if("function"==typeof n){var i=a.value;e.payload=function(){return n(i)},e.callback=function(){Fa(t,s,a)}}var r=s.stateNode;null!==r&&"function"==typeof r.componentDidCatch&&(e.callback=function(){Fa(t,s,a),"function"!=typeof n&&(null===Mu?Mu=new Set([this]):Mu.add(this));var e=a.stack;this.componentDidCatch(a.value,{componentStack:null!==e?e:""})})}function Ma(e,t,s,a){t.child=null===e?Vd(t,null,s,a):Jd(t,e.child,s,a)}function Ra(e,t,s,a,n){s=s.render;var i=t.ref;if("ref"in a){var r={};for(var l in a)"ref"!==l&&(r[l]=a[l])}else r=a;return _t(t),a=ts(e,t,s,r,i,n),l=is(),null===e||tu?(nd&&l&&dt(t),t.flags|=1,Ma(e,t,a,n),t.child):(rs(e,t,n),sn(e,t,n))}function Wa(e,t,s,a,n){if(null===e){var i=s.type;return"function"!=typeof i||tt(i)||void 0!==i.defaultProps||null!==s.compare?((e=nt(s.type,null,a,t,t.mode,n)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Oa(e,t,i,a,n))}if(i=e.child,!an(e,n)){var r=i.memoizedProps;if((s=null!==(s=s.compare)?s:Me)(r,a)&&e.ref===t.ref)return sn(e,t,n)}return t.flags|=1,(e=st(i,a)).ref=t.ref,e.return=t,t.child=e}function Oa(e,t,s,a,n){if(null!==e){var i=e.memoizedProps;if(Me(i,a)&&e.ref===t.ref){if(tu=!1,t.pendingProps=a=i,!an(e,n))return t.lanes=e.lanes,sn(e,t,n);131072&e.flags&&(tu=!0)}}return Ua(e,t,s,a,n)}function Da(e,t,s){var a=t.pendingProps,n=a.children,i=null!==e?e.memoizedState:null;if("hidden"===a.mode){if(128&t.flags){if(a=null!==i?i.baseLanes|s:s,null!==e){for(n=t.child=e.child,i=0;null!==n;)i=i|n.lanes|n.childLanes,n=n.sibling;t.childLanes=i&~a}else t.childLanes=0,t.child=null;return za(e,t,a,s)}if(!(536870912&s))return t.lanes=t.childLanes=536870912,za(e,t,null!==i?i.baseLanes|s:s,s);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&It(0,null!==i?i.cachePool:null),null!==i?Yt(t,i):Kt(),ya(t)}else null!==i?(It(0,i.cachePool),Yt(t,i),ba(),t.memoizedState=null):(null!==e&&It(0,null),Kt(),ba());return Ma(e,t,n,s),t.child}function za(e,t,s,a){var n=Ft();return n=null===n?null:{parent:pd._currentValue,pool:n},t.memoizedState={baseLanes:s,cachePool:n},null!==e&&It(0,null),Kt(),ya(t),null!==e&&wt(e,t,a,!0),null}function Ba(e,s){var a=s.ref;if(null===a)null!==e&&null!==e.ref&&(s.flags|=4194816);else{if("function"!=typeof a&&"object"!=typeof a)throw Error(t(284));null!==e&&e.ref===a||(s.flags|=4194816)}}function Ua(e,t,s,a,n){return _t(t),s=ts(e,t,s,a,void 0,n),a=is(),null===e||tu?(nd&&a&&dt(t),t.flags|=1,Ma(e,t,s,n),t.child):(rs(e,t,n),sn(e,t,n))}function Xa(e,t,s,a,n,i){return _t(t),t.updateQueue=null,s=as(t,a,s,n),ss(e),a=is(),null===e||tu?(nd&&a&&dt(t),t.flags|=1,Ma(e,t,s,i),t.child):(rs(e,t,i),sn(e,t,i))}function qa(e,t,s,a,n){if(_t(t),null===t.stateNode){var i=Hc,r=s.contextType;"object"==typeof r&&null!==r&&(i=St(r)),i=new s(a,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=Qd,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=a,i.state=t.memoizedState,i.refs={},Dt(t),r=s.contextType,i.context="object"==typeof r&&null!==r?St(r):Hc,i.state=t.memoizedState,"function"==typeof(r=s.getDerivedStateFromProps)&&(ka(t,s,r,a),i.state=t.memoizedState),"function"==typeof s.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(r=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),r!==i.state&&Qd.enqueueReplaceState(i,i.state,null),Jt(t,a,i,n),Ht(),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.flags|=4194308),a=!0}else if(null===e){i=t.stateNode;var l=t.memoizedProps,o=Ca(s,l);i.props=o;var c=i.context,d=s.contextType;r=Hc,"object"==typeof d&&null!==d&&(r=St(d));var u=s.getDerivedStateFromProps;d="function"==typeof u||"function"==typeof i.getSnapshotBeforeUpdate,l=t.pendingProps!==l,d||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(l||c!==r)&&Sa(t,i,a,r),Sd=!1;var h=t.memoizedState;i.state=h,Jt(t,a,i,n),Ht(),c=t.memoizedState,l||h!==c||Sd?("function"==typeof u&&(ka(t,s,u,a),c=t.memoizedState),(o=Sd||_a(t,s,o,a,h,c,r))?(d||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.flags|=4194308)):("function"==typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),i.props=a,i.state=c,i.context=r,a=o):("function"==typeof i.componentDidMount&&(t.flags|=4194308),a=!1)}else{i=t.stateNode,zt(e,t),d=Ca(s,r=t.memoizedProps),i.props=d,u=t.pendingProps,h=i.context,c=s.contextType,o=Hc,"object"==typeof c&&null!==c&&(o=St(c)),(c="function"==typeof(l=s.getDerivedStateFromProps)||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(r!==u||h!==o)&&Sa(t,i,a,o),Sd=!1,h=t.memoizedState,i.state=h,Jt(t,a,i,n),Ht();var m=t.memoizedState;r!==u||h!==m||Sd||null!==e&&null!==e.dependencies&&kt(e.dependencies)?("function"==typeof l&&(ka(t,s,l,a),m=t.memoizedState),(d=Sd||_a(t,s,d,a,h,m,o)||null!==e&&null!==e.dependencies&&kt(e.dependencies))?(c||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(a,m,o),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(a,m,o)),"function"==typeof i.componentDidUpdate&&(t.flags|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof i.componentDidUpdate||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=m),i.props=a,i.state=m,i.context=o,a=d):("function"!=typeof i.componentDidUpdate||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),a=!1)}return i=a,Ba(e,t),a=!!(128&t.flags),i||a?(i=t.stateNode,s=a&&"function"!=typeof s.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&a?(t.child=Jd(t,e.child,null,n),t.child=Jd(t,null,s,n)):Ma(e,t,s,n),t.memoizedState=i.state,e=t.child):e=sn(e,t,n),e}function Ha(e,t,s,a){return xt(),t.flags|=256,Ma(e,t,s,a),t.child}function Ja(e){return{baseLanes:e,cachePool:$t()}}function Va(e,t,s){return e=null!==e?e.childLanes&~s:0,t&&(e|=Au),e}function Ga(e,s,a){var n,i=s.pendingProps,r=!1,l=!!(128&s.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&!!(2&Kd.current)),n&&(r=!0,s.flags&=-129),n=!!(32&s.flags),s.flags&=-33,null===e){if(nd){if(r?ja(s):ba(),nd){var o,c=ad;if(o=c){e:{for(o=c,c=rd;8!==o.nodeType;){if(!c){c=null;break e}if(null===(o=xr(o.nextSibling))){c=null;break e}}c=o}null!==c?(s.memoizedState={dehydrated:c,treeContext:null!==Zc?{id:ed,overflow:td}:null,retryLane:536870912,hydrationErrors:null},(o=et(18,null,null,0)).stateNode=c,o.return=s,s.child=o,sd=s,ad=null,o=!0):o=!1}o||ht(s)}if(null!==(c=s.memoizedState)&&null!==(c=c.dehydrated))return fr(c)?s.lanes=32:s.lanes=536870912,null;Na(s)}return c=i.children,i=i.fallback,r?(ba(),c=Ka({mode:"hidden",children:c},r=s.mode),i=it(i,r,a,null),c.return=s,i.return=s,c.sibling=i,s.child=c,(r=s.child).memoizedState=Ja(a),r.childLanes=Va(e,n,a),s.memoizedState=su,i):(ja(s),Ya(s,c))}if(null!==(o=e.memoizedState)&&null!==(c=o.dehydrated)){if(l)256&s.flags?(ja(s),s.flags&=-257,s=Qa(e,s,a)):null!==s.memoizedState?(ba(),s.child=e.child,s.flags|=128,s=null):(ba(),r=i.fallback,c=s.mode,i=Ka({mode:"visible",children:i.children},c),(r=it(r,c,a,null)).flags|=2,i.return=s,r.return=s,i.sibling=r,s.child=i,Jd(s,e.child,null,a),(i=s.child).memoizedState=Ja(a),i.childLanes=Va(e,n,a),s.memoizedState=su,s=r);else if(ja(s),fr(c)){if(n=c.nextSibling&&c.nextSibling.dataset)var d=n.dgst;n=d,(i=Error(t(419))).stack="",i.digest=n,vt({value:i,source:null,stack:null}),s=Qa(e,s,a)}else if(tu||wt(e,s,a,!1),n=0!==(a&e.childLanes),tu||n){if(null!==(n=fu)&&(0!==(i=0!==((i=42&(i=a&-a)?1:C(i))&(n.suspendedLanes|a))?0:i)&&i!==o.retryLane))throw o.retryLane=i,Ye(e,i),ti(n,e,i),eu;"$?"===c.data||hi(),s=Qa(e,s,a)}else"$?"===c.data?(s.flags|=192,s.child=e.child,s=null):(e=o.treeContext,ad=xr(c.nextSibling),sd=s,nd=!0,id=null,rd=!1,null!==e&&(Kc[Qc++]=ed,Kc[Qc++]=td,Kc[Qc++]=Zc,ed=e.id,td=e.overflow,Zc=s),(s=Ya(s,i.children)).flags|=4096);return s}return r?(ba(),r=i.fallback,c=s.mode,d=(o=e.child).sibling,(i=st(o,{mode:"hidden",children:i.children})).subtreeFlags=65011712&o.subtreeFlags,null!==d?r=st(d,r):(r=it(r,c,a,null)).flags|=2,r.return=s,i.return=s,i.sibling=r,s.child=i,i=r,r=s.child,null===(c=e.child.memoizedState)?c=Ja(a):(null!==(o=c.cachePool)?(d=pd._currentValue,o=o.parent!==d?{parent:d,pool:d}:o):o=$t(),c={baseLanes:c.baseLanes|a,cachePool:o}),r.memoizedState=c,r.childLanes=Va(e,n,a),s.memoizedState=su,i):(ja(s),e=(a=e.child).sibling,(a=st(a,{mode:"visible",children:i.children})).return=s,a.sibling=null,null!==e&&(null===(n=s.deletions)?(s.deletions=[e],s.flags|=16):n.push(e)),s.child=a,s.memoizedState=null,a)}function Ya(e,t){return(t=Ka({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Ka(e,t){return(e=et(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Qa(e,t,s){return Jd(t,e.child,null,s),(e=Ya(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Za(e,t,s){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),bt(e.return,t,s)}function en(e,t,s,a,n){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:n}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=s,i.tailMode=n)}function tn(e,t,s){var a=t.pendingProps,n=a.revealOrder,i=a.tail;if(Ma(e,t,a.children,s),2&(a=Kd.current))a=1&a|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Za(e,s,t);else if(19===e.tag)Za(e,s,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}switch(u(Kd,a),n){case"forwards":for(s=t.child,n=null;null!==s;)null!==(e=s.alternate)&&null===wa(e)&&(n=s),s=s.sibling;null===(s=n)?(n=t.child,t.child=null):(n=s.sibling,s.sibling=null),en(t,!1,n,s,i);break;case"backwards":for(s=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===wa(e)){t.child=n;break}e=n.sibling,n.sibling=s,s=n,n=e}en(t,!0,s,null,i);break;case"together":en(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function sn(e,s,a){if(null!==e&&(s.dependencies=e.dependencies),_u|=s.lanes,0===(a&s.childLanes)){if(null===e)return null;if(wt(e,s,a,!1),0===(a&s.childLanes))return null}if(null!==e&&s.child!==e.child)throw Error(t(153));if(null!==s.child){for(a=st(e=s.child,e.pendingProps),s.child=a,a.return=s;null!==e.sibling;)e=e.sibling,(a=a.sibling=st(e,e.pendingProps)).return=s;a.sibling=null}return s.child}function an(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!kt(e))}function nn(e,s,a){if(null!==e)if(e.memoizedProps!==s.pendingProps)tu=!0;else{if(!(an(e,a)||128&s.flags))return tu=!1,function(e,t,s){switch(t.tag){case 3:h(t,t.stateNode.containerInfo),jt(0,pd,e.memoizedState.cache),xt();break;case 27:case 5:p(t);break;case 4:h(t,t.stateNode.containerInfo);break;case 10:jt(0,t.type,t.memoizedProps.value);break;case 13:var a=t.memoizedState;if(null!==a)return null!==a.dehydrated?(ja(t),t.flags|=128,null):0!==(s&t.child.childLanes)?Ga(e,t,s):(ja(t),null!==(e=sn(e,t,s))?e.sibling:null);ja(t);break;case 19:var n=!!(128&e.flags);if((a=0!==(s&t.childLanes))||(wt(e,t,s,!1),a=0!==(s&t.childLanes)),n){if(a)return tn(e,t,s);t.flags|=128}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),u(Kd,Kd.current),a)break;return null;case 22:case 23:return t.lanes=0,Da(e,t,s);case 24:jt(0,pd,e.memoizedState.cache)}return sn(e,t,s)}(e,s,a);tu=!!(131072&e.flags)}else tu=!1,nd&&1048576&s.flags&&ct(s,Yc,s.index);switch(s.lanes=0,s.tag){case 16:e:{e=s.pendingProps;var n=s.elementType,i=n._init;if(n=i(n._payload),s.type=n,"function"!=typeof n){if(null!=n){if((i=n.$$typeof)===kl){s.tag=11,s=Ra(null,s,n,e,a);break e}if(i===Cl){s.tag=14,s=Wa(null,s,n,e,a);break e}}throw s=o(n)||n,Error(t(306,s,""))}tt(n)?(e=Ca(n,e),s.tag=1,s=qa(null,s,n,e,a)):(s.tag=0,s=Ua(null,s,n,e,a))}return s;case 0:return Ua(e,s,s.type,s.pendingProps,a);case 1:return qa(e,s,n=s.type,i=Ca(n,s.pendingProps),a);case 3:e:{if(h(s,s.stateNode.containerInfo),null===e)throw Error(t(387));n=s.pendingProps;var r=s.memoizedState;i=r.element,zt(e,s),Jt(s,n,null,a);var l=s.memoizedState;if(n=l.cache,jt(0,pd,n),n!==r.cache&&Nt(s,[pd],a,!0),Ht(),n=l.element,r.isDehydrated){if(r={element:n,isDehydrated:!1,cache:l.cache},s.updateQueue.baseState=r,s.memoizedState=r,256&s.flags){s=Ha(e,s,n,a);break e}if(n!==i){vt(i=He(Error(t(424)),s)),s=Ha(e,s,n,a);break e}if(9===(e=s.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ad=xr(e.firstChild),sd=s,nd=!0,id=null,rd=!0,a=Vd(s,null,n,a),s.child=a;a;)a.flags=-3&a.flags|4096,a=a.sibling}else{if(xt(),n===i){s=sn(e,s,a);break e}Ma(e,s,n,a)}s=s.child}return s;case 26:return Ba(e,s),null===e?(a=Nr(s.type,null,s.pendingProps,null))?s.memoizedState=a:nd||(a=s.type,e=s.pendingProps,(n=lr(zl.current).createElement(a))[ho]=s,n[mo]=e,rr(n,a,e),L(n),s.stateNode=n):s.memoizedState=Nr(s.type,e.memoizedProps,s.pendingProps,e.memoizedState),null;case 27:return p(s),null===e&&nd&&(n=s.stateNode=vr(s.type,s.pendingProps,zl.current),sd=s,rd=!0,i=ad,hr(s.type)?(hh=i,ad=xr(n.firstChild)):ad=i),Ma(e,s,s.pendingProps.children,a),Ba(e,s),null===e&&(s.flags|=4194304),s.child;case 5:return null===e&&nd&&((i=n=ad)&&(null!==(n=function(e,t,s,a){for(;1===e.nodeType;){var n=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(a){if(!e[jo])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==n.rel||e.getAttribute("href")!==(null==n.href||""===n.href?null:n.href)||e.getAttribute("crossorigin")!==(null==n.crossOrigin?null:n.crossOrigin)||e.getAttribute("title")!==(null==n.title?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==n.src?null:n.src)||e.getAttribute("type")!==(null==n.type?null:n.type)||e.getAttribute("crossorigin")!==(null==n.crossOrigin?null:n.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==n.name?null:""+n.name;if("hidden"===n.type&&e.getAttribute("name")===i)return e}if(null===(e=xr(e.nextSibling)))break}return null}(n,s.type,s.pendingProps,rd))?(s.stateNode=n,sd=s,ad=xr(n.firstChild),rd=!1,i=!0):i=!1),i||ht(s)),p(s),i=s.type,r=s.pendingProps,l=null!==e?e.memoizedProps:null,n=r.children,dr(i,r)?n=null:null!==l&&dr(i,l)&&(s.flags|=32),null!==s.memoizedState&&(i=ts(e,s,ns,null,null,a),yh._currentValue=i),Ba(e,s),Ma(e,s,n,a),s.child;case 6:return null===e&&nd&&((e=a=ad)&&(null!==(a=function(e,t,s){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!s)return null;if(null===(e=xr(e.nextSibling)))return null}return e}(a,s.pendingProps,rd))?(s.stateNode=a,sd=s,ad=null,e=!0):e=!1),e||ht(s)),null;case 13:return Ga(e,s,a);case 4:return h(s,s.stateNode.containerInfo),n=s.pendingProps,null===e?s.child=Jd(s,null,n,a):Ma(e,s,n,a),s.child;case 11:return Ra(e,s,s.type,s.pendingProps,a);case 7:return Ma(e,s,s.pendingProps,a),s.child;case 8:case 12:return Ma(e,s,s.pendingProps.children,a),s.child;case 10:return n=s.pendingProps,jt(0,s.type,n.value),Ma(e,s,n.children,a),s.child;case 9:return i=s.type._context,n=s.pendingProps.children,_t(s),n=n(i=St(i)),s.flags|=1,Ma(e,s,n,a),s.child;case 14:return Wa(e,s,s.type,s.pendingProps,a);case 15:return Oa(e,s,s.type,s.pendingProps,a);case 19:return tn(e,s,a);case 31:return n=s.pendingProps,a=s.mode,n={mode:n.mode,children:n.children},null===e?((a=Ka(n,a)).ref=s.ref,s.child=a,a.return=s,s=a):((a=st(e.child,n)).ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return Da(e,s,a);case 24:return _t(s),n=St(pd),null===e?(null===(i=Ft())&&(i=fu,r=Pt(),i.pooledCache=r,r.refCount++,null!==r&&(i.pooledCacheLanes|=a),i=r),s.memoizedState={parent:n,cache:i},Dt(s),jt(0,pd,i)):(0!==(e.lanes&a)&&(zt(e,s),Jt(s,null,null,a),Ht()),i=e.memoizedState,r=s.memoizedState,i.parent!==n?(i={parent:n,cache:n},s.memoizedState=i,0===s.lanes&&(s.memoizedState=s.updateQueue.baseState=i),jt(0,pd,n)):(n=r.cache,jt(0,pd,n),n!==i.cache&&Nt(s,[pd],a,!0))),Ma(e,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(t(156,s.tag))}function rn(e){e.flags|=4}function ln(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!$r(t)){if(null!==(t=Gd.current)&&((4194048&gu)===gu?null!==Yd:(62914560&gu)!==gu&&!(536870912&gu)||t!==Yd))throw _d=kd,Nd;e.flags|=8192}}function on(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?N():536870912,e.lanes|=t,Pu|=t)}function cn(e,t){if(!nd)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;null!==t;)null!==t.alternate&&(s=t),t=t.sibling;null===s?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;null!==s;)null!==s.alternate&&(a=s),s=s.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function dn(e){var t=null!==e.alternate&&e.alternate.child===e.child,s=0,a=0;if(t)for(var n=e.child;null!==n;)s|=n.lanes|n.childLanes,a|=65011712&n.subtreeFlags,a|=65011712&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)s|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=a,e.childLanes=s,t}function un(e,s,a){var n=s.pendingProps;switch(ut(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return dn(s),null;case 3:return a=s.stateNode,n=null,null!==e&&(n=e.memoizedState.cache),s.memoizedState.cache!==n&&(s.flags|=2048),yt(pd),m(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(ft(s)?rn(s):null===e||e.memoizedState.isDehydrated&&!(256&s.flags)||(s.flags|=1024,gt())),dn(s),null;case 26:return a=s.memoizedState,null===e?(rn(s),null!==a?(dn(s),ln(s,a)):(dn(s),s.flags&=-16777217)):a?a!==e.memoizedState?(rn(s),dn(s),ln(s,a)):(dn(s),s.flags&=-16777217):(e.memoizedProps!==n&&rn(s),dn(s),s.flags&=-16777217),null;case 27:f(s),a=zl.current;var i=s.type;if(null!==e&&null!=s.stateNode)e.memoizedProps!==n&&rn(s);else{if(!n){if(null===s.stateNode)throw Error(t(166));return dn(s),null}e=Ol.current,ft(s)?mt(s):(e=vr(i,n,a),s.stateNode=e,rn(s))}return dn(s),null;case 5:if(f(s),a=s.type,null!==e&&null!=s.stateNode)e.memoizedProps!==n&&rn(s);else{if(!n){if(null===s.stateNode)throw Error(t(166));return dn(s),null}if(e=Ol.current,ft(s))mt(s);else{switch(i=lr(zl.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof n.is?i.createElement("select",{is:n.is}):i.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e="string"==typeof n.is?i.createElement(a,{is:n.is}):i.createElement(a)}}e[ho]=s,e[mo]=n;e:for(i=s.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;null===i.sibling;){if(null===i.return||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}s.stateNode=e;e:switch(rr(e,a,n),a){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&rn(s)}}return dn(s),s.flags&=-16777217,null;case 6:if(e&&null!=s.stateNode)e.memoizedProps!==n&&rn(s);else{if("string"!=typeof n&&null===s.stateNode)throw Error(t(166));if(e=zl.current,ft(s)){if(e=s.stateNode,a=s.memoizedProps,n=null,null!==(i=sd))switch(i.tag){case 27:case 5:n=i.memoizedProps}e[ho]=s,(e=!!(e.nodeValue===a||null!==n&&!0===n.suppressHydrationWarning||sr(e.nodeValue,a)))||ht(s)}else(e=lr(e).createTextNode(n))[ho]=s,s.stateNode=e}return dn(s),null;case 13:if(n=s.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=ft(s),null!==n&&null!==n.dehydrated){if(null===e){if(!i)throw Error(t(318));if(!(i=null!==(i=s.memoizedState)?i.dehydrated:null))throw Error(t(317));i[ho]=s}else xt(),!(128&s.flags)&&(s.memoizedState=null),s.flags|=4;dn(s),i=!1}else i=gt(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&s.flags?(Na(s),s):(Na(s),null)}if(Na(s),128&s.flags)return s.lanes=a,s;if(a=null!==n,e=null!==e&&null!==e.memoizedState,a){i=null,null!==(n=s.child).alternate&&null!==n.alternate.memoizedState&&null!==n.alternate.memoizedState.cachePool&&(i=n.alternate.memoizedState.cachePool.pool);var r=null;null!==n.memoizedState&&null!==n.memoizedState.cachePool&&(r=n.memoizedState.cachePool.pool),r!==i&&(n.flags|=2048)}return a!==e&&a&&(s.child.flags|=8192),on(s,s.updateQueue),dn(s),null;case 4:return m(),null===e&&Vi(s.stateNode.containerInfo),dn(s),null;case 10:return yt(s.type),dn(s),null;case 19:if(d(Kd),null===(i=s.memoizedState))return dn(s),null;if(n=!!(128&s.flags),null===(r=i.rendering))if(n)cn(i,!1);else{if(0!==ku||null!==e&&128&e.flags)for(e=s.child;null!==e;){if(null!==(r=wa(e))){for(s.flags|=128,cn(i,!1),e=r.updateQueue,s.updateQueue=e,on(s,e),s.subtreeFlags=0,e=a,a=s.child;null!==a;)at(a,e),a=a.sibling;return u(Kd,1&Kd.current|2),s.child}e=e.sibling}null!==i.tail&&Vl()>$u&&(s.flags|=128,n=!0,cn(i,!1),s.lanes=4194304)}else{if(!n)if(null!==(e=wa(r))){if(s.flags|=128,n=!0,e=e.updateQueue,s.updateQueue=e,on(s,e),cn(i,!0),null===i.tail&&"hidden"===i.tailMode&&!r.alternate&&!nd)return dn(s),null}else 2*Vl()-i.renderingStartTime>$u&&536870912!==a&&(s.flags|=128,n=!0,cn(i,!1),s.lanes=4194304);i.isBackwards?(r.sibling=s.child,s.child=r):(null!==(e=i.last)?e.sibling=r:s.child=r,i.last=r)}return null!==i.tail?(s=i.tail,i.rendering=s,i.tail=s.sibling,i.renderingStartTime=Vl(),s.sibling=null,e=Kd.current,u(Kd,n?1&e|2:1&e),s):(dn(s),null);case 22:case 23:return Na(s),Qt(),n=null!==s.memoizedState,null!==e?null!==e.memoizedState!==n&&(s.flags|=8192):n&&(s.flags|=8192),n?!!(536870912&a)&&!(128&s.flags)&&(dn(s),6&s.subtreeFlags&&(s.flags|=8192)):dn(s),null!==(a=s.updateQueue)&&on(s,a.retryQueue),a=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(a=e.memoizedState.cachePool.pool),n=null,null!==s.memoizedState&&null!==s.memoizedState.cachePool&&(n=s.memoizedState.cachePool.pool),n!==a&&(s.flags|=2048),null!==e&&d(yd),null;case 24:return a=null,null!==e&&(a=e.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),yt(pd),dn(s),null;case 25:case 30:return null}throw Error(t(156,s.tag))}function hn(e,s){switch(ut(s),s.tag){case 1:return 65536&(e=s.flags)?(s.flags=-65537&e|128,s):null;case 3:return yt(pd),m(),65536&(e=s.flags)&&!(128&e)?(s.flags=-65537&e|128,s):null;case 26:case 27:case 5:return f(s),null;case 13:if(Na(s),null!==(e=s.memoizedState)&&null!==e.dehydrated){if(null===s.alternate)throw Error(t(340));xt()}return 65536&(e=s.flags)?(s.flags=-65537&e|128,s):null;case 19:return d(Kd),null;case 4:return m(),null;case 10:return yt(s.type),null;case 22:case 23:return Na(s),Qt(),null!==e&&d(yd),65536&(e=s.flags)?(s.flags=-65537&e|128,s):null;case 24:return yt(pd),null;default:return null}}function mn(e,t){switch(ut(t),t.tag){case 3:yt(pd),m();break;case 26:case 27:case 5:f(t);break;case 4:m();break;case 13:Na(t);break;case 19:d(Kd);break;case 10:yt(t.type);break;case 22:case 23:Na(t),Qt(),null!==e&&d(yd);break;case 24:yt(pd)}}function pn(e,t){try{var s=t.updateQueue,a=null!==s?s.lastEffect:null;if(null!==a){var n=a.next;s=n;do{if((s.tag&e)===e){a=void 0;var i=s.create,r=s.inst;a=i(),r.destroy=a}s=s.next}while(s!==n)}}catch(l){Pi(t,t.return,l)}}function fn(e,t,s){try{var a=t.updateQueue,n=null!==a?a.lastEffect:null;if(null!==n){var i=n.next;a=i;do{if((a.tag&e)===e){var r=a.inst,l=r.destroy;if(void 0!==l){r.destroy=void 0,n=t;var o=s,c=l;try{c()}catch(d){Pi(n,o,d)}}}a=a.next}while(a!==i)}}catch(d){Pi(t,t.return,d)}}function xn(e){var t=e.updateQueue;if(null!==t){var s=e.stateNode;try{Gt(t,s)}catch(a){Pi(e,e.return,a)}}}function gn(e,t,s){s.props=Ca(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(a){Pi(e,t,a)}}function vn(e,t){try{var s=e.ref;if(null!==s){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;default:a=e.stateNode}"function"==typeof s?e.refCleanup=s(a):s.current=a}}catch(n){Pi(e,t,n)}}function jn(e,t){var s=e.ref,a=e.refCleanup;if(null!==s)if("function"==typeof a)try{a()}catch(n){Pi(e,t,n)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof s)try{s(null)}catch(i){Pi(e,t,i)}else s.current=null}function yn(e){var t=e.type,s=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&a.focus();break e;case"img":s.src?a.src=s.src:s.srcSet&&(a.srcset=s.srcSet)}}catch(n){Pi(e,e.return,n)}}function bn(e,s,a){try{var n=e.stateNode;!function(e,s,a,n){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,r=null,l=null,o=null,c=null,d=null,u=null;for(p in a){var h=a[p];if(a.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:n.hasOwnProperty(p)||nr(e,s,p,null,n,h)}}for(var m in n){var p=n[m];if(h=a[m],n.hasOwnProperty(m)&&(null!=p||null!=h))switch(m){case"type":r=p;break;case"name":i=p;break;case"checked":d=p;break;case"defaultChecked":u=p;break;case"value":l=p;break;case"defaultValue":o=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(t(137,s));break;default:p!==h&&nr(e,s,m,p,n,h)}}return void Z(e,l,o,c,d,u,r,i);case"select":for(r in p=l=o=m=null,a)if(c=a[r],a.hasOwnProperty(r)&&null!=c)switch(r){case"value":break;case"multiple":p=c;default:n.hasOwnProperty(r)||nr(e,s,r,null,n,c)}for(i in n)if(r=n[i],c=a[i],n.hasOwnProperty(i)&&(null!=r||null!=c))switch(i){case"value":m=r;break;case"defaultValue":o=r;break;case"multiple":l=r;default:r!==c&&nr(e,s,i,r,n,c)}return s=o,a=l,n=p,void(null!=m?se(e,!!a,m,!1):!!n!=!!a&&(null!=s?se(e,!!a,s,!0):se(e,!!a,a?[]:"",!1)));case"textarea":for(o in p=m=null,a)if(i=a[o],a.hasOwnProperty(o)&&null!=i&&!n.hasOwnProperty(o))switch(o){case"value":case"children":break;default:nr(e,s,o,null,n,i)}for(l in n)if(i=n[l],r=a[l],n.hasOwnProperty(l)&&(null!=i||null!=r))switch(l){case"value":m=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(t(91));break;default:i!==r&&nr(e,s,l,i,n,r)}return void ae(e,m,p);case"option":for(var f in a)if(m=a[f],a.hasOwnProperty(f)&&null!=m&&!n.hasOwnProperty(f))if("selected"===f)e.selected=!1;else nr(e,s,f,null,n,m);for(c in n)if(m=n[c],p=a[c],n.hasOwnProperty(c)&&m!==p&&(null!=m||null!=p))if("selected"===c)e.selected=m&&"function"!=typeof m&&"symbol"!=typeof m;else nr(e,s,c,m,n,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var x in a)m=a[x],a.hasOwnProperty(x)&&null!=m&&!n.hasOwnProperty(x)&&nr(e,s,x,null,n,m);for(d in n)if(m=n[d],p=a[d],n.hasOwnProperty(d)&&m!==p&&(null!=m||null!=p))switch(d){case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(t(137,s));break;default:nr(e,s,d,m,n,p)}return;default:if(oe(s)){for(var g in a)m=a[g],a.hasOwnProperty(g)&&void 0!==m&&!n.hasOwnProperty(g)&&ir(e,s,g,void 0,n,m);for(u in n)m=n[u],p=a[u],!n.hasOwnProperty(u)||m===p||void 0===m&&void 0===p||ir(e,s,u,m,n,p);return}}for(var v in a)m=a[v],a.hasOwnProperty(v)&&null!=m&&!n.hasOwnProperty(v)&&nr(e,s,v,null,n,m);for(h in n)m=n[h],p=a[h],!n.hasOwnProperty(h)||m===p||null==m&&null==p||nr(e,s,h,m,n,p)}(n,e.type,a,s),n[mo]=s}catch(i){Pi(e,e.return,i)}}function Nn(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&hr(e.type)||4===e.tag}function wn(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Nn(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&hr(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function kn(e,t,s){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?(9===s.nodeType?s.body:"HTML"===s.nodeName?s.ownerDocument.body:s).insertBefore(e,t):((t=9===s.nodeType?s.body:"HTML"===s.nodeName?s.ownerDocument.body:s).appendChild(e),null!=(s=s._reactRootContainer)||null!==t.onclick||(t.onclick=ar));else if(4!==a&&(27===a&&hr(e.type)&&(s=e.stateNode,t=null),null!==(e=e.child)))for(kn(e,t,s),e=e.sibling;null!==e;)kn(e,t,s),e=e.sibling}function _n(e,t,s){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(4!==a&&(27===a&&hr(e.type)&&(s=e.stateNode),null!==(e=e.child)))for(_n(e,t,s),e=e.sibling;null!==e;)_n(e,t,s),e=e.sibling}function Sn(e){var t=e.stateNode,s=e.memoizedProps;try{for(var a=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);rr(t,a,s),t[ho]=e,t[mo]=s}catch(i){Pi(e,e.return,i)}}function Cn(e,t,s){var a=s.flags;switch(s.tag){case 0:case 11:case 15:Rn(e,s),4&a&&pn(5,s);break;case 1:if(Rn(e,s),4&a)if(e=s.stateNode,null===t)try{e.componentDidMount()}catch(r){Pi(s,s.return,r)}else{var n=Ca(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){Pi(s,s.return,l)}}64&a&&xn(s),512&a&&vn(s,s.return);break;case 3:if(Rn(e,s),64&a&&null!==(e=s.updateQueue)){if(t=null,null!==s.child)switch(s.child.tag){case 27:case 5:case 1:t=s.child.stateNode}try{Gt(e,t)}catch(r){Pi(s,s.return,r)}}break;case 27:null===t&&4&a&&Sn(s);case 26:case 5:Rn(e,s),null===t&&4&a&&yn(s),512&a&&vn(s,s.return);break;case 12:Rn(e,s);break;case 13:Rn(e,s),4&a&&En(e,s),64&a&&(null!==(e=s.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var s=e.ownerDocument;if("$?"!==e.data||"complete"===s.readyState)t();else{var a=function(){t(),s.removeEventListener("DOMContentLoaded",a)};s.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}(e,s=Ii.bind(null,s))));break;case 22:if(!(a=null!==s.memoizedState||au)){t=null!==t&&null!==t.memoizedState||nu,n=au;var i=nu;au=a,(nu=t)&&!i?On(e,s,!!(8772&s.subtreeFlags)):Rn(e,s),au=n,nu=i}break;case 30:break;default:Rn(e,s)}}function An(e){var t=e.alternate;null!==t&&(e.alternate=null,An(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&T(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Pn(e,t,s){for(s=s.child;null!==s;)Tn(e,t,s),s=s.sibling}function Tn(e,t,s){if(no&&"function"==typeof no.onCommitFiberUnmount)try{no.onCommitFiberUnmount(ao,s)}catch(i){}switch(s.tag){case 26:nu||jn(s,t),Pn(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode).parentNode.removeChild(s);break;case 27:nu||jn(s,t);var a=ou,n=cu;hr(s.type)&&(ou=s.stateNode,cu=!1),Pn(e,t,s),jr(s.stateNode),ou=a,cu=n;break;case 5:nu||jn(s,t);case 6:if(a=ou,n=cu,ou=null,Pn(e,t,s),cu=n,null!==(ou=a))if(cu)try{(9===ou.nodeType?ou.body:"HTML"===ou.nodeName?ou.ownerDocument.body:ou).removeChild(s.stateNode)}catch(r){Pi(s,t,r)}else try{ou.removeChild(s.stateNode)}catch(r){Pi(s,t,r)}break;case 18:null!==ou&&(cu?(mr(9===(e=ou).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,s.stateNode),rl(e)):mr(ou,s.stateNode));break;case 4:a=ou,n=cu,ou=s.stateNode.containerInfo,cu=!0,Pn(e,t,s),ou=a,cu=n;break;case 0:case 11:case 14:case 15:nu||fn(2,s,t),nu||fn(4,s,t),Pn(e,t,s);break;case 1:nu||(jn(s,t),"function"==typeof(a=s.stateNode).componentWillUnmount&&gn(s,t,a)),Pn(e,t,s);break;case 21:Pn(e,t,s);break;case 22:nu=(a=nu)||null!==s.memoizedState,Pn(e,t,s),nu=a;break;default:Pn(e,t,s)}}function En(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{rl(e)}catch(s){Pi(t,t.return,s)}}function Fn(e,s){var a=function(e){switch(e.tag){case 13:case 19:var s=e.stateNode;return null===s&&(s=e.stateNode=new ru),s;case 22:return null===(s=(e=e.stateNode)._retryCache)&&(s=e._retryCache=new ru),s;default:throw Error(t(435,e.tag))}}(e);s.forEach(function(t){var s=$i.bind(null,e,t);a.has(t)||(a.add(t),t.then(s,s))})}function In(e,s){var a=s.deletions;if(null!==a)for(var n=0;n<a.length;n++){var i=a[n],r=e,l=s,o=l;e:for(;null!==o;){switch(o.tag){case 27:if(hr(o.type)){ou=o.stateNode,cu=!1;break e}break;case 5:ou=o.stateNode,cu=!1;break e;case 3:case 4:ou=o.stateNode.containerInfo,cu=!0;break e}o=o.return}if(null===ou)throw Error(t(160));Tn(r,l,i),ou=null,cu=!1,null!==(r=i.alternate)&&(r.return=null),i.return=null}if(13878&s.subtreeFlags)for(s=s.child;null!==s;)$n(s,e),s=s.sibling}function $n(e,s){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:In(s,e),Ln(e),4&n&&(fn(3,e,e.return),pn(3,e),fn(5,e,e.return));break;case 1:In(s,e),Ln(e),512&n&&(nu||null===a||jn(a,a.return)),64&n&&au&&(null!==(e=e.updateQueue)&&(null!==(n=e.callbacks)&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===a?n:a.concat(n))));break;case 26:var i=du;if(In(s,e),Ln(e),512&n&&(nu||null===a||jn(a,a.return)),4&n){var r=null!==a?a.memoizedState:null;if(n=e.memoizedState,null===a)if(null===n)if(null===e.stateNode){e:{n=e.type,a=e.memoizedProps,i=i.ownerDocument||i;t:switch(n){case"title":(!(r=i.getElementsByTagName("title")[0])||r[jo]||r[ho]||"http://www.w3.org/2000/svg"===r.namespaceURI||r.hasAttribute("itemprop"))&&(r=i.createElement(n),i.head.insertBefore(r,i.querySelector("head > title"))),rr(r,n,a),r[ho]=e,L(r),n=r;break e;case"link":var l=Fr("link","href",i).get(n+(a.href||""));if(l)for(var o=0;o<l.length;o++)if((r=l[o]).getAttribute("href")===(null==a.href||""===a.href?null:a.href)&&r.getAttribute("rel")===(null==a.rel?null:a.rel)&&r.getAttribute("title")===(null==a.title?null:a.title)&&r.getAttribute("crossorigin")===(null==a.crossOrigin?null:a.crossOrigin)){l.splice(o,1);break t}rr(r=i.createElement(n),n,a),i.head.appendChild(r);break;case"meta":if(l=Fr("meta","content",i).get(n+(a.content||"")))for(o=0;o<l.length;o++)if((r=l[o]).getAttribute("content")===(null==a.content?null:""+a.content)&&r.getAttribute("name")===(null==a.name?null:a.name)&&r.getAttribute("property")===(null==a.property?null:a.property)&&r.getAttribute("http-equiv")===(null==a.httpEquiv?null:a.httpEquiv)&&r.getAttribute("charset")===(null==a.charSet?null:a.charSet)){l.splice(o,1);break t}rr(r=i.createElement(n),n,a),i.head.appendChild(r);break;default:throw Error(t(468,n))}r[ho]=e,L(r),n=r}e.stateNode=n}else Ir(i,e.type,e.stateNode);else e.stateNode=Ar(i,n,e.memoizedProps);else r!==n?(null===r?null!==a.stateNode&&(a=a.stateNode).parentNode.removeChild(a):r.count--,null===n?Ir(i,e.type,e.stateNode):Ar(i,n,e.memoizedProps)):null===n&&null!==e.stateNode&&bn(e,e.memoizedProps,a.memoizedProps)}break;case 27:In(s,e),Ln(e),512&n&&(nu||null===a||jn(a,a.return)),null!==a&&4&n&&bn(e,e.memoizedProps,a.memoizedProps);break;case 5:if(In(s,e),Ln(e),512&n&&(nu||null===a||jn(a,a.return)),32&e.flags){i=e.stateNode;try{ie(i,"")}catch(p){Pi(e,e.return,p)}}4&n&&null!=e.stateNode&&bn(e,i=e.memoizedProps,null!==a?a.memoizedProps:i),1024&n&&(iu=!0);break;case 6:if(In(s,e),Ln(e),4&n){if(null===e.stateNode)throw Error(t(162));n=e.memoizedProps,a=e.stateNode;try{a.nodeValue=n}catch(p){Pi(e,e.return,p)}}break;case 3:if(gh=null,i=du,du=yr(s.containerInfo),In(s,e),du=i,Ln(e),4&n&&null!==a&&a.memoizedState.isDehydrated)try{rl(s.containerInfo)}catch(p){Pi(e,e.return,p)}iu&&(iu=!1,Mn(e));break;case 4:n=du,du=yr(e.stateNode.containerInfo),In(s,e),Ln(e),du=n;break;case 12:default:In(s,e),Ln(e);break;case 13:In(s,e),Ln(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==a&&null!==a.memoizedState)&&(Iu=Vl()),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,Fn(e,n)));break;case 22:i=null!==e.memoizedState;var c=null!==a&&null!==a.memoizedState,d=au,u=nu;if(au=d||i,nu=u||c,In(s,e),nu=u,au=d,Ln(e),8192&n)e:for(s=e.stateNode,s._visibility=i?-2&s._visibility:1|s._visibility,i&&(null===a||c||au||nu||Wn(e)),a=null,s=e;;){if(5===s.tag||26===s.tag){if(null===a){c=a=s;try{if(r=c.stateNode,i)"function"==typeof(l=r.style).setProperty?l.setProperty("display","none","important"):l.display="none";else{o=c.stateNode;var h=c.memoizedProps.style,m=null!=h&&h.hasOwnProperty("display")?h.display:null;o.style.display=null==m||"boolean"==typeof m?"":(""+m).trim()}}catch(p){Pi(c,c.return,p)}}}else if(6===s.tag){if(null===a){c=s;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(p){Pi(c,c.return,p)}}}else if((22!==s.tag&&23!==s.tag||null===s.memoizedState||s===e)&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;null===s.sibling;){if(null===s.return||s.return===e)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}4&n&&(null!==(n=e.updateQueue)&&(null!==(a=n.retryQueue)&&(n.retryQueue=null,Fn(e,a))));break;case 19:In(s,e),Ln(e),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,Fn(e,n)));case 30:case 21:}}function Ln(e){var s=e.flags;if(2&s){try{for(var a,n=e.return;null!==n;){if(Nn(n)){a=n;break}n=n.return}if(null==a)throw Error(t(160));switch(a.tag){case 27:var i=a.stateNode;_n(e,wn(e),i);break;case 5:var r=a.stateNode;32&a.flags&&(ie(r,""),a.flags&=-33),_n(e,wn(e),r);break;case 3:case 4:var l=a.stateNode.containerInfo;kn(e,wn(e),l);break;default:throw Error(t(161))}}catch(o){Pi(e,e.return,o)}e.flags&=-3}4096&s&&(e.flags&=-4097)}function Mn(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Mn(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Rn(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Cn(e,t.alternate,t),t=t.sibling}function Wn(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:fn(4,t,t.return),Wn(t);break;case 1:jn(t,t.return);var s=t.stateNode;"function"==typeof s.componentWillUnmount&&gn(t,t.return,s),Wn(t);break;case 27:jr(t.stateNode);case 26:case 5:jn(t,t.return),Wn(t);break;case 22:null===t.memoizedState&&Wn(t);break;default:Wn(t)}e=e.sibling}}function On(e,t,s){for(s=s&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var a=t.alternate,n=e,i=t,r=i.flags;switch(i.tag){case 0:case 11:case 15:On(n,i,s),pn(4,i);break;case 1:if(On(n,i,s),"function"==typeof(n=(a=i).stateNode).componentDidMount)try{n.componentDidMount()}catch(c){Pi(a,a.return,c)}if(null!==(n=(a=i).updateQueue)){var l=a.stateNode;try{var o=n.shared.hiddenCallbacks;if(null!==o)for(n.shared.hiddenCallbacks=null,n=0;n<o.length;n++)Vt(o[n],l)}catch(c){Pi(a,a.return,c)}}s&&64&r&&xn(i),vn(i,i.return);break;case 27:Sn(i);case 26:case 5:On(n,i,s),s&&null===a&&4&r&&yn(i),vn(i,i.return);break;case 12:On(n,i,s);break;case 13:On(n,i,s),s&&4&r&&En(n,i);break;case 22:null===i.memoizedState&&On(n,i,s),vn(i,i.return);break;case 30:break;default:On(n,i,s)}t=t.sibling}}function Dn(e,t){var s=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(s=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==s&&(null!=e&&e.refCount++,null!=s&&Tt(s))}function zn(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Tt(e))}function Bn(e,t,s,a){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Un(e,t,s,a),t=t.sibling}function Un(e,t,s,a){var n=t.flags;switch(t.tag){case 0:case 11:case 15:Bn(e,t,s,a),2048&n&&pn(9,t);break;case 1:case 13:default:Bn(e,t,s,a);break;case 3:Bn(e,t,s,a),2048&n&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Tt(e)));break;case 12:if(2048&n){Bn(e,t,s,a),e=t.stateNode;try{var i=t.memoizedProps,r=i.id,l=i.onPostCommit;"function"==typeof l&&l(r,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(o){Pi(t,t.return,o)}}else Bn(e,t,s,a);break;case 23:break;case 22:i=t.stateNode,r=t.alternate,null!==t.memoizedState?2&i._visibility?Bn(e,t,s,a):qn(e,t):2&i._visibility?Bn(e,t,s,a):(i._visibility|=2,Xn(e,t,s,a,!!(10256&t.subtreeFlags))),2048&n&&Dn(r,t);break;case 24:Bn(e,t,s,a),2048&n&&zn(t.alternate,t)}}function Xn(e,t,s,a,n){for(n=n&&!!(10256&t.subtreeFlags),t=t.child;null!==t;){var i=e,r=t,l=s,o=a,c=r.flags;switch(r.tag){case 0:case 11:case 15:Xn(i,r,l,o,n),pn(8,r);break;case 23:break;case 22:var d=r.stateNode;null!==r.memoizedState?2&d._visibility?Xn(i,r,l,o,n):qn(i,r):(d._visibility|=2,Xn(i,r,l,o,n)),n&&2048&c&&Dn(r.alternate,r);break;case 24:Xn(i,r,l,o,n),n&&2048&c&&zn(r.alternate,r);break;default:Xn(i,r,l,o,n)}t=t.sibling}}function qn(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var s=e,a=t,n=a.flags;switch(a.tag){case 22:qn(s,a),2048&n&&Dn(a.alternate,a);break;case 24:qn(s,a),2048&n&&zn(a.alternate,a);break;default:qn(s,a)}t=t.sibling}}function Hn(e){if(e.subtreeFlags&uu)for(e=e.child;null!==e;)Jn(e),e=e.sibling}function Jn(e){switch(e.tag){case 26:Hn(e),e.flags&uu&&null!==e.memoizedState&&function(e,s,a){if(null===vh)throw Error(t(475));var n=vh;if(!("stylesheet"!==s.type||"string"==typeof a.media&&!1===matchMedia(a.media).matches||4&s.state.loading)){if(null===s.instance){var i=wr(a.href),r=e.querySelector(kr(i));if(r)return null!==(e=r._p)&&"object"==typeof e&&"function"==typeof e.then&&(n.count++,n=Mr.bind(n),e.then(n,n)),s.state.loading|=4,s.instance=r,void L(r);r=e.ownerDocument||e,a=_r(a),(i=mh.get(i))&&Tr(a,i),L(r=r.createElement("link"));var l=r;l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),rr(r,"link",a),s.instance=r}null===n.stylesheets&&(n.stylesheets=new Map),n.stylesheets.set(s,e),(e=s.state.preload)&&!(3&s.state.loading)&&(n.count++,s=Mr.bind(n),e.addEventListener("load",s),e.addEventListener("error",s))}}(du,e.memoizedState,e.memoizedProps);break;case 5:default:Hn(e);break;case 3:case 4:var s=du;du=yr(e.stateNode.containerInfo),Hn(e),du=s;break;case 22:null===e.memoizedState&&(null!==(s=e.alternate)&&null!==s.memoizedState?(s=uu,uu=16777216,Hn(e),uu=s):Hn(e))}}function Vn(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Gn(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var s=0;s<t.length;s++){var a=t[s];lu=a,Qn(a,e)}Vn(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Yn(e),e=e.sibling}function Yn(e){switch(e.tag){case 0:case 11:case 15:Gn(e),2048&e.flags&&fn(9,e,e.return);break;case 3:case 12:default:Gn(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Kn(e)):Gn(e)}}function Kn(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var s=0;s<t.length;s++){var a=t[s];lu=a,Qn(a,e)}Vn(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:fn(8,t,t.return),Kn(t);break;case 22:2&(s=t.stateNode)._visibility&&(s._visibility&=-3,Kn(t));break;default:Kn(t)}e=e.sibling}}function Qn(e,t){for(;null!==lu;){var s=lu;switch(s.tag){case 0:case 11:case 15:fn(8,s,t);break;case 23:case 22:if(null!==s.memoizedState&&null!==s.memoizedState.cachePool){var a=s.memoizedState.cachePool.pool;null!=a&&a.refCount++}break;case 24:Tt(s.memoizedState.cache)}if(null!==(a=s.child))a.return=s,lu=a;else e:for(s=e;null!==lu;){var n=(a=lu).sibling,i=a.return;if(An(a),a===s){lu=null;break e}if(null!==n){n.return=i,lu=n;break e}lu=i}}}function Zn(){if(2&pu&&0!==gu)return gu&-gu;if(null!==$l.T){return 0!==gd?gd:Bi()}return P()}function ei(){0===Au&&(Au=536870912&gu&&!nd?536870912:b());var e=Gd.current;return null!==e&&(e.flags|=32),Au}function ti(e,t,s){(e!==fu||2!==vu&&9!==vu)&&null===e.cancelPendingCommit||(oi(e,0),ii(e,gu,Au,!1)),k(e,s),2&pu&&e===fu||(e===fu&&(!(2&pu)&&(Su|=s),4===ku&&ii(e,gu,Au,!1)),Li(e))}function si(e,s,a){if(6&pu)throw Error(t(327));for(var n=!a&&!(124&s)&&0===(s&e.expiredLanes)||j(e,s),i=n?function(e,s){var a=pu;pu|=2;var n=di(),i=ui();fu!==e||gu!==s?(Lu=null,$u=Vl()+500,oi(e,s)):bu=j(e,s);e:for(;;)try{if(0!==vu&&null!==xu){s=xu;var r=ju;t:switch(vu){case 1:vu=0,ju=null,vi(e,s,r,1);break;case 2:case 9:if(Lt(r)){vu=0,ju=null,gi(s);break}s=function(){2!==vu&&9!==vu||fu!==e||(vu=7),Li(e)},r.then(s,s);break e;case 3:vu=7;break e;case 4:vu=5;break e;case 7:Lt(r)?(vu=0,ju=null,gi(s)):(vu=0,ju=null,vi(e,s,r,7));break;case 5:var l=null;switch(xu.tag){case 26:l=xu.memoizedState;case 5:case 27:var o=xu;if(!l||$r(l)){vu=0,ju=null;var c=o.sibling;if(null!==c)xu=c;else{var d=o.return;null!==d?(xu=d,ji(d)):xu=null}break t}}vu=0,ju=null,vi(e,s,r,5);break;case 6:vu=0,ju=null,vi(e,s,r,6);break;case 8:li(),ku=6;break e;default:throw Error(t(462))}}fi();break}catch(u){ci(e,u)}return dd=cd=null,$l.H=n,$l.A=i,pu=a,null!==xu?0:(fu=null,gu=0,Je(),ku)}(e,s):mi(e,s,!0),r=n;;){if(0===i){bu&&!n&&ii(e,s,0,!1);break}if(a=e.current.alternate,!r||ni(a)){if(2===i){if(r=s,e.errorRecoveryDisabledLanes&r)var l=0;else l=0!==(l=-536870913&e.pendingLanes)?l:536870912&l?536870912:0;if(0!==l){s=l;e:{var o=e;i=Tu;var c=o.current.memoizedState.isDehydrated;if(c&&(oi(o,l).flags|=256),2!==(l=mi(o,l,!1))){if(Nu&&!c){o.errorRecoveryDisabledLanes|=r,Su|=r,i=4;break e}r=Eu,Eu=i,null!==r&&(null===Eu?Eu=r:Eu.push.apply(Eu,r))}i=l}if(r=!1,2!==i)continue}}if(1===i){oi(e,0),ii(e,s,0,!0);break}e:{switch(n=e,r=i){case 0:case 1:throw Error(t(345));case 4:if((4194048&s)!==s)break;case 6:ii(n,s,Au,!yu);break e;case 2:Eu=null;break;case 3:case 5:break;default:throw Error(t(329))}if((62914560&s)===s&&10<(i=Iu+300-Vl())){if(ii(n,s,Au,!yu),0!==v(n,0,!0))break e;n.timeoutHandle=oh(ai.bind(null,n,a,Eu,Lu,Fu,s,Au,Su,Pu,yu,r,2,-0,0),i)}else ai(n,a,Eu,Lu,Fu,s,Au,Su,Pu,yu,r,0,-0,0)}break}i=mi(e,s,!1),r=!1}Li(e)}function ai(e,s,a,n,i,r,l,o,c,d,u,h,m,p){if(e.timeoutHandle=-1,(8192&(h=s.subtreeFlags)||!(16785408&~h))&&(vh={stylesheets:null,count:0,unsuspend:Lr},Jn(s),null!==(h=function(){if(null===vh)throw Error(t(475));var e=vh;return e.stylesheets&&0===e.count&&Rr(e,e.stylesheets),0<e.count?function(t){var s=setTimeout(function(){if(e.stylesheets&&Rr(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(s)}}:null}())))return e.cancelPendingCommit=h(bi.bind(null,e,s,r,a,n,i,l,o,c,u,1,m,p)),void ii(e,r,l,!d);bi(e,s,r,a,n,i,l,o,c)}function ni(e){for(var t=e;;){var s=t.tag;if((0===s||11===s||15===s)&&16384&t.flags&&(null!==(s=t.updateQueue)&&null!==(s=s.stores)))for(var a=0;a<s.length;a++){var n=s[a],i=n.getSnapshot;n=n.value;try{if(!kc(i(),n))return!1}catch(r){return!1}}if(s=t.child,16384&t.subtreeFlags&&null!==s)s.return=t,t=s;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ii(e,t,s,a){t&=~Cu,t&=~Su,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var n=t;0<n;){var i=31-io(n),r=1<<i;a[i]=-1,n&=~r}0!==s&&_(e,s,t)}function ri(){return!!(6&pu)||(Mi(0),!1)}function li(){if(null!==xu){if(0===vu)var e=xu.return;else dd=cd=null,ls(e=xu),qd=null,Hd=0,e=xu;for(;null!==e;)mn(e.alternate,e),e=e.return;xu=null}}function oi(e,t){var s=e.timeoutHandle;-1!==s&&(e.timeoutHandle=-1,ch(s)),null!==(s=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,s()),li(),fu=e,xu=s=st(e.current,null),gu=t,vu=0,ju=null,yu=!1,bu=j(e,t),Nu=!1,Pu=Au=Cu=Su=_u=ku=0,Eu=Tu=null,Fu=!1,8&t&&(t|=32&t);var a=e.entangledLanes;if(0!==a)for(e=e.entanglements,a&=t;0<a;){var n=31-io(a),i=1<<n;t|=e[n],a&=~i}return wu=t,Je(),s}function ci(e,t){Ed=null,$l.H=zd,t===bd||t===wd?(t=Wt(),vu=3):t===Nd?(t=Wt(),vu=4):vu=t===eu?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,ju=t,null===xu&&(ku=1,Ea(e,He(t,e.current)))}function di(){var e=$l.H;return $l.H=zd,null===e?zd:e}function ui(){var e=$l.A;return $l.A=hu,e}function hi(){ku=4,yu||(4194048&gu)!==gu&&null!==Gd.current||(bu=!0),!(134217727&_u)&&!(134217727&Su)||null===fu||ii(fu,gu,Au,!1)}function mi(e,t,s){var a=pu;pu|=2;var n=di(),i=ui();fu===e&&gu===t||(Lu=null,oi(e,t)),t=!1;var r=ku;e:for(;;)try{if(0!==vu&&null!==xu){var l=xu,o=ju;switch(vu){case 8:li(),r=6;break e;case 3:case 2:case 9:case 6:null===Gd.current&&(t=!0);var c=vu;if(vu=0,ju=null,vi(e,l,o,c),s&&bu){r=0;break e}break;default:c=vu,vu=0,ju=null,vi(e,l,o,c)}}pi(),r=ku;break}catch(d){ci(e,d)}return t&&e.shellSuspendCounter++,dd=cd=null,pu=a,$l.H=n,$l.A=i,null===xu&&(fu=null,gu=0,Je()),r}function pi(){for(;null!==xu;)xi(xu)}function fi(){for(;null!==xu&&!Hl();)xi(xu)}function xi(e){var t=nn(e.alternate,e,wu);e.memoizedProps=e.pendingProps,null===t?ji(e):xu=t}function gi(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=Xa(s,t,t.pendingProps,t.type,void 0,gu);break;case 11:t=Xa(s,t,t.pendingProps,t.type.render,t.ref,gu);break;case 5:ls(t);default:mn(s,t),t=nn(s,t=xu=at(t,wu),wu)}e.memoizedProps=e.pendingProps,null===t?ji(e):xu=t}function vi(e,s,a,n){dd=cd=null,ls(s),qd=null,Hd=0;var i=s.return;try{if(function(e,s,a,n,i){if(a.flags|=32768,null!==n&&"object"==typeof n&&"function"==typeof n.then){if(null!==(s=a.alternate)&&wt(s,a,i,!0),null!==(a=Gd.current)){switch(a.tag){case 13:return null===Yd?hi():null===a.alternate&&0===ku&&(ku=3),a.flags&=-257,a.flags|=65536,a.lanes=i,n===kd?a.flags|=16384:(null===(s=a.updateQueue)?a.updateQueue=new Set([n]):s.add(n),Ti(e,n,i)),!1;case 22:return a.flags|=65536,n===kd?a.flags|=16384:(null===(s=a.updateQueue)?(s={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=s):null===(a=s.retryQueue)?s.retryQueue=new Set([n]):a.add(n),Ti(e,n,i)),!1}throw Error(t(435,a.tag))}return Ti(e,n,i),hi(),!1}if(nd)return null!==(s=Gd.current)?(!(65536&s.flags)&&(s.flags|=256),s.flags|=65536,s.lanes=i,n!==ld&&vt(He(e=Error(t(422),{cause:n}),a))):(n!==ld&&vt(He(s=Error(t(423),{cause:n}),a)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,n=He(n,a),qt(e,i=Ia(e.stateNode,n,i)),4!==ku&&(ku=2)),!1;var r=Error(t(520),{cause:n});if(r=He(r,a),null===Tu?Tu=[r]:Tu.push(r),4!==ku&&(ku=2),null===s)return!0;n=He(n,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,e=i&-i,a.lanes|=e,qt(a,e=Ia(a.stateNode,n,e)),!1;case 1:if(s=a.type,r=a.stateNode,!(128&a.flags||"function"!=typeof s.getDerivedStateFromError&&(null===r||"function"!=typeof r.componentDidCatch||null!==Mu&&Mu.has(r))))return a.flags|=65536,i&=-i,a.lanes|=i,La(i=$a(i),e,a,n),qt(a,i),!1}a=a.return}while(null!==a);return!1}(e,i,s,a,gu))return ku=1,Ea(e,He(a,e.current)),void(xu=null)}catch(r){if(null!==i)throw xu=i,r;return ku=1,Ea(e,He(a,e.current)),void(xu=null)}32768&s.flags?(nd||1===n?e=!0:bu||536870912&gu?e=!1:(yu=e=!0,(2===n||9===n||3===n||6===n)&&(null!==(n=Gd.current)&&13===n.tag&&(n.flags|=16384))),yi(s,e)):ji(s)}function ji(e){var t=e;do{if(32768&t.flags)return void yi(t,yu);e=t.return;var s=un(t.alternate,t,wu);if(null!==s)return void(xu=s);if(null!==(t=t.sibling))return void(xu=t);xu=t=e}while(null!==t);0===ku&&(ku=5)}function yi(e,t){do{var s=hn(e.alternate,e);if(null!==s)return s.flags&=32767,void(xu=s);if(null!==(s=e.return)&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&null!==(e=e.sibling))return void(xu=e);xu=e=s}while(null!==e);ku=6,xu=null}function bi(e,s,a,n,i,r,l,o,c){e.cancelPendingCommit=null;do{Si()}while(0!==Ru);if(6&pu)throw Error(t(327));if(null!==s){if(s===e.current)throw Error(t(177));if(r=s.lanes|s.childLanes,function(e,t,s,a,n,i){var r=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var l=e.entanglements,o=e.expirationTimes,c=e.hiddenUpdates;for(s=r&~s;0<s;){var d=31-io(s),u=1<<d;l[d]=0,o[d]=-1;var h=c[d];if(null!==h)for(c[d]=null,d=0;d<h.length;d++){var m=h[d];null!==m&&(m.lane&=-536870913)}s&=~u}0!==a&&_(e,a,0),0!==i&&0===n&&0!==e.tag&&(e.suspendedLanes|=i&~(r&~t))}(e,a,r|=qc,l,o,c),e===fu&&(xu=fu=null,gu=0),Ou=s,Wu=e,Du=a,zu=r,Bu=i,Uu=n,10256&s.subtreeFlags||10256&s.flags?(e.callbackNode=null,e.callbackPriority=0,Xl(Ql,function(){return Ci(),null})):(e.callbackNode=null,e.callbackPriority=0),n=!!(13878&s.flags),13878&s.subtreeFlags||n){n=$l.T,$l.T=null,i=Ll.p,Ll.p=2,l=pu,pu|=4;try{!function(e,s){if(e=e.containerInfo,ih=bh,ze(e=De(e))){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(a=(a=e.ownerDocument)&&a.defaultView||window).getSelection&&a.getSelection();if(n&&0!==n.rangeCount){a=n.anchorNode;var i=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{a.nodeType,r.nodeType}catch(x){a=null;break e}var l=0,o=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==a||0!==i&&3!==h.nodeType||(o=l+i),h!==r||0!==n&&3!==h.nodeType||(c=l+n),3===h.nodeType&&(l+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===a&&++d===i&&(o=l),m===r&&++u===n&&(c=l),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}a=-1===o||-1===c?null:{start:o,end:c}}else a=null}a=a||{start:0,end:0}}else a=null;for(rh={focusedElem:e,selectionRange:a},bh=!1,lu=s;null!==lu;)if(e=(s=lu).child,1024&s.subtreeFlags&&null!==e)e.return=s,lu=e;else for(;null!==lu;){switch(r=(s=lu).alternate,e=s.flags,s.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==r){e=void 0,a=s,i=r.memoizedProps,r=r.memoizedState,n=a.stateNode;try{var f=Ca(a.type,i,(a.elementType,a.type));e=n.getSnapshotBeforeUpdate(f,r),n.__reactInternalSnapshotBeforeUpdate=e}catch(g){Pi(a,a.return,g)}}break;case 3:if(1024&e)if(9===(a=(e=s.stateNode.containerInfo).nodeType))pr(e);else if(1===a)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":pr(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(t(163))}if(null!==(e=s.sibling)){e.return=s.return,lu=e;break}lu=s.return}}(e,s)}finally{pu=l,Ll.p=i,$l.T=n}}Ru=1,Ni(),wi(),ki()}}function Ni(){if(1===Ru){Ru=0;var e=Wu,t=Ou,s=!!(13878&t.flags);if(13878&t.subtreeFlags||s){s=$l.T,$l.T=null;var a=Ll.p;Ll.p=2;var n=pu;pu|=4;try{$n(t,e);var i=rh,r=De(e.containerInfo),l=i.focusedElem,o=i.selectionRange;if(r!==l&&l&&l.ownerDocument&&Oe(l.ownerDocument.documentElement,l)){if(null!==o&&ze(l)){var c=o.start,d=o.end;if(void 0===d&&(d=c),"selectionStart"in l)l.selectionStart=c,l.selectionEnd=Math.min(d,l.value.length);else{var u=l.ownerDocument||document,h=u&&u.defaultView||window;if(h.getSelection){var m=h.getSelection(),p=l.textContent.length,f=Math.min(o.start,p),x=void 0===o.end?f:Math.min(o.end,p);!m.extend&&f>x&&(r=x,x=f,f=r);var g=We(l,f),v=We(l,x);if(g&&v&&(1!==m.rangeCount||m.anchorNode!==g.node||m.anchorOffset!==g.offset||m.focusNode!==v.node||m.focusOffset!==v.offset)){var j=u.createRange();j.setStart(g.node,g.offset),m.removeAllRanges(),f>x?(m.addRange(j),m.extend(v.node,v.offset)):(j.setEnd(v.node,v.offset),m.addRange(j))}}}}for(u=[],m=l;m=m.parentNode;)1===m.nodeType&&u.push({element:m,left:m.scrollLeft,top:m.scrollTop});for("function"==typeof l.focus&&l.focus(),l=0;l<u.length;l++){var y=u[l];y.element.scrollLeft=y.left,y.element.scrollTop=y.top}}bh=!!ih,rh=ih=null}finally{pu=n,Ll.p=a,$l.T=s}}e.current=t,Ru=2}}function wi(){if(2===Ru){Ru=0;var e=Wu,t=Ou,s=!!(8772&t.flags);if(8772&t.subtreeFlags||s){s=$l.T,$l.T=null;var a=Ll.p;Ll.p=2;var n=pu;pu|=4;try{Cn(e,t.alternate,t)}finally{pu=n,Ll.p=a,$l.T=s}}Ru=3}}function ki(){if(4===Ru||3===Ru){Ru=0,Jl();var e=Wu,t=Ou,s=Du,a=Uu;10256&t.subtreeFlags||10256&t.flags?Ru=5:(Ru=0,Ou=Wu=null,_i(e,e.pendingLanes));var n=e.pendingLanes;if(0===n&&(Mu=null),A(s),t=t.stateNode,no&&"function"==typeof no.onCommitFiberRoot)try{no.onCommitFiberRoot(ao,t,void 0,!(128&~t.current.flags))}catch(o){}if(null!==a){t=$l.T,n=Ll.p,Ll.p=2,$l.T=null;try{for(var i=e.onRecoverableError,r=0;r<a.length;r++){var l=a[r];i(l.value,{componentStack:l.stack})}}finally{$l.T=t,Ll.p=n}}3&Du&&Si(),Li(e),n=e.pendingLanes,4194090&s&&42&n?e===qu?Xu++:(Xu=0,qu=e):Xu=0,Mi(0)}}function _i(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Tt(t)))}function Si(){return Ni(),wi(),ki(),Ci()}function Ci(){if(5!==Ru)return!1;var e=Wu,s=zu;zu=0;var a=A(Du),n=$l.T,i=Ll.p;try{Ll.p=32>a?32:a,$l.T=null,a=Bu,Bu=null;var r=Wu,l=Du;if(Ru=0,Ou=Wu=null,Du=0,6&pu)throw Error(t(331));var o=pu;if(pu|=4,Yn(r.current),Un(r,r.current,l,a),pu=o,Mi(0,!1),no&&"function"==typeof no.onPostCommitFiberRoot)try{no.onPostCommitFiberRoot(ao,r)}catch(c){}return!0}finally{Ll.p=i,$l.T=n,_i(e,s)}}function Ai(e,t,s){t=He(s,t),null!==(e=Ut(e,t=Ia(e.stateNode,t,2),2))&&(k(e,2),Li(e))}function Pi(e,t,s){if(3===e.tag)Ai(e,e,s);else for(;null!==t;){if(3===t.tag){Ai(t,e,s);break}if(1===t.tag){var a=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof a.componentDidCatch&&(null===Mu||!Mu.has(a))){e=He(s,e),null!==(a=Ut(t,s=$a(2),2))&&(La(s,a,t,e),k(a,2),Li(a));break}}t=t.return}}function Ti(e,t,s){var a=e.pingCache;if(null===a){a=e.pingCache=new mu;var n=new Set;a.set(t,n)}else void 0===(n=a.get(t))&&(n=new Set,a.set(t,n));n.has(s)||(Nu=!0,n.add(s),e=Ei.bind(null,e,t,s),t.then(e,e))}function Ei(e,t,s){var a=e.pingCache;null!==a&&a.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,fu===e&&(gu&s)===s&&(4===ku||3===ku&&(62914560&gu)===gu&&300>Vl()-Iu?!(2&pu)&&oi(e,0):Cu|=s,Pu===gu&&(Pu=0)),Li(e)}function Fi(e,t){0===t&&(t=N()),null!==(e=Ye(e,t))&&(k(e,t),Li(e))}function Ii(e){var t=e.memoizedState,s=0;null!==t&&(s=t.retryLane),Fi(e,s)}function $i(e,s){var a=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;null!==i&&(a=i.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(t(314))}null!==n&&n.delete(s),Fi(e,a)}function Li(e){e!==Ju&&null===e.next&&(null===Ju?Hu=Ju=e:Ju=Ju.next=e),Gu=!0,Vu||(Vu=!0,uh(function(){6&pu?Xl(Yl,Ri):Wi()}))}function Mi(e){if(!Yu&&Gu){Yu=!0;do{for(var t=!1,s=Hu;null!==s;){if(0!==e){var a=s.pendingLanes;if(0===a)var n=0;else{var i=s.suspendedLanes,r=s.pingedLanes;n=(1<<31-io(42|e)+1)-1,n=201326741&(n&=a&~(i&~r))?201326741&n|1:n?2|n:0}0!==n&&(t=!0,zi(s,n))}else n=gu,!(3&(n=v(s,s===fu?n:0,null!==s.cancelPendingCommit||-1!==s.timeoutHandle)))||j(s,n)||(t=!0,zi(s,n));s=s.next}}while(t);Yu=!1}}function Ri(){Wi()}function Wi(){Gu=Vu=!1;var e=0;0!==Ku&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==lh&&(lh=e,!0);return lh=null,!1}()&&(e=Ku),Ku=0);for(var t=Vl(),s=null,a=Hu;null!==a;){var n=a.next,i=Oi(a,t);0===i?(a.next=null,null===s?Hu=n:s.next=n,null===n&&(Ju=s)):(s=a,(0!==e||3&i)&&(Gu=!0)),a=n}Mi(e)}function Oi(e,t){for(var s=e.suspendedLanes,a=e.pingedLanes,n=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var r=31-io(i),l=1<<r,o=n[r];-1===o?0!==(l&s)&&0===(l&a)||(n[r]=y(l,t)):o<=t&&(e.expiredLanes|=l),i&=~l}if(s=gu,s=v(e,e===(t=fu)?s:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),a=e.callbackNode,0===s||e===t&&(2===vu||9===vu)||null!==e.cancelPendingCommit)return null!==a&&null!==a&&ql(a),e.callbackNode=null,e.callbackPriority=0;if(!(3&s)||j(e,s)){if((t=s&-s)===e.callbackPriority)return t;switch(null!==a&&ql(a),A(s)){case 2:case 8:s=Kl;break;case 32:default:s=Ql;break;case 268435456:s=eo}return a=Di.bind(null,e),s=Xl(s,a),e.callbackPriority=t,e.callbackNode=s,t}return null!==a&&null!==a&&ql(a),e.callbackPriority=2,e.callbackNode=null,2}function Di(e,t){if(0!==Ru&&5!==Ru)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Si()&&e.callbackNode!==s)return null;var a=gu;return 0===(a=v(e,e===fu?a:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(si(e,a,t),Oi(e,Vl()),null!=e.callbackNode&&e.callbackNode===s?Di.bind(null,e):null)}function zi(e,t){if(Si())return null;si(e,t,!0)}function Bi(){return 0===Ku&&(Ku=b()),Ku}function Ui(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:ce(""+e)}function Xi(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function qi(e,t){t=!!(4&t);for(var s=0;s<e.length;s++){var a=e[s],n=a.event;a=a.listeners;e:{var i=void 0;if(t)for(var r=a.length-1;0<=r;r--){var l=a[r],o=l.instance,c=l.currentTarget;if(l=l.listener,o!==i&&n.isPropagationStopped())break e;i=l,n.currentTarget=c;try{i(n)}catch(d){Zd(d)}n.currentTarget=null,i=o}else for(r=0;r<a.length;r++){if(o=(l=a[r]).instance,c=l.currentTarget,l=l.listener,o!==i&&n.isPropagationStopped())break e;i=l,n.currentTarget=c;try{i(n)}catch(d){Zd(d)}n.currentTarget=null,i=o}}}}function Hi(e,t){var s=t[fo];void 0===s&&(s=t[fo]=new Set);var a=e+"__bubble";s.has(a)||(Gi(t,e,2,!1),s.add(a))}function Ji(e,t,s){var a=0;t&&(a|=4),Gi(s,e,a,t)}function Vi(e){if(!e[sh]){e[sh]=!0,yo.forEach(function(t){"selectionchange"!==t&&(th.has(t)||Ji(t,!1,e),Ji(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[sh]||(t[sh]=!0,Ji("selectionchange",!1,t))}}function Gi(e,t,s,a){switch(Kr(t)){case 2:var n=Hr;break;case 8:n=Jr;break;default:n=Vr}s=n.bind(null,t,s,e),n=void 0,!Lo||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(n=!0),a?void 0!==n?e.addEventListener(t,s,{capture:!0,passive:n}):e.addEventListener(t,s,!0):void 0!==n?e.addEventListener(t,s,{passive:n}):e.addEventListener(t,s,!1)}function Yi(e,t,s,n,i){var r=n;if(!(1&t||2&t||null===n))e:for(;;){if(null===n)return;var l=n.tag;if(3===l||4===l){var o=n.stateNode.containerInfo;if(o===i)break;if(4===l)for(l=n.return;null!==l;){var c=l.tag;if((3===c||4===c)&&l.stateNode.containerInfo===i)return;l=l.return}for(;null!==o;){if(null===(l=E(o)))return;if(5===(c=l.tag)||6===c||26===c||27===c){n=r=l;continue e}o=o.parentNode}}n=n.return}he(function(){var n=r,i=de(s),l=[];e:{var o=Dc.get(e);if(void 0!==o){var c=Xo,d=e;switch(e){case"keypress":if(0===fe(s))break e;case"keydown":case"keyup":c=ac;break;case"focusin":d="focus",c=Yo;break;case"focusout":d="blur",c=Yo;break;case"beforeblur":case"afterblur":c=Yo;break;case"click":if(2===s.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=Vo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=Go;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=ic;break;case Ic:case $c:case Lc:c=Ko;break;case Oc:c=rc;break;case"scroll":case"scrollend":c=Ho;break;case"wheel":c=lc;break;case"copy":case"cut":case"paste":c=Qo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=nc;break;case"toggle":case"beforetoggle":c=oc}var u=!!(4&t),h=!u&&("scroll"===e||"scrollend"===e),m=u?null!==o?o+"Capture":null:o;u=[];for(var p,f=n;null!==f;){var x=f;if(p=x.stateNode,5!==(x=x.tag)&&26!==x&&27!==x||null===p||null===m||null!=(x=me(f,m))&&u.push(Ki(f,x,p)),h)break;f=f.return}0<u.length&&(o=new c(o,d,null,s,i),l.push({event:o,listeners:u}))}}if(!(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||s===To||!(d=s.relatedTarget||s.fromElement)||!E(d)&&!d[po])&&(c||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=n,null!==(d=(d=s.relatedTarget||s.toElement)?E(d):null)&&(h=a(d),u=d.tag,d!==h||5!==u&&27!==u&&6!==u)&&(d=null)):(c=null,d=n),c!==d)){if(u=Vo,x="onMouseLeave",m="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=nc,x="onPointerLeave",m="onPointerEnter",f="pointer"),h=null==c?o:I(c),p=null==d?o:I(d),(o=new u(x,f+"leave",c,s,i)).target=h,o.relatedTarget=p,x=null,E(i)===n&&((u=new u(m,f+"enter",d,s,i)).target=p,u.relatedTarget=h,x=u),h=x,c&&d)e:{for(m=d,f=0,p=u=c;p;p=Zi(p))f++;for(p=0,x=m;x;x=Zi(x))p++;for(;0<f-p;)u=Zi(u),f--;for(;0<p-f;)m=Zi(m),p--;for(;f--;){if(u===m||null!==m&&u===m.alternate)break e;u=Zi(u),m=Zi(m)}u=null}else u=null;null!==c&&er(l,o,c,u,!1),null!==d&&null!==h&&er(l,h,d,u,!0)}if("select"===(c=(o=n?I(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var g=Pe;else if(ke(o))if(yc)g=Le;else{g=Ie;var v=Fe}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?n&&oe(n.elementType)&&(g=Pe):g=$e;switch(g&&(g=g(e,n))?_e(l,g,s,i):(v&&v(e,o,n),"focusout"===e&&n&&"number"===o.type&&null!=n.memoizedProps.value&&te(o,"number",o.value)),v=n?I(n):window,e){case"focusin":(ke(v)||"true"===v.contentEditable)&&(Sc=v,Cc=n,Ac=null);break;case"focusout":Ac=Cc=Sc=null;break;case"mousedown":Pc=!0;break;case"contextmenu":case"mouseup":case"dragend":Pc=!1,Be(l,s,i);break;case"selectionchange":if(_c)break;case"keydown":case"keyup":Be(l,s,i)}var j;if(dc)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else xc?be(e,s)&&(y="onCompositionEnd"):"keydown"===e&&229===s.keyCode&&(y="onCompositionStart");y&&(mc&&"ko"!==s.locale&&(xc||"onCompositionStart"!==y?"onCompositionEnd"===y&&xc&&(j=pe()):(zo="value"in(Do=i)?Do.value:Do.textContent,xc=!0)),0<(v=Qi(n,y)).length&&(y=new Zo(y,e,null,s,i),l.push({event:y,listeners:v}),j?y.data=j:null!==(j=we(s))&&(y.data=j))),(j=hc?function(e,t){switch(e){case"compositionend":return we(t);case"keypress":return 32!==t.which?null:(fc=!0,pc);case"textInput":return(e=t.data)===pc&&fc?null:e;default:return null}}(e,s):function(e,t){if(xc)return"compositionend"===e||!dc&&be(e,t)?(e=pe(),Bo=zo=Do=null,xc=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return mc&&"ko"!==t.locale?null:t.data}}(e,s))&&(0<(y=Qi(n,"onBeforeInput")).length&&(v=new Zo("onBeforeInput","beforeinput",null,s,i),l.push({event:v,listeners:y}),v.data=j)),function(e,t,s,a,n){if("submit"===t&&s&&s.stateNode===n){var i=Ui((n[mo]||null).action),r=a.submitter;r&&null!==(t=(t=r[mo]||null)?Ui(t.formAction):r.getAttribute("formAction"))&&(i=t,r=null);var l=new Xo("action","action",null,a,n);e.push({event:l,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(0!==Ku){var e=r?Xi(n,r):new FormData(n);ea(s,{pending:!0,data:e,method:n.method,action:i},null,e)}}else"function"==typeof i&&(l.preventDefault(),e=r?Xi(n,r):new FormData(n),ea(s,{pending:!0,data:e,method:n.method,action:i},i,e))},currentTarget:n}]})}}(l,e,n,s,i)}qi(l,t)})}function Ki(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Qi(e,t){for(var s=t+"Capture",a=[];null!==e;){var n=e,i=n.stateNode;if(5!==(n=n.tag)&&26!==n&&27!==n||null===i||(null!=(n=me(e,s))&&a.unshift(Ki(e,n,i)),null!=(n=me(e,t))&&a.push(Ki(e,n,i))),3===e.tag)return a;e=e.return}return[]}function Zi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function er(e,t,s,a,n){for(var i=t._reactName,r=[];null!==s&&s!==a;){var l=s,o=l.alternate,c=l.stateNode;if(l=l.tag,null!==o&&o===a)break;5!==l&&26!==l&&27!==l||null===c||(o=c,n?null!=(c=me(s,i))&&r.unshift(Ki(s,c,o)):n||null!=(c=me(s,i))&&r.push(Ki(s,c,o))),s=s.return}0!==r.length&&e.push({event:t,listeners:r})}function tr(e){return("string"==typeof e?e:""+e).replace(ah,"\n").replace(nh,"")}function sr(e,t){return t=tr(t),tr(e)===t}function ar(){}function nr(e,s,a,n,i,r){switch(a){case"children":"string"==typeof n?"body"===s||"textarea"===s&&""===n||ie(e,n):("number"==typeof n||"bigint"==typeof n)&&"body"!==s&&ie(e,""+n);break;case"className":z(e,"class",n);break;case"tabIndex":z(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":z(e,a,n);break;case"style":le(e,n,r);break;case"data":if("object"!==s){z(e,"data",n);break}case"src":case"href":if(""===n&&("a"!==s||"href"!==a)){e.removeAttribute(a);break}if(null==n||"function"==typeof n||"symbol"==typeof n||"boolean"==typeof n){e.removeAttribute(a);break}n=ce(""+n),e.setAttribute(a,n);break;case"action":case"formAction":if("function"==typeof n){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof r&&("formAction"===a?("input"!==s&&nr(e,s,"name",i.name,i,null),nr(e,s,"formEncType",i.formEncType,i,null),nr(e,s,"formMethod",i.formMethod,i,null),nr(e,s,"formTarget",i.formTarget,i,null)):(nr(e,s,"encType",i.encType,i,null),nr(e,s,"method",i.method,i,null),nr(e,s,"target",i.target,i,null))),null==n||"symbol"==typeof n||"boolean"==typeof n){e.removeAttribute(a);break}n=ce(""+n),e.setAttribute(a,n);break;case"onClick":null!=n&&(e.onclick=ar);break;case"onScroll":null!=n&&Hi("scroll",e);break;case"onScrollEnd":null!=n&&Hi("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!=typeof n||!("__html"in n))throw Error(t(61));if(null!=(a=n.__html)){if(null!=i.children)throw Error(t(60));e.innerHTML=a}}break;case"multiple":e.multiple=n&&"function"!=typeof n&&"symbol"!=typeof n;break;case"muted":e.muted=n&&"function"!=typeof n&&"symbol"!=typeof n;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==n||"function"==typeof n||"boolean"==typeof n||"symbol"==typeof n){e.removeAttribute("xlink:href");break}a=ce(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=n&&"function"!=typeof n&&"symbol"!=typeof n?e.setAttribute(a,""+n):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&"function"!=typeof n&&"symbol"!=typeof n?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":!0===n?e.setAttribute(a,""):!1!==n&&null!=n&&"function"!=typeof n&&"symbol"!=typeof n?e.setAttribute(a,n):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":null!=n&&"function"!=typeof n&&"symbol"!=typeof n&&!isNaN(n)&&1<=n?e.setAttribute(a,n):e.removeAttribute(a);break;case"rowSpan":case"start":null==n||"function"==typeof n||"symbol"==typeof n||isNaN(n)?e.removeAttribute(a):e.setAttribute(a,n);break;case"popover":Hi("beforetoggle",e),Hi("toggle",e),D(e,"popover",n);break;case"xlinkActuate":B(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":B(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":B(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":B(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":B(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":B(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":B(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":B(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":B(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":D(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<a.length)||"o"!==a[0]&&"O"!==a[0]||"n"!==a[1]&&"N"!==a[1])&&D(e,a=Ao.get(a)||a,n)}}function ir(e,s,a,n,i,r){switch(a){case"style":le(e,n,r);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!=typeof n||!("__html"in n))throw Error(t(61));if(null!=(a=n.__html)){if(null!=i.children)throw Error(t(60));e.innerHTML=a}}break;case"children":"string"==typeof n?ie(e,n):("number"==typeof n||"bigint"==typeof n)&&ie(e,""+n);break;case"onScroll":null!=n&&Hi("scroll",e);break;case"onScrollEnd":null!=n&&Hi("scrollend",e);break;case"onClick":null!=n&&(e.onclick=ar);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:bo.hasOwnProperty(a)||("o"!==a[0]||"n"!==a[1]||(i=a.endsWith("Capture"),s=a.slice(2,i?a.length-7:void 0),"function"==typeof(r=null!=(r=e[mo]||null)?r[a]:null)&&e.removeEventListener(s,r,i),"function"!=typeof n)?a in e?e[a]=n:!0===n?e.setAttribute(a,""):D(e,a,n):("function"!=typeof r&&null!==r&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(s,n,i)))}}function rr(e,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Hi("error",e),Hi("load",e);var n,i=!1,r=!1;for(n in a)if(a.hasOwnProperty(n)){var l=a[n];if(null!=l)switch(n){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(t(137,s));default:nr(e,s,n,l,a,null)}}return r&&nr(e,s,"srcSet",a.srcSet,a,null),void(i&&nr(e,s,"src",a.src,a,null));case"input":Hi("invalid",e);var o=n=l=r=null,c=null,d=null;for(i in a)if(a.hasOwnProperty(i)){var u=a[i];if(null!=u)switch(i){case"name":r=u;break;case"type":l=u;break;case"checked":c=u;break;case"defaultChecked":d=u;break;case"value":n=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(t(137,s));break;default:nr(e,s,i,u,a,null)}}return ee(e,n,o,c,d,l,r,!1),void G(e);case"select":for(r in Hi("invalid",e),i=l=n=null,a)if(a.hasOwnProperty(r)&&null!=(o=a[r]))switch(r){case"value":n=o;break;case"defaultValue":l=o;break;case"multiple":i=o;default:nr(e,s,r,o,a,null)}return s=n,a=l,e.multiple=!!i,void(null!=s?se(e,!!i,s,!1):null!=a&&se(e,!!i,a,!0));case"textarea":for(l in Hi("invalid",e),n=r=i=null,a)if(a.hasOwnProperty(l)&&null!=(o=a[l]))switch(l){case"value":i=o;break;case"defaultValue":r=o;break;case"children":n=o;break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(t(91));break;default:nr(e,s,l,o,a,null)}return ne(e,i,r,n),void G(e);case"option":for(c in a)if(a.hasOwnProperty(c)&&null!=(i=a[c]))if("selected"===c)e.selected=i&&"function"!=typeof i&&"symbol"!=typeof i;else nr(e,s,c,i,a,null);return;case"dialog":Hi("beforetoggle",e),Hi("toggle",e),Hi("cancel",e),Hi("close",e);break;case"iframe":case"object":Hi("load",e);break;case"video":case"audio":for(i=0;i<eh.length;i++)Hi(eh[i],e);break;case"image":Hi("error",e),Hi("load",e);break;case"details":Hi("toggle",e);break;case"embed":case"source":case"link":Hi("error",e),Hi("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in a)if(a.hasOwnProperty(d)&&null!=(i=a[d]))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(t(137,s));default:nr(e,s,d,i,a,null)}return;default:if(oe(s)){for(u in a)a.hasOwnProperty(u)&&(void 0!==(i=a[u])&&ir(e,s,u,i,a,void 0));return}}for(o in a)a.hasOwnProperty(o)&&(null!=(i=a[o])&&nr(e,s,o,i,a,null))}function lr(e){return 9===e.nodeType?e:e.ownerDocument}function or(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cr(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function dr(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}function ur(e){setTimeout(function(){throw e})}function hr(e){return"head"===e}function mr(e,t){var s=t,a=0,n=0;do{var i=s.nextSibling;if(e.removeChild(s),i&&8===i.nodeType)if("/$"===(s=i.data)){if(0<a&&8>a){s=a;var r=e.ownerDocument;if(1&s&&jr(r.documentElement),2&s&&jr(r.body),4&s)for(jr(s=r.head),r=s.firstChild;r;){var l=r.nextSibling,o=r.nodeName;r[jo]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===r.rel.toLowerCase()||s.removeChild(r),r=l}}if(0===n)return e.removeChild(i),void rl(t);n--}else"$"===s||"$?"===s||"$!"===s?n++:a=s.charCodeAt(0)-48;else a=0;s=i}while(s);rl(t)}function pr(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":pr(s),T(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===s.rel.toLowerCase())continue}e.removeChild(s)}}function fr(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function xr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}function gr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var s=e.data;if("$"===s||"$!"===s||"$?"===s){if(0===t)return e;t--}else"/$"===s&&t++}e=e.previousSibling}return null}function vr(e,s,a){switch(s=lr(a),e){case"html":if(!(e=s.documentElement))throw Error(t(452));return e;case"head":if(!(e=s.head))throw Error(t(453));return e;case"body":if(!(e=s.body))throw Error(t(454));return e;default:throw Error(t(451))}}function jr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);T(e)}function yr(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}function br(e,t,s){var a=xh;if(a&&"string"==typeof t&&t){var n=Q(t);n='link[rel="'+e+'"][href="'+n+'"]',"string"==typeof s&&(n+='[crossorigin="'+s+'"]'),ph.has(n)||(ph.add(n),e={rel:e,crossOrigin:s,href:t},null===a.querySelector(n)&&(rr(t=a.createElement("link"),"link",e),L(t),a.head.appendChild(t)))}}function Nr(e,s,a,n){var i,r,l,o,c=(c=zl.current)?yr(c):null;if(!c)throw Error(t(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof a.precedence&&"string"==typeof a.href?(s=wr(a.href),(n=(a=$(c).hoistableStyles).get(s))||(n={type:"style",instance:null,count:0,state:null},a.set(s,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===a.rel&&"string"==typeof a.href&&"string"==typeof a.precedence){e=wr(a.href);var d=$(c).hoistableStyles,u=d.get(e);if(u||(c=c.ownerDocument||c,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,u),(d=c.querySelector(kr(e)))&&!d._p&&(u.instance=d,u.state.loading=5),mh.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},mh.set(e,a),d||(i=c,r=e,l=a,o=u.state,i.querySelector('link[rel="preload"][as="style"]['+r+"]")?o.loading=1:(r=i.createElement("link"),o.preload=r,r.addEventListener("load",function(){return o.loading|=1}),r.addEventListener("error",function(){return o.loading|=2}),rr(r,"link",l),L(r),i.head.appendChild(r))))),s&&null===n)throw Error(t(528,""));return u}if(s&&null!==n)throw Error(t(529,""));return null;case"script":return s=a.async,"string"==typeof(a=a.src)&&s&&"function"!=typeof s&&"symbol"!=typeof s?(s=Sr(a),(n=(a=$(c).hoistableScripts).get(s))||(n={type:"script",instance:null,count:0,state:null},a.set(s,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(t(444,e))}}function wr(e){return'href="'+Q(e)+'"'}function kr(e){return'link[rel="stylesheet"]['+e+"]"}function _r(e){return pl({},e,{"data-precedence":e.precedence,precedence:null})}function Sr(e){return'[src="'+Q(e)+'"]'}function Cr(e){return"script[async]"+e}function Ar(e,s,a){if(s.count++,null===s.instance)switch(s.type){case"style":var n=e.querySelector('style[data-href~="'+Q(a.href)+'"]');if(n)return s.instance=n,L(n),n;var i=pl({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return L(n=(e.ownerDocument||e).createElement("style")),rr(n,"style",i),Pr(n,a.precedence,e),s.instance=n;case"stylesheet":i=wr(a.href);var r=e.querySelector(kr(i));if(r)return s.state.loading|=4,s.instance=r,L(r),r;n=_r(a),(i=mh.get(i))&&Tr(n,i),L(r=(e.ownerDocument||e).createElement("link"));var l=r;return l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),rr(r,"link",n),s.state.loading|=4,Pr(r,a.precedence,e),s.instance=r;case"script":return r=Sr(a.src),(i=e.querySelector(Cr(r)))?(s.instance=i,L(i),i):(n=a,(i=mh.get(r))&&Er(n=pl({},a),i),L(i=(e=e.ownerDocument||e).createElement("script")),rr(i,"link",n),e.head.appendChild(i),s.instance=i);case"void":return null;default:throw Error(t(443,s.type))}else"stylesheet"===s.type&&!(4&s.state.loading)&&(n=s.instance,s.state.loading|=4,Pr(n,a.precedence,e));return s.instance}function Pr(e,t,s){for(var a=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=a.length?a[a.length-1]:null,i=n,r=0;r<a.length;r++){var l=a[r];if(l.dataset.precedence===t)i=l;else if(i!==n)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===s.nodeType?s.head:s).insertBefore(e,t.firstChild)}function Tr(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Er(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}function Fr(e,t,s){if(null===gh){var a=new Map,n=gh=new Map;n.set(s,a)}else(a=(n=gh).get(s))||(a=new Map,n.set(s,a));if(a.has(e))return a;for(a.set(e,null),s=s.getElementsByTagName(e),n=0;n<s.length;n++){var i=s[n];if(!(i[jo]||i[ho]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var r=i.getAttribute(t)||"";r=e+r;var l=a.get(r);l?l.push(i):a.set(r,[i])}}return a}function Ir(e,t,s){(e=e.ownerDocument||e).head.insertBefore(s,"title"===t?e.querySelector("head > title"):null)}function $r(e){return!!("stylesheet"!==e.type||3&e.state.loading)}function Lr(){}function Mr(){if(this.count--,0===this.count)if(this.stylesheets)Rr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}function Rr(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,jh=new Map,t.forEach(Wr,e),jh=null,Mr.call(e))}function Wr(e,t){if(!(4&t.state.loading)){var s=jh.get(e);if(s)var a=s.get(null);else{s=new Map,jh.set(e,s);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<n.length;i++){var r=n[i];"LINK"!==r.nodeName&&"not all"===r.getAttribute("media")||(s.set(r.dataset.precedence,r),a=r)}a&&s.set(null,a)}r=(n=t.instance).getAttribute("data-precedence"),(i=s.get(r)||a)===a&&s.set(null,n),s.set(r,n),this.count++,a=Mr.bind(this),n.addEventListener("load",a),n.addEventListener("error",a),i?i.parentNode.insertBefore(n,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(n,e.firstChild),t.state.loading|=4}}function Or(e,t,s,a,n,i,r,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=w(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=w(0),this.hiddenUpdates=w(null),this.identifierPrefix=a,this.onUncaughtError=n,this.onCaughtError=i,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function Dr(e,t,s,a,n,i,r,l,o,c,d,u){return e=new Or(e,t,s,r,l,o,c,u),t=1,!0===i&&(t|=24),i=et(3,null,null,t),e.current=i,i.stateNode=e,(t=Pt()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:a,isDehydrated:s,cache:t},Dt(i),e}function zr(e){return e?e=Hc:Hc}function Br(e,t,s,a,n,i){n=zr(n),null===a.context?a.context=n:a.pendingContext=n,(a=Bt(t)).payload={element:s},null!==(i=void 0===i?null:i)&&(a.callback=i),null!==(s=Ut(e,a,t))&&(ti(s,0,t),Xt(s,e,t))}function Ur(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var s=e.retryLane;e.retryLane=0!==s&&s<t?s:t}}function Xr(e,t){Ur(e,t),(e=e.alternate)&&Ur(e,t)}function qr(e){if(13===e.tag){var t=Ye(e,67108864);null!==t&&ti(t,0,67108864),Xr(e,67108864)}}function Hr(e,t,s,a){var n=$l.T;$l.T=null;var i=Ll.p;try{Ll.p=2,Vr(e,t,s,a)}finally{Ll.p=i,$l.T=n}}function Jr(e,t,s,a){var n=$l.T;$l.T=null;var i=Ll.p;try{Ll.p=8,Vr(e,t,s,a)}finally{Ll.p=i,$l.T=n}}function Vr(e,t,s,a){if(bh){var n=Gr(a);if(null===n)Yi(e,t,a,Nh,s),Qr(e,a);else if(function(e,t,s,a,n){switch(t){case"focusin":return kh=Zr(kh,e,t,s,a,n),!0;case"dragenter":return _h=Zr(_h,e,t,s,a,n),!0;case"mouseover":return Sh=Zr(Sh,e,t,s,a,n),!0;case"pointerover":var i=n.pointerId;return Ch.set(i,Zr(Ch.get(i)||null,e,t,s,a,n)),!0;case"gotpointercapture":return i=n.pointerId,Ah.set(i,Zr(Ah.get(i)||null,e,t,s,a,n)),!0}return!1}(n,e,t,s,a))a.stopPropagation();else if(Qr(e,a),4&t&&-1<Th.indexOf(e)){for(;null!==n;){var i=F(n);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var r=g(i.pendingLanes);if(0!==r){var l=i;for(l.pendingLanes|=2,l.entangledLanes|=2;r;){var o=1<<31-io(r);l.entanglements[1]|=o,r&=~o}Li(i),!(6&pu)&&($u=Vl()+500,Mi(0))}}break;case 13:null!==(l=Ye(i,2))&&ti(l,0,2),ri(),Xr(i,2)}if(null===(i=Gr(a))&&Yi(e,t,a,Nh,s),i===n)break;n=i}null!==n&&a.stopPropagation()}else Yi(e,t,a,null,s)}}function Gr(e){return Yr(e=de(e))}function Yr(e){if(Nh=null,null!==(e=E(e))){var t=a(e);if(null===t)e=null;else{var s=t.tag;if(13===s){if(null!==(e=n(t)))return e;e=null}else if(3===s){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Nh=e,null}function Kr(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gl()){case Yl:return 2;case Kl:return 8;case Ql:case Zl:return 32;case eo:return 268435456;default:return 32}default:return 32}}function Qr(e,t){switch(e){case"focusin":case"focusout":kh=null;break;case"dragenter":case"dragleave":_h=null;break;case"mouseover":case"mouseout":Sh=null;break;case"pointerover":case"pointerout":Ch.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ah.delete(t.pointerId)}}function Zr(e,t,s,a,n,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:s,eventSystemFlags:a,nativeEvent:i,targetContainers:[n]},null!==t&&(null!==(t=F(t))&&qr(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==n&&-1===t.indexOf(n)&&t.push(n),e)}function el(e){var t=E(e.target);if(null!==t){var s=a(t);if(null!==s)if(13===(t=s.tag)){if(null!==(t=n(s)))return e.blockedOn=t,void function(e,t){var s=Ll.p;try{return Ll.p=e,t()}finally{Ll.p=s}}(e.priority,function(){if(13===s.tag){var e=Zn();e=C(e);var t=Ye(s,e);null!==t&&ti(t,0,e),Xr(s,e)}})}else if(3===t&&s.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===s.tag?s.stateNode.containerInfo:null)}e.blockedOn=null}function tl(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var s=Gr(e.nativeEvent);if(null!==s)return null!==(t=F(s))&&qr(t),e.blockedOn=s,!1;var a=new(s=e.nativeEvent).constructor(s.type,s);To=a,s.target.dispatchEvent(a),To=null,t.shift()}return!0}function sl(e,t,s){tl(e)&&s.delete(t)}function al(){wh=!1,null!==kh&&tl(kh)&&(kh=null),null!==_h&&tl(_h)&&(_h=null),null!==Sh&&tl(Sh)&&(Sh=null),Ch.forEach(sl),Ah.forEach(sl)}function nl(e,t){e.blockedOn===t&&(e.blockedOn=null,wh||(wh=!0,ul.unstable_scheduleCallback(ul.unstable_NormalPriority,al)))}function il(e){Eh!==e&&(Eh=e,ul.unstable_scheduleCallback(ul.unstable_NormalPriority,function(){Eh===e&&(Eh=null);for(var t=0;t<e.length;t+=3){var s=e[t],a=e[t+1],n=e[t+2];if("function"!=typeof a){if(null===Yr(a||s))continue;break}var i=F(s);null!==i&&(e.splice(t,3),t-=3,ea(i,{pending:!0,data:n,method:s.method,action:a},a,n))}}))}function rl(e){function t(t){return nl(t,e)}null!==kh&&nl(kh,e),null!==_h&&nl(_h,e),null!==Sh&&nl(Sh,e),Ch.forEach(t),Ah.forEach(t);for(var s=0;s<Ph.length;s++){var a=Ph[s];a.blockedOn===e&&(a.blockedOn=null)}for(;0<Ph.length&&null===(s=Ph[0]).blockedOn;)el(s),null===s.blockedOn&&Ph.shift();if(null!=(s=(e.ownerDocument||e).$$reactFormReplay))for(a=0;a<s.length;a+=3){var n=s[a],i=s[a+1],r=n[mo]||null;if("function"==typeof i)r||il(s);else if(r){var l=null;if(i&&i.hasAttribute("formAction")){if(n=i,r=i[mo]||null)l=r.formAction;else if(null!==Yr(n))continue}else l=r.action;"function"==typeof l?s[a+1]=l:(s.splice(a,3),a-=3),il(s)}}}function ll(e){this._internalRoot=e}function ol(e){this._internalRoot=e}if(Ne)return Ae;Ne=1;var cl,dl,ul=e(),hl=R(),ml=W(),pl=Object.assign,fl=Symbol.for("react.element"),xl=Symbol.for("react.transitional.element"),gl=Symbol.for("react.portal"),vl=Symbol.for("react.fragment"),jl=Symbol.for("react.strict_mode"),yl=Symbol.for("react.profiler"),bl=Symbol.for("react.provider"),Nl=Symbol.for("react.consumer"),wl=Symbol.for("react.context"),kl=Symbol.for("react.forward_ref"),_l=Symbol.for("react.suspense"),Sl=Symbol.for("react.suspense_list"),Cl=Symbol.for("react.memo"),Al=Symbol.for("react.lazy"),Pl=Symbol.for("react.activity"),Tl=Symbol.for("react.memo_cache_sentinel"),El=Symbol.iterator,Fl=Symbol.for("react.client.reference"),Il=Array.isArray,$l=hl.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ll=ml.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ml={pending:!1,data:null,method:null,action:null},Rl=[],Wl=-1,Ol=c(null),Dl=c(null),zl=c(null),Bl=c(null),Ul=Object.prototype.hasOwnProperty,Xl=ul.unstable_scheduleCallback,ql=ul.unstable_cancelCallback,Hl=ul.unstable_shouldYield,Jl=ul.unstable_requestPaint,Vl=ul.unstable_now,Gl=ul.unstable_getCurrentPriorityLevel,Yl=ul.unstable_ImmediatePriority,Kl=ul.unstable_UserBlockingPriority,Ql=ul.unstable_NormalPriority,Zl=ul.unstable_LowPriority,eo=ul.unstable_IdlePriority,to=ul.log,so=ul.unstable_setDisableYieldValue,ao=null,no=null,io=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ro(e)/lo|0)|0},ro=Math.log,lo=Math.LN2,oo=256,co=4194304,uo=Math.random().toString(36).slice(2),ho="__reactFiber$"+uo,mo="__reactProps$"+uo,po="__reactContainer$"+uo,fo="__reactEvents$"+uo,xo="__reactListeners$"+uo,go="__reactHandles$"+uo,vo="__reactResources$"+uo,jo="__reactMarker$"+uo,yo=new Set,bo={},No=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wo={},ko={},_o=!1,So=/[\n"\\]/g,Co=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" ")),Ao=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Po=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i,To=null,Eo=null,Fo=null,Io=!1,$o=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Lo=!1;if($o)try{var Mo={};Object.defineProperty(Mo,"passive",{get:function(){Lo=!0}}),window.addEventListener("test",Mo,Mo),window.removeEventListener("test",Mo,Mo)}catch(Lh){Lo=!1}var Ro,Wo,Oo,Do=null,zo=null,Bo=null,Uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xo=ve(Uo),qo=pl({},Uo,{view:0,detail:0}),Ho=ve(qo),Jo=pl({},qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ye,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Oo&&(Oo&&"mousemove"===e.type?(Ro=e.screenX-Oo.screenX,Wo=e.screenY-Oo.screenY):Wo=Ro=0,Oo=e),Ro)},movementY:function(e){return"movementY"in e?e.movementY:Wo}}),Vo=ve(Jo),Go=ve(pl({},Jo,{dataTransfer:0})),Yo=ve(pl({},qo,{relatedTarget:0})),Ko=ve(pl({},Uo,{animationName:0,elapsedTime:0,pseudoElement:0})),Qo=ve(pl({},Uo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),Zo=ve(pl({},Uo,{data:0})),ec={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},ac=ve(pl({},qo,{key:function(e){if(e.key){var t=ec[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=fe(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?tc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ye,charCode:function(e){return"keypress"===e.type?fe(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?fe(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),nc=ve(pl({},Jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),ic=ve(pl({},qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ye})),rc=ve(pl({},Uo,{propertyName:0,elapsedTime:0,pseudoElement:0})),lc=ve(pl({},Jo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),oc=ve(pl({},Uo,{newState:0,oldState:0})),cc=[9,13,27,32],dc=$o&&"CompositionEvent"in window,uc=null;$o&&"documentMode"in document&&(uc=document.documentMode);var hc=$o&&"TextEvent"in window&&!uc,mc=$o&&(!dc||uc&&8<uc&&11>=uc),pc=String.fromCharCode(32),fc=!1,xc=!1,gc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},vc=null,jc=null,yc=!1;if($o){var bc;if($o){var Nc="oninput"in document;if(!Nc){var wc=document.createElement("div");wc.setAttribute("oninput","return;"),Nc="function"==typeof wc.oninput}bc=Nc}else bc=!1;yc=bc&&(!document.documentMode||9<document.documentMode)}var kc="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},_c=$o&&"documentMode"in document&&11>=document.documentMode,Sc=null,Cc=null,Ac=null,Pc=!1,Tc={animationend:Ue("Animation","AnimationEnd"),animationiteration:Ue("Animation","AnimationIteration"),animationstart:Ue("Animation","AnimationStart"),transitionrun:Ue("Transition","TransitionRun"),transitionstart:Ue("Transition","TransitionStart"),transitioncancel:Ue("Transition","TransitionCancel"),transitionend:Ue("Transition","TransitionEnd")},Ec={},Fc={};$o&&(Fc=document.createElement("div").style,"AnimationEvent"in window||(delete Tc.animationend.animation,delete Tc.animationiteration.animation,delete Tc.animationstart.animation),"TransitionEvent"in window||delete Tc.transitionend.transition);var Ic=Xe("animationend"),$c=Xe("animationiteration"),Lc=Xe("animationstart"),Mc=Xe("transitionrun"),Rc=Xe("transitionstart"),Wc=Xe("transitioncancel"),Oc=Xe("transitionend"),Dc=new Map,zc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zc.push("scrollEnd");var Bc=new WeakMap,Uc=[],Xc=0,qc=0,Hc={},Jc=[],Vc=0,Gc=null,Yc=0,Kc=[],Qc=0,Zc=null,ed=1,td="",sd=null,ad=null,nd=!1,id=null,rd=!1,ld=Error(t(519)),od=c(null),cd=null,dd=null,ud="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},hd=ul.unstable_scheduleCallback,md=ul.unstable_NormalPriority,pd={$$typeof:wl,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},fd=null,xd=0,gd=0,vd=null,jd=$l.S;$l.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===fd){var s=fd=[];xd=0,gd=Bi(),vd={status:"pending",value:void 0,then:function(e){s.push(e)}}}xd++,t.then(Et,Et)}(0,t),null!==jd&&jd(e,t)};for(var yd=c(null),bd=Error(t(460)),Nd=Error(t(474)),wd=Error(t(542)),kd={then:function(){}},_d=null,Sd=!1,Cd=!1,Ad=c(null),Pd=c(0),Td=0,Ed=null,Fd=null,Id=null,$d=!1,Ld=!1,Md=!1,Rd=0,Wd=0,Od=null,Dd=0,zd={readContext:St,use:us,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useLayoutEffect:Zt,useInsertionEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useSyncExternalStore:Zt,useId:Zt,useHostTransitionStatus:Zt,useFormState:Zt,useActionState:Zt,useOptimistic:Zt,useMemoCache:Zt,useCacheRefresh:Zt},Bd={readContext:St,use:us,useCallback:function(e,t){return os().memoizedState=[e,void 0===t?null:t],e},useContext:St,useEffect:zs,useImperativeHandle:function(e,t,s){s=null!=s?s.concat([e]):null,Os(4194308,4,qs.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Os(4194308,4,e,t)},useInsertionEffect:function(e,t){Os(4,2,e,t)},useMemo:function(e,t){var s=os();t=void 0===t?null:t;var a=e();if(Md){x(!0);try{e()}finally{x(!1)}}return s.memoizedState=[a,t],a},useReducer:function(e,t,s){var a=os();if(void 0!==s){var n=s(t);if(Md){x(!0);try{s(t)}finally{x(!1)}}}else n=t;return a.memoizedState=a.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},a.queue=e,e=e.dispatch=la.bind(null,Ed,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},os().memoizedState=e},useState:function(e){var t=(e=ws(e)).queue,s=oa.bind(null,Ed,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:Js,useDeferredValue:function(e,t){return Ys(os(),e,t)},useTransition:function(){var e=ws(!1);return e=Qs.bind(null,Ed,e.queue,!0,!1),os().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,s,a){var n=Ed,i=os();if(nd){if(void 0===a)throw Error(t(407));a=a()}else{if(a=s(),null===fu)throw Error(t(349));124&gu||vs(n,s,a)}i.memoizedState=a;var r={value:a,getSnapshot:s};return i.queue=r,zs(ys.bind(null,n,r,e),[e]),n.flags|=2048,Rs(9,{destroy:void 0,resource:void 0},js.bind(null,n,r,a,s),null),a},useId:function(){var e=os(),t=fu.identifierPrefix;if(nd){var s=td;t="\xab"+t+"R"+(s=(ed&~(1<<32-io(ed)-1)).toString(32)+s),0<(s=Rd++)&&(t+="H"+s.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(s=Dd++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:aa,useFormState:Fs,useActionState:Fs,useOptimistic:function(e){var t=os();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=da.bind(null,Ed,!0,s),s.dispatch=t,[e,t]},useMemoCache:hs,useCacheRefresh:function(){return os().memoizedState=ra.bind(null,Ed)}},Ud={readContext:St,use:us,useCallback:Vs,useContext:St,useEffect:Bs,useImperativeHandle:Hs,useInsertionEffect:Us,useLayoutEffect:Xs,useMemo:Gs,useReducer:ps,useRef:Ws,useState:function(){return ps(ms)},useDebugValue:Js,useDeferredValue:function(e,t){return Ks(cs(),Fd.memoizedState,e,t)},useTransition:function(){var e=ps(ms)[0],t=cs().memoizedState;return["boolean"==typeof e?e:ds(e),t]},useSyncExternalStore:gs,useId:na,useHostTransitionStatus:aa,useFormState:Is,useActionState:Is,useOptimistic:function(e,t){return ks(cs(),0,e,t)},useMemoCache:hs,useCacheRefresh:ia},Xd={readContext:St,use:us,useCallback:Vs,useContext:St,useEffect:Bs,useImperativeHandle:Hs,useInsertionEffect:Us,useLayoutEffect:Xs,useMemo:Gs,useReducer:xs,useRef:Ws,useState:function(){return xs(ms)},useDebugValue:Js,useDeferredValue:function(e,t){var s=cs();return null===Fd?Ys(s,e,t):Ks(s,Fd.memoizedState,e,t)},useTransition:function(){var e=xs(ms)[0],t=cs().memoizedState;return["boolean"==typeof e?e:ds(e),t]},useSyncExternalStore:gs,useId:na,useHostTransitionStatus:aa,useFormState:Ms,useActionState:Ms,useOptimistic:function(e,t){var s=cs();return null!==Fd?ks(s,0,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:hs,useCacheRefresh:ia},qd=null,Hd=0,Jd=va(!0),Vd=va(!1),Gd=c(null),Yd=null,Kd=c(0),Qd={enqueueSetState:function(e,t,s){e=e._reactInternals;var a=Zn(),n=Bt(a);n.payload=t,null!=s&&(n.callback=s),null!==(t=Ut(e,n,a))&&(ti(t,0,a),Xt(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var a=Zn(),n=Bt(a);n.tag=1,n.payload=t,null!=s&&(n.callback=s),null!==(t=Ut(e,n,a))&&(ti(t,0,a),Xt(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Zn(),a=Bt(s);a.tag=2,null!=t&&(a.callback=t),null!==(t=Ut(e,a,s))&&(ti(t,0,s),Xt(t,e,s))}},Zd="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},eu=Error(t(461)),tu=!1,su={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},au=!1,nu=!1,iu=!1,ru="function"==typeof WeakSet?WeakSet:Set,lu=null,ou=null,cu=!1,du=null,uu=8192,hu={getCacheForType:function(e){var t=St(pd),s=t.data.get(e);return void 0===s&&(s=e(),t.data.set(e,s)),s}},mu="function"==typeof WeakMap?WeakMap:Map,pu=0,fu=null,xu=null,gu=0,vu=0,ju=null,yu=!1,bu=!1,Nu=!1,wu=0,ku=0,_u=0,Su=0,Cu=0,Au=0,Pu=0,Tu=null,Eu=null,Fu=!1,Iu=0,$u=1/0,Lu=null,Mu=null,Ru=0,Wu=null,Ou=null,Du=0,zu=0,Bu=null,Uu=null,Xu=0,qu=null,Hu=null,Ju=null,Vu=!1,Gu=!1,Yu=!1,Ku=0,Qu=0;Qu<zc.length;Qu++){var Zu=zc[Qu];qe(Zu.toLowerCase(),"on"+(Zu[0].toUpperCase()+Zu.slice(1)))}qe(Ic,"onAnimationEnd"),qe($c,"onAnimationIteration"),qe(Lc,"onAnimationStart"),qe("dblclick","onDoubleClick"),qe("focusin","onFocus"),qe("focusout","onBlur"),qe(Mc,"onTransitionRun"),qe(Rc,"onTransitionStart"),qe(Wc,"onTransitionCancel"),qe(Oc,"onTransitionEnd"),O("onMouseEnter",["mouseout","mouseover"]),O("onMouseLeave",["mouseout","mouseover"]),O("onPointerEnter",["pointerout","pointerover"]),O("onPointerLeave",["pointerout","pointerover"]),M("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),M("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),M("onBeforeInput",["compositionend","keypress","textInput","paste"]),M("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),M("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),M("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),th=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(eh)),sh="_reactListening"+Math.random().toString(36).slice(2),ah=/\r\n?/g,nh=/\u0000|\uFFFD/g,ih=null,rh=null,lh=null,oh="function"==typeof setTimeout?setTimeout:void 0,ch="function"==typeof clearTimeout?clearTimeout:void 0,dh="function"==typeof Promise?Promise:void 0,uh="function"==typeof queueMicrotask?queueMicrotask:void 0!==dh?function(e){return dh.resolve(null).then(e).catch(ur)}:oh,hh=null,mh=new Map,ph=new Set,fh=Ll.d;Ll.d={f:function(){var e=fh.f(),t=ri();return e||t},r:function(e){var t=F(e);null!==t&&5===t.tag&&"form"===t.type?sa(t):fh.r(e)},D:function(e){fh.D(e),br("dns-prefetch",e,null)},C:function(e,t){fh.C(e,t),br("preconnect",e,t)},L:function(e,t,s){fh.L(e,t,s);var a=xh;if(a&&e&&t){var n='link[rel="preload"][as="'+Q(t)+'"]';"image"===t&&s&&s.imageSrcSet?(n+='[imagesrcset="'+Q(s.imageSrcSet)+'"]',"string"==typeof s.imageSizes&&(n+='[imagesizes="'+Q(s.imageSizes)+'"]')):n+='[href="'+Q(e)+'"]';var i=n;switch(t){case"style":i=wr(e);break;case"script":i=Sr(e)}mh.has(i)||(e=pl({rel:"preload",href:"image"===t&&s&&s.imageSrcSet?void 0:e,as:t},s),mh.set(i,e),null!==a.querySelector(n)||"style"===t&&a.querySelector(kr(i))||"script"===t&&a.querySelector(Cr(i))||(rr(t=a.createElement("link"),"link",e),L(t),a.head.appendChild(t)))}},m:function(e,t){fh.m(e,t);var s=xh;if(s&&e){var a=t&&"string"==typeof t.as?t.as:"script",n='link[rel="modulepreload"][as="'+Q(a)+'"][href="'+Q(e)+'"]',i=n;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Sr(e)}if(!mh.has(i)&&(e=pl({rel:"modulepreload",href:e},t),mh.set(i,e),null===s.querySelector(n))){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Cr(i)))return}rr(a=s.createElement("link"),"link",e),L(a),s.head.appendChild(a)}}},X:function(e,t){fh.X(e,t);var s=xh;if(s&&e){var a=$(s).hoistableScripts,n=Sr(e),i=a.get(n);i||((i=s.querySelector(Cr(n)))||(e=pl({src:e,async:!0},t),(t=mh.get(n))&&Er(e,t),L(i=s.createElement("script")),rr(i,"link",e),s.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},a.set(n,i))}},S:function(e,t,s){fh.S(e,t,s);var a=xh;if(a&&e){var n=$(a).hoistableStyles,i=wr(e);t=t||"default";var r=n.get(i);if(!r){var l={loading:0,preload:null};if(r=a.querySelector(kr(i)))l.loading=5;else{e=pl({rel:"stylesheet",href:e,"data-precedence":t},s),(s=mh.get(i))&&Tr(e,s);var o=r=a.createElement("link");L(o),rr(o,"link",e),o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),o.addEventListener("load",function(){l.loading|=1}),o.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Pr(r,t,a)}r={type:"stylesheet",instance:r,count:1,state:l},n.set(i,r)}}},M:function(e,t){fh.M(e,t);var s=xh;if(s&&e){var a=$(s).hoistableScripts,n=Sr(e),i=a.get(n);i||((i=s.querySelector(Cr(n)))||(e=pl({src:e,async:!0,type:"module"},t),(t=mh.get(n))&&Er(e,t),L(i=s.createElement("script")),rr(i,"link",e),s.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},a.set(n,i))}}};var xh="undefined"==typeof document?null:document,gh=null,vh=null,jh=null,yh={$$typeof:wl,Provider:null,Consumer:null,_currentValue:Ml,_currentValue2:Ml,_threadCount:0},bh=!0,Nh=null,wh=!1,kh=null,_h=null,Sh=null,Ch=new Map,Ah=new Map,Ph=[],Th="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" "),Eh=null;ol.prototype.render=ll.prototype.render=function(e){var s=this._internalRoot;if(null===s)throw Error(t(409));Br(s.current,Zn(),e,s,null,null)},ol.prototype.unmount=ll.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Br(e.current,2,null,e,null,null),ri(),t[po]=null}},ol.prototype.unstable_scheduleHydration=function(e){if(e){var t=P();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Ph.length&&0!==t&&t<Ph[s].priority;s++);Ph.splice(s,0,e),0===s&&el(e)}};var Fh=hl.version;if("19.1.1"!==Fh)throw Error(t(527,Fh,"19.1.1"));Ll.findDOMNode=function(e){var s=e._reactInternals;if(void 0===s){if("function"==typeof e.render)throw Error(t(188));throw e=Object.keys(e).join(","),Error(t(268,e))}return e=function(e){var s=e.alternate;if(!s){if(null===(s=a(e)))throw Error(t(188));return s!==e?null:e}for(var n=e,r=s;;){var l=n.return;if(null===l)break;var o=l.alternate;if(null===o){if(null!==(r=l.return)){n=r;continue}break}if(l.child===o.child){for(o=l.child;o;){if(o===n)return i(l),e;if(o===r)return i(l),s;o=o.sibling}throw Error(t(188))}if(n.return!==r.return)n=l,r=o;else{for(var c=!1,d=l.child;d;){if(d===n){c=!0,n=l,r=o;break}if(d===r){c=!0,r=l,n=o;break}d=d.sibling}if(!c){for(d=o.child;d;){if(d===n){c=!0,n=o,r=l;break}if(d===r){c=!0,r=o,n=l;break}d=d.sibling}if(!c)throw Error(t(189))}}if(n.alternate!==r)throw Error(t(190))}if(3!==n.tag)throw Error(t(188));return n.stateNode.current===n?e:s}(s),e=null===(e=null!==e?r(e):null)?null:e.stateNode};var Ih={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:$l,reconcilerVersion:"19.1.1"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var $h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$h.isDisabled&&$h.supportsFiber)try{ao=$h.inject(Ih),no=$h}catch(Mh){}}return Ae.createRoot=function(e,a){if(!s(e))throw Error(t(299));var n=!1,i="",r=Aa,l=Pa,o=Ta;return null!=a&&(!0===a.unstable_strictMode&&(n=!0),void 0!==a.identifierPrefix&&(i=a.identifierPrefix),void 0!==a.onUncaughtError&&(r=a.onUncaughtError),void 0!==a.onCaughtError&&(l=a.onCaughtError),void 0!==a.onRecoverableError&&(o=a.onRecoverableError),void 0!==a.unstable_transitionCallbacks&&a.unstable_transitionCallbacks),a=Dr(e,1,!1,null,0,n,i,r,l,o,0,null),e[po]=a.current,Vi(e),new ll(a)},Ae.hydrateRoot=function(e,a,n){if(!s(e))throw Error(t(299));var i=!1,r="",l=Aa,o=Pa,c=Ta,d=null;return null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onUncaughtError&&(l=n.onUncaughtError),void 0!==n.onCaughtError&&(o=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(d=n.formState)),(a=Dr(e,1,!0,a,0,i,r,l,o,c,0,d)).context=zr(null),n=a.current,(r=Bt(i=C(i=Zn()))).callback=null,Ut(n,r,i),n=i,a.current.lanes=n,k(a,n),Li(a),e[po]=a.current,Vi(e),new ol(a)},Ae.version="19.1.1",Ae}function s(e,t=8,s=0){const a="string"==typeof e?parseFloat(e):e;if(isNaN(a))return"0";if(0===a)return s>0?"0."+"0".repeat(s):"0";if(Math.abs(a)<Math.pow(10,-t))return a.toExponential(2);let n=a.toFixed(t);if(n.includes(".")&&(n=n.replace(/\.?0+$/,"")),s>0){const e=n.indexOf(".");if(-1===e)n+="."+"0".repeat(s);else{const t=n.length-e-1;t<s&&(n+="0".repeat(s-t))}}return n}function a(e,t){var s;void 0===t&&(t="0");var a=0,c=-1;"-"==e[0]&&(o(e=e.substring(1))||(a++,c=1,e.length)),"-"==t[0]&&(o(t=t.substring(1))||(a++,c=2,t.length)),e=i(e),t=i(t),e=(s=r(i(e),i(t)))[0],t=s[1],1==a&&(1===c?e=n(e):2===c&&(t=n(t)));var d=l(e,t);return a?2==a?"-"+i(d):e.length<d.length?i(d.substring(1)):"-"+i(n(d)):i(d)}function n(e){if(o(e))return e;for(var t="",s=e.length,a=e.split(".")[1],n=a?a.length:0,i=0;i<s;i++)e[i]>="0"&&e[i]<="9"?t+=9-parseInt(e[i]):t+=e[i];return l(t,n>0?"0."+new Array(n).join("0")+"1":"1")}function i(e){var t=e.split(".");for(t[0]||(t[0]="0");"0"==t[0][0]&&t[0].length>1;)t[0]=t[0].substring(1);return t[0]+(t[1]?"."+t[1]:"")}function r(e,t){var s=e.split("."),a=t.split("."),n=s[0].length,i=a[0].length;return n>i?a[0]=new Array(Math.abs(n-i)+1).join("0")+(a[0]?a[0]:""):s[0]=new Array(Math.abs(n-i)+1).join("0")+(s[0]?s[0]:""),n=s[1]?s[1].length:0,i=a[1]?a[1].length:0,(n||i)&&(n>i?a[1]=(a[1]?a[1]:"")+new Array(Math.abs(n-i)+1).join("0"):s[1]=(s[1]?s[1]:"")+new Array(Math.abs(n-i)+1).join("0")),[e=s[0]+(s[1]?"."+s[1]:""),t=a[0]+(a[1]?"."+a[1]:"")]}function l(e,t){var s;e=(s=r(e,t))[0],t=s[1];for(var a="",n=0,i=e.length-1;i>=0;i--)if("."!==e[i]){var l=parseInt(e[i])+parseInt(t[i])+n;a=l%10+a,n=Math.floor(l/10)}else a="."+a;return n?n.toString()+a:a}function o(e){return/^0[0]*[.]{0,1}[0]*$/.test(e)}function c(e){return"number"!=typeof e&&"bigint"!=typeof e||(e=e.toString()),"-"==e[0]?e.substring(1):e}function d(e,t,s){if(void 0===t&&(t=0),void 0===s&&(s=kt.HALF_EVEN),s===kt.UNNECESSARY)throw new Error("UNNECESSARY Rounding Mode has not yet been implemented");"number"!=typeof e&&"bigint"!=typeof e||(e=e.toString());var a=!1;"-"===e[0]&&(a=!0,e=e.substring(1));var n=e.split("."),i=n[0],r=n[1];if(t<0){if(t=-t,i.length<=t)return"0";var l=i.substr(0,i.length-t);return(a?"-":"")+(l=d(e=l+"."+i.substr(i.length-t)+r,0,s))+new Array(t+1).join("0")}if(0==t)return i.length,u(n[1],i,a,s)&&(i=h(i)),(a&&parseInt(i)?"-":"")+i;if(!n[1])return(a?"-":"")+i+"."+new Array(t+1).join("0");if(n[1].length<t)return(a?"-":"")+i+"."+n[1]+new Array(t-n[1].length+1).join("0");r=n[1].substring(0,t);var o=n[1].substring(t);return o&&u(o,r,a,s)&&(r=h(r)).length>t?(a?"-":"")+h(i,parseInt(r[0]))+"."+r.substring(1):(a&&(parseInt(i)||parseInt(r))?"-":"")+i+"."+r}function u(e,t,s,a){if(!e||e===new Array(e.length+1).join("0"))return!1;if(a===kt.DOWN||!s&&a===kt.FLOOR||s&&a===kt.CEILING)return!1;if(a===kt.UP||s&&a===kt.FLOOR||!s&&a===kt.CEILING)return!0;var n="5"+new Array(e.length).join("0");if(e>n)return!0;if(e<n)return!1;switch(a){case kt.HALF_DOWN:return!1;case kt.HALF_UP:return!0;case kt.HALF_EVEN:default:return parseInt(t[t.length-1])%2==1}}function h(e,t){void 0===t&&(t=0),t||(t=1),"number"==typeof e&&e.toString();for(var s="",a=e.length-1;a>=0;a--){var n=parseInt(e[a])+t;10==n?(t=1,n=0):t=0,s+=n}return t&&(s+=t),s.split("").reverse().join("")}function m(e){var t="-"===e[0];for(t&&(e=e.substr(1));"0"==e[0];)e=e.substr(1);if(-1!=e.indexOf("."))for(;"0"==e[e.length-1];)e=e.substr(0,e.length-1);return""==e||"."==e?e="0":"."==e[e.length-1]&&(e=e.substr(0,e.length-1)),"."==e[0]&&(e="0"+e),t&&"0"!=e&&(e="-"+e),e}function p(e,t){e=e.toString(),t=t.toString();var s=0;"-"==e[0]&&(s++,e=e.substr(1)),"-"==t[0]&&(s++,t=t.substr(1)),e=m(e),t=m(t);var a=0,n=0;-1!=e.indexOf(".")&&(a=e.length-e.indexOf(".")-1),-1!=t.indexOf(".")&&(n=t.length-t.indexOf(".")-1);var i=a+n;if(e=m(e.replace(".","")),t=m(t.replace(".","")),e.length<t.length){var r=e;e=t,t=r}if("0"==t)return"0";for(var l,o,c=t.length,d=0,u=[],h=c-1,p="",f=0;f<c;f++)u[f]=e.length-1;for(f=0;f<2*e.length;f++){for(var x=0,g=t.length-1;g>=h&&g>=0;g--)u[g]>-1&&u[g]<e.length&&(x+=parseInt(e[u[g]--])*parseInt(t[g]));x+=d,d=Math.floor(x/10),p=x%10+p,h--}return p=m((l=p,0==(o=i)?l:(l=o>=l.length?new Array(o-l.length+1).join("0")+l:l).substr(0,l.length-o)+"."+l.substr(l.length-o,o))),1==s&&(p="-"+p),p}function f(e,t,s,n){if(void 0===s&&(s=8),void 0===n&&(n=kt.HALF_EVEN),0==t)throw new Error("Cannot divide by 0");if(e=e.toString(),t=t.toString(),e=e.replace(/(\.\d*?[1-9])0+$/g,"$1").replace(/\.0+$/,""),t=t.replace(/(\.\d*?[1-9])0+$/g,"$1").replace(/\.0+$/,""),0==e)return"0";var r=0;"-"==t[0]&&(t=t.substring(1),r++),"-"==e[0]&&(e=e.substring(1),r++);var l=t.indexOf(".")>0?t.length-t.indexOf(".")-1:-1;if(t=i(t.replace(".","")),l>=0){var o=e.indexOf(".")>0?e.length-e.indexOf(".")-1:-1;if(-1==o)e=i(e+new Array(l+1).join("0"));else if(l>o)e=i((e=e.replace(".",""))+new Array(l-o+1).join("0"));else if(l<o){var c=(e=e.replace(".","")).length-o+l;e=i(e.substring(0,c)+"."+e.substring(c))}else l==o&&(e=i(e.replace(".","")))}var u=0,h=t.length,m="",p=e.indexOf(".")>-1&&e.indexOf(".")<h?e.substring(0,h+1):e.substring(0,h);if(e=e.indexOf(".")>-1&&e.indexOf(".")<h?e.substring(h+1):e.substring(h),p.indexOf(".")>-1){var f=p.length-p.indexOf(".")-1;h>(p=p.replace(".","")).length&&(f+=h-p.length,p+=new Array(h-p.length+1).join("0")),u=f,m="0."+new Array(f).join("0")}for(s+=2;u<=s;){for(var x=0;parseInt(p)>=parseInt(t);)p=a(p,"-"+t),x++;m+=x,e?("."==e[0]&&(m+=".",u++,e=e.substring(1)),p+=e.substring(0,1),e=e.substring(1)):(u||(m+="."),u++,p+="0")}return(1==r?"-":"")+i(d(m,s-2,n))}function x(e,t){return a(e=e.toString(),t=g(t=t.toString()))}function g(e){return e="-"==e[0]?e.substr(1):"-"+e}function v(e,t){if(0==t)throw new Error("Cannot divide by 0");e=e.toString(),t=t.toString(),j(e),j(t);var s="";return"-"==e[0]&&(s="-",e=e.substr(1)),"-"==t[0]&&(t=t.substr(1)),s+x(e,p(t,d(f(e,t),0,kt.FLOOR)))}function j(e){if(-1!=e.indexOf("."))throw new Error("Modulus of non-integers not supported")}function y(e,t){var s,a,n=!1;if(s=[e,t].map(function(e){return m(e)}),e=s[0],t=s[1],"-"==e[0]&&"-"!=t[0])return-1;if("-"!=e[0]&&"-"==t[0])return 1;if("-"==e[0]&&"-"==t[0]&&(e=e.substr(1),t=t.substr(1),n=!0),e=(a=r(e,t))[0],t=a[1],0==e.localeCompare(t))return 0;for(var i=0;i<e.length;i++)if(e[i]!=t[i])return e[i]>t[i]?n?-1:1:n?1:-1;return 0}function b(e,t){let s=e.div(t);const a=new ae(0),n=new ae(1);return e.mod(t).gt(a)&&s.gt(n)&&(s=s.sub(n)),se.from(s)}function N(e){return new St(String(e))}function w({isOpen:e,onClose:t,nft:s}){const{session:a,isConnected:n,account:i}=Ie(),{settings:r}=st(),{showSuccess:l,showError:o}=xt(),[c,d]=O.useState("wax"),[u,h]=O.useState(""),[m,p]=O.useState(""),[f,x]=O.useState([]),[g,v]=O.useState([]),[j,y]=O.useState(!1),[b,N]=O.useState(!1),[w,k]=O.useState(!1);O.useEffect(()=>{e&&n&&(async()=>{if(i)try{const e=await fetch(`https://aa.dapplica.io/atomicassets/v1/assets?owner=${i}&collection_name=pixeljourney&limit=1`),t=await e.json();k(t.data&&t.data.length>0)}catch(e){console.error("Error checking Pixal holder status:",e)}})()},[e,n,i]),O.useEffect(()=>{e&&"nft"===c&&(async()=>{if(i&&"nft"===c){N(!0);try{const e=await fetch(`https://aa.dapplica.io/atomicassets/v1/assets?owner=${i}&limit=100`),t=await e.json(),s=t.data?.map(e=>{const t=e.data?.img||e.data?.image,s=e.data?.video;let a="https://pixeljourney.xyz/img/toppixals/10.webp",n=null;return s&&"string"==typeof s&&(n=s.startsWith("http")?s:`${He.IPFS.GATEWAYS[0]}${s}`),t&&"string"==typeof t&&(a=t.startsWith("http")?t:`${He.IPFS.GATEWAYS[0]}${t}`),{asset_id:e.asset_id||"",name:e.name||`${e.collection?.collection_name||"Unknown"} #${e.asset_id||"N/A"}`,image:a,video:n,collection:e.collection?.collection_name||"Unknown",template_mint:void 0,max_supply:e.template?.max_supply||void 0}})||[];x(s)}catch(e){console.error("Error loading user NFTs:",e)}finally{N(!1)}}})()},[e,c,i]);return e&&s?Se.jsx("div",{className:"modal-backdrop",onClick:t,children:Se.jsxs("div",{className:"modal-content send-offer-modal",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsxs("h3",{children:["Send Offer for ",s.name]}),Se.jsx("button",{className:"modal-close",onClick:t,children:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Se.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Se.jsxs("div",{className:"modal-body",children:[Se.jsxs("div",{className:"target-nft-preview",children:[Se.jsx(Qt,{imageUrl:s.image,alt:s.name,enableAnimations:r.enableAnimatedNFTs}),Se.jsxs("div",{className:"nft-info",children:[Se.jsx("h4",{children:s.name}),Se.jsxs("p",{children:["Collection: ","string"==typeof s.collection?s.collection:s.collection?.collection_name||s.collection?.name||"Unknown"]}),s.price&&Se.jsxs("p",{children:["Listed Price: ",s.price," WAX"]})]})]}),Se.jsxs("div",{className:"offer-type-selection",children:[Se.jsx("h4",{children:"Choose Offer Type"}),Se.jsxs("div",{className:"offer-type-buttons",children:[Se.jsxs("button",{className:"offer-type-btn "+("wax"===c?"active":""),onClick:()=>d("wax"),children:[Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("circle",{cx:"12",cy:"12",r:"10"}),Se.jsx("path",{d:"M12 6v6l4 2"})]}),"WAX Offer"]}),Se.jsxs("button",{className:"offer-type-btn "+("nft"===c?"active":""),onClick:()=>d("nft"),children:[Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),Se.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),Se.jsx("polyline",{points:"21,15 16,10 5,21"})]}),"NFT Trade"]})]})]}),"wax"===c&&Se.jsx("div",{className:"wax-offer-form",children:Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{htmlFor:"waxAmount",children:"WAX Amount"}),Se.jsx("input",{id:"waxAmount",type:"number",step:"0.0001",min:"0",value:u,onChange:e=>h(e.target.value),placeholder:"Enter WAX amount",className:"form-input"})]})}),"nft"===c&&Se.jsxs("div",{className:"nft-trade-form",children:[Se.jsx("h4",{children:"Select NFTs to Trade"}),b?Se.jsxs("div",{className:"loading-inventory",children:[Se.jsx("div",{className:"spinner"}),Se.jsx("p",{children:"Loading your NFTs..."})]}):Se.jsx("div",{className:"user-nfts-grid",children:f.map(e=>Se.jsxs("div",{className:"user-nft-item "+(g.includes(e.asset_id)?"selected":""),onClick:()=>{return t=e.asset_id,void v(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},children:[Se.jsx(Qt,{imageUrl:e.image,videoUrl:e.video,alt:e.name,enableAnimations:r.enableAnimatedNFTs}),Se.jsxs("div",{className:"nft-details",children:[Se.jsx("p",{className:"nft-name",children:e.name}),Se.jsx("p",{className:"nft-collection",children:"string"==typeof e.collection?e.collection:e.collection?.collection_name||e.collection?.name||"Unknown"})]}),g.includes(e.asset_id)&&Se.jsx("div",{className:"selection-indicator",children:Se.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Se.jsx("polyline",{points:"20,6 9,17 4,12"})})})]},e.asset_id))})]}),w&&Se.jsxs("div",{className:"custom-memo-section",children:[Se.jsxs("div",{className:"pixal-holder-badge",children:[Se.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Se.jsx("polygon",{points:"12,2 15.09,8.26 22,9 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9 8.91,8.26"})}),"Pixal PFP Holder"]}),Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{htmlFor:"customMemo",children:"Custom Memo (Optional)"}),Se.jsx("textarea",{id:"customMemo",value:m,onChange:e=>p(e.target.value),placeholder:"Add a custom message to your offer...",className:"form-textarea",rows:3})]})]})]}),Se.jsxs("div",{className:"modal-footer",children:[Se.jsx("button",{className:"btn-secondary",onClick:t,children:"Cancel"}),Se.jsx("button",{className:"btn-primary",onClick:()=>{"wax"===c?(async()=>{if(i&&s&&u&&a){y(!0);try{const e=m||"Trade Offer sent via PxMarket - market.pixeljourney.xyz",n=[{account:"eosio.token",name:"transfer",authorization:[{actor:i,permission:"active"}],data:{from:i,to:"atomicmarket",quantity:`${parseFloat(u).toFixed(8)} WAX`,memo:"deposit"}},{account:"atomicmarket",name:"createbuyo",authorization:[{actor:i,permission:"active"}],data:{buyer:i,recipient:s.owner||s.seller,price:`${parseFloat(u).toFixed(8)} WAX`,asset_ids:[s.asset_id],memo:e,maker_marketplace:"market.pxj"}}];await a.transact({actions:n}),l("WAX offer sent successfully!"),t()}catch(e){console.error("Error sending WAX offer:",e),o("Failed to send WAX offer. Please try again.")}finally{y(!1)}}})():(async()=>{if(i&&s&&0!==g.length&&a){y(!0);try{const e=m||"NFT Trade Offer sent via PxMarket - market.pixeljourney.xyz",n=[{account:"atomicassets",name:"createoffer",authorization:[{actor:i,permission:"active"}],data:{sender:i,recipient:s.owner||s.seller,sender_asset_ids:g,recipient_asset_ids:[s.asset_id],memo:e}}];await a.transact({actions:n}),l("NFT trade offer sent successfully!"),t()}catch(e){console.error("Error sending NFT offer:",e),o("Failed to send NFT offer. Please try again.")}finally{y(!1)}}})()},disabled:j||!n||"wax"===c&&!u||"nft"===c&&0===g.length,children:j?Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"spinner-small"}),"Sending..."]}):`Send ${"wax"===c?"WAX":"NFT"} Offer`})]})]})}):null}function k(e){const t=document.createElement("div");return t.innerHTML=e,_(t),t.innerHTML}function _(e){const t=Array.from(e.children);for(const s of t){const e=s.tagName.toLowerCase();if(!is.includes(e)){const e=document.createTextNode(s.textContent||"");s.parentNode?.replaceChild(e,s);continue}const t=rs[e]||[],a=Array.from(s.attributes);for(const n of a)t.includes(n.name)||s.removeAttribute(n.name);_(s)}}function S(e){return k(function(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}(e).replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br>"))}function C(e){if(!e)return"";if(e.startsWith("http://")||e.startsWith("https://"))return e;if(e.startsWith("data:")||e.startsWith("blob:"))return e;if(e.startsWith("ipfs://")){return A(e.replace("ipfs://",""))}if(e.includes("/ipfs/")){return A(e.split("/ipfs/")[1])}return e.startsWith("Qm")&&e.length>40||e.length>40&&/^[a-zA-Z0-9]+$/.test(e),A(e)}function A(e){const t=He.IPFS.GATEWAYS;return`${t[Math.floor(Math.random()*t.length)]}${e.replace(/^\/?(ipfs\/)?/,"")}`}function P(e){return na[e]||null}function T(e){return{platinum:{icon:"\ud83d\udc8e",label:"Platinum",className:"tier-platinum",color:"#e5e4e2"},partner:{icon:"\ud83e\udd1d",label:"Partner",className:"tier-partner",color:"#667eea"},gold:{icon:"\ud83e\udd47",label:"Gold",className:"tier-gold",color:"#ffd700"},silver:{icon:"\ud83e\udd48",label:"Silver",className:"tier-silver",color:"#c0c0c0"},bronze:{icon:"\ud83e\udd49",label:"Bronze",className:"tier-bronze",color:"#cd7f32"}}[e]}function E(e,t){return e?e*parseFloat(t.weight)/1e15:0}function F(e,t){if(t<=0)return 0;const s=parseFloat(e.max_price.split(" ")[0]),a=parseFloat(e.min_price.split(" ")[0]);let n=0,i=parseFloat(e.utilization),r=parseFloat(i)+parseFloat(t);i<parseFloat(e.adjusted_utilization)&&(n+=(t=>{let n=a;const i=e.exponent-1;return i<=0?s:(n+=(s-a)*Math.pow(parseFloat(t)/e.weight,i),n)})(parseFloat(e.adjusted_utilization))*Math.min(parseFloat(t),parseFloat(e.adjusted_utilization)-parseFloat(i))/parseFloat(e.weight),i=parseFloat(e.adjusted_utilization)),i<r&&(n+=((t,n)=>{const i=(s-a)/parseFloat(e.exponent),r=t/parseFloat(e.weight),l=n/parseFloat(e.weight);return a*l-a*r+i*(Math.pow(l,parseFloat(e.exponent))-Math.pow(r,parseFloat(e.exponent)))})(i,r));return n<1e-8?n<1e-8?1e-8.toFixed(8):n.toPrecision(1).replace(/e-9/,"0.00000000"):n.toFixed(8)}function I(e,t,s,a){const n=E(e,s),i=E(t,a);return{cpuAmount:n,netAmount:i,cpuFee:F(s,n),netFee:F(a,i)}}function $(){return D.useEffect(()=>{at.trackEvent("app_initialized",{timestamp:Date.now(),userAgent:navigator.userAgent,viewport:{width:window.innerWidth,height:window.innerHeight}}),vt.initialize().then(()=>{De.info("Accessibility service ready","App"),at.trackEvent("accessibility_service_ready",{preferences:vt.getPreferences()})}).catch(e=>{De.error("Failed to initialize accessibility service","App",e),at.reportError(e,"accessibility_init_error")}),Nt.initialize().then(e=>{e?(De.info("Push notification service initialized successfully","App"),at.trackEvent("push_service_ready",{supported:Nt.getPermissionState().supported})):De.warn("Push notification service initialization failed","App")}).catch(e=>{De.error("Push notification service initialization error","App",e),at.reportError(e,"push_service_init_error")}),Je.preloadConfiguration().then(()=>{De.info("Marketplace configuration preloaded successfully","App"),at.trackEvent("marketplace_config_preloaded",{timestamp:Date.now()})}).catch(e=>{De.warn("Failed to preload marketplace configuration","App",{error:e}),at.reportError(e,"marketplace_config_preload_error")})},[]),Se.jsx(jn,{children:Se.jsx(Os,{children:Se.jsx(wa,{children:Se.jsx(tt,{children:Se.jsxs(ft,{children:[Se.jsx(H,{basename:"/market-alphatest",children:Se.jsx(Sn,{})}),Se.jsx(bn,{}),Se.jsx(xn,{}),Se.jsx(gn,{}),Se.jsx(vn,{}),Se.jsx(ra,{}),Se.jsx(wn,{}),Se.jsx(kn,{}),Se.jsx(_n,{})]})})})})})}var L=Object.defineProperty,M=(e,t,s)=>((e,t,s)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);import{r as R,b as W,c as O,R as D,L as z,u as B,d as U,e as X,f as q,B as H,h as J,i as V,j as G}from"./vendor-18oYYS7b.js";import{_ as Y,W as K,a as Q,b as Z}from"./wallets-4z7hQ1Rq.js";import{t as ee,F as te,u as se,v as ae,b as ne,s as ie,w as re,x as le,U as oe,T as ce,y as de,z as ue,D as he,E as me,N as pe,r as fe,G as xe,H as ge}from"./wharfkit-CLpwvJ3D.js";!function(){function e(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)}).observe(document,{childList:!0,subtree:!0})}}();var ve,je,ye,be,Ne,we,ke={exports:{}},_e={},Se=(je||(je=1,ke.exports=function(){function e(e,s,a){var n=null;if(void 0!==a&&(n=""+a),void 0!==s.key&&(n=""+s.key),"key"in s)for(var i in a={},s)"key"!==i&&(a[i]=s[i]);else a=s;return s=a.ref,{$$typeof:t,type:e,key:n,ref:void 0!==s?s:null,props:a}}if(ve)return _e;ve=1;var t=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");return _e.Fragment=s,_e.jsx=e,_e.jsxs=e,_e}()),ke.exports),Ce={exports:{}},Ae={},Pe={exports:{}},Te={},Ee=(we||(we=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),Ce.exports=t()),Ce.exports);const Fe=O.createContext(void 0),Ie=()=>{const e=O.useContext(Fe);if(void 0===e)throw new Error("useWallet must be used within a WalletProvider");return e},$e=class e{static getMessage(t){return e.MESSAGES[t]}static createMessage(e,t,s){return{title:e,message:t,action:s}}static formatError(t,s){if(t instanceof Error){const s=t.message.toLowerCase(),a=t.name.toLowerCase();return s.includes("network")||s.includes("fetch")||s.includes("connection")?e.MESSAGES.NETWORK_ERROR:s.includes("timeout")||s.includes("aborted")||a.includes("timeout")?e.MESSAGES.TIMEOUT_ERROR:s.includes("rejected")||s.includes("cancelled")?e.MESSAGES.TRANSACTION_REJECTED:s.includes("insufficient")?e.MESSAGES.INSUFFICIENT_BALANCE:s.includes("not found")?e.MESSAGES.NFT_NOT_FOUND:"chunkloaderror"===a?e.MESSAGES.LOAD_FAILED:s.includes("api")||s.includes("http")||s.includes("server")?e.MESSAGES.API_ERROR:"localhost"===window.location.hostname?e.createMessage(`Error: ${t.name}`,t.message,"Retry"):e.createMessage("Error","An error occurred while processing your request.","Retry")}return s||e.MESSAGES.UNKNOWN_ERROR}static logError(e,t,s){Y(async()=>{const{log:e}=await Promise.resolve().then(()=>ze);return{log:e}},void 0).then(({log:a})=>{const n=t instanceof Error?t:new Error(String(t));a.error(`Error in ${e}`,e,n,s)}).catch(()=>{console.error(`Error in ${e}:`,t,s)})}};M($e,"MESSAGES",{NETWORK_ERROR:{title:"Connection Error",message:"Unable to connect to the server. Please check your internet connection and try again.",action:"Retry"},TIMEOUT_ERROR:{title:"Request Timeout",message:"The request took too long to complete. Please try again.",action:"Retry"},API_ERROR:{title:"Service Unavailable",message:"The service is temporarily unavailable. Please try again in a moment.",action:"Retry"},LOAD_FAILED:{title:"Loading Failed",message:"Failed to load data. Please refresh the page or try again later.",action:"Refresh"},WALLET_CONNECTION_FAILED:{title:"Wallet Connection Failed",message:"Unable to connect to your wallet. Please ensure your wallet is unlocked and try again.",action:"Retry"},WALLET_DISCONNECTED:{title:"Wallet Disconnected",message:"Your wallet has been disconnected. Please reconnect to continue.",action:"Connect Wallet"},INSUFFICIENT_BALANCE:{title:"Insufficient Balance",message:"You do not have enough balance to complete this transaction.",action:"Add Funds"},TRANSACTION_FAILED:{title:"Transaction Failed",message:"The transaction could not be completed. Please try again.",action:"Retry"},TRANSACTION_REJECTED:{title:"Transaction Rejected",message:"The transaction was rejected. Please try again if this was unintentional.",action:"Retry"},INVALID_INPUT:{title:"Invalid Input",message:"Please check your input and try again.",action:"Correct Input"},REQUIRED_FIELD:{title:"Required Field Missing",message:"Please fill in all required fields.",action:"Complete Form"},NFT_NOT_FOUND:{title:"NFT Not Found",message:"The requested NFT could not be found or may no longer be available.",action:"Go Back"},COLLECTION_NOT_FOUND:{title:"Collection Not Found",message:"The requested collection could not be found or may not exist.",action:"Browse Collections"},PURCHASE_FAILED:{title:"Purchase Failed",message:"Unable to complete the purchase. The item may no longer be available.",action:"Refresh Listings"},LISTING_FAILED:{title:"Listing Failed",message:"Unable to list your NFT. Please check your wallet and try again.",action:"Retry"},UNKNOWN_ERROR:{title:"Something Went Wrong",message:"An unexpected error occurred. Please try again or contact support if the problem persists.",action:"Retry"}});let Le=$e;const Me=function(e,t=!0){const a="string"==typeof e?parseFloat(e.replace(" WAX","")):e;if(isNaN(a))return t?"0 WAX":"0";let n;return n=s(a,a>=1e3||a>=1?4:a>=.01?6:8,0),t?`${n} WAX`:n},Re=s,We={DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error"};const Oe=new class{constructor(){M(this,"logLevel",We.INFO),M(this,"isDevelopment",!1),M(this,"logs",[]),M(this,"maxLogs",1e3),this.logLevel=this.isDevelopment?We.DEBUG:We.WARN}createLogEntry(e,t,s,a,n){return{timestamp:(new Date).toISOString(),level:e,message:t,context:s,data:a,error:n}}shouldLog(e){return e>=this.logLevel}storeLog(e){this.logs.push(e),this.logs.length>this.maxLogs&&this.logs.shift()}formatMessage(e){const t=e.level.toUpperCase(),s=e.context?`[${e.context}]`:"";return`${e.timestamp} ${t} ${s} ${e.message}`}debug(e,t,s){if(!this.shouldLog(We.DEBUG))return;const a=this.createLogEntry(We.DEBUG,e,t,s);this.storeLog(a),this.isDevelopment&&console.debug(this.formatMessage(a),s||"")}info(e,t,s){if(!this.shouldLog(We.INFO))return;const a=this.createLogEntry(We.INFO,e,t,s);this.storeLog(a),this.isDevelopment&&console.info(this.formatMessage(a),s||"")}warn(e,t,s){if(!this.shouldLog(We.WARN))return;const a=this.createLogEntry(We.WARN,e,t,s);this.storeLog(a),console.warn(this.formatMessage(a),s||"")}error(e,t,s,a){if(!this.shouldLog(We.ERROR))return;const n=this.createLogEntry(We.ERROR,e,t,a,s);this.storeLog(n),console.error(this.formatMessage(n),s||"",a||""),!this.isDevelopment&&s&&this.reportError(s,{message:e,context:t,data:a})}async reportError(e,t){try{const s=[this.sendToErrorReportingAPI(e,t),this.sendToLocalStorage(e,t),this.sendToConsole(e,t)];await Promise.allSettled(s)}catch(s){console.error("Failed to report error:",s),console.error("Original error:",e)}}async sendToErrorReportingAPI(e,t){try{const s={message:e.message,stack:e.stack,timestamp:(new Date).toISOString(),userAgent:navigator.userAgent,url:window.location.href,userId:this.getUserId(),sessionId:this.getSessionId(),buildVersion:this.getBuildVersion(),environment:this.getEnvironment(),metadata:t},a=await fetch("/api/errors/report",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.getAuthToken()}`},body:JSON.stringify(s)});if(!a.ok)throw new Error(`Error reporting failed: ${a.status} ${a.statusText}`);console.log("Error successfully reported to server")}catch{await this.sendToFallbackErrorService(e,t)}}async sendToFallbackErrorService(e,t){try{const s={error:{message:e.message,stack:e.stack,timestamp:(new Date).toISOString()},context:{...t,userAgent:navigator.userAgent,url:window.location.href}};"undefined"!=typeof window&&window.Sentry&&window.Sentry.captureException(e,{extra:s.context,level:"error"})}catch(s){console.warn("Fallback error reporting also failed:",s)}}async sendToLocalStorage(e,t){try{const a="error_reports",n=50,i={message:e.message,stack:e.stack,timestamp:(new Date).toISOString(),userAgent:navigator.userAgent,url:window.location.href,metadata:t};let r=[];const l=localStorage.getItem(a);if(l)try{r=JSON.parse(l)}catch(s){console.warn("Failed to parse stored errors:",s)}r.unshift(i),r=r.slice(0,n),localStorage.setItem(a,JSON.stringify(r))}catch(a){console.warn("Failed to store error in localStorage:",a)}}sendToConsole(e,t){console.group(`%cERROR: ${e.message}`,"color: #ff4444; font-weight: bold; background: #ffe6e6; padding: 2px 4px; border-radius: 3px;"),t&&console.log("Metadata:",t),e.stack&&console.log("Stack:",e.stack),console.log("Timestamp:",(new Date).toISOString()),console.groupEnd()}getUserId(){return localStorage.getItem("user_id")||sessionStorage.getItem("user_id")||"anonymous"}getSessionId(){let e=sessionStorage.getItem("session_id");return e||(e=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sessionStorage.setItem("session_id",e)),e}getAuthToken(){return localStorage.getItem("auth_token")||sessionStorage.getItem("auth_token")||""}getBuildVersion(){return"unknown"}getEnvironment(){return"production"}getLogs(e){return void 0!==e?this.logs.filter(t=>t.level>=e):[...this.logs]}clearLogs(){this.logs=[]}exportLogs(){return JSON.stringify(this.logs,null,2)}},De={debug:(e,t,s)=>Oe.debug(e,t,s),info:(e,t,s)=>Oe.info(e,t,s),warn:(e,t,s)=>Oe.warn(e,t,s),error:(e,t,s,a)=>Oe.error(e,t,s,a)},ze=Object.freeze(Object.defineProperty({__proto__:null,LogLevel:We,log:De,logger:Oe},Symbol.toStringTag,{value:"Module"})),Be=["Citrine","Tourmaline","Emerald","Garnet","Peridot","Jade","Sapphire","Turquoise","Pigeon Blood Ruby","Blue Rock","Black Rock","Rock"],Ue=["friedfactory","pixeljourney"],Xe=["alien.worlds","prospectorsc","token.nefty"],qe="781515",He={ATOMIC_ASSETS:["https://atomic.wax.eosrio.io","https://wax-atomic.alcor.exchange","https://atomic-wax-mainnet.wecan.dev","https://wax.eosusa.io","https://wax-atomic-api.eosphere.io","https://atomic.3dkrender.com","https://aa-wax-public1.neftyblocks.com","https://atomic-wax.tacocrypto.io"],WAX_CHAIN:{EOSRIO:"https://wax.eosrio.io",WAXSWEDEN:"https://api.waxsweden.org",GREYMASS:"https://wax.greymass.com",EOSPHERE:"https://wax.eosphere.io",ALOHAEOS:"https://api.wax.alohaeos.com",PINK:"https://wax.pink.gg",CRYPTOLIONS:"https://wax.cryptolions.io",FALLBACK_ENDPOINTS:["https://wax.eosphere.io","https://wax.eosrio.io","https://api.wax.alohaeos.com","https://wax.pink.gg","https://api.waxsweden.org","https://wax.greymass.com","https://wax.cryptolions.io"],HYPERION_ENDPOINTS:["https://wax-hyperion.eosdetroit.io","https://wax.eosrio.io","https://api.waxsweden.org"],HIVEBP:"https://wax-api.hivebp.io",LIGHT_API:"https://wax.light-api.net"},SPECIALIZED:{ALCOR:"https://alcor.exchange/api/v2",DAPPLICA:"https://aa.dapplica.io",NEFTY:"https://api.neftyblocks.com"},IPFS:{GATEWAYS:["https://ipfs.io/ipfs/","https://gateway.pinata.cloud/ipfs/","https://dweb.link/ipfs/"]},AVATAR:{DICEBEAR:"https://api.dicebear.com/7.x/identicon/svg"},HYPERION:["https://wax-hyperion.eosdetroit.io","https://wax.eosrio.io","https://api.waxsweden.org"],COINGECKO_API:"https://api.coingecko.com/api/v3/simple/price",EXCHANGE_RATE_API:"https://api.exchangerate-api.com/v4/latest/USD",SOCIAL:{TWITTER_INTENT:"https://twitter.com/intent/tweet",FACEBOOK_SHARE:"https://www.facebook.com/sharer/sharer.php",REDDIT_SUBMIT:"https://reddit.com/submit",TELEGRAM_SHARE:"https://t.me/share/url",DISCORD:"https://discord.gg/pixeljourney",ATOMICHUB_EXPLORER:"https://wax.atomichub.io/explorer",BLOKS_EXPLORER:"https://wax.bloks.io"},PIXEL_JOURNEY:{MAIN_SITE:"https://pixeljourney.xyz",DOCS:"https://docs.pixeljourney.xyz",LOGO:"/logo.png",DEFAULT_IMAGE:"https://pixeljourney.xyz/img/toppixals/10.webp",LEADERBOARD:"https://lb.pixeljourney.xyz/",CRAFTING_DOCS:"https://docs.pixeljourney.xyz/season-1/recycling-and-crafting"},DICEBEAR_API:"https://api.dicebear.com/7.x/identicon/svg",GOOGLE_FONTS:"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap",WAX_WALLET:"https://wallet.wax.io"};class Je{static isValidWaxRock(e){return"none"!==e&&Be.includes(e)}static getWaxRockTypes(){return Be}static async getPartnerCollections(){const e=Date.now();if(this.configCache.partnerCollections&&this.configCache.lastFetch&&e-this.configCache.lastFetch<this.CACHE_DURATION)return this.configCache.partnerCollections;try{const{apiService:t}=await Y(async()=>{const{apiService:e}=await Promise.resolve().then(()=>ut);return{apiService:e}},void 0),s=await t.getPartnerCollections();return this.configCache.partnerCollections=s,this.configCache.lastFetch=e,s}catch(t){return De.warn("Failed to fetch partner collections from API, using fallback","MarketplaceConfig",{error:t}),[...Ue]}}static getPartnerCollectionsSync(){return this.configCache.partnerCollections||Ue}static async getTokenContracts(){const e=Date.now();if(this.configCache.tokenContracts&&this.configCache.lastFetch&&e-this.configCache.lastFetch<this.CACHE_DURATION)return this.configCache.tokenContracts;try{const{apiService:t}=await Y(async()=>{const{apiService:e}=await Promise.resolve().then(()=>ut);return{apiService:e}},void 0),s=await t.getTokenContracts();return this.configCache.tokenContracts=s,this.configCache.lastFetch=e,s}catch(t){return De.warn("Failed to fetch token contracts from API, using fallback","MarketplaceConfig",{error:t}),[...Xe]}}static getTokenContractsSync(){return this.configCache.tokenContracts||Xe}static getPixalTemplateId(){return qe}static isPixalPFP(e){return e===qe}static generateFiltersFromAssets(e){const t=new Set,s=new Map;t.add("All Items"),e.forEach(e=>{if(e.traits&&"object"==typeof e.traits&&null!==e.traits&&Object.keys(e.traits).forEach(t=>{const a=e.traits[t];if(a&&"none"!==a&&""!==a){const e=`${t}: ${a}`;s.set(e,(s.get(e)||0)+1)}}),e.data&&"object"==typeof e.data&&null!==e.data&&Object.keys(e.data).forEach(t=>{const a=e.data[t];if(a&&"none"!==a&&""!==a){const e=`${t}: ${a}`;s.set(e,(s.get(e)||0)+1)}}),e.collection){const t=`Collection: ${e.collection}`;s.set(t,(s.get(t)||0)+1)}if(e.schema){const t=`Schema: ${e.schema}`;s.set(t,(s.get(t)||0)+1)}});const a=Math.max(2,Math.floor(.05*e.length));return s.forEach((e,s)=>{e>=a&&t.add(s)}),Array.from(t).sort()}static async preloadConfiguration(){try{await Promise.all([this.getPartnerCollections(),this.getTokenContracts()])}catch(e){De.warn("Failed to preload marketplace configuration","MarketplaceConfig",{error:e})}}static clearCache(){this.configCache={}}}M(Je,"configCache",{}),M(Je,"CACHE_DURATION",3e5);const Ve=Object.freeze(Object.defineProperty({__proto__:null,API_ENDPOINTS:He,MarketplaceConfigService:Je,PARTNER_COLLECTIONS:Ue,PIXAL_TEMPLATE_ID:qe,TOKEN_CONTRACTS:Xe,WAXROCK_TYPES:Be},Symbol.toStringTag,{value:"Module"}));const Ge=new class{constructor(){M(this,"exchangeRates",{}),M(this,"cryptoRates",{bitcoin:{usd:0},ethereum:{usd:0}}),M(this,"lastFetchTime",0),M(this,"CACHE_DURATION",6e5),M(this,"EXCHANGE_API",He.EXCHANGE_RATE_API),M(this,"CRYPTO_API",He.COINGECKO_API),M(this,"FALLBACK_RATES",{USD:1,EUR:.85,DKK:6.3,AED:3.67,INR:83.12,RUB:74.5,CNY:7.1,JPY:110}),M(this,"FALLBACK_CRYPTO",{bitcoin:{usd:115e3},ethereum:{usd:4e3}})}async getExchangeRates(){const e=Date.now();if(Object.keys(this.exchangeRates).length>0&&e-this.lastFetchTime<this.CACHE_DURATION)return this.exchangeRates;try{const s=await fetch(this.EXCHANGE_API,{method:"GET",headers:{Accept:"application/json"}});if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);const a=await s.json();this.exchangeRates={USD:1,EUR:a.rates?.EUR||this.FALLBACK_RATES.EUR,DKK:a.rates?.DKK||this.FALLBACK_RATES.DKK,AED:a.rates?.AED||this.FALLBACK_RATES.AED,INR:a.rates?.INR||this.FALLBACK_RATES.INR,RUB:a.rates?.RUB||this.FALLBACK_RATES.RUB,CNY:a.rates?.CNY||this.FALLBACK_RATES.CNY,JPY:a.rates?.JPY||this.FALLBACK_RATES.JPY};try{const e=await fetch(this.CRYPTO_API,{method:"GET",headers:{Accept:"application/json"}});if(e.ok){const t=await e.json();this.cryptoRates={bitcoin:{usd:t.bitcoin?.usd||this.FALLBACK_CRYPTO.bitcoin.usd},ethereum:{usd:t.ethereum?.usd||this.FALLBACK_CRYPTO.ethereum.usd}}}}catch(t){Le.logError("CurrencyService.getCryptoRates",t),this.cryptoRates=this.FALLBACK_CRYPTO}return this.lastFetchTime=e,this.exchangeRates}catch(s){return Le.logError("CurrencyService.getExchangeRates",s,{api:this.EXCHANGE_API}),this.exchangeRates=this.FALLBACK_RATES,this.cryptoRates=this.FALLBACK_CRYPTO,this.lastFetchTime=e,this.exchangeRates}}async convertUSDToCurrency(e,t){if(e<=0)return"0.00";if("BTC"===t){await this.getExchangeRates();const t=e/this.cryptoRates.bitcoin.usd;return t>=.001?t.toFixed(6):t.toExponential(2)}if("ETH"===t){await this.getExchangeRates();const t=e/this.cryptoRates.ethereum.usd;return t>=.001?t.toFixed(6):t.toExponential(2)}const s=(await this.getExchangeRates())[t];if(!s)return"0.00";const a=e*s;return"JPY"===t?Math.round(a).toString():a.toFixed(2)}async convertWaxToCurrency(e,t){try{const{priceService:s}=await Y(async()=>{const{priceService:e}=await Promise.resolve().then(()=>Ke);return{priceService:e}},void 0),a=await s.convertWaxToUSDAsync(e),n=parseFloat(a.replace(/[$,]/g,""));if("USD"===t)return a;const i=await this.convertUSDToCurrency(n,t);return this.formatCurrencyAmount(i,t)}catch(s){return Le.logError("CurrencyService.convertWaxToCurrency",s,{waxAmount:e,targetCurrency:t}),"0.00"}}formatCurrencyAmount(e,t){switch(t){case"USD":return`$${e}`;case"EUR":return`\u20ac${e}`;case"DKK":return`${e} kr`;case"AED":return`${e} \u062f.\u0625`;case"INR":return`\u20b9${e}`;case"RUB":return`${e} \u20bd`;case"CNY":case"JPY":return`\xa5${e}`;case"BTC":return`\u20bf${e}`;case"ETH":return`\u039e${e}`;default:return`${e} ${t}`}}getCurrencySymbol(e){return{USD:"$",EUR:"\u20ac",DKK:"kr",AED:"\u062f.\u0625",INR:"\u20b9",RUB:"\u20bd",CNY:"\xa5",JPY:"\xa5",BTC:"\u20bf",ETH:"\u039e"}[e]||e}};const Ye=new class{constructor(){M(this,"waxPriceUSD",.02),M(this,"wpixalPriceUSD",2e-5),M(this,"wpixalPriceWAX",.001),M(this,"pxjPriceUSD",1e-4),M(this,"lastFetchTime",0),M(this,"CACHE_DURATION",3e5),M(this,"COINGECKO_WAX_API","https://api.coingecko.com/api/v3/simple/price?ids=wax&vs_currencies=usd"),M(this,"GECKOTERMINAL_WPIXAL_API","https://api.geckoterminal.com/api/v2/networks/wax/pools/swap.alcor:7845"),M(this,"GECKOTERMINAL_PXJ_POOLS",["https://api.geckoterminal.com/api/v2/networks/wax/pools/swap.alcor:1195","https://api.geckoterminal.com/api/v2/networks/wax/pools/swap.alcor:1657","https://api.geckoterminal.com/api/v2/networks/wax/pools/swap.alcor:6560"]),M(this,"FALLBACK_WAX_PRICE",.02),M(this,"FALLBACK_WPIXAL_PRICE",2e-5),M(this,"FALLBACK_PXJ_PRICE",1e-4)}async fetchPrices(){const e=Date.now();if(!(e-this.lastFetchTime<this.CACHE_DURATION&&this.waxPriceUSD>0&&this.wpixalPriceUSD>0))try{const[s,a,...n]=await Promise.all([fetch(this.COINGECKO_WAX_API).catch(()=>null),fetch(this.GECKOTERMINAL_WPIXAL_API).catch(()=>null),...this.GECKOTERMINAL_PXJ_POOLS.map(e=>fetch(e).catch(()=>null))]);let i=null;if(s&&s.ok)try{const e=await s.json();i=e.wax?.usd}catch(t){De.warn("Failed to parse WAX price data:","PriceService.fetchPrices",{error:t})}let r=null;if(a&&a.ok)try{const e=await a.json();r=e.data?.attributes?.quote_token_price_usd,r&&(r=parseFloat(r))}catch(t){De.warn("Failed to parse WPIXAL price data:","PriceService.fetchPrices",{error:t})}let l=null;for(const e of n)if(e&&e.ok)try{const t=await e.json(),s=t.data?.attributes?.quote_token_price_usd;if(s){l=parseFloat(s);break}}catch(t){De.warn("Failed to parse PXJ price data from pool:","PriceService.fetchPrices",{error:t})}this.waxPriceUSD=i||this.FALLBACK_WAX_PRICE,this.wpixalPriceUSD=r||this.FALLBACK_WPIXAL_PRICE,this.pxjPriceUSD=l||this.FALLBACK_PXJ_PRICE,this.waxPriceUSD>0?this.wpixalPriceWAX=this.wpixalPriceUSD/this.waxPriceUSD:this.wpixalPriceWAX=.001,this.lastFetchTime=e}catch(t){Le.logError("PriceService.fetchPrices",t,{waxApi:this.COINGECKO_WAX_API,wpixalApi:this.GECKOTERMINAL_WPIXAL_API,pxjPools:this.GECKOTERMINAL_PXJ_POOLS,fallbackWaxPrice:this.FALLBACK_WAX_PRICE,fallbackWpixalPrice:this.FALLBACK_WPIXAL_PRICE,fallbackPxjPrice:this.FALLBACK_PXJ_PRICE}),this.waxPriceUSD=this.FALLBACK_WAX_PRICE,this.wpixalPriceUSD=this.FALLBACK_WPIXAL_PRICE,this.pxjPriceUSD=this.FALLBACK_PXJ_PRICE,this.wpixalPriceWAX=this.FALLBACK_WPIXAL_PRICE/this.FALLBACK_WAX_PRICE,this.lastFetchTime=e}}async getWaxPriceUSD(){return await this.fetchPrices(),this.waxPriceUSD}async getWpixalPriceWAX(){return await this.fetchPrices(),this.wpixalPriceWAX}async getWpixalPriceUSD(){return await this.fetchPrices(),this.wpixalPriceUSD}async getPxjPriceUSD(){return await this.fetchPrices(),this.pxjPriceUSD}convertWaxToUSD(e){const t=parseFloat(e.replace(/[^0-9.]/g,""));if(isNaN(t)||this.waxPriceUSD<=0)return"$0.00";const s=t*this.waxPriceUSD;return`$${Re(s,2)}`}async convertWaxToUSDAsync(e){return await this.getWaxPriceUSD(),this.convertWaxToUSD(e)}async convertWaxToCurrencyAsync(e,t="USD"){return"USD"===t?this.convertWaxToUSDAsync(e):Ge.convertWaxToCurrency(e,t)}async convertWpixalToWAX(e){try{const t=parseFloat(e.replace(/[^0-9.]/g,""));if(isNaN(t))return"0.0000 WAX";const s=await this.getWpixalPriceWAX();return Me(t*s)}catch(t){return Le.logError("PriceService.convertWpixalToWAX",t,{wpixalAmount:e}),"0.0000 WAX"}}async convertWpixalToUSD(e){try{const t=parseFloat(e.replace(/[^0-9.]/g,""));if(isNaN(t))return"$0.00";const s=await this.getWpixalPriceUSD();return`$${Re(t*s,2)}`}catch(t){return Le.logError("PriceService.convertWpixalToUSD",t,{wpixalAmount:e}),"$0.00"}}async convertPxjToUSD(e){try{const t=parseFloat(e.replace(/[^0-9.]/g,""));if(isNaN(t))return"$0.00";const s=await this.getPxjPriceUSD();return`$${Re(t*s,6)}`}catch(t){return Le.logError("PriceService.convertPxjToUSD",t,{pxjAmount:e}),"$0.00"}}async convertPxjToWAX(e){try{const t=parseFloat(e.replace(/[^0-9.]/g,""));if(isNaN(t))return"0.0000 WAX";const s=await this.getPxjPriceUSD(),a=await this.getWaxPriceUSD();return Me(t*s/a)}catch(t){return Le.logError("PriceService.convertPxjToWAX",t,{pxjAmount:e}),"0.0000 WAX"}}async convertWaxWithDisplaySettings(e){try{const t=localStorage.getItem("selectedCurrency")||"USD";if(!JSON.parse(localStorage.getItem("showPricesInUSD")||"true")){const t=parseFloat(e.replace(/[^0-9.]/g,""));return Me(t)}return this.convertWaxToCurrencyAsync(e,t)}catch(t){return Le.logError("PriceService.convertWaxWithDisplaySettings",t,{waxAmount:e}),this.convertWaxToUSDAsync(e)}}},Ke=Object.freeze(Object.defineProperty({__proto__:null,priceService:Ye},Symbol.toStringTag,{value:"Module"}));const Qe=new class{isStorageAvailable(e){try{const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch{return!1}}get isLocalStorageAvailable(){return"undefined"!=typeof window&&this.isStorageAvailable(localStorage)}get isSessionStorageAvailable(){return"undefined"!=typeof window&&this.isStorageAvailable(sessionStorage)}getItem(e,t=!1){try{const s=t?sessionStorage:localStorage;if(t&&this.isSessionStorageAvailable)return s.getItem(e);if(!t&&this.isLocalStorageAvailable)return s.getItem(e);const a=t?localStorage:sessionStorage;return(t?this.isLocalStorageAvailable:this.isSessionStorageAvailable)?(Oe.warn(`Primary storage unavailable, using fallback for key: ${e}`),a.getItem(e)):(Oe.warn(`No storage available for key: ${e}`),null)}catch(s){return Oe.error("StorageService.getItem failed","StorageService",s,{key:e,useSessionStorage:t}),null}}setItem(e,t,s=!1){try{const a=s?sessionStorage:localStorage;if(s&&this.isSessionStorageAvailable)return a.setItem(e,t),!0;if(!s&&this.isLocalStorageAvailable)return a.setItem(e,t),!0;const n=s?localStorage:sessionStorage;return(s?this.isLocalStorageAvailable:this.isSessionStorageAvailable)?(Oe.warn(`Primary storage unavailable, using fallback for key: ${e}`),n.setItem(e,t),!0):(Oe.warn(`No storage available for key: ${e}`),!1)}catch(a){return Oe.error("StorageService.setItem failed","StorageService",a,{key:e,useSessionStorage:s}),!1}}removeItem(e,t=!1){try{const s=t?sessionStorage:localStorage;if(t&&this.isSessionStorageAvailable)return s.removeItem(e),!0;if(!t&&this.isLocalStorageAvailable)return s.removeItem(e),!0;let a=!1;return this.isLocalStorageAvailable&&(localStorage.removeItem(e),a=!0),this.isSessionStorageAvailable&&(sessionStorage.removeItem(e),a=!0),a||Oe.warn(`No storage available to remove key: ${e}`),a}catch(s){return Oe.error("StorageService.removeItem failed","StorageService",s,{key:e,useSessionStorage:t}),!1}}clear(e=!1){try{const t=e?sessionStorage:localStorage;return e&&this.isSessionStorageAvailable||!e&&this.isLocalStorageAvailable?(t.clear(),!0):(Oe.warn("No storage available to clear"),!1)}catch(t){return Oe.error("StorageService.clear failed","StorageService",t,{useSessionStorage:e}),!1}}getJSON(e,t,s=!1){try{const a=this.getItem(e,s);return null===a?t:JSON.parse(a)}catch(a){return Oe.error("StorageService.getJSON failed","StorageService",a,{key:e,useSessionStorage:s}),t}}setJSON(e,t,s=!1){try{const a=JSON.stringify(t);return this.setItem(e,a,s)}catch(a){return Oe.error("StorageService.setJSON failed","StorageService",a,{key:e,useSessionStorage:s}),!1}}getStorageStats(){const e=e=>{try{let t=0;for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t+=e[s].length+s.length);return{used:t,total:5242880}}catch{return{used:0,total:0}}};return{localStorage:{available:this.isLocalStorageAvailable,...e(this.isLocalStorageAvailable?localStorage:{})},sessionStorage:{available:this.isSessionStorageAvailable,...e(this.isSessionStorageAvailable?sessionStorage:{})}}}isQuotaExceeded(){const e=this.getStorageStats(),t=e.localStorage.used/e.localStorage.total,s=e.sessionStorage.used/e.sessionStorage.total;return t>.9||s>.9}cleanup(e=[]){let t=0;try{const s=[{storage:localStorage,available:this.isLocalStorageAvailable},{storage:sessionStorage,available:this.isSessionStorageAvailable}];for(const{storage:a,available:n}of s){if(!n)continue;const s=[];for(let t=0;t<a.length;t++){const n=a.key(t);if(n)for(const t of e)if(n.includes(t)){s.push(n);break}}for(const e of s)a.removeItem(e),t++}}catch(s){Oe.error("StorageService.cleanup failed","StorageService",s,{keyPatterns:e})}return t}};const Ze=new class{constructor(){M(this,"storageKey","pixal-marketplace-cart"),M(this,"cart",[]),M(this,"listeners",[]),this.loadCart()}loadCart(){try{this.cart=Qe.getJSON(this.storageKey,[])}catch(e){Le.logError("CartService.loadCart",e),this.cart=[]}}saveCart(){try{Qe.setJSON(this.storageKey,this.cart)||Le.logError("CartService.saveCart",new Error("Failed to save cart to storage"),{storageKey:this.storageKey,cartSize:this.cart.length}),this.notifyListeners()}catch(e){Le.logError("CartService.saveCart",e,{storageKey:this.storageKey,cartSize:this.cart.length})}}addListener(e){this.listeners.push(e)}removeListener(e){this.listeners=this.listeners.filter(t=>t!==e)}notifyListeners(){this.listeners.forEach(e=>e([...this.cart]))}addToCart(e){if(-1!==this.cart.findIndex(t=>t.nft.asset_id===e.asset_id))return!1;const t={nft:e,addedAt:Date.now(),isAvailable:!0,sale_id:e.sale_id};return this.cart.push(t),this.saveCart(),!0}removeFromCart(e){const t=this.cart.length;return this.cart=this.cart.filter(t=>t.nft.asset_id!==e),this.cart.length!==t&&(this.saveCart(),!0)}isInCart(e){return this.cart.some(t=>t.nft.asset_id===e)}getCart(){return[...this.cart]}getCartCount(){return this.cart.length}clearCart(){this.cart=[],this.saveCart()}cleanupUnavailableItems(){const e=this.cart.length;this.cart=this.cart.filter(e=>!1!==e.isAvailable),this.cart.length!==e&&this.saveCart()}async calculateTotals(){const e=this.cart.filter(e=>!1!==e.isAvailable);let t=0;e.forEach(e=>{if(e.nft.price){const s=parseFloat(e.nft.price.replace(" WAX",""));isNaN(s)||(t+=s)}});const s=`${t.toFixed(4)} WAX`;return{totalWAX:s,totalUSD:await Ye.convertWaxToUSDAsync(s),itemCount:e.length}}async checkAvailability(){if(0===this.cart.length)return;const{apiService:e}=await Y(async()=>{const{apiService:e}=await Promise.resolve().then(()=>ut);return{apiService:e}},void 0);try{const t=this.cart.map(e=>e.sale_id).filter(Boolean);if(0===t.length)return;const s=`${e.atomicMarketAPI}/atomicmarket/v1/sales?ids=${t.join(",")}&state=1&limit=${t.length}`,a=await e.fetchWithRetry(s),n=await a.json(),i=new Set(n.success&&n.data?n.data.map(e=>e.sale_id):[]);for(const e of this.cart)e.isAvailable=!!e.sale_id&&i.has(e.sale_id)}catch(t){Le.logError("CartService.checkAvailability",t,{cartSize:this.cart.length});for(const e of this.cart)e.isAvailable=!1}this.saveCart()}toggleSelection(e){const t=this.cart.find(t=>t.nft.asset_id===e);t&&(t.selected=!t.selected,this.saveCart())}selectAll(){this.cart.forEach(e=>{!1!==e.isAvailable&&(e.selected=!0)}),this.saveCart()}deselectAll(){this.cart.forEach(e=>{e.selected=!1}),this.saveCart()}getSelectedItems(){return this.cart.filter(e=>!0===e.selected)}getSelectedCount(){return this.cart.filter(e=>!0===e.selected).length}removeSelectedItems(){this.cart=this.cart.filter(e=>!0!==e.selected),this.saveCart()}isSelected(e){const t=this.cart.find(t=>t.nft.asset_id===e);return!0===t?.selected}},et=O.createContext(void 0),tt=({children:e})=>{const[t,s]=O.useState(()=>({showOtherCollections:JSON.parse(localStorage.getItem("showOtherCollections")||"true"),showWhitelistedOnly:JSON.parse(localStorage.getItem("showWhitelistedOnly")||"true"),enableAnimatedNFTs:JSON.parse(localStorage.getItem("enableAnimatedNFTs")||"true"),showExplicitContent:JSON.parse(localStorage.getItem("showExplicitContent")||"false"),blockNSFW:JSON.parse(localStorage.getItem("blockNSFW")||"false"),blockAI:JSON.parse(localStorage.getItem("blockAI")||"false"),showChatButton:JSON.parse(localStorage.getItem("showChatButton")||"true"),autoPlayVideos:JSON.parse(localStorage.getItem("autoPlayVideos")||"false"),muteVideos:JSON.parse(localStorage.getItem("muteVideos")||"true"),showVideoControls:JSON.parse(localStorage.getItem("showVideoControls")||"true"),showPricesInUSD:JSON.parse(localStorage.getItem("showPricesInUSD")||"true"),selectedCurrency:localStorage.getItem("selectedCurrency")||"USD",showRarityRankings:JSON.parse(localStorage.getItem("showRarityRankings")||"true")})),a={settings:t,updateSetting:(e,t)=>{s(s=>{const a={...s,[e]:t};return"string"==typeof t?localStorage.setItem(e,t):localStorage.setItem(e,JSON.stringify(t)),a})}};return Se.jsx(et.Provider,{value:a,children:e})},st=()=>{const e=O.useContext(et);if(void 0===e)throw new Error("useDisplaySettings must be used within a DisplaySettingsProvider");return e};const at=new class{constructor(){M(this,"sessionId"),M(this,"userId"),M(this,"session"),M(this,"performanceMetrics",[]),M(this,"apiMetrics",[]),M(this,"errorReports",[]),M(this,"isEnabled",!0),M(this,"batchSize",50),M(this,"flushInterval",3e4),M(this,"maxStoredMetrics",1e3),M(this,"pendingBatches",[]),M(this,"batchTimeout",null),this.sessionId=this.generateSessionId(),this.session={sessionId:this.sessionId,startTime:Date.now(),lastActivity:Date.now(),pageViews:0,events:[]},this.initializeMonitoring(),this.startPerformanceObserver(),this.setupErrorHandlers(),this.startFlushTimer()}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}initializeMonitoring(){"undefined"!=typeof window&&window.performance&&(window.addEventListener("load",()=>{setTimeout(()=>{this.trackPageLoadPerformance()},0)}),document.addEventListener("visibilitychange",()=>{this.trackEvent("page_visibility_change",{hidden:document.hidden})}),this.setupUserInteractionTracking())}startPerformanceObserver(){if("undefined"!=typeof window&&"PerformanceObserver"in window)try{new PerformanceObserver(e=>{for(const t of e.getEntries())"navigation"===t.entryType&&this.trackNavigationTiming(t)}).observe({entryTypes:["navigation"]});new PerformanceObserver(e=>{for(const t of e.getEntries())"resource"===t.entryType&&this.trackResourceTiming(t)}).observe({entryTypes:["resource"]});new PerformanceObserver(e=>{for(const t of e.getEntries())this.trackPerformanceMetric("largest_contentful_paint",t.startTime)}).observe({entryTypes:["largest-contentful-paint"]});new PerformanceObserver(e=>{for(const t of e.getEntries())this.trackPerformanceMetric("first_input_delay",t.processingStart-t.startTime)}).observe({entryTypes:["first-input"]})}catch(e){De.warn("Performance Observer not fully supported","MonitoringService.startPerformanceObserver",{error:e})}}setupErrorHandlers(){"undefined"!=typeof window&&(window.addEventListener("error",e=>{this.reportError(e.error||new Error(e.message),"global_error",{filename:e.filename,lineno:e.lineno,colno:e.colno})}),window.addEventListener("unhandledrejection",e=>{this.reportError(e.reason instanceof Error?e.reason:new Error(String(e.reason)),"unhandled_promise_rejection")}))}setupUserInteractionTracking(){"undefined"!=typeof window&&(document.addEventListener("click",e=>{const t=e.target;t.matches('button, a, [role="button"], .clickable')&&this.trackEvent("user_click",{element:t.tagName.toLowerCase(),className:t.className,id:t.id,text:t.textContent?.slice(0,50)})}),document.addEventListener("submit",e=>{const t=e.target;this.trackEvent("form_submit",{formId:t.id,formClass:t.className,action:t.action})}))}startFlushTimer(){setInterval(()=>{this.flushMetrics()},this.flushInterval)}setUserId(e){this.userId=e,this.session.userId=e}trackEvent(e,t={}){if(!this.isEnabled)return;const s={event:e,properties:t,timestamp:Date.now(),userId:this.userId,sessionId:this.sessionId};this.session.events.push(s),this.session.lastActivity=Date.now(),this.addToBatch("events",s),this.session.events.length>this.maxStoredMetrics&&(this.session.events=this.session.events.slice(-this.maxStoredMetrics/2))}trackPerformanceMetric(e,t,s){if(!this.isEnabled)return;const a={name:e,value:t,timestamp:Date.now(),context:s};this.performanceMetrics.push(a),this.addToBatch("performance",a),this.performanceMetrics.length>this.maxStoredMetrics&&(this.performanceMetrics=this.performanceMetrics.slice(-this.maxStoredMetrics/2))}trackAPICall(e,t,s,a,n,i){if(!this.isEnabled)return;const r={endpoint:e,method:t,duration:s,status:a,timestamp:Date.now(),success:n,retryCount:i};this.apiMetrics.push(r),this.addToBatch("api",r),s>5e3&&this.trackPerformanceMetric("slow_api_call",s,{endpoint:e,method:t,status:a}),this.apiMetrics.length>this.maxStoredMetrics&&(this.apiMetrics=this.apiMetrics.slice(-this.maxStoredMetrics/2))}reportError(e,t,s){if(!this.isEnabled)return;De.error(`${t}: ${e.message}`,"monitoringService.reportError",e,{...s});const a={error:e,context:t,additionalInfo:s,timestamp:Date.now(),userId:this.userId,sessionId:this.sessionId,userAgent:navigator.userAgent,url:window.location.href,stackTrace:e.stack};this.errorReports.push(a),this.trackEvent("error_occurred",{context:t,errorName:e.name,errorMessage:e.message,...s}),this.errorReports.length>this.maxStoredMetrics&&(this.errorReports=this.errorReports.slice(-this.maxStoredMetrics/2))}trackPageLoadPerformance(){if(!window.performance||!window.performance.timing)return;const e=window.performance.timing,t=window.performance.navigation,s=e.loadEventEnd-e.navigationStart,a=e.domContentLoadedEventEnd-e.navigationStart,n=e.responseStart-e.navigationStart,i=e.domInteractive-e.navigationStart;this.trackPerformanceMetric("page_load_time",s),this.trackPerformanceMetric("dom_content_loaded_time",a),this.trackPerformanceMetric("first_byte_time",n),this.trackPerformanceMetric("dom_interactive_time",i),this.trackEvent("page_load",{pageLoadTime:s,domContentLoadedTime:a,firstByteTime:n,domInteractiveTime:i,navigationType:t.type,redirectCount:t.redirectCount})}trackNavigationTiming(e){this.trackPerformanceMetric("dns_lookup_time",e.domainLookupEnd-e.domainLookupStart),this.trackPerformanceMetric("tcp_connect_time",e.connectEnd-e.connectStart),this.trackPerformanceMetric("request_response_time",e.responseEnd-e.requestStart),this.trackPerformanceMetric("dom_processing_time",e.domComplete-e.domContentLoadedEventStart)}trackResourceTiming(e){(e.name.includes(".js")||e.name.includes(".css")||e.name.includes("api"))&&this.trackPerformanceMetric("resource_load_time",e.duration,{resource:e.name,type:e.initiatorType,size:e.transferSize})}getSessionSummary(){return{...this.session,events:[...this.session.events]}}getPerformanceMetrics(){return[...this.performanceMetrics]}getAPIMetrics(){return[...this.apiMetrics]}getErrorReports(){return[...this.errorReports]}async flushMetrics(){if(!this.isEnabled)return;const e={session:this.getSessionSummary(),performance:this.getPerformanceMetrics(),api:this.getAPIMetrics(),errors:this.getErrorReports(),timestamp:Date.now()};try{const t=JSON.parse(localStorage.getItem("monitoring_data")||"[]");t.push(e);const s=t.slice(-10);localStorage.setItem("monitoring_data",JSON.stringify(s))}catch(t){De.warn("Failed to store monitoring data","MonitoringService.flushMetrics",{error:t})}this.performanceMetrics=[],this.apiMetrics=[],this.errorReports=[],this.session.events=[]}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1}isMonitoringEnabled(){return this.isEnabled}setBatchSize(e){this.batchSize=Math.max(10,Math.min(e,200))}addToBatch(e,t){if(!this.isEnabled)return;let s=this.pendingBatches.find(t=>t.type===e);s||(s={type:e,data:[],timestamp:Date.now()},this.pendingBatches.push(s)),s.data.push(t),s.data.length>=this.batchSize&&(this.processBatch(s),this.pendingBatches=this.pendingBatches.filter(e=>e!==s)),this.scheduleBatchProcessing()}scheduleBatchProcessing(){this.batchTimeout&&clearTimeout(this.batchTimeout),this.batchTimeout=setTimeout(()=>{this.processAllPendingBatches()},5e3)}async processBatch(e){try{const t={...e,batchId:this.generateBatchId(),processedAt:Date.now()},s=JSON.parse(localStorage.getItem("monitoring_batches")||"[]");s.push(t);const a=s.slice(-20);localStorage.setItem("monitoring_batches",JSON.stringify(a))}catch(t){console.warn("Failed to process batch:",t)}}async processAllPendingBatches(){const e=[...this.pendingBatches];this.pendingBatches=[];for(const t of e)await this.processBatch(t);this.batchTimeout&&(clearTimeout(this.batchTimeout),this.batchTimeout=null)}generateBatchId(){return`batch_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}setFlushInterval(e){this.flushInterval=Math.max(5e3,Math.min(e,3e5))}async exportData(){const e={session:this.getSessionSummary(),performance:this.getPerformanceMetrics(),api:this.getAPIMetrics(),errors:this.getErrorReports()};return JSON.stringify(e,null,2)}clearAllData(){this.performanceMetrics=[],this.apiMetrics=[],this.errorReports=[],this.session.events=[],localStorage.removeItem("monitoring_data")}};class nt{constructor(e={}){M(this,"cache",new Map),M(this,"config"),M(this,"cleanupTimer",null),this.config={defaultTTL:3e5,maxSize:1e3,cleanupInterval:6e4,...e},this.startCleanup()}startCleanup(){this.cleanupTimer=setInterval(()=>{this.cleanup()},this.config.cleanupInterval)}cleanup(){const e=Date.now(),t=[];for(const[s,a]of this.cache.entries())e-a.timestamp>a.ttl&&t.push(s);if(t.forEach(e=>this.cache.delete(e)),this.cache.size>this.config.maxSize){Array.from(this.cache.entries()).sort(([,e],[,t])=>e.timestamp-t.timestamp).slice(0,this.cache.size-this.config.maxSize).forEach(([e])=>this.cache.delete(e))}}set(e,t,s){const a={data:t,timestamp:Date.now(),ttl:s||this.config.defaultTTL};this.cache.set(e,a)}get(e){const t=this.cache.get(e);if(!t)return null;return Date.now()-t.timestamp>t.ttl?(this.cache.delete(e),null):t.data}has(e){const t=this.cache.get(e);if(!t)return!1;return!(Date.now()-t.timestamp>t.ttl)||(this.cache.delete(e),!1)}delete(e){return this.cache.delete(e)}clear(){this.cache.clear()}async getOrFetch(e,t,s){const a=this.get(e);if(null!==a)return a;const n=await t();return this.set(e,n,s),n}setMany(e){e.forEach(({key:e,data:t,ttl:s})=>{this.set(e,t,s)})}getMany(e){return e.map(e=>({key:e,data:this.get(e)}))}getStats(){const e=Date.now();let t=0,s=0;for(const a of this.cache.values())e-a.timestamp>a.ttl?s++:t++;return{totalEntries:this.cache.size,validEntries:t,expiredEntries:s,hitRate:t/(t+s)||0}}destroy(){this.cleanupTimer&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null),this.clear()}}const it=new nt({defaultTTL:3e5,maxSize:1e3,cleanupInterval:6e4}),rt=new nt({defaultTTL:6e5,maxSize:500,cleanupInterval:12e4}),lt=new nt({defaultTTL:18e5,maxSize:200,cleanupInterval:3e5}),ot=new nt({defaultTTL:12e4,maxSize:100,cleanupInterval:3e4});const ct=new class{constructor(){M(this,"endpointGroups",new Map),M(this,"HEALTH_CHECK_TIMEOUT",5e3),M(this,"MAX_CONSECUTIVE_FAILURES",3),M(this,"HEALTH_CHECK_INTERVAL",3e5),M(this,"healthCheckTimers",new Map),this.initializeEndpointGroups(),this.startHealthChecks()}initializeEndpointGroups(){this.endpointGroups.set("atomic",{name:"atomic",currentIndex:0,fallbackStrategy:"priority",healthCheckInterval:this.HEALTH_CHECK_INTERVAL,endpoints:[{url:"https://atomic.wax.eosrio.io",priority:1,healthStatus:"healthy",lastHealthCheck:0,consecutiveFailures:0,averageResponseTime:0,maxRetries:3},{url:"https://wax-atomic.alcor.exchange",priority:2,healthStatus:"healthy",lastHealthCheck:0,consecutiveFailures:0,averageResponseTime:0,maxRetries:3},{url:"https://atomic-wax-mainnet.wecan.dev",priority:3,healthStatus:"healthy",lastHealthCheck:0,consecutiveFailures:0,averageResponseTime:0,maxRetries:3},{url:"https://wax.eosusa.io",priority:4,healthStatus:"healthy",lastHealthCheck:0,consecutiveFailures:0,averageResponseTime:0,maxRetries:3}]}),this.endpointGroups.set("waxChain",{name:"waxChain",currentIndex:0,fallbackStrategy:"priority",healthCheckInterval:this.HEALTH_CHECK_INTERVAL,endpoints:[{url:"https://wax.eosphere.io",priority:1,healthStatus:"healthy",lastHealthCheck:0,consecutiveFailures:0,averageResponseTime:0,maxRetries:3},{url:"https://wax.eosrio.io",priority:2,healthStatus:"healthy",lastHealthCheck:0,consecutiveFailures:0,averageResponseTime:0,maxRetries:3},{url:"https://api.wax.alohaeos.com",priority:3,healthStatus:"healthy",lastHealthCheck:0,consecutiveFailures:0,averageResponseTime:0,maxRetries:3}]}),this.endpointGroups.set("hyperion",{name:"hyperion",currentIndex:0,fallbackStrategy:"fastest",healthCheckInterval:this.HEALTH_CHECK_INTERVAL,endpoints:[{url:"https://wax.eosrio.io",priority:1,healthStatus:"healthy",lastHealthCheck:0,consecutiveFailures:0,averageResponseTime:0,maxRetries:2},{url:"https://api.wax.alohaeos.com",priority:2,healthStatus:"healthy",lastHealthCheck:0,consecutiveFailures:0,averageResponseTime:0,maxRetries:2}]})}getBestEndpoint(e){const t=this.endpointGroups.get(e);if(!t)return null;const s=t.endpoints.filter(e=>"healthy"===e.healthStatus);if(0===s.length){const e=t.endpoints.filter(e=>"degraded"===e.healthStatus);return e.length>0?this.selectEndpoint(e,t.fallbackStrategy):t.endpoints[0]?.url||null}return this.selectEndpoint(s,t.fallbackStrategy)}selectEndpoint(e,t){switch(t){case"priority":return e.sort((e,t)=>e.priority-t.priority)[0].url;case"fastest":return e.sort((e,t)=>e.averageResponseTime-t.averageResponseTime)[0].url;default:return e[Math.floor(Math.random()*e.length)].url}}reportFailure(e,t){const s=this.endpointGroups.get(e);if(!s)return;const a=s.endpoints.find(e=>e.url===t);a&&(a.consecutiveFailures++,a.consecutiveFailures>=this.MAX_CONSECUTIVE_FAILURES?a.healthStatus="unhealthy":a.consecutiveFailures>=1&&(a.healthStatus="degraded"))}reportSuccess(e,t,s){const a=this.endpointGroups.get(e);if(!a)return;const n=a.endpoints.find(e=>e.url===t);n&&(n.consecutiveFailures=0,n.healthStatus="healthy",0===n.averageResponseTime?n.averageResponseTime=s:n.averageResponseTime=.8*n.averageResponseTime+.2*s)}getEndpoints(e){const t=this.endpointGroups.get(e);return t?t.endpoints.map(e=>e.url):[]}getCurrentIndex(e){const t=this.endpointGroups.get(e);return t?t.currentIndex:0}setCurrentIndex(e,t){const s=this.endpointGroups.get(e);s&&t>=0&&t<s.endpoints.length&&(s.currentIndex=t)}startHealthChecks(){for(const[e,t]of this.endpointGroups){const s=setInterval(()=>{this.performHealthCheck(e)},t.healthCheckInterval);this.healthCheckTimers.set(e,s)}}async performHealthCheck(e){const t=this.endpointGroups.get(e);if(!t)return;const s=t.endpoints.map(async t=>{try{const s=Date.now(),a=new AbortController,n=setTimeout(()=>a.abort(),this.HEALTH_CHECK_TIMEOUT),i=await fetch(`${t.url}/health`,{method:"GET",signal:a.signal,headers:{Accept:"application/json"}});clearTimeout(n);const r=Date.now()-s;t.lastHealthCheck=Date.now(),i.ok?this.reportSuccess(e,t.url,r):this.reportFailure(e,t.url)}catch{t.lastHealthCheck=Date.now(),this.reportFailure(e,t.url)}});await Promise.allSettled(s)}getHealthStatus(){const e={};for(const[t,s]of this.endpointGroups)e[t]={healthy:s.endpoints.filter(e=>"healthy"===e.healthStatus).length,degraded:s.endpoints.filter(e=>"degraded"===e.healthStatus).length,unhealthy:s.endpoints.filter(e=>"unhealthy"===e.healthStatus).length};return e}destroy(){for(const e of this.healthCheckTimers.values())clearInterval(e);this.healthCheckTimers.clear()}};const dt=new class{constructor(){M(this,"atomicEndpoints",[...He.ATOMIC_ASSETS]),M(this,"hiveBPAPI",He.WAX_CHAIN.HIVEBP),M(this,"waxLightAPI",He.WAX_CHAIN.LIGHT_API),M(this,"alcorAPI",He.SPECIALIZED.ALCOR),M(this,"waxChainEndpoints",[...He.WAX_CHAIN.FALLBACK_ENDPOINTS]),M(this,"hyperionEndpoints",He.WAX_CHAIN.HYPERION_ENDPOINTS),M(this,"currentEndpointIndex",0),M(this,"currentWaxChainIndex",0),M(this,"currentHyperionIndex",0),M(this,"adaptiveLimits",new Map),M(this,"DEFAULT_CACHE_TTL",3e5),M(this,"approvedCollections",["pixeljourney","friedfactory"]),M(this,"circuitBreakerState",new Map),M(this,"CIRCUIT_BREAKER_THRESHOLD",5),M(this,"CIRCUIT_BREAKER_TIMEOUT",6e4),M(this,"MAX_TIMEOUT",3e4),M(this,"endpointHealth",new Map),M(this,"HEALTH_CHECK_INTERVAL",3e5),M(this,"MAX_CONSECUTIVE_FAILURES",3),M(this,"healthCheckIntervalId",null),M(this,"healthConfigs",new Map),M(this,"eosNationEndpoints",{atomicEndpoints:[],waxChainEndpoints:[],hyperionEndpoints:[],lastUpdated:0}),M(this,"EOS_NATION_UPDATE_INTERVAL",36e5),M(this,"COLLECTION_WHITELIST",["alien.worlds","defiminingio","pixeljourney","crptomuffins","kogsofficial","mlb.topps","gpk.topps","warsaken","pocketsizedp","taco","pantheon","cbreakgaming","akufishheads","battleminers","twitchytides","novopangeaio","fadedmonsuta","bcbrawlers","nftopiafrens","drwawncompany","talesofcrypt","official.wax","music.worlds","gkniftyheads","dungeonitems","outlawtroops","byronartset1","prospectorsg","street.hero","crewtoonswax"]),this.currentEndpointIndex=0,this.currentWaxChainIndex=0,this.currentHyperionIndex=0,this.initializeHealthConfigs()}get waxChainAPI(){return ct.getBestEndpoint("waxChain")||this.waxChainEndpoints[this.currentWaxChainIndex]}get atomicMarketAPI(){return this.atomicEndpoints[this.currentEndpointIndex]}get atomicAssetsAPI(){return this.atomicEndpoints[this.currentEndpointIndex]}getCurrentAtomicEndpoint(){const e=ct.getBestEndpoint("atomic");if(e)return e;const t=this.getHealthyEndpoints(this.atomicEndpoints);if(t.length>0){const e=t[0];return this.currentEndpointIndex=this.atomicEndpoints.indexOf(e),e}return this.atomicEndpoints[this.currentEndpointIndex]||this.atomicEndpoints[0]}getFromCache(e){return e.startsWith("asset_")?rt.get(e):e.startsWith("collection_")?lt.get(e):e.startsWith("user_")?ot.get(e):it.get(e)}setCache(e,t,s=this.DEFAULT_CACHE_TTL){e.startsWith("asset_")?rt.set(e,t,s):e.startsWith("collection_")?lt.set(e,t,s):e.startsWith("user_")?ot.set(e,t,s):it.set(e,t,s)}reportEndpointHealth(e,t,s){try{const a=new URL(e),n=`${a.protocol}//${a.host}`;let i="atomic";(e.includes("wax.eosphere.io")||e.includes("wax.eosrio.io")||e.includes("api.wax.alohaeos.com"))&&(i=e.includes("/v2/history")||e.includes("/v1/history")?"hyperion":"waxChain"),t&&void 0!==s?ct.reportSuccess(i,n,s):t||ct.reportFailure(i,n)}catch(a){Oe.warn("Failed to report endpoint health:","ApiService.reportEndpointHealth",a)}}getCacheStats(){const e=rt.getStats(),t=lt.getStats(),s=ot.getStats(),a=it.getStats();return{totalEntries:e.totalEntries+t.totalEntries+s.totalEntries+a.totalEntries,validEntries:e.validEntries+t.validEntries+s.validEntries+a.validEntries,expiredEntries:e.expiredEntries+t.expiredEntries+s.expiredEntries+a.expiredEntries,hitRate:(e.hitRate+t.hitRate+s.hitRate+a.hitRate)/4}}clearCache(){rt.clear(),lt.clear(),ot.clear(),it.clear()}async warmupCache(e){try{const t=[],s=this.approvedCollections.slice(0,5);for(const e of s)t.push(this.getCollectionStats(e).catch(t=>Le.logError("ApiService.warmupCache.collectionStats",t,{collection:e})));t.push(this.getMarketStats().catch(e=>Le.logError("ApiService.warmupCache.marketStats",e))),e&&t.push(this.getUserInventoryOverview(e).catch(t=>Le.logError("ApiService.warmupCache.userInventory",t,{account:e}))),await Promise.allSettled(t)}catch(t){Le.logError("ApiService.warmupCache",t)}}async prefetchData(e){try{const t=[];if("marketplace"===e.currentPage&&t.push(this.getPxApprovedListings(100,100).catch(e=>Le.logError("ApiService.prefetch.marketplaceAssets",e))),"inventory"===e.currentPage&&e.userAccount&&t.push(this.getUserInventoryOptimized(e.userAccount,{page:2}).catch(t=>Le.logError("ApiService.prefetch.userInventory",t,{account:e.userAccount}))),e.recentCollections)for(const s of e.recentCollections.slice(0,3))t.push(this.getCollectionStats(s).catch(e=>Le.logError("ApiService.prefetch.recentCollection",e,{collection:s})));setTimeout(()=>{Promise.allSettled(t)},1e3)}catch(t){Le.logError("ApiService.prefetchData",t)}}invalidateCache(e){rt.clear(),lt.clear(),ot.clear(),it.clear()}getAdaptiveLimit(e,t){const s=new URL(e).hostname,a=this.adaptiveLimits.get(s);return a?Math.min(t,a,100):Math.min(t,100)}updateAdaptiveLimit(e,t,s){const a=new URL(e).hostname;if(s){if(t<100){const e=this.adaptiveLimits.get(a)||t,s=Math.min(Math.floor(1.1*e),100);this.adaptiveLimits.set(a,s)}}else{const e=Math.max(Math.floor(.7*t),20);this.adaptiveLimits.set(a,e)}}async fetchAlcorAPI(e,t=3,s){let a=null;const n=Date.now(),i=s?.method||"GET";for(let l=0;l<t;l++)try{const r=await fetch(e,{method:i,headers:{Accept:"application/json","Content-Type":"application/json",...s?.headers},mode:"cors",signal:s?.signal,...s}),o=Date.now()-n;if(r.ok)return at.trackAPICall(e,i,o,r.status,!0,l),r;a=new Error(`HTTP ${r.status}: ${r.statusText}`),l<t-1?await new Promise(e=>setTimeout(e,1e3*(l+1))):at.trackAPICall(e,i,o,r.status,!1,l)}catch(r){const s=Date.now()-n;if(a=r,l===t-1&&(at.trackAPICall(e,i,s,0,!1,l),at.reportError(a,"alcor_api_error",{url:e,method:i,retries:l+1})),r instanceof Error&&"AbortError"===r.name)throw at.reportError(r,"alcor_api_abort",{url:e,method:i}),r;l<t-1&&await new Promise(e=>setTimeout(e,1e3*(l+1)))}throw a||new Error("Failed to fetch from Alcor Exchange API")}initializeHealthConfigs(){this.healthConfigs.clear(),this.getValidatedEndpoints("atomic").forEach(e=>{this.healthConfigs.set(e,{path:"/atomicassets/v1/collections?limit=1",validator:e=>{const t=e;return Array.isArray(t.data)&&!0===t.success}})}),this.getValidatedEndpoints("waxChain").forEach(e=>{this.healthConfigs.set(e,{path:"/v1/chain/get_info",validator:e=>{const t=e;return"number"==typeof t.head_block_num&&t.head_block_num>0}})}),this.getValidatedEndpoints("hyperion").forEach(e=>{this.healthConfigs.set(e,{path:"/v2/health",validator:e=>{const t=e;return t.health&&"object"==typeof t.health&&"OK"===t.health.status||"OK"===t.health}})}),Oe.info(`[Health Config] Initialized configurations for ${this.healthConfigs.size} endpoints`)}getCircuitBreakerKey(e){try{return new URL(e).hostname}catch{return e}}isCircuitBreakerOpen(e){const t=this.circuitBreakerState.get(e);return!!t&&("open"===t.state&&(!(Date.now()-t.lastFailure>this.CIRCUIT_BREAKER_TIMEOUT)||(t.state="half-open",!1)))}recordCircuitBreakerFailure(e){const t=this.circuitBreakerState.get(e)||{failures:0,lastFailure:0,state:"closed"};t.failures++,t.lastFailure=Date.now(),t.failures>=this.CIRCUIT_BREAKER_THRESHOLD&&(t.state="open"),this.circuitBreakerState.set(e,t)}recordCircuitBreakerSuccess(e){const t=this.circuitBreakerState.get(e);t&&(t.failures=0,t.state="closed",this.circuitBreakerState.set(e,t))}updateEndpointHealth(e,t,s){let a=this.endpointHealth.get(e);a||(a={isHealthy:!0,lastCheck:Date.now(),consecutiveFailures:0,responseTime:0},this.endpointHealth.set(e,a)),a.lastCheck=Date.now(),t?(a.consecutiveFailures=0,a.isHealthy=!0,a.responseTime=s):(a.consecutiveFailures++,a.consecutiveFailures>=this.MAX_CONSECUTIVE_FAILURES&&(a.isHealthy=!1)),this.endpointHealth.set(e,a)}isEndpointHealthy(e){const t=this.endpointHealth.get(e);if(!t)return!0;return!(Date.now()-t.lastCheck>2*this.HEALTH_CHECK_INTERVAL)&&t.isHealthy}async performHealthCheck(e){const t=this.getCircuitBreakerKey(e),s=this.healthConfigs.get(e)||{path:"",fallback:!0},a=s.path?`${e}${s.path}`:e;try{const n=Date.now(),i=await fetch(a,{method:s.path?"GET":"HEAD",signal:AbortSignal.timeout(1e4),headers:{Accept:"application/json"}});let r=i.ok;const l=Date.now()-n;if(i.ok&&s.validator){const a=await i.json();r=s.validator(a);const n=this.endpointHealth.get(t);(!r||n&&n.consecutiveFailures>0)&&Oe.info(`[HealthCheck] ${e}:`,"ApiService.performHealthCheck",{healthy:r,duration:`${l}ms`})}this.updateEndpointHealth(t,r,l),r||Oe.warn(`[HealthCheck] ${e} failed validation`)}catch(n){Oe.error(`[HealthCheck] ${e} error:`,"ApiService.performHealthCheck",n),this.updateEndpointHealth(t,!1,0)}}startHealthChecks(){this.healthCheckIntervalId&&(clearInterval(this.healthCheckIntervalId),this.healthCheckIntervalId=null),this.healthCheckIntervalId=setInterval(()=>{Oe.info("[HealthCheck] Starting periodic health check cycle..."),this.getValidatedEndpoints("atomic").forEach(e=>{this.performHealthCheck(e)}),this.getValidatedEndpoints("waxChain").forEach(e=>{this.performHealthCheck(e)}),this.getValidatedEndpoints("hyperion").forEach(e=>{this.performHealthCheck(e)}),Oe.info("[HealthCheck] Completed periodic health check cycle")},this.HEALTH_CHECK_INTERVAL),this.updateEosNationEndpoints()}stopHealthChecks(){this.healthCheckIntervalId&&(clearInterval(this.healthCheckIntervalId),this.healthCheckIntervalId=null,Oe.info("[HealthCheck] Health check interval stopped"))}enableHealthChecks(){Oe.info("[HealthCheck] Enabling health checks..."),this.startHealthChecks()}async updateEosNationEndpoints(){try{const e=Date.now();if(e-this.eosNationEndpoints.lastUpdated<this.EOS_NATION_UPDATE_INTERVAL)return;Oe.info("[EOS Nation] Fetching latest endpoint data...");const t=await fetch("https://validate.eosnation.io/wax/reports/endpoints.json",{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(1e4)});if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);const s=await t.json();if(!s||"object"!=typeof s)throw new Error("Invalid JSON response from EOS Nation API");if(!s.report||"object"!=typeof s.report)throw Oe.warn("[EOS Nation] No report data found in response:",s),new Error("Invalid response format from EOS Nation API");const a=s.report,n=this.parseEosNationEndpoints(a.atomic_https||[]),i=this.parseEosNationEndpoints(a.api_https2||[]),r=this.parseEosNationEndpoints(a.hyperion_https||[]);Oe.info("[EOS Nation] Raw endpoint counts:","ApiService.updateEosNationEndpoints",{atomic_https:Array.isArray(a.atomic_https)?a.atomic_https.length:"not array",api_https2:Array.isArray(a.api_https2)?a.api_https2.length:"not array",hyperion_https:Array.isArray(a.hyperion_https)?a.hyperion_https.length:"not array"}),this.eosNationEndpoints={atomicEndpoints:n,waxChainEndpoints:i,hyperionEndpoints:r,lastUpdated:e},Oe.info(`[EOS Nation] Updated endpoints: ${n.length} atomic, ${i.length} wax chain, ${r.length} hyperion`),this.initializeHealthConfigs(),setTimeout(()=>this.updateEosNationEndpoints(),this.EOS_NATION_UPDATE_INTERVAL)}catch(e){Oe.error("[EOS Nation] Failed to update endpoint data:","ApiService.updateEosNationEndpoints",e),setTimeout(()=>this.updateEosNationEndpoints(),6e5)}}parseEosNationEndpoints(e){return Array.isArray(e)?e.map(e=>{try{let t;if("string"==typeof e)t=e;else if("object"==typeof e&&null!==e){const s=e;t=s.url||s.endpoint||s.api_url||String(e)}else t=String(e);const s=t.trim().match(/https?:\/\/[^\s]+/);return s?s[0]:null}catch(t){return Oe.warn("[EOS Nation] Failed to parse endpoint","ApiService.updateEosNationEndpoints",t),null}}).filter(e=>null!==e).filter(e=>{try{return new URL(e),!0}catch{return!1}}):(Oe.warn("[EOS Nation] Expected array of endpoints, got:",typeof e),[])}getValidatedEndpoints(e){const t="atomic"===e?this.atomicEndpoints:"waxChain"===e?this.waxChainEndpoints:this.hyperionEndpoints,s="atomic"===e?this.eosNationEndpoints.atomicEndpoints:"waxChain"===e?this.eosNationEndpoints.waxChainEndpoints:this.eosNationEndpoints.hyperionEndpoints,a=[...new Set([...s,...t])];return Oe.info(`[Endpoint Selection] ${e}: ${a.length} total (${s.length} from EOS Nation, ${t.length} static)`),a}getHealthyEndpoints(e){return e.filter(e=>{const t=this.getCircuitBreakerKey(e);return this.isEndpointHealthy(t)&&!this.isCircuitBreakerOpen(t)})}classifyError(e,t){if(t){if(429===t)return"rate-limit";if(408===t||502===t||503===t||504===t)return"retryable";if(t>=400&&t<500)return"non-retryable";if(t>=500)return"retryable"}const s=e.message.toLowerCase();return s.includes("rate limit")||s.includes("429")||s.includes("too many requests")?"rate-limit":s.includes("timeout")||s.includes("network")||s.includes("connection")||s.includes("fetch")||s.includes("enotfound")||s.includes("econnreset")||s.includes("econnrefused")||s.includes("socket hang up")||"AbortError"===e.name?"retryable":s.includes("400")||s.includes("401")||s.includes("403")||s.includes("404")||s.includes("unauthorized")||s.includes("forbidden")||s.includes("not found")||s.includes("bad request")?"non-retryable":"retryable"}calculateDelay(e,t,s=!0){let a;if(a="rate-limit"===t?Math.min(1e3*Math.pow(2,e),this.MAX_TIMEOUT):Math.min(1e3*(e+1),5e3),s){const e=.1*a;a+=2*(Math.random()-.5)*e}return Math.max(a,100)}async fetchWithRetry(e,t=3,s){const a=this.getCircuitBreakerKey(e);let n=null;const i=Date.now();if(this.isCircuitBreakerOpen(a))throw new Error(`Circuit breaker is open for ${a}. Service temporarily unavailable.`);const r=s?.signal?void 0:15e3,l=new AbortController;let o;r&&!s?.signal&&(o=setTimeout(()=>l.abort(),r));const c={method:s?.method||"GET",headers:{Accept:"application/json","Content-Type":"application/json","User-Agent":"PxMarket/2.0",...s?.headers},mode:"cors",signal:s?.signal||l.signal,...s};try{if(e.includes("wax-api.hivebp.io")){for(let s=0;s<t;s++)try{const r=await fetch(e,c);if(r.ok){this.recordCircuitBreakerSuccess(a);const t=Date.now()-i;return this.reportEndpointHealth(e,!0,t),r}const l=this.classifyError(new Error(`HTTP ${r.status}`),r.status);if(n=new Error(`HTTP ${r.status}: ${r.statusText}`),"non-retryable"===l||s===t-1)break;const o=this.calculateDelay(s,l);await new Promise(e=>setTimeout(e,o))}catch(d){const e=d,a=this.classifyError(e);if(n=e,"non-retryable"===a||s===t-1)break;const i=this.calculateDelay(s,a);await new Promise(e=>setTimeout(e,i))}throw this.recordCircuitBreakerFailure(a),n||new Error("Failed to fetch from HiveBP API")}if(this.waxChainEndpoints.some(t=>e.includes(t))){const s=this.getHealthyEndpoints(this.waxChainEndpoints),a=s.length>0?s:this.waxChainEndpoints;for(let i=0;i<a.length;i++){const s=a[i];this.currentWaxChainIndex=this.waxChainEndpoints.indexOf(s);const r=e.replace(/https:\/\/[^/]+/,s),l=this.getCircuitBreakerKey(r);if(this.isCircuitBreakerOpen(l))continue;let o=!1;for(let e=0;e<t;e++)try{const s=await fetch(r,c);if(s.ok)return this.recordCircuitBreakerSuccess(l),o=!0,s;const a=this.classifyError(new Error(`HTTP ${s.status}`),s.status);if(n=new Error(`HTTP ${s.status}: ${s.statusText}`),400===s.status||"non-retryable"===a)break;if(e<t-1){const t=this.calculateDelay(e,a);await new Promise(e=>setTimeout(e,t))}}catch(d){const s=d,a=this.classifyError(s);if(n=s,"non-retryable"===a)break;if(e<t-1){const t=this.calculateDelay(e,a);await new Promise(e=>setTimeout(e,t))}}o||this.recordCircuitBreakerFailure(l)}throw n||new Error("All WAX Chain endpoints failed")}const s=this.getHealthyEndpoints(this.atomicEndpoints),r=s.length>0?s:this.atomicEndpoints;for(let a=0;a<r.length;a++){const s=r[a];this.currentEndpointIndex=this.atomicEndpoints.indexOf(s);const l=e.replace(/https:\/\/[^/]+/,s),o=this.getCircuitBreakerKey(l);if(this.isCircuitBreakerOpen(o))continue;let u=!1;for(let e=0;e<t;e++)try{const s=await fetch(l,c);if(s.ok){this.recordCircuitBreakerSuccess(o),u=!0;const e=Date.now()-i;return this.reportEndpointHealth(l,!0,e),s}const a=this.classifyError(new Error(`HTTP ${s.status}`),s.status);if(n=new Error(`HTTP ${s.status}: ${s.statusText}`),400===s.status||"non-retryable"===a)break;if(e<t-1){const t=this.calculateDelay(e,a);await new Promise(e=>setTimeout(e,t))}}catch(d){const s=d,a=this.classifyError(s);if(n=s,"non-retryable"===a)break;if(e<t-1){const t=this.calculateDelay(e,a);await new Promise(e=>setTimeout(e,t))}}u||this.recordCircuitBreakerFailure(o)}throw n||new Error("All endpoints failed")}finally{o&&clearTimeout(o)}}formatSaleData(e){const t=e.assets[0];return{sale_id:e.sale_id,asset_id:t?.asset_id||"",name:t?.name||`${t?.collection?.collection_name||"Unknown"} #${t?.asset_id||"N/A"}`,image:this.getAssetImage(t),video:this.getAssetVideo(t),price:e.price?this.formatPrice(e.price):"0 WAX",seller:e.seller,collection:t?.collection?.collection_name||"Unknown",schema:t?.schema?.schema_name||"Unknown",template_mint:t?.template_mint?parseInt(t.template_mint.toString()):void 0,max_supply:t?.template?.max_supply||void 0,traits:t?.data?Object.fromEntries(Object.entries(t.data).filter(([,e])=>null!=e)):{}}}getAssetImage(e){const t=e?.data?.img||e?.template?.immutable_data?.img;return t&&"string"==typeof t?t.startsWith("http")?t:t.startsWith("Qm")?`${He.IPFS.GATEWAYS[0]}${t}`:t:He.PIXEL_JOURNEY.DEFAULT_IMAGE}getAssetVideo(e){const t=e?.data?.video||e?.template?.immutable_data?.video;return t&&"string"==typeof t?t.startsWith("http")?t:t.startsWith("Qm")?`${He.IPFS.GATEWAYS[0]}${t}`:t:""}formatPrice(e){if(!e||!e.amount)return"0 WAX";const t=parseFloat(e.amount)/Math.pow(10,e.token_precision||8);return"WAX"!==e.token_symbol&&e.token_symbol?`${Re(t)} ${e.token_symbol}`:Me(t)}async getCheapestPixals(e=50,t=1){const s=this.atomicMarketAPI,a=this.getAdaptiveLimit(s,e);try{const e=`${s}/atomicmarket/v1/sales?state=1&collection_name=pixeljourney&schema_name=pixals&sort=price&order=asc&limit=${a}&page=${t}`,n=await this.fetchWithRetry(e),i=await n.json();if(i.success&&i.data)return this.updateAdaptiveLimit(s,a,!0),i.data.map(e=>this.formatSaleData(e));throw new Error("Invalid API response")}catch(n){throw this.updateAdaptiveLimit(s,a,!1),Le.logError("ApiService.getCheapestPixals",n,{limit:e,adaptiveLimit:a,page:t}),n}}async getWaxRockPixals(e=50,t=1){const s=this.atomicMarketAPI,a=this.getAdaptiveLimit(s,e);try{const{MarketplaceConfigService:e}=await Y(async()=>{const{MarketplaceConfigService:e}=await Promise.resolve().then(()=>Ve);return{MarketplaceConfigService:e}},void 0),i=e.getWaxRockTypes();let r=[];for(const t of i)try{const e=`${s}/atomicmarket/v1/sales?state=1&collection_name=pixeljourney&schema_name=pixals&immutable_data.WaxRock=${encodeURIComponent(t)}&sort=price&order=asc&limit=50&page=1`,a=await this.fetchWithRetry(e),n=await a.json();n.success&&n.data&&r.push(...n.data)}catch(n){Oe.warn(`Failed to fetch ${t} WaxRocks:`,"ApiService.getWaxRockPixals",n)}if(0===r.length){const a=`${s}/atomicmarket/v1/sales?state=1&collection_name=pixeljourney&schema_name=pixals&sort=price&order=asc&limit=100&page=${t}`,n=await this.fetchWithRetry(a),l=await n.json();l.success&&l.data&&(r=l.data.filter(t=>{if(!t.assets||!t.assets[0])return!1;const s=t.assets[0],a=s.data?.WaxRock||s.template?.immutable_data?.WaxRock;if(a&&"string"==typeof a)return"none"!==a&&e.isValidWaxRock(a);const n=i.map(e=>e.toLowerCase());return!!s.data&&Object.values(s.data).some(e=>{if("string"==typeof e){const t=e.toLowerCase();return"none"!==t&&n.includes(t)}return!1})}))}const l=r.filter((e,t,s)=>t===s.findIndex(t=>t.sale_id===e.sale_id));l.sort((e,t)=>parseFloat(e.listing_price||"0")-parseFloat(t.listing_price||"0"));const o=(t-1)*a,c=l.slice(o,o+a);return this.updateAdaptiveLimit(s,a,!0),c.map(e=>this.formatSaleData(e))}catch(n){throw this.updateAdaptiveLimit(s,a,!1),Le.logError("ApiService.getWaxRockPixals",n,{limit:e,adaptiveLimit:a,page:t}),n}}async getPixelIngredients(e=20,t=1){try{const s=Math.min(e,50),a=`${this.atomicMarketAPI}/atomicmarket/v1/sales?state=1&collection_name=pixeljourney&schema_name=ingredients&sort=price&order=asc&limit=${s}&page=${t}`,n=await this.fetchWithRetry(a),i=await n.json();if(i.success&&i.data)return i.data.map(e=>this.formatSaleData(e));throw new Error("Invalid API response")}catch(s){throw Le.logError("ApiService.getPixelIngredients",s,{limit:e,page:t}),s}}async getBundleListings(e=20,t=1){try{const s=Math.min(e,50),a=`${this.atomicMarketAPI}/atomicmarket/v1/sales?state=1&collection_name=pixeljourney&schema_name=bundles&sort=price&order=asc&limit=${s}&page=${t}`,n=await this.fetchWithRetry(a),i=await n.json();if(i.success&&i.data)return i.data.map(e=>this.formatSaleData(e));throw new Error("Invalid API response")}catch(s){throw Le.logError("ApiService.getBundleListings",s,{limit:e,page:t}),s}}async getFriedFactoryNFTs(e=20,t=1){try{const s=Math.min(e,50),a=`${this.atomicMarketAPI}/atomicmarket/v1/sales?state=1&collection_name=friedfactory&sort=price&order=asc&limit=${s}&page=${t}`,n=await this.fetchWithRetry(a),i=await n.json();if(i.success&&i.data)return i.data.map(e=>this.formatSaleData(e));throw new Error("Invalid API response")}catch(s){throw Le.logError("ApiService.getFriedFactoryNFTs",s,{limit:e,page:t}),s}}async getCryptoMuffinsNFTs(e=20,t=1){try{const s=Math.min(e,50),a=`${this.atomicMarketAPI}/atomicmarket/v1/sales?state=1&collection_name=crptomuffins&sort=price&order=asc&limit=${s}&page=${t}`,n=await this.fetchWithRetry(a),i=await n.json();if(i.success&&i.data)return i.data.map(e=>this.formatSaleData(e));throw new Error("Invalid API response")}catch(s){throw Le.logError("ApiService.getCryptoMuffinsNFTs",s,{limit:e,page:t}),s}}async getAkufishheadsNFTs(e=20,t=1){try{const s=Math.min(e,50),a=`${this.atomicMarketAPI}/atomicmarket/v1/sales?state=1&collection_name=akufishheads&sort=price&order=asc&limit=${s}&page=${t}`,n=await this.fetchWithRetry(a),i=await n.json();if(i.success&&i.data)return i.data.map(e=>this.formatSaleData(e));throw new Error("Invalid API response")}catch(s){throw Le.logError("ApiService.getAkufishheadsNFTs",s,{limit:e,page:t}),s}}async getPartnerListings(e=16,t=1){try{const s=Math.min(e,50),a=Je.getPartnerCollectionsSync().join(","),n=`${this.atomicMarketAPI}/atomicmarket/v1/sales?state=1&collection_name=${a}&sort=created&order=desc&limit=${s}&page=${t}`,i=await this.fetchWithRetry(n),r=await i.json();if(r.success&&r.data)return r.data.map(e=>this.formatSaleData(e));throw new Error("Invalid API response")}catch(s){throw Le.logError("ApiService.getPartnerListings",s,{limit:e,page:t}),s}}async getPxApprovedListings(e=16,t=1){try{const s=Math.min(e,50),a=`${this.atomicMarketAPI}/atomicmarket/v1/sales?state=1&collection_name=pixeljourney&sort=created&order=desc&limit=${s}&page=${t}`,n=await this.fetchWithRetry(a),i=await n.json();if(i.success&&i.data)return i.data.map(e=>this.formatSaleData(e));throw new Error("Invalid API response")}catch(s){throw Le.logError("ApiService.getPxApprovedListings",s,{limit:e,page:t}),s}}async getAHVerifiedListings(e=16,t=1){try{const s=Math.min(e,50),a=`${this.atomicMarketAPI}/atomicmarket/v1/sales?state=1&verified=true&sort=created&order=desc&limit=${s}&page=${t}`,n=await this.fetchWithRetry(a),i=await n.json();if(i.success&&i.data)return i.data.map(e=>this.formatSaleData(e));throw new Error("Invalid API response")}catch(s){throw Le.logError("ApiService.getAHVerifiedListings",s,{limit:e,page:t}),s}}async getAllWaxListings(e=16,t=1){const s=this.atomicMarketAPI,a=this.getAdaptiveLimit(s,e);try{const e=`${s}/atomicmarket/v1/sales?state=1&sort=created&order=desc&limit=${a}&page=${t}`,n=await this.fetchWithRetry(e),i=await n.json();if(i.success&&i.data)return this.updateAdaptiveLimit(s,a,!0),i.data.map(e=>this.formatSaleData(e));throw new Error("Invalid API response")}catch(n){throw this.updateAdaptiveLimit(s,a,!1),Le.logError("ApiService.getAllWaxListings",n,{limit:e,adaptiveLimit:a,page:t}),n}}async getRecentSales(e=50){try{const t=`${this.atomicMarketAPI}/atomicmarket/v1/sales?state=3&limit=${e}&order=desc&sort=updated`,s=await this.fetchWithRetry(t),a=await s.json();if(a.success&&a.data)return a.data;throw new Error("Invalid API response")}catch(t){return Le.logError("ApiService.getRecentSales",t,{limit:e}),[]}}async getSales(e={}){try{const{page:t=1,limit:s=100,order:a="desc",sort:n="updated",collection_name:i,schema_name:r,template_id:l,asset_id:o,seller:c,buyer:d,state:u="1,3",symbol:h="WAX",min_price:m,max_price:p,before:f,after:x}=e;let g=`${this.atomicMarketAPI}/atomicmarket/v1/sales?page=${t}&limit=${s}&order=${a}&sort=${n}&state=${u}&symbol=${h}`;i&&(g+=`&collection_name=${i}`),r&&(g+=`&schema_name=${r}`),l&&(g+=`&template_id=${l}`),o&&(g+=`&asset_id=${o}`),c&&(g+=`&seller=${c}`),d&&(g+=`&buyer=${d}`),m&&(g+=`&min_price=${m}`),p&&(g+=`&max_price=${p}`),f&&(g+=`&before=${f}`),x&&(g+=`&after=${x}`);const v=await this.fetchWithRetry(g),j=await v.json();return{success:j.success||!1,data:j.data||[],query_total:j.query_total}}catch(t){return Le.logError("ApiService.getSales",t,e),{success:!1,data:[]}}}async getCollections(e={}){try{const{limit:t=20,page:s=1,whitelistOnly:a=!0,author:n,match:i,order:r="desc",sort:l="created",singleCollection:o}=e,c=new URLSearchParams;if(o)c.append("collection_name",o),c.append("limit","1");else{if(a){const e=this.COLLECTION_WHITELIST.slice(0,Math.min(t,20)).map(async e=>{try{const t=await this.fetchWithRetry(`${this.atomicAssetsAPI}/atomicassets/v1/collections/${e}`),s=await t.json();return s.success&&s.data?s.data:null}catch{return null}}),s=await Promise.all(e);return s.filter(e=>null!==e)}c.append("limit",Math.min(t,100).toString()),c.append("page",s.toString()),n&&c.append("author",n),i&&c.append("match",i)}c.append("order",r),c.append("sort",l);const d=`${this.atomicAssetsAPI}/atomicassets/v1/collections?${c.toString()}`,u=await this.fetchWithRetry(d),h=await u.json();if(h.success&&h.data)return h.data;throw new Error("Invalid API response")}catch(t){return Le.logError("ApiService.getCollections",t,e),[{collection_name:"pixeljourney",name:"Pixel Journey",img:"",author:"pixeljourney",allow_notify:!0,authorized_accounts:[],notify_accounts:[],market_fee:0,created_at_time:"",created_at_block:""},{collection_name:"friedfactory",name:"Fried Factory",img:"",author:"friedfactory",allow_notify:!0,authorized_accounts:[],notify_accounts:[],market_fee:0,created_at_time:"",created_at_block:""}]}}async getMarketStats(){try{const e=`${this.atomicAssetsAPI}/atomicmarket/v1/stats/graph`,t=await this.fetchWithRetry(e),s=await t.json();return s.success&&s.data&&s.data.length>0?s.data[s.data.length-1]:null}catch(e){return Le.logError("ApiService.getMarketStats",e),null}}async getCollectionDetails(e){const t=`collection-${e}`;if(this.isCircuitBreakerOpen(t))return null;try{const t=`${this.atomicAssetsAPI}/atomicassets/v1/collections/${e}`,s=await this.fetchWithRetry(t),a=await s.json();return a.success&&a.data?a.data:null}catch(s){return this.recordCircuitBreakerFailure(t),this.isCircuitBreakerOpen(t)||Le.logError("ApiService.getCollectionDetails",s,{collectionName:e}),null}}async getCollectionSchemas(e,t=50){try{const s=`${this.atomicAssetsAPI}/atomicassets/v1/schemas?collection_name=${e}&limit=${t}&order=desc&sort=created`,a=await this.fetchWithRetry(s),n=await a.json();return n.success&&n.data?n.data:[]}catch(s){return Le.logError("ApiService.getCollectionAssets",s,{collectionName:e,limit:t}),[]}}async getCollectionTemplates(e,t,s=50){try{let a=`${this.atomicAssetsAPI}/atomicassets/v1/templates?collection_name=${e}&limit=${s}&order=desc&sort=created`;t&&(a+=`&schema_name=${t}`);const n=await this.fetchWithRetry(a),i=await n.json();return i.success&&i.data?i.data:[]}catch(a){return Le.logError("ApiService.getCollectionTemplates",a,{collectionName:e,schemaName:t,limit:s}),[]}}async getCollectionAssets(e,t,s,a=50){try{let n=`${this.getCurrentAtomicEndpoint()}/atomicmarket/v1/assets?collection_name=${e}&burned=false&limit=${a}&order=desc&sort=asset_id`;t&&(n+=`&schema_name=${t}`),s&&(n+=`&template_id=${s}`);const i=await this.fetchWithRetry(n),r=await i.json();return r.success&&r.data?r.data:[]}catch(n){return Le.logError("ApiService.getCollectionAssets",n,{collectionName:e,schemaName:t,templateId:s,limit:a}),[]}}async getAssetDetails(e){try{const t=`${this.atomicAssetsAPI}/atomicassets/v1/assets/${e}`,s=await this.fetchWithRetry(t),a=await s.json();return a.success&&a.data?a.data:null}catch(t){return Le.logError("ApiService.getAssetDetails",t,{assetId:e}),null}}async getCollectionStats(e){try{const t=`${this.atomicAssetsAPI}/atomicassets/v1/collections/${e}/stats`,s=await this.fetchWithRetry(t),a=await s.json();return a.success&&a.data?a.data:null}catch(t){return Le.logError("ApiService.getCollectionSchemas",t,{collectionName:e}),null}}async getCollectionBurns(e,t=50){try{const s=`${this.atomicAssetsAPI}/atomicassets/v1/burns?collection_name=${e}&limit=${t}&order=desc&sort=created`,a=await this.fetchWithRetry(s),n=await a.json();return n.success&&n.data?n.data:[]}catch(s){return Le.logError("ApiService.getCollectionBurns",s,{collectionName:e,limit:t}),[]}}async getCollectionTransfers(e,t=50){try{const s=`${this.atomicAssetsAPI}/atomicassets/v1/transfers?collection_name=${e}&limit=${t}&order=desc&sort=created`,a=await this.fetchWithRetry(s),n=await a.json();return n.success&&n.data?n.data:[]}catch(s){return Le.logError("ApiService.getCollectionTransfers",s,{collectionName:e,limit:t}),[]}}async getCollectionVolumeGraph(e,t=30){try{const s=`${this.hiveBPAPI}/v3/sales-volume-graph/${t}/${e}`,a=await this.fetchWithRetry(s);return await a.json()}catch(s){return Oe.warn(`HiveBP volume graph not available for ${e}`,"API",s),null}}async getCollectionMarketCap(e){try{const t=`${this.hiveBPAPI}/v3/collection-marketcap/${e}`,s=await this.fetchWithRetry(t);return await s.json()}catch(t){return Oe.warn(`HiveBP market cap not available for ${e}`,"API",t),null}}async getSimilarCollections(e){try{const t=`${this.hiveBPAPI}/v3/similar-collections/${e}`,s=await this.fetchWithRetry(t);return await s.json()||[]}catch(t){return Oe.warn(`HiveBP similar collections not available for ${e}`,"API",t),[]}}async getCollectionAnalytics(e){try{const t=`${this.hiveBPAPI}/v3/collection-stats/${e}`,s=await this.fetchWithRetry(t);return await s.json()}catch(t){return Oe.warn(`HiveBP analytics not available for ${e}`,"API",t),null}}async getHiveBPMarketCap(e){try{const t=`${this.hiveBPAPI}/v3/marketcap/${e}`,s=await this.fetchWithRetry(t),a=await s.json();return a?.marketcap||null}catch(t){return Oe.warn(`HiveBP market cap not available for ${e}`,"API",t),null}}async getHiveBPVolumeDays(e,t=1){try{const s=`${this.hiveBPAPI}/v3/volume/${t}/${e}`,a=await this.fetchWithRetry(s),n=await a.json();return n?.volume||null}catch(s){return Oe.warn(`HiveBP volume data not available for ${e}`,"API",s),null}}async getHiveBPFloorPrice(e){try{const t=`${this.hiveBPAPI}/v3/floor/${e}`,s=await this.fetchWithRetry(t),a=await s.json();return a?.floor_price||null}catch(t){return Oe.warn(`HiveBP floor price not available for template ${e}`,"API",t),null}}async getEnhancedCollectionStats(e){try{const[s,a,n]=await Promise.all([this.getHiveBPMarketCap(e),this.getHiveBPVolumeDays(e,1),this.getHiveBPVolumeDays(e,7)]);let i=null;try{const t=await this.getCollectionTemplates(e,void 0,1);t.length>0&&(i=await this.getHiveBPFloorPrice(t[0].template_id))}catch(t){Oe.warn(`Could not fetch floor price for ${e}`,"API",t)}return{marketCap:s,volume24h:a,volume7d:n,floorPrice:i}}catch(t){return Le.logError("ApiService.getCollectionStats",t,{collectionName:e}),{marketCap:null,volume24h:null,volume7d:null,floorPrice:null}}}async getCollectionTopSales(e,t=20){try{const s=`${this.atomicAssetsAPI}/atomicmarket/v1/sales?collection_name=${e}&state=3&limit=${t}&order=desc&sort=price`,a=await this.fetchWithRetry(s),n=await a.json();return n.success&&n.data?n.data:[]}catch(s){return Le.logError("ApiService.getCollectionTopSales",s,{collectionName:e,limit:t}),[]}}async getCollectionFloorPrice(e){try{const t=`${this.atomicAssetsAPI}/atomicmarket/v1/sales?collection_name=${e}&state=1&limit=1&order=asc&sort=price`,s=await this.fetchWithRetry(t),a=await s.json();if(a.success&&a.data&&a.data.length>0){return{floorPrice:parseFloat(a.data[0].listing_price)/1e8}}return{floorPrice:0}}catch(t){return Le.logError("ApiService.getCollectionFloorPrice",t,{collectionName:e}),{floorPrice:0}}}async getCollectionHolders(e,t=50,s=0){try{let a=`${this.atomicAssetsAPI}/atomicassets/v1/accounts?collection_name=${e}&limit=${t}&order=desc&sort=assets`;s>0&&(a+=`&page=${Math.floor(s/t)+1}`);const n=await this.fetchWithRetry(a),i=await n.json();return i.success&&i.data?i.data:[]}catch(a){return Le.logError("ApiService.getCollectionHolders",a,{collectionName:e,limit:t,offset:s}),[]}}async getNFTTradingStats(){try{const e=await this.fetchWithRetry(`${this.atomicMarketAPI}/atomicmarket/v1/sales?state=3&after=${Date.now()-864e5}&limit=1000`),t=await e.json();let s=0,a=0;t.success&&t.data&&(a=t.data.length,s=t.data.reduce((e,t)=>e+(t.price?parseFloat(t.price.amount)/Math.pow(10,t.price.token_precision):0),0));const n=await this.fetchWithRetry(`${this.atomicMarketAPI}/atomicmarket/v1/sales?state=1&limit=1`),i=await n.json(),r=i.success?parseInt(i.query_time):0;return{collection_name:"global",dailyVolume:Re(s),dailySales:a,totalTransactions:a,activeListings:r,averagePrice:a>0?Re(s/a):"0"}}catch(e){return Le.logError("ApiService.getNFTTradingStats",e),null}}async getTopCollectionsByVolume(e=10){try{const t=await this.fetchWithRetry(`${this.atomicMarketAPI}/atomicmarket/v1/stats/collections?limit=${e}&sort=volume`),s=await t.json();return s.success&&s.data?s.data.map(e=>({collection_name:e.collection_name,volume_24h:e.volume?Me(parseFloat(e.volume)/1e8):"0 WAX",sales_24h:parseInt(e.sales||"0")||0,floor_price:e.floor_price?Me(parseFloat(e.floor_price)/1e8):"0 WAX",assets_count:e.assets||"0"})):[]}catch(t){return Le.logError("ApiService.getTopCollectionsByVolume",t,{limit:e}),[]}}async getRecentNFTTrades(e=20){try{const t=await this.fetchWithRetry(`${this.atomicMarketAPI}/atomicmarket/v1/sales?state=3&limit=${e}&sort=updated`),s=await t.json();return s.success&&s.data?s.data.map(e=>({sale_id:e.sale_id,collection_name:e.collection_name||e.assets[0]?.collection?.collection_name||"Unknown",asset_name:e.assets[0]?.name||`Asset #${e.assets[0]?.asset_id}`,price:e.price?Me(parseFloat(e.price.amount)/Math.pow(10,e.price.token_precision)):"0 WAX",buyer:e.buyer,seller:e.seller,timestamp:e.updated_at_time})):[]}catch(t){return Le.logError("ApiService.getNFTTradingStats",t,{limit:e}),[]}}async getUserInventory(e,t=1e3){try{const s=this.approvedCollections.join(","),a=`${this.getCurrentAtomicEndpoint()}/atomicassets/v1/assets?owner=${e}&collection_name=${s}&burned=false&limit=${t}&order=desc&sort=asset_id`,n=await this.fetchWithRetry(a),i=await n.json();if(i.success&&i.data)return i.data.map(t=>({sale_id:"",asset_id:t.asset_id||"",name:t.name||`${t.collection?.collection_name||"Unknown"} #${t.asset_id}`,image:this.getAssetImage(t),price:"Not for sale",seller:e,collection:t.collection?.collection_name||"Unknown",schema:t.schema?.schema_name||"Unknown",template_id:t.template?.template_id||"0",template_mint:parseInt(t.template?.template_id||"0")||0,max_supply:t.template?.max_supply||"0",traits:Object.fromEntries(Object.entries(t.data||{}).map(([e,t])=>[e,t??""]))}));throw new Error("Invalid API response")}catch(s){return Le.logError("ApiService.getUserInventory",s,{account:e}),[]}}async getUserInventoryPaginated(e,t=1,s=1e3){try{const a=this.approvedCollections.join(","),n=`${this.getCurrentAtomicEndpoint()}/atomicassets/v1/assets?owner=${e}&collection_name=${a}&burned=false&limit=${s}&page=${t}&order=desc&sort=asset_id`,i=await this.fetchWithRetry(n),r=await i.json();if(r.success&&r.data){const a=r.data.map(t=>({sale_id:"",asset_id:t.asset_id||"",name:t.name||`${t.collection?.collection_name||"Unknown"} #${t.asset_id}`,image:this.getAssetImage(t),price:"Not for sale",seller:e,collection:t.collection?.collection_name||"Unknown",schema:t.schema?.schema_name||"Unknown",template_id:t.template?.template_id||"0",template_mint:parseInt(t.template?.template_id||"0")||0,max_supply:t.template?.max_supply||"0",traits:Object.fromEntries(Object.entries(t.data||{}).map(([e,t])=>[e,t??""]))})),n=r.data.length===s;return{assets:a,hasMore:n,total:(t-1)*s+r.data.length+(n?1:0)}}throw new Error("Invalid API response")}catch(a){return Le.logError("ApiService.getUserInventoryPaginated",a,{account:e,page:t,limit:s}),{assets:[],hasMore:!1,total:0}}}async getUserInventoryAll(e,t=1,s=1e3){try{const a=`${this.getCurrentAtomicEndpoint()}/atomicassets/v1/assets?owner=${e}&burned=false&limit=${s}&page=${t}&order=desc&sort=asset_id`,n=await this.fetchWithRetry(a),i=await n.json();if(i.success&&i.data){const a=i.data.map(t=>({sale_id:"",asset_id:t.asset_id||"",name:t.name||`${t.collection?.collection_name||"Unknown"} #${t.asset_id}`,image:this.getAssetImage(t),video:this.getAssetVideo(t),price:"Not for sale",seller:e,collection:t.collection?.collection_name||"Unknown",schema:t.schema?.schema_name||"Unknown",template_id:t.template?.template_id||"0",template_mint:parseInt(t.template?.template_id||"0")||0,max_supply:t.template?.max_supply||"0",traits:Object.fromEntries(Object.entries(t.data||{}).map(([e,t])=>[e,t??""]))})),n=i.data.length===s;return{assets:a,total:(t-1)*s+a.length+(n?1:0),hasMore:n,currentPage:t}}return{assets:[],total:0,hasMore:!1,currentPage:t}}catch(a){return Le.logError("ApiService.getUserInventoryAll",a,{account:e,page:t,limit:s}),{assets:[],total:0,hasMore:!1,currentPage:t}}}async getUserInventoryByCollection(e,t,s=1e3,a=0){try{const n=`${this.getCurrentAtomicEndpoint()}/atomicassets/v1/assets?owner=${e}&collection_name=${t}&burned=false&limit=${s}&offset=${a}&order=desc&sort=asset_id`,i=await this.fetchWithRetry(n),r=await i.json();if(r.success&&r.data){const t=r.data.map(t=>({sale_id:"",asset_id:t.asset_id||"",name:t.name||`${t.collection?.collection_name||"Unknown"} #${t.asset_id}`,image:this.getAssetImage(t),price:"Not for sale",seller:e,collection:t.collection?.collection_name||"Unknown",schema:t.schema?.schema_name||"Unknown",template_id:t.template?.template_id||"0",template_mint:parseInt(t.template?.template_id||"0")||0,max_supply:t.template?.max_supply||"0",traits:Object.fromEntries(Object.entries(t.data||{}).map(([e,t])=>[e,t??""]))})),n=r.data.length===s;return{assets:t,total:a+t.length+(n?1:0),hasMore:n}}return{assets:[],total:0,hasMore:!1}}catch(n){return Le.logError("ApiService.getUserInventoryByCollection",n,{account:e,collectionName:t,limit:s,offset:a}),{assets:[],total:0,hasMore:!1}}}async getUserInventoryBySchema(e,t,s,a=1e3,n=0){try{const i=`${this.getCurrentAtomicEndpoint()}/atomicassets/v1/assets?owner=${e}&collection_name=${t}&schema_name=${s}&burned=false&limit=${a}&offset=${n}&order=desc&sort=asset_id`,r=await this.fetchWithRetry(i),l=await r.json();if(l.success&&l.data){const t=l.data.map(t=>({sale_id:"",asset_id:t.asset_id||"",name:t.name||`${t.collection?.collection_name||"Unknown"} #${t.asset_id}`,image:this.getAssetImage(t),price:"Not for sale",seller:e,collection:t.collection?.collection_name||"Unknown",schema:t.schema?.schema_name||"Unknown",template_id:t.template?.template_id||"0",template_mint:parseInt(t.template?.template_id||"0")||0,max_supply:t.template?.max_supply||"0",traits:Object.fromEntries(Object.entries(t.data||{}).map(([e,t])=>[e,t??""]))})),s=l.data.length===a;return{assets:t,total:n+t.length+(s?1:0),hasMore:s}}return{assets:[],total:0,hasMore:!1}}catch(i){return Le.logError("ApiService.getUserInventoryBySchema",i,{account:e,collectionName:t,schemaName:s,limit:a,offset:n}),{assets:[],total:0,hasMore:!1}}}async getUserInventoryOverview(e){try{const t=`${He.WAX_CHAIN.EOSRIO}/v1/chain/get_table_rows`,s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({json:!0,code:"atomicassets",scope:e,table:"assets",limit:1e3,reverse:!1})}),a=await s.json(),n=new Map;let i=0;a.rows&&a.rows.forEach(e=>{if(!e.collection_name)return;i++;const t=e.collection_name,s=e.schema_name||"unknown";n.has(t)||n.set(t,{count:0,schemas:new Map});const a=n.get(t);a.count++,a.schemas.set(s,(a.schemas.get(s)||0)+1)});const r=Array.from(n.entries()).map(([e,t])=>({name:e,count:t.count,schema_counts:Object.fromEntries(t.schemas)})).sort((e,t)=>t.count-e.count);return{totalAssets:i,collections:r,topCollections:r.slice(0,10)}}catch(t){Le.logError("ApiService.getUserInventoryOverview",t,{account:e});try{const t=`${this.atomicEndpoints[this.currentEndpointIndex]}/atomicassets/v1/assets?owner=${e}&page=1&limit=1`,s=await this.fetchWithRetry(t),a=await s.json();return{totalAssets:a.success&&a.query_total||0,collections:[],topCollections:[]}}catch(s){return Le.logError("ApiService.getUserInventoryOverview.fallback",s,{account:e}),{totalAssets:0,collections:[],topCollections:[]}}}}async getUserInventoryOptimized(e,t={}){const{page:s=1,limit:a=1e3,collectionName:n,schemaName:i,useCache:r=!0,cacheTTL:l=3e5}=t,o=`inventory_${e}_${s}_${a}_${n||"all"}_${i||"all"}`;if(r){const e=this.getFromCache(o);if(e)return e}try{let t=`${this.atomicEndpoints[this.currentEndpointIndex]}/atomicassets/v1/assets?owner=${e}&burned=false&limit=${a}&page=${s}&order=desc&sort=asset_id`;n&&"all"!==n&&(t+=`&collection_name=${n}`),i&&(t+=`&schema_name=${i}`);const c=await this.fetchWithRetry(t),d=await c.json();if(d.success&&d.data){const t=d.data.map(t=>({sale_id:"",asset_id:t.asset_id||"",name:t.name||`${t.collection?.collection_name||"Unknown"} #${t.asset_id}`,image:this.getAssetImage(t),price:"Not for sale",seller:e,collection:t.collection?.collection_name||"Unknown",schema:t.schema?.schema_name||"Unknown",template_id:t.template?.template_id||"0",template_mint:parseInt(t.template?.template_id||"0")||0,max_supply:t.template?.max_supply||"0",traits:Object.fromEntries(Object.entries(t.data||{}).map(([e,t])=>[e,t??""]))})),n=d.data.length===a,i={assets:t,total:d.query_total||(s-1)*a+t.length+(n?1:0),hasMore:n,currentPage:s};return r&&this.setCache(o,i,l),i}return{assets:[],total:0,hasMore:!1,currentPage:s}}catch(c){return Le.logError("ApiService.getUserInventoryOptimized",c,{account:e,page:s,limit:a,collectionName:n,schemaName:i}),{assets:[],total:0,hasMore:!1,currentPage:s}}}async getUserInventoryBatch(e,t={}){const{batchSize:s=1e3,maxBatches:a=20,delayMs:n=500,collectionName:i,onProgress:r,maxRetries:l=3,onError:o}=t,c=[],d=[];let u=1,h=!0,m=0;for(;h&&u<=a&&m<3;){let t=!1,f=null;for(let x=0;x<=l;x++)try{if(x>0){const e=n*Math.pow(1.5,m),t=Math.min(1e3*Math.pow(2,x-1)+e,1e4);await new Promise(e=>setTimeout(e,t))}const l=await this.getUserInventoryOptimized(e,{page:u,limit:s,collectionName:i,useCache:!1});c.push(...l.assets),h=l.hasMore,t=!0,m=0,r&&r({current:u,total:Math.min(a,Math.ceil(l.total/s)),assets:[...c],errors:[...d]});break}catch(p){f=p;const t=x<l;if(o&&o(f,u,t),Le.logError(`ApiService.getUserInventoryBatch.batch${u}.attempt${x+1}`,f,{account:e,batchSize:s,currentBatch:u,retryAttempt:x}),!t){const t=`Batch ${u} failed after ${l+1} attempts: ${f.message}`;if(d.push(t),m++,this.isCriticalError(f))return Le.logError("ApiService.getUserInventoryBatch.criticalError",f,{account:e,currentBatch:u,errorType:"critical"}),{assets:c,errors:[...d,"Critical error encountered, stopping batch processing"],partialSuccess:c.length>0}}}if(u++,h&&u<=a&&t){const e=n*Math.pow(1.2,Math.min(m,3));await new Promise(t=>setTimeout(t,e))}}if(m>=3){const t=`Stopped processing due to ${m} consecutive batch failures`;d.push(t),Le.logError("ApiService.getUserInventoryBatch.tooManyFailures",new Error(t),{account:e,currentBatch:u,consecutiveFailures:m})}return{assets:c,errors:d,partialSuccess:c.length>0&&(d.length>0||m>0)}}isCriticalError(e){const t=e.message.toLowerCase();return t.includes("unauthorized")||t.includes("forbidden")||t.includes("invalid account")||t.includes("network error")||t.includes("dns")||t.includes("connection refused")}async executeBatchOperation(e,t,s={}){const{batchSize:a=100,maxRetries:n=3,delayMs:i=500,onProgress:r,onError:l,stopOnCriticalError:o=!0}=s,c=[],d=[],u=this.chunkArray(e,a);let h=0;for(let p=0;p<u.length;p++){const e=u[p];let s=!1,a=null;for(let i=0;i<=n;i++)try{if(i>0){const e=Math.min(1e3*Math.pow(2,i-1),1e4);await new Promise(t=>setTimeout(t,e))}const a=await t(e,p);c.push(...a),s=!0,h=0,r&&r({completed:p+1,total:u.length,errors:[...d]});break}catch(m){a=m;const t=i<n;if(l&&l(a,p,t),Le.logError(`ApiService.executeBatchOperation.batch${p}.attempt${i+1}`,a,{batchIndex:p,retryAttempt:i,batchSize:e.length}),!t){const e=`Batch ${p} failed after ${n+1} attempts: ${a.message}`;if(d.push(e),h++,o&&this.isCriticalError(a))return Le.logError("ApiService.executeBatchOperation.criticalError",a,{batchIndex:p,errorType:"critical"}),{results:c,errors:[...d,"Critical error encountered, stopping batch processing"],partialSuccess:c.length>0}}}if(h>=3){const e=`Stopped processing due to ${h} consecutive batch failures`;d.push(e),Le.logError("ApiService.executeBatchOperation.tooManyFailures",new Error(e),{batchIndex:p,consecutiveFailures:h});break}if(p<u.length-1&&s){const e=i*Math.pow(1.2,Math.min(h,3));await new Promise(t=>setTimeout(t,e))}}return{results:c,errors:d,partialSuccess:c.length>0&&d.length>0}}chunkArray(e,t){const s=[];for(let a=0;a<e.length;a+=t)s.push(e.slice(a,a+t));return s}async getUserInventoryWithFilter(e,t=1,s=1e3,a){try{let n=`${this.getCurrentAtomicEndpoint()}/atomicassets/v1/assets?owner=${e}&burned=false&limit=${s}&page=${t}&order=desc&sort=asset_id`;a&&"all"!==a&&(n+=`&collection_name=${a}`);const i=await this.fetchWithRetry(n),r=await i.json();if(r.success&&r.data){const a=r.data.map(t=>({sale_id:"",asset_id:t.asset_id||"",name:t.name||`${t.collection?.collection_name||"Unknown"} #${t.asset_id}`,image:this.getAssetImage(t),video:this.getAssetVideo(t),price:"Not for sale",seller:e,collection:t.collection?.collection_name||"Unknown",schema:t.schema?.schema_name||"Unknown",template_id:t.template?.template_id||"0",template_mint:parseInt(t.template?.template_id||"0")||0,max_supply:t.template?.max_supply||"0",traits:Object.fromEntries(Object.entries(t.data||{}).map(([e,t])=>[e,t??""]))})),n=r.data.length===s;return{assets:a,total:(t-1)*s+a.length+(n?1:0),hasMore:n,currentPage:t}}return{assets:[],total:0,hasMore:!1,currentPage:t}}catch(n){return Le.logError("ApiService.getUserInventoryWithFilter",n,{account:e,page:t,limit:s,collectionName:a}),{assets:[],total:0,hasMore:!1,currentPage:t}}}async getUserInventoryEnhanced(e,t={}){const{page:s=1,limit:a=1e3,order:n="desc",sort:i="transferred",burned:r=!1,...l}=t;try{const t=new URLSearchParams({owner:e,burned:r.toString(),limit:a.toString(),page:s.toString(),order:n,sort:i});Object.entries(l).forEach(([e,s])=>{null!=s&&""!==s&&t.append(e,s.toString())});const o=`${this.getCurrentAtomicEndpoint()}/atomicassets/v1/assets?${t.toString()}`,c=await this.fetchWithRetry(o),d=await c.json();if(d.success&&d.data){const t=d.data.map(t=>({sale_id:"",asset_id:t.asset_id||"",name:t.name||`${t.collection?.collection_name||"Unknown"} #${t.asset_id}`,image:this.getAssetImage(t),video:this.getAssetVideo(t),price:"Not for sale",seller:e,collection:t.collection?.collection_name||"Unknown",schema:t.schema?.schema_name||"Unknown",template_id:t.template?.template_id||"0",template_mint:parseInt(t.template?.template_id||"0")||0,max_supply:t.template?.max_supply||"0",traits:Object.fromEntries(Object.entries(t.data||{}).map(([e,t])=>[e,t??""]))})),n=[...new Set(t.map(e=>e.collection))].filter(e=>"Unknown"!==e),i=[...new Set(t.map(e=>e.schema))].filter(e=>"Unknown"!==e),r=d.data.length===a;return{assets:t,total:(s-1)*a+t.length+(r?1:0),hasMore:r,currentPage:s,collections:n,schemas:i}}return{assets:[],total:0,hasMore:!1,currentPage:s,collections:[],schemas:[]}}catch(o){return Le.logError("ApiService.getUserInventoryEnhanced",o,{account:e,options:t}),{assets:[],total:0,hasMore:!1,currentPage:s,collections:[],schemas:[]}}}async getUserInventoryByTemplate(e,t,s=1e3,a=0){try{const n=`${this.getCurrentAtomicEndpoint()}/atomicassets/v1/assets?owner=${e}&template_id=${t}&burned=false&limit=${s}&offset=${a}&order=desc&sort=asset_id`,i=await this.fetchWithRetry(n),r=await i.json();if(r.success&&r.data){const t=r.data.map(t=>({sale_id:"",asset_id:t.asset_id||"",name:t.name||`${t.collection?.collection_name||"Unknown"} #${t.asset_id}`,image:this.getAssetImage(t),price:"Not for sale",seller:e,collection:t.collection?.collection_name||"Unknown",schema:t.schema?.schema_name||"Unknown",template_mint:parseInt(t.template?.template_id||"0")||0,max_supply:t.template?.max_supply||"0",traits:Object.fromEntries(Object.entries(t.data||{}).map(([e,t])=>[e,t??""]))})),n=r.data.length===s;return{assets:t,total:a+t.length+(n?1:0),hasMore:n}}return{assets:[],total:0,hasMore:!1}}catch(n){return Le.logError("ApiService.getUserInventoryByTemplate",n,{account:e,templateId:t,limit:s,offset:a}),{assets:[],total:0,hasMore:!1}}}async getUserInventoryWaxRocks(e,t=1e3,s=0){try{const{MarketplaceConfigService:a}=await Y(async()=>{const{MarketplaceConfigService:e}=await Promise.resolve().then(()=>Ve);return{MarketplaceConfigService:e}},void 0),n=a.getPixalTemplateId(),i=`${this.getCurrentAtomicEndpoint()}/atomicassets/v1/assets?owner=${e}&template_id=${n}&burned=false&limit=${t}&offset=${s}&order=desc&sort=asset_id`,r=await this.fetchWithRetry(i),l=await r.json();if(l.success&&l.data){const s=l.data.filter(e=>{const t=e.data?.WaxRock||e.template?.immutable_data?.WaxRock;return!(!t||"string"!=typeof t)&&("none"!==t&&a.isValidWaxRock(t))}).map(t=>({sale_id:"",asset_id:t.asset_id||"",name:t.name||`${t.collection?.collection_name||"Unknown"} #${t.asset_id}`,image:this.getAssetImage(t),price:"Not for sale",seller:e,collection:t.collection?.collection_name||"Unknown",schema:t.schema?.schema_name||"Unknown",template_mint:parseInt(t.template?.template_id||"0")||0,max_supply:t.template?.max_supply||"0",traits:Object.fromEntries(Object.entries(t.data||{}).map(([e,t])=>[e,t??""])),data:t.data})),n=l.data.length===t;return{assets:s,total:s.length,hasMore:n}}return{assets:[],total:0,hasMore:!1}}catch(a){return Le.logError("ApiService.getUserInventoryWaxRocks",a,{account:e,limit:t,offset:s}),{assets:[],total:0,hasMore:!1}}}async getWaxChainInfo(){try{const e=await this.fetchWithRetry(`${this.waxChainAPI}/v1/chain/get_info`);if(e.ok)return await e.json();throw new Error("Failed to fetch chain info")}catch(e){return Le.logError("ApiService.getWaxChainInfo",e),this.currentWaxChainIndex<this.waxChainEndpoints.length-1?(this.currentWaxChainIndex++,this.getWaxChainInfo()):(this.currentWaxChainIndex=0,null)}}async getWaxAccountInfo(e){for(let s=0;s<this.waxChainEndpoints.length;s++){const a=this.waxChainEndpoints[s];try{const t=await fetch(`${a}/v1/chain/get_account`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},mode:"cors",body:JSON.stringify({account_name:e})});if(t.ok){const e=await t.json();return this.currentWaxChainIndex=s,e}Oe.warn(`Endpoint ${a} returned status ${t.status}: ${t.statusText}`,"API")}catch(t){Le.logError("ApiService.getWaxAccountInfo",t,{endpoint:a,accountName:e})}}return Le.logError("ApiService.getWaxAccountInfo",new Error("All WAX chain endpoints failed for get_account"),{accountName:e}),null}async getWaxCurrencyBalance(e,t="eosio.token",s="WAX"){Oe.debug(`Attempting to fetch currency balance for: ${e}`,"API");for(let n=0;n<this.waxChainEndpoints.length;n++){const i=this.waxChainEndpoints[n];Oe.debug(`Trying endpoint ${n+1}/${this.waxChainEndpoints.length}: ${i}`,"API");try{const a=await fetch(`${i}/v1/chain/get_currency_balance`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},mode:"cors",body:JSON.stringify({code:t,account:e,symbol:s})});if(a.ok){const e=await a.json();return Oe.debug(`Successfully fetched currency balance from ${i}`,"API"),this.currentWaxChainIndex=n,e.map(e=>({balance:e,contract:t,symbol:e.split(" ")[1]||s}))}Oe.warn(`Endpoint ${i} returned status ${a.status}: ${a.statusText}`,"API")}catch(a){Le.logError("ApiService.getWaxCurrencyBalance",a,{endpoint:i,accountName:e,contract:t,symbol:s})}}return Le.logError("ApiService.getWaxCurrencyBalance",new Error("All WAX chain endpoints failed for get_currency_balance"),{accountName:e,contract:t,symbol:s}),[]}async getLightApiBalances(e){try{const t=`${this.waxLightAPI}/api/balances/wax/${e}`,s=await fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},mode:"cors"});if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);return await s.json()}catch(t){return Le.logError("ApiService.getLightApiBalances",t,{accountName:e}),null}}async getLightApiAccountInfo(e){try{const t=`${this.waxLightAPI}/api/account/wax/${e}`,s=await fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},mode:"cors"});if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);return await s.json()}catch(t){return Le.logError("ApiService.getLightApiAccountInfo",t,{accountName:e}),null}}async getAlcorTokenPrice(e,t){let s=null;try{const a=`${e.toLowerCase()}-${t}`,n=`${this.alcorAPI}/tokens/${a}`,i=new AbortController;s=setTimeout(()=>{i.abort()},8e3);const r=await this.fetchAlcorAPI(n,2,{signal:i.signal});if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);return await r.json()}catch(a){return a instanceof Error&&"AbortError"===a.name?(Oe.warn(`Alcor API request timeout for ${e}`,"API"),null):(Oe.warn(`Error fetching Alcor token price for ${e}`,"API",a),"wax"===e.toLowerCase()?{symbol:"WAX",contract:"eosio.token",id:"wax-eosio.token",system_price:.05,usd_price:.05,decimals:8}:null)}finally{s&&clearTimeout(s)}}async getAlcorMarkets(){try{const e=`${this.alcorAPI}/pairs`,t=await this.fetchAlcorAPI(e);return await t.json()}catch(e){return Le.logError("ApiService.getAlcorMarkets",e),[]}}async getMarketplaceConfig(){try{return{partnerCollections:["friedfactory","pixeljourney"],tokenContracts:["alien.worlds","prospectorsc","token.nefty"],supportedTokens:[{contract:"eosio.token",symbol:"WAX",precision:8},{contract:"alien.worlds",symbol:"TLM",precision:4},{contract:"prospectorsc",symbol:"PGL",precision:4},{contract:"token.nefty",symbol:"NEFTY",precision:8}]}}catch(e){return Le.logError("ApiService.getMarketplaceConfig",e),{partnerCollections:["friedfactory","pixeljourney"],tokenContracts:["alien.worlds","prospectorsc","token.nefty"],supportedTokens:[{contract:"eosio.token",symbol:"WAX",precision:8}]}}}async getPartnerCollections(){try{return(await this.getMarketplaceConfig()).partnerCollections}catch(e){return Le.logError("ApiService.getPartnerCollections",e),["friedfactory","pixeljourney"]}}async getTokenContracts(){try{return(await this.getMarketplaceConfig()).tokenContracts}catch(e){return Le.logError("ApiService.getTokenContracts",e),["alien.worlds","prospectorsc","token.nefty"]}}async getAlcorSwapQuote(e){try{const t=`${this.alcorAPI}/swap/quote`,s=await this.fetchAlcorAPI(t,3,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await s.json()}catch(t){return Le.logError("ApiService.getAlcorSwapQuote",t,{params:e}),null}}async getPXJPrice(){try{const e=await this.getAlcorTokenPrice("PXJ","pixeljourney");return e?.system_price||0}catch(e){return Le.logError("ApiService.getPXJPrice",e),0}}async calculatePortfolioValue(e){let t=0;for(const a of e)try{const e=await this.getAlcorTokenPrice(a.currency,a.contract);if(e){const s=parseFloat(a.amount),n=parseInt(a.decimals);t+=s/Math.pow(10,n)*e.usd_price}}catch(s){Oe.warn(`Could not get price for ${a.currency}`,"API",s)}return t}async getMarketplaceNFTs(e){try{const{page:t=1,limit:s=100,asset_id:a,state:n=1}=e;let i=`${this.atomicEndpoints[this.currentEndpointIndex]}/atomicmarket/v1/sales?state=${n}&page=${t}&limit=${s}&order=desc&sort=created`;a&&(i+=`&asset_id=${a}`);const r=await this.fetchWithRetry(i),l=await r.json();return l.success&&l.data?{success:!0,data:l.data.map(e=>({sale_id:e.sale_id,asset_id:e.assets[0]?.asset_id||"",price:e.price?`${(parseFloat(e.price.amount)/Math.pow(10,e.price.token_precision||8)).toFixed(8)} ${e.price.token_symbol}`:"0 WAX",seller:e.seller,created_at_time:e.created_at_time}))}:{success:!0,data:[]}}catch(t){return Le.logError("ApiService.getMarketplaceNFTs",t,{params:e}),{success:!1,data:[]}}}async getAssetOffers(e){try{const t=`${this.atomicEndpoints[this.currentEndpointIndex]}/atomicmarket/v1/buyoffers?asset_id=${e}&state=0&page=1&limit=100&order=desc&sort=price`,s=await this.fetchWithRetry(t),a=await s.json();return a.success&&a.data?a.data.map(e=>({id:e.buyoffer_id,buyer:e.buyer,price:e.price.amount,symbol:e.price.token_symbol,timestamp:e.created_at_time,memo:e.memo||""})):[]}catch(t){return Le.logError("ApiService.getAssetOffers",t,{assetId:e}),[]}}async getAssetsBatch(e){if(!e.length)return{success:!0,data:[],errors:[]};try{const s=this.chunkArray(e,100),a=[],n=[];for(const e of s)try{const t=e.join(","),s=`${this.atomicEndpoints[this.currentEndpointIndex]}/atomicassets/v1/assets`,i=await this.fetchWithRetry(s,3,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:t,limit:"1000"})}),r=await i.json();r.success&&r.data?a.push(...r.data):n.push(`Failed to fetch assets batch: ${e.join(", ")}`)}catch(t){Le.logError("ApiService.getAssetsBatch",t,{chunk:e}),n.push(`Error fetching assets: ${e.join(", ")}`)}return{success:0===n.length,data:a,errors:n}}catch(t){return Le.logError("ApiService.getAssetsBatch",t,{assetIds:e}),{success:!1,data:[],errors:[`Failed to process asset batch: ${t}`]}}}async getTemplatesBatch(e){if(!e.length)return{success:!0,data:[],errors:[]};try{const s=this.chunkArray(e,100),a=[],n=[];for(const e of s)try{const t=e.join(","),s=`${this.atomicEndpoints[this.currentEndpointIndex]}/atomicassets/v1/templates`,i=await this.fetchWithRetry(s,3,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:t,limit:"1000"})}),r=await i.json();r.success&&r.data?a.push(...r.data):n.push(`Failed to fetch templates batch: ${e.join(", ")}`)}catch(t){Le.logError("ApiService.getTemplatesBatch",t,{chunk:e}),n.push(`Error fetching templates: ${e.join(", ")}`)}return{success:0===n.length,data:a,errors:n}}catch(t){return Le.logError("ApiService.getTemplatesBatch",t,{templateIds:e}),{success:!1,data:[],errors:[`Failed to process template batch: ${t}`]}}}async getAssetCountsBatch(e,t){if(!e.length)return{success:!0,data:{},errors:[]};try{const a={},n=[],i=this.chunkArray(e,50);for(const e of i)try{const s=e.map(async e=>{try{const s={template_id:e,limit:1};t&&(s.owner=t);const a=`${this.atomicEndpoints[this.currentEndpointIndex]}/atomicassets/v1/assets`,n=new URLSearchParams;Object.entries(s).forEach(([e,t])=>{null!=t&&n.append(e,String(t))});const i=await this.fetchWithRetry(`${a}?${n}`),r=await i.json();return r.success?{templateId:e,count:parseInt(r.query_total||"0")}:{templateId:e,count:0,error:"API returned unsuccessful response"}}catch(s){return{templateId:e,count:0,error:String(s)}}});(await Promise.all(s)).forEach(e=>{e.error&&n.push(`Error fetching count for template ${e.templateId}: ${e.error}`),a[e.templateId]=e.count}),i.indexOf(e)<i.length-1&&await new Promise(e=>setTimeout(e,100))}catch(s){Le.logError("ApiService.getAssetCountsBatch chunk",s,{chunk:e}),e.forEach(e=>{a[e]=0,n.push(`Error processing template ${e}: ${s}`)})}return{success:0===n.length,data:a,errors:n}}catch(s){return Le.logError("ApiService.getAssetCountsBatch",s,{templateIds:e}),{success:!1,data:{},errors:[`Failed to process asset counts batch: ${s}`]}}}async getOffers(e={}){try{const{page:t=1,limit:s=100,order:a="desc",sort:n="created",state:i="0",collection_name:r,schema_name:l,template_id:o,asset_id:c,buyer:d,seller:u,min_price:h,max_price:m,symbol:p="WAX"}=e;let f=`${this.atomicEndpoints[this.currentEndpointIndex]}/atomicmarket/v1/buyoffers?page=${t}&limit=${s}&order=${a}&sort=${n}&state=${i}&symbol=${p}`;r&&(f+=`&collection_name=${r}`),l&&(f+=`&schema_name=${l}`),o&&(f+=`&template_id=${o}`),c&&(f+=`&asset_id=${c}`),d&&(f+=`&buyer=${d}`),u&&(f+=`&seller=${u}`),h&&(f+=`&min_price=${h}`),m&&(f+=`&max_price=${m}`);const x=await this.fetchWithRetry(f),g=await x.json();return{success:g.success||!1,data:g.data||[],query_total:g.query_total}}catch(t){return Le.logError("ApiService.getOffers",t,e),{success:!1,data:[]}}}async getPrices(e={}){try{const{page:t=1,limit:s=100,order:a="desc",sort:n="created",collection_name:i,schema_name:r,template_id:l,symbol:o="WAX"}=e;let c=`${this.atomicEndpoints[this.currentEndpointIndex]}/atomicmarket/v1/prices?page=${t}&limit=${s}&order=${a}&sort=${n}&symbol=${o}`;i&&(c+=`&collection_name=${i}`),r&&(c+=`&schema_name=${r}`),l&&(c+=`&template_id=${l}`);const d=await this.fetchWithRetry(c),u=await d.json();return{success:u.success||!1,data:u.data||[],query_total:u.query_total}}catch(t){return Le.logError("ApiService.getPrices",t,e),{success:!1,data:[]}}}async getTransfers(e={}){try{const{page:t=1,limit:s=100,order:a="desc",sort:n="created",collection_name:i,schema_name:r,template_id:l,asset_id:o,sender:c,recipient_name:d}=e;let u=`${this.atomicEndpoints[this.currentEndpointIndex]}/atomicassets/v1/transfers?page=${t}&limit=${s}&order=${a}&sort=${n}`;i&&(u+=`&collection_name=${i}`),r&&(u+=`&schema_name=${r}`),l&&(u+=`&template_id=${l}`),o&&(u+=`&asset_id=${o}`),c&&(u+=`&sender_name=${c}`),d&&(u+=`&recipient_name=${d}`);const h=await this.fetchWithRetry(u),m=await h.json();return{success:m.success||!1,data:m.data||[],query_total:m.query_total}}catch(t){return Le.logError("ApiService.getTransfers",t,e),{success:!1,data:[]}}}async getCollectionMarketStats(e={}){try{const{collection_name:t,symbol:s="WAX"}=e;let a=`${this.atomicEndpoints[this.currentEndpointIndex]}/atomicmarket/v1/stats/collections?symbol=${s}`;t&&(a=`${this.atomicEndpoints[this.currentEndpointIndex]}/atomicmarket/v1/stats/collections/${t}?symbol=${s}`);const n=await this.fetchWithRetry(a),i=await n.json();return{success:i.success||!1,data:i.data||{}}}catch(t){return Le.logError("ApiService.getCollectionMarketStats",t,e),{success:!1,data:{symbol:"",market_contract:"",sales:"0",volume:"0",suggested_median:"0",suggested_average:"0"}}}}async getTemplateStats(e,t,s="WAX"){try{const a=`${this.atomicEndpoints[this.currentEndpointIndex]}/atomicmarket/v1/stats/templates/${e}/${t}?symbol=${s}`,n=await this.fetchWithRetry(a),i=await n.json();return{success:i.success||!1,data:i.data||{}}}catch(a){return Le.logError("ApiService.getTemplateStats",a,{collectionName:e,templateId:t,symbol:s}),{success:!1,data:{template_id:"",collection_name:"",assets:"0",burned:"0",sales:"0",volume:"0",suggested_median:"0",suggested_average:"0"}}}}async getHyperionTransactionHistory(e,t=100,s=0){Oe.debug("\ud83d\udd0d Fetching Hyperion transaction history for:","API",{account:e});try{const a=`${this.hyperionEndpoints[this.currentHyperionIndex]}/v2/history/get_actions`,n=new URLSearchParams({account:e,limit:Math.min(t,1e3).toString(),skip:s.toString(),sort:"desc"});Oe.debug("\ud83d\udce1 Hyperion API URL:","API",{url:`${a}?${n}`});const i=await this.fetchWithRetry(`${a}?${n}`),r=await i.json();if(!r.actions||!Array.isArray(r.actions))return Oe.warn("No actions found in Hyperion response","API"),[];Oe.debug(`\ud83d\udcca Found ${r.actions.length} Hyperion actions`,"API");const l=r.actions.map(t=>{const s=t.act.data;let a="unknown";return a="eosio.token"===t.act.account&&"transfer"===t.act.name?s.from===e?"token_send":"token_receive":"atomicassets"===t.act.account&&"transfer"===t.act.name?"nft_transfer":"atomicmarket"===t.act.account&&"purchasesale"===t.act.name?"nft_purchase":"atomicmarket"===t.act.account&&"announcesale"===t.act.name?"nft_listing":"atomicmarket"===t.act.account&&"cancelsale"===t.act.name?"nft_cancel_listing":`${t.act.account}_${t.act.name}`,{transaction_id:t.trx_id,block_time:t.timestamp,action_name:t.act.name,contract:t.act.account,from:s.from,to:s.to,quantity:s.quantity,memo:s.memo,asset_ids:s.asset_ids,collection_name:s.collection_name,type:a,status:"completed"}});return Oe.debug(`\u2705 Processed ${l.length} Hyperion transactions`,"API"),l}catch(a){return Oe.error("\u274c Hyperion API error","API",a),this.currentHyperionIndex<this.hyperionEndpoints.length-1?(this.currentHyperionIndex++,Oe.debug(`\ud83d\udd04 Switching to Hyperion endpoint ${this.currentHyperionIndex+1}`,"API"),this.getHyperionTransactionHistory(e,t,s)):(this.currentHyperionIndex=0,Le.logError("ApiService.getHyperionTransactionHistory",a,{account:e,limit:t,skip:s}),[])}}async getAccountTransfers(e,t,s,a=50,n=0){try{const i=`${this.hyperionEndpoints[this.currentHyperionIndex]}/v2/history/get_actions`,r=new URLSearchParams({account:e,limit:Math.min(a,100).toString(),sort:"desc",skip:n.toString(),"transfer.to":e});Oe.debug("\ud83d\udd0d Fetching account transfers from Hyperion:","API",{account:e,contract:t,symbol:s,url:`${i}?${r}`});const l=await this.fetchWithRetry(`${i}?${r}`),o=await l.json();if(!o.actions||!Array.isArray(o.actions))return Oe.warn("No actions found in Hyperion response for transfers","API"),[];Oe.debug(`\ud83d\udcca Found ${o.actions.length} Hyperion transfer actions`,"API");const c=o.actions.filter(a=>{const n=a.act;return n?.account===t&&"transfer"===n?.name&&(n?.data?.to===e||n?.data?.from===e)&&(n?.data?.quantity?.includes(s)||n?.data?.symbol===s)}).slice(0,a).map(e=>{const t=e.act.data;return{from:t.from,to:t.to,quantity:t.quantity,memo:t.memo||"",timestamp:e.timestamp,transaction_id:e.trx_id,block_num:e.block_num}});return Oe.debug(`\u2705 Processed ${c.length} transfers for account ${e}`,"API"),c}catch(i){return Le.logError("ApiService.getAccountTransfers",i,{account:e,contract:t,symbol:s,limit:a,offset:n}),Oe.warn("Falling back to legacy WAX chain API","API"),this.fetchTransfersFromWaxChainAPI(e,t,s,a,n)}}async fetchTransfersFromWaxChainAPI(e,t,s,a=50,n=0){try{const i=await fetch(`${this.waxChainAPI}/v1/history/get_actions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({account_name:e,pos:-1,offset:n,filter:`${t}:transfer`})});if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);const r=(await i.json()).actions||[];return r.filter(a=>{const n=a.action_trace?.act;return"transfer"===n?.name&&n?.account===t&&(n?.data?.to===e||n?.data?.from===e)&&n?.data?.quantity?.includes(s)}).slice(0,a).map(e=>{const t=e.action_trace.act.data;return{from:t.from,to:t.to,quantity:t.quantity,memo:t.memo||"",timestamp:e.block_time,transaction_id:e.action_trace.trx_id,block_num:e.block_num}})}catch(i){return Le.logError("ApiService.fetchTransfersFromWaxChainAPI",i,{account:e,contract:t,symbol:s,limit:a,offset:n}),[]}}async getUserTransactions(e,t=500){Oe.debug("\ud83d\udd0d getUserTransactions called for account:","API",{account:e,limit:t});try{const a=[];try{Oe.debug("\ud83d\ude80 Fetching Hyperion transaction history...","API");const s=await this.getHyperionTransactionHistory(e,Math.min(t,200));Oe.debug("\ud83d\ude80 Hyperion transactions:","API",{count:s.length});const n=s.map(e=>({transaction_id:e.transaction_id,block_time:e.block_time,action_name:e.action_name,asset_id:e.asset_ids?.[0],asset_name:e.asset_ids?.[0]?`Asset #${e.asset_ids[0]}`:void 0,collection_name:e.collection_name,price:e.quantity,from:e.from,to:e.to,type:e.type,status:e.status,memo:e.memo}));a.push(...n),Oe.debug("\u2705 Added Hyperion transactions","API",{count:n.length})}catch(s){Oe.warn("Failed to fetch Hyperion transactions","API",s)}try{const s=`${this.atomicEndpoints[this.currentEndpointIndex]}/atomicmarket/v1/sales?account=${e}&state=3&page=1&limit=${Math.min(t,200)}&order=desc&sort=updated`;Oe.debug("\ud83d\udcca Fetching marketplace transactions from:","API",{url:s});const n=await this.fetchWithRetry(s),i=await n.json();if(Oe.debug("\ud83d\udcca Marketplace response:","API",{success:i.success,dataLength:i.data?.length}),i.success&&i.data){const t=i.data.map(t=>{const s=parseFloat(t.price.amount)/Math.pow(10,t.price.token_precision||8),a="WAX"===t.price.token_symbol?Me(s):`${Re(s)} ${t.price.token_symbol}`;return{transaction_id:t.sale_id,block_time:t.updated_at_time,action_name:t.buyer===e?"purchase":"sale",asset_id:t.assets[0]?.asset_id,asset_name:t.assets[0]?.name||`Asset #${t.assets[0]?.asset_id}`,collection_name:t.assets[0]?.collection?.collection_name,price:a,from:t.buyer===e?t.seller:e,to:t.buyer===e?e:t.buyer,type:t.buyer===e?"purchase":"sale",status:"completed"}});a.push(...t)}}catch(s){Oe.warn("Failed to fetch marketplace transactions","API",s)}try{const s=`${this.atomicEndpoints[this.currentEndpointIndex]}/atomicassets/v1/transfers?account=${e}&page=1&limit=${Math.min(t,200)}&order=desc&sort=created`;Oe.debug("\ud83d\udd04 Fetching NFT transfers from:","API",{url:s});const n=await this.fetchWithRetry(s),i=await n.json();if(Oe.debug("\ud83d\udd04 NFT transfers response:","API",{success:i.success,dataLength:i.data?.length}),i.success&&i.data){const e=i.data.filter(e=>e.sender!==e.recipient).map(e=>{const t=e.assets?.[0];return{transaction_id:e.tx_id||`transfer_${e.transfer_id}`,block_time:e.created_at_time,action_name:"transfer",asset_id:t?.asset_id,asset_name:t?.name||`Asset #${t?.asset_id}`,collection_name:t?.collection?.collection_name,price:void 0,from:e.sender,to:e.recipient,type:"transfer",status:"completed",memo:e.memo||void 0}});a.push(...e)}}catch(s){Oe.warn("Failed to fetch NFT transfers","API",s)}try{Oe.debug("\ud83d\udcb0 Fetching token transfers for account:","API",{account:e});const s=await this.getAccountTransfers(e,"eosio.token","WAX",Math.min(t,100));Oe.debug("\ud83d\udcb0 Token transfers response:","API",{count:s.length});const n=s.map(t=>({transaction_id:t.transaction_id,block_time:t.timestamp,action_name:"token_transfer",asset_id:void 0,asset_name:"WAX Token",collection_name:"WAX",price:t.quantity,from:t.from,to:t.to,type:t.from===e?"token_send":"token_receive",status:"completed",memo:t.memo}));a.push(...n)}catch(s){Oe.warn("Failed to fetch token transfers","API",s)}Oe.debug("\ud83d\udccb Total transactions found:","API",{count:a.length});const n=new Map;a.forEach(e=>{const t=n.get(e.transaction_id);if(t){const s={...t,...e,asset_id:e.asset_id||t.asset_id,asset_name:e.asset_name||t.asset_name,collection_name:e.collection_name||t.collection_name,price:e.price||t.price,from:e.from||t.from,to:e.to||t.to,memo:e.memo||t.memo};n.set(e.transaction_id,s)}else n.set(e.transaction_id,e)});const i=Array.from(n.values()).sort((e,t)=>new Date(t.block_time).getTime()-new Date(e.block_time).getTime()).slice(0,t);return Oe.debug("\u2705 Returning unique transactions","API",{unique:i.length,total:a.length}),i}catch(s){return Le.logError("ApiService.getUserTransactions",s,{account:e,limit:t}),[]}}async getUserStats(e){try{let s="2023-01-01";try{const t=await this.getWaxAccountInfo(e);if(t?.created){s=new Date(t.created).toISOString().split("T")[0]}}catch(t){Oe.warn("Failed to fetch account creation date","API",{account:e,error:t})}const a=`${this.atomicEndpoints[this.currentEndpointIndex]}/atomicassets/v1/assets?owner=${e}&page=1&limit=1`,n=await this.fetchWithRetry(a),i=await n.json(),r=i.success&&(i.query_total||i.data?.length)||0,l=`${this.atomicEndpoints[this.currentEndpointIndex]}/atomicmarket/v1/sales?seller=${e}&state=3&page=1&limit=100&order=desc&sort=updated`,o=await this.fetchWithRetry(l),c=await o.json();let d=0,u=0;const h=new Set;c.success&&c.data&&(d=c.data.length,c.data.forEach(e=>{u+=parseFloat(e.price.amount)||0,e.assets[0]?.collection?.collection_name&&h.add(e.assets[0].collection.collection_name)}));const m=`${this.atomicEndpoints[this.currentEndpointIndex]}/atomicmarket/v1/sales?buyer=${e}&state=3&page=1&limit=100&order=desc&sort=updated`,p=await this.fetchWithRetry(m),f=await p.json();let x=0,g=0;return f.success&&f.data&&(x=f.data.length,f.data.forEach(e=>{g+=parseFloat(e.price.amount)||0,e.assets[0]?.collection?.collection_name&&h.add(e.assets[0].collection.collection_name)})),{totalAssets:r,totalPurchases:x,totalSales:d,totalSpent:Me(g),totalEarned:Me(u),collections:Array.from(h),favoriteCollections:Array.from(h).slice(0,3),joinDate:s,nftsOwned:r,nftsListed:0}}catch(s){return Le.logError("ApiService.getUserStats",s,{account:e}),{totalAssets:0,totalPurchases:0,totalSales:0,totalSpent:"0.0000 WAX",totalEarned:"0.0000 WAX",collections:[],favoriteCollections:[],joinDate:"2023-01-01",nftsOwned:0,nftsListed:0}}}async getCollectionPriceHistory(e,t="7d"){try{const t=`${this.atomicEndpoints[this.currentEndpointIndex]}/atomicmarket/v1/sales?collection_name=${e}&state=3&limit=100&order=desc&sort=updated`,s=await this.fetchWithRetry(t);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const a=await s.json();return a.data.map(e=>({timestamp:new Date(e.updated_at_time).getTime(),price:parseFloat(e.price.amount)/Math.pow(10,e.price.token_precision),volume:1}))}catch(s){return Le.logError("ApiService.getCollectionPriceHistory",s,{collectionName:e,timeframe:t}),this.fetchPriceHistoryFromAlcor(e,t)}}async fetchPriceHistoryFromAlcor(e,t){try{const s=await fetch(`${this.alcorAPI}/markets/1/charts?resolution=1D&limit=100`);if(s.ok){const e=await s.json();if(e&&Array.isArray(e)){const s="24h"===t?1:"7d"===t?7:"30d"===t?30:90;return e.slice(-s).map(e=>({timestamp:1e3*e.time,price:parseFloat(e.close||e.price||"1"),volume:parseFloat(e.volume||"0")}))}}const a=await this.getCollectionMarketStats({collection_name:e});if(a.success&&a.data){const e=parseFloat(a.data.suggested_average||"1"),s=Date.now(),n="24h"===t?1:"7d"===t?7:"30d"===t?30:90,i=[];for(let t=n;t>=0;t--){const r=s-24*t*60*60*1e3,l=e*(.9+.2*Math.random()),o=parseFloat(a.data.volume||"0")/n;i.push({timestamp:r,price:l,volume:o})}return i}return[]}catch(s){return Le.logError("ApiService.fetchPriceHistoryFromAlcor",s,{collectionName:e,timeframe:t}),[]}}async getAuctionBids(e){try{return[]}catch(t){return Le.logError("ApiService.getAuctionBids",t,{auctionId:e}),[]}}async getAuctions(e={}){const{state:t=1,limit:s=36,offset:a=0,sort:n="created",order:i="desc",hide_empty_auctions:r=!0,search:l,collection_name:o,collection_blacklist:c="flinttffunko,onlyfanzgaly,farmerpetsco,fantaspeop",seller_blacklist:d="dximg.wam,xpvrs.wam,5rrrc.wam,nnmnmnmnn.gm",symbol:u="WAX"}=e;try{let e=`${this.atomicMarketAPI}/atomicmarket/v1/auctions?limit=${s}&offset=${a}&sort=${n}&order=${i}&symbol=${u}`;void 0!==t&&(e+=`&state=${t}`),r&&(e+="&hide_empty_auctions=true"),l&&(e+=`&search=${encodeURIComponent(l)}`),o&&(e+=`&collection_name=${encodeURIComponent(o)}`),c&&(e+=`&collection_blacklist=${encodeURIComponent(c)}`),d&&(e+=`&seller_blacklist=${encodeURIComponent(d)}`);const h=await this.fetchWithRetry(e);if(!h.ok)throw new Error(`HTTP error! status: ${h.status}`);const m=await h.json();if(!m.success||!m.data)throw new Error("Invalid API response structure");return{data:m.data.map(e=>{const t=e.assets?.[0],s=t?.name||t?.data?.name||t?.template?.immutable_data?.name||`${t?.collection?.collection_name||"Unknown"} #${t?.asset_id}`,a=e.price?.amount||"0",n=e.price?.token_symbol||"WAX",i=e.price?.token_precision||8,r="0"!==a?`${(parseFloat(a)/Math.pow(10,i)).toFixed(i)} ${n}`:"0 WAX";return{auction_id:e.auction_id,asset_id:t?.asset_id||"",seller:e.seller,price:r,end_time:e.end_time,collection_name:t?.collection?.collection_name||"Unknown",template_id:t?.template?.template_id||"",asset_name:s,image:t?this.getAssetImage(t):"https://pixeljourney.xyz/img/toppixals/10.webp",video:t&&this.getAssetVideo(t)||"",current_bid:r,bidder:e.buyer||null,created_at_time:e.created_at_time}}),success:!0}}catch(h){return Le.logError("ApiService.getAuctions",h,{state:t,limit:s,offset:a,sort:n,order:i}),{data:[],success:!1,error:h}}}async getAuction(e){try{const t=`${this.atomicMarketAPI}/atomicmarket/v1/auctions/${e}`,s=await this.fetchWithRetry(t);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const a=await s.json();if(!a.success||!a.data)throw new Error("Invalid API response structure");const n=a.data;return{data:{auction_id:n.auction_id,asset_id:n.assets?.[0]?.asset_id||"",seller:n.seller,price:n.price?.amount||"0",end_time:n.end_time,collection_name:n.assets?.[0]?.collection?.collection_name||"Unknown",template_id:n.assets?.[0]?.template?.template_id||"",asset_name:n.assets?.[0]?.name||n.assets?.[0]?.data?.name||`Asset #${n.assets?.[0]?.asset_id}`,image:n.assets?.[0]?this.getAssetImage(n.assets[0]):"",video:n.assets?.[0]?this.getAssetVideo(n.assets[0]):"",current_bid:n.price?.amount||"0",bidder:n.buyer||null},success:!0}}catch(t){return Le.logError("ApiService.getAuction",t,{auctionId:e}),{data:null,success:!1,error:t}}}async getUSDPrice(e){try{const{priceService:t}=await Y(async()=>{const{priceService:e}=await Promise.resolve().then(()=>Ke);return{priceService:e}},void 0);return await t.convertWaxToUSDAsync(e.toString())}catch(t){return Le.logError("ApiService.getUSDPrice",t,{waxAmount:e}),"$0.00"}}async waxRpcCall(e,t){for(let a=0;a<this.waxChainEndpoints.length;a++){const n=this.waxChainEndpoints[a],i=`${n}${e}`;try{const e=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},mode:"cors",body:JSON.stringify(t)});if(e.ok)return this.currentWaxChainIndex=a,await e.json();Oe.warn("WAX RPC endpoint returned error status","API",{endpoint:n,status:e.status,statusText:e.statusText})}catch(s){Le.logError("ApiService.waxRpcCall",s,{endpoint:n,body:t})}}throw new Error(`All WAX RPC endpoints failed for ${e}`)}async getPowerupState(){return this.waxRpcCall("/v1/chain/get_table_rows",{json:!0,code:"eosio",scope:"eosio",table:"powup.state",limit:1})}async getChainInfo(){return this.waxRpcCall("/v1/chain/get_info",{})}async getRWAXTransfers(e={}){try{const{limit:t=20,page:s=1,order:a="desc"}=e,[n,i]=await Promise.all([this.getTransfers({recipient_name:"rwax",collection_name:"pixeljourney",limit:Math.ceil(t/2),page:s,order:a,sort:"created"}),this.getTransfers({sender:"rwax",collection_name:"pixeljourney",limit:Math.ceil(t/2),page:s,order:a,sort:"created"})]),r=[...n.data.map(e=>({...e,type:"tokenization"})),...i.data.map(e=>({...e,type:"redemption"}))],l=new Map;r.forEach(e=>{const t=`${e.transfer_id}-${e.txid}`;if(l.has(t)){const s=l.get(t),a=e.assets.length>s.assets.length,n=Object.keys(e).length>Object.keys(s).length;(a||n)&&l.set(t,e)}else l.set(t,e)});const o=Array.from(l.values());o.sort((e,t)=>{const s=new Date(e.created_at_time).getTime(),n=new Date(t.created_at_time).getTime();return"desc"===a?n-s:s-n});return{success:!0,data:o.slice(0,t),query_total:(n.query_total||0)+(i.query_total||0)}}catch(t){return Le.logError("ApiService.getRWAXTransfers",t,e),{success:!1,data:[]}}}},ut=Object.freeze(Object.defineProperty({__proto__:null,apiService:dt},Symbol.toStringTag,{value:"Module"}));const ht=new class{constructor(){M(this,"badgeCache",new Map),M(this,"CACHE_DURATION",3e5),M(this,"BADGE_DEFINITIONS",{"pixal-pfp":{id:"pixal-pfp",name:"Pixal PFP",description:"Owns a Pixal PFP NFT (Template 781515)",icon:"\ud83c\udfad",color:"#a855f7",borderColor:"rgba(168, 85, 247, 0.3)",type:"ownership",requirements:"Own Template 781515"},"pixal-collector-5":{id:"pixal-collector-5",name:"Pixal Collector I",description:"Owns 5+ Pixal PFPs",icon:"\ud83c\udfad",color:"#a855f7",borderColor:"rgba(168, 85, 247, 0.3)",type:"ownership",requirements:"5+ Pixal PFPs",tier:1},"pixal-collector-25":{id:"pixal-collector-25",name:"Pixal Collector II",description:"Owns 25+ Pixal PFPs",icon:"\ud83c\udfad",color:"#a855f7",borderColor:"rgba(168, 85, 247, 0.3)",type:"ownership",requirements:"25+ Pixal PFPs",tier:2,rarity:"rare"},"pixal-collector-50":{id:"pixal-collector-50",name:"Pixal Collector III",description:"Owns 50+ Pixal PFPs",icon:"\ud83c\udfad",color:"#a855f7",borderColor:"rgba(168, 85, 247, 0.3)",type:"ownership",requirements:"50+ Pixal PFPs",tier:3,rarity:"epic"},"pixal-collector-100":{id:"pixal-collector-100",name:"Pixal Collector IV",description:"Owns 100+ Pixal PFPs",icon:"\ud83c\udfad",color:"#a855f7",borderColor:"rgba(168, 85, 247, 0.3)",type:"ownership",requirements:"100+ Pixal PFPs",tier:4,rarity:"epic"},"pixal-collector-250":{id:"pixal-collector-250",name:"Pixal Collector V",description:"Owns 250+ Pixal PFPs",icon:"\ud83c\udfad",color:"#a855f7",borderColor:"rgba(168, 85, 247, 0.3)",type:"ownership",requirements:"250+ Pixal PFPs",tier:5,rarity:"legendary"},waxrock:{id:"waxrock",name:"WaxRock",description:"Owns WaxRock Pixal NFT",icon:"\ud83e\udea8",color:"#f59e0b",borderColor:"rgba(245, 158, 11, 0.3)",type:"ownership",requirements:"Own WaxRock NFTs"},"waxrock-collector-3":{id:"waxrock-collector-3",name:"WaxRock Collector I",description:"Owns 3+ WaxRock trait Pixals",icon:"\ud83e\udea8",color:"#78716c",borderColor:"rgba(120, 113, 108, 0.3)",type:"ownership",requirements:"3+ WaxRock trait Pixals",tier:1},"waxrock-collector-6":{id:"waxrock-collector-6",name:"WaxRock Collector II",description:"Owns 6+ WaxRock trait Pixals",icon:"\ud83e\udea8",color:"#78716c",borderColor:"rgba(120, 113, 108, 0.3)",type:"ownership",requirements:"6+ WaxRock trait Pixals",tier:2,rarity:"rare"},"waxrock-collector-10":{id:"waxrock-collector-10",name:"WaxRock Collector III",description:"Owns 10+ WaxRock trait Pixals",icon:"\ud83e\udea8",color:"#78716c",borderColor:"rgba(120, 113, 108, 0.3)",type:"ownership",requirements:"10+ WaxRock trait Pixals",tier:3,rarity:"epic"},ingredients:{id:"ingredients",name:"Ingredients",description:"Owns Pixel Journey Ingredients",icon:"\ud83e\uddea",color:"#22c55e",borderColor:"rgba(34, 197, 94, 0.3)",type:"ownership",requirements:"Own Ingredient NFTs"},"pxj-whale":{id:"pxj-whale",name:"PXJ Whale",description:"Holds 50,000,000+ PXJ tokens",icon:"\ud83d\udc0b",color:"#3b82f6",borderColor:"rgba(59, 130, 246, 0.3)",type:"holdings",requirements:"50,000,000+ PXJ",rarity:"legendary"},"pxj-holder":{id:"pxj-holder",name:"PXJ Holder",description:"Holds 100,000+ PXJ tokens",icon:"\ud83d\udc8e",color:"#8b5cf6",borderColor:"rgba(139, 92, 246, 0.3)",type:"holdings",requirements:"100,000+ PXJ"},"pxj-shrimp":{id:"pxj-shrimp",name:"PXJ Shrimp",description:"Holds 10,000+ PXJ tokens",icon:"\ud83e\udd90",color:"#f97316",borderColor:"rgba(249, 115, 22, 0.3)",type:"holdings",requirements:"10,000+ PXJ"},"wpixal-holder":{id:"wpixal-holder",name:"WPIXAL Holder",description:"Owns WPIXAL tokens",icon:"\ud83e\ude99",color:"#a855f7",borderColor:"rgba(168, 85, 247, 0.3)",type:"holdings",requirements:"Own WPIXAL tokens"},"king-holder":{id:"king-holder",name:"KING Holder",description:"Holds KING tokens",icon:"\ud83d\udc51",color:"#fbbf24",borderColor:"rgba(251, 191, 36, 0.3)",type:"holdings",requirements:"Hold KING tokens"},"journey-collector":{id:"journey-collector",name:"Journey Collector",description:"Owns 50+ Journey assets",icon:"\ud83c\udf92",color:"#ec4899",borderColor:"rgba(236, 72, 153, 0.3)",type:"ownership",requirements:"50+ Journey Assets"},"journey-enthusiast":{id:"journey-enthusiast",name:"Journey Enthusiast",description:"Owns 10+ Journey assets",icon:"\u2b50",color:"#f97316",borderColor:"rgba(249, 115, 22, 0.3)",type:"ownership",requirements:"10+ Journey Assets"},"early-adopter":{id:"early-adopter",name:"Early Adopter",description:"One of the first Journey participants",icon:"\ud83d\ude80",color:"#06b6d4",borderColor:"rgba(6, 182, 212, 0.3)",type:"special",requirements:"Early participation",rarity:"legendary"},"active-trader":{id:"active-trader",name:"Active Trader",description:"Completed 100+ transactions",icon:"\ud83d\udcc8",color:"#10b981",borderColor:"rgba(16, 185, 129, 0.3)",type:"trading",requirements:"100+ Transactions",rarity:"rare"},"volume-trader":{id:"volume-trader",name:"Volume Trader",description:"Traded 10,000+ WAX in volume",icon:"\ud83d\udcb0",color:"#f59e0b",borderColor:"rgba(245, 158, 11, 0.3)",type:"trading",requirements:"10,000+ WAX Volume",rarity:"epic"},"community-member":{id:"community-member",name:"Community Member",description:"Active community participant",icon:"\ud83d\udc65",color:"#8b5cf6",borderColor:"rgba(139, 92, 246, 0.3)",type:"social",requirements:"Community Engagement",rarity:"common"},"diamond-hands":{id:"diamond-hands",name:"Diamond Hands",description:"Held assets for 6+ months",icon:"\ud83d\udc8e",color:"#3b82f6",borderColor:"rgba(59, 130, 246, 0.3)",type:"achievement",requirements:"6+ Months Holding",rarity:"epic"},"master-collector":{id:"master-collector",name:"Master Collector",description:"Owns 500+ Journey assets",icon:"\ud83c\udfc6",color:"#dc2626",borderColor:"rgba(220, 38, 38, 0.3)",type:"ownership",requirements:"500+ Journey Assets",rarity:"legendary"}})}async checkUserBadges(e,t=!1){if(!t){const t=this.badgeCache.get(e);if(t&&Date.now()<t.expiresAt)return t.result}try{const[t,s,a]=await Promise.all([dt.getUserInventory(e),this.getPXJBalance(e),this.getTradingStats(e)]),n=[];let i=0,r=!1,l=!1,o=!1;const c=a.volume,d=a.transactions,u=a.accountAge;if(t&&t.length>0){i=t.filter(e=>"pixeljourney"===e.collection).length;const e=t.filter(e=>"781515"===e.template_id).length;r=e>0,r&&n.push(this.BADGE_DEFINITIONS["pixal-pfp"]),e>=250?n.push({...this.BADGE_DEFINITIONS["pixal-collector-250"],unlockedAt:new Date}):e>=100?n.push({...this.BADGE_DEFINITIONS["pixal-collector-100"],unlockedAt:new Date,progress:{current:e,required:250,percentage:Math.round(e/250*100)}}):e>=50?n.push({...this.BADGE_DEFINITIONS["pixal-collector-50"],unlockedAt:new Date,progress:{current:e,required:100,percentage:Math.round(e/100*100)}}):e>=25?n.push({...this.BADGE_DEFINITIONS["pixal-collector-25"],unlockedAt:new Date,progress:{current:e,required:50,percentage:Math.round(e/50*100)}}):e>=5&&n.push({...this.BADGE_DEFINITIONS["pixal-collector-5"],unlockedAt:new Date,progress:{current:e,required:25,percentage:Math.round(e/25*100)}});const s=t.filter(e=>{if(e.template_id===Je.getPixalTemplateId()){const t=e.traits?.WaxRock;if("string"==typeof t&&"none"!==t)return Je.isValidWaxRock(t);if(e.data){const t=Object.values(e.traits||{}).find(e=>"string"==typeof e&&Je.isValidWaxRock(e));return t&&"none"!==t}}return!1}).length;l=s>0,l&&n.push(this.BADGE_DEFINITIONS.waxrock),s>=10?n.push({...this.BADGE_DEFINITIONS["waxrock-collector-10"],unlockedAt:new Date}):s>=6?n.push({...this.BADGE_DEFINITIONS["waxrock-collector-6"],unlockedAt:new Date,progress:{current:s,required:10,percentage:Math.round(s/10*100)}}):s>=3&&n.push({...this.BADGE_DEFINITIONS["waxrock-collector-3"],unlockedAt:new Date,progress:{current:s,required:6,percentage:Math.round(s/6*100)}}),o=t.some(e=>"pixeljourney"===e.collection&&"ingredients"===e.schema),o&&n.push(this.BADGE_DEFINITIONS.ingredients),i>=500?n.push({...this.BADGE_DEFINITIONS["master-collector"],unlockedAt:new Date}):i>=50?n.push({...this.BADGE_DEFINITIONS["journey-collector"],unlockedAt:new Date,progress:i<500?{current:i,required:500,percentage:Math.round(i/500*100)}:void 0}):i>=10&&n.push({...this.BADGE_DEFINITIONS["journey-enthusiast"],unlockedAt:new Date,progress:{current:i,required:50,percentage:Math.round(i/50*100)}})}s>=5e7?n.push({...this.BADGE_DEFINITIONS["pxj-whale"],unlockedAt:new Date}):s>=1e5?n.push({...this.BADGE_DEFINITIONS["pxj-holder"],unlockedAt:new Date,progress:s<5e7?{current:s,required:5e7,percentage:Math.round(s/5e7*100)}:void 0}):s>=1e4&&n.push({...this.BADGE_DEFINITIONS["pxj-shrimp"],unlockedAt:new Date,progress:s<1e5?{current:s,required:1e5,percentage:Math.round(s/1e5*100)}:void 0});const[h,m]=await Promise.all([this.getTokenBalance(e,"pixeljourney","WPIXAL"),this.getTokenBalance(e,"alpha.waxfun","KING")]);h>0&&n.push({...this.BADGE_DEFINITIONS["wpixal-holder"],unlockedAt:new Date}),m>0&&n.push({...this.BADGE_DEFINITIONS["king-holder"],unlockedAt:new Date}),d>=100&&n.push({...this.BADGE_DEFINITIONS["active-trader"],unlockedAt:new Date}),c>=1e4&&n.push({...this.BADGE_DEFINITIONS["volume-trader"],unlockedAt:new Date}),u>=180&&n.push({...this.BADGE_DEFINITIONS["diamond-hands"],unlockedAt:new Date});new Set(n.map(e=>e.type)).size>=3&&n.push({...this.BADGE_DEFINITIONS["community-member"],unlockedAt:new Date});await this.checkEarlyAdopterStatus(e)&&n.push(this.BADGE_DEFINITIONS["early-adopter"]);const p={badges:n,pxjBalance:s,journeyAssets:i,pixalPfpOwned:r,waxrockOwned:l,ingredientsOwned:o,tradingVolume:c,totalTransactions:d,accountAge:u};return this.badgeCache.set(e,{result:p,timestamp:Date.now(),expiresAt:Date.now()+this.CACHE_DURATION}),p}catch(s){return Le.logError("BadgeService.checkUserBadges",s,{userAccount:e}),{badges:[],pxjBalance:0,journeyAssets:0,pixalPfpOwned:!1,waxrockOwned:!1,ingredientsOwned:!1,tradingVolume:0,totalTransactions:0,accountAge:0}}}async getPXJBalance(e){try{const t=await dt.getLightApiBalances(e);if(t&&t.balances){const e=t.balances.find(e=>"PXJ"===e.currency&&"pixeljourney"===e.contract);return e?parseFloat(e.amount):0}return 0}catch(t){return Le.logError("BadgeService.getPXJBalance",t,{userAccount:e}),0}}async getTradingStats(e){try{return{volume:5e4*Math.random(),transactions:Math.floor(200*Math.random()),accountAge:Math.floor(365*Math.random())}}catch(t){return Le.logError("BadgeService.getTradingStats",t,{userAccount:e}),{volume:0,transactions:0,accountAge:0}}}async getTokenBalance(e,t,s){try{const a=await dt.getLightApiBalances(e);if(a&&a.balances){const e=a.balances.find(e=>e.currency===s&&e.contract===t);if(e)return parseFloat(e.amount)||0}return 0}catch(a){return Le.logError("BadgeService.getTokenBalance",a,{userAccount:e,contract:t,symbol:s}),0}}async checkEarlyAdopterStatus(e){try{const t=await dt.fetchWithRetry(`${He.WAX_CHAIN.EOSRIO}/v2/history/get_actions?account=${e}&limit=1&sort=asc`),s=await t.json();if(s.actions&&s.actions.length>0){const e=s.actions[0],t=new Date(e.timestamp);return t<new Date("2023-01-01")}return!1}catch(t){return Le.logError("BadgeService.checkEarlyAdopterStatus",t,{userAccount:e}),!1}}getBadgeDefinition(e){return this.BADGE_DEFINITIONS[e]}getAllBadgeDefinitions(){return Object.values(this.BADGE_DEFINITIONS)}async hasUserBadge(e,t){return(await this.checkUserBadges(e)).badges.some(e=>e.id===t)}async getUserBadgeStats(e){const t=await this.checkUserBadges(e);return this.getBadgeStatistics(t.badges)}getBadgeStatistics(e){const t={},s={},a=e.filter(e=>e.unlockedAt).sort((e,t)=>new Date(t.unlockedAt).getTime()-new Date(e.unlockedAt).getTime()).slice(0,5),n=e.filter(e=>e.progress);return e.forEach(e=>{t[e.type]=(t[e.type]||0)+1,e.rarity&&(s[e.rarity]=(s[e.rarity]||0)+1)}),{totalBadges:e.length,badgesByType:t,badgesByRarity:s,recentBadges:a,progressBadges:n}}clearBadgeCache(e){e?this.badgeCache.delete(e):this.badgeCache.clear()}getBadgeProgress(e,t){const s=this.badgeCache.get(e);if(!s)return null;const a=s.result.badges.find(e=>e.id===t);return a?.progress?{badgeId:t,current:a.progress.current,required:a.progress.required,percentage:a.progress.percentage}:null}async getAllBadgeDefinitionsWithProgress(e){const t=await this.checkUserBadges(e),s=new Set(t.badges.map(e=>e.id));return Object.values(this.BADGE_DEFINITIONS).map(e=>{const a=t.badges.find(t=>t.id===e.id);return{...e,earned:s.has(e.id),progress:a?.progress,unlockedAt:a?.unlockedAt}})}};const mt=new class{constructor(){M(this,"balanceCache",new Map),M(this,"CACHE_DURATION",3e4)}async getWaxBalance(e,t=!1){if(!e)return"0.0000 WAX";const s=`wax_${e}`,a=this.balanceCache.get(s),n=Date.now();if(!t&&a&&n-a.lastUpdated<this.CACHE_DURATION)return a.balance;try{const t=await dt.getLightApiBalances(e);if(t&&t.balances){const e=t.balances.find(e=>"WAX"===e.currency&&"eosio.token"===e.contract);if(e){const t=`${e.amount} ${e.currency}`;return this.balanceCache.set(s,{balance:t,lastUpdated:n}),t}}}catch(i){De.warn("Light API balance fetch failed, falling back to currency balance API","BalanceService",{error:i})}try{const t=await dt.getWaxCurrencyBalance(e,"eosio.token","WAX");if(t&&t.length>0){const e=t[0].balance;return this.balanceCache.set(s,{balance:e,lastUpdated:n}),e}}catch(i){De.error("Failed to fetch WAX balance","BalanceService",i)}return"0.0000 WAX"}clearCache(e){e?this.balanceCache.delete(`wax_${e}`):this.balanceCache.clear()}isCached(e){const t=this.balanceCache.get(`wax_${e}`);if(!t)return!1;return Date.now()-t.lastUpdated<this.CACHE_DURATION}},pt=O.createContext(void 0),ft=({children:e})=>{const[t,s]=O.useState([]),a=D.useRef(null),[n,i]=O.useState(null),[r,l]=O.useState(()=>{const e=localStorage.getItem("notification-sound-enabled");return null===e||JSON.parse(e)}),[o]=O.useState(5);O.useEffect(()=>{localStorage.setItem("notification-sound-enabled",JSON.stringify(r))},[r]);const c=e=>{const t=Date.now().toString()+Math.random().toString(36).substr(2,9),a={...e,id:t,duration:e.duration??5e3};s(e=>{const t=[...e,a];return t.length>o?t.slice(-o):t}),a.duration&&a.duration>0&&setTimeout(()=>{d(t)},a.duration)},d=e=>{s(t=>t.filter(t=>t.id!==e))},u=e=>{a.current&&(a.current(e),a.current=null),i(null)},h={notifications:t,addNotification:c,removeNotification:d,clearAllNotifications:()=>{s([])},showSuccess:(e,t,s)=>{c({type:"success",message:e,title:t,duration:s})},showError:(e,t,s)=>{De.warn("User error notification displayed","NotificationContext.showError",{message:e,title:t,duration:s}),c({type:"error",message:e,title:t,duration:s})},showWarning:(e,t,s)=>{De.info("User warning notification displayed","NotificationContext.showWarning",{message:e,title:t,duration:s}),c({type:"warning",message:e,title:t,duration:s})},showInfo:(e,t,s)=>{c({type:"info",message:e,title:t,duration:s})},confirm:(e,t,s="Confirm",n="Cancel")=>new Promise(r=>{i({title:e,message:t,confirmText:s,cancelText:n}),a.current=r}),confirmDialog:n,resolveConfirm:u,soundEnabled:r,toggleSound:()=>{l(e=>!e)}};return Se.jsxs(pt.Provider,{value:h,children:[e,n&&Se.jsx("div",{className:"modal-overlay",children:Se.jsxs("div",{className:"modal-content confirm-dialog",children:[Se.jsx("div",{className:"modal-header",children:Se.jsx("h3",{children:n.title||"Confirm Action"})}),Se.jsx("div",{className:"modal-body",children:Se.jsx("p",{children:n.message})}),Se.jsxs("div",{className:"modal-actions",children:[Se.jsx("button",{className:"btn-secondary",onClick:()=>u(!1),children:n.cancelText}),Se.jsx("button",{className:"btn-primary",onClick:()=>u(!0),children:n.confirmText})]})]})})]})},xt=()=>{const e=O.useContext(pt);if(void 0===e)throw new Error("useNotifications must be used within a NotificationProvider");return e},gt=({isOpen:e,onClose:t})=>{const{isConnected:s,login:a,purchaseNFT:n,batchPurchaseNFTs:i}=Ie(),{showError:r,showSuccess:l,showWarning:o}=xt(),[c,d]=O.useState([]),[u,h]=O.useState({totalWAX:"0.0000 WAX",totalUSD:"$0.00",itemCount:0}),[m,p]=O.useState(!1),[f,x]=O.useState(new Set),[g,v]=O.useState(20),[j,y]=O.useState(!0),b=O.useCallback(async()=>{p(!0);try{await Ze.checkAvailability();const t=Ze.getCart();d(t),x(new Set(t.filter(e=>e.selected).map(e=>e.nft.asset_id)));try{const e=await Ze.calculateTotals();h(e)}catch(e){De.error("Failed to calculate totals","ShoppingCart",e),r("Calculation Error","Unable to calculate cart totals. Some prices may be outdated.")}}catch(t){De.error("Failed to load cart data","ShoppingCart",t),r("Cart Error","Unable to load cart data. Please try refreshing the page.")}finally{p(!1)}},[r]);O.useEffect(()=>{e&&b();const t=e=>{d(e),Ze.calculateTotals().then(e=>{h(e)}).catch(e=>{De.error("Failed to calculate totals in cart change handler","ShoppingCart",e)})};return Ze.addListener(t),()=>Ze.removeListener(t)},[e,b]);const N=e=>{Ze.removeFromCart(e),x(t=>{const s=new Set(t);return s.delete(e),s})},w=c.filter(e=>!1!==e.isAvailable),k=c.filter(e=>!1===e.isAvailable);if(!e)return null;return Se.jsx("div",{className:"modal-backdrop",onClick:e=>{e.target===e.currentTarget&&t()},role:"dialog","aria-modal":"true","aria-labelledby":"cart-title",children:Se.jsxs("div",{className:"modal-content shopping-cart-modal",children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsxs("h2",{className:"modal-title",id:"cart-title",children:["Shopping Cart (",u.itemCount," ",1===u.itemCount?"item":"items",")"]}),Se.jsx("button",{className:"modal-close",onClick:t,"aria-label":"Close shopping cart",type:"button",children:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",children:[Se.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Se.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Se.jsx("div",{className:"modal-body cart-body",children:m?Se.jsxs("div",{className:"cart-loading",children:[Se.jsx("div",{className:"loading-spinner"}),Se.jsx("p",{children:"Checking item availability..."})]}):0===c.length?Se.jsxs("div",{className:"cart-empty",children:[Se.jsx("div",{className:"empty-cart-icon",children:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("circle",{cx:"9",cy:"21",r:"1"}),Se.jsx("circle",{cx:"20",cy:"21",r:"1"}),Se.jsx("path",{d:"m1 1 4 4 2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]})}),Se.jsx("h3",{children:"Your cart is empty"}),Se.jsx("p",{children:"Add some NFTs from the marketplace to get started!"})]}):Se.jsxs(Se.Fragment,{children:[Se.jsxs("div",{className:"cart-controls",children:[Se.jsxs("div",{className:"cart-actions-left",children:[Se.jsx("button",{className:"btn-select-all",onClick:()=>{const e=c.filter(e=>!1!==e.isAvailable);e.filter(e=>e.selected).length===e.length&&e.length>0?Ze.deselectAll():Ze.selectAll();const t=Ze.getCart();d(t),x(new Set(t.filter(e=>e.selected).map(e=>e.nft.asset_id)))},"aria-label":f.size===w.length&&w.length>0?`Deselect all ${w.length} items`:`Select all ${w.length} items`,type:"button",children:f.size===w.length&&w.length>0?"Deselect All":"Select All"}),k.length>0&&Se.jsxs("button",{className:"btn-cleanup",onClick:()=>{Ze.cleanupUnavailableItems()},"aria-label":`Remove ${k.length} unavailable items from cart`,type:"button",children:["Remove Unavailable (",k.length,")"]})]}),Se.jsx("button",{className:"btn-clear-cart",onClick:()=>{confirm("Are you sure you want to clear your entire cart?")&&(Ze.clearCart(),x(new Set))},"aria-label":"Clear all items from cart",type:"button",children:"Clear Cart"})]}),w.length>1&&Se.jsxs("div",{className:"batch-settings",role:"group","aria-labelledby":"batch-settings-label",children:[Se.jsxs("div",{className:"batch-toggle",children:[Se.jsxs("label",{children:[Se.jsx("input",{type:"checkbox",checked:j,onChange:e=>y(e.target.checked),"aria-describedby":"batch-purchase-description"}),Se.jsx("span",{id:"batch-settings-label",children:"Use batch purchasing"})]}),Se.jsx("div",{id:"batch-purchase-description",className:"sr-only",children:"Batch purchasing allows you to buy multiple items in a single transaction, which is faster and more efficient."})]}),j&&Se.jsxs("div",{className:"batch-controls",children:[Se.jsx("label",{htmlFor:"items-per-tx",children:"Items per transaction:"}),Se.jsxs("div",{className:"batch-slider",children:[Se.jsx("input",{id:"items-per-tx",type:"range",min:"1",max:"50",value:g,onChange:e=>v(parseInt(e.target.value))}),Se.jsx("span",{className:"batch-value",children:g})]}),Se.jsx("div",{className:"batch-info",children:f.size>g&&Se.jsxs("small",{children:["Will create ",Math.ceil(f.size/g)," transaction",Math.ceil(f.size/g)>1?"s":""]})})]})]}),w.length>0&&Se.jsxs("div",{className:"cart-section",children:[Se.jsx("h3",{className:"section-title",children:"Available Items"}),Se.jsx("div",{className:"cart-items",children:w.map(e=>Se.jsxs("div",{className:"cart-item",children:[Se.jsx("div",{className:"item-checkbox",children:Se.jsx("input",{type:"checkbox",checked:f.has(e.nft.asset_id),onChange:()=>(e=>{Ze.toggleSelection(e);const t=Ze.getCart();d(t),x(new Set(t.filter(e=>e.selected).map(e=>e.nft.asset_id)))})(e.nft.asset_id),"aria-label":`Select ${e.nft.name} for purchase`,id:`item-${e.nft.asset_id}`})}),Se.jsx("div",{className:"item-image",children:e.nft.video?Se.jsx("video",{src:e.nft.video,className:"cart-item-media",muted:!0,onError:t=>{const s=document.createElement("img");s.src=e.nft.image,s.className="cart-item-media",s.alt=e.nft.name,t.currentTarget.parentNode?.replaceChild(s,t.currentTarget)}}):Se.jsx("img",{src:e.nft.image,alt:`${e.nft.name} from ${e.nft.collection}`,className:"cart-item-media"})}),Se.jsxs("div",{className:"item-details",children:[Se.jsx("h4",{className:"item-name",children:e.nft.name}),Se.jsx("p",{className:"item-collection",children:e.nft.collection}),Se.jsx("div",{className:"item-price","aria-label":`Price: ${e.nft.price}`,children:Se.jsx("span",{className:"price-wax",children:e.nft.price})})]}),Se.jsx("button",{className:"btn-remove",onClick:()=>N(e.nft.asset_id),title:"Remove from cart","aria-label":`Remove ${e.nft.name} from cart`,type:"button",children:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",children:[Se.jsx("polyline",{points:"3,6 5,6 21,6"}),Se.jsx("path",{d:"m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"})]})})]},e.nft.asset_id))})]}),k.length>0&&Se.jsxs("div",{className:"cart-section",children:[Se.jsxs("h3",{className:"section-title unavailable-title",children:["Unavailable Items (",k.length,")"]}),Se.jsx("div",{className:"cart-items unavailable-items",children:k.map(e=>Se.jsxs("div",{className:"cart-item unavailable",children:[Se.jsxs("div",{className:"item-image",children:[Se.jsx("img",{src:e.nft.image,alt:e.nft.name,className:"cart-item-media"}),Se.jsx("div",{className:"unavailable-overlay",children:"Unavailable"})]}),Se.jsxs("div",{className:"item-details",children:[Se.jsx("h4",{className:"item-name",children:e.nft.name}),Se.jsx("p",{className:"item-collection",children:e.nft.collection}),Se.jsx("div",{className:"item-price",children:Se.jsx("span",{className:"price-wax",children:e.nft.price})})]}),Se.jsx("button",{className:"btn-remove",onClick:()=>N(e.nft.asset_id),title:"Remove from cart",children:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("polyline",{points:"3,6 5,6 21,6"}),Se.jsx("path",{d:"m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"})]})})]},e.nft.asset_id))})]})]})}),c.length>0&&Se.jsxs("div",{className:"modal-footer cart-footer",children:[Se.jsx("div",{className:"cart-totals",children:Se.jsxs("div",{className:"total-line",children:[Se.jsxs("span",{className:"total-label",children:["Total (",f.size," selected):"]}),Se.jsxs("div",{className:"total-prices",children:[Se.jsx("span",{className:"total-wax",children:u.totalWAX}),Se.jsx("span",{className:"total-usd",children:u.totalUSD})]})]})}),Se.jsxs("div",{className:"cart-actions",children:[Se.jsx("button",{className:"btn-secondary",onClick:t,type:"button","aria-label":"Continue shopping and close cart",children:"Continue Shopping"}),Se.jsxs("button",{className:"btn-primary",onClick:async()=>{const e=Ze.getSelectedItems().filter(e=>!1!==e.isAvailable);if(0===e.length)return void r("Please select items to purchase","No Items Selected");if(!s)try{await a()}catch(d){return De.error("Login failed","ShoppingCart",d),void r("Login Failed","Please connect your wallet to purchase NFTs")}let t=0;const c=[];if(j&&e.length>1){const s=[];for(let t=0;t<e.length;t+=g)s.push(e.slice(t,t+g));for(let e=0;e<s.length;e++){const a=s[e],n=a.filter(e=>e.nft.sale_id&&e.nft.price).map(e=>({saleId:e.nft.sale_id,price:e.nft.price.replace(" WAX","")}));if(0!==n.length)try{await i(n),a.forEach(e=>{e.nft.sale_id&&(Ze.removeFromCart(e.nft.asset_id),x(t=>{const s=new Set(t);return s.delete(e.nft.asset_id),s}),t++)}),e<s.length-1&&await new Promise(e=>setTimeout(e,2e3))}catch(d){De.error("Batch purchase failed","ShoppingCart",d),r("Batch Purchase Failed",`Failed to purchase batch of ${a.length} items`),a.forEach(e=>{c.push(`${e.nft.name} (batch failed: ${d instanceof Error?d.message:"Unknown error"})`)})}else a.forEach(e=>{e.nft.sale_id||c.push(`${e.nft.name} (not for sale)`)})}}else for(const s of e)try{if(!s.nft.sale_id||!s.nft.price){c.push(`${s.nft.name} (not for sale)`);continue}await n(s.nft.sale_id,s.nft.price.replace(" WAX","")),t++,Ze.removeFromCart(s.nft.asset_id),x(e=>{const t=new Set(e);return t.delete(s.nft.asset_id),t}),e.length>1&&await new Promise(e=>setTimeout(e,1e3))}catch(d){De.error(`Purchase failed for ${s.nft.name}`,"ShoppingCart",d),r("Purchase Failed",`Failed to purchase ${s.nft.name}`),c.push(`${s.nft.name} (${d instanceof Error?d.message:"Unknown error"})`)}t>0&&0===c.length?l(`Successfully purchased ${t} item${1!==t?"s":""}!`,"Purchase Complete"):t>0&&c.length>0?o(`Partially completed: ${t} successful, ${c.length} failed. Failed items: ${c.join(", ")}`,"Purchase Partially Complete",8e3):r(`All purchases failed. Items: ${c.join(", ")}`,"Purchase Failed")},disabled:0===f.size,type:"button","aria-label":`Buy ${f.size} selected items`,"aria-describedby":"cart-totals",children:["Buy Selected (",f.size,")"]})]})]})]})})};const vt=new class{constructor(){M(this,"preferences"),M(this,"focusStack",[]),M(this,"trapFocusElements",[]),M(this,"isInitialized",!1),M(this,"mediaQueryListeners",[]),M(this,"keyboardNavigationActive",!1),this.preferences=this.getDefaultPreferences(),this.detectSystemPreferences()}getDefaultPreferences(){return{reducedMotion:!1,highContrast:!1,largeText:!1,screenReader:!1,keyboardNavigation:!0}}async initialize(){if(!this.isInitialized)try{this.loadPreferences(),this.setupMediaQueryListeners(),this.setupKeyboardNavigation(),this.applyAccessibilitySettings(),this.setupFocusManagement(),this.isInitialized=!0,at.trackEvent("accessibility_service_initialized",{preferences:this.preferences,systemPreferences:this.detectSystemPreferences()}),Oe.info("Accessibility service initialized","ACCESSIBILITY")}catch(e){Oe.error("Failed to initialize accessibility service","ACCESSIBILITY",e),at.reportError(e,"accessibility_init_error")}}detectSystemPreferences(){const e={};return window.matchMedia&&(e.reducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches,e.highContrast=window.matchMedia("(prefers-contrast: high)").matches),e.screenReader=this.detectScreenReader(),e}detectScreenReader(){return navigator.userAgent.includes("NVDA")||navigator.userAgent.includes("JAWS")||navigator.userAgent.includes("VoiceOver")||void 0!==window.speechSynthesis}setupMediaQueryListeners(){if(!window.matchMedia)return;const e=window.matchMedia("(prefers-reduced-motion: reduce)");e.addEventListener("change",e=>{this.updatePreference("reducedMotion",e.matches)}),this.mediaQueryListeners.push(e);const t=window.matchMedia("(prefers-contrast: high)");t.addEventListener("change",e=>{this.updatePreference("highContrast",e.matches)}),this.mediaQueryListeners.push(t)}setupKeyboardNavigation(){document.addEventListener("keydown",e=>{"Tab"===e.key&&(this.keyboardNavigationActive=!0,document.body.classList.add("a11y-keyboard-navigation"))}),document.addEventListener("mousedown",()=>{this.keyboardNavigationActive=!1,document.body.classList.remove("a11y-keyboard-navigation")})}setupFocusManagement(){document.addEventListener("focusin",e=>{const t=e.target;t&&this.keyboardNavigationActive&&this.announceToScreenReader(`Focused on ${this.getElementDescription(t)}`)})}applyAccessibilitySettings(){const e=document.documentElement;this.preferences.reducedMotion?e.classList.add("a11y-reduce-motion"):e.classList.remove("a11y-reduce-motion"),this.preferences.highContrast?e.classList.add("a11y-high-contrast"):e.classList.remove("a11y-high-contrast"),this.preferences.largeText?e.classList.add("a11y-large-text"):e.classList.remove("a11y-large-text"),this.preferences.screenReader?e.classList.add("a11y-screen-reader-active"):e.classList.remove("a11y-screen-reader-active")}updatePreference(e,t){this.preferences[e]=t,this.applyAccessibilitySettings(),this.savePreferences(),at.trackEvent("accessibility_preference_changed",{preference:e,value:t,allPreferences:this.preferences})}getPreferences(){return{...this.preferences}}setAriaLabel(e,t){e.setAttribute("aria-label",t)}setAriaDescribedBy(e,t){e.setAttribute("aria-describedby",t)}setAriaExpanded(e,t){e.setAttribute("aria-expanded",t.toString())}setAriaSelected(e,t){e.setAttribute("aria-selected",t.toString())}setAriaChecked(e,t){e.setAttribute("aria-checked",t.toString())}setAriaHidden(e,t){e.setAttribute("aria-hidden",t.toString())}focusElement(e,t){try{e.focus(t),this.focusStack.push(e)}catch(s){Oe.warn("Failed to focus element","ACCESSIBILITY",s)}}restoreFocus(){const e=this.focusStack.pop();e&&document.contains(e)&&this.focusElement(e)}trapFocus(e){const t=this.getFocusableElements(e);t.forEach((e,t)=>{this.trapFocusElements.push({element:e,tabIndex:t,originalTabIndex:e.tabIndex})}),t.length>0&&this.focusElement(t[0]);e.addEventListener("keydown",e=>{if("Tab"===e.key){const s=t[0],a=t[t.length-1];e.shiftKey?document.activeElement===s&&(e.preventDefault(),this.focusElement(a)):document.activeElement===a&&(e.preventDefault(),this.focusElement(s))}"Escape"===e.key&&this.releaseFocusTrap()}),e.setAttribute("data-focus-trap-active","true")}releaseFocusTrap(){this.trapFocusElements.forEach(({element:e,originalTabIndex:t})=>{void 0!==t&&(e.tabIndex=t)}),this.trapFocusElements=[],document.querySelectorAll("[data-focus-trap-active]").forEach(e=>{e.removeAttribute("data-focus-trap-active")}),this.restoreFocus()}getFocusableElements(e){const t=["button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","a[href]",'[tabindex]:not([tabindex="-1"])','[contenteditable="true"]'].join(", ");return Array.from(e.querySelectorAll(t)).filter(e=>{const t=e;return null!==t.offsetParent&&!t.hasAttribute("aria-hidden")})}announceToScreenReader(e,t="polite"){const s=document.createElement("div");s.setAttribute("aria-live",t),s.setAttribute("aria-atomic","true"),s.className="sr-only",s.textContent=e,document.body.appendChild(s),setTimeout(()=>{document.body.contains(s)&&document.body.removeChild(s)},1e3)}getElementDescription(e){const t=e.getAttribute("aria-label");if(t)return t;const s=e.textContent?.trim();if(s)return s;if("IMG"===e.tagName){const t=e.alt;if(t)return t}const a=e.getAttribute("title");if(a)return a;return`${e.getAttribute("role")||e.tagName.toLowerCase()} element`}registerKeyboardShortcut(e,t,s){document.addEventListener("keydown",a=>{this.matchesShortcut(a,e)&&(a.preventDefault(),t(a),at.trackEvent("keyboard_shortcut_used",{shortcut:e,description:s}))})}matchesShortcut(e,t){const s=t.toLowerCase().split("+"),a=s.pop(),n={ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey,meta:e.metaKey};for(const i of s)if(!n[i])return!1;return e.key.toLowerCase()===a}calculateLuminance(e,t,s){const[a,n,i]=[e,t,s].map(e=>e/255),[r,l,o]=[a,n,i].map(e=>e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4));return.2126*r+.7152*l+.0722*o}calculateContrastRatio(e,t){const s=this.hexToRgb(e),a=this.hexToRgb(t);if(!s||!a)return 1;const n=this.calculateLuminance(s.r,s.g,s.b),i=this.calculateLuminance(a.r,a.g,a.b);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)}checkColorContrast(e,t){return this.calculateContrastRatio(e,t)}hexToRgb(e){return 3===(e=e.replace("#","")).length&&(e=e.split("").map(e=>e+e).join("")),6===e.length&&/^[0-9A-Fa-f]{6}$/.test(e)?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16)}:null}meetsContrastRequirements(e,t,s="AA",a="normal"){return this.calculateContrastRatio(e,t)>={AA:{normal:4.5,large:3},AAA:{normal:7,large:4.5}}[s][a]}suggestAccessibleColors(e,t,s="AA"){const a=[],n=this.hexToRgb(e),i=this.hexToRgb(t);if(!n||!i)return a;return[-60,-40,-20,20,40,60,80,100].forEach(n=>{const i=this.adjustBrightness(e,n),r=this.calculateContrastRatio(i,t);this.meetsContrastRequirements(i,t,s)&&a.push({foreground:i,background:t,ratio:r})}),a.sort((e,t)=>t.ratio-e.ratio).slice(0,5)}adjustBrightness(e,t){const s=this.hexToRgb(e);if(!s)return e;const a=t/100,n=e=>a>0?Math.min(255,e+(255-e)*a):Math.max(0,e+e*a),i=Math.round(n(s.r)),r=Math.round(n(s.g)),l=Math.round(n(s.b));return`#${i.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${l.toString(16).padStart(2,"0")}`}savePreferences(){try{localStorage.setItem("accessibility_preferences",JSON.stringify(this.preferences))}catch(e){Oe.warn("Failed to save accessibility preferences","ACCESSIBILITY",e)}}loadPreferences(){try{const e=localStorage.getItem("accessibility_preferences");if(e){const t=JSON.parse(e);this.preferences={...this.preferences,...t}}}catch(e){Oe.warn("Failed to load accessibility preferences","ACCESSIBILITY",e)}}destroy(){this.mediaQueryListeners.forEach(e=>{e.removeEventListener("change",()=>{})}),this.mediaQueryListeners=[],this.releaseFocusTrap(),this.focusStack=[]}},jt=({isOpen:e,onClose:t})=>{const[s,a]=O.useState({reducedMotion:!1,highContrast:!1,largeText:!1,screenReader:!1,keyboardNavigation:!0}),[n,i]=O.useState(!1);O.useEffect(()=>{if(e){const e=vt.getPreferences();a(e),vt.announceToScreenReader("Accessibility settings dialog opened");const t=document.querySelector(".accessibility-modal button");t&&vt.focusElement(t)}},[e]);const r=async(e,t)=>{i(!0);try{const n={...s,[e]:t};a(n),vt.updatePreference(e,t);const i={reducedMotion:"Reduced motion",highContrast:"High contrast",largeText:"Large text",screenReader:"Screen reader optimizations",keyboardNavigation:"Keyboard navigation"};vt.announceToScreenReader(`${i[e]} ${t?"enabled":"disabled"}`,"assertive"),at.trackEvent("accessibility_preference_changed",{preference:e,value:t,source:"settings_modal"})}catch(n){console.error("Failed to update accessibility preference:",n),at.reportError(n,"accessibility_preference_update_error"),a(s=>({...s,[e]:!t})),vt.announceToScreenReader("Failed to update preference. Please try again.","assertive")}finally{i(!1)}},l=()=>{vt.announceToScreenReader("Accessibility settings dialog closed"),vt.restoreFocus(),t()};return e?Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"accessibility-modal-backdrop",onClick:l,"aria-hidden":"true"}),Se.jsx("div",{className:"accessibility-modal "+(n?"loading":""),role:"dialog","aria-modal":"true","aria-labelledby":"accessibility-settings-title","aria-describedby":"accessibility-settings-description",onKeyDown:e=>{"Escape"===e.key&&l()},children:Se.jsxs("div",{className:"accessibility-modal-content",children:[Se.jsxs("div",{className:"accessibility-modal-header",children:[Se.jsx("h2",{id:"accessibility-settings-title",className:"accessibility-modal-title",children:"Accessibility Settings"}),Se.jsx("button",{onClick:l,className:"accessibility-modal-close","aria-label":"Close accessibility settings",children:Se.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),Se.jsx("p",{id:"accessibility-settings-description",className:"accessibility-modal-description",children:"Customize your accessibility preferences to improve your experience with the application."}),Se.jsxs("div",{className:"accessibility-settings-list",children:[Se.jsxs("div",{className:"accessibility-setting-item",children:[Se.jsxs("div",{className:"accessibility-setting-info",children:[Se.jsx("label",{className:"accessibility-setting-label",children:"Reduced Motion"}),Se.jsx("p",{className:"accessibility-setting-description",children:"Minimize animations and transitions for a calmer experience."})]}),Se.jsx("button",{onClick:()=>r("reducedMotion",!s.reducedMotion),className:"accessibility-toggle "+(s.reducedMotion?"active":""),role:"switch","aria-checked":s.reducedMotion,disabled:n,children:Se.jsx("span",{className:"accessibility-toggle-thumb"})})]}),Se.jsxs("div",{className:"accessibility-setting-item",children:[Se.jsxs("div",{className:"accessibility-setting-info",children:[Se.jsx("label",{className:"accessibility-setting-label",children:"High Contrast"}),Se.jsx("p",{className:"accessibility-setting-description",children:"Increase color contrast for better visibility"})]}),Se.jsx("button",{onClick:()=>r("highContrast",!s.highContrast),className:"accessibility-toggle "+(s.highContrast?"active":""),role:"switch","aria-checked":s.highContrast,disabled:n,children:Se.jsx("span",{className:"accessibility-toggle-thumb"})})]}),Se.jsxs("div",{className:"accessibility-setting-item",children:[Se.jsxs("div",{className:"accessibility-setting-info",children:[Se.jsx("label",{className:"accessibility-setting-label",children:"Large Text"}),Se.jsx("p",{className:"accessibility-setting-description",children:"Increase text size throughout the application"})]}),Se.jsx("button",{onClick:()=>r("largeText",!s.largeText),className:"accessibility-toggle "+(s.largeText?"active":""),role:"switch","aria-checked":s.largeText,disabled:n,children:Se.jsx("span",{className:"accessibility-toggle-thumb"})})]}),Se.jsxs("div",{className:"accessibility-setting-item",children:[Se.jsxs("div",{className:"accessibility-setting-info",children:[Se.jsx("label",{className:"accessibility-setting-label",children:"Screen Reader Optimizations"}),Se.jsx("p",{className:"accessibility-setting-description",children:"Optimize interface for screen reader users"})]}),Se.jsx("button",{onClick:()=>r("screenReader",!s.screenReader),className:"accessibility-toggle "+(s.screenReader?"active":""),role:"switch","aria-checked":s.screenReader,disabled:n,children:Se.jsx("span",{className:"accessibility-toggle-thumb"})})]}),Se.jsxs("div",{className:"accessibility-setting-item",children:[Se.jsxs("div",{className:"accessibility-setting-info",children:[Se.jsx("label",{className:"accessibility-setting-label",children:"Enhanced Keyboard Navigation"}),Se.jsx("p",{className:"accessibility-setting-description",children:"Show focus indicators and enable keyboard shortcuts"})]}),Se.jsx("button",{onClick:()=>r("keyboardNavigation",!s.keyboardNavigation),className:"accessibility-toggle "+(s.keyboardNavigation?"active":""),role:"switch","aria-checked":s.keyboardNavigation,disabled:n,children:Se.jsx("span",{className:"accessibility-toggle-thumb"})})]})]}),Se.jsxs("div",{className:"accessibility-modal-actions",children:[Se.jsx("button",{onClick:()=>{const e={reducedMotion:!1,highContrast:!1,largeText:!1,screenReader:!1,keyboardNavigation:!0};a(e),Object.entries(e).forEach(([e,t])=>{vt.updatePreference(e,t)}),vt.announceToScreenReader("Accessibility settings reset to defaults","assertive"),at.trackEvent("accessibility_settings_reset",{source:"settings_modal"})},disabled:n,className:"accessibility-modal-reset",children:"Reset to Defaults"}),Se.jsxs("div",{className:"accessibility-modal-buttons",children:[Se.jsx("button",{onClick:l,disabled:n,className:"accessibility-modal-cancel",children:"Cancel"}),Se.jsx("button",{onClick:l,disabled:n,className:"accessibility-modal-done",children:n?"Saving...":"Done"})]})]}),Se.jsxs("div",{className:"accessibility-shortcuts",children:[Se.jsx("h3",{className:"accessibility-shortcuts-title",children:"Keyboard Shortcuts"}),Se.jsxs("div",{className:"accessibility-shortcuts-list",children:[Se.jsxs("div",{className:"accessibility-shortcut",children:[Se.jsx("span",{children:"Close modal"}),Se.jsx("kbd",{className:"accessibility-kbd",children:"Esc"})]}),Se.jsxs("div",{className:"accessibility-shortcut",children:[Se.jsx("span",{children:"Navigate settings"}),Se.jsx("kbd",{className:"accessibility-kbd",children:"Tab"})]}),Se.jsxs("div",{className:"accessibility-shortcut",children:[Se.jsx("span",{children:"Toggle setting"}),Se.jsx("kbd",{className:"accessibility-kbd",children:"Space"})]}),Se.jsxs("div",{className:"accessibility-shortcut",children:[Se.jsx("span",{children:"Activate buttons"}),Se.jsx("kbd",{className:"accessibility-kbd",children:"Enter"})]})]})]})]})})]}):null},yt=({currentPage:e})=>{const{isConnected:t,isLoading:s,login:a,logout:n,account:i}=Ie(),[r,l]=O.useState(!1),[o,c]=O.useState(!1),[d,u]=O.useState(0),[h,m]=O.useState(!1),[p,f]=O.useState(!1),[x,g]=O.useState(!1),[v,j]=O.useState(()=>{if(i){const e=localStorage.getItem(`userSettings_${i}`);if(e){const t=JSON.parse(e);return void 0===t.darkMode||t.darkMode}}const e=localStorage.getItem("darkMode");return!e||JSON.parse(e)}),{settings:y,updateSetting:b}=st(),[N,w]=O.useState("0.0000"),[k,_]=O.useState([]),[S,C]=O.useState(0),[A,P]=O.useState(!1),[T,E]=O.useState(!1),[F,I]=O.useState(!1),$=O.useRef(null),L=O.useRef(null);O.useEffect(()=>{const e=()=>{c(window.scrollY>10)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),O.useEffect(()=>{if(document.documentElement.setAttribute("data-theme",v?"dark":"light"),localStorage.setItem("darkMode",JSON.stringify(v)),i){const e=localStorage.getItem(`userSettings_${i}`);if(e){const t={...JSON.parse(e),darkMode:v};localStorage.setItem(`userSettings_${i}`,JSON.stringify(t))}}},[v,i]);const M=()=>{const e=!v;if(j(e),i){const t=localStorage.getItem(`userSettings_${i}`);if(t){const s={...JSON.parse(t),darkMode:e};localStorage.setItem(`userSettings_${i}`,JSON.stringify(s))}else{const t={emailNotifications:!0,priceAlerts:!0,marketingEmails:!1,darkMode:e,language:"en",currency:"WAX"};localStorage.setItem(`userSettings_${i}`,JSON.stringify(t))}}};O.useEffect(()=>{const e=()=>{u(Ze.getCartCount())};return e(),Ze.addListener(e),()=>Ze.removeListener(e)},[]);const R=()=>{l(!r)},W=()=>{l(!1)},D=()=>{f(!1)},B=O.useCallback(async(e=!1)=>{if(i&&t)try{const t=await mt.getWaxBalance(i,e);w(t),C(Date.now())}catch(s){De.error("Failed to fetch WAX balance","Navigation",s)}},[i,t]),U=O.useCallback(async()=>{if(i&&t)try{const e=await ht.checkUserBadges(i);_(e.badges)}catch(e){De.error("Failed to check user badges","Navigation",e)}},[i,t]);return O.useEffect(()=>{const e=e=>{$.current&&!$.current.contains(e.target)&&D(),L.current&&!L.current.contains(e.target)&&E(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),O.useEffect(()=>{t&&i?(B(),U()):(w("0.0000"),_([]))},[t,i,B,U]),Se.jsxs(Se.Fragment,{children:[Se.jsx("a",{href:"#main-content",className:"a11y-skip-link",children:"Skip to main content"}),Se.jsx("a",{href:"#navigation",className:"a11y-skip-link",children:"Skip to navigation"}),Se.jsx("nav",{className:"navbar "+(o?"scrolled":""),role:"navigation","aria-label":"Main navigation",id:"navigation",children:Se.jsxs("div",{className:"navbar-container",children:[Se.jsxs(z,{to:"/marketplace",className:"navbar-logo","aria-label":"PxMarket - Go to marketplace home",children:[Se.jsx("img",{src:"https://pixeljourney.xyz/img/logo.png",alt:"PxMarket logo",className:"logo-image"}),Se.jsx("span",{className:"logo-text",children:"PxMarket"})]}),Se.jsxs("div",{className:"navbar-nav",role:"menubar","aria-label":"Main menu",children:[Se.jsx(z,{to:"/rwax",className:"nav-link "+("rwax"===e?"active":""),role:"menuitem","aria-current":"rwax"===e?"page":void 0,children:"RWAX"}),Se.jsx(z,{to:"/collections",className:"nav-link "+("collections"===e?"active":""),role:"menuitem","aria-current":"collections"===e?"page":void 0,children:"Collections"}),Se.jsxs("div",{className:"nav-dropdown",ref:L,children:[Se.jsxs("button",{className:"nav-link dropdown-toggle "+(T?"active":""),onClick:()=>E(!T),"aria-expanded":T,"aria-haspopup":"true",children:["More",Se.jsx("svg",{className:"dropdown-arrow",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),T&&Se.jsxs("div",{className:"dropdown-menu",role:"menu",children:[Se.jsxs("div",{className:"dropdown-section",children:[Se.jsx("h4",{className:"dropdown-section-title",children:"Marketplace"}),Se.jsx(z,{to:"/auctions",className:"dropdown-item "+("auctions"===e?"active":""),role:"menuitem",onClick:()=>E(!1),children:"Auctions"}),Se.jsx(z,{to:"/activity",className:"dropdown-item "+("activity"===e?"active":""),role:"menuitem",onClick:()=>E(!1),children:"Activity"})]}),Se.jsxs("div",{className:"dropdown-section",children:[Se.jsx("h4",{className:"dropdown-section-title",children:"Tools & Features"}),Se.jsx(z,{to:"/pxcrafting",className:"dropdown-item "+("pxcrafting"===e?"active":""),role:"menuitem",onClick:()=>E(!1),children:"PxCraft"}),Se.jsx(z,{to:"/pxswap",className:"dropdown-item "+("pxswap"===e?"active":""),role:"menuitem",onClick:()=>E(!1),children:"PxSwap"}),Se.jsx(z,{to:"/journeymap",className:"dropdown-item "+("journeymap"===e?"active":""),role:"menuitem",onClick:()=>E(!1),children:"JourneyMap"}),Se.jsx(z,{to:"/staking",className:"dropdown-item "+("pxstaking"===e?"active":""),role:"menuitem",onClick:()=>E(!1),children:"PxStaking"})]}),Se.jsxs("div",{className:"dropdown-section social-section",children:[Se.jsx("h4",{className:"dropdown-section-title",children:"Community"}),Se.jsxs("a",{href:"http://discord.gg/pixel-journey-1130670500776005734",target:"_blank",rel:"noopener noreferrer",className:"dropdown-item nav-social-link",role:"menuitem",children:[Se.jsx("svg",{className:"social-icon",fill:"currentColor",viewBox:"0 0 24 24",children:Se.jsx("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})}),"Join Discord"]}),Se.jsxs("a",{href:"https://x.com/PxJourney",target:"_blank",rel:"noopener noreferrer",className:"dropdown-item nav-social-link",role:"menuitem",children:[Se.jsx("svg",{className:"social-icon",fill:"currentColor",viewBox:"0 0 24 24",children:Se.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),"Follow on X"]})]})]})]}),Se.jsx(z,{to:"/learn",className:"nav-link "+("learn"===e?"active":""),role:"menuitem","aria-current":"learn"===e?"page":void 0,children:"Learn"}),Se.jsx(z,{to:"/rewards",className:"nav-link "+("rewards"===e?"active":""),role:"menuitem","aria-current":"rewards"===e?"page":void 0,children:"Rewards"})]}),Se.jsxs("div",{className:"navbar-actions",children:[Se.jsx("button",{onClick:()=>g(!0),className:"accessibility-btn","aria-label":"Open accessibility settings",title:"Accessibility Settings",children:Se.jsx("svg",{className:"accessibility-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})})}),t&&d>0&&Se.jsxs("button",{onClick:()=>m(!0),className:"cart-btn","aria-label":`Open Shopping Cart (${d} items)`,"aria-describedby":"cart-count",children:[Se.jsxs("svg",{className:"cart-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:[Se.jsx("circle",{cx:"9",cy:"21",r:"1"}),Se.jsx("circle",{cx:"20",cy:"21",r:"1"}),Se.jsx("path",{d:"m1 1 4 4 2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),Se.jsx("span",{className:"cart-badge",id:"cart-count","aria-label":`${d} items in cart`,children:d}),Se.jsx("span",{className:"cart-text",children:"Cart"})]}),Se.jsxs("div",{className:"wallet-container",ref:$,children:[Se.jsx("button",{className:"wallet-btn "+(t?"connected":""),onClick:t?()=>{if(f(!p),!p&&t&&i){Date.now()-S>3e4&&B()}}:a,disabled:s,"aria-label":t?`Wallet connected: ${i}. Click to open wallet menu`:"Connect wallet","aria-expanded":t&&p,"aria-haspopup":"menu",children:s?Se.jsx("span",{className:"loading-spinner",children:"\u27f3"}):t?Se.jsxs(Se.Fragment,{children:[Se.jsx("svg",{className:"wallet-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),i||"Connected"]}):"Connect"}),t&&p&&Se.jsxs("div",{className:"wallet-dropdown",role:"menu","aria-label":"Wallet menu",onKeyDown:e=>{"Escape"===e.key&&(D(),vt.announceToScreenReader("Wallet menu closed"))},children:[Se.jsx("div",{className:"wallet-dropdown-header",role:"group","aria-label":"Wallet information",children:Se.jsx("div",{className:"wallet-account","aria-label":`Wallet account: ${i}`,children:i})}),Se.jsxs(z,{to:"/inventory",className:"wallet-inventory-btn","aria-label":"Open Inventory",onClick:()=>f(!1),role:"menuitem",children:[Se.jsxs("svg",{className:"inventory-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:[Se.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),Se.jsx("path",{d:"M9 9h6v6H9z"})]}),Se.jsx("span",{children:"My Inventory"})]}),Se.jsxs(z,{to:"/profile",className:"wallet-inventory-btn","aria-label":"View Profile",onClick:()=>f(!1),role:"menuitem",children:[Se.jsx("svg",{className:"inventory-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Se.jsx("span",{children:"My Profile"})]}),Se.jsxs(z,{to:"/watchlist",className:"wallet-inventory-btn","aria-label":"View Watchlist",onClick:()=>f(!1),role:"menuitem",children:[Se.jsx("svg",{className:"inventory-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:Se.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),Se.jsx("span",{children:"My Watchlist"})]}),Se.jsxs("div",{className:"wallet-balance",role:"group","aria-label":"Wallet balance information",children:[Se.jsx("span",{className:"balance-label",children:"WAX Balance:"}),Se.jsx("span",{className:"nav-balance-amount","aria-label":`Balance: ${N} WAX`,children:N})]}),Se.jsxs("div",{className:"wallet-badges",role:"group","aria-label":"User badges",children:[Se.jsxs("div",{className:"badges-header",onClick:()=>I(!F),style:{cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 0"},children:[Se.jsx("span",{className:"badges-label",children:"PxBadges:"}),Se.jsx("span",{style:{fontSize:"12px",color:"#888"},children:F?"\u25bc":"\u25b6"})]}),F?Se.jsx("div",{className:"badges-expanded",style:{display:"flex",flexDirection:"column",gap:"8px"},children:ht.getAllBadgeDefinitions().map(e=>{const t=k.some(t=>t.id===e.id);return Se.jsxs("div",{className:"badge-item "+(t?"earned":"unearned"),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px",borderRadius:"6px",background:t?`${e.color}15`:"rgba(128, 128, 128, 0.05)",border:`1px solid ${t?e.borderColor:"rgba(128, 128, 128, 0.1)"}`},children:[Se.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[Se.jsx("span",{style:{fontSize:"16px",opacity:t?1:.5},children:e.icon}),Se.jsxs("div",{children:[Se.jsxs("div",{style:{fontSize:"12px",fontWeight:"500",color:t?e.color:"#666"},children:[e.name," ",t&&"\u2713"]}),Se.jsx("div",{style:{fontSize:"10px",color:"#888"},children:e.requirements})]})]}),!t&&Se.jsx("button",{onClick:()=>{"pxj-whale"===e.id||"pxj-holder"===e.id?window.open("https://waxonedge.app/swap/WAX_eosio.token/PXJ_pixeljourney","_blank"):"pixal-pfp"===e.id?window.location.href="/marketplace?collection=pixeljourney&template=781515":"waxrock"===e.id?window.location.href="/marketplace?category=waxrock":"ingredients"===e.id?window.location.href="/marketplace?category=ingredients":window.location.href="/marketplace?collection=pixeljourney"},style:{fontSize:"10px",padding:"4px 8px",background:e.color,color:"white",border:"none",borderRadius:"4px",cursor:"pointer",transition:"opacity 0.2s"},onMouseEnter:e=>e.target.style.opacity="0.8",onMouseLeave:e=>e.target.style.opacity="1",children:"Buy"})]},e.id)})}):Se.jsxs("div",{className:"badges-collapsed",style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:[ht.getAllBadgeDefinitions().filter(e=>k.some(t=>t.id===e.id)).map(e=>Se.jsx("span",{className:"badge-icon earned",style:{fontSize:"16px",padding:"4px",borderRadius:"4px",background:`${e.color}20`,color:e.color,border:`1px solid ${e.borderColor}`,cursor:"pointer"},title:`${e.name}: ${e.description} \u2713 Earned`,children:e.icon},e.id)),0===k.length&&Se.jsx("span",{style:{fontSize:"12px",color:"#888",fontStyle:"italic"},children:"No badges earned yet"})]})]}),Se.jsx("div",{className:"wallet-settings",children:Se.jsx("div",{className:"settings-menu",children:Se.jsxs("div",{className:"settings-section",children:[Se.jsxs("div",{className:"settings-header",onClick:()=>P(!A),style:{cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 0"},children:[Se.jsx("h4",{children:"Display Options"}),Se.jsx("span",{style:{fontSize:"12px",color:"#888"},children:A?"\u25bc":"\u25b6"})]}),A?Se.jsxs("div",{className:"filter-options",children:[Se.jsxs("label",{className:"filter-option",children:[Se.jsx("input",{type:"checkbox",checked:y.showOtherCollections,onChange:e=>b("showOtherCollections",e.target.checked)}),Se.jsx("span",{children:"Show other collections"})]}),Se.jsxs("label",{className:"filter-option",children:[Se.jsx("input",{type:"checkbox",checked:y.showWhitelistedOnly,onChange:e=>b("showWhitelistedOnly",e.target.checked)}),Se.jsx("span",{children:"Displays only whitelisted collections in overviews"})]}),Se.jsxs("label",{className:"filter-option",children:[Se.jsx("input",{type:"checkbox",checked:y.enableAnimatedNFTs,onChange:e=>b("enableAnimatedNFTs",e.target.checked)}),Se.jsx("span",{children:"Enables animated NFTs to play in overviews"})]}),Se.jsxs("label",{className:"filter-option",children:[Se.jsx("input",{type:"checkbox",checked:y.showExplicitContent,onChange:e=>b("showExplicitContent",e.target.checked)}),Se.jsx("span",{children:"Enables explicit content to be shown in overviews"})]}),Se.jsxs("label",{className:"filter-option",children:[Se.jsx("input",{type:"checkbox",checked:y.showChatButton,onChange:e=>b("showChatButton",e.target.checked)}),Se.jsx("span",{children:"Show chat button"})]}),Se.jsxs("label",{className:"filter-option",children:[Se.jsx("input",{type:"checkbox",checked:y.blockNSFW,onChange:e=>b("blockNSFW",e.target.checked)}),Se.jsx("span",{children:"Blocks NSFW collections from the platform"})]}),Se.jsxs("label",{className:"filter-option",children:[Se.jsx("input",{type:"checkbox",checked:y.blockAI,onChange:e=>b("blockAI",e.target.checked)}),Se.jsx("span",{children:"Blocks AI collections from the platform"})]}),Se.jsxs("div",{className:"theme-toggle-option",children:[Se.jsx("span",{children:"Dark Mode"}),Se.jsx("button",{className:"theme-toggle "+(v?"active":""),onClick:M,children:Se.jsxs("div",{className:"toggle-slider",children:[Se.jsxs("svg",{className:"sun-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("circle",{cx:"12",cy:"12",r:"5"}),Se.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),Se.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),Se.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),Se.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),Se.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),Se.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),Se.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),Se.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Se.jsx("svg",{className:"moon-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Se.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})]})})]}),Se.jsxs("label",{className:"filter-option",children:[Se.jsx("input",{type:"checkbox",checked:y.showPricesInUSD,onChange:e=>b("showPricesInUSD",e.target.checked)}),Se.jsx("span",{children:"Show Prices in USD"})]}),Se.jsxs("div",{className:"currency-selection",children:[Se.jsx("label",{children:"Currency Comparison:"}),Se.jsxs("select",{value:y.selectedCurrency,onChange:e=>b("selectedCurrency",e.target.value),className:"currency-select",children:[Se.jsx("option",{value:"USD",children:"USD - US Dollar"}),Se.jsx("option",{value:"EUR",children:"EUR - Euro"}),Se.jsx("option",{value:"DKK",children:"DKK - Danish Krone"}),Se.jsx("option",{value:"AED",children:"AED - UAE Dirham"}),Se.jsx("option",{value:"INR",children:"INR - Indian Rupee"}),Se.jsx("option",{value:"RUB",children:"RUB - Russian Ruble"}),Se.jsx("option",{value:"CNY",children:"CNY - Chinese Yuan"}),Se.jsx("option",{value:"JPY",children:"JPY - Japanese Yen"}),Se.jsx("option",{value:"BTC",children:"BTC - Bitcoin"}),Se.jsx("option",{value:"ETH",children:"ETH - Ethereum"})]})]}),Se.jsxs("label",{className:"filter-option",children:[Se.jsx("input",{type:"checkbox",checked:y.showRarityRankings,onChange:e=>b("showRarityRankings",e.target.checked)}),Se.jsx("span",{children:"Show Rarity Rankings"})]})]}):Se.jsxs("div",{className:"theme-toggle-option",style:{marginTop:"8px"},children:[Se.jsx("span",{children:"Dark Mode"}),Se.jsx("button",{className:"theme-toggle "+(v?"active":""),onClick:M,children:Se.jsxs("div",{className:"toggle-slider",children:[Se.jsxs("svg",{className:"sun-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("circle",{cx:"12",cy:"12",r:"5"}),Se.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),Se.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),Se.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),Se.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),Se.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),Se.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),Se.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),Se.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Se.jsx("svg",{className:"moon-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Se.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})]})})]})]})})}),Se.jsxs("button",{className:"logout-btn",onClick:n,role:"menuitem","aria-label":"Logout from wallet",children:[Se.jsx("span",{className:"logout-icon","aria-hidden":"true",children:"\ud83d\udeaa"}),"Logout"]})]})]}),Se.jsx("button",{onClick:R,className:"mobile-menu-btn "+(r?"active":""),"aria-label":r?"Close Menu":"Open Menu","aria-expanded":r,"aria-controls":"mobile-menu",onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),R(),vt.announceToScreenReader(r?"Mobile menu closed":"Mobile menu opened"))},children:Se.jsxs("div",{className:"hamburger","aria-hidden":"true",children:[Se.jsx("span",{}),Se.jsx("span",{}),Se.jsx("span",{})]})})]})]})}),Se.jsxs("div",{className:"mobile-menu "+(r?"open":""),id:"mobile-menu",role:"navigation","aria-expanded":r,"aria-label":"Mobile navigation menu",onKeyDown:e=>{"Escape"===e.key&&(W(),vt.announceToScreenReader("Mobile menu closed"))},children:[Se.jsxs("nav",{className:"mobile-nav-links",role:"navigation","aria-label":"Mobile menu links",children:[Se.jsxs("div",{className:"mobile-nav-section",children:[Se.jsx("h3",{className:"mobile-nav-section-title",children:"Main"}),Se.jsxs("div",{className:"mobile-nav-grid",children:[Se.jsx(z,{to:"/",onClick:W,className:"mobile-nav-link "+("marketplace"===e||""===e?"active":""),children:"Marketplace"}),Se.jsx(z,{to:"/rwax",onClick:W,className:"mobile-nav-link "+("rwax"===e?"active":""),children:"RWAX"}),Se.jsx(z,{to:"/collections",onClick:W,className:"mobile-nav-link "+("collections"===e?"active":""),children:"Collections"}),Se.jsx(z,{to:"/learn",onClick:W,className:"mobile-nav-link "+("learn"===e?"active":""),children:"Learn"}),Se.jsx(z,{to:"/rewards",onClick:W,className:"mobile-nav-link "+("rewards"===e?"active":""),children:"Rewards"})]})]}),Se.jsxs("div",{className:"mobile-nav-section",children:[Se.jsx("h3",{className:"mobile-nav-section-title",children:"Trading & Tools"}),Se.jsxs("div",{className:"mobile-nav-grid",children:[Se.jsx(z,{to:"/auctions",onClick:W,className:"mobile-nav-link "+("auctions"===e?"active":""),children:"Auctions"}),Se.jsx(z,{to:"/activity",onClick:W,className:"mobile-nav-link "+("activity"===e?"active":""),children:"Activity"}),Se.jsx(z,{to:"/pxcrafting",onClick:W,className:"mobile-nav-link "+("pxcrafting"===e?"active":""),children:"PxCraft"}),Se.jsx(z,{to:"/pxswap",onClick:W,className:"mobile-nav-link "+("pxswap"===e?"active":""),children:"PxSwap"}),Se.jsx(z,{to:"/journeymap",onClick:W,className:"mobile-nav-link "+("journeymap"===e?"active":""),children:"JourneyMap"}),Se.jsx(z,{to:"/staking",onClick:W,className:"mobile-nav-link "+("pxstaking"===e?"active":""),children:"PxStaking"})]})]}),Se.jsxs("div",{className:"mobile-nav-section",children:[Se.jsx("h3",{className:"mobile-nav-section-title",children:"Community"}),Se.jsxs("div",{className:"mobile-social-section",children:[Se.jsxs("a",{href:"http://discord.gg/pixel-journey-1130670500776005734",target:"_blank",rel:"noopener noreferrer",className:"mobile-social-link",onClick:W,children:[Se.jsx("svg",{className:"social-icon",fill:"currentColor",viewBox:"0 0 24 24",children:Se.jsx("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})}),"Discord"]}),Se.jsxs("a",{href:"https://x.com/PxJourney",target:"_blank",rel:"noopener noreferrer",className:"mobile-social-link",onClick:W,children:[Se.jsx("svg",{className:"social-icon",fill:"currentColor",viewBox:"0 0 24 24",children:Se.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),"X (Twitter)"]})]})]})]}),Se.jsxs("div",{className:"mobile-menu-actions",children:[t&&d>0&&Se.jsxs("button",{onClick:()=>{m(!0),W()},className:"mobile-cart-btn","aria-label":`Open Shopping Cart (${d} items)`,children:[Se.jsxs("svg",{className:"cart-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:[Se.jsx("circle",{cx:"9",cy:"21",r:"1"}),Se.jsx("circle",{cx:"20",cy:"21",r:"1"}),Se.jsx("path",{d:"m1 1 4 4 2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),"Shopping Cart (",d,")"]}),t&&Se.jsxs(Se.Fragment,{children:[Se.jsxs(z,{to:"/inventory",onClick:W,className:"mobile-inventory-btn",children:[Se.jsx("svg",{className:"inventory-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),"My Inventory"]}),Se.jsxs(z,{to:"/profile",onClick:W,className:"mobile-inventory-btn",children:[Se.jsx("svg",{className:"inventory-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"My Profile"]}),Se.jsxs(z,{to:"/watchlist",onClick:W,className:"mobile-inventory-btn",children:[Se.jsx("svg",{className:"inventory-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Se.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),"My Watchlist"]})]}),Se.jsx("div",{className:"mobile-auth-section",children:t?Se.jsxs("button",{onClick:()=>{n(),W(),vt.announceToScreenReader("Logged out successfully")},className:"mobile-auth-btn logout-btn",children:[Se.jsx("svg",{className:"auth-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]}):Se.jsxs("button",{onClick:()=>{a(),W(),vt.announceToScreenReader("Login initiated")},className:"mobile-auth-btn login-btn",children:[Se.jsx("svg",{className:"auth-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),"Login"]})})]})]}),r&&Se.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[998]",onClick:W}),Se.jsx(gt,{isOpen:h,onClose:()=>m(!1)}),Se.jsx(jt,{isOpen:x,onClose:()=>g(!1)})]})},bt=()=>Se.jsxs("div",{className:"landing-page",children:[Se.jsx("div",{className:"hero-section",children:Se.jsxs("div",{className:"hero-content",children:[Se.jsxs("h1",{className:"hero-title",children:["Welcome to ",Se.jsx("span",{className:"brand-highlight",children:"PxMarket"})]}),Se.jsx("p",{className:"hero-subtitle",children:"by Pixel Journey"}),Se.jsx("p",{className:"hero-description",children:"Discover, trade, and collect unique digital assets in the ultimate NFT marketplace experience."})]})}),Se.jsx("div",{className:"cta-section",children:Se.jsxs("div",{className:"cta-container",children:[Se.jsxs("div",{className:"cta-card marketplace-card",children:[Se.jsx("div",{className:"cta-icon",children:"\ud83c\udfea"}),Se.jsx("h2",{className:"cta-title",children:"Explore Marketplace"}),Se.jsx("p",{className:"cta-description",children:"Browse thousands of unique NFTs, discover rare collectibles, and find your next digital (pixel?!) treasure."}),Se.jsx(z,{to:"/marketplace",className:"cta-button primary",children:"Enter Marketplace"})]}),Se.jsxs("div",{className:"cta-card rwax-card",children:[Se.jsx("div",{className:"cta-icon",children:"\ud83c\udfad"}),Se.jsx("h2",{className:"cta-title",children:"Get Your Pixal PFP via R-WAX"}),Se.jsx("p",{className:"cta-description",children:"Pick up your unique pixel-perfect Pixal Profile Picture using WPIXAL on the R-WAX Markets and join the Pixel Journey community!"}),Se.jsx(z,{to:"/rwax",className:"cta-button secondary",children:"Browse RWAX Pixals"})]})]})}),Se.jsx("div",{className:"features-section",children:Se.jsxs("div",{className:"features-container",children:[Se.jsxs("div",{className:"feature-item",children:[Se.jsx("div",{className:"feature-icon",children:"\u26a1"}),Se.jsx("h3",{children:"Lightning Fast"}),Se.jsx("p",{children:"Instant transactions on the WAX blockchain"})]}),Se.jsxs("div",{className:"feature-item",children:[Se.jsx("div",{className:"feature-icon",children:"\ud83d\udd12"}),Se.jsx("h3",{children:"Secure Trading"}),Se.jsx("p",{children:"Safe and transparent blockchain transactions"})]}),Se.jsxs("div",{className:"feature-item",children:[Se.jsx("div",{className:"feature-icon",children:"\ud83c\udf1f"}),Se.jsx("h3",{children:"Premium Quality"}),Se.jsx("p",{children:"Curated collection of high-quality digital assets"})]})]})})]});const Nt=new class{constructor(){M(this,"serviceWorkerRegistration",null),M(this,"pushSubscription",null),M(this,"vapidPublicKey",""),M(this,"isInitialized",!1),M(this,"permissionState",{permission:"default",supported:!1,serviceWorkerReady:!1,subscribed:!1}),this.checkSupport()}checkSupport(){this.permissionState.supported="serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window,this.permissionState.supported&&(this.permissionState.permission=Notification.permission)}async initialize(){if(this.isInitialized)return!0;try{return this.permissionState.supported?(await this.registerServiceWorker(),await this.checkExistingSubscription(),this.isInitialized=!0,at.trackEvent("push_notification_service_initialized",{supported:this.permissionState.supported,permission:this.permissionState.permission,subscribed:this.permissionState.subscribed}),!0):(De.warn("Push notifications not supported in this browser"),!1)}catch(e){return De.error("Failed to initialize push notification service","PushNotificationService.initialize",e),at.reportError(e,"push_notification_init_error"),!1}}async registerServiceWorker(){try{const e="localhost"===location.hostname||"127.0.0.1"===location.hostname||"http:"===location.protocol?"/sw-dev.js":"/sw.js";this.serviceWorkerRegistration=await navigator.serviceWorker.register(e,{scope:"/"}),await navigator.serviceWorker.ready,this.permissionState.serviceWorkerReady=!0,De.info(`Service Worker registered successfully: ${e}`),navigator.serviceWorker.addEventListener("message",this.handleServiceWorkerMessage.bind(this))}catch(e){throw De.error("Failed to register service worker","PushNotificationService.registerServiceWorker",e),e}}handleServiceWorkerMessage(e){const{type:t,data:s}=e.data||{};switch(t){case"NOTIFICATION_CLICKED":at.trackEvent("notification_clicked",s);break;case"NOTIFICATION_CLOSED":at.trackEvent("notification_closed",s);break;default:De.debug("Unknown service worker message:",t)}}async checkExistingSubscription(){if(this.serviceWorkerRegistration)try{this.pushSubscription=await this.serviceWorkerRegistration.pushManager.getSubscription(),this.permissionState.subscribed=!!this.pushSubscription,this.pushSubscription&&(De.info("Existing push subscription found"),await this.validateSubscription())}catch(e){De.error("Failed to check existing subscription","PushNotificationService.checkExistingSubscription",e)}}async requestPermission(){if(!this.permissionState.supported)throw new Error("Push notifications not supported");try{const e=await Notification.requestPermission();return this.permissionState.permission=e,at.trackEvent("notification_permission_requested",{permission:e,previousPermission:this.permissionState.permission}),e}catch(e){throw Le.logError("PushNotificationService.requestPermission",e),at.reportError(e,"notification_permission_error"),e}}async subscribe(e){if(this.isInitialized||await this.initialize(),!this.serviceWorkerRegistration)throw new Error("Service worker not registered");if("granted"!==this.permissionState.permission){if("granted"!==await this.requestPermission())throw new Error("Notification permission denied")}try{this.pushSubscription&&await this.unsubscribe();const t={userVisibleOnly:!0,applicationServerKey:this.vapidPublicKey?this.urlBase64ToUint8Array(this.vapidPublicKey):void 0};this.pushSubscription=await this.serviceWorkerRegistration.pushManager.subscribe(t),this.permissionState.subscribed=!0;const s={endpoint:this.pushSubscription.endpoint,keys:{p256dh:this.arrayBufferToBase64(this.pushSubscription.getKey("p256dh")),auth:this.arrayBufferToBase64(this.pushSubscription.getKey("auth"))},userId:e,subscriptionTime:Date.now()};return localStorage.setItem("push_subscription",JSON.stringify(s)),await this.sendSubscriptionToServer(s),at.trackEvent("push_notification_subscribed",{userId:e,endpoint:this.pushSubscription.endpoint}),De.info("Push notification subscription successful"),this.pushSubscription}catch(t){throw De.error("Failed to subscribe to push notifications","PushNotificationService.subscribe",t),at.reportError(t,"push_subscription_error",{userId:e}),t}}async unsubscribe(){if(!this.pushSubscription)return!0;try{const e=await this.pushSubscription.unsubscribe();return e&&(this.pushSubscription=null,this.permissionState.subscribed=!1,localStorage.removeItem("push_subscription"),await this.removeSubscriptionFromServer(),at.trackEvent("push_notification_unsubscribed"),De.info("Push notification unsubscribed successfully")),e}catch(e){return Le.logError("PushNotificationService.unsubscribe",e),at.reportError(e,"push_unsubscription_error"),!1}}async showLocalNotification(e){if(!this.permissionState.supported||"granted"!==this.permissionState.permission)throw new Error("Notifications not available");try{const t={body:e.body,icon:e.icon||"/logo.png",badge:e.badge||"/logo.png",tag:e.tag,data:e.data,requireInteraction:e.requireInteraction||!1,silent:e.silent||!1},s=new Notification(e.title,t);s.onclick=()=>{at.trackEvent("local_notification_clicked",{tag:e.tag,title:e.title}),s.close()},s.onclose=()=>{at.trackEvent("local_notification_closed",{tag:e.tag,title:e.title})},at.trackEvent("local_notification_shown",{tag:e.tag,title:e.title})}catch(t){throw De.error("Failed to show local notification","PushNotificationService.showLocalNotification",t),at.reportError(t,"local_notification_error",{title:e.title}),t}}urlBase64ToUint8Array(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),s=window.atob(t),a=new Uint8Array(s.length);for(let n=0;n<s.length;++n)a[n]=s.charCodeAt(n);return a}arrayBufferToBase64(e){const t=new Uint8Array(e);let s="";for(let a=0;a<t.byteLength;a++)s+=String.fromCharCode(t[a]);return window.btoa(s)}getAuthToken(){return localStorage.getItem("auth_token")||sessionStorage.getItem("auth_token")||""}getNotificationPreferences(){const e=localStorage.getItem("notification_preferences");if(e)try{return JSON.parse(e)}catch(t){De.warn("Failed to parse notification preferences:","pushNotificationService.getNotificationPreferences",t)}return{priceAlerts:!0,auctionUpdates:!0,newListings:!1,marketTrends:!1,systemNotifications:!0}}async validateSubscription(){if(!this.pushSubscription)return!1;try{const e={endpoint:this.pushSubscription.endpoint,keys:{p256dh:this.arrayBufferToBase64(this.pushSubscription.getKey("p256dh")),auth:this.arrayBufferToBase64(this.pushSubscription.getKey("auth"))}},t=await fetch("/api/push/validate-subscription",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.getAuthToken()}`},body:JSON.stringify({subscription:e})});if(!t.ok)throw new Error(`Validation failed: ${t.status} ${t.statusText}`);return!0===(await t.json()).valid}catch(e){return De.warn("Subscription validation failed:","pushNotificationService.validateSubscription",e),!1}}async sendSubscriptionToServer(e){try{const t=await fetch("/api/push/subscribe",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.getAuthToken()}`},body:JSON.stringify({...e,userAgent:navigator.userAgent,timestamp:Date.now(),preferences:this.getNotificationPreferences()})});if(!t.ok){const e=await t.json().catch(()=>({}));throw new Error(`Failed to save subscription: ${t.status} ${t.statusText} - ${e.message||"Unknown error"}`)}const s=await t.json();De.info("Subscription successfully saved to server:",s.subscriptionId),localStorage.setItem("push_subscription_id",s.subscriptionId)}catch(t){throw De.error("Failed to send subscription to server:","pushNotificationService.sendSubscriptionToServer",t,{endpoint:e.endpoint,userId:e.userId}),t}}async removeSubscriptionFromServer(){try{const e=localStorage.getItem("push_subscription_id"),t=localStorage.getItem("push_subscription");if(!e&&!t)return void De.info("No subscription to remove from server");const s=await fetch("/api/push/unsubscribe",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.getAuthToken()}`},body:JSON.stringify({subscriptionId:e,endpoint:this.pushSubscription?.endpoint,timestamp:Date.now()})});if(!s.ok){const e=await s.json().catch(()=>({}));throw new Error(`Failed to remove subscription: ${s.status} ${s.statusText} - ${e.message||"Unknown error"}`)}localStorage.removeItem("push_subscription_id"),De.info("Subscription successfully removed from server")}catch(e){De.error("Failed to remove subscription from server:","pushNotificationService.removeSubscriptionFromServer",e)}}getPermissionState(){return{...this.permissionState}}isSubscribed(){return this.permissionState.subscribed}getSubscription(){return this.pushSubscription}setVapidKey(e){this.vapidPublicKey=e}async testNotification(){await this.showLocalNotification({title:"PxMarket Test Notification",body:"Push notifications are working correctly!",tag:"test-notification",data:{test:!0}})}async sendPriceAlert(e,t,s){await this.showLocalNotification({title:"Price Alert",body:`${e} is now ${t} (target: ${s})`,tag:"price-alert",icon:"/logo.png",requireInteraction:!0,data:{type:"price_alert",assetName:e,currentPrice:t,targetPrice:s}})}async sendTransactionNotification(e,t,s){await this.showLocalNotification({title:"success"===e?"Transaction Successful":"Transaction Failed",body:t,tag:`transaction-${e}`,icon:"/logo.png",data:{type:"transaction",status:e,transactionId:s}})}};const wt=new class{constructor(){M(this,"watchlist",[]),M(this,"priceAlerts",{}),M(this,"notifications",{browser:!0,email:!1,sound:!0}),M(this,"listeners",[]),M(this,"priceCheckInterval",null),M(this,"STORAGE_KEY","pixeljourney_watchlist"),M(this,"ALERTS_KEY","pixeljourney_price_alerts"),M(this,"NOTIFICATIONS_KEY","pixeljourney_notifications"),M(this,"priceCache",{}),M(this,"CACHE_DURATION",12e4),M(this,"endpointFailures",{}),M(this,"MAX_FAILURES",3),M(this,"FAILURE_WINDOW",3e5),M(this,"DISABLE_DURATION",9e5),this.loadFromStorage(),this.startPriceMonitoring(),this.requestNotificationPermission()}loadFromStorage(){try{this.watchlist=Qe.getJSON(this.STORAGE_KEY,[]),this.priceAlerts=Qe.getJSON(this.ALERTS_KEY,{}),this.notifications=Qe.getJSON(this.NOTIFICATIONS_KEY,{browser:!0,email:!1,sound:!0})}catch(e){Le.logError("WatchlistService.loadFromStorage",e,{storageKeys:[this.STORAGE_KEY,this.ALERTS_KEY,this.NOTIFICATIONS_KEY]})}}saveToStorage(){try{Qe.setJSON(this.STORAGE_KEY,this.watchlist)&&Qe.setJSON(this.ALERTS_KEY,this.priceAlerts)&&Qe.setJSON(this.NOTIFICATIONS_KEY,this.notifications)||Le.logError("WatchlistService.saveToStorage",new Error("Failed to save to storage"),{watchlistSize:this.watchlist.length,alertsCount:Object.keys(this.priceAlerts).length}),this.notifyListeners()}catch(e){Le.logError("WatchlistService.saveToStorage",e,{watchlistSize:this.watchlist.length,alertsCount:Object.keys(this.priceAlerts).length})}}async requestNotificationPermission(){"Notification"in window&&"default"===Notification.permission&&await Notification.requestPermission()}addListener(e){this.listeners.push(e)}removeListener(e){this.listeners=this.listeners.filter(t=>t!==e)}notifyListeners(){this.listeners.forEach(e=>e([...this.watchlist]))}async addToWatchlist(e){if(-1!==this.watchlist.findIndex(t=>t.nft.asset_id===e.asset_id))return!1;const t={nft:e,alertType:"any",addedAt:Date.now(),lastPrice:e.price?parseFloat(e.price):0};return this.watchlist.push(t),this.saveToStorage(),this.notifyListeners(),!0}async removeFromWatchlist(e){this.watchlist=this.watchlist.filter(t=>t.nft.asset_id!==e),delete this.priceAlerts[e],this.saveToStorage(),this.notifyListeners()}async getWatchlist(){return[...this.watchlist]}isInWatchlist(e){return this.watchlist.some(t=>t.nft.asset_id===e)}async setPriceAlert(e,t){this.priceAlerts[e]={...t,lastTriggered:void 0},this.saveToStorage()}async removePriceAlert(e){delete this.priceAlerts[e],this.saveToStorage()}getPriceAlert(e){return this.priceAlerts[e]}updateNotificationSettings(e){this.notifications={...this.notifications,...e},this.saveToStorage()}getNotificationSettings(){return{...this.notifications}}isEndpointDisabled(e){const t=this.endpointFailures[e];return!(!t||!t.disabled)&&(!(Date.now()-t.lastFailure>this.DISABLE_DURATION)||(t.disabled=!1,t.count=0,!1))}recordEndpointFailure(e){const t=Date.now(),s=this.endpointFailures[e]||{count:0,lastFailure:0,disabled:!1};t-s.lastFailure>this.FAILURE_WINDOW&&(s.count=0),s.count++,s.lastFailure=t,s.count>=this.MAX_FAILURES&&(s.disabled=!0,De.warn(`Endpoint ${e} disabled due to ${s.count} failures`,"WatchlistService.recordEndpointFailure")),this.endpointFailures[e]=s}recordEndpointSuccess(e){const t=this.endpointFailures[e];t&&(t.count=0,t.disabled=!1)}notifyEndpointsDisabled(){const e=localStorage.getItem("watchlist_endpoints_disabled_notification"),t=Date.now();e&&t-parseInt(e)<9e5||(localStorage.setItem("watchlist_endpoints_disabled_notification",t.toString()),window.dispatchEvent(new CustomEvent("watchlistEndpointsDisabled",{detail:{message:"Price monitoring temporarily disabled due to API issues. Will retry automatically.",disabledEndpoints:Object.keys(this.endpointFailures).filter(e=>this.endpointFailures[e].disabled),retryTime:Math.max(...Object.values(this.endpointFailures).map(e=>e.lastFailure+this.DISABLE_DURATION))}})))}getEndpointStatus(){const e={};for(const[t,s]of Object.entries(this.endpointFailures))e[t]={healthy:!s.disabled,failures:s.count,disabledUntil:s.disabled?s.lastFailure+this.DISABLE_DURATION:void 0};return e}startPriceMonitoring(){this.priceCheckInterval=setInterval(()=>{this.checkPriceAlerts()},18e4),setTimeout(()=>{this.checkPriceAlerts()},6e4)}stopPriceMonitoring(){this.priceCheckInterval&&(clearInterval(this.priceCheckInterval),this.priceCheckInterval=null)}async checkPriceAlerts(){if(0===this.watchlist.length)return;if(["atomichub","neftyblocks"].every(e=>this.isEndpointDisabled(e)))return De.warn("All price endpoints are disabled, skipping price check","WatchlistService.checkPrices"),void this.notifyEndpointsDisabled();try{const e=Object.values(this.endpointFailures).filter(e=>e.disabled).length,t=e>0?2:3,s=[];for(let a=0;a<this.watchlist.length;a+=t)s.push(this.watchlist.slice(a,a+t));for(let a=0;a<s.length;a++){const t=s[a];a>0&&await new Promise(e=>setTimeout(e,2e3));const n=t.map(async e=>{try{const t=await this.fetchCurrentPrice(e),s=e.lastPrice>0?(t-e.lastPrice)/e.lastPrice*100:0;e.lastPrice=t,e.priceChange=s;const a=this.priceAlerts[e.nft.asset_id];return a&&a.enabled&&t>0&&await this.checkAlertCondition(e,a,t),e}catch(t){return Le.logError("WatchlistService.checkPriceAlerts.priceCheck",t,{assetId:e.nft.asset_id,nftName:e.nft.name}),e}});if(await Promise.allSettled(n),s.indexOf(t)<s.length-1){const t=e>0?2e3:1e3;await new Promise(e=>setTimeout(e,t))}}this.saveToStorage()}catch(e){Le.logError("WatchlistService.checkPriceAlerts",e,{watchlistSize:this.watchlist.length,disabledEndpoints:Object.keys(this.endpointFailures).filter(e=>this.endpointFailures[e].disabled)})}}async fetchCurrentPrice(e){const t=e.nft.asset_id,s=Date.now(),a=this.priceCache[t];if(a&&s-a.timestamp<this.CACHE_DURATION)return a.price;const n=await this.getCurrentPrice(t);return this.priceCache[t]={price:n,timestamp:s},n}async getCurrentPrice(e){try{const s=["atomichub","neftyblocks"];for(const a of s)if(!this.isEndpointDisabled(a))try{let t=0;switch(a){case"atomichub":t=await this.fetchAtomicHubPrice(e);break;case"neftyblocks":t=await this.fetchNeftyBlocksPrice(e)}if(t>0)return this.recordEndpointSuccess(a),t}catch(t){this.recordEndpointFailure(a),De.warn(`Failed to fetch price from ${a}:`,"WatchlistService.getCurrentPrice",{endpoint:a,error:t})}return De.warn("All price endpoints failed, using template floor price fallback","WatchlistService.getCurrentPrice"),await this.fetchTemplateFloorPrice(e)}catch(t){Le.logError("WatchlistService.getCurrentPrice",t,{assetId:e});const s=this.watchlist.find(t=>t.nft.asset_id===e);return s?.lastPrice||0}}async fetchAtomicHubPrice(e){const t="atomichub";try{const{apiService:s}=await Y(async()=>{const{apiService:e}=await Promise.resolve().then(()=>ut);return{apiService:e}},void 0),a=`${s.atomicMarketAPI}/atomicmarket/v1/sales?state=1&asset_id=${e}&limit=1`,n=await s.fetchWithRetry(a),i=await n.json();if(i.success&&i.data&&i.data.length>0){const e=i.data[0];if(e.price&&e.price.amount)return this.recordEndpointSuccess(t),parseFloat(e.price.amount)/Math.pow(10,e.price.token_precision||8)}return 0}catch(s){return this.recordEndpointFailure(t),Le.logError("WatchlistService.fetchAtomicHubPrice",s,{assetId:e,endpoint:t,failureCount:this.endpointFailures[t]?.count||0}),0}}async fetchNeftyBlocksPrice(e){const t="neftyblocks";try{const{apiService:s}=await Y(async()=>{const{apiService:e}=await Promise.resolve().then(()=>ut);return{apiService:e}},void 0),a=`https://aa-wax-public1.neftyblocks.com/atomicmarket/v1/sales?state=1&asset_id=${e}&limit=1`,n=await s.fetchWithRetry(a),i=await n.json();if(i.success&&i.data&&i.data.length>0){const e=i.data[0];if(e.price&&e.price.amount)return this.recordEndpointSuccess(t),parseFloat(e.price.amount)/Math.pow(10,e.price.token_precision||8)}return 0}catch(s){return this.recordEndpointFailure(t),Le.logError("WatchlistService.fetchNeftyBlocksPrice",s,{assetId:e,endpoint:t,failureCount:this.endpointFailures[t]?.count||0}),0}}async fetchTemplateFloorPrice(e){try{const{apiService:t}=await Y(async()=>{const{apiService:e}=await Promise.resolve().then(()=>ut);return{apiService:e}},void 0),s=`${t.atomicAssetsAPI}/atomicassets/v1/assets/${e}`,a=await t.fetchWithRetry(s),n=await a.json();if(n.success&&n.data&&n.data.template){const e=n.data.template.template_id,s=`${t.atomicMarketAPI}/atomicmarket/v1/sales?state=1&template_id=${e}&sort=price&order=asc&limit=1`,a=await t.fetchWithRetry(s),i=await a.json();if(i.success&&i.data&&i.data.length>0){const e=i.data[0];if(e.price&&e.price.amount)return parseFloat(e.price.amount)/Math.pow(10,e.price.token_precision||8)}}return 0}catch{return 0}}async checkAlertCondition(e,t,s){const a=Date.now();if(t.lastTriggered&&a-t.lastTriggered<36e5)return;let n=!1,i="";switch(t.alertType){case"below":s<=t.targetPrice&&(n=!0,i=`${e.nft.name} price dropped to ${s.toFixed(2)} WAX (target: ${t.targetPrice} WAX)`);break;case"above":s>=t.targetPrice&&(n=!0,i=`${e.nft.name} price rose to ${s.toFixed(2)} WAX (target: ${t.targetPrice} WAX)`);break;case"any":{const t=Math.abs(e.priceChange||0);if(t>=5){n=!0;const a=(e.priceChange||0)>0?"increased":"decreased";i=`${e.nft.name} price ${a} by ${t.toFixed(1)}% to ${s.toFixed(2)} WAX`}break}}n&&(await this.triggerAlert(e,i),t.lastTriggered=a)}async triggerAlert(e,t){this.notifications.browser&&"Notification"in window&&"granted"===Notification.permission&&new Notification("Price Alert - Pixel Journey",{body:t,icon:e.nft.image||"/logo.png",tag:`price-alert-${e.nft.asset_id}`,requireInteraction:!0}),this.notifications.sound&&this.playNotificationSound();try{await Nt.sendPriceAlert(e.nft.name,`${e.lastPrice} WAX`,t)}catch(s){De.warn("Failed to send push notification for price alert:","WatchlistService.sendPriceAlert",{error:s})}window.dispatchEvent(new CustomEvent("priceAlert",{detail:{item:e,message:t}}))}playNotificationSound(){try{const e=new Audio("/notification.mp3");e.volume=.3,e.play().catch(e=>{De.debug("Could not play notification sound:","WatchlistService.playNotificationSound",{error:e})})}catch(e){De.debug("Notification sound not available:","WatchlistService.playNotificationSound",{error:e})}}getWatchlistStats(){const e=this.watchlist.length,t=Object.keys(this.priceAlerts).filter(e=>this.priceAlerts[e].enabled).length,s=this.watchlist.map(e=>e.priceChange||0).filter(e=>0!==e);return{totalItems:e,activeAlerts:t,averagePriceChange:s.length>0?s.reduce((e,t)=>e+t,0)/s.length:0}}clearWatchlist(){this.watchlist=[],this.priceAlerts={},this.saveToStorage()}subscribe(e){return this.listeners.push(e),()=>{const t=this.listeners.indexOf(e);t>-1&&this.listeners.splice(t,1)}}exportWatchlist(){return JSON.stringify({watchlist:this.watchlist,priceAlerts:this.priceAlerts,exportedAt:Date.now()},null,2)}importWatchlist(e){try{const t=JSON.parse(e);return!(!t.watchlist||!Array.isArray(t.watchlist))&&(this.watchlist=t.watchlist,this.priceAlerts=t.priceAlerts||{},this.saveToStorage(),!0)}catch(t){return Le.logError("WatchlistService.importWatchlist",t,{dataLength:e.length}),!1}}};var kt,_t;(_t=kt||(kt={}))[_t.CEILING=0]="CEILING",_t[_t.DOWN=1]="DOWN",_t[_t.FLOOR=2]="FLOOR",_t[_t.HALF_DOWN=3]="HALF_DOWN",_t[_t.HALF_EVEN=4]="HALF_EVEN",_t[_t.HALF_UP=5]="HALF_UP",_t[_t.UNNECESSARY=6]="UNNECESSARY",_t[_t.UP=7]="UP";var St=function(){function e(t){void 0===t&&(t="0"),this.value=e.validate(t)}return e.validate=function(e){if(e){if(e=e.toString(),isNaN(e))throw Error("Parameter is not a number: "+e);"+"==e[0]&&(e=e.substring(1))}else e="0";if(e.startsWith(".")?e="0"+e:e.startsWith("-.")&&(e="-0"+e.substr(1)),/e/i.test(e)){var t=e.split(/[eE]/),s=t[0],a=t[1],n="";"-"==(s=i(s))[0]&&(n="-",s=s.substring(1)),s.indexOf(".")>=0?(a=parseInt(a)+s.indexOf("."),s=s.replace(".","")):a=parseInt(a)+s.length,e=s.length<a?n+s+new Array(a-s.length+1).join("0"):s.length>=a&&a>0?n+i(s.substring(0,a))+(s.length>a?"."+s.substring(a):""):n+"0."+new Array(1-a).join("0")+s}return e},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){this.value=e.validate(t)},e.getPrettyValue=function(t,s,a){void 0===s&&(s=3),void 0===a&&(a=",");var n="-"==(t=e.validate(t)).charAt(0);n&&(t=t.substring(1));for(var i=t.indexOf("."),r="",l=i=i>0?i:t.length;l>0;)l<s?(s=l,l=0):l-=s,r=t.substring(l,l+s)+(l<i-s&&l>=0?a:"")+r;return(n?"-":"")+r+t.substring(i)},e.prototype.getPrettyValue=function(t,s){return void 0===t&&(t=3),void 0===s&&(s=","),e.getPrettyValue(this.value,t,s)},e.round=function(t,s,a){if(void 0===s&&(s=0),void 0===a&&(a=kt.HALF_EVEN),t=e.validate(t),isNaN(s))throw Error("Precision is not a number: "+s);return d(t,s,a)},e.prototype.round=function(t,s){if(void 0===t&&(t=0),void 0===s&&(s=kt.HALF_EVEN),isNaN(t))throw Error("Precision is not a number: "+t);return new e(d(this.value,t,s))},e.abs=function(t){return c(t=e.validate(t))},e.prototype.abs=function(){return new e(c(this.value))},e.floor=function(t){return-1===(t=e.validate(t)).indexOf(".")?t:e.round(t,0,kt.FLOOR)},e.prototype.floor=function(){return-1===this.value.indexOf(".")?new e(this.value):new e(this.value).round(0,kt.FLOOR)},e.ceil=function(t){return-1===(t=e.validate(t)).indexOf(".")?t:e.round(t,0,kt.CEILING)},e.prototype.ceil=function(){return-1===this.value.indexOf(".")?new e(this.value):new e(this.value).round(0,kt.CEILING)},e.add=function(t,s){return a(t=e.validate(t),s=e.validate(s))},e.prototype.add=function(t){return new e(a(this.value,t.getValue()))},e.subtract=function(t,s){return x(t=e.validate(t),s=e.validate(s))},e.prototype.subtract=function(t){return new e(x(this.value,t.getValue()))},e.multiply=function(t,s){return p(t=e.validate(t),s=e.validate(s))},e.prototype.multiply=function(t){return new e(p(this.value,t.getValue()))},e.divide=function(t,s,a,n){return f(t=e.validate(t),s=e.validate(s),a,n)},e.prototype.divide=function(t,s,a){return new e(f(this.value,t.getValue(),s,a))},e.modulus=function(t,s){return v(t=e.validate(t),s=e.validate(s))},e.prototype.modulus=function(t){return new e(v(this.value,t.getValue()))},e.compareTo=function(t,s){return y(t=e.validate(t),s=e.validate(s))},e.prototype.compareTo=function(e){return y(this.value,e.getValue())},e.negate=function(t){return g(t=e.validate(t))},e.prototype.negate=function(){return new e(g(this.value))},e.stripTrailingZero=function(t){return m(t=e.validate(t))},e.prototype.stripTrailingZero=function(){return new e(m(this.value))},e.RoundingModes=kt,e}();class Ct extends ne{constructor(){super(...arguments),this.default_block_cpu_limit=oe.from(2e5),this.default_block_net_limit=oe.from(1048576e3)}get allocated(){return 1-Number(this.weight_ratio.dividing(this.target_weight_ratio))/100}get reserved(){return this.utilization.dividing(this.weight)}get symbol(){return this.min_price.symbol}utilization_increase(e){const t=N(e),s=N(this.weight),a=N(Math.pow(10,15));return se.from(t.multiply(s).divide(a,15).ceil().getValue())}price_function(e){const{weight:t}=this;let s=this.min_price.value;const a=Number(this.exponent)-1;if(a<=0)return this.max_price.value;{const n=N(e).divide(N(t),18);s+=(this.max_price.value-this.min_price.value)*Math.pow(Number(n.getValue()),a)}return s}price_integral_delta(e,t){const s=ie.fromUnits(this.max_price.units.subtracting(this.min_price.units),this.symbol).value/this.exponent.value,a=Number(e.dividing(this.weight)),n=Number(t.dividing(this.weight));return this.min_price.value*n-this.min_price.value*a+s*Math.pow(n,this.exponent.value)-s*Math.pow(a,this.exponent.value)}fee(e,t){const{utilization:s,weight:a}=this;let n=re.from(s);const i=n.adding(e);let r=0;if(n.lt(t)){const s=Math.min(Number(e),Number(t.subtracting(n)));r+=Number(N(this.price_function(t)*s).divide(N(a)).getValue()),n=t}return n.lt(i)&&(r+=this.price_integral_delta(n,i)),r}determine_adjusted_utilization(e){const{decay_secs:t,utilization:s,utilization_timestamp:a}=this;let{adjusted_utilization:n}=this;if(s.lt(n)){const i=e&&e.timestamp?e.timestamp:new Date,r=ce.from(i).toMilliseconds()/1e3,l=n.subtracting(s).toNumber();let o=l*Math.exp(-(r-a.toMilliseconds())/Number(t));o=Math.min(Math.max(o,0),l),n=s.adding(o)}return n}}le([ne.field("uint8")],Ct.prototype,"version",void 0),le([ne.field("int64")],Ct.prototype,"weight",void 0),le([ne.field("int64")],Ct.prototype,"weight_ratio",void 0),le([ne.field("int64")],Ct.prototype,"assumed_stake_weight",void 0),le([ne.field("int64")],Ct.prototype,"initial_weight_ratio",void 0),le([ne.field("int64")],Ct.prototype,"target_weight_ratio",void 0),le([ne.field("time_point_sec")],Ct.prototype,"initial_timestamp",void 0),le([ne.field("time_point_sec")],Ct.prototype,"target_timestamp",void 0),le([ne.field("float64")],Ct.prototype,"exponent",void 0),le([ne.field("uint32")],Ct.prototype,"decay_secs",void 0),le([ne.field("asset")],Ct.prototype,"min_price",void 0),le([ne.field("asset")],Ct.prototype,"max_price",void 0),le([ne.field("int64")],Ct.prototype,"utilization",void 0),le([ne.field("int64")],Ct.prototype,"adjusted_utilization",void 0),le([ne.field("time_point_sec")],Ct.prototype,"utilization_timestamp",void 0);let At=class extends Ct{constructor(){super(...arguments),this.per_day=e=>this.us_per_day(e),this.frac=(e,t)=>this.frac_by_us(e,t),this.frac_by_ms=(e,t)=>this.frac_by_us(e,1e3*t),this.price_per=(e,t=1e3,s)=>this.price_per_us(e,t,s),this.price_per_ms=(e,t=1,s)=>this.price_per_us(e,1e3*t,s)}ms_per_day(e){return this.us_per_day(e)/1e3}us_per_day(e){const t=e&&e.virtual_block_cpu_limit?e.virtual_block_cpu_limit:this.default_block_cpu_limit;return 2*Number(t)*60*60*24}weight_to_us(e,t){return se.from(se.from(t).multiplying(re.from(e)).dividing(Wt,"ceil"))}us_to_weight(e,t){return re.from(t).multiplying(Wt).dividing(e,"floor")}frac_by_us(e,t){const s=N(this.us_to_weight(e.cpu,t)),a=N(this.weight),n=N(Math.pow(10,15)),i=s.divide(a,15).multiply(n);return re.from(i.getValue())}price_per_us(e,t=1e3,s){const a=se.from(this.frac(e,t)),n=this.utilization_increase(a),i=this.determine_adjusted_utilization(s),r=this.fee(n,i),l=Math.pow(10,this.max_price.symbol.precision),o=r*l,c=Math.ceil(o)/l,d=ie.fromFloat(r,this.symbol);if(o<1)throw new Error(`Price (${String(d)}) for requested CPU amount (${t}us) below required precision, increase requested amount.`);if(s&&s.min_payment&&s.min_payment.units.gt(d.units))throw new Error(`Price (${String(d)}) for requested CPU amount (${t}us) below minimum required payment (${String(s.min_payment)}), increase requested CPU amount.`);return c}};At=le([ne.type("powerupstateresourcecpu")],At);let Pt=class extends Ct{constructor(){super(...arguments),this.per_day=e=>this.bytes_per_day(e),this.frac=(e,t)=>this.frac_by_bytes(e,t),this.frac_by_kb=(e,t)=>this.frac_by_bytes(e,1e3*t),this.price_per=(e,t=1e3,s)=>this.price_per_byte(e,t,s),this.price_per_kb=(e,t=1,s)=>this.price_per_byte(e,1e3*t,s)}kb_per_day(e){return this.bytes_per_day(e)/1e3}bytes_per_day(e){const t=e&&e.virtual_block_net_limit?e.virtual_block_net_limit:this.default_block_net_limit;return 2*Number(t)*60*60*24}weight_to_bytes(e,t){return se.from(se.from(t).multiplying(re.from(e)).dividing(Wt,"ceil"))}bytes_to_weight(e,t){return re.from(t).multiplying(Wt).dividing(re.from(e),"floor")}frac_by_bytes(e,t){const s=N(this.bytes_to_weight(e.net,t)),a=N(this.weight),n=N(Math.pow(10,15)),i=s.divide(a,15).multiply(n);return re.from(i.getValue())}price_per_byte(e,t=1e3,s){const a=se.from(this.frac(e,t)),n=this.utilization_increase(a),i=this.determine_adjusted_utilization(s),r=this.fee(n,i),l=Math.pow(10,this.max_price.symbol.precision);return Math.ceil(r*l)/l}};Pt=le([ne.type("powerupstateresourcenet")],Pt);let Tt=class extends ne{};le([ne.field("uint8")],Tt.prototype,"version",void 0),le([ne.field(Pt)],Tt.prototype,"net",void 0),le([ne.field(At)],Tt.prototype,"cpu",void 0),le([ne.field("uint32")],Tt.prototype,"powerup_days",void 0),le([ne.field("asset")],Tt.prototype,"min_powerup_fee",void 0),Tt=le([ne.type("powerupstate")],Tt);class Et{constructor(e){this.parent=e}async get_state(){return(await this.parent.api.v1.chain.get_table_rows({code:"eosio",scope:"",table:"powup.state",type:Tt})).rows[0]}}let Ft=class extends ne{};le([ne.field("asset")],Ft.prototype,"balance",void 0),le([ne.field("float64")],Ft.prototype,"weight",void 0),Ft=le([ne.type("connector")],Ft);let It=class extends ne{};le([ne.field("asset")],It.prototype,"supply",void 0),le([ne.field(Ft)],It.prototype,"base",void 0),le([ne.field(Ft)],It.prototype,"quote",void 0),It=le([ne.type("exchange_state")],It);let $t=class extends It{price_per(e){const t=this.base.balance.units,s=this.quote.balance.units;return ie.fromUnits(this.get_input(t,s,re.from(e)),this.quote.balance.symbol)}price_per_kb(e){return this.price_per(1e3*e)}get_input(e,t,s){return t.multiplying(s).dividing(e.subtracting(s),"ceil")}};$t=le([ne.type("ramstate")],$t);class Lt{constructor(e){this.parent=e}async get_state(){return(await this.parent.api.v1.chain.get_table_rows({code:"eosio",scope:"eosio",table:"rammarket",type:$t})).rows[0]}}let Mt=class extends ne{get reserved(){return Number(this.total_lent.units)/Number(this.total_lendable.units)}get symbol(){return this.total_lent.symbol}get precision(){return this.total_lent.symbol.precision}get value(){const e=N(this.total_lent.units),t=N(this.total_unlent.units),s=N(this.total_rex.units);return Number(e.add(t).divide(s,18).getValue())}exchange(e){const t=N(e.units),s=N(this.total_lendable.units),a=N(this.total_rex.units),n=t.multiply(s).divide(a,this.precision);return ie.fromUnits(Number(n.getValue()),this.symbol)}cpu_price_per_ms(e,t=1){return this.cpu_price_per_us(e,1e3*t)}cpu_price_per_us(e,t=1e3){return this.price_per(e,t,e.cpu)}net_price_per_kb(e,t=1){return this.net_price_per_byte(e,1e3*t)}net_price_per_byte(e,t=1e3){return this.price_per(e,t,e.net)}price_per(e,t=1e3,s=e.cpu){const a=ie.fromUnits(1e4,this.symbol),n=Number(a.units)/(this.total_rent.value/this.total_unlent.value)*(Number(s)/Wt);return Number(a.units)/n*t/Math.pow(10,this.precision)}};le([ne.field("uint8")],Mt.prototype,"version",void 0),le([ne.field("asset")],Mt.prototype,"total_lent",void 0),le([ne.field("asset")],Mt.prototype,"total_unlent",void 0),le([ne.field("asset")],Mt.prototype,"total_rent",void 0),le([ne.field("asset")],Mt.prototype,"total_lendable",void 0),le([ne.field("asset")],Mt.prototype,"total_rex",void 0),le([ne.field("asset")],Mt.prototype,"namebid_proceeds",void 0),le([ne.field("uint64")],Mt.prototype,"loan_num",void 0),Mt=le([ne.type("rexstate")],Mt);class Rt{constructor(e){this.parent=e}async get_state(){return(await this.parent.api.v1.chain.get_table_rows({code:"eosio",scope:"eosio",table:"rexpool",type:Mt})).rows[0]}}const Wt=new ae(1e8);class Ot{constructor(e){if(this.sampleAccount="greymassfuel",this.symbol="4,EOS",this.v1={powerup:new Et(this),ram:new Lt(this),rex:new Rt(this)},e.sampleAccount&&(this.sampleAccount=e.sampleAccount),e.symbol&&(this.symbol=e.symbol),e.api)this.api=e.api;else{if(!e.url)throw new Error("Missing url or api client");this.api=new ee({provider:new te(e.url,e)})}}async getSampledUsage(){const e=await this.api.v1.chain.get_account(this.sampleAccount),t=se.from(e.cpu_limit.max.value.mul(Wt)),s=se.from(e.net_limit.max.value.mul(Wt)),a=se.from(e.cpu_weight.value),n=se.from(e.net_weight.value);return{account:e,cpu:b(t.value,a.value),net:b(s.value,n.value)}}}Ot.__className="Resources";let Dt=class extends ne{};le([ne.field(pe)],Dt.prototype,"payer",void 0),le([ne.field(pe)],Dt.prototype,"receiver",void 0),le([ne.field(fe)],Dt.prototype,"days",void 0),le([ne.field(re)],Dt.prototype,"net_frac",void 0),le([ne.field(re)],Dt.prototype,"cpu_frac",void 0),le([ne.field(ie)],Dt.prototype,"max_payment",void 0),Dt=le([ne.type("powerup")],Dt);let zt=class extends ne{};le([ne.field(pe)],zt.prototype,"payer",void 0),le([ne.field(pe)],zt.prototype,"receiver",void 0),le([ne.field(fe)],zt.prototype,"bytes",void 0),zt=le([ne.type("buyrambytes")],zt);var Bt,Ut,Xt={en:{checking:"Checking transaction",fee:{title:"Accept Transaction Fee?",body:"Additional resources ({{resource}}) are required for your account to perform this transaction. Would you like to automatically purchase these resources from the network and proceed?",cost:"Cost of {{resource}}"},resolving:"Resolving transaction"},ko:{checking:"\uac70\ub798 \ud655\uc778",fee:{title:"\uac70\ub798 \uc218\uc218\ub8cc\ub97c \uc218\ub77d\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",body:"\uacc4\uc815\uc5d0\uc11c \uc774 \uac70\ub798\ub97c \uc218\ud589\ud558\ub824\uba74 \ucd94\uac00 \ub9ac\uc18c\uc2a4({{resource}})\uac00 \ud544\uc694\ud569\ub2c8\ub2e4. \ub124\ud2b8\uc6cc\ud06c\uc5d0\uc11c \uc774\ub7ec\ud55c \ub9ac\uc18c\uc2a4\ub97c \uc790\ub3d9\uc73c\ub85c \uad6c\ub9e4\ud558\uace0 \uacc4\uc18d \uc9c4\ud589\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",cost:"{{resource}}\uc758 \ube44\uc6a9"},resolving:"\ud2b8\ub79c\uc7ad\uc158 \ud574\uacb0"},"zh-Hans":{checking:"\u6b63\u5728\u68c0\u67e5\u4ea4\u6613",fee:{title:"\u63a5\u53d7\u4ea4\u6613\u8d39\u7528\uff1f",body:"\u60a8\u7684\u5e10\u6237\u9700\u8981\u5176\u4ed6\u8d44\u6e90 \uff08{{resource}}\uff09 \u624d\u80fd\u6267\u884c\u6b64\u4ea4\u6613\u3002\u662f\u5426\u8981\u81ea\u52a8\u4ece\u7f51\u7edc\u8d2d\u4e70\u8fd9\u4e9b\u8d44\u6e90\u5e76\u7ee7\u7eed\uff1f",cost:"{{resource}} \u7684\u6210\u672c"},resolving:"\u6b63\u5728\u89e3\u6790\u4ea4\u6613"},"zh-Hant":{checking:"\u6b63\u5728\u6aa2\u67e5\u4ea4\u6613",fee:{title:"\u63a5\u53d7\u4ea4\u6613\u8cbb\u7528\uff1f",body:"\u60a8\u7684\u5e33\u6236\u9700\u8981\u5176\u4ed6\u8cc7\u6e90 \uff08{{resource}}\uff09 \u624d\u80fd\u57f7\u884c\u6b64\u4ea4\u6613\u3002\u662f\u5426\u8981\u81ea\u52d5\u5f9e\u7db2\u8def\u8cfc\u8cb7\u9019\u4e9b\u8cc7\u6e90\u4e26\u7e7c\u7e8c\uff1f",cost:"{{resource}} \u7684\u6210\u672c"},resolving:"\u6b63\u5728\u89e3\u6790\u4ea4\u6613"}};(Ut=Bt||(Bt={}))[Ut.BuyRAM=0]="BuyRAM",Ut[Ut.PowerUp=1]="PowerUp";const qt={aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906:{features:[Bt.BuyRAM,Bt.PowerUp],sampleAccount:"eosio.reserv",symbol:ie.Symbol.from("4,EOS")},"73e4385a2708e6d7048834fbc1079f2fabb17b3c125b146af438971e90716c4d":{features:[Bt.BuyRAM,Bt.PowerUp],sampleAccount:"eosio.reserv",symbol:ie.Symbol.from("4,EOS")},"1064487b3cd1a897ce03ae5b6a865651747e2e152090f99c1d19d44e01aea5a4":{features:[Bt.BuyRAM,Bt.PowerUp],sampleAccount:"boost.wax",symbol:ie.Symbol.from("8,WAX")}},Ht=1.5;class Jt extends de{constructor(){super(...arguments),this.id="transact-plugin-autocorrect",this.translations=Xt,this.sample=null,this.price=null,this.resources=[],this.iterations=0}register(e){if(!e.ui)throw new Error("The TransactPluginAutoCorrect plugin requires a UI to be present.");e.addHook(ue.beforeSign,async(e,t)=>this.run(e,t))}async run(e,t){if(!t.ui)return{request:e};this.price=null,this.resources=[],this.iterations=0;const s=t.ui.getTranslate(this.id),a=t.ui.prompt({title:s("checking",{default:"Checking transaction"}),body:"",elements:[]}).catch(t=>{if(t)throw t;return{request:e}}),n=await t.client.v1.chain.get_account(t.permissionLevel.actor),i=this.correct(e,t,n),r=await Promise.race([a,i]);if(r===e&&!this.price)return{request:e};const l=Array.from(new Set(this.resources)).join("/");return t.ui.prompt({title:s("fee.title",{default:"Accept Transaction Fee?"}),body:s("fee.body",{default:"Additional resources ({{resource}}) are required for your account to perform this transaction. Would you like to automatically purchase these resources from the network and proceed?",resource:l}),elements:[{type:"asset",data:{label:s("fee.cost",{default:"Cost of {{resource}}",resource:l}),value:this.price}},{type:"accept"}]}).then(()=>({request:r})).catch(t=>{if(t)throw t;return{request:e}})}async correct(e,t,s){if(this.iterations++,this.iterations>3)throw new Error("Too many iterations. Please report this bug if you see it.");const a=qt[String(t.chain.id)];if(!a||!t.ui)return e;const n=new Ot({api:t.client,sampleAccount:a.sampleAccount}),i=await t.resolve(e);return t.client.v1.chain.compute_transaction(i.transaction).then(r=>{const l=function(e){return e.error?e.error:e.processed.except?e.processed.except:null}(r);if(l&&l.stack&&"object"==typeof l.stack[0])switch(l.name){case"tx_net_usage_exceeded":{const{net_usage:e}=l.stack[0].data,r=e*Ht;if(a.features.includes(Bt.PowerUp))return this.powerup(t,i,s,n,0,r);break}case"tx_cpu_usage_exceeded":{const{billed:e,billable:r}=l.stack[0].data,o=(e-r)*Ht;if(a.features.includes(Bt.PowerUp))return this.powerup(t,i,s,n,o,0);break}case"ram_usage_exceeded":{const{available:e,needs:r}=l.stack[0].data,o=(r-e)*Ht;if(a.features.includes(Bt.BuyRAM))return this.buyram(t,i,s,n,o);break}}return e}).catch(r=>{if(r.error)switch(r.error.name){case"tx_net_usage_exceeded":{const[,e]=r.error.details[0].message.match(/transaction net usage is too high: (\d+) > (\d+)/),l=Number(e)*Ht;if(a.features.includes(Bt.PowerUp))return this.powerup(t,i,s,n,0,l);break}case"tx_cpu_usage_exceeded":{const[,e]=r.error.details[0].message.match(/billed CPU time \((\d+) us\) is greater than the maximum billable CPU time for the transaction/),l=Number(e)*Ht;if(a.features.includes(Bt.PowerUp))return this.powerup(t,i,s,n,l,0);break}case"ram_usage_exceeded":{const[,,e,l]=r.error.details[0].message.match(/account (\w.+) has insufficient ram; needs (\d+) bytes has (\d+) bytes/),o=(Number(e)-Number(l))*Ht+2;if(a.features.includes(Bt.BuyRAM))return this.buyram(t,i,s,n,o);break}default:console.log("unknown error",r)}return e})}async buyram(e,t,s,a,n){const i=qt[String(e.chain.id)],r=await a.v1.ram.get_state();this.sample||(this.sample=await a.getSampledUsage());const l=ie.from(r.price_per(n).value,i.symbol);this.price?this.price.units.add(l.units):this.price=l,this.resources.push("RAM");const o=he.from({account:"eosio",name:"buyrambytes",authorization:[t.signer],data:zt.from({payer:t.signer.actor,receiver:t.signer.actor,bytes:n})}),c=me(t.request,o);return this.correct(c,e,s)}async powerup(e,t,s,a,n,i){const r=qt[String(e.chain.id)],l=await a.v1.powerup.get_state();this.sample||(this.sample=await a.getSampledUsage()),n<2500&&(n=2500),i<1e4&&(i=1e4);const o=ie.from(Number(l.cpu.price_per(this.sample,n))+Number(l.net.price_per(this.sample,i))*Ht,r.symbol);this.price?this.price.units.add(o.units):this.price=o,this.resources.push("CPU","NET");const c=he.from({account:"eosio",name:"powerup",authorization:[t.signer],data:Dt.from({payer:t.signer.actor,receiver:t.signer.actor,days:1,net_frac:l.net.frac(this.sample,i),cpu_frac:l.cpu.frac(this.sample,n),max_payment:o})});let d=me(t.request,c);const u=410;if(Number(s.ram_quota)-Number(s.ram_usage)<u){const n=qt[String(e.chain.id)],i=await a.v1.ram.get_state();this.sample||(this.sample=await a.getSampledUsage());const r=he.from({account:"eosio",name:"buyrambytes",authorization:[t.signer],data:zt.from({payer:t.signer.actor,receiver:t.signer.actor,bytes:u})});s.ram_quota.add(u),d=me(d,r);const l=ie.from(i.price_per(u).value,n.symbol);this.price.units.add(l.units),this.resources.push("RAM")}return this.correct(d,e,s)}}const Vt=new class{constructor(){M(this,"transactions",new Map),M(this,"listeners",new Set),M(this,"retryTimeouts",new Map)}async executeTransaction(e,t,s={}){const a=this.generateTransactionId(),n=Yt.getAccountName();if(!n)throw new Error("Wallet not connected");const i={id:a,type:e,status:"pending",timestamp:Date.now(),account:n,actions:t,metadata:s.metadata,retryCount:0,maxRetries:s.maxRetries??3};this.transactions.set(a,i),this.emitEvent("transaction_started",i);try{this.updateTransactionStatus(a,"processing");const r=await this.performTransaction(t,s.timeout);if(i.transactionId=r.transactionId,i.blockNum=r.blockNum,i.cpuUsage=r.cpuUsage,i.netUsage=r.netUsage,r.success)return s.skipConfirmation||(this.updateTransactionStatus(a,"confirming"),await this.waitForConfirmation(r.transactionId)),this.updateTransactionStatus(a,"success"),De.info("Transaction successful","TransactionService",{transactionId:r.transactionId,type:e,account:n}),r;throw new Error(r.error||"Transaction failed")}catch(r){const t=r instanceof Error?r.message:"Unknown error";return i.error=t,De.error("Transaction failed","TransactionService",r instanceof Error?r:new Error(t),{transactionId:a,type:e,account:n}),i.maxRetries>0&&i.retryCount<i.maxRetries?this.retryTransaction(a,s):(this.updateTransactionStatus(a,"failed"),{success:!1,error:t})}}async retryTransaction(e,t){const s=this.transactions.get(e);if(!s)throw new Error("Transaction not found");s.retryCount=(s.retryCount||0)+1,this.emitEvent("transaction_retry",s);const a=t.retryDelay??2e3*s.retryCount;await new Promise(t=>{const s=setTimeout(t,a);this.retryTimeouts.set(e,s)}),this.retryTimeouts.delete(e);const n=this.generateTransactionId(),i={...s,id:n,status:"pending",timestamp:Date.now(),error:void 0,transactionId:void 0,blockNum:void 0,cpuUsage:void 0,netUsage:void 0};this.transactions.set(n,i),this.emitEvent("transaction_started",i);try{this.updateTransactionStatus(n,"processing");const e=await this.performTransaction(s.actions,t.timeout);if(i.transactionId=e.transactionId,i.blockNum=e.blockNum,i.cpuUsage=e.cpuUsage,i.netUsage=e.netUsage,e.success)return t.skipConfirmation||(this.updateTransactionStatus(n,"confirming"),await this.waitForConfirmation(e.transactionId)),this.updateTransactionStatus(n,"success"),De.info("Transaction retry successful","TransactionService",{transactionId:e.transactionId,type:s.type,account:s.account,retryCount:s.retryCount}),e;throw new Error(e.error||"Transaction failed")}catch(r){const a=r instanceof Error?r.message:"Unknown error";return i.error=a,De.error("Transaction retry failed","TransactionService",r instanceof Error?r:new Error(a),{transactionId:n,type:s.type,account:s.account,retryCount:s.retryCount}),s.maxRetries>0&&s.retryCount<s.maxRetries?this.retryTransaction(e,t):(this.updateTransactionStatus(n,"failed"),{success:!1,error:a})}}cancelTransaction(e){const t=this.transactions.get(e);if(!t||"pending"!==t.status)return!1;const s=this.retryTimeouts.get(e);return s&&(clearTimeout(s),this.retryTimeouts.delete(e)),this.updateTransactionStatus(e,"cancelled"),!0}getTransaction(e){return this.transactions.get(e)}getTransactionsByAccount(e){return Array.from(this.transactions.values()).filter(t=>t.account===e).sort((e,t)=>t.timestamp-e.timestamp)}getTransactionsByType(e){return Array.from(this.transactions.values()).filter(t=>t.type===e).sort((e,t)=>t.timestamp-e.timestamp)}getPendingTransactions(){return Array.from(this.transactions.values()).filter(e=>["pending","processing","confirming"].includes(e.status)).sort((e,t)=>t.timestamp-e.timestamp)}clearOldTransactions(){const e=Array.from(this.transactions.values()).sort((e,t)=>t.timestamp-e.timestamp);if(e.length>100){e.slice(100).forEach(e=>this.transactions.delete(e.id))}}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}clearListeners(){this.listeners.clear()}generateTransactionId(){return`tx_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}updateTransactionStatus(e,t){const s=this.transactions.get(e);s&&(s.status=t,this.emitEvent(`transaction_${t}`,s))}emitEvent(e,t){const s={type:e,transaction:t,timestamp:Date.now()};this.listeners.forEach(e=>{try{e(s)}catch(t){De.error("Transaction listener error","TransactionService",t instanceof Error?t:new Error(String(t)))}})}async performTransaction(e,t){try{const t=await Yt.transact(e);if(t&&"object"==typeof t){const e=t;return{success:!0,transactionId:e.transaction_id||e.id,blockNum:e.block_num,cpuUsage:e.cpu_usage_us,netUsage:e.net_usage_words}}return{success:!0}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Transaction failed"}}}async waitForConfirmation(e){await new Promise(e=>setTimeout(e,3e3))}};class Gt{constructor(){M(this,"sessionKit",null),M(this,"currentSession",null),M(this,"listeners",[]),this.initializeSessionKit(),this.restoreSession()}initializeSessionKit(){try{const e={appName:"PxMarket2",chains:[{id:"1064487b3cd1a897ce03ae5b6a865651747e2e152090f99c1d19d44e01aea5a4",url:He.WAX_CHAIN.GREYMASS}],ui:new xe,walletPlugins:[new K,new Q,new Z]},t={transactPlugins:[new Jt]};this.sessionKit=new ge(e,t)}catch(e){Le.logError("WharfKitService.initialize",e)}}async restoreSession(){if(this.sessionKit)try{const e=await this.sessionKit.restore();e&&(this.currentSession=e,this.notifyListeners())}catch(e){Le.logError("WharfKitService.restoreSession",e)}}async login(){if(!this.sessionKit)return Le.logError("WharfKitService.login",new Error("SessionKit not initialized")),null;try{const e=await this.sessionKit.login();if(e.session)return this.currentSession=e.session,this.notifyListeners(),this.currentSession}catch(e){throw Le.logError("WharfKitService.login",e),e}return null}async logout(){if(this.sessionKit&&this.currentSession)try{await this.sessionKit.logout(this.currentSession),this.currentSession=null,this.notifyListeners()}catch(e){throw Le.logError("WharfKitService.logout",e),e}}isLoggedIn(){return null!==this.currentSession}getSession(){return this.currentSession}getActor(){return this.currentSession?.actor?.toString()||null}getAccountName(){return this.currentSession?.actor?.toString()||null}getPermission(){return this.currentSession?.permission?.toString()||"active"}static safeGetActor(e){return e?.actor?.toString()||""}static safeGetPermission(e){return e?.permission?.toString()||"active"}async transact(e){if(!this.currentSession)throw new Error("No active session. Please login first.");try{Oe.debug("Sending transaction with actions","WHARFKIT",{actionsCount:e.length});const t=await this.currentSession.transact({actions:e},{broadcast:!0,expireSeconds:120});return Oe.info("Transaction successful","WHARFKIT",{result:t}),t}catch(t){throw Le.logError("WharfKitService.transact",t,{actions:e}),t}}async purchaseNFT(e,t){if(!this.currentSession)throw new Error("Please login to purchase NFTs");const s=[{account:"eosio.token",name:"transfer",authorization:[{actor:this.currentSession?.actor?.toString()||"",permission:"active"}],data:{from:this.currentSession?.actor?.toString()||"",to:"atomicmarket",quantity:`${parseFloat(t).toFixed(8)} WAX`,memo:"deposit"}},{account:"atomicmarket",name:"purchasesale",authorization:[{actor:this.currentSession?.actor?.toString()||"",permission:"active"}],data:{buyer:this.currentSession?.actor?.toString()||"",sale_id:e,intended_delphi_median:0,taker_marketplace:"market.pxj"}}];return Oe.debug("Crafting transaction actions","WHARFKIT",{actionsCount:s.length}),this.transact(s)}async batchPurchaseNFTs(e){if(!this.currentSession)throw new Error("Please login to purchase NFTs");if(0===e.length)throw new Error("No items to purchase");const t=[],s=e.reduce((e,t)=>e+parseFloat(t.price),0);return t.push({account:"eosio.token",name:"transfer",authorization:[{actor:this.currentSession.actor.toString(),permission:"active"}],data:{from:this.currentSession.actor.toString(),to:"atomicmarket",quantity:`${s.toFixed(8)} WAX`,memo:"deposit"}}),e.forEach(e=>{t.push({account:"atomicmarket",name:"purchasesale",authorization:[{actor:this.currentSession?.actor.toString()||"",permission:"active"}],data:{buyer:this.currentSession?.actor.toString()||"",sale_id:e.saleId,intended_delphi_median:0,taker_marketplace:"market.pxj"}})}),this.transact(t)}async transferTokens(e,t,s="PXJ",a=""){if(!this.currentSession)throw new Error("Please login to transfer tokens");const n=((e,t,s,a="WAX",n="")=>{let i;switch(a){case"WAX":default:i="eosio.token";break;case"RWAX":i="token.rwax";break;case"PXJ":i="pixeljourney"}return[{account:i,name:"transfer",authorization:[{actor:e,permission:"active"}],data:{from:e,to:t,quantity:`${s} ${a}`,memo:n}}]})(this.currentSession?.actor?.toString()||"",e,t,s,a);return Oe.debug("Token transfer transaction actions","WHARFKIT",{actionsCount:n.length,to:e,amount:t,currency:s,memo:a}),this.transact(n)}async bulkTransferNFT(e,t,s=""){if(!this.currentSession)throw new Error("Please login to transfer NFTs");if(!t||0===t.length)throw new Error("No assets to transfer");const a=t.map(t=>({account:"atomicassets",name:"transfer",authorization:[{actor:this.currentSession?.actor?.toString()||"",permission:"active"}],data:{from:this.currentSession?.actor?.toString()||"",to:e,asset_ids:[t],memo:s}}));return Oe.debug("Bulk NFT transfer transaction actions","WHARFKIT",{actionsCount:a.length,recipient:e,assetIds:t.length,memo:s}),this.transact(a)}async executeCraftingTransaction(e){if(!this.currentSession)throw new Error("No active session");const t=[],s=this.currentSession?.actor?.toString()||"",a={craft_green:1832,craft_orange:1833,craft_purple:1834,craft_amber:1835,craft_chartreuse:1836,craft_violet:1837,craft_teal:1838,craft_vermillion:1839,craft_magenta:1841}[e.recipe];if(!a)throw new Error(`Unknown recipe: ${e.recipe}`);const n=e.pxjCost;t.push({account:"nft.hive",name:"boost",authorization:[{actor:s,permission:"active"}],data:{booster:s}});const i=Date.now();for(let r=0;r<e.quantity;r++){const l=[];for(const t of e.ingredientAssets){const s=t.assetIds.length/e.quantity,a=r*s,n=a+s;l.push(...t.assetIds.slice(a,n))}l.length>0&&t.push({account:"atomicassets",name:"transfer",authorization:[{actor:s,permission:"active"}],data:{from:s,to:"nfthivecraft",asset_ids:l,memo:"craft"}}),n>0&&t.push({account:"pixeljourney",name:"transfer",authorization:[{actor:s,permission:"active"}],data:{from:s,to:"nfthivecraft",quantity:`${n.toFixed(8)} PXJ`,memo:"craft"}}),t.push({account:"nfthivecraft",name:"craft",authorization:[{actor:s,permission:"active"}],data:{craft_id:a,user_name:s,collection_name:"pixeljourney",timestamp:(i+r).toString(),asset_ids:l,tokens:[`${n.toFixed(8)} PXJ`]}})}return this.transact(t)}subscribe(e){return this.listeners.push(e),e(this.getWalletContext()),()=>{const t=this.listeners.indexOf(e);t>-1&&this.listeners.splice(t,1)}}notifyListeners(){const e=this.getWalletContext();this.listeners.forEach(t=>t(e))}getWalletContext(){return{isConnected:this.isLoggedIn(),account:this.getAccountName(),session:this.currentSession,login:this.login.bind(this),logout:this.logout.bind(this),transact:this.transact.bind(this),purchaseNFT:this.purchaseNFT.bind(this),batchPurchaseNFTs:this.batchPurchaseNFTs.bind(this),executeCraftingTransaction:this.executeCraftingTransaction.bind(this),isLoading:!1,executeTransaction:this.executeTransaction.bind(this),getTransaction:void 0,cancelTransaction:void 0,getTransactionHistory:void 0,transferNFT:void 0,bulkTransferNFT:this.bulkTransferNFT.bind(this),transferTokens:this.transferTokens.bind(this)}}async executeTransaction(e,t){if(!this.currentSession)throw new Error("No active session. Please login first.");try{let s=[];switch(e){case"nft_purchase":if(!t.saleId||!t.price)throw new Error("Missing saleId or price for NFT purchase");s=((e,t,s,a="WAX",n="atomicmarket")=>{const i=[],r="WAX"===a?"eosio.token":"token.rwax";return i.push({account:r,name:"transfer",authorization:[{actor:e,permission:"active"}],data:{from:e,to:n,quantity:`${s} ${a}`,memo:"deposit"}}),i.push({account:n,name:"purchasesale",authorization:[{actor:e,permission:"active"}],data:{buyer:e,sale_id:t,intended_delphi_median:0,taker_marketplace:"market.pxj"}}),i})(this.currentSession?.actor?.toString()||"",t.saleId,t.price);break;case"crafting":{const e=await this.executeCraftingTransaction(t);return e&&"object"==typeof e&&"transaction_id"in e?e.transaction_id:"crafting_completed"}default:throw new Error(`Transaction type '${e}' not supported yet`)}const a=await Vt.executeTransaction(e,s);if(a.success&&a.transactionId)return a.transactionId;throw new Error(a.error||"Transaction failed")}catch(s){throw Oe.error("Transaction execution failed","WharfKitService.executeTransaction",s instanceof Error?s:new Error(String(s)),{type:e,data:t}),s}}getAPIClient(){return new ee({url:He.WAX_CHAIN.GREYMASS})}}const Yt=new Gt,Kt=Object.freeze(Object.defineProperty({__proto__:null,WharfKitService:Gt,wharfKitService:Yt},Symbol.toStringTag,{value:"Module"})),Qt=D.memo(({imageUrl:e,videoUrl:t,alt:s,className:a="",controls:n=!0,muted:i=!0,loop:r=!1,autoPlay:l=!1,loading:o="lazy",enableAnimations:c=!0})=>{const d=e=>e?"string"!=typeof e?null:e.startsWith("http")?e:e.startsWith("Qm")?`${He.IPFS.GATEWAYS[0]}${e}`:e:null,u=d(t),h=d(e),m=()=>`data:image/svg+xml;base64,${btoa('<svg width="200" height="200" xmlns="http://www.w3.org/2000/svg">\n      <rect width="200" height="200" fill="#f3f4f6"/>\n      <text x="100" y="90" text-anchor="middle" font-family="Arial" font-size="14" fill="#6b7280">NFT</text>\n      <text x="100" y="110" text-anchor="middle" font-family="Arial" font-size="12" fill="#9ca3af">No Image</text>\n      <text x="100" y="130" text-anchor="middle" font-family="Arial" font-size="10" fill="#d1d5db">Available</text>\n    </svg>')}`,p=h||m();return u&&c?Se.jsxs("video",{className:a,controls:n,muted:i,loop:r,autoPlay:l,poster:h||void 0,onError:e=>{const t=e.target,n=document.createElement("img");n.src=p,n.alt=s,n.className=a,n.loading=o,t.parentNode?.replaceChild(n,t)},children:[Se.jsx("source",{src:u,type:"video/mp4"}),Se.jsx("source",{src:u,type:"video/webm"}),"Your browser does not support the video tag."]}):u&&!c?Se.jsx("img",{src:p,alt:s,className:a,loading:o,onError:e=>{const t=e.target,s=m();t.src!==s&&(t.src=s)}}):Se.jsx("img",{src:p,alt:s,className:a,loading:o,onError:e=>{const t=e.target,s=m();t.src!==s&&(t.src=s)}})});Qt.displayName="MediaRenderer";const Zt=new class{constructor(){M(this,"defaultConfig",{width:1200,height:630,backgroundColor:"#1a1a2e",textColor:"#ffffff",accentColor:"#ffd700"})}generateAchievementShareImage(e,t,s,a,n={}){const{width:i,height:r,textColor:l,accentColor:o}={...this.defaultConfig,...n},c=e.filter(e=>e.unlockedAt).sort((e,t)=>{const s={legendary:4,epic:3,rare:2,common:1};return(s[t.rarity||"common"]||1)-(s[e.rarity||"common"]||1)}).slice(0,3),d=`\n      <svg width="${i}" height="${r}" xmlns="http://www.w3.org/2000/svg">\n        <defs>\n          <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">\n            <stop offset="0%" style="stop-color:#1a1a2e;stop-opacity:1" />\n            <stop offset="50%" style="stop-color:#16213e;stop-opacity:1" />\n            <stop offset="100%" style="stop-color:#0f3460;stop-opacity:1" />\n          </linearGradient>\n          <linearGradient id="titleGradient" x1="0%" y1="0%" x2="100%" y2="0%">\n            <stop offset="0%" style="stop-color:#ffd700;stop-opacity:1" />\n            <stop offset="50%" style="stop-color:#ffed4e;stop-opacity:1" />\n            <stop offset="100%" style="stop-color:#ffd700;stop-opacity:1" />\n          </linearGradient>\n        </defs>\n        \n        \x3c!-- Background --\x3e\n        <rect width="100%" height="100%" fill="url(#bgGradient)"/>\n        \n        \x3c!-- Header --\x3e\n        <text x="${i/2}" y="80" font-family="system-ui, -apple-system, sans-serif" font-size="48" font-weight="bold" fill="url(#titleGradient)" text-anchor="middle">\n          ${a}'s Achievements\n        </text>\n        \n        \x3c!-- Stats Section --\x3e\n        <g transform="translate(${i/2-300}, 150)">\n          \x3c!-- Total Badges --\x3e\n          <rect x="0" y="0" width="180" height="120" rx="15" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.2)" stroke-width="1"/>\n          <text x="90" y="40" font-family="system-ui" font-size="36" font-weight="bold" fill="${o}" text-anchor="middle">${t}</text>\n          <text x="90" y="70" font-family="system-ui" font-size="16" fill="#b0b0b0" text-anchor="middle">Total</text>\n          <text x="90" y="90" font-family="system-ui" font-size="16" fill="#b0b0b0" text-anchor="middle">Badges</text>\n          \n          \x3c!-- Legendary Badges --\x3e\n          <rect x="210" y="0" width="180" height="120" rx="15" fill="rgba(255,140,0,0.2)" stroke="#ff8c00" stroke-width="2"/>\n          <text x="300" y="40" font-family="system-ui" font-size="36" font-weight="bold" fill="#ff8c00" text-anchor="middle">${s}</text>\n          <text x="300" y="70" font-family="system-ui" font-size="16" fill="#b0b0b0" text-anchor="middle">Legendary</text>\n          <text x="300" y="90" font-family="system-ui" font-size="16" fill="#b0b0b0" text-anchor="middle">Badges</text>\n          \n          \x3c!-- Progress --\x3e\n          <rect x="420" y="0" width="180" height="120" rx="15" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.2)" stroke-width="1"/>\n          <text x="510" y="40" font-family="system-ui" font-size="36" font-weight="bold" fill="${o}" text-anchor="middle">${e.filter(e=>e.progress&&!e.unlockedAt).length}</text>\n          <text x="510" y="70" font-family="system-ui" font-size="16" fill="#b0b0b0" text-anchor="middle">In</text>\n          <text x="510" y="90" font-family="system-ui" font-size="16" fill="#b0b0b0" text-anchor="middle">Progress</text>\n        </g>\n        \n        \x3c!-- Top Badges Section --\x3e\n        ${c.length>0?`\n        <text x="${i/2}" y="350" font-family="system-ui" font-size="24" font-weight="600" fill="${l}" text-anchor="middle">\n          Featured Achievements\n        </text>\n        \n        <g transform="translate(${i/2-150*c.length}, 380)">\n          ${c.map((e,t)=>{const s=300*t,a="legendary"===e.rarity?"#ff8c00":"epic"===e.rarity?"#a335ee":"rare"===e.rarity?"#0070dd":"#ffd700";return`\n            <g transform="translate(${s}, 0)">\n              <rect x="0" y="0" width="280" height="180" rx="15" fill="rgba(255,255,255,0.1)" stroke="${a}" stroke-width="2"/>\n              <text x="140" y="30" font-family="system-ui" font-size="32" text-anchor="middle">${e.icon}</text>\n              <text x="140" y="70" font-family="system-ui" font-size="18" font-weight="600" fill="${a}" text-anchor="middle">${e.name}</text>\n              <text x="140" y="100" font-family="system-ui" font-size="14" fill="#b0b0b0" text-anchor="middle">${e.rarity?.toUpperCase()||"COMMON"}</text>\n              ${e.tier?`<text x="140" y="130" font-family="system-ui" font-size="12" fill="#888" text-anchor="middle">Tier ${e.tier}</text>`:""}\n              <text x="140" y="160" font-family="system-ui" font-size="10" fill="#666" text-anchor="middle">${e.unlockedAt?new Date(e.unlockedAt).toLocaleDateString():""}</text>\n            </g>\n            `}).join("")}\n        </g>\n        `:""}\n        \n        \x3c!-- Footer --\x3e\n        <text x="${i/2}" y="${r-40}" font-family="system-ui" font-size="18" fill="#888" text-anchor="middle">\n          Pixel Journey Ecosystem \u2022 PxMarket\n        </text>\n      </svg>\n    `;return`data:image/svg+xml;base64,${btoa(d)}`}generateInventoryShareImage(e,t,s,a={}){const{width:n,height:i,textColor:r,accentColor:l}={...this.defaultConfig,...a},o=e.sort((e,t)=>{const s={legendary:4,epic:3,rare:2,common:1};return(s[t.rarity]||1)-(s[e.rarity]||1)}).slice(0,6),c=`\n      <svg width="${n}" height="${i}" xmlns="http://www.w3.org/2000/svg">\n        <defs>\n          <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">\n            <stop offset="0%" style="stop-color:#1a1a2e;stop-opacity:1" />\n            <stop offset="50%" style="stop-color:#16213e;stop-opacity:1" />\n            <stop offset="100%" style="stop-color:#0f3460;stop-opacity:1" />\n          </linearGradient>\n          <linearGradient id="titleGradient" x1="0%" y1="0%" x2="100%" y2="0%">\n            <stop offset="0%" style="stop-color:#ffd700;stop-opacity:1" />\n            <stop offset="50%" style="stop-color:#ffed4e;stop-opacity:1" />\n            <stop offset="100%" style="stop-color:#ffd700;stop-opacity:1" />\n          </linearGradient>\n        </defs>\n        \n        \x3c!-- Background --\x3e\n        <rect width="100%" height="100%" fill="url(#bgGradient)"/>\n        \n        \x3c!-- Header --\x3e\n        <text x="${n/2}" y="80" font-family="system-ui, -apple-system, sans-serif" font-size="48" font-weight="bold" fill="url(#titleGradient)" text-anchor="middle">\n          ${s}'s Collection\n        </text>\n        \n        \x3c!-- Stats --\x3e\n        <g transform="translate(${n/2-200}, 130)">\n          <rect x="0" y="0" width="180" height="100" rx="15" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.2)" stroke-width="1"/>\n          <text x="90" y="35" font-family="system-ui" font-size="32" font-weight="bold" fill="${l}" text-anchor="middle">${e.length}</text>\n          <text x="90" y="60" font-family="system-ui" font-size="16" fill="#b0b0b0" text-anchor="middle">Selected</text>\n          <text x="90" y="80" font-family="system-ui" font-size="16" fill="#b0b0b0" text-anchor="middle">Items</text>\n          \n          <rect x="220" y="0" width="180" height="100" rx="15" fill="rgba(0,212,255,0.2)" stroke="#00d4ff" stroke-width="2"/>\n          <text x="310" y="35" font-family="system-ui" font-size="24" font-weight="bold" fill="#00d4ff" text-anchor="middle">${t}</text>\n          <text x="310" y="60" font-family="system-ui" font-size="16" fill="#b0b0b0" text-anchor="middle">Total</text>\n          <text x="310" y="80" font-family="system-ui" font-size="16" fill="#b0b0b0" text-anchor="middle">Value</text>\n        </g>\n        \n        \x3c!-- Items Grid --\x3e\n        ${o.length>0?`\n        <text x="${n/2}" y="290" font-family="system-ui" font-size="24" font-weight="600" fill="${r}" text-anchor="middle">\n          Featured Items\n        </text>\n        \n        <g transform="translate(${n/2-120*Math.min(o.length,3)}, 320)">\n          ${o.slice(0,3).map((e,t)=>{const s=240*t,a="legendary"===e.rarity?"#ff8c00":"epic"===e.rarity?"#a335ee":"rare"===e.rarity?"#0070dd":"#ffd700";return`\n            <g transform="translate(${s}, 0)">\n              <rect x="0" y="0" width="220" height="160" rx="15" fill="rgba(255,255,255,0.1)" stroke="${a}" stroke-width="2"/>\n              <rect x="10" y="10" width="60" height="60" rx="8" fill="rgba(0,0,0,0.3)" stroke="${a}" stroke-width="1"/>\n              <text x="40" y="50" font-family="system-ui" font-size="24" text-anchor="middle">\ud83c\udfa8</text>\n              <text x="90" y="30" font-family="system-ui" font-size="16" font-weight="600" fill="${r}">${e.name.length>15?e.name.substring(0,15)+"...":e.name}</text>\n              <text x="90" y="50" font-family="system-ui" font-size="14" fill="#b0b0b0">${e.collection}</text>\n              <text x="90" y="70" font-family="system-ui" font-size="12" fill="${a}">${e.rarity.toUpperCase()}</text>\n              ${e.quantity>1?`<text x="200" y="30" font-family="system-ui" font-size="14" fill="${l}" text-anchor="end">x${e.quantity}</text>`:""}\n            </g>\n            `}).join("")}\n        </g>\n        \n        ${o.length>3?`\n        <g transform="translate(${n/2-120*Math.min(o.length-3,3)}, 500)">\n          ${o.slice(3,6).map((e,t)=>{const s=240*t,a="legendary"===e.rarity?"#ff8c00":"epic"===e.rarity?"#a335ee":"rare"===e.rarity?"#0070dd":"#ffd700";return`\n            <g transform="translate(${s}, 0)">\n              <rect x="0" y="0" width="220" height="100" rx="15" fill="rgba(255,255,255,0.1)" stroke="${a}" stroke-width="2"/>\n              <rect x="10" y="10" width="40" height="40" rx="6" fill="rgba(0,0,0,0.3)" stroke="${a}" stroke-width="1"/>\n              <text x="30" y="35" font-family="system-ui" font-size="16" text-anchor="middle">\ud83c\udfa8</text>\n              <text x="65" y="25" font-family="system-ui" font-size="14" font-weight="600" fill="${r}">${e.name.length>12?e.name.substring(0,12)+"...":e.name}</text>\n              <text x="65" y="45" font-family="system-ui" font-size="12" fill="${a}">${e.rarity.toUpperCase()}</text>\n              ${e.quantity>1?`<text x="200" y="25" font-family="system-ui" font-size="12" fill="${l}" text-anchor="end">x${e.quantity}</text>`:""}\n            </g>\n            `}).join("")}\n        </g>\n        `:""}\n        `:""}\n        \n        \x3c!-- Footer --\x3e\n        <text x="${n/2}" y="${i-40}" font-family="system-ui" font-size="18" fill="#888" text-anchor="middle">\n          Pixel Journey Ecosystem \u2022 PxMarket\n        </text>\n      </svg>\n    `;return`data:image/svg+xml;base64,${btoa(c)}`}downloadImage(e,t){const s=document.createElement("a");s.download=t,s.href=e,document.body.appendChild(s),s.click(),document.body.removeChild(s)}async convertToPNG(e,t=1200,s=630){return new Promise((a,n)=>{const i=new Image;i.onload=()=>{const e=document.createElement("canvas");e.width=t,e.height=s;const r=e.getContext("2d");r?(r.drawImage(i,0,0,t,s),a(e.toDataURL("image/png"))):n(new Error("Could not get canvas context"))},i.onerror=n,i.src=e})}},es=(e,t,s,a,n)=>Zt.generateAchievementShareImage(e,t,s,a,n),ts=(e,t,s,a)=>Zt.generateInventoryShareImage(e,t,s,a),ss=(e,t)=>Zt.downloadImage(e,t),as=({isOpen:e,onClose:t,title:s,description:a,imageUrl:n,shareUrl:i,defaultShareText:r,type:l="nft",badges:o,totalBadges:c,legendaryCount:d,username:u,selectedItems:h,totalValue:m})=>{const[p,f]=O.useState(!1),[x,g]=O.useState(""),[v,j]=O.useState(!1),{showSuccess:y}=xt(),b=()=>{let e=[];switch(l){case"nft":e=[`\ud83c\udfa8 Check out this amazing NFT: ${s}! \u2728`,`\ud83d\udd25 Discovered this incredible ${s} NFT! \ud83d\ude80`,`\u2728 Look at this stunning ${s}! NFT art at its finest \ud83c\udfad`,`\ud83c\udf1f Found a gem! ${s} is absolutely beautiful \ud83d\udc8e`,`\ud83c\udfaf This ${s} NFT caught my eye! Amazing artwork \ud83c\udfa8`,`\ud83d\udcab Showcasing ${s} - a true masterpiece! \ud83d\uddbc\ufe0f`,`\ud83d\ude80 Blown away by this ${s} NFT! \u2b50`,`\ud83c\udfaa Step right up and see ${s}! Fantastic NFT art \ud83c\udf8a`];break;case"collection":e=[`\ud83c\udfdb\ufe0f Explore the amazing ${s} collection! \ud83c\udfa8`,`\ud83d\udd25 This ${s} collection is absolutely fire! \ud83d\ude80`,`\u2728 Dive into the world of ${s}! Incredible NFT collection \ud83c\udf1f`,`\ud83d\udc8e Discovered this gem of a collection: ${s}! \ud83c\udfad`,`\ud83c\udfaf ${s} collection has some amazing pieces! \ud83d\uddbc\ufe0f`,`\ud83c\udf08 The ${s} collection is a work of art! \u2728`,`\ud83d\ude80 Check out the stunning ${s} collection! \u2b50`,`\ud83c\udfaa Welcome to ${s} - an NFT wonderland! \ud83c\udf8a`];break;case"template":e=[`\ud83c\udfa8 Check out this ${s} template! Perfect for collectors \u2728`,`\ud83d\udd25 This ${s} template is incredible! \ud83d\ude80`,`\u2728 Found an amazing ${s} template! \ud83c\udfad`,`\ud83c\udf1f ${s} template - a collector's dream! \ud83d\udc8e`,`\ud83c\udfaf This ${s} template caught my attention! \ud83c\udfa8`,`\ud83d\udcab Showcasing the ${s} template! \ud83d\uddbc\ufe0f`,`\ud83d\ude80 Amazing ${s} template available! \u2b50`,`\ud83c\udfaa Don't miss this ${s} template! \ud83c\udf8a`];break;case"achievement":e=["\ud83c\udfc6 Just unlocked some amazing achievements! \ud83c\udf89","\ud83d\udd25 Check out my gaming achievements! \ud83d\ude80","\u2728 Proud of my latest achievements! \ud83c\udfad","\ud83c\udf1f Achievement unlocked! Gaming milestones reached \ud83d\udc8e","\ud83c\udfaf Showcasing my gaming achievements! \ud83c\udfa8","\ud83d\udcab Level up! New achievements earned! \ud83d\uddbc\ufe0f","\ud83d\ude80 Gaming achievements on display! \u2b50","\ud83c\udfaa Celebrating my gaming milestones! \ud83c\udf8a"];break;default:e=[r]}return e[Math.floor(Math.random()*e.length)]},[N,w]=O.useState(()=>r||b()),k=r||N,_=i||window.location.href;if(!e)return null;const S=async e=>{try{await navigator.clipboard.writeText(e),f(!0),setTimeout(()=>f(!1),2e3)}catch(t){De.error("Failed to copy to clipboard","ShareModal",t,{type:l,shareText:x})}};return Se.jsx("div",{className:"social-share-overlay",onClick:t,children:Se.jsxs("div",{className:"social-share-modal",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"share-header",children:[Se.jsxs("h3",{children:["Share ","collection"===l?"Collection":"template"===l?"Template":"achievement"===l?"Achievement":"NFT"]}),Se.jsx("button",{className:"close-btn",onClick:t,children:Se.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),Se.jsxs("div",{className:"share-content",children:[n&&Se.jsxs("div",{className:"nft-preview share-modal-preview",children:[Se.jsx("img",{src:n,alt:s,className:"nft-image"}),Se.jsxs("div",{className:"nft-info",children:[Se.jsx("h4",{children:s}),a&&Se.jsx("p",{children:a})]})]}),Se.jsxs("div",{className:"share-text-section",children:[Se.jsxs("div",{className:"share-text-header",children:[Se.jsx("label",{htmlFor:"share-text",children:"Customize your message:"}),!r&&Se.jsx("button",{className:"refresh-message-btn",onClick:()=>{r||w(b())},title:"Generate new random message",children:Se.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),Se.jsx("textarea",{id:"share-text",value:x,onChange:e=>g(e.target.value),placeholder:k,className:"share-textarea",rows:3})]}),Se.jsxs("div",{className:"share-url-section",children:[Se.jsx("label",{children:"Share URL:"}),Se.jsxs("div",{className:"url-input-container",children:[Se.jsx("input",{type:"text",value:_,readOnly:!0,className:"url-input"}),Se.jsxs("button",{className:"copy-btn "+(p?"copied":""),onClick:()=>S(_),children:[p?Se.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):Se.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),Se.jsx("path",{d:"M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"})]}),p?"Copied!":"Copy"]})]})]}),Se.jsxs("div",{className:"social-buttons",children:[Se.jsxs("button",{className:"social-btn twitter",onClick:()=>{const e="collection"===l?"NFTCollection,WAX,PixelJourney":"template"===l?"NFTTemplate,WAX,PixelJourney":"achievement"===l?"Achievement,Gaming,PixelJourney":"NFT,WAX,PixelJourney",t=`https://twitter.com/intent/tweet?text=${encodeURIComponent(x||k)}&url=${encodeURIComponent(_)}&hashtags=${e}`;window.open(t,"_blank","width=550,height=420")},children:[Se.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})}),"Twitter"]}),Se.jsxs("button",{className:"social-btn facebook",onClick:()=>{const e=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(_)}`;window.open(e,"_blank","width=550,height=420")},children:[Se.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]}),Se.jsxs("button",{className:"social-btn reddit",onClick:()=>{const e=x||k,t=`https://reddit.com/submit?url=${encodeURIComponent(_)}&title=${encodeURIComponent(e)}`;window.open(t,"_blank","width=550,height=420")},children:[Se.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"})}),"Reddit"]}),Se.jsxs("button",{className:"social-btn discord",onClick:()=>{S(`${x||k}\n${_}`),y("Share text copied to clipboard! You can now paste it in Discord.","Copied to Clipboard")},children:[Se.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.0190 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1568 2.4189Z"})}),"Discord"]}),Se.jsxs("button",{className:"social-btn telegram",onClick:()=>{const e=x||k,t=`https://t.me/share/url?url=${encodeURIComponent(_)}&text=${encodeURIComponent(e)}`;window.open(t,"_blank","width=550,height=420")},children:[Se.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})}),"Telegram"]}),Se.jsxs("button",{className:"social-btn email",onClick:()=>{const e=`${x||k}\n\nView it here: ${_}`,t=`mailto:?subject=${encodeURIComponent(`Check out: ${s}`)}&body=${encodeURIComponent(e)}`;window.location.href=t},children:[Se.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Email"]})]}),("achievement"===l||"inventory"===l)&&u&&Se.jsxs("div",{className:"share-image-section",children:[Se.jsx("h4",{children:"Generate Share Image"}),Se.jsxs("div",{className:"image-buttons",children:[Se.jsx("button",{className:"generate-btn svg",onClick:async()=>{if(u)try{let e,t;if(j(!0),"achievement"===l&&o&&void 0!==c&&void 0!==d)e=es(o,c,d,u),t=`${u}-achievements-${Date.now()}.svg`;else{if("inventory"!==l||!h||!m)return;e=ts(h,m,u),t=`${u}-inventory-${Date.now()}.svg`}ss(e,t)}catch(e){De.error("Error generating share image","ShareModal",e,{type:l,username:u})}finally{j(!1)}},disabled:v,children:v?"Generating...":"Download SVG"}),Se.jsx("button",{className:"generate-btn png",onClick:async()=>{if(u)try{let e,t;if(j(!0),"achievement"===l&&o&&void 0!==c&&void 0!==d)e=es(o,c,d,u),t=`${u}-achievements-${Date.now()}.png`;else{if("inventory"!==l||!h||!m)return;e=ts(h,m,u),t=`${u}-inventory-${Date.now()}.png`}const s=await((e,t,s)=>Zt.convertToPNG(e,t,s))(e);ss(s,t)}catch(e){De.error("Error generating PNG share image","ShareModal",e,{type:l,username:u})}finally{j(!1)}},disabled:v,children:v?"Generating...":"Download PNG"})]})]})]})]})})};const ns=new class{constructor(){M(this,"CHAT_ACCOUNT","chat.pxj"),M(this,"PXJ_CONTRACT","pixeljourney"),M(this,"PXJ_SYMBOL","PXJ"),M(this,"BASE_COST_PIXAL_HOLDER",100),M(this,"BASE_COST_NON_HOLDER",1e4),M(this,"SPONSORED_COST_PIXAL_HOLDER",1e4),M(this,"SPONSORED_COST_NON_HOLDER",25e3),M(this,"MIN_MESSAGE_COST",100),M(this,"messageCache",new Map),M(this,"userRateLimit",new Map),M(this,"blacklistedAccounts",new Set),M(this,"moderationSettings",{blacklistedAccounts:[],bannedWords:["spam","scam","hack","phishing"],trustedDomains:["wax.io","atomichub.io","wax.bloks.io","pixeljourney.io"],maxMessageLength:240,minTimeBetweenMessages:5}),M(this,"userLastMessageTime",new Map)}async calculateMessageCost(e,t,s=!1){const a=e.length,n=await this.checkPixalPFPOwnership(t);if(s){const e=n?this.SPONSORED_COST_PIXAL_HOLDER:this.SPONSORED_COST_NON_HOLDER;return{baseCost:e,characterCost:0,totalCost:e,hasPixalPFP:n,discount:n?60:0,isSponsored:!0}}const i=n?this.BASE_COST_PIXAL_HOLDER:this.BASE_COST_NON_HOLDER;let r=1;a>50&&(r=1+(a-50)/50);const l=Math.floor(i*(r-1)),o=Math.max(this.MIN_MESSAGE_COST,i+l),c=n?5e4:o;return{baseCost:i,characterCost:l,totalCost:n?Math.min(o,c):o,hasPixalPFP:n,discount:n?99:0,isSponsored:!1}}async checkPixalPFPOwnership(e){try{const t=await dt.getUserInventory(e);if(!t||0===t.length)return!1;return t.some(e=>"781515"===e.template_id)}catch(t){return Le.logError("ChatService.checkPixalPFPOwnership",t,{userAccount:e}),!1}}async sendMessage(e,t,s,a=!1){this.validateMessageForSending(e,t);let n=(await this.calculateMessageCost(e,t)).totalCost,i=e;if(a){n=await this.checkPixalPFPOwnership(t)?this.SPONSORED_COST_PIXAL_HOLDER:this.SPONSORED_COST_NON_HOLDER,i=`::sponsored:: ${e}`}s&&(i=`::col:${s}:: ${i}`),this.userLastMessageTime.set(t,Date.now());const r={account:this.PXJ_CONTRACT,name:"transfer",authorization:[{actor:t,permission:"active"}],data:{from:t,to:this.CHAT_ACCOUNT,quantity:`${n.toFixed(8)} ${this.PXJ_SYMBOL}`,memo:i}};try{const e=await Yt.transact([r]);let s=null;if(e&&(s=e.transaction_id||e.id||e.processed?.id||e.processed?.transaction_id||e.response&&e.response.transaction_id||e.transaction&&e.transaction.id),s)return this.updateRateLimit(t),this.messageCache.clear(),s;throw De.warn("Unexpected transaction result format","ChatService.sendMessage",{result:e}),new Error("Transaction completed but transaction ID not found in response")}catch(l){throw l instanceof Error&&l.message.includes("transaction ID not found")&&De.warn("Transaction may have succeeded but response format was unexpected","ChatService.sendMessage",{error:l}),Le.logError("ChatService.sendMessage",l,{messageLength:e.length}),new Error(`Failed to send message: ${l instanceof Error?l.message:"Unknown error"}`)}}async getMessages(e={},t=50,s=0){const a=JSON.stringify({filters:e,limit:t,offset:s});if(this.messageCache.has(a))return this.messageCache.get(a);try{const n=await dt.getAccountTransfers(this.CHAT_ACCOUNT,this.PXJ_CONTRACT,this.PXJ_SYMBOL,t,s);if(!n||0===n.length)return[];const i=[];for(const t of n){const s=this.parseTransferToMessage(t);s&&this.applyFilters(s,e)&&!this.isMessageBlockedByModeration(s)&&i.push(s)}return i.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()),this.messageCache.set(a,i),i}catch(n){return Le.logError("ChatService.loadMessages",n),[]}}parseTransferToMessage(e){try{const t=String(e.memo||""),s=e.from,a=e.quantity,n=e.timestamp,i=e.transaction_id;if(this.blacklistedAccounts.has(s))return null;let r,l=t,o=!1,c="normal";if(t.startsWith("::sponsored::")){const e=parseFloat(a.split(" ")[0]);e>=1e3?(o=!0,c="sponsored",l=t.replace("::sponsored::","").trim()):l=t.replace("::sponsored::","").trim()}const d=t.match(/::col:([^:]+)::/);d&&(r=d[1],l=l.replace(d[0],"").trim());return parseFloat(a.split(" ")[0])>=10&&(c="premium"),{id:`${i}_${s}`,sender:s,message:l,timestamp:n,pxjAmount:a,transactionId:i,isSponsored:o,collectionTag:r,messageType:c,characterCount:l.length}}catch(t){const s=t instanceof Error?t:new Error("Failed to parse transfer to message");return Le.logError("ChatService.parseTransferToMessage",s,{transfer:e?.transaction_id||"unknown"}),null}}applyFilters(e,t){if(t.collection&&e.collectionTag!==t.collection)return!1;if(t.minPxjAmount){if(parseFloat(e.pxjAmount.split(" ")[0])<t.minPxjAmount)return!1}if(t.maxPxjAmount){if(parseFloat(e.pxjAmount.split(" ")[0])>t.maxPxjAmount)return!1}return(!t.hideSpam||!this.isSpamMessage(e))&&!(t.showOnlySponsored&&!e.isSponsored)}isSpamMessage(e){const t=e.message.toLowerCase();return this.moderationSettings.bannedWords.some(e=>t.includes(e))}updateRateLimit(e){const t=Date.now(),s=this.userRateLimit.get(e)||[];s.push(t),this.userRateLimit.set(e,s)}blacklistAccount(e){this.blacklistedAccounts.add(e)}unblacklistAccount(e){this.blacklistedAccounts.delete(e)}clearCache(){this.messageCache.clear()}async getUserAvatar(e){try{const t=(await dt.getUserInventory(e)).filter(e=>"pixeljourney"===e.collection&&"Pixal"===e.schema);if(t&&t.length>0){const e=t[0];if(e.traits&&e.traits.img&&"string"==typeof e.traits.img)return`${He.IPFS.GATEWAYS[0]}${e.traits.img.startsWith("Qm"),e.traits.img}`}return`${He.AVATAR.DICEBEAR}?seed=${e}`}catch(t){const s=t instanceof Error?t:new Error("Failed to get user avatar");return Le.logError("ChatService.getUserAvatar",s,{userAccount:e}),`${He.AVATAR.DICEBEAR}?seed=${e}`}}validateMessageForSending(e,t){if(this.moderationSettings.blacklistedAccounts.includes(t))throw new Error("Account is blacklisted from sending messages.");if(e.length>this.moderationSettings.maxMessageLength)throw new Error(`Message too long. Maximum ${this.moderationSettings.maxMessageLength} characters allowed.`);const s=e.toLowerCase();for(const n of this.moderationSettings.bannedWords)if(s.includes(n.toLowerCase()))throw new Error("Message contains prohibited content.");const a=this.userLastMessageTime.get(t);if(a){const e=(Date.now()-a)/1e3;if(e<this.moderationSettings.minTimeBetweenMessages)throw new Error(`Please wait ${this.moderationSettings.minTimeBetweenMessages-Math.floor(e)} more seconds before sending another message.`)}this.verifyLinksInMessage(e)}isMessageBlockedByModeration(e){if(this.moderationSettings.blacklistedAccounts.includes(e.sender))return!0;const t=e.message.toLowerCase();for(const s of this.moderationSettings.bannedWords)if(t.includes(s.toLowerCase()))return!0;return!1}verifyLinksInMessage(e){const t=e.match(/(https?:\/\/[^\s]+)/g);if(t)for(const a of t)try{const e=new URL(a).hostname.toLowerCase();if(!this.moderationSettings.trustedDomains.some(t=>e===t.toLowerCase()||e.endsWith("."+t.toLowerCase())))throw new Error(`Links to ${e} are not allowed. Only trusted domains are permitted.`)}catch(s){if(s instanceof Error&&s.message.includes("not allowed"))throw s;throw new Error("Invalid URL detected in message.")}}updateModerationSettings(e){this.moderationSettings={...this.moderationSettings,...e}}getModerationSettings(){return{...this.moderationSettings}}},is=["strong","em","b","i","u","br","p","span"],rs={span:["class"],p:["class"]},ls=({isOpen:e,onClose:t,nft:s})=>{const{account:a,session:n}=Ie(),{showSuccess:i,showError:r}=xt(),l=O.useRef(null),[o,c]=O.useState([]),[d,u]=O.useState(""),[h,m]=O.useState(!1),[p,f]=O.useState(!1),[x,g]=O.useState(null),[v,j]=O.useState(!1),y=`listing:${s.sale_id||s.asset_id}`,b=O.useCallback(()=>{l.current?.scrollIntoView({behavior:"smooth"})},[]),N=O.useCallback(async(e=!1)=>{if(e||!(o.length>0)){m(!0);try{const e=await ns.getMessages({collection:y,hideSpam:!0},50);c(e)}catch(t){console.error("Error loading listing messages:",t),r("Failed to load messages")}finally{m(!1)}}},[y,o.length,r]),w=O.useCallback(async()=>{if(a&&d.trim())try{const e=await ns.calculateMessageCost(d,a);g(e)}catch(e){console.error("Error calculating cost:",e)}else g(null)},[a,d]),k=async()=>{if(a&&d.trim()&&n)if(s.seller)if(s.seller!==Gt.safeGetActor(n)){f(!0);try{const e=`${y} :${s.seller}: ${d.trim()}`,t=await ns.sendMessage(e,a);i("Message sent!",`Transaction: ${t.substring(0,8)}...`),u(""),g(null),setTimeout(()=>{N(!0)},2e3)}catch(e){console.error("Error sending message:",e);const t=e instanceof Error?e.message:"Unknown error";t.includes("transaction ID not found")?r("Message Status Unclear","Your message may have been sent successfully. Please check your transaction history or refresh the chat to confirm."):r("Failed to send message",t)}finally{f(!1)}}else r("You cannot message yourself");else r("Seller information not available");else r("Please connect your wallet to send messages")};return O.useEffect(()=>{e&&N()},[e,N]),O.useEffect(()=>{const e=setTimeout(w,300);return()=>clearTimeout(e)},[w]),O.useEffect(()=>{b()},[o,b]),O.useEffect(()=>{const s=e=>{"Escape"===e.key&&t()};if(e)return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[e,t]),e?Se.jsx("div",{className:"listing-chat-modal-backdrop",onClick:t,children:Se.jsxs("div",{className:"listing-chat-modal",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"listing-chat-header",children:[Se.jsx("div",{className:"listing-chat-header-left",children:Se.jsxs("div",{className:"listing-info",children:[Se.jsx("img",{src:s.image||"/placeholder-nft.png",alt:s.name,className:"listing-nft-image"}),Se.jsxs("div",{className:"listing-details",children:[Se.jsx("h3",{className:"listing-title",children:s.name}),Se.jsxs("p",{className:"listing-seller",children:["Seller: ",s.seller]}),s.price&&Se.jsx("p",{className:"listing-price",children:s.price})]})]})}),Se.jsxs("div",{className:"listing-chat-header-right",children:[Se.jsx("button",{className:"chat_btn chat_btn--icon",onClick:()=>N(!0),disabled:h,title:"Refresh messages",children:Se.jsx("span",{className:"chat_refresh-icon "+(h?"chat_refresh-icon--spinning":""),children:"\ud83d\udd04"})}),Se.jsx("button",{className:"chat_btn chat_btn--icon",onClick:t,title:"Close chat",children:"\u2715"})]})]}),Se.jsxs("div",{className:"listing-chat-messages",children:[h&&0===o.length?Se.jsx("div",{className:"chat_loading",children:"Loading messages..."}):0===o.length?Se.jsxs("div",{className:"chat_empty",children:[Se.jsx("p",{children:"No messages yet for this listing."}),Se.jsx("p",{children:"Be the first to start the conversation!"})]}):o.map(e=>Se.jsxs("div",{className:`chat_message chat_message--${e.messageType||"normal"}`,children:[Se.jsxs("div",{className:"chat_message-header",children:[Se.jsx("div",{className:"chat_message-avatar",children:Se.jsx("img",{src:`https://wax.atomichub.io/v1/accounts/${e.sender}/avatar`,alt:e.sender,className:"chat_avatar",onError:e=>{e.target.src="/default-avatar.png"}})}),Se.jsxs("div",{className:"chat_message-info",children:[Se.jsx("span",{className:"chat_sender",children:e.sender}),Se.jsx("span",{className:"chat_timestamp",children:new Date(e.timestamp).toLocaleString()}),e.pxjAmount&&Se.jsx("span",{className:"chat_amount",children:e.pxjAmount})]}),Se.jsx("div",{className:"chat_message-actions",children:e.transactionId&&Se.jsx("a",{href:`https://waxblock.io/transaction/${e.transactionId}`,target:"_blank",rel:"noopener noreferrer",className:"chat_tx-link",title:"View transaction",children:"\ud83d\udd17"})})]}),Se.jsx("div",{className:"chat_message-content",dangerouslySetInnerHTML:{__html:S(e.message)}})]},e.id)),Se.jsx("div",{ref:l})]}),Se.jsxs("div",{className:"listing-chat-input-section",children:[x&&Se.jsxs("div",{className:"chat_cost-info",children:[Se.jsxs("div",{className:"chat_cost-display",children:[Se.jsxs("span",{children:["Message Cost: ",Se.jsxs("span",{className:"chat_cost-amount",children:[(x.totalCost/1e4).toFixed(4)," PXJ"]})]}),Se.jsx("button",{className:"chat_info-btn",onClick:()=>j(!v),title:"View price breakdown",children:"\u2139\ufe0f"})]}),x.hasPixalPFP&&Se.jsxs("span",{className:"chat_discount",children:["Pixal PFP Discount: ",x.discount,"%"]}),Se.jsxs("span",{className:"chat_char-count",children:[d.length,"/240 chars"]}),v&&Se.jsx("div",{className:"chat_price-tooltip",children:Se.jsxs("div",{className:"chat_price-content",children:[Se.jsx("h4",{children:"Price Breakdown"}),Se.jsxs("div",{className:"price-factor",children:[Se.jsx("span",{children:"Base Cost:"}),Se.jsxs("span",{children:[(x.baseCost/1e4).toFixed(4)," PXJ"]})]}),Se.jsxs("div",{className:"price-factor",children:[Se.jsxs("span",{children:["Character Cost (",d.length," chars):"]}),Se.jsxs("span",{children:[((x.totalCost-x.baseCost)/1e4).toFixed(4)," PXJ"]})]}),x.hasPixalPFP&&Se.jsxs("div",{className:"price-factor discount",children:[Se.jsxs("span",{children:["Pixal PFP Discount (",x.discount,"%):"]}),Se.jsxs("span",{children:["-",((x.baseCost+(x.totalCost-x.baseCost))*(x.discount/100)/1e4).toFixed(4)," PXJ"]})]}),Se.jsxs("div",{className:"price-factor total",children:[Se.jsx("span",{children:"Total:"}),Se.jsxs("span",{children:[(x.totalCost/1e4).toFixed(4)," PXJ"]})]})]})})]}),Se.jsxs("div",{className:"listing-chat-input-wrapper",children:[Se.jsx("textarea",{className:"listing-chat-input",value:d,onChange:e=>u(e.target.value),placeholder:`Send a message about ${s.name}...`,maxLength:240,rows:3,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),k())}}),Se.jsx("button",{className:"listing-chat-send-btn",onClick:k,disabled:!d.trim()||p||!a,children:p?"\u23f3":"\ud83d\udce4"})]}),!a&&Se.jsx("div",{className:"listing-chat-connect-notice",children:"Please connect your wallet to send messages"})]})]})}):null},os=e=>{const t=He.IPFS.GATEWAYS;return`${t[Math.floor(Math.random()*t.length)]}${e}`},cs=e=>{if(!e)return;if(e.image&&"string"==typeof e.image)return e.image;let t;return e.data&&"object"==typeof e.data&&"img"in e.data&&(t=e.data.img),t||(t=e.template?.immutable_data?.img||e.img),t&&"string"==typeof t?t.startsWith("http")?t:t.startsWith("Qm")?os(t):t:void 0},ds=e=>{if(!e)return null;if(e.video&&"string"==typeof e.video)return e.video;let t;return e.data&&"object"==typeof e.data&&"video"in e.data&&(t=e.data.video),t||(t=e.template?.immutable_data?.video||e.video),t&&"string"==typeof t?t.startsWith("http")?t:t.startsWith("Qm")?os(t):t:null},us=e=>{if(!e)return;const t=e.immutable_data?.img||e.data?.img||e.img||e.template?.immutable_data?.img;return t&&"string"==typeof t?t.startsWith("http")?t:t.startsWith("Qm")?os(t):t:void 0},hs=e=>{if(!e)return null;const t=e.immutable_data?.video||e.data?.video||e.video||e.template?.immutable_data?.video;return t&&"string"==typeof t?t.startsWith("http")?t:t.startsWith("Qm")?os(t):t:null},ms=e=>{const t=e?.assets?.[0];return cs(t)},ps=e=>{const t=e?.assets?.[0];return ds(t)},fs=({nft:e,isOpen:t,onClose:s,usdPrice:a})=>{const n=B(),{settings:i}=st(),[r,l]=O.useState("$0.00"),[o,c]=O.useState(!1),[d,u]=O.useState(!1),[h,m]=O.useState(!1),[p,f]=O.useState(!1),[x,g]=O.useState(!1),[v,j]=O.useState(null),{isConnected:y,purchaseNFT:b,login:N}=Ie(),{showSuccess:k,showError:_,showWarning:S}=xt(),[C,A]=O.useState(null),[P,T]=O.useState([]),[E,F]=O.useState([]);O.useEffect(()=>{(async()=>{try{const e=Yt.getSession();j(e?{...e,actor:Gt.safeGetActor(e)}:null)}catch(e){De.info("No active session","NFTDetailsModal",e)}})()},[]),O.useEffect(()=>{t&&e&&(I(),$(),L())},[t,e]);const I=async()=>{if(e?.collection)try{const t=await dt.getCollectionStats(e.collection);t&&A({floorPrice:t.floor_price||"0",volume24h:t.volume_24h||"0",totalSales:t.sales||"0",avgPrice:t.averagePrice||"0"})}catch(t){De.error("Error fetching collection stats","NFTDetailsModal",t)}},$=async()=>{if(e?.collection)try{const t=await dt.getSales({collection_name:e.collection,state:"3",limit:5,sort:"updated",order:"desc"});if(t.success&&t.data){const e=t.data.map(e=>({type:"sale",price:`${(parseFloat(e.price?.amount||"0")/Math.pow(10,e.price?.token_precision||8)).toFixed(4)} ${e.price?.token_symbol||"WAX"}`,time:new Date(1e3*parseInt(e.updated_at_time)).toLocaleString()}));T(e)}}catch(t){De.error("Error fetching recent activity","NFTDetailsModal",t)}},L=async()=>{if(e?.collection)try{const t=await dt.getCollectionPriceHistory(e.collection,"7d");F(t)}catch(t){De.error("Error fetching price history","NFTDetailsModal",t),F([])}};O.useEffect(()=>{e&&!a&&e.price&&Ye.convertWaxToUSDAsync(e.price).then(l)},[e,a]),O.useEffect(()=>{(async()=>{if(e){const t=Ze.getCart();c(t.some(t=>t.nft.asset_id===e.asset_id));const s=await wt.getWatchlist();u(s.some(t=>t.nft.asset_id===e.asset_id))}})()},[e]),O.useEffect(()=>{const t=()=>{if(e){const t=Ze.getCart();c(t.some(t=>t.nft.asset_id===e.asset_id))}};Ze.addListener(t);const s=wt.subscribe(async()=>{if(e){const t=await wt.getWatchlist();u(t.some(t=>t.nft.asset_id===e.asset_id))}});return()=>{Ze.removeListener(t),s()}},[e]);const M=()=>{e&&(s(),n(`/assets/${e.asset_id}`))};if(!t||!e)return null;return Se.jsxs("div",{className:"modal-backdrop",onClick:e=>{e.target===e.currentTarget&&s()},children:[Se.jsxs("div",{className:"modal-content nft-details-modal",children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsx("h2",{className:"modal-title",children:e.name}),Se.jsx("button",{className:"modal-close",onClick:s,children:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Se.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Se.jsx("div",{className:"modal-body",children:Se.jsx("div",{className:"nft-details-container",children:Se.jsxs("div",{className:"nft-details-top",children:[Se.jsx("div",{className:"nft-media-section",children:Se.jsxs("div",{className:"nft-media-container",children:[Se.jsx(Qt,{imageUrl:cs(e),videoUrl:ds(e),alt:e.name,className:"nft-media",controls:!0,loop:!0,muted:!0,enableAnimations:i.enableAnimatedNFTs}),(e.template_mint||e.max_supply)&&Se.jsxs("div",{className:"mint-info",children:["Mint: ",void 0!==e.template_mint&&null!==e.template_mint?e.template_mint:"?"," / ","0"===e.max_supply||void 0===e.max_supply||null===e.max_supply?"\u221e":e.max_supply]})]})}),Se.jsxs("div",{className:"nft-info-section",children:[Se.jsxs("div",{className:"info-card",children:[Se.jsx("h3",{className:"info-title",children:"Basic Information"}),Se.jsxs("div",{className:"info-grid",children:[Se.jsxs("div",{className:"info-item",children:[Se.jsx("span",{className:"info-label",children:"Collection:"}),Se.jsx("span",{className:"info-value info-link",onClick:()=>{e&&(s(),n(`/collections/${e.collection}`))},title:"View collection on AtomicHub",children:e.collection})]}),Se.jsxs("div",{className:"info-item",children:[Se.jsx("span",{className:"info-label",children:"Schema:"}),Se.jsx("span",{className:"info-value info-link",onClick:()=>{e&&window.open(`https://wax.atomichub.io/explorer/schema/wax-mainnet/${e.collection}/${e.schema}`,"_blank")},title:"View schema on AtomicHub",children:e.schema})]}),Se.jsxs("div",{className:"info-item",children:[Se.jsx("span",{className:"info-label",children:"Asset ID:"}),Se.jsx("span",{className:"info-value info-link",onClick:M,title:"View asset on AtomicHub",children:e.asset_id})]}),Se.jsxs("div",{className:"info-item",children:[Se.jsx("span",{className:"info-label",children:"Seller:"}),Se.jsx("span",{className:"info-value info-link",onClick:()=>{e&&e.seller&&(s(),n(`/user-profile-lookup?user=${encodeURIComponent(e.seller)}`))},title:"View seller profile",children:e.seller})]})]})]}),Se.jsxs("div",{className:"info-card",children:[Se.jsx("h3",{className:"info-title",children:"Price Information"}),Se.jsxs("div",{className:"price-display",children:[Se.jsx("div",{className:"price-main",children:e.price}),Se.jsx("div",{className:"price-usd",children:a||r})]})]}),e.traits&&Object.keys(e.traits).length>0&&Se.jsxs("div",{className:"info-card",children:[Se.jsx("h3",{className:"info-title",children:"Attributes"}),Se.jsx("div",{className:"attributes-grid",children:(R=e.traits,Object.entries(R).filter(([e,t])=>"img"!==e&&"video"!==e&&"name"!==e&&null!=t)).map(([e,t])=>Se.jsxs("div",{className:"attribute-item",children:[Se.jsx("div",{className:"attribute-label",children:e}),Se.jsx("div",{className:"attribute-value",children:String(t)})]},e))})]}),Se.jsxs("div",{className:"info-card",children:[Se.jsx("h3",{className:"info-title",children:"Statistics"}),Se.jsx("div",{className:"nft-statistics",children:Se.jsxs("div",{className:"stats-grid",children:[Se.jsxs("div",{className:"stat-item",children:[Se.jsx("span",{className:"stat-label",children:"Floor Price"}),Se.jsx("span",{className:"stat-value",children:C?`${parseFloat(C.floorPrice).toFixed(4)} WAX`:"Loading..."})]}),Se.jsxs("div",{className:"stat-item",children:[Se.jsx("span",{className:"stat-label",children:"24h Volume"}),Se.jsx("span",{className:"stat-value",children:C?`${parseFloat(C.volume24h).toFixed(2)} WAX`:"Loading..."})]}),Se.jsxs("div",{className:"stat-item",children:[Se.jsx("span",{className:"stat-label",children:"Total Sales"}),Se.jsx("span",{className:"stat-value",children:C?C.totalSales:"Loading..."})]}),Se.jsxs("div",{className:"stat-item",children:[Se.jsx("span",{className:"stat-label",children:"Avg Sale Price"}),Se.jsx("span",{className:"stat-value",children:C?`${parseFloat(C.avgPrice).toFixed(4)} WAX`:"Loading..."})]})]})})]})]}),Se.jsx("div",{className:"nft-details-bottom",children:Se.jsxs("div",{className:"info-card",children:[Se.jsx("h3",{className:"info-title",children:"Price History & Activity"}),Se.jsxs("div",{className:"nft-statistics",children:[Se.jsxs("div",{className:"price-history-section",children:[Se.jsx("h4",{className:"price-history-title",children:"Recent Price History"}),Se.jsx("div",{className:"price-history-chart",children:E.length>0?Se.jsxs("div",{className:"chart-placeholder",children:[Se.jsxs("svg",{viewBox:"0 0 400 120",className:"price-chart",children:[[0,1,2,3,4].map(e=>Se.jsx("line",{x1:"20",y1:20+20*e,x2:"380",y2:20+20*e,stroke:"var(--border-color)",strokeWidth:"1",opacity:"0.3"},`grid-${e}`)),E.length>1&&Se.jsx("polyline",{fill:"none",stroke:"var(--accent-color)",strokeWidth:"2",points:E.map((e,t)=>{const s=20+t/(E.length-1)*360,a=Math.max(...E.map(e=>e.price)),n=Math.min(...E.map(e=>e.price)),i=a-n||1;return`${s},${100-(e.price-n)/i*60}`}).join(" ")}),E.map((e,t)=>{const s=20+t/(E.length-1)*360,a=Math.max(...E.map(e=>e.price)),n=Math.min(...E.map(e=>e.price)),i=a-n||1,r=100-(e.price-n)/i*60;return Se.jsx("circle",{cx:s,cy:r,r:"3",fill:"var(--accent-color)"},t)})]}),Se.jsxs("div",{className:"chart-labels",children:[Se.jsx("span",{children:E.length>0?new Date(E[0].timestamp).toLocaleDateString():"7d ago"}),Se.jsx("span",{children:E.length>0?new Date(E[E.length-1].timestamp).toLocaleDateString():"Now"})]})]}):Se.jsx("div",{className:"chart-placeholder",children:Se.jsx("div",{className:"loading-chart",children:"Loading price history..."})})})]}),Se.jsxs("div",{className:"trading-activity",children:[Se.jsx("h4",{className:"activity-title",children:"Recent Activity"}),Se.jsx("div",{className:"activity-list",children:P.length>0?P.map((e,t)=>Se.jsxs("div",{className:"activity-item",children:[Se.jsx("span",{className:`activity-type ${e.type}`,children:"sale"===e.type?"Sale":"Listed"}),Se.jsx("span",{className:"activity-price",children:e.price}),Se.jsx("span",{className:"activity-time",children:e.time})]},t)):Se.jsxs("div",{className:"activity-item",children:[Se.jsx("span",{className:"activity-type",children:"Loading..."}),Se.jsx("span",{className:"activity-price",children:"-"}),Se.jsx("span",{className:"activity-time",children:"-"})]})})]})]})]})})]})})}),Se.jsxs("div",{className:"modal-footer",children:[Se.jsx("div",{className:"modal-actions-left",children:e.sale_id?Se.jsxs(Se.Fragment,{children:[Se.jsxs("button",{className:"listing-btn-buy-now",onClick:async()=>{if(!y)try{await N()}catch(t){return void De.error("Login failed","NFTDetailsModal",t)}if(e.sale_id)if(e.sale_id&&e.price)try{const t=e.price.replace(" WAX","");await b(e.sale_id,t),k("Purchase successful!"),s()}catch(t){De.error("Purchase failed","NFTDetailsModal",t),_("Purchase failed. Please try again.")}else _("NFT is not available for purchase");else S("This NFT is not for sale")},title:`Buy now for ${e.price} WAX`,children:[Se.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",children:Se.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Buy Now"]}),Se.jsxs("button",{className:"btn-secondary",onClick:()=>f(!0),title:"Make Offer",children:[Se.jsx("svg",{viewBox:"0 -8 72 72",fill:"currentColor",style:{width:"24px",height:"24px",marginRight:"8px"},children:Se.jsx("path",{d:"M64,12.78v17s-3.63.71-4.38.81-3.08.85-4.78-.78C52.22,27.25,42.93,18,42.93,18a3.54,3.54,0,0,0-4.18-.21c-2.36,1.24-5.87,3.07-7.33,3.78a3.37,3.37,0,0,1-5.06-2.64,3.44,3.44,0,0,1,2.1-3c3.33-2,10.36-6,13.29-7.52,1.78-1,3.06-1,5.51,1C50.27,12,53,14.27,53,14.27a2.75,2.75,0,0,0,2.26.43C58.63,14,64,12.78,64,12.78ZM27,41.5a3,3,0,0,0-3.55-4.09,3.07,3.07,0,0,0-.64-3,3.13,3.13,0,0,0-3-.75,3.07,3.07,0,0,0-.65-3,3.38,3.38,0,0,0-4.72.13c-1.38,1.32-2.27,3.72-1,5.14s2.64.55,3.72.3c-.3,1.07-1.2,2.07-.09,3.47s2.64.55,3.72.3c-.3,1.07-1.16,2.16-.1,3.46s2.84.61,4,.25c-.45,1.15-1.41,2.39-.18,3.79s4.08.75,5.47-.58a3.32,3.32,0,0,0,.3-4.68A3.18,3.18,0,0,0,27,41.5Zm25.35-8.82L41.62,22a3.53,3.53,0,0,0-3.77-.68c-1.5.66-3.43,1.56-4.89,2.24a8.15,8.15,0,0,1-3.29,1.1,5.59,5.59,0,0,1-3-10.34C29,12.73,34.09,10,34.09,10a6.46,6.46,0,0,0-5-2C25.67,8,18.51,12.7,18.51,12.7a5.61,5.61,0,0,1-4.93.13L8,10.89v19.4s1.59.46,3,1a6.33,6.33,0,0,1,1.56-2.47,6.17,6.17,0,0,1,8.48-.06,5.4,5.4,0,0,1,1.34,2.37,5.49,5.49,0,0,1,2.29,1.4A5.4,5.4,0,0,1,26,34.94a5.47,5.47,0,0,1,3.71,4,5.38,5.38,0,0,1,2.39,1.43,5.65,5.65,0,0,1,1.48,4.89a0,0,0,0,1,0,0s.8.9,1.29,1.39a2.46,2.46,0,0,0,3.48-3.48s2,2.48,4.28,1c2-1.4,1.69-3.06.74-4a3.19,3.19,0,0,0,4.77.13,2.45,2.45,0,0,0,.13-3.3s1.33,1.81,4,.12c1.89-1.6,1-3.43,0-4.39Z"})}),"Make Offer"]}),Se.jsx("button",{className:"btn-secondary "+(o?"in-cart":""),onClick:()=>{if(o)Ze.removeFromCart(e.asset_id);else{Ze.addToCart(e)||S("Item is already in your cart!")}},title:o?"Remove from cart":"Add to cart",children:Se.jsxs("div",{className:"cart-icon-container",children:[Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"cart-icon",children:[Se.jsx("circle",{cx:"9",cy:"21",r:"1"}),Se.jsx("circle",{cx:"20",cy:"21",r:"1"}),Se.jsx("path",{d:"m1 1 4 4 2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),Se.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"cart-action-icon",children:o?Se.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}):Se.jsxs(Se.Fragment,{children:[Se.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),Se.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})})]}):Se.jsxs("button",{className:"btn-disabled",disabled:!0,children:[Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("circle",{cx:"12",cy:"12",r:"10"}),Se.jsx("line",{x1:"4.93",y1:"4.93",x2:"19.07",y2:"19.07"})]}),"Not Available"]})}),Se.jsxs("div",{className:"modal-actions-right",children:[Se.jsx("button",{className:"btn-icon btn-external",onClick:M,title:"View full asset details page",children:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),Se.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}),e?.seller&&Se.jsx("button",{className:"btn-icon btn-message",onClick:()=>{g(!0)},title:"Send Direct Message (1000 PXJ)",disabled:!v||e.seller===v?.actor,children:Se.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Se.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})})}),Se.jsx("button",{className:"btn-icon "+(d?"in-watchlist":""),onClick:async()=>{if(d)await wt.removeFromWatchlist(e.asset_id);else{await wt.addToWatchlist(e)||S("Item is already in your watchlist!")}},title:d?"Remove from watchlist":"Add to watchlist",children:Se.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:d?Se.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z",fill:"currentColor"}):Se.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})}),Se.jsx("button",{className:"btn-icon",onClick:()=>m(!0),title:"Share",children:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),Se.jsx("polyline",{points:"16,6 12,2 8,6"}),Se.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]})}),Se.jsx("button",{className:"btn-icon",onClick:s,title:"Close",children:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Se.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]})]}),h&&Se.jsx(as,{isOpen:h,onClose:()=>m(!1),title:e?.name||"NFT",description:`Check out this amazing NFT: ${e?.name||"Unnamed NFT"}`,imageUrl:cs(e),shareUrl:`${window.location.origin}/assets/${e?.asset_id}`,defaultShareText:`Check out this NFT: ${e?.name||"Unnamed NFT"} on PxMarket! \ud83c\udfae\u2728 View it at market.pixeljourney.xyz`,type:"nft"}),Se.jsx(w,{isOpen:p,onClose:()=>f(!1),nft:e}),e&&Se.jsx(ls,{isOpen:x,onClose:()=>g(!1),nft:e})]});var R},xs=({isOpen:e,onClose:t,initialNFTs:s=[]})=>{const[a,n]=O.useState(s),[i,r]=O.useState(""),[l,o]=O.useState([]),[c,d]=O.useState(!1),{showWarning:u}=xt(),[h,m]=O.useState({showPrice:!0,showRarity:!0,showAttributes:!0,showCollection:!0,showSeller:!0});O.useEffect(()=>{s.length>0&&n(s)},[s]);const p=e=>{if(!e)return"#666";switch(e.toLowerCase()){case"common":return"#9CA3AF";case"rare":return"#3B82F6";case"epic":return"#8B5CF6";case"legendary":return"#F59E0B";case"mythic":return"#EF4444";default:return"#666"}},f=(e,t)=>{if(!e.traits)return"N/A";return e.traits[t]||"N/A"};return e?Se.jsx("div",{className:"nft-comparison-overlay",children:Se.jsxs("div",{className:"nft-comparison-modal",children:[Se.jsxs("div",{className:"comparison-header",children:[Se.jsx("h2",{children:"NFT Comparison Tool"}),Se.jsx("button",{className:"close-btn",onClick:t,children:Se.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),Se.jsxs("div",{className:"comparison-content",children:[Se.jsxs("div",{className:"search-section",children:[Se.jsxs("div",{className:"search-input-container",children:[Se.jsx("input",{type:"text",placeholder:"Search NFTs to add to comparison...",value:i,onChange:e=>{r(e.target.value),(async e=>{if(e.trim()){d(!0);try{const[t,s,a]=await Promise.all([dt.getWaxRockPixals(20),dt.getFriedFactoryNFTs(20),dt.getCryptoMuffinsNFTs(20)]),n=[...t,...s,...a].filter(t=>t.name.toLowerCase().includes(e.toLowerCase())||t.collection.toLowerCase().includes(e.toLowerCase()));o(n.slice(0,10))}catch(t){console.error("Error searching NFTs:",t),o([])}finally{d(!1)}}else o([])})(e.target.value)},className:"search-input"}),c&&Se.jsx("div",{className:"search-loading",children:"Searching..."})]}),l.length>0&&Se.jsx("div",{className:"search-results",children:l.map(e=>Se.jsxs("div",{className:"search-result-item",onClick:()=>(e=>{a.length>=4?u("You can compare up to 4 NFTs at once","Comparison Limit"):a.find(t=>t.asset_id===e.asset_id)?u("This NFT is already in the comparison","Duplicate NFT"):(n([...a,e]),r(""),o([]))})(e),children:[Se.jsx("img",{src:e.image,alt:e.name,className:"result-image"}),Se.jsxs("div",{className:"result-info",children:[Se.jsx("div",{className:"result-name",children:e.name}),Se.jsx("div",{className:"result-collection",children:e.collection}),Se.jsx("div",{className:"result-price",children:e.price})]})]},e.asset_id))})]}),Se.jsxs("div",{className:"metrics-toggle",children:[Se.jsx("h3",{children:"Show Comparison Metrics:"}),Se.jsx("div",{className:"toggle-buttons",children:Object.entries(h).map(([e,t])=>Se.jsx("button",{className:"toggle-btn "+(t?"active":""),onClick:()=>{return t=e,void m(e=>({...e,[t]:!e[t]}));var t},children:e.replace("show","").replace(/([A-Z])/g," $1").trim()},e))})]}),a.length>0?Se.jsx("div",{className:"comparison-table",children:Se.jsxs("div",{className:"comparison-grid",children:[Se.jsxs("div",{className:"comparison-row header-row",children:[Se.jsx("div",{className:"metric-label",children:"NFT"}),a.map(e=>Se.jsx("div",{className:"nft-column",children:Se.jsxs("div",{className:"nft-header",children:[Se.jsx("img",{src:e.image,alt:e.name,className:"nft-image"}),Se.jsxs("div",{className:"nft-info",children:[Se.jsx("div",{className:"nft-name",children:e.name}),Se.jsxs("div",{className:"nft-id",children:["#",e.asset_id]})]}),Se.jsx("button",{className:"remove-nft-btn",onClick:()=>{return t=e.asset_id,void n(a.filter(e=>e.asset_id!==t));var t},title:"Remove from comparison",children:"\xd7"})]})},e.asset_id))]}),h.showPrice&&Se.jsxs("div",{className:"comparison-row",children:[Se.jsx("div",{className:"metric-label",children:"Price"}),a.map(e=>Se.jsx("div",{className:"metric-value price",children:e.price},e.asset_id))]}),h.showRarity&&Se.jsxs("div",{className:"comparison-row",children:[Se.jsx("div",{className:"metric-label",children:"Rarity"}),a.map(e=>Se.jsx("div",{className:"metric-value rarity",children:Se.jsx("span",{className:"rarity-badge",style:{backgroundColor:p(String(e.traits?.rarity||"Unknown"))},children:e.traits?.rarity||"Unknown"})},e.asset_id))]}),h.showCollection&&Se.jsxs("div",{className:"comparison-row",children:[Se.jsx("div",{className:"metric-label",children:"Collection"}),a.map(e=>Se.jsx("div",{className:"metric-value",children:e.collection},e.asset_id))]}),h.showSeller&&Se.jsxs("div",{className:"comparison-row",children:[Se.jsx("div",{className:"metric-label",children:"Seller"}),a.map(e=>Se.jsx("div",{className:"metric-value",children:e.seller},e.asset_id))]}),h.showAttributes&&(()=>{const e=new Set;return a.forEach(t=>{t.traits&&Object.keys(t.traits).forEach(t=>{"rarity"!==t&&e.add(t)})}),Array.from(e)})().map(e=>Se.jsxs("div",{className:"comparison-row",children:[Se.jsx("div",{className:"metric-label",children:e}),a.map(t=>Se.jsx("div",{className:"metric-value",children:f(t,e)},t.asset_id))]},e))]})}):Se.jsxs("div",{className:"empty-comparison",children:[Se.jsx("div",{className:"empty-icon",children:"\ud83d\udcca"}),Se.jsx("h3",{children:"No NFTs to Compare"}),Se.jsx("p",{children:"Search and add NFTs above to start comparing their attributes, prices, and more."})]})]})]})}):null},gs=({nft:e,isOpen:t,onClose:s})=>{const[a,n]=O.useState(!1),[i,r]=O.useState(""),{showSuccess:l}=xt(),o=[`\ud83c\udfa8 Check out this amazing NFT: ${e.name} from ${e.collection}! \u2728`,`\ud83d\udd25 Discovered this incredible ${e.name} NFT! Part of the ${e.collection} collection \ud83d\ude80`,`\u2728 Look at this stunning ${e.name} from ${e.collection}! NFT art at its finest \ud83c\udfad`,`\ud83c\udf1f Found a gem! ${e.name} from the ${e.collection} collection is absolutely beautiful \ud83d\udc8e`,`\ud83c\udfaf This ${e.name} NFT caught my eye! Amazing work from ${e.collection} \ud83c\udfa8`,`\ud83d\udcab Showcasing ${e.name} - a masterpiece from ${e.collection}! \ud83d\uddbc\ufe0f`,`\ud83d\ude80 Blown away by this ${e.name} NFT! ${e.collection} never disappoints \u2b50`,`\ud83c\udfaa Step right up and see ${e.name}! Another fantastic piece from ${e.collection} \ud83c\udf8a`],c=()=>{const e=Math.floor(Math.random()*o.length);return o[e]},[d,u]=O.useState(()=>c());if(!t)return null;const h=window.location.pathname;let m=`${window.location.origin}/assets/${e.asset_id}`;h.includes("/listings/")&&(m=window.location.href);const p=async e=>{try{await navigator.clipboard.writeText(e),n(!0),setTimeout(()=>n(!1),2e3)}catch(t){De.error("Failed to copy to clipboard","SocialShare.copyToClipboard",t)}};return Se.jsx("div",{className:"social-share-overlay",onClick:s,children:Se.jsxs("div",{className:"social-share-modal",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"share-header",children:[Se.jsx("h3",{children:"Share NFT"}),Se.jsx("button",{className:"close-btn",onClick:s,children:Se.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),Se.jsxs("div",{className:"share-content",children:[Se.jsxs("div",{className:"nft-preview",children:[Se.jsx("img",{src:e.image,alt:e.name,className:"nft-image"}),Se.jsxs("div",{className:"nft-info",children:[Se.jsx("h4",{children:e.name}),Se.jsx("p",{children:"string"==typeof e.collection?e.collection:e.collection?.collection_name||e.collection?.name||"Unknown"}),Se.jsx("span",{className:"nft-price",children:e.price})]})]}),Se.jsxs("div",{className:"share-text-section",children:[Se.jsxs("div",{className:"share-text-header",children:[Se.jsx("label",{htmlFor:"share-text",children:"Customize your message:"}),Se.jsx("button",{className:"refresh-message-btn",onClick:()=>{u(c())},title:"Generate new random message",children:Se.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),Se.jsx("textarea",{id:"share-text",value:i,onChange:e=>r(e.target.value),placeholder:d,className:"share-textarea",rows:3})]}),Se.jsxs("div",{className:"share-url-section",children:[Se.jsx("label",{children:"Share URL:"}),Se.jsxs("div",{className:"url-input-container",children:[Se.jsx("input",{type:"text",value:m,readOnly:!0,className:"url-input"}),Se.jsxs("button",{className:"copy-btn "+(a?"copied":""),onClick:()=>p(m),children:[a?Se.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):Se.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),Se.jsx("path",{d:"M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"})]}),a?"Copied!":"Copy"]})]})]}),Se.jsxs("div",{className:"social-buttons",children:[Se.jsxs("button",{className:"social-btn twitter",onClick:()=>{const e=`https://twitter.com/intent/tweet?text=${encodeURIComponent(i||d)}&url=${encodeURIComponent(m)}&hashtags=NFT,WAX,PixelJourney`;window.open(e,"_blank","width=550,height=420")},children:[Se.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})}),"Twitter"]}),Se.jsxs("button",{className:"social-btn facebook",onClick:()=>{const e=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(m)}`;window.open(e,"_blank","width=550,height=420")},children:[Se.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]}),Se.jsxs("button",{className:"social-btn reddit",onClick:()=>{const e=i||d,t=`https://reddit.com/submit?url=${encodeURIComponent(m)}&title=${encodeURIComponent(e)}`;window.open(t,"_blank","width=550,height=420")},children:[Se.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"})}),"Reddit"]}),Se.jsxs("button",{className:"social-btn discord",onClick:()=>{p(`${i||d}\n${m}`),l("Share text copied to clipboard! You can now paste it in Discord.","Copied to Clipboard")},children:[Se.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.0190 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1568 2.4189Z"})}),"Discord"]}),Se.jsxs("button",{className:"social-btn telegram",onClick:()=>{const e=i||d,t=`https://t.me/share/url?url=${encodeURIComponent(m)}&text=${encodeURIComponent(e)}`;window.open(t,"_blank","width=550,height=420")},children:[Se.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})}),"Telegram"]}),Se.jsxs("button",{className:"social-btn email",onClick:()=>{const t=`Check out this NFT: ${e.name}`,s=`${i||d}\n\nView it here: ${m}`,a=`mailto:?subject=${encodeURIComponent(t)}&body=${encodeURIComponent(s)}`;window.location.href=a},children:[Se.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Email"]})]})]})]})})},vs=({title:e,message:t,onRetry:s,showRetry:a=!0,error:n,errorConfig:i,errorType:r,isRetrying:l=!1,retryCount:o=0,maxRetries:c=3})=>{let d;d=i||(r?Le.getMessage(r):n?Le.formatError(n):{title:e||"Oh no! Something went wrong",message:t||"We're having trouble loading the data right now. Please try again in a moment.",action:"Try Again"});const u=e||d.title,h=t||d.message,m=l?"Retrying...":d.action||"Try Again";return Se.jsx("div",{className:"error-message "+(l?"retrying":""),children:Se.jsxs("div",{className:"error-content",children:[Se.jsx("div",{className:"error-icon "+(l?"spinning":""),children:(()=>{if(l)return"\ud83d\udd04";switch(r){case"NETWORK_ERROR":return"\ud83d\udce1";case"TIMEOUT_ERROR":return"\u23f1\ufe0f";case"API_ERROR":return"\u26a0\ufe0f";case"LOAD_FAILED":return"\ud83d\udcc2";default:return"\ud83d\ude05"}})()}),Se.jsx("h3",{className:"error-title",children:u}),Se.jsx("p",{className:"error-text",children:h}),o>0&&!l&&Se.jsx("div",{className:"retry-status",children:Se.jsxs("span",{className:"retry-count",children:["Attempt ",o," of ",c]})}),a&&s&&Se.jsxs("button",{className:"error-retry-btn "+(l?"retrying":""),onClick:s,disabled:l||o>=c,children:[l&&Se.jsx("span",{className:"retry-spinner"}),m]}),o>=c&&Se.jsxs("div",{className:"max-retries-reached",children:[Se.jsx("p",{children:"Maximum retry attempts reached. Please refresh the page or try again later."}),Se.jsx("button",{className:"error-refresh-btn",onClick:()=>window.location.reload(),children:"Refresh Page"})]})]})})},js="pixeljourney_search_history",ys=({searchTerm:e,onSearchChange:t,suggestions:s=[],placeholder:a="Search NFTs, collections, schemas...",showFilters:n=!1,onFilterChange:i,className:r=""})=>{const[l,o]=O.useState(!1),[c,d]=O.useState([]),[u,h]=O.useState({priceRange:{min:"",max:""},rarities:[],collections:[],schemas:[],sortBy:"relevance"}),[m,p]=O.useState(!1),f=O.useRef(null),x=O.useRef(null),[g,v]=O.useState(-1);O.useEffect(()=>{const e=localStorage.getItem(js);if(e)try{d(JSON.parse(e))}catch(t){console.error("Failed to parse search history:",t)}},[]);const j=O.useCallback(e=>{if(!e.trim()||e.length<2)return;const t=[e,...c.filter(t=>t!==e)].slice(0,10);d(t),localStorage.setItem(js,JSON.stringify(t))},[c]),y=O.useCallback(()=>{d([]),localStorage.removeItem(js)},[]),b=O.useCallback(e=>{t(e),v(-1),e.length>=2?o(!0):o(!1)},[t]),N=O.useCallback(()=>{e.trim()&&(j(e.trim()),o(!1),f.current?.blur())},[e,j]),w=O.useCallback(e=>{b(e.text),j(e.text),o(!1)},[b,j]),k=O.useCallback(e=>{if(!l)return;const t=[...c.map(e=>({text:e,type:"history"})),...s];switch(e.key){case"ArrowDown":e.preventDefault(),v(e=>e<t.length-1?e+1:e);break;case"ArrowUp":e.preventDefault(),v(e=>e>-1?e-1:-1);break;case"Enter":e.preventDefault(),g>=0&&t[g]?w(t[g]):N();break;case"Escape":o(!1),v(-1),f.current?.blur()}},[l,c,s,g,w,N]),_=O.useCallback(e=>{const t={...u,...e};h(t),i?.(t)},[u,i]);O.useEffect(()=>{const e=e=>{x.current&&!x.current.contains(e.target)&&f.current&&!f.current.contains(e.target)&&(o(!1),v(-1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const S=[...c.map(e=>({text:e,type:"history"})),...s];return Se.jsxs("div",{className:`advanced-search ${r}`,children:[Se.jsxs("div",{className:"search-container",children:[Se.jsxs("div",{className:"search-input-wrapper",children:[Se.jsx("svg",{className:"search-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m21 21-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),Se.jsx("input",{ref:f,type:"text",value:e,onChange:e=>b(e.target.value),onKeyDown:k,onFocus:()=>{(e.length>=2||c.length>0)&&o(!0)},placeholder:a,className:"search-input","aria-label":"Search for NFTs, collections, or schemas","aria-describedby":l?"search-suggestions":void 0,"aria-expanded":l,"aria-autocomplete":"list",role:"combobox"}),e&&Se.jsx("button",{className:"clear-search",onClick:()=>{b(""),o(!1)},title:"Clear search","aria-label":"Clear search input",type:"button",children:Se.jsx("span",{"aria-hidden":"true",children:"\u2715"})}),n&&Se.jsx("button",{className:"filter-toggle "+(m?"active":""),onClick:()=>p(!m),title:"Advanced filters","aria-label":m?"Hide advanced filters":"Show advanced filters","aria-expanded":m,type:"button",children:Se.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})})]}),l&&S.length>0&&Se.jsxs("div",{ref:x,className:"search-suggestions",id:"search-suggestions",role:"listbox","aria-label":"Search suggestions",children:[c.length>0&&Se.jsxs("div",{className:"suggestions-section",children:[Se.jsxs("div",{className:"suggestions-header",children:[Se.jsx("span",{id:"recent-searches-label",children:"Recent searches"}),Se.jsx("button",{onClick:y,className:"clear-history","aria-label":"Clear search history",type:"button",children:"Clear"})]}),Se.jsx("div",{role:"group","aria-labelledby":"recent-searches-label",children:c.map((e,t)=>Se.jsxs("div",{className:"suggestion-item history "+(g===t?"selected":""),onClick:()=>w({text:e,type:"history"}),role:"option","aria-selected":g===t,tabIndex:-1,children:[Se.jsx("svg",{className:"suggestion-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Se.jsx("span",{children:e})]},`history-${t}`))})]}),s.length>0&&Se.jsxs("div",{className:"suggestions-section",children:[c.length>0&&Se.jsx("div",{className:"suggestions-divider"}),Se.jsx("div",{className:"suggestions-header",children:Se.jsx("span",{children:"Suggestions"})}),s.map((e,t)=>{const s=c.length+t;return Se.jsxs("div",{className:`suggestion-item ${e.type} ${g===s?"selected":""}`,onClick:()=>w(e),children:[Se.jsxs("svg",{className:"suggestion-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:["name"===e.type&&Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"}),"collection"===e.type&&Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"}),"schema"===e.type&&Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]}),Se.jsx("span",{children:e.text}),e.count&&Se.jsx("span",{className:"suggestion-count",children:e.count})]},`suggestion-${t}`)})]})]})]}),n&&m&&Se.jsxs("div",{className:"advanced-filters",children:[Se.jsxs("div",{className:"filters-grid",children:[Se.jsxs("div",{className:"filter-group",children:[Se.jsx("label",{className:"filter-label",children:"Price Range (WAX)"}),Se.jsxs("div",{className:"price-range",children:[Se.jsx("input",{type:"number",placeholder:"Min",value:u.priceRange.min,onChange:e=>_({priceRange:{...u.priceRange,min:e.target.value}}),className:"price-input"}),Se.jsx("span",{className:"price-separator",children:"to"}),Se.jsx("input",{type:"number",placeholder:"Max",value:u.priceRange.max,onChange:e=>_({priceRange:{...u.priceRange,max:e.target.value}}),className:"price-input"})]})]}),Se.jsxs("div",{className:"filter-group",children:[Se.jsx("label",{className:"filter-label",children:"Sort By"}),Se.jsxs("select",{value:u.sortBy,onChange:e=>_({sortBy:e.target.value}),className:"filter-select",children:[Se.jsx("option",{value:"relevance",children:"Relevance"}),Se.jsx("option",{value:"price_asc",children:"Price: Low to High"}),Se.jsx("option",{value:"price_desc",children:"Price: High to Low"}),Se.jsx("option",{value:"name_asc",children:"Name: A to Z"}),Se.jsx("option",{value:"name_desc",children:"Name: Z to A"}),Se.jsx("option",{value:"newest",children:"Newest First"}),Se.jsx("option",{value:"oldest",children:"Oldest First"})]})]})]}),Se.jsx("div",{className:"filter-actions",children:Se.jsx("button",{onClick:()=>{const e={priceRange:{min:"",max:""},rarities:[],collections:[],schemas:[],sortBy:"relevance"};h(e),i?.(e)},className:"filter-reset",children:"Reset Filters"})})]})]})},bs=D.memo(()=>{const e=B(),{settings:t}=st(),{showSuccess:s,showError:a,showWarning:n}=xt(),[i,r]=O.useState([]),[l,o]=O.useState("idle"),[c,d]=O.useState(""),[u,h]=O.useState("pixals"),[m,p]=O.useState({}),[f,x]=O.useState(null),[g,v]=O.useState(!1),[j,y]=O.useState(new Set),[b,N]=O.useState(new Set),[k,_]=O.useState(1),[S,C]=O.useState(1),[A,P]=O.useState([]),[T,E]=O.useState(!1),[F,I]=O.useState({min:"",max:""}),[$,L]=O.useState(new Set),[M,R]=O.useState("price_asc"),[W,D]=O.useState({start:"",end:""}),[z,U]=O.useState([]),[X,q]=O.useState([]),[H,J]=O.useState([]),[V,G]=O.useState(new Set),[Y,K]=O.useState(new Map),[Q,Z]=O.useState(new Map),[ee,te]=O.useState(new Set),[se,ae]=O.useState(new Set),[ne,ie]=O.useState(!1),[re,le]=O.useState(!1),[oe,ce]=O.useState(null),[de,ue]=O.useState(!1),[he,me]=O.useState(null),[pe,fe]=O.useState(!1),[xe,ge]=O.useState(null),[ve,je]=O.useState(!1),[ye,be]=O.useState(new Set),[Ne,we]=O.useState(null),[ke,_e]=O.useState(!1),Ce=O.useCallback(e=>{be(t=>{const s=new Set(t);return s.has(e)?s.delete(e):(s.clear(),s.add(e)),s})},[]),Ae=O.useCallback(()=>{be(new Set)},[]),Pe=O.useCallback((e,t,s)=>{const a=t||e,n=t?"video":"image";let i=a;a.startsWith("Qm")||a.startsWith("baf")?i=`https://ipfs.io/ipfs/${a}`:a.startsWith("/ipfs/")?i=`https://ipfs.io${a}`:a.startsWith("ipfs://")&&(i=a.replace("ipfs://","https://ipfs.io/ipfs/")),we({url:i,name:s,type:n}),_e(!0)},[]);O.useEffect(()=>{const e=()=>{Ae()};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[Ae]);const Te=async(e,t=1)=>{1===t?(o("loading"),_(1),P([])):ie(!0);try{let s=[];const a=50;switch(e){case"pixals":default:s=await dt.getCheapestPixals(a,t);break;case"waxrocks":s=await dt.getWaxRockPixals(a,t);break;case"ingredients":s=await dt.getPixelIngredients(a,t);break;case"bundles":s=await dt.getBundleListings(a,t);break;case"friedfactory":s=await dt.getFriedFactoryNFTs(a,t);break;case"crptomuffins":s=await dt.getCryptoMuffinsNFTs(a,t);break;case"akufishheads":s=await dt.getAkufishheadsNFTs(a,t);break;case"partners":s=await dt.getPartnerListings(a,t);break;case"pxapproved":s=await dt.getPxApprovedListings(a,t);break;case"ah_verified":s=await dt.getAHVerifiedListings(a,t);break;case"all_wax":s=await dt.getAllWaxListings(a,t)}1===t?P(s):(P(e=>[...e,...s]),_(t)),s.length<a?C(t):C(t+1),o("success"),ie(!1)}catch(s){const e=s instanceof Error?s:new Error("Failed to load marketplace data");Le.logError("Marketplace.loadMarketplaceData",e,{category:u,page:t,limit:50}),o("error"),ie(!1)}},Ee=O.useCallback(async()=>{try{const e=(await dt.getCollectionSchemas("pixeljourney")).map(e=>e.schema_name);J(e)}catch(e){De.error("Failed to load available schemas","Marketplace",e),J([])}},[]);O.useEffect(()=>{Te(u),Ee()},[u,Ee]);const Fe=O.useCallback(async e=>{const t={},s=e.filter(e=>e.price&&!m[e.asset_id]);if(0===s.length)return;for(let a=0;a<s.length;a+=10){const e=s.slice(a,a+10);(await Promise.allSettled(e.map(async e=>{const t=await Ye.convertWaxToUSDAsync(e.price);return{assetId:e.asset_id,price:t}}))).forEach(e=>{"fulfilled"===e.status&&e.value&&(t[e.value.assetId]=e.value.price)}),a+10<s.length&&await new Promise(e=>setTimeout(e,50))}p(e=>({...e,...t}))},[]);O.useEffect(()=>{i.length>0&&Fe(i)},[i,Fe]);const $e=O.useCallback(e=>{if(!e||e.length<2)return void U([]);const t=new Map,s=e.toLowerCase();A.forEach(e=>{if(e.name.toLowerCase().includes(s)){const s=`name:${e.name}`;if(t.has(s)){const e=t.get(s);e.count=(e.count||0)+1}else t.set(s,{text:e.name,type:"name",count:1})}if(e.collection.toLowerCase().includes(s)){const s=`collection:${e.collection}`;if(t.has(s)){const e=t.get(s);e.count=(e.count||0)+1}else t.set(s,{text:e.collection,type:"collection",count:1})}});const a=Array.from(t.values()).sort((e,t)=>(t.count||0)-(e.count||0)).slice(0,8);U(a)},[A]),Me=O.useCallback(e=>{I(e.priceRange),R(e.sortBy)},[]);O.useEffect(()=>{$e(c)},[c,$e]),O.useEffect(()=>{const e=()=>{const e=Ze.getCart();y(new Set(e.map(e=>e.nft.asset_id)))};return e(),Ze.addListener(e),()=>Ze.removeListener(e)},[]),O.useEffect(()=>{(async()=>{const e=await wt.getWatchlist();ae(new Set(e.map(e=>e.nft.asset_id)))})(),wt.addListener(e=>{ae(new Set(e.map(e=>e.nft.asset_id)))})},[]);const Re=O.useCallback(()=>{k<S&&!ne&&Te(u,k+1)},[u,k,S,ne]),We=()=>{E(!1)},Oe=O.useCallback(e=>{const t=new Set($);if(t.has(e))t.delete(e);else{t.add(e);const s=new Set(ee);s.add("schemas"),te(s)}L(t)},[$,ee]),ze=O.useCallback(e=>{const t=new Set(V);if(t.has(e))t.delete(e);else{t.add(e);const s=new Set(ee);s.add("collections"),te(s)}G(t)},[V,ee]),Be=O.useCallback((e,t)=>{const s=new Map(Y),a=s.get(e)||new Set,n=new Set(a);if(n.has(t)?n.delete(t):n.add(t),n.size>0){s.set(e,n);const t=new Set(ee);t.add("attributes"),te(t)}else s.delete(e);K(s)},[Y,ee]),Ue=O.useCallback(e=>{const t=new Set(ee);t.has(e)?t.delete(e):t.add(e),te(t)},[ee]),Xe=O.useMemo(()=>{let e=[...A];if(c){const t=c.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.collection.toLowerCase().includes(t)||e.schema&&e.schema.toLowerCase().includes(t))}return(F.min||F.max)&&(e=e.filter(e=>{if(!e.price)return!1;const t=parseFloat(e.price),s=F.min?parseFloat(F.min):0,a=F.max?parseFloat(F.max):1/0;return t>=s&&t<=a})),$.size>0&&(e=e.filter(e=>e.schema&&$.has(e.schema))),V.size>0&&(e=e.filter(e=>V.has(e.collection))),Y.size>0&&(e=e.filter(e=>{if(!e.data||!e.data.attributes||!Array.isArray(e.data.attributes))return!1;for(const[t,s]of Y){const a=e.data.attributes.find(e=>e.key===t);if(!a||!s.has(a.value))return!1}return!0})),e.sort((e,t)=>{switch(M){case"price_asc":return parseFloat(e.price||"0")-parseFloat(t.price||"0");case"price_desc":return parseFloat(t.price||"0")-parseFloat(e.price||"0");case"name_asc":return e.name.localeCompare(t.name);case"name_desc":return t.name.localeCompare(e.name);case"newest":return new Date(t.created_at_time||0).getTime()-new Date(e.created_at_time||0).getTime();case"oldest":return new Date(e.created_at_time||0).getTime()-new Date(t.created_at_time||0).getTime();default:return 0}}),e},[A,c,F,$,V,Y,M]);O.useEffect(()=>{r(Xe)},[Xe]),O.useEffect(()=>{const e=new Map;let t=A;V.size>0&&(t=t.filter(e=>V.has(e.collection))),$.size>0&&(t=t.filter(e=>e.schema&&$.has(e.schema))),t.forEach(t=>{t.data&&t.data.attributes&&Array.isArray(t.data.attributes)&&t.data.attributes.forEach(t=>{e.has(t.key)||e.set(t.key,[]);const s=e.get(t.key);s.includes(t.value)||s.push(t.value)})}),e.forEach(e=>{e.sort()}),Z(e),K(t=>{const s=new Map;return t.forEach((t,a)=>{if(e.has(a)){const n=e.get(a),i=new Set;t.forEach(e=>{n.includes(e)&&i.add(e)}),i.size>0&&s.set(a,i)}}),s})},[A,V,$]),O.useEffect(()=>{if(V.size>0){const e=[...new Set(A.filter(e=>V.has(e.collection)).map(e=>e.schema).filter(e=>e))].sort();J(e),L(t=>{const s=new Set;return t.forEach(t=>{e.includes(t)&&s.add(t)}),s})}else{const e=[...new Set(A.map(e=>e.schema).filter(e=>e))].sort();J(e)}},[A,V]);const qe=O.useCallback(e=>{let t=[...e];return(F.min||F.max)&&(t=t.filter(e=>{if(!e.price)return!1;const t=parseFloat(e.price.replace(" WAX","")),s=F.min?parseFloat(F.min):0,a=F.max?parseFloat(F.max):1/0;return t>=s&&t<=a})),$.size>0&&(t=t.filter(e=>$.has(e.schema))),V.size>0&&(t=t.filter(e=>V.has(e.collection))),W.start||W.end,t.sort((e,t)=>{const s=e.price?parseFloat(e.price.replace(" WAX","")):0,a=t.price?parseFloat(t.price.replace(" WAX","")):0;switch(M){case"price_asc":return s-a;case"price_desc":return a-s;case"name_asc":return e.name.localeCompare(t.name);case"name_desc":return t.name.localeCompare(e.name);case"date_newest":return 0-0;case"date_oldest":return 0-0;default:return 0}}),t},[F,$,V,M]);O.useEffect(()=>{const e=Array.from(new Set(A.map(e=>e.collection)));q(e)},[A]),O.useEffect(()=>{let e=A.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())||("string"==typeof e.collection?e.collection.toLowerCase():"").includes(c.toLowerCase()));e=qe(e),r(e)},[A,c,F,$,V,W,M,qe]);const{purchaseNFT:He}=Ie(),Je=O.useCallback(async e=>{try{if(!Yt.isLoggedIn())return void n("Please connect your wallet to purchase NFTs");if(De.debug("Purchasing NFT","Marketplace",{nft:e}),!e.sale_id||!e.price)return void a("Purchase Error","NFT is not available for purchase");await He(e.sale_id,e.price.replace(" WAX","")),s(`Successfully purchased ${e.name}!`),Te(u)}catch(t){De.error("Purchase failed","Marketplace",t instanceof Error?t:new Error(String(t))),a(`Purchase failed: ${t instanceof Error?t.message:"Unknown error"}`)}},[u,n,s,a,Te]),Ve=O.useCallback(t=>{e(`/user-profile-lookup?user=${encodeURIComponent(t)}`)},[e]),Ge=O.useCallback(t=>{e(`/collections/${encodeURIComponent(t)}`)},[e]),Ke=O.useCallback(t=>{b.size>0?Qe(t.asset_id):t.sale_id?e(`/listings/${t.sale_id}`):e(`/assets/${t.asset_id}`)},[e,b.size]),Qe=O.useCallback(e=>{const t=new Set(b);t.has(e)?t.delete(e):t.add(e),N(t)},[b]),et=O.useCallback(()=>{b.size===i.length?N(new Set):N(new Set(i.map(e=>e.asset_id)))},[b,i]),tt=O.useCallback(()=>{i.filter(e=>b.has(e.asset_id)).forEach(e=>{j.has(e.asset_id)||Ze.addToCart(e)}),N(new Set)},[i,b,j]);return Se.jsxs("div",{className:"marketplace",children:[Se.jsxs("div",{className:"container",children:[Se.jsx("div",{className:"marketplace-header",children:Se.jsx("div",{className:"marketplace-header-content",children:Se.jsxs("div",{className:"marketplace-header-text",children:[Se.jsx("h1",{className:"marketplace-title",children:"Pixel Journey Marketplace"}),Se.jsx("p",{className:"marketplace-subtitle",children:"Discover, collect, and trade unique digital assets from the Pixel Journey ecosystem. This marketplace serves all WAX users, with full market access unlocked for Pixal PFP holders."})]})})}),Se.jsxs("div",{className:"marketplace-filters",children:[Se.jsx(ys,{searchTerm:c,onSearchChange:d,suggestions:z,placeholder:"Search items, collections...",showFilters:!0,onFilterChange:Me,className:"marketplace-search"}),Se.jsxs("div",{className:"marketplace-controls",children:[Se.jsxs("div",{className:"category-tabs-container",children:[Se.jsx("h3",{className:"category-section-title",children:"Listings"}),Se.jsx("div",{className:"category-tabs-wrapper",children:Se.jsxs("div",{className:"category-tabs",children:[Se.jsx("button",{className:"category-tab "+("pixals"===u?"active":""),onClick:()=>h("pixals"),"aria-label":"Filter by Pixals category","aria-pressed":"pixals"===u,children:"Pixals"}),Se.jsx("button",{className:"category-tab "+("waxrocks"===u?"active":""),onClick:()=>h("waxrocks"),"aria-label":"Filter by WaxRocks category","aria-pressed":"waxrocks"===u,children:"WaxRocks"}),Se.jsx("button",{className:"category-tab "+("ingredients"===u?"active":""),onClick:()=>h("ingredients"),"aria-label":"Filter by Ingredients category","aria-pressed":"ingredients"===u,children:"Ingredients"}),Se.jsx("button",{className:"category-tab "+("bundles"===u?"active":""),onClick:()=>h("bundles"),"aria-label":"Filter by Bundles category","aria-pressed":"bundles"===u,children:"\ud83d\udce6 Bundles"}),Se.jsxs("select",{className:"others-select",value:["friedfactory","crptomuffins","akufishheads","partners","pxapproved","ah_verified","all_wax"].includes(u)?u:"others",onChange:e=>{const t=e.target.value;"others"!==t&&h(t)},"aria-label":"Select additional marketplace categories",children:[Se.jsx("option",{value:"others",children:"Others"}),Se.jsxs("optgroup",{label:"Marketplace",children:[Se.jsx("option",{value:"pxapproved",children:"PxApproved"}),Se.jsx("option",{value:"ah_verified",children:"All AH Verified (Pixals holders+ only)"}),Se.jsx("option",{value:"all_wax",children:"All Wax Listings (Pixals holders+ only)"})]}),Se.jsxs("optgroup",{label:"Partners",children:[Se.jsx("option",{value:"friedfactory",children:"Fried Factory"}),Se.jsx("option",{value:"crptomuffins",children:"CryptoMuffins"}),Se.jsx("option",{value:"akufishheads",children:"Aku Fish Heads"})]})]})]})})]}),Se.jsxs("div",{className:"filter-sort-section",children:[Se.jsx("h3",{className:"filter-sort-title",children:"Filter & Sort"}),Se.jsxs("div",{className:"filter-sort-controls",children:[Se.jsxs("select",{className:"sort-dropdown",value:M,onChange:e=>R(e.target.value),children:[Se.jsx("option",{value:"price_asc",children:"Price: Low to High"}),Se.jsx("option",{value:"price_desc",children:"Price: High to Low"}),Se.jsx("option",{value:"name_asc",children:"Name: A to Z"}),Se.jsx("option",{value:"name_desc",children:"Name: Z to A"}),Se.jsx("option",{value:"date_newest",children:"Newest Listings"}),Se.jsx("option",{value:"date_oldest",children:"Oldest Listings"})]}),Se.jsx("button",{className:"filter-toggle-btn",onClick:()=>{E(!T)},title:"Advanced Filters",children:Se.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})})]})]})]})]}),"loading"===l&&Se.jsx("div",{className:"loading-grid",children:Array.from({length:8}).map((e,t)=>Se.jsxs("div",{className:"nft-card loading",children:[Se.jsx("div",{className:"nft-image-placeholder"}),Se.jsxs("div",{className:"nft-info",children:[Se.jsx("div",{className:"loading-text"}),Se.jsx("div",{className:"loading-text short"})]})]},t))}),"error"===l&&Se.jsx(vs,{errorType:"LOAD_FAILED",onRetry:()=>Te(u),showRetry:!0}),b.size>0&&Se.jsxs("div",{className:"bulk-actions-bar",children:[Se.jsx("div",{className:"bulk-actions-info",children:Se.jsxs("span",{children:[b.size," item",1!==b.size?"s":""," selected"]})}),Se.jsxs("div",{className:"bulk-actions-buttons",children:[Se.jsx("button",{className:"bulk-btn bulk-cart",onClick:tt,"aria-label":`Add ${b.size} selected items to cart`,children:"Add Selected to Cart"}),Se.jsxs("button",{className:"bulk-btn bulk-compare",onClick:()=>le(!0),disabled:b.size<2||b.size>4,title:b.size<2?"Select 2-4 items to compare":b.size>4?"Maximum 4 items can be compared":"Compare selected items","aria-label":`Compare ${b.size} selected items`,children:["Compare (",b.size,")"]}),Se.jsx("button",{className:"bulk-btn bulk-clear",onClick:()=>N(new Set),"aria-label":"Clear all selected items",children:"Clear Selection"})]})]}),"success"===l&&i.length>0&&Se.jsxs("div",{className:"select-all-container",children:[Se.jsx("button",{className:"select-all-btn",onClick:et,"aria-label":b.size===i.length?`Deselect all ${i.length} items`:`Select all ${i.length} items`,children:b.size===i.length?"Deselect All":"Select All"}),k<S&&Se.jsx("button",{className:"load-more-btn load-more-top",onClick:Re,disabled:ne,"aria-label":ne?"Loading more items":"Load more marketplace items",children:ne?"Loading...":"Load More"})]}),"success"===l&&Se.jsx("div",{className:"nft-grid",children:i.map(e=>Se.jsxs("div",{className:"nft-card "+(b.has(e.asset_id)?"selected":""),children:[Se.jsx("div",{className:"nft-select-checkbox",children:Se.jsx("input",{type:"checkbox",checked:b.has(e.asset_id),onChange:()=>Qe(e.asset_id),className:"select-checkbox"})}),Se.jsxs("div",{className:"nft-image-container",children:[Se.jsx(Qt,{imageUrl:cs(e),videoUrl:ds(e),className:"nft-image",alt:e.name,autoPlay:!0,loop:!0,enableAnimations:t.enableAnimatedNFTs}),Se.jsx("div",{className:"zoom-overlay",onClick:()=>Pe(cs(e)||"",ds(e)||"",e.name||`Asset #${e.asset_id}`),title:"Click to zoom",children:Se.jsxs("svg",{className:"zoom-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("circle",{cx:"11",cy:"11",r:"8"}),Se.jsx("path",{d:"m21 21-4.35-4.35"}),Se.jsx("path",{d:"M11 8v6M8 11h6"})]})}),(e.template_mint||void 0!==e.max_supply)&&Se.jsxs("div",{className:"mint-badge",children:[void 0!==e.template_mint&&null!==e.template_mint?e.template_mint:"?","/","0"===e.max_supply||void 0===e.max_supply||null===e.max_supply?"\u221e":e.max_supply]})]}),Se.jsxs("div",{className:"nft-info",children:[Se.jsxs("div",{className:"nft-header",children:[Se.jsx("h3",{className:"nft-name",children:Se.jsx("span",{className:"asset-link",onClick:()=>Ke(e),children:e.name})}),Se.jsx("p",{className:"nft-collection",children:Se.jsx("span",{className:"collection-link",onClick:()=>Ge(e.collection),children:e.collection})})]}),Se.jsxs("div",{className:"nft-price-container",children:[Se.jsxs("div",{className:"nft-prices-div",children:[Se.jsx("div",{className:"nft-price",children:e.price}),Se.jsx("div",{className:"nft-price-usd",children:m[e.asset_id]||"$0.00"})]}),e.seller&&Se.jsxs("p",{className:"nft-seller",children:["\ud83e\uddd1\u200d\ud83d\udcbc ",Se.jsx("span",{className:"seller-link",onClick:()=>Ve(e.seller),children:e.seller})]})]}),Se.jsxs("div",{className:"nft-actions",children:[Se.jsxs("div",{className:"nft-actions-row nft-actions-main",children:[Se.jsxs("button",{className:"btn-buy-now",onClick:()=>Je(e),title:"Buy now","aria-label":`Buy ${e.name} for ${e.price}`,type:"button",children:[Se.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",children:Se.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Buy Now"]}),Se.jsxs("button",{className:"details-btn",onClick:()=>{x(e),v(!0)},title:"View Details","aria-label":`View details for ${e.name}`,type:"button",children:[Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",children:[Se.jsx("circle",{cx:"11",cy:"11",r:"8"}),Se.jsx("path",{d:"m21 21-4.35-4.35"})]}),"Info"]})]}),Se.jsxs("div",{className:"nft-actions-row nft-actions-icons",children:[Se.jsx("button",{className:"btn-cart "+(j.has(e.asset_id)?"in-cart":""),onClick:()=>{if(j.has(e.asset_id))Ze.removeFromCart(e.asset_id);else{Ze.addToCart(e)||n("Item is already in your cart!")}},title:j.has(e.asset_id)?"Remove from cart":"Add to cart","aria-label":j.has(e.asset_id)?`Remove ${e.name} from cart`:`Add ${e.name} to cart`,type:"button",children:Se.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",children:j.has(e.asset_id)?Se.jsxs(Se.Fragment,{children:[Se.jsx("polyline",{points:"3,6 5,6 21,6"}),Se.jsx("path",{d:"m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"})]}):Se.jsxs(Se.Fragment,{children:[Se.jsx("circle",{cx:"9",cy:"21",r:"1"}),Se.jsx("circle",{cx:"20",cy:"21",r:"1"}),Se.jsx("path",{d:"m1 1 4 4 2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]})})}),Se.jsx("button",{className:"btn-make-offer",onClick:t=>{t.stopPropagation(),me(e),fe(!0)},title:"Make Offer",type:"button",children:Se.jsx("svg",{viewBox:"0 -8 72 72",fill:"currentColor",children:Se.jsx("path",{d:"M64,12.78v17s-3.63.71-4.38.81-3.08.85-4.78-.78C52.22,27.25,42.93,18,42.93,18a3.54,3.54,0,0,0-4.18-.21c-2.36,1.24-5.87,3.07-7.33,3.78a3.37,3.37,0,0,1-5.06-2.64,3.44,3.44,0,0,1,2.1-3c3.33-2,10.36-6,13.29-7.52,1.78-1,3.06-1,5.51,1C50.27,12,53,14.27,53,14.27a2.75,2.75,0,0,0,2.26.43C58.63,14,64,12.78,64,12.78ZM27,41.5a3,3,0,0,0-3.55-4.09,3.07,3.07,0,0,0-.64-3,3.13,3.13,0,0,0-3-.75,3.07,3.07,0,0,0-.65-3,3.38,3.38,0,0,0-4.72.13c-1.38,1.32-2.27,3.72-1,5.14s2.64.55,3.72.3c-.3,1.07-1.2,2.07-.09,3.47s2.64.55,3.72.3c-.3,1.07-1.16,2.16-.1,3.46s2.84.61,4,.25c-.45,1.15-1.41,2.39-.18,3.79s4.08.75,5.47-.58a3.32,3.32,0,0,0,.3-4.68A3.18,3.18,0,0,0,27,41.5Zm25.35-8.82L41.62,22a3.53,3.53,0,0,0-3.77-.68c-1.5.66-3.43,1.56-4.89,2.24a8.15,8.15,0,0,1-3.29,1.1,5.59,5.59,0,0,1-3-10.34C29,12.73,34.09,10,34.09,10a6.46,6.46,0,0,0-5-2C25.67,8,18.51,12.7,18.51,12.7a5.61,5.61,0,0,1-4.93.13L8,10.89v19.4s1.59.46,3,1a6.33,6.33,0,0,1,1.56-2.47,6.17,6.17,0,0,1,8.48-.06,5.4,5.4,0,0,1,1.34,2.37,5.49,5.49,0,0,1,2.29,1.4A5.4,5.4,0,0,1,26,34.94a5.47,5.47,0,0,1,3.71,4,5.38,5.38,0,0,1,2.39,1.43,5.65,5.65,0,0,1,1.48,4.89a0,0,0,0,1,0,0s.8.9,1.29,1.39a2.46,2.46,0,0,0,3.48-3.48s2,2.48,4.28,1c2-1.4,1.69-3.06.74-4a3.19,3.19,0,0,0,4.77.13,2.45,2.45,0,0,0,.13-3.3s1.33,1.81,4,.12c1.89-1.6,1-3.43,0-4.39Z"})})}),Se.jsx("button",{className:"btn-message",onClick:()=>(ge(e),void je(!0)),title:"Send Direct Message (1000 PXJ)",disabled:!e.seller,children:Se.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Se.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})})}),Se.jsxs("div",{className:"other-actions-dropdown",children:[Se.jsx("button",{className:"btn-other-actions",onClick:t=>{t.stopPropagation(),Ce(e.asset_id)},title:"More Actions",children:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("circle",{cx:"12",cy:"12",r:"1"}),Se.jsx("circle",{cx:"19",cy:"12",r:"1"}),Se.jsx("circle",{cx:"5",cy:"12",r:"1"})]})}),Se.jsxs("div",{className:"other-actions-menu "+(ye.has(e.asset_id)?"open":""),children:[Se.jsxs("button",{className:"other-actions-item",onClick:t=>{t.stopPropagation(),Ke(e),Ae()},children:[Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),Se.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"View Full Listing"]}),Se.jsxs("button",{className:"other-actions-item",onClick:t=>{t.stopPropagation(),ce(e),ue(!0),Ae()},children:[Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),Se.jsx("polyline",{points:"16,6 12,2 8,6"}),Se.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]}),"Share NFT"]}),Se.jsxs("button",{className:"other-actions-item "+(se.has(e.asset_id)?"in-watchlist":""),onClick:async t=>{if(t.stopPropagation(),se.has(e.asset_id))await wt.removeFromWatchlist(e.asset_id);else{await wt.addToWatchlist(e)||n("Item is already in your watchlist!")}Ae()},children:[Se.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:se.has(e.asset_id)?Se.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z",fill:"currentColor"}):Se.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),se.has(e.asset_id)?"Remove from Watchlist":"Add to Watchlist"]})]})]})]})]})]})]},e.asset_id))}),"success"===l&&0===i.length&&Se.jsxs("div",{className:"marketplace-empty",children:[Se.jsx("svg",{className:"empty-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),Se.jsx("h3",{children:"No items found"}),Se.jsx("p",{children:"Try adjusting your search or filter criteria"})]}),"success"===l&&k<S&&Se.jsxs("div",{className:"load-more-container",children:[Se.jsx("button",{className:"load-more-btn",onClick:()=>Te(u,k+1),disabled:ne,children:ne?"Loading...":"Load More"}),Se.jsxs("div",{className:"pagination-info",children:["Showing ",i.length," items \u2022 Loaded ",k," of ",S>k?S+"+":S," pages"]})]}),"success"===l&&k>=S&&i.length>0&&Se.jsx("div",{className:"load-more-container",children:Se.jsxs("div",{className:"pagination-info",children:["Showing all ",i.length," items"]})})]}),T&&Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"filter-sidebar-overlay",onClick:We}),Se.jsxs("div",{className:"filter-sidebar",children:[Se.jsxs("div",{className:"filter-sidebar-header",children:[Se.jsx("h3",{children:"Advanced Filters"}),Se.jsx("button",{className:"close-sidebar-btn",onClick:We,children:Se.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),Se.jsxs("div",{className:"filter-section",children:[Se.jsxs("div",{className:"filter-section-header",onClick:()=>Ue("collections"),children:[Se.jsx("h4",{children:"Collections"}),Se.jsx("button",{className:"collapse-toggle",children:Se.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:ee.has("collections")?"collapsed":"",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),!ee.has("collections")&&Se.jsx("div",{className:"collection-checkboxes",children:X.slice(0,8).map(e=>Se.jsxs("div",{className:"collection-item",children:[Se.jsxs("label",{className:"collection-checkbox",children:[Se.jsx("input",{type:"checkbox",checked:V.has(e),onChange:()=>ze(e)}),Se.jsx("span",{className:"checkmark"}),e]}),Se.jsx("a",{href:`/analytics/${encodeURIComponent(e)}`,className:"analytics-link",title:`View ${e} analytics`,onClick:e=>e.stopPropagation(),children:"\ud83d\udcca"})]},e))})]}),Se.jsxs("div",{className:"filter-section",children:[Se.jsxs("div",{className:"filter-section-header",onClick:()=>Ue("schemas"),children:[Se.jsx("h4",{children:"Schema Type"}),Se.jsx("button",{className:"collapse-toggle",children:Se.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:ee.has("schemas")?"collapsed":"",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),!ee.has("schemas")&&Se.jsx("div",{className:"schema-checkboxes",children:H.length>0?H.map(e=>Se.jsxs("label",{className:"schema-checkbox",children:[Se.jsx("input",{type:"checkbox",checked:$.has(e),onChange:()=>Oe(e)}),Se.jsx("span",{className:"checkmark"}),e.charAt(0).toUpperCase()+e.slice(1)]},e)):Se.jsx("div",{className:"loading-schemas",children:"Loading schemas..."})})]}),Se.jsxs("div",{className:"filter-section",children:[Se.jsxs("div",{className:"filter-section-header",onClick:()=>Ue("price"),children:[Se.jsx("h4",{children:"Price Range (WAX)"}),Se.jsx("button",{className:"collapse-toggle",children:Se.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:ee.has("price")?"collapsed":"",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),!ee.has("price")&&Se.jsxs("div",{className:"price-range-inputs",children:[Se.jsx("input",{type:"number",placeholder:"Min",value:F.min,onChange:e=>I(t=>({...t,min:e.target.value})),className:"price-input"}),Se.jsx("span",{children:"to"}),Se.jsx("input",{type:"number",placeholder:"Max",value:F.max,onChange:e=>I(t=>({...t,max:e.target.value})),className:"price-input"})]})]}),Se.jsxs("div",{className:"filter-section",children:[Se.jsxs("div",{className:"filter-section-header",onClick:()=>Ue("attributes"),children:[Se.jsx("h4",{children:"Attribute Filters"}),Se.jsx("button",{className:"collapse-toggle",children:Se.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:ee.has("attributes")?"collapsed":"",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),!ee.has("attributes")&&Se.jsxs("div",{className:"attribute-filters",children:[Array.from(Q.entries()).map(([e,t])=>Se.jsxs("div",{className:"attribute-group",children:[Se.jsx("h5",{className:"attribute-type",children:e}),Se.jsx("div",{className:"attribute-values",children:t.map(t=>Se.jsxs("label",{className:"attribute-checkbox",children:[Se.jsx("input",{type:"checkbox",checked:Y.get(e)?.has(t)||!1,onChange:()=>Be(e,t)}),Se.jsx("span",{className:"checkmark"}),t]},t))})]},e)),0===Q.size&&Se.jsx("div",{className:"no-attributes",children:"No attributes available"})]})]}),Se.jsxs("div",{className:"filter-section",children:[Se.jsx("h4",{children:"Date Range"}),Se.jsxs("div",{className:"date-range-inputs",children:[Se.jsx("input",{type:"date",value:W.start,onChange:e=>D(t=>({...t,start:e.target.value})),className:"date-input",placeholder:"Start Date"}),Se.jsx("span",{children:"to"}),Se.jsx("input",{type:"date",value:W.end,onChange:e=>D(t=>({...t,end:e.target.value})),className:"date-input",placeholder:"End Date"})]})]}),Se.jsxs("div",{className:"filter-section",children:[Se.jsx("h4",{children:"Sort By"}),Se.jsxs("select",{value:M,onChange:e=>R(e.target.value),className:"sort-select",children:[Se.jsx("option",{value:"price_asc",children:"Price: Low to High"}),Se.jsx("option",{value:"price_desc",children:"Price: High to Low"}),Se.jsx("option",{value:"name_asc",children:"Name: A to Z"}),Se.jsx("option",{value:"name_desc",children:"Name: Z to A"}),Se.jsx("option",{value:"date_newest",children:"Newest Listings"}),Se.jsx("option",{value:"date_oldest",children:"Oldest Listings"})]})]}),Se.jsxs("div",{className:"filter-actions",children:[Se.jsx("button",{className:"clear-filters-btn",onClick:()=>{I({min:"",max:""}),L(new Set),G(new Set),K(new Map),D({start:"",end:""}),R("price_asc")},children:"Clear All"}),Se.jsx("button",{className:"apply-filters-btn",onClick:We,children:"Apply Filters"})]})]})]}),Se.jsx(fs,{nft:f,isOpen:g,onClose:()=>{v(!1),x(null)}}),Se.jsx(xs,{initialNFTs:i.filter(e=>b.has(e.asset_id)),isOpen:re,onClose:()=>le(!1)}),oe&&Se.jsx(gs,{nft:oe,isOpen:de,onClose:()=>{ue(!1),ce(null)}}),he&&Se.jsx(w,{nft:he,isOpen:pe,onClose:()=>{fe(!1),me(null)}}),xe&&Se.jsx(ls,{nft:xe,isOpen:ve,onClose:()=>{je(!1),ge(null)}}),ke&&Ne&&Se.jsx("div",{className:"image-zoom-modal",onClick:()=>_e(!1),children:Se.jsxs("div",{className:"zoom-modal-content",onClick:e=>e.stopPropagation(),children:[Se.jsx("button",{className:"zoom-modal-close",onClick:()=>_e(!1),"aria-label":"Close zoom modal",children:"\xd7"}),"video"===Ne.type?Se.jsx("video",{src:Ne.url,className:"zoom-modal-video",controls:!0,autoPlay:!0,loop:!0,muted:!0}):Se.jsx("img",{src:Ne.url,alt:Ne.name,className:"zoom-modal-image"}),Se.jsx("div",{className:"zoom-modal-title",children:Ne.name})]})})]})}),Ns=()=>Se.jsxs("div",{className:"rewards-container",children:[Se.jsxs("div",{className:"rewards-header",children:[Se.jsx("h1",{className:"rewards-title",children:"Trading Rewards"}),Se.jsx("p",{className:"rewards-subtitle",children:"Earn PXJ tokens and Pixel Ingredients for every trade you make on Pixel Market"})]}),Se.jsxs("div",{className:"rewards-content",children:[Se.jsxs("div",{className:"reward-card",children:[Se.jsx("div",{className:"reward-icon pxj-icon",children:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("circle",{cx:"12",cy:"12",r:"10"}),Se.jsx("path",{d:"M12 6v6l4 2"})]})}),Se.jsx("h3",{className:"reward-title",children:"PXJ Token Rewards"}),Se.jsx("p",{className:"reward-description",children:"Earn PXJ tokens based on your trading volume. The more you trade, the more you earn!"}),Se.jsxs("ul",{className:"reward-benefits",children:[Se.jsx("li",{children:"0.1% of trade value in PXJ tokens"}),Se.jsx("li",{children:"Bonus multipliers for high-volume traders"}),Se.jsx("li",{children:"Weekly bonus distributions"}),Se.jsx("li",{children:"Governance voting rights"})]})]}),Se.jsxs("div",{className:"reward-card",children:[Se.jsx("div",{className:"reward-icon ingredient-icon",children:Se.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Se.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),Se.jsx("h3",{className:"reward-title",children:"Pixel Ingredients"}),Se.jsxs("p",{className:"reward-description",children:["Collect rare Pixel Ingredients that can be used for crafting and enhancing your NFTs. ",Se.jsx("strong",{children:"Available to Pixal PFP holders and Fried Factory trait holders only."})]}),Se.jsxs("ul",{className:"reward-benefits",children:[Se.jsx("li",{children:"Random ingredient drops with each trade"}),Se.jsx("li",{children:"Rare ingredients for large transactions"}),Se.jsx("li",{children:"Craft unique items and upgrades"}),Se.jsx("li",{children:"Trade ingredients with other players"})]})]}),Se.jsxs("div",{className:"reward-card full-width",children:[Se.jsx("div",{className:"reward-icon volume-icon",children:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("path",{d:"M3 3v18h18"}),Se.jsx("path",{d:"M7 12l4-4 4 4 6-6"})]})}),Se.jsx("h3",{className:"reward-title",children:"Volume-Based Bonuses"}),Se.jsx("p",{className:"reward-description",children:"Unlock additional rewards and benefits as your trading volume increases."}),Se.jsxs("div",{className:"volume-tiers",children:[Se.jsxs("div",{className:"tier",children:[Se.jsx("h4",{children:"Bronze Trader"}),Se.jsx("p",{children:"1+ WAX volume"}),Se.jsx("span",{className:"tier-bonus",children:"1x rewards"})]}),Se.jsxs("div",{className:"tier",children:[Se.jsx("h4",{children:"Silver Trader"}),Se.jsx("p",{children:"100+ WAX volume"}),Se.jsx("span",{className:"tier-bonus",children:"1.5x rewards"})]}),Se.jsxs("div",{className:"tier",children:[Se.jsx("h4",{children:"Gold Trader"}),Se.jsx("p",{children:"1,000+ WAX volume"}),Se.jsx("span",{className:"tier-bonus",children:"2x rewards"})]}),Se.jsxs("div",{className:"tier",children:[Se.jsx("h4",{children:"Diamond Trader"}),Se.jsx("p",{children:"10,000+ WAX volume"}),Se.jsx("span",{className:"tier-bonus",children:"3x rewards"})]})]})]})]}),Se.jsxs("div",{className:"rewards-cta",children:[Se.jsx("h3",{children:"Start Trading Today!"}),Se.jsx("p",{children:"Connect your wallet and start earning rewards with every transaction."}),Se.jsxs(z,{to:"/marketplace",className:"cta-button",children:[Se.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})}),"Go to Marketplace"]})]})]}),ws=({nft:e,isOpen:t,onClose:s,onSuccess:a,bundleNfts:n=[]})=>{const[i,r]=O.useState(""),[l,o]=O.useState(!1),[c,d]=O.useState(""),[u,h]=O.useState(!1),{session:m}=Ie(),{showSuccess:p,showError:f}=xt(),x={symbol:"WAX",contract:"eosio.token",precision:8},g=()=>{u||(r(""),o(!1),d(""),s())};return t&&e?Se.jsx("div",{className:"modal-overlay",onClick:g,children:Se.jsxs("div",{className:"modal-content listing-modal",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsx("h2",{children:"List NFT for Sale"}),Se.jsx("button",{className:"modal-close",onClick:g,disabled:u,children:"\xd7"})]}),Se.jsxs("div",{className:"modal-body",children:[Se.jsxs("div",{className:"nft-preview enhanced-preview",children:[Se.jsx("div",{className:"nft-image",children:Se.jsx(Qt,{imageUrl:cs(e),videoUrl:ds(e),alt:e.name||`Asset #${e.asset_id}`,className:"nft-media"})}),Se.jsxs("div",{className:"nft-info",children:[Se.jsx("h3",{children:e.name}),Se.jsx("p",{className:"nft-collection",children:"string"==typeof e.collection?e.collection:e.collection?.name||e.collection?.collection_name||"Unknown"}),Se.jsx("p",{className:"nft-schema",children:e.schema.schema_name}),e.mint_number&&Se.jsxs("p",{className:"nft-mint",children:["Mint #",e.mint_number]}),l&&n.length>0&&Se.jsxs("p",{className:"bundle-info",children:["+ ",n.length," additional NFT",n.length>1?"s":""]})]})]}),n.length>0&&Se.jsxs("div",{className:"bundle-section",children:[Se.jsx("div",{className:"bundle-toggle",children:Se.jsxs("label",{className:"checkbox-label",children:[Se.jsx("input",{type:"checkbox",checked:l,onChange:e=>o(e.target.checked),disabled:u}),Se.jsx("span",{className:"checkmark"}),"Create Bundle with ",n.length," additional NFT",n.length>1?"s":""]})}),l&&Se.jsxs("div",{className:"bundle-details",children:[Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{htmlFor:"bundleName",children:"Bundle Name *"}),Se.jsx("input",{type:"text",id:"bundleName",value:c,onChange:e=>d(e.target.value),placeholder:"Enter bundle name",disabled:u,className:"bundle-name-input"})]}),Se.jsxs("div",{className:"bundle-preview",children:[Se.jsx("h4",{children:"Bundle Contents:"}),Se.jsxs("div",{className:"bundle-nfts",children:[Se.jsxs("div",{className:"bundle-nft-item main-nft",children:[Se.jsx(Qt,{imageUrl:cs(e),videoUrl:ds(e),alt:e.name||`Asset #${e.asset_id}`,className:"bundle-nft-image"}),Se.jsx("span",{children:e.name})]}),n.slice(0,3).map(e=>Se.jsxs("div",{className:"bundle-nft-item",children:[Se.jsx(Qt,{imageUrl:cs(e),videoUrl:ds(e),alt:e.name||`Asset #${e.asset_id}`,className:"bundle-nft-image"}),Se.jsx("span",{children:e.name})]},e.asset_id)),n.length>3&&Se.jsxs("div",{className:"bundle-more",children:["+",n.length-3," more"]})]})]})]})]}),Se.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),!e||!m||!i)return void f("Please fill in all required fields");if(l&&!c.trim())return void f("Please enter a bundle name");const o=parseFloat(i);if(isNaN(o)||o<=0)f("Please enter a valid price");else{h(!0);try{const t=x,i=`${o.toFixed(t.precision)} ${t.symbol}`,c=l&&n.length>0?[e.asset_id,...n.map(e=>e.asset_id)]:[e.asset_id],d={account:"atomicmarket",name:"announcesale",authorization:[{actor:Gt.safeGetActor(m),permission:Gt.safeGetPermission(m)}],data:{seller:Gt.safeGetActor(m),asset_ids:c,listing_price:i,settlement_symbol:`${t.precision},${t.symbol}`,maker_marketplace:"market.pxj"}};if(await m.transact({actions:[d]})){p(`${l?"Bundle":"NFT"} listed successfully!`),a?.(),s(),r("")}}catch(d){De.error("Listing failed","ListingModal",d instanceof Error?d:new Error(String(d))),f(`Listing failed: ${d instanceof Error?d.message:"Unknown error"}`)}finally{h(!1)}}},className:"modal-form listing-form",children:[Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{htmlFor:"price",children:"Price *"}),Se.jsxs("div",{className:"price-input-group",children:[Se.jsx("input",{type:"number",id:"price",value:i,onChange:e=>r(e.target.value),placeholder:"0.00",step:"0.0001",min:"0",required:!0,disabled:u,className:"price-input"}),Se.jsxs("div",{className:"currency-display",children:[Se.jsx("span",{className:"currency-symbol",children:x.symbol}),Se.jsx("span",{className:"currency-note",children:"(AtomicMarket only supports WAX)"})]})]})]}),Se.jsxs("div",{className:"listing-info",children:[Se.jsxs("p",{className:"info-text",children:[Se.jsx("strong",{children:"Marketplace:"})," AtomicMarket"]}),Se.jsxs("p",{className:"info-text",children:[Se.jsx("strong",{children:"Marketplace Fee:"})," 2%"]}),Se.jsxs("p",{className:"info-text",children:[Se.jsx("strong",{children:"Collection Fee:"})," Varies by collection"]})]}),Se.jsxs("div",{className:"modal-actions",children:[Se.jsx("button",{type:"button",className:"btn-secondary",onClick:g,disabled:u,children:"Cancel"}),Se.jsx("button",{type:"submit",className:"btn-primary",disabled:u||!i,children:u?Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"spinner"}),"Listing..."]}):"List for Sale"})]})]})]})]})}):null},ks=({nft:e,isOpen:t,onClose:s,onSuccess:a})=>{const[n,i]=O.useState(""),[r,l]=O.useState(""),[o,c]=O.useState(!1),{session:d,transferNFT:u}=Ie(),{showSuccess:h,showError:m}=xt(),p=e=>/^[a-z1-5]{12}$/.test(e),f=()=>{o||(i(""),l(""),s())};return t&&e?Se.jsx("div",{className:"modal-overlay",onClick:f,children:Se.jsxs("div",{className:"modal-content transfer-modal",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsx("h2",{children:"Transfer NFT"}),Se.jsx("button",{className:"modal-close",onClick:f,disabled:o,children:"\xd7"})]}),Se.jsxs("div",{className:"modal-body",children:[Se.jsxs("div",{className:"nft-preview",children:[Se.jsx("div",{className:"nft-image",children:e.video?Se.jsx("video",{src:e.video.startsWith("http")?e.video:`https://ipfs.io/ipfs/${e.video}`,muted:!0,loop:!0,autoPlay:!0}):e.img?Se.jsx("img",{src:e.img.startsWith("http")?e.img:`https://ipfs.io/ipfs/${e.img}`,alt:e.name}):Se.jsx("div",{className:"no-image",children:"No Image"})}),Se.jsxs("div",{className:"nft-info",children:[Se.jsx("h3",{children:e.name}),Se.jsx("p",{className:"nft-collection",children:"string"==typeof e.collection?e.collection:e.collection?.name||e.collection?.collection_name||"Unknown"}),Se.jsx("p",{className:"nft-schema",children:e.schema.schema_name}),e.mint_number&&Se.jsxs("p",{className:"nft-mint",children:["Mint #",e.mint_number]})]})]}),Se.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),e&&d&&n.trim())if(p(n.trim())){c(!0);try{if(!u)throw new Error("NFT transfer service is not available");await u(e.asset_id,n.trim())&&(h("Transfer Successful","NFT transferred successfully!"),a?.(),s(),i(""),l(""))}catch(r){De.error("Transfer failed","TransferModal",r),m("Transfer Failed",r instanceof Error?r.message:"Unknown error occurred")}finally{c(!1)}}else m("Invalid Account Name","Please enter a valid WAX account name (12 characters, lowercase letters and numbers 1-5)");else m("Validation Error","Please fill in all required fields")},className:"modal-form transfer-form",children:[Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{htmlFor:"recipient",children:"Recipient WAX Account *"}),Se.jsx("input",{type:"text",id:"recipient",value:n,onChange:e=>i(e.target.value.toLowerCase()),placeholder:"e.g. pixeljourney",maxLength:12,required:!0,disabled:o,className:"recipient-input"}),Se.jsx("small",{className:"input-help",children:"Enter a valid WAX account name (12 characters, lowercase letters and numbers 1-5)"})]}),Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{htmlFor:"memo",children:"Memo (Optional)"}),Se.jsx("input",{type:"text",id:"memo",value:r,onChange:e=>l(e.target.value),placeholder:"Optional transfer message",maxLength:256,disabled:o,className:"memo-input"})]}),Se.jsxs("div",{className:"transfer-warning",children:[Se.jsx("div",{className:"warning-icon",children:"\u26a0\ufe0f"}),Se.jsxs("div",{className:"warning-text",children:[Se.jsx("strong",{children:"Warning:"})," This action cannot be undone. Make sure you trust the recipient and have entered the correct account name."]})]}),Se.jsxs("div",{className:"modal-actions",children:[Se.jsx("button",{type:"button",className:"btn-secondary",onClick:f,disabled:o,children:"Cancel"}),Se.jsx("button",{type:"submit",className:"btn-primary transfer-btn",disabled:o||!n.trim()||!p(n.trim()),children:o?Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"spinner"}),"Transferring..."]}):"Transfer NFT"})]})]})]})]})}):null},_s=({nft:e,isOpen:t,onClose:s,onSuccess:a})=>{const[n,i]=O.useState(""),[r,l]=O.useState(!1),[o,c]=O.useState("warning"),{session:d}=Ie(),{showError:u,showSuccess:h}=xt(),m="BURN",p=()=>{i(""),c("warning")},f=()=>{r||(p(),s())};return t&&e?Se.jsx("div",{className:"modal-overlay",onClick:f,children:Se.jsxs("div",{className:"modal-content burn-modal",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsx("h2",{children:"\ud83d\udd25 Burn NFT"}),Se.jsx("button",{className:"modal-close",onClick:f,disabled:r,children:"\xd7"})]}),Se.jsxs("div",{className:"modal-body",children:[Se.jsxs("div",{className:"nft-preview",children:[Se.jsx("div",{className:"nft-image",children:e.video?Se.jsx("video",{src:e.video.startsWith("http")?e.video:`https://ipfs.io/ipfs/${e.video}`,muted:!0,loop:!0,autoPlay:!0}):e.img?Se.jsx("img",{src:e.img.startsWith("http")?e.img:`https://ipfs.io/ipfs/${e.img}`,alt:e.name}):Se.jsx("div",{className:"no-image",children:"No Image"})}),Se.jsxs("div",{className:"nft-info",children:[Se.jsx("h3",{children:e.name}),Se.jsx("p",{className:"nft-collection",children:"string"==typeof e.collection?e.collection:e.collection?.name||e.collection?.collection_name||"Unknown"}),Se.jsx("p",{className:"nft-schema",children:e.schema.schema_name}),e.mint_number&&Se.jsxs("p",{className:"nft-mint",children:["Mint #",e.mint_number]})]})]}),"warning"===o&&Se.jsxs("div",{className:"burn-warning-step",children:[Se.jsxs("div",{className:"danger-warning",children:[Se.jsx("div",{className:"warning-icon",children:"\ud83d\udea8"}),Se.jsxs("div",{className:"warning-content",children:[Se.jsx("h3",{children:"PERMANENT ACTION WARNING"}),Se.jsxs("ul",{className:"warning-list",children:[Se.jsxs("li",{children:["This action will ",Se.jsx("strong",{children:"permanently destroy"})," your NFT"]}),Se.jsxs("li",{children:["The NFT will be ",Se.jsx("strong",{children:"completely removed"})," from the blockchain"]}),Se.jsxs("li",{children:["This action ",Se.jsx("strong",{children:"cannot be undone or reversed"})]}),Se.jsxs("li",{children:["You will ",Se.jsx("strong",{children:"not receive any compensation"})]}),Se.jsxs("li",{children:["The NFT will ",Se.jsx("strong",{children:"disappear forever"})]})]})]})]}),Se.jsxs("div",{className:"burn-reasons",children:[Se.jsx("h4",{children:"Common reasons for burning NFTs:"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"Reducing supply to increase rarity"}),Se.jsx("li",{children:"Participating in burn-to-earn mechanics"}),Se.jsx("li",{children:"Collection cleanup or rebranding"}),Se.jsx("li",{children:"Accidental duplicate mints"})]})]}),Se.jsxs("div",{className:"modal-actions",children:[Se.jsx("button",{type:"button",className:"btn-secondary",onClick:f,children:"Cancel"}),Se.jsx("button",{type:"button",className:"btn-danger",onClick:()=>{c("confirm")},children:"I Understand, Proceed"})]})]}),"confirm"===o&&Se.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),e&&d){if(Je.isPixalPFP(e.template.template_id)){const t=e.data?.WaxRock;if(t&&Je.isValidWaxRock(t))return void u(`This is a rare WaxRock Pixal PFP (${t}) and cannot be burned. WaxRock Pixals are protected from burning and recycling on our platform.`,"Protected NFT",8e3)}if(n.toUpperCase()===m){l(!0);try{const t={account:"atomicassets",name:"burnasset",authorization:[{actor:Gt.safeGetActor(d),permission:Gt.safeGetPermission(d)}],data:{asset_owner:Gt.safeGetActor(d),asset_id:e.asset_id}};await d.transact({actions:[t]})&&(h("NFT burned successfully!","Burn Complete"),a?.(),s(),p())}catch(i){De.error("Burn failed","BurnModal",i),u(`Burn failed: ${i instanceof Error?i.message:"Unknown error"}`,"Burn Failed")}finally{l(!1)}}else u(`Please type "${m}" to confirm`,"Confirmation Required")}else u("Session error. Please try again.","Connection Error")},className:"modal-form burn-confirm-step",children:[Se.jsxs("div",{className:"final-warning",children:[Se.jsx("div",{className:"warning-icon",children:"\u26a0\ufe0f"}),Se.jsxs("p",{children:[Se.jsx("strong",{children:"FINAL WARNING:"})," You are about to permanently destroy this NFT. This action cannot be undone."]})]}),Se.jsxs("div",{className:"form-group",children:[Se.jsxs("label",{htmlFor:"confirmText",children:["Type ",Se.jsxs("strong",{children:['"',m,'"']})," to confirm:"]}),Se.jsx("input",{type:"text",id:"confirmText",value:n,onChange:e=>i(e.target.value),placeholder:`Type "${m}" here`,required:!0,disabled:r,className:"confirm-input",autoComplete:"off"})]}),Se.jsxs("div",{className:"modal-actions",children:[Se.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>c("warning"),disabled:r,children:"Back"}),Se.jsx("button",{type:"submit",className:"btn-danger burn-btn",disabled:r||n.toUpperCase()!==m,children:r?Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"spinner"}),"Burning..."]}):"\ud83d\udd25 Burn NFT Forever"})]})]})]})]})}):null},Ss=({nfts:e,isOpen:t,onClose:s,onSuccess:a})=>{const[n,i]=O.useState({}),[r,l]=O.useState(""),[o,c]=O.useState(!1),[d,u]=O.useState(0),[h,m]=O.useState({}),[p,f]=O.useState(!1),[x,g]=O.useState(!0),[v,j]=O.useState("name_asc"),{session:y}=Ie(),{showSuccess:b,showError:N}=xt(),w="WAX",k=8,_=(e,t)=>{i(s=>({...s,[e]:t}))},S=O.useCallback(async()=>{if(!e.length||!t)return;f(!0);const s={},a=async(e,t=3)=>{try{const t=new AbortController,s=setTimeout(()=>t.abort(),1e4),a=await fetch(e,{signal:t.signal,headers:{Accept:"application/json","Content-Type":"application/json"}});if(clearTimeout(s),!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);return await a.json()}catch(s){if(t>0&&s instanceof Error&&!s.name.includes("AbortError"))return De.warn(`Retrying API call (${3-t+1}/3)`,"BulkListingModal.fetchWithRetry",{error:s.message,url:e}),await new Promise(e=>setTimeout(e,1e3*(3-t+1))),a(e,t-1);throw s}};try{const t=e.reduce((e,t)=>{const s=t.collection.collection_name;return e[s]||(e[s]=[]),e[s].push(t),e},{}),l=Object.entries(t);let o=0;for(const[e,c]of l){try{const t=`${dt.atomicMarketAPI}/atomicmarket/v1/sales?state=3&collection_name=${e}&limit=100&order=desc&sort=updated`;let r=null;try{r=await a(t)}catch(n){De.error(`Primary API failed for ${e}, trying fallback:`,"BulkListingModal.fetchPriceSuggestions",n);try{const t=`${dt.atomicMarketAPI}/atomicmarket/v1/sales?collection_name=${e}&state=3&limit=50&order=desc`;r=await a(t,1)}catch(i){De.error(`Fallback API also failed for ${e}:`,"BulkListingModal.fetchPriceSuggestions",i),C(c,s);continue}}if((e=>"object"==typeof e&&null!==e&&"success"in e&&"data"in e&&Array.isArray(e.data))(r)&&r.success&&r.data.length>0){const e=r.data.filter(e=>e.price?.amount).map(e=>{const t=parseFloat(e.price.amount),s=e.price.token_precision||8;return t/Math.pow(10,s)}).filter(e=>e>0&&e<1e4);if(e.length>0){const t=e.sort((e,t)=>e-t),a=Math.floor(.25*t.length),n=Math.floor(.75*t.length),i=t[n]-t[a],r=t[a]-1.5*i,l=t[n]+1.5*i,d=t.filter(e=>e>=r&&e<=l);if(d.length>0){const e=Math.min(...d),t=d.reduce((e,t)=>e+t,0)/d.length,a=d[Math.floor(d.length/2)];let n,i;n=d.length>=10?Math.max(1.03*e,.98*a):Math.max(1.05*e,.95*t),i=d.length>=20?"high":d.length>=10?"medium":"low",c.forEach(a=>{s[a.asset_id]={floorPrice:e,averagePrice:t,suggestedPrice:n,confidence:i,sampleSize:d.length}}),o++}else C(c,s)}else C(c,s)}else C(c,s)}catch(r){De.error(`Failed to process collection ${e}:`,"BulkListingModal.fetchPriceSuggestions",r),C(c,s)}l.indexOf([e,c])<l.length-1&&await new Promise(e=>setTimeout(e,500))}0===o?N("Price Analysis","Unable to fetch current market data. Using default pricing suggestions."):o<l.length&&De.warn(`Price data available for ${o}/${l.length} collections`),m(s)}catch(r){De.error("Error fetching price suggestions:","BulkListingModal.fetchPriceSuggestions",r),N("Price Analysis Failed","Unable to analyze market prices. Please set prices manually."),e.forEach(e=>{s[e.asset_id]={floorPrice:1,averagePrice:2,suggestedPrice:1.5,confidence:"low",sampleSize:0}}),m(s)}finally{f(!1)}},[e,t,N]),C=(e,t)=>{e.forEach(e=>{t[e.asset_id]={floorPrice:1,averagePrice:2,suggestedPrice:1.5,confidence:"low",sampleSize:0}})};O.useEffect(()=>{t&&e.length>0&&S()},[t,e,S]);const A=O.useMemo(()=>{const t=[...e];switch(v){case"name_asc":return t.sort((e,t)=>(e.name||"").localeCompare(t.name||""));case"name_desc":return t.sort((e,t)=>(t.name||"").localeCompare(e.name||""));case"collection_asc":return t.sort((e,t)=>e.collection.collection_name.localeCompare(t.collection.collection_name));case"collection_desc":return t.sort((e,t)=>t.collection.collection_name.localeCompare(e.collection.collection_name));case"mint_asc":return t.sort((e,t)=>(e.mint_number||0)-(t.mint_number||0));case"mint_desc":return t.sort((e,t)=>(t.mint_number||0)-(e.mint_number||0));case"price_asc":return t.sort((e,t)=>parseFloat(n[e.asset_id]||"0")-parseFloat(n[t.asset_id]||"0"));case"price_desc":return t.sort((e,t)=>{const s=parseFloat(n[e.asset_id]||"0");return parseFloat(n[t.asset_id]||"0")-s});default:return t}},[e,v,n]);O.useEffect(()=>{x&&e.length>0&&S()},[x,e,S]);const P=()=>e.reduce((e,t)=>{const s=parseFloat(n[t.asset_id]||"0");return e+(isNaN(s)?0:s)},0);return t?Se.jsx("div",{className:"modal-overlay",onClick:s,children:Se.jsxs("div",{className:"modal-content bulk-listing-modal",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsx("h2",{children:"Bulk List NFTs"}),Se.jsx("button",{className:"modal-close",onClick:s,children:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Se.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Se.jsxs("div",{className:"modal-body",children:[Se.jsxs("div",{className:"listing-summary",children:[Se.jsx("h3",{children:"Listing Summary"}),Se.jsxs("p",{children:["You are about to list ",Se.jsxs("strong",{children:[e.length," NFT",1!==e.length?"s":""]})]}),Se.jsxs("p",{className:"total-value",children:["Total Value: ",Se.jsx("strong",{children:Me(P())})]})]}),Se.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),!y||0===e.length)return void N("Validation Error","Please connect your wallet and select NFTs to list");const r=e.filter(e=>{const t=n[e.asset_id];return!t||isNaN(parseFloat(t))||parseFloat(t)<=0});if(r.length>0)N("Invalid Prices",`Please set valid prices for all NFTs. ${r.length} NFT(s) have invalid prices.`);else{c(!0),u(0);try{const t=e.map(e=>{const t=`${parseFloat(n[e.asset_id]).toFixed(k)} ${w}`;return{account:"atomicmarket",name:"announcesale",authorization:[{actor:Gt.safeGetActor(y),permission:Gt.safeGetPermission(y)}],data:{seller:Gt.safeGetActor(y),asset_ids:[e.asset_id],listing_price:t,settlement_symbol:`${k},${w}`,maker_marketplace:"market.pxj"}}}),r=5,o=[];for(let e=0;e<t.length;e+=r)o.push(t.slice(e,e+r));let c=0;for(const e of o){await y.transact({actions:e})&&(c++,u(c/o.length*100))}b("Listing Successful",`Successfully listed ${e.length} NFT(s) on the marketplace!`),a?.(),s(),i({}),l("")}catch(o){De.error("Bulk listing failed:","BulkListingModal.handleSubmit",o),N("Listing Failed",o instanceof Error?o.message:"Unknown error occurred")}finally{c(!1),u(0)}}},className:"listing-form",children:[Se.jsxs("div",{className:"smart-pricing-section",children:[Se.jsxs("div",{className:"pricing-header",children:[Se.jsx("h4",{children:"Smart Pricing Tools"}),Se.jsx("button",{type:"button",className:"toggle-suggestions",onClick:()=>g(!x),children:x?"\ud83d\udcca Hide Analysis":"\ud83d\udcca Show Analysis"})]}),x&&Se.jsx("div",{className:"price-analysis",children:p?Se.jsxs("div",{className:"loading-suggestions",children:[Se.jsx("div",{className:"spinner"}),Se.jsx("span",{children:"Analyzing market data..."})]}):Se.jsxs("div",{className:"suggestion-controls",children:[Se.jsx("button",{type:"button",className:"btn-suggestion suggested",onClick:()=>{const t={};e.forEach(e=>{const s=h[e.asset_id];s&&(t[e.asset_id]=Re(s.suggestedPrice,4))}),i(t)},disabled:o||0===Object.keys(h).length,title:"Apply AI-recommended prices based on market analysis",children:"\ud83c\udfaf Apply Suggested Prices"}),Se.jsx("button",{type:"button",className:"btn-suggestion floor",onClick:()=>{const t={};e.forEach(e=>{const s=h[e.asset_id];s&&(t[e.asset_id]=Re(.99*s.floorPrice,4))}),i(t)},disabled:o||0===Object.keys(h).length,title:"Price 1% below current floor prices for quick sales",children:"\u26a1 Quick Sale (Floor -1%)"})]})}),Se.jsxs("div",{className:"bulk-price-controls",children:[Se.jsx("h5",{children:"Manual Bulk Pricing"}),Se.jsxs("div",{className:"bulk-input-group",children:[Se.jsx("input",{type:"number",value:r,onChange:e=>l(e.target.value),placeholder:"Set same price for all",step:"0.0001",min:"0",disabled:o}),Se.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>{if(!r)return;const t={};e.forEach(e=>{t[e.asset_id]=r}),i(t)},disabled:!r||o,children:"Apply to All"})]})]})]}),Se.jsxs("div",{className:"nft-pricing-list",children:[Se.jsxs("div",{className:"pricing-header",children:[Se.jsx("h4",{children:"Individual Pricing"}),e.length>1&&Se.jsxs("div",{className:"sort-container",children:[Se.jsx("label",{htmlFor:"nft-sort",children:"Sort by:"}),Se.jsxs("select",{id:"nft-sort",className:"sort-select",value:v,onChange:e=>j(e.target.value),children:[Se.jsx("option",{value:"name_asc",children:"Name (A-Z)"}),Se.jsx("option",{value:"name_desc",children:"Name (Z-A)"}),Se.jsx("option",{value:"collection_asc",children:"Collection (A-Z)"}),Se.jsx("option",{value:"collection_desc",children:"Collection (Z-A)"}),Se.jsx("option",{value:"mint_asc",children:"Mint # (Low-High)"}),Se.jsx("option",{value:"mint_desc",children:"Mint # (High-Low)"}),Se.jsx("option",{value:"price_asc",children:"Price (Low-High)"}),Se.jsx("option",{value:"price_desc",children:"Price (High-Low)"})]})]})]}),Se.jsx("div",{className:"bulk-listing-pricing-list-container",children:A.map(e=>{const t=h[e.asset_id];return Se.jsxs("div",{className:"bulk-listing-nft-pricing-item",children:[Se.jsxs("div",{className:"bulk-listing-nft-info",children:[Se.jsx("div",{className:"bulk-listing-nft-image",children:Se.jsx("img",{src:e.img?.startsWith("http")?e.img:`https://ipfs.io/ipfs/${e.img}`,alt:e.name,onError:e=>{e.target.src="https://pixeljourney.xyz/img/toppixals/10.webp"}})}),Se.jsxs("div",{className:"bulk-listing-nft-details",children:[Se.jsx("span",{className:"bulk-listing-nft-name",children:e.name}),Se.jsx("span",{className:"bulk-listing-nft-collection",children:"string"==typeof e.collection?e.collection:e.collection?.collection_name||e.collection?.name||"Unknown"}),e.mint_number&&Se.jsxs("span",{className:"bulk-listing-nft-mint",children:["#",e.mint_number]}),t&&Se.jsxs("div",{className:"bulk-listing-price-suggestions",children:[Se.jsxs("div",{className:"bulk-listing-suggestion-row",children:[Se.jsx("span",{className:"bulk-listing-suggestion-label",children:"Floor:"}),Se.jsx("span",{className:"bulk-listing-suggestion-value",children:Me(t.floorPrice)})]}),Se.jsxs("div",{className:"bulk-listing-suggestion-row",children:[Se.jsx("span",{className:"bulk-listing-suggestion-label",children:"Avg:"}),Se.jsx("span",{className:"bulk-listing-suggestion-value",children:Me(t.averagePrice)})]}),Se.jsxs("div",{className:"bulk-listing-suggestion-row",children:[Se.jsx("span",{className:"bulk-listing-suggestion-label",children:"Suggested:"}),Se.jsx("span",{className:`bulk-listing-suggestion-value confidence-${t.confidence}`,children:Me(t.suggestedPrice)}),Se.jsx("span",{className:"bulk-listing-confidence-badge",children:t.confidence})]}),Se.jsxs("div",{className:"bulk-listing-sample-size",children:["Based on ",t.sampleSize," recent sales"]})]})]})]}),Se.jsxs("div",{className:"bulk-listing-price-input-section",children:[Se.jsxs("div",{className:"bulk-listing-price-input",children:[Se.jsx("input",{type:"number",value:n[e.asset_id]||"",onChange:t=>_(e.asset_id,t.target.value),placeholder:"Price in WAX",step:"0.0001",min:"0",required:!0,disabled:o}),Se.jsx("span",{className:"currency-label",children:"WAX"})]}),t&&Se.jsxs("div",{className:"bulk-listing-quick-price-buttons",children:[Se.jsx("button",{type:"button",className:"bulk-listing-quick-price-btn suggested",onClick:()=>_(e.asset_id,Re(t.suggestedPrice,4)),disabled:o,title:"Use suggested price",children:"\ud83d\udca1"}),Se.jsx("button",{type:"button",className:"bulk-listing-quick-price-btn floor",onClick:()=>_(e.asset_id,Re(.99*t.floorPrice,4)),disabled:o,title:"Use floor price -1%",children:"\u26a1"})]})]})]},e.asset_id)})})]}),o&&Se.jsxs("div",{className:"listing-progress",children:[Se.jsx("div",{className:"progress-bar",children:Se.jsx("div",{className:"progress-fill",style:{width:`${d}%`}})}),Se.jsxs("p",{children:["Listing NFTs... ",Math.round(d),"% complete"]})]}),Se.jsxs("div",{className:"modal-actions",children:[Se.jsx("button",{type:"button",className:"btn-secondary",onClick:s,disabled:o,children:"Cancel"}),Se.jsx("button",{type:"submit",className:"btn-primary",disabled:o||0===P(),children:o?"Listing...":`List ${e.length} NFT${1!==e.length?"s":""}`})]})]})]})]})}):null},Cs=({nfts:e,isOpen:t,onClose:s,onSuccess:a})=>{const[n,i]=O.useState(""),[r,l]=O.useState(""),[o,c]=O.useState(!1),[d,u]=O.useState(0),[h,m]=O.useState("name_asc"),{session:p,bulkTransferNFT:f}=Ie(),{showError:x,showSuccess:g}=xt(),v=O.useMemo(()=>{const t=[...e];switch(h){case"name_asc":return t.sort((e,t)=>(e.name||"").localeCompare(t.name||""));case"name_desc":return t.sort((e,t)=>(t.name||"").localeCompare(e.name||""));case"collection_asc":return t.sort((e,t)=>e.collection.collection_name.localeCompare(t.collection.collection_name));case"collection_desc":return t.sort((e,t)=>t.collection.collection_name.localeCompare(e.collection.collection_name));case"mint_asc":return t.sort((e,t)=>(e.mint_number||0)-(t.mint_number||0));case"mint_desc":return t.sort((e,t)=>(t.mint_number||0)-(e.mint_number||0));default:return t}},[e,h]);return t?Se.jsx("div",{className:"modal-overlay",onClick:s,children:Se.jsxs("div",{className:"modal-content bulk-transfer-modal",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsx("h2",{children:"Bulk Transfer NFTs"}),Se.jsx("button",{className:"modal-close",onClick:s,children:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Se.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Se.jsxs("div",{className:"modal-body",children:[Se.jsxs("div",{className:"transfer-summary",children:[Se.jsx("h3",{children:"Transfer Summary"}),Se.jsxs("p",{children:["You are about to transfer ",Se.jsxs("strong",{children:[e.length," NFT",1!==e.length?"s":""]})]}),Se.jsxs("div",{className:"collection-breakdown",children:[Se.jsx("h4",{children:"Collection Breakdown"}),Object.entries(e.reduce((e,t)=>{const s=t.collection.collection_name;return e[s]=(e[s]||0)+1,e},{})).map(([e,t])=>Se.jsxs("div",{className:"collection-item",children:[Se.jsx("span",{className:"collection-name",children:e}),Se.jsxs("span",{className:"collection-count",children:[t," NFT",1!==t?"s":""]})]},e))]}),Se.jsxs("div",{className:"rarity-breakdown",children:[Se.jsx("h4",{children:"Rarity Distribution"}),Object.entries(e.reduce((e,t)=>{const s=t.template?.immutable_data?.rarity||t.data?.rarity||"Unknown";return e[s.toString()]=(e[s.toString()]||0)+1,e},{})).map(([e,t])=>Se.jsxs("div",{className:"rarity-item",children:[Se.jsx("span",{className:"rarity-name",children:e}),Se.jsx("span",{className:"rarity-count",children:t})]},e))]}),Se.jsxs("div",{className:"nft-preview-section",children:[Se.jsxs("div",{className:"preview-header",children:[Se.jsx("h4",{children:"NFT Preview"}),e.length>1&&Se.jsxs("div",{className:"sort-container",children:[Se.jsx("label",{htmlFor:"transfer-sort",children:"Sort by:"}),Se.jsxs("select",{id:"transfer-sort",className:"sort-select",value:h,onChange:e=>m(e.target.value),children:[Se.jsx("option",{value:"name_asc",children:"Name (A-Z)"}),Se.jsx("option",{value:"name_desc",children:"Name (Z-A)"}),Se.jsx("option",{value:"collection_asc",children:"Collection (A-Z)"}),Se.jsx("option",{value:"collection_desc",children:"Collection (Z-A)"}),Se.jsx("option",{value:"mint_asc",children:"Mint # (Low-High)"}),Se.jsx("option",{value:"mint_desc",children:"Mint # (High-Low)"})]})]})]}),Se.jsxs("div",{className:"nft-preview-list",children:[v.slice(0,5).map(e=>Se.jsxs("div",{className:"nft-preview-item",children:[Se.jsx("img",{src:e.img?.startsWith("http")?e.img:`https://ipfs.io/ipfs/${e.img}`,alt:e.name,onError:e=>{e.target.src="https://pixeljourney.xyz/img/toppixals/10.webp"}}),Se.jsx("div",{className:"nft-info-bulk",children:Se.jsxs("div",{className:"nft-details",children:[Se.jsx("span",{className:"nft-name",children:e.name}),Se.jsx("span",{className:"nft-collection",children:"string"==typeof e.collection?e.collection:e.collection?.collection_name||e.collection?.name||"Unknown"}),Se.jsxs("span",{className:"nft-mint",children:["#",e.mint_number||"N/A"]}),Se.jsxs("span",{className:"nft-id",children:["ID: ",e.asset_id]})]})})]},e.asset_id)),e.length>5&&Se.jsxs("div",{className:"nft-preview-more",children:["+",e.length-5," more NFTs"]})]})]})]}),Se.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),!p||!n.trim()||0===e.length)return void x("Please fill in all required fields","Validation Error");const o=n.trim().toLowerCase();if(o.length<1||o.length>12)x("Account name must be between 1 and 12 characters","Validation Error");else if(/^[a-z1-5.]+$/.test(o)){c(!0),u(0);try{if(!f)throw De.error("bulkTransferNFT service not available","BulkTransferModal"),new Error("Bulk transfer service not available");const t=e.map(e=>e.asset_id);await f(o,t,r||"Bulk transfer from PxMarket"),u(100),g(`Successfully transferred ${e.length} NFT(s) to ${o}!`,"Transfer Complete"),a?.(),s(),i(""),l("")}catch(d){De.error("Bulk transfer failed","BulkTransferModal.handleSubmit",d,{nftCount:e.length,recipient:n}),x(`Transfer failed: ${d instanceof Error?d.message:"Unknown error"}`,"Transfer Failed")}finally{c(!1),u(0)}}else x("Account name can only contain lowercase letters, numbers 1-5, and dots","Validation Error")},className:"transfer-form",children:[Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{htmlFor:"recipient",children:"Recipient Account *"}),Se.jsx("input",{type:"text",id:"recipient",value:n,onChange:e=>i(e.target.value),placeholder:"Enter WAX account name",required:!0,disabled:o,maxLength:12}),Se.jsx("small",{className:"form-help",children:"Enter a valid WAX account name (1-12 characters, lowercase letters, numbers 1-5, dots)"})]}),Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{htmlFor:"memo",children:"Memo (Optional)"}),Se.jsx("input",{type:"text",id:"memo",value:r,onChange:e=>l(e.target.value),placeholder:"Optional transfer memo",disabled:o,maxLength:256})]}),o&&Se.jsxs("div",{className:"transfer-progress",children:[Se.jsx("div",{className:"progress-bar",children:Se.jsx("div",{className:"progress-fill",style:{width:`${d}%`}})}),Se.jsxs("p",{children:["Transferring... ",Math.round(d),"% complete"]})]}),Se.jsxs("div",{className:"modal-actions",children:[Se.jsx("button",{type:"button",className:"btn-secondary",onClick:s,disabled:o,children:"Cancel"}),Se.jsx("button",{type:"submit",className:"btn-primary",disabled:o||!n.trim(),children:o?"Transferring...":`Transfer ${e.length} NFT${1!==e.length?"s":""}`})]})]})]})]})}):null},As=({nfts:e,isOpen:t,onClose:s,onSuccess:a})=>{const[n,i]=O.useState(()=>e.map(e=>({nft:e,recipient:""}))),[r,l]=O.useState(""),[o,c]=O.useState(""),[d,u]=O.useState(!1),[h,m]=O.useState(0),[p,f]=O.useState(10),[x,g]=O.useState("name_asc"),{session:v}=Ie(),{showSuccess:j,showError:y}=xt(),b=O.useMemo(()=>{const e=[...n];switch(x){case"name_asc":return e.sort((e,t)=>(e.nft.name||"").localeCompare(t.nft.name||""));case"name_desc":return e.sort((e,t)=>(t.nft.name||"").localeCompare(e.nft.name||""));case"collection_asc":return e.sort((e,t)=>e.nft.collection.collection_name.localeCompare(t.nft.collection.collection_name));case"collection_desc":return e.sort((e,t)=>t.nft.collection.collection_name.localeCompare(e.nft.collection.collection_name));case"mint_asc":return e.sort((e,t)=>(e.nft.mint_number||0)-(t.nft.mint_number||0));case"mint_desc":return e.sort((e,t)=>(t.nft.mint_number||0)-(e.nft.mint_number||0));default:return e}},[n,x]);D.useEffect(()=>{i(e.map(e=>({nft:e,recipient:""})))},[e]);if(!t)return null;const N=n.filter(e=>e.recipient.trim()),w=N.length===n.length;return Se.jsx("div",{className:"modal-overlay",onClick:s,children:Se.jsxs("div",{className:"modal-content distribute-modal",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsx("h2",{children:"Distribute NFTs"}),Se.jsx("button",{className:"modal-close",onClick:s,children:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Se.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Se.jsxs("div",{className:"modal-body",children:[Se.jsxs("div",{className:"distribute-summary",children:[Se.jsx("h3",{children:"Distribution Summary"}),Se.jsxs("p",{children:["You are about to distribute ",Se.jsxs("strong",{children:[e.length," NFT",1!==e.length?"s":""]})," to individual recipients"]}),Se.jsxs("div",{className:"bulk-addresses-section",children:[Se.jsx("h4",{children:"Bulk Address Input"}),Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{htmlFor:"bulk-addresses",children:"Comma-separated addresses (optional)"}),Se.jsx("textarea",{id:"bulk-addresses",className:"form-control",value:r,onChange:e=>(e=>{if(l(e),e.trim()){const t=e.split(",").map(e=>e.trim()).filter(e=>e);t.length>0&&i(e=>e.map((e,s)=>({...e,recipient:t[s%t.length]||""})))}})(e.target.value),placeholder:"pixeljourney,market.pxj,council.pxj",rows:3}),Se.jsxs("div",{className:"bulk-actions",children:[Se.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{if(!r.trim())return void y("No addresses provided","Please enter comma-separated addresses first");const e=r.split(",").map(e=>e.trim()).filter(e=>e);0!==e.length?i(t=>t.map(t=>({...t,recipient:e[Math.floor(Math.random()*e.length)]}))):y("Invalid addresses","Please provide valid comma-separated addresses")},disabled:!r.trim(),children:"\ud83c\udfb2 Randomize Distribution"}),Se.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{i(e=>e.map(e=>({...e,recipient:""}))),l("")},children:"\ud83d\uddd1\ufe0f Clear All"})]})]})]}),Se.jsxs("div",{className:"batch-config",children:[Se.jsx("h4",{children:"Transaction Settings"}),Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{htmlFor:"batch-size",children:"NFTs per transaction (5-200)"}),Se.jsx("input",{type:"number",id:"batch-size",className:"form-control",value:p,onChange:e=>f(Math.max(5,Math.min(200,parseInt(e.target.value)||10))),min:5,max:200}),Se.jsx("small",{children:"Larger batches are more efficient but may fail if too large"})]})]})]}),Se.jsxs("div",{className:"distribution-list",children:[Se.jsxs("div",{className:"distribution-header",children:[Se.jsxs("h4",{children:["Individual Recipients (",N.length,"/",n.length," configured)"]}),e.length>1&&Se.jsxs("div",{className:"sort-container",children:[Se.jsx("label",{htmlFor:"distribute-sort",children:"Sort by:"}),Se.jsxs("select",{id:"distribute-sort",className:"sort-select",value:x,onChange:e=>g(e.target.value),children:[Se.jsx("option",{value:"name_asc",children:"Name (A-Z)"}),Se.jsx("option",{value:"name_desc",children:"Name (Z-A)"}),Se.jsx("option",{value:"collection_asc",children:"Collection (A-Z)"}),Se.jsx("option",{value:"collection_desc",children:"Collection (Z-A)"}),Se.jsx("option",{value:"mint_asc",children:"Mint # (Low-High)"}),Se.jsx("option",{value:"mint_desc",children:"Mint # (High-Low)"})]})]})]}),Se.jsx("div",{className:"distribution-items",children:b.map(({nft:e,recipient:t})=>Se.jsxs("div",{className:"distribution-item",children:[Se.jsxs("div",{className:"nft-preview",children:[Se.jsx("img",{src:e.img?.startsWith("http")?e.img:`https://ipfs.io/ipfs/${e.img}`,alt:e.name,onError:e=>{e.target.src="https://pixeljourney.xyz/img/toppixals/10.webp"}}),Se.jsxs("div",{className:"nft-info",children:[Se.jsx("span",{className:"nft-name",children:e.name}),Se.jsx("span",{className:"nft-collection",children:e.collection.collection_name}),Se.jsxs("span",{className:"nft-mint",children:["#",e.mint_number||"N/A"]})]})]}),Se.jsx("div",{className:"recipient-input",children:Se.jsx("input",{type:"text",className:"form-control",value:t,onChange:t=>((e,t)=>{i(s=>s.map(s=>s.nft.asset_id===e?{...s,recipient:t}:s))})(e.asset_id,t.target.value),placeholder:"Recipient account name"})})]},e.asset_id))})]}),Se.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!v)return void y("Wallet Required","Please connect your wallet first");const t=n.filter(e=>!e.recipient.trim());if(t.length>0)y("Missing Recipients",`Please specify recipients for all ${t.length} NFT(s)`);else{u(!0),m(0);try{const e=n.length;let t=0;for(let s=0;s<n.length;s+=p){const a=n.slice(s,s+p),i=a.map(({nft:e,recipient:t})=>({account:"atomicassets",name:"transfer",authorization:[{actor:v.actor.toString(),permission:"active"}],data:{from:v.actor.toString(),to:t.trim(),asset_ids:[e.asset_id],memo:o||"Distributed via PxMarket"}})),r=await v.transact({actions:i},{expireSeconds:30});t+=a.length,m(t/e*100),De.info("Batch distribution completed","DistributeModal",{batchSize:a.length,completed:t,total:e,transactionId:r.transaction})}j("Distribution Complete",`Successfully distributed ${e} NFT${1!==e?"s":""}`),a?.(),s()}catch(i){De.error("Distribution failed","DistributeModal",i),y("Distribution Failed",i instanceof Error?i.message:"Unknown error occurred")}finally{u(!1),m(0)}}},className:"distribute-form",children:[Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{htmlFor:"memo",children:"Memo (optional)"}),Se.jsx("input",{type:"text",id:"memo",className:"form-control",value:o,onChange:e=>c(e.target.value),placeholder:"Optional transfer memo",maxLength:256})]}),d&&Se.jsxs("div",{className:"progress-container",children:[Se.jsx("div",{className:"progress-bar",children:Se.jsx("div",{className:"progress-fill",style:{width:`${h}%`}})}),Se.jsxs("p",{children:["Distributing NFTs... ",Math.round(h),"%"]})]}),Se.jsxs("div",{className:"form-actions",children:[Se.jsx("button",{type:"button",className:"btn btn-secondary",onClick:s,disabled:d,children:"Cancel"}),Se.jsx("button",{type:"submit",className:"btn btn-primary",disabled:d||!w,children:d?"Distributing...":`Distribute ${e.length} NFT${1!==e.length?"s":""}`})]})]})]})]})})},Ps=({nfts:e,isOpen:t,onClose:s,onSuccess:a})=>{const[n,i]=O.useState(!1),[r,l]=O.useState(0),[o,c]=O.useState(""),{session:d}=Ie(),{showError:u,showSuccess:h,showWarning:m}=xt();return t?Se.jsx("div",{className:"modal-overlay",onClick:s,children:Se.jsxs("div",{className:"modal-content bulk-burn-modal",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsx("h2",{children:"Bulk Burn NFTs"}),Se.jsx("button",{className:"modal-close",onClick:s,children:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Se.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Se.jsxs("div",{className:"modal-body",children:[Se.jsxs("div",{className:"burn-warning",children:[Se.jsx("div",{className:"warning-icon",children:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),Se.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),Se.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})}),Se.jsx("h3",{children:"\u26a0\ufe0f Warning: This action cannot be undone!"}),Se.jsxs("p",{children:["You are about to permanently burn ",Se.jsxs("strong",{children:[e.length," NFT",1!==e.length?"s":""]}),". This will completely destroy these assets and they cannot be recovered."]})]}),Se.jsxs("div",{className:"nfts-to-burn",children:[Se.jsx("h4",{children:"NFTs to be burned:"}),Se.jsx("div",{className:"burn-list-container",children:e.map(e=>Se.jsxs("div",{className:"burn-nft-item",children:[Se.jsx("img",{src:e.img?.startsWith("http")?e.img:`https://ipfs.io/ipfs/${e.img}`,alt:e.name,onError:e=>{e.target.src="https://pixeljourney.xyz/img/toppixals/10.webp"}}),Se.jsxs("div",{className:"nft-details",children:[Se.jsx("span",{className:"nft-name",children:e.name}),Se.jsx("span",{className:"nft-collection",children:"string"==typeof e.collection?e.collection:e.collection?.collection_name||e.collection?.name||"Unknown"}),e.mint_number&&Se.jsxs("span",{className:"nft-mint",children:["#",e.mint_number]}),Se.jsxs("span",{className:"nft-id",children:["ID: ",e.asset_id]})]})]},e.asset_id))})]}),Se.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),!d||0===e.length)return void u("Please connect your wallet and select NFTs to burn","Wallet Required");const n=[],r=e.filter(e=>{if(Je.isPixalPFP(e.template.template_id)){const t=e.data?.WaxRock;if(t&&Je.isValidWaxRock(t))return n.push(e),!1}return!0});if(n.length>0){const e=n.map(e=>`${e.name} (${e.data?.WaxRock})`).join(", ");if(m(`${n.length} WaxRock Pixal PFP(s) were excluded from burning for protection: ${e}. WaxRock Pixals are protected from burning and recycling on our platform.`,"Protected NFTs Excluded",8e3),0===r.length)return void u("No NFTs remaining to burn after excluding WaxRock Pixals.","No Burnable NFTs")}if("BURN"===o){i(!0),l(0);try{const e=r.map(e=>({account:"atomicassets",name:"burnasset",authorization:[{actor:Gt.safeGetActor(d),permission:Gt.safeGetPermission(d)}],data:{asset_owner:Gt.safeGetActor(d),asset_id:e.asset_id}})),t=10,n=[];for(let s=0;s<e.length;s+=t)n.push(e.slice(s,s+t));let i=0;for(const s of n){await d.transact({actions:s})&&(i++,l(i/n.length*100))}h(`Successfully burned ${r.length} NFT(s)!`,"Burn Complete"),a?.(),s(),c("")}catch(p){De.error("Bulk burn failed","BulkBurnModal.handleSubmit",p,{nftCount:r.length}),u(`Burn failed: ${p instanceof Error?p.message:"Unknown error"}`,"Burn Failed")}finally{i(!1),l(0)}}else u('Please type "BURN" to confirm this action',"Confirmation Required")},className:"burn-form",children:[Se.jsxs("div",{className:"confirmation-section",children:[Se.jsxs("label",{htmlFor:"confirmText",children:["Type ",Se.jsx("strong",{children:'"BURN"'})," to confirm this action:"]}),Se.jsx("input",{id:"confirmText",type:"text",value:o,onChange:e=>c(e.target.value.toUpperCase()),placeholder:"Type BURN to confirm",disabled:n,required:!0})]}),n&&Se.jsxs("div",{className:"burn-progress",children:[Se.jsx("div",{className:"progress-bar",children:Se.jsx("div",{className:"progress-fill",style:{width:`${r}%`}})}),Se.jsxs("p",{children:["Burning NFTs... ",Math.round(r),"% complete"]})]}),Se.jsxs("div",{className:"modal-actions",children:[Se.jsx("button",{type:"button",className:"btn-secondary",onClick:s,disabled:n,children:"Cancel"}),Se.jsx("button",{type:"submit",className:"btn-danger",disabled:n||"BURN"!==o,children:n?"Burning...":`\ud83d\udd25 Burn ${e.length} NFT${1!==e.length?"s":""}`})]})]})]})]})}):null},Ts=[{id:781515,pxj:1,wuf:22,pxjUpgrade:0,name:"Pixal PFP",type:"pixals"},{id:820134,pxj:2.22,wuf:5,pxjUpgrade:0,name:"Pixel Ingredient Pack",type:"pixelpack"},{id:858568,pxj:142,wuf:142,pxjUpgrade:0,name:"Black (Primary)",type:"primary"},{id:858569,pxj:.42,wuf:1,pxjUpgrade:0,name:"Blue (Primary)",type:"primary"},{id:858570,pxj:.42,wuf:1,pxjUpgrade:0,name:"Red (Primary)",type:"primary"},{id:858571,pxj:.42,wuf:1,pxjUpgrade:0,name:"Yellow (Primary)",type:"primary"},{id:858572,pxj:2.22,wuf:1,pxjUpgrade:25e3,name:"Green (Secondary)",type:"secondary"},{id:858573,pxj:2.22,wuf:1,pxjUpgrade:25e3,name:"Orange (Secondary)",type:"secondary"},{id:858574,pxj:2.22,wuf:1,pxjUpgrade:25e3,name:"Purple (Secondary)",type:"secondary"},{id:858575,pxj:14.2,wuf:14.2,pxjUpgrade:15e4,name:"Amber (Tertiary)",type:"tertiary"},{id:858576,pxj:14.2,wuf:14.2,pxjUpgrade:15e4,name:"Chartreuse (Tertiary)",type:"tertiary"},{id:858577,pxj:14.2,wuf:14.2,pxjUpgrade:15e4,name:"Violet (Tertiary)",type:"tertiary"},{id:858578,pxj:14.2,wuf:14.2,pxjUpgrade:15e4,name:"Teal (Tertiary)",type:"tertiary"},{id:858580,pxj:14.2,wuf:14.2,pxjUpgrade:15e4,name:"Vermillion (Tertiary)",type:"tertiary"},{id:859273,pxj:14.2,wuf:14.2,pxjUpgrade:15e4,name:"Magenta (Tertiary)",type:"tertiary"}],Es=[{id:"craft_green",name:"Green (Secondary)",description:"Craft Green from Yellow + Blue + 25,000 PXJ",resultTemplateId:858572,ingredients:[{templateId:858571,quantity:1,name:"Yellow (Primary)"},{templateId:858569,quantity:1,name:"Blue (Primary)"}],pxjCost:25e3,tier:"secondary"},{id:"craft_orange",name:"Orange (Secondary)",description:"Craft Orange from Red + Yellow + 25,000 PXJ",resultTemplateId:858573,ingredients:[{templateId:858570,quantity:1,name:"Red (Primary)"},{templateId:858571,quantity:1,name:"Yellow (Primary)"}],pxjCost:25e3,tier:"secondary"},{id:"craft_purple",name:"Purple (Secondary)",description:"Craft Purple from Red + Blue + 25,000 PXJ",resultTemplateId:858574,ingredients:[{templateId:858570,quantity:1,name:"Red (Primary)"},{templateId:858569,quantity:1,name:"Blue (Primary)"}],pxjCost:25e3,tier:"secondary"},{id:"craft_amber",name:"Amber (Tertiary)",description:"Craft Amber from Yellow + Orange + 125,000 PXJ",resultTemplateId:858575,ingredients:[{templateId:858571,quantity:1,name:"Yellow (Primary)"},{templateId:858573,quantity:1,name:"Orange (Secondary)"}],pxjCost:125e3,tier:"tertiary"},{id:"craft_chartreuse",name:"Chartreuse (Tertiary)",description:"Craft Chartreuse from Yellow + Green + 125,000 PXJ",resultTemplateId:858576,ingredients:[{templateId:858571,quantity:1,name:"Yellow (Primary)"},{templateId:858572,quantity:1,name:"Green (Secondary)"}],pxjCost:125e3,tier:"tertiary"},{id:"craft_violet",name:"Violet (Tertiary)",description:"Craft Violet from Purple + Blue + 125,000 PXJ",resultTemplateId:858577,ingredients:[{templateId:858574,quantity:1,name:"Purple (Secondary)"},{templateId:858569,quantity:1,name:"Blue (Primary)"}],pxjCost:125e3,tier:"tertiary"},{id:"craft_teal",name:"Teal (Tertiary)",description:"Craft Teal from Green + Blue + 125,000 PXJ",resultTemplateId:858578,ingredients:[{templateId:858572,quantity:1,name:"Green (Secondary)"},{templateId:858569,quantity:1,name:"Blue (Primary)"}],pxjCost:125e3,tier:"tertiary"},{id:"craft_vermillion",name:"Vermillion (Tertiary)",description:"Craft Vermillion from Red + Orange + 125,000 PXJ",resultTemplateId:858580,ingredients:[{templateId:858570,quantity:1,name:"Red (Primary)"},{templateId:858573,quantity:1,name:"Orange (Secondary)"}],pxjCost:125e3,tier:"tertiary"},{id:"craft_magenta",name:"Magenta (Tertiary)",description:"Craft Magenta from Red + Purple + 125,000 PXJ",resultTemplateId:859273,ingredients:[{templateId:858570,quantity:1,name:"Red (Primary)"},{templateId:858574,quantity:1,name:"Purple (Secondary)"}],pxjCost:125e3,tier:"tertiary"}],Fs=e=>Ts.find(t=>t.id===e);const Is=new class{constructor(){M(this,"cache",[]),M(this,"balanceCache",{pxj:0,wuf:0}),M(this,"lastFetch",0),M(this,"CACHE_DURATION",3e4),M(this,"virtualLibrary",new Map),M(this,"virtualLibraryTimestamp",new Map),M(this,"VIRTUAL_LIBRARY_CACHE_DURATION",3e5),M(this,"backgroundLoadingPromises",new Map),M(this,"isBackgroundLoading",new Set)}async fetchInventory(e){const t=Date.now();if(this.cache.length>0&&t-this.lastFetch<this.CACHE_DURATION)return this.cache;try{const s=await fetch(`${dt.getCurrentAtomicEndpoint()}/atomicassets/v1/assets?owner=${e}&collection_name=pixeljourney&burned=false&limit=1000&page=1&order=desc&sort=asset_id`);if(!s.ok)throw new Error(`Failed to fetch inventory: ${s.statusText}`);const a=(await s.json()).data||[],n=new Map;for(const e of a){const t=parseInt(e.template.template_id),s=Ts.find(e=>e.id===t);s&&["primary","secondary","tertiary"].includes(s.type)&&(n.has(t)||n.set(t,{templateId:t,name:s.name,assetIds:[],tier:s.type}),n.get(t).assetIds.push(e.asset_id))}return this.cache=Array.from(n.values()).map(e=>({...e,quantity:e.assetIds.length})),this.lastFetch=t,this.cache}catch(s){return Le.logError("InventoryService.fetchInventory",s,{account:e}),this.cache=[],[]}}async fetchBalances(e){try{let s=0,a=0;try{const t=await dt.getWaxCurrencyBalance(e,"pixeljourney","PXJ");t&&t.length>0&&(s=parseFloat(t[0].balance.split(" ")[0]))}catch(t){Le.logError("InventoryService.getPXJBalance",t,{account:e})}try{const t=await dt.getWaxCurrencyBalance(e,"wuffi","WUF");t&&t.length>0&&(a=parseFloat(t[0].balance.split(" ")[0]))}catch(t){Le.logError("InventoryService.getWUFBalance",t,{account:e})}return this.balanceCache={pxj:s,wuf:a},this.balanceCache}catch(t){Le.logError("InventoryService.fetchBalances",t,{account:e});const s={pxj:0,wuf:0};return this.balanceCache=s,s}}getIngredientQuantity(e){const t=this.cache.find(t=>t.templateId===e);return t?t.quantity:0}getIngredientAssetIds(e,t){const s=this.cache.find(t=>t.templateId===e);return!s||s.quantity<t?[]:s.assetIds.slice(0,t)}canCraftRecipe(e,t){for(const s of e){if(this.getIngredientQuantity(s.templateId)<s.quantity)return!1}return!(this.balanceCache.pxj<t)}getMaxCraftableQuantity(e,t){let s=1/0;for(const n of e){const e=this.getIngredientQuantity(n.templateId),t=n.quantity,a=Math.floor(e/t);s=Math.min(s,a)}const a=Math.floor(this.balanceCache.pxj/t);return Math.min(s,a)}updateInventoryAfterCraft(e,t){for(const s of e){const e=this.cache.find(e=>e.templateId===s.templateId);e&&(e.quantity=Math.max(0,e.quantity-s.quantity),e.assetIds=e.assetIds.slice(s.quantity))}this.balanceCache.pxj=Math.max(0,this.balanceCache.pxj-t)}async startBackgroundInventoryLoad(e){if(!e||this.isBackgroundLoading.has(e))return;const t=this.virtualLibraryTimestamp.get(e)||0;if(!(Date.now()-t<this.VIRTUAL_LIBRARY_CACHE_DURATION)){this.isBackgroundLoading.add(e);try{De.debug(`Starting background inventory load for ${e}`,"InventoryService.startBackgroundInventoryLoad");const t=this.loadFullInventoryInBackground(e);this.backgroundLoadingPromises.set(e,t),await t,De.info(`Background inventory load completed for ${e}`,"InventoryService.startBackgroundInventoryLoad")}catch(s){Le.logError("InventoryService.startBackgroundInventoryLoad",s,{account:e})}finally{this.isBackgroundLoading.delete(e),this.backgroundLoadingPromises.delete(e)}}}convertNFTAssetToInventoryNFT(e){return{asset_id:e.asset_id,name:e.name,img:e.image,video:e.video,collection:{name:e.collection,collection_name:e.collection},schema:{schema_name:e.schema},template:{template_id:e.template_id?.toString()||"0",max_supply:e.max_supply||"0",immutable_data:{img:e.image,video:e.video}},data:{...e.traits,rarity:e.rarity},mint_number:e.template_mint}}async loadFullInventoryInBackground(e){const t=[];let s=1;let a=!0;for(;a;)try{const n=await dt.getUserInventoryWithFilter(e,s,100,"all");if(n&&n.assets&&n.assets.length>0){const e=n.assets.map(e=>this.convertNFTAssetToInventoryNFT(e));t.push(...e),a=n.hasMore,s++,await new Promise(e=>setTimeout(e,100))}else a=!1}catch(n){Le.logError("InventoryService.loadFullInventoryInBackground",n,{account:e,page:s}),a=!1}this.virtualLibrary.set(e,t),this.virtualLibraryTimestamp.set(e,Date.now()),De.info(`Loaded ${t.length} NFTs into virtual library for ${e}`,"InventoryService.loadFullInventoryInBackground")}async getInventoryPage(e,t,s=50){const a=this.virtualLibrary.get(e),n=this.virtualLibraryTimestamp.get(e)||0,i=Date.now();if(a&&i-n<this.VIRTUAL_LIBRARY_CACHE_DURATION){const e=(t-1)*s,n=e+s;return{data:a.slice(e,n),hasMore:n<a.length,totalCount:a.length}}try{const a=await dt.getUserInventoryWithFilter(e,t,s,"all");return{data:a?.assets?a.assets.map(e=>this.convertNFTAssetToInventoryNFT(e)):[],hasMore:a?.hasMore||!1,totalCount:a?.total||0}}catch(r){return Le.logError("InventoryService.getInventoryPage",r,{account:e,page:t,limit:s}),{data:[],hasMore:!1,totalCount:0}}}isBackgroundLoadingInProgress(e){return this.isBackgroundLoading.has(e)}getVirtualLibraryStats(e){return{itemCount:this.virtualLibrary.get(e)?.length||0,lastUpdate:this.virtualLibraryTimestamp.get(e)||null,isLoading:this.isBackgroundLoading.has(e)}}clearCache(){this.cache=[],this.balanceCache={pxj:0,wuf:0},this.lastFetch=0}clearVirtualLibrary(e){e?(this.virtualLibrary.delete(e),this.virtualLibraryTimestamp.delete(e),this.isBackgroundLoading.delete(e),this.backgroundLoadingPromises.delete(e)):(this.virtualLibrary.clear(),this.virtualLibraryTimestamp.clear(),this.isBackgroundLoading.clear(),this.backgroundLoadingPromises.clear())}getCachedInventory(){return this.cache}getCachedBalances(){return this.balanceCache}},$s=({isOpen:e,onClose:t,ingredient:s})=>{const{account:a,session:n,transferTokens:i,executeCraftingTransaction:r}=Ie();st();const{showError:l,showSuccess:o,showWarning:c}=xt(),[d,u]=O.useState("craft"),[h,m]=O.useState(null),[p,f]=O.useState([]),[x,g]=O.useState(!1),[v,j]=O.useState([]),[y,b]=O.useState({pxj:0,wuf:0}),[N,w]=O.useState(!1),[k,_]=O.useState(1),[S,C]=O.useState(0),[A,P]=O.useState("name_asc"),T=O.useCallback(async()=>{if(a){w(!0);try{const[e,t]=await Promise.all([Is.fetchInventory(a),Is.fetchBalances(a)]);j(e),b(t)}catch(e){console.error("Failed to load inventory:",e),l("Failed to load inventory data",e instanceof Error?e.message:"Unknown error")}finally{w(!1)}}else l("Wallet Required","Please connect your wallet first")},[a,l]);O.useEffect(()=>{e&&a&&T()},[e,a,T]);const E=e=>{const t=v.find(t=>t.templateId===e);return t?t.quantity:0},F=e=>{if(!e)return 0;let t=1/0;for(const a of e.ingredients){const e=E(a.templateId),s=a.quantity,n=Math.floor(e/s);t=Math.min(t,n)}const s=Math.floor(y.pxj/e.pxjCost);return Math.min(t,s)};O.useEffect(()=>{if(h){const e=F(h);C(e),_(Math.min(k,e))}},[h,v,y.pxj,F,k]);const I=O.useMemo(()=>{const e=[...v];switch(A){case"name_asc":return e.sort((e,t)=>e.name.localeCompare(t.name));case"name_desc":return e.sort((e,t)=>t.name.localeCompare(e.name));case"quantity_asc":return e.sort((e,t)=>e.quantity-t.quantity);case"quantity_desc":return e.sort((e,t)=>t.quantity-e.quantity);case"type_asc":return e.sort((e,t)=>{const s=Fs(e.templateId),a=Fs(t.templateId),n=s?.type||"Unknown",i=a?.type||"Unknown";return n.localeCompare(i)});case"type_desc":return e.sort((e,t)=>{const s=Fs(e.templateId),a=Fs(t.templateId),n=s?.type||"Unknown";return(a?.type||"Unknown").localeCompare(n)});default:return e}},[v,A]),$=(e,t=1)=>{for(const a of e.ingredients){if(E(a.templateId)<a.quantity*t)return!1}const s=e.pxjCost*t;return!(y.pxj<s)},L=async()=>{if(!s||!a||!n)return void l("Missing Requirements","Ingredient and wallet connection required for upgrading");const e="template"in s?s.template?.template_id:s.id,r=Fs("string"==typeof e?parseInt(e):e);if(r&&0!==r.pxjUpgrade)if(y.pxj<r.pxjUpgrade)l("Insufficient PXJ",`You need ${r.pxjUpgrade.toLocaleString()} PXJ to upgrade this ingredient`);else{g(!0);try{if(!i)return void l("Upgrade Error","Transfer service not available");await i("upgradepool",r.pxjUpgrade.toString(),"PXJ",`Upgrade ${r.name}`)&&(o("Upgrade Complete!",`Successfully upgraded ${r.name}`),T(),t())}catch(c){console.error("Upgrade failed:",c),l("Upgrade Failed",c instanceof Error?c.message:"Unknown error occurred")}finally{g(!1)}}else l("Cannot Upgrade","This ingredient cannot be upgraded")};return e?U.createPortal(Se.jsx("div",{className:"modal-overlay",onClick:t,children:Se.jsxs("div",{className:"crafting-modal",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsx("h2",{children:"Pixel Ingredient Crafting"}),Se.jsx("button",{className:"close-btn",onClick:t,children:"\xd7"})]}),Se.jsxs("div",{className:"modal-tabs",children:[Se.jsx("button",{className:"tab-btn "+("craft"===d?"active":""),onClick:()=>u("craft"),children:"Craft New"}),Se.jsx("button",{className:"tab-btn "+("upgrade"===d?"active":""),onClick:()=>u("upgrade"),disabled:!s,children:"Upgrade Existing"})]}),Se.jsx("div",{className:"modal-content",children:"craft"===d?Se.jsxs("div",{className:"craft-tab",children:[Se.jsxs("div",{className:"craft-layout",children:[Se.jsxs("div",{className:"recipe-selection",children:[Se.jsx("h3",{children:"Select Recipe"}),Se.jsxs("div",{className:"recipe-categories",children:[Se.jsxs("div",{className:"recipe-category",children:[Se.jsx("h4",{children:"Secondary Ingredients"}),Es.filter(e=>"secondary"===e.tier).map(e=>Se.jsxs("div",{className:`recipe-item ${h?.id===e.id?"selected":""} ${$(e)?"":"disabled"}`,onClick:()=>m(e),children:[Se.jsx("div",{className:"recipe-name",children:e.name}),Se.jsxs("div",{className:"recipe-cost",children:[e.pxjCost.toLocaleString()," PXJ"]}),Se.jsx("div",{className:"recipe-ingredients",children:e.ingredients.map((e,t)=>Se.jsxs("span",{className:E(e.templateId)>=e.quantity?"available":"unavailable",children:[e.name," (",E(e.templateId),"/",e.quantity,")"]},t))})]},e.id))]}),Se.jsxs("div",{className:"recipe-category",children:[Se.jsx("h4",{children:"Tertiary Ingredients"}),Es.filter(e=>"tertiary"===e.tier).map(e=>Se.jsxs("div",{className:`recipe-item ${h?.id===e.id?"selected":""} ${$(e)?"":"disabled"}`,onClick:()=>m(e),children:[Se.jsx("div",{className:"recipe-name",children:e.name}),Se.jsxs("div",{className:"recipe-cost",children:[e.pxjCost.toLocaleString()," PXJ"]}),Se.jsx("div",{className:"recipe-ingredients",children:e.ingredients.map((e,t)=>Se.jsxs("span",{className:E(e.templateId)>=e.quantity?"available":"unavailable",children:[e.name," (",E(e.templateId),"/",e.quantity,")"]},t))})]},e.id))]})]})]}),Se.jsxs("div",{className:"craft-controls",children:[h&&Se.jsxs("div",{className:"selected-recipe",children:[Se.jsx("h3",{children:h.name}),Se.jsx("p",{children:h.description}),Se.jsxs("div",{className:"quantity-controls",children:[Se.jsx("label",{children:"Quantity:"}),Se.jsxs("div",{className:"quantity-input",children:[Se.jsx("button",{onClick:()=>_(Math.max(1,k-1)),disabled:k<=1,children:"-"}),Se.jsx("input",{type:"number",value:k,onChange:e=>_(Math.min(S,Math.max(1,parseInt(e.target.value)||1))),min:"1",max:S}),Se.jsx("button",{onClick:()=>_(Math.min(S,k+1)),disabled:k>=S,children:"+"})]}),Se.jsxs("span",{className:"max-craftable",children:["Max: ",S]})]}),Se.jsx("div",{className:"total-cost",children:Se.jsxs("strong",{children:["Total Cost: ",(h.pxjCost*k).toLocaleString()," PXJ"]})}),Se.jsx("button",{className:"add-to-queue-btn",onClick:()=>{if(!h||k<=0)return;if(!$(h,k))return void c("Insufficient Resources","You don't have enough ingredients or PXJ for this craft.");const e=p.findIndex(e=>e.recipe.id===h.id);if(e>=0){const t=[...p];t[e].quantity+=k,f(t)}else f([...p,{recipe:h,quantity:k}]);o("Added to Queue",`Added ${k}x ${h.name} to crafting queue`),_(1)},disabled:!$(h,k)||k<=0,children:"Add to Queue"})]}),Se.jsxs("div",{className:"inventory-section",children:[Se.jsxs("div",{className:"inventory-header",children:[Se.jsx("h3",{children:"Your Inventory"}),!N&&v.length>0&&Se.jsxs("div",{className:"sort-container",children:[Se.jsx("label",{htmlFor:"inventory-sort",children:"Sort by:"}),Se.jsxs("select",{id:"inventory-sort",className:"sort-select",value:A,onChange:e=>P(e.target.value),children:[Se.jsx("option",{value:"name_asc",children:"Name (A-Z)"}),Se.jsx("option",{value:"name_desc",children:"Name (Z-A)"}),Se.jsx("option",{value:"quantity_asc",children:"Quantity (Low-High)"}),Se.jsx("option",{value:"quantity_desc",children:"Quantity (High-Low)"}),Se.jsx("option",{value:"type_asc",children:"Type (A-Z)"}),Se.jsx("option",{value:"type_desc",children:"Type (Z-A)"})]})]})]}),N?Se.jsxs("div",{className:"loading-inventory",children:[Se.jsx("div",{className:"loading-spinner"}),Se.jsx("span",{children:"Loading inventory..."})]}):Se.jsx("div",{className:"inventory-grid",children:0===I.length?Se.jsx("div",{className:"no-inventory",children:Se.jsxs("div",{className:"empty-state",children:[Se.jsx("span",{children:"No ingredients found"}),Se.jsx("button",{className:"refresh-btn",onClick:T,disabled:N,children:"Refresh Inventory"})]})}):I.map(e=>{const t=Fs(e.templateId);return Se.jsxs("div",{className:"inventory-item",children:[Se.jsx("div",{className:"item-name",children:e.name}),Se.jsxs("div",{className:"item-quantity",children:["Qty: ",e.quantity]}),Se.jsx("div",{className:"item-tier",children:t?.type||"Unknown"})]},e.templateId)})})]})]})]}),Se.jsxs("div",{className:"crafting-queue",children:[Se.jsxs("div",{className:"queue-header",children:[Se.jsxs("h3",{children:["Crafting Queue (",p.length,")"]}),p.length>0&&Se.jsx("button",{className:"clear-queue-btn",onClick:()=>{f([])},children:"Clear All"})]}),p.length>0?Se.jsxs("div",{className:"queue-items",children:[p.map((e,t)=>Se.jsxs("div",{className:"queue-item",children:[Se.jsxs("div",{className:"queue-item-info",children:[Se.jsx("span",{className:"item-name",children:e.recipe.name}),Se.jsxs("span",{className:"item-quantity",children:["x",e.quantity]}),Se.jsxs("span",{className:"item-cost",children:[(e.recipe.pxjCost*e.quantity).toLocaleString()," PXJ"]})]}),Se.jsx("button",{className:"remove-item-btn",onClick:()=>{return t=e.recipe.id,void f(p.filter(e=>e.recipe.id!==t));var t},children:"Remove"})]},t)),Se.jsx("div",{className:"queue-total",children:Se.jsxs("strong",{children:["Total: ",p.reduce((e,t)=>e+t.recipe.pxjCost*t.quantity,0).toLocaleString()," PXJ"]})}),Se.jsx("button",{className:"execute-queue-btn",onClick:async()=>{if(0===p.length)return void c("Empty Queue","No items in crafting queue");if(!a||!n)return void l("Wallet Required","Please connect your wallet to craft ingredients");if(x)return;g(!0);let e=0;try{for(const t of p){const{recipe:a,quantity:n}=t,i=[];let c=!0;for(const e of a.ingredients){const t=e.quantity*n,s=Is.getIngredientAssetIds(e.templateId,t);if(s.length<t){l("Insufficient Ingredients",`Not enough ${e.name} available`),c=!1;break}i.push({templateId:e.templateId,assetIds:s})}if(c)try{if(!r){l("Crafting Error","Crafting service not available");continue}const t={recipe:a.id,quantity:n,ingredientAssets:i,pxjCost:a.pxjCost};if(await r(t)){e++;const t=a.ingredients.map(e=>({templateId:e.templateId,quantity:e.quantity*n}));Is.updateInventoryAfterCraft(t,a.pxjCost*n),o("Craft Successful!",`Successfully crafted ${n}x ${a.name}`)}else l("Craft Failed",`Failed to craft ${a.name}`)}catch(s){console.error("Craft error:",s),l("Craft Failed",s instanceof Error?s.message:"Unknown crafting error")}}e>0&&(o("Crafting Complete!",`Successfully crafted ${e} recipe(s)`),f([]),T(),t())}catch(i){console.error("Crafting failed:",i),l("Crafting Failed",i instanceof Error?i.message:"Unknown error occurred")}finally{g(!1)}},disabled:x,children:x?"Crafting...":"Craft All"})]}):Se.jsx("div",{className:"empty-queue",children:Se.jsx("p",{children:"No items in queue. Select a recipe and add it to start crafting."})})]})]}):Se.jsx("div",{className:"upgrade-tab",children:s?Se.jsx("div",{className:"upgrade-content",children:Se.jsxs("div",{className:"ingredient-info",children:[Se.jsxs("h3",{children:["Upgrade: ",s.name]}),Se.jsxs("p",{children:["Template ID: ","template"in s?s.template?.template_id:s.id]}),(()=>{const e="template"in s?s.template?.template_id:s.id,t=Fs("string"==typeof e?parseInt(e):e);return t?0===t.pxjUpgrade?Se.jsx("p",{className:"no-upgrade",children:"This ingredient cannot be upgraded."}):Se.jsxs("div",{className:"upgrade-details",children:[Se.jsx("div",{className:"upgrade-cost",children:Se.jsxs("strong",{children:["Upgrade Cost: ",t.pxjUpgrade.toLocaleString()," PXJ"]})}),Se.jsxs("div",{className:"balance-info",children:["Your PXJ Balance: ",y.pxj.toLocaleString()]}),Se.jsx("button",{className:"upgrade-btn",onClick:L,disabled:x||y.pxj<t.pxjUpgrade,children:x?"Upgrading...":"Upgrade Ingredient"})]}):Se.jsx("p",{children:"Template not found"})})()]})}):Se.jsx("div",{className:"no-ingredient",children:Se.jsx("p",{children:"No ingredient selected for upgrade. Please select an ingredient from your inventory."})})})}),Se.jsx("div",{className:"modal-footer",children:Se.jsx("div",{className:"resource-display",children:Se.jsx("div",{className:"pxj-balance",children:Se.jsxs("strong",{children:["PXJ Balance: ",y.pxj.toLocaleString()]})})})})]})}),document.body):null};const Ls=new class{constructor(){M(this,"atomicMarketContract","atomicmarket")}get atomicMarketAPI(){return dt.getCurrentAtomicEndpoint()}async placeBuyOffer(e,t,s,a=""){if(!e)throw new Error("Please connect your wallet first");const n=parseFloat(s);if(isNaN(n)||n<=0)throw new Error("Please enter a valid offer amount");try{const i=`${n.toFixed(8)} WAX`,r=await fetch(`${this.atomicMarketAPI}/atomicassets/v1/assets/${t}`);if(!r.ok)throw new Error("Failed to fetch asset details");const l=await r.json();if(!l.success||!l.data)throw new Error("Asset not found");const o=l.data.owner,c={account:this.atomicMarketContract,name:"announceoffer",authorization:[{actor:Gt.safeGetActor(e),permission:Gt.safeGetPermission(e)}],data:{buyer:Gt.safeGetActor(e),recipient:o,asset_ids:[t],price:i,memo:a||"Buy offer from PxMarket - market.pixeljourney.xyz",maker_marketplace:"market.pxj"}},d=await e.transact({actions:[c]});return{success:!0,transaction_id:d?.transaction_id||d?.id||"",message:`Buy offer of ${s} WAX placed successfully!`}}catch(i){throw Le.logError("OfferService.placeBuyOffer",i,{assetId:t,offerAmount:s,actor:e.actor}),new Error(`Failed to place buy offer: ${i instanceof Error?i.message:"Transaction failed or was rejected"}`)}}async getBuyOffersForAsset(e){try{const t=await fetch(`${this.atomicMarketAPI}/atomicmarket/v1/buyoffers?asset_id=${e}&state=0&sort=price&order=desc&limit=50`);if(!t.ok)throw new Error("Failed to fetch buy offers");const s=await t.json();return s.success&&s.data?s.data:[]}catch(t){return Le.logError("OfferService.getBuyOffersForAsset",t,{assetId:e}),[]}}async getUserBuyOffers(e,t){try{let s=`${this.atomicMarketAPI}/atomicmarket/v1/buyoffers?buyer=${e}&sort=created&order=desc&limit=100`;void 0!==t&&(s+=`&state=${t}`);const a=await fetch(s);if(!a.ok)throw new Error("Failed to fetch user buy offers");const n=await a.json();return n.success&&n.data?n.data:[]}catch(s){return Le.logError("OfferService.getUserBuyOffers",s,{account:e,state:t}),[]}}async cancelBuyOffer(e,t){if(!e)throw new Error("Please connect your wallet first");try{const s={account:this.atomicMarketContract,name:"canceloffer",authorization:[{actor:Gt.safeGetActor(e),permission:Gt.safeGetPermission(e)}],data:{offer_id:t}},a=await e.transact({actions:[s]});return{success:!0,transaction_id:a?.transaction_id||a?.id||"",message:"Buy offer cancelled successfully!"}}catch(s){throw Le.logError("OfferService.cancelBuyOffer",s,{offerId:t,actor:e.actor}),new Error(`Failed to cancel buy offer: ${s instanceof Error?s.message:"Transaction failed or was rejected"}`)}}async acceptBuyOffer(e,t){if(!e)throw new Error("Please connect your wallet first");try{const s={account:this.atomicMarketContract,name:"acceptoffer",authorization:[{actor:Gt.safeGetActor(e),permission:Gt.safeGetPermission(e)}],data:{offer_id:t}},a=await e.transact({actions:[s]});return{success:!0,transaction_id:a?.transaction_id||a?.id||"",message:"Buy offer accepted successfully!"}}catch(s){throw Le.logError("OfferService.acceptBuyOffer",s,{offerId:t,actor:e.actor}),new Error(`Failed to accept buy offer: ${s instanceof Error?s.message:"Transaction failed or was rejected"}`)}}async declineBuyOffer(e,t){if(!e)throw new Error("Please connect your wallet first");try{const s={account:this.atomicMarketContract,name:"declineoffer",authorization:[{actor:Gt.safeGetActor(e),permission:Gt.safeGetPermission(e)}],data:{offer_id:t}},a=await e.transact({actions:[s]});return{success:!0,transaction_id:a?.transaction_id||a?.id||"",message:"Buy offer declined successfully!"}}catch(s){throw Le.logError("OfferService.declineBuyOffer",s,{offerId:t,actor:e.actor}),new Error(`Failed to decline buy offer: ${s instanceof Error?s.message:"Transaction failed or was rejected"}`)}}formatPrice(e){return`${(parseFloat(e.amount)/Math.pow(10,e.token_precision)).toFixed(Math.min(4,e.token_precision))} ${e.token_symbol}`}getOfferStateText(e){switch(e){case 0:return"Pending";case 1:return"Invalid";case 2:return"Accepted";case 3:return"Declined";case 4:return"Cancelled";default:return"Unknown"}}},Ms=({isOpen:e,onClose:t,nft:s})=>{const{account:a,session:n}=Ie(),{settings:i}=st(),{showSuccess:r,showError:l}=xt(),[o,c]=O.useState([]),[d,u]=O.useState(!1),[h,m]=O.useState(null),p=O.useCallback(async()=>{if(s){u(!0);try{const e=await dt.getAssetOffers(s.asset_id);if(e&&e.length>0){const t=e.map(e=>({id:e.id,buyer:e.buyer,price:(parseFloat(e.price)/1e8).toFixed(8),symbol:e.token,timestamp:e.created,memo:e.memo})).sort((e,t)=>parseFloat(t.price)-parseFloat(e.price));c(t)}else c([])}catch(e){console.error("Failed to load offers:",e),c([])}finally{u(!1)}}},[s]);O.useEffect(()=>{e&&s&&p()},[e,s,p]);const f=e=>{const t=new Date,s=new Date(e),a=t.getTime()-s.getTime(),n=Math.floor(a/36e5),i=Math.floor(n/24);if(i>0)return`${i} day${i>1?"s":""} ago`;if(n>0)return`${n} hour${n>1?"s":""} ago`;{const e=Math.floor(a/6e4);return`${e} minute${e>1?"s":""} ago`}};return e&&s?Se.jsx("div",{className:"modal-overlay",onClick:t,children:Se.jsxs("div",{className:"modal-content view-offers-modal",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsx("h2",{children:"View Offers"}),Se.jsx("button",{className:"modal-close",onClick:t,children:"\xd7"})]}),Se.jsxs("div",{className:"offers-content",children:[Se.jsxs("div",{className:"view-offers-nft-info",children:[Se.jsx("div",{className:"nft-image",children:Se.jsx(Qt,{imageUrl:s.img,alt:s.name,enableAnimations:i.enableAnimatedNFTs})}),Se.jsxs("div",{className:"nft-details",children:[Se.jsx("h3",{children:s.name}),Se.jsxs("div",{className:"nft-id",children:["#",s.asset_id]}),Se.jsxs("div",{className:"collection-info",children:["string"==typeof s.collection?s.collection:s.collection?.name||s.collection?.collection_name||"Unknown"," \u2022 ",s.schema.schema_name]})]})]}),Se.jsxs("div",{className:"offers-section",children:[Se.jsxs("div",{className:"offers-header",children:[Se.jsxs("h3",{children:["Active Offers (",o.length,")"]}),Se.jsxs("button",{className:"refresh-btn",onClick:p,disabled:d,children:[d?"\ud83d\udd04":"\u21bb"," Refresh"]})]}),d?Se.jsxs("div",{className:"loading-state",children:[Se.jsx("div",{className:"loading-spinner"}),Se.jsx("p",{children:"Loading offers..."})]}):0===o.length?Se.jsxs("div",{className:"empty-offers",children:[Se.jsx("div",{className:"empty-icon",children:"\ud83d\udced"}),Se.jsx("h4",{children:"No Offers Yet"}),Se.jsx("p",{children:"This NFT hasn't received any offers yet. List it on the marketplace to attract buyers!"})]}):Se.jsx("div",{className:"offers-list",children:o.map((e,i)=>Se.jsxs("div",{className:"offer-card "+(0===i?"highest-offer":""),children:[Se.jsxs("div",{className:"offer-header",children:[Se.jsxs("div",{className:"buyer-info",children:[Se.jsx("strong",{children:e.buyer}),0===i&&Se.jsx("span",{className:"highest-badge",children:"\ud83c\udfc6 Highest"})]}),Se.jsx("div",{className:"offer-time",children:f(e.timestamp)})]}),Se.jsxs("div",{className:"offer-price",children:[Se.jsx("span",{className:"price-amount",children:parseFloat(e.price).toFixed(2)}),Se.jsx("span",{className:"price-symbol",children:e.symbol})]}),e.memo&&Se.jsx("div",{className:"offer-memo",children:Se.jsxs("em",{children:['"',e.memo,'"']})}),Se.jsx("div",{className:"offer-actions",children:Se.jsx("button",{className:"accept-btn",onClick:()=>(async e=>{if(!a||!n||!s)return void l("Please connect your wallet first","Wallet Required");if(window.confirm(`Accept offer of ${e.price} ${e.symbol} from ${e.buyer}?\n\nThis action cannot be undone.`)){m(e.id);try{if(!n)return void l("Wallet Not Connected","Please connect your wallet to accept offers.");await Ls.acceptBuyOffer(n,e.id),r("Offer Accepted!",`${e.price} ${e.symbol} will be transferred to your account.`),t()}catch(i){l("Failed to Accept Offer",i instanceof Error?i.message:"Failed to accept the offer. Please try again.")}finally{m(null)}}})(e),disabled:null!==h,children:h===e.id?"Accepting...":"Accept Offer"})})]},e.id))})]})]}),Se.jsx("div",{className:"modal-footer",children:Se.jsx("button",{className:"btn-secondary",onClick:t,children:"Close"})})]})}):null};class Rs{static async recyclePixal(e,t){const s=await this.getBlockInfo();return{expiration:this.getExpirationTime(),ref_block_num:s.ref_block_num,ref_block_prefix:s.ref_block_prefix,max_net_usage_words:0,max_cpu_usage_ms:0,delay_sec:0,context_free_actions:[],actions:[{account:this.BLEND_CONTRACT,name:"openbal",authorization:[{actor:t,permission:"active"}],data:{owner:t,token_symbol:"8,PXJ"}},{account:this.PXJ_CONTRACT,name:"transfer",authorization:[{actor:t,permission:"active"}],data:{from:t,to:this.BLEND_CONTRACT,quantity:this.RECYCLE_COST,memo:"deposit"}},{account:this.BLEND_CONTRACT,name:"announcedepo",authorization:[{actor:t,permission:"active"}],data:{owner:t,count:1}},{account:this.ATOMIC_ASSETS_CONTRACT,name:"transfer",authorization:[{actor:t,permission:"active"}],data:{from:t,to:this.BLEND_CONTRACT,asset_ids:[e],memo:"deposit"}},{account:this.BLEND_CONTRACT,name:"nosecfuse",authorization:[{actor:t,permission:"active"}],data:{claimer:t,blend_id:this.RECYCLE_BLEND_ID,transferred_assets:[e],own_assets:[]}}],transaction_extensions:[]}}static async unpackPixelIngredientPack(e,t){const s=await this.getBlockInfo();return{expiration:this.getExpirationTime(),ref_block_num:s.ref_block_num,ref_block_prefix:s.ref_block_prefix,max_net_usage_words:0,max_cpu_usage_ms:0,delay_sec:0,context_free_actions:[],actions:[{account:this.ATOMIC_ASSETS_CONTRACT,name:"transfer",authorization:[{actor:t,permission:"active"}],data:{from:t,to:this.BLEND_CONTRACT,asset_ids:[e],memo:"unpack"}},{account:this.BLEND_CONTRACT,name:"nosecfuse",authorization:[{actor:t,permission:"active"}],data:{claimer:t,blend_id:this.PACK_RECIPE_ID,transferred_assets:[e],own_assets:[]}}],transaction_extensions:[]}}static async unpackGenericPack(e,t){const s=await this.getBlockInfo();return{expiration:this.getExpirationTime(),ref_block_num:s.ref_block_num,ref_block_prefix:s.ref_block_prefix,max_net_usage_words:0,max_cpu_usage_ms:0,delay_sec:0,context_free_actions:[],actions:[{account:this.ATOMIC_ASSETS_CONTRACT,name:"transfer",authorization:[{actor:t,permission:"active"}],data:{from:t,to:this.BLEND_CONTRACT,asset_ids:[e],memo:"unpack"}},{account:this.BLEND_CONTRACT,name:"nosecfuse",authorization:[{actor:t,permission:"active"}],data:{claimer:t,blend_id:this.GENERIC_PACK_BLEND_ID,transferred_assets:[e],own_assets:[]}}],transaction_extensions:[]}}static async getBlockInfo(){try{const t=[He.WAX_CHAIN.EOSRIO,He.WAX_CHAIN.WAXSWEDEN,He.WAX_CHAIN.GREYMASS];for(const s of t)try{const e=await fetch(`${s}/v1/chain/get_info`,{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)continue;const t=await e.json(),a=t.head_block_id,n=65535&t.last_irreversible_block_num,i=a.match(/.{2}/g)?.slice(4,8)||["00","00","00","00"];return{ref_block_num:n,ref_block_prefix:parseInt(i.reverse().join(""),16)}}catch(e){Oe.warn("Failed to fetch block info from endpoint","NEFTY_BLEND",{endpoint:s,error:e});continue}throw new Error("All WAX endpoints failed")}catch(t){Le.logError("NeftyBlendService.getBlockInfo",t);const e=Date.now();return{ref_block_num:e/500&65535,ref_block_prefix:4294967295&e}}}static getExpirationTime(){return new Date((new Date).getTime()+18e5).toISOString().slice(0,-5)}static async executeRecycle(e,t){try{if(!t||!t.transact)throw new Error("Wallet not connected or does not support transactions");const s=await t.transact({actions:e.actions});return Oe.info("Recycle transaction successful","NEFTY_BLEND",{result:s}),!0}catch(s){throw Le.logError("NeftyBlendService.executeRecycle",s,{blendId:this.RECYCLE_BLEND_ID,recycleCost:this.RECYCLE_COST,actionsCount:e.actions.length,walletActor:t.actor}),s}}static async executeUnpack(e,t){try{if(!t||!t.transact)throw new Error("Wallet not connected or does not support transactions");const s=await t.transact({actions:e.actions});return Oe.info("Unpack transaction successful","NEFTY_BLEND",{result:s}),s}catch(s){throw Le.logError("NeftyBlendService.executeUnpack",s,{actionsCount:e.actions.length,walletActor:t.actor}),s}}static isPackNFT(e){if(!e||!e.template)return!1;const t=(e.template.name||"").toLowerCase(),s=["pack","container","box","chest"].some(e=>t.includes(e)),a=e.template?.template_id===this.PACK_TEMPLATE_ID;return s||a}static getPackType(e){return this.isPackNFT(e)?e.template?.template_id===this.PACK_TEMPLATE_ID?"pixel_ingredient":"generic":null}static async unpackPixelPack(e,t){const s=await this.getBlockInfo();return{expiration:this.getExpirationTime(),ref_block_num:s.ref_block_num,ref_block_prefix:s.ref_block_prefix,max_net_usage_words:0,max_cpu_usage_ms:0,delay_sec:0,context_free_actions:[],actions:[{account:this.ATOMIC_ASSETS_CONTRACT,name:"transfer",authorization:[{actor:t,permission:"active"}],data:{from:t,to:"neftyblocksp",asset_ids:[e],memo:"unbox"}}],transaction_extensions:[]}}static async unpackPixelPacksBulk(e,t){const s=[];for(let a=0;a<e.length;a+=20){const n=e.slice(a,a+20),i=await this.getBlockInfo(),r={expiration:this.getExpirationTime(),ref_block_num:i.ref_block_num,ref_block_prefix:i.ref_block_prefix,max_net_usage_words:0,max_cpu_usage_ms:0,delay_sec:0,context_free_actions:[],actions:n.map(e=>({account:this.ATOMIC_ASSETS_CONTRACT,name:"transfer",authorization:[{actor:t,permission:"active"}],data:{from:t,to:"neftyblocksp",asset_ids:[e],memo:"unbox"}})),transaction_extensions:[]};s.push(r)}return s}static isPixelPack(e){return e.template?.template_id===this.PACK_TEMPLATE_ID}}M(Rs,"BLEND_CONTRACT","blend.nefty"),M(Rs,"ATOMIC_ASSETS_CONTRACT","atomicassets"),M(Rs,"PXJ_CONTRACT","pixeljourney"),M(Rs,"RECYCLE_BLEND_ID",37700),M(Rs,"RECYCLE_COST","12000.00000000 PXJ"),M(Rs,"PACK_TEMPLATE_ID","820134"),M(Rs,"PACK_RECIPE_ID",37701),M(Rs,"GENERIC_PACK_BLEND_ID",37702);const Ws=({isOpen:e,onClose:t,selectedNFTs:s,userAccount:a,walletSession:n,onUnpackComplete:i})=>{const[r,l]=O.useState(!1),{showError:o,showSuccess:c}=xt(),d=s.filter(e=>Rs.isPackNFT(e));if(!e)return null;const u=d.length>0;return Se.jsx("div",{className:"modal-overlay",onClick:t,children:Se.jsxs("div",{className:"modal-content unpack-modal",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsx("h2",{children:"Unpack NFT"}),Se.jsx("button",{className:"modal-close",onClick:t,children:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Se.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Se.jsxs("div",{className:"modal-body",children:[Se.jsxs("div",{className:"unpack-nft-info",children:[Se.jsxs("h3",{children:["Selected Pack NFTs (",d.length,")"]}),d.map(e=>Se.jsxs("div",{className:"nft-item",children:[Se.jsx("div",{className:"nft-image",children:Se.jsx("img",{src:e.img,alt:e.name})}),Se.jsxs("div",{className:"nft-details",children:[Se.jsx("h4",{children:e.name}),Se.jsx("p",{className:"collection-name",children:"string"==typeof e.collection?e.collection:e.collection?.collection_name||e.collection?.name||"Unknown"}),Se.jsx("p",{className:"schema-name",children:e.schema.schema_name}),e.mint_number&&Se.jsxs("p",{className:"mint-number",children:["Mint #",e.mint_number]})]})]},e.asset_id))]}),u?Se.jsxs("div",{className:"unpack-info",children:[Se.jsxs("div",{className:"info-box",children:[Se.jsx("h4",{children:"\ud83d\udce6 Pack Contents"}),Se.jsxs("div",{className:"pack-contents",children:[Se.jsx("p",{children:"These packs contain random rewards that will be revealed upon unpacking."}),Se.jsx("p",{className:"warning",children:"\u26a0\ufe0f Unpacking will burn these packs permanently!"})]})]}),Se.jsx("button",{className:"unpack-btn",onClick:async()=>{if(!a||!n)return void o("Wallet not connected","Connection Required");if(0===d.length)return void o("No pack NFTs selected","No Packs Selected");l(!0);const e=[];try{for(const t of d){let s;s="pixel_ingredient"===Rs.getPackType(t)?await Rs.unpackPixelIngredientPack(t.asset_id,a):await Rs.unpackGenericPack(t.asset_id,a);const i=await Rs.executeUnpack(s,n);e.push({nft:t,transaction:i,success:!0})}c("Packs unpacked successfully!","Unpack Complete"),i()}catch(t){console.error("Error unpacking NFTs:",t),o("Failed to unpack NFTs. Please try again.","Unpack Failed")}finally{l(!1)}},disabled:r||!n,children:r?Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"loading-spinner small"}),"Unpacking..."]}):`\ud83d\udce6 Unpack ${d.length} Pack${d.length>1?"s":""}`})]}):Se.jsx("div",{className:"cannot-unpack",children:Se.jsxs("div",{className:"info-box error",children:[Se.jsx("h4",{children:"\u274c Cannot Unpack"}),Se.jsx("p",{children:"No pack NFTs selected for unpacking."}),Se.jsx("p",{children:"Only packs, chests, boxes, and containers can be unpacked."})]})})]})]})})},Os=({children:e})=>{const[t,s]=O.useState({isConnected:!1,account:null,session:null,login:async()=>null,logout:async()=>{},transact:async()=>null,purchaseNFT:async()=>null,batchPurchaseNFTs:async()=>null,executeCraftingTransaction:async()=>null,executeTransaction:async()=>{throw new Error("Wallet not connected")},isLoading:!0});return O.useEffect(()=>Yt.subscribe(e=>{s(e)}),[]),Se.jsx(Fe.Provider,{value:t,children:e})},Ds=()=>{const e=O.useContext(Fe);if(void 0===e)throw new Error("useWallet must be used within a WalletProvider");return e},zs=({nfts:e,isOpen:t,onClose:s,onSuccess:a})=>{const{showSuccess:n,showError:i}=xt(),r=Ds(),[l,o]=O.useState(""),[c,d]=O.useState(0),[u,h]=O.useState(1),[m,p]=O.useState(0),[f,x]=O.useState(0),[g,v]=O.useState(""),[j,y]=O.useState(!1),[b,N]=O.useState("name_asc");O.useEffect(()=>{t&&(o(""),d(0),h(1),p(0),x(0),v(""),y(!1))},[t]);const w=O.useMemo(()=>{const t=[...e];switch(b){case"name_asc":return t.sort((e,t)=>(e.name||"").localeCompare(t.name||""));case"name_desc":return t.sort((e,t)=>(t.name||"").localeCompare(e.name||""));case"collection_asc":return t.sort((e,t)=>e.collection.collection_name.localeCompare(t.collection.collection_name));case"collection_desc":return t.sort((e,t)=>t.collection.collection_name.localeCompare(e.collection.collection_name));case"mint_asc":return t.sort((e,t)=>(e.mint_number||0)-(t.mint_number||0));case"mint_desc":return t.sort((e,t)=>(t.mint_number||0)-(e.mint_number||0));default:return t}},[e,b]),k=()=>7*c*24*3600+24*u*3600+3600*m+60*f,_=(e,t)=>{const s=Math.max(0,Math.min(t,S(e)));switch(e){case"weeks":d(s);break;case"days":h(s);break;case"hours":p(s);break;case"minutes":x(s)}},S=e=>{switch(e){case"weeks":return 4;case"days":return 30;case"hours":return 23;case"minutes":return 59;default:return 0}},C=()=>{const e=[];return c>0&&e.push(`${c}w`),u>0&&e.push(`${u}d`),m>0&&e.push(`${m}h`),f>0&&e.push(`${f}m`),e.length>0?e.join(" "):"0m"};return t?Se.jsx("div",{className:"modal-overlay",onClick:s,children:Se.jsxs("div",{className:"modal-content bulk-auction-modal",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsx("h2",{children:"Create Bulk Auction"}),Se.jsx("button",{className:"modal-close",onClick:s,children:"\xd7"})]}),Se.jsxs("div",{className:"modal-body",children:[Se.jsxs("div",{className:"selected-nfts-section",children:[Se.jsxs("div",{className:"selected-nfts-header",children:[Se.jsxs("h3",{children:["Selected NFTs (",e.length,")"]}),e.length>1&&Se.jsxs("div",{className:"sort-container",children:[Se.jsx("label",{htmlFor:"auction-sort",children:"Sort by:"}),Se.jsxs("select",{id:"auction-sort",className:"sort-select",value:b,onChange:e=>N(e.target.value),children:[Se.jsx("option",{value:"name_asc",children:"Name (A-Z)"}),Se.jsx("option",{value:"name_desc",children:"Name (Z-A)"}),Se.jsx("option",{value:"collection_asc",children:"Collection (A-Z)"}),Se.jsx("option",{value:"collection_desc",children:"Collection (Z-A)"}),Se.jsx("option",{value:"mint_asc",children:"Mint # (Low-High)"}),Se.jsx("option",{value:"mint_desc",children:"Mint # (High-Low)"})]})]})]}),Se.jsxs("div",{className:"selected-nfts-grid",children:[w.slice(0,6).map(e=>Se.jsxs("div",{className:"selected-nft-item",children:[Se.jsx("div",{className:"nft-image-container",children:Se.jsx(Qt,{imageUrl:cs(e),videoUrl:ds(e),alt:e.name||`Asset #${e.asset_id}`,className:"nft-image"})}),Se.jsxs("div",{className:"nft-info",children:[Se.jsx("span",{className:"nft-name",children:e.name}),Se.jsx("span",{className:"nft-collection",children:"string"==typeof e.collection?e.collection:e.collection?.name||e.collection?.collection_name||"Unknown"})]})]},e.asset_id)),e.length>6&&Se.jsxs("div",{className:"more-nfts-indicator",children:["+",e.length-6," more"]})]})]}),Se.jsxs("div",{className:"auction-settings",children:[Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{htmlFor:"startingPrice",children:"Starting Price (WAX)"}),Se.jsx("input",{type:"number",id:"startingPrice",value:l,onChange:e=>o(e.target.value),placeholder:"Enter starting price",min:"0",step:"0.01",disabled:j})]}),Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{children:"Auction Duration"}),Se.jsxs("div",{className:"duration-inputs",children:[Se.jsxs("div",{className:"duration-field",children:[Se.jsx("label",{className:"duration-label",children:"Weeks"}),Se.jsx("input",{type:"number",className:"duration-input",value:c,onChange:e=>_("weeks",parseInt(e.target.value)||0),min:"0",max:S("weeks"),disabled:j})]}),Se.jsxs("div",{className:"duration-field",children:[Se.jsx("label",{className:"duration-label",children:"Days"}),Se.jsx("input",{type:"number",className:"duration-input",value:u,onChange:e=>_("days",parseInt(e.target.value)||0),min:"0",max:S("days"),disabled:j})]}),Se.jsxs("div",{className:"duration-field",children:[Se.jsx("label",{className:"duration-label",children:"Hours"}),Se.jsx("input",{type:"number",className:"duration-input",value:m,onChange:e=>_("hours",parseInt(e.target.value)||0),min:"0",max:S("hours"),disabled:j})]}),Se.jsxs("div",{className:"duration-field",children:[Se.jsx("label",{className:"duration-label",children:"Minutes"}),Se.jsx("input",{type:"number",className:"duration-input",value:f,onChange:e=>_("minutes",parseInt(e.target.value)||0),min:"0",max:S("minutes"),disabled:j})]})]}),Se.jsxs("div",{className:"duration-summary",children:[Se.jsx("span",{className:"duration-display",children:C()}),Se.jsxs("span",{className:"duration-total",children:["(",k().toLocaleString(),"s)"]})]})]}),Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{htmlFor:"auctionMemo",children:"Memo (Optional)"}),Se.jsx("textarea",{id:"auctionMemo",value:g,onChange:e=>v(e.target.value),placeholder:"Add a note about this auction batch...",rows:3,maxLength:256,disabled:j})]})]})]}),Se.jsxs("div",{className:"modal-footer",children:[Se.jsx("button",{className:"cancel-btn",onClick:s,disabled:j,children:"Cancel"}),Se.jsx("button",{className:"create-btn",onClick:async()=>{if(!l||parseFloat(l)<=0)return void i("Invalid Price","Please enter a valid starting price");const t=k();if(t<3600)i("Invalid Duration","Auction duration must be at least 1 hour");else if(t>2592e3)i("Invalid Duration","Auction duration cannot exceed 30 days");else{y(!0);try{const i=`${parseFloat(l).toFixed(8)} WAX`,o=e.map(e=>({account:"atomicmarket",name:"announceauct",authorization:[{actor:r.account||"",permission:"active"}],data:{seller:r.account||"",asset_ids:[parseInt(e.asset_id)],starting_bid:i,duration:t,maker_marketplace:"market.pxj"}}));await r.transact(o);const c=C();n("Bulk Auction Created",`Successfully created auctions for ${e.length} NFT${1!==e.length?"s":""} with starting price ${l} WAX and duration ${c}. Remember to transfer your assets to the atomicmarket contract to activate the auctions.`),a(),s()}catch(o){console.error("Bulk auction creation failed:",o),i("Auction Creation Failed",o instanceof Error?o.message:"Failed to create bulk auctions. Please try again.")}finally{y(!1)}}},disabled:j||!l||parseFloat(l)<=0||k()<3600,children:j?"Creating...":`Create ${e.length} Auction${1!==e.length?"s":""}`})]})]})}):null};const Bs=new class{constructor(){M(this,"WAX_API_BASE","https://wax.eosrio.io/v1/chain"),M(this,"ATOMIC_API_BASE","https://wax-api.hivebp.io/api")}async getFeeTokens(){for(let t=1;t<=3;t++)try{const e=new AbortController,t=setTimeout(()=>e.abort(),1e4),s=await fetch(`${this.WAX_API_BASE}/get_table_rows`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:"rwax",scope:"rwax",table:"feetokens",json:!0,limit:100}),signal:e.signal});if(clearTimeout(t),!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);const a=await s.json();if(!a.rows||!Array.isArray(a.rows))return De.error("Invalid fee tokens response structure:",a),[];const n=["honey-honeyhiveio","lswax-liquidstaked"],i=await this.fetchAlcorTokenRates(n),r=await Promise.all(a.rows.map(async e=>{const t=e.fee.match(/([0-9.]+)\s+([A-Z]+)/),s=t?t[2]:"UNKNOWN",a=t?t[1]:"0";let n;if("WAX"!==s)try{n=await this.calculateLiveWaxValue(s,a,i)}catch(r){if(De.warn(`Failed to get live WAX value for ${s}, using exchange rate fallback`,"RWaxService.getFeeTokens"),e.exchange_rate){const t=parseFloat(e.exchange_rate),s=parseFloat(a);isNaN(t)||isNaN(s)||(n=(s/t).toFixed(8))}}return{fee:e.fee,contract:e.contract,exchange_rate:e.exchange_rate,symbol:s,amount:a,wax_value:n}}));return De.info(`Successfully fetched ${r.length} fee tokens with live WAX conversions`),r}catch(e){if(De.error(`Attempt ${t} failed to fetch fee tokens:`,e instanceof Error?e.message:String(e)),3===t)throw new Error(`Failed to fetch fee tokens after 3 attempts: ${e}`);await new Promise(e=>setTimeout(e,1e3))}return[]}async fetchAlcorTokenRates(e){try{const t=`https://wax.alcor.exchange/api/v2/tokens/${e.join(",")}`,s=await fetch(t),a=await s.json(),n=new Map;return a.forEach(e=>{const t=`${e.symbol.toLowerCase()}-${e.contract}`;n.set(t,parseFloat(e.system_price)||0)}),n}catch(t){return De.error("Failed to fetch Alcor V2 rates:","RWaxService.fetchAlcorTokenRates",t),new Map}}async calculateLiveWaxValue(e,t,s){const a=parseFloat(t);if(isNaN(a))throw new Error(`Invalid amount: ${t}`);try{switch(e.toUpperCase()){case"WPIXAL":{const e=await Ye.getWpixalPriceWAX();return(a*e).toFixed(8)}case"PXJ":{const e=await Ye.getPxjPriceUSD(),t=await Ye.getWaxPriceUSD();if(t>0){return(a*e/t).toFixed(8)}throw new Error("WAX price is zero")}case"HONEY":{const e=s?.get("honey-honeyhiveio")||0;if(e>0){return(a*e).toFixed(8)}throw new Error("HONEY/WAX rate not available")}case"LSWAX":{const e=s?.get("lswax-liquidstaked")||0;if(e>0){return(a*e).toFixed(8)}return(1.1616*a).toFixed(8)}default:throw De.warn(`Unknown token symbol for live conversion: ${e}`,"RWaxService.calculateLiveWaxValue"),new Error(`Unsupported token: ${e}`)}}catch(n){throw De.error(`Failed to calculate live WAX value for ${e}:`,"RWaxService.calculateLiveWaxValue",n),n}}async getAssetPoolInfo(e){for(let s=1;s<=3;s++)try{const t=new AbortController,s=setTimeout(()=>t.abort(),1e4),a=await fetch(`${this.WAX_API_BASE}/get_table_rows`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:"rwax",scope:"WPIXAL",table:"assetpools",json:!0,limit:1,lower_bound:e,upper_bound:e,key_type:"i64"}),signal:t.signal});if(clearTimeout(s),!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);const n=await a.json();if(!n.rows||!Array.isArray(n.rows)||0===n.rows.length)return null;const i=n.rows[0];return{assetId:i.asset_id,issuedTokens:i.issued_tokens}}catch(t){if(De.error(`Attempt ${s} failed to fetch asset pool info for ${e}:`,t instanceof Error?t.message:String(t)),3===s)return De.error(`Failed to fetch asset pool info after 3 attempts: ${t}`),null;await new Promise(e=>setTimeout(e,1e3))}return null}async getTokenizedAssets(e=36,t=0,s="rarity_score_desc",a=""){let n=null;for(let r=1;r<=3;r++)try{const n=new URLSearchParams({term:"",owner:"rwax",collection:"pixeljourney",schema:"pixals",category:"",recent:"",order_by:s,limit:e.toString(),search_type:"inventory",offer_type:"sales",min_price:"0",max_price:"0",offset:t.toString(),verified:"all",favorites:"false",user:"pixeljourney",contract:"",attributes:a,only:"rwax",rwax_contract:"pixeljourney",rwax_symbol:"WPIXAL"}),i=`${this.ATOMIC_API_BASE}/assets?${n.toString()}`;De.info(`Fetching tokenized assets from: ${i}`,"RWaxService");const r=await fetch(i,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);const l=await r.json();return De.debug("RWAX API Response received","RWaxService.getTokenizedAssets",{dataLength:Array.isArray(l)?l.length:"not array"}),Array.isArray(l)?l:[]}catch(i){if(n=i instanceof Error?i:new Error(String(i)),De.error(`Attempt ${r}/3 failed:`,"RWaxService.getTokenizedAssets",n),3===r){De.warn("API failed, returning test data with original structure","RWaxService.getTokenizedAssets");return[{assetId:1099932947523,name:"Pixal 09106",schema:"pixals",owner:"rwax",burned:!1,mint:9106,contract:"atomicassets",collection:{collectionName:"pixeljourney",displayName:"Pixel Journey",collectionImage:"QmVnrLdB1xQ9EMzgw5srW6u8WKQpTjmYz6fBi2g7ic8iob",verification:!0,blacklisted:!1},transferable:!0,burnable:!0,mutableData:[],immutableData:[{key:"Background",value:["string","Nefty Spot"]},{key:"Body",value:["string","Pink-Blue Overalls"]},{key:"Eyes",value:["string","Kawaii Green"]},{key:"Head",value:["string","Grey"]},{key:"img",value:["string","Qma9rcg1NHxhvG5CMDecS3bo14gpQSr6QFieUXsFPrG14T"]},{key:"name",value:["string","Pixal 09106"]}],rarityScore:419.80619503583694,attributesFloor:501,rwax:{symbol:"WPIXAL",contract:"pixeljourney",decimals:8,tokenName:"Wrapped Pixal",redeemAmount:1.09997216},image:"Qma9rcg1NHxhvG5CMDecS3bo14gpQSr6QFieUXsFPrG14T",template:{templateId:781515}},{assetId:1099931322703,name:"Pixal 06238",schema:"pixals",owner:"rwax",burned:!1,mint:6238,contract:"atomicassets",collection:{collectionName:"pixeljourney",displayName:"Pixel Journey",verification:!0,blacklisted:!1},transferable:!0,burnable:!0,mutableData:[],immutableData:[{key:"Background",value:["string","Blue Sky"]},{key:"Body",value:["string","Red Shirt"]},{key:"Eyes",value:["string","Brown"]},{key:"Head",value:["string","Black Hair"]},{key:"img",value:["string","QmTestImage2"]},{key:"name",value:["string","Pixal 06238"]}],rarityScore:350.5,attributesFloor:400,rwax:{symbol:"WPIXAL",contract:"pixeljourney",decimals:8,tokenName:"Wrapped Pixal",redeemAmount:1.25},image:"QmTestImage2",template:{templateId:781516}}].slice(t,t+e)}}throw n||new Error("Failed to fetch tokenized assets")}async getAssetWPIXALAmount(e){try{const t=`${this.WAX_API_BASE}/get_table_rows`,s={code:"pixeljourney",index_position:"primary",json:!0,key_type:"i64",limit:1,reverse:!1,lower_bound:e,upper_bound:e,scope:"pixeljourney",show_payer:!1,table:"assetpools",table_key:""},a=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error(`Failed to fetch WPIXAL amount: ${a.statusText}`);const n=await a.json();return n.rows&&n.rows.length>0?n.rows[0].issued_tokens:"0.00000000 WPIXAL"}catch(t){return De.error("Error fetching WPIXAL amount:","RWaxService.getAssetWPIXALAmount",t instanceof Error?t:new Error(String(t))),"0.00000000 WPIXAL"}}async getUserPixalAssets(e,t=36,s=0){let a=null;for(let i=1;i<=3;i++)try{const a=`https://wax.api.atomicassets.io/atomicassets/v1/assets?owner=${e}&collection_name=pixeljourney&schema_name=pixals&limit=${t}&page=${Math.floor(s/t)+1}&order=desc&sort=asset_id`;De.info(`Fetching user assets from: ${a}`,"RWaxService");const n=await fetch(a,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);const i=await n.json();return i&&i.data&&Array.isArray(i.data)?i.data.map(e=>{let t="";const s=[e.data?.img,e.data?.image,e.immutable_data?.img,e.immutable_data?.image,e.template?.immutable_data?.img,e.template?.immutable_data?.image];for(const a of s)if(a&&"string"==typeof a){t=a;break}return t&&!t.startsWith("http")&&(t.startsWith("Qm")||t.startsWith("/ipfs/")?t=`https://ipfs.io/ipfs/${t.replace("/ipfs/","")}`:t.startsWith("ipfs://")&&(t=t.replace("ipfs://","https://ipfs.io/ipfs/"))),{assetId:parseInt(e.asset_id)||0,name:e.name||e.data?.name||e.immutable_data?.name||`Pixal #${e.asset_id}`,image:t,schema:e.schema?.schema_name||e.schema_name||"pixals",owner:e.owner||"",burned:e.burned||!1,mint:e.template_mint||0,contract:e.contract||"atomicassets",collection:{collectionName:e.collection?.collection_name||e.collection_name||"pixeljourney",displayName:e.collection?.name||e.collection?.collection_name||"Pixel Journey",verification:e.collection?.authorized_accounts?.length>0||!0,blacklisted:!1},transferable:!1!==e.transferable,burnable:!1!==e.burnable,mutableData:Array.isArray(e.mutable_data)?e.mutable_data:[],immutableData:Array.isArray(e.immutable_data)?e.immutable_data:[],template:{templateId:parseInt(e.template?.template_id||e.template_id||"0")}}}):(De.error("Invalid user assets API response structure:",i),[])}catch(n){if(a=n instanceof Error?n:new Error(String(n)),De.error(`Attempt ${i}/3 failed:`,"RWaxService.getUserPixalAssets",a),3===i)return De.error("All attempts failed, returning empty array","RWaxService.getUserPixalAssets"),[];await new Promise(e=>setTimeout(e,1e3*i))}return[]}async executeTokenization(e,t){try{const{wharfKitService:s}=await Y(async()=>{const{wharfKitService:e}=await Promise.resolve().then(()=>Kt);return{wharfKitService:e}},void 0);if(!s.isLoggedIn())throw new Error("Wallet not connected");const a=s.getAccountName();if(!a)throw new Error("No account found");const n=[{account:"nft.hive",name:"boost",authorization:[{actor:a,permission:"active"}],data:{booster:a}},{account:t.contract,name:"transfer",authorization:[{actor:a,permission:"active"}],data:{from:a,to:"rwax",quantity:t.fee,memo:"payfee"}},{account:"atomicassets",name:"transfer",authorization:[{actor:a,permission:"active"}],data:{from:a,to:"rwax",asset_ids:e,memo:"deposit"}},{account:"rwax",name:"tokenizenfts",authorization:[{actor:a,permission:"active"}],data:{user:a,asset_ids:e,fee_currency:`8,${t.symbol}`}}],i=await s.transact(n);return De.info("Tokenization transaction executed successfully","RWaxService.executeTokenization",{result:i}),i}catch(s){throw De.error("Error executing tokenization:","RWaxService.executeTokenization",s instanceof Error?s:new Error(String(s))),s}}async executeRedemption(e,t,s){try{const{wharfKitService:a}=await Y(async()=>{const{wharfKitService:e}=await Promise.resolve().then(()=>Kt);return{wharfKitService:e}},void 0);if(!a.isLoggedIn())throw new Error("Wallet not connected");const n=a.getAccountName();if(!n)throw new Error("No account found");const i=[{account:"nft.hive",name:"boost",authorization:[{actor:n,permission:"active"}],data:{booster:n}},{account:s.contract,name:"transfer",authorization:[{actor:n,permission:"active"}],data:{from:n,to:"rwax",quantity:s.fee,memo:"payfee"}},{account:"pixeljourney",name:"transfer",authorization:[{actor:n,permission:"active"}],data:{from:n,to:"rwax",quantity:t,memo:"redeem"}},{account:"rwax",name:"redeem",authorization:[{actor:n,permission:"active"}],data:{redeemer:n,contract:"pixeljourney",quantity:t,asset_id:e,fee_currency:`8,${s.symbol}`}}],r=await a.transact(i);return De.info("Redemption transaction executed successfully","RWaxService.executeRedemption",{result:r}),r}catch(a){throw De.error("Error executing redemption:","RWaxService.executeRedemption",a instanceof Error?a:new Error(String(a))),a}}},Us=({isOpen:e,onClose:t,onSuccess:s,nft:a})=>{const[n,i]=O.useState([]),[r,l]=O.useState(null),[o,c]=O.useState(!1),{showError:d}=xt();O.useEffect(()=>{e&&u()},[e]);const u=async()=>{try{c(!0);const e=await Bs.getFeeTokens();i(e);const t=e.find(e=>"WAX"===e.symbol);t&&l(t)}catch(e){De.error("Failed to load fee tokens","TokenizeFeeModal.loadFeeTokens",e),d("Failed to load fee tokens")}finally{c(!1)}},h=()=>{l(null),t()};return e?U.createPortal(Se.jsx("div",{className:"modal-overlay",onClick:h,children:Se.jsxs("div",{className:"modal-content tokenize-fee-modal",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsx("h2",{children:"\ud83e\ude99 Tokenize into WPIXAL"}),Se.jsx("button",{className:"close-button",onClick:h,children:"\xd7"})]}),Se.jsxs("div",{className:"modal-body",children:[a&&Se.jsxs("div",{className:"tokenize-asset-preview",children:[Se.jsx("img",{src:C(a.img),alt:a.name,className:"tokenize-asset-image",onError:e=>{e.target.src="https://pixeljourney.xyz/img/toppixals/10.webp"}}),Se.jsx("h3",{children:a.name}),Se.jsx("p",{className:"tokenize-description",children:"This will tokenize your Pixal PFP into WPIXAL tokens on the RWAX platform."})]}),o?Se.jsxs("div",{className:"loading-state",children:[Se.jsx("div",{className:"spinner"}),Se.jsx("p",{children:"Loading fee options..."})]}):Se.jsxs("div",{className:"fee-selection",children:[Se.jsx("h4",{children:"Select Fee Token:"}),Se.jsx("div",{className:"fee-options",children:n.map((e,t)=>Se.jsxs("div",{className:"fee-option "+(r===e?"selected":""),onClick:()=>l(e),children:[Se.jsxs("div",{className:"fee-info",children:[Se.jsx("span",{className:"fee-amount",children:e.fee}),Se.jsxs("span",{className:"fee-contract",children:["(",e.contract,")"]})]}),e.wax_value&&"WAX"!==e.symbol&&Se.jsxs("div",{className:"wax-equivalent",children:["\u2248 ",parseFloat(e.wax_value).toFixed(4)," WAX"]})]},t))})]})]}),Se.jsxs("div",{className:"modal-footer",children:[Se.jsx("button",{className:"cancel-button",onClick:h,children:"Cancel"}),Se.jsx("button",{className:"confirm-button tokenize-confirm",onClick:async()=>{if(r&&a)try{c(!0),await Bs.executeTokenization([a.asset_id],r),s?.(),h()}catch(e){De.error("Failed to tokenize asset","TokenizeFeeModal.handleConfirm",e),d("Failed to tokenize asset")}finally{c(!1)}},disabled:!r||o,children:"Tokenize Asset"})]})]})}),document.body):null};const Xs=new class{constructor(){M(this,"MAX_BATCH_SIZE",10),M(this,"RETRY_ATTEMPTS",3),M(this,"RETRY_DELAY",1e3),M(this,"FARMS_CONTRACT","farms.waxdao"),M(this,"TOKEN_FARMS_CONTRACT","tf.waxdao"),M(this,"PXJ_CONTRACT","pixeljourney"),M(this,"WUF_CONTRACT","wuffi"),M(this,"PXJ_FARM_NAME","pxjfarm1")}async stakeNFTsPixelJourney(e,t,s="pixeljourney"){try{const a={account:this.FARMS_CONTRACT,name:"stakenfts",authorization:[{actor:Gt.safeGetActor(e),permission:Gt.safeGetPermission(e)}],data:{user:Gt.safeGetActor(e),farmname:s,assets_to_stake:t}},n=await this.executeTransactionWithRetry(e,[a]);return n.success&&Oe.info("NFTs Staked Successfully","StakingService",{user:Gt.safeGetActor(e),farm_name:s,asset_count:t.length,asset_ids:t,transaction_id:n.transaction_id}),n}catch(a){return Oe.error("stakeNFTsPixelJourney failed","StakingService",a,{asset_ids:t,farm_name:s}),{success:!1,error:a instanceof Error?a.message:"Unknown error",transaction_id:"",gas_used:0}}}async unstakeNFTsPixelJourney(e,t,s="pixeljourney"){try{const a={account:this.FARMS_CONTRACT,name:"unstake",authorization:[{actor:Gt.safeGetActor(e),permission:Gt.safeGetPermission(e)}],data:{user:Gt.safeGetActor(e),farmname:s,asset_ids:t}},n=await this.executeTransactionWithRetry(e,[a]);return n.success&&Oe.info("NFTs Unstaked Successfully","StakingService",{user:Gt.safeGetActor(e),farm_name:s,asset_count:t.length,asset_ids:t,transaction_id:n.transaction_id}),n}catch(a){return Oe.error("unstakeNFTsPixelJourney failed","StakingService",a,{asset_ids:t,farm_name:s}),{success:!1,error:a instanceof Error?a.message:"Unknown error",transaction_id:"",gas_used:0}}}async stakeNFTsBatch(e,t,s="pixeljourney"){const a={success:!0,successful_transactions:[],failed_transactions:[],total_gas_used:0};try{const i=this.createBatches(t,this.MAX_BATCH_SIZE);for(const t of i)try{const n=await this.processBatch(e,t,"stake",s);a.successful_transactions.push(...n.successful_transactions),a.failed_transactions.push(...n.failed_transactions),a.total_gas_used+=n.total_gas_used,i.indexOf(t)<i.length-1&&await this.delay(500)}catch(n){t.forEach(e=>{a.failed_transactions.push({asset_id:e,error:n instanceof Error?n.message:"Batch processing failed"})})}return a.success=0===a.failed_transactions.length,Oe.info("NFT Staking Batch Operation","StakingService",{total_assets:t.length,successful:a.successful_transactions.length,failed:a.failed_transactions.length,farm_name:s}),a}catch(n){return Oe.error("stakeNFTsBatch failed","StakingService",n,{asset_ids:t,farm_name:s}),{success:!1,successful_transactions:[],failed_transactions:t.map(e=>({asset_id:e,error:n instanceof Error?n.message:"Unknown error"})),total_gas_used:0}}}async unstakeNFTsBatch(e,t){const s={success:!0,successful_transactions:[],failed_transactions:[],total_gas_used:0};try{const n=this.createBatches(t,this.MAX_BATCH_SIZE);for(const t of n)try{const a=await this.processBatch(e,t,"unstake");s.successful_transactions.push(...a.successful_transactions),s.failed_transactions.push(...a.failed_transactions),s.total_gas_used+=a.total_gas_used,n.indexOf(t)<n.length-1&&await this.delay(500)}catch(a){t.forEach(e=>{s.failed_transactions.push({asset_id:e,error:a instanceof Error?a.message:"Batch processing failed"})})}return s.success=0===s.failed_transactions.length,Oe.info("NFT Unstaking Batch Operation","StakingService",{total_assets:t.length,successful:s.successful_transactions.length,failed:s.failed_transactions.length}),s}catch(a){return Oe.error("unstakeNFTsBatch failed","StakingService",a,{asset_ids:t}),{success:!1,successful_transactions:[],failed_transactions:t.map(e=>({asset_id:e,error:a instanceof Error?a.message:"Unknown error"})),total_gas_used:0}}}async claimAllRewards(e,t="pixeljourney"){try{const s=[{account:this.FARMS_CONTRACT,name:"claim",authorization:[{actor:Gt.safeGetActor(e),permission:Gt.safeGetPermission(e)}],data:{user:Gt.safeGetActor(e),farmname:t}}],a=await this.executeTransactionWithRetry(e,s);return a.success&&Oe.info("Rewards Claimed Successfully","StakingService",{user:Gt.safeGetActor(e),farm_name:t,transaction_id:a.transaction_id}),a}catch(s){return Oe.error("claimAllRewards failed","StakingService",s,{user:Gt.safeGetActor(e),farm_name:t}),{success:!1,error:s instanceof Error?s.message:"Failed to claim rewards"}}}async getStakingInfo(e,t="pixeljourney"){try{const s=await fetch(`${He.WAX_CHAIN.GREYMASS}/v1/chain/get_table_rows`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({json:!0,code:this.FARMS_CONTRACT,scope:this.FARMS_CONTRACT,table:"stakers",lower_bound:e,upper_bound:e,limit:1e3})});if(!s.ok)throw new Error(`Failed to fetch staking info: ${s.statusText}`);const a=(await s.json()).rows.find(t=>t.user===e)||{},n=a.staked_assets||[],i=a.pending_rewards||[],r=n.map(e=>({asset_id:e,template_id:"0",farm_name:t,stake_time:Date.now()/1e3,rewards_per_hour:{pxj:0,wuf:0},multiplier:1}))||[],l=i.map(e=>({token:e.quantity.split(" ")[1],amount:parseFloat(e.quantity.split(" ")[0]),contract:e.contract,precision:4})),o=r.reduce((e,t)=>e+Object.values(t.rewards_per_hour).reduce((e,t)=>e+t,0)*t.multiplier,0),c=[{token:"PXJ",amount:r.reduce((e,t)=>e+24*(t.rewards_per_hour.pxj||0),0),contract:this.PXJ_CONTRACT,precision:4},{token:"WUF",amount:r.reduce((e,t)=>e+24*(t.rewards_per_hour.wuf||0),0),contract:this.WUF_CONTRACT,precision:4}];return{staked_nfts:r,pending_rewards:l,total_staking_power:o,estimated_daily_rewards:c}}catch(s){return Oe.error("getStakingInfo failed","StakingService",s,{account:e,farm_name:t}),{staked_nfts:[],pending_rewards:[],total_staking_power:0,estimated_daily_rewards:[]}}}async stakeTokens(e,t,s=this.PXJ_FARM_NAME){try{const a=[{account:this.PXJ_CONTRACT,name:"transfer",authorization:[{actor:Gt.safeGetActor(e),permission:Gt.safeGetPermission(e)}],data:{from:Gt.safeGetActor(e),to:this.TOKEN_FARMS_CONTRACT,quantity:t,memo:`stake:${s}`}}],n=await this.executeTransactionWithRetry(e,a);return n.success&&Oe.info("Token staked successfully","StakingService",{type:"token_stake",user:Gt.safeGetActor(e),amount:t,farm_name:s}),n}catch(a){return Oe.error("stakeTokens failed","StakingService",a,{user:Gt.safeGetActor(e),amount:t,farm_name:s}),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async unstakeTokens(e,t,s=this.PXJ_FARM_NAME){try{const a=[{account:this.TOKEN_FARMS_CONTRACT,name:"unstake",authorization:[{actor:Gt.safeGetActor(e),permission:Gt.safeGetPermission(e)}],data:{user:Gt.safeGetActor(e),farm_name:s,quantity:t}}],n=await this.executeTransactionWithRetry(e,a);return n.success&&Oe.info("Token unstaked successfully","StakingService",{type:"token_unstake",user:Gt.safeGetActor(e),amount:t,farm_name:s}),n}catch(a){return Oe.error("unstakeTokens failed","StakingService",a,{user:Gt.safeGetActor(e),amount:t,farm_name:s}),{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async claimTokenFarmRewards(e,t=this.PXJ_FARM_NAME){try{const s=[{account:this.TOKEN_FARMS_CONTRACT,name:"getreward",authorization:[{actor:Gt.safeGetActor(e),permission:Gt.safeGetPermission(e)}],data:{user:Gt.safeGetActor(e),farm_name:t}}],a=await this.executeTransactionWithRetry(e,s);return a.success&&Oe.info("Token farm rewards claimed successfully","StakingService",{type:"token_claim_rewards",user:Gt.safeGetActor(e),farm_name:t}),a}catch(s){return Oe.error("claimTokenFarmRewards failed","StakingService",s,{user:Gt.safeGetActor(e),farm_name:t}),{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async getTokenFarmInfo(e=this.PXJ_FARM_NAME){try{const t=await fetch(`${He.WAX_CHAIN.GREYMASS}/v1/chain/get_table_rows`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({json:!0,code:this.TOKEN_FARMS_CONTRACT,scope:this.TOKEN_FARMS_CONTRACT,table:"farms",lower_bound:e,upper_bound:e,limit:1})});if(!t.ok)throw new Error(`Failed to fetch farm info: ${t.statusText}`);const s=(await t.json()).rows.find(t=>t.farm_name===e);return s?{farm_name:s.farm_name,creator:s.creator,time_created:s.time_created,staking_token:s.staking_token,incentive_count:s.incentive_count,total_staked:s.total_staked,vesting_time:s.vesting_time,last_update_time:s.last_update_time}:null}catch(t){return Oe.error("getTokenFarmInfo failed","StakingService",t,{farm_name:e}),null}}async getTokenStakingInfo(e,t=this.PXJ_FARM_NAME){try{const s=await fetch(`${He.WAX_CHAIN.GREYMASS}/v1/chain/get_table_rows`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({json:!0,code:this.TOKEN_FARMS_CONTRACT,scope:t,table:"stakers",lower_bound:e,upper_bound:e,limit:1})});if(!s.ok)throw new Error(`Failed to fetch token staking info: ${s.statusText}`);const a=(await s.json()).rows.find(t=>t.user===e);if(!a)return null;const n=(a.pending_rewards||[]).map(e=>({token:e.quantity.split(" ")[1],amount:parseFloat(e.quantity.split(" ")[0]),contract:e.contract,precision:4}));return{farm_name:t,user:a.user,staked_amount:a.staked_amount,stake_time:a.stake_time,pending_rewards:n,vesting_time:a.vesting_time,last_claim_time:a.last_claim_time}}catch(s){return Oe.error("getTokenStakingInfo failed","StakingService",s,{account:e,farm_name:t}),null}}async calculateOptimalStakingStrategy(e,t="pixeljourney"){try{const s=await this.getStakingInfo(e,t),a=new Set(s.staked_nfts.map(e=>e.asset_id)),n=await fetch(`${dt.atomicAssetsAPI}/atomicassets/v1/assets?owner=${e}&collection_name=pixeljourney&page=1&limit=1000&order=desc&sort=asset_id`);if(!n.ok)throw new Error("Failed to fetch available NFTs");const i=await n.json(),r=i.data?.filter(e=>!a.has(e.asset_id)).map(e=>({asset_id:e.asset_id,template_id:e.template.template_id,farm_name:t,stake_time:0,rewards_per_hour:this.calculateRewardsPerHour(e.template.template_id),multiplier:1}))||[],l=await this.getTemplateRewards(),o=r.map(e=>{const t=l[e.template_id]||{pxj:0,wuf:0},s=this.getRarityMultiplier(this.getTemplateRarity(e.template_id)),a=24*(t.pxj+t.wuf)*s;return{asset_id:e.asset_id,expected_daily_return:a,priority:this.calculateStakingPriority(this.getTemplateRarity(e.template_id),a)}}).sort((e,t)=>t.priority-e.priority),c=o.reduce((e,t)=>e+t.expected_daily_return,0);return{recommended_stakes:o,total_expected_daily_return:c,optimization_tips:this.generateOptimizationTips(o,r),available_nfts:r}}catch(s){return Oe.error("calculateOptimalStakingStrategy failed","StakingService",s,{account:e}),{recommended_stakes:[],total_expected_daily_return:0,optimization_tips:["Unable to calculate optimal strategy. Please try again later."],available_nfts:[]}}}async processBatch(e,t,s,a){const n=t.map(t=>"stake"===s?{account:this.FARMS_CONTRACT,name:"stake",authorization:[{actor:Gt.safeGetActor(e),permission:Gt.safeGetPermission(e)}],data:{owner:Gt.safeGetActor(e),asset_id:t,farm_name:a||"pixeljourney"}}:{account:this.FARMS_CONTRACT,name:"unstake",authorization:[{actor:Gt.safeGetActor(e),permission:Gt.safeGetPermission(e)}],data:{owner:Gt.safeGetActor(e),asset_id:t}});try{const s=await this.executeTransactionWithRetry(e,n);return s.success?{success:!0,successful_transactions:t,failed_transactions:[],total_gas_used:s.gas_used||0}:{success:!1,successful_transactions:[],failed_transactions:t.map(e=>({asset_id:e,error:s.error||"Transaction failed"})),total_gas_used:0}}catch(i){return{success:!1,successful_transactions:[],failed_transactions:t.map(e=>({asset_id:e,error:i instanceof Error?i.message:"Unknown error"})),total_gas_used:0}}}async executeTransactionWithRetry(e,t,s=1){try{const s=await e.transact({actions:t});return{success:!0,transaction_id:s?.transaction_id||s?.id||"",gas_used:s?.cpu_usage_us||s?.max_net_usage_words||0}}catch(a){return s<this.RETRY_ATTEMPTS?(await this.delay(this.RETRY_DELAY*s),this.executeTransactionWithRetry(e,t,s+1)):{success:!1,error:a instanceof Error?a.message:"Transaction failed"}}}createBatches(e,t){const s=[];for(let a=0;a<e.length;a+=t)s.push(e.slice(a,a+t));return s}delay(e){return new Promise(t=>setTimeout(t,e))}async getTemplateRewards(){try{const e=await fetch(`${He.WAX_CHAIN.GREYMASS}/v1/chain/get_table_rows`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({json:!0,code:this.FARMS_CONTRACT,scope:this.FARMS_CONTRACT,table:"templrewards",limit:1e3})});if(!e.ok)throw new Error("Failed to fetch template rewards");const t=await e.json(),s={};return t.rows.forEach(e=>{const t={pxj:0,wuf:0};e.hourly_rewards&&Array.isArray(e.hourly_rewards)&&e.hourly_rewards.forEach(e=>{const s=parseFloat(e.quantity.split(" ")[0]),a=e.quantity.split(" ")[1];"PXJ"===a&&(t.pxj=s),"WUF"===a&&(t.wuf=s)}),s[e.template_id]=t}),s}catch{return{1001:{pxj:50,wuf:25},1002:{pxj:10,wuf:5},1003:{pxj:2,wuf:1},1004:{pxj:.5,wuf:.25},1005:{pxj:.1,wuf:.05}}}}getRarityMultiplier(e){switch(e.toLowerCase()){case"legendary":return 5;case"epic":return 3;case"rare":return 2;case"uncommon":return 1.5;default:return 1}}calculateStakingPriority(e,t){return 100*this.getRarityMultiplier(e)+10*t}generateOptimizationTips(e,t){const s=[],a=t.reduce((e,t)=>{const s=this.getTemplateRarity(t.template_id);return e[s]=(e[s]||0)+1,e},{});a.Legendary>0&&s.push("Prioritize staking Legendary ingredients for maximum rewards"),a.Epic>5&&s.push("Consider staking Epic ingredients in batches to optimize gas costs"),e.length>20&&s.push("Use batch staking to reduce transaction costs for large collections");return e.reduce((e,t)=>e+t.expected_daily_return,0)>100&&s.push("Your collection has high earning potential - consider staking all eligible NFTs"),0===s.length&&s.push("Stake your highest rarity NFTs first for optimal returns"),s}calculateRewardsPerHour(e){return{1001:{pxj:50,wuf:25},1002:{pxj:10,wuf:5},1003:{pxj:2,wuf:1},1004:{pxj:.5,wuf:.25},1005:{pxj:.1,wuf:.05}}[e]||{pxj:0,wuf:0}}getTemplateRarity(e){return{1001:"Legendary",1002:"Epic",1003:"Rare",1004:"Uncommon",1005:"Common"}[e]||"Common"}},qs=D.memo(({imageUrl:e,videoUrl:t,alt:s,className:a="",loading:n="lazy",enableAnimations:i=!0,placeholder:r,onLoad:l,onError:o})=>{const[c,d]=O.useState(!1),[u,h]=O.useState(!1),[m,p]=O.useState("eager"===n),f=O.useRef(null),x=O.useRef(null),g=e=>e?"string"!=typeof e?null:e.startsWith("http")?e:e.startsWith("Qm")?`${He.IPFS.GATEWAYS[0]}${e}`:e:null,v=g(t),j=g(e),y=()=>{if(r)return r;return`data:image/svg+xml;base64,${btoa('<svg width="200" height="200" xmlns="http://www.w3.org/2000/svg">\n      <rect width="200" height="200" fill="#f8fafc"/>\n      <rect x="50" y="80" width="100" height="8" rx="4" fill="#e2e8f0">\n        <animate attributeName="opacity" values="0.5;1;0.5" dur="1.5s" repeatCount="indefinite"/>\n      </rect>\n      <rect x="60" y="100" width="80" height="6" rx="3" fill="#e2e8f0">\n        <animate attributeName="opacity" values="0.5;1;0.5" dur="1.5s" begin="0.3s" repeatCount="indefinite"/>\n      </rect>\n      <rect x="70" y="120" width="60" height="6" rx="3" fill="#e2e8f0">\n        <animate attributeName="opacity" values="0.5;1;0.5" dur="1.5s" begin="0.6s" repeatCount="indefinite"/>\n      </rect>\n    </svg>')}`},b=()=>`data:image/svg+xml;base64,${btoa('<svg width="200" height="200" xmlns="http://www.w3.org/2000/svg">\n      <rect width="200" height="200" fill="#fef2f2"/>\n      <circle cx="100" cy="80" r="20" fill="#fca5a5"/>\n      <text x="100" y="85" text-anchor="middle" font-family="Arial" font-size="16" fill="#dc2626">!</text>\n      <text x="100" y="120" text-anchor="middle" font-family="Arial" font-size="12" fill="#991b1b">Failed to load</text>\n    </svg>')}`;O.useEffect(()=>{if("eager"===n||m)return;const e=new IntersectionObserver(([t])=>{t.isIntersecting&&(p(!0),e.disconnect())},{rootMargin:"50px"}),t=f.current||x.current;return t&&e.observe(t),()=>e.disconnect()},[n,m]);const N=()=>{d(!0),h(!1),l?.()},w=()=>{h(!0),d(!1),o?.()};return m&&(c||u)?u?Se.jsx("img",{src:b(),alt:`Error loading ${s}`,className:a,style:{width:"100%",height:"100%",objectFit:"cover"}}):v&&i&&c?Se.jsxs("video",{ref:x,className:a,muted:!0,loop:!0,autoPlay:!0,poster:j||void 0,style:{width:"100%",height:"100%",objectFit:"cover",opacity:c?1:0,transition:"opacity 0.3s ease"},children:[Se.jsx("source",{src:v,type:"video/mp4"}),Se.jsx("source",{src:v,type:"video/webm"})]}):Se.jsx("img",{ref:f,src:j||b(),alt:s,className:a,style:{width:"100%",height:"100%",objectFit:"cover",opacity:c?1:0,transition:"opacity 0.3s ease"}}):Se.jsxs("div",{className:`progressive-image-container ${a}`,children:[Se.jsx("img",{ref:f,src:y(),alt:`Loading ${s}`,className:"progressive-image-placeholder",style:{width:"100%",height:"100%",objectFit:"cover",filter:"blur(2px)",transition:"filter 0.3s ease"}}),m&&j&&Se.jsx("img",{src:j,alt:s,style:{display:"none"},onLoad:N,onError:w}),m&&v&&i&&Se.jsx("video",{ref:x,src:v,style:{display:"none"},onLoadedData:N,onError:w,muted:!0,loop:!0})]})});qs.displayName="ProgressiveImage";const Hs=O.memo(({nft:e,selectedNFTs:t,isSelected:s,settings:a,dropdownOpen:n,onNFTClick:i,onCollectionClick:r,onSchemaClick:l,onToggleSelection:o,onDropdownToggle:c,onListingOpen:d,onTransferOpen:u,onBurnOpen:h,onAuctionOpen:m,onRecyclePixal:p,onCraftingOpen:f,onViewOffers:x,onUnpackPixelPack:g,onStakeOpen:v,onTokenizePixal:j,onImageZoom:y})=>{const b=n===e.asset_id,N="pixeljourney"===e.collection.collection_name&&"pixals"===e.schema.schema_name,w="pixeljourney"===e.collection.collection_name&&"ingredients"===e.schema.schema_name,k=Je.isValidWaxRock(e.data.WaxRock);return Se.jsxs("div",{className:`inventory-page-card ${t.size>0?"selectable":""} ${s?"selected":""}`,children:[Se.jsx("div",{className:"selection-checkbox",children:Se.jsx("input",{type:"checkbox",checked:s,onChange:()=>o(e.asset_id),onClick:e=>e.stopPropagation()})}),Se.jsxs("div",{className:"inventory-page-media",onClick:()=>{t.size>0?o(e.asset_id):i(e)},children:[Se.jsx(qs,{imageUrl:cs(e),videoUrl:ds(e),alt:e.name,className:"inventory-media",loading:"lazy",enableAnimations:a.enableAnimatedNFTs}),Se.jsx("div",{className:"zoom-overlay",onClick:t=>{t.stopPropagation(),y(cs(e)||"",ds(e)||"",e.name||`Asset #${e.asset_id}`)},title:"Click to zoom",children:Se.jsxs("svg",{className:"zoom-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("circle",{cx:"11",cy:"11",r:"8"}),Se.jsx("path",{d:"m21 21-4.35-4.35"}),Se.jsx("path",{d:"M11 8v6M8 11h6"})]})}),e.mint_number&&Se.jsxs("div",{className:"mint-badge",children:["#",e.mint_number]})]}),Se.jsxs("div",{className:"inventory-page-info",children:[Se.jsx("h3",{className:"inventory-page-name",onClick:()=>{t.size>0?o(e.asset_id):i(e)},children:e.name}),Se.jsxs("div",{className:"inventory-page-details",children:[Se.jsx("span",{className:"inventory-page-collection",onClick:()=>r(e.collection.collection_name),children:"string"==typeof e.collection?e.collection:e.collection?.name||e.collection?.collection_name||"Unknown"}),Se.jsx("span",{className:"inventory-page-schema",onClick:()=>l(e.schema.schema_name),children:e.schema.schema_name})]}),Se.jsxs("div",{className:"inventory-page-actions",children:[Se.jsxs("div",{className:"basic-actions",children:[Se.jsx("button",{className:"inv-action-btn list-btn",onClick:t=>{t.stopPropagation(),d(e)},title:"List for Sale","aria-label":`List ${e.name} for sale`,children:"\ud83d\udcb0"}),Se.jsx("button",{className:"inv-action-btn transfer-btn",onClick:t=>{t.stopPropagation(),u(e)},title:"Transfer","aria-label":`Transfer ${e.name} to another account`,children:"\ud83d\udce4"}),Se.jsx("button",{className:"inv-action-btn offers-btn",onClick:t=>{t.stopPropagation(),x(e)},"aria-label":`View offers for ${e.name}`,title:"View Offers",children:"\ud83d\udc41\ufe0f"})]}),Se.jsxs("div",{className:"more-actions-dropdown","data-dropdown-id":e.asset_id,children:[Se.jsx("button",{className:"more-actions-btn",onClick:t=>{t.stopPropagation(),c(e.asset_id)},title:"More Actions","aria-label":`More actions for ${e.name}`,"aria-expanded":b,children:"\u22ee"}),b&&Se.jsxs("div",{className:"inv-dropdown-menu",children:[Se.jsx("button",{className:"inv-dropdown-item auction-item",onClick:t=>{t.stopPropagation(),m(e)},"aria-label":`Create auction for ${e.name}`,children:"\ud83c\udfc6 Create Auction"}),!k&&Se.jsx("button",{className:"inv-dropdown-item burn-item",onClick:t=>{t.stopPropagation(),h(e)},"aria-label":`Burn ${e.name}`,children:"\ud83d\udd25 Burn"}),N&&!k&&Se.jsx("button",{className:"inv-dropdown-item recycle-item",onClick:t=>{t.stopPropagation(),p(e)},"aria-label":`Recycle ${e.name}`,children:"\u267b\ufe0f Recycle"}),N&&Se.jsx("button",{className:"inv-dropdown-item tokenize-item",onClick:t=>{t.stopPropagation(),j(e)},"aria-label":`Tokenize ${e.name} into WPIXAL`,children:"\ud83e\ude99 Tokenize into WPIXAL"}),(N||w)&&Se.jsxs("button",{className:"inv-dropdown-item craft-item",onClick:t=>{t.stopPropagation(),f(e)},"aria-label":`Use ${e.name} for crafting`,children:["\ud83d\udd28 ",w?"Craft with Ingredient":"Craft"]}),"pixeljourney"===e.collection.collection_name&&Se.jsx("button",{className:"inv-dropdown-item stake-item",onClick:t=>{t.stopPropagation(),v(e)},"aria-label":`Stake ${e.name}`,children:"\ud83e\udd69 Stake NFT"}),Rs.isPixelPack(e)&&Se.jsx("button",{className:"inv-dropdown-item unpack-item",onClick:t=>{t.stopPropagation(),g(e)},children:"\ud83d\udce6 Unpack"})]})]})]})]})]})}),Js=O.memo(()=>{const e=B(),{settings:t}=st(),{showSuccess:s,showError:a,confirm:n}=xt(),[i,r]=O.useState([]),[l,o]=O.useState(!1),[c,d]=O.useState(!1),[u,h]=O.useState(!1),[m,p]=O.useState(!1),[f,x]=O.useState(!1),[g,v]=O.useState(!1),[j,y]=O.useState(!1),[b,N]=O.useState(!1),[w,k]=O.useState(!1),[_,S]=O.useState(!1),[C,A]=O.useState(!1),[P,T]=O.useState(!1),[E,F]=O.useState(null),[I,$]=O.useState(new Set),[L,M]=O.useState(!1),[R,W]=O.useState(null),[D,z]=O.useState(!1),[U,X]=O.useState(null),[q,H]=O.useState(!1),[J,V]=O.useState(null),[G,Y]=O.useState(!1),[K,Q]=O.useState(null),[Z,ee]=O.useState(null),[te,se]=O.useState(!1),ae=O.useCallback((e,t,s)=>{const a=t||e,n=t?"video":"image";let i=a;a.startsWith("Qm")||a.startsWith("baf")?i=`https://ipfs.io/ipfs/${a}`:a.startsWith("/ipfs/")?i=`https://ipfs.io${a}`:a.startsWith("ipfs://")&&(i=a.replace("ipfs://","https://ipfs.io/ipfs/")),ee({url:i,name:s,type:n}),se(!0)},[]),[ne,ie]=O.useState(""),[re,le]=O.useState(""),[oe,ce]=O.useState([]),[de,ue]=O.useState("all"),[he,me]=O.useState("all"),[pe,fe]=O.useState("all"),[xe,ge]=O.useState(""),[ve,je]=O.useState("transferred"),[ye,be]=O.useState("desc"),[Ne]=O.useState(""),[we,ke]=O.useState([]),[_e,Ce]=O.useState([]),[Ae,Pe]=O.useState(!1),[Te,Ee]=O.useState({start:"",end:""}),[Fe,$e]=O.useState(1),[Le,Me]=O.useState(!1),[Re,We]=O.useState(!1),[Oe,ze]=O.useState(!1),Be=1e3,[Ue,Xe]=O.useState(1),{isConnected:qe,account:He,login:Ve,session:Ge}=Ie(),Ye=O.useCallback(async(e=1,t=!1)=>{if(He)if(l||Re)De.debug("Skipping loadInventory - already loading","Inventory");else{1===e?(o(!0),$e(1)):We(!0);try{let s;De.debug("Loading inventory","Inventory",{filter:de,page:e,ITEMS_PER_PAGE:Be,sortBy:ve,sortOrder:ye});const a={page:e,limit:Be,order:ye,sort:ve.includes("_")?"asset_id":ve,search:re||void 0,template_id:xe||void 0};switch(Te.start&&(a.after=new Date(Te.start).getTime()/1e3),Te.end&&(a.before=new Date(Te.end).getTime()/1e3),de){case"pixals":case"waxrock":a.collection_name="pixeljourney",a.schema_name="pixals";break;case"ingredients":a.collection_name="pixeljourney",a.schema_name="ingredients";break;case"packs":a.collection_name="pixeljourney",a.schema_name="packs";break;default:"all"!==he&&(a.collection_name=he),"all"!==pe&&(a.schema_name=pe)}const n=await dt.getUserInventoryEnhanced(He,a);s={data:n.assets||[],hasMore:n.hasMore,totalCount:n.total||0,collections:n.collections||[],schemas:n.schemas||[]},s.collections&&s.collections.length>0&&ke(e=>[...new Set([...e,...s.collections])].sort()),s.schemas&&s.schemas.length>0&&Ce(e=>[...new Set([...e,...s.schemas])].sort()),De.debug("Inventory Response","Inventory",{itemsReceived:s?.data?.length||0,totalAvailable:s?.totalCount||"unknown",hasMore:s?.hasMore});let i=s.data.map(e=>({asset_id:e.asset_id,name:e.name,img:e.image||e.img,video:e.video||e.traits?.video||e.data?.video||void 0,collection:{name:e.collection||e.collection_name,collection_name:e.collection||e.collection_name},schema:{schema_name:e.schema||e.schema_name},template:{template_id:e.template_id||e.template?.template_id||"0",max_supply:e.max_supply||e.template?.max_supply||"0"},data:e.traits||e.data||{},mint_number:e.template_mint||e.mint_number}));if(1===e&&"all"===de){const e=[...new Set(i.map(e=>e.collection.collection_name).filter(e=>"string"==typeof e&&""!==e.trim()))].sort();ke(e)}t&&e>1?(r(e=>[...e,...i]),$e(e)):(r(i),$e(1)),Me(s.hasMore)}catch(s){De.error("Error loading inventory","Inventory",s);const a=s instanceof Error?s.message:"Unknown error occurred";1!==e||t?De.warn("Failed to load more inventory items","Inventory",{errorMessage:a}):(r([]),De.warn("Failed to load inventory","Inventory",{errorMessage:a})),Me(!1)}finally{o(!1),We(!1)}}},[He,de,he,Be]);O.useEffect(()=>{qe&&He&&(De.debug("Inventory reload triggered","Inventory",{filter:de,selectedCollection:he,selectedSchema:pe,selectedTemplate:xe,sortBy:ve,sortOrder:ye,searchTerm:ne,dateRange:Te}),Ye(1,!1))},[qe,He,de,he,pe,xe,ve,ye,ne,Te]);const Ke=O.useCallback(()=>{Le&&!Re&&He&&Ye(Fe+1,!0)},[Le,Re,Fe,He,Ye]),Qe=O.useCallback(async()=>{if(!Le||Oe||!He)return void De.debug("LoadAll skipped","Inventory",{hasMore:Le,loadingAll:Oe,account:He});ze(!0),De.debug("Starting loadAllItems with concurrent requests","Inventory",{currentInventoryLength:i.length,hasMore:Le,currentPage:Fe});let e=Fe+1,t=[],s=!0,a=0;try{for(;s&&a<50;){const n=[],l=[];for(let t=0;t<2&&s;t++){const s=e+t;l.push(s);const a=(async()=>{const e=1e3*(s-1);try{switch(de){case"pixals":return await dt.getUserInventoryBySchema(He,"pixeljourney","pixals",1e3,e);case"ingredients":return await dt.getUserInventoryBySchema(He,"pixeljourney","ingredients",1e3,e);case"waxrock":return await dt.getUserInventoryWaxRocks(He,1e3,e);default:{const e="all"!==he?he:void 0;return await dt.getUserInventoryWithFilter(He,s,1e3,e)}}}catch(t){return De.error("Error in individual request","Inventory",t instanceof Error?t:new Error(String(t))),{assets:[],total:0,hasMore:!1}}})();n.push(a)}De.debug("LoadAll Concurrent Batch","Inventory",{pages:l,currentItems:i.length+t.length});const o=await Promise.allSettled(n);a+=o.length;let c=!1;for(let e=0;e<o.length;e++){const a=o[e],n=l[e];if("fulfilled"===a.status){const e=a.value;if(De.debug("LoadAll Response","Inventory",{page:n,items:e?.assets?.length||0,hasMore:e?.hasMore,total:e?.total}),e&&e.assets&&e.assets.length>0){c=!0;let s=e.assets.map(e=>({asset_id:e.asset_id,name:e.name,img:e.image,video:e.video||e.traits?.video||void 0,collection:{name:e.collection,collection_name:e.collection},schema:{schema_name:e.schema},template:{template_id:e.template_id?.toString()||"0",max_supply:e.max_supply||"0"},data:e.traits||{},mint_number:e.template_mint}));"waxrock"===de&&(s=s.filter(e=>{const t=e.data.WaxRock;return"pixeljourney"===e.collection.collection_name&&"pixals"===e.schema.schema_name&&t&&"none"!==t})),t.push(...s)}e&&e.hasMore||(s=!1)}else De.error("LoadAll Request Failed","Inventory",new Error(`Page ${n}: ${a.reason}`))}c||(s=!1,De.debug("No more items found, stopping LoadAll","Inventory")),e+=2,t.length>0&&(r(e=>{const s=[...e,...t];return De.debug("Updated inventory","Inventory",{previousCount:e.length,newCount:s.length,addedCount:t.length}),s}),$e(e-1),t=[]),s&&await new Promise(e=>setTimeout(e,100))}De.debug("LoadAll Complete with concurrent requests","Inventory",{totalItems:i.length,totalRequests:a}),Me(!1)}catch(n){De.error("Error loading all items","Inventory",n);const e=n instanceof Error?n.message:"Unknown error occurred";De.warn("Failed to load all inventory items","Inventory",{errorMessage:e}),Me(!1)}finally{ze(!1)}},[Le,Oe,He,Fe,Be,de,he,i.length]);O.useEffect(()=>{const e=e=>{R&&!e.target.closest(".more-actions-dropdown")&&W(null)},t=()=>{if(R){const e=document.querySelector(`[data-dropdown-id="${R}"] .inv-dropdown-menu`);if(e){const t=e.getBoundingClientRect(),s=window.innerWidth;e.classList.remove("dropdown-left","dropdown-down"),t.right>s&&e.classList.add("dropdown-left"),t.top<0&&e.classList.add("dropdown-down")}}};return document.addEventListener("mousedown",e),R&&setTimeout(t,0),()=>document.removeEventListener("mousedown",e)},[R]);const Ze=t=>{e(`/assets/${t.asset_id}`)},et=t=>{e(`/marketplace?collection=${t}`)},tt=t=>{e(`/marketplace?schema=${t}`)},at=e=>{const t=new Set(I);t.has(e)?(t.delete(e),0===t.size&&M(!1)):(t.add(e),L||M(!0)),$(t)},nt=async()=>{if(0===I.size)return;if(!He||!Ge)return void a("Wallet Required","Please connect your wallet first");const e=i.filter(e=>I.has(e.asset_id)).filter(e=>Rs.isPixelPack(e));if(0!==e.length)try{if(!(await n("Confirm Bulk Unpack",`Are you sure you want to unpack ${e.length} pixelpack(s)?\n\nThis action cannot be undone and will be processed in batches of 20.`,"Unpack All","Cancel")))return;const t=e.map(e=>e.asset_id),a=await Rs.unpackPixelPacksBulk(t,He);for(let e=0;e<a.length;e++){const t=a[e];s(`Processing batch ${e+1} of ${a.length}...`,"Bulk Unpack"),await Rs.executeUnpack(t,Ge)}s("Bulk Unpack Successful",`Successfully unpacked ${e.length} pixelpack(s)!`),$(new Set),await Ye()}catch(t){De.error("Bulk unpack failed","Inventory",t),a("Bulk Unpack Failed",t instanceof Error?t.message:"Unknown error occurred")}else a("No pixelpack NFTs selected","Please select pixelpack items to unpack.")};O.useEffect(()=>{const e=setTimeout(()=>{le(ne)},300);return()=>clearTimeout(e)},[ne]);const it=O.useCallback(e=>{if(!e||e.length<2)return[];const t=new Map,s=e.toLowerCase();return i.forEach(e=>{if(e.name.toLowerCase().includes(s)){const s=`name:${e.name}`;if(t.has(s)){const e=t.get(s);e.count=(e.count||0)+1}else t.set(s,{text:e.name,type:"name",count:1})}if(e.collection.collection_name.toLowerCase().includes(s)){const s=`collection:${e.collection.collection_name}`;if(t.has(s)){const e=t.get(s);e.count=(e.count||0)+1}else t.set(s,{text:e.collection.collection_name,type:"collection",count:1})}if(e.schema.schema_name.toLowerCase().includes(s)){const s=`schema:${e.schema.schema_name}`;if(t.has(s)){const e=t.get(s);e.count=(e.count||0)+1}else t.set(s,{text:e.schema.schema_name,type:"schema",count:1})}}),Array.from(t.values()).sort((e,t)=>(t.count||0)-(e.count||0)).slice(0,8)},[i]);O.useEffect(()=>{const e=it(ne);ce(e)},[ne,it]);const rt=O.useMemo(()=>i.filter(e=>{const t=""===re||e.name.toLowerCase().includes(re.toLowerCase())||e.collection.collection_name.toLowerCase().includes(re.toLowerCase())||e.schema.schema_name.toLowerCase().includes(re.toLowerCase()),s="all"===de||"pixals"===de&&"pixeljourney"===e.collection.collection_name&&"pixals"===e.schema.schema_name||"waxrock"===de&&"pixeljourney"===e.collection.collection_name&&"pixals"===e.schema.schema_name&&e.data?.WaxRock&&"none"!==e.data.WaxRock||"ingredients"===de&&"pixeljourney"===e.collection.collection_name&&"ingredients"===e.schema.schema_name||"packs"===de&&Rs.isPackNFT(e);return t&&s}).sort((e,t)=>{switch(ve){case"name_asc":return e.name.localeCompare(t.name);case"name_desc":return t.name.localeCompare(e.name);case"collection_asc":return e.collection.collection_name.localeCompare(t.collection.collection_name);case"collection_desc":return t.collection.collection_name.localeCompare(e.collection.collection_name);case"mint_asc":return(e.mint_number||0)-(t.mint_number||0);case"mint_desc":return(t.mint_number||0)-(e.mint_number||0);default:return 0}}),[i,re,de,ve]),lt=rt.length;O.useEffect(()=>{const e=Math.ceil(lt/Be);Xe(Math.max(1,e))},[lt]);const ot=O.useMemo(()=>{const e=(Fe-1)*Be,t=e+Be;return rt.slice(e,t)},[rt,Fe,Be]),ct=O.useCallback(()=>{Fe<Ue&&$e(e=>e+1)},[Fe,Ue]),ut=O.useCallback(()=>{Fe>1&&$e(e=>e-1)},[Fe]);return O.useEffect(()=>{$e(1)},[de,he,re,ve]),qe?Se.jsxs("div",{className:"inventory-container",children:[Se.jsxs("div",{className:"inventory-header",children:[Se.jsx("h1",{className:"inventory-title",children:"My NFT Inventory"}),Se.jsxs("div",{className:"inventory-action-buttons",children:[Se.jsx("button",{className:"btn inventory-action-btn craft-btn",onClick:()=>{z(!0)},title:"Open crafting interface",children:"\ud83d\udd28 Craft"}),Se.jsx("button",{className:"btn btn-success inventory-action-btn",onClick:async()=>{if(He&&Ge)try{const e=await Xs.claimAllRewards(Ge,"pixeljourney");e.success?s("Rewards Claimed Successfully","All pending rewards have been claimed and transferred to your wallet!"):a("Claim Failed",e.error||"Failed to claim rewards")}catch(e){console.error("Claim rewards error:",e),a("Claim Failed",e instanceof Error?e.message:"An unexpected error occurred")}else a("Wallet Required","Please connect your wallet first")},title:"Claim all pending staking rewards",disabled:!He||!Ge,children:"\ud83d\udcb0 Claim"})]})]}),Se.jsxs("div",{className:"inventory-page-filters",children:[Se.jsx(ys,{searchTerm:ne,onSearchChange:e=>{ie(e),$e(1)},suggestions:oe,placeholder:"Search NFTs by name, collection, or schema...",showFilters:!1,className:"inventory-search"}),Se.jsxs("div",{className:"inventory-controls",children:[Se.jsxs("div",{className:"inventory-filter-tabs",children:[Se.jsx("button",{className:"inventory-filter-tab "+("all"===de?"active":""),onClick:()=>{ue("all"),$e(1)},children:"All NFTs"}),Se.jsx("button",{className:"inventory-filter-tab "+("pixals"===de?"active":""),onClick:()=>{ue("pixals"),$e(1)},children:"Pixals"}),Se.jsx("button",{className:"inventory-filter-tab "+("waxrock"===de?"active":""),onClick:()=>{ue("waxrock"),$e(1)},children:"WaxRock"}),Se.jsx("button",{className:"inventory-filter-tab "+("ingredients"===de?"active":""),onClick:()=>{ue("ingredients"),$e(1)},children:"Ingredients"}),Se.jsx("button",{className:"inventory-filter-tab "+("packs"===de?"active":""),onClick:()=>{ue("packs"),$e(1)},children:"Packs"})]}),Se.jsxs("div",{className:"enhanced-filters",children:[Se.jsxs("div",{className:"sort-container",children:[Se.jsx("label",{children:"Sort by:"}),Se.jsxs("select",{value:ve,onChange:e=>{je(e.target.value),$e(1)},className:"sort-select",children:[Se.jsx("option",{value:"transferred",children:"Latest Received"}),Se.jsx("option",{value:"created",children:"Latest Created"}),Se.jsx("option",{value:"updated",children:"Recently Updated"}),Se.jsx("option",{value:"minted",children:"Latest Minted"}),Se.jsx("option",{value:"asset_id",children:"Asset ID"}),Se.jsx("option",{value:"name_asc",children:"Name (A-Z)"}),Se.jsx("option",{value:"name_desc",children:"Name (Z-A)"}),Se.jsx("option",{value:"collection_asc",children:"Collection (A-Z)"}),Se.jsx("option",{value:"collection_desc",children:"Collection (Z-A)"}),Se.jsx("option",{value:"mint_asc",children:"Mint Number (Low-High)"}),Se.jsx("option",{value:"mint_desc",children:"Mint Number (High-Low)"})]})]}),Se.jsxs("div",{className:"collection-filter-container",children:[Se.jsx("label",{children:"Collection:"}),Se.jsxs("select",{value:he,onChange:e=>{me(e.target.value),$e(1)},className:"collection-select",children:[Se.jsx("option",{value:"all",children:"All Collections"}),we.filter(e=>"string"==typeof e&&e.toLowerCase().includes(Ne.toLowerCase())).map(e=>Se.jsx("option",{value:e,children:e},e))]})]}),Se.jsxs("div",{className:"schema-filter-container",children:[Se.jsx("label",{children:"Schema:"}),Se.jsxs("select",{value:pe,onChange:e=>{fe(e.target.value),$e(1)},className:"schema-select",children:[Se.jsx("option",{value:"all",children:"All Schemas"}),_e.map(e=>Se.jsx("option",{value:e,children:e},e))]})]}),Se.jsxs("div",{className:"template-filter-container",children:[Se.jsx("label",{children:"Template ID:"}),Se.jsx("input",{type:"text",placeholder:"Enter template ID...",value:xe,onChange:e=>{ge(e.target.value),$e(1)},className:"template-input"})]}),Se.jsxs("button",{className:"advanced-filters-toggle "+(Ae?"active":""),onClick:()=>Pe(!Ae),children:[Ae?"\u25bc":"\u25b6"," Advanced Filters"]})]}),Ae&&Se.jsxs("div",{className:"advanced-filters-panel",children:[Se.jsxs("div",{className:"date-range-filter",children:[Se.jsx("label",{children:"Date Range:"}),Se.jsxs("div",{className:"date-inputs",children:[Se.jsx("input",{type:"date",value:Te.start,onChange:e=>{Ee(t=>({...t,start:e.target.value})),$e(1)},className:"date-input",placeholder:"Start date"}),Se.jsx("span",{children:"to"}),Se.jsx("input",{type:"date",value:Te.end,onChange:e=>{Ee(t=>({...t,end:e.target.value})),$e(1)},className:"date-input",placeholder:"End date"})]})]}),Se.jsx("div",{className:"filter-actions",children:Se.jsx("button",{className:"clear-filters-btn",onClick:()=>{me("all"),fe("all"),ge(""),Ee({start:"",end:""}),ie(""),je("transferred"),be("desc"),$e(1)},children:"Clear All Filters"})})]})]}),I.size>0&&Se.jsxs("div",{className:"bulk-actions-toolbar",children:[Se.jsxs("div",{className:"selection-info",children:[Se.jsxs("span",{children:[I.size," item",1!==I.size?"s":""," selected"]}),I.size>0&&Se.jsx("button",{className:"clear-selection",onClick:()=>{$(new Set)},children:"Clear"}),Se.jsx("button",{className:"select-all",onClick:()=>{const e=new Set(rt.map(e=>e.asset_id));if(e.size>0&&[...e].every(e=>I.has(e))){const t=new Set(I);e.forEach(e=>t.delete(e)),$(t)}else{const t=new Set([...I,...e]);$(t)}},children:(()=>{const e=new Set(rt.map(e=>e.asset_id));return e.size>0&&[...e].every(e=>I.has(e))?"Deselect All":"Select All"})()})]}),I.size>0&&Se.jsxs("div",{className:"bulk-actions",children:[Se.jsxs("button",{className:"bulk-btn list-btn",onClick:()=>{0!==I.size&&v(!0)},children:["\ud83d\udcb0 List (",I.size,")"]}),Se.jsxs("button",{className:"bulk-btn auction-btn",onClick:()=>{0!==I.size&&A(!0)},children:["\ud83c\udfc6 Auction (",I.size,")"]}),Se.jsxs("button",{className:"bulk-btn transfer-btn",onClick:()=>{0!==I.size&&y(!0)},children:["\ud83d\udce4 Transfer (",I.size,")"]}),Se.jsxs("button",{className:"bulk-btn distribute-btn",onClick:()=>{0!==I.size&&N(!0)},children:["\ud83c\udfaf Distribute (",I.size,")"]}),Se.jsxs("button",{className:"bulk-btn burn-btn",onClick:()=>{0!==I.size&&k(!0)},children:["\ud83d\udd25 Burn (",I.size,")"]}),Se.jsxs("button",{className:"bulk-btn stake-btn",onClick:async()=>{if(0===I.size)return;if(!He||!Ge)return void a("Wallet Required","Please connect your wallet first");const e=i.filter(e=>I.has(e.asset_id)),t=e.filter(e=>"pixeljourney"===e.collection.collection_name);if(0!==t.length){if(t.length!==e.length){const s=e.length-t.length;console.log(`Skipping ${s} non-Pixel Journey NFTs, staking ${t.length} Pixel Journey NFTs`)}try{const e=t.map(e=>e.asset_id),n=await Xs.stakeNFTsPixelJourney(Ge,e,"pixeljourney");n.success?(s("NFTs Staked Successfully",`${t.length} NFT${t.length>1?"s have":" has"} been staked successfully!`),$(new Set),M(!1),await Ye()):a("Staking Failed",n.error||"Failed to stake NFTs")}catch(n){console.error("Bulk staking error:",n),a("Staking Failed",n instanceof Error?n.message:"An unexpected error occurred")}}else a("No Stakeable NFTs","Only Pixel Journey NFTs can be staked. Please select some Pixel Journey assets.")},children:["\ud83e\udd69 Stake (",I.size,")"]}),(()=>{const e=i.filter(e=>I.has(e.asset_id)).filter(e=>Rs.isPixelPack(e)).length;return Se.jsx(Se.Fragment,{children:e>0&&Se.jsxs("button",{className:"bulk-btn unpack-btn",onClick:nt,children:["\ud83d\udce6 Unpack Pixelpacks (",e,")"]})})})()]})]})]}),l&&Se.jsxs("div",{className:"loading-container",children:[Se.jsx("div",{className:"loading-spinner"}),Se.jsx("p",{children:"Loading your NFTs..."})]}),!l&&Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"inventory-page-stats",children:Se.jsxs("p",{children:[lt," NFTs found"]})}),i.length>0?Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"inventory-page-grid",children:ot.map(e=>Se.jsx(Hs,{nft:e,selectedNFTs:I,isSelected:I.has(e.asset_id),settings:t,dropdownOpen:R,onNFTClick:Ze,onCollectionClick:et,onSchemaClick:tt,onToggleSelection:at,onDropdownToggle:e=>W(R===e?null:e),onListingOpen:e=>{F(e),h(!0)},onTransferOpen:e=>{F(e),p(!0)},onBurnOpen:e=>{F(e),x(!0)},onAuctionOpen:e=>{F(e),T(!0),W(null)},onRecyclePixal:e=>{(async e=>{if(He&&Ge){if(Je.isPixalPFP(e.template.template_id)){const t=e.data?.WaxRock;if(t&&Je.isValidWaxRock(t))return void a("WaxRock Protection",`This is a rare WaxRock Pixal PFP (${t}) and cannot be recycled. WaxRock Pixals are protected from burning and recycling on our platform.`)}try{if(!(await n("Confirm Recycle",`Are you sure you want to recycle ${e.name}?\n\nThis will cost 12,000 PXJ tokens and cannot be undone.`,"Recycle","Cancel")))return;const t=await Rs.recyclePixal(e.asset_id,He);await Rs.executeRecycle(t,Ge),s("Recycle Successful","Pixal recycled successfully!"),await Ye()}catch(t){De.error("Recycle failed","Inventory",t),a("Recycle Failed",t instanceof Error?t.message:"Unknown error occurred")}}else a("Wallet Required","Please connect your wallet first")})(e),W(null)},onImageZoom:ae,onCraftingOpen:e=>{(e=>{X(e),z(!0)})(e),W(null)},onViewOffers:e=>{(e=>{V(e),H(!0)})(e),W(null)},onUnpackPixelPack:e=>{(async e=>{if(He&&Ge)try{if(!(await n("Confirm Unpack",`Are you sure you want to unpack ${e.name}?\n\nThis action cannot be undone.`,"Unpack","Cancel")))return;const t=await Rs.unpackPixelPack(e.asset_id,He);await Rs.executeUnpack(t,Ge),s("Unpack Successful","Pixelpack unpacked successfully!"),await Ye()}catch(t){De.error("Unpack failed","Inventory",t),a("Unpack Failed",t instanceof Error?t.message:"Unknown error occurred")}else a("Wallet Required","Please connect your wallet first")})(e),W(null)},onStakeOpen:e=>{(async e=>{if(He&&Ge)if("pixeljourney"===e.collection.collection_name)try{if(!(await n("Confirm Staking",`Are you sure you want to stake ${e.name}?\n\nYour assets will remain in your inventory as the Pixel Journey uses non-custodial staking.`,"Stake NFT","Cancel")))return;const t=await Xs.stakeNFTsPixelJourney(Ge,[e.asset_id],"pixeljourney");t.success?(s("NFT Staked Successfully",`${e.name} has been staked successfully!`),await Ye()):a("Staking Failed",t.error||"Failed to stake NFT")}catch(t){console.error("Staking error:",t),a("Staking Failed",t instanceof Error?t.message:"An unexpected error occurred")}else a("Invalid Asset","Only Pixel Journey NFTs can be staked");else a("Wallet Required","Please connect your wallet first")})(e),W(null)},onTokenizePixal:e=>{(async e=>{He&&Ge?Je.isPixalPFP(e.template.template_id)?(Q(e),Y(!0)):a("Invalid NFT","Only Pixal PFPs can be tokenized into WPIXAL"):a("Wallet Required","Please connect your wallet first")})(e),W(null)}},e.asset_id))}),Ue>1&&Se.jsxs("div",{className:"pagination-controls",children:[Se.jsx("button",{className:"pagination-btn",onClick:ut,disabled:1===Fe,children:"\u2190 Previous"}),Se.jsxs("div",{className:"pagination-info",children:[Se.jsxs("span",{children:["Page ",Fe," of ",Ue]}),Se.jsxs("span",{className:"pagination-items",children:["(",lt," total items)"]})]}),Se.jsx("button",{className:"pagination-btn",onClick:ct,disabled:Fe===Ue,children:"Next \u2192"})]})]}):Se.jsxs("div",{className:"empty-inventory",children:[Se.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"empty-icon",children:Se.jsx("path",{d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M9 1v6m6-6v6"})}),Se.jsx("h3",{children:"No NFTs Found"}),Se.jsxs("p",{children:["You don't have any ","all"===de?"Pixel Journey":de," NFTs yet."]}),Se.jsx("p",{children:"Visit the marketplace to start collecting!"}),("waxrock"===de||"pixals"===de||"ingredients"===de)&&Se.jsx("div",{className:"empty-inventory-cta",style:{marginTop:"20px"},children:Se.jsxs("button",{className:"cta-button",onClick:()=>{e(`/marketplace?category=${{waxrock:"waxrocks",pixals:"pixals",ingredients:"ingredients"}[de]}`)},style:{background:"linear-gradient(45deg, #4ecdc4, #45b7d1)",border:"none",padding:"12px 24px",borderRadius:"25px",color:"white",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(78, 205, 196, 0.3)"},onMouseOver:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 20px rgba(78, 205, 196, 0.4)"},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 15px rgba(78, 205, 196, 0.3)"},children:["\ud83d\uded2 Browse ","waxrock"===de?"WaxRock":de.charAt(0).toUpperCase()+de.slice(1)," Marketplace"]})})]}),i.length>0&&Se.jsx("div",{className:"load-more-container",children:Le?Se.jsxs(Se.Fragment,{children:[Se.jsx("button",{className:"load-more-btn",onClick:Ke,disabled:Re||Oe,children:Re?"Loading...":"Load More NFTs"}),Se.jsx("button",{className:"load-more-btn load-all-btn",onClick:Qe,disabled:Re||Oe,style:{marginLeft:"10px",backgroundColor:"var(--success-color)"},children:Oe?"Loading All...":"Load All NFTs"})]}):Se.jsxs("div",{className:"pagination-info",children:[Se.jsxs("p",{children:["\ud83d\udcc4 Page ",Fe," - All NFTs loaded (",i.length," total)"]}),Se.jsx("p",{style:{fontSize:"0.9em",color:"var(--text-secondary)",marginTop:"5px"},children:"No more items to load"})]})})]}),Se.jsx(fs,{nft:E?{sale_id:"",asset_id:E.asset_id,name:E.name,image:E.img,video:E.video,price:"Not for sale",seller:He||"",collection:E.collection.collection_name,schema:E.schema.schema_name,template_mint:E.mint_number,max_supply:E.template.max_supply,traits:E.data}:null,isOpen:c,onClose:()=>d(!1)}),Se.jsx(ws,{nft:E,isOpen:u,onClose:()=>{h(!1),F(null)},onSuccess:()=>{Ye()}}),Se.jsx(ks,{nft:E,isOpen:m,onClose:()=>{p(!1),F(null)},onSuccess:()=>{Ye()}}),Se.jsx(_s,{nft:E,isOpen:f,onClose:()=>{x(!1),F(null)},onSuccess:()=>{Ye()}}),Se.jsx($s,{isOpen:D,onClose:()=>{z(!1),X(null)},ingredient:U}),Se.jsx(Ms,{nft:J,isOpen:q,onClose:()=>{H(!1),V(null)}}),Se.jsx(Us,{nft:K,isOpen:G,onClose:()=>{Y(!1),Q(null)},onSuccess:()=>{Y(!1),Q(null),Ye()}}),Se.jsx(Ss,{nfts:i.filter(e=>I.has(e.asset_id)),isOpen:g,onClose:()=>{v(!1)},onSuccess:()=>{$(new Set),M(!1),Ye()}}),Se.jsx(Cs,{nfts:i.filter(e=>I.has(e.asset_id)),isOpen:j,onClose:()=>{y(!1)},onSuccess:()=>{$(new Set),M(!1),Ye()}}),Se.jsx(As,{nfts:i.filter(e=>I.has(e.asset_id)),isOpen:b,onClose:()=>{N(!1)},onSuccess:()=>{$(new Set),M(!1),Ye()}}),Se.jsx(Ps,{nfts:i.filter(e=>I.has(e.asset_id)),isOpen:w,onClose:()=>{k(!1)},onSuccess:()=>{$(new Set),M(!1),Ye()}}),Se.jsx(Ws,{selectedNFTs:i.filter(e=>I.has(e.asset_id)),isOpen:_,onClose:()=>{S(!1)},userAccount:He||"",walletSession:Ge,onUnpackComplete:()=>{$(new Set),M(!1),Ye(1,!1),s("Packs unpacked successfully!")}}),Se.jsx(zs,{nfts:i.filter(e=>I.has(e.asset_id)),isOpen:C,onClose:()=>{A(!1)},onSuccess:()=>{$(new Set),M(!1),Ye()}}),E&&Se.jsx(zs,{nfts:[E],isOpen:P,onClose:()=>{T(!1),F(null)},onSuccess:()=>{Ye()}}),te&&Z&&Se.jsx("div",{className:"image-zoom-modal",onClick:()=>se(!1),children:Se.jsxs("div",{className:"zoom-modal-content",onClick:e=>e.stopPropagation(),children:[Se.jsx("button",{className:"zoom-modal-close",onClick:()=>se(!1),"aria-label":"Close zoom modal",children:"\xd7"}),"video"===Z.type?Se.jsx("video",{src:Z.url,className:"zoom-modal-video",controls:!0,autoPlay:!0,muted:!0,loop:!0,children:"Your browser does not support the video tag."}):Se.jsx("img",{src:Z.url,alt:Z.name,className:"zoom-modal-image"}),Se.jsx("div",{className:"zoom-modal-title",children:Z.name})]})})]}):Se.jsxs("div",{className:"inventory-page",children:[Se.jsxs("div",{className:"inventory-page-header",children:[Se.jsx("h1",{className:"inventory-page-title",children:"My NFT Inventory"}),Se.jsx("p",{className:"inventory-page-subtitle",children:"View and manage your Pixel Journey NFTs"})]}),Se.jsx("div",{className:"connect-wallet-prompt",children:Se.jsxs("div",{className:"connect-wallet-card",children:[Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"wallet-icon",children:[Se.jsx("path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4"}),Se.jsx("path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5"}),Se.jsx("circle",{cx:"18",cy:"12",r:"2"})]}),Se.jsx("h3",{children:"Connect Your Wallet"}),Se.jsx("p",{children:"Connect your wallet to view your NFT inventory and manage your Pixel Journey assets."}),Se.jsx("button",{className:"btn-primary",onClick:Ve,children:"Connect Wallet"})]})})]})}),Vs=D.memo(({text:e,maxLength:t=240,className:s=""})=>{const[a,n]=O.useState(!1);if(!e||e.length<=t)return Se.jsx("span",{className:s,children:e});const i=e.slice(0,t).trim();return Se.jsx("span",{className:s,children:a?Se.jsxs(Se.Fragment,{children:[e,Se.jsx("button",{className:"read-more-btn collapse-btn",onClick:e=>{e.preventDefault(),e.stopPropagation(),n(!1)},children:"read less"})]}):Se.jsxs(Se.Fragment,{children:[i,i.endsWith(".")?"":"...",Se.jsx("button",{className:"read-more-btn expand-btn",onClick:e=>{e.preventDefault(),e.stopPropagation(),n(!0)},children:"read more"})]})})});Vs.displayName="TruncatedText";const Gs=new class{constructor(){M(this,"requestQueue",[]),M(this,"isProcessing",!1),M(this,"gatewayStats",new Map),M(this,"MIN_REQUEST_INTERVAL",200),M(this,"MAX_CONCURRENT_REQUESTS",3),M(this,"MAX_RETRIES",3),M(this,"GATEWAY_COOLDOWN",3e4),M(this,"REQUEST_TIMEOUT",1e4),M(this,"activeRequests",0),M(this,"lastRequestTime",0)}async requestImage(e){return new Promise((t,s)=>{const a={url:e,resolve:t,reject:s,retryCount:0,timestamp:Date.now()};this.requestQueue.push(a),this.processQueue()})}async processQueue(){if(!this.isProcessing&&0!==this.requestQueue.length){for(this.isProcessing=!0;this.requestQueue.length>0&&this.activeRequests<this.MAX_CONCURRENT_REQUESTS;){const e=this.requestQueue.shift();if(!e)break;if(Date.now()-e.timestamp>this.REQUEST_TIMEOUT){e.reject(new Error("Request timeout in queue"));continue}const t=Date.now()-this.lastRequestTime;if(t<this.MIN_REQUEST_INTERVAL){const e=this.MIN_REQUEST_INTERVAL-t;await this.delay(e)}this.lastRequestTime=Date.now(),this.activeRequests++,this.processRequest(e).finally(()=>{this.activeRequests--,setTimeout(()=>this.processQueue(),0)})}this.isProcessing=!1}}async processRequest(e){try{const t=this.selectBestGateway(e.url);if(!t)throw new Error("No available gateways");const s=await this.makeRequest(e.url,t);this.updateGatewayStats(t,!0),e.resolve(s)}catch(t){const s=this.extractGateway(e.url);if(s&&this.updateGatewayStats(s,!1),e.retryCount<this.MAX_RETRIES)e.retryCount++,Oe.warn(`Retrying IPFS request (${e.retryCount}/${this.MAX_RETRIES})`,"IPFSRateLimiter",{url:e.url,error:t instanceof Error?t.message:"Unknown error"}),await this.delay(1e3*e.retryCount),this.requestQueue.unshift(e);else{const s=t instanceof Error?t:new Error(String(t));Oe.error("IPFS request failed after all retries","IPFSRateLimiter",s,{url:e.url}),e.reject(s)}}}async makeRequest(e,t){const s=this.extractIPFSHash(e);if(!s)throw new Error("Invalid IPFS URL");const a=`${t}${s}`;return new Promise((e,t)=>{const s=new Image,n=setTimeout(()=>{s.onload=null,s.onerror=null,t(new Error("Request timeout"))},this.REQUEST_TIMEOUT);s.onload=()=>{clearTimeout(n),e(a)},s.onerror=e=>{clearTimeout(n),t(new Error(`Failed to load image: ${e}`))},s.src=a})}selectBestGateway(e){const t=Date.now(),s=["https://ipfs.io/ipfs/","https://gateway.pinata.cloud/ipfs/","https://dweb.link/ipfs/","https://cf-ipfs.com/ipfs/"].filter(e=>{const s=this.gatewayStats.get(e);return!s||!(s.isBlocked&&t<s.blockUntil)&&(s.isBlocked&&t>=s.blockUntil&&(s.isBlocked=!1,s.errorCount=0),!0)});return 0===s.length?null:(s.sort((e,t)=>{const s=this.gatewayStats.get(e),a=this.gatewayStats.get(t);return(s?s.errorCount/Math.max(s.requestCount,1):0)-(a?a.errorCount/Math.max(a.requestCount,1):0)}),s[0])}updateGatewayStats(e,t){let s=this.gatewayStats.get(e);if(s||(s={lastRequest:0,requestCount:0,errorCount:0,isBlocked:!1,blockUntil:0},this.gatewayStats.set(e,s)),s.lastRequest=Date.now(),s.requestCount++,!t){s.errorCount++;const t=s.errorCount/s.requestCount;t>.5&&s.requestCount>=5&&(s.isBlocked=!0,s.blockUntil=Date.now()+this.GATEWAY_COOLDOWN,Oe.warn("Blocking gateway due to high error rate","IPFSRateLimiter",{gateway:e,errorRate:t,requestCount:s.requestCount,errorCount:s.errorCount}))}}extractIPFSHash(e){const t=e.match(/\/ipfs\/([a-zA-Z0-9]+)/);return t?t[1]:null}extractGateway(e){const t=e.match(/(https?:\/\/[^\/]+\/ipfs\/)/);return t?t[1]:null}delay(e){return new Promise(t=>setTimeout(t,e))}getStatus(){return{queueLength:this.requestQueue.length,activeRequests:this.activeRequests,gatewayStats:Object.fromEntries(this.gatewayStats)}}reset(){this.requestQueue.forEach(e=>{e.reject(new Error("Rate limiter reset"))}),this.requestQueue=[],this.gatewayStats.clear(),this.activeRequests=0,this.isProcessing=!1}};const Ys=new class{constructor(){M(this,"imageCache",new Map),M(this,"loadingPromises",new Map),M(this,"MAX_CACHE_SIZE",500)}generateFallbackSVG(e={}){const{width:t=150,height:s=150,backgroundColor:a="#f3f4f6",textColor:n="#6b7280",text:i,type:r="generic"}=e,l=i||this.getDefaultText(r),o=.15*Math.min(t,s),c=`\n      <svg width="${t}" height="${s}" xmlns="http://www.w3.org/2000/svg">\n        <rect width="100%" height="100%" fill="${a}"/>\n        <g transform="translate(${t/2}, ${s/2})">\n          ${this.getIconForType(r,.3*Math.min(t,s),n)}\n          <text \n            x="0" \n            y="${1.5*o}" \n            font-family="system-ui, -apple-system, sans-serif" \n            font-size="${o}" \n            font-weight="500" \n            fill="${n}" \n            text-anchor="middle" \n            dominant-baseline="middle"\n          >\n            ${l}\n          </text>\n        </g>\n      </svg>\n    `;return`data:image/svg+xml;base64,${btoa(c)}`}getDefaultText(e){switch(e){case"nft":return"NFT";case"collection":return"Collection";case"avatar":return"Avatar";case"token":return"Token";default:return"Image"}}getIconForType(e,t,s){const a=t,n=Math.max(1,.08*a);switch(e){case"nft":return`\n          <rect \n            x="${-a/2}" \n            y="${-a/2}" \n            width="${a}" \n            height="${a}" \n            rx="${.1*a}" \n            fill="none" \n            stroke="${s}" \n            stroke-width="${n}"\n          />\n          <circle \n            cx="0" \n            cy="${.15*-a}" \n            r="${.15*a}" \n            fill="${s}"\n          />\n        `;case"collection":return`\n          <rect \n            x="${-a/2}" \n            y="${-a/2}" \n            width="${.7*a}" \n            height="${.7*a}" \n            rx="${.05*a}" \n            fill="none" \n            stroke="${s}" \n            stroke-width="${n}"\n          />\n          <rect \n            x="${-a/2+.15*a}" \n            y="${-a/2+.15*a}" \n            width="${.7*a}" \n            height="${.7*a}" \n            rx="${.05*a}" \n            fill="none" \n            stroke="${s}" \n            stroke-width="${n}"\n          />\n        `;case"avatar":return`\n          <circle \n            cx="0" \n            cy="${.1*-a}" \n            r="${.25*a}" \n            fill="none" \n            stroke="${s}" \n            stroke-width="${n}"\n          />\n          <path \n            d="M ${.35*-a} ${.3*a} Q 0 ${.1*a} ${.35*a} ${.3*a}" \n            fill="none" \n            stroke="${s}" \n            stroke-width="${n}"\n          />\n        `;case"token":return`\n          <circle \n            cx="0" \n            cy="0" \n            r="${.4*a}" \n            fill="none" \n            stroke="${s}" \n            stroke-width="${n}"\n          />\n          <text \n            x="0" \n            y="${.1*a}" \n            font-family="system-ui, -apple-system, sans-serif" \n            font-size="${.3*a}" \n            font-weight="bold" \n            fill="${s}" \n            text-anchor="middle" \n            dominant-baseline="middle"\n          >\n            $\n          </text>\n        `;default:return`\n          <rect \n            x="${-a/2}" \n            y="${-a/2}" \n            width="${a}" \n            height="${a}" \n            rx="${.1*a}" \n            fill="none" \n            stroke="${s}" \n            stroke-width="${n}"\n          />\n          <path \n            d="M ${.2*-a} ${.1*-a} L ${.2*a} ${.1*-a} L 0 ${.2*a} Z" \n            fill="${s}"\n          />\n        `}}async loadImage(e,t={}){if(!e)return{success:!1,src:this.generateFallbackSVG(t),fallbackUsed:!0};const s=this.imageCache.get(e);if(s)return{success:!0,src:s,fallbackUsed:!1};const a=this.loadingPromises.get(e);if(a)return a;const n=this.performImageLoad(e,t);this.loadingPromises.set(e,n);try{return await n}finally{this.loadingPromises.delete(e)}}async performImageLoad(e,t){if(this.isIPFSUrl(e))try{const t=await(s=e,Gs.requestImage(s));return this.addToCache(e,t),{success:!0,src:t,fallbackUsed:!1}}catch(a){return Oe.warn(`IPFS rate-limited load failed: ${e}`,"ImageService",{error:a}),{success:!1,src:this.generateFallbackSVG(t),fallbackUsed:!0,error:a instanceof Error?a:new Error("IPFS load failed")}}var s;return new Promise(s=>{const a=new Image,n=setTimeout(()=>{a.onload=null,a.onerror=null,s({success:!1,src:this.generateFallbackSVG(t),fallbackUsed:!0,error:new Error("Image load timeout")})},1e4);a.onload=()=>{clearTimeout(n),this.addToCache(e,e),s({success:!0,src:e,fallbackUsed:!1})},a.onerror=a=>{clearTimeout(n);const i=this.generateFallbackSVG(t);Oe.warn(`Failed to load image: ${e}`,"ImageService",{error:a}),s({success:!1,src:i,fallbackUsed:!0,error:a instanceof Error?a:new Error("Image load failed")})},a.src=e})}addToCache(e,t){if(this.imageCache.size>=this.MAX_CACHE_SIZE){const e=this.imageCache.keys().next().value;e&&this.imageCache.delete(e)}this.imageCache.set(e,t)}async preloadImages(e,t={}){const s=e.map(e=>this.loadImage(e,t));return Promise.all(s)}getOptimizedImageUrl(e,t={}){return e?e.startsWith("data:")||e.startsWith("blob:")?e:e.includes("ipfs.io")||e.includes("ipfs://")?this.optimizeIPFSUrl(e):e:this.generateFallbackSVG(t)}isIPFSUrl(e){return e.includes("/ipfs/")||e.startsWith("ipfs://")||e.includes("gateway.pinata.cloud")}optimizeIPFSUrl(e){return this.isIPFSUrl(e),e}clearCache(){this.imageCache.clear(),this.loadingPromises.clear()}getCacheStats(){return{size:this.imageCache.size,maxSize:this.MAX_CACHE_SIZE,hitRate:0}}},Ks=({src:e,alt:t,className:s="",style:a={},width:n,height:i,type:r="generic",fallbackText:l,backgroundColor:o,textColor:c,onLoad:d,onError:u,loading:h="lazy",placeholder:m=!0})=>{const[p,f]=O.useState(""),[x,g]=O.useState(!0),[v,j]=O.useState(null),y=O.useRef(null),b=O.useRef(!1);O.useEffect(()=>{if(b.current)return;b.current=!0;(async()=>{g(!0);const t={width:n,height:i,type:r,text:l,backgroundColor:o,textColor:c};try{const s=await Ys.loadImage(e||"",t);f(s.src),j(s),d&&d(s),!s.success&&s.error&&u&&u(s.error)}catch(s){const e=Ys.generateFallbackSVG(t);f(e),j({success:!1,src:e,fallbackUsed:!0,error:s}),u&&u(s)}finally{g(!1),b.current=!1}})()},[e,n,i,r,l,o,c,d,u]);const N={...a,...n&&{width:n},...i&&{height:i}},w=`fallback-image ${s} ${x?"loading":""} ${v?.fallbackUsed?"fallback-used":""}`.trim();return Se.jsxs("div",{className:"fallback-image-container",style:{position:"relative",display:"inline-block"},children:[x&&m&&Se.jsx("div",{className:"image-placeholder",style:{position:"absolute",top:0,left:0,width:n||"100%",height:i||"100%",backgroundColor:o||"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",zIndex:1},children:Se.jsx("div",{className:"loading-spinner",style:{width:"20px",height:"20px",border:"2px solid #e5e7eb",borderTop:"2px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}})}),Se.jsx("img",{ref:y,src:p||"",alt:t,className:w,style:{...N,opacity:x?0:1,transition:"opacity 0.3s ease"},loading:h,onLoad:()=>{g(!1)},onError:()=>{if(v&&!v.fallbackUsed){const e={width:n,height:i,type:r,text:l,backgroundColor:o,textColor:c},t=Ys.generateFallbackSVG(e);f(t),j({success:!1,src:t,fallbackUsed:!0})}g(!1)}}),Se.jsx("style",{children:"\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n        \n        .fallback-image {\n          display: block;\n          max-width: 100%;\n          height: auto;\n        }\n        \n        .fallback-image.loading {\n          opacity: 0;\n        }\n        \n        .fallback-image.fallback-used {\n          filter: grayscale(0.1);\n        }\n        \n        .image-placeholder {\n          background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\n          background-size: 200% 100%;\n          animation: shimmer 1.5s infinite;\n        }\n        \n        @keyframes shimmer {\n          0% { background-position: -200% 0; }\n          100% { background-position: 200% 0; }\n        }\n      "})]})},Qs=e=>Se.jsx(Ks,{...e,type:"nft"}),Zs=e=>Se.jsx(Ks,{...e,type:"collection"}),ea=e=>Se.jsx(Ks,{...e,type:"token"}),ta=[{id:"bronze",name:"Bronze",cost:5e6,costFormatted:"5M PXJ",icon:"\ud83e\udd49",description:"Perfect for new collections getting started",benefits:["Basic marketplace listing","Collection verification badge","Community Discord access","Monthly featured spot rotation"]},{id:"silver",name:"Silver",cost:15e6,costFormatted:"15M PXJ",icon:"\ud83e\udd48",description:"Enhanced visibility and analytics access",benefits:["All Bronze benefits","Priority marketplace placement","Weekly newsletter mentions","Custom collection banner","Analytics dashboard access"]},{id:"gold",name:"Gold",cost:3e7,costFormatted:"30M PXJ",icon:"\ud83e\udd47",description:"Premium promotion and exclusive events",benefits:["All Silver benefits","Homepage featured carousel","Social media promotion","Exclusive events participation","Direct community manager contact"]},{id:"platinum",name:"Platinum",cost:5e7,costFormatted:"50M PXJ",icon:"\ud83d\udc8e",description:"Ultimate tier with maximum benefits",benefits:["All Gold benefits","Permanent homepage presence","Dedicated marketing campaigns","WaxRock Council consideration","Platform governance participation","White-label marketplace options"]}],sa=({isOpen:e,onClose:t})=>{const[s,a]=O.useState(""),[n,i]=O.useState(""),[r,l]=O.useState(!1),[o,c]=O.useState(null),[d,u]=O.useState(!1),{session:h,isConnected:m}=Ie(),{showSuccess:p,showError:f}=xt();D.useEffect(()=>{e&&m&&h&&x()},[e,m,h]);const x=async()=>{if(h){u(!0);try{const e=await dt.getWaxCurrencyBalance(Gt.safeGetActor(h),"token.pxj","PXJ"),t=e.length>0?parseFloat(e[0].balance.split(" ")[0]):0;c(t)}catch(e){De.error("Failed to fetch PXJ balance","CollectionTierModal",e),c(0)}finally{u(!1)}}},g=ta.find(e=>e.id===s);return e?Se.jsx("div",{className:"modal-backdrop",onClick:t,children:Se.jsxs("div",{className:"modal-content collection-tier-modal",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsx("h2",{className:"modal-title",children:"Upgrade Collection Tier"}),Se.jsx("button",{className:"modal-close",onClick:t,children:Se.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),Se.jsxs("div",{className:"modal-body",children:[Se.jsx("div",{className:"balance-section",children:Se.jsxs("div",{className:"balance-info",children:[Se.jsx("span",{className:"balance-label",children:"Your PXJ Balance:"}),Se.jsx("span",{className:"collection-balance-amount",children:d?Se.jsx("span",{className:"loading-text",children:"Loading..."}):Se.jsx("span",{className:null!==o&&o>0?"balance-positive":"balance-zero",children:null!==o?`${o.toLocaleString()} PXJ`:"Unable to load"})})]})}),Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{htmlFor:"collectionName",children:"Collection Name:"}),Se.jsx("input",{type:"text",id:"collectionName",value:n,onChange:e=>i(e.target.value),placeholder:"Enter your collection name",className:"collection-input",disabled:r})]}),Se.jsxs("div",{className:"tier-selection",children:[Se.jsx("h3",{children:"Select Tier:"}),Se.jsx("div",{className:"tier-grid",children:ta.map(e=>{const t=(e=>null!==o&&o>=e.cost)(e),n=s===e.id;return Se.jsxs("div",{className:`tier-card ${n?"selected":""} ${t?"":"unaffordable"}`,onClick:()=>!r&&a(e.id),children:[Se.jsxs("div",{className:"tier-header",children:[Se.jsx("span",{className:"tier-icon",children:e.icon}),Se.jsxs("div",{className:"tier-info",children:[Se.jsx("h4",{className:"tier-name",children:e.name}),Se.jsx("div",{className:"tier-cost",children:e.costFormatted})]}),!t&&Se.jsx("div",{className:"insufficient-badge",children:"Insufficient Balance"})]}),Se.jsx("p",{className:"tier-description",children:e.description}),Se.jsxs("div",{className:"tier-benefits",children:[Se.jsx("h5",{children:"Benefits:"}),Se.jsx("ul",{children:e.benefits.map((e,t)=>Se.jsx("li",{children:e},t))})]})]},e.id)})})]}),g&&Se.jsxs("div",{className:"selected-tier-summary",children:[Se.jsx("h4",{children:"Upgrade Summary"}),Se.jsxs("div",{className:"summary-content",children:[Se.jsxs("div",{className:"summary-item",children:[Se.jsx("span",{children:"Collection:"}),Se.jsx("span",{children:n||"Not specified"})]}),Se.jsxs("div",{className:"summary-item",children:[Se.jsx("span",{children:"Tier:"}),Se.jsxs("span",{children:[g.icon," ",g.name]})]}),Se.jsxs("div",{className:"summary-item",children:[Se.jsx("span",{children:"Cost:"}),Se.jsx("span",{children:g.costFormatted})]}),Se.jsxs("div",{className:"summary-item",children:[Se.jsx("span",{children:"Remaining Balance:"}),Se.jsx("span",{children:null!==o?`${(o-g.cost).toLocaleString()} PXJ`:"Unknown"})]})]})]})]}),Se.jsxs("div",{className:"modal-footer",children:[Se.jsx("button",{className:"btn-secondary",onClick:t,disabled:r,children:"Cancel"}),Se.jsx("button",{className:"btn-primary",onClick:async()=>{if(!s||!n.trim())return void f("Please select a tier and enter a collection name");if(!m||!h)return void f("Please connect your wallet to proceed with payment");const e=ta.find(e=>e.id===s);if(e)if(null!==o&&o<e.cost)f(`Insufficient PXJ balance. You need at least ${e.costFormatted} to upgrade to ${e.name} tier.`);else{l(!0);try{const s=`upgrade-collection:${n.toUpperCase()}:${e.id.toUpperCase()}`,r={account:"token.pxj",name:"transfer",authorization:[{actor:Gt.safeGetActor(h),permission:"active"}],data:{from:Gt.safeGetActor(h),to:"market.pxj",quantity:`${e.cost.toFixed(8)} PXJ`,memo:s}};await Yt.transact([r]),p(`Successfully upgraded ${n} to ${e.name} tier! Your upgrade will be processed by our team.`),t(),a(""),i("")}catch(r){De.error("Tier upgrade payment failed","CollectionTierModal",r instanceof Error?r:new Error(String(r))),f(`Payment failed: ${r instanceof Error?r.message:"Unknown error"}`)}finally{l(!1)}}else f("Invalid tier selected")},disabled:r||!s||!n.trim()||!m||g&&null!==o&&o<g.cost,children:r?Se.jsxs(Se.Fragment,{children:[Se.jsx("span",{className:"loading-spinner"}),"Processing..."]}):`Upgrade to ${g?.name||"Selected Tier"}`})]})]})}):null},aa=()=>{const[e,t]=O.useState([]),[s,a]=O.useState(!1),[n,i]=O.useState(null),[r,l]=O.useState(!1),[o,c]=O.useState(""),[d,u]=O.useState("name"),[h,m]=O.useState(12),[p,f]=O.useState(!1),[x,g]=O.useState(!1),[v,j]=O.useState(0),[y,b]=O.useState([{name:"Pixel Journey",collection:"pixeljourney",image:null,description:"The original Pixel Journey collection",tier:"platinum",verified:!0},{name:"Fried Factory",collection:"friedfactory",image:null,description:"3D NFT collection by @Friedfactory the 3D legend (and artist of our Journey Ingredients too)!",tier:"partner",verified:!0},{name:"Crypto Muffins",collection:"crptomuffins",image:null,description:"Delicious crypto-themed NFT collection by AKU!",tier:"gold",verified:!0},{name:"Aku Fish Heads",collection:"akufishheads",image:null,description:"Unique AKU-licious NFT collection",tier:"silver",verified:!0},{name:"Pantheon",collection:"pantheon",image:null,description:"Mythological NFT collection",tier:"bronze",verified:!0},{name:"Pocket People",collection:"pocketsizedp",image:null,description:"Pocket Sized PFPs by our first Partner, Kettleman!",tier:"partner",verified:!0},{name:"NIMAs Odyssey",collection:"nimasodyssey",image:null,description:"NIMAs Odyssey, a Discord RPG Driven NFT Mining Game",tier:"partner",verified:!0}]),N=O.useCallback(async()=>{try{b(e=>{const t=e.filter(e=>!e.image);return 0===t.length||Promise.all(t.map(async e=>{try{const t=await dt.getCollectionDetails(e.collection);return{...e,image:t?.img||null}}catch(t){return De.warn(`Failed to fetch image for ${e.collection}`,"Collections",t),e}})).then(e=>{b(t=>t.map(t=>e.find(e=>e.collection===t.collection)||t))}),e})}catch(e){De.error("Failed to fetch PxApproved project images","Collections",e)}},[]),w=async e=>{const s=[...e];for(let t=0;t<e.length;t+=5){const a=e.slice(t,t+5);(await Promise.allSettled(a.map(async(e,a)=>{const n=t+a;try{const[t,a]=await Promise.all([dt.getCollectionFloorPrice(e.collection_name),dt.getCollectionMarketStats({collection_name:e.collection_name})]);return{index:n,data:{...s[n],floor_price:t.floorPrice,volume:a.data?.volume,market_cap:a.data?.volume?(t.floorPrice*parseFloat(a.data.volume)).toFixed(2):void 0,assets:a.data?.sales,loading_market_data:!1}}}catch(i){return Le.logError("Collections.fetchMarketDataForCollections",i,{collection_name:e.collection_name}),{index:n,data:{...s[n],loading_market_data:!1}}}}))).forEach(e=>{"fulfilled"===e.status&&(s[e.value.index]=e.value.data)}),t+5<e.length&&await new Promise(e=>setTimeout(e,100))}t([...s])},k=async(e=50)=>{a(!0),i(null);try{const s=await dt.getCollections({limit:e,whitelistOnly:!0}),a=(s||[]).map(e=>({collection_name:e.collection_name,name:e.name,img:e.img,author:e.author,created_at_time:e.created_at_time,created_at_block:e.created_at_block,loading_market_data:!0}));t(a),j(s?.length||0),w(a)}catch(s){const t=s instanceof Error?s:new Error("Failed to fetch collections");i(t),Le.logError("Collections.fetchCollections",t,{limit:e})}finally{a(!1)}};O.useEffect(()=>{k(),N()},[N]);const _=e.filter(e=>e.name.toLowerCase().includes(o.toLowerCase())||e.collection_name.toLowerCase().includes(o.toLowerCase())||e.author.toLowerCase().includes(o.toLowerCase())).sort((e,t)=>{switch(d){case"name":return e.name.localeCompare(t.name);case"author":return e.author.localeCompare(t.author);case"created":return new Date(t.created_at_time).getTime()-new Date(e.created_at_time).getTime();default:return 0}}),S=y.filter(e=>e.name.toLowerCase().includes(o.toLowerCase())||e.collection.toLowerCase().includes(o.toLowerCase())),C=_.slice(0,h),A=_.length>h||v>=50&&h>=_.length;return Se.jsxs("div",{className:"collections-container",children:[Se.jsxs("div",{className:"perk-tiers-section",children:[Se.jsxs("div",{className:"collections-header",children:[Se.jsx("h1",{children:"Collections"}),Se.jsx("p",{className:"collections-subtitle",children:"Discover amazing NFT collections on the WAX blockchain"})]}),Se.jsxs("div",{className:"info-card",children:[Se.jsx("h3",{children:"PxApproved Collections"}),Se.jsx("p",{children:"Only PxApproved collections are listed on our marketplace by default. This ensures quality and authenticity for our community."}),Se.jsxs("div",{className:"info-actions",children:[Se.jsxs("a",{href:"https://discord.gg/pixeljourney",target:"_blank",rel:"noopener noreferrer",className:"discord-link",children:[Se.jsx("svg",{className:"discord-icon",viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"})}),"Join Discord for More Info"]}),Se.jsx("button",{className:"payment-button",onClick:()=>l(!0),children:"Upgrade Collection Tier"}),Se.jsxs("button",{className:"toggle-tiers-button",onClick:()=>g(!x),children:[x?"Hide Tier Details":"Show Tier Details",Se.jsx("svg",{className:"toggle-icon "+(x?"rotated":""),viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})})]})]})]}),Se.jsx("p",{className:"tiers-description",children:"Elevate your collection's status on PxMarket with our tier system. Each tier unlocks exclusive benefits and promotional opportunities."}),x&&Se.jsxs("div",{className:"tiers-content",children:[Se.jsx("div",{className:"tiers-header",children:Se.jsx("h2",{children:"PxApproved Perk Tiers"})}),Se.jsxs("div",{className:"tiers-grid",children:[Se.jsxs("div",{className:"tier-card tier-bronze",children:[Se.jsxs("div",{className:"tier-header",children:[Se.jsx("span",{className:"tier-icon",children:"\ud83e\udd49"}),Se.jsx("h3",{children:"Bronze"}),Se.jsx("div",{className:"tier-cost",children:"5M PXJ"})]}),Se.jsxs("div",{className:"tier-benefits",children:[Se.jsx("h4",{children:"Benefits:"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"Basic marketplace listing"}),Se.jsx("li",{children:"Collection verification badge"}),Se.jsx("li",{children:"Community Discord access"}),Se.jsx("li",{children:"Monthly featured spot rotation"})]})]})]}),Se.jsxs("div",{className:"tier-card tier-silver",children:[Se.jsxs("div",{className:"tier-header",children:[Se.jsx("span",{className:"tier-icon",children:"\ud83e\udd48"}),Se.jsx("h3",{children:"Silver"}),Se.jsx("div",{className:"tier-cost",children:"15M PXJ"})]}),Se.jsxs("div",{className:"tier-benefits",children:[Se.jsx("h4",{children:"Benefits:"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"All Bronze benefits"}),Se.jsx("li",{children:"Priority marketplace placement"}),Se.jsx("li",{children:"Weekly newsletter mentions"}),Se.jsx("li",{children:"Custom collection banner"}),Se.jsx("li",{children:"Analytics dashboard access"})]})]})]}),Se.jsxs("div",{className:"tier-card tier-gold",children:[Se.jsxs("div",{className:"tier-header",children:[Se.jsx("span",{className:"tier-icon",children:"\ud83e\udd47"}),Se.jsx("h3",{children:"Gold"}),Se.jsx("div",{className:"tier-cost",children:"30M PXJ"})]}),Se.jsxs("div",{className:"tier-benefits",children:[Se.jsx("h4",{children:"Benefits:"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"All Silver benefits"}),Se.jsx("li",{children:"Homepage featured carousel"}),Se.jsx("li",{children:"Social media promotion"}),Se.jsx("li",{children:"Exclusive events participation"}),Se.jsx("li",{children:"Direct community manager contact"})]})]})]}),Se.jsxs("div",{className:"tier-card tier-partner",children:[Se.jsxs("div",{className:"tier-header",children:[Se.jsx("span",{className:"tier-icon",children:"\ud83e\udd1d"}),Se.jsx("h3",{children:"Partner"}),Se.jsx("div",{className:"tier-cost",children:"Special Agreement"})]}),Se.jsxs("div",{className:"tier-benefits",children:[Se.jsx("h4",{children:"Benefits:"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"All Gold benefits"}),Se.jsx("li",{children:"Co-marketing opportunities"}),Se.jsx("li",{children:"Revenue sharing programs"}),Se.jsx("li",{children:"Joint event hosting"}),Se.jsx("li",{children:"Custom integration support"})]})]})]}),Se.jsxs("div",{className:"tier-card tier-platinum",children:[Se.jsxs("div",{className:"tier-header",children:[Se.jsx("span",{className:"tier-icon",children:"\ud83d\udc8e"}),Se.jsx("h3",{children:"Platinum"}),Se.jsx("div",{className:"tier-cost",children:"50M PXJ"})]}),Se.jsxs("div",{className:"tier-benefits",children:[Se.jsx("h4",{children:"Benefits:"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"All Partner benefits"}),Se.jsx("li",{children:"Permanent homepage presence"}),Se.jsx("li",{children:"Dedicated marketing campaigns"}),Se.jsx("li",{children:"WaxRock Council consideration"}),Se.jsx("li",{children:"Platform governance participation"}),Se.jsx("li",{children:"White-label marketplace options"})]})]})]})]})]}),x&&Se.jsx("div",{className:"council-note",children:Se.jsxs("div",{className:"council-info",children:[Se.jsx("span",{className:"council-icon",children:"\ud83c\udfdb\ufe0f"}),Se.jsxs("div",{children:[Se.jsx("h4",{children:"WaxRock Council Authority"}),Se.jsx("p",{children:"The WaxRock Council reserves the right to grant special tier status to exceptional collections through community proposals and voting. Collections may also lobby for tier upgrades through formal governance processes."})]})]})}),x&&Se.jsxs("div",{className:"apply-section",children:[Se.jsx("h3",{children:"Ready to Upgrade Your Collection?"}),Se.jsx("p",{children:"Contact our team to discuss tier upgrades and promotional opportunities."}),Se.jsxs("div",{className:"apply-buttons",children:[Se.jsx("a",{href:"https://discord.gg/pixeljourney",target:"_blank",rel:"noopener noreferrer",className:"apply-btn discord-btn",children:"Apply via Discord"}),Se.jsx("button",{className:"apply-btn payment-btn",onClick:()=>l(!0),children:"Instant Tier Upgrade"})]})]})]}),Se.jsx(sa,{isOpen:r,onClose:()=>l(!1)}),Se.jsxs("div",{className:"search-filter-section",children:[Se.jsxs("div",{className:"search-controls",children:[Se.jsxs("div",{className:"search-input-container",children:[Se.jsx("svg",{className:"search-icon",viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}),Se.jsx("input",{type:"text",placeholder:"Search collections, authors, or names...",value:o,onChange:e=>c(e.target.value),className:"search-input"}),o&&Se.jsx("button",{onClick:()=>c(""),className:"clear-search","aria-label":"Clear search",children:Se.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),Se.jsxs("div",{className:"sort-container",children:[Se.jsx("label",{htmlFor:"sortBy",children:"Sort by:"}),Se.jsxs("select",{id:"sortBy",value:d,onChange:e=>u(e.target.value),className:"sort-select",children:[Se.jsx("option",{value:"name",children:"Name"}),Se.jsx("option",{value:"author",children:"Author"}),Se.jsx("option",{value:"created",children:"Created Date"})]})]})]}),o&&Se.jsx("div",{className:"search-results-info",children:Se.jsxs("p",{children:["Found ",_.length+S.length,' results for "',o,'"']})})]}),(!o||S.length>0)&&Se.jsxs("div",{className:"pxapproved-section",children:[Se.jsxs("h2",{children:["PxApproved ",o&&`(${S.length})`]}),Se.jsx("div",{className:"approved-projects-grid",children:S.map((e,t)=>Se.jsx(z,{to:`/collections/${e.collection}`,className:"project-card-link",children:Se.jsxs("div",{className:`project-card project-card-${e.tier}`,children:[Se.jsxs("div",{className:"project-tier-badge",children:[Se.jsx("span",{className:`tier-label tier-${e.tier}`,children:e.tier.toUpperCase()}),e.verified&&Se.jsx("span",{className:"verified-badge",children:"\u2713"})]}),Se.jsx("img",{src:e.image&&"string"==typeof e.image?e.image.startsWith("http")?e.image:`https://ipfs.io/ipfs/${e.image}`:"/img/placeholder-collection.svg",alt:e.name,className:"project-image",onError:e=>{e.currentTarget.src="/img/placeholder-collection.svg"}}),Se.jsxs("div",{className:"project-info",children:[Se.jsx("h3",{children:e.name}),Se.jsx("p",{className:"project-collection",children:e.collection}),Se.jsx(Vs,{text:e.description,maxLength:240,className:"project-description"})]})]})},t))})]}),Se.jsxs("div",{className:"all-collections-section",children:[Se.jsxs("h2",{children:["More Collections on WAX ",o&&`(${_.length})`]}),n?Se.jsx(vs,{errorType:"COLLECTION_NOT_FOUND",onRetry:()=>k(),showRetry:!0}):s?Se.jsxs("div",{className:"loading-spinner",children:[Se.jsx("div",{className:"spinner"}),Se.jsx("p",{children:"Loading collections..."})]}):Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"collections-grid",children:C.length>0?C.map(e=>Se.jsxs(z,{to:`/collections/${e.collection_name}`,className:"collection-card",children:[Se.jsx(Zs,{src:e.img?e.img.startsWith("http")?e.img:`https://ipfs.io/ipfs/${e.img}`:void 0,alt:e.collection_name,width:150,height:150,fallbackText:e.collection_name,className:"collection-image"}),Se.jsxs("div",{className:"collection-info",children:[Se.jsx("div",{className:"collection-row-1",children:Se.jsx("h3",{children:e.name})}),Se.jsx("div",{className:"collection-row-2",children:Se.jsx("p",{className:"collection-name",children:e.collection_name})}),Se.jsx("div",{className:"collection-market-data",children:e.loading_market_data?Se.jsxs("div",{className:"market-data-loading",children:[Se.jsx("div",{className:"mini-spinner"}),Se.jsx("span",{children:"Loading market data..."})]}):Se.jsxs(Se.Fragment,{children:[void 0!==e.floor_price&&e.floor_price>0&&Se.jsxs("div",{className:"market-stat",children:[Se.jsx("span",{className:"stat-label",children:"Floor:"}),Se.jsxs("span",{className:"stat-value",children:[e.floor_price.toFixed(4)," WAX"]})]}),e.volume&&Se.jsxs("div",{className:"market-stat",children:[Se.jsx("span",{className:"stat-label",children:"Volume:"}),Se.jsxs("span",{className:"stat-value",children:[parseFloat(e.volume).toLocaleString()," WAX"]})]}),e.assets&&Se.jsxs("div",{className:"market-stat",children:[Se.jsx("span",{className:"stat-label",children:"Assets:"}),Se.jsx("span",{className:"stat-value",children:e.assets})]})]})})]})]},e.collection_name)):o?Se.jsxs("div",{className:"no-results",children:[Se.jsx("svg",{className:"no-results-icon",viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}),Se.jsx("h3",{children:"No collections found"}),Se.jsx("p",{children:"Try adjusting your search terms or browse all collections"}),Se.jsx("button",{onClick:()=>c(""),className:"clear-search-button",children:"Clear Search"})]}):null}),A&&!o&&Se.jsx("div",{className:"load-more-container",children:Se.jsx("button",{onClick:async()=>{f(!0);try{if(h<e.length)m(e=>e+12);else{const e=v+50,s=await dt.getCollections({limit:e,whitelistOnly:!0});if(s&&s.length>v){const e=s.map(e=>({collection_name:e.collection_name,name:e.name,img:e.img,author:e.author,created_at_time:e.created_at_time,created_at_block:e.created_at_block,loading_market_data:!0}));t(e),j(s.length),m(e=>e+12);const a=e.slice(v);a.length>0&&w(a)}}}catch(s){const e=s instanceof Error?s:new Error("Failed to load more collections");Le.logError("Collections.loadMoreCollections",e,{displayedCount:h,totalFetched:v})}finally{f(!1)}},disabled:p,className:"load-more-button",children:p?Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"button-spinner"}),"Loading..."]}):`Load More Collections (${_.length-h} remaining)`})})]})]})]})},na={pixeljourney:{tier:"platinum",verified:!0,quickLinks:[{label:"Main Website",url:"https://pixeljourney.xyz",icon:"\ud83c\udf10"},{label:"Discord",url:"http://discord.gg/pixel-journey-1130670500776005734",icon:"\ud83d\udcac"},{label:"X/Twitter",url:"https://x.com/PXJourney",icon:"\ud83d\udc26"},{label:"Whitepaper",url:"https://docs.pixeljourney.xyz",icon:"\ud83d\udcc4"}],benefits:["Premium marketplace placement","Exclusive promotional campaigns","Priority customer support","Advanced analytics dashboard","Custom branding options"],ownerMessage:"Welcome to Pixel Journey! Join our community of adventurers exploring the digital realm. Connect with fellow travelers, learn about all the things and discover exclusive content.",discordUrl:"http://discord.gg/pixel-journey-1130670500776005734",learnAboutGrid:[{title:"PXJ Token",description:"Learn about our native utility token, its use cases, and how it powers the Pixel Journey ecosystem.",icon:"\ud83e\ude99",url:"https://docs.pixeljourney.xyz/season-1/kickstarting-the-pxj-economy"},{title:"NFT Collections",description:"Discover our diverse range of NFT collectibles, from Pixal PFPs to Pixel Ingredients and special editions.",icon:"\ud83c\udfa8",url:"https://docs.pixeljourney.xyz/season-1/the-pixal-pfps"},{title:"Leaderboards",description:"Explore the PXJourney mechanics, quests, and adventures awaiting in Pixel Journey.",icon:"\ud83c\udfae",url:"https://lb.pixeljourney.xyz/"},{title:"Staking & Rewards",description:"Understand how to stake your NFTs and tokens to earn rewards and participate in governance.",icon:"\ud83d\udc8e",url:"https://pixeljourney.xyz/staking"},{title:"Roadmap",description:"Check out our development roadmap and upcoming features planned for the ecosystem.",icon:"\ud83d\uddfa\ufe0f",url:"/journeymap"},{title:"Community",description:"Join our vibrant community of adventurers, participate in events, and connect with fellow travelers.",icon:"\ud83d\udc65",url:"http://discord.gg/pixel-journey-1130670500776005734"}]},friedfactory:{tier:"partner",verified:!0,quickLinks:[{label:"Artist Portfolio",url:"https://friedfactory.art",icon:"\ud83c\udfa8"},{label:"Discord",url:"https://discord.gg/friedfactory",icon:"\ud83d\udcac"},{label:"Twitter",url:"https://twitter.com/friedfactory",icon:"\ud83d\udc26"}],benefits:["Co-marketing opportunities","Revenue sharing programs","Joint event hosting","Cross-promotion support"]},crptomuffins:{tier:"gold",verified:!0,quickLinks:[{label:"Collection Info",url:"#",icon:"\u2139\ufe0f"},{label:"Discord",url:"#",icon:"\ud83d\udcac"}],benefits:["Homepage featured carousel","Social media promotion","Exclusive events participation","Direct community manager contact"]},akufishheads:{tier:"silver",verified:!0,quickLinks:[{label:"Collection Info",url:"#",icon:"\u2139\ufe0f"}],benefits:["Priority marketplace placement","Weekly newsletter mentions","Custom collection banner","Analytics dashboard access"]},pantheon:{tier:"bronze",verified:!0,benefits:["Basic marketplace listing","Collection verification badge","Community Discord access","Monthly featured spot rotation"]},pocketsizedp:{tier:"partner",verified:!0,quickLinks:[{label:"Collection Info",url:"#",icon:"\u2139\ufe0f"}],benefits:["Co-marketing opportunities","Revenue sharing programs","Joint event hosting","Cross-promotion support"]},nimasodyssey:{tier:"partner",verified:!0,benefits:["Co-marketing opportunities","Revenue sharing programs","Joint event hosting","Cross-promotion support"]}},ia=({collectionName:e})=>{const t=P(e);if(!t)return null;const s=T(t.tier),a=t.quickLinks&&t.quickLinks.length>0;return Se.jsxs("div",{className:"quick-links-container",children:[Se.jsx("div",{className:"tier-section",children:Se.jsxs("div",{className:`tier-badge ${s.className}`,children:[Se.jsx("span",{className:"tier-icon",children:s.icon}),Se.jsx("span",{className:"tier-label",children:s.label}),t.verified&&Se.jsx("span",{className:"verified-icon",children:"\u2713"})]})}),a&&Se.jsxs("div",{className:"links-section",children:[Se.jsx("h4",{className:"links-title",children:"Quick Links"}),Se.jsx("div",{className:"links-grid",children:t.quickLinks.map((e,t)=>Se.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"quick-link",children:[e.icon&&Se.jsx("span",{className:"link-icon",children:e.icon}),Se.jsx("span",{className:"link-label",children:e.label})]},t))})]}),(t.ownerMessage||t.discordUrl)&&Se.jsxs("div",{className:"owner-section",children:[t.ownerMessage&&Se.jsxs("div",{className:"owner-message",children:[Se.jsxs("div",{className:"owner-title-container",style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[Se.jsx("h4",{className:"owner-title",children:"From the Collection Owner"}),Se.jsx("div",{className:"info-tooltip",title:"This message is provided directly by the collection owner to share information about their project, community, or special announcements with collectors and fans.",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"rgba(255, 255, 255, 0.7)",fontSize:"12px",fontWeight:"bold",cursor:"help",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)",e.currentTarget.style.borderColor="rgba(255, 255, 255, 0.3)",e.currentTarget.style.color="rgba(255, 255, 255, 0.9)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)",e.currentTarget.style.borderColor="rgba(255, 255, 255, 0.2)",e.currentTarget.style.color="rgba(255, 255, 255, 0.7)"},children:"?"})]}),Se.jsx("p",{className:"owner-text",children:t.ownerMessage})]}),t.discordUrl&&Se.jsx("div",{className:"discord-section",children:Se.jsxs("a",{href:t.discordUrl,target:"_blank",rel:"noopener noreferrer",className:"discord-link",children:[Se.jsx("span",{className:"discord-icon",children:"\ud83d\udcac"}),Se.jsx("span",{className:"discord-text",children:"Join Our Discord Community"}),Se.jsx("span",{className:"external-icon",children:"\u2197"})]})})]}),t.learnAboutGrid&&Se.jsxs("div",{className:"learn-about-section",style:{marginTop:"2rem"},children:[Se.jsx("h3",{className:"learn-about-title",children:"Learn About Pixel Journey"}),Se.jsx("div",{className:"learn-about-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"16px",marginTop:"16px"},children:t.learnAboutGrid.map((e,t)=>Se.jsxs("div",{className:"learn-about-card",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"20px",transition:"all 0.3s ease",cursor:e.url?"pointer":"default"},onClick:()=>e.url&&window.open(e.url,"_blank"),onMouseEnter:t=>{e.url&&(t.currentTarget.style.background="rgba(255, 255, 255, 0.08)",t.currentTarget.style.borderColor="rgba(255, 255, 255, 0.2)",t.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:t=>{e.url&&(t.currentTarget.style.background="rgba(255, 255, 255, 0.05)",t.currentTarget.style.borderColor="rgba(255, 255, 255, 0.1)",t.currentTarget.style.transform="translateY(0)")},children:[Se.jsxs("div",{className:"learn-card-header",style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[Se.jsx("span",{className:"learn-card-icon",style:{fontSize:"24px",display:"flex",alignItems:"center",justifyContent:"center",width:"40px",height:"40px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"8px"},children:e.icon}),Se.jsx("h4",{className:"learn-card-title",style:{margin:0,fontSize:"16px",fontWeight:"600",color:"white"},children:e.title}),e.url&&Se.jsx("span",{className:"external-link-icon",style:{marginLeft:"auto",fontSize:"14px",color:"rgba(255, 255, 255, 0.6)"},children:"\u2197"})]}),Se.jsx("p",{className:"learn-card-description",style:{margin:0,fontSize:"14px",lineHeight:"1.5",color:"rgba(255, 255, 255, 0.8)"},children:e.description})]},t))})]})]})},ra=({collectionName:e})=>{const{account:t,isConnected:s}=Ie(),{showError:a,showSuccess:n}=xt(),{settings:i}=st(),[r,l]=O.useState(!1),[o,c]=O.useState(!0),[d,u]=O.useState(!1),[h,m]=O.useState(!1),[p,f]=O.useState([]),[x,g]=O.useState(0),[v,j]=O.useState(null),[y,b]=O.useState(""),[N,w]=O.useState(null),[k,_]=O.useState(!1),[C,A]=O.useState(!0),[P,T]=O.useState(30),[E,F]=O.useState(!1),[I,$]=O.useState(!1),[L,M]=O.useState(!1),[R,W]=O.useState({collection:e||void 0,hideSpam:!0}),D=O.useRef(null),z=O.useRef(null),B=O.useRef(null),U=(e,t="")=>{const s=B.current;if(!s)return;const a=s.selectionStart,n=s.selectionEnd,i=y.substring(a,n),r=y.substring(0,a),l=y.substring(n);b(r+e+i+t+l),setTimeout(()=>{s.focus();const n=a+e.length+i.length+t.length;s.setSelectionRange(n,n)},0)},X=e=>{const t=S(e);return Se.jsx("span",{dangerouslySetInnerHTML:{__html:t}})};O.useEffect(()=>{if(0!==p.length)if(v){const e=p.filter(e=>new Date(e.timestamp)>new Date(v));g(e.length)}else g(o?p.length:0);else g(0)},[p,v,o]),O.useEffect(()=>{if(!o&&p.length>0){const e=p[p.length-1];j(e.timestamp),g(0)}},[o,p]);const q=O.useCallback(async(t=!1)=>{t||u(!0);try{const t=e?{...R,collection:e}:R,s=await ns.getMessages(t,50,0);f(s)}catch(s){De.error("Error loading messages:","ChatWidget",s),t||a("Failed to load chat messages")}finally{t||u(!1)}},[R,e,a]);O.useEffect(()=>{!e||R.collection&&R.collection===e||W(t=>({...t,collection:e}))},[e,R]),O.useEffect(()=>{q()},[q]),O.useEffect(()=>(C&&!o?z.current=setInterval(()=>{q(!0)},1e3*P):z.current&&(clearInterval(z.current),z.current=null),()=>{z.current&&clearInterval(z.current)}),[C,o,P,q]);const H=O.useCallback(async()=>{if(t&&y)try{const e=await ns.calculateMessageCost(y,t,k);w(e)}catch(e){De.error("Error calculating cost:","ChatWidget",e)}},[t,y,k]);if(O.useEffect(()=>{y&&t?H():w(null)},[y,t,H]),O.useEffect(()=>{V()},[p]),!i.showChatButton)return null;const J=async()=>{if(t&&y.trim()){m(!0);try{const s=e?`::col:${e}:: ${y.trim()}`:y.trim(),a=await ns.sendMessage(s,t,e,k);n("Message sent!",`Transaction: ${a.substring(0,8)}...`),b(""),w(null),_(!1),setTimeout(()=>{q(!0)},2e3)}catch(s){De.error("Error sending message:","ChatWidget",s);const e=s instanceof Error?s.message:"Unknown error";e.includes("transaction ID not found")?a("Message Status Unclear","Your message may have been sent successfully. Please check your transaction history or refresh the chat to confirm."):a("Failed to send message",e)}finally{m(!1)}}},V=()=>{D.current?.scrollIntoView({behavior:"smooth"})},G=e=>{const t=new Date(e),s=(new Date).getTime()-t.getTime(),a=Math.floor(s/6e4),n=Math.floor(s/36e5),i=Math.floor(s/864e5);return a<1?"now":a<60?`${a}m`:n<24?`${n}h`:i<7?`${i}d`:t.toLocaleDateString()},Y=e=>{const t=parseFloat(e.split(" ")[0]);return t>=1e3?`${(t/1e3).toFixed(1)}K PXJ`:`${t.toFixed(0)} PXJ`},K=e=>e.isSponsored?"chat_message--sponsored":"premium"===e.messageType?"chat_message--premium":"chat_message--normal";return o?Se.jsx("div",{className:"chat_widget chat_widget--minimized",children:Se.jsxs("button",{className:"chat_toggle-btn",onClick:()=>c(!1),title:"Open Chat",children:[Se.jsx("span",{className:"chat_icon",children:"\ud83d\udcac"}),x>0&&Se.jsx("span",{className:"chat_notification-badge",children:x})]})}):Se.jsxs("div",{className:"chat_widget "+(r?"chat_widget--expanded":"chat_widget--normal"),children:[Se.jsxs("div",{className:"chat_header",children:[Se.jsxs("div",{className:"chat_header-left",children:[Se.jsx("span",{className:"chat_title",children:e?`${e} Chat`:"Global Chat"}),Se.jsxs("span",{className:"chat_status",children:[p.length," messages"]})]}),Se.jsxs("div",{className:"chat_header-right",children:[Se.jsx("button",{className:"chat_btn chat_btn--icon",onClick:()=>q(),disabled:d,title:"Refresh",children:Se.jsx("span",{className:"chat_refresh-icon "+(d?"chat_refresh-icon--spinning":""),children:"\ud83d\udd04"})}),Se.jsx("button",{className:"chat_btn chat_btn--icon",onClick:()=>l(!r),title:r?"Minimize":"Expand",children:Se.jsx("span",{children:r?"\ud83d\uddd7":"\ud83d\uddd6"})}),Se.jsx("button",{className:"chat_btn chat_btn--icon",onClick:()=>c(!0),title:"Close",children:Se.jsx("span",{children:"\u2715"})})]})]}),!e&&Se.jsxs("div",{className:"chat_filters",children:[Se.jsxs("select",{className:"chat_select",value:R.collection||"",onChange:e=>W({...R,collection:e.target.value||void 0}),children:[Se.jsx("option",{value:"",children:"All Collections"}),Se.jsx("option",{value:"pixeljourney",children:"Pixel Journey"}),Se.jsx("option",{value:"pixalcards",children:"Pixal Cards"})]}),Se.jsxs("label",{className:"chat_checkbox-label",children:[Se.jsx("input",{type:"checkbox",checked:R.hideSpam||!1,onChange:e=>W({...R,hideSpam:e.target.checked})}),"Hide Spam"]}),Se.jsxs("label",{className:"chat_checkbox-label",children:[Se.jsx("input",{type:"checkbox",checked:R.showOnlySponsored||!1,onChange:e=>W({...R,showOnlySponsored:e.target.checked})}),"Sponsored Only"]})]}),Se.jsxs("div",{className:"chat_messages",children:[d&&0===p.length?Se.jsx("div",{className:"chat_loading",children:"Loading messages..."}):0===p.length?Se.jsxs("div",{className:"chat_empty",children:[Se.jsx("p",{children:"No messages yet."}),Se.jsx("p",{children:"Be the first to start the conversation!"})]}):p.map(e=>Se.jsxs("div",{className:`chat_message ${K(e)}`,children:[Se.jsxs("div",{className:"chat_message-header",children:[Se.jsx("div",{className:"chat_message-avatar",children:Se.jsx("img",{src:`https://api.dicebear.com/7.x/identicon/svg?seed=${e.sender}`,alt:e.sender,className:"chat_avatar"})}),Se.jsxs("div",{className:"chat_message-info",children:[Se.jsx("span",{className:"chat_sender",children:e.sender}),Se.jsx("span",{className:"chat_timestamp",children:G(e.timestamp)}),Se.jsx("span",{className:"chat_amount",children:Y(e.pxjAmount)}),e.isSponsored&&Se.jsx("span",{className:"chat_sponsored-badge",children:"SPONSORED"})]}),Se.jsx("div",{className:"chat_message-actions",children:Se.jsx("a",{href:`https://wax.bloks.io/transaction/${e.transactionId}`,target:"_blank",rel:"noopener noreferrer",className:"chat_tx-link",title:"View on Explorer",children:"\ud83d\udd17"})})]}),Se.jsx("div",{className:"chat_message-content",children:X(e.message)})]},e.id)),Se.jsx("div",{ref:D})]}),s?Se.jsxs("div",{className:"chat_input-section",children:[N&&Se.jsxs("div",{className:"chat_cost-info",children:[Se.jsxs("div",{className:"chat_cost-display",children:[Se.jsxs("span",{className:"chat_cost-amount",children:["Cost: ",(N.totalCost/1e4).toFixed(4)," PXJ"]}),Se.jsx("button",{className:"chat_info-btn",onClick:()=>M(!L),title:"View price breakdown",children:"\u2139\ufe0f"})]}),N.hasPixalPFP&&Se.jsxs("span",{className:"chat_discount",children:["Pixal PFP Discount: ",N.discount,"%"]}),Se.jsxs("span",{className:"chat_char-count",children:[y.length,"/240 chars"]}),L&&Se.jsx("div",{className:"chat_price-tooltip",children:Se.jsxs("div",{className:"chat_price-content",children:[Se.jsx("h4",{children:"Price Breakdown"}),Se.jsxs("div",{className:"price-factor",children:[Se.jsx("span",{children:"Base Cost:"}),Se.jsxs("span",{children:[(N.baseCost/1e4).toFixed(4)," PXJ"]})]}),Se.jsxs("div",{className:"price-factor",children:[Se.jsxs("span",{children:["Character Cost (",y.length," chars):"]}),Se.jsxs("span",{children:[((N.totalCost-N.baseCost)/1e4).toFixed(4)," PXJ"]})]}),N.hasPixalPFP&&Se.jsxs("div",{className:"price-factor discount",children:[Se.jsxs("span",{children:["Pixal PFP Discount (",N.discount,"%):"]}),Se.jsxs("span",{children:["-",((N.baseCost+(N.totalCost-N.baseCost))*(N.discount/100)/1e4).toFixed(4)," PXJ"]})]}),Se.jsxs("div",{className:"price-factor total",children:[Se.jsx("span",{children:"Total Cost:"}),Se.jsxs("span",{children:[(N.totalCost/1e4).toFixed(4)," PXJ"]})]}),Se.jsx("div",{className:"price-note",children:Se.jsx("small",{children:"Cost increases by 100% per 50 extra characters. Holders capped at 500 PXJ."})})]})})]}),Se.jsxs("div",{className:"chat_input-controls",children:[Se.jsxs("div",{className:"chat_sponsored-container",children:[Se.jsxs("label",{className:"chat_checkbox-label",children:[Se.jsx("input",{type:"checkbox",checked:k,onChange:e=>_(e.target.checked)}),"Sponsored (",N?.hasPixalPFP?"10,000":"25,000"," PXJ)"]}),Se.jsx("button",{className:"chat_info-btn",onClick:()=>F(!E),title:"Learn more about sponsored messages",children:"\u2139\ufe0f"}),E&&Se.jsx("div",{className:"chat_info-tooltip",children:Se.jsxs("div",{className:"chat_info-content",children:[Se.jsx("h4",{children:"Sponsored Messages"}),Se.jsx("p",{children:"\u2022 Messages appear with special highlighting"}),Se.jsx("p",{children:"\u2022 Higher visibility in chat feed"}),Se.jsxs("p",{children:["\u2022 Costs ",N?.hasPixalPFP?"10,000":"25,000"," PXJ regardless of length"]}),Se.jsxs("p",{children:["\u2022 ",N?.hasPixalPFP?"Pixal PFP holders get 60% discount!":"Get a Pixal PFP for 60% discount!"]}),Se.jsx("p",{children:"\u2022 Perfect for announcements & promotions"})]})})]}),Se.jsxs("label",{className:"chat_checkbox-label",children:[Se.jsx("input",{type:"checkbox",checked:C,onChange:e=>A(e.target.checked)}),"Auto-refresh"]})]}),Se.jsxs("div",{className:"chat_formatting-toolbar",children:[Se.jsx("button",{className:"chat_format-btn",onClick:()=>U("**","**"),title:"Bold",children:Se.jsx("strong",{children:"B"})}),Se.jsx("button",{className:"chat_format-btn",onClick:()=>U("*","*"),title:"Italic",children:Se.jsx("em",{children:"I"})}),Se.jsxs("div",{className:"chat_emoji-container",children:[Se.jsx("button",{className:"chat_format-btn",onClick:()=>$(!I),title:"Add emoji",children:"\ud83d\ude0a"}),I&&Se.jsx("div",{className:"chat_emoji-picker",children:Se.jsx("div",{className:"chat_emoji-grid",children:["\ud83d\ude0a","\ud83d\ude02","\u2764\ufe0f","\ud83d\udc4d","\ud83d\udc4e","\ud83d\udd25","\ud83d\udcaf","\ud83d\ude80","\ud83d\udc8e","\ud83c\udf89","\ud83d\ude0e","\ud83e\udd14","\ud83d\ude0d","\ud83e\udd73","\ud83d\udcaa","\ud83d\udc4f","\ud83d\ude4c","\u2728","\u2b50","\ud83c\udf1f"].map(e=>Se.jsx("button",{className:"chat_emoji-btn",onClick:()=>(e=>{const t=B.current;if(!t)return;const s=t.selectionStart,a=y.substring(0,s),n=y.substring(s);b(a+e+n),$(!1),setTimeout(()=>{t.focus();const a=s+e.length;t.setSelectionRange(a,a)},0)})(e),children:e},e))})})]})]}),Se.jsxs("div",{className:"chat_input-wrapper",children:[Se.jsx("textarea",{ref:B,className:"chat_input",placeholder:`Type your message... (${e||"global"} chat)`,value:y,onChange:e=>b(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),J())},maxLength:240,rows:r?3:2,disabled:h}),Se.jsx("button",{className:"chat_send-btn",onClick:J,disabled:!y.trim()||h,children:h?"\u23f3":"\ud83d\udce4"})]})]}):Se.jsx("div",{className:"chat_login-prompt",children:Se.jsx("p",{children:"Connect your wallet to join the chat!"})}),r&&Se.jsx("div",{className:"chat_settings",children:Se.jsxs("div",{className:"chat_setting-group",children:[Se.jsx("label",{children:"Auto-refresh interval:"}),Se.jsxs("select",{value:P,onChange:e=>T(Number(e.target.value)),className:"chat_select chat_select--small",children:[Se.jsx("option",{value:10,children:"10s"}),Se.jsx("option",{value:30,children:"30s"}),Se.jsx("option",{value:60,children:"1m"}),Se.jsx("option",{value:300,children:"5m"})]})]})})]})},la=({isOpen:e,imageUrl:t,imageName:s,onClose:a})=>{if(!e)return null;const n=e=>{"Escape"===e.key&&a()};return D.useEffect(()=>(e&&(document.addEventListener("keydown",n),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",n),document.body.style.overflow="unset"}),[e]),Se.jsx("div",{className:"image-zoom-modal",onClick:a,children:Se.jsxs("div",{className:"zoom-modal-content",onClick:e=>e.stopPropagation(),children:[Se.jsx("button",{className:"zoom-modal-close",onClick:a,children:"\xd7"}),Se.jsx("img",{src:t,alt:s,className:"zoom-modal-image"}),Se.jsx("div",{className:"zoom-modal-info",children:Se.jsx("h3",{children:s})})]})})},oa=D.memo(()=>{const{collectionName:e}=X(),{settings:t}=st(),[s,a]=O.useState(null),[n,i]=O.useState([]),[r,l]=O.useState([]),[o,c]=O.useState(null),[d,u]=O.useState("24"),[h,m]=O.useState({}),[p,f]=O.useState(!1),[x,g]=O.useState("WAX"),[v,j]=O.useState(.05),[y,b]=O.useState([]),[N,w]=O.useState(1),[k,_]=O.useState(!1),[S,C]=O.useState(!0),[A,E]=O.useState([]),[F,I]=O.useState([]),[$,L]=O.useState(1),[M]=O.useState(10),[R,W]=O.useState(!1),[D,B]=O.useState([]),[U,q]=O.useState(null),[H,J]=O.useState(""),[V,G]=O.useState(!1),[Y,K]=O.useState(null),[Q,Z]=O.useState("sales"),[ee,te]=O.useState(""),[se,ae]=O.useState("name"),[ne,ie]=O.useState(!1),[re,le]=O.useState({url:"",name:""}),[oe,ce]=O.useState(!1),de=n.filter(e=>e.schema_name.toLowerCase().includes(ee.toLowerCase())).sort((e,t)=>{switch(se){case"name":return e.schema_name.localeCompare(t.schema_name);case"created":return new Date(t.created_at_time).getTime()-new Date(e.created_at_time).getTime();default:return 0}}),ue=r.filter(e=>{const t=e.immutable_data?.name&&String(e.immutable_data.name).toLowerCase().includes(ee.toLowerCase())||e.template_id.toLowerCase().includes(ee.toLowerCase()),s=!H||e.schema_name===H;return t&&s}).sort((e,t)=>{switch(se){case"name":{const s=String(e.immutable_data?.name||`Template #${e.template_id}`),a=String(t.immutable_data?.name||`Template #${t.template_id}`);return s.localeCompare(a)}case"created":return new Date(t.created_at_time).getTime()-new Date(e.created_at_time).getTime();case"supply":return parseInt(t.issued_supply)-parseInt(e.issued_supply);default:return 0}}),he=O.useCallback(async t=>{if(!e)return"0";try{const s=await fetch(`https://wax-api.hivebp.io/v3/volume/${t}/${e}`);if(!s.ok)throw new Error("Failed to fetch volume data");const a=await s.json();return a.volume?String(a.volume):"0"}catch(s){return console.warn(`Failed to fetch ${t}d volume data:`,s),"0"}},[e]),me=O.useCallback(async()=>{if(!e)return null;try{const t=await fetch(`https://wax-api.hivebp.io/v3/collection-stats/${e}`);if(!t.ok)throw new Error("Failed to fetch collection stats");const s=await t.json();return{numUsers:s.numUsers||0,usdMarketCap:s.usdMarketCap||0,waxMarketCap:s.waxMarketCap||0,numAssets:s.numAssets||0}}catch(t){return console.warn("Failed to fetch collection stats:",t),null}},[e]),pe=O.useCallback(async()=>{if(!e)return;f(!0);const t=["24","7","30","90","365"],s=t.indexOf(d),a=t[(s+1)%t.length];if(h[a])return u(a),void f(!1);const n=await he(a);m(e=>({...e,[a]:n})),u(a),f(!1)},[e,d,h,he]),fe=O.useCallback(async()=>{if(e){G(!0),K(null);try{const[t,s,n]=await Promise.all([dt.getCollectionDetails(e),dt.getCollectionSchemas(e),dt.getCollectionTemplates(e)]);a(t),i(s),l(n),Promise.all([dt.getCollectionAnalytics(e),dt.getEnhancedCollectionStats(e),dt.getCollectionVolumeGraph(e,30),dt.getSimilarCollections(e),dt.getCollectionHolders(e,500),dt.getCollectionTopSales(e,50),he("24"),me(),dt.getCollectionMarketStats({collection_name:e,symbol:"WAX"})]).then(([e,t,,s,a,n,i,r,l])=>{m(e=>({...e,24:i}));const o=l.success&&l.data?{sales:l.data.sales||"0",volume:l.data.volume?String(parseFloat(l.data.volume)/Math.pow(10,8)):"0",suggested_median:l.data.suggested_median?String(parseFloat(l.data.suggested_median)/Math.pow(10,8)):"0",suggested_average:l.data.suggested_average?String(parseFloat(l.data.suggested_average)/Math.pow(10,8)):"0"}:null;q(o);const d={volume:o?.volume||e?.volume||"0",sales:o?.sales||e?.sales||"0",floor_price:t.floorPrice&&!isNaN(t.floorPrice)?String(t.floorPrice):e?.floor_price&&!isNaN(parseFloat(e.floor_price))?e.floor_price:e?.floor&&!isNaN(parseFloat(e.floor))?e.floor:o?.suggested_median&&!isNaN(parseFloat(o.suggested_median))?o.suggested_median:n&&n.length>0?(()=>{const e=n.slice(-5).map(e=>{const t="string"==typeof e.price?e.price:e.price?.amount||"0";return parseFloat(t||"0")}).filter(e=>!isNaN(e)&&e>0);return e.length>0?String(Math.min(...e).toFixed(2)):"0"})():"0",market_cap:r?.waxMarketCap?String(r.waxMarketCap):t.marketCap?String(t.marketCap):e?.market_cap||"0",holders:r?.numUsers||e?.holders||0,assets:r?.numAssets?String(r.numAssets):e?.assets||"0",volume_24h:i||(t.volume24h?String(t.volume24h):e?.volume_24h||e?.volume||"0")};c(d),B(s),b(a),E(n||[])}).catch(t=>{De.error("Enhanced analytics failed to load","CollectionDetail.loadCollectionData",t,{collectionName:e})})}catch(t){De.error("Failed to load collection data","CollectionDetail.loadCollectionData",t,{collectionName:e}),K(`Failed to load collection "${e}". This collection may not exist or be temporarily unavailable.`)}finally{G(!1)}}},[e]),xe=O.useCallback(async t=>{if(e)try{const s=await dt.getCollectionTemplates(e,t);l(s)}catch(s){De.error("Failed to load collection templates","CollectionDetail.loadTemplates",s,{collectionName:e,schemaName:t})}},[e]);O.useEffect(()=>{e&&fe()},[e,fe]),O.useEffect(()=>{H&&e&&xe(H)},[H,e,xe]);O.useEffect(()=>{const e=$*M,t=A.slice(0,e);I(t),W(e<A.length)},[A,$,M]);const ge=e=>{if(e)return e.startsWith("http")?e:`https://ipfs.io/ipfs/${e}`},ve=e=>{if(!e)return"N/A";try{let t;if(e.includes("T"))t=new Date(e);else{const s=parseInt(e);if(s>946684800&&s<4102444800)t=new Date(1e3*s);else{if(!(s>9466848e5&&s<41024448e5))return"N/A";t=new Date(s)}}return isNaN(t.getTime())?"N/A":t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}},je=(e,s="template-image")=>{const a=(e=>{if(e.immutable_data?.video){const t=e.immutable_data.video;if("string"==typeof t)return t.startsWith("Qm")?`${He.IPFS.GATEWAYS[0]}${t}`:t}return null})(e),n=(e=>{if(e.immutable_data?.img){const t=e.immutable_data.img;if("string"==typeof t)return t.startsWith("Qm")?`https://ipfs.io/ipfs/${t}`:t}return"https://pixeljourney.xyz/img/toppixals/10.webp"})(e);return Se.jsx(Qt,{imageUrl:n,videoUrl:a,alt:String(e.immutable_data?.name||"NFT"),className:s,enableAnimations:t.enableAnimatedNFTs})};return V?Se.jsx("div",{className:"collection-detail-container",children:Se.jsxs("div",{className:"loading-state",children:[Se.jsx("div",{className:"spinner"}),Se.jsx("p",{children:"Loading collection details..."})]})}):Y?Se.jsx("div",{className:"collection-detail-container",children:Se.jsxs("div",{className:"error-state",children:[Se.jsx("h2",{children:"Collection Error"}),Se.jsx("p",{children:Y}),Se.jsx(z,{to:"/collections",className:"back-link",children:"\u2190 Back to Collections"})]})}):s?Se.jsxs("div",{className:"collection-profile-page",children:[Se.jsxs("div",{className:"collection-hero",children:[Se.jsxs("div",{className:"hero-background",children:[Se.jsx("img",{src:ge(s.img||""),alt:s.name||s.collection_name,className:"hero-bg-image"}),Se.jsx("div",{className:"hero-overlay"})]}),Se.jsxs("div",{className:"hero-content",children:[Se.jsxs("div",{className:"breadcrumb",children:[Se.jsx(z,{to:"/",className:"breadcrumb-link",children:"Home"}),Se.jsx("span",{className:"breadcrumb-separator",children:"\u203a"}),Se.jsx(z,{to:"/collections",className:"breadcrumb-link",children:"Collections"}),Se.jsx("span",{className:"breadcrumb-separator",children:"\u203a"}),Se.jsx("span",{className:"breadcrumb-current",children:s.name||s.collection_name})]}),Se.jsxs("div",{className:"collection-profile",children:[Se.jsx("div",{className:"collection-logo-container",children:Se.jsx("img",{src:ge(s.img||""),alt:s.name||s.collection_name,className:"collection-logo"})}),Se.jsxs("div",{className:"profile-info",children:[Se.jsx("div",{className:"title-section",children:Se.jsx("h1",{className:"collection-title",children:s.name||s.collection_name})}),Se.jsxs("div",{className:"collection-actions-row",style:{display:"flex",alignItems:"center",gap:"12px",marginTop:"8px",marginBottom:"12px"},children:[(()=>{const e=P(s.collection_name);if(e){const t=T(e.tier);return Se.jsxs("div",{className:`collection-tier-badge ${t.className}`,children:[Se.jsx("span",{className:"tier-icon",children:t.icon}),Se.jsx("span",{className:"tier-label",children:t.label}),e.verified&&Se.jsx("span",{className:"verified-icon",children:"\u2713"})]})}return null})(),Se.jsxs("button",{className:"share-button",onClick:()=>ce(!0),style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",padding:"8px 12px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.15)",e.currentTarget.style.borderColor="rgba(255, 255, 255, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.1)",e.currentTarget.style.borderColor="rgba(255, 255, 255, 0.2)"},children:[Se.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Se.jsx("path",{d:"M18 16.08C17.24 16.08 16.56 16.38 16.04 16.85L8.91 12.7C8.96 12.47 9 12.24 9 12C9 11.76 8.96 11.53 8.91 11.3L15.96 7.19C16.5 7.69 17.21 8 18 8C19.66 8 21 6.66 21 5C21 3.34 19.66 2 18 2C16.34 2 15 3.34 15 5C15 5.24 15.04 5.47 15.09 5.7L8.04 9.81C7.5 9.31 6.79 9 6 9C4.34 9 3 10.34 3 12C3 13.66 4.34 15 6 15C6.79 15 7.5 14.69 8.04 14.19L15.16 18.34C15.11 18.55 15.08 18.77 15.08 19C15.08 20.61 16.39 21.92 18 21.92C19.61 21.92 20.92 20.61 20.92 19C20.92 17.39 19.61 16.08 18 16.08Z",fill:"currentColor"})}),"Share Collection"]})]}),Se.jsxs("p",{className:"collection-handle",children:["@",s.collection_name]}),Se.jsxs("p",{className:"collection-creator",children:["Created by ",s.author]}),s.data?.description&&Se.jsx("div",{className:"collection-description",children:Se.jsx(Vs,{text:String(s.data.description||""),maxLength:100,className:"description-text"})})]})]})]})]}),Se.jsxs("div",{className:"stats-dashboard",children:[Se.jsxs("div",{className:"stats-grid",children:[Se.jsxs("div",{className:"stat-card",children:[Se.jsx("div",{className:"stat-value",children:o?.assets||s.assets||0}),Se.jsx("div",{className:"stat-label",children:"Total Assets"})]}),Se.jsxs("div",{className:"stat-card",children:[Se.jsx("div",{className:"stat-value",children:n.length}),Se.jsx("div",{className:"stat-label",children:"Schemas"})]}),Se.jsxs("div",{className:"stat-card",children:[Se.jsx("div",{className:"stat-value",children:r.length}),Se.jsx("div",{className:"stat-label",children:"Templates"})]}),Se.jsxs("div",{className:"stat-card",children:[Se.jsx("div",{className:"stat-value",children:y.length}),Se.jsx("div",{className:"stat-label",children:"Holders"})]})]}),o&&Se.jsxs("div",{className:"stats-grid",children:[Se.jsxs("div",{className:"stat-card premium clickable",onClick:async()=>{if("WAX"===x){try{const e=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=wax&vs_currencies=usd"),t=await e.json();t.wax&&t.wax.usd&&j(t.wax.usd)}catch(e){console.warn("Could not fetch WAX price:",e)}g("USD")}else g("WAX")},style:{cursor:"pointer"},children:[Se.jsx("div",{className:"stat-value",children:o.market_cap&&"0"!==o.market_cap?"WAX"===x?`${parseFloat(o.market_cap).toLocaleString()} WAX`:`$${(parseFloat(o.market_cap)*v).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`:"N/A"}),Se.jsxs("div",{className:"stat-label",children:["Market Cap (",x,")"]})]}),Se.jsxs("div",{className:"stat-card premium",children:[Se.jsx("div",{className:"stat-value",children:U?.sales&&"0"!==U.sales?`${parseInt(U.sales).toLocaleString()}`:o?.sales&&"0"!==o.sales?`${parseInt(o.sales).toLocaleString()}`:"N/A"}),Se.jsx("div",{className:"stat-label",children:"All Time Sales"})]}),Se.jsxs("div",{className:"stat-card premium",children:[Se.jsx("div",{className:"stat-value",children:U?.volume&&"0"!==U.volume?`${parseFloat(U.volume).toLocaleString()} WAX`:o?.volume&&"0"!==o.volume?`${parseFloat(o.volume).toLocaleString()} WAX`:"N/A"}),Se.jsx("div",{className:"stat-label",children:"All Time Volume"})]}),Se.jsxs("div",{className:"stat-card premium clickable",onClick:pe,style:{cursor:"pointer"},children:[Se.jsx("div",{className:"stat-value",children:p?Se.jsx("span",{style:{opacity:.6},children:"Loading..."}):h[d]&&"0"!==h[d]?`${parseFloat(h[d]).toLocaleString()} WAX`:o?.volume_24h&&"0"!==o.volume_24h?`${parseFloat(o.volume_24h).toLocaleString()} WAX`:"N/A"}),Se.jsxs("div",{className:"stat-label",children:["24"===d?"24H":"7"===d?"7D":"30"===d?"30D":"90"===d?"90D":"365D"," Volume",Se.jsx("span",{style:{fontSize:"0.8em",opacity:.7,marginLeft:"4px"},children:"\u21bb"})]})]}),Se.jsxs("div",{className:"stat-card premium",children:[Se.jsx("div",{className:"stat-value",children:o.floor_price&&"0"!==o.floor_price&&!isNaN(parseFloat(o.floor_price))&&parseFloat(o.floor_price)>0?`${parseFloat(o.floor_price).toFixed(2)} WAX`:U?.suggested_median&&"0"!==U.suggested_median&&!isNaN(parseFloat(U.suggested_median))?`${parseFloat(U.suggested_median).toFixed(2)} WAX`:A&&A.length>0?(()=>{const e=A.slice(-3).map(e=>{const t="string"==typeof e.price?e.price:e.price?.amount||"0";return parseFloat(t||"0")}).filter(e=>!isNaN(e)&&e>0);return e.length>0?`~${Math.min(...e).toFixed(2)} WAX`:"N/A"})():"N/A"}),Se.jsx("div",{className:"stat-label",children:"Floor Price"})]})]})]}),Se.jsx(ia,{collectionName:s.collection_name}),Se.jsx("div",{className:"collection-content-navigation",children:Se.jsxs("div",{className:"collection-nav-container",children:[Se.jsxs("div",{className:"collection-nav-tabs",children:[Se.jsx("button",{className:"collection-nav-tab "+("sales"===Q?"active":""),onClick:()=>Z("sales"),children:Se.jsxs("div",{className:"tab-content",children:[Se.jsx("span",{className:"tab-icon",children:"\ud83d\udcb0"}),Se.jsx("span",{className:"tab-text",children:"Top Sales"}),Se.jsx("span",{className:"tab-count",children:F.length})]})}),Se.jsx("button",{className:"collection-nav-tab "+("holders"===Q?"active":""),onClick:()=>Z("holders"),children:Se.jsxs("div",{className:"tab-content",children:[Se.jsx("span",{className:"tab-icon",children:"\ud83d\udc65"}),Se.jsx("span",{className:"tab-text",children:"Holders"}),Se.jsx("span",{className:"tab-count",children:y.length})]})}),Se.jsx("button",{className:"collection-nav-tab "+("schemas"===Q?"active":""),onClick:()=>Z("schemas"),children:Se.jsxs("div",{className:"tab-content",children:[Se.jsx("span",{className:"tab-icon",children:"\ud83d\udccb"}),Se.jsx("span",{className:"tab-text",children:"Schemas"}),Se.jsx("span",{className:"tab-count",children:de.length})]})}),Se.jsx("button",{className:"collection-nav-tab "+("templates"===Q?"active":""),onClick:()=>Z("templates"),children:Se.jsxs("div",{className:"tab-content",children:[Se.jsx("span",{className:"tab-icon",children:"\ud83c\udfa8"}),Se.jsx("span",{className:"tab-text",children:"Templates"}),Se.jsx("span",{className:"tab-count",children:ue.length})]})}),Se.jsx("button",{className:"collection-nav-tab "+("similar"===Q?"active":""),onClick:()=>Z("similar"),children:Se.jsxs("div",{className:"tab-content",children:[Se.jsx("span",{className:"tab-icon",children:"\ud83d\udd17"}),Se.jsx("span",{className:"tab-text",children:"Similar"}),Se.jsx("span",{className:"tab-count",children:D.length})]})}),Se.jsx("button",{className:"collection-nav-tab "+("chat"===Q?"active":""),onClick:()=>Z("chat"),children:Se.jsxs("div",{className:"tab-content",children:[Se.jsx("span",{className:"tab-icon",children:"\ud83d\udcac"}),Se.jsx("span",{className:"tab-text",children:"Chat"}),Se.jsx("span",{className:"tab-count",children:"0"})]})})]}),Se.jsx("div",{className:"nav-indicator"})]})}),Se.jsxs("div",{className:"tab-content-area",children:["sales"===Q&&Se.jsxs("div",{className:"sales-section",children:[Se.jsx("div",{className:"sales-grid",children:F.length>0?F.map((e,s)=>Se.jsxs("div",{className:"sale-item",children:[Se.jsxs("div",{className:"sale-rank",children:["#",s+1]}),Se.jsxs("div",{className:"sale-media",children:[Se.jsx(Qt,{imageUrl:ms(e),videoUrl:ps(e),alt:String(e.assets?.[0]?.data?.name||e.assets?.[0]?.template?.immutable_data?.name||"NFT"),className:"sale-image",controls:!0,muted:!0,loop:!0,enableAnimations:t.enableAnimatedNFTs}),Se.jsx("div",{className:"zoom-overlay",onClick:()=>{const t=ms(e),s=String(e.assets?.[0]?.data?.name||e.assets?.[0]?.template?.immutable_data?.name||"NFT");t&&le({url:t,name:s}),ie(!0)},children:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:[Se.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),Se.jsx("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"})]})})]}),Se.jsxs("div",{className:"sale-details",children:[Se.jsx("div",{className:"sale-name",children:e.assets?.[0]?.data?.name||e.assets?.[0]?.template?.immutable_data?.name||"Unnamed NFT"}),Se.jsxs("div",{className:"sale-template",children:["Template #",e.assets?.[0]?.template?.template_id]}),Se.jsx("div",{className:"sale-price",children:e.price?(parseInt(e.price.amount)/Math.pow(10,e.price.token_precision)).toFixed(e.price.token_precision)+" "+e.price.token_symbol:"N/A"}),Se.jsx("div",{className:"sale-date",children:ve(e.updated_at_time||"")})]})]},e.sale_id||s)):Se.jsx("div",{className:"no-data",children:"No sales data available"})}),R&&Se.jsx("div",{className:"load-more-section",children:Se.jsx("button",{className:"load-more-btn",onClick:()=>{R&&L(e=>e+1)},children:"Load More Sales"})})]}),"holders"===Q&&Se.jsxs("div",{className:"holders-section",children:[Se.jsx("div",{className:"holders-grid",children:y.length>0?y.map((e,t)=>Se.jsxs("div",{className:"holder-item",children:[Se.jsxs("div",{className:"holder-rank",children:["#",t+1]}),Se.jsx(z,{to:`/profile-lookup/${e.account}`,className:"holder-account clickable",children:e.account}),Se.jsxs("div",{className:"holder-count",children:[e.assets," assets"]})]},t)):Se.jsx("div",{className:"no-data",children:"No holders data available"})}),S&&Se.jsx("div",{className:"load-more-section",children:Se.jsx("button",{className:"load-more-btn",onClick:async()=>{if(e&&!k&&S){_(!0);try{const t=N+1,s=500*(t-1),a=await dt.getCollectionHolders(e,500,s);a&&a.length>0?(b(e=>[...e,...a]),w(t),C(500===a.length)):C(!1)}catch(t){console.error("Error loading more holders:",t),C(!1)}finally{_(!1)}}},disabled:k,children:k?"Loading...":"Load More Holders"})})]}),"similar"===Q&&Se.jsx("div",{className:"similar-collections",children:Se.jsx("div",{className:"similar-collections-grid",children:D.length>0?D.slice(0,12).map((e,t)=>Se.jsx("div",{className:"similar-collection-item",children:Se.jsxs(z,{to:`/collections/${e.collection_name}`,children:[Se.jsx("div",{className:"similar-collection-name",children:e.collection_name}),Se.jsx("div",{className:"similar-collection-volume",children:"Similar Collection"})]})},t)):Se.jsx("div",{className:"no-data",children:"No similar collections found"})})}),"chat"===Q&&Se.jsx("div",{className:"chat-section",children:Se.jsx("div",{className:"chat-container",children:Se.jsx(ra,{collectionName:e})})}),Se.jsxs("div",{className:"search-filter-section",children:[Se.jsxs("div",{className:"search-controls",children:[Se.jsxs("div",{className:"search-input-container",children:[Se.jsx("svg",{className:"search-icon",viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}),Se.jsx("input",{type:"text",placeholder:`Search ${Q}...`,value:ee,onChange:e=>te(e.target.value),className:"search-input"}),ee&&Se.jsx("button",{onClick:()=>te(""),className:"clear-search","aria-label":"Clear search",children:Se.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),Se.jsxs("div",{className:"sort-container",children:[Se.jsx("label",{htmlFor:"sortBy",children:"Sort by:"}),Se.jsxs("select",{id:"sortBy",value:se,onChange:e=>ae(e.target.value),className:"sort-select",children:[Se.jsx("option",{value:"name",children:"Name"}),Se.jsx("option",{value:"created",children:"Created Date"}),"templates"===Q&&Se.jsx("option",{value:"supply",children:"Supply"})]})]})]}),ee&&Se.jsx("div",{className:"search-results-info",children:Se.jsxs("p",{children:["Found ","schemas"===Q?de.length:ue.length,' results for "',ee,'"']})}),"schemas"===Q&&Se.jsx("div",{className:"schemas-section",children:0===de.length?Se.jsx("div",{className:"empty-state",children:ee?Se.jsxs(Se.Fragment,{children:[Se.jsx("svg",{className:"empty-icon",viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}),Se.jsx("h3",{children:"No schemas found"}),Se.jsxs("p",{children:['No schemas match your search "',ee,'"']}),Se.jsx("button",{onClick:()=>te(""),className:"clear-search-button",children:"Clear Search"})]}):Se.jsx("p",{children:"No schemas found for this collection."})}):Se.jsx("div",{className:"schemas-grid",children:de.map(e=>Se.jsxs("div",{className:"schema-card",children:[Se.jsxs("div",{className:"schema-header",children:[Se.jsx("h3",{children:e.schema_name}),Se.jsx("button",{className:"view-templates-btn",onClick:()=>{J(e.schema_name),Z("templates")},children:"View Templates"})]}),Se.jsxs("div",{className:"schema-format",children:[Se.jsx("h4",{children:"Attributes:"}),Se.jsx("div",{className:"attributes-list",children:e.format.map((e,t)=>Se.jsxs("div",{className:"attribute",children:[Se.jsx("span",{className:"attr-name",children:e.name}),Se.jsx("span",{className:"attr-type",children:e.type})]},t))})]})]},e.schema_name))})}),"templates"===Q&&Se.jsxs("div",{className:"templates-section",children:[H&&Se.jsxs("div",{className:"schema-filter",children:[Se.jsx("label",{children:"Filter by Schema:"}),Se.jsxs("select",{value:H,onChange:e=>J(e.target.value),children:[Se.jsx("option",{value:"",children:"All Schemas"}),n.map(e=>Se.jsx("option",{value:e.schema_name,children:e.schema_name},e.schema_name))]})]}),0===ue.length?Se.jsx("div",{className:"empty-state",children:ee?Se.jsxs(Se.Fragment,{children:[Se.jsx("svg",{className:"empty-icon",viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}),Se.jsx("h3",{children:"No templates found"}),Se.jsxs("p",{children:['No templates match your search "',ee,'"']}),Se.jsx("button",{onClick:()=>te(""),className:"clear-search-button",children:"Clear Search"})]}):Se.jsxs("p",{children:["No templates found",H?` for schema "${H}"`:" for this collection","."]})}):Se.jsx("div",{className:"templates-grid",children:ue.map(t=>{return Se.jsxs(z,{to:`/collections/${e}/templates/${t.template_id}`,className:"template-card",children:[je(t,"template-image"),Se.jsxs("div",{className:"template-info",children:[Se.jsx("h4",{children:String(t.immutable_data?.name||`Template #${t.template_id}`)}),Se.jsxs("p",{className:"template-schema",children:["Template ID: ",t.template_id]}),Se.jsxs("p",{className:"template-supply",children:["Supply: ",(s=t.issued_supply,a=t.max_supply,"0"===a?`${s} (Unlimited)`:`${s} / ${a}`)]})]})]},t.template_id);var s,a})})]})]})]}),ne&&Se.jsx(la,{isOpen:ne,imageUrl:re.url,imageName:re.name,onClose:()=>ie(!1)}),oe&&Se.jsx(as,{isOpen:oe,onClose:()=>ce(!1),title:s?.name||s?.collection_name||"Collection",description:String(s?.data?.description||`Check out this amazing collection: ${s?.name||s?.collection_name}`),imageUrl:ge(s?.img||""),shareUrl:`${window.location.origin}/collections/${s?.collection_name}`,defaultShareText:`Check out the ${s?.name||s?.collection_name} collection on PxMarket! \ud83c\udfae\u2728 Explore it at market.pixeljourney.xyz`,type:"collection"})]}):Se.jsx("div",{className:"collection-detail-container",children:Se.jsxs("div",{className:"error-state",children:[Se.jsx("h2",{children:"Collection Not Found"}),Se.jsxs("p",{children:['The collection "',e,'" could not be found.']}),Se.jsx(z,{to:"/collections",className:"back-link",children:"\u2190 Back to Collections"})]})})});oa.displayName="CollectionDetail";const ca=()=>{const{collectionName:e,templateId:t}=X(),{settings:s}=st(),[a,n]=O.useState(null),[i,r]=O.useState(null),[l,o]=O.useState(null),[c,d]=O.useState([]),[u,h]=O.useState(!1),[m,p]=O.useState(!1),[f,x]=O.useState(1),[g,v]=O.useState(!0),[j,y]=O.useState(!1),b=O.useCallback(async()=>{if(e&&t){h(!0);try{const[s,a,i]=await Promise.all([dt.getCollectionTemplates(e),dt.getCollectionDetails(e),dt.getCollectionSchemas(e)]),l=s.find(e=>e.template_id===t);if(n(l||null),r(a),l){const s=await dt.getCollectionAssets(e,void 0,t,1);if(s.length>0){const e=s[0].schema_name,t=i.find(t=>t.schema_name===e);o(t||null)}}}catch(s){console.error("Error loading template data:",s)}finally{h(!1)}}},[e,t,h,n,r,o]),N=O.useCallback(async s=>{if(e&&t){p(!0);try{const a=await dt.getCollectionAssets(e,void 0,t,20);d(1===s?a:e=>[...e,...a]),v(20===a.length),x(s)}catch(a){console.error("Error loading assets:",a)}finally{p(!1)}}},[e,t,p,d,v,x]);O.useEffect(()=>{e&&t&&(b(),N(1))},[e,t,b,N]);const w=e=>new Date(1e3*parseInt(e)).toLocaleDateString(),k=e=>"object"==typeof e&&null!==e?JSON.stringify(e):String(e);return u?Se.jsx("div",{className:"template-detail-container",children:Se.jsxs("div",{className:"loading-state",children:[Se.jsx("div",{className:"spinner"}),Se.jsx("p",{children:"Loading template details..."})]})}):a?Se.jsxs("div",{className:"template-detail-container",children:[Se.jsxs("div",{className:"breadcrumb",children:[Se.jsx(z,{to:"/collections",className:"breadcrumb-link",children:"Collections"}),Se.jsx("span",{className:"breadcrumb-separator",children:"\u203a"}),Se.jsx(z,{to:`/collections/${e}`,className:"breadcrumb-link",children:i?.name||e}),Se.jsx("span",{className:"breadcrumb-separator",children:"\u203a"}),Se.jsx("span",{className:"breadcrumb-current",children:`Template #${t}`})]}),Se.jsxs("div",{className:"template-content",children:[Se.jsxs("div",{className:"template-header",children:[Se.jsx("div",{className:"template-image-container",children:a&&Se.jsx(Qt,{imageUrl:us(a),videoUrl:hs(a),alt:"Template",className:"template-image",enableAnimations:s.enableAnimatedNFTs})}),Se.jsxs("div",{className:"template-info",children:[Se.jsx("h1",{children:`Template #${t}`}),Se.jsxs("p",{className:"template-id",children:["Template ID: ",a.template_id]}),Se.jsxs("p",{className:"template-schema",children:["Schema: ",l?.schema_name||"Loading..."]}),Se.jsxs("p",{className:"template-collection",children:["Collection: ",i?.name||i?.collection_name||"Loading..."]}),Se.jsxs("div",{className:"template-stats",children:[Se.jsxs("div",{className:"stat",children:[Se.jsx("span",{className:"stat-value",children:a.issued_supply}),Se.jsx("span",{className:"stat-label",children:"Minted"})]}),Se.jsxs("div",{className:"stat",children:[Se.jsx("span",{className:"stat-value",children:"0"===a.max_supply?"\u221e":a.max_supply}),Se.jsx("span",{className:"stat-label",children:"Max Supply"})]}),Se.jsxs("div",{className:"stat",children:[Se.jsx("span",{className:"stat-value",children:c.length}),Se.jsx("span",{className:"stat-label",children:"Assets Loaded"})]})]}),Se.jsxs("p",{className:"template-created",children:["Created: ",w(a.created_at_time)]}),Se.jsxs("button",{className:"share-btn",onClick:()=>y(!0),style:{marginTop:"20px",padding:"12px 24px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",borderRadius:"12px",color:"white",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"8px"},children:[Se.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})}),"Share Template"]})]})]}),a.immutable_data&&Object.keys(a.immutable_data).length>0&&Se.jsxs("div",{className:"template-attributes",children:[Se.jsx("h2",{children:"Template Attributes"}),Se.jsx("div",{className:"attributes-grid",children:Object.entries(a.immutable_data).map(([e,t])=>Se.jsxs("div",{className:"attribute-item",children:[Se.jsx("span",{className:"attribute-name",children:e}),Se.jsx("span",{className:"attribute-value",children:k(t)})]},e))})]}),l&&l.format&&Se.jsxs("div",{className:"schema-format",children:[Se.jsx("h2",{children:"Schema Format"}),Se.jsx("div",{className:"format-grid",children:l.format.map((e,t)=>Se.jsxs("div",{className:"format-item",children:[Se.jsx("span",{className:"format-name",children:String(e.name)}),Se.jsx("span",{className:"format-type",children:String(e.type)})]},t))})]}),Se.jsxs("div",{className:"assets-section",children:[Se.jsxs("h2",{children:["Assets (",a.issued_supply," total)"]}),0!==c.length||m?Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"assets-grid",children:c.map(e=>Se.jsxs(z,{to:`/assets/${e.asset_id}`,className:"asset-card",children:[Se.jsx(Qt,{imageUrl:cs(e),videoUrl:ds(e),alt:e.name||`Asset #${e.asset_id}`,className:"asset-image",enableAnimations:s.enableAnimatedNFTs}),Se.jsxs("div",{className:"asset-info",children:[Se.jsx("h4",{children:e.name||`Asset #${e.asset_id}`}),Se.jsxs("p",{className:"asset-id",children:["#",e.asset_id]}),Se.jsxs("p",{className:"asset-owner",children:["Owner: ",e.owner]}),Se.jsxs("p",{className:"asset-minted",children:["Minted: ",w(e.minted_at_time)]})]})]},e.asset_id))}),g&&Se.jsx("div",{className:"load-more-container",children:Se.jsx("button",{className:"load-more-btn",onClick:()=>{!m&&g&&N(f+1)},disabled:m,children:m?"Loading...":"Load More Assets"})})]}):Se.jsx("div",{className:"empty-state",children:Se.jsx("p",{children:"No assets found for this template."})})]})]}),a&&Se.jsx(as,{isOpen:j,onClose:()=>y(!1),title:`Template #${t}`,description:`${i?.name||i?.collection_name} collection`,imageUrl:us(a),shareUrl:`${window.location.origin}/collections/${e}/templates/${t}`,defaultShareText:`Check out this amazing template: Template #${t} from ${i?.name||i?.collection_name} collection! \ud83c\udfa8\u2728 View it at ${window.location.origin}/collections/${e}/templates/${t}`,type:"template"})]}):Se.jsx("div",{className:"template-detail-container",children:Se.jsxs("div",{className:"error-state",children:[Se.jsx("h2",{children:"Template Not Found"}),Se.jsxs("p",{children:['The template "',t,'" could not be found in collection "',e,'".']}),Se.jsx(z,{to:`/collections/${e}`,className:"back-link",children:"\u2190 Back to Collection"})]})})},da=()=>{const{assetId:e}=X(),[t,s]=O.useState(null),[a,n]=O.useState(!1),[i,r]=O.useState(null),[l,o]=O.useState(!1),[c,d]=O.useState(""),{isConnected:u,purchaseNFT:h,login:m}=Ie(),{showSuccess:p,showError:f,showWarning:x}=xt(),g=O.useCallback(async()=>{if(e){n(!0);try{const t=await dt.getAssetDetails(e);s(t)}catch(t){De.error("Failed to load asset data","AssetDetail.loadAssetData",t,{assetId:e})}finally{n(!1)}}},[e]),v=O.useCallback(async()=>{if(e){o(!0);try{const a=await dt.getMarketplaceNFTs({page:1,limit:1,asset_id:e});if(a.data&&a.data.length>0){const n=a.data[0],i={sale_id:n.sale_id,asset_id:n.asset_id,name:t?.name||`Asset #${n.asset_id}`,image:String(t?.data?.img||t?.template?.immutable_data?.img||""),price:n.price,seller:n.seller,collection:t?.collection?.collection_name||"Unknown",schema:t?.schema?.schema_name||"Unknown",template_mint:void 0,max_supply:t?.template?.max_supply||void 0,traits:t?.data?Object.fromEntries(Object.entries(t.data).filter(([,e])=>null!=e)):{}};if(r(i),i.price)try{const e=parseFloat(i.price.replace(" WAX","")),t=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=wax&vs_currencies=usd"),s=await t.json(),a=(e*(s.wax?.usd||0)).toFixed(2);d(`$${a} USD`)}catch(s){De.warn("Failed to fetch USD price for asset","AssetDetail.checkListingStatus",{assetId:e,error:s.message})}}else r(null),d("")}catch(s){De.error("Failed to check listing status","AssetDetail.checkListingStatus",s,{assetId:e}),r(null)}finally{o(!1)}}},[e]);O.useEffect(()=>{e&&(g(),v())},[e,g,v]);const j=e=>{return e?e.startsWith("http")?e:(t=e)?t.startsWith("http")?t:os(t):"":"https://pixeljourney.xyz/img/toppixals/10.webp";var t},y=()=>t?cs(t)??"https://pixeljourney.xyz/img/toppixals/10.webp":"https://pixeljourney.xyz/img/toppixals/10.webp",b=e=>new Date(1e3*parseInt(e)).toLocaleString(),N=e=>{if(null==e)return Se.jsx("span",{className:"null-value",children:"null"});if("boolean"==typeof e)return Se.jsx("span",{className:"boolean-value",children:e.toString()});if("number"==typeof e)return Se.jsx("span",{className:"number-value",children:e.toLocaleString()});if("object"==typeof e)return Se.jsx("pre",{className:"object-value",children:JSON.stringify(e,null,2)});const t=String(e);return t.match(/\.(jpg|jpeg|png|gif|webp)$/i)||t.startsWith("Qm")?Se.jsxs("div",{className:"image-attribute",children:[Se.jsx("img",{src:j(t),alt:"Attribute image",className:"attribute-image",onError:e=>{e.currentTarget.style.display="none"}}),Se.jsx("span",{className:"image-hash",children:t})]}):Se.jsx("span",{className:"string-value",children:t})};if(a)return Se.jsx("div",{className:"asset-detail-container",children:Se.jsxs("div",{className:"loading-state",children:[Se.jsx("div",{className:"spinner"}),Se.jsx("p",{children:"Loading asset details..."})]})});if(!t)return Se.jsx("div",{className:"asset-detail-container",children:Se.jsxs("div",{className:"error-state",children:[Se.jsx("h2",{children:"Asset Not Found"}),Se.jsxs("p",{children:['The asset "',e,'" could not be found.']}),Se.jsx(z,{to:"/collections",className:"back-link",children:"\u2190 Back to Collections"})]})});const w=t?ds(t):null,k=t?{...t.template?.immutable_data,...t.data}:{};return Se.jsx("div",{className:"asset-detail-container",children:Se.jsxs("div",{className:"asset-content",children:[Se.jsxs("div",{className:"breadcrumb",children:[Se.jsx(z,{to:"/",className:"breadcrumb-link",children:"Home"}),Se.jsx("span",{className:"breadcrumb-separator",children:"\u203a"}),Se.jsx(z,{to:"/collections",className:"breadcrumb-link",children:"Collections"}),Se.jsx("span",{className:"breadcrumb-separator",children:"\u203a"}),Se.jsx(z,{to:`/collections/${t.collection.collection_name}`,className:"breadcrumb-link",children:t.collection.name||t.collection.collection_name}),Se.jsx("span",{className:"breadcrumb-separator",children:"\u203a"}),Se.jsx("span",{className:"breadcrumb-current",children:t.name||`Asset #${e}`})]}),Se.jsxs("div",{className:"asset-header",children:[Se.jsx("div",{className:"asset-media-container",children:w?Se.jsx("video",{src:w,className:"asset-video",controls:!0,poster:y(),children:"Your browser does not support the video tag."}):Se.jsx("img",{src:y(),alt:t.name||`Asset #${e}`,className:"asset-image",onError:()=>{}})}),Se.jsxs("div",{className:"asset-info",children:[Se.jsx("h1",{children:t.name||`Asset #${e}`}),Se.jsxs("p",{className:"asset-id",children:["Asset ID: ",t.asset_id]}),Se.jsxs("div",{className:"asset-links",children:[Se.jsxs("p",{className:"asset-collection",children:["Collection:",Se.jsx(z,{to:`/collections/${t.collection.collection_name}`,children:t.collection.name||t.collection.collection_name})]}),Se.jsxs("p",{className:"asset-template",children:["Template:",Se.jsx(z,{to:`/collections/${t.collection.collection_name}/templates/${t.template.template_id}`,children:t.template?.immutable_data?.name||`#${t.template.template_id}`})]}),Se.jsxs("p",{className:"asset-schema",children:["Schema: ",t.schema.schema_name]})]}),Se.jsxs("div",{className:"asset-ownership",children:[Se.jsxs("div",{className:"owner-info",children:[Se.jsx("span",{className:"owner-label",children:"Owner:"}),Se.jsx("span",{className:"owner-address",children:t.owner})]}),Se.jsxs("div",{className:"author-info",children:[Se.jsx("span",{className:"author-label",children:"Collection Author:"}),Se.jsx("span",{className:"author-address",children:t.owner||"Unknown"})]})]}),l?Se.jsx("div",{className:"listing-status loading",children:Se.jsx("span",{children:"Checking listing status..."})}):i?Se.jsxs("div",{className:"listing-status available",children:[Se.jsxs("div",{className:"listing-info",children:[Se.jsx("h3",{children:"Available for Sale"}),Se.jsxs("div",{className:"price-display",children:[Se.jsx("span",{className:"price-wax",children:i.price}),c&&Se.jsx("span",{className:"price-usd",children:c})]})]}),Se.jsx("button",{className:"buy-now-btn",onClick:async()=>{if(i)try{if(!u){x("Please connect your wallet to purchase this NFT");try{await m()}catch(t){return void De.error("Wallet login failed during purchase","AssetDetail.handlePurchase",t,{assetId:e,saleId:i.sale_id})}}if(!i.sale_id||!i.price)return void f("This NFT is not available for purchase");const s=i.price.replace(" WAX","");De.info("Initiating NFT purchase","AssetDetail.handlePurchase",{saleId:i.sale_id,price:s,assetId:e}),await h(i.sale_id,s),p(`Successfully purchased ${i.name||"NFT"}!`),v()}catch(t){De.error("NFT purchase failed","AssetDetail.handlePurchase",t,{assetId:e,saleId:i?.sale_id,price:i?.price});const s=t instanceof Error?t.message:"Unknown error occurred";f(`Purchase failed: ${s}`)}},disabled:!u,children:u?"Buy Now":"Connect Wallet to Buy"})]}):Se.jsx("div",{className:"listing-status not-listed",children:Se.jsx("span",{children:"Not currently listed for sale"})}),Se.jsxs("div",{className:"asset-timestamps",children:[Se.jsxs("div",{className:"timestamp",children:[Se.jsx("span",{className:"timestamp-label",children:"Minted:"}),Se.jsx("span",{className:"timestamp-value",children:b(t.minted_at_time)})]}),Se.jsxs("div",{className:"timestamp",children:[Se.jsx("span",{className:"timestamp-label",children:"Last Transfer:"}),Se.jsx("span",{className:"timestamp-value",children:b(t.transferred_at_time)})]}),Se.jsxs("div",{className:"timestamp",children:[Se.jsx("span",{className:"timestamp-label",children:"Last Update:"}),Se.jsx("span",{className:"timestamp-value",children:b(t.updated_at_time)})]})]}),t.burned_by_account&&Se.jsxs("div",{className:"burn-info",children:[Se.jsx("span",{className:"burn-label",children:"\ud83d\udd25 Burned by:"}),Se.jsx("span",{className:"burn-account",children:t.burned_by_account}),Se.jsx("span",{className:"burn-time",children:b(t.burned_at_time)})]})]})]}),Se.jsxs("div",{className:"template-info-section",children:[Se.jsx("h2",{children:"Template Information"}),Se.jsxs("div",{className:"template-stats",children:[Se.jsxs("div",{className:"template-stat",children:[Se.jsx("span",{className:"stat-label",children:"Template ID:"}),Se.jsx("span",{className:"stat-value",children:t.template.template_id})]}),Se.jsxs("div",{className:"template-stat",children:[Se.jsx("span",{className:"stat-label",children:"Max Supply:"}),Se.jsx("span",{className:"stat-value",children:"0"===t.template.max_supply?"Unlimited":t.template.max_supply})]}),Se.jsxs("div",{className:"template-stat",children:[Se.jsx("span",{className:"stat-label",children:"Issued Supply:"}),Se.jsx("span",{className:"stat-value",children:t.template.issued_supply})]})]})]}),Object.keys(k).length>0&&Se.jsxs("div",{className:"asset-attributes",children:[Se.jsx("h2",{children:"Attributes"}),Se.jsx("div",{className:"attributes-grid",children:Object.entries(k).map(([e,t])=>Se.jsxs("div",{className:"attribute-item",children:[Se.jsx("span",{className:"attribute-name",children:e}),Se.jsx("div",{className:"attribute-value",children:N(t)})]},e))})]}),Se.jsxs("div",{className:"schema-format",children:[Se.jsx("h2",{children:"Schema Format"}),Se.jsx("div",{className:"format-grid",children:t.schema.format?.map((e,t)=>Se.jsxs("div",{className:"format-item",children:[Se.jsx("span",{className:"format-name",children:e.name}),Se.jsx("span",{className:"format-type",children:e.type})]},t))})]}),t.backed_tokens&&t.backed_tokens.length>0&&Se.jsxs("div",{className:"backed-tokens",children:[Se.jsx("h2",{children:"Backed Tokens"}),Se.jsx("div",{className:"tokens-list",children:t.backed_tokens.map((e,t)=>Se.jsx("div",{className:"token-item",children:Se.jsx("pre",{children:JSON.stringify(e,null,2)})},t))})]})]})})},ua=()=>{const{saleId:e}=X(),t=B(),[s,a]=O.useState(null),[n,i]=O.useState(!0),[r,l]=O.useState(null),[o,c]=O.useState(""),[d,u]=O.useState(!1),[h,m]=O.useState(!1),[p,f]=O.useState(!1),[x,g]=O.useState(!1),[v,j]=O.useState(0);O.useEffect(()=>{e&&y()},[e]);const y=async()=>{if(e)try{i(!0),l(null);const t=`${dt.atomicMarketAPI}/atomicmarket/v1/sales/${e}`,s=await dt.fetchWithRetry(t),n=await s.json();if(n.success&&n.data){const e=n.data;j(e.state);const t={sale_id:e.sale_id,asset_id:e.assets[0]?.asset_id||"",name:e.assets[0]?.name||`${e.assets[0]?.collection?.collection_name||"Unknown"} #${e.assets[0]?.asset_id}`,image:b(e.assets[0]),price:`${(parseFloat(e.price.amount)/Math.pow(10,e.price.token_precision)).toFixed(4)} ${e.price.token_symbol}`,seller:e.seller,collection:e.assets[0]?.collection?.collection_name||"Unknown",schema:e.assets[0]?.schema?.schema_name||"Unknown",template_mint:parseInt(e.assets[0]?.template?.template_id||"0")||0,max_supply:e.assets[0]?.template?.max_supply||"0",traits:Object.fromEntries(Object.entries(e.assets[0]?.data||{}).map(([e,t])=>[e,null==t?"":"string"==typeof t||"number"==typeof t||"boolean"==typeof t?t:String(t)]))};a(t);const s=parseFloat(e.price.amount)/Math.pow(10,e.price.token_precision),i=await dt.getUSDPrice(s);c(i)}else l("Listing not found")}catch(t){console.error("Error loading listing:",t),l(`Failed to load listing data: ${t instanceof Error?t.message:"Unknown error"}`)}finally{i(!1)}},b=e=>e?e.data?.img?e.data.img.startsWith("http")?e.data.img:`https://ipfs.io/ipfs/${e.data.img}`:e.data?.image?e.data.image.startsWith("http")?e.data.image:`https://ipfs.io/ipfs/${e.data.image}`:e.template?.immutable_data?.img?e.template.immutable_data.img.startsWith("http")?e.template.immutable_data.img:`https://ipfs.io/ipfs/${e.template.immutable_data.img}`:e.template?.immutable_data?.image?e.template.immutable_data.image.startsWith("http")?e.template.immutable_data.image:`https://ipfs.io/ipfs/${e.template.immutable_data.image}`:"https://pixeljourney.xyz/img/toppixals/10.webp":"",{isConnected:N,purchaseNFT:k,login:_}=Ie(),{showSuccess:S,showError:C,showWarning:A}=xt();return n?Se.jsx("div",{className:"listing-detail-container",children:Se.jsxs("div",{className:"loading-container",children:[Se.jsx("div",{className:"loading-spinner"}),Se.jsx("p",{children:"Loading listing..."})]})}):r||!s?Se.jsx("div",{className:"listing-detail-container",children:Se.jsxs("div",{className:"error-container",children:[Se.jsx("h2",{children:"Listing Not Found"}),Se.jsx("p",{children:r||"The requested listing could not be found."}),Se.jsx("button",{onClick:()=>t("/marketplace"),className:"btn-primary",children:"Back to Marketplace"})]})}):Se.jsxs("div",{className:"listing-detail-container",children:[Se.jsxs("div",{className:"listing-detail-header",children:[Se.jsx("button",{onClick:()=>t(-1),className:"back-button",children:"\u2190 Back"}),Se.jsx("h1",{children:"Listing Details"})]}),Se.jsxs("div",{className:"listing-detail-content",children:[Se.jsx("div",{className:"listing-image-section",children:Se.jsx("div",{className:"listing-image",children:s.image.includes(".mp4")||s.image.includes(".webm")?Se.jsx("video",{src:s.image,controls:!0,muted:!0,loop:!0,className:"listing-media"}):Se.jsxs(Se.Fragment,{children:[Se.jsx("img",{src:s.image,alt:s.name,className:"listing-media",onError:e=>{e.target.src="https://pixeljourney.xyz/img/toppixals/10.webp"}}),Se.jsx("div",{className:"zoom-overlay",onClick:()=>g(!0),children:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:[Se.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),Se.jsx("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"})]})})]})})}),Se.jsxs("div",{className:"listing-info-section",children:[Se.jsxs("div",{className:"listing-header",children:[Se.jsx("h2",{children:s.name}),Se.jsxs("div",{className:"listing-actions",children:[Se.jsx("button",{onClick:()=>u(!0),className:"listing-detail-nav-btn",children:"\ud83d\udccb View Details"}),Se.jsxs("button",{onClick:()=>m(!0),className:"listing-detail-nav-btn",children:[Se.jsx("svg",{viewBox:"0 -8 72 72",fill:"currentColor",style:{width:"16px",height:"16px",marginRight:"8px"},children:Se.jsx("path",{d:"M64,12.78v17s-3.63.71-4.38.81-3.08.85-4.78-.78C52.22,27.25,42.93,18,42.93,18a3.54,3.54,0,0,0-4.18-.21c-2.36,1.24-5.87,3.07-7.33,3.78a3.37,3.37,0,0,1-5.06-2.64,3.44,3.44,0,0,1,2.1-3c3.33-2,10.36-6,13.29-7.52,1.78-1,3.06-1,5.51,1C50.27,12,53,14.27,53,14.27a2.75,2.75,0,0,0,2.26.43C58.63,14,64,12.78,64,12.78ZM27,41.5a3,3,0,0,0-3.55-4.09,3.07,3.07,0,0,0-.64-3,3.13,3.13,0,0,0-3-.75,3.07,3.07,0,0,0-.65-3,3.38,3.38,0,0,0-4.72.13c-1.38,1.32-2.27,3.72-1,5.14s2.64.55,3.72.3c-.3,1.07-1.2,2.07-.09,3.47s2.64.55,3.72.3c-.3,1.07-1.16,2.16-.1,3.46s2.84.61,4,.25c-.45,1.15-1.41,2.39-.18,3.79s4.08.75,5.47-.58a3.32,3.32,0,0,0,.3-4.68A3.18,3.18,0,0,0,27,41.5Zm25.35-8.82L41.62,22a3.53,3.53,0,0,0-3.77-.68c-1.5.66-3.43,1.56-4.89,2.24a8.15,8.15,0,0,1-3.29,1.1,5.59,5.59,0,0,1-3-10.34C29,12.73,34.09,10,34.09,10a6.46,6.46,0,0,0-5-2C25.67,8,18.51,12.7,18.51,12.7a5.61,5.61,0,0,1-4.93.13L8,10.89v19.4s1.59.46,3,1a6.33,6.33,0,0,1,1.56-2.47,6.17,6.17,0,0,1,8.48-.06,5.4,5.4,0,0,1,1.34,2.37,5.49,5.49,0,0,1,2.29,1.4A5.4,5.4,0,0,1,26,34.94a5.47,5.47,0,0,1,3.71,4,5.38,5.38,0,0,1,2.39,1.43,5.65,5.65,0,0,1,1.48,4.89a0,0,0,0,1,0,0s.8.9,1.29,1.39a2.46,2.46,0,0,0,3.48-3.48s2,2.48,4.28,1c2-1.4,1.69-3.06.74-4a3.19,3.19,0,0,0,4.77.13,2.45,2.45,0,0,0,.13-3.3s1.33,1.81,4,.12c1.89-1.6,1-3.43,0-4.39Z"})}),"Make Offer"]}),Se.jsx("button",{onClick:()=>f(!0),className:"listing-detail-nav-btn",children:"\ud83d\udd17 Share"})]})]}),Se.jsxs("div",{className:"listing-price-section",children:[Se.jsxs("div",{className:"price-display",children:[Se.jsx("div",{className:"price-main",children:s.price}),Se.jsx("div",{className:"price-usd",children:o}),Se.jsx("div",{className:"sale-status-display",children:Se.jsx("span",{className:"status-badge "+(1===v?"status-active":3===v?"status-sold":"status-canceled"),children:1===v?"\ud83d\udd04 Available":3===v?"\u2705 Sold":"\u274c Canceled"})})]}),1===v?Se.jsx("button",{onClick:async()=>{if(s)try{if(!N){A("Please connect your wallet to purchase this NFT");try{await _()}catch(e){return void De.error("Login failed","ListingDetail",e)}}if(!s.sale_id||!s.price)return void C("This NFT is not available for purchase");const a=s.price.replace(" WAX","");De.info("Purchasing NFT","ListingDetail.handlePurchase",{saleId:s.sale_id,price:a}),await k(s.sale_id,a),S(`Successfully purchased ${s.name||"NFT"}!`),t("/marketplace")}catch(e){De.error("Purchase failed","ListingDetail",e);const t=e instanceof Error?e.message:"Unknown error occurred";C(`Purchase failed: ${t}`)}},className:"listing-detail-nav-btn listing-detail-primary-btn purchase-btn",children:"\ud83d\uded2 Buy Now"}):Se.jsx("button",{disabled:!0,className:"listing-detail-nav-btn listing-detail-primary-btn purchase-btn",children:3===v?"\u2705 Sold":"\u274c Not Available"})]}),Se.jsxs("div",{className:"listing-details",children:[Se.jsxs("div",{className:"detail-item",children:[Se.jsx("span",{className:"detail-label",children:"Collection:"}),Se.jsx("span",{className:"detail-value link",onClick:()=>{s&&t(`/collections/${s.collection}`)},children:s.collection})]}),Se.jsxs("div",{className:"detail-item",children:[Se.jsx("span",{className:"detail-label",children:"Schema:"}),Se.jsx("span",{className:"detail-value",children:s.schema})]}),Se.jsxs("div",{className:"detail-item",children:[Se.jsx("span",{className:"detail-label",children:"Asset ID:"}),Se.jsx("span",{className:"detail-value link",onClick:()=>{s&&s.asset_id&&t(`/assets/${s.asset_id}`)},children:s.asset_id})]}),Se.jsxs("div",{className:"detail-item",children:[Se.jsx("span",{className:"detail-label",children:"Seller:"}),Se.jsx("span",{className:"detail-value link",onClick:()=>{s&&s.seller&&t(`/user-profile-lookup?user=${encodeURIComponent(s.seller)}`)},children:s.seller})]}),Se.jsxs("div",{className:"detail-item",children:[Se.jsx("span",{className:"detail-label",children:"Sale ID:"}),Se.jsx("span",{className:"detail-value",children:s.sale_id})]}),s.template_mint&&s.template_mint>0&&Se.jsxs("div",{className:"detail-item",children:[Se.jsx("span",{className:"detail-label",children:"Mint:"}),Se.jsxs("span",{className:"detail-value",children:[s.template_mint," / ","0"===s.max_supply?"\u221e":s.max_supply]})]})]}),s.traits&&Object.keys(s.traits).length>0&&Se.jsxs("div",{className:"listing-attributes",children:[Se.jsx("h3",{children:"Attributes"}),Se.jsx("div",{className:"attributes-grid",children:Object.entries(s.traits).map(([e,t])=>Se.jsxs("div",{className:"attribute-item",children:[Se.jsx("span",{className:"attribute-name",children:e}),Se.jsx("span",{className:"attribute-value",children:t})]},e))})]})]})]}),Se.jsx(fs,{nft:s,isOpen:d,onClose:()=>u(!1)}),Se.jsx(w,{nft:s,isOpen:h,onClose:()=>m(!1)}),Se.jsx(gs,{nft:s,isOpen:p,onClose:()=>f(!1)}),Se.jsx(la,{isOpen:x,onClose:()=>g(!1),imageUrl:s.image,imageName:s.name})]})},ha=()=>{const{transactionId:e}=X(),t=B(),[s,a]=O.useState(null),[n,i]=O.useState(null),[r,l]=O.useState(!0),[o,c]=O.useState(null),[d,u]=O.useState("overview");O.useEffect(()=>{e&&h(e)},[e]);const h=async e=>{try{l(!0),c(null);const t=await fetch("https://wax.eosrio.io/v1/history/get_transaction",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})});if(!t.ok)throw new Error(`Failed to fetch transaction: ${t.status}`);const s=await t.json();if(!s.id)throw new Error("Transaction not found");const n={transaction_id:s.id,block_num:s.block_num,block_time:s.block_time,action_name:s.trx?.transaction?.actions?.[0]?.name||"unknown",actor:s.trx?.transaction?.actions?.[0]?.authorization?.[0]?.actor||"unknown",receiver:s.trx?.transaction?.actions?.[0]?.account||"unknown",status:"executed"===s.receipt?.status?"success":"failed",cpu_usage_us:s.receipt?.cpu_usage_us||0,net_usage_words:s.receipt?.max_net_usage_words||s.receipt?.net_usage_words||0,traces:s.traces||[]},r=s.trx?.transaction?.actions?.[0]?.data;r&&(r.asset_ids&&(n.asset_id=r.asset_ids[0]),r.from&&(n.from=r.from),r.to&&(n.to=r.to),r.memo&&(n.memo=r.memo),r.listing_price_to_assert&&(n.price=`${parseFloat(r.listing_price_to_assert.split(" ")[0])} WAX`)),a(n);const o=await fetch("https://wax.eosrio.io/v1/chain/get_block",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({block_num_or_id:s.block_num})});if(o.ok){const e=await o.json();i({block_num:e.block_num,block_id:e.id,timestamp:e.timestamp,producer:e.producer,transaction_count:e.transactions?.length||0})}}catch(t){De.error("Error fetching transaction details","TransactionDetails.fetchTransactionDetails",t),c(t instanceof Error?t.message:"Failed to load transaction details")}finally{l(!1)}},m=e=>{t(`/user-profile-lookup?user=${encodeURIComponent(e)}`)};return r?Se.jsx("div",{className:"page-content",children:Se.jsx("div",{className:"transaction-details-container",children:Se.jsxs("div",{className:"loading-state",children:[Se.jsx("div",{className:"loading-spinner"}),Se.jsx("p",{children:"Loading transaction details..."})]})})}):o||!s?Se.jsx("div",{className:"page-content",children:Se.jsx("div",{className:"transaction-details-container",children:Se.jsxs("div",{className:"error-state",children:[Se.jsx("h2",{children:"Transaction Not Found"}),Se.jsx("p",{children:o||"The requested transaction could not be found."}),Se.jsx("button",{onClick:()=>t(-1),className:"btn btn-primary",children:"Go Back"})]})})}):Se.jsx("div",{className:"page-content",children:Se.jsxs("div",{className:"transaction-details-container",children:[Se.jsxs("div",{className:"transaction-header",children:[Se.jsx("button",{onClick:()=>t(-1),className:"back-button",children:"\u2190 Back"}),Se.jsxs("div",{className:"transaction-title",children:[Se.jsx("h1",{children:"Transaction Details"}),Se.jsxs("div",{className:"transaction-id",children:[Se.jsxs("span",{children:["ID: ",s.transaction_id]}),Se.jsx("button",{onClick:()=>{return e=s.transaction_id,void navigator.clipboard.writeText(e);var e},className:"copy-button",title:"Copy transaction ID",children:"\ud83d\udccb"})]})]}),Se.jsxs("div",{className:`transaction-status ${s.status}`,children:["success"===s.status?"\u2705":"\u274c"," ",s.status.toUpperCase()]})]}),Se.jsxs("div",{className:"tab-navigation",children:[Se.jsx("button",{className:"tab "+("overview"===d?"active":""),onClick:()=>u("overview"),children:"Overview"}),Se.jsx("button",{className:"tab "+("traces"===d?"active":""),onClick:()=>u("traces"),children:"Action Traces"}),Se.jsx("button",{className:"tab "+("raw"===d?"active":""),onClick:()=>u("raw"),children:"Raw Data"})]}),Se.jsxs("div",{className:"tab-content",children:["overview"===d&&Se.jsxs("div",{className:"overview-tab",children:[Se.jsxs("div",{className:"info-section",children:[Se.jsx("h3",{children:"Basic Information"}),Se.jsxs("div",{className:"info-grid",children:[Se.jsxs("div",{className:"info-item",children:[Se.jsx("label",{children:"Block Number:"}),Se.jsx("span",{children:s.block_num.toLocaleString()})]}),Se.jsxs("div",{className:"info-item",children:[Se.jsx("label",{children:"Timestamp:"}),Se.jsx("span",{children:(p=s.block_time,new Date(p+"Z").toLocaleString())})]}),Se.jsxs("div",{className:"info-item",children:[Se.jsx("label",{children:"Action:"}),Se.jsx("span",{className:"action-name",children:s.action_name})]}),Se.jsxs("div",{className:"info-item",children:[Se.jsx("label",{children:"Contract:"}),Se.jsx("span",{className:"contract-name",children:s.receiver})]})]})]}),Se.jsxs("div",{className:"info-section",children:[Se.jsx("h3",{children:"Transaction Parties"}),Se.jsxs("div",{className:"info-grid",children:[Se.jsxs("div",{className:"info-item",children:[Se.jsx("label",{children:"Actor:"}),Se.jsx("span",{className:"clickable-account",onClick:()=>m(s.actor),children:s.actor})]}),s.from&&s.from!==s.actor&&Se.jsxs("div",{className:"info-item",children:[Se.jsx("label",{children:"From:"}),Se.jsx("span",{className:"clickable-account",onClick:()=>m(s.from),children:s.from})]}),s.to&&Se.jsxs("div",{className:"info-item",children:[Se.jsx("label",{children:"To:"}),Se.jsx("span",{className:"clickable-account",onClick:()=>m(s.to),children:s.to})]})]})]}),(s.asset_id||s.price)&&Se.jsxs("div",{className:"info-section",children:[Se.jsx("h3",{children:"Asset Information"}),Se.jsxs("div",{className:"info-grid",children:[s.asset_id&&Se.jsxs("div",{className:"info-item",children:[Se.jsx("label",{children:"Asset ID:"}),Se.jsx("span",{className:"clickable-asset",onClick:()=>{return e=s.asset_id,void t(`/assets/${e}`);var e},children:s.asset_id})]}),s.asset_name&&Se.jsxs("div",{className:"info-item",children:[Se.jsx("label",{children:"Asset Name:"}),Se.jsx("span",{children:s.asset_name})]}),s.collection_name&&Se.jsxs("div",{className:"info-item",children:[Se.jsx("label",{children:"Collection:"}),Se.jsx("span",{children:"string"==typeof s.collection_name?s.collection_name:s.collection_name?.collection_name||s.collection_name?.name||"Unknown"})]}),s.price&&Se.jsxs("div",{className:"info-item",children:[Se.jsx("label",{children:"Price:"}),Se.jsx("span",{className:"price",children:s.price})]})]})]}),Se.jsxs("div",{className:"info-section",children:[Se.jsx("h3",{children:"Resource Usage"}),Se.jsxs("div",{className:"info-grid",children:[Se.jsxs("div",{className:"info-item",children:[Se.jsx("label",{children:"CPU Usage:"}),Se.jsxs("span",{children:[s.cpu_usage_us.toLocaleString()," \u03bcs"]})]}),Se.jsxs("div",{className:"info-item",children:[Se.jsx("label",{children:"NET Usage:"}),Se.jsxs("span",{children:[s.net_usage_words.toLocaleString()," words"]})]})]})]}),n&&Se.jsxs("div",{className:"info-section",children:[Se.jsx("h3",{children:"Block Information"}),Se.jsxs("div",{className:"info-grid",children:[Se.jsxs("div",{className:"info-item",children:[Se.jsx("label",{children:"Block ID:"}),Se.jsx("span",{className:"block-id",children:n.block_id})]}),Se.jsxs("div",{className:"info-item",children:[Se.jsx("label",{children:"Producer:"}),Se.jsx("span",{children:n.producer})]}),Se.jsxs("div",{className:"info-item",children:[Se.jsx("label",{children:"Transactions in Block:"}),Se.jsx("span",{children:n.transaction_count})]})]})]}),s.memo&&Se.jsxs("div",{className:"info-section",children:[Se.jsx("h3",{children:"Memo"}),Se.jsx("div",{className:"memo-content",children:s.memo})]})]}),"traces"===d&&Se.jsxs("div",{className:"traces-tab",children:[Se.jsx("h3",{children:"Action Traces"}),s.traces&&s.traces.length>0?Se.jsx("div",{className:"traces-list",children:s.traces.map((e,t)=>Se.jsxs("div",{className:"trace-item",children:[Se.jsxs("div",{className:"trace-header",children:[Se.jsxs("span",{className:"trace-index",children:["#",t+1]}),Se.jsx("span",{className:"trace-action",children:e.act?.name||"unknown"}),Se.jsx("span",{className:"trace-account",children:e.act?.account||"unknown"})]}),Se.jsx("pre",{className:"trace-data",children:JSON.stringify(e,null,2)})]},t))}):Se.jsx("p",{children:"No action traces available for this transaction."})]}),"raw"===d&&Se.jsxs("div",{className:"raw-tab",children:[Se.jsx("h3",{children:"Raw Transaction Data"}),Se.jsx("pre",{className:"raw-data",children:JSON.stringify(s,null,2)})]})]})]})});var p},ma=({isOpen:e,onClose:t,resourceType:s,action:a,onSuccess:n})=>{const[i,r]=O.useState(""),[l,o]=O.useState(!1),{session:c,transact:d}=Ie(),{showError:u}=xt();if(!e)return null;const h=s.toUpperCase(),m="stake"===a?"Stake":"Unstake";return Se.jsx("div",{className:"modal-overlay",onClick:t,children:Se.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsxs("h2",{children:[m," ",h]}),Se.jsx("button",{className:"modal-close",onClick:t,children:"\xd7"})]}),Se.jsxs("div",{className:"modal-body",children:[Se.jsxs("div",{className:"resource-info",children:[Se.jsx("div",{className:"resource-icon",children:"cpu"===s?"\u26a1":"\ud83c\udf10"}),Se.jsxs("div",{className:"resource-description",children:[Se.jsxs("h3",{children:[h," ",m]}),Se.jsx("p",{children:"stake"===a?`Stake WAX to increase your ${h} resources. Staked tokens will be locked for 3 days after unstaking.`:`Unstake WAX from your ${h} resources. Tokens will be available after a 3-day waiting period.`})]})]}),Se.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),c&&i&&!(parseFloat(i)<=0)){o(!0);try{const e=`${parseFloat(i).toFixed(8)} WAX`;if("stake"===a){const t=[{account:"eosio",name:"delegatebw",authorization:[{actor:c.actor.toString(),permission:c.permission.toString()}],data:{from:c.actor.toString(),receiver:c.actor.toString(),stake_net_quantity:"net"===s?e:"0.00000000 WAX",stake_cpu_quantity:"cpu"===s?e:"0.00000000 WAX",transfer:!1}}];await d(t)}else{const t=[{account:"eosio",name:"undelegatebw",authorization:[{actor:c.actor.toString(),permission:c.permission.toString()}],data:{from:c.actor.toString(),receiver:c.actor.toString(),unstake_net_quantity:"net"===s?e:"0.00000000 WAX",unstake_cpu_quantity:"cpu"===s?e:"0.00000000 WAX"}}];await d(t)}n?.(),t()}catch(r){De.error(`Failed to ${a} ${s.toUpperCase()}`,"StakingModal.handleSubmit",r,{action:a,resourceType:s,amount:i}),u(`Failed to ${a} ${s.toUpperCase()}. Please try again.`,"Transaction Failed")}finally{o(!1)}}},children:[Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{htmlFor:"amount",children:"Amount (WAX)"}),Se.jsx("input",{type:"number",id:"amount",value:i,onChange:e=>r(e.target.value),placeholder:"Enter WAX amount",min:"0.00000001",step:"0.00000001",required:!0,disabled:l})]}),Se.jsxs("div",{className:"form-actions",children:[Se.jsx("button",{type:"button",className:"btn-secondary",onClick:t,disabled:l,children:"Cancel"}),Se.jsx("button",{type:"submit",className:"btn-primary",disabled:l||!i||parseFloat(i)<=0,children:l?"Processing...":`${m} ${h}`})]})]})]})]})})},pa=({isOpen:e,onClose:t,action:s,onSuccess:a})=>{const[n,i]=O.useState(""),[r,l]=O.useState(!1),[o,c]=O.useState(null),[d,u]=O.useState(null),[h,m]=O.useState(!1),{session:p,transact:f}=Ie(),{showSuccess:x,showError:g}=xt();O.useEffect(()=>{e&&p&&v()},[e,p]);const v=async()=>{if(p){m(!0);try{const e=await fetch("https://wax.greymass.com/v1/chain/get_table_rows",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({json:!0,code:"eosio",scope:"eosio",table:"rammarket",limit:1})});if(e.ok){const t=await e.json();if(t.rows&&t.rows.length>0){const e=t.rows[0],s=parseFloat(e.quote.balance.split(" ")[0]),a=parseFloat(e.base.balance.split(" ")[0]);c(s/a)}}const t=await fetch("https://wax.greymass.com/v1/chain/get_account",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({account_name:p.actor.toString()})});if(t.ok){const e=await t.json();u(e.ram_quota-e.ram_usage)}}catch(e){De.error("Failed to fetch RAM market data","RAMModal.fetchRAMData",e,{account:p?.actor.toString()})}finally{m(!1)}}};if(!e)return null;const j="buy"===s?"Buy":"Sell",y="buy"===s?"Amount (WAX)":"Bytes to Sell",b="buy"===s?"Enter WAX amount":"Enter bytes amount";return Se.jsx("div",{className:"modal-overlay",onClick:t,children:Se.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsxs("h2",{children:[j," RAM"]}),Se.jsx("button",{className:"modal-close",onClick:t,children:"\xd7"})]}),Se.jsxs("div",{className:"modal-body",children:[Se.jsxs("div",{className:"resource-info",children:[Se.jsx("div",{className:"resource-icon",children:"\ud83d\udcbe"}),Se.jsxs("div",{className:"resource-description",children:[Se.jsxs("h3",{children:["RAM ",j]}),Se.jsx("p",{children:"buy"===s?"Purchase RAM with WAX tokens. RAM is used to store account data and smart contract state.":"Sell RAM bytes back to the system for WAX tokens. Only sell RAM you don't need."}),Se.jsx("div",{className:"ram-market-info",children:h?Se.jsx("div",{className:"loading-info",children:Se.jsx("span",{children:"Loading RAM market data..."})}):Se.jsxs(Se.Fragment,{children:[null!==o&&Se.jsxs("div",{className:"market-stat",children:[Se.jsx("span",{className:"stat-label",children:"Current RAM Price:"}),Se.jsxs("span",{className:"stat-value",children:[(1024*o).toFixed(8)," WAX/KB"]})]}),"sell"===s&&null!==d&&Se.jsxs("div",{className:"market-stat",children:[Se.jsx("span",{className:"stat-label",children:"Available RAM:"}),Se.jsxs("span",{className:"stat-value",children:[d.toLocaleString()," bytes"]})]}),"buy"===s&&null!==o&&n&&Se.jsxs("div",{className:"market-stat",children:[Se.jsx("span",{className:"stat-label",children:"Estimated RAM:"}),Se.jsxs("span",{className:"stat-value",children:[Math.floor(parseFloat(n)/o).toLocaleString()," bytes"]})]}),"sell"===s&&null!==o&&n&&Se.jsxs("div",{className:"market-stat",children:[Se.jsx("span",{className:"stat-label",children:"Estimated WAX:"}),Se.jsxs("span",{className:"stat-value",children:[(parseFloat(n)*o).toFixed(8)," WAX"]})]})]})})]})]}),Se.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),p&&n&&!(parseFloat(n)<=0)){if("sell"===s&&null!==d){if(Math.floor(parseFloat(n))>d)return void g("Insufficient RAM",`You only have ${d.toLocaleString()} bytes available to sell.`)}l(!0);try{if("buy"===s){const e=`${parseFloat(n).toFixed(8)} WAX`,t=[{account:"eosio",name:"buyram",authorization:[{actor:Gt.safeGetActor(p),permission:Gt.safeGetPermission(p)}],data:{payer:Gt.safeGetActor(p),receiver:Gt.safeGetActor(p),quant:e}}];await f(t),x("RAM Purchase Successful",`Successfully purchased RAM with ${e}!`)}else{const e=Math.floor(parseFloat(n)),t=[{account:"eosio",name:"sellram",authorization:[{actor:Gt.safeGetActor(p),permission:Gt.safeGetPermission(p)}],data:{account:Gt.safeGetActor(p),bytes:e}}];await f(t),x("RAM Sale Successful",`Successfully sold ${e.toLocaleString()} bytes of RAM!`)}a?.(),t(),i("")}catch(r){De.error(`Failed to ${s} RAM`,"RAMModal.handleSubmit",r,{action:s,amount:n,account:Gt.safeGetActor(p)});const e=r instanceof Error?r.message:"Unknown error occurred";g(`RAM ${"buy"===s?"Purchase":"Sale"} Failed`,e)}finally{l(!1)}}},children:[Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{htmlFor:"amount",children:y}),Se.jsx("input",{type:"number",id:"amount",value:n,onChange:e=>i(e.target.value),placeholder:b,min:"buy"===s?"0.00000001":"1",step:"buy"===s?"0.00000001":"1",required:!0,disabled:r}),"buy"===s&&Se.jsx("small",{className:"form-hint",children:"Minimum: 0.00000001 WAX"}),"sell"===s&&Se.jsx("small",{className:"form-hint",children:"Enter the number of bytes to sell"})]}),Se.jsxs("div",{className:"form-actions",children:[Se.jsx("button",{type:"button",className:"btn-secondary",onClick:t,disabled:r,children:"Cancel"}),Se.jsx("button",{type:"submit",className:"btn-primary",disabled:r||!n||parseFloat(n)<=0,children:r?"Processing...":`${j} RAM`})]})]})]})]})})},fa=({token:e,isOpen:t,onClose:s,onSuccess:a})=>{const[n,i]=O.useState(""),[r,l]=O.useState(""),[o,c]=O.useState(""),[d,u]=O.useState(!1),[h,m]=O.useState([]),[p,f]=O.useState(!1),{session:x,transferTokens:g}=Ie(),{showSuccess:v,showError:j}=xt(),y=e=>/^[a-z1-5.]{1,12}$/.test(e)&&e.length>=1&&e.length<=12,b=t=>{const s=parseFloat(t),a=parseFloat(e?.balance||"0");return s>0&&s<=a},N=()=>r&&0!==h.length?parseFloat(r)/h.length:0,w=e=>{const t=e.split(" ");if(t.length>0){const e=t[0].split(".")[1];return e?e.length:0}return 8},k=()=>{d||(i(""),l(""),c(""),m([]),f(!1),s())};return t&&e?Se.jsx("div",{className:"modal-overlay",onClick:k,children:Se.jsxs("div",{className:"modal-content token-transfer-modal",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsxs("h2",{children:["Transfer ",e.symbol]}),Se.jsx("button",{className:"modal-close",onClick:k,disabled:d,children:"\xd7"})]}),Se.jsxs("div",{className:"modal-body",children:[Se.jsx("div",{className:"token-preview",children:Se.jsxs("div",{className:"token-info",children:[Se.jsx("div",{className:"token-icon",children:"\ud83e\ude99"}),Se.jsxs("div",{className:"token-details",children:[Se.jsx("h3",{children:e.symbol}),Se.jsx("p",{className:"token-contract",children:e.contract}),Se.jsxs("p",{className:"token-balance",children:["Available: ",e.balance," ",e.symbol]}),"N/A"!==e.value&&"0.00"!==e.value&&Se.jsxs("p",{className:"token-usd-value",children:["\u2248 $",e.value," USD"]})]})]})}),Se.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),!(e&&x&&n.trim()&&r.trim()))return void j("Validation Error","Please fill in all required fields");const d=h.filter(e=>!y(e));if(d.length>0)j("Invalid Account Names",`Invalid WAX account names: ${d.join(", ")}. Account names must be 12 characters, lowercase letters and numbers 1-5.`);else if(b(r)){u(!0);try{const t=w(e.balance),d=[];if(p&&h.length>1){const s=N().toFixed(t)+" "+e.symbol;for(const t of h)d.push({account:e.contract,name:"transfer",authorization:[{actor:x.actor,permission:x.permission}],data:{from:Gt.safeGetActor(x),to:t,quantity:s,memo:o.trim()||"Bulk transfer via PxMarket - market.pixeljourney.xyz"}})}else{const s=parseFloat(r).toFixed(t)+" "+e.symbol;d.push({account:e.contract,name:"transfer",authorization:[{actor:Gt.safeGetActor(x),permission:Gt.safeGetPermission(x)}],data:{from:Gt.safeGetActor(x),to:h[0]||n.trim(),quantity:s,memo:o.trim()||"Transferred via PxMarket - market.pixeljourney.xyz"}})}if(p){let t=0;for(const s of h)try{if(!g){De.error("transferTokens service not available","TokenTransferModal");continue}await g(s,N().toString(),e.symbol,o.trim()||"Bulk transfer via PxMarket - market.pixeljourney.xyz")&&t++}catch(k){De.error(`Transfer to ${s} failed`,"TokenTransferModal",k)}if(t>0){const s=t===h.length?`${r} ${e.symbol} transferred to all ${h.length} recipients successfully!`:`${r} ${e.symbol} transferred to ${t}/${h.length} recipients successfully!`;v("Bulk Transfer Complete",s)}}else{if(!g)return void j("Transfer Error","Transfer service not available");await g(h[0]||n.trim(),r,e.symbol,o.trim()||"Transferred via PxMarket - market.pixeljourney.xyz")&&v("Transfer Successful",`${r} ${e.symbol} transferred successfully!`)}a?.(),s(),i(""),l(""),c(""),m([]),f(!1)}catch(k){De.error("Token transfer failed","TokenTransferModal",k),j("Transfer Failed",k instanceof Error?k.message:"Unknown error occurred")}finally{u(!1)}}else j("Invalid Amount","Please enter a valid amount that does not exceed your balance")},className:"modal-form token-transfer-form",children:[Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{htmlFor:"recipient",children:p?"Recipients (comma-separated) *":"Recipient WAX Account *"}),Se.jsx("input",{type:"text",id:"recipient",value:n,onChange:e=>(e=>{i(e.toLowerCase());const t=e.split(",").map(e=>e.trim().toLowerCase()).filter(e=>e.length>0);m(t),f(t.length>1)})(e.target.value),placeholder:p?"e.g. pixeljourney,market.pxj,council.pxj":"e.g. pixeljourney",required:!0,disabled:d,className:"recipient-input"}),Se.jsx("small",{className:"input-help",children:p?`Enter WAX account names separated by commas (${h.length} recipients detected)`:"Enter a valid WAX account name (12 characters, lowercase letters and numbers 1-5)"}),p&&h.length>1&&Se.jsxs("div",{className:"recipients-preview",children:[Se.jsx("strong",{children:"Recipients:"}),Se.jsx("ul",{children:h.map((e,t)=>Se.jsxs("li",{className:y(e)?"valid":"invalid",children:[e," ",!y(e)&&"\u274c"]},t))})]})]}),Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{htmlFor:"amount",children:"Amount *"}),Se.jsxs("div",{className:"amount-input-wrapper",children:[Se.jsx("input",{type:"number",id:"amount",value:r,onChange:e=>l(e.target.value),placeholder:"0.00000000",step:"0.00000001",min:"0",max:e.balance.split(" ")[0],required:!0,disabled:d,className:"amount-input"}),Se.jsx("button",{type:"button",className:"max-btn",onClick:()=>{if(e){const t=e.balance.split(" ")[0];l(t)}},disabled:d,children:"MAX"})]}),p&&h.length>1&&r&&Se.jsxs("small",{className:"distribution-info",children:["Each recipient will receive: ",N().toFixed(w(e.balance))," ",e.symbol]})]}),Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{htmlFor:"memo",children:"Memo (Optional)"}),Se.jsx("input",{type:"text",id:"memo",value:o,onChange:e=>c(e.target.value),placeholder:"Optional transfer message",maxLength:256,disabled:d,className:"memo-input"})]}),Se.jsxs("div",{className:"transfer-warning",children:[Se.jsx("div",{className:"warning-icon",children:"\u26a0\ufe0f"}),Se.jsxs("div",{className:"warning-text",children:[Se.jsx("strong",{children:"Warning:"})," This action cannot be undone. Make sure you trust the recipient and have entered the correct account name and amount."]})]}),Se.jsxs("div",{className:"modal-actions",children:[Se.jsx("button",{type:"button",className:"btn-secondary",onClick:k,disabled:d,children:"Cancel"}),Se.jsx("button",{type:"submit",className:"btn-primary transfer-btn",disabled:d||!n.trim()||!r.trim()||!y(n.trim())||!b(r),children:d?Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"spinner"}),p?"Bulk Transferring...":"Transferring..."]}):p?`Bulk Transfer ${e.symbol}`:`Transfer ${e.symbol}`})]})]})]})]})}):null},xa=()=>{const{isConnected:e,account:t}=Ie(),[s,a]=O.useState(null),[n,i]=O.useState([]),[r,l]=O.useState([]),[o,c]=O.useState([]),[d,u]=O.useState(!1),[h,m]=O.useState("30d"),[p,f]=O.useState("overview"),x=O.useCallback(async e=>{if(t)try{const s=await dt.getUserTransactions(t,1e3),a="7d"===h?7:"30d"===h?30:"90d"===h?90:365,n=[],i=new Date;for(let t=a;t>=0;t--){const a=new Date(i);a.setDate(a.getDate()-t);const r=a.getTime(),l=s.filter(e=>new Date(e.block_time).getTime()<=r);let o=0,c=0;l.forEach(e=>{if("purchase"===e.type&&e.price){const t=parseFloat(e.price.replace(/[^0-9.-]/g,"")||"0");c+=t,o+=t}else if("sale"===e.type&&e.price){const t=parseFloat(e.price.replace(/[^0-9.-]/g,"")||"0");o-=t}}),0===t?(o=e.totalValue,c=e.totalInvested):0===o&&0===c&&(o=0,c=0),n.push({date:a.toISOString().split("T")[0],value:o,invested:c})}c(n)}catch(s){console.error("Error generating time series data:",s);const t=[];for(let a="7d"===h?7:"30d"===h?30:"90d"===h?90:365;a>=0;a--){const s=new Date;s.setDate(s.getDate()-a),t.push({date:s.toISOString().split("T")[0],value:0===a?e.totalValue:.95*e.totalValue,invested:e.totalInvested})}c(t)}},[t,h]),g=O.useCallback(async()=>{if(t){u(!0);try{const e=await dt.getUserInventory(t),s=await dt.getUserTransactions(t);let n=0,r=0;const l={};for(const t of e){const e=parseFloat(t.price||"0");n+=e;const a=s.find(e=>e.asset_id===t.asset_id&&"purchase"===e.type),i=a?parseFloat(a.price||"0"):e;r+=i,l[t.collection]||(l[t.collection]={collection:t.collection,totalValue:0,totalInvested:0,profitLoss:0,profitLossPercentage:0,nftCount:0,averagePrice:0,floorPrice:0,performance:"neutral"}),l[t.collection].totalValue+=e,l[t.collection].totalInvested+=i,l[t.collection].nftCount+=1}const o=Object.values(l).map(e=>(e.profitLoss=e.totalValue-e.totalInvested,e.profitLossPercentage=e.totalInvested>0?e.profitLoss/e.totalInvested*100:0,e.averagePrice=e.nftCount>0?e.totalValue/e.nftCount:0,e.profitLossPercentage>20?e.performance="excellent":e.profitLossPercentage>5?e.performance="good":e.profitLossPercentage>-5?e.performance="neutral":e.performance="poor",e)),c=n-r,d=r>0?c/r*100:0,u=o.sort((e,t)=>t.profitLossPercentage-e.profitLossPercentage),h=u[0]?.collection||"N/A",m=u[u.length-1]?.collection||"N/A",p=45,f={totalValue:n,totalInvested:r,profitLoss:c,profitLossPercentage:d,totalNFTs:e.length,uniqueCollections:o.length,averageHoldingTime:p,bestPerformingCollection:h,worstPerformingCollection:m};a(f),i(o),v(f,o),await x(f)}catch(e){console.error("Error calculating portfolio metrics:",e)}finally{u(!1)}}},[t,x]),v=(e,t)=>{const s=[];e.profitLoss>0?s.push({type:"profit",title:"Portfolio in Profit",description:`Your portfolio has gained ${e.profitLossPercentage.toFixed(1)}% since initial investment`,value:`+${e.profitLoss.toFixed(2)} WAX`}):e.profitLoss<0&&s.push({type:"loss",title:"Portfolio Underperforming",description:`Your portfolio is down ${Math.abs(e.profitLossPercentage).toFixed(1)}% from initial investment`,value:`${e.profitLoss.toFixed(2)} WAX`});const a=t.find(t=>t.collection===e.bestPerformingCollection);a&&a.profitLossPercentage>10&&s.push({type:"profit",title:"Top Performer",description:`${a.collection} is your best performing collection`,value:`+${a.profitLossPercentage.toFixed(1)}%`,collection:a.collection}),t.length<3&&s.push({type:"opportunity",title:"Diversification Opportunity",description:"Consider diversifying across more collections to reduce risk",value:`${t.length} collections`});const n=t.reduce((e,t)=>t.totalValue>e.totalValue?t:e,t[0]);n&&n.totalValue/e.totalValue>.6&&s.push({type:"warning",title:"High Concentration Risk",description:`${n.collection} represents over 60% of your portfolio`,collection:n.collection}),l(s)};O.useEffect(()=>{e&&t&&g()},[e,t,g]);const j=e=>`${e.toFixed(2)} WAX`,y=e=>`${e>=0?"+":""}${e.toFixed(1)}%`;return e?d?Se.jsx("div",{className:"portfolio-analytics",children:Se.jsxs("div",{className:"loading-state",children:[Se.jsx("div",{className:"loading-spinner"}),Se.jsx("p",{children:"Analyzing your portfolio..."})]})}):Se.jsxs("div",{className:"portfolio-analytics",children:[Se.jsxs("div",{className:"analytics-header",children:[Se.jsx("h2",{children:"Portfolio Analytics"}),Se.jsxs("div",{className:"analytics-controls",children:[Se.jsx("div",{className:"timeframe-selector",children:["7d","30d","90d","1y"].map(e=>Se.jsx("button",{className:"timeframe-btn "+(h===e?"active":""),onClick:()=>m(e),children:e},e))}),Se.jsx("div",{className:"view-selector",children:["overview","collections","insights"].map(e=>Se.jsx("button",{className:"view-btn "+(p===e?"active":""),onClick:()=>f(e),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})]}),"overview"===p&&s&&Se.jsxs("div",{className:"overview-section",children:[Se.jsxs("div",{className:"metrics-grid",children:[Se.jsxs("div",{className:"metric-card primary",children:[Se.jsxs("div",{className:"metric-header",children:[Se.jsx("h3",{children:"Total Portfolio Value"}),Se.jsx("span",{className:"metric-icon",children:"\ud83d\udcb0"})]}),Se.jsx("div",{className:"metric-value",children:j(s.totalValue)}),Se.jsxs("div",{className:"metric-change "+(s.profitLoss>=0?"positive":"negative"),children:[y(s.profitLossPercentage)," (",j(s.profitLoss),")"]})]}),Se.jsxs("div",{className:"metric-card",children:[Se.jsxs("div",{className:"metric-header",children:[Se.jsx("h3",{children:"Total Invested"}),Se.jsx("span",{className:"metric-icon",children:"\ud83d\udcc8"})]}),Se.jsx("div",{className:"metric-value",children:j(s.totalInvested)})]}),Se.jsxs("div",{className:"metric-card",children:[Se.jsxs("div",{className:"metric-header",children:[Se.jsx("h3",{children:"NFTs Owned"}),Se.jsx("span",{className:"metric-icon",children:"\ud83c\udfa8"})]}),Se.jsx("div",{className:"metric-value",children:s.totalNFTs}),Se.jsxs("div",{className:"metric-subtitle",children:[s.uniqueCollections," collections"]})]}),Se.jsxs("div",{className:"metric-card",children:[Se.jsxs("div",{className:"metric-header",children:[Se.jsx("h3",{children:"Avg. Holding Time"}),Se.jsx("span",{className:"metric-icon",children:"\u23f1\ufe0f"})]}),Se.jsxs("div",{className:"metric-value",children:[s.averageHoldingTime,"d"]})]})]}),Se.jsxs("div",{className:"performance-chart",children:[Se.jsx("h3",{children:"Portfolio Performance"}),Se.jsxs("div",{className:"chart-container",children:[Se.jsx("svg",{className:"performance-svg",viewBox:"0 0 800 200",children:o.map((e,t)=>{const s=t/(o.length-1)*780+10,a=190-e.value/Math.max(...o.map(e=>e.value))*180,n=190-e.invested/Math.max(...o.map(e=>e.value))*180;return Se.jsxs("g",{children:[t>0&&Se.jsxs(Se.Fragment,{children:[Se.jsx("line",{x1:(t-1)/(o.length-1)*780+10,y1:190-o[t-1].value/Math.max(...o.map(e=>e.value))*180,x2:s,y2:a,stroke:"#4CAF50",strokeWidth:"2"}),Se.jsx("line",{x1:(t-1)/(o.length-1)*780+10,y1:190-o[t-1].invested/Math.max(...o.map(e=>e.value))*180,x2:s,y2:n,stroke:"#FF9800",strokeWidth:"2",strokeDasharray:"5,5"})]}),Se.jsx("circle",{cx:s,cy:a,r:"3",fill:"#4CAF50"})]},t)})}),Se.jsxs("div",{className:"chart-legend",children:[Se.jsxs("div",{className:"legend-item",children:[Se.jsx("div",{className:"legend-color",style:{backgroundColor:"var(--success-color)"}}),Se.jsx("span",{children:"Current Value"})]}),Se.jsxs("div",{className:"legend-item",children:[Se.jsx("div",{className:"legend-color dashed",style:{backgroundColor:"var(--warning-color)"}}),Se.jsx("span",{children:"Invested Amount"})]})]})]})]})]}),"collections"===p&&Se.jsxs("div",{className:"collections-section",children:[Se.jsx("h3",{children:"Collection Performance"}),Se.jsx("div",{className:"collections-grid",children:n.map((e,t)=>Se.jsxs("div",{className:`collection-card ${e.performance}`,children:[Se.jsxs("div",{className:"collection-header",children:[Se.jsx("h4",{children:e.collection}),Se.jsx("span",{className:`performance-badge ${e.performance}`,children:e.performance})]}),Se.jsxs("div",{className:"collection-metrics",children:[Se.jsxs("div",{className:"collection-metric",children:[Se.jsx("span",{className:"metric-label",children:"Value:"}),Se.jsx("span",{className:"metric-value",children:j(e.totalValue)})]}),Se.jsxs("div",{className:"collection-metric",children:[Se.jsx("span",{className:"metric-label",children:"P&L:"}),Se.jsx("span",{className:"metric-value "+(e.profitLoss>=0?"positive":"negative"),children:y(e.profitLossPercentage)})]}),Se.jsxs("div",{className:"collection-metric",children:[Se.jsx("span",{className:"metric-label",children:"NFTs:"}),Se.jsx("span",{className:"metric-value",children:e.nftCount})]}),Se.jsxs("div",{className:"collection-metric",children:[Se.jsx("span",{className:"metric-label",children:"Avg Price:"}),Se.jsx("span",{className:"metric-value",children:j(e.averagePrice)})]})]})]},t))})]}),"insights"===p&&Se.jsxs("div",{className:"insights-section",children:[Se.jsx("h3",{children:"Investment Insights"}),Se.jsx("div",{className:"insights-grid",children:r.map((e,t)=>Se.jsxs("div",{className:`insight-card ${e.type}`,children:[Se.jsxs("div",{className:"insight-header",children:[Se.jsxs("span",{className:`insight-icon ${e.type}`,children:["profit"===e.type&&"\ud83d\udcc8","loss"===e.type&&"\ud83d\udcc9","opportunity"===e.type&&"\ud83d\udca1","warning"===e.type&&"\u26a0\ufe0f"]}),Se.jsx("h4",{children:e.title}),e.value&&Se.jsx("span",{className:"insight-value",children:e.value})]}),Se.jsx("p",{className:"insight-description",children:e.description}),e.collection&&Se.jsxs("div",{className:"insight-collection",children:["Collection: ",e.collection]})]},t))})]})]}):Se.jsx("div",{className:"portfolio-analytics",children:Se.jsxs("div",{className:"wallet-connection-prompt",children:[Se.jsx("h3",{children:"\ud83d\udd17 Connect Your Wallet"}),Se.jsx("p",{children:"Connect your WAX wallet to view detailed portfolio analytics and investment insights."})]})})},ga={},va=(e,t)=>{if(!e||void 0===t)return 0;return 1e11*(t/100)},ja=(e,t)=>{if(!e||void 0===t)return 0;return 2e9*((100-t)/100)},ya=(e,t,s,a,n)=>{if(n&&n.virtual_block_cpu_limit&&n.block_cpu_limit){let i=parseFloat(n.block_cpu_limit),r=parseFloat(n.virtual_block_cpu_limit)/i;const l=I(e,t,s,a).cpuAmount*r;if(!l||l<=0)return"0 ms";const o=l/1e3;return o>=1e3?`${(o/1e3).toFixed(2)} seconds`:`${o.toFixed(2)} ms`}return"0 ms"},ba=()=>{const{account:e}=Ds(),[t,s]=O.useState([]),[a,n]=O.useState(!0),[i,r]=O.useState(new Set),[l,o]=O.useState(null),[c,d]=O.useState(!1),u=O.useCallback(async()=>{if(e)try{n(!0);const t=await ht.checkUserBadges(e),a=await ht.getUserBadgeStats(e);s(t.badges),o(a)}catch(t){De.error("Error loading badges","PxBadges.loadUserBadges",t,{account:e})}finally{n(!1)}},[e]);O.useEffect(()=>{e?u():(s([]),n(!1))},[e,u]);const h=O.useMemo(()=>{const e=ht.getAllBadgeDefinitions(),s={holdings:{id:"holdings",name:"Token Holdings",icon:"\ud83d\udcb0",description:"Achievements for holding various tokens",badges:[]},ownership:{id:"ownership",name:"NFT Collections",icon:"\ud83c\udfad",description:"Achievements for owning NFTs and collectibles",badges:[]},trading:{id:"trading",name:"Trading Mastery",icon:"\ud83d\udcc8",description:"Achievements for trading activities",badges:[]},social:{id:"social",name:"Community",icon:"\ud83d\udc65",description:"Achievements for community participation",badges:[]},achievement:{id:"achievement",name:"Special Achievements",icon:"\ud83c\udfc6",description:"Rare and special accomplishments",badges:[]},special:{id:"special",name:"Legendary",icon:"\u2b50",description:"Ultra-rare legendary achievements",badges:[]}};return e.forEach(e=>{const a=s[e.type]||s.achievement,n=t.find(t=>t.id===e.id);a.badges.push(n||{...e,unlockedAt:void 0})}),Object.values(s).filter(e=>e.badges.length>0)},[t]),m=O.useMemo(()=>{const e=[],s=t.filter(e=>e.id.startsWith("pixal-collector")).sort((e,t)=>(e.tier||0)-(t.tier||0));if(s.length>0){const t=[1,2,3,4,5].map(e=>{const t=s.find(t=>t.tier===e);return{tier:e,earned:!!t?.unlockedAt,current:t?.progress&&!t.unlockedAt}});e.push({name:"Pixal Collector",badges:s,steps:t})}const a=t.filter(e=>e.id.startsWith("waxrock-collector")).sort((e,t)=>(e.tier||0)-(t.tier||0));if(a.length>0){const t=[1,2,3].map(e=>{const t=a.find(t=>t.tier===e);return{tier:e,earned:!!t?.unlockedAt,current:t?.progress&&!t.unlockedAt}});e.push({name:"WaxRock Collector",badges:a,steps:t})}return e},[t]),p=e=>{if(!e)return"";return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};return e?Se.jsxs("div",{className:"pxbadges-container",children:[Se.jsxs("div",{className:"pxbadges-header",children:[Se.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"1rem",marginBottom:"1rem"},children:[Se.jsx("h1",{className:"pxbadges-title",children:"Achievements"}),Se.jsx("button",{onClick:()=>d(!0),style:{background:"rgba(255, 215, 0, 0.2)",border:"2px solid #ffd700",borderRadius:"50%",width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.3s ease",color:"#ffd700"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 215, 0, 0.3)",e.currentTarget.style.transform="scale(1.1)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(255, 215, 0, 0.2)",e.currentTarget.style.transform="scale(1)"},title:"Share Achievements",children:Se.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"})})})]}),Se.jsx("p",{className:"pxbadges-subtitle",children:"Track your progress and unlock prestigious badges in the Pixel Journey ecosystem"}),l&&Se.jsxs("div",{className:"achievement-stats",children:[Se.jsxs("div",{className:"stat-card",children:[Se.jsx("span",{className:"stat-number",children:l.totalBadges}),Se.jsx("span",{className:"stat-label",children:"Total Earned"})]}),Se.jsxs("div",{className:"stat-card",children:[Se.jsx("span",{className:"stat-number",children:l.badgesByRarity?.legendary||0}),Se.jsx("span",{className:"stat-label",children:"Legendary"})]}),Se.jsxs("div",{className:"stat-card",children:[Se.jsx("span",{className:"stat-number",children:l.badgesByRarity?.epic||0}),Se.jsx("span",{className:"stat-label",children:"Epic"})]}),Se.jsxs("div",{className:"stat-card",children:[Se.jsx("span",{className:"stat-number",children:l.badgesByRarity?.rare||0}),Se.jsx("span",{className:"stat-label",children:"Rare"})]}),Se.jsxs("div",{className:"stat-card",children:[Se.jsx("span",{className:"stat-number",children:l.progressBadges?.length||0}),Se.jsx("span",{className:"stat-label",children:"In Progress"})]})]})]}),a?Se.jsxs("div",{className:"achievements-loading",children:[Se.jsx("div",{className:"loading-spinner"}),"Loading achievements..."]}):Se.jsxs("div",{className:"achievement-categories",children:[m.length>0&&Se.jsxs("div",{className:"category-section",children:[Se.jsxs("div",{className:"category-header",children:[Se.jsx("span",{className:"category-icon",children:"\ud83c\udfc6"}),Se.jsx("h2",{className:"category-title",children:"Achievement Series"})]}),m.map(e=>Se.jsxs("div",{className:"achievement-card earned",children:[Se.jsxs("div",{className:"achievement-header",children:[Se.jsx("span",{className:"achievement-icon",children:"\ud83c\udfaf"}),Se.jsxs("div",{className:"achievement-info",children:[Se.jsx("h3",{className:"achievement-name",children:e.name}),Se.jsxs("p",{className:"achievement-description",children:["Multi-tier achievement series with ",e.steps.length," levels"]})]})]}),Se.jsx("div",{className:"achievement-series",children:e.steps.map(e=>Se.jsx("div",{className:"series-step "+(e.earned?"completed":e.current?"current":""),children:e.tier},e.tier))})]},e.name))]}),h.map(e=>{const t=e.badges.filter(e=>e.unlockedAt).length,s=e.badges.length,a=i.has(e.id);return Se.jsxs("div",{className:"category-section",children:[Se.jsxs("div",{className:"category-header",onClick:()=>(e=>{const t=new Set(i);t.has(e)?t.delete(e):t.add(e),r(t)})(e.id),children:[Se.jsx("span",{className:"category-icon",children:e.icon}),Se.jsx("h2",{className:"category-title",children:e.name}),Se.jsxs("span",{className:"category-progress",children:[t,"/",s]}),Se.jsx("span",{className:"category-toggle "+(a?"collapsed":""),children:"\u25bc"})]}),!a&&Se.jsx("div",{className:"achievements-grid",children:e.badges.map(e=>{const t=!!e.unlockedAt,s=(e=>"legendary"===e.rarity?"legendary":"epic"===e.rarity?"epic":"rare"===e.rarity?"rare":"")(e);return Se.jsxs("div",{className:`achievement-card ${t?"earned":""} ${s}`,children:[Se.jsxs("div",{className:"achievement-header",children:[Se.jsx("span",{className:"achievement-icon",children:e.icon}),Se.jsxs("div",{className:"achievement-info",children:[Se.jsx("h3",{className:"achievement-name",children:e.name}),Se.jsx("p",{className:"achievement-description",children:e.description}),Se.jsx("p",{className:"achievement-requirements",children:e.requirements})]})]}),e.tier&&Se.jsxs("div",{className:"achievement-tier",children:["Tier ",e.tier]}),e.progress&&Se.jsxs("div",{className:"achievement-progress",children:[Se.jsx("div",{className:"progress-bar",children:Se.jsx("div",{className:"progress-fill",style:{width:`${e.progress.percentage}%`}})}),Se.jsxs("div",{className:"progress-text",children:[e.progress.current.toLocaleString()," / ",e.progress.required.toLocaleString(),"(",e.progress.percentage,"%)"]})]}),t&&e.unlockedAt&&Se.jsx("div",{className:"achievement-date",children:p(e.unlockedAt)})]},e.id)})})]},e.id)}),0===h.length&&Se.jsxs("div",{className:"no-achievements",children:[Se.jsx("div",{className:"no-achievements-icon",children:"\ud83c\udfaf"}),Se.jsx("div",{className:"no-achievements-text",children:"No Achievements Yet"}),Se.jsx("div",{className:"no-achievements-subtitle",children:"Start participating in the Pixel Journey ecosystem to earn your first badges!"})]})]}),Se.jsx(as,{isOpen:c,onClose:()=>d(!1),title:`${e}'s Achievements`,description:`Check out my achievements in the Pixel Journey ecosystem! I've earned ${l?.totalBadges||0} badges including ${l?.badgesByRarity?.legendary||0} legendary achievements.`,shareUrl:`${window.location.origin}/pxbadges?user=${e}`,defaultShareText:`Check out my achievements in the Pixel Journey ecosystem! I've earned ${l?.totalBadges||0} badges. #PixelJourney #Achievements`,type:"achievement",badges:t,totalBadges:l?.totalBadges||0,legendaryCount:l?.badgesByRarity?.legendary||0,username:e||""})]}):Se.jsx("div",{className:"pxbadges-container",children:Se.jsxs("div",{className:"no-achievements",children:[Se.jsx("div",{className:"no-achievements-icon",children:"\ud83d\udd12"}),Se.jsx("div",{className:"no-achievements-text",children:"Connect Your Wallet"}),Se.jsx("div",{className:"no-achievements-subtitle",children:"Connect your wallet to view your achievements and progress"})]})})},Na=O.createContext(void 0),wa=({children:e})=>{const{account:t}=Ds(),[s,a]=O.useState({}),[n,i]=O.useState([]),[r,l]=O.useState(!1),[o,c]=O.useState(0),d=O.useCallback(()=>Date.now()-o>5e3,[o]),u=O.useCallback(async()=>{if(!t)return a({}),void i([]);if(!d()&&n.length>0)De.info("Skipping balance fetch - too recent","TokenBalanceContext");else{l(!0);try{De.info("Fetching token balances from Light API","TokenBalanceContext",{account:t});const e=await dt.getLightApiBalances(t);if(e&&e.balances){const s={};i(e.balances);for(const t of e.balances){const e=`${t.currency}-${t.contract}`;s[t.currency]=`${t.amount} ${t.currency}`,s[e]=`${t.amount} ${t.currency}`}a(s),c(Date.now()),De.info("Successfully loaded token balances","TokenBalanceContext",{account:t,tokenCount:e.balances.length})}else De.warn("No balances returned from Light API","TokenBalanceContext",{account:t}),a({}),i([])}catch(e){De.error("Failed to load token balances","TokenBalanceContext",e,{account:t}),a({}),i([])}finally{l(!1)}}},[t,d,n.length]),h=O.useCallback((e,t)=>{if(t){const s=n.find(s=>s.currency===e&&s.contract===t);if(s)return`${s.amount} ${s.currency}`}return s[e]||`0.0000 ${e}`},[s,n]);O.useEffect(()=>{u()},[t]),O.useEffect(()=>{if(!t)return;const e=setInterval(()=>{u()},3e4);return()=>clearInterval(e)},[t,u]);const m={balances:s,lightApiBalances:n,isLoading:r,refreshBalances:u,getTokenBalance:h};return Se.jsx(Na.Provider,{value:m,children:e})},ka=()=>{const e=O.useContext(Na);if(void 0===e)throw new Error("useTokenBalance must be used within a TokenBalanceProvider");return e};const _a=new class{constructor(){M(this,"ALCOR_API_BASE","https://alcor.exchange/api/v2"),M(this,"WAX_CONTRACT","eosio.token"),M(this,"WPIXAL_CONTRACT","pixeljourney"),M(this,"WAX_SYMBOL","WAX"),M(this,"WPIXAL_SYMBOL","WPIXAL"),M(this,"WAX_TOKEN_ID","wax-eosio.token"),M(this,"WPIXAL_TOKEN_ID","wpixal-pixeljourney"),M(this,"tokensCache",null),M(this,"tokensCacheExpiry",0),M(this,"CACHE_DURATION",3e5)}async getAllTokens(){try{if(this.tokensCache&&Date.now()<this.tokensCacheExpiry)return this.tokensCache;const e=`${this.ALCOR_API_BASE}/tokens`,t=await fetch(e,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},mode:"cors"});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();return this.tokensCache=s.map(e=>({id:e.id||`${e.symbol.toLowerCase()}-${e.contract}`,symbol:e.symbol,contract:e.contract,precision:e.precision||8,logo:e.logo,usd_price:e.usd_price,system_price:e.system_price})),this.tokensCacheExpiry=Date.now()+this.CACHE_DURATION,this.tokensCache||[]}catch(e){return De.error("Error fetching all tokens:","AlcorService.getAllTokens",e),[{id:this.WAX_TOKEN_ID,symbol:this.WAX_SYMBOL,contract:this.WAX_CONTRACT,precision:8},{id:this.WPIXAL_TOKEN_ID,symbol:this.WPIXAL_SYMBOL,contract:this.WPIXAL_CONTRACT,precision:8}]}}async getPoolInfo(e){try{const t=`${this.ALCOR_API_BASE}/swap/pools/${e}`;De.info(`Fetching pool info from: ${t}`,"AlcorService.getPoolInfo");const s=await fetch(t);if(!s.ok)return De.warn(`Failed to fetch pool ${e} info: ${s.status} ${s.statusText}`),null;const a=await s.json();if(De.info(`Pool ${e} raw data:`,a),!a.tokenA||!a.tokenB)return De.warn(`Pool ${e} missing token information`,a),null;const n={tokenA:{symbol:a.tokenA.symbol,contract:a.tokenA.contract,precision:a.tokenA.precision||8,token_id:`${a.tokenA.symbol.toLowerCase()}-${a.tokenA.contract}`},tokenB:{symbol:a.tokenB.symbol,contract:a.tokenB.contract,precision:a.tokenB.precision||8,token_id:`${a.tokenB.symbol.toLowerCase()}-${a.tokenB.contract}`}};return De.info(`Pool ${e} parsed result:`,JSON.stringify(n)),n}catch(t){return De.error(`Error fetching pool ${e} info:`,"AlcorService.getPoolInfo",t),null}}async getEnhancedSwapQuoteForPair(e,t,s,a,n="EXACT_INPUT",i,r){De.info("Starting enhanced swap quote","AlcorService.getEnhancedSwapQuoteForPair");try{const l=await this.getSwapQuoteForPair(e,t,s,a,n,i,r);if(De.info(`Basic quote route length: ${l.route?.length||0}`,"AlcorService.getEnhancedSwapQuoteForPair"),De.info("Basic quote route data:",JSON.stringify(l.route)),l.route&&l.route.length>0){De.info("Processing route enhancement...","AlcorService.getEnhancedSwapQuoteForPair");const s=await Promise.all(l.route.map(async(s,a)=>{De.info(`Processing hop ${a+1}: pool_id=${s.pool_id}`,"AlcorService.getEnhancedSwapQuoteForPair");const n=await this.getPoolInfo(s.pool_id);if(!n)return De.warn(`Failed to get pool info for pool ${s.pool_id}, using fallback`,"AlcorService.getEnhancedSwapQuoteForPair"),s;let i,r;De.info(`Pool ${s.pool_id} tokens: ${n.tokenA.symbol}@${n.tokenA.contract} <-> ${n.tokenB.symbol}@${n.tokenB.contract}`,"AlcorService.getEnhancedSwapQuoteForPair"),0===a?(i=e,r=n.tokenA.symbol===e.symbol&&n.tokenA.contract===e.contract?n.tokenB:n.tokenA):a===l.route.length-1?(r=t,i=n.tokenA.symbol===t.symbol&&n.tokenA.contract===t.contract?n.tokenB:n.tokenA):(i=n.tokenA,r=n.tokenB);const o={...s,token_in:`${i.symbol}@${i.contract}`,token_out:`${r.symbol}@${r.contract}`};return De.info(`Enhanced hop ${a+1}: ${o.token_in} -> ${o.token_out}`,"AlcorService.getEnhancedSwapQuoteForPair"),o})),a={...l,route:s};return De.info("Enhanced quote completed successfully","AlcorService.getEnhancedSwapQuoteForPair"),De.info("Enhanced route data:",JSON.stringify(a.route)),a}return De.info("No route to enhance, returning basic quote","AlcorService.getEnhancedSwapQuoteForPair"),l}catch(l){return De.error("Error getting enhanced swap quote, falling back to basic:","AlcorService.getEnhancedSwapQuoteForPair",l),this.getSwapQuoteForPair(e,t,s,a,n,i,r)}}async getSwapQuoteForPair(e,t,s,a,n="EXACT_INPUT",i,r){try{const l=`${this.ALCOR_API_BASE}/swapRouter/getRoute?trade_type=${n}&input=${e.token_id}&output=${t.token_id}&amount=${parseFloat(s).toFixed(e.precision)}&slippage=${i.toFixed(1)}&receiver=${a}&maxHops=${r}&v2=true`;De.info(`Making API call with maxHops=${r}`,"AlcorService.getSwapQuoteForPair"),De.info(`API URL: ${l}`,"AlcorService.getSwapQuoteForPair"),De.info("Fetching swap route from:",l),De.info("Slippage tolerance being sent to API:",i.toString());const o=await fetch(l);if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);const c=await o.json();if(De.info("Swap route response:",c),De.info(`Route length: ${c.route?.length||0} hops (maxHops was ${r})`,"AlcorService.getSwapQuoteForPair"),!c.swaps||0===c.swaps.length)throw new Error("No swap route found for this token pair");const d=c.swaps[0];De.info("Memo from API response:",c.memo||d?.memo);const u={input_amount:c.maxSent||d?.maxSent||c.input||d?.input,output_amount:c.output||d?.output||c.minReceived||d?.minReceived,price_impact:c.priceImpact?.toString()||"0",minimum_received:c.minReceived||d?.minReceived,route:c.route?.map((s,a)=>({pool_id:s,token_in:0===a?`${e.symbol}@${e.contract}`:"intermediate",token_out:a===c.route.length-1?`${t.symbol}@${t.contract}`:"intermediate",amount_in:0===a?c.input||d?.input:"0",amount_out:a===c.route.length-1?c.output||d?.output:"0"}))||[],memo:c.memo||d?.memo,input_token:e,output_token:t};return De.info("Final quote created with minimum_received:",u.minimum_received),u}catch(l){throw De.error("Error getting swap quote for pair:","AlcorService.getSwapQuoteForPair",l),new Error(`Failed to get swap quote for ${e.symbol}/${t.symbol}: ${l instanceof Error?l.message:"Unknown error"}`)}}async getExactOutputQuote(e,t,s,a=3){try{const n=`${this.ALCOR_API_BASE}/swapRouter/getRoute?trade_type=EXACT_OUTPUT&input=${this.WAX_TOKEN_ID}&output=${this.WPIXAL_TOKEN_ID}&amount=${parseFloat(e).toFixed(8)}&slippage=${s.toFixed(1)}&receiver=${t}&maxHops=${a}&v2=true`;De.error("Fetching swap route from:",n);const i=await fetch(n);if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);const r=await i.json();if(De.error("Swap route response:",r),!r.swaps||0===r.swaps.length)throw new Error("No swap route found");const l=r.swaps[0];return{input_amount:r.maxSent||l.maxSent,output_amount:r.output||l.output,price_impact:r.priceImpact?.toString()||"0",minimum_received:r.minReceived||l.minReceived,route:r.route?.map((e,t)=>({pool_id:e,token_in:0===t?`${this.WAX_SYMBOL}@${this.WAX_CONTRACT}`:"intermediate",token_out:t===r.route.length-1?`${this.WPIXAL_SYMBOL}@${this.WPIXAL_CONTRACT}`:"intermediate",amount_in:0===t?r.input||l.input:"0",amount_out:t===r.route.length-1?r.output||l.output:"0"}))||[],memo:r.memo||l.memo,input_token:{symbol:this.WAX_SYMBOL,contract:this.WAX_CONTRACT,precision:8,token_id:this.WAX_TOKEN_ID},output_token:{symbol:this.WPIXAL_SYMBOL,contract:this.WPIXAL_CONTRACT,precision:8,token_id:this.WPIXAL_TOKEN_ID}}}catch(n){throw De.error("Error getting exact output quote:","alcorService.getExactOutputQuote",n),new Error(`Failed to get swap quote: ${n instanceof Error?n.message:"Unknown error"}`)}}async getSwapQuote(e){const t=await this.getExchangeRate(),s=(parseFloat(e)/t).toFixed(8);return this.getExactOutputQuote(s,"dummy.account",.5)}async executeSwap(e,t,s){try{const a=await this.getExactOutputQuote(e,t,s),n={expiration:new Date(Date.now()+18e5).toISOString(),ref_block_num:0,ref_block_prefix:0,max_net_usage_words:0,max_cpu_usage_ms:0,delay_sec:0,context_free_actions:[],actions:[{account:this.WAX_CONTRACT,name:"transfer",authorization:[{actor:t,permission:"active"}],data:{from:t,to:"swap.alcor",quantity:`${parseFloat(a.input_amount).toFixed(8)} ${this.WAX_SYMBOL}`,memo:a.memo}}],transaction_extensions:[]};return De.info("Swap transaction prepared","AlcorService.executeSwap",{wpixalAmount:e,maxWaxInput:a.input_amount,memo:a.memo,route:a.route}),n}catch(a){throw De.error("Error executing swap:","AlcorService.executeSwap",a instanceof Error?a:new Error(String(a))),a}}async executeSwapForPair(e,t,s,a,n="EXACT_INPUT",i,r=3){try{const l=await this.getSwapQuoteForPair(e,t,s,a,n,i,r),o={expiration:new Date(Date.now()+18e5).toISOString(),ref_block_num:0,ref_block_prefix:0,max_net_usage_words:0,max_cpu_usage_ms:0,delay_sec:0,context_free_actions:[],actions:[{account:e.contract,name:"transfer",authorization:[{actor:a,permission:"active"}],data:{from:a,to:"swap.alcor",quantity:`${parseFloat(l.input_amount).toFixed(e.precision)} ${e.symbol}`,memo:l.memo}}],transaction_extensions:[]};return De.info("Generic swap transaction prepared","AlcorService.executeSwapForPair",{inputToken:e.symbol,outputToken:t.symbol,amount:s,tradeType:n,inputAmount:l.input_amount,outputAmount:l.output_amount,memo:l.memo,route:l.route}),o}catch(l){throw De.error("Error executing swap for pair:","AlcorService.executeSwapForPair",l instanceof Error?l:new Error(String(l))),l}}async calculateOutputAmount(e,t,s,a,n,i){return this.getEnhancedSwapQuoteForPair(e,t,s,a,"EXACT_INPUT",n,i)}async calculateInputAmount(e,t,s,a,n,i){return this.getEnhancedSwapQuoteForPair(e,t,s,a,"EXACT_OUTPUT",n,i)}formatTokenId(e,t){return`${e.toLowerCase()}-${t.toLowerCase()}`}parseSwapMemo(e){try{if(!e.startsWith("swap,"))return null;const t=e.split(","),s=[];let a="0";for(const e of t)if(e.startsWith("pools:")){const t=e.substring(6).split(":");s.push(...t.map(e=>parseInt(e)))}else e.startsWith("minOut:")&&(a=e.substring(7));return{pools:s,minOut:a}}catch(t){return De.error("Error parsing swap memo:","AlcorService.parseSwapMemo",t),null}}async getExchangeRate(){try{const e=await this.getExactOutputQuote("1.00000000","dummy.account",0);return parseFloat(e.input_amount)}catch(e){return De.error("Error getting exchange rate:","AlcorService.getExchangeRate",e instanceof Error?e:new Error(String(e))),292e-6}}async checkLiquidity(e){try{const t=await this.getExactOutputQuote(e,"dummy.account",.5);return parseFloat(t.price_impact)<5}catch(t){return De.error("Error checking liquidity:","AlcorService.checkLiquidity",t instanceof Error?t:new Error(String(t))),!1}}async estimateWaxNeeded(e){try{return(await this.getExactOutputQuote(e,"dummy.account",0)).input_amount}catch(t){throw De.error("Error estimating WAX needed:","AlcorService.estimateWaxNeeded",t instanceof Error?t:new Error(String(t))),t}}},Sa=(e,t)=>`https://raw.githubusercontent.com/alcorexchange/alcor-ui/refs/heads/master/assets/tokens/wax/${`${e.toLowerCase()}_${t.toLowerCase()}.png`}`,Ca=e=>({WAX:"\ud83e\ude99",WPIXAL:"\ud83d\udc7d",PXJ:"\u267b\ufe0f",KING:"\ud83d\udc51",WAXUSDC:"\ud83d\udcb5",WAXWBTC:"\u20bf",WUF:"\ud83d\udc36",LSWAX:"\ud83d\udc8e",BRWL:"\u2694\ufe0f",TLM:"\u26cf\ufe0f",WOMBAT:"\ud83d\udc28",TACO:"\ud83c\udf2e",SHING:"\u2728",YEET:"\ud83d\ude80",DMT:"\ud83d\udda5\ufe0f",FGL:"\ud83c\udfae",SOREN:"\u2708\ufe0f"}[e.toUpperCase()]||"\ud83e\ude99"),Aa=({iconUrl:e,fallbackEmoji:t="\ud83e\ude99",symbol:s,className:a=""})=>{const[n,i]=O.useState(!1);return!e||n?Se.jsx("span",{className:a,children:t}):Se.jsx("img",{src:e,alt:s,className:a,onError:()=>{i(!0)},style:{width:"2rem",height:"2rem",objectFit:"contain"}})},Pa={PXJ:{contract:"pixeljourney",decimals:8,priority:1},WPIXAL:{contract:"pixeljourney",decimals:8,priority:2},WAX:{contract:"eosio.token",decimals:8,priority:3},KING:{contract:"alpha.waxfun",decimals:8,priority:4},WAXUSDC:{contract:"eth.token",decimals:8,priority:5},WAXWBTC:{contract:"eth.token",decimals:8,priority:6}},Ta=new Set(["msourceroyal","msourcetoken","swap.taco","beta.waxfun"]),Ea=(e,t)=>!!Ta.has(t)||"WAX"===e&&"eosio.token"!==t,Fa=["WAX","WPIXAL"],Ia=({selectedToken:e,onTokenSelect:t,availableTokens:s=Fa,className:a="",filterByAvailable:n=!1})=>{const{account:i}=Ds(),{lightApiBalances:r}=ka(),[l,o]=O.useState(!1),[c,d]=O.useState([]),[u,h]=O.useState([]),[m,p]=O.useState(!1),f=O.useRef(null),x=O.useCallback(async()=>{try{const e=await _a.getAllTokens();return h(e),e}catch(e){De.error("Failed to load Alcor tokens","TokenDropdown.loadAlcorTokens",e);const t=[{symbol:"WAX",contract:"eosio.token",precision:8,logo:null},{symbol:"WPIXAL",contract:"pixeljourney",precision:8,logo:null}];return h(t),t}},[]),g=O.useMemo(()=>e=>{const t=Pa[e];if(t)return{contract:t.contract,decimals:t.decimals,iconUrl:Sa(e,t.contract),fallbackEmoji:Ca(e),priority:t.priority};const s=u.find(t=>t.symbol===e);return s?{contract:s.contract,decimals:s.precision,iconUrl:Sa(e,s.contract),fallbackEmoji:Ca(e),priority:999}:{contract:"eosio.token",decimals:8,iconUrl:Sa(e,"eosio.token"),fallbackEmoji:Ca(e),priority:1e3}},[u]),v=O.useCallback(async()=>{if(0===u.length&&await x(),!i){const e=(n?s:u.map(e=>e.symbol)).map(e=>{const t=g(e);return{symbol:e,contract:t.contract,amount:"0.0000",decimals:t.decimals,iconUrl:t.iconUrl,fallbackEmoji:t.fallbackEmoji,priority:t.priority||999}});return void d(e)}p(!0);try{const e=[],t=n?s:u.map(e=>e.symbol),a=new Set;for(const s of t){const t=g(s);if(!t)continue;const n=`${s}-${t.contract}`;if(a.has(n))continue;a.add(n);const i=r.find(e=>e.currency===s&&e.contract===t.contract);e.push({symbol:s,contract:t.contract,amount:i?i.amount:"0.0000",decimals:i?parseInt(i.decimals):t.decimals,iconUrl:t.iconUrl,fallbackEmoji:t.fallbackEmoji,priority:t.priority||999})}if(e.sort((e,t)=>(e.priority||999)-(t.priority||999)),!n){for(const t of r){const s=`${t.currency}-${t.contract}`;if(a.has(s))continue;if(Ea(t.currency,t.contract))continue;const n=g(t.currency);n&&(a.add(s),e.push({symbol:t.currency,contract:t.contract,amount:t.amount,decimals:parseInt(t.decimals),iconUrl:n.iconUrl,fallbackEmoji:n.fallbackEmoji,priority:n.priority||999}))}e.sort((e,t)=>(e.priority||999)-(t.priority||999))}d(e)}catch(e){De.error("Failed to load token balances","TokenDropdown.loadTokenBalances",e);const t=(n?s:u.map(e=>e.symbol)).map(e=>{const t=g(e);return{symbol:e,contract:t.contract,amount:"0.0000",decimals:t.decimals,iconUrl:t.iconUrl,fallbackEmoji:t.fallbackEmoji,priority:t.priority||999}});t.sort((e,t)=>(e.priority||999)-(t.priority||999)),d(t)}finally{p(!1)}},[i,s,u,n,r,x]);O.useEffect(()=>{x()},[x]),O.useEffect(()=>{v()},[v]),O.useEffect(()=>{const e=e=>{f.current&&!f.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const j=c.find(t=>t.symbol===e),y=g(e);return Se.jsxs("div",{className:`token-dropdown ${a}`,ref:f,children:[Se.jsxs("button",{className:"token-button",onClick:()=>o(!l),type:"button",children:[Se.jsx("span",{className:"token-icon",children:Se.jsx(Aa,{iconUrl:j?.iconUrl,fallbackEmoji:j?.fallbackEmoji||y?.fallbackEmoji,symbol:e,className:"token-logo"})}),Se.jsx("span",{className:"token-symbol",children:e}),Se.jsx("span",{className:"dropdown-arrow "+(l?"open":""),children:"\u25bc"})]}),l&&Se.jsx("div",{className:"token-dropdown-menu",children:m?Se.jsx("div",{className:"token-dropdown-loading",children:Se.jsx("span",{children:"Loading tokens..."})}):Se.jsxs(Se.Fragment,{children:[c.map((s,a)=>Se.jsxs("button",{className:"token-option "+(s.symbol===e?"selected":""),onClick:()=>(e=>{t(e.symbol),o(!1)})(s),type:"button",children:[Se.jsxs("div",{className:"token-option-left",children:[Se.jsx("span",{className:"token-option-icon",children:Se.jsx(Aa,{iconUrl:s.iconUrl,fallbackEmoji:s.fallbackEmoji,symbol:s.symbol,className:"token-logo"})}),Se.jsxs("div",{className:"token-option-info",children:[Se.jsx("span",{className:"token-option-symbol",children:s.symbol}),Se.jsx("span",{className:"token-option-contract",children:s.contract})]})]}),Se.jsx("div",{className:"token-option-balance",children:parseFloat(s.amount).toFixed(4)})]},`${s.contract}-${s.symbol}-${a}`)),0===c.length&&Se.jsx("div",{className:"token-dropdown-empty",children:Se.jsx("span",{children:"No tokens available"})})]})})]})},$a=({isModal:e=!1,onClose:t,initialSellAmount:s=0,initialBuyAmount:a=1})=>{const{showSuccess:n,showError:i}=xt(),{account:r,session:l}=Ds(),{getTokenBalance:o}=ka(),[c,d]=O.useState(s.toString()),[u,h]=O.useState(a.toString()),[m,p]=O.useState("WAX"),[f,x]=O.useState("WPIXAL"),[g,v]=O.useState(!1),[j,y]=O.useState(null),[b,N]=O.useState(1),[w,k]=O.useState(3),[_,S]=O.useState(!1),[C,A]=O.useState(!1),[P,T]=O.useState([]),[E,F]=O.useState(!1),[I,$]=O.useState("sell"),L=O.useCallback(async()=>{try{const e=await _a.getAllTokens();return T(e),e}catch(e){return De.error("Failed to load Alcor tokens","SwapInterface.loadAlcorTokens",e),[]}},[]),M={PXJ:{contract:"pixeljourney",precision:8,priority:1,icon:Sa("PXJ","pixeljourney")},WPIXAL:{contract:"pixeljourney",precision:8,priority:2,icon:Sa("WPIXAL","pixeljourney")},WAX:{contract:"eosio.token",precision:8,priority:3,icon:Sa("WAX","eosio.token")},KING:{contract:"alpha.waxfun",precision:8,priority:4,icon:Sa("KING","alpha.waxfun")},WAXUSDC:{contract:"eth.token",precision:8,priority:5,icon:Sa("WAXUSDC","eth.token")},WAXWBTC:{contract:"eth.token",precision:8,priority:6,icon:Sa("WAXWBTC","eth.token")},WUF:{contract:"wuffi",precision:4,priority:7,icon:Sa("WUF","wuffi")},LSWAX:{contract:"token.fusion",precision:8,priority:8,icon:Sa("LSWAX","token.fusion")},BRWL:{contract:"brawlertoken",precision:4,priority:9,icon:Sa("BRWL","brawlertoken")},TLM:{contract:"alien.worlds",precision:4,priority:10,icon:Sa("TLM","alien.worlds")},WOMBAT:{contract:"wombattokens",precision:4,priority:11,icon:Sa("WOMBAT","wombattokens")},TACO:{contract:"t.taco",precision:8,priority:12,icon:Sa("TACO","t.taco")},SHING:{contract:"t.taco",precision:8,priority:13,icon:Sa("SHING","t.taco")},YEET:{contract:"token.yeet",precision:4,priority:14,icon:Sa("YEET","token.yeet")},DMT:{contract:"defiminingtk",precision:4,priority:15,icon:Sa("DMT","defiminingtk")},FGL:{contract:"fgltokenmgmt",precision:4,priority:16,icon:Sa("FGL","fgltokenmgmt")},SOREN:{contract:"farfromhomes",precision:4,priority:17,icon:Sa("SOREN","farfromhomes")}},R=O.useCallback(e=>{if(M[e]){const t=M[e];return{symbol:e,contract:t.contract,precision:t.precision,token_id:`${e.toLowerCase()}-${t.contract.toLowerCase()}`,decimals:t.precision,icon:t.icon,logo:t.icon}}const t=P.find(t=>t.symbol===e);return t?{symbol:t.symbol,contract:t.contract,precision:t.decimals,token_id:`${t.symbol.toLowerCase()}-${t.contract.toLowerCase()}`,decimals:t.decimals,icon:t.logo||"/icons/default-token.png",logo:t.logo||"/icons/default-token.png"}:null},[P]);O.useEffect(()=>{L()},[]);const W=O.useCallback((e,t)=>{const s=o(e,t||M[e]?.contract).split(" ")[0];return parseFloat(s)||0},[o]),D=O.useCallback(async(e,t,s,a)=>{if(!e||parseFloat(e)<=0||!r)return null;try{F(!0);const n=R(t),i=R(s);if(!n||!i)return De.error("Token info not found","SwapInterface.calculateSwapAmount"),null;let l;return console.log(`\ud83d\udd0d SwapInterface: Calculating with maxHops=${w}, slippage=${b}`),console.log(`\ud83d\udd0d SwapInterface: ${t} \u2192 ${s}, amount=${e}`),l="EXACT_INPUT"===a?await _a.calculateOutputAmount(n,i,e,r||"market.pxj",b,w):await _a.calculateInputAmount(n,i,e,r||"market.pxj",b,w),y(l),l}catch(n){return De.error("Failed to calculate swap amount","SwapInterface.calculateSwapAmount",n),null}finally{F(!1)}},[r,b,w,R]),z=O.useCallback(async e=>{if(d(e),$("sell"),!e||parseFloat(e)<=0)return h(""),void y(null);const t=await D(e,m,f,"EXACT_INPUT");t&&h(t.output_amount)},[m,f,D]),B=O.useCallback(async e=>{if(h(e),$("buy"),!e||parseFloat(e)<=0)return d(""),void y(null);const t=await D(e,m,f,"EXACT_OUTPUT");t&&d(t.input_amount)},[m,f,D]);O.useEffect(()=>{"sell"===I&&c?z(c):"buy"===I&&u&&B(u)},[m,f,I,c,u,z,B]);const U=O.useCallback(async()=>{"sell"===I&&c?await z(c):"buy"===I&&u&&await B(u)},[I,c,u,z,B]),X=Se.jsxs("div",{className:"swap-interface "+(e?"modal-content":""),children:[e&&Se.jsxs("div",{className:"swap-header",children:[Se.jsx("h2",{children:"Swap Tokens"}),Se.jsx("button",{className:"close-button",onClick:t,children:"\xd7"})]}),Se.jsxs("div",{className:"swap-container",children:[Se.jsxs("div",{className:"settings-container",children:[Se.jsx("button",{className:"settings-toggle",onClick:()=>A(!C),children:"\u2699\ufe0f"}),Se.jsx("button",{className:"refresh-quote-button",onClick:U,disabled:E||!c&&!u,title:"Refresh price quote",children:E?"\u27f3":"\ud83d\udd04"})]}),C&&Se.jsx("div",{className:"slippage-settings",children:Se.jsxs("div",{className:"settings-row",children:[Se.jsxs("div",{className:"setting-group",children:[Se.jsx("label",{children:"Slippage Tolerance"}),Se.jsxs("div",{className:"slippage-options",children:[Se.jsx("button",{className:1===b?"active":"",onClick:()=>N(1),children:"1%"}),Se.jsx("button",{className:5===b?"active":"",onClick:()=>N(5),children:"5%"}),Se.jsx("button",{className:25===b?"active":"",onClick:()=>N(25),children:"25%"}),Se.jsx("input",{type:"number",className:"custom-slippage",value:b,onChange:e=>N(Number(e.target.value)),placeholder:"Custom",min:"0",max:"100",step:"0.1"}),Se.jsx("span",{children:"%"})]})]}),Se.jsxs("div",{className:"setting-group",children:[Se.jsx("label",{children:"Max Hops"}),Se.jsxs("div",{className:"hops-options",children:[Se.jsx("button",{className:1===w?"active":"",onClick:()=>k(1),children:"1"}),Se.jsx("button",{className:2===w?"active":"",onClick:()=>k(2),children:"2"}),Se.jsx("button",{className:3===w?"active":"",onClick:()=>k(3),children:"3"}),Se.jsx("button",{className:4===w?"active":"",onClick:()=>k(4),children:"4"}),Se.jsx("input",{type:"number",className:"custom-hops",value:w,onChange:e=>k(Number(e.target.value)),placeholder:"Custom",min:"1",max:"10",step:"1"})]})]})]})}),Se.jsxs("div",{className:"swap-section sell-section",children:[Se.jsxs("div",{className:"swap-section-header",children:[Se.jsx("span",{className:"section-label",children:"Sell"}),Se.jsxs("span",{className:"balance",onClick:()=>{const e=W(m);z(e.toString())},style:{cursor:"pointer"},children:["Balance: ",W(m).toFixed(4)," ",m]})]}),Se.jsxs("div",{className:"input-container",children:[Se.jsx("input",{type:"number",value:c,onChange:e=>z(e.target.value),placeholder:"0",className:"amount-input"}),Se.jsx("div",{className:"token-selector",children:Se.jsx(Ia,{selectedToken:m,onTokenSelect:p,filterByAvailable:!1,className:"sell-token-dropdown"})})]}),Se.jsxs("div",{className:"percentage-slider",children:[Se.jsx("input",{type:"range",min:"0",max:"100",value:c?Math.round(parseFloat(c)/W(m)*100):0,onChange:e=>(e=>{const t=(W(m)*e/100).toFixed(4);z(t)})(parseInt(e.target.value)),className:"slider"}),Se.jsxs("div",{className:"slider-labels",children:[Se.jsx("span",{children:"0%"}),Se.jsx("span",{children:"25%"}),Se.jsx("span",{children:"50%"}),Se.jsx("span",{children:"75%"}),Se.jsx("span",{children:"100%"})]})]})]}),Se.jsx("div",{className:"swap-arrow-container",children:Se.jsx("button",{className:"swap-arrow",onClick:()=>{const e=m,t=c;p(f),x(e),d(u),h(t)},children:"\u2193"})}),Se.jsxs("div",{className:"swap-section buy-section",children:[Se.jsxs("div",{className:"swap-section-header",children:[Se.jsx("span",{className:"section-label",children:"Buy"}),Se.jsxs("span",{className:"balance",children:["Balance: ",W(f).toFixed(4)," ",f]})]}),Se.jsxs("div",{className:"input-container",children:[Se.jsx("input",{type:"number",value:u,onChange:e=>B(e.target.value),placeholder:"0",className:"amount-input",title:"Enter desired output amount"}),Se.jsx("div",{className:"token-selector",children:Se.jsx(Ia,{selectedToken:f,onTokenSelect:x,filterByAvailable:!1,className:"buy-token-dropdown"})})]})]}),j&&Se.jsxs("div",{className:"quote-info",children:[Se.jsxs("div",{className:"quote-row",children:[Se.jsx("span",{className:"quote-label",children:"Rate"}),Se.jsx("span",{className:"quote-value",children:j.output_amount&&j.input_amount?`${(parseFloat(j.output_amount)/parseFloat(j.input_amount)).toFixed(8)} ${f} per ${m}`:`1 ${m} = ? ${f}`})]}),Se.jsxs("div",{className:"quote-row",children:[Se.jsx("span",{className:"quote-label",children:"Expected Output"}),Se.jsxs("span",{className:"quote-value",children:[j.output_amount||u," ",f]})]}),Se.jsxs("div",{className:"quote-row",children:[Se.jsx("span",{className:"quote-label",children:"Price Impact"}),Se.jsx("span",{className:"quote-value",children:j.price_impact?`${j.price_impact}%`:"< 0.01%"})]}),Se.jsxs("div",{className:"quote-row",children:[Se.jsx("span",{className:"quote-label",children:"Minimum Received after slippage"}),Se.jsxs("span",{className:"quote-value",children:[j.minimum_received||"N/A"," ",f," (",b,"%)"]})]}),j?.route&&j.route.length>1&&Se.jsxs("div",{className:"quote-row multiroute-toggle",children:[Se.jsxs("span",{className:"quote-label clickable",onClick:()=>S(!_),children:["Multiroute Info ",_?"\u25bc":"\u25b6"]}),Se.jsxs("span",{className:"quote-value",children:[j.route.length," pools"]})]}),_&&j?.route&&Se.jsx("div",{className:"multiroute-details",children:j.route.map((e,t)=>{const s=e.token_in?.split("@")||["Unknown",""],a=e.token_out?.split("@")||["Unknown",""],n=s[0]||"Unknown",i=s[1]||"",r=a[0]||"Unknown",l=a[1]||"";return Se.jsx("div",{className:"route-hop",children:Se.jsxs("div",{className:"hop-info",children:[Se.jsx("span",{className:"hop-number",children:t+1}),Se.jsxs("div",{className:"hop-tokens",children:[Se.jsx(Aa,{iconUrl:Sa(n,i),fallbackEmoji:Ca(n),symbol:n,className:"token-icon-small"}),Se.jsx("span",{children:n}),Se.jsx("span",{className:"arrow",children:"\u2192"}),Se.jsx(Aa,{iconUrl:Sa(r,l),fallbackEmoji:Ca(r),symbol:r,className:"token-icon-small"}),Se.jsx("span",{children:r})]}),Se.jsxs("div",{className:"hop-pool",children:["Pool: ",e.pool_id||"N/A"]})]})},t)})})]}),Se.jsx("button",{className:"swap-button "+(g||!r||!j||parseFloat(c)<=0?"disabled":""),onClick:async()=>{if(r&&l)if(j)try{v(!0);const s=R(m),a=R(f);if(!s||!a)throw new Error(`Token configuration not found for ${s?f:m}`);const i=await _a.executeSwapForPair(s,a,c,r,"EXACT_INPUT",b,w),o=await l.transact({actions:i.actions});n(`Successfully swapped ${c} ${m} for ${u} ${f}`),De.info("Swap transaction completed","SwapInterface.executeSwap",{sellAmount:c,sellToken:m,buyAmount:u,buyToken:f,transactionId:o?.transaction?.id||o?.transactionId||o?.id||"unknown"}),d("0"),h("0"),y(null),e&&t&&t()}catch(s){De.error("Error executing swap","SwapInterface.executeSwap",s),i("Failed to execute swap transaction")}finally{v(!1)}else i("No quote available");else i("Please connect your wallet first")},disabled:g||!r||!j||parseFloat(c)<=0,children:g?Se.jsxs("span",{className:"loading-text",children:[Se.jsx("span",{className:"spinner"}),"Processing..."]}):r?j?parseFloat(c)<=0?"Enter Valid Amount":`Swap ${m} To ${f}`:"Enter Amount":"Connect Wallet"})]})]});return e?Se.jsx("div",{className:"swap-modal-overlay",onClick:t,children:Se.jsx("div",{onClick:e=>e.stopPropagation(),children:X})}):X},La=()=>{const{account:e,isConnected:t,session:s,login:a}=Ie(),{showError:n,showSuccess:i}=xt(),r=B(),[l,o]=O.useState("overview"),[c,d]=O.useState([]),[u,h]=O.useState({}),[m,p]=O.useState(null),[f,x]=O.useState(null),[g,v]=O.useState(null),[j,y]=O.useState([]),[b,N]=O.useState("0.0000 WAX"),[w,k]=O.useState(new Set),[_,S]=O.useState(!1),[C,A]=O.useState(!1),[P,T]=O.useState(null),[E,F]=O.useState([]),[$,L]=O.useState(null),[M,R]=O.useState("all"),[W,D]=O.useState("all"),[z,U]=O.useState({start:"",end:""}),[X,q]=O.useState(""),[H,J]=O.useState(1),[V]=O.useState(10),[G,K]=O.useState("date"),[Q,Z]=O.useState("desc"),[ee,te]=O.useState(!1),[se,ae]=O.useState(!1),[ne,ie]=O.useState(null),[re,le]=O.useState(null),[oe,ce]=O.useState({isOpen:!1,resourceType:"cpu",action:"stake"}),[de,ue]=O.useState({isOpen:!1,action:"buy"}),[he,me]=O.useState({isOpen:!1,token:null}),[pe,fe]=O.useState(e||""),[xe,ge]=O.useState(100),[ve,je]=O.useState(0),[ye,be]=O.useState(!1),[,Ne]=(()=>{const{account:e,session:t}=Ie(),[s,a]=O.useState(null),[n,i]=O.useState(!1);return[s,O.useCallback(async(s=null)=>{if(!t&&!s)return void De.warn("No wallet session or account name provided");const n=s||e;if(n){i(!0);try{const{apiService:e}=await Y(async()=>{const{apiService:e}=await Promise.resolve().then(()=>ut);return{apiService:e}},void 0),t=await e.getWaxAccountInfo(n);if(!t)throw new Error("Failed to fetch account resources: No data returned");const s={account_name:n,cpu_limit:{used:t.cpu_limit?.used||0,available:t.cpu_limit?.available||0,max:t.cpu_limit?.max||0},net_limit:{used:t.net_limit?.used||0,available:t.net_limit?.available||0,max:t.net_limit?.max||0},ram_usage:t.ram_usage||0,ram_quota:t.ram_quota||0,total_resources:t.total_resources||{},self_delegated_bandwidth:t.self_delegated_bandwidth||{},refund_request:t.refund_request||null,voter_info:t.voter_info||null};a(s),De.info("Account resources fetched:",s)}catch(P){De.error("Error fetching account resources:",P),a(null)}finally{i(!1)}}else De.warn("No target account found")},[t,e]),n]})(),[we,ke]=(()=>{const[e,t]=O.useState(null),[s,a]=O.useState(!1);return[e,O.useCallback(async()=>{a(!0);try{const{apiService:e}=await Y(async()=>{const{apiService:e}=await Promise.resolve().then(()=>ut);return{apiService:e}},void 0),s=await e.getPowerupState();if(s.rows&&s.rows.length>0){const e=s.rows[0],a={version:e.version||0,net:{version:e.net?.version||0,weight:e.net?.weight||"0",weight_ratio:e.net?.weight_ratio||"0",assumed_stake_weight:e.net?.assumed_stake_weight||"0",initial_weight_ratio:e.net?.initial_weight_ratio||"0",target_weight_ratio:e.net?.target_weight_ratio||"0",initial_timestamp:e.net?.initial_timestamp||"",target_timestamp:e.net?.target_timestamp||"",exponent:e.net?.exponent||2,decay_secs:e.net?.decay_secs||86400,min_price:e.net?.min_price||"0",max_price:e.net?.max_price||"0",utilization:e.net?.utilization||"0",adjusted_utilization:e.net?.adjusted_utilization||"0",utilization_timestamp:e.net?.utilization_timestamp||""},cpu:{version:e.cpu?.version||0,weight:e.cpu?.weight||"0",weight_ratio:e.cpu?.weight_ratio||"0",assumed_stake_weight:e.cpu?.assumed_stake_weight||"0",initial_weight_ratio:e.cpu?.initial_weight_ratio||"0",target_weight_ratio:e.cpu?.target_weight_ratio||"0",initial_timestamp:e.cpu?.initial_timestamp||"",target_timestamp:e.cpu?.target_timestamp||"",exponent:e.cpu?.exponent||2,decay_secs:e.cpu?.decay_secs||86400,min_price:e.cpu?.min_price||"0",max_price:e.cpu?.max_price||"0",utilization:e.cpu?.utilization||"0",adjusted_utilization:e.cpu?.adjusted_utilization||"0",utilization_timestamp:e.cpu?.utilization_timestamp||""},powerup_days:e.powerup_days||1,min_powerup_fee:e.min_powerup_fee||"0.0001 WAX"};t(a)}else console.warn("No powerup state data found"),t(null)}catch(P){console.error("Error fetching powerup state:",P),t(null)}finally{a(!1)}},[]),s]})(),[_e,Ce]=(()=>{const[e,t]=O.useState(null),[s,a]=O.useState(!1);return[e,O.useCallback(async()=>{a(!0);try{const{apiService:e}=await Y(async()=>{const{apiService:e}=await Promise.resolve().then(()=>ut);return{apiService:e}},void 0),s=await e.getChainInfo(),a={server_version:s.server_version||"",chain_id:s.chain_id||"",head_block_num:s.head_block_num||0,last_irreversible_block_num:s.last_irreversible_block_num||0,last_irreversible_block_id:s.last_irreversible_block_id||"",head_block_id:s.head_block_id||"",head_block_time:s.head_block_time||"",head_block_producer:s.head_block_producer||"",virtual_block_cpu_limit:s.virtual_block_cpu_limit||0,virtual_block_net_limit:s.virtual_block_net_limit||0,block_cpu_limit:s.block_cpu_limit||0,block_net_limit:s.block_net_limit||0,server_version_string:s.server_version_string||"",fork_db_head_block_num:s.fork_db_head_block_num||0,fork_db_head_block_id:s.fork_db_head_block_id||""};t(a)}catch(P){console.error("Error fetching chain info:",P),t(null)}finally{a(!1)}},[]),s]})(),Ae=O.useCallback(async()=>{if(De.debug("loadTransactions called with account","UserProfile",{account:e}),ae(!0),ie(null),!e){De.debug("No account connected, using test account","UserProfile");const e="pixeljourney";try{De.debug("Fetching transactions for test account","UserProfile",{testAccount:e});const t=await dt.getUserTransactions(e,20);if(De.debug("Test transactions fetched","UserProfile",{count:t?.length||0,sample:t?.slice(0,2)}),t&&0!==t.length){const e=t.map(e=>({...e,type:e.type,status:e.status||"completed"}));d(e)}else De.warn("No test transactions returned","UserProfile"),d([])}catch(t){De.error("Error loading test transactions","UserProfile",t,{name:t instanceof Error?t.name:"Unknown",message:t instanceof Error?t.message:String(t),stack:t instanceof Error?t.stack:void 0});const e=t instanceof Error?t.message:"Unable to load transaction history. Please try again later.";ie(e),n("Transaction Error",e)}finally{ae(!1)}return}try{De.debug("Loading transactions for connected account","UserProfile",{account:e,apiServiceAvailable:!!dt,getUserTransactionsType:typeof dt.getUserTransactions});const t=await dt.getUserTransactions(e,20);if(De.debug("Fetched transactions","UserProfile",{count:t?.length||0,sample:t?.slice(0,2)}),t&&0!==t.length){const e=t.map(e=>({...e,type:e.type,status:e.status||"completed"}));d(e)}else De.warn("No transactions returned from API","UserProfile"),d([])}catch(t){De.error("Error loading transactions","UserProfile",t,{name:t instanceof Error?t.name:"Unknown",message:t instanceof Error?t.message:String(t),stack:t instanceof Error?t.stack:void 0});const e=t instanceof Error?t.message:"Unable to load transaction history. Please try again later.";ie(e),n("Transaction Error",e)}finally{ae(!1)}},[e,n]),Pe=O.useCallback(async()=>{if(e)try{const t=await dt.getUserStats(e);p(t),t.favoriteCollections.length>0&&Ve(t.favoriteCollections)}catch(t){throw De.error("Error loading user stats","UserProfile",t),t}},[e]),Te=O.useCallback(async()=>{if(e)try{const t=await dt.getWaxAccountInfo(e);t&&(x(t),t.cpu_limit&&t.net_limit&&t.ram_quota&&v({cpu:{used:t.cpu_limit.used,available:t.cpu_limit.available,max:t.cpu_limit.max},net:{used:t.net_limit.used,available:t.net_limit.available,max:t.net_limit.max},ram:{used:t.ram_usage,available:t.ram_quota-t.ram_usage,max:t.ram_quota}}))}catch(t){De.error("Failed to fetch account data","UserProfile",t),n("Account Data Error","Unable to fetch account information. Some features may not work properly.")}},[e,n]),Ee=O.useCallback(async()=>{if(e)try{const t=await dt.getUserTransactions(e,1);t&&t.length>0&&L(t[0].block_time)}catch(t){De.error("Failed to fetch last transaction date","UserProfile",t),L(null)}},[e]),Fe=O.useMemo(()=>["swap.taco","alpha.waxfun","beta.waxfun"],[]),$e=O.useMemo(()=>[{symbol:"WAX",contract:"eosio.token"},{symbol:"PXJ",contract:"pixeljourney"},{symbol:"WPIXAL",contract:"pixeljourney"},{symbol:"WUF",contract:"wuffi"},{symbol:"TLM",contract:"alien.worlds"}],[]),Le=O.useCallback(async()=>{if(e)try{const s=[],a=$e.filter(e=>!Fe.includes(e.contract));for(let n=0;n<a.length;n++){const i=a[n];try{n>0&&await Ue(500);const a=await dt.getWaxCurrencyBalance(e,i.contract,i.symbol);if(a&&a.length>0){let n="N/A";const r=parseFloat(a[0].balance.split(" ")[0]);try{if("WAX"===i.symbol&&"eosio.token"===i.contract){const e=await Ye.getWaxPriceUSD();n=Re(r*e,2)}else if("WPIXAL"===i.symbol&&"pixeljourney"===i.contract){const e=await Ye.getWpixalPriceUSD();n=Re(r*e,4)}else if("PXJ"===i.symbol&&"pixeljourney"===i.contract){const e=await Ye.getPxjPriceUSD();n=Re(r*e,6)}else n="WUF"===i.symbol&&"wuffi"===i.contract?"0.00":"N/A"}catch(t){De.warn(`Failed to fetch price for ${i.symbol} in fallback`,"UserProfile",{error:t}),n="0.00"}const l={...a[0],value:n};if("WAX"===i.symbol&&"eosio.token"===i.contract)try{const t=await mt.getWaxBalance(e);N(t)}catch(t){De.warn("Failed to get WAX balance from balance service, using fallback","UserProfile",{error:t}),N(l.balance)}s.push(l)}}catch(t){De.error(`Failed to fetch ${i.symbol} balance`,"UserProfile",t)}}y(s)}catch(t){De.error("Failed to fetch token balances with fallback","UserProfile",t)}},[e,$e,Fe]),We=O.useCallback(async()=>{if(e)try{const t=await ht.checkUserBadges(e);F(t.badges)}catch(t){De.error("Failed to fetch user badges","UserProfile.fetchUserBadges",t,{account:e})}},[e]),Oe=O.useCallback(async()=>{if(e)try{const s=await dt.getLightApiBalances(e);if(s&&s.balances){const a=[],n=s.balances.filter(e=>parseFloat(e.amount)>1e-4).sort((e,t)=>parseFloat(t.amount)-parseFloat(e.amount)).sort((e,t)=>{const s=$e.some(t=>t.symbol===e.currency&&t.contract===e.contract),a=$e.some(e=>e.symbol===t.currency&&e.contract===t.contract);return s&&!a?-1:!s&&a?1:0}).filter(e=>!Fe.includes(e.contract));for(let s=0;s<n.length;s++){const i=n[s];try{s>0&&await Ue(300);let n="0.00";const r=parseFloat(i.amount);try{if("WAX"===i.currency&&"eosio.token"===i.contract){const e=await Ye.getWaxPriceUSD();n=Re(r*e,2)}else if("WPIXAL"===i.currency&&"pixeljourney"===i.contract){const e=await Ye.getWpixalPriceUSD();n=Re(r*e,4)}else if("PXJ"===i.currency&&"pixeljourney"===i.contract){const e=await Ye.getPxjPriceUSD();n=Re(r*e,6)}else n="WUF"===i.currency&&"wuffi"===i.contract?"0.00":"N/A"}catch(t){De.warn(`Failed to fetch price for ${i.currency}`,"UserProfile",{error:t}),n="0.00"}const l={balance:`${i.amount} ${i.currency}`,symbol:i.currency,contract:i.contract,value:n};if("WAX"===i.currency&&"eosio.token"===i.contract)try{const t=await mt.getWaxBalance(e);N(t)}catch(t){De.warn("Failed to get WAX balance from balance service, using fallback","UserProfile",{error:t}),N(l.balance)}a.push(l)}catch(t){De.error(`Failed to get price for ${i.currency}`,"UserProfile",t);const e={balance:`${i.amount} ${i.currency}`,symbol:i.currency,contract:i.contract,value:"0.00"};a.push(e)}}y(a)}}catch(t){De.error("Failed to fetch token balances","UserProfile",t),await Le()}},[e,Fe,$e,Le]),ze=O.useCallback(async()=>{if(e){A(!0),T(null);try{await Ae(),await Pe(),await Oe(),await We()}catch(t){De.error("Error loading user data","UserProfile",t),T("Failed to load user data"),n("User Data Error","Unable to load user profile data. Please try refreshing the page.")}finally{A(!1)}}},[e,n,Oe,Ae,Pe,We]);O.useEffect(()=>{if(t&&e){(async()=>{try{await ze(),await Te(),await Ee(),await ke(),await Ce(),Ne()}catch(e){De.error("Error initializing user data","UserProfile",e),n("Failed to Load User Data","Unable to initialize user profile. Please try refreshing the page."),T("Failed to load user data")}})()}},[t,e]),O.useEffect(()=>{e&&fe(e)},[e]);const Be=(e,t)=>0===t?0:e/t*100,Ue=e=>new Promise(t=>setTimeout(t,e)),Xe=(e,t)=>{ce({isOpen:!0,resourceType:e,action:t})},qe=e=>{ue({isOpen:!0,action:e})},He=()=>{me({isOpen:!1,token:null})},Je=()=>{Te()},Ve=async e=>{const t={};for(const a of e)try{const e=await fetch(`https://aa.dapplica.io/atomicassets/v1/collections/${a}`),s=await e.json();if(s.success&&s.data?.img){const e=s.data.img;t[a]=e.startsWith("http")?e:`https://ipfs.io/ipfs/${e}`}}catch(s){De.error(`Error fetching avatar for collection ${a}`,"UserProfile",s)}h(t)},Ge=c.filter(e=>{if("all"!==M)if("tokens"===M){if("token_send"!==e.type&&"token_receive"!==e.type)return!1}else if(e.type!==M)return!1;if(X){const t=X.toLowerCase(),s=e.asset_name?.toLowerCase().includes(t),a=e.collection_name?.toLowerCase().includes(t),n=e.transaction_id.toLowerCase().includes(t),i=e.from?.toLowerCase().includes(t),r=e.to?.toLowerCase().includes(t);if(!(s||a||n||i||r))return!1}if("all"!==W){const t=new Date(e.block_time);if("custom"===W){if(z.start&&z.end){const e=new Date(z.start),s=new Date(z.end);if(s.setHours(23,59,59,999),t<e||t>s)return!1}else if(z.start){if(t<new Date(z.start))return!1}else if(z.end){const e=new Date(z.end);if(e.setHours(23,59,59,999),t>e)return!1}}else{const e="7d"===W?7:"30d"===W?30:90;if(t<new Date((new Date).getTime()-24*e*60*60*1e3))return!1}}return!0}),Ke=[...Ge].sort((e,t)=>{let s=0;switch(G){case"date":s=new Date(e.block_time).getTime()-new Date(t.block_time).getTime();break;case"amount":s=parseFloat(e.price?.replace(" WAX","")||"0")-parseFloat(t.price?.replace(" WAX","")||"0");break;case"type":s=e.type.localeCompare(t.type)}return"desc"===Q?-s:s}),Qe=Math.ceil(Ke.length/V),Ze=(H-1)*V,et=Ke.slice(Ze,Ze+V),tt=t=>{te(!0),le(null);try{let s,a,n;if("csv"===t){const t=[["Transaction ID","Date","Type","Asset Name","Collection","Price","From","To","Status"].join(",")];Ge.forEach(e=>{const s=[e.transaction_id,e.block_time,e.type,e.asset_name||"",e.collection_name||"",e.price||"",e.from||"",e.to||"",e.status].map(e=>`"${e}"`);t.push(s.join(","))}),s=t.join("\n"),a=`transactions_${e}_${(new Date).toISOString().split("T")[0]}.csv`,n="text/csv"}else s=JSON.stringify(Ge,null,2),a=`transactions_${e}_${(new Date).toISOString().split("T")[0]}.json`,n="application/json";const i=new Blob([s],{type:n}),r=URL.createObjectURL(i),l=document.createElement("a");l.href=r,l.download=a,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(r)}catch(s){De.error("Export failed","UserProfile",s);const e=s instanceof Error?s.message:"Failed to export transactions. Please try again.";le(e),n("Export Error",e)}finally{te(!1)}};return t?Se.jsxs("div",{className:"user-profile",children:[Se.jsxs("div",{className:"profile-container",children:[Se.jsxs("div",{className:"profile-header",children:[Se.jsx("div",{className:"profile-avatar",children:Se.jsx("div",{className:"avatar-placeholder",children:e?.charAt(0).toUpperCase()})}),Se.jsxs("div",{className:"profile-info",children:[Se.jsx("h1",{children:e}),Se.jsxs("div",{className:"profile-badges",children:[E.map(e=>Se.jsxs("span",{className:`badge ${e.id}`,title:e.description,children:[e.icon," ",e.name]},e.id)),0===E.length&&Se.jsx("span",{className:"badge no-badges",children:"No badges earned yet"})]})]}),Se.jsx("div",{className:"profile-stats-quick",children:m&&Se.jsxs(Se.Fragment,{children:[Se.jsxs("div",{className:"stat-item",children:[Se.jsx("span",{className:"stat-value",children:m.nftsOwned}),Se.jsx("span",{className:"stat-label",children:"NFTs Owned"})]}),Se.jsxs("div",{className:"stat-item",children:[Se.jsx("span",{className:"stat-value",children:m.totalPurchases}),Se.jsx("span",{className:"stat-label",children:"Purchases"})]}),Se.jsxs("div",{className:"stat-item",children:[Se.jsx("span",{className:"stat-value",children:m.totalSales}),Se.jsx("span",{className:"stat-label",children:"Sales"})]})]})})]}),Se.jsxs("div",{className:"profile-tabs",role:"tablist","aria-label":"Profile sections",children:[Se.jsxs("div",{className:"tab-row",children:[Se.jsx("button",{className:"tab-button "+("overview"===l?"active":""),onClick:()=>o("overview"),role:"tab","aria-selected":"overview"===l,"aria-controls":"overview-panel",id:"overview-tab",children:"Overview"}),Se.jsx("button",{className:"tab-button "+("transactions"===l?"active":""),onClick:()=>o("transactions"),role:"tab","aria-selected":"transactions"===l,"aria-controls":"transactions-panel",id:"transactions-tab",children:"Transactions"}),Se.jsx("button",{className:"tab-button "+("portfolio"===l?"active":""),onClick:()=>o("portfolio"),role:"tab","aria-selected":"portfolio"===l,"aria-controls":"portfolio-panel",id:"portfolio-tab",children:"Portfolio Analytics"}),Se.jsx("button",{className:"tab-button "+("pxbadges"===l?"active":""),onClick:()=>o("pxbadges"),role:"tab","aria-selected":"pxbadges"===l,"aria-controls":"pxbadges-panel",id:"pxbadges-tab",children:"PxBadges"})]}),Se.jsxs("div",{className:"tab-row",children:[Se.jsx("button",{className:"tab-button "+("network-resources"===l?"active":""),onClick:()=>o("network-resources"),role:"tab","aria-selected":"network-resources"===l,"aria-controls":"network-resources-panel",id:"network-resources-tab",children:"Network Resources"}),Se.jsx("button",{className:"tab-button "+("powerup"===l?"active":""),onClick:()=>o("powerup"),role:"tab","aria-selected":"powerup"===l,"aria-controls":"powerup-panel",id:"powerup-tab",children:"Powerup"}),Se.jsx("button",{className:"tab-button "+("token-balances"===l?"active":""),onClick:()=>o("token-balances"),role:"tab","aria-selected":"token-balances"===l,"aria-controls":"token-balances-panel",id:"token-balances-tab",children:"Token Balances"}),Se.jsx("button",{className:"tab-button "+("swap"===l?"active":""),onClick:()=>o("swap"),role:"tab","aria-selected":"swap"===l,"aria-controls":"swap-panel",id:"swap-tab",children:"Swap"})]})]}),Se.jsxs("div",{className:"profile-content",children:[C&&Se.jsxs("div",{className:"loading-state",children:[Se.jsx("div",{className:"loading-spinner"}),Se.jsx("p",{children:"Loading profile data..."})]}),P&&Se.jsxs("div",{className:"error-state",children:[Se.jsx("p",{children:P}),Se.jsx("button",{onClick:ze,className:"retry-button",children:"Retry"})]}),!C&&!P&&Se.jsxs(Se.Fragment,{children:["overview"===l&&m&&Se.jsxs("div",{className:"overview-tab",children:[Se.jsxs("div",{className:"balance-info",children:[Se.jsxs("div",{className:"balance-item",children:[Se.jsx("span",{className:"balance-label",children:"WAX Balance:"}),Se.jsx("span",{className:"balance-value",children:b})]}),Se.jsxs("div",{className:"balance-item",children:[Se.jsx("span",{className:"balance-label",children:"USD Value:"}),Se.jsx("span",{className:"balance-value",children:"$0.00"})]})]}),Se.jsxs("div",{className:"account-info",children:[Se.jsxs("div",{className:"info-item",children:[Se.jsx("span",{className:"info-label",children:"Account Name:"}),Se.jsx("span",{className:"info-value",children:e})]}),Se.jsxs("div",{className:"info-item",children:[Se.jsx("span",{className:"info-label",children:"Created:"}),Se.jsx("span",{className:"info-value",children:f?.created?new Date(f.created).toLocaleDateString():"Loading..."})]}),Se.jsxs("div",{className:"info-item",children:[Se.jsx("span",{className:"info-label",children:"Last Active:"}),Se.jsx("span",{className:"info-value",children:$?new Date($).toLocaleDateString():f?.last_code_update?new Date(f.last_code_update).toLocaleDateString():"Loading..."})]}),Se.jsxs("div",{className:"info-item",children:[Se.jsx("span",{className:"info-label",children:"Reputation:"}),Se.jsx("span",{className:"info-value",children:m?.reputation||"\u2b50\u2b50\u2b50\u2b50\u2b50 (4.8/5)"})]})]}),Se.jsxs("div",{className:"stats-grid",children:[Se.jsxs("div",{className:"stat-item",children:[Se.jsx("div",{className:"stat-value",children:m?.nftsOwned||0}),Se.jsx("div",{className:"stat-label",children:"NFTs Owned"})]}),Se.jsxs("div",{className:"stat-item",children:[Se.jsx("div",{className:"stat-value",children:m?.totalTransactions||0}),Se.jsx("div",{className:"stat-label",children:"Transactions"})]}),Se.jsxs("div",{className:"stat-item",children:[Se.jsx("div",{className:"stat-value",children:m?.totalEarned||"0"}),Se.jsx("div",{className:"stat-label",children:"WAX Earned"})]}),Se.jsxs("div",{className:"stat-item",children:[Se.jsx("div",{className:"stat-value",children:m?.tierStatus||"Bronze"}),Se.jsx("div",{className:"stat-label",children:"Tier Status"})]})]}),Se.jsxs("div",{className:"favorite-collections",children:[Se.jsx("h3",{children:"Favorite Collections"}),Se.jsx("div",{className:"collections-list",children:m.favoriteCollections.map((e,t)=>Se.jsxs("div",{className:"collection-item",children:[Se.jsxs("div",{className:"user-collection-avatar",children:[u[e]?Se.jsx("img",{src:u[e],alt:`${e} avatar`,onError:e=>{e.currentTarget.style.display="none",e.currentTarget.nextElementSibling.style.display="flex"}}):null,Se.jsx("div",{className:"fallback-avatar",style:{display:u[e]?"none":"flex"},children:e.charAt(0).toUpperCase()})]}),Se.jsx("span",{className:"collection-name",children:e})]},t))})]})]}),"transactions"===l&&Se.jsxs("div",{className:"transactions-tab",children:[!t&&Se.jsx("div",{className:"wallet-connection-prompt",children:Se.jsxs("div",{className:"prompt-content",children:[Se.jsx("h3",{children:"\ud83d\udd17 Connect Your Wallet"}),Se.jsx("p",{children:"Connect your WAX wallet to view your personal transaction history and account details."}),Se.jsx("button",{className:"connect-wallet-btn",onClick:a,children:"Connect Wallet"}),Se.jsx("div",{className:"demo-notice",children:Se.jsxs("p",{children:["\ud83d\udcca Currently showing demo data from account: ",Se.jsx("strong",{children:"pixeljourney"})]})})]})}),Se.jsxs("div",{className:"quick-filters",children:[Se.jsx("button",{className:"filter-btn "+("all"===M?"active":""),onClick:()=>R("all"),children:"\ud83d\udd0d All Activity"}),Se.jsx("button",{className:"filter-btn "+("purchase"===M?"active":""),onClick:()=>R("purchase"),children:"\ud83d\uded2 Purchases"}),Se.jsx("button",{className:"filter-btn "+("sale"===M?"active":""),onClick:()=>R("sale"),children:"\ud83d\udcb0 Sales"}),Se.jsx("button",{className:"filter-btn "+("transfer"===M?"active":""),onClick:()=>R("transfer"),children:"\ud83d\udd04 Transfers"}),Se.jsx("button",{className:"filter-btn "+("tokens"===M?"active":""),onClick:()=>R("tokens"),children:"\ud83d\udcb8 Tokens"})]}),Se.jsxs("div",{className:"transactions-header",children:[Se.jsxs("div",{className:"transactions-stats",children:[Se.jsxs("div",{className:"stat-item",children:[Se.jsx("span",{className:"stat-value",children:Ke.length}),Se.jsx("span",{className:"stat-label",children:"Total Found"})]}),Se.jsxs("div",{className:"stat-item",children:[Se.jsx("span",{className:"stat-value",children:c.length}),Se.jsx("span",{className:"stat-label",children:"All Transactions"})]})]}),Se.jsxs("div",{className:"transactions-actions",children:[Se.jsxs("button",{className:"export-btn",onClick:()=>tt("csv"),disabled:ee||0===Ge.length,children:[ee?"\u23f3":"\ud83d\udcca"," Export CSV"]}),Se.jsxs("button",{className:"export-btn",onClick:()=>tt("json"),disabled:ee||0===Ge.length,children:[ee?"\u23f3":"\ud83d\udcc4"," Export JSON"]})]})]}),Se.jsxs("div",{className:"transactions-controls",children:[Se.jsx("div",{className:"search-section",children:Se.jsxs("div",{className:"search-input-wrapper",children:[Se.jsx("input",{type:"text",placeholder:"Search by asset name, collection, transaction ID, or address...",value:X,onChange:e=>{q(e.target.value),J(1)},className:"search-input"}),Se.jsx("span",{className:"search-icon",children:"\ud83d\udd0d"})]})}),Se.jsxs("div",{className:"filters-section",children:[Se.jsxs("div",{className:"filter-group",children:[Se.jsx("label",{children:"Type:"}),Se.jsxs("select",{value:M,onChange:e=>{R(e.target.value),J(1)},className:"filter-select",children:[Se.jsx("option",{value:"all",children:"All Types"}),Se.jsx("option",{value:"purchase",children:"\ud83d\uded2 Purchases"}),Se.jsx("option",{value:"sale",children:"\ud83d\udcb0 Sales"}),Se.jsx("option",{value:"transfer",children:"\ud83d\udd04 Transfers"}),Se.jsx("option",{value:"tokens",children:"\ud83d\udcb8 Token Transactions"})]})]}),Se.jsxs("div",{className:"filter-group",children:[Se.jsx("label",{children:"Date:"}),Se.jsxs("select",{value:W,onChange:e=>{D(e.target.value),J(1)},className:"filter-select",children:[Se.jsx("option",{value:"7d",children:"Last 7 days"}),Se.jsx("option",{value:"30d",children:"Last 30 days"}),Se.jsx("option",{value:"90d",children:"Last 90 days"}),Se.jsx("option",{value:"all",children:"All time"}),Se.jsx("option",{value:"custom",children:"\ud83d\udcc5 Custom Range"})]}),"custom"===W&&Se.jsxs("div",{className:"custom-date-range",children:[Se.jsxs("div",{className:"date-input-group",children:[Se.jsx("label",{children:"From:"}),Se.jsx("input",{type:"date",className:"date-input",value:z.start,onChange:e=>{U(t=>({...t,start:e.target.value})),J(1)}})]}),Se.jsxs("div",{className:"date-input-group",children:[Se.jsx("label",{children:"To:"}),Se.jsx("input",{type:"date",className:"date-input",value:z.end,onChange:e=>{U(t=>({...t,end:e.target.value})),J(1)}})]})]})]}),Se.jsxs("div",{className:"filter-group",children:[Se.jsx("label",{children:"Sort:"}),Se.jsxs("select",{value:`${G}-${Q}`,onChange:e=>{const[t,s]=e.target.value.split("-");K(t),Z(s)},className:"filter-select",children:[Se.jsx("option",{value:"date-desc",children:"\ud83d\udcc5 Newest First"}),Se.jsx("option",{value:"date-asc",children:"\ud83d\udcc5 Oldest First"}),Se.jsx("option",{value:"amount-desc",children:"\ud83d\udcb0 Highest Amount"}),Se.jsx("option",{value:"amount-asc",children:"\ud83d\udcb0 Lowest Amount"}),Se.jsx("option",{value:"type-asc",children:"\ud83d\udd24 Type A-Z"}),Se.jsx("option",{value:"type-desc",children:"\ud83d\udd24 Type Z-A"})]})]})]})]}),se&&Se.jsxs("div",{className:"loading-state",children:[Se.jsx("div",{className:"loading-spinner",children:"\u23f3"}),Se.jsx("h3",{children:"Loading Transactions..."}),Se.jsx("p",{children:"Fetching your transaction history from the blockchain."})]}),ne&&!se&&Se.jsxs("div",{className:"error-state",children:[Se.jsx("div",{className:"error-icon",children:"\u274c"}),Se.jsx("h3",{children:"Failed to Load Transactions"}),Se.jsx("p",{children:ne}),Se.jsx("button",{className:"retry-btn",onClick:()=>Ae(),children:"\ud83d\udd04 Retry"})]}),re&&Se.jsxs("div",{className:"export-error",children:[Se.jsxs("span",{className:"error-text",children:["Export failed: ",re]}),Se.jsx("button",{className:"dismiss-error-btn",onClick:()=>le(null),children:"\u2715"})]}),Se.jsx("div",{className:"transactions-list",children:se||ne||0!==et.length?Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"transactions-grid",children:et.map(t=>{return Se.jsxs("div",{className:"transaction-card",children:[Se.jsxs("div",{className:"transaction-header",children:[Se.jsxs("div",{className:"transaction-icon",children:["purchase"===t.type&&"\ud83d\uded2","sale"===t.type&&"\ud83d\udcb0","transfer"===t.type&&"\ud83d\udd04","token_send"===t.type&&"\ud83d\udce4","token_receive"===t.type&&"\ud83d\udce5","mint"===t.type&&"\u2728"]}),Se.jsx("div",{className:"transaction-type-badge",children:Se.jsx("span",{className:`type-badge ${t.type}`,children:t.type.charAt(0).toUpperCase()+t.type.slice(1).replace("_"," ")})}),Se.jsx("div",{className:"transaction-status",children:Se.jsxs("span",{className:`status-badge ${t.status}`,children:["completed"===t.status&&"\u2705","pending"===t.status&&"\u23f3","failed"===t.status&&"\u274c"]})})]}),Se.jsxs("div",{className:"transaction-content",children:[Se.jsxs("div",{className:"asset-info",children:[Se.jsx("h4",{className:"asset-name",children:t.asset_name||"Unknown Asset"}),t.collection_name&&Se.jsx("span",{className:"collection-name",children:t.collection_name})]}),t.price&&Se.jsx("div",{className:"transaction-amount",children:Se.jsxs("span",{className:"amount "+("sale"===t.type||"token_receive"===t.type?"positive":"negative"),children:["sale"===t.type||"token_receive"===t.type?"+":"-",(a=t.price,Me(parseFloat(a.replace(" WAX",""))))]})}),Se.jsxs("div",{className:"transaction-meta",children:[Se.jsxs("div",{className:"meta-row",children:[Se.jsx("span",{className:"meta-label",children:"Date:"}),Se.jsx("span",{className:"meta-value",children:(s=t.block_time,new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),t.from&&t.from!==e&&Se.jsxs("div",{className:"meta-row",children:[Se.jsx("span",{className:"meta-label",children:"From:"}),Se.jsx("span",{className:"meta-value address",children:t.from})]}),t.to&&t.to!==e&&Se.jsxs("div",{className:"meta-row",children:[Se.jsx("span",{className:"meta-label",children:"To:"}),Se.jsx("span",{className:"meta-value address",children:t.to})]}),Se.jsxs("div",{className:"meta-row",children:[Se.jsx("span",{className:"meta-label",children:"TX ID:"}),Se.jsxs("span",{className:"meta-value transaction-id-link",onClick:()=>r(`/transactions/${t.transaction_id}`),title:"View transaction details",children:[t.transaction_id.slice(0,12),"..."]})]}),t.memo&&Se.jsxs("div",{className:"meta-row",children:[Se.jsx("span",{className:"meta-label",children:"Memo:"}),Se.jsx("span",{className:"meta-value memo",children:t.memo})]})]})]})]},t.transaction_id);var s,a})}),Qe>1&&Se.jsxs("div",{className:"pagination",children:[Se.jsx("div",{className:"pagination-info",children:Se.jsxs("span",{children:["Showing ",Ze+1,"-",Math.min(Ze+V,Ke.length)," of ",Ke.length," transactions"]})}),Se.jsxs("div",{className:"pagination-controls",children:[Se.jsx("button",{className:"pagination-btn",onClick:()=>J(1),disabled:1===H,title:"First page",children:"\u23ee\ufe0f"}),Se.jsx("button",{className:"pagination-btn",onClick:()=>J(H-1),disabled:1===H,title:"Previous page",children:"\u23ea"}),Se.jsx("div",{className:"page-numbers",children:Array.from({length:Math.min(5,Qe)},(e,t)=>{let s;return s=Qe<=5||H<=3?t+1:H>=Qe-2?Qe-4+t:H-2+t,Se.jsx("button",{className:"page-number "+(H===s?"active":""),onClick:()=>J(s),children:s},s)})}),Se.jsx("button",{className:"pagination-btn",onClick:()=>J(H+1),disabled:H===Qe,title:"Next page",children:"\u23e9"}),Se.jsx("button",{className:"pagination-btn",onClick:()=>J(Qe),disabled:H===Qe,title:"Last page",children:"\u23ed\ufe0f"})]})]})]}):Se.jsxs("div",{className:"no-transactions",children:[Se.jsx("div",{className:"no-transactions-icon",children:"\ud83d\udced"}),Se.jsx("h3",{children:"No transactions found"}),Se.jsx("p",{children:X?`No transactions match your search "${X}"`:"No transactions found for the selected filters."}),(X||"all"!==M||"all"!==W)&&Se.jsx("button",{className:"clear-filters-btn",onClick:()=>{q(""),R("all"),D("all"),U({start:"",end:""}),J(1)},children:"Clear All Filters"})]})})]}),"portfolio"===l&&Se.jsx("div",{className:"portfolio-tab",children:Se.jsx(xa,{})}),"pxbadges"===l&&Se.jsx(ba,{}),"network-resources"===l&&Se.jsxs("div",{className:"network-resources-tab",children:[Se.jsxs("div",{className:"resources-header",children:[Se.jsx("h2",{children:"Network Resources"}),Se.jsx("p",{children:"Manage your WAX account resources (CPU, NET, RAM)"})]}),Se.jsxs("div",{className:"resources-grid",children:[Se.jsxs("div",{className:"resource-card cpu",children:[Se.jsxs("div",{className:"resource-header",children:[Se.jsx("div",{className:"resource-icon",children:"\u26a1"}),Se.jsxs("div",{className:"resource-info",children:[Se.jsx("h3",{children:"CPU"}),Se.jsx("p",{children:"Processing power for transactions"})]})]}),Se.jsxs("div",{className:"resource-stats",children:[Se.jsx("div",{className:"usage-bar",children:Se.jsx("div",{className:"usage-fill cpu",style:{width:g?g.cpu.used/g.cpu.max*100+"%":"45%"}})}),Se.jsx("div",{className:"usage-text",children:g?`${(g.cpu.used/g.cpu.max*100).toFixed(1)}% used (${(g.cpu.used/1e3).toFixed(1)}ms / ${(g.cpu.max/1e3).toFixed(1)}ms)`:"45% used (4.5ms / 10ms)"})]}),Se.jsxs("div",{className:"resource-actions",children:[Se.jsx("button",{className:"stake-btn",onClick:()=>Xe("cpu","stake"),children:"Stake CPU"}),Se.jsx("button",{className:"unstake-btn",onClick:()=>Xe("cpu","unstake"),children:"Unstake CPU"})]})]}),Se.jsxs("div",{className:"resource-card net",children:[Se.jsxs("div",{className:"resource-header",children:[Se.jsx("div",{className:"resource-icon",children:"\ud83c\udf10"}),Se.jsxs("div",{className:"resource-info",children:[Se.jsx("h3",{children:"NET"}),Se.jsx("p",{children:"Network bandwidth for transactions"})]})]}),Se.jsxs("div",{className:"resource-stats",children:[Se.jsx("div",{className:"usage-bar",children:Se.jsx("div",{className:"usage-fill net",style:{width:g?g.net.used/g.net.max*100+"%":"30%"}})}),Se.jsx("div",{className:"usage-text",children:g?`${(g.net.used/g.net.max*100).toFixed(1)}% used (${(g.net.used/1024).toFixed(1)}KB / ${(g.net.max/1024).toFixed(1)}KB)`:"30% used (3KB / 10KB)"})]}),Se.jsxs("div",{className:"resource-actions",children:[Se.jsx("button",{className:"stake-btn",onClick:()=>Xe("net","stake"),children:"Stake NET"}),Se.jsx("button",{className:"unstake-btn",onClick:()=>Xe("net","unstake"),children:"Unstake NET"})]})]}),Se.jsxs("div",{className:"resource-card ram",children:[Se.jsxs("div",{className:"resource-header",children:[Se.jsx("div",{className:"resource-icon",children:"\ud83d\udcbe"}),Se.jsxs("div",{className:"resource-info",children:[Se.jsx("h3",{children:"RAM"}),Se.jsx("p",{children:"Storage space for account data"})]})]}),Se.jsxs("div",{className:"resource-stats",children:[Se.jsx("div",{className:"usage-bar",children:Se.jsx("div",{className:"usage-fill ram",style:{width:g?g.ram.used/g.ram.max*100+"%":"65%"}})}),Se.jsx("div",{className:"usage-text",children:g?`${(g.ram.used/g.ram.max*100).toFixed(1)}% used (${(g.ram.used/1024).toFixed(1)}KB / ${(g.ram.max/1024).toFixed(1)}KB)`:"65% used (6.5KB / 10KB)"})]}),Se.jsxs("div",{className:"resource-actions",children:[Se.jsx("button",{className:"buy-ram-btn",onClick:()=>qe("buy"),children:"Buy RAM"}),Se.jsx("button",{className:"sell-ram-btn",onClick:()=>qe("sell"),children:"Sell RAM"})]})]})]})]}),"powerup"===l&&Se.jsxs("div",{className:"powerup-tab",children:[Se.jsxs("div",{className:"powerup-header",children:[Se.jsx("h2",{children:"Powerup Resources"}),Se.jsx("p",{children:"Boost your account resources for 24 hours"})]}),Se.jsx("div",{className:"powerup-stats",children:Se.jsxs("div",{className:"current-usage",children:[Se.jsx("h3",{children:"Current Resource Usage"}),Se.jsxs("div",{className:"usage-grid",children:[Se.jsxs("div",{className:"usage-item",children:[Se.jsx("span",{className:"usage-label",children:"CPU:"}),Se.jsx("div",{className:"usage-bar",children:Se.jsx("div",{className:"usage-fill",style:{width:g?`${Be(g.cpu.used,g.cpu.max)}%`:"0%"}})}),Se.jsx("span",{className:"usage-percent",children:g?`${Be(g.cpu.used,g.cpu.max).toFixed(1)}%`:"0%"})]}),Se.jsxs("div",{className:"usage-item",children:[Se.jsx("span",{className:"usage-label",children:"NET:"}),Se.jsx("div",{className:"usage-bar",children:Se.jsx("div",{className:"usage-fill",style:{width:g?`${Be(g.net.used,g.net.max)}%`:"0%"}})}),Se.jsx("span",{className:"usage-percent",children:g?`${Be(g.net.used,g.net.max).toFixed(1)}%`:"0%"})]})]})]})}),Se.jsxs("div",{className:"powerup-form",children:[Se.jsxs("div",{className:"form-section",children:[Se.jsx("label",{children:"Account to Boost:"}),Se.jsx("input",{type:"text",placeholder:"Enter account name",value:pe,onChange:e=>fe(e.target.value)})]}),Se.jsxs("div",{className:"form-section",children:[Se.jsx("label",{children:"WAX Amount to Spend:"}),Se.jsxs("div",{className:"amount-input-container",children:[Se.jsx("input",{type:"number",placeholder:"0.0000",value:ve||"",onChange:e=>{const t=e.target.value;if((""===t||/^\d*\.?\d*$/.test(t))&&(""===t||!isNaN(Number(t)))){if(""!==t){const e=parseFloat(b.split(" ")[0]);if(Number(t)>e)return}je(Number(t))}},step:"0.0001",min:"0",max:parseFloat(b.split(" ")[0])}),Se.jsx("span",{className:"wax-label",children:"WAX"})]}),Se.jsxs("div",{className:"slider-container",children:[Se.jsx("input",{type:"range",min:"0",max:"100",value:parseFloat(b.split(" ")[0])>0?ve/parseFloat(b.split(" ")[0])*100:0,onChange:e=>{const t=Number(e.target.value),s=parseFloat(b.split(" ")[0]),a=Number(s*t/100).toFixed(8);je(Number(a))},className:"slider"}),Se.jsxs("div",{className:"slider-value",children:[Me(ve)," (Max: ",b,")"]})]})]}),Se.jsxs("div",{className:"form-section",children:[Se.jsxs("label",{children:["CPU/NET Ratio: ",xe,"% CPU / ",100-xe,"% NET"]}),Se.jsxs("div",{className:"progress-container",children:[Se.jsxs("div",{className:"progress-bar-container",children:[Se.jsx("div",{className:"progress-bar cpu",style:{width:`${xe}%`}}),Se.jsx("div",{className:"progress-bar net",style:{width:100-xe+"%"}})]}),Se.jsxs("div",{className:"progress-text",children:[Se.jsxs("span",{className:"cpu-text",children:[xe,"% CPU"]}),Se.jsx("span",{className:"separator",children:" / "}),Se.jsxs("span",{className:"net-text",children:[100-xe,"% NET"]})]})]}),Se.jsx("div",{className:"slider-container",children:Se.jsx("input",{type:"range",min:"0",max:"100",value:xe,onChange:e=>{const t=Number(e.target.value);ge(t)},className:"slider"})})]}),ve>0&&we&&_e&&Se.jsxs("div",{className:"powerup-estimation",children:[Se.jsx("h4",{children:"Estimated Boost (24 hours):"}),Se.jsxs("div",{className:"boost-details",children:[Se.jsxs("div",{className:"boost-item",children:[Se.jsx("span",{children:"CPU:"}),Se.jsx("span",{children:ya(va(ve,xe),ja(ve,xe),we?.cpu,we?.net,_e)})]}),Se.jsxs("div",{className:"boost-item",children:[Se.jsx("span",{children:"NET:"}),Se.jsx("span",{children:(st=I(va(ve,xe),ja(ve,xe),we?.cpu,we?.net).netAmount,!st||st<=0?"0 bytes":st>=1048576?`${(st/1048576).toFixed(2)} MB`:st>=1024?`${(st/1024).toFixed(2)} KB`:`${st} bytes`)})]})]}),Se.jsxs("div",{className:"cost-info",children:[Se.jsxs("div",{className:"cost-item",children:[Se.jsx("span",{children:"CPU Cost:"}),Se.jsxs("span",{children:[I(va(ve,xe),ja(ve,xe),we?.cpu,we?.net).cpuFee.toFixed(8)," WAX"]})]}),Se.jsxs("div",{className:"cost-item",children:[Se.jsx("span",{children:"NET Cost:"}),Se.jsxs("span",{children:[I(va(ve,xe),ja(ve,xe),we?.cpu,we?.net).netFee.toFixed(8)," WAX"]})]})]})]}),Se.jsx("button",{className:"powerup-btn",disabled:!ve||ve<=0||!pe||ye,onClick:()=>{if(ve>0&&pe&&s){const e=va(ve,xe),t=ja(ve,xe);(async(e,t,s,a,n,i,r,l,o)=>{if(i(!0),r("Awaiting confirmation..."),null==localStorage.getItem("wharf--session"))return void r("You are not logged in. Click the wallet icon in the top menu");const c=o;let d=`${Number(s).toFixed(8)} WAX`;const u=[{account:"waxdao",name:"powerup",authorization:[c.permissionLevel],data:{}},{account:"eosio",name:"powerup",authorization:[c.permissionLevel],data:{payer:c.actor,receiver:t,days:1,net_frac:parseFloat(n).toFixed(0),cpu_frac:parseFloat(a).toFixed(0),max_payment:d}}];try{await c.transact({actions:u},ga),l(!0),r("Processing transaction...");const s=setTimeout(()=>{r(`${t} has been boosted with ${d}`),e(e=>!e),l(!1)},3e3);return()=>clearTimeout(s)}catch(h){De.error("Powerup transaction error:",h),r(h.message)}})(pe,ve,e,t,be,s)}},children:ye?"Processing...":"Boost Resources"})]})]}),"token-balances"===l&&Se.jsxs("div",{className:"token-balances-tab",children:[Se.jsxs("div",{className:"balances-header",children:[Se.jsx("h2",{children:"Token Balances"}),Se.jsx("p",{children:"View your token balances with USD values"}),Se.jsxs("div",{className:"balance-summary",children:[Se.jsxs("div",{className:"balance-summary-item",children:[Se.jsx("span",{className:"balance-summary-label",children:"Total Tokens:"}),Se.jsx("span",{className:"balance-summary-value",children:j.length})]}),Se.jsxs("div",{className:"balance-summary-item",children:[Se.jsx("span",{className:"balance-summary-label",children:"With USD Values:"}),Se.jsx("span",{className:"balance-summary-value",children:j.filter(e=>"N/A"!==e.value&&"0.00"!==e.value).length})]})]})]}),Se.jsxs("div",{className:"balances-controls",children:[Se.jsxs("div",{className:"search-sort",children:[Se.jsx("input",{type:"text",placeholder:"Search tokens...",className:"search-input"}),Se.jsxs("select",{className:"sort-select",children:[Se.jsx("option",{value:"balance",children:"Sort by Balance"}),Se.jsx("option",{value:"value",children:"Sort by Value"}),Se.jsx("option",{value:"name",children:"Sort by Name"})]})]}),Se.jsxs("div",{className:"bulk-actions",children:[Se.jsx("button",{className:"select-all-btn",onClick:()=>{if(w.size===j.length)k(new Set);else{const e=j.map((e,t)=>t.toString());k(new Set(e))}},children:w.size===j.length?"Deselect All":"Select All"}),Se.jsxs("span",{className:"selected-info",children:[w.size," selected"]}),Se.jsx("button",{className:"bulk-sell-btn",onClick:async()=>{if(0!==w.size&&e){S(!0);try{const e=Array.from(w).map(e=>j[parseInt(e)]).filter(e=>"PXJ"!==e.symbol);if(0===e.length)return void n("Invalid Selection","No valid tokens selected for swap (PXJ cannot be swapped for itself)");let s=0;const a=[];for(const n of e)try{const e=parseFloat(n.balance.split(" ")[0]),t=await dt.getAlcorSwapQuote({from_token:n.symbol,from_contract:n.contract,to_token:"PXJ",to_contract:"pixeljourney",amount:e.toString(),slippage:.5});t&&parseFloat(t.output.amount)>0?(a.push({token:n.symbol,amount:e,pxjReceived:parseFloat(t.output.amount),success:!0}),s+=parseFloat(t.output.amount)):a.push({token:n.symbol,amount:e,pxjReceived:0,success:!1,error:"No liquidity available"})}catch(t){De.error(`Failed to get swap quote for ${n.symbol}`,"UserProfile",t),a.push({token:n.symbol,amount:parseFloat(n.balance.split(" ")[0]),pxjReceived:0,success:!1,error:"Swap quote failed"})}const r=a.filter(e=>e.success),l=a.filter(e=>!e.success);let o="Bulk Sell Summary:\n\n";r.length>0&&(o+=`Successful swaps (${r.length}):\n`,r.forEach(e=>{o+=`\u2022 ${e.amount} ${e.token} \u2192 ${e.pxjReceived.toFixed(8)} PXJ\n`}),o+=`\nTotal PXJ received: ${s.toFixed(8)} PXJ\n`),l.length>0&&(o+=`\nFailed swaps (${l.length}):\n`,l.forEach(e=>{o+=`\u2022 ${e.amount} ${e.token} - ${e.error}\n`})),o+="\nNote: This is a preview. Actual swaps would require wallet confirmation.",i("Bulk Sell Summary",o),k(new Set),r.length>0&&await Oe()}catch(t){De.error("Bulk sell failed","UserProfile",t),n("Bulk Sell Failed","Bulk sell failed. Please try again.")}finally{S(!1)}}},disabled:0===w.size||_,children:_?"Processing...":"Bulk Sell into PXJ "+(w.size>0?`(${w.size})`:"(Coming Soon)")})]})]}),Se.jsx("div",{className:"token-balances-grid",children:0===j.length?Se.jsxs("div",{className:"no-tokens-message",children:[Se.jsx("div",{className:"no-tokens-icon",children:"\ud83e\ude99"}),Se.jsx("h3",{children:"No Token Balances Found"}),Se.jsx("p",{children:"Your account doesn't have any token balances or they're still loading."})]}):j.map((e,t)=>Se.jsxs("div",{className:"token-balance-card",children:[Se.jsxs("div",{className:"token-header",children:[Se.jsx("div",{className:"token-icon",children:"\ud83e\ude99"}),Se.jsxs("div",{className:"token-details",children:[Se.jsx("h3",{children:e.symbol}),Se.jsx("p",{className:"token-contract",children:e.contract})]})]}),Se.jsxs("div",{className:"token-amounts",children:[Se.jsxs("div",{className:"token-balance",children:[Se.jsx("span",{className:"balance-label",children:"Balance:"}),Se.jsx("span",{className:"balance-value",children:e.balance})]}),Se.jsxs("div",{className:"token-usd-value",children:[Se.jsx("span",{className:"usd-label",children:"USD Value:"}),Se.jsx("span",{className:"usd-value "+("N/A"===e.value?"unavailable":"0.00"===e.value?"zero":"available"),children:"N/A"===e.value?"N/A":`$${e.value}`})]})]}),Se.jsxs("div",{className:"token-actions",children:[Se.jsx("button",{className:"token-action-btn transfer",onClick:()=>(e=>{me({isOpen:!0,token:e})})(e),children:"Transfer"}),Se.jsx("button",{className:"token-action-btn trade",disabled:!0,children:"Trade"})]})]},`${e.contract}-${e.symbol}-${t}`))})]}),"swap"===l&&Se.jsxs("div",{className:"swap-tab",children:[Se.jsxs("div",{className:"swap-tab-header",children:[Se.jsx("h2",{children:"Token Swap"}),Se.jsx("p",{children:"Swap tokens directly using Alcor DEX integration"})]}),Se.jsx($a,{})]})]})]})]}),Se.jsx(ma,{isOpen:oe.isOpen,onClose:()=>{ce({isOpen:!1,resourceType:"cpu",action:"stake"})},resourceType:oe.resourceType,action:oe.action,onSuccess:Je}),Se.jsx(pa,{isOpen:de.isOpen,onClose:()=>{ue({isOpen:!1,action:"buy"})},action:de.action,onSuccess:Je}),Se.jsx(fa,{isOpen:he.isOpen,onClose:He,token:he.token,onSuccess:()=>{Te(),He()}})]}):Se.jsx("div",{className:"user-profile",children:Se.jsx("div",{className:"profile-container",children:Se.jsxs("div",{className:"not-connected",children:[Se.jsx("div",{className:"not-connected-icon",children:"\ud83d\udd12"}),Se.jsx("h2",{children:"Connect Your Wallet"}),Se.jsx("p",{children:"Please connect your wallet to view your profile and transaction history."})]})})});var st},Ma=()=>{const{account:e}=X(),[t]=q(),s=B(),a=e||t.get("user"),[n,i]=O.useState(null),[r,l]=O.useState(null),[o,c]=O.useState(null),[d,u]=O.useState("0.0000"),[h,m]=O.useState([]),[p,f]=O.useState(null),[x,g]=O.useState(!1),[v,j]=O.useState(null),[y,b]=O.useState(null),[N,w]=O.useState(!1),[k,_]=O.useState({}),[S,C]=O.useState(1),[A,P]=O.useState("all"),[T,E]=O.useState([]),[F,I]=O.useState({Body:"",Eyes:"",Head:"",Mouth:"",WaxRock:"",PixelPet:"",Background:"","Hats and Hair":"","Glasses and Masks":"","Special Accessories":""}),[$,L]=O.useState({}),M=O.useCallback(async e=>{try{const s=["token.pxj","eosio.token"],a=[];for(const n of s)try{const t=await dt.getWaxCurrencyBalance(e,n),s=await Promise.all(t.map(async e=>({...e,contract:n,value:await z(e.balance,e.symbol)})));a.push(...s)}catch(t){De.error(`Failed to fetch balance for ${n}:`,"UserProfileLookup.fetchTokenBalances",t)}m(a)}catch(t){De.error("Error fetching token balances:","UserProfileLookup.fetchTokenBalances",t)}},[]),R=O.useCallback(async()=>{if(a){g(!0),j(null);try{const e=await dt.getUserInventory(a),t=[...new Set(e.map(e=>e.collection))],s=await ht.checkUserBadges(a);E(s.badges);const n=e.filter(e=>"pixeljourney"===e.collection&&"pixals"===e.schema),r={Body:new Set,Eyes:new Set,Head:new Set,Mouth:new Set,WaxRock:new Set,PixelPet:new Set,Background:new Set,"Hats and Hair":new Set,"Glasses and Masks":new Set,"Special Accessories":new Set};n.forEach(e=>{Object.keys(r).forEach(t=>{const s=e.data?.[t];s&&"none"!==s&&""!==s&&r[t].add(s)})});const o={};Object.entries(r).forEach(([e,t])=>{o[e]=Array.from(t).sort()}),L(o),await Promise.all([W(a),D(a),M(a)]);const c=await(async e=>{try{const t=await dt.getWaxAccountInfo(e);if(t&&t.created)return new Date(t.created).toISOString().split("T")[0]}catch(v){De.warn("Could not fetch account creation date:","UserProfileLookup.getAccountCreationDate",v)}try{const t=await dt.getUserTransactions(e,1);if(t&&t.length>0){const e=t[t.length-1];if(e.block_time)return new Date(e.block_time).toISOString().split("T")[0]}}catch(v){De.warn("Could not fetch first transaction date:","UserProfileLookup.getAccountCreationDate",v)}return"2023-01-01"})(a),d={account:a,nftsOwned:e,totalNFTs:e.length,collections:t,joinDate:c,isVerified:s.badges.some(e=>"pixal-pfp"===e.id),badges:s.badges.map(e=>e.name)},u=await U(e),h={totalAssets:e.length,uniqueCollections:t.length,totalValue:u,rareAssets:e.filter(e=>e.template_mint&&e.template_mint<=100).length};i(d),l(h),t.length>0&&J(t)}catch(e){De.error("Error loading user profile:","UserProfileLookup.loadUserProfile",e),j("Failed to load user profile. Please check the account name and try again.")}finally{g(!1)}}},[a,M]);O.useEffect(()=>{a&&R()},[a,R]);const W=async e=>{try{const t=await dt.getWaxAccountInfo(e);if(c(t),t){const e={cpu:{used:t.cpu_limit.used,available:t.cpu_limit.available,max:t.cpu_limit.max},net:{used:t.net_limit.used,available:t.net_limit.available,max:t.net_limit.max},ram:{used:t.ram_usage,available:t.ram_quota-t.ram_usage,max:t.ram_quota}};f(e)}}catch(t){De.error("Failed to fetch WAX account info:","UserProfileLookup.fetchWaxAccountInfo",t)}},D=async e=>{try{const t=await mt.getWaxBalance(e);u(t)}catch(t){De.error("Failed to fetch WAX balance:","UserProfileLookup.fetchWaxBalance",t)}},z=async(e,t)=>{const s=parseFloat(e.split(" ")[0]);try{const e={TLM:"alien.worlds",NEFTY:"neftyblocksp",SEST:"sest.token"}[t];if(e){const a=await dt.getAlcorTokenPrice(t,e);if(a&&a.usd_price)return`$${(s*a.usd_price).toFixed(4)}`}return`$${(s*({TLM:.02,NEFTY:.001,SEST:1e-4}[t]||.001)).toFixed(4)}`}catch(a){De.error(`Error fetching price for ${t}:`,"UserProfileLookup.fetchWaxAccountInfo",a);return`$${(s*({TLM:.02,NEFTY:.001,SEST:1e-4}[t]||.001)).toFixed(4)}`}},U=async e=>{if(0===e.length)return"0.00 WAX";try{const s=e.reduce((e,t)=>{const s=t.collection;return e[s]||(e[s]=[]),e[s].push(t),e},{});let a=0;for(const[e,n]of Object.entries(s))try{const t=await dt.getCollectionStats(e);let s=0;if(t&&t.floor_price)s=parseFloat(t.floor_price);else{const t=await fetch(`${dt.atomicMarketAPI}/atomicmarket/v1/sales?state=3&collection_name=${e}&limit=50&order=desc&sort=updated`),a=await t.json();if(a.success&&a.data?.length>0){const e=a.data.filter(e=>e.price?.amount).map(e=>parseFloat(e.price.amount)/Math.pow(10,e.price.token_precision||8));e.length>0&&(s=Math.min(...e))}}0===s&&(s=1),n.forEach(e=>{let t=s;e.template_mint&&(e.template_mint<=10?t*=3:e.template_mint<=50?t*=2:e.template_mint<=100&&(t*=1.5)),a+=t})}catch(t){De.warn(`Failed to get market data for collection ${e}, using fallback pricing:`,"UserProfileLookup.calculateTotalValue",t),a+=1.5*n.length}return`${a.toFixed(2)} WAX`}catch(t){De.error("Error calculating total portfolio value:","UserProfileLookup.calculateTotalValue",t);return`${(2*e.length).toFixed(2)} WAX`}},H=()=>{if(!n)return[];let e=n.nftsOwned;switch(A){case"pixals":e=e.filter(e=>"pixeljourney"===e.collection&&"pixals"===e.schema),Object.entries(F).forEach(([t,s])=>{s&&""!==s&&(e=e.filter(e=>{const a=e.data?.[t];return a&&a.toLowerCase().includes(s.toLowerCase())}))});break;case"waxrock":e=e.filter(e=>{const t=e.data?.WaxRock;return"pixeljourney"===e.collection&&"pixals"===e.schema&&t&&"none"!==t});break;case"ingredients":e=e.filter(e=>"pixeljourney"===e.collection&&"ingredients"===e.schema)}return e},J=async e=>{const t={};for(const a of e)try{const e=await fetch(`https://aa.dapplica.io/atomicassets/v1/collections/${a}`),s=await e.json();if(s.success&&s.data?.img){const e=s.data.img;t[a]=e.startsWith("http")?e:`https://ipfs.io/ipfs/${e}`}}catch(s){De.error(`Error fetching avatar for collection ${a}:`,"UserProfileLookup.fetchCollectionAvatars",s)}_(t)},V=e=>{C(e),window.scrollTo({top:0,behavior:"smooth"})};if(x)return Se.jsx("div",{className:"user-profile-lookup",children:Se.jsx("div",{className:"profile-container",children:Se.jsxs("div",{className:"loading-state",children:[Se.jsx("div",{className:"loading-spinner"}),Se.jsx("p",{children:"Loading user profile..."})]})})});if(v)return Se.jsx("div",{className:"user-profile-lookup",children:Se.jsx("div",{className:"profile-container",children:Se.jsxs("div",{className:"error-state",children:[Se.jsx("div",{className:"error-icon",children:"\u26a0\ufe0f"}),Se.jsx("h2",{children:"Profile Not Found"}),Se.jsx("p",{children:v}),Se.jsxs("div",{className:"error-actions",children:[Se.jsx("button",{onClick:()=>s(-1),className:"btn-secondary",children:"Go Back"}),Se.jsx("button",{onClick:R,className:"btn-primary",children:"Try Again"})]})]})})});if(!n||!r)return Se.jsx("div",{className:"user-profile-lookup",children:Se.jsx("div",{className:"profile-container",children:Se.jsx("div",{className:"no-data",children:Se.jsx("p",{children:"No profile data available"})})})});const G=H(),Y=(()=>{const e=H(),t=20*(S-1);return e.slice(t,t+20)})(),K=(()=>{const e=H();return Math.ceil(e.length/20)})();return Se.jsxs("div",{className:"user-profile-lookup",children:[Se.jsxs("div",{className:"profile-container",children:[Se.jsxs("div",{className:"profile-header",children:[Se.jsx("div",{className:"profile-avatar",children:Se.jsx("div",{className:"avatar-placeholder",children:a?.charAt(0).toUpperCase()})}),Se.jsxs("div",{className:"profile-info",children:[Se.jsx("h1",{children:a}),Se.jsxs("div",{className:"profile-badges",children:[n.isVerified&&Se.jsx("span",{className:"badge verified",children:"\u2713 Verified"}),T.map(e=>Se.jsxs("span",{className:`badge ${e.id}`,title:e.description,children:[e.icon," ",e.name]},e.id))]})]}),Se.jsxs("div",{className:"profile-stats-quick",children:[Se.jsxs("div",{className:"stat-item",children:[Se.jsx("span",{className:"stat-value",children:r.totalAssets}),Se.jsx("span",{className:"stat-label",children:"NFTs Owned"})]}),Se.jsxs("div",{className:"stat-item",children:[Se.jsx("span",{className:"stat-value",children:r.uniqueCollections}),Se.jsx("span",{className:"stat-label",children:"Collections"})]}),Se.jsxs("div",{className:"stat-item",children:[Se.jsx("span",{className:"stat-value",children:r.rareAssets}),Se.jsx("span",{className:"stat-label",children:"Rare Assets"})]})]})]}),o&&Se.jsxs("div",{className:"account-info-section",children:[Se.jsx("h3",{children:"Account Information"}),Se.jsxs("div",{className:"account-info-grid",children:[Se.jsxs("div",{className:"user-info-card",children:[Se.jsx("div",{className:"info-icon",children:"\ud83d\udc64"}),Se.jsxs("div",{className:"info-details",children:[Se.jsx("h4",{children:"Account Name"}),Se.jsx("p",{children:o.account_name})]})]}),Se.jsxs("div",{className:"user-info-card",children:[Se.jsx("div",{className:"info-icon",children:"\ud83d\udcc5"}),Se.jsxs("div",{className:"info-details",children:[Se.jsx("h4",{children:"Created"}),Se.jsx("p",{children:new Date(o.created).toLocaleDateString()})]})]}),Se.jsxs("div",{className:"user-info-card",children:[Se.jsx("div",{className:"info-icon",children:"\ud83d\udd11"}),Se.jsxs("div",{className:"info-details",children:[Se.jsx("h4",{children:"Permissions"}),Se.jsxs("p",{children:[o.permissions?.length||0," keys"]})]})]})]})]}),Se.jsxs("div",{className:"balance-section",children:[Se.jsx("h3",{children:"Balances"}),Se.jsxs("div",{className:"balance-grid",children:[Se.jsxs("div",{className:"balance-card primary",children:[Se.jsx("div",{className:"balance-icon",children:"\ud83d\udcb0"}),Se.jsxs("div",{className:"balance-details",children:[Se.jsx("h4",{children:"WAX Balance"}),Se.jsx("p",{className:"balance-value",children:d})]})]}),h.map((e,t)=>Se.jsxs("div",{className:"balance-card",children:[Se.jsx("div",{className:"balance-icon",children:"\ud83e\ude99"}),Se.jsxs("div",{className:"balance-details",children:[Se.jsx("h4",{children:e.symbol}),Se.jsx("p",{className:"balance-value",children:e.balance}),Se.jsx("p",{className:"balance-usd",children:e.value})]})]},t))]})]}),p&&Se.jsxs("div",{className:"resources-section",children:[Se.jsx("h3",{children:"Resources"}),Se.jsxs("div",{className:"resources-grid",children:[Se.jsxs("div",{className:"resource-card",children:[Se.jsxs("div",{className:"resource-header",children:[Se.jsx("span",{className:"resource-icon",children:"\u26a1"}),Se.jsx("h4",{children:"CPU"})]}),Se.jsx("div",{className:"resource-bar",children:Se.jsx("div",{className:"resource-fill",style:{width:p.cpu.used/p.cpu.max*100+"%"}})}),Se.jsxs("div",{className:"resource-stats",children:[Se.jsxs("span",{children:[p.cpu.used.toLocaleString()," / ",p.cpu.max.toLocaleString()]}),Se.jsxs("span",{children:[(p.cpu.used/p.cpu.max*100).toFixed(1),"%"]})]})]}),Se.jsxs("div",{className:"resource-card",children:[Se.jsxs("div",{className:"resource-header",children:[Se.jsx("span",{className:"resource-icon",children:"\ud83c\udf10"}),Se.jsx("h4",{children:"NET"})]}),Se.jsx("div",{className:"resource-bar",children:Se.jsx("div",{className:"resource-fill",style:{width:p.net.used/p.net.max*100+"%"}})}),Se.jsxs("div",{className:"resource-stats",children:[Se.jsxs("span",{children:[p.net.used.toLocaleString()," / ",p.net.max.toLocaleString()]}),Se.jsxs("span",{children:[(p.net.used/p.net.max*100).toFixed(1),"%"]})]})]}),Se.jsxs("div",{className:"resource-card",children:[Se.jsxs("div",{className:"resource-header",children:[Se.jsx("span",{className:"resource-icon",children:"\ud83d\udcbe"}),Se.jsx("h4",{children:"RAM"})]}),Se.jsx("div",{className:"resource-bar",children:Se.jsx("div",{className:"resource-fill",style:{width:p.ram.used/p.ram.max*100+"%"}})}),Se.jsxs("div",{className:"resource-stats",children:[Se.jsxs("span",{children:[(p.ram.used/1024).toFixed(2)," KB / ",(p.ram.max/1024).toFixed(2)," KB"]}),Se.jsxs("span",{children:[(p.ram.used/p.ram.max*100).toFixed(1),"%"]})]})]})]})]}),Se.jsxs("div",{className:"stats-grid",children:[Se.jsxs("div",{className:"stat-card",children:[Se.jsx("div",{className:"stat-icon",children:"\ud83c\udfa8"}),Se.jsxs("div",{className:"stat-details",children:[Se.jsx("h3",{children:"Total Assets"}),Se.jsx("p",{className:"stat-value",children:r.totalAssets})]})]}),Se.jsxs("div",{className:"stat-card",children:[Se.jsx("div",{className:"stat-icon",children:"\ud83d\udcda"}),Se.jsxs("div",{className:"stat-details",children:[Se.jsx("h3",{children:"Collections"}),Se.jsx("p",{className:"stat-value",children:r.uniqueCollections})]})]}),Se.jsxs("div",{className:"stat-card",children:[Se.jsx("div",{className:"stat-icon",children:"\ud83d\udc8e"}),Se.jsxs("div",{className:"stat-details",children:[Se.jsx("h3",{children:"Estimated Value"}),Se.jsx("p",{className:"stat-value",children:r.totalValue})]})]}),Se.jsxs("div",{className:"stat-card",children:[Se.jsx("div",{className:"stat-icon",children:"\u2b50"}),Se.jsxs("div",{className:"stat-details",children:[Se.jsx("h3",{children:"Rare Assets"}),Se.jsx("p",{className:"stat-value",children:r.rareAssets})]})]})]}),Se.jsxs("div",{className:"collections-section",children:[Se.jsxs("h3",{children:["Collections (",n.collections.length,")"]}),Se.jsx("div",{className:"collections-list",children:n.collections.map((e,t)=>Se.jsxs("div",{className:"collection-item",onClick:()=>s(`/collections/${e}`),children:[Se.jsxs("div",{className:"user-collection-avatar",children:[k[e]?Se.jsx("img",{src:k[e],alt:`${e} avatar`,onError:e=>{e.currentTarget.style.display="none",e.currentTarget.nextElementSibling.style.display="flex"}}):null,Se.jsx("div",{className:"fallback-avatar",style:{display:k[e]?"none":"flex"},children:e.charAt(0).toUpperCase()})]}),Se.jsx("span",{className:"collection-name",children:e}),Se.jsx("span",{className:"collection-count",children:n.nftsOwned.filter(t=>t.collection===e).length})]},t))})]}),Se.jsxs("div",{className:"inventory-section",children:[Se.jsxs("div",{className:"inventory-header",children:[Se.jsxs("h3",{children:["NFT Inventory (",G.length,")"]}),Se.jsxs("div",{className:"filter-tabs",children:[Se.jsxs("button",{className:"filter-tab "+("all"===A?"active":""),onClick:()=>{P("all"),C(1)},children:["All (",n.nftsOwned.length,")"]}),Se.jsxs("button",{className:"filter-tab "+("pixals"===A?"active":""),onClick:()=>{P("pixals"),C(1)},children:["Pixals (",n.nftsOwned.filter(e=>"pixeljourney"===e.collection&&"pixals"===e.schema).length,")"]}),Se.jsxs("button",{className:"filter-tab "+("waxrock"===A?"active":""),onClick:()=>{P("waxrock"),C(1)},children:["WaxRock (",n.nftsOwned.filter(e=>{const t=e.data?.WaxRock;return"pixeljourney"===e.collection&&"pixals"===e.schema&&t&&"none"!==t}).length,")"]}),Se.jsxs("button",{className:"filter-tab "+("ingredients"===A?"active":""),onClick:()=>{P("ingredients"),C(1)},children:["Ingredients (",n.nftsOwned.filter(e=>"pixeljourney"===e.collection&&"ingredients"===e.schema).length,")"]})]}),"pixals"===A&&Se.jsxs("div",{className:"pixal-filters",children:[Se.jsx("h4",{children:"Filter by Traits"}),Se.jsx("div",{className:"filters-grid",children:Object.entries(F).map(([e,t])=>Se.jsxs("div",{className:"filter-group",children:[Se.jsx("label",{children:e}),Se.jsxs("select",{value:t,onChange:t=>{I(s=>({...s,[e]:t.target.value})),C(1)},children:[Se.jsxs("option",{value:"",children:["All ",e]}),$[e]?.map(e=>Se.jsx("option",{value:e,children:e},e))]})]},e))}),Se.jsx("button",{className:"clear-filters-btn",onClick:()=>{I({Body:"",Eyes:"",Head:"",Mouth:"",WaxRock:"",PixelPet:"",Background:"","Hats and Hair":"","Glasses and Masks":"","Special Accessories":""}),C(1)},children:"Clear All Filters"})]})]}),0===Y.length?Se.jsxs("div",{className:"empty-inventory",children:[Se.jsx("div",{className:"empty-icon",children:"\ud83d\udce6"}),Se.jsx("h3",{children:"No NFTs Found"}),Se.jsx("p",{children:"This user doesn't have any NFTs in the selected category."})]}):Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"nft-grid",children:Y.map(e=>Se.jsxs("div",{className:"nft-card",onClick:()=>(e=>{b(e),w(!0)})(e),children:[Se.jsx("div",{className:"nft-image",children:e.video?Se.jsx("video",{src:e.video,className:"nft-media",muted:!0,loop:!0,onMouseEnter:e=>e.currentTarget.play(),onMouseLeave:e=>e.currentTarget.pause(),onError:t=>{const s=document.createElement("img");s.src=e.image,s.className="nft-media",s.alt=e.name,s.loading="lazy",t.currentTarget.parentNode?.replaceChild(s,t.currentTarget)}}):Se.jsx("img",{src:e.image,alt:e.name,className:"nft-media",loading:"lazy"})}),Se.jsxs("div",{className:"nft-info",children:[Se.jsx("h4",{className:"nft-name",children:e.name}),Se.jsx("p",{className:"nft-collection",children:e.collection}),Se.jsxs("div",{className:"nft-schema-template",children:[Se.jsx("span",{className:"nft-schema",children:e.schema}),e.template_id&&Se.jsxs("span",{className:"nft-template",children:["T#",e.template_id]})]}),Se.jsxs("div",{className:"nft-details",children:[Se.jsxs("span",{className:"nft-mint",children:["#",e.template_mint]}),e.max_supply&&parseInt(e.max_supply)>0&&Se.jsxs("span",{className:"nft-supply",children:["/",e.max_supply]})]})]})]},e.asset_id))}),K>1&&Se.jsxs("div",{className:"pagination",children:[Se.jsx("button",{className:"pagination-btn",onClick:()=>V(S-1),disabled:1===S,children:"Previous"}),Se.jsx("div",{className:"pagination-numbers",children:Array.from({length:Math.min(5,K)},(e,t)=>{let s;return s=K<=5||S<=3?t+1:S>=K-2?K-4+t:S-2+t,Se.jsx("button",{className:"pagination-number "+(S===s?"active":""),onClick:()=>V(s),children:s},s)})}),Se.jsx("button",{className:"pagination-btn",onClick:()=>V(S+1),disabled:S===K,children:"Next"})]})]})]})]}),y&&Se.jsx(fs,{nft:y,isOpen:N,onClose:()=>{w(!1),b(null)}})]})},Ra=()=>{const{settings:e}=st(),{showSuccess:t,showError:s}=xt(),[a,n]=O.useState([]),[i,r]=O.useState(!1),[l,o]=O.useState(null),[c,d]=O.useState(!1),[u,h]=O.useState(new Set),[m,p]=O.useState(!1),[f,x]=O.useState(!1),[g,v]=O.useState(""),[j,y]=O.useState(""),[b,N]=O.useState(1),[w,k]=O.useState(!1),[_,S]=O.useState(1),{isConnected:C,account:A,login:P,session:T}=Ie();O.useEffect(()=>{const e=setTimeout(()=>{y(g)},300);return()=>clearTimeout(e)},[g]);const E=O.useCallback(async(e=1,t=!1)=>{if(A){1===e&&r(!0);try{const s=await dt.getUserInventoryPaginated(A,e,100),a=s.assets.map(e=>({asset_id:e.asset_id,name:e.name,img:e.image,video:e.video||e.traits?.video||void 0,collection:{name:e.collection,collection_name:e.collection},schema:{schema_name:e.schema},template:{template_id:e.template_id?.toString()||"0",max_supply:(e.max_supply||0).toString()},data:e.traits||{},mint_number:e.template_mint})).filter(e=>Rs.isPackNFT(e));t?n(e=>[...e,...a]):(n(a),N(1)),k(100===s.assets.length),S(e)}catch(a){console.error("Error loading packs:",a),s("Failed to load pack inventory")}finally{r(!1)}}},[A,s]);O.useEffect(()=>{C&&A?E(1,!1):n([])},[C,A,E]);const F=O.useMemo(()=>{if(!j)return a;const e=j.toLowerCase();return a.filter(t=>t.name.toLowerCase().includes(e)||t.collection.collection_name.toLowerCase().includes(e)||t.schema.schema_name.toLowerCase().includes(e))},[a,j]),I=O.useMemo(()=>{const e=20*(b-1),t=e+20;return F.slice(e,t)},[F,b,20]),$=Math.ceil(F.length/20),L=F.length,M=e=>{N(e),window.scrollTo({top:0,behavior:"smooth"})};return C?Se.jsxs("div",{className:"page-content packs-page",children:[Se.jsxs("div",{className:"page-header",children:[Se.jsx("h1",{children:"Pack Inventory"}),Se.jsx("p",{children:"Manage and unpack your NFT packs, chests, boxes, and containers"})]}),Se.jsxs("div",{className:"inventory-controls",children:[Se.jsx("div",{className:"search-container",children:Se.jsx("input",{type:"text",placeholder:"Search packs...",value:g,onChange:e=>v(e.target.value),className:"search-input"})}),Se.jsxs("div",{className:"control-buttons",children:[Se.jsx("button",{className:"multi-select-btn "+(m?"active":""),onClick:()=>{p(!m),h(new Set)},children:m?"\u2713 Multi-Select":"Multi-Select"}),m&&u.size>0&&Se.jsxs("button",{className:"bulk-btn unpack-btn",onClick:()=>{0!==u.size&&x(!0)},children:["\ud83d\udce6 Unpack (",u.size,")"]})]})]}),i&&Se.jsxs("div",{className:"loading-container",children:[Se.jsx("div",{className:"loading-spinner"}),Se.jsx("p",{children:"Loading your packs..."})]}),!i&&Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"inventory-page-stats",children:Se.jsxs("p",{children:[L," packs found"]})}),a.length>0?Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"inventory-page-grid",children:I.map(t=>Se.jsxs("div",{className:"nft-card "+(m&&u.has(t.asset_id)?"selected":""),onClick:()=>(e=>{if(m){const t=new Set(u);t.has(e.asset_id)?t.delete(e.asset_id):t.add(e.asset_id),h(t)}else o(e),d(!0)})(t),children:[m&&Se.jsx("div",{className:"selection-checkbox",children:Se.jsx("input",{type:"checkbox",checked:u.has(t.asset_id),onChange:()=>{}})}),Se.jsxs("div",{className:"nft-image-container",children:[Se.jsx(Qt,{imageUrl:cs({img:t.img}),videoUrl:t.video?ds({video:t.video}):void 0,alt:t.name,className:"w-full h-full object-cover",controls:e.showVideoControls,autoPlay:e.autoPlayVideos,muted:e.muteVideos}),Se.jsx("div",{className:"pack-indicator",children:"\ud83d\udce6 Pack"})]}),Se.jsxs("div",{className:"nft-info",children:[Se.jsx("h3",{className:"nft-name",children:t.name}),Se.jsx("p",{className:"nft-collection",children:"string"==typeof t.collection?t.collection:t.collection?.collection_name||t.collection?.name||"Unknown"}),Se.jsx("p",{className:"nft-schema",children:t.schema.schema_name}),t.mint_number&&Se.jsxs("p",{className:"nft-mint",children:["Mint #",t.mint_number]})]})]},t.asset_id))}),w&&Se.jsx("div",{className:"load-more-container",children:Se.jsx("button",{className:"load-more-btn",onClick:()=>{w&&E(_+1,!0)},children:"Load More Packs"})}),$>1&&Se.jsxs("div",{className:"pagination-container",children:[Se.jsxs("div",{className:"pagination",children:[Se.jsx("button",{className:"pagination-btn",onClick:()=>M(b-1),disabled:1===b,children:"Previous"}),Array.from({length:Math.min(5,$)},(e,t)=>{const s=t+1;return Se.jsx("button",{className:"pagination-btn "+(b===s?"active":""),onClick:()=>M(s),children:s},s)}),Se.jsx("button",{className:"pagination-btn",onClick:()=>M(b+1),disabled:b===$,children:"Next"})]}),Se.jsxs("div",{className:"pagination-info",children:["Page ",b," of ",$]})]})]}):Se.jsxs("div",{className:"empty-state",children:[Se.jsx("div",{className:"empty-icon",children:"\ud83d\udce6"}),Se.jsx("h3",{children:"No Packs Found"}),Se.jsx("p",{children:"You don't have any pack NFTs in your inventory yet."}),Se.jsx("p",{children:"Packs, chests, boxes, and containers will appear here when you acquire them."})]})]}),l&&Se.jsx(fs,{nft:{asset_id:l.asset_id,name:l.name,image:l.img,collection:l.collection.collection_name,schema:l.schema.schema_name,template_mint:l.mint_number,traits:l.data,price:null,sale_id:null,seller:null},isOpen:c,onClose:()=>{d(!1),o(null)}}),Se.jsx(Ws,{selectedNFTs:a.filter(e=>u.has(e.asset_id)),isOpen:f,onClose:()=>{x(!1)},userAccount:A||"",walletSession:T,onUnpackComplete:()=>{h(new Set),p(!1),E(1,!1),t("Packs unpacked successfully!")}})]}):Se.jsxs("div",{className:"page-content",children:[Se.jsxs("div",{className:"page-header",children:[Se.jsx("h1",{children:"Pack Inventory"}),Se.jsx("p",{children:"Manage and unpack your NFT packs"})]}),Se.jsx("div",{className:"connect-wallet-prompt",children:Se.jsxs("div",{className:"connect-card",children:[Se.jsx("h3",{children:"Connect Your Wallet"}),Se.jsx("p",{children:"Connect your WAX wallet to view your pack inventory"}),Se.jsx("button",{className:"connect-btn",onClick:P,children:"Connect Wallet"})]})})]})},Wa=()=>{const[e,t]=O.useState([]),[s,a]=O.useState(!0),[n,i]=O.useState({}),[r,l]=O.useState(null),[o,c]=O.useState(""),[d,u]=O.useState("below");O.useEffect(()=>{h()},[]),O.useEffect(()=>{e.length>0&&(async()=>{const t={};for(const s of e)s.nft.price&&(t[s.nft.asset_id]=await Ye.convertWaxToUSDAsync(s.nft.price));i(t)})()},[e]);const h=async()=>{try{a(!0);const e=await wt.getWatchlist();t(e)}catch(e){De.error("Error loading watchlist","Watchlist",e)}finally{a(!1)}},m=e=>e?e>0?"\u2197":"\u2198":"";return s?Se.jsx("div",{className:"watchlist-container",children:Se.jsxs("div",{className:"watchlist-loading",children:[Se.jsx("div",{className:"loading-spinner"}),Se.jsx("p",{children:"Loading your watchlist..."})]})}):Se.jsxs("div",{className:"watchlist-container",children:[Se.jsxs("div",{className:"watchlist-header",children:[Se.jsx("h1",{children:"My Watchlist"}),Se.jsx("p",{className:"watchlist-subtitle",children:"Track your favorite NFTs and get notified when prices change"})]}),0===e.length?Se.jsxs("div",{className:"watchlist-empty",children:[Se.jsx("div",{className:"empty-icon",children:"\ud83d\udc41\ufe0f"}),Se.jsx("h3",{children:"Your watchlist is empty"}),Se.jsx("p",{children:"Add NFTs to your watchlist from the marketplace to track their prices"}),Se.jsx("a",{href:"/marketplace",className:"btn-primary",children:"Browse Marketplace"})]}):Se.jsx("div",{className:"watchlist-grid",children:e.map(e=>{return Se.jsxs("div",{className:"watchlist-card",children:[Se.jsxs("div",{className:"watchlist-card-image",children:[Se.jsx("img",{src:e.nft.image,alt:e.nft.name,onError:e=>{e.target.src="https://pixeljourney.xyz/img/toppixals/10.webp"}}),e.targetPrice&&Se.jsx("div",{className:"alert-badge",children:Se.jsx("span",{className:"alert-icon",children:"\ud83d\udd14"})})]}),Se.jsxs("div",{className:"watchlist-card-content",children:[Se.jsx("h3",{className:"nft-name",children:e.nft.name}),Se.jsx("p",{className:"nft-collection",children:e.nft.collection}),Se.jsxs("div",{className:"price-info",children:[Se.jsxs("div",{className:"current-price",children:[Se.jsx("span",{className:"price-label",children:"Current Price:"}),Se.jsxs("div",{className:"price-values",children:[Se.jsxs("span",{className:"wax-price",children:[e.nft.price," WAX"]}),n[e.nft.asset_id]&&Se.jsxs("span",{className:"usd-price",children:["$",n[e.nft.asset_id]]})]})]}),void 0!==e.priceChange&&Se.jsxs("div",{className:"price-change",style:{color:(s=e.priceChange,s?s>0?"var(--success-color)":"var(--error-color)":"var(--text-secondary)")},children:[Se.jsx("span",{className:"change-icon",children:m(e.priceChange)}),Se.jsxs("span",{children:[Math.abs(e.priceChange).toFixed(2),"%"]})]})]}),e.targetPrice&&Se.jsxs("div",{className:"price-alert-info",children:[Se.jsxs("span",{className:"alert-label",children:["Alert when price is ",e.alertType,":"]}),Se.jsxs("span",{className:"alert-price",children:[e.targetPrice," WAX"]})]}),Se.jsxs("div",{className:"watchlist-actions",children:[e.targetPrice?Se.jsx("button",{className:"btn-secondary btn-sm",onClick:()=>(async e=>{try{await wt.removePriceAlert(e),t(t=>t.map(t=>t.nft.asset_id===e?{...t,targetPrice:void 0,alertType:"any"}:t))}catch(s){De.error("Error removing price alert","Watchlist",s)}})(e.nft.asset_id),children:"Remove Alert"}):Se.jsx("button",{className:"btn-primary btn-sm",onClick:()=>l(e.nft.asset_id),children:"Add Price Alert"}),Se.jsx("button",{className:"btn-danger btn-sm",onClick:()=>(async e=>{try{await wt.removeFromWatchlist(e),t(t=>t.filter(t=>t.nft.asset_id!==e))}catch(s){De.error("Error removing from watchlist","Watchlist",s)}})(e.nft.asset_id),children:"Remove"})]})]}),r===e.nft.asset_id&&Se.jsxs("div",{className:"price-alert-form",children:[Se.jsx("h4",{children:"Set Price Alert"}),Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{children:"Alert Type:"}),Se.jsxs("select",{value:d,onChange:e=>u(e.target.value),children:[Se.jsx("option",{value:"below",children:"Price drops below"}),Se.jsx("option",{value:"above",children:"Price rises above"}),Se.jsx("option",{value:"any",children:"Any price change"})]})]}),"any"!==d&&Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{children:"Target Price (WAX):"}),Se.jsx("input",{type:"number",step:"0.01",value:o,onChange:e=>c(e.target.value),placeholder:"Enter price in WAX"})]}),Se.jsxs("div",{className:"form-actions",children:[Se.jsx("button",{className:"btn-primary btn-sm",onClick:()=>(async e=>{if(o)try{await wt.setPriceAlert(e,{targetPrice:parseFloat(o),alertType:d,enabled:!0}),t(t=>t.map(t=>t.nft.asset_id===e?{...t,targetPrice:parseFloat(o),alertType:d}:t)),l(null),c("")}catch(s){De.error("Error adding price alert","Watchlist",s)}})(e.nft.asset_id),disabled:"any"!==d&&!o,children:"Set Alert"}),Se.jsx("button",{className:"btn-secondary btn-sm",onClick:()=>l(null),children:"Cancel"})]})]})]},e.nft.asset_id);var s})})]})},Oa=()=>{const e=[{title:"Pixel Journey",url:"https://pixeljourney.xyz",icon:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("circle",{cx:"12",cy:"12",r:"10"}),Se.jsx("path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}),Se.jsx("line",{x1:"9",y1:"9",x2:"9.01",y2:"9"}),Se.jsx("line",{x1:"15",y1:"9",x2:"15.01",y2:"9"})]})},{title:"Documentation",url:"https://docs.pixeljourney.xyz",icon:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),Se.jsx("polyline",{points:"14,2 14,8 20,8"}),Se.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),Se.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),Se.jsx("polyline",{points:"10,9 9,9 8,9"})]})},{title:"Discord",url:"http://discord.gg/pixel-journey-1130670500776005734",icon:Se.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})})},{title:"Twitter/X",url:"https://x.com/PXJourney",icon:Se.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})}];return Se.jsx("footer",{className:"footer",children:Se.jsxs("div",{className:"footer-container",children:[Se.jsxs("div",{className:"footer-content",children:[Se.jsxs("div",{className:"footer-brand",children:[Se.jsxs("a",{href:"https://pixeljourney.xyz",className:"footer-logo",target:"_blank",rel:"noopener noreferrer",children:[Se.jsx("img",{src:"https://pixeljourney.xyz/img/logo.png",alt:"Pixel Journey",className:"footer-logo-image"}),Se.jsx("span",{className:"footer-logo-text",children:"Pixel Journey"})]}),Se.jsx("p",{className:"footer-description",children:"Explore the Pixel Journey ecosystem - a comprehensive NFT marketplace and gaming platform across multiple blockchains."})]}),Se.jsxs("div",{className:"footer-section footer-center",children:[Se.jsx("h3",{className:"footer-section-title",children:"PXJourney across Web3"}),Se.jsxs("div",{className:"blockchain-grid",children:[Se.jsxs("a",{href:"https://opensea.io/collection/pixeljourney-eth",target:"_blank",rel:"noopener noreferrer",className:"blockchain-item",children:[Se.jsx("img",{src:"https://pixeljourney.xyz/img/blockchain-icons/ethereum.svg",alt:"Ethereum",className:"blockchain-logo"}),Se.jsx("span",{className:"blockchain-name",children:"Ethereum"})]}),Se.jsxs("a",{href:"https://opensea.io/collection/pixeljourney-polygon",target:"_blank",rel:"noopener noreferrer",className:"blockchain-item",children:[Se.jsx("img",{src:"https://pixeljourney.xyz/img/blockchain-icons/polygon.jpeg",alt:"Polygon",className:"blockchain-logo"}),Se.jsx("span",{className:"blockchain-name",children:"Polygon"})]}),Se.jsxs("a",{href:"https://opensea.io/collection/pixeljourney-base",target:"_blank",rel:"noopener noreferrer",className:"blockchain-item",children:[Se.jsx("img",{src:"https://pixeljourney.xyz/img/blockchain-icons/base.jpg",alt:"Base",className:"blockchain-logo"}),Se.jsx("span",{className:"blockchain-name",children:"Base"})]}),Se.jsxs("a",{href:"https://nft.monbase.com/collections/66c4eb2ca339b05c5a660e44/detail",target:"_blank",rel:"noopener noreferrer",className:"blockchain-item",children:[Se.jsx("img",{src:"https://pixeljourney.xyz/img/blockchain-icons/BSC.png",alt:"BNB Chain",className:"blockchain-logo"}),Se.jsx("span",{className:"blockchain-name",children:"BNB Chain"})]})]}),Se.jsx("div",{className:"bridge-section",children:Se.jsx("a",{href:"https://bridge.mycloudwallet.com/",target:"_blank",rel:"noopener noreferrer",className:"bridge-link",children:"Bridge Now"})})]}),Se.jsxs("div",{className:"footer-section footer-wax",children:[Se.jsx("h3",{className:"footer-section-title",children:Se.jsx("a",{href:"https://wax.io/",target:"_blank",rel:"noopener noreferrer",className:"wax-title-link",children:"PXJourney across WAX"})}),Se.jsxs("div",{className:"wax-dapps-grid",children:[Se.jsxs("a",{href:"https://market.pixeljourney.xyz",target:"_blank",rel:"noopener noreferrer",className:"wax-dapp-item purple-glow",children:[Se.jsx("span",{className:"dapp-icon",children:"\ud83d\udecd\ufe0f"}),Se.jsx("span",{className:"dapp-name",children:"PxMarket"})]}),Se.jsxs("a",{href:"https://stake.pixeljourney.xyz",target:"_blank",rel:"noopener noreferrer",className:"wax-dapp-item green-glow",children:[Se.jsx("span",{className:"dapp-icon",children:"\ud83e\uddd1\u200d\ud83c\udf3e"}),Se.jsx("span",{className:"dapp-name",children:"PxStaking"})]}),Se.jsxs("a",{href:"https://lb.pixeljourney.xyz",target:"_blank",rel:"noopener noreferrer",className:"wax-dapp-item golden-glow",children:[Se.jsx("span",{className:"dapp-icon",children:"\ud83c\udfc6"}),Se.jsx("span",{className:"dapp-name",children:"PxLeaderboards"})]}),Se.jsxs(z,{to:"/pxcrafting",className:"wax-dapp-item craft-glow",children:[Se.jsx("span",{className:"dapp-icon",children:"\u267b\ufe0f"}),Se.jsx("span",{className:"dapp-name",children:"PxCraft"})]})]}),Se.jsx("div",{className:"journey-section",children:Se.jsx(z,{to:"/journeymap",className:"journey-link",children:"Journey Map"})})]}),Se.jsxs("div",{className:"footer-section footer-right",children:[Se.jsx("h4",{className:"footer-title",children:"Quick Links"}),Se.jsx("div",{className:"footer-links",children:e.map((e,t)=>Se.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"footer-link",children:[Se.jsx("span",{className:"footer-link-icon",children:e.icon}),e.title]},t))})]})]}),Se.jsx("div",{className:"footer-bottom",children:Se.jsxs("div",{className:"footer-bottom-content",children:[Se.jsx("p",{className:"footer-copyright",children:"\xa9 2025 Pixel Journey. All rights reserved."}),Se.jsx("div",{className:"footer-bottom-links",children:Se.jsxs("span",{className:"footer-note",children:["Requires a Pixal PFP to unlock full market access",Se.jsx("br",{}),Se.jsx("small",{children:"Version: v0.2.4 Alpha Test"})]})})]})})]})})},Da=D.memo(()=>{const e=B(),{settings:t}=st(),[s,a]=O.useState("activity"),[n,i]=O.useState([]),[r,l]=O.useState([]),[o,c]=O.useState(null),[d,u]=O.useState(null),[h,m]=O.useState([]),[p,f]=O.useState([]),[x,g]=O.useState(!1),[v,j]=O.useState(null),[y,b]=O.useState(!1),N=async()=>{try{g(!0),j(null);const e=await dt.getRecentSales(50);i(e.map(e=>{const t=e.assets[0];return{sale_id:e.sale_id,asset_id:t?.asset_id||"",collection_name:t?.collection?.collection_name||"",schema_name:t?.schema?.schema_name||"",template_id:t?.template?.template_id||"",asset_name:t?.name||"",seller:e.seller||"",buyer:e.buyer||"",price:e.listing_price||"0",updated_at_time:e.updated_at_time||"",state:e.state||0,image:t?.data?.img||void 0,video:t?.data?.video||void 0}}))}catch(e){console.error("Error loading activity data:",e),j("Failed to load activity data")}finally{g(!1)}},w=async()=>{try{g(!0),j(null);const e=await dt.getCollections({limit:20,whitelistOnly:!0});if(e.length>0){const t=e.slice(0,10).map(async e=>{try{const t=await dt.getCollectionStats(e.collection_name);return{collection_name:e.collection_name,assets:"0",burned:"0",templates:"0",schemas:"0",volume:t?.volume||"0",sales:t?.sales||"0",floor_price:t?.floor||"0"}}catch{return{collection_name:e.collection_name,assets:"0",burned:"0",templates:"0",schemas:"0",volume:"0",sales:"0",floor_price:"0"}}}),s=await Promise.all(t);l(s)}const t=await dt.getMarketStats();if(t&&t.results&&t.results.length>0){const e=t.results[t.results.length-1];c({total_sales:e.sales||"0",total_volume:e.volume||"0",total_assets:"0",active_listings:"0"})}const[s,a,n]=await Promise.all([dt.getNFTTradingStats(),dt.getTopCollectionsByVolume(10),dt.getRecentNFTTrades(20)]);s&&u({dailyVolume:s.dailyVolume||"0",dailySales:s.dailySales||0,totalTransactions:s.totalTransactions||0,activeListings:s.activeListings||0,averagePrice:s.averagePrice||"0",topCollectionsByVolume:a.map(e=>({collection_name:e.collection_name,volume_24h:"0",sales_24h:0,floor_price:"0",assets_count:"0"}))}),f(a.map(e=>({collection_name:e.collection_name,volume_24h:"0",sales_24h:0,floor_price:"0",assets_count:"0"}))||[]),m((n||[]).map(e=>({sale_id:e.sale_id,collection_name:e.collection_name||"",asset_name:String(e.assets?.[0]?.data?.name||e.assets?.[0]?.template?.immutable_data?.name||"Unknown Asset"),price:String(e.listing_price||e.price?.amount||"0"),buyer:e.buyer||"",seller:e.seller||"",timestamp:e.updated_at_time||""})))}catch(e){console.error("Error loading stats data:",e),j("Failed to load statistics data")}finally{g(!1)}},k=O.useCallback(async()=>{b(!0),"activity"===s?await N():await w(),b(!1)},[s]),_=O.useCallback(t=>{e(`/user-profile-lookup?user=${encodeURIComponent(t)}`)},[e]),S=O.useCallback(t=>{e(`/assets/${t}`)},[e]),C=O.useCallback(t=>{e(`/collections/${encodeURIComponent(t)}`)},[e]),A=O.useCallback(t=>{e(`/listings/${t}`)},[e]),P=O.useCallback(t=>{e(`/listings/${t}`)},[e]);O.useEffect(()=>{"activity"===s?N():w()},[s]);const T=e=>{if("string"==typeof e&&e.includes("WAX"))return e;const t=parseFloat(e)/1e8;return Me(t)},E=e=>{const t=parseInt(e);return t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}K`:t.toString()},F=e=>new Date(1e3*parseInt(e)).toLocaleString();return Se.jsxs("div",{className:"activity-stats-page",children:[Se.jsxs("div",{className:"activity-stats-header",children:[Se.jsx("h1",{className:"activity-stats-title",children:"Market Activity & Statistics"}),Se.jsx("p",{className:"activity-stats-subtitle",children:"Real-time marketplace data and analytics"})]}),Se.jsxs("div",{className:"activity-stats-tabs",children:[Se.jsxs("button",{className:"tab-btn "+("activity"===s?"active":""),onClick:()=>a("activity"),children:[Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("path",{d:"M3 3v18h18"}),Se.jsx("path",{d:"M7 12l4-4 4 4 6-6"})]}),"Activity Feed"]}),Se.jsxs("button",{className:"tab-btn "+("stats"===s?"active":""),onClick:()=>a("stats"),children:[Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),Se.jsx("line",{x1:"9",y1:"9",x2:"9",y2:"15"}),Se.jsx("line",{x1:"15",y1:"11",x2:"15",y2:"15"})]}),"Statistics"]}),Se.jsxs("button",{className:"refresh-btn "+(y?"refreshing":""),onClick:k,disabled:y,children:[Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("polyline",{points:"23 4 23 10 17 10"}),Se.jsx("polyline",{points:"1 20 1 14 7 14"}),Se.jsx("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})]}),y?"Refreshing...":"Refresh"]})]}),v&&Se.jsxs("div",{className:"error-message",children:[Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("circle",{cx:"12",cy:"12",r:"10"}),Se.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),Se.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),v]}),"activity"===s&&Se.jsxs("div",{className:"activity-content",children:[Se.jsxs("div",{className:"section-header",children:[Se.jsx("h2",{children:"Recent Sales"}),Se.jsx("p",{children:"Latest NFT sales across all collections"})]}),x?Se.jsxs("div",{className:"loading-state",children:[Se.jsx("div",{className:"spinner"}),Se.jsx("p",{children:"Loading recent sales..."})]}):Se.jsxs("div",{className:"sales-feed",children:[n.map(e=>Se.jsxs("div",{className:"sale-item clickable-sale",onClick:()=>A(e.sale_id),children:[Se.jsx("div",{className:"sale-media",children:Se.jsx(Qt,{imageUrl:e.image,videoUrl:e.video,alt:e.asset_name||`Asset #${e.asset_id}`,className:"sale-image",enableAnimations:t.enableAnimatedNFTs})}),Se.jsxs("div",{className:"sale-info",children:[Se.jsxs("div",{className:"sale-asset",children:[Se.jsx("h4",{className:"clickable-asset-name",onClick:t=>{t.stopPropagation(),S(e.asset_id)},children:e.asset_name||`Asset #${e.asset_id}`}),Se.jsx("p",{className:"sale-collection clickable-collection",onClick:t=>{t.stopPropagation(),C(e.collection_name)},children:e.collection_name})]}),Se.jsxs("div",{className:"sale-details",children:[Se.jsx("div",{className:"sale-price",children:T(e.price)}),Se.jsx("div",{className:"sale-time",children:F(e.updated_at_time)}),Se.jsx("div",{className:"sale-status",children:3===e.state?Se.jsx("span",{className:"status-sold",children:"\u2705 Sold"}):2===e.state?Se.jsx("span",{className:"status-canceled",children:"\u274c Canceled"}):(e.state,Se.jsx("span",{className:"status-active",children:"\ud83d\udd04 Active"}))})]})]}),Se.jsxs("div",{className:"sale-parties",children:[Se.jsxs("div",{className:"sale-party",children:[Se.jsx("span",{className:"party-label",children:"Seller:"}),Se.jsx("span",{className:"party-name clickable",onClick:t=>{t.stopPropagation(),_(e.seller)},children:e.seller})]}),Se.jsxs("div",{className:"sale-party",children:[Se.jsx("span",{className:"party-label",children:"Buyer:"}),Se.jsx("span",{className:"party-name clickable",onClick:t=>{t.stopPropagation(),_(e.buyer)},children:e.buyer})]}),Se.jsxs("div",{className:"sale-party",children:[Se.jsx("span",{className:"party-label",children:"Sale ID:"}),Se.jsxs("span",{className:"sale-id-link clickable",onClick:t=>{t.stopPropagation(),A(e.sale_id)},title:"View sale details",children:[e.sale_id.slice(0,8),"..."]})]})]})]},e.sale_id)),0===n.length&&!x&&Se.jsxs("div",{className:"empty-state",children:[Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("circle",{cx:"12",cy:"12",r:"10"}),Se.jsx("path",{d:"M12 6v6l4 2"})]}),Se.jsx("h3",{children:"No recent sales"}),Se.jsx("p",{children:"No sales data available at the moment"})]})]})]}),"stats"===s&&Se.jsxs("div",{className:"stats-content",children:[o&&Se.jsxs("div",{className:"market-overview",children:[Se.jsx("h2",{children:"Market Overview"}),Se.jsxs("div",{className:"stats-grid",children:[Se.jsxs("div",{className:"stat-card",children:[Se.jsx("div",{className:"stat-value",children:E(o.total_sales)}),Se.jsx("div",{className:"stat-label",children:"Total Sales"})]}),Se.jsxs("div",{className:"stat-card",children:[Se.jsx("div",{className:"stat-value",children:T(o.total_volume)}),Se.jsx("div",{className:"stat-label",children:"Total Volume"})]}),Se.jsxs("div",{className:"stat-card",children:[Se.jsx("div",{className:"stat-value",children:E(o.total_assets)}),Se.jsx("div",{className:"stat-label",children:"Total Assets"})]}),Se.jsxs("div",{className:"stat-card",children:[Se.jsx("div",{className:"stat-value",children:E(o.active_listings)}),Se.jsx("div",{className:"stat-label",children:"Active Listings"})]})]})]}),d&&Se.jsxs("div",{className:"nft-trading-stats-section",children:[Se.jsx("h2",{children:"WAX NFT Trading Data"}),Se.jsxs("div",{className:"nft-stats-grid",children:[Se.jsxs("div",{className:"stat-card nft-card",children:[Se.jsxs("div",{className:"stat-value",children:[d.dailyVolume," WAX"]}),Se.jsx("div",{className:"stat-label",children:"24h Trading Volume"})]}),Se.jsxs("div",{className:"stat-card nft-card",children:[Se.jsx("div",{className:"stat-value",children:E(d.dailySales.toString())}),Se.jsx("div",{className:"stat-label",children:"24h Sales"})]}),Se.jsxs("div",{className:"stat-card nft-card",children:[Se.jsx("div",{className:"stat-value",children:E(d.activeListings.toString())}),Se.jsx("div",{className:"stat-label",children:"Active Listings"})]}),Se.jsxs("div",{className:"stat-card nft-card",children:[Se.jsxs("div",{className:"stat-value",children:[d.averagePrice," WAX"]}),Se.jsx("div",{className:"stat-label",children:"Average Sale Price"})]})]}),p.length>0&&Se.jsxs("div",{className:"top-collections-section",children:[Se.jsx("h3",{children:"Top Collections by Volume"}),Se.jsx("div",{className:"top-collections-grid",children:p.slice(0,6).map(e=>Se.jsxs("div",{className:"collection-card",children:[Se.jsx("div",{className:"collection-name",children:e.collection_name}),Se.jsxs("div",{className:"collection-volume",children:[e.volume_24h," WAX"]}),Se.jsxs("div",{className:"collection-sales",children:[e.sales_24h," sales"]}),Se.jsxs("div",{className:"collection-floor",children:["Floor: ",e.floor_price," WAX"]})]},e.collection_name))})]}),h.length>0&&Se.jsxs("div",{className:"recent-trades-section",children:[Se.jsx("h3",{children:"Recent NFT Trades"}),Se.jsx("div",{className:"recent-trades-list",children:h.slice(0,8).map(e=>Se.jsxs("div",{className:"trade-item clickable-trade",onClick:()=>P(e.sale_id),children:[Se.jsxs("div",{className:"trade-asset",children:[Se.jsx("span",{className:"asset-name clickable-asset-name",onClick:t=>{t.stopPropagation(),P(e.sale_id)},children:e.asset_name}),Se.jsx("span",{className:"collection-name clickable-collection",onClick:t=>{t.stopPropagation(),C(e.collection_name)},children:e.collection_name})]}),Se.jsxs("div",{className:"trade-price",children:[e.price," WAX"]}),Se.jsx("div",{className:"trade-time",children:F(e.timestamp)})]},e.sale_id))})]})]}),Se.jsxs("div",{className:"section-header",children:[Se.jsx("h2",{children:"Collection Statistics"}),Se.jsx("p",{children:"Performance metrics for top collections"})]}),x?Se.jsxs("div",{className:"loading-state",children:[Se.jsx("div",{className:"spinner"}),Se.jsx("p",{children:"Loading collection statistics..."})]}):Se.jsxs("div",{className:"collections-table",children:[Se.jsxs("div",{className:"table-header",children:[Se.jsx("div",{className:"table-cell",children:"Collection"}),Se.jsx("div",{className:"table-cell",children:"Assets"}),Se.jsx("div",{className:"table-cell",children:"Volume"}),Se.jsx("div",{className:"table-cell",children:"Sales"}),Se.jsx("div",{className:"table-cell",children:"Floor Price"})]}),r.map(e=>Se.jsxs("div",{className:"table-row",children:[Se.jsx("div",{className:"table-cell collection-name",children:e.collection_name}),Se.jsx("div",{className:"table-cell",children:E(e.assets)}),Se.jsx("div",{className:"table-cell",children:T(e.volume)}),Se.jsx("div",{className:"table-cell",children:E(e.sales)}),Se.jsx("div",{className:"table-cell",children:T(e.floor_price)})]},e.collection_name)),0===r.length&&!x&&Se.jsxs("div",{className:"empty-state",children:[Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),Se.jsx("line",{x1:"9",y1:"9",x2:"9",y2:"15"}),Se.jsx("line",{x1:"15",y1:"11",x2:"15",y2:"15"})]}),Se.jsx("h3",{children:"No statistics available"}),Se.jsx("p",{children:"Statistics data is currently unavailable"})]})]})]})]})});Da.displayName="ActivityStats";const za=new class{constructor(){M(this,"subscriptions",new Map),M(this,"pollInterval",null),M(this,"isPolling",!1),M(this,"POLL_INTERVAL",3e4),M(this,"MAX_REQUESTS_PER_MINUTE",30),M(this,"REQUEST_DELAY",2e3),M(this,"lastRequestTime",0),M(this,"requestCount",0),M(this,"requestResetTime",Date.now()+6e4),M(this,"auctionCache",new Map),M(this,"CACHE_DURATION",15e3)}subscribe(e,t){this.subscriptions.has(e)||this.subscriptions.set(e,[]);const s={auction_id:e,callback:t};return this.subscriptions.get(e).push(s),this.startPolling(),()=>{const t=this.subscriptions.get(e);if(t){const a=t.indexOf(s);a>-1&&t.splice(a,1),0===t.length&&this.subscriptions.delete(e)}0===this.subscriptions.size&&this.stopPolling()}}startPolling(){this.isPolling||(this.isPolling=!0,this.pollInterval=setInterval(()=>{this.pollAuctionUpdates()},this.POLL_INTERVAL))}stopPolling(){this.pollInterval&&(clearInterval(this.pollInterval),this.pollInterval=null),this.isPolling=!1}async pollAuctionUpdates(){const e=Array.from(this.subscriptions.keys());if(0!==e.length)try{this.clearExpiredCache();(await this.fetchAuctionUpdates(e)).forEach(e=>{const t=this.subscriptions.get(e.auction_id);t&&t.forEach(t=>{try{t.callback(e)}catch(s){Le.logError("AuctionService.pollAuctionUpdates.callback",s,{auctionId:e.auction_id})}})})}catch(t){Le.logError("AuctionService.pollAuctionUpdates",t,{auctionIds:e})}else this.stopPolling()}async fetchAuctionUpdates(e){const t=[],s=Date.now();s>this.requestResetTime&&(this.requestCount=0,this.requestResetTime=s+6e4);for(const n of e){const e=this.auctionCache.get(n);if(e&&s-e.timestamp<this.CACHE_DURATION){t.push(e.data);continue}if(this.requestCount>=this.MAX_REQUESTS_PER_MINUTE){Oe.warn("Rate limit reached, skipping auction","AUCTION",{auctionId:n}),e&&t.push(e.data);continue}const i=s-this.lastRequestTime;i<this.REQUEST_DELAY&&await new Promise(e=>setTimeout(e,this.REQUEST_DELAY-i));try{const e=`${dt.getCurrentAtomicEndpoint()}/atomicmarket/v1/auctions/${n}`,s=await dt.fetchWithRetry(e),a=await s.json();if(this.requestCount++,this.lastRequestTime=Date.now(),a.success&&a.data){const e=a.data,s={auction_id:n,current_bid:e.current_bid,bidder:e.current_bidder,end_time:e.end_time,status:this.getAuctionStatus(e),bid_count:e.bid_count||0,last_bid_time:e.updated_at_time};this.auctionCache.set(n,{data:s,timestamp:Date.now()}),t.push(s)}}catch(a){Le.logError("AuctionService.fetchAuctionUpdates.single",a,{auctionId:n}),e&&t.push(e.data)}}return t}getAuctionStatus(e){const t=Date.now(),s=new Date(e.end_time+"Z").getTime();return 3===e.state?"cancelled":t>s?"ended":"active"}async getAuctionBids(e){try{const t=await dt.getAuctions({limit:1});if(!t.success||!t.data.length)return[];const s=t.data[0].assets.map(e=>e.asset_id);return(await this.fetchAuctionBidHistory(e,s)).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime())}catch(t){return Le.logError("AuctionService.getAuctionBids",t,{auctionId:e}),[]}}async fetchAuctionBidHistory(e,t){try{const t=[He.WAX_CHAIN.EOSRIO,He.WAX_CHAIN.WAXSWEDEN,He.HYPERION[2]];for(const a of t)try{const t=await fetch(`${a}/v2/history/get_actions?account=atomicmarket&filter=atomicmarket:auctionbid&limit=100&sort=desc&after=${new Date(Date.now()-6048e5).toISOString()}`,{method:"GET",headers:{Accept:"application/json"}});if(!t.ok)continue;const s=await t.json(),n=[];if(s.actions)for(const a of s.actions)a.act?.data?.auction_id===e&&n.push({bidder:a.act.data.bidder||a.act.authorization?.[0]?.actor||"unknown",bid_amount:a.act.data.bid||"0.0000 WAX",timestamp:a.timestamp,transaction_id:a.trx_id});return n}catch(s){Oe.warn("Failed to fetch from endpoint","AUCTION",{endpoint:a,error:s});continue}return[]}catch(a){return Le.logError("AuctionService.fetchAuctionBidHistory",a,{auctionId:e,assetIds:t}),[]}}getTimeRemaining(e){const t=Date.now();let s;if(!e)return{total:0,days:0,hours:0,minutes:0,seconds:0,isExpired:!0};if(e.includes("T")&&!e.endsWith("Z"))s=new Date(e+"Z").getTime();else if(e.includes("T")&&e.endsWith("Z"))s=new Date(e).getTime();else{const t=parseInt(e);s=isNaN(t)?new Date(e).getTime():t>1e12?t:1e3*t}if(isNaN(s))return Oe.warn("Invalid endTime format","AUCTION",{endTime:e}),{total:0,days:0,hours:0,minutes:0,seconds:0,isExpired:!0};const a=s-t;if(a<=0)return{total:0,days:0,hours:0,minutes:0,seconds:0,isExpired:!0};return{total:a,days:Math.floor(a/864e5),hours:Math.floor(a%864e5/36e5),minutes:Math.floor(a%36e5/6e4),seconds:Math.floor(a%6e4/1e3),isExpired:!1}}formatTimeRemaining(e){const t=this.getTimeRemaining(e);return t.isExpired?"Auction ended":t.days>0?`${t.days}d ${t.hours}h ${t.minutes}m`:t.hours>0?`${t.hours}h ${t.minutes}m ${t.seconds}s`:t.minutes>0?`${t.minutes}m ${t.seconds}s`:`${t.seconds}s`}isEndingSoon(e){const t=this.getTimeRemaining(e);return!t.isExpired&&t.total<3e5}clearExpiredCache(){const e=Date.now();for(const[t,s]of this.auctionCache.entries())e-s.timestamp>2*this.CACHE_DURATION&&this.auctionCache.delete(t)}cleanup(){this.subscriptions.clear(),this.stopPolling(),this.auctionCache.clear()}},Ba=D.memo(()=>{const e=B(),{isConnected:t,account:s,session:a}=Ds(),{showSuccess:n,showError:i}=xt(),[r,l]=O.useState([]),[o,c]=O.useState(!0),[d,u]=O.useState(!1),[h,m]=O.useState(null),[p,f]=O.useState(1),[x,g]=O.useState(!0),[v,j]=O.useState(1),[y,b]=O.useState("all"),[N,w]=O.useState("created_desc"),[k,_]=O.useState(""),[S,C]=O.useState(""),[A,P]=O.useState(!1),[T,E]=O.useState(!1),[F,I]=O.useState(!1),[$,L]=O.useState(null),[M,R]=O.useState(""),[W,D]=O.useState(!1),[z,U]=O.useState(!1),[X,q]=O.useState(new Set),[H,J]=O.useState([]),[V,G]=O.useState(!1),[Y,K]=O.useState(""),[Q,Z]=O.useState(0),[ee,te]=O.useState(1),[se,ae]=O.useState(0),[ne,ie]=O.useState(0),[re,le]=O.useState(""),[oe,ce]=O.useState([]),de=O.useCallback(()=>{switch(N){case"price_asc":case"price_desc":return"price";default:return"created"}},[N]),ue=O.useCallback(()=>{switch(N){case"price_asc":case"created_asc":return"asc";default:return"desc"}},[N]),he=O.useCallback(async(e=1,t=!1)=>{try{1===e?(c(!0),f(1),g(!0)):u(!0),m(null);const s=await dt.getAuctions({state:1,limit:36,offset:36*(e-1),sort:de(),order:ue(),hide_empty_auctions:A,search:k||void 0,collection_name:S||void 0,collection_blacklist:"flinttffunko,onlyfanzgaly,farmerpetsco,fantaspeop",seller_blacklist:"dximg.wam,xpvrs.wam,5rrrc.wam,nnmnmnmnn.gm",symbol:"WAX"});if(!s.success||!s.data)throw new Error("Failed to fetch auctions data");const a=s.data.map(e=>({auction_id:e.auction_id,asset_id:e.asset_id,seller:e.seller,price:e.price,end_time:e.end_time,collection_name:e.collection_name,template_id:e.template_id,asset_name:e.asset_name,image:e.image,current_bid:e.current_bid||null,bidder:e.bidder||null,collection_info:void 0}));l(t&&e>1?e=>[...e,...a]:a);const n=36,i=a.length===n;g(i),f(e),j(i?e+1:e)}catch(s){De.error("Error loading auctions","Auctions",s),m("Failed to load auctions. Please try again later.")}finally{c(!1),u(!1)}},[de,ue,A,k,S]),me=O.useCallback(()=>{!d&&x&&he(p+1,!0)},[he,p,x,d]),pe=O.useCallback(()=>{f(1),g(!0),he(1,!1)},[he]);O.useEffect(()=>{pe()},[pe,y,k,S,A,N]),O.useEffect(()=>{(async()=>{try{const e=await dt.getCollections({limit:50,whitelistOnly:!0});if(e&&e.length>0){const t=e.map(e=>({collection_name:e.collection_name,name:e.name||e.collection_name}));ce(t)}}catch(e){De.error("Failed to load collections","Auctions",e),ce([{collection_name:"pixeljourney",name:"Pixel Journey"},{collection_name:"friedfactory",name:"Fried Factory"}])}})()},[]);const fe=e=>{const t=parseFloat(e)/1e8;return Me(t)},xe=O.useMemo(()=>r.filter(e=>{if(k){const t=k.toLowerCase();if(!(e.asset_name?.toLowerCase().includes(t)||e.asset_id?.toString().includes(t)||e.collection_name?.toLowerCase().includes(t)))return!1}return(!S||e.collection_name===S)&&!!(!A||e.bidder&&e.current_bid&&"0"!==e.current_bid)}),[r,k,S,A]);O.useEffect(()=>{const e=[];return xe.forEach(t=>{const s=za.subscribe(t.auction_id,e=>{l(t=>t.map(t=>t.auction_id===e.auction_id?{...t,current_bid:e.current_bid||t.current_bid,bidder:e.bidder||t.bidder,end_time:e.end_time}:t))});e.push(s)}),()=>{e.forEach(e=>e())}},[xe]);const ge=()=>7*Q*24*60*60+24*ee*60*60+60*se*60+60*ne,ve=(e,t)=>{const s=Math.max(0,Math.min(t,je(e)));switch(e){case"weeks":Z(s);break;case"days":te(s);break;case"hours":ae(s);break;case"minutes":ie(s)}},je=e=>{switch(e){case"weeks":return 4;case"days":return 30;case"hours":return 23;case"minutes":return 59;default:return 0}};return Se.jsxs("div",{className:"auctions-page",children:[Se.jsx("div",{className:"page-header",children:Se.jsxs("div",{className:"header-content",children:[Se.jsxs("div",{className:"header-text",children:[Se.jsx("h1",{children:"Auctions"}),Se.jsx("p",{children:"Discover and bid on unique NFTs from the WAX ecosystem"})]}),Se.jsx("button",{className:"create-auction-btn",onClick:()=>{E(!0),s&&(async()=>{if(s){G(!0);try{const e=`${dt.atomicAssetsAPI}/atomicassets/v1/assets?owner=${s}&limit=100`,t=await dt.fetchWithRetry(e),a=await t.json();if(a.success&&a.data){const e=a.data.map(e=>({asset_id:e.asset_id,name:e.name||`${e.collection.collection_name} #${e.template_mint||e.asset_id}`,collection_name:e.collection.collection_name,image:e.data?.img?`https://ipfs.io/ipfs/${e.data.img}`:void 0,template_mint:e.template_mint,isSelected:!1}));J(e)}}catch(e){De.error("Error loading user assets","Auctions",e),J([])}finally{G(!1)}}})()},children:"Create Auction"})]})}),Se.jsxs("div",{className:"auctions-controls",children:[Se.jsx("div",{className:"search-section",children:Se.jsxs("div",{className:"search-input-wrapper",children:[Se.jsx("svg",{className:"search-icon",viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}),Se.jsx("input",{type:"text",placeholder:"Search auctions by name or asset ID...",value:k,onChange:e=>_(e.target.value),className:"search-input"})]})}),Se.jsxs("div",{className:"filters-section",children:[Se.jsxs("div",{className:"filter-group",children:[Se.jsx("label",{children:"Collection:"}),Se.jsxs("select",{value:S,onChange:e=>C(e.target.value),className:"collection-filter",children:[Se.jsx("option",{value:"",children:"All Collections"}),oe.map(e=>Se.jsx("option",{value:e.collection_name,children:e.name},e.collection_name))]})]}),Se.jsxs("div",{className:"filter-group",children:[Se.jsx("label",{children:"Sort by:"}),Se.jsxs("select",{value:N,onChange:e=>w(e.target.value),className:"sort-filter",children:[Se.jsx("option",{value:"price_asc",children:"Price: Low to High"}),Se.jsx("option",{value:"price_desc",children:"Price: High to Low"}),Se.jsx("option",{value:"created_desc",children:"Newest First"}),Se.jsx("option",{value:"created_asc",children:"Oldest First"})]})]}),Se.jsx("div",{className:"filter-group",children:Se.jsxs("label",{className:"checkbox-label",children:[Se.jsx("input",{type:"checkbox",checked:A,onChange:e=>P(e.target.checked)}),Se.jsx("span",{className:"checkmark"}),"Hide auctions without bids"]})})]}),Se.jsxs("div",{className:"auctions-filters",children:[Se.jsx("button",{className:"filter-btn "+("all"===y?"active":""),onClick:()=>b("all"),children:"All Auctions"}),Se.jsx("button",{className:"filter-btn "+("ending-soon"===y?"active":""),onClick:()=>b("ending-soon"),children:"Ending Soon"}),Se.jsx("button",{className:"filter-btn "+("new"===y?"active":""),onClick:()=>b("new"),children:"New Auctions"})]})]}),o&&Se.jsxs("div",{className:"loading-container",children:[Se.jsx("div",{className:"loading-spinner"}),Se.jsx("p",{children:"Loading auctions..."})]}),h&&Se.jsxs("div",{className:"error-container",children:[Se.jsx("p",{className:"error-message",children:h}),Se.jsx("button",{onClick:()=>he(),className:"retry-btn",children:"Try Again"})]}),!o&&!h&&0===xe.length&&r.length>0&&Se.jsxs("div",{className:"empty-state",children:[Se.jsx("h3",{children:"No Matching Auctions"}),Se.jsx("p",{children:"No auctions match your current filters. Try adjusting your search criteria."})]}),!o&&!h&&0===r.length&&Se.jsxs("div",{className:"empty-state",children:[Se.jsx("h3",{children:"No Active Auctions"}),Se.jsx("p",{children:"There are currently no active auctions. Check back later!"})]}),!o&&!h&&xe.length>0&&Se.jsx("div",{className:"auctions-grid",children:xe.map(a=>Se.jsxs("div",{className:"auction-card clickable-card",onClick:()=>e(`/auctions/${a.auction_id}`),children:[Se.jsxs("div",{className:"auction-image",children:[Se.jsx(Qt,{imageUrl:a.image,videoUrl:a.video,alt:a.asset_name,className:"auction-media",enableAnimations:!0}),Se.jsx("div",{className:"auction-timer",children:za.formatTimeRemaining(a.end_time)})]}),Se.jsxs("div",{className:"auction-info",children:[Se.jsx("h3",{className:"auction-title",children:a.asset_name}),Se.jsxs("div",{className:"auction-collection-info",children:[a.collection_info?.img&&Se.jsx("img",{src:a.collection_info.img,alt:a.collection_info.name,className:"collection-avatar"}),Se.jsxs("div",{className:"collection-details",children:[Se.jsx("p",{className:"collection-name",children:a.collection_info?.name||a.collection_name}),a.collection_info?.description&&Se.jsx("p",{className:"collection-description",children:a.collection_info.description.length>60?`${a.collection_info.description.substring(0,60)}...`:a.collection_info.description})]})]}),Se.jsxs("div",{className:"seller-info",children:[Se.jsx("span",{className:"label",children:"Seller: "}),Se.jsx("button",{onClick:t=>{t.stopPropagation(),e(`/user-profile-lookup?user=${encodeURIComponent(a.seller)}`)},className:"seller-account",children:a.seller})]}),Se.jsxs("div",{className:"auction-pricing",children:[Se.jsxs("div",{className:"current-bid",children:[Se.jsx("span",{className:"label",children:a.current_bid?"Current Bid:":"Starting Price:"}),Se.jsx("span",{className:"price",children:a.current_bid?fe(a.current_bid):fe(a.price)})]}),a.bidder&&Se.jsxs("div",{className:"bidder",children:[Se.jsx("span",{className:"label",children:"Top Bidder:"}),Se.jsx("button",{onClick:t=>{t.stopPropagation(),e(`/user-profile-lookup?user=${encodeURIComponent(a.bidder||"")}`)},className:"account",children:a.bidder})]})]}),Se.jsxs("div",{className:"auction-actions",children:[Se.jsx("button",{className:"bid-btn",onClick:e=>{e.stopPropagation(),(e=>{t&&s?e.seller!==s?(L(e),R(""),I(!0)):i("Invalid Action","You cannot bid on your own auction"):i("Wallet Required","Please connect your wallet to place bids")})(a)},disabled:!t||a.seller===s,children:t?a.seller===s?"Your Auction":"Place Bid":"Connect Wallet"}),Se.jsx("button",{className:"view-btn",onClick:t=>{t.stopPropagation(),(t=>{e(`/assets/${t.asset_id}`)})(a)},children:"View Details"})]})]})]},a.auction_id))}),!o&&!h&&xe.length>0&&Se.jsxs("div",{className:"pagination-container",children:[x&&Se.jsx("button",{className:"load-more-btn",onClick:me,disabled:d,children:d?Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"loading-spinner small"}),"Loading more..."]}):"Load More Auctions"}),Se.jsxs("div",{className:"pagination-info",children:[Se.jsxs("span",{children:["Page ",p," of ",v]}),Se.jsxs("span",{children:[xe.length," auctions loaded"]})]})]}),Se.jsxs("div",{className:"coming-soon-notice",children:[Se.jsx("h3",{children:"\ud83d\udea7 Integration in Progress"}),Se.jsx("p",{children:"Full AtomicMarket auction integration is currently being implemented. This page will soon display live auction data and allow bidding functionality."})]}),F&&$&&Se.jsx("div",{className:"modal-overlay",onClick:()=>I(!1),children:Se.jsxs("div",{className:"bid-modal-content",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"bid-modal-header",children:[Se.jsx("h2",{children:"Place Your Bid"}),Se.jsx("button",{className:"close-btn",onClick:()=>I(!1),children:"\xd7"})]}),Se.jsxs("div",{className:"bid-modal-body",children:[Se.jsxs("div",{className:"bid-auction-summary",children:[Se.jsxs("div",{className:"bid-asset-image",children:[Se.jsx(Qt,{imageUrl:$.image,videoUrl:$.video,alt:$.asset_name,className:"bid-modal-media",enableAnimations:!0}),Se.jsx("div",{className:"auction-timer-small",children:za.formatTimeRemaining($.end_time)})]}),Se.jsxs("div",{className:"bid-asset-info",children:[Se.jsx("h3",{children:$.asset_name}),Se.jsxs("div",{className:"bid-collection-info",children:[$.collection_info?.img&&Se.jsx("img",{src:$.collection_info.img,alt:$.collection_info.name,className:"collection-avatar-small"}),Se.jsx("span",{className:"collection-name",children:$.collection_info?.name||$.collection_name})]}),Se.jsxs("div",{className:"bid-current-info",children:[Se.jsxs("div",{className:"current-bid-display",children:[Se.jsx("span",{className:"label",children:$.current_bid?"Current Bid":"Starting Price"}),Se.jsx("span",{className:"amount",children:fe($.current_bid||$.price)})]}),$.bidder&&Se.jsxs("div",{className:"current-bidder",children:[Se.jsx("span",{className:"label",children:"Leading Bidder"}),Se.jsx("button",{onClick:t=>{t.stopPropagation(),e(`/user-profile-lookup?user=${encodeURIComponent($.bidder||"")}`)},className:"bidder-account",children:$.bidder})]})]})]})]}),Se.jsx("div",{className:"bid-input-section",children:Se.jsxs("div",{className:"bid-form-group",children:[Se.jsx("label",{children:"Your Bid Amount"}),Se.jsxs("div",{className:"bid-input-wrapper",children:[Se.jsx("input",{type:"number",value:M,onChange:e=>R(e.target.value),placeholder:"0.0000",step:"0.0001",min:$.current_bid&&$.bidder?parseFloat($.current_bid)/1e8+1e-4:parseFloat($.price)/1e8,className:"bid-amount-input",disabled:W}),Se.jsx("span",{className:"currency-label",children:"WAX"})]}),Se.jsxs("div",{className:"bid-requirements",children:[Se.jsx("p",{className:"minimum-bid",children:$.current_bid&&$.bidder?`Minimum: ${Me(parseFloat($.current_bid)/1e8+1e-4)}`:`Starting Price: ${Me(parseFloat($.price)/1e8)}`}),M&&Se.jsxs("p",{className:"bid-total",children:["Total: ",Me(parseFloat(M))]})]})]})}),Se.jsxs("div",{className:"previous-bids-section",children:[Se.jsx("h4",{children:"Bid History"}),Se.jsx("div",{className:"bids-list",children:$.bidder?Se.jsxs("div",{className:"bid-item",children:[Se.jsxs("div",{className:"bidder-info",children:[Se.jsx("button",{onClick:t=>{t.stopPropagation(),e(`/user-profile-lookup?user=${encodeURIComponent($.bidder||"")}`)},className:"bidder",children:$.bidder}),Se.jsx("span",{className:"bid-time",children:"Current leading bid"})]}),Se.jsx("span",{className:"bid-amount",children:fe($.current_bid||$.price)})]}):Se.jsx("div",{className:"no-bids",children:Se.jsx("p",{children:"No bids yet - be the first to bid!"})})})]}),Se.jsxs("div",{className:"bid-notice",children:[Se.jsx("div",{className:"notice-icon",children:"\ud83d\udca1"}),Se.jsx("div",{className:"notice-text",children:Se.jsxs("p",{children:[Se.jsx("strong",{children:"Important:"})," Ensure you have sufficient WAX balance for your bid. Bids are binding and cannot be cancelled."]})})]})]}),Se.jsxs("div",{className:"bid-modal-footer",children:[Se.jsx("button",{className:"cancel-bid-btn",onClick:()=>I(!1),disabled:W,children:"Cancel"}),Se.jsx("button",{className:"submit-bid-btn",onClick:async()=>{if(!$||!a||!s)return void i("Error","Please connect your wallet first");const e=parseFloat(M);if(isNaN(e)||e<=0)return void i("Invalid Bid","Please enter a valid bid amount");const t=parseFloat($.current_bid||$.price)/1e8,r=$.current_bid&&$.bidder;if(r&&e<=t)i("Invalid Bid",`Bid must be higher than current bid of ${Me(t)}`);else if(!r&&e<t)i("Invalid Bid",`Bid must be at least the starting price of ${Me(t)}`);else{D(!0);try{const t=`${e.toFixed(8)} WAX`,i={account:"atomicmarket",name:"auctionbid",authorization:[{actor:s,permission:Gt.safeGetPermission(a)}],data:{bidder:s,auction_id:$.auction_id,bid:t,taker_marketplace:"market.pxj"}};await a.transact({actions:[i]})&&(n("Bid Placed",`Successfully placed bid of ${Me(e)}`),I(!1),R(""),L(null),he())}catch(l){De.error("Error placing bid","Auctions",l);const e=l instanceof Error?l.message:"Failed to place bid. Please try again.";i("Bid Failed",e)}finally{D(!1)}}},disabled:W||!M||($.current_bid&&$.bidder?parseFloat(M)<=parseFloat($.current_bid)/1e8:parseFloat(M)<parseFloat($.price)/1e8),children:W?Se.jsxs(Se.Fragment,{children:[Se.jsx("span",{className:"loading-spinner-small"}),"Placing Bid..."]}):`Place Bid \u2022 ${M||"0.0000"} WAX`})]})]})}),T&&Se.jsx("div",{className:"modal-overlay auction-modal",onClick:()=>E(!1),children:Se.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsx("h2",{children:"Create Auction"}),Se.jsx("button",{className:"close-btn",onClick:()=>E(!1),children:"\xd7"})]}),Se.jsxs("div",{className:"modal-body",children:[Se.jsx("div",{className:"asset-selection-section",children:Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{children:"Select Assets to Auction"}),Se.jsx("div",{className:"asset-selection-container",children:V?Se.jsxs("div",{className:"loading-assets",children:[Se.jsx("div",{className:"loading-spinner"}),Se.jsx("span",{children:"Loading your assets..."})]}):H.length>0?Se.jsx("div",{className:"assets-grid",children:H.map(e=>Se.jsxs("div",{className:"asset-item "+(X.has(e.asset_id)?"selected":""),onClick:()=>(e=>{const t=new Set(X);t.has(e)?t.delete(e):t.add(e),q(t)})(e.asset_id),children:[Se.jsxs("div",{className:"asset-image",children:[Se.jsx(Qt,{imageUrl:cs(e),videoUrl:ds(e),alt:e.name||`Asset #${e.asset_id}`,className:"asset-media",enableAnimations:!0,loading:"lazy"}),X.has(e.asset_id)&&Se.jsx("div",{className:"selection-indicator",children:Se.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M9,20.42l-6.21,-6.21l2.83,-2.83L9,14.77l9.88,-9.89l2.83,2.83L9,20.42z"})})})]}),Se.jsxs("div",{className:"asset-info",children:[Se.jsx("div",{className:"asset-name",children:e.name||`Asset #${e.asset_id}`}),Se.jsx("div",{className:"asset-collection",children:e.collection_name}),e.template_mint&&Se.jsxs("div",{className:"asset-mint-info",children:["Mint #",e.template_mint]})]})]},e.asset_id))}):Se.jsxs("div",{className:"no-assets",children:[Se.jsx("svg",{className:"no-assets-icon",viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M20,7l-8,-4l-8,4m16,0l-8,4m8,-4v10l-8,4m0,-10L4,7m8,4v10M4,7v10l8,4"})}),Se.jsx("h3",{children:"No Assets Found"}),Se.jsx("p",{children:"You don't have any assets to auction. Visit the marketplace to acquire some NFTs first."})]})}),X.size>0&&Se.jsx("div",{className:"selection-summary",children:Se.jsxs("span",{children:[X.size," asset",X.size>1?"s":""," selected"]})})]})}),Se.jsxs("div",{className:"auction-form-section",children:[Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{children:"Starting Price (WAX)"}),Se.jsx("input",{type:"number",placeholder:"0.0000",step:"0.0001",min:"0",value:Y,onChange:e=>K(e.target.value),className:"form-input"})]}),Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{children:"Auction Duration"}),Se.jsxs("div",{className:"duration-inputs",children:[Se.jsxs("div",{className:"duration-field",children:[Se.jsx("label",{className:"duration-label",children:"Weeks"}),Se.jsx("input",{type:"number",min:"0",max:"4",value:Q,onChange:e=>ve("weeks",parseInt(e.target.value)||0),className:"duration-input"})]}),Se.jsxs("div",{className:"duration-field",children:[Se.jsx("label",{className:"duration-label",children:"Days"}),Se.jsx("input",{type:"number",min:"0",max:"30",value:ee,onChange:e=>ve("days",parseInt(e.target.value)||0),className:"duration-input"})]}),Se.jsxs("div",{className:"duration-field",children:[Se.jsx("label",{className:"duration-label",children:"Hours"}),Se.jsx("input",{type:"number",min:"0",max:"23",value:se,onChange:e=>ve("hours",parseInt(e.target.value)||0),className:"duration-input"})]}),Se.jsxs("div",{className:"duration-field",children:[Se.jsx("label",{className:"duration-label",children:"Minutes"}),Se.jsx("input",{type:"number",min:"0",max:"59",value:ne,onChange:e=>ve("minutes",parseInt(e.target.value)||0),className:"duration-input"})]})]}),Se.jsxs("div",{className:"duration-summary",children:[Se.jsx("span",{className:"duration-display",children:(()=>{const e=[];return Q>0&&e.push(`${Q} week${Q>1?"s":""}`),ee>0&&e.push(`${ee} day${ee>1?"s":""}`),se>0&&e.push(`${se} hour${se>1?"s":""}`),ne>0&&e.push(`${ne} minute${ne>1?"s":""}`),0===e.length?"No duration set":e.join(", ")})()}),Se.jsxs("span",{className:"duration-total",children:["Total: ",Math.floor(ge()/3600),"h ",Math.floor(ge()%3600/60),"m"]})]})]}),Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{children:"Memo (Optional)"}),Se.jsx("textarea",{placeholder:"Add a description for your auction",className:"form-textarea",rows:3,value:re,onChange:e=>le(e.target.value)})]})]})]}),Se.jsxs("div",{className:"modal-footer",children:[Se.jsx("button",{className:"cancel-btn",onClick:()=>E(!1),children:"Cancel"}),Se.jsx("button",{className:"create-btn",onClick:async()=>{if(0===X.size)return void i("No Assets Selected","Please select at least one asset to auction");if(!Y||parseFloat(Y)<=0)return void i("Invalid Price","Please enter a valid starting price");const e=ge();if(e<3600)i("Invalid Duration","Auction duration must be at least 1 hour");else if(e>2592e3)i("Invalid Duration","Auction duration cannot exceed 30 days");else try{U(!0);const t=Array.from(X).map(e=>parseInt(e)),i=`${parseFloat(Y).toFixed(8)} WAX`,r=[{account:"atomicmarket",name:"announceauct",authorization:[{actor:s||"",permission:a?.permission||"active"}],data:{seller:s||"",asset_ids:t,starting_bid:i,duration:e,maker_marketplace:"market.pxj"}}];a&&await a.transact({actions:r}),n("Auction Created",`Successfully created auction for ${X.size} asset(s). Remember to transfer your assets to the atomicmarket contract to activate the auction.`),E(!1),q(new Set),K(""),Z(0),te(1),ae(0),ie(0),le(""),he()}catch(t){De.error("Failed to create auction","Auctions",t),i("Auction Creation Failed",t instanceof Error?t.message:"Failed to create auction")}finally{U(!1)}},disabled:0===X.size||!Y||parseFloat(Y)<=0||z,children:z?Se.jsxs(Se.Fragment,{children:[Se.jsx("span",{className:"loading-spinner-small"}),"Creating Auction..."]}):"Create Auction"+(X.size>0?` (${X.size} asset${X.size>1?"s":""})`:"")})]})]})})]})}),Ua=()=>{const{id:e}=X(),t=B(),{isConnected:s,account:a,session:n}=Ds(),{showSuccess:i,showError:r}=xt(),[l,o]=O.useState(null),[c,d]=O.useState(!0),[u,h]=O.useState(null),[m,p]=O.useState(!1),[f,x]=O.useState(""),[g,v]=O.useState(!1),j=O.useCallback(async()=>{if(e){d(!0),h(null);try{const t=await dt.getAuction(e);if(!t.success||!t.data)return void h("Auction not found");o(t.data)}catch(t){console.error("Error loading auction:",t),h("Failed to load auction details")}finally{d(!1)}}},[e]);O.useEffect(()=>{e&&j()},[e,j]),O.useEffect(()=>{if(!l)return;const e=za.subscribe(l.auction_id,e=>{o(t=>t?{...t,current_bid:e.current_bid||t.current_bid,bidder:e.bidder||t.bidder,end_time:e.end_time}:null)});return()=>e()},[l]);const y=e=>`${(parseFloat(e)/1e8).toFixed(4)} WAX`,b=e=>{t(`/user-profile-lookup?user=${encodeURIComponent(e)}`)};if(c)return Se.jsx("div",{className:"auction-detail-page",children:Se.jsxs("div",{className:"loading-container",children:[Se.jsx("div",{className:"loading-spinner"}),Se.jsx("p",{children:"Loading auction details..."})]})});if(u||!l)return Se.jsx("div",{className:"auction-detail-page",children:Se.jsxs("div",{className:"error-container",children:[Se.jsx("h2",{children:"Auction Not Found"}),Se.jsx("p",{children:u||"The requested auction could not be found."}),Se.jsx("button",{className:"btn-primary",onClick:()=>t("/auctions"),children:"Back to Auctions"})]})});const N=(w=l.end_time,za.formatTimeRemaining(w));var w;const k="Auction ended"===N,_=l.current_bid?y(l.current_bid):y(l.price);return Se.jsxs("div",{className:"auction-detail-page",children:[Se.jsxs("div",{className:"auction-detail-container",children:[Se.jsx("button",{className:"back-button",onClick:()=>t("/auctions"),children:"\u2190 Back to Auctions"}),Se.jsxs("div",{className:"auction-detail-content",children:[Se.jsxs("div",{className:"auction-image-section",children:[Se.jsx("div",{className:"auction-image-container",children:Se.jsx(Qt,{imageUrl:l.image?`${He.IPFS.GATEWAYS[0]}${l.image}`:void 0,videoUrl:l.video?`${He.IPFS.GATEWAYS[0]}${l.video}`:void 0,alt:l.asset_name||"NFT",className:"auction-image",enableAnimations:!0})}),Se.jsxs("div",{className:"auction-basic-info",children:[Se.jsx("h1",{className:"auction-title",children:l.asset_name||`Asset #${l.asset_id||"Unknown"}`}),Se.jsxs("div",{className:"auction-collection",children:["Collection: ",l.collection_name||"Unknown"]}),Se.jsxs("div",{className:"auction-id",children:["Auction ID: ",l.auction_id]})]})]}),Se.jsxs("div",{className:"auction-info-section",children:[Se.jsxs("div",{className:"auction-status",children:[Se.jsx("div",{className:"status-badge "+(k?"ended":"active"),children:k?"Ended":"Active"}),!k&&Se.jsxs("div",{className:"time-remaining",children:[Se.jsx("span",{className:"time-label",children:"Time Remaining:"}),Se.jsx("span",{className:"time-value",children:N})]})]}),Se.jsx("div",{className:"price-section",children:Se.jsxs("div",{className:"current-price",children:[Se.jsx("span",{className:"price-label",children:l.current_bid?"Current Bid:":"Starting Price:"}),Se.jsx("span",{className:"price-value",children:_})]})}),Se.jsxs("div",{className:"participants-section",children:[Se.jsxs("div",{className:"seller-info",children:[Se.jsx("span",{className:"participant-label",children:"Seller:"}),Se.jsx("button",{className:"participant-link",onClick:()=>b(l.seller),children:l.seller})]}),l.bidder&&Se.jsxs("div",{className:"bidder-info",children:[Se.jsx("span",{className:"participant-label",children:"Top Bidder:"}),Se.jsx("button",{className:"participant-link",onClick:()=>b(l.bidder||""),children:l.bidder})]})]}),Se.jsx("div",{className:"auction-actions",children:!k&&Se.jsx("button",{className:"btn-primary bid-button",onClick:()=>{s&&a?l?.seller!==a?(x(""),p(!0)):r("Invalid Action","You cannot bid on your own auction"):r("Wallet Required","Please connect your wallet to place bids")},disabled:!s||l.seller===a,children:s?l.seller===a?"Your Auction":"Place Bid":"Connect Wallet"})})]})]})]}),m&&Se.jsx("div",{className:"modal-overlay",onClick:()=>p(!1),children:Se.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsx("h3",{children:"Place Bid"}),Se.jsx("button",{className:"modal-close",onClick:()=>p(!1),children:"\xd7"})]}),Se.jsxs("div",{className:"modal-body",children:[Se.jsxs("div",{className:"auction-summary",children:[Se.jsx(Qt,{imageUrl:l.image?`${He.IPFS.GATEWAYS[0]}${l.image}`:void 0,videoUrl:l.video?`${He.IPFS.GATEWAYS[0]}${l.video}`:void 0,alt:l.asset_name||"NFT",className:"modal-nft-image",enableAnimations:!0}),Se.jsxs("div",{className:"modal-nft-info",children:[Se.jsx("h4",{children:l.asset_name||`Asset #${l.asset_id||"Unknown"}`}),Se.jsxs("p",{children:["Current: ",_]})]})]}),l.bidder&&Se.jsxs("div",{className:"current-bidder",children:[Se.jsx("span",{className:"label",children:"Leading Bidder"}),Se.jsx("button",{className:"bidder-account",onClick:()=>b(l.bidder),children:l.bidder})]}),Se.jsxs("div",{className:"bid-input-section",children:[Se.jsx("label",{htmlFor:"bidAmount",children:"Your Bid (WAX)"}),Se.jsx("input",{id:"bidAmount",type:"number",step:"0.0001",placeholder:"Enter bid amount",value:f,onChange:e=>x(e.target.value),min:l.current_bid&&l.bidder?parseFloat(l.current_bid)/1e8+1e-4:parseFloat(l.price)/1e8}),Se.jsxs("div",{className:"bid-requirement",children:["Minimum: ",l.current_bid&&l.bidder?`${(parseFloat(l.current_bid)/1e8+1e-4).toFixed(4)} WAX`:`${(parseFloat(l.price)/1e8).toFixed(4)} WAX`]})]})]}),Se.jsxs("div",{className:"modal-footer",children:[Se.jsx("button",{className:"btn-secondary",onClick:()=>p(!1),disabled:g,children:"Cancel"}),Se.jsx("button",{className:"btn-primary",onClick:async()=>{if(!l||!n||!a)return void r("Error","Please connect your wallet first");const e=parseFloat(f);if(isNaN(e)||e<=0)return void r("Invalid Bid","Please enter a valid bid amount");const t=parseFloat(l.current_bid||l.price)/1e8,s=l.current_bid&&l.bidder;if(s&&e<=t)r("Invalid Bid",`Bid must be higher than current bid of ${t.toFixed(4)} WAX`);else if(!s&&e<parseFloat(l.price)/1e8)r("Invalid Bid",`Bid must be at least ${(parseFloat(l.price)/1e8).toFixed(4)} WAX`);else{v(!0);try{const t=Math.floor(1e8*e);await n.transact({actions:[{account:"atomicmarket",name:"auctionbid",authorization:[{actor:a,permission:"active"}],data:{bidder:a,auction_id:l.auction_id,bid:`${t} WAX`,taker_marketplace:"market.pxj"}}]})&&(i("Bid Placed",`Successfully placed bid of ${e.toFixed(4)} WAX`),p(!1),x(""),o(e=>e?{...e,current_bid:t.toString(),bidder:a}:null))}catch(c){console.error("Error placing bid:",c),r("Bid Failed",c instanceof Error?c.message:"Failed to place bid")}finally{v(!1)}}},disabled:g||!f,children:g?"Placing Bid...":"Place Bid"})]})]})})]})},Xa=({questions:e,title:t,onComplete:s})=>{const{session:a,account:n}=Ie(),{showSuccess:i,showError:r}=xt(),[l,o]=O.useState(0),[c,d]=O.useState(0),[u,h]=O.useState(!1),[m,p]=O.useState(null),[f,x]=O.useState(!1),[g,v]=O.useState(null),[j,y]=O.useState(new Set),[b,N]=O.useState({}),[w,k]=O.useState(!1);O.useEffect(()=>{o(0),d(0),h(!1),p(null),x(!1),v(null),y(new Set),N({}),k(!1)},[e,t]);const _=()=>{o(0),d(0),h(!1),p(null),x(!1),v(null),y(new Set),N({}),k(!1)},S=async()=>{if(a&&n){k(!0);try{const s=Math.random().toString(36).substring(2,8),n=((e,s,a,n)=>{const i={account:a,score:e,total:s,percentage:Math.round(e/s*100),timestamp:Date.now(),quiz:t,salt:n};return btoa(JSON.stringify(i))})(c,e.length,a.actor.toString(),s),r=`QUIZ_RESULTS:${n}`,l=await a.transact({actions:[{account:"pixeljourney",name:"transfer",authorization:[{actor:a.actor.toString(),permission:"active"}],data:{from:a.actor.toString(),to:"quiz.pxj",quantity:"500.00000000 PXJ",memo:r}}]},{broadcast:!0,expireSeconds:120});De.info("Quiz submission successful","Quiz.submitQuizResults",{score:c,totalQuestions:e.length,quizTitle:t,transactionId:l.transaction||l.processed?.id}),i("Quiz results submitted successfully!","Submission Complete")}catch(s){De.error("Quiz submission failed","Quiz.submitQuizResults",s instanceof Error?s:new Error(String(s)),{score:c,totalQuestions:e.length,quizTitle:t,accountName:a?.actor?.toString()}),r("Failed to submit quiz results. Please try again.","Submission Failed")}finally{k(!1)}}else De.error("Quiz submission failed: No wallet session or account available","Quiz.submitQuizResults")};if(u){const s=Math.round(c/e.length*100),i=c===e.length,r=c>e.length/2;return Se.jsxs("div",{className:"quiz-score",children:[Se.jsxs("div",{className:"quiz-header",children:[Se.jsxs("h3",{children:[t," - Quiz Complete!"]}),Se.jsx("div",{className:"completion-badge",children:i?"\ud83c\udfc6":r?"\ud83c\udf89":"\ud83d\udcda"})]}),Se.jsxs("div",{className:"score-display",children:[Se.jsxs("p",{className:"final-score",children:["Your score: ",Se.jsx("span",{className:i?"perfect":r?"good":"needs-work",children:c})," out of ",e.length]}),Se.jsxs("p",{className:"score-percentage",children:["(",s,"%)"]})]}),Se.jsxs("div",{className:"score-breakdown",children:[Se.jsx("h4",{children:"Question Breakdown:"}),e.map((t,s)=>{const a=j.has(s),n=b[s],i=a&&n===e[s].correctAnswer;return Se.jsxs("div",{className:"breakdown-item "+(i?"correct":"wrong"),children:[Se.jsxs("span",{className:"question-number",children:["Q",s+1,":"]}),Se.jsxs("span",{className:"question-preview",children:[t.question.substring(0,50),"..."]}),Se.jsx("span",{className:"result "+(i?"correct":"wrong"),children:i?"\u2713 Correct":"\u2717 Incorrect"})]},s)})]}),Se.jsxs("div",{className:"quiz-actions",children:[Se.jsx("button",{className:"restart-btn",onClick:_,children:"\ud83d\udd04 Restart Quiz"}),a&&n&&Se.jsx("button",{className:"submit-btn",onClick:S,disabled:w,style:{marginLeft:"10px",background:w?"#666":"var(--success-bg)",color:w?"#ccc":"var(--success-text)",border:"1px solid var(--success-border)",padding:"var(--space-md) var(--space-xl)",borderRadius:"var(--radius-md)",fontWeight:"var(--font-medium)",fontSize:"var(--text-base)",cursor:w?"not-allowed":"pointer",transition:"var(--transition-base)"},children:w?"\ud83d\udce4 Submitting...":"\ud83d\udce4 Submit Results"}),i&&Se.jsxs("div",{className:"achievement-notice",children:[Se.jsx("p",{children:"\ud83c\udfaf Perfect Score! You've mastered this topic!"}),Se.jsx("small",{children:"Achievement unlocked - consider this for your PxBadge collection!"})]})]})]})}const C=(l+1)/e.length*100;return Se.jsxs("div",{className:"quiz-container",children:[Se.jsxs("div",{className:"quiz-header",children:[Se.jsx("h3",{children:t}),Se.jsxs("div",{className:"quiz-progress",children:[Se.jsxs("span",{className:"progress-text",children:["Question ",l+1," of ",e.length]}),Se.jsx("div",{className:"progress-container",children:Se.jsx("div",{className:"progress-bar",style:{width:`${C}%`}})})]})]}),Se.jsxs("div",{className:"quiz-question",children:[Se.jsx("p",{className:"question-text",children:e[l].question}),Se.jsx("div",{className:"quiz-options",children:e[l].options.map((t,s)=>Se.jsxs("button",{className:`option-btn ${m===s?s===e[l].correctAnswer?"correct":"wrong":""} ${f?"disabled":""}`,onClick:()=>(t=>{p(t);const s=t===e[l].correctAnswer;s&&d(c+1),v({isCorrect:s,explanation:e[l].explanation}),x(!0),y(e=>new Set([...e,l])),N(e=>({...e,[l]:t}))})(s),disabled:f,children:[Se.jsxs("span",{className:"option-letter",children:[String.fromCharCode(65+s),"."]}),Se.jsx("span",{className:"option-text",children:t})]},s))}),f&&Se.jsxs("div",{className:"feedback "+(g?.isCorrect?"correct-feedback":"wrong-feedback"),children:[Se.jsxs("div",{className:"feedback-header",children:[Se.jsx("span",{className:"feedback-icon",children:g?.isCorrect?"\u2705":"\u274c"}),Se.jsx("strong",{children:g?.isCorrect?"Correct!":"Incorrect."})]}),!g?.isCorrect&&Se.jsxs("p",{className:"correct-answer",children:["The correct answer is: ",Se.jsx("strong",{children:e[l].options[e[l].correctAnswer]})]}),Se.jsx("p",{className:"explanation",children:g?.explanation}),Se.jsx("button",{className:"next-btn",onClick:()=>{x(!1),p(null),v(null),l+1<e.length?o(l+1):(h(!0),s&&s(c,e.length))},children:l+1<e.length?"Next Question \u2192":"View Results"})]})]})]})},qa=[{id:"nft-basics",title:"NFT Basics",description:"Test your knowledge of Non-Fungible Tokens and digital ownership",questions:[{question:"What does NFT stand for?",options:["Non-Fungible Token","New Financial Technology","Network File Transfer","Next Future Token"],correctAnswer:0,explanation:"NFT stands for Non-Fungible Token. 'Non-fungible' means it's unique and cannot be replaced with something else of equal value, unlike cryptocurrencies which are fungible."},{question:"What makes an NFT unique?",options:["Its price on the marketplace","The blockchain it's minted on","Its unique token ID and metadata","The wallet that owns it"],correctAnswer:2,explanation:"Each NFT has a unique token ID and associated metadata stored on the blockchain, making it distinguishable from every other token, even in the same collection."},{question:"Which blockchain is known for having the lowest transaction fees for NFTs?",options:["Ethereum","WAX","Polygon","Solana"],correctAnswer:1,explanation:"WAX (Worldwide Asset eXchange) is specifically designed for NFTs and gaming, offering extremely low transaction fees and fast confirmation times, making it ideal for frequent NFT trading."},{question:"What is 'minting' an NFT?",options:["Buying an NFT from someone else","Creating a new NFT on the blockchain","Transferring an NFT to another wallet","Burning an NFT to remove it"],correctAnswer:1,explanation:"Minting is the process of creating a new NFT on the blockchain. It involves uploading the digital asset, adding metadata, and recording it permanently on the blockchain."},{question:"What information is typically stored in NFT metadata?",options:["Only the image file","Name, description, image, and attributes","Just the owner's wallet address","Only the creation date"],correctAnswer:1,explanation:"NFT metadata typically includes the name, description, image URL, and various attributes or traits that define the NFT's characteristics and rarity."}]},{id:"wax-ecosystem",title:"WAX Ecosystem",description:"Learn about the WAX blockchain and its gaming-focused ecosystem",questions:[{question:"What is WAX primarily designed for?",options:["DeFi applications","Gaming and NFTs","Smart contracts only","Payment processing"],correctAnswer:1,explanation:"WAX (Worldwide Asset eXchange) is specifically designed as a blockchain for gaming and NFTs, offering fast, cheap transactions perfect for in-game assets and collectibles."},{question:"What consensus mechanism does WAX use?",options:["Proof of Work","Proof of Stake","Delegated Proof of Stake (DPoS)","Proof of Authority"],correctAnswer:2,explanation:"WAX uses Delegated Proof of Stake (DPoS), which allows for fast transaction processing and energy efficiency, making it ideal for gaming applications that require quick confirmations."},{question:"What is the native token of the WAX blockchain?",options:["WAX/WAXP","WAXE","WXT","WAXG"],correctAnswer:1,explanation:"WAXP (WAX Protocol Token) is the native cryptocurrency of the WAX blockchain, used for staking, governance, and transaction fees."},{question:"What makes WAX transactions different from Ethereum?",options:["They're slower but cheaper","They're faster and much cheaper","They require more gas","They're only for gaming"],correctAnswer:1,explanation:"WAX transactions are significantly faster (0.5 second block times) and much cheaper than Ethereum, making them practical for gaming and frequent NFT trading."},{question:"What is WAX Cloud Wallet?",options:["A hardware wallet","A browser-based wallet with social login","A mobile app only","A desktop software"],correctAnswer:1,explanation:"WAX Cloud Wallet is a user-friendly, browser-based wallet that allows users to create accounts using social media logins, making blockchain access easier for mainstream users."}]},{id:"atomichub",title:"AtomicHub",description:"Master the leading NFT marketplace on WAX blockchain",questions:[{question:"What is AtomicHub?",options:["A WAX wallet","The largest NFT marketplace on WAX","A gaming platform","A DeFi protocol"],correctAnswer:1,explanation:"AtomicHub is the largest and most popular NFT marketplace on the WAX blockchain, where users can buy, sell, and trade NFTs with minimal fees."},{question:"What are AtomicAssets?",options:["A type of cryptocurrency","The NFT standard used on WAX","A gaming token","A wallet feature"],correctAnswer:1,explanation:"AtomicAssets is the NFT standard used on WAX blockchain, providing a framework for creating, managing, and trading NFTs efficiently with rich metadata support."},{question:"What is unique about AtomicHub's fee structure?",options:["High fees like Ethereum","No fees at all","Very low fees due to WAX blockchain","Fees paid in Bitcoin"],correctAnswer:2,explanation:"AtomicHub benefits from WAX's extremely low transaction fees, making it cost-effective to trade NFTs frequently without worrying about high gas costs."},{question:"What can you do on AtomicHub besides buying NFTs?",options:["Only view collections","Create collections, mint NFTs, and manage assets","Just trade with other users","Only browse existing NFTs"],correctAnswer:1,explanation:"AtomicHub is a comprehensive platform where users can create their own collections, mint NFTs, manage their digital assets, and participate in the broader WAX ecosystem."},{question:"How does AtomicHub handle NFT metadata?",options:["Stores everything on-chain","Uses IPFS for decentralized storage","Stores on centralized servers only","Doesn't store metadata"],correctAnswer:1,explanation:"AtomicHub uses IPFS (InterPlanetary File System) for decentralized storage of NFT metadata and images, ensuring permanence and decentralization of digital assets."}]},{id:"pxmarket",title:"PxMarket Platform",description:"Explore PxMarket features and the Pixel Journey ecosystem",questions:[{question:"What is PxMarket's primary focus?",options:["General NFT trading","Pixel Journey ecosystem and gaming NFTs","DeFi protocols only","Social media integration"],correctAnswer:2,explanation:"PxMarket is specifically designed for the Pixel Journey ecosystem, focusing on gaming NFTs, pixel art, and community-driven digital assets with integrated gaming features."},{question:"What makes PxMarket different from other NFT marketplaces?",options:["Higher fees","PXJ/Pixal integration and community features","Only supports one blockchain","No user interface"],correctAnswer:2,explanation:"PxMarket integrates gaming mechanics, community features, achievement systems, and specialized tools for pixel art and gaming NFTs, creating a unique ecosystem experience."},{question:"What are PxBadges in the PxMarket ecosystem?",options:["Payment tokens","Achievement NFTs for community participation","Trading fees","Wallet addresses"],correctAnswer:1,explanation:"PxBadges are achievement-based NFTs that users can earn through various activities like completing quizzes, participating in events, and engaging with the community."},{question:"What blockchain does PxMarket primarily operate on?",options:["Ethereum","WAX","Polygon","Binance Smart Chain"],correctAnswer:1,explanation:"PxMarket operates primarily on the WAX blockchain, taking advantage of its low fees and gaming-focused infrastructure perfect for NFT trading and gaming integration."},{question:"What is the Pixel Journey Metaverse?",options:["A simple NFT collection","An interactive learning ecosystem with NFT and DeFi integration","A trading bot","A wallet application"],correctAnswer:1,explanation:"The Pixel Journey Metaverse is an interactive gaming world where NFTs have utility, players can participate in play-to-earn mechanics, and community events create engaging experiences."}]},{id:"defi-basics",title:"DeFi Fundamentals",description:"Understanding Decentralized Finance concepts and applications",questions:[{question:"What does DeFi stand for?",options:["Digital Finance","Decentralized Finance","Distributed Finance","Direct Finance"],correctAnswer:1,explanation:"DeFi stands for Decentralized Finance, referring to financial services built on blockchain technology that operate without traditional intermediaries like banks."},{question:"What is liquidity in DeFi?",options:["The speed of transactions","The availability of assets for trading","The number of users","The blockchain network"],correctAnswer:1,explanation:"Liquidity refers to how easily assets can be bought or sold without significantly affecting their price. High liquidity means there are many buyers and sellers active in the market."},{question:"What is yield farming?",options:["Growing crops on a farm","Earning rewards by providing liquidity to DeFi protocols","Mining cryptocurrency","Trading NFTs"],correctAnswer:1,explanation:"Yield farming involves providing liquidity to DeFi protocols in exchange for rewards, typically in the form of additional tokens or a share of transaction fees."},{question:"What is an AMM (Automated Market Maker)?",options:["A trading bot","A protocol that uses algorithms to price assets and facilitate trades","A type of cryptocurrency","A wallet feature"],correctAnswer:1,explanation:"An AMM is a decentralized exchange protocol that uses mathematical formulas to price assets and enable trading without traditional order books, relying on liquidity pools instead."},{question:"What is impermanent loss?",options:["Losing your private keys","The temporary decrease in value when providing liquidity compared to holding assets","Network transaction fees","Smart contract bugs"],correctAnswer:1,explanation:"Impermanent loss occurs when the price ratio of tokens in a liquidity pool changes compared to when you deposited them, potentially resulting in less value than if you had simply held the tokens."}]},{id:"advanced-web3",title:"Advanced Web3 Concepts",description:"Deep dive into advanced blockchain and Web3 technologies",questions:[{question:"What is a smart contract?",options:["A legal document","Deployed/executable code on the blockchain","A trading agreement","A wallet feature"],correctAnswer:1,explanation:"A smart contract is self-executing code deployed on a blockchain that automatically enforces the terms of an agreement without requiring intermediaries."},{question:"What is cross-chain interoperability?",options:["Trading on multiple exchanges","The ability for different blockchains to communicate and share data","Using multiple wallets","Mining on different networks"],correctAnswer:1,explanation:"Cross-chain interoperability allows different blockchain networks to communicate, share data, and transfer assets between each other, creating a more connected ecosystem."},{question:"What is a DAO (Decentralized Autonomous Organization)?",options:["A type of cryptocurrency","An organization governed by smart contracts and token holders","A trading platform","A wallet type"],correctAnswer:1,explanation:"A DAO is an organization that operates through smart contracts and is governed by its token holders, who vote on proposals and decisions without traditional management structures."},{question:"What is Layer 2 scaling?",options:["Adding more servers","Solutions built on top of blockchains to improve speed and reduce costs","Upgrading hardware","Increasing block size"],correctAnswer:1,explanation:"Layer 2 scaling solutions are built on top of existing blockchains (Layer 1) to process transactions faster and cheaper while maintaining the security of the underlying blockchain."},{question:"What is governance in blockchain projects?",options:["Government regulation","The process by which token holders make decisions about protocol changes","Smart contract deployment","Network maintenance"],correctAnswer:1,explanation:"Governance in blockchain refers to the decentralized decision-making process where token holders vote on protocol upgrades, parameter changes, and other important decisions affecting the network."}]}],Ha=e=>qa.find(t=>t.id===e),Ja=()=>{const[e,t]=O.useState("getting-started-wax"),[s,a]=O.useState(new Set(["getting-started","interactive-quizzes"])),[n,i]=O.useState(new Set),[r,l]=O.useState({}),o=(e,t,s)=>{i(t=>new Set([...t,e])),l(a=>({...a,[e]:{score:t,total:s}})),t===s&&console.log(`Perfect score achieved for ${e}! Consider implementing PxBadge reward.`)},c=[{id:"getting-started",title:"Getting Started",icon:"\ud83d\ude80",sections:[{id:"getting-started-wax",title:"Getting Started on WAX",content:Se.jsxs("div",{className:"guide-content",children:[Se.jsx("h3",{children:"Welcome to the WAX Blockchain!"}),Se.jsx("p",{children:"WAX (Worldwide Asset eXchange) is a carbon-neutral blockchain optimized for NFTs, gaming, and dApps. It processes 3,000+ TPS, hosts 5,000+ games, and 100,000+ NFT collections with no gas fees for users. In 2025, WAX continues to lead in sustainable blockchain innovation, making it the cornerstone of Web3 gaming and digital economies."}),Se.jsxs("div",{className:"wax-benefits",children:[Se.jsx("h4",{children:"\ud83c\udf1f Why Choose WAX?"}),Se.jsxs("div",{className:"benefit-grid",children:[Se.jsxs("div",{className:"benefit-card",children:[Se.jsx("h5",{children:"\u26a1 Lightning Fast"}),Se.jsx("p",{children:"Transactions complete in seconds, not minutes or hours like other blockchains."})]}),Se.jsxs("div",{className:"benefit-card",children:[Se.jsx("h5",{children:"\ud83d\udcb8 Zero Gas Fees"}),Se.jsx("p",{children:"No transaction fees for users - trade and interact without worrying about costs."})]}),Se.jsxs("div",{className:"benefit-card",children:[Se.jsx("h5",{children:"\ud83c\udf31 Carbon Neutral"}),Se.jsx("p",{children:"WAX is 100% carbon-neutral with energy-efficient proof-of-stake consensus, emphasizing sustainable blockchain technology."})]}),Se.jsxs("div",{className:"benefit-card",children:[Se.jsx("h5",{children:"\ud83c\udfae Gaming Focused"}),Se.jsx("p",{children:"Built specifically for gaming and NFTs with features tailored for these use cases."})]})]})]}),Se.jsxs("div",{className:"step-list",children:[Se.jsxs("div",{className:"step",children:[Se.jsx("div",{className:"step-number",children:"1"}),Se.jsxs("div",{className:"step-content",children:[Se.jsx("h4",{children:"Create a WAX Wallet"}),Se.jsxs("p",{children:["Visit ",Se.jsx("a",{href:"https://wallet.wax.io",target:"_blank",rel:"noopener noreferrer",children:"wallet.wax.io"})," to create your free WAX account. The process is simple and requires no technical knowledge!"]}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"Choose a unique account name (12 characters, lowercase letters and numbers)"}),Se.jsx("li",{children:"Verify your email address"}),Se.jsx("li",{children:"Set up two-factor authentication for security"}),Se.jsx("li",{children:"Your wallet is ready to use immediately!"})]})]})]}),Se.jsxs("div",{className:"step",children:[Se.jsx("div",{className:"step-number",children:"2"}),Se.jsxs("div",{className:"step-content",children:[Se.jsx("h4",{children:"Get Some WAX Tokens"}),Se.jsx("p",{children:"You'll need WAX tokens to purchase NFTs and participate in the ecosystem:"}),Se.jsxs("ul",{children:[Se.jsxs("li",{children:[Se.jsx("strong",{children:"Exchanges:"})," Buy WAX on Binance, KuCoin, or other major exchanges"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"WAX Wallet:"})," Use the built-in exchange feature in your WAX wallet"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Credit Card:"})," Purchase directly with credit card through supported services"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Cross-Chain:"})," Bridge tokens from other blockchains using supported bridges"]})]})]})]}),Se.jsxs("div",{className:"step",children:[Se.jsx("div",{className:"step-number",children:"3"}),Se.jsxs("div",{className:"step-content",children:[Se.jsx("h4",{children:"Connect Your Wallet"}),Se.jsx("p",{children:"Link your WAX wallet to PxMarket and other dApps:"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:'Click "Connect Wallet" in the top right corner'}),Se.jsx("li",{children:'Choose "WAX Cloud Wallet" from the options'}),Se.jsx("li",{children:"Authorize the connection in your WAX wallet"}),Se.jsx("li",{children:"You're now ready to trade and interact!"})]})]})]}),Se.jsxs("div",{className:"step",children:[Se.jsx("div",{className:"step-number",children:"4"}),Se.jsxs("div",{className:"step-content",children:[Se.jsx("h4",{children:"Explore the WAX Ecosystem"}),Se.jsx("p",{children:"Now that you have your wallet set up, let's explore what makes WAX special for NFTs and gaming:"}),Se.jsxs("div",{className:"ecosystem-categories",children:[Se.jsxs("div",{className:"ecosystem-category",children:[Se.jsx("h5",{children:"\ud83d\uded2 NFT Marketplaces"}),Se.jsxs("div",{className:"marketplace-grid",children:[Se.jsxs("div",{className:"marketplace-item",children:[Se.jsx("h6",{children:"PxMarket"}),Se.jsx("p",{children:"Our curated marketplace for premium Pixal PFPs and gaming assets"}),Se.jsx("a",{href:"/",className:"marketplace-link",children:"Visit PxMarket \u2192"})]}),Se.jsxs("div",{className:"marketplace-item",children:[Se.jsx("h6",{children:"AtomicHub"}),Se.jsx("p",{children:"The largest NFT marketplace on WAX with millions of assets"}),Se.jsx("a",{href:"https://wax.atomichub.io",target:"_blank",rel:"noopener noreferrer",className:"marketplace-link",children:"Visit AtomicHub \u2192"})]}),Se.jsxs("div",{className:"marketplace-item",children:[Se.jsx("h6",{children:"NeftyBlocks"}),Se.jsx("p",{children:"Advanced trading tools and NFT creation platform"}),Se.jsx("a",{href:"https://neftyblocks.com",target:"_blank",rel:"noopener noreferrer",className:"marketplace-link",children:"Visit NeftyBlocks \u2192"})]})]})]}),Se.jsxs("div",{className:"ecosystem-category",children:[Se.jsx("h5",{children:"\ud83d\udcb0 DeFi Platforms"}),Se.jsxs("div",{className:"defi-grid",children:[Se.jsxs("div",{className:"defi-item",children:[Se.jsx("h6",{children:"Alcor Exchange"}),Se.jsx("p",{children:"Leading DEX for WAX tokens with advanced trading features"}),Se.jsx("a",{href:"https://alcor.exchange",target:"_blank",rel:"noopener noreferrer",className:"defi-link",children:"Trade on Alcor \u2192"})]}),Se.jsxs("div",{className:"defi-item",children:[Se.jsx("h6",{children:"TacoSwap"}),Se.jsx("p",{children:"Automated market maker with yield farming opportunities"}),Se.jsx("a",{href:"https://tacoswap.io",target:"_blank",rel:"noopener noreferrer",className:"defi-link",children:"Visit TacoSwap \u2192"})]}),Se.jsxs("div",{className:"defi-item",children:[Se.jsx("h6",{children:"Defibox"}),Se.jsx("p",{children:"Multi-chain DeFi platform with staking and lending"}),Se.jsx("a",{href:"https://wax.defibox.io",target:"_blank",rel:"noopener noreferrer",className:"defi-link",children:"Visit Defibox \u2192"})]})]})]}),Se.jsxs("div",{className:"ecosystem-category",children:[Se.jsx("h5",{children:"\ud83c\udfae Games & Entertainment"}),Se.jsxs("div",{className:"games-grid",children:[Se.jsxs("div",{className:"game-item",children:[Se.jsx("h6",{children:"Pixel Journey"}),Se.jsx("p",{children:"Our flagship NFT collection and gaming ecosystem"}),Se.jsx("a",{href:"/inventory",className:"game-link",children:"Start Journey \u2192"})]}),Se.jsxs("div",{className:"game-item",children:[Se.jsx("h6",{children:"Alien Worlds"}),Se.jsx("p",{children:"The most popular blockchain game with mining and governance"}),Se.jsx("a",{href:"https://alienworlds.io",target:"_blank",rel:"noopener noreferrer",className:"game-link",children:"Play Alien Worlds \u2192"})]}),Se.jsxs("div",{className:"game-item",children:[Se.jsx("h6",{children:"Pantheon TCG"}),Se.jsx("p",{children:"Strategic trading card game with competitive tournaments"}),Se.jsx("a",{href:"https://pantheontcg.com",target:"_blank",rel:"noopener noreferrer",className:"game-link",children:"Play Pantheon \u2192"})]})]})]}),Se.jsxs("div",{className:"ecosystem-category",children:[Se.jsx("h5",{children:"\ud83d\udee0\ufe0f Essential Tools"}),Se.jsxs("div",{className:"tools-grid",children:[Se.jsxs("div",{className:"tool-item",children:[Se.jsx("h6",{children:"WaxDAO"}),Se.jsx("p",{children:"Community governance and proposal platform"}),Se.jsx("a",{href:"https://waxdao.io",target:"_blank",rel:"noopener noreferrer",className:"tool-link",children:"Visit WaxDAO \u2192"})]}),Se.jsxs("div",{className:"tool-item",children:[Se.jsx("h6",{children:"RWAX"}),Se.jsx("p",{children:"Wrapped WAX for cross-chain DeFi opportunities"}),Se.jsx("a",{href:"https://rwax.io",target:"_blank",rel:"noopener noreferrer",className:"tool-link",children:"Get RWAX \u2192"})]}),Se.jsxs("div",{className:"tool-item",children:[Se.jsx("h6",{children:"PxBadges"}),Se.jsx("p",{children:"Achievement system for tracking your Web3 journey"}),Se.jsx("a",{href:"/badges",className:"tool-link",children:"View Badges \u2192"})]})]})]})]})]})]})]}),Se.jsxs("div",{className:"wax-resources",children:[Se.jsx("h4",{children:"\ud83d\udcda Additional Resources"}),Se.jsxs("div",{className:"resource-links",children:[Se.jsxs("a",{href:"https://wax.io",target:"_blank",rel:"noopener noreferrer",className:"resource-link",children:[Se.jsx("span",{className:"icon",children:"\ud83c\udf10"}),"Official WAX Website"]}),Se.jsxs("a",{href:"https://docs.wax.io",target:"_blank",rel:"noopener noreferrer",className:"resource-link",children:[Se.jsx("span",{className:"icon",children:"\ud83d\udcd6"}),"WAX Documentation"]}),Se.jsxs("a",{href:"https://wax.atomichub.io",target:"_blank",rel:"noopener noreferrer",className:"resource-link",children:[Se.jsx("span",{className:"icon",children:"\ud83d\udd0d"}),"AtomicHub Explorer"]}),Se.jsxs("a",{href:"https://waxblock.io",target:"_blank",rel:"noopener noreferrer",className:"resource-link",children:[Se.jsx("span",{className:"icon",children:"\u26d3\ufe0f"}),"WAX Block Explorer"]})]}),Se.jsxs("div",{className:"cta-section",children:[Se.jsx("h4",{children:"\ud83d\ude80 Ready to Start?"}),Se.jsxs("a",{href:"https://pixeljourney.xyz",target:"_blank",rel:"noopener noreferrer",className:"cta-button primary",children:[Se.jsx("span",{className:"icon",children:"\ud83c\udfae"}),"Start Your Pixel Journey"]}),Se.jsxs("a",{href:"https://pxmarket.io",target:"_blank",rel:"noopener noreferrer",className:"cta-button secondary",children:[Se.jsx("span",{className:"icon",children:"\ud83d\uded2"}),"Browse PxMarket"]}),Se.jsxs("a",{href:"https://docs.pixeljourney.xyz/getting-started",target:"_blank",rel:"noopener noreferrer",className:"cta-button tertiary",children:[Se.jsx("span",{className:"icon",children:"\ud83d\udcda"}),"Detailed Guide"]})]})]})]})},{id:"blockchain-crypto-education",title:"Blockchain & Crypto Education",content:Se.jsxs("div",{className:"guide-content",children:[Se.jsx("h3",{children:"Understanding Blockchain & Cryptocurrency"}),Se.jsx("div",{className:"intro-section",children:Se.jsx("p",{children:"New to blockchain and cryptocurrency? This section will help you understand the fundamental concepts that power the digital asset revolution and make you a more informed participant in the ecosystem."})}),Se.jsx("h4",{children:"\ud83c\udfa8 NFT Basics for Beginners"}),Se.jsx("p",{children:"NFTs, or Non-Fungible Tokens, are unique digital assets stored on a blockchain that prove ownership of items like art, music, videos, or virtual collectibles. Unlike cryptocurrencies like Bitcoin, which are fungible (interchangeable), NFTs are one-of-a-kind and cannot be exchanged on a 1:1 basis."}),Se.jsxs("div",{className:"nft-concepts",children:[Se.jsxs("div",{className:"nft-item",children:[Se.jsx("h5",{children:"What Makes NFTs Special?"}),Se.jsxs("ul",{children:[Se.jsxs("li",{children:[Se.jsx("strong",{children:"Uniqueness:"})," Each NFT has a unique identifier that distinguishes it from all others"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Ownership:"})," Smart contracts on the blockchain provide immutable proof of ownership"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Transferability:"})," NFTs can be bought, sold, and traded on various marketplaces"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Programmability:"})," Smart contracts can add utility and functionality to NFTs"]})]})]}),Se.jsxs("div",{className:"nft-item",children:[Se.jsx("h5",{children:"Common NFT Use Cases"}),Se.jsxs("ul",{children:[Se.jsxs("li",{children:[Se.jsx("strong",{children:"Digital Art:"})," Collectible artwork and creative expressions"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Gaming Assets:"})," In-game items, characters, and virtual land"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Profile Pictures (PFPs):"})," Unique avatars for social media"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Utility Tokens:"})," Access passes, memberships, and special privileges"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Music & Media:"})," Albums, videos, and other digital content"]})]})]}),Se.jsxs("div",{className:"nft-item",children:[Se.jsx("h5",{children:"NFT Marketplaces on WAX"}),Se.jsxs("ul",{children:[Se.jsxs("li",{children:[Se.jsx("strong",{children:"AtomicHub:"})," The largest NFT marketplace on WAX"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"PxMarket:"})," Pixel Journey's premium trading platform"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"NeftyBlocks:"})," Enhanced trading with rewarding mechanics"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"WAX.io:"})," Official WAX marketplace"]})]})]})]}),Se.jsx("div",{className:"docs-link",children:Se.jsx("a",{href:"https://docs.pixeljourney.xyz/nft-guide",target:"_blank",rel:"noopener noreferrer",className:"docs-button",children:"\ud83c\udfa8 Complete NFT Guide"})}),Se.jsx("h4",{children:"\ud83d\udd17 Blockchain Fundamentals"}),Se.jsxs("div",{className:"concept-grid",children:[Se.jsxs("div",{className:"concept-card",children:[Se.jsx("h5",{children:"Decentralization"}),Se.jsx("p",{children:"No single authority controls the network. Instead, it's maintained by a distributed network of computers worldwide."})]}),Se.jsxs("div",{className:"concept-card",children:[Se.jsx("h5",{children:"Immutability"}),Se.jsx("p",{children:"Once data is recorded on the blockchain, it cannot be altered or deleted, ensuring permanent and tamper-proof records."})]}),Se.jsxs("div",{className:"concept-card",children:[Se.jsx("h5",{children:"Transparency"}),Se.jsx("p",{children:"All transactions are publicly visible and verifiable, creating trust through openness rather than intermediaries."})]}),Se.jsxs("div",{className:"concept-card",children:[Se.jsx("h5",{children:"Smart Contracts"}),Se.jsx("p",{children:"Self-executing contracts with terms directly written into code, enabling automated and trustless agreements."})]})]}),Se.jsx("h4",{children:"\ud83d\udcb0 DeFi (Decentralized Finance) Basics"}),Se.jsx("p",{children:"DeFi, or Decentralized Finance, is a peer-to-peer financial system built on blockchains like WAX and Ethereum. It eliminates banks and intermediaries, allowing users to lend, borrow, trade, and earn interest directly with code (smart contracts)."}),Se.jsxs("div",{className:"key-concepts",children:[Se.jsx("h5",{children:"Core Principles:"}),Se.jsxs("ul",{children:[Se.jsxs("li",{children:[Se.jsx("strong",{children:"Open Access:"})," Anyone with internet and a wallet can participate\u2014no KYC required."]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Transparency:"})," All transactions are public on the blockchain."]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Composability:"}),' Protocols "stack" like Lego blocks for complex products.']}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Risks:"})," Smart contract bugs, volatility, and impermanent loss in liquidity pools."]})]})]}),Se.jsxs("div",{className:"defi-concepts",children:[Se.jsxs("div",{className:"defi-item",children:[Se.jsx("h5",{children:"Staking"}),Se.jsx("p",{children:"Lock tokens to secure the network and earn rewards (e.g., ~8% APY on WAX)."})]}),Se.jsxs("div",{className:"defi-item",children:[Se.jsx("h5",{children:"Liquidity Pools"}),Se.jsx("p",{children:"Provide tokens to DEXs like Alcor on WAX to earn trading fees."})]}),Se.jsxs("div",{className:"defi-item",children:[Se.jsx("h5",{children:"Lending/Borrowing"}),Se.jsx("p",{children:"Supply assets to earn interest or borrow against collateral."})]}),Se.jsxs("div",{className:"defi-item",children:[Se.jsx("h5",{children:"Yield Farming"}),Se.jsx("p",{children:"Maximize returns by moving assets across protocols."})]})]}),Se.jsx("p",{children:"In Pixel Journey, engage with DeFi via PXJ staking on TacoSwap or Alcor for rewards."}),Se.jsx("div",{className:"docs-link",children:Se.jsx("a",{href:"https://docs.pixeljourney.xyz/defi-guide",target:"_blank",rel:"noopener noreferrer",className:"docs-button",children:"\ud83c\udf3e Complete DeFi Guide"})}),Se.jsx("h4",{children:"\ud83d\udd12 Security Best Practices"}),Se.jsxs("ul",{children:[Se.jsxs("li",{children:[Se.jsx("strong",{children:"Private Key Security:"})," Never share your private keys or seed phrases. Store them securely offline."]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Phishing Protection:"})," Always verify URLs and never click suspicious links. Bookmark official sites."]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Smart Contract Risks:"})," Understand that smart contracts can have bugs. Only use audited and reputable protocols."]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Diversification:"})," Don't put all your funds in one asset or protocol. Spread risk across multiple investments."]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Research:"})," Always do your own research (DYOR) before investing in any project or token."]})]})]})},{id:"advanced-web3-concepts",title:"Advanced Web3 Concepts: Mastering the Decentralized Future",content:Se.jsxs("div",{className:"guide-content",children:[Se.jsx("h3",{children:"Advanced Web3 Concepts: Beyond the Basics"}),Se.jsx("div",{className:"intro-section",children:Se.jsx("p",{children:"Ready to dive deeper into the world of Web3? This comprehensive guide covers advanced concepts that will help you understand the full potential of decentralized technologies and how they're shaping the future of digital interaction, finance, and ownership."})}),Se.jsxs("div",{className:"concept-grid",children:[Se.jsxs("div",{className:"concept-card",children:[Se.jsx("h5",{children:"\ud83c\udfdb\ufe0f Decentralized Autonomous Organizations (DAOs)"}),Se.jsx("p",{children:"DAOs are organizations governed by smart contracts and community voting rather than traditional hierarchical management. Members hold governance tokens that grant voting rights on proposals, budget allocation, and strategic decisions."}),Se.jsxs("ul",{children:[Se.jsxs("li",{children:[Se.jsx("strong",{children:"Governance Tokens:"})," Digital assets that represent voting power"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Proposals:"})," Community-submitted ideas for changes or improvements"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Treasury Management:"})," Collective control over organizational funds"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Transparency:"})," All decisions and transactions are publicly visible"]})]})]}),Se.jsxs("div",{className:"concept-card",children:[Se.jsx("h5",{children:"\ud83d\udd17 Cross-Chain Interoperability"}),Se.jsx("p",{children:"The ability for different blockchain networks to communicate and share data. This enables assets and information to move seamlessly between different ecosystems."}),Se.jsxs("ul",{children:[Se.jsxs("li",{children:[Se.jsx("strong",{children:"Bridges:"})," Protocols that connect different blockchains"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Wrapped Tokens:"})," Representations of assets from other chains"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Multi-Chain dApps:"})," Applications that work across multiple blockchains"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Atomic Swaps:"})," Direct peer-to-peer exchanges between different cryptocurrencies"]})]})]}),Se.jsxs("div",{className:"concept-card",children:[Se.jsx("h5",{children:"\ud83d\udcca Yield Farming & Liquidity Mining"}),Se.jsx("p",{children:"Advanced DeFi strategies where users provide liquidity to protocols in exchange for rewards. This involves understanding impermanent loss, APY calculations, and risk management."}),Se.jsxs("ul",{children:[Se.jsxs("li",{children:[Se.jsx("strong",{children:"Liquidity Pools:"})," Smart contracts holding pairs of tokens for trading"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Impermanent Loss:"})," Temporary loss due to price divergence in LP tokens"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Compound Interest:"})," Reinvesting rewards to maximize returns"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Risk Assessment:"})," Evaluating protocol security and tokenomics"]})]})]}),Se.jsxs("div",{className:"concept-card",children:[Se.jsx("h5",{children:"\ud83c\udfae GameFi & Play-to-Earn Economics"}),Se.jsx("p",{children:"The intersection of gaming and decentralized finance, where players can earn real value through gameplay while enjoying entertainment."}),Se.jsxs("ul",{children:[Se.jsxs("li",{children:[Se.jsx("strong",{children:"In-Game Assets:"})," NFTs that represent items, characters, or land"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Token Economics:"})," Sustainable reward systems that don't cause inflation"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Scholarship Programs:"})," Lending assets to players who can't afford entry"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Guild Systems:"})," Organizations that coordinate player activities"]})]})]}),Se.jsxs("div",{className:"concept-card",children:[Se.jsx("h5",{children:"\ud83d\udd10 Zero-Knowledge Proofs"}),Se.jsx("p",{children:"Cryptographic methods that allow one party to prove they know something without revealing the information itself. This enables privacy while maintaining verifiability."}),Se.jsxs("ul",{children:[Se.jsxs("li",{children:[Se.jsx("strong",{children:"zk-SNARKs:"})," Succinct non-interactive arguments of knowledge"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"zk-STARKs:"})," Scalable transparent arguments of knowledge"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Privacy Coins:"})," Cryptocurrencies that hide transaction details"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Rollups:"})," Layer 2 scaling solutions using ZK proofs"]})]})]}),Se.jsxs("div",{className:"concept-card",children:[Se.jsx("h5",{children:"\ud83c\udf10 The Metaverse & Digital Ownership"}),Se.jsx("p",{children:"Virtual worlds where users can own, trade, and monetize digital assets. True ownership is enabled by blockchain technology and NFTs."}),Se.jsxs("ul",{children:[Se.jsxs("li",{children:[Se.jsx("strong",{children:"Virtual Real Estate:"})," Ownable land parcels in digital worlds"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Avatar Systems:"})," Customizable digital identities"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Virtual Economies:"})," Complete economic systems within games"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Interoperability:"})," Using assets across multiple virtual worlds"]})]})]})]}),Se.jsxs("div",{className:"practical-applications",children:[Se.jsx("h4",{children:"\ud83d\udee0\ufe0f Practical Applications in Pixel Journey"}),Se.jsxs("div",{className:"application-list",children:[Se.jsxs("div",{className:"application-item",children:[Se.jsx("h5",{children:"\ud83c\udfdb\ufe0f WaxRocks Council (DAO)"}),Se.jsx("p",{children:"Experience decentralized governance firsthand through the WaxRocks Council, where NFT holders vote on ecosystem decisions."})]}),Se.jsxs("div",{className:"application-item",children:[Se.jsx("h5",{children:"\ud83d\udd04 WPIXAL Tokenization (Cross-Chain)"}),Se.jsx("p",{children:"See how NFTs can be tokenized and used across different DeFi protocols, increasing liquidity and utility."})]}),Se.jsxs("div",{className:"application-item",children:[Se.jsx("h5",{children:"\ud83c\udf3e PXJ Staking (Yield Farming)"}),Se.jsx("p",{children:"Participate in yield farming by staking PXJ tokens and NFTs to earn rewards while supporting the ecosystem."})]}),Se.jsxs("div",{className:"application-item",children:[Se.jsx("h5",{children:"\ud83c\udfae Pixel Journey Metaverse (GameFi)"}),Se.jsx("p",{children:"Explore play-to-earn mechanics where your participation and NFT ownership generate real value."})]})]}),Se.jsxs("div",{className:"web3-cta-section",children:[Se.jsx("h4",{children:"\ud83c\udf1f Experience Web3 in Action"}),Se.jsx("p",{children:"Put your Web3 knowledge to practice with Pixel Journey's ecosystem!"}),Se.jsxs("div",{className:"web3-cta-buttons",children:[Se.jsxs("a",{href:"/collections",className:"cta-button primary",children:[Se.jsx("span",{className:"icon",children:"\ud83c\udfdb\ufe0f"}),"Join WaxRocks Council"]}),Se.jsxs("a",{href:"/rwax",className:"cta-button secondary",children:[Se.jsx("span",{className:"icon",children:"\ud83d\udd04"}),"Tokenize NFTs"]}),Se.jsxs("a",{href:"/rewards",className:"cta-button secondary",children:[Se.jsx("span",{className:"icon",children:"\ud83c\udf3e"}),"Start Staking"]})]})]})]}),Se.jsxs("div",{className:"learning-path",children:[Se.jsx("h4",{children:"\ud83d\udcc8 Your Web3 Learning Journey"}),Se.jsxs("div",{className:"learning-steps",children:[Se.jsxs("div",{className:"learning-step",children:[Se.jsx("h5",{children:"\ud83c\udfaf Beginner: Master the Basics"}),Se.jsx("p",{children:"Start with wallets, basic trading, and understanding blockchain fundamentals"})]}),Se.jsxs("div",{className:"learning-step",children:[Se.jsx("h5",{children:"\ud83d\ude80 Intermediate: Explore DeFi"}),Se.jsx("p",{children:"Learn about staking, liquidity provision, and yield farming strategies"})]}),Se.jsxs("div",{className:"learning-step",children:[Se.jsx("h5",{children:"\ud83e\udde0 Advanced: Understand Governance"}),Se.jsx("p",{children:"Participate in DAOs, understand tokenomics, and contribute to protocol development"})]}),Se.jsxs("div",{className:"learning-step",children:[Se.jsx("h5",{children:"\ud83c\udf93 Expert: Build and Innovate"}),Se.jsx("p",{children:"Create your own projects, contribute to open source, and help shape the future of Web3"})]})]})]}),Se.jsxs("div",{className:"web3-resources",children:[Se.jsx("h4",{children:"\ud83d\udcda Essential Web3 Resources"}),Se.jsxs("div",{className:"resource-grid",children:[Se.jsxs("div",{className:"resource-category",children:[Se.jsx("h5",{children:"\ud83d\udcd6 Educational Platforms"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"Ethereum.org - Comprehensive Ethereum documentation"}),Se.jsx("li",{children:"DeFi Pulse - DeFi protocol analytics and education"}),Se.jsx("li",{children:"Coin Bureau - In-depth crypto education videos"}),Se.jsx("li",{children:"Bankless - Web3 newsletter and podcast"})]})]}),Se.jsxs("div",{className:"resource-category",children:[Se.jsx("h5",{children:"\ud83d\udd27 Developer Tools"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"Remix IDE - Solidity smart contract development"}),Se.jsx("li",{children:"Hardhat - Ethereum development environment"}),Se.jsx("li",{children:"OpenZeppelin - Secure smart contract libraries"}),Se.jsx("li",{children:"Moralis - Web3 development platform"})]})]}),Se.jsxs("div",{className:"resource-category",children:[Se.jsx("h5",{children:"\ud83d\udcca Analytics & Data"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"DeFiLlama - Multi-chain DeFi analytics"}),Se.jsx("li",{children:"Dune Analytics - Blockchain data visualization"}),Se.jsx("li",{children:"CoinGecko - Cryptocurrency market data"}),Se.jsx("li",{children:"Messari - Crypto research and analytics"})]})]})]})]})]})},{id:"security-best-practices",title:"Web3 Security: Protecting Your Digital Assets",content:Se.jsxs("div",{className:"guide-content",children:[Se.jsx("h3",{children:"Web3 Security: Your Shield in the Digital Frontier"}),Se.jsx("div",{className:"intro-section",children:Se.jsx("p",{children:"In the decentralized world of Web3, you are your own bank. This freedom comes with great responsibility - protecting your assets, private keys, and digital identity. Learn the essential security practices that will keep you safe in the Web3 ecosystem."})}),Se.jsxs("div",{className:"security-fundamentals",children:[Se.jsx("h4",{children:"\ud83d\udd10 Security Fundamentals"}),Se.jsxs("div",{className:"fundamental-grid",children:[Se.jsxs("div",{className:"fundamental-card",children:[Se.jsx("h5",{children:"\ud83d\udd11 Private Key Management"}),Se.jsx("p",{children:"Your private keys are the ultimate proof of ownership. Never share them with anyone."}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"Store seed phrases offline in multiple secure locations"}),Se.jsx("li",{children:"Use hardware wallets for large amounts"}),Se.jsx("li",{children:"Never enter seed phrases on websites or apps"}),Se.jsx("li",{children:"Consider multi-signature wallets for added security"})]})]}),Se.jsxs("div",{className:"fundamental-card",children:[Se.jsx("h5",{children:"\ud83c\udfa3 Phishing Protection"}),Se.jsx("p",{children:"Scammers create fake websites and apps to steal your credentials and assets."}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"Always verify URLs before connecting your wallet"}),Se.jsx("li",{children:"Bookmark legitimate sites and use them consistently"}),Se.jsx("li",{children:'Be suspicious of urgent messages or "limited time" offers'}),Se.jsx("li",{children:"Never click links in unsolicited messages"})]})]}),Se.jsxs("div",{className:"fundamental-card",children:[Se.jsx("h5",{children:"\ud83d\udcf1 Device Security"}),Se.jsx("p",{children:"Secure your devices to prevent unauthorized access to your wallets and accounts."}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"Keep operating systems and browsers updated"}),Se.jsx("li",{children:"Use strong, unique passwords for all accounts"}),Se.jsx("li",{children:"Enable two-factor authentication everywhere possible"}),Se.jsx("li",{children:"Avoid using public WiFi for crypto transactions"})]})]}),Se.jsxs("div",{className:"fundamental-card",children:[Se.jsx("h5",{children:"\ud83d\udd0d Smart Contract Risks"}),Se.jsx("p",{children:"Understand the risks when interacting with smart contracts and DeFi protocols."}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"Research protocols before depositing funds"}),Se.jsx("li",{children:"Check for security audits and bug bounty programs"}),Se.jsx("li",{children:"Start with small amounts when trying new protocols"}),Se.jsx("li",{children:"Understand impermanent loss and liquidation risks"})]})]})]})]}),Se.jsxs("div",{className:"common-scams",children:[Se.jsx("h4",{children:"\u26a0\ufe0f Common Scams to Avoid"}),Se.jsxs("div",{className:"scam-list",children:[Se.jsxs("div",{className:"scam-item",children:[Se.jsx("h5",{children:"\ud83c\udfad Fake Support"}),Se.jsx("p",{children:"Scammers impersonate official support to steal your credentials. Real support will never ask for your private keys or seed phrases."})]}),Se.jsxs("div",{className:"scam-item",children:[Se.jsx("h5",{children:'\ud83d\udcb0 "Free" Airdrops'}),Se.jsx("p",{children:"Fake airdrops that require you to connect your wallet to malicious sites. Always verify airdrop announcements through official channels."})]}),Se.jsxs("div",{className:"scam-item",children:[Se.jsx("h5",{children:"\ud83d\ude80 Pump and Dump Schemes"}),Se.jsx("p",{children:"Coordinated efforts to artificially inflate token prices before selling. Be wary of tokens with unrealistic promises or celebrity endorsements."})]}),Se.jsxs("div",{className:"scam-item",children:[Se.jsx("h5",{children:"\ud83d\udd04 Fake DEX Interfaces"}),Se.jsx("p",{children:"Malicious copies of popular DEX interfaces that steal your tokens. Always use official URLs and verify smart contract addresses."})]})]})]}),Se.jsxs("div",{className:"security-tools",children:[Se.jsx("h4",{children:"\ud83d\udee1\ufe0f Essential Security Tools"}),Se.jsxs("div",{className:"tool-grid",children:[Se.jsxs("div",{className:"tool-card",children:[Se.jsx("h5",{children:"\ud83d\udd12 Hardware Wallets"}),Se.jsx("p",{children:"Physical devices that store your private keys offline"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"Ledger Nano S/X"}),Se.jsx("li",{children:"Trezor Model T"}),Se.jsx("li",{children:"KeepKey"})]})]}),Se.jsxs("div",{className:"tool-card",children:[Se.jsx("h5",{children:"\ud83d\udd0d Security Scanners"}),Se.jsx("p",{children:"Tools to check smart contracts and transactions for risks"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"Token Sniffer"}),Se.jsx("li",{children:"GoPlus Security"}),Se.jsx("li",{children:"Pocket Universe"})]})]}),Se.jsxs("div",{className:"tool-card",children:[Se.jsx("h5",{children:"\ud83d\udee1\ufe0f Browser Extensions"}),Se.jsx("p",{children:"Security-focused browser extensions for Web3"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"MetaMask (with security features enabled)"}),Se.jsx("li",{children:"Wallet Guard"}),Se.jsx("li",{children:"Fire (transaction simulator)"})]})]})]})]}),Se.jsxs("div",{className:"incident-response",children:[Se.jsx("h4",{children:"\ud83d\udea8 If Something Goes Wrong"}),Se.jsxs("div",{className:"response-steps",children:[Se.jsxs("div",{className:"response-step",children:[Se.jsx("h5",{children:"1. Stay Calm and Assess"}),Se.jsx("p",{children:"Don't panic. Carefully review what happened and gather information about the incident."})]}),Se.jsxs("div",{className:"response-step",children:[Se.jsx("h5",{children:"2. Secure Remaining Assets"}),Se.jsx("p",{children:"If your wallet is compromised, immediately move any remaining assets to a new, secure wallet."})]}),Se.jsxs("div",{className:"response-step",children:[Se.jsx("h5",{children:"3. Report and Document"}),Se.jsx("p",{children:"Report the incident to relevant platforms and document everything for potential recovery efforts."})]}),Se.jsxs("div",{className:"response-step",children:[Se.jsx("h5",{children:"4. Learn and Improve"}),Se.jsx("p",{children:"Analyze what went wrong and implement better security practices to prevent future incidents."})]})]})]})]})}]},{id:"interactive-quizzes",title:"Interactive Quizzes",icon:"\ud83e\udde0",sections:[{id:"how-to-quiz",title:"How to Take Quiz",content:Se.jsxs("div",{className:"guide-content",children:[Se.jsx("h3",{children:"\ud83d\udccb How to Take the Quiz"}),Se.jsx("p",{children:"Learn how to navigate our interactive quiz system and maximize your learning experience. Follow these steps to successfully complete quizzes and earn your PxBadges!"}),Se.jsxs("div",{className:"instruction-steps",children:[Se.jsxs("div",{className:"instruction-step",children:[Se.jsx("span",{className:"step-number",children:"1"}),Se.jsxs("div",{className:"step-content",children:[Se.jsx("h5",{children:"Read Each Question Carefully"}),Se.jsx("p",{children:"Take your time to understand what's being asked before selecting an answer. Pay attention to keywords and specific details in the question."})]})]}),Se.jsxs("div",{className:"instruction-step",children:[Se.jsx("span",{className:"step-number",children:"2"}),Se.jsxs("div",{className:"step-content",children:[Se.jsx("h5",{children:"Select Your Answer"}),Se.jsx("p",{children:"Click on the answer you think is correct. You can change your selection before submitting by clicking on a different option."})]})]}),Se.jsxs("div",{className:"instruction-step",children:[Se.jsx("span",{className:"step-number",children:"3"}),Se.jsxs("div",{className:"step-content",children:[Se.jsx("h5",{children:"Get Instant Feedback"}),Se.jsx("p",{children:"After each question, you'll see if you got it right and learn why that's the correct answer. Use this feedback to improve your understanding."})]})]}),Se.jsxs("div",{className:"instruction-step",children:[Se.jsx("span",{className:"step-number",children:"4"}),Se.jsxs("div",{className:"step-content",children:[Se.jsx("h5",{children:"Earn Your Badge"}),Se.jsx("p",{children:"Complete the quiz with a passing score to earn your NFT Basics PxBadge! Badges are stored on the blockchain as proof of your knowledge."})]})]})]}),Se.jsxs("div",{className:"quiz-benefits",children:[Se.jsx("h4",{children:"\ud83c\udfc6 Quiz Benefits"}),Se.jsxs("div",{className:"benefit-grid",children:[Se.jsxs("div",{className:"benefit-item",children:[Se.jsx("span",{className:"benefit-icon",children:"\ud83c\udf96\ufe0f"}),Se.jsx("h5",{children:"Earn PxBadges"}),Se.jsx("p",{children:"Collect achievement badges that showcase your Web3 knowledge and are stored permanently on the blockchain"})]}),Se.jsxs("div",{className:"benefit-item",children:[Se.jsx("span",{className:"benefit-icon",children:"\ud83d\udcc8"}),Se.jsx("h5",{children:"Track Progress"}),Se.jsx("p",{children:"Monitor your learning journey and see how much you've improved across different topics and categories"})]}),Se.jsxs("div",{className:"benefit-item",children:[Se.jsx("span",{className:"benefit-icon",children:"\ud83c\udf81"}),Se.jsx("h5",{children:"Unlock Rewards"}),Se.jsx("p",{children:"High quiz scores may unlock special rewards, exclusive content, and access to advanced features"})]}),Se.jsxs("div",{className:"benefit-item",children:[Se.jsx("span",{className:"benefit-icon",children:"\ud83e\udd1d"}),Se.jsx("h5",{children:"Join Community"}),Se.jsx("p",{children:"Connect with other learners, share your achievements, and participate in community challenges"})]})]})]}),Se.jsxs("div",{className:"quiz-tips",children:[Se.jsx("h4",{children:"\ud83d\udca1 Pro Tips for Success"}),Se.jsxs("div",{className:"tips-list",children:[Se.jsxs("div",{className:"tip-item",children:[Se.jsx("span",{className:"tip-icon",children:"\ud83d\udcda"}),Se.jsx("h5",{children:"Study the Material First"}),Se.jsx("p",{children:"Review the relevant learning sections before taking a quiz to ensure you understand the concepts."})]}),Se.jsxs("div",{className:"tip-item",children:[Se.jsx("span",{className:"tip-icon",children:"\u23f0"}),Se.jsx("h5",{children:"Take Your Time"}),Se.jsx("p",{children:"There's no time limit on our quizzes. Think through each question carefully before selecting your answer."})]}),Se.jsxs("div",{className:"tip-item",children:[Se.jsx("span",{className:"tip-icon",children:"\ud83d\udd04"}),Se.jsx("h5",{children:"Retake if Needed"}),Se.jsx("p",{children:"You can retake quizzes to improve your score. Use the feedback from previous attempts to learn and improve."})]}),Se.jsxs("div",{className:"tip-item",children:[Se.jsx("span",{className:"tip-icon",children:"\ud83c\udfaf"}),Se.jsx("h5",{children:"Aim for Understanding"}),Se.jsx("p",{children:"Focus on truly understanding the concepts rather than just memorizing answers for better long-term learning."})]})]})]})]})},{id:"nft-basics-quiz",title:"NFT Basics Quiz",content:Se.jsxs("div",{className:"guide-content",children:[Se.jsxs("div",{className:"quiz-intro",children:[Se.jsx("h3",{children:"\ud83e\udde0 Test Your NFT Knowledge"}),Se.jsx("p",{children:"Ready to test what you've learned about NFTs? This interactive quiz covers the fundamentals of Non-Fungible Tokens, digital ownership, and blockchain basics. Complete the quiz to earn your first PxBadge!"})]}),(()=>{const e=Ha("nft-basics");return e?Se.jsx(Xa,{questions:e.questions,title:e.title,onComplete:(e,t)=>o("nft-basics",e,t)}):Se.jsx("p",{children:"Quiz data not available."})})(),n.has("nft-basics")&&Se.jsxs("div",{className:"quiz-completion-badge",children:[Se.jsx("h4",{children:"\ud83c\udf89 Quiz Completed!"}),Se.jsxs("p",{children:["Score: ",r["nft-basics"]?.score,"/",r["nft-basics"]?.total,r["nft-basics"]?.score===r["nft-basics"]?.total&&Se.jsx("span",{className:"perfect-score",children:" - Perfect Score! \ud83c\udfc6"})]})]})]})},{id:"wax-ecosystem-quiz",title:"WAX Ecosystem Quiz",content:Se.jsxs("div",{className:"guide-content",children:[Se.jsx("h3",{children:"Master the WAX Blockchain"}),Se.jsx("p",{children:"Test your understanding of the WAX blockchain, its gaming focus, and unique features that make it perfect for NFTs and digital assets."}),(()=>{const e=Ha("wax-ecosystem");return e?Se.jsx(Xa,{questions:e.questions,title:e.title,onComplete:(e,t)=>o("wax-ecosystem",e,t)}):Se.jsx("p",{children:"Quiz data not available."})})(),n.has("wax-ecosystem")&&Se.jsxs("div",{className:"quiz-completion-badge",children:[Se.jsx("h4",{children:"\ud83c\udf89 Quiz Completed!"}),Se.jsxs("p",{children:["Score: ",r["wax-ecosystem"]?.score,"/",r["wax-ecosystem"]?.total,r["wax-ecosystem"]?.score===r["wax-ecosystem"]?.total&&Se.jsx("span",{className:"perfect-score",children:" - Perfect Score! \ud83c\udfc6"})]})]})]})},{id:"marketplace-mastery",title:"Marketplace Mastery",content:Se.jsxs("div",{className:"guide-content",children:[Se.jsx("h3",{children:"\ud83c\udfea Master NFT Trading Across Platforms"}),Se.jsx("p",{children:"Learn to navigate and excel on the major WAX marketplaces, each with unique features and advantages for different trading strategies."}),Se.jsxs("div",{className:"marketplace-comparison",children:[Se.jsxs("div",{className:"platform-section",children:[Se.jsx("h4",{children:"\ud83d\ude80 PxMarket - Pixel Journey's Premium Platform"}),Se.jsxs("div",{className:"platform-features",children:[Se.jsxs("div",{className:"feature-highlight",children:[Se.jsx("h5",{children:"\ud83d\udc8e Pixal PFP Benefits"}),Se.jsx("p",{children:"Holders enjoy reduced marketplace fees, priority access to new drops, and exclusive trading features."})]}),Se.jsxs("div",{className:"feature-highlight",children:[Se.jsx("h5",{children:"\ud83d\udcca Advanced Analytics"}),Se.jsx("p",{children:"Built-in rarity scoring, price history charts, and market trend analysis help you make informed decisions."})]}),Se.jsxs("div",{className:"feature-highlight",children:[Se.jsx("h5",{children:"\ud83d\udd04 Bulk Operations"}),Se.jsx("p",{children:"List multiple NFTs at once, bulk purchase collections, and manage your portfolio efficiently."})]}),Se.jsxs("div",{className:"feature-highlight",children:[Se.jsx("h5",{children:"\ud83c\udfae Gaming Integration"}),Se.jsx("p",{children:"Seamlessly use your NFTs in Pixel Journey gameplay while they remain available for trading."})]})]})]}),Se.jsxs("div",{className:"platform-section",children:[Se.jsx("h4",{children:"\ud83c\udf10 AtomicHub - WAX's Premier Marketplace"}),Se.jsx("p",{children:"The largest NFT marketplace on WAX, acquired by Spielworks in 2025 with enhanced gaming integrations."}),Se.jsx("div",{className:"platform-tips",children:Se.jsxs("ul",{children:[Se.jsxs("li",{children:["\u2705 ",Se.jsx("strong",{children:"Best for:"})," Discovering new collections and comprehensive market research"]}),Se.jsxs("li",{children:["\u2705 ",Se.jsx("strong",{children:"Features:"})," Advanced filtering, bulk operations, and detailed analytics"]}),Se.jsxs("li",{children:["\u2705 ",Se.jsx("strong",{children:"Pro Tip:"})," Use AtomicHub's explorer to verify collection authenticity and rarity"]})]})})]}),Se.jsxs("div",{className:"platform-section",children:[Se.jsx("h4",{children:"\ud83d\udcb0 NeftyBlocks - Trade-to-Earn Excellence"}),Se.jsx("p",{children:"Earn NEFTY tokens through trading while accessing advanced crafting and blend features."}),Se.jsx("div",{className:"platform-tips",children:Se.jsxs("ul",{children:[Se.jsxs("li",{children:["\u2705 ",Se.jsx("strong",{children:"Best for:"})," Active traders seeking rewards and crafting enthusiasts"]}),Se.jsxs("li",{children:["\u2705 ",Se.jsx("strong",{children:"Features:"})," Blends, drops, staking rewards, and liquidity provision"]}),Se.jsxs("li",{children:["\u2705 ",Se.jsx("strong",{children:"Pro Tip:"})," Stake NEFTY tokens for WAXP rewards and reduced listing fees"]})]})})]})]}),(()=>{const e=Ha("atomichub");return e?Se.jsxs("div",{className:"quiz-section",children:[Se.jsx("h4",{children:"\ud83c\udfaf Test Your Marketplace Knowledge"}),Se.jsx(Xa,{questions:e.questions,title:"Marketplace Mastery Quiz",onComplete:(e,t)=>o("atomichub",e,t)})]}):null})(),n.has("atomichub")&&Se.jsxs("div",{className:"quiz-completion-badge",children:[Se.jsx("h4",{children:"\ud83c\udf89 Quiz Completed!"}),Se.jsxs("p",{children:["Score: ",r.atomichub?.score,"/",r.atomichub?.total,r.atomichub?.score===r.atomichub?.total&&Se.jsx("span",{className:"perfect-score",children:" - Perfect Score! \ud83c\udfc6"})]})]})]})},{id:"pxmarket-quiz",title:"PxMarket Platform Quiz",content:Se.jsxs("div",{className:"guide-content",children:[Se.jsx("h3",{children:"PxMarket & Pixel Journey Ecosystem"}),Se.jsx("p",{children:"Test your understanding of PxMarket's unique features, the Pixel Journey ecosystem, and how gaming integrates with NFT trading."}),(()=>{const e=Ha("pxmarket");return e?Se.jsx(Xa,{questions:e.questions,title:e.title,onComplete:(e,t)=>o("pxmarket",e,t)}):Se.jsx("p",{children:"Quiz data not available."})})(),n.has("pxmarket")&&Se.jsxs("div",{className:"quiz-completion-badge",children:[Se.jsx("h4",{children:"\ud83c\udf89 Quiz Completed!"}),Se.jsxs("p",{children:["Score: ",r.pxmarket?.score,"/",r.pxmarket?.total,r.pxmarket?.score===r.pxmarket?.total&&Se.jsx("span",{className:"perfect-score",children:" - Perfect Score! \ud83c\udfc6"})]})]})]})},{id:"defi-basics-quiz",title:"DeFi Fundamentals Quiz",content:Se.jsxs("div",{className:"guide-content",children:[Se.jsx("h3",{children:"Decentralized Finance Knowledge"}),Se.jsx("p",{children:"Challenge yourself with questions about DeFi concepts, liquidity, yield farming, and the decentralized financial ecosystem."}),(()=>{const e=Ha("defi-basics");return e?Se.jsx(Xa,{questions:e.questions,title:e.title,onComplete:(e,t)=>o("defi-basics",e,t)}):Se.jsx("p",{children:"Quiz data not available."})})(),n.has("defi-basics")&&Se.jsxs("div",{className:"quiz-completion-badge",children:[Se.jsx("h4",{children:"\ud83c\udf89 Quiz Completed!"}),Se.jsxs("p",{children:["Score: ",r["defi-basics"]?.score,"/",r["defi-basics"]?.total,r["defi-basics"]?.score===r["defi-basics"]?.total&&Se.jsx("span",{className:"perfect-score",children:" - Perfect Score! \ud83c\udfc6"})]})]})]})},{id:"advanced-web3-quiz",title:"Advanced Web3 Concepts Quiz",content:Se.jsxs("div",{className:"guide-content",children:[Se.jsx("h3",{children:"Advanced Web3 & Blockchain Mastery"}),Se.jsx("p",{children:"Put your advanced knowledge to the test with questions about smart contracts, DAOs, cross-chain technology, and governance mechanisms."}),(()=>{const e=Ha("advanced-web3");return e?Se.jsx(Xa,{questions:e.questions,title:e.title,onComplete:(e,t)=>o("advanced-web3",e,t)}):Se.jsx("p",{children:"Quiz data not available."})})(),n.has("advanced-web3")&&Se.jsxs("div",{className:"quiz-completion-badge",children:[Se.jsx("h4",{children:"\ud83c\udf89 Quiz Completed!"}),Se.jsxs("p",{children:["Score: ",r["advanced-web3"]?.score,"/",r["advanced-web3"]?.total,r["advanced-web3"]?.score===r["advanced-web3"]?.total&&Se.jsx("span",{className:"perfect-score",children:" - Perfect Score! \ud83c\udfc6"})]})]})]})}]},{id:"pixel-journey",title:"Pixel Journey",icon:"\ud83c\udfae",sections:[{id:"about-pixel-journey",title:"About Pixel Journey",content:Se.jsxs("div",{className:"guide-content",children:[Se.jsx("h3",{children:"Welcome to Pixel Journey: Where NFTs Meet Adventure"}),Se.jsx("div",{className:"intro-section",children:Se.jsx("p",{children:"Pixel Journey is more than just an NFT marketplace \u2013 it's a comprehensive ecosystem that combines trading, gaming, and community engagement on the WAX blockchain. Our platform offers unique features and opportunities that set us apart in the digital asset space."})}),Se.jsxs("div",{className:"journey-map-section",children:[Se.jsx("h4",{children:"\ud83d\uddfa\ufe0f Explore Our Journey"}),Se.jsx("p",{children:"Discover the complete roadmap and features of Pixel Journey:"}),Se.jsxs("button",{className:"journey-map-btn",children:[Se.jsx("span",{className:"btn-icon",children:"\ud83d\uddfa\ufe0f"}),"View Journey Map & Roadmap"]})]}),Se.jsxs("div",{className:"key-features",children:[Se.jsx("h4",{children:"\ud83c\udf1f What Makes Pixel Journey Special"}),Se.jsxs("div",{className:"feature-grid",children:[Se.jsxs("div",{className:"feature-card",children:[Se.jsx("h5",{children:"\ud83c\udfaf Curated Collections"}),Se.jsx("p",{children:"Hand-picked NFT collections with real utility and strong communities"})]}),Se.jsxs("div",{className:"feature-card",children:[Se.jsx("h5",{children:"\ud83d\udc8e Exclusive Drops"}),Se.jsx("p",{children:"First access to limited edition NFTs and special collaborations"})]}),Se.jsxs("div",{className:"feature-card",children:[Se.jsx("h5",{children:"\ud83c\udfae Gaming Integration"}),Se.jsx("p",{children:"NFTs that work across multiple games and provide real gameplay benefits"})]}),Se.jsxs("div",{className:"feature-card",children:[Se.jsx("h5",{children:"\ud83c\udfc6 Reward System"}),Se.jsx("p",{children:"Earn PXJ tokens and exclusive benefits through active participation"})]})]})]}),Se.jsxs("div",{className:"ecosystem-overview",children:[Se.jsx("h4",{children:"\ud83d\udd17 The Pixel Journey Ecosystem"}),Se.jsx("p",{children:"Our platform consists of several interconnected components:"}),Se.jsxs("ul",{children:[Se.jsxs("li",{children:[Se.jsx("strong",{children:"PxMarket:"})," Our flagship NFT marketplace with advanced trading features"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"PXJ Token:"})," The native utility token powering our ecosystem"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Pixal PFPs:"})," Our signature profile picture collection with unique traits"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Monthly Airdrops:"})," Regular rewards for community members"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"DeFi Integration:"})," Staking, farming, and tokenization opportunities"]})]})]})]})},{id:"pxj-tokenomics",title:"Tokenomics of the $PXJ Token: Fueling the Journey",content:Se.jsxs("div",{className:"guide-content",children:[Se.jsx("h3",{children:"Tokenomics of the $PXJ Token: Fueling the Journey"}),Se.jsx("div",{className:"intro-section",children:Se.jsx("p",{children:"Embark on an exploration of the $PXJ token, the lifeblood of the Pixel Journey ecosystem. Understanding the tokenomics of $PXJ is essential for navigating the journey, making informed decisions, and maximizing your rewards. From its total supply to its distribution mechanisms, this section provides a comprehensive overview of the $PXJ token and its role in the Pixel Journey."})}),Se.jsxs("div",{className:"key-tokenomics",children:[Se.jsx("h4",{children:"\ud83d\udd11 Key Tokenomics"}),Se.jsxs("div",{className:"tokenomics-grid",children:[Se.jsxs("div",{className:"tokenomics-card highlight",children:[Se.jsx("h5",{children:"\ud83d\udcca Total Supply"}),Se.jsx("p",{className:"large-number",children:"10 Billion $PXJ"}),Se.jsx("p",{children:"Fixed maximum supply ensuring scarcity and value preservation"})]}),Se.jsxs("div",{className:"tokenomics-card",children:[Se.jsx("h5",{children:"\ud83d\udd25 Liquidity Pools"}),Se.jsx("p",{className:"percentage",children:"30%+"}),Se.jsx("p",{children:"Over 30% of supply burned into LP positions, ensuring long-term sustainability and price stability"})]}),Se.jsxs("div",{className:"tokenomics-card",children:[Se.jsx("h5",{children:"\ud83c\udf81 Community Rewards"}),Se.jsx("p",{className:"percentage",children:"Significant Portion"}),Se.jsx("p",{children:"Large allocation for airdrops, staking rewards, and community incentives"})]})]})]}),Se.jsxs("div",{className:"utility-section",children:[Se.jsx("h4",{children:"\u26a1 Utility of $PXJ"}),Se.jsxs("div",{className:"utility-grid",children:[Se.jsxs("div",{className:"utility-card",children:[Se.jsx("div",{className:"utility-icon",children:"\ud83d\udee0\ufe0f"}),Se.jsx("h5",{children:"Crafting"}),Se.jsx("p",{children:"$PXJ is used to create Pixel Ingredient Packs from your Pixal PFPs, unlocking new possibilities"})]}),Se.jsxs("div",{className:"utility-card",children:[Se.jsx("div",{className:"utility-icon",children:"\ud83d\udc8e"}),Se.jsx("h5",{children:"Staking"}),Se.jsx("p",{children:"Stake $PXJ to earn additional rewards on various platforms throughout the ecosystem"})]}),Se.jsxs("div",{className:"utility-card",children:[Se.jsx("div",{className:"utility-icon",children:"\ud83d\uddf3\ufe0f"}),Se.jsx("h5",{children:"Governance"}),Se.jsx("p",{children:"$PXJ holders have a voice in the future direction of the Pixel Journey ecosystem through DAO"})]}),Se.jsxs("div",{className:"utility-card",children:[Se.jsx("div",{className:"utility-icon",children:"\ud83c\udfae"}),Se.jsx("h5",{children:"In-Game Currency"}),Se.jsx("p",{children:"$PXJ may be used as currency for future games and experiences within the Pixel Journey universe"})]})]})]}),Se.jsxs("div",{className:"why-matters",children:[Se.jsx("h4",{children:"\ud83c\udf1f Why $PXJ Matters"}),Se.jsx("p",{children:"$PXJ is the key to unlocking the full potential of the Pixel Journey ecosystem. It's used to create, stake, govern, and participate in various activities, making it an essential asset for any Pixel Journey adventurer. The token serves as both a utility mechanism and a store of value within our growing metaverse."})]}),Se.jsxs("div",{className:"historical-context",children:[Se.jsx("h4",{children:"\ud83d\udcc8 Historical Context"}),Se.jsxs("p",{children:["The $PXJ token was launched in ",Se.jsx("span",{className:"emphasis-span",children:"October 2023"}),". Since then, it has become the central currency of the Pixel Journey ecosystem, fueling its growth and rewarding its community. The token has demonstrated resilience through market cycles while maintaining strong utility and community adoption across multiple platforms and use cases."]})]}),Se.jsxs("div",{className:"distribution-details",children:[Se.jsx("h4",{children:"\ud83d\udccb Distribution Breakdown"}),Se.jsxs("div",{className:"distribution-list",children:[Se.jsxs("div",{className:"distribution-item",children:[Se.jsx("span",{className:"distribution-label",children:"Liquidity Pools:"}),Se.jsx("span",{className:"distribution-value",children:"30%+ (Burned)"}),Se.jsx("p",{children:"Permanently locked in liquidity positions for price stability"})]}),Se.jsxs("div",{className:"distribution-item",children:[Se.jsx("span",{className:"distribution-label",children:"Airdrops & Rewards:"}),Se.jsx("span",{className:"distribution-value",children:"Significant Allocation"}),Se.jsx("p",{children:"Ongoing rewards for community participation and NFT holders"})]}),Se.jsxs("div",{className:"distribution-item",children:[Se.jsx("span",{className:"distribution-label",children:"Ecosystem Development:"}),Se.jsx("span",{className:"distribution-value",children:"Reserved"}),Se.jsx("p",{children:"Supporting platform growth, partnerships, and new features"})]})]})]})]})},{id:"pxj-token",title:"PXJ Token: The Fuel of Pixel Journey",content:Se.jsxs("div",{className:"guide-content",children:[Se.jsx("h3",{children:"PXJ Token: Powering the Pixel Journey Ecosystem"}),Se.jsx("div",{className:"intro-section",children:Se.jsx("p",{children:"PXJ is the native utility token of Pixel Journey, designed to fuel our entire ecosystem. More than just a currency, PXJ represents membership in our community and unlocks exclusive benefits throughout the platform."})}),Se.jsxs("div",{className:"token-functions",children:[Se.jsx("h4",{children:"\ud83d\udd27 Core Functions"}),Se.jsxs("div",{className:"function-grid",children:[Se.jsxs("div",{className:"function-card",children:[Se.jsx("h5",{children:"\ud83d\udcb0 Marketplace Currency"}),Se.jsx("p",{children:"Use PXJ to purchase NFTs, pay reduced marketplace fees, and access exclusive sales"})]}),Se.jsxs("div",{className:"function-card",children:[Se.jsx("h5",{children:"\ud83c\udf81 Reward Distribution"}),Se.jsx("p",{children:"Earn PXJ through staking, airdrops, community participation, and special events"})]}),Se.jsxs("div",{className:"function-card",children:[Se.jsx("h5",{children:"\ud83d\uddf3\ufe0f Governance Rights"}),Se.jsx("p",{children:"Vote on platform decisions, feature requests, and community proposals"})]}),Se.jsxs("div",{className:"function-card",children:[Se.jsx("h5",{children:"\ud83d\udd13 Premium Access"}),Se.jsx("p",{children:"Unlock VIP features, early access to drops, and exclusive community areas"})]})]})]}),Se.jsxs("div",{className:"how-to-get",children:[Se.jsx("h4",{children:"\ud83d\udc8e How to Acquire PXJ"}),Se.jsxs("ul",{children:[Se.jsxs("li",{children:[Se.jsx("strong",{children:"Trading:"})," Buy PXJ on Alcor Exchange and other DEXs"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Staking:"})," Stake NFTs and other tokens to earn PXJ rewards"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Airdrops:"})," Hold Pixal PFPs to receive monthly PXJ distributions"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Community Events:"})," Participate in contests, challenges, and special events"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Referrals:"})," Earn PXJ by bringing new users to the platform"]})]})]}),Se.jsxs("div",{className:"tokenomics",children:[Se.jsx("h4",{children:"\ud83d\udcca Tokenomics & Distribution"}),Se.jsx("p",{children:"PXJ has a carefully designed tokenomics structure to ensure long-term sustainability:"}),Se.jsxs("ul",{children:[Se.jsxs("li",{children:[Se.jsx("strong",{children:"Total Supply:"})," Fixed supply with deflationary mechanisms"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Community Rewards:"})," 40% allocated for airdrops and staking rewards"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Development Fund:"})," 25% for platform development and partnerships"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Liquidity:"})," 20% for DEX liquidity and market stability"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Team & Advisors:"})," 15% with vesting schedules"]})]}),Se.jsx("div",{className:"docs-link",children:Se.jsx("a",{href:"https://docs.pixeljourney.xyz/tokenomics",target:"_blank",rel:"noopener noreferrer",className:"docs-button",children:"\ud83d\udcca Detailed Tokenomics"})})]}),Se.jsxs("div",{className:"historical-context",children:[Se.jsx("h4",{children:"\ud83d\udcc8 Historical Performance"}),Se.jsx("p",{children:"Since its launch in early 2024, PXJ has shown remarkable growth and adoption. The token has weathered market volatility while maintaining strong utility and community support. Key milestones include successful DEX listings, major partnership announcements, and consistent reward distributions to holders."})]})]})},{id:"pixal-pfps",title:"Pixal PFPs: Your Digital Identity",content:Se.jsxs("div",{className:"guide-content",children:[Se.jsx("h3",{children:"Pixal PFPs: More Than Just Profile Pictures"}),Se.jsx("div",{className:"intro-section",children:Se.jsx("p",{children:"Pixal PFPs are the cornerstone of the Pixel Journey community. These aren't just static images \u2013 they're dynamic NFTs that serve as your identity within our ecosystem, unlocking benefits, rewards, and exclusive access throughout the platform."})}),Se.jsxs("div",{className:"pfp-benefits",children:[Se.jsx("h4",{children:"\u2728 What Makes Pixal PFPs Special"}),Se.jsxs("div",{className:"benefit-list",children:[Se.jsxs("div",{className:"benefit-item",children:[Se.jsx("h5",{children:"\ud83c\udfad Unique Traits & Rarity"}),Se.jsx("p",{children:"Each Pixal PFP features hand-crafted traits with varying rarity levels, making every NFT unique and collectible"})]}),Se.jsxs("div",{className:"benefit-item",children:[Se.jsx("h5",{children:"\ud83d\udcb0 Monthly Airdrops"}),Se.jsx("p",{children:"Holders automatically receive monthly PXJ token distributions, with bonus rewards for rare traits"})]}),Se.jsxs("div",{className:"benefit-item",children:[Se.jsx("h5",{children:"\ud83c\udfc6 VIP Status"}),Se.jsx("p",{children:"Enjoy reduced marketplace fees, early access to drops, and exclusive community channels"})]}),Se.jsxs("div",{className:"benefit-item",children:[Se.jsx("h5",{children:"\ud83c\udfae Gaming Utility"}),Se.jsx("p",{children:"Use your Pixal PFP as an avatar in partner games and unlock special in-game benefits"})]})]})]}),Se.jsxs("div",{className:"acquisition-methods",children:[Se.jsx("h4",{children:"\ud83d\uded2 How to Get Your Pixal PFP"}),Se.jsxs("div",{className:"method-grid",children:[Se.jsxs("div",{className:"method-card",children:[Se.jsx("h5",{children:"\ud83c\udfea Secondary Market"}),Se.jsx("p",{children:"Browse and purchase from existing holders on PxMarket, AtomicHub, or NeftyBlocks"})]}),Se.jsxs("div",{className:"method-card",children:[Se.jsx("h5",{children:"\ud83c\udfb2 Special Drops"}),Se.jsx("p",{children:"Participate in limited edition releases and community events for exclusive variants"})]}),Se.jsxs("div",{className:"method-card",children:[Se.jsx("h5",{children:"\ud83d\udd04 Trading"}),Se.jsx("p",{children:"Trade with other community members or exchange for other valuable NFTs"})]})]})]}),Se.jsxs("div",{className:"trait-system",children:[Se.jsx("h4",{children:"\ud83c\udfa8 Understanding the Trait System"}),Se.jsx("p",{children:"Pixal PFPs feature a sophisticated trait system with multiple categories:"}),Se.jsxs("ul",{children:[Se.jsxs("li",{children:[Se.jsx("strong",{children:"Background:"})," Sets the scene for your Pixal's world"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Body:"})," The base character with different styles and colors"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Clothing:"})," Outfits that reflect personality and status"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Accessories:"})," Special items that add uniqueness and rarity"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Expression:"})," Facial features that bring your Pixal to life"]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Special Effects:"})," Rare animated or glowing elements"]})]})]}),Se.jsxs("div",{className:"historical-context",children:[Se.jsx("h4",{children:"\ud83d\udcda The Story Behind Pixal PFPs"}),Se.jsx("p",{children:"Launched in March 2024, Pixal PFPs quickly became one of the most sought-after collections on WAX. The original 10,000 piece collection sold out within hours, establishing a strong secondary market and passionate community. Since then, special editions and collaborations have expanded the Pixal universe while maintaining the core values of quality, utility, and community."})]})]})},{id:"metaverse-exploration",title:"Exploring the Pixel Journey Metaverse: A Universe of Possibilities",content:Se.jsxs("div",{className:"guide-content",children:[Se.jsx("h3",{children:"Step into the Boundless Pixel Journey Metaverse"}),Se.jsx("div",{className:"intro-section",children:Se.jsx("p",{children:"Welcome to the Pixel Journey Metaverse, where imagination knows no limits! This ever-expanding digital universe offers a wide range of experiences, from collecting and crafting NFTs to exploring interactive worlds and participating in community-driven events. Your journey here is limited only by your creativity and ambition."})}),Se.jsxs("div",{className:"metaverse-features",children:[Se.jsxs("div",{className:"metaverse-feature",children:[Se.jsx("h5",{children:"\ud83c\udfae NFT Integration"}),Se.jsx("p",{children:"Seamlessly integrate your Pixel Journey NFTs into the metaverse, using them as avatars, assets, and tools. Your Pixal PFPs become living characters in this digital realm."})]}),Se.jsxs("div",{className:"metaverse-feature",children:[Se.jsx("h5",{children:"\ud83c\udf0d Interactive Worlds"}),Se.jsx("p",{children:"Explore diverse and immersive worlds, each with unique environments, challenges, and opportunities. From bustling marketplaces to serene crafting sanctuaries."})]}),Se.jsxs("div",{className:"metaverse-feature",children:[Se.jsx("h5",{children:"\ud83c\udf89 Community Events"}),Se.jsx("p",{children:"Participate in regular community events, including quests, contests, and social gatherings. Connect with fellow adventurers and build lasting friendships."})]}),Se.jsxs("div",{className:"metaverse-feature",children:[Se.jsx("h5",{children:"\ud83d\udc8e Play-to-Earn Mechanics"}),Se.jsx("p",{children:"Earn rewards by playing games, completing tasks, and contributing to the growth of the metaverse. Your time and effort are valued and rewarded."})]}),Se.jsxs("div",{className:"metaverse-feature",children:[Se.jsx("h5",{children:"\ud83c\udfd7\ufe0f Community-Driven Development"}),Se.jsx("p",{children:"Shape the future of the metaverse through community-driven development initiatives. Your voice matters in building this digital universe."})]})]}),Se.jsxs("div",{className:"why-explore",children:[Se.jsx("h4",{children:"\ud83d\ude80 Why Explore the Pixel Journey Metaverse?"}),Se.jsxs("div",{className:"benefit-grid",children:[Se.jsxs("div",{className:"benefit-card",children:[Se.jsx("h5",{children:"\u221e Endless Opportunities"}),Se.jsx("p",{children:"Discover new and exciting ways to interact with your Pixel Journey NFTs and unlock hidden potential"})]}),Se.jsxs("div",{className:"benefit-card",children:[Se.jsx("h5",{children:"\ud83e\udd1d Community Connection"}),Se.jsx("p",{children:"Connect with other Pixel Journey adventurers, form alliances, and build a network of like-minded explorers"})]}),Se.jsxs("div",{className:"benefit-card",children:[Se.jsx("h5",{children:"\ud83d\udcb0 Earning Potential"}),Se.jsx("p",{children:"Multiple revenue streams through gameplay, trading, crafting, and community participation"})]}),Se.jsxs("div",{className:"benefit-card",children:[Se.jsx("h5",{children:"\ud83c\udfaf Shaping the Future"}),Se.jsx("p",{children:"Help shape the future of the Pixel Journey ecosystem through active participation and feedback"})]})]})]}),Se.jsxs("div",{className:"getting-started-metaverse",children:[Se.jsx("h4",{children:"\ud83c\udfaf Getting Started in the Metaverse"}),Se.jsxs("div",{className:"getting-started-steps",children:[Se.jsxs("div",{className:"step-item",children:[Se.jsx("h5",{children:"Create Your WAX Wallet"}),Se.jsx("p",{children:"Set up a secure WAX wallet to store your NFTs and tokens safely"})]}),Se.jsxs("div",{className:"step-item",children:[Se.jsx("h5",{children:"Acquire Pixel Journey NFTs"}),Se.jsx("p",{children:"Get your first Pixal PFP or other Pixel Journey assets to begin your adventure"})]}),Se.jsxs("div",{className:"step-item",children:[Se.jsx("h5",{children:"Explore Platforms & Experiences"}),Se.jsx("p",{children:"Visit various platforms and experiences within the metaverse to discover what interests you most"})]}),Se.jsxs("div",{className:"step-item",children:[Se.jsx("h5",{children:"Join Community Events"}),Se.jsx("p",{children:"Participate in community events and connect with other players to enhance your experience"})]}),Se.jsxs("div",{className:"step-item",children:[Se.jsx("h5",{children:"Stay Tuned for Updates"}),Se.jsx("p",{children:"Follow official channels for the latest developments, new features, and upcoming events"})]})]})]}),Se.jsxs("div",{className:"metaverse-future",children:[Se.jsx("h4",{children:"\ud83d\udd2e The Future is Bright"}),Se.jsx("p",{children:"The Pixel Journey Metaverse is constantly evolving, with new features, worlds, and experiences being added regularly. As the community grows and technology advances, the possibilities become endless. Join us now and be part of building the future of digital interaction and entertainment."})]})]})},{id:"waxrocks-council",title:"WaxRocks Council: Shaping the Present and Future of the Pixel Journey",content:Se.jsxs("div",{className:"guide-content",children:[Se.jsx("h3",{children:"WaxRocks Council: Your Voice in the Pixel Journey"}),Se.jsx("div",{className:"intro-section",children:Se.jsx("p",{children:"Become a part of the decision-making process and shape the present and future of the Pixel Journey through the WaxRocks Council! This council empowers WaxRock NFT holders to propose, vote on key proposals, allocate resources, and guide the overall direction of the project. The Council represents the first phase of community governance and will evolve over time."})}),Se.jsxs("div",{className:"governance-aspects",children:[Se.jsxs("div",{className:"governance-aspect",children:[Se.jsx("h5",{children:"\ud83d\uddf3\ufe0f WaxRock NFT-Based Voting"}),Se.jsx("p",{children:"WaxRock NFT holders can submit and vote on proposals, with voting power potentially influenced by other factors in the future. Your voice matters in shaping the ecosystem."})]}),Se.jsxs("div",{className:"governance-aspect",children:[Se.jsx("h5",{children:"\ud83d\udcdd Community Proposals"}),Se.jsx("p",{children:"WaxRock holders can create proposals for consideration by the Council. From feature requests to ecosystem improvements, your ideas drive innovation."})]}),Se.jsxs("div",{className:"governance-aspect",children:[Se.jsx("h5",{children:"\ud83d\udd0d Transparency"}),Se.jsx("p",{children:"Proposals, discussions, and voting results are accessible to the community, ensuring full transparency in the decision-making process."})]}),Se.jsxs("div",{className:"governance-aspect",children:[Se.jsx("h5",{children:"\ud83c\udf10 Decentralized Influence"}),Se.jsx("p",{children:"Decisions are made collectively by the WaxRocks Council, guiding the project's development in a truly decentralized manner."})]})]}),Se.jsxs("div",{className:"participation-guide",children:[Se.jsx("h4",{children:"\ud83d\ude80 How to Participate in the WaxRocks Council"}),Se.jsxs("div",{className:"participation-steps",children:[Se.jsxs("div",{className:"participation-step",children:[Se.jsx("h5",{children:"Step 1: Acquire a Pixal PFP with WaxRock Trait"}),Se.jsx("p",{children:"For Season 1, you need a Pixal PFP that has the WaxRock trait to be eligible for council participation."})]}),Se.jsxs("div",{className:"participation-step",children:[Se.jsx("h5",{children:"Step 2: Receive Your WaxRock NFT"}),Se.jsx("p",{children:"A WaxRock NFT will be airdropped to holders of the trait PFPs, granting you voting rights in the council."})]}),Se.jsxs("div",{className:"participation-step",children:[Se.jsx("h5",{children:"Step 3: Join the Discussion"}),Se.jsx("p",{children:"Participate in discussions and cast your votes within the Council to help shape the Pixel Journey's future."})]}),Se.jsxs("div",{className:"participation-step",children:[Se.jsx("h5",{children:"Step 4: Shape the Future"}),Se.jsx("p",{children:"Help shape the present and future of the Pixel Journey through active participation and thoughtful governance!"})]})]})]}),Se.jsxs("div",{className:"future-governance",children:[Se.jsx("h4",{children:"\ud83d\udd2e The Future of Governance"}),Se.jsx("p",{children:"While the WaxRocks Council is the current form of governance, the long-term vision includes expanding governance participation through a full PixelDAO. Future iterations may incorporate:"}),Se.jsxs("div",{className:"future-features",children:[Se.jsxs("div",{className:"future-feature",children:[Se.jsx("h5",{children:"\ud83d\udc8e $PXJ Token-Based Roles"}),Se.jsx("p",{children:"Integration of $PXJ token holdings for voting weights and governance participation"})]}),Se.jsxs("div",{className:"future-feature",children:[Se.jsx("h5",{children:"\ud83e\udea8 Additional NFT Entry Passes"}),Se.jsx("p",{children:"WaxPebble NFTs and other entry mechanisms to broaden council participation"})]}),Se.jsxs("div",{className:"future-feature",children:[Se.jsx("h5",{children:'\ud83c\udfaf "Proof of Journey" Mechanics'}),Se.jsx("p",{children:"Rewarding users for their participation and holdings within the ecosystem through governance weight"})]}),Se.jsxs("div",{className:"future-feature",children:[Se.jsx("h5",{children:"\ud83c\udfdb\ufe0f Full PixelDAO Implementation"}),Se.jsx("p",{children:"Evolution into a comprehensive decentralized autonomous organization with expanded capabilities"})]})]})]}),Se.jsxs("div",{className:"why-governance-matters",children:[Se.jsx("h4",{children:"\ud83c\udf1f Why Council Governance Matters"}),Se.jsx("p",{children:"The WaxRocks Council ensures that the Pixel Journey remains true to its community-driven vision. By empowering WaxRock holders to participate in decision-making, the Council fosters a transparent, inclusive, and sustainable ecosystem. This governance model will pave the way for a broader PixelDAO in the future."}),Se.jsxs("div",{className:"governance-benefits",children:[Se.jsxs("div",{className:"benefit-item",children:[Se.jsx("h5",{children:"\ud83e\udd1d Community-Driven Development"}),Se.jsx("p",{children:"Ensure that development priorities align with community needs and desires"})]}),Se.jsxs("div",{className:"benefit-item",children:[Se.jsx("h5",{children:"\ud83d\udd12 Sustainable Growth"}),Se.jsx("p",{children:"Make decisions that promote long-term sustainability and ecosystem health"})]}),Se.jsxs("div",{className:"benefit-item",children:[Se.jsx("h5",{children:"\ud83d\udca1 Innovation Through Collaboration"}),Se.jsx("p",{children:"Harness the collective wisdom of the community to drive innovation and improvement"})]}),Se.jsxs("div",{className:"benefit-item",children:[Se.jsx("h5",{children:"\ud83c\udfaf Aligned Incentives"}),Se.jsx("p",{children:"Ensure that all stakeholders have aligned incentives for the success of the ecosystem"})]})]})]})]})},{id:"monthly-airdrops",title:"Monthly Airdrops: Rewarding Loyalty",content:Se.jsxs("div",{className:"guide-content",children:[Se.jsx("h3",{children:"Monthly Pixal Holder & Trait Airdrops: Rewarding Loyalty & Rarity"}),Se.jsx("div",{className:"intro-section",children:Se.jsx("p",{children:"Get ready for a monthly dose of excitement! The Pixal Holder and Trait Airdrops are our way of giving back to the community, rewarding both long-term holders and those lucky enough to possess Pixal PFPs with unique traits."})}),Se.jsxs("div",{className:"how-it-works",children:[Se.jsx("h4",{children:"How It Works"}),Se.jsx("p",{children:"Each month, a pool of PXJ tokens and other valuable assets is distributed to Pixal PFP holders. The airdrop is split into two categories:"}),Se.jsxs("div",{className:"airdrop-categories",children:[Se.jsxs("div",{className:"category-card",children:[Se.jsx("h5",{children:"\ud83d\udc65 Holder Airdrop"}),Se.jsx("p",{children:"A portion of the rewards is distributed equally among all Pixal PFP holders, regardless of their traits."})]}),Se.jsxs("div",{className:"category-card",children:[Se.jsx("h5",{children:"\u2728 Trait Airdrop"}),Se.jsx("p",{children:"The remaining portion is distributed to holders of specific traits. This adds an element of surprise and rewards those who hold rarer or more desirable Pixal PFPs."})]})]})]}),Se.jsxs("div",{className:"why-participate",children:[Se.jsx("h4",{children:"Why Participate?"}),Se.jsxs("ul",{children:[Se.jsxs("li",{children:[Se.jsx("strong",{children:"Free Rewards:"})," Who doesn't love free stuff? Airdrops are a great way to earn PXJ and other valuable assets simply by holding a Pixal PFP."]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Increased Rarity Value:"})," The Trait Airdrops can significantly increase the value of specific traits, making your Pixal PFP even more desirable."]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Community Engagement:"})," Airdrops foster a sense of community by rewarding active participants and encouraging long-term engagement."]})]})]}),Se.jsxs("div",{className:"historical-context",children:[Se.jsx("h4",{children:"Historical Context"}),Se.jsx("p",{children:"The first Pixal Holder and Trait Airdrop took place in February 2024, with over 1 Million PXJ distributed. Each month, the size of the airdrop increases, demonstrating our commitment to rewarding our community. The airdrops have become a cornerstone of the Pixel Journey ecosystem, driving engagement and fostering a strong sense of community."})]})]})},{id:"king-token",title:"$KING: The First Meme to Bond and Conquer",content:Se.jsxs("div",{className:"guide-content",children:[Se.jsx("h3",{children:"$KING: The First Meme to Bond and Conquer"}),Se.jsx("div",{className:"intro-section",children:Se.jsx("p",{children:"Prepare to bow before $KING, the meme token that blazed a trail through the WAX blockchain and became a legend in its own right. Born on the wax.fun platform, $KING wasn't just another meme coin \u2013 it was the first to successfully bond and graduate to Alcor Exchange, marking a pivotal moment in the history of Pixel Journey."})}),Se.jsxs("div",{className:"rise-of-king",children:[Se.jsx("h4",{children:"\ud83d\udc51 The Rise of $KING"}),Se.jsxs("div",{className:"timeline",children:[Se.jsxs("div",{className:"timeline-item",children:[Se.jsx("h5",{children:"\ud83c\udf31 Humble Beginnings"}),Se.jsx("p",{children:"$KING launched on December 12th, 2024, as one of the first memes on wax.fun, starting with a market cap of just $3,250."})]}),Se.jsxs("div",{className:"timeline-item",children:[Se.jsx("h5",{children:"\ud83d\ude80 Community Support"}),Se.jsx("p",{children:"Backed by the passionate Pixel Journey community, $KING quickly gained traction, reaching a market cap of $10,000 within 36 hours."})]}),Se.jsxs("div",{className:"timeline-item",children:[Se.jsx("h5",{children:"\ud83d\udc51 King of Wax"}),Se.jsx("p",{children:'Within six days, $KING achieved a market cap above $22,000, earning the title of "King of Wax" and a coveted spotlight on the wax.fun front page.'})]}),Se.jsxs("div",{className:"timeline-item",children:[Se.jsx("h5",{children:"\ud83c\udfaf Bonding Success"}),Se.jsx("p",{children:"On January 7th, 2025, $KING reached its bonding goal of around $44,000, allowing it to graduate from wax.fun and establish liquidity on Alcor Exchange."})]})]})]}),Se.jsxs("div",{className:"king-today",children:[Se.jsx("h4",{children:"\ud83d\udc8e $KING Today"}),Se.jsxs("div",{className:"current-features",children:[Se.jsxs("div",{className:"feature-item",children:[Se.jsx("h5",{children:"\ud83c\udfc6 Staking Rewards"}),Se.jsx("p",{children:"Stake your $KING tokens on platforms like WaxDAO to earn PXJ rewards."})]}),Se.jsxs("div",{className:"feature-item",children:[Se.jsx("h5",{children:"\ud83c\udfad Community Symbol"}),Se.jsx("p",{children:"$KING represents the spirit of innovation and community that defines Pixel Journey."})]})]})]}),Se.jsxs("div",{className:"why-king-matters",children:[Se.jsx("h4",{children:"\ud83c\udf1f Why $KING Matters"}),Se.jsx("p",{children:"$KING is more than just a meme token; it's a symbol of what's possible when a passionate community comes together to support a shared vision. It represents the early days of Pixel Journey and the power of blockchain technology to create something truly unique and memorable."})]}),Se.jsxs("div",{className:"historical-significance",children:[Se.jsx("h4",{children:"\ud83d\udcda Historical Significance"}),Se.jsx("p",{children:"$KING's journey from a humble meme token to a bonded asset on Alcor Exchange is a testament to the power of community and innovation. It serves as an inspiration to all aspiring projects and a reminder that anything is possible with dedication and a little bit of meme magic."})]})]})},{id:"wpixal-tokenization",title:"WPIXAL Tokenization: Unleash the DeFi Potential of Your Pixal PFPs",content:Se.jsxs("div",{className:"guide-content",children:[Se.jsx("h3",{children:"WPIXAL Tokenization: Unleash the DeFi Potential of Your Pixal PFPs"}),Se.jsx("div",{className:"intro-section",children:Se.jsx("p",{children:"Ready to unlock a new dimension of utility for your Pixal PFPs? WPIXAL is here to revolutionize how you interact with your digital assets, transforming them into powerful DeFi tools. This innovative system allows you to tokenize your Pixal PFPs, turning them into liquid assets that can be used in a variety of decentralized finance applications across multiple blockchains."})}),Se.jsxs("div",{className:"how-wpixal-works",children:[Se.jsx("h4",{children:"\u2699\ufe0f How Does WPIXAL Work?"}),Se.jsxs("div",{className:"process-steps",children:[Se.jsxs("div",{className:"process-step",children:[Se.jsx("h5",{children:"\ud83d\udd04 Tokenization"}),Se.jsx("p",{children:"By paying a small fee (currently 1 WPIXAL and 1 WAX), you can tokenize your Pixal PFP, creating a WPIXAL token that represents your NFT with full redeemability."})]}),Se.jsxs("div",{className:"process-step",children:[Se.jsx("h5",{children:"\ud83d\udcb1 Cross-Chain Trading"}),Se.jsx("p",{children:"WPIXAL tokens can be freely traded on decentralized exchanges like Alcor, with cross-chain bridging capabilities for maximum liquidity."})]}),Se.jsxs("div",{className:"process-step",children:[Se.jsx("h5",{children:"\ud83c\udf3e Advanced DeFi Integration"}),Se.jsx("p",{children:"Use your WPIXAL tokens in yield farming, liquidity pools, staking protocols, and lending platforms to earn passive income."})]}),Se.jsxs("div",{className:"process-step",children:[Se.jsx("h5",{children:"\ud83d\udd12 Asset-Backed Security"}),Se.jsx("p",{children:"Each WPIXAL token is backed 1:1 by the original Pixal PFP, ensuring its value and guaranteed redeemability at any time."})]})]})]}),Se.jsxs("div",{className:"why-tokenize",children:[Se.jsx("h4",{children:"\ud83d\udca1 Why Tokenize Your Pixal PFP?"}),Se.jsxs("div",{className:"benefits-grid",children:[Se.jsxs("div",{className:"benefit-card",children:[Se.jsx("h5",{children:"\ud83d\ude80 50x Increased Liquidity"}),Se.jsx("p",{children:"Transform your illiquid NFT into a tradable token with dramatically increased liquidity, making it easier to buy, sell, and use in DeFi protocols."})]}),Se.jsxs("div",{className:"benefit-card",children:[Se.jsx("h5",{children:"\ud83d\udcb0 Multiple Income Streams"}),Se.jsx("p",{children:"Earn rewards through staking, yield farming, liquidity providing, and lending while maintaining ownership of your original NFT."})]}),Se.jsxs("div",{className:"benefit-card",children:[Se.jsx("h5",{children:"\ud83c\udf10 Cross-Chain Opportunities"}),Se.jsx("p",{children:"Access DeFi protocols across multiple blockchains, expanding your earning potential beyond the WAX ecosystem."})]}),Se.jsxs("div",{className:"benefit-card",children:[Se.jsx("h5",{children:"\ud83d\udcca Real-Time Analytics"}),Se.jsx("p",{children:"Track performance with built-in price alerts, portfolio analytics, and market insights for informed decision-making."})]})]})]}),Se.jsxs("div",{className:"wpixal-features",children:[Se.jsx("h4",{children:"\ud83d\udee0\ufe0f Advanced WPIXAL Features"}),Se.jsxs("div",{className:"feature-grid",children:[Se.jsxs("div",{className:"feature-card",children:[Se.jsx("h5",{children:"\ud83d\udcf1 Mobile Integration"}),Se.jsx("p",{children:"Full tokenization and redemption support in PxMarket Mobile app with push notifications for price alerts"})]}),Se.jsxs("div",{className:"feature-card",children:[Se.jsx("h5",{children:"\u26a1 Instant Swaps"}),Se.jsx("p",{children:"Built-in WAX to WPIXAL swapping via Alcor Exchange for seamless redemption experiences"})]}),Se.jsxs("div",{className:"feature-card",children:[Se.jsx("h5",{children:"\ud83d\udcc8 Portfolio Analytics"}),Se.jsx("p",{children:"Track your WPIXAL holdings, earnings, and performance with detailed analytics and historical data"})]}),Se.jsxs("div",{className:"feature-card",children:[Se.jsx("h5",{children:"\ud83d\udd14 Smart Alerts"}),Se.jsx("p",{children:"Set custom price alerts and get notified when WPIXAL reaches your target buy or sell prices"})]})]})]}),Se.jsxs("div",{className:"getting-started",children:[Se.jsx("h4",{children:"\ud83d\ude80 Getting Started with WPIXAL"}),Se.jsxs("div",{className:"step-list",children:[Se.jsxs("div",{className:"step",children:[Se.jsx("div",{className:"step-number",children:"1"}),Se.jsx("div",{className:"step-content",children:Se.jsxs("p",{children:["Visit the ",Se.jsx("a",{href:"/rwax",target:"_blank",rel:"noopener noreferrer",children:"RWAX section"}),' on PxMarket or use "Tokenize from Inventory"']})})]}),Se.jsxs("div",{className:"step",children:[Se.jsx("div",{className:"step-number",children:"2"}),Se.jsx("div",{className:"step-content",children:Se.jsx("p",{children:"Select your Pixal PFP and choose your preferred fee token (WPIXAL, WAX, or PXJ)"})})]}),Se.jsxs("div",{className:"step",children:[Se.jsx("div",{className:"step-number",children:"3"}),Se.jsx("div",{className:"step-content",children:Se.jsxs("p",{children:["Start trading on ",Se.jsx("a",{href:"https://r-wax.io/token/pixeljourney/WPIXAL",target:"_blank",rel:"noopener noreferrer",children:"R-WAX Markets"})," or participate in DeFi activities!"]})})]})]})]}),Se.jsxs("div",{className:"wpixal-cta-section",children:[Se.jsx("h4",{children:"Ready to Tokenize Your Pixals?"}),Se.jsxs("div",{className:"cta-buttons",children:[Se.jsx("a",{href:"/rwax",className:"cta-button primary",children:"Start Tokenizing"}),Se.jsx("a",{href:"https://r-wax.io/token/pixeljourney/WPIXAL",target:"_blank",rel:"noopener noreferrer",className:"cta-button secondary",children:"View WPIXAL Markets"}),Se.jsx("a",{href:"/inventory",className:"cta-button secondary",children:"Tokenize from Inventory"})]})]}),Se.jsxs("div",{className:"historical-context",children:[Se.jsx("h4",{children:"\ud83d\udcc8 WPIXAL Performance & Adoption"}),Se.jsx("p",{children:"Since its launch in March 2024, WPIXAL has revolutionized NFT liquidity with a 50x increase in trading volume. The token has maintained strong utility across multiple DeFi protocols, with over 10,000 Pixal PFPs tokenized and billions of WPIXAL tokens in circulation. Key achievements include successful integration with major DEXs, cross-chain bridge implementations, and consistent reward distributions to holders."}),Se.jsxs("div",{className:"wpixal-stats",children:[Se.jsxs("div",{className:"stat-item",children:[Se.jsx("strong",{children:"50x"}),Se.jsx("span",{children:"Liquidity Increase"})]}),Se.jsxs("div",{className:"stat-item",children:[Se.jsx("strong",{children:"10,000+"}),Se.jsx("span",{children:"Pixals Tokenized"})]}),Se.jsxs("div",{className:"stat-item",children:[Se.jsx("strong",{children:"24/7"}),Se.jsx("span",{children:"Trading Available"})]})]})]})]})},{id:"pixel-ingredient-packs",title:"Pixel Ingredient Packs and Blends: Craft, Stake, and Shape the Future!",content:Se.jsxs("div",{className:"guide-content",children:[Se.jsx("h3",{children:"Pixel Ingredient Packs and Blends: Craft, Stake, and Shape the Future!"}),Se.jsx("div",{className:"intro-section",children:Se.jsx("p",{children:"Unleash your inner alchemist with Pixel Ingredient Packs and Blends! This innovative crafting system allows you to transform your Pixal PFPs into valuable ingredients, which can then be combined to create powerful new NFTs. It's a unique way to recycle your assets, earn rewards, and shape the future of the Pixel Journey ecosystem."})}),Se.jsxs("div",{className:"how-it-works",children:[Se.jsx("h4",{children:"\u2697\ufe0f How Does It Work?"}),Se.jsxs("div",{className:"crafting-process",children:[Se.jsxs("div",{className:"process-card",children:[Se.jsx("h5",{children:"\ud83d\udce6 Pixel Ingredient Packs"}),Se.jsx("p",{children:"Burn your Pixal PFPs to create Pixel Ingredient Packs. Each pack contains a variety of ingredients based on your original NFT's traits."})]}),Se.jsxs("div",{className:"process-card",children:[Se.jsx("h5",{children:"\ud83e\uddea Pixel Ingredient Blends"}),Se.jsx("p",{children:"Combine your Pixel Ingredients using crafting recipes to create valuable NFTs with unique properties and utilities."})]}),Se.jsxs("div",{className:"process-card",children:[Se.jsx("h5",{children:"\ud83d\udcb0 Staking Rewards"}),Se.jsx("p",{children:"Stake your Pixel Ingredient Blends to earn PXJ and other valuable tokens, generating passive income and contributing to the growth of the Pixel Journey ecosystem."})]})]})]}),Se.jsxs("div",{className:"why-craft",children:[Se.jsx("h4",{children:"\ud83c\udfaf Why Craft with Pixel Ingredients?"}),Se.jsxs("div",{className:"benefits-list",children:[Se.jsxs("div",{className:"benefit-item",children:[Se.jsx("h5",{children:"\u267b\ufe0f Recycle Your Assets"}),Se.jsx("p",{children:"Give new life to your Pixal PFPs by transforming them into valuable ingredients."})]}),Se.jsxs("div",{className:"benefit-item",children:[Se.jsx("h5",{children:"\ud83d\udd28 Create Powerful NFTs"}),Se.jsx("p",{children:"Craft unique and powerful NFTs that can be used in-game, traded on marketplaces, or staked for rewards."})]}),Se.jsxs("div",{className:"benefit-item",children:[Se.jsx("h5",{children:"\ud83c\udf0d Shape the Ecosystem"}),Se.jsx("p",{children:"Influence the availability and rarity of different ingredients and blends, contributing to the dynamic nature of the Pixel Journey ecosystem."})]})]})]}),Se.jsxs("div",{className:"getting-started-crafting",children:[Se.jsx("h4",{children:"\ud83d\udee0\ufe0f Getting Started with Crafting"}),Se.jsxs("div",{className:"crafting-steps",children:[Se.jsxs("div",{className:"step",children:[Se.jsx("div",{className:"step-number",children:"1"}),Se.jsx("div",{className:"step-content",children:Se.jsxs("p",{children:["Visit ",Se.jsx("a",{href:"https://neftyblocks.com/",target:"_blank",rel:"noopener noreferrer",children:"neftyblocks.com"})," to create Pixel Ingredient Packs from your Pixal PFPs."]})})]}),Se.jsxs("div",{className:"step",children:[Se.jsx("div",{className:"step-number",children:"2"}),Se.jsx("div",{className:"step-content",children:Se.jsxs("p",{children:["Explore the crafting recipes on ",Se.jsx("a",{href:"https://nfthive.io/",target:"_blank",rel:"noopener noreferrer",children:"nfthive.io"})," to discover the ingredients needed to create valuable blends."]})})]}),Se.jsxs("div",{className:"step",children:[Se.jsx("div",{className:"step-number",children:"3"}),Se.jsx("div",{className:"step-content",children:Se.jsx("p",{children:"Combine your ingredients and craft new NFTs!"})})]}),Se.jsxs("div",{className:"step",children:[Se.jsx("div",{className:"step-number",children:"4"}),Se.jsx("div",{className:"step-content",children:Se.jsxs("p",{children:["Stake your blends on ",Se.jsx("a",{href:"https://waxdao.io/",target:"_blank",rel:"noopener noreferrer",children:"waxdao.io"})," to earn PXJ and other rewards."]})})]})]})]}),Se.jsxs("div",{className:"historical-context",children:[Se.jsx("h4",{children:"\ud83d\udcda Historical Context"}),Se.jsx("p",{children:"The Pixel Ingredient system was introduced as a way to encourage recycling of Pixal PFPs and create new opportunities for engagement within the Pixel Journey ecosystem. This innovative approach to NFT utility has opened up new possibilities for collectors and creators alike."})]})]})}]},{id:"defi-trading",title:"DeFi & Trading",icon:"\ud83d\udcb0",sections:[{id:"defi-rewards",title:"DeFi Rewards: Level Up Your Earnings",content:Se.jsxs("div",{className:"guide-content",children:[Se.jsx("h3",{children:"DeFi Rewards: Maximize Your Earnings in the Pixel Journey Ecosystem"}),Se.jsx("div",{className:"intro-section",children:Se.jsx("p",{children:"Welcome to the world of decentralized finance within Pixel Journey! Our DeFi ecosystem offers multiple ways to earn passive income, participate in governance, and contribute to the growth of our platform. Whether you're a DeFi veteran or just getting started, there's an opportunity for everyone."})}),Se.jsxs("div",{className:"defi-opportunities",children:[Se.jsx("h4",{children:"\ud83d\udc8e Staking Opportunities"}),Se.jsxs("div",{className:"staking-options",children:[Se.jsxs("div",{className:"staking-card",children:[Se.jsx("h5",{children:"\ud83c\udfc6 PXJ Token Staking"}),Se.jsx("p",{children:"Stake your PXJ tokens to earn additional PXJ rewards and participate in platform governance"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"Annual Percentage Yield (APY): 15-25%"}),Se.jsx("li",{children:"Minimum stake: 100 PXJ"}),Se.jsx("li",{children:"Lock-up period: Flexible (higher rewards for longer locks)"}),Se.jsx("li",{children:"Additional benefits: Governance voting rights"})]})]}),Se.jsxs("div",{className:"staking-card",children:[Se.jsx("h5",{children:"\ud83c\udfad NFT Staking"}),Se.jsx("p",{children:"Stake your Pixal PFPs and other supported NFTs to earn PXJ and exclusive rewards"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"Rewards: 10-50 PXJ per day (based on rarity)"}),Se.jsx("li",{children:"Supported collections: Pixal PFPs, Partner NFTs"}),Se.jsx("li",{children:"Bonus multipliers for rare traits"}),Se.jsx("li",{children:"No lock-up period - unstake anytime"})]})]})]})]}),Se.jsxs("div",{className:"liquidity-providing",children:[Se.jsx("h4",{children:"\ud83c\udf0a Liquidity Providing"}),Se.jsx("p",{children:"Provide liquidity to our trading pairs and earn a share of trading fees plus additional rewards:"}),Se.jsxs("div",{className:"lp-pairs",children:[Se.jsxs("div",{className:"lp-card",children:[Se.jsx("h5",{children:"PXJ/WAX Pool"}),Se.jsx("p",{children:"Our flagship liquidity pool with the highest rewards"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"Trading fee share: 0.25% of all trades"}),Se.jsx("li",{children:"Additional PXJ rewards: 100-200 PXJ per day"}),Se.jsx("li",{children:"Impermanent loss protection available"})]})]}),Se.jsxs("div",{className:"lp-card",children:[Se.jsx("h5",{children:"KING/WAX Pool"}),Se.jsx("p",{children:"Support the legendary meme token while earning rewards"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"Trading fee share: 0.3% of all trades"}),Se.jsx("li",{children:"Bonus KING token rewards"}),Se.jsx("li",{children:"Community governance participation"})]})]})]})]}),Se.jsxs("div",{className:"nft-farming",children:[Se.jsx("h4",{children:"\ud83d\ude9c NFT Farming"}),Se.jsx("p",{children:"Participate in our innovative NFT farming programs:"}),Se.jsxs("div",{className:"farming-programs",children:[Se.jsxs("div",{className:"farming-card",children:[Se.jsx("h5",{children:"Pixel Ingredient Farming"}),Se.jsx("p",{children:"Stake Pixel Ingredient Blends to earn multiple token rewards"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"Primary rewards: PXJ tokens"}),Se.jsx("li",{children:"Secondary rewards: Rare crafting materials"}),Se.jsx("li",{children:"Special events: Bonus multiplier weekends"})]})]}),Se.jsxs("div",{className:"farming-card",children:[Se.jsx("h5",{children:"WPIXAL Farming"}),Se.jsx("p",{children:"Use your tokenized Pixal PFPs in advanced DeFi strategies"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"Yield farming with WPIXAL tokens"}),Se.jsx("li",{children:"Automated compounding strategies"}),Se.jsx("li",{children:"Cross-platform DeFi integration"})]})]})]})]}),Se.jsxs("div",{className:"getting-started-defi",children:[Se.jsx("h4",{children:"\ud83d\ude80 Getting Started with DeFi"}),Se.jsxs("div",{className:"defi-steps",children:[Se.jsxs("div",{className:"step",children:[Se.jsx("div",{className:"step-number",children:"1"}),Se.jsxs("div",{className:"step-content",children:[Se.jsx("h5",{children:"Connect Your Wallet"}),Se.jsx("p",{children:"Ensure your WAX wallet is connected and funded with the tokens you want to stake or provide as liquidity"})]})]}),Se.jsxs("div",{className:"step",children:[Se.jsx("div",{className:"step-number",children:"2"}),Se.jsxs("div",{className:"step-content",children:[Se.jsx("h5",{children:"Choose Your Strategy"}),Se.jsx("p",{children:"Decide whether you want to stake tokens, provide liquidity, or participate in NFT farming based on your risk tolerance and goals"})]})]}),Se.jsxs("div",{className:"step",children:[Se.jsx("div",{className:"step-number",children:"3"}),Se.jsxs("div",{className:"step-content",children:[Se.jsx("h5",{children:"Start Earning"}),Se.jsx("p",{children:"Execute your chosen strategy and start earning rewards. Monitor your positions and compound your earnings for maximum returns"})]})]})]}),Se.jsxs("div",{className:"defi-cta-section",children:[Se.jsx("h4",{children:"\ud83c\udfaf Ready to Start Earning?"}),Se.jsx("p",{children:"Choose your DeFi strategy and begin earning rewards today!"}),Se.jsxs("div",{className:"defi-cta-buttons",children:[Se.jsxs("a",{href:"/rewards",className:"cta-button primary",children:[Se.jsx("span",{className:"icon",children:"\ud83d\udc8e"}),"Start Staking"]}),Se.jsxs("a",{href:"/inventory",className:"cta-button secondary",children:[Se.jsx("span",{className:"icon",children:"\ud83d\ude9c"}),"NFT Farming"]}),Se.jsxs("a",{href:"https://alcor.exchange",target:"_blank",rel:"noopener noreferrer",className:"cta-button secondary",children:[Se.jsx("span",{className:"icon",children:"\ud83c\udf0a"}),"Provide Liquidity"]})]})]})]}),Se.jsxs("div",{className:"risk-considerations",children:[Se.jsx("h4",{children:"\u26a0\ufe0f Important Considerations"}),Se.jsxs("ul",{children:[Se.jsxs("li",{children:[Se.jsx("strong",{children:"Smart Contract Risk:"})," All DeFi activities involve smart contract risk. Only invest what you can afford to lose."]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Impermanent Loss:"})," Providing liquidity can result in impermanent loss if token prices diverge significantly."]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Market Volatility:"})," Token prices can be volatile. Consider your risk tolerance before participating."]}),Se.jsxs("li",{children:[Se.jsx("strong",{children:"Lock-up Periods:"})," Some staking options have lock-up periods. Make sure you understand the terms before committing."]})]})]})]})},{id:"trading-tips",title:"Trading Tips & Strategies",content:Se.jsxs("div",{className:"guide-content",children:[Se.jsx("h3",{children:"\ud83c\udfaf Smart Trading on PxMarket & WAX"}),Se.jsx("div",{className:"trading-intro",children:Se.jsx("p",{children:"Master the art of NFT trading with these proven strategies tailored for PxMarket and the broader WAX ecosystem. Whether you're a beginner or experienced trader, these tips will help you make informed decisions and maximize your success."})}),Se.jsxs("div",{className:"pxmarket-advantages",children:[Se.jsx("h4",{children:"\ud83d\ude80 PxMarket Trading Advantages"}),Se.jsxs("div",{className:"advantage-grid",children:[Se.jsxs("div",{className:"advantage-card",children:[Se.jsx("h5",{children:"\ud83d\udc8e Pixal PFP Benefits"}),Se.jsx("p",{children:"Holders enjoy reduced marketplace fees, priority access to new drops, and exclusive trading features."})]}),Se.jsxs("div",{className:"advantage-card",children:[Se.jsx("h5",{children:"\ud83d\udcca Advanced Analytics"}),Se.jsx("p",{children:"Built-in rarity scoring, price history charts, and market trend analysis help you make informed decisions."})]}),Se.jsxs("div",{className:"advantage-card",children:[Se.jsx("h5",{children:"\ud83d\udd04 Bulk Operations"}),Se.jsx("p",{children:"List multiple NFTs at once, bulk purchase collections, and manage your portfolio efficiently."})]}),Se.jsxs("div",{className:"advantage-card",children:[Se.jsx("h5",{children:"\ud83c\udfae Gaming Integration"}),Se.jsx("p",{children:"Seamlessly use your NFTs in Pixel Journey gameplay while they remain available for trading."})]})]})]}),Se.jsxs("div",{className:"tip-section",children:[Se.jsx("h4",{children:"\ud83d\udd0d Research & Due Diligence"}),Se.jsxs("div",{className:"research-checklist",children:[Se.jsxs("div",{className:"checklist-item",children:[Se.jsx("span",{className:"check-icon",children:"\u2705"}),Se.jsxs("div",{className:"checklist-content",children:[Se.jsx("h5",{children:"Collection Analysis"}),Se.jsx("p",{children:"Check total supply, mint date, creator reputation, and roadmap progress"})]})]}),Se.jsxs("div",{className:"checklist-item",children:[Se.jsx("span",{className:"check-icon",children:"\u2705"}),Se.jsxs("div",{className:"checklist-content",children:[Se.jsx("h5",{children:"Price History"}),Se.jsx("p",{children:"Review recent sales, floor price trends, and volume patterns on PxMarket analytics"})]})]}),Se.jsxs("div",{className:"checklist-item",children:[Se.jsx("span",{className:"check-icon",children:"\u2705"}),Se.jsxs("div",{className:"checklist-content",children:[Se.jsx("h5",{children:"Rarity Assessment"}),Se.jsx("p",{children:"Use PxMarket's rarity tools to understand trait distribution and scarcity"})]})]}),Se.jsxs("div",{className:"checklist-item",children:[Se.jsx("span",{className:"check-icon",children:"\u2705"}),Se.jsxs("div",{className:"checklist-content",children:[Se.jsx("h5",{children:"Community Health"}),Se.jsx("p",{children:"Join Discord/Telegram, check social media activity, and gauge community sentiment"})]})]})]})]}),Se.jsxs("div",{className:"tip-section",children:[Se.jsx("h4",{children:"\ud83d\udcb0 Pricing Strategies"}),Se.jsxs("div",{className:"strategy-tabs",children:[Se.jsxs("div",{className:"strategy-tab",children:[Se.jsx("h5",{children:"\ud83c\udfc3\u200d\u2642\ufe0f Quick Flip Strategy"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"Price 5-10% below floor for fast sales"}),Se.jsx("li",{children:"Focus on high-volume collections"}),Se.jsx("li",{children:"Monitor PxMarket's trending section for opportunities"}),Se.jsx("li",{children:"Use bulk listing features for efficiency"})]})]}),Se.jsxs("div",{className:"strategy-tab",children:[Se.jsx("h5",{children:"\ud83d\udc8e Diamond Hands Strategy"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"Price rare items 20-50% above floor"}),Se.jsx("li",{children:"Target collectors seeking specific traits"}),Se.jsx("li",{children:"Use PxMarket's rarity rankings to justify pricing"}),Se.jsx("li",{children:"Be patient and wait for the right buyer"})]})]}),Se.jsxs("div",{className:"strategy-tab",children:[Se.jsx("h5",{children:"\ud83d\udcc8 Market Timing Strategy"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"Buy during market dips, sell during hype cycles"}),Se.jsx("li",{children:"Monitor WAX ecosystem news and events"}),Se.jsx("li",{children:"Track PxMarket volume and activity patterns"}),Se.jsx("li",{children:"Consider seasonal trends and gaming updates"})]})]})]})]}),Se.jsxs("div",{className:"tip-section",children:[Se.jsx("h4",{children:"\u26a0\ufe0f Risk Management"}),Se.jsxs("div",{className:"risk-grid",children:[Se.jsxs("div",{className:"risk-card",children:[Se.jsx("h5",{children:"\ud83d\udcb8 Budget Management"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"Never invest more than you can afford to lose"}),Se.jsx("li",{children:"Keep 20-30% of your portfolio in liquid WAX"}),Se.jsx("li",{children:"Set stop-loss levels for expensive purchases"}),Se.jsx("li",{children:"Track your P&L using PxMarket's portfolio tools"})]})]}),Se.jsxs("div",{className:"risk-card",children:[Se.jsx("h5",{children:"\ud83c\udfaf Diversification"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"Spread investments across multiple collections"}),Se.jsx("li",{children:"Mix blue-chip and emerging projects"}),Se.jsx("li",{children:"Balance gaming NFTs with art and utility tokens"}),Se.jsx("li",{children:"Consider different price ranges and rarities"})]})]}),Se.jsxs("div",{className:"risk-card",children:[Se.jsx("h5",{children:"\ud83d\udcca Market Awareness"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"Stay updated on WAX ecosystem developments"}),Se.jsx("li",{children:"Monitor overall crypto market conditions"}),Se.jsx("li",{children:"Watch for regulatory news and changes"}),Se.jsx("li",{children:"Follow key influencers and market makers"})]})]})]})]}),Se.jsxs("div",{className:"trading-tools",children:[Se.jsx("h4",{children:"\ud83d\udee0\ufe0f Essential Trading Tools"}),Se.jsxs("div",{className:"tools-grid",children:[Se.jsxs("div",{className:"tool-card",children:[Se.jsx("h5",{children:"\ud83d\udcf1 PxMarket Mobile"}),Se.jsx("p",{children:"Trade on the go with our mobile-optimized interface"}),Se.jsx("a",{href:"/marketplace",className:"tool-link",children:"Access Now"})]}),Se.jsxs("div",{className:"tool-card",children:[Se.jsx("h5",{children:"\ud83d\udcca Portfolio Tracker"}),Se.jsx("p",{children:"Monitor your collection's performance and value"}),Se.jsx("a",{href:"/inventory",className:"tool-link",children:"View Portfolio"})]}),Se.jsxs("div",{className:"tool-card",children:[Se.jsx("h5",{children:"\ud83d\udd14 Price Alerts"}),Se.jsx("p",{children:"Get notified when items hit your target prices"}),Se.jsx("a",{href:"/watchlist",className:"tool-link",children:"Set Alerts"})]}),Se.jsxs("div",{className:"tool-card",children:[Se.jsx("h5",{children:"\ud83d\udcc8 Market Analytics"}),Se.jsx("p",{children:"Access detailed market data and trends"}),Se.jsx("a",{href:"/analytics",className:"tool-link",children:"View Analytics"})]})]})]}),Se.jsxs("div",{className:"pro-tips",children:[Se.jsx("h4",{children:"\ud83c\udf93 Pro Trading Tips"}),Se.jsxs("div",{className:"pro-tip-list",children:[Se.jsxs("div",{className:"pro-tip",children:[Se.jsx("span",{className:"tip-icon",children:"\ud83d\udca1"}),Se.jsxs("p",{children:[Se.jsx("strong",{children:"Timing is Everything:"})," List items during peak hours (evenings and weekends) for maximum visibility"]})]}),Se.jsxs("div",{className:"pro-tip",children:[Se.jsx("span",{className:"tip-icon",children:"\ud83d\udca1"}),Se.jsxs("p",{children:[Se.jsx("strong",{children:"Bundle Deals:"})," Create attractive bundles of related NFTs to increase average sale value"]})]}),Se.jsxs("div",{className:"pro-tip",children:[Se.jsx("span",{className:"tip-icon",children:"\ud83d\udca1"}),Se.jsxs("p",{children:[Se.jsx("strong",{children:"Community Engagement:"})," Active community members often get early access to valuable information"]})]}),Se.jsxs("div",{className:"pro-tip",children:[Se.jsx("span",{className:"tip-icon",children:"\ud83d\udca1"}),Se.jsxs("p",{children:[Se.jsx("strong",{children:"Utility Focus:"})," NFTs with gaming utility or staking rewards often maintain value better"]})]})]})]})]})}]},{id:"platform-features",title:"Platform Features",icon:"\ud83d\udee0\ufe0f",sections:[{id:"advanced",title:"Advanced Features",content:Se.jsxs("div",{className:"guide-content",children:[Se.jsx("h3",{children:"Power User Features"}),Se.jsxs("div",{className:"advanced-section",children:[Se.jsx("h4",{children:"\ud83d\udd27 Bulk Operations"}),Se.jsx("p",{children:"Use our bulk tools to:"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"List multiple NFTs at once with smart pricing"}),Se.jsx("li",{children:"Transfer multiple items to different recipients"}),Se.jsx("li",{children:"Burn unwanted NFTs in batches"}),Se.jsx("li",{children:"Stake multiple NFTs for rewards"})]})]}),Se.jsxs("div",{className:"advanced-section",children:[Se.jsx("h4",{children:"\ud83d\udcca Analytics & Tracking"}),Se.jsx("p",{children:"Monitor your portfolio with:"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"Real-time portfolio value tracking"}),Se.jsx("li",{children:"Transaction history and profit/loss analysis"}),Se.jsx("li",{children:"Collection performance metrics"}),Se.jsx("li",{children:"Market trend indicators"})]})]}),Se.jsxs("div",{className:"advanced-section",children:[Se.jsx("h4",{children:"\ud83c\udfaf Watchlists & Alerts"}),Se.jsx("p",{children:"Stay informed with:"}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"Custom watchlists for tracking specific NFTs"}),Se.jsx("li",{children:"Price alerts for collections you're interested in"}),Se.jsx("li",{children:"New listing notifications"}),Se.jsx("li",{children:"Auction ending reminders"})]})]}),Se.jsxs("div",{className:"advanced-cta-section",children:[Se.jsx("h4",{children:"\ud83d\ude80 Ready to Use Advanced Features?"}),Se.jsx("p",{children:"Access powerful tools to manage your NFT portfolio like a pro!"}),Se.jsxs("div",{className:"advanced-cta-buttons",children:[Se.jsxs("a",{href:"/inventory",className:"cta-button primary",children:[Se.jsx("span",{className:"icon",children:"\ud83d\udd27"}),"Bulk Operations"]}),Se.jsxs("a",{href:"/inventory",className:"cta-button secondary",children:[Se.jsx("span",{className:"icon",children:"\ud83d\udcca"}),"Portfolio Analytics"]}),Se.jsxs("a",{href:"/watchlist",className:"cta-button secondary",children:[Se.jsx("span",{className:"icon",children:"\ud83c\udfaf"}),"Manage Watchlists"]})]})]})]})},{id:"faq",title:"Frequently Asked Questions",content:Se.jsxs("div",{className:"guide-content",children:[Se.jsx("h3",{children:"Common Questions"}),Se.jsxs("div",{className:"faq-list",children:[Se.jsxs("div",{className:"faq-item",children:[Se.jsx("h4",{children:"Q: What makes Pixel Journey educational?"}),Se.jsx("p",{children:"A: Through Season 1 modules on WAX NFTs, DeFi, bridging; hands-on crafting/staking; Knowledge Bank guides."})]}),Se.jsxs("div",{className:"faq-item",children:[Se.jsx("h4",{children:"Q: How does PXJ token work?"}),Se.jsx("p",{children:"A: Utility token for staking rewards, liquidity; burn mechanics via recycling; distributed $35k in Season 1."})]}),Se.jsxs("div",{className:"faq-item",children:[Se.jsx("h4",{children:"Q: Can I bridge my Pixel NFTs?"}),Se.jsx("p",{children:"A: Yes, via MyCloudWallet bridge to Polygon/Base/ETH/BNB; unlocks multi-chain utilities."})]}),Se.jsxs("div",{className:"faq-item",children:[Se.jsx("h4",{children:"Q: Are there any fees for trading on PxMarket?"}),Se.jsx("p",{children:"A: Small marketplace fee; Pixel Journey holders get discounts. WAX transactions are user-fee-free."})]}),Se.jsxs("div",{className:"faq-item",children:[Se.jsx("h4",{children:"Q: How do I craft in Pixel Journey?"}),Se.jsx("p",{children:"A: Burn Pixals for packs on NeftyBlocks, unpack/blend ingredients; stake results for PXJ."})]}),Se.jsxs("div",{className:"faq-item",children:[Se.jsx("h4",{children:"Q: What's the roadmap for Season 2?"}),Se.jsx("p",{children:"A: Summer 2025: New PFP traits, dApp expansions, advanced crafting, more multi-chain integrations."})]}),Se.jsxs("div",{className:"faq-item",children:[Se.jsx("h4",{children:"Q: How secure is WAX for NFTs?"}),Se.jsx("p",{children:"A: AtomicAssets standard ensures authenticity; 100% carbon-neutral; robust against common exploits."})]})]})]})}]}];return Se.jsxs("div",{className:"learn-page",children:[Se.jsx("div",{className:"page-header",children:Se.jsxs("div",{className:"header-content",children:[Se.jsxs("div",{className:"header-text",children:[Se.jsx("h1",{children:"Learn Hub"}),Se.jsx("p",{children:"Everything you need to know about WAX, NFTs, and Pixel Journey"})]}),Se.jsx("div",{className:"header-actions",children:Se.jsx("button",{className:"quiz-cta-button",onClick:()=>t("how-to-quiz"),children:"\ud83d\udccb How to Take Quiz"})})]})}),Se.jsxs("div",{className:"learn-container",children:[Se.jsx("div",{className:"learn-sidebar",children:Se.jsx("nav",{className:"learn-nav",children:c.map(n=>Se.jsxs("div",{className:"nav-category",children:[Se.jsxs("button",{className:"category-header "+(s.has(n.id)?"expanded":""),onClick:()=>(e=>{const t=new Set(s);t.has(e)?t.delete(e):t.add(e),a(t)})(n.id),children:[Se.jsx("span",{className:"category-icon",children:n.icon}),Se.jsx("span",{className:"learn-category-title",children:n.title}),Se.jsx("span",{className:"expand-icon",children:s.has(n.id)?"\u25bc":"\u25b6"})]}),s.has(n.id)&&Se.jsx("div",{className:"category-sections",children:n.sections.map(s=>Se.jsx("button",{className:"nav-item "+(e===s.id?"active":""),onClick:()=>t(s.id),children:s.title},s.id))})]},n.id))})}),Se.jsx("div",{className:"learn-content",children:c.flatMap(e=>e.sections).find(t=>t.id===e)?.content})]}),Se.jsxs("div",{className:"help-section",children:[Se.jsx("h3",{children:"Need More Help?"}),Se.jsx("p",{children:"Access our documentation and join our community for support:"}),Se.jsxs("div",{className:"community-links",children:[Se.jsxs("a",{href:"https://docs.pixeljourney.xyz",target:"_blank",rel:"noopener noreferrer",className:"community-link docs",children:[Se.jsx("span",{className:"icon",children:"\ud83d\udcda"}),"Documentation"]}),Se.jsxs("a",{href:"https://discord.gg/pixeljourney",target:"_blank",rel:"noopener noreferrer",className:"community-link discord",children:[Se.jsx("span",{className:"icon",children:"\ud83d\udcac"}),"Discord Community"]}),Se.jsxs("a",{href:"https://t.me/pixeljourney",target:"_blank",rel:"noopener noreferrer",className:"community-link telegram",children:[Se.jsx("span",{className:"icon",children:"\ud83d\udcf1"}),"Telegram Group"]}),Se.jsxs("a",{href:"https://x.com/PxJourney",target:"_blank",rel:"noopener noreferrer",className:"community-link twitter",children:[Se.jsx("span",{className:"icon",children:"\ud83d\udc26"}),"Twitter/X Updates"]})]})]})]})},Va=()=>{const[e,t]=O.useState("overview"),s=[{id:"overview",title:"Overview",content:Se.jsxs("div",{className:"section-content",children:[Se.jsx("h3",{children:"PxMarket Journey Map"}),Se.jsx("p",{children:"Welcome to the comprehensive roadmap of the Pixel Journey ecosystem. This page serves as both a sitemap for current features and a development roadmap for future enhancements."}),Se.jsxs("div",{className:"ecosystem-grid",children:[Se.jsxs("div",{className:"ecosystem-card current",children:[Se.jsx("h4",{children:"\ud83c\udfea Current Platform"}),Se.jsx("p",{children:"PxMarket - Your gateway to the Pixel Journey NFT ecosystem"})]}),Se.jsxs("div",{className:"ecosystem-card future",children:[Se.jsx("h4",{children:"\ud83d\ude80 Future dApps"}),Se.jsx("p",{children:"Expanding ecosystem of interconnected applications"})]})]})]})},{id:"pxmarket-features",title:"PxMarket Features",content:Se.jsxs("div",{className:"section-content",children:[Se.jsx("h3",{children:"PxMarket Feature Map"}),Se.jsx("p",{children:"Explore all the features available in the current PxMarket platform:"}),Se.jsxs("div",{className:"feature-category",children:[Se.jsx("h4",{children:"\ud83d\uded2 Marketplace Core"}),Se.jsxs("div",{className:"feature-list",children:[Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"NFT Marketplace"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"Collection Browser"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"Asset Details"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"Advanced Filtering"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]})]})]}),Se.jsxs("div",{className:"feature-category",children:[Se.jsx("h4",{children:"\ud83d\udc64 User Features"}),Se.jsxs("div",{className:"feature-list",children:[Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"User Profiles"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"Inventory Management"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"Watchlist"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"Activity Tracking"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]})]})]}),Se.jsxs("div",{className:"feature-category",children:[Se.jsx("h4",{children:"\ud83d\udcb0 Trading & Economy"}),Se.jsxs("div",{className:"feature-list",children:[Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"Buy/Sell NFTs"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"Bulk Operations"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"Price Analytics"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"Auctions"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"Offers System"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"Shopping Cart"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]})]})]}),Se.jsxs("div",{className:"feature-category",children:[Se.jsx("h4",{children:"\ud83d\udd04 WAX Integration"}),Se.jsxs("div",{className:"feature-list",children:[Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"RWAX Tokenization"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"WAX Balance Management"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"Resource Management (CPU/NET/RAM)"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"Multi-Wallet Support"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]})]})]}),Se.jsxs("div",{className:"feature-category",children:[Se.jsx("h4",{children:"\ud83c\udfc6 Staking & Rewards"}),Se.jsxs("div",{className:"feature-list",children:[Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"NFT Staking"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"Token Staking"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"Reward Distribution"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"PXJ Badge System"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]})]})]}),Se.jsxs("div",{className:"feature-category",children:[Se.jsx("h4",{children:"\ud83c\udf81 Rewards & Gamification"}),Se.jsxs("div",{className:"feature-list",children:[Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"Pack Opening"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"Chat System"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"Live Transactions Feed"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"Social Sharing"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsxs("div",{className:"feature-item planned",children:[Se.jsx("span",{className:"feature-name",children:"Achievement System"}),Se.jsx("span",{className:"status-badge planned",children:"Planned"})]})]})]}),Se.jsxs("div",{className:"feature-category",children:[Se.jsx("h4",{children:"\ud83d\udee0\ufe0f Advanced Features"}),Se.jsxs("div",{className:"feature-list",children:[Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"NFT Comparison Tool"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"Portfolio Analytics"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"Price Alerts"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"Collection Analytics"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"Accessibility Features"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsxs("div",{className:"feature-item live",children:[Se.jsx("span",{className:"feature-name",children:"PWA Support"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]})]})]}),Se.jsxs("div",{className:"feature-category",children:[Se.jsx("h4",{children:"\ud83c\udfa8 Crafting & Creation"}),Se.jsxs("div",{className:"feature-list",children:[Se.jsxs("div",{className:"feature-item beta",children:[Se.jsx("span",{className:"feature-name",children:"NFT Crafting System"}),Se.jsx("span",{className:"status-badge beta",children:"Beta"})]}),Se.jsxs("div",{className:"feature-item planned",children:[Se.jsx("span",{className:"feature-name",children:"Custom Templates"}),Se.jsx("span",{className:"status-badge planned",children:"Planned"})]}),Se.jsxs("div",{className:"feature-item planned",children:[Se.jsx("span",{className:"feature-name",children:"Community Creations"}),Se.jsx("span",{className:"status-badge planned",children:"Planned"})]})]})]})]})},{id:"wax-ecosystem",title:"WAX Ecosystem",content:Se.jsxs("div",{className:"section-content",children:[Se.jsx("h3",{children:"PXJourney across WAX"}),Se.jsx("p",{children:"Explore the expanding Pixel Journey ecosystem on the WAX blockchain:"}),Se.jsxs("div",{className:"dapp-grid",children:[Se.jsxs("div",{className:"dapp-card live purple-glow",children:[Se.jsxs("div",{className:"dapp-header",children:[Se.jsx("h4",{children:"PxMarket"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsx("p",{children:"NFT marketplace and trading platform"}),Se.jsx("a",{href:"https://market.pixeljourney.xyz",target:"_blank",rel:"noopener noreferrer",className:"dapp-link",children:"Visit PxMarket \u2192"})]}),Se.jsxs("div",{className:"dapp-card live green-glow",children:[Se.jsxs("div",{className:"dapp-header",children:[Se.jsx("h4",{children:"PxStaking"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsx("p",{children:"Stake your Pixel Journey NFTs for rewards"}),Se.jsx("a",{href:"https://stake.pixeljourney.xyz",target:"_blank",rel:"noopener noreferrer",className:"dapp-link",children:"Visit PxStaking \u2192"})]}),Se.jsxs("div",{className:"dapp-card live golden-glow",children:[Se.jsxs("div",{className:"dapp-header",children:[Se.jsx("h4",{children:"PxLeaderboards"}),Se.jsx("span",{className:"status-badge live",children:"Live"})]}),Se.jsx("p",{children:"Track rankings and compete with other players"}),Se.jsx("a",{href:"https://lb.pixeljourney.xyz",target:"_blank",rel:"noopener noreferrer",className:"dapp-link",children:"Visit PxLeaderboards \u2192"})]}),Se.jsxs("div",{className:"dapp-card planned",children:[Se.jsxs("div",{className:"dapp-header",children:[Se.jsx("h4",{children:"PxDeFi"}),Se.jsx("span",{className:"status-badge planned",children:"ETA TBD"})]}),Se.jsx("p",{children:"Decentralized finance features for the ecosystem"}),Se.jsx("div",{className:"dapp-link disabled",children:"Coming via PxMilestones"})]}),Se.jsxs("div",{className:"dapp-card coming-soon",children:[Se.jsxs("div",{className:"dapp-header",children:[Se.jsx("h4",{children:"PxCraft"}),Se.jsx("span",{className:"status-badge coming-soon",children:"Coming Soon"})]}),Se.jsx("p",{children:"Craft and create new NFTs from existing assets"}),Se.jsx("div",{className:"dapp-link disabled",children:"In Development"})]}),Se.jsxs("div",{className:"dapp-card coming-soon",children:[Se.jsxs("div",{className:"dapp-header",children:[Se.jsx("h4",{children:"PxMilestones"}),Se.jsx("span",{className:"status-badge coming-soon",children:"Coming Soon"})]}),Se.jsx("p",{children:"Achievement and milestone tracking system"}),Se.jsx("div",{className:"dapp-link disabled",children:"In Development"})]}),Se.jsxs("div",{className:"dapp-card planned",children:[Se.jsxs("div",{className:"dapp-header",children:[Se.jsx("h4",{children:"PxQuest"}),Se.jsx("span",{className:"status-badge planned",children:"ETA TBD"})]}),Se.jsx("p",{children:"Quest and mission system for earning rewards"}),Se.jsx("div",{className:"dapp-link disabled",children:"Coming via PxMilestones"})]}),Se.jsxs("div",{className:"dapp-card planned",children:[Se.jsxs("div",{className:"dapp-header",children:[Se.jsx("h4",{children:"PxDAO"}),Se.jsx("span",{className:"status-badge planned",children:"ETA TBD"})]}),Se.jsx("p",{children:"Decentralized governance for the ecosystem"}),Se.jsx("div",{className:"dapp-link disabled",children:"Coming via PxMilestones"})]})]})]})},{id:"external-links",title:"External Platforms",content:Se.jsxs("div",{className:"section-content",children:[Se.jsx("h3",{children:"Pixel Journey Across Platforms"}),Se.jsx("p",{children:"Find Pixel Journey on various platforms and marketplaces:"}),Se.jsxs("div",{className:"platform-category",children:[Se.jsx("h4",{children:"\ud83c\udf10 Official Websites"}),Se.jsxs("div",{className:"link-grid",children:[Se.jsxs("a",{href:"https://pixeljourney.xyz/",target:"_blank",rel:"noopener noreferrer",className:"platform-link",children:[Se.jsx("span",{className:"platform-name",children:"Main Website"}),Se.jsx("span",{className:"platform-desc",children:"Official Pixel Journey homepage"})]}),Se.jsxs("a",{href:"https://docs.pixeljourney.xyz",target:"_blank",rel:"noopener noreferrer",className:"platform-link",children:[Se.jsx("span",{className:"platform-name",children:"Documentation"}),Se.jsx("span",{className:"platform-desc",children:"Complete project documentation"})]})]})]}),Se.jsxs("div",{className:"platform-category",children:[Se.jsx("h4",{children:"\ud83d\uded2 NFT Marketplaces (WAX)"}),Se.jsxs("div",{className:"link-grid",children:[Se.jsxs("a",{href:"https://atomichub.io/explorer/collection/wax-mainnet/pixeljourney",target:"_blank",rel:"noopener noreferrer",className:"platform-link",children:[Se.jsx("span",{className:"platform-name",children:"AtomicHub"}),Se.jsx("span",{className:"platform-desc",children:"Primary WAX marketplace"})]}),Se.jsxs("a",{href:"https://neftyblocks.com/collection/pixeljourney/",target:"_blank",rel:"noopener noreferrer",className:"platform-link",children:[Se.jsx("span",{className:"platform-name",children:"NeftyBlocks"}),Se.jsx("span",{className:"platform-desc",children:"WAX NFT marketplace"})]}),Se.jsxs("a",{href:"https://nfthive.io/collection/pixeljourney",target:"_blank",rel:"noopener noreferrer",className:"platform-link",children:[Se.jsx("span",{className:"platform-name",children:"NFTHive"}),Se.jsx("span",{className:"platform-desc",children:"WAX marketplace and drops"})]}),Se.jsxs("a",{href:"https://www.pfpwizard.xyz/pfp/pixals/ranking/",target:"_blank",rel:"noopener noreferrer",className:"platform-link",children:[Se.jsx("span",{className:"platform-name",children:"PFP Wizard"}),Se.jsx("span",{className:"platform-desc",children:"Pixal PFP marketplace"})]})]})]}),Se.jsxs("div",{className:"platform-category",children:[Se.jsx("h4",{children:"\ud83c\udf09 Cross-Chain Marketplaces"}),Se.jsxs("div",{className:"link-grid",children:[Se.jsxs("a",{href:"https://opensea.io/collection/pixeljourney-polygon",target:"_blank",rel:"noopener noreferrer",className:"platform-link",children:[Se.jsx("span",{className:"platform-name",children:"OpenSea (Polygon)"}),Se.jsx("span",{className:"platform-desc",children:"Polygon bridged collection"})]}),Se.jsxs("a",{href:"https://opensea.io/collection/pixeljourney-base",target:"_blank",rel:"noopener noreferrer",className:"platform-link",children:[Se.jsx("span",{className:"platform-name",children:"OpenSea (Base)"}),Se.jsx("span",{className:"platform-desc",children:"Base bridged collection"})]}),Se.jsxs("a",{href:"https://opensea.io/collection/pixeljourney-eth",target:"_blank",rel:"noopener noreferrer",className:"platform-link",children:[Se.jsx("span",{className:"platform-name",children:"OpenSea (Ethereum)"}),Se.jsx("span",{className:"platform-desc",children:"Ethereum bridged collection"})]}),Se.jsxs("a",{href:"https://nft.monbase.com/collections/66c4eb2ca339b05c5a660e44/detail",target:"_blank",rel:"noopener noreferrer",className:"platform-link",children:[Se.jsx("span",{className:"platform-name",children:"MonBase"}),Se.jsx("span",{className:"platform-desc",children:"Base chain marketplace"})]})]})]}),Se.jsxs("div",{className:"platform-category",children:[Se.jsx("h4",{children:"\ud83d\udcb0 DeFi & Staking"}),Se.jsxs("div",{className:"link-grid",children:[Se.jsxs("a",{href:"https://waxdao.io/v2/farm/pixeljourney",target:"_blank",rel:"noopener noreferrer",className:"platform-link",children:[Se.jsx("span",{className:"platform-name",children:"WaxDAO Farm"}),Se.jsx("span",{className:"platform-desc",children:"NFT staking rewards"})]}),Se.jsxs("a",{href:"https://www.pfpwizard.xyz/pfp/pixals/buy/",target:"_blank",rel:"noopener noreferrer",className:"platform-link",children:[Se.jsx("span",{className:"platform-name",children:"PFP Wizard Buy"}),Se.jsx("span",{className:"platform-desc",children:"Get your Pixal PFP"})]})]})]})]})},{id:"social-community",title:"Social & Community",content:Se.jsxs("div",{className:"section-content",children:[Se.jsx("h3",{children:"Join the Community"}),Se.jsx("p",{children:"Connect with the Pixel Journey community across various platforms:"}),Se.jsxs("div",{className:"social-grid",children:[Se.jsxs("a",{href:"https://twitter.com/PxJourney",target:"_blank",rel:"noopener noreferrer",className:"social-link twitter",children:[Se.jsx("div",{className:"social-icon",children:"\ud83d\udc26"}),Se.jsxs("div",{className:"social-info",children:[Se.jsx("span",{className:"social-name",children:"Twitter/X"}),Se.jsx("span",{className:"social-desc",children:"Latest updates and announcements"})]})]}),Se.jsxs("a",{href:"https://t.me/pixel_journey",target:"_blank",rel:"noopener noreferrer",className:"social-link telegram",children:[Se.jsx("div",{className:"social-icon",children:"\ud83d\udcf1"}),Se.jsxs("div",{className:"social-info",children:[Se.jsx("span",{className:"social-name",children:"Telegram"}),Se.jsx("span",{className:"social-desc",children:"Community chat and discussions"})]})]}),Se.jsxs("a",{href:"https://discord.gg/waxblockchain",target:"_blank",rel:"noopener noreferrer",className:"social-link discord",children:[Se.jsx("div",{className:"social-icon",children:"\ud83d\udcac"}),Se.jsxs("div",{className:"social-info",children:[Se.jsx("span",{className:"social-name",children:"WAX Discord"}),Se.jsx("span",{className:"social-desc",children:"Join the broader WAX community"})]})]}),Se.jsxs("a",{href:"https://instagram.com/pixeljourney_xyz",target:"_blank",rel:"noopener noreferrer",className:"social-link instagram",children:[Se.jsx("div",{className:"social-icon",children:"\ud83d\udcf8"}),Se.jsxs("div",{className:"social-info",children:[Se.jsx("span",{className:"social-name",children:"Instagram"}),Se.jsx("span",{className:"social-desc",children:"Visual updates and behind-the-scenes"})]})]}),Se.jsxs("a",{href:"https://coinmarketcap.com/community/profile/pixeljourney/",target:"_blank",rel:"noopener noreferrer",className:"social-link cmc",children:[Se.jsx("div",{className:"social-icon",children:"\ud83d\udcca"}),Se.jsxs("div",{className:"social-info",children:[Se.jsx("span",{className:"social-name",children:"CoinMarketCap"}),Se.jsx("span",{className:"social-desc",children:"Project profile and metrics"})]})]}),Se.jsxs("a",{href:"https://dappradar.com/nft-collection/pixel-journey",target:"_blank",rel:"noopener noreferrer",className:"social-link dappradar",children:[Se.jsx("div",{className:"social-icon",children:"\ud83d\udcc8"}),Se.jsxs("div",{className:"social-info",children:[Se.jsx("span",{className:"social-name",children:"DappRadar"}),Se.jsx("span",{className:"social-desc",children:"NFT collection analytics"})]})]}),Se.jsxs("a",{href:"https://pixel-journey.uncut.network/",target:"_blank",rel:"noopener noreferrer",className:"social-link uncut",children:[Se.jsx("div",{className:"social-icon",children:"\ud83c\udfae"}),Se.jsxs("div",{className:"social-info",children:[Se.jsx("span",{className:"social-name",children:"Uncut Network"}),Se.jsx("span",{className:"social-desc",children:"Gaming community presence"})]})]})]})]})},{id:"roadmap",title:"Development Roadmap",content:Se.jsxs("div",{className:"section-content",children:[Se.jsx("h3",{children:"Future Development Roadmap"}),Se.jsx("p",{children:"Planned features and enhancements for the Pixel Journey ecosystem:"}),Se.jsxs("div",{className:"roadmap-timeline",children:[Se.jsxs("div",{className:"roadmap-phase completed",children:[Se.jsxs("div",{className:"phase-header",children:[Se.jsx("h4",{children:"Phase 1: Foundation"}),Se.jsx("span",{className:"phase-status completed",children:"Completed"})]}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"\u2705 PxMarket NFT marketplace launch"}),Se.jsx("li",{children:"\u2705 Basic trading functionality"}),Se.jsx("li",{children:"\u2705 User profiles and inventory"}),Se.jsx("li",{children:"\u2705 PXJ token integration"})]})]}),Se.jsxs("div",{className:"roadmap-phase current",children:[Se.jsxs("div",{className:"phase-header",children:[Se.jsx("h4",{children:"Phase 2: Enhancement"}),Se.jsx("span",{className:"phase-status current",children:"Current"})]}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"\u2705 Advanced filtering and search"}),Se.jsx("li",{children:"\u2705 Bulk operations"}),Se.jsx("li",{children:"\ud83d\udd04 Auction system (Beta)"}),Se.jsx("li",{children:"\ud83d\udd04 Enhanced analytics"})]})]}),Se.jsxs("div",{className:"roadmap-phase planned",children:[Se.jsxs("div",{className:"phase-header",children:[Se.jsx("h4",{children:"Phase 3: Ecosystem Expansion"}),Se.jsx("span",{className:"phase-status planned",children:"Q2 2025"})]}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"\ud83d\udd2e PxCraft crafting system"}),Se.jsx("li",{children:"\ud83d\udd2e PxMilestones achievement system"}),Se.jsx("li",{children:"\ud83d\udd2e Enhanced gamification"}),Se.jsx("li",{children:"\ud83d\udd2e Cross-platform integration"})]})]}),Se.jsxs("div",{className:"roadmap-phase future",children:[Se.jsxs("div",{className:"phase-header",children:[Se.jsx("h4",{children:"Phase 4: Advanced Features"}),Se.jsx("span",{className:"phase-status future",children:"Q3-Q4 2025"})]}),Se.jsxs("ul",{children:[Se.jsx("li",{children:"\ud83d\udd2e PxQuest mission system"}),Se.jsx("li",{children:"\ud83d\udd2e PxDeFi financial features"}),Se.jsx("li",{children:"\ud83d\udd2e PxDAO governance"}),Se.jsx("li",{children:"\ud83d\udd2e Mobile applications"})]})]})]})]})}];return Se.jsxs("div",{className:"journeymap-page",children:[Se.jsxs("div",{className:"page-header",children:[Se.jsx("h1",{children:"Journey Map"}),Se.jsx("p",{children:"Your comprehensive guide to the Pixel Journey ecosystem - current features, future roadmap, and community links"})]}),Se.jsxs("div",{className:"journeymap-container",children:[Se.jsx("div",{className:"journeymap-sidebar",children:Se.jsx("nav",{className:"journeymap-nav",children:s.map(s=>Se.jsx("button",{className:"nav-item "+(e===s.id?"active":""),onClick:()=>t(s.id),children:s.title},s.id))})}),Se.jsx("div",{className:"journeymap-content",children:s.find(t=>t.id===e)?.content})]})]})},Ga=({isOpen:e,onClose:t,templateId:s,templateName:a,action:n,onSuccess:i})=>{const[r,l]=O.useState([]),[o,c]=O.useState([]),[d,u]=O.useState(!1),[h,m]=O.useState(!1),[p,f]=O.useState(null),[x,g]=O.useState(null),{session:v,account:j}=Ie(),{addNotification:y,showSuccess:b,showError:N}=xt();O.useEffect(()=>{e&&j&&w()},[e,j,s]);const w=async()=>{if(j){u(!0);try{if("stake"===n){const{apiService:e}=await Y(async()=>{const{apiService:e}=await Promise.resolve().then(()=>ut);return{apiService:e}},void 0),t=`${e.atomicAssetsAPI}/atomicassets/v1/assets?owner=${j}&template_id=${s}&page=1&limit=100&order=desc&sort=asset_id`,a=await e.fetchWithRetry(t),n=await a.json();l(n.data||[])}else{const{apiService:e}=await Y(async()=>{const{apiService:e}=await Promise.resolve().then(()=>ut);return{apiService:e}},void 0),t=await e.waxRpcCall("/v1/chain/get_table_rows",{json:!0,code:"farms.waxdao",scope:"farms.waxdao",table:"stakers",lower_bound:j,upper_bound:j,limit:1}),s=t.rows.find(e=>e.user===j),a=s?.staked_assets||[];if(0===a.length)l([]);else{const t=await e.fetchWithRetry(`${e.atomicAssetsAPI}/atomicassets/v1/assets?ids=${a.join(",")}&page=1&limit=1000`);if(!t.ok)throw new Error("Failed to fetch asset details");const s=await t.json();l(s.data||[])}}}catch(e){De.error("Failed to fetch staking assets","NFTStakingModal.fetchAssets",e,{account:j}),y({type:"error",message:"Failed to load assets"})}finally{u(!1)}}};return e?Se.jsx("div",{className:"modal-overlay",onClick:t,children:Se.jsxs("div",{className:"modal-content nft-staking-modal",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsxs("h2",{children:["stake"===n?"Stake":"Unstake"," ",a," NFTs"]}),Se.jsx("button",{className:"modal-close",onClick:t,children:"\xd7"})]}),Se.jsx("div",{className:"modal-body",children:d?Se.jsxs("div",{className:"loading-state",children:[Se.jsx("div",{className:"loading-spinner"}),Se.jsxs("p",{children:["Loading your ",a," NFTs..."]})]}):h?Se.jsxs("div",{className:"processing-state",children:[Se.jsx("div",{className:"loading-spinner"}),Se.jsxs("p",{children:["stake"===n?"Staking":"Unstaking"," your NFTs..."]}),p&&Se.jsxs("div",{className:"batch-progress",children:[Se.jsx("div",{className:"progress-bar",children:Se.jsx("div",{className:"progress-fill",style:{width:p.current/p.total*100+"%"}})}),Se.jsxs("p",{children:["Processing ",p.current," of ",p.total," NFTs"]})]}),x&&Se.jsxs("div",{className:"transaction-results",children:[Se.jsxs("div",{className:"results-summary",children:[Se.jsxs("div",{className:"success-count",children:["\u2705 ",x.successful_transactions.length," successful"]}),x.failed_transactions.length>0&&Se.jsxs("div",{className:"error-count",children:["\u274c ",x.failed_transactions.length," failed"]})]}),x.failed_transactions.length>0&&Se.jsxs("div",{className:"failed-transactions",children:[Se.jsx("h4",{children:"Failed Transactions:"}),x.failed_transactions.slice(0,5).map(e=>Se.jsxs("div",{className:"failure-item",children:[Se.jsxs("span",{children:["#",e.asset_id]}),Se.jsx("span",{className:"error-message",children:e.error})]},e.asset_id)),x.failed_transactions.length>5&&Se.jsxs("p",{children:["... and ",x.failed_transactions.length-5," more"]})]})]})]}):Se.jsxs(Se.Fragment,{children:[Se.jsxs("div",{className:"selection-controls",children:[Se.jsx("button",{className:"btn btn-secondary",onClick:()=>{o.length===r.length?c([]):c(r.map(e=>e.asset_id))},children:o.length===r.length?"Deselect All":"Select All"}),Se.jsxs("span",{className:"selection-count",children:[o.length," of ",r.length," selected"]})]}),Se.jsx("div",{className:"asset-grid",children:0===r.length?Se.jsx("div",{className:"no-assets",children:Se.jsxs("p",{children:["No ",a," NFTs available to ",n]})}):r.map(e=>Se.jsxs("div",{className:"asset-item "+(o.includes(e.asset_id)?"selected":""),onClick:()=>{return t=e.asset_id,void c(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},children:[Se.jsx(Qs,{src:e.image||`https://ipfs.io/ipfs/${e.data?.img||"placeholder"}`,alt:e.name}),Se.jsxs("div",{className:"asset-id",children:["#",e.asset_id]}),o.includes(e.asset_id)&&Se.jsx("div",{className:"selection-indicator",children:"\u2713"})]},e.asset_id))})]})}),Se.jsxs("div",{className:"modal-footer",children:[Se.jsx("button",{className:"btn btn-secondary",onClick:t,children:"Cancel"}),Se.jsx("button",{className:"btn btn-primary",onClick:async()=>{if(v&&0!==o.length){m(!0),f({current:0,total:o.length}),g(null);try{let e;if(e="stake"===n?await Xs.stakeNFTsBatch(v,o,"pixeljourney"):await Xs.unstakeNFTsBatch(v,o),g(e),e.success)b("Transaction Successful",`Successfully ${n}d ${e.successful_transactions.length} ${a} NFT${e.successful_transactions.length>1?"s":""}`),setTimeout(()=>{i?.(),t()},2e3);else{const t=e.successful_transactions.length,s=e.failed_transactions.length;t>0?b("Partial Success",`${t} NFTs ${n}d successfully, ${s} failed`):N("Transaction Failed",`Failed to ${n} NFTs. Please try again.`)}}catch(e){De.error(`NFT ${n} operation failed`,"NFTStakingModal.handleBatchAction",e,{action:n,selectedAssetsCount:o.length});const t=e instanceof Error?e.message:`Failed to ${n} NFTs`;N("Transaction Error",t)}finally{m(!1),f(null)}}},disabled:0===o.length||h,children:h?Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"loading-spinner"}),"stake"===n?"Staking...":"Unstaking..."]}):`${"stake"===n?"Stake":"Unstake"} ${o.length} NFT${1!==o.length?"s":""}`})]})]})}):null},Ya=e=>({PXJ:"/img/tokens/pxj.png",WUF:"/img/tokens/wuf.png",WAX:"/img/tokens/wax.png",PIXAL:"/img/tokens/pixal.png"}[e.toUpperCase()]||"/img/tokens/default.png"),Ka=({isOpen:e,onClose:t,action:s,farmName:a="pxjfarm1",onSuccess:n})=>{const{session:i}=Ie(),{showSuccess:r,showError:l}=xt(),[o,c]=O.useState(""),[d,u]=O.useState(!1),[h,m]=O.useState(null),[p,f]=O.useState(null),[x,g]=O.useState(0),[v,j]=O.useState(!1),y=O.useCallback(async()=>{if(i){j(!0);try{const e=await Xs.getTokenFarmInfo(a);m(e);const t=await Xs.getTokenStakingInfo(i.actor.toString(),a);f(t);const s=await fetch("https://wax.greymass.com/v1/chain/get_currency_balance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:"pixeljourney",account:i.actor.toString(),symbol:"PXJ"})});if(s.ok){const e=await s.json(),t=e.length>0?parseFloat(e[0].split(" ")[0]):0;g(t)}}catch(e){console.error("Error fetching data:",e),l("Failed to load staking data")}finally{j(!1)}}},[i,j,a,m,f,g,l]);O.useEffect(()=>{e&&i&&y()},[e,i,a,y]);const b=e=>e.toLocaleString(void 0,{minimumFractionDigits:4,maximumFractionDigits:4});if(!e)return null;return Se.jsx("div",{className:"modal-overlay",onClick:t,children:Se.jsxs("div",{className:"modal-content token-staking-modal",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsx("h3",{children:(()=>{switch(s){case"stake":return"Stake PXJ Tokens";case"unstake":return"Unstake PXJ Tokens";case"claim":return"Claim Rewards";default:return"Token Staking"}})()}),Se.jsx("button",{className:"close-btn",onClick:t,children:"\xd7"})]}),Se.jsx("div",{className:"modal-body",children:v?Se.jsxs("div",{className:"loading-state",children:[Se.jsx("div",{className:"spinner"}),Se.jsx("p",{children:"Loading staking data..."})]}):Se.jsxs(Se.Fragment,{children:[h&&Se.jsxs("div",{className:"farm-info-section",children:[Se.jsx("h4",{children:"Farm Information"}),Se.jsxs("div",{className:"info-grid",children:[Se.jsxs("div",{className:"info-item",children:[Se.jsx("span",{className:"label",children:"Farm:"}),Se.jsx("span",{className:"value",children:h.farm_name})]}),Se.jsxs("div",{className:"info-item",children:[Se.jsx("span",{className:"label",children:"Total Staked:"}),Se.jsxs("span",{className:"value",children:[b(h.total_staked)," PXJ"]})]}),Se.jsxs("div",{className:"info-item",children:[Se.jsx("span",{className:"label",children:"Vesting Period:"}),Se.jsxs("span",{className:"value",children:[Math.floor(h.vesting_time/86400)," days"]})]})]})]}),p&&Se.jsxs("div",{className:"user-stake-info",children:[Se.jsx("h4",{children:"Your Staking Position"}),Se.jsxs("div",{className:"info-grid",children:[Se.jsxs("div",{className:"info-item",children:[Se.jsx("span",{className:"label",children:"Staked Amount:"}),Se.jsxs("span",{className:"value",children:[b(p.staked_amount)," PXJ"]})]}),Se.jsxs("div",{className:"info-item",children:[Se.jsx("span",{className:"label",children:"Pending Rewards:"}),Se.jsx("span",{className:"value",children:p.pending_rewards.map(e=>`${b(e.amount)} ${e.token}`).join(", ")||"None"})]}),Se.jsxs("div",{className:"info-item",children:[Se.jsx("span",{className:"label",children:"Unlock Time:"}),Se.jsx("span",{className:"value",children:(e=>{const t=e-Date.now()/1e3;if(t<=0)return"Available now";const s=Math.floor(t/86400),a=Math.floor(t%86400/3600),n=Math.floor(t%3600/60);return s>0?`${s}d ${a}h remaining`:a>0?`${a}h ${n}m remaining`:`${n}m remaining`})(p.vesting_time)})]})]})]}),Se.jsx("div",{className:"balance-info",children:Se.jsxs("div",{className:"balance-item",children:[Se.jsx(ea,{src:Ya("PXJ"),alt:"PXJ"}),Se.jsxs("span",{children:["Available: ",b(x)," PXJ"]})]})}),Se.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),i&&!d)if("claim"===s||o&&!(parseFloat(o)<=0))if("stake"===s&&parseFloat(o)>x)l("Insufficient PXJ balance");else if("unstake"===s&&p&&parseFloat(o)>p.staked_amount)l("Amount exceeds staked balance");else{u(!0);try{let e;const c=`${parseFloat(o).toFixed(4)} PXJ`;switch(s){case"stake":e=await Xs.stakeTokens(i,c,a);break;case"unstake":e=await Xs.unstakeTokens(i,c,a);break;case"claim":e=await Xs.claimTokenFarmRewards(i,a);break;default:throw new Error("Invalid action")}e.success?(r(`Successfully ${"stake"===s?"staked":"unstake"===s?"unstaked":"claimed"} tokens!`),n?.(),t()):l(e.error||`Failed to ${s} tokens`)}catch(c){console.error(`Error ${s}ing tokens:`,c),l(c instanceof Error?c.message:`Failed to ${s} tokens`)}finally{u(!1)}}else l("Please enter a valid amount")},className:"staking-form",children:["claim"!==s&&Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{htmlFor:"amount",children:"Amount (PXJ)"}),Se.jsxs("div",{className:"input-group",children:[Se.jsx("input",{type:"number",id:"amount",value:o,onChange:e=>c(e.target.value),placeholder:"0.0000",step:"0.0001",min:"0",max:"stake"===s?x:p?.staked_amount||0,required:!0,disabled:d}),Se.jsx("button",{type:"button",className:"max-btn",onClick:()=>{c(("stake"===s?x:p?.staked_amount||0).toFixed(4))},disabled:d,children:"MAX"})]})]}),"claim"===s&&p&&p.pending_rewards.length>0&&Se.jsxs("div",{className:"rewards-preview",children:[Se.jsx("h4",{children:"Rewards to Claim:"}),Se.jsx("div",{className:"rewards-list",children:p.pending_rewards.map((e,t)=>Se.jsxs("div",{className:"reward-item",children:[Se.jsx(ea,{src:Ya(e.token),alt:e.token}),Se.jsxs("span",{children:[b(e.amount)," ",e.token]})]},t))})]}),Se.jsxs("div",{className:"form-actions",children:[Se.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:d,children:"Cancel"}),Se.jsx("button",{type:"submit",className:"btn btn-primary",disabled:d||"claim"!==s&&!o,children:(()=>{if(d)return"Processing...";switch(s){case"stake":return"Stake Tokens";case"unstake":return"Unstake Tokens";case"claim":return"Claim Rewards";default:return"Submit"}})()})]})]})]})})]})})},Qa=async(e,t)=>{try{const t=await dt.getSales({template:e,limit:10});if(t&&t.data.length>0){const e=t.data.reduce((e,t)=>e+parseFloat(t.price?.amount||"0"),0)/t.data.length;return Math.floor(100*e)}}catch(s){De.warn("Could not fetch template sales data","Staking",s)}return{Common:1e3,Uncommon:2500,Rare:5e3,Epic:15e3,Legendary:5e4}[t]||1e3},Za=async e=>{try{const t=await dt.getSales({template:e,limit:5});if(t&&t.data.length>0){const e=t.data.map(e=>parseFloat(e.price?.amount||"0")),s=Math.min(...e.filter(e=>e>0));return Math.floor(s)}}catch(t){De.warn("Could not fetch template listings","Staking",t)}return 50},en=({template:e,isOpen:t,onClose:s})=>t&&e?Se.jsx("div",{className:"modal-overlay",onClick:s,children:Se.jsxs("div",{className:"modal-content quick-buy-modal",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsxs("h3",{children:["Quick Buy - ",e.name]}),Se.jsx("button",{className:"close-btn",onClick:s,children:"\xd7"})]}),Se.jsx("div",{className:"modal-body",children:Se.jsxs("div",{className:"buy-item-preview",children:[Se.jsx(Qs,{src:e.image,alt:e.name}),Se.jsxs("div",{className:"item-details",children:[Se.jsx("h4",{children:e.name}),Se.jsx("p",{className:"rarity",children:e.rarity}),Se.jsxs("p",{className:"price",children:[e.market_price||"N/A"," WAX"]}),Se.jsxs("p",{className:"available",children:[e.available_for_sale||0," available"]})]})]})}),Se.jsxs("div",{className:"modal-footer",children:[Se.jsx("button",{className:"btn btn-secondary",onClick:s,children:"Cancel"}),Se.jsx("button",{className:"btn btn-primary",children:"Buy Now"})]})]})}):null,tn=()=>{const{session:e,isConnected:t,login:s}=Ie(),{showSuccess:a,showError:n}=xt(),[i,r]=O.useState(!1),[l,o]=O.useState([]),[c,d]=O.useState({pxj:0,wuf:0}),[u,h]=O.useState(!1),[m,p]=O.useState(0),[f,x]=O.useState(null),[g,v]=O.useState(!1),[j,y]=O.useState(!1),[b,N]=O.useState(!1),[w,k]=O.useState(null),[_,S]=O.useState(!1),[C,A]=O.useState(null),[P,T]=O.useState(null),[E,F]=O.useState(!1),[I,$]=O.useState("stake"),[L,M]=O.useState(!1),[R,W]=O.useState(0),D=O.useMemo(()=>[{template_id:"1001",name:"Black Ingredient",type:"Legendary",rarity:"Legendary",image:"",owned_count:0,staked_count:0,rewards_per_hour:{pxj:50,wuf:25},estimated_value:1e5,apr:120,market_price:2500,available_for_sale:3},{template_id:"1002",name:"Tertiary Ingredient",type:"Epic",rarity:"Epic",image:"",owned_count:0,staked_count:0,rewards_per_hour:{pxj:10,wuf:5},estimated_value:25e3,apr:80,market_price:500,available_for_sale:12},{template_id:"1003",name:"Secondary Ingredient",type:"Rare",rarity:"Rare",image:"",owned_count:0,staked_count:0,rewards_per_hour:{pxj:2,wuf:1},estimated_value:5e3,apr:40,market_price:100,available_for_sale:25},{template_id:"1004",name:"Primary Ingredient",type:"Common",rarity:"Common",image:"",owned_count:0,staked_count:0,rewards_per_hour:{pxj:.1,wuf:.05},estimated_value:1e3,apr:10,market_price:25,available_for_sale:50}],[]),B=O.useCallback(async()=>{h(!0);try{if(!e)return o(D),void h(!1);try{const{apiService:t}=await Y(async()=>{const{apiService:e}=await Promise.resolve().then(()=>ut);return{apiService:e}},void 0),s=await t.fetchWithRetry(`${t.atomicAssetsAPI}/atomicassets/v1/templates?collection_name=pixeljourney&schema_name=ingredients&page=1&limit=100&order=desc&sort=created`);if(!s.ok)throw new Error("AtomicAssets API failed");const a=await s.json(),n=a.data.slice(0,10).map(e=>e.template_id),i=await t.getAssetCountsBatch(n,e.actor.toString()),r=(await Promise.all(a.data.slice(0,10).map(async t=>{try{const a=i.data[t.template_id]||0;let n=0;try{const t=await fetch("https://wax.greymass.com/v1/chain/get_table_rows",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({json:!0,code:"farms.waxdao",scope:"farms.waxdao",table:"stakers",lower_bound:Gt.safeGetActor(e),upper_bound:Gt.safeGetActor(e),limit:1})});if(t.ok){const s=(await t.json()).rows.find(t=>t.user===e.actor.toString());n=(s?.staked_assets||[]).length}}catch(s){De.warn("Failed to fetch staked count for template","Staking",{templateId:t.template_id,error:s})}const r=String(t.immutable_data?.rarity||"Common");let l=.1,o=5;switch(r.toLowerCase()){case"legendary":l=50,o=120;break;case"epic":l=10,o=80;break;case"rare":l=2,o=40;break;case"uncommon":l=.5,o=20;break;default:l=.1,o=10}return{template_id:t.template_id,name:t.immutable_data?.name||`Template ${t.template_id}`,type:t.immutable_data?.type||r,rarity:r,image:t.immutable_data?.img?`https://ipfs.io/ipfs/${t.immutable_data.img}`:"",owned_count:a,staked_count:n,rewards_per_hour:{pxj:l,wuf:.5*l},estimated_value:await Qa(t.template_id,r),apr:o,market_price:await Za(t.template_id),available_for_sale:Math.floor(20*Math.random())+1}}catch(s){return De.error("Error processing template","Staking",s),null}}))).filter(e=>null!==e);o(r.length>0?r:D),i.errors.length>0&&De.warn("Some template counts could not be fetched","Staking",{errors:i.errors})}catch(t){De.warn("API fetch failed, using default templates","Staking",t),o(D)}}catch(s){De.error("Failed to fetch NFT templates","Staking",s),o(D)}finally{h(!1)}},[e,h,o,D]),U=O.useCallback(async()=>{if(e)try{const t=await Xs.getStakingInfo(e.actor.toString()),s=t.pending_rewards.reduce((e,t)=>("PXJ"===t.token?e.pxj=t.amount:"WUF"===t.token&&(e.wuf=t.amount),e),{pxj:0,wuf:0});d(s),p(t.total_staking_power);const a=l.map(e=>{const s=t.staked_nfts.filter(t=>t.template_id===e.template_id);return{...e,staked_count:s.length,rewards_per_hour:s.length>0?s[0].rewards_per_hour:e.rewards_per_hour}});o(a)}catch(t){De.error("Failed to fetch rewards","Staking",t);const s=Date.now(),a=localStorage.getItem(`lastClaimTime_${Gt.safeGetActor(e)}`)||s.toString(),n=(s-parseInt(a))/1e3/3600,i=l.reduce((e,t)=>{const s=t.staked_count*t.rewards_per_hour.pxj*Math.floor(n),a=t.staked_count*t.rewards_per_hour.wuf*Math.floor(n);return{pxj:e.pxj+s,wuf:e.wuf+a}},{pxj:0,wuf:0});d(i)}},[e,l,d,p,o]),X=O.useCallback(async()=>{if(e){M(!0);try{const t=await Xs.getTokenFarmInfo("pxjfarm1");T(t);const s=await Xs.getTokenStakingInfo(e.actor.toString(),"pxjfarm1");A(s);const a=await fetch("https://wax.greymass.com/v1/chain/get_currency_balance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:"pixeljourney",account:e.actor.toString(),symbol:"PXJ"})});if(a.ok){const e=await a.json(),t=e.length>0?parseFloat(e[0].split(" ")[0]):0;W(t)}}catch(t){De.error("Failed to fetch token staking data","Staking",t)}finally{M(!1)}}},[e,M,T,A,W]),q=e=>{$(e),F(!0)},H=e=>{k(e),N(!0)},J=()=>{N(!1),k(null)},V=e=>{switch(e.toLowerCase()){case"legendary":return"#f59e0b";case"epic":return"#8b5cf6";case"rare":return"#3b82f6";case"uncommon":return"#10b981";default:return"#6b7280"}};return O.useEffect(()=>{B(),e&&(U(),X())},[e,B,U,X]),O.useEffect(()=>{const t=setInterval(()=>{e&&(U(),X())},3e4);return()=>clearInterval(t)},[e,l,U,X]),O.useEffect(()=>{const e=l.reduce((e,t)=>e+t.staked_count*(t.rewards_per_hour.pxj+t.rewards_per_hour.wuf),0);p(e)},[l]),t?Se.jsxs("div",{className:"staking-container",children:[Se.jsx("div",{className:"staking-header",children:Se.jsxs("div",{className:"header-content",children:[Se.jsx("h1",{children:"NFT Staking Dashboard"}),Se.jsxs("button",{className:"refresh-btn",onClick:async()=>{r(!0),await Promise.all([B(),U(),X()]),r(!1)},disabled:i,children:[i?"\ud83d\udd04":"\u21bb"," Refresh"]})]})}),Se.jsx("div",{className:"staking-portal-section",children:Se.jsxs("div",{className:"portal-card",children:[Se.jsxs("div",{className:"portal-header",children:[Se.jsx("div",{className:"portal-icon",children:"\ud83d\ude80"}),Se.jsxs("div",{className:"portal-info",children:[Se.jsx("h2",{children:"Advanced Staking Portal"}),Se.jsx("p",{children:"Access our comprehensive staking platform with advanced features, analytics, and enhanced rewards management."})]})]}),Se.jsxs("div",{className:"portal-features",children:[Se.jsxs("div",{className:"feature-item",children:[Se.jsx("span",{className:"feature-icon",children:"\ud83d\udcca"}),Se.jsx("span",{children:"Advanced Analytics"})]}),Se.jsxs("div",{className:"feature-item",children:[Se.jsx("span",{className:"feature-icon",children:"\u26a1"}),Se.jsx("span",{children:"Enhanced Rewards"})]}),Se.jsxs("div",{className:"feature-item",children:[Se.jsx("span",{className:"feature-icon",children:"\ud83d\udd27"}),Se.jsx("span",{children:"Advanced Tools"})]})]}),Se.jsx("div",{className:"portal-actions",children:Se.jsxs("a",{href:"https://stake.pixeljourney.xyz",target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary portal-btn",children:["Launch Staking Portal",Se.jsx("svg",{className:"external-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})})]})}),Se.jsxs("div",{className:"stats-bar",style:{display:"none"},children:[Se.jsxs("div",{className:"stat",children:[Se.jsx(ea,{src:"/img/tokens/pxj.png",alt:"PXJ"}),Se.jsx("span",{children:"PXJ Balance: 0"})]}),Se.jsxs("div",{className:"stat",children:[Se.jsx(ea,{src:"/img/tokens/wuf.png",alt:"WUF"}),Se.jsx("span",{children:"WUF Balance: 0"})]})]}),Se.jsxs("div",{className:"dashboard-row",children:[Se.jsxs("div",{className:"rewards-section",id:"rewardsSection",style:{display:c.pxj>0||c.wuf>0?"block":"none"},children:[Se.jsxs("div",{className:"rewards-header",children:[Se.jsx("h3",{children:"Claimable Rewards"}),Se.jsx("div",{className:"simulation-toggle",onClick:()=>S(!_),children:Se.jsx("div",{className:"toggle "+(_?"active":"")})})]}),Se.jsxs("div",{id:"claimableRewards",children:[c.pxj.toFixed(2)," PXJ + ",c.wuf.toFixed(2)," WUF"]}),Se.jsx("button",{className:"claim-btn",onClick:async()=>{if(e)if(0!==c.pxj||0!==c.wuf){r(!0);try{const t=await Xs.claimAllRewards(e,"pixeljourney");if(t.success){const t=`PXJ: ${c.pxj.toFixed(1)} | WUF: ${c.wuf.toFixed(1)}`;a("Success",`Rewards claimed successfully! ${t}`),d({pxj:0,wuf:0}),await U();const s=Date.now();localStorage.setItem(`lastClaimTime_${Gt.safeGetActor(e)}`,s.toString())}else n("Error",t.error||"Failed to claim rewards")}catch(t){De.error("Failed to claim rewards","Staking",t),n("Error","Failed to claim rewards. Please try again.")}finally{r(!1)}}else n("Error","No rewards available to claim");else n("Error","Please connect your wallet first")},disabled:i,children:i?"Claiming...":"Claim All Rewards"}),_&&Se.jsx("div",{className:"simulation-status",children:"\ud83d\udd34 SIMULATION MODE ACTIVE"})]}),Se.jsxs("div",{className:"quick-claim-section",children:[Se.jsx("h4",{children:"Quick Actions"}),Se.jsx("button",{className:"quick-claim-btn",onClick:()=>y(!0),children:"Open Crafting"})]})]}),m>0&&Se.jsxs("div",{className:"total-power",children:[Se.jsx("h3",{children:"Total Staking Power"}),Se.jsxs("div",{className:"power-value-container",children:[Se.jsx("div",{className:"power-value",children:m.toFixed(1)}),Se.jsx("div",{className:"power-rate",children:"/hr"})]}),Se.jsx("p",{children:"Combined rewards per hour from all staked NFTs"})]}),Se.jsxs("div",{className:"token-staking-section",children:[Se.jsxs("div",{className:"token-staking-header",children:[Se.jsx("h2",{children:"PXJ Token Staking"}),Se.jsx("p",{className:"section-description",children:"Stake your PXJ tokens in the pxjfarm1 to earn additional rewards"})]}),L?Se.jsxs("div",{className:"loading-state",children:[Se.jsx("div",{className:"loading-spinner"}),Se.jsx("p",{children:"Loading token staking data..."})]}):Se.jsxs("div",{className:"token-staking-content",children:[P&&Se.jsxs("div",{className:"token-farm-card",children:[Se.jsxs("div",{className:"farm-header",children:[Se.jsx("div",{className:"farm-icon",children:Se.jsx(ea,{src:"/img/tokens/pxj.png",alt:"PXJ"})}),Se.jsxs("div",{className:"farm-info",children:[Se.jsx("h3",{children:P.farm_name}),Se.jsx("p",{className:"farm-description",children:"PXJ Token Farm"})]})]}),Se.jsxs("div",{className:"farm-stats",children:[Se.jsxs("div",{className:"stat-item",children:[Se.jsx("div",{className:"stat-label",children:"Total Staked"}),Se.jsxs("div",{className:"stat-value",children:[P.total_staked.toLocaleString()," PXJ"]})]}),Se.jsxs("div",{className:"stat-item",children:[Se.jsx("div",{className:"stat-label",children:"Vesting Period"}),Se.jsxs("div",{className:"stat-value",children:[Math.floor(P.vesting_time/86400)," days"]})]}),Se.jsxs("div",{className:"stat-item",children:[Se.jsx("div",{className:"stat-label",children:"Your Balance"}),Se.jsxs("div",{className:"stat-value",children:[R.toLocaleString()," PXJ"]})]})]}),C&&Se.jsxs("div",{className:"user-position",children:[Se.jsx("h4",{children:"Your Staking Position"}),Se.jsxs("div",{className:"position-stats",children:[Se.jsxs("div",{className:"position-item",children:[Se.jsx("span",{className:"label",children:"Staked:"}),Se.jsxs("span",{className:"value",children:[C.staked_amount.toLocaleString()," PXJ"]})]}),Se.jsxs("div",{className:"position-item",children:[Se.jsx("span",{className:"label",children:"Pending Rewards:"}),Se.jsx("span",{className:"value",children:C.pending_rewards.length>0?C.pending_rewards.map(e=>`${e.amount.toFixed(4)} ${e.token}`).join(", "):"None"})]}),Se.jsxs("div",{className:"position-item",children:[Se.jsx("span",{className:"label",children:"Unlock Time:"}),Se.jsx("span",{className:"value",children:C.vesting_time>Date.now()/1e3?`${Math.ceil((C.vesting_time-Date.now()/1e3)/86400)} days remaining`:"Available now"})]})]})]}),Se.jsxs("div",{className:"token-actions",children:[Se.jsx("button",{className:"btn btn-primary",onClick:()=>q("stake"),disabled:!t||R<=0,children:"Stake PXJ"}),Se.jsx("button",{className:"btn btn-secondary",onClick:()=>q("unstake"),disabled:!t||!C||C.staked_amount<=0,children:"Unstake PXJ"}),Se.jsx("button",{className:"btn btn-accent",onClick:()=>q("claim"),disabled:!t||!C||0===C.pending_rewards.length,children:"Claim Rewards"})]})]}),!t&&Se.jsxs("div",{className:"connect-prompt",children:[Se.jsx("h3",{children:"Connect Your Wallet"}),Se.jsx("p",{children:"Connect your WAX wallet to view and manage your PXJ token staking"}),Se.jsx("button",{className:"btn btn-primary",onClick:s,children:"Connect Wallet"})]})]})]}),Se.jsxs("div",{className:"nft-staking-section",children:[Se.jsxs("div",{className:"nft-staking-header",children:[Se.jsx("h2",{children:"Pixel Journey NFT Staking"}),Se.jsx("p",{className:"section-description",children:"Stake your ingredients to earn PXJ and WUF rewards"})]}),u?Se.jsxs("div",{className:"loading-state",children:[Se.jsx("div",{className:"loading-spinner"}),Se.jsx("p",{children:"Loading NFT staking data..."})]}):Se.jsx("div",{className:"template-grid",children:l.map(e=>Se.jsxs("div",{className:"template-card",children:[Se.jsxs("div",{className:"template-image",style:{backgroundImage:`url(${e.image})`},children:[e.owned_count>0&&Se.jsx("div",{className:"asset-count",children:e.owned_count}),e.staked_count>0&&Se.jsxs("div",{className:"staked-count",children:["\u26a1",e.staked_count]}),Se.jsx("div",{className:"rarity-badge",style:{backgroundColor:V(e.rarity)},children:e.rarity}),e.image.includes("placeholder")?e.name:null]}),Se.jsxs("div",{className:"template-info",children:[Se.jsxs("div",{className:"template-header",children:[Se.jsx("div",{className:"template-name",children:e.name}),Se.jsxs("div",{className:"template-apr",children:[e.apr,"% APR"]})]}),Se.jsxs("div",{className:"template-stats",children:[Se.jsxs("div",{className:"stat-row",children:[Se.jsxs("div",{className:"stat-item",children:[Se.jsx("div",{className:"stat-value",children:e.rewards_per_hour.pxj}),Se.jsx("div",{className:"stat-label",children:"PXJ/hr"})]}),Se.jsxs("div",{className:"stat-item",children:[Se.jsx("div",{className:"stat-value",children:e.rewards_per_hour.wuf}),Se.jsx("div",{className:"stat-label",children:"WUF/hr"})]})]}),Se.jsx("div",{className:"staking-status",children:Se.jsxs("span",{children:["Staked: ",e.staked_count,"/",e.owned_count]})})]}),Se.jsx("div",{className:"template-actions",children:e.owned_count>0?Se.jsx("button",{className:"btn btn-primary",onClick:()=>(e=>{x(e),v(!0)})(e),children:"Manage Staking"}):Se.jsx("button",{className:"btn btn-secondary",onClick:()=>H(e),children:"Quick Buy"})})]})]},e.template_id))})]}),Se.jsxs("div",{className:"crafting-mechanics",children:[Se.jsx("h2",{children:"PXJ Lockup & Crafting Mechanics"}),Se.jsxs("div",{className:"mechanics-content",children:[Se.jsxs("div",{className:"mechanics-overview",children:[Se.jsx("h3",{children:"\ud83d\udd12 PXJ Lockup System"}),Se.jsx("p",{children:"Lock your PXJ tokens to participate in advanced crafting and upgrade systems. Each month, we distribute additional NFT rewards to collectors based on their PXJ lockup value."}),Se.jsx("div",{className:"leaderboard-info",children:Se.jsxs("div",{className:"leaderboard-card",children:[Se.jsxs("div",{className:"leaderboard-header",children:[Se.jsx("span",{className:"leaderboard-icon",children:"\ud83c\udfc6"}),Se.jsx("h4",{children:"Monthly Leaderboard Rewards"})]}),Se.jsxs("div",{className:"leaderboard-details",children:[Se.jsxs("p",{children:[Se.jsx("strong",{children:"Entry Requirement:"})," 25,000 PXJ locked per entry"]}),Se.jsx("p",{children:"Rewards distributed based on upgraded ingredient lockup value"}),Se.jsx("a",{href:"https://lb.pixeljourney.xyz/",target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary",children:"View Leaderboard"})]})]})})]}),Se.jsxs("div",{className:"crafting-process",children:[Se.jsx("h3",{children:"\u2697\ufe0f Ingredient Combination System"}),Se.jsxs("div",{className:"process-flow",children:[Se.jsxs("div",{className:"process-step",children:[Se.jsx("div",{className:"step-icon",children:"\ud83e\uddea"}),Se.jsx("h4",{children:"Primary Ingredients"}),Se.jsx("p",{children:"Common base materials that form the foundation of all crafting recipes"})]}),Se.jsx("div",{className:"process-arrow",children:"\u2192"}),Se.jsxs("div",{className:"process-step",children:[Se.jsx("div",{className:"step-icon",children:"\u26a1"}),Se.jsx("h4",{children:"Secondary Ingredients"}),Se.jsx("p",{children:"Rare catalysts that enhance and modify the properties of primary ingredients"})]}),Se.jsx("div",{className:"process-arrow",children:"\u2192"}),Se.jsxs("div",{className:"process-step",children:[Se.jsx("div",{className:"step-icon",children:"\ud83d\udc8e"}),Se.jsx("h4",{children:"Tertiary Ingredients"}),Se.jsx("p",{children:"Epic components that unlock powerful abilities and unique traits"})]}),Se.jsx("div",{className:"process-arrow",children:"\u2192"}),Se.jsxs("div",{className:"process-step",children:[Se.jsx("div",{className:"step-icon",children:"\ud83c\udf1f"}),Se.jsx("h4",{children:"Black Ingredients"}),Se.jsx("p",{children:"Legendary materials that create the most powerful and sought-after items"})]})]})]}),Se.jsx("div",{className:"learn-more-section",children:Se.jsxs("div",{className:"learn-more-card",children:[Se.jsx("h3",{children:"\ud83d\udcda Want to Learn More?"}),Se.jsx("p",{children:"Dive deeper into the Pixel Journey ecosystem with our comprehensive documentation covering all aspects of crafting, staking, and gameplay mechanics."}),Se.jsxs("div",{className:"learn-actions",children:[Se.jsx(z,{to:"/learn",className:"btn-primary",children:"Visit Learn Page"}),Se.jsx("a",{href:"https://docs.pixeljourney.xyz/season-1/recycling-and-crafting",target:"_blank",rel:"noopener noreferrer",className:"btn-secondary",children:"Journey Docs"})]})]})})]})]}),Se.jsx(Ga,{isOpen:g,onClose:()=>{v(!1),x(null)},templateId:f?.template_id||"",templateName:f?.name||"",action:"stake",onSuccess:()=>{B(),U()}}),Se.jsx(Ka,{isOpen:E,onClose:()=>{F(!1)},action:I,farmName:"pxjfarm1",onSuccess:()=>{X(),U()}}),Se.jsx($s,{isOpen:j,onClose:()=>y(!1),ingredient:null}),Se.jsx(en,{template:w,isOpen:b,onClose:J})]}):Se.jsxs("div",{className:"staking-container",children:[Se.jsxs("div",{className:"connect-wallet-prompt",children:[Se.jsx("h2",{children:"Connect Your Wallet"}),Se.jsx("p",{children:"Connect your WAX wallet to access NFT staking features"}),Se.jsx("button",{className:"btn btn-primary",onClick:s,children:"Connect Wallet"})]}),Se.jsxs("div",{className:"nft-staking-section",children:[Se.jsx("h2",{children:"Pixel Journey NFT Staking"}),Se.jsx("p",{className:"section-description",children:"Stake your Pixel Journey ingredients to earn PXJ and WUF rewards"}),Se.jsx("div",{className:"template-grid",children:D.map(e=>Se.jsxs("div",{className:"template-card",children:[Se.jsxs("div",{className:"template-image",children:[Se.jsx(Qs,{src:e.image,alt:e.name,width:160,height:160,fallbackText:e.name}),Se.jsx("div",{className:"rarity-badge",style:{backgroundColor:V(e.rarity)},children:e.rarity})]}),Se.jsxs("div",{className:"template-info",children:[Se.jsxs("div",{className:"template-header",children:[Se.jsx("div",{className:"template-name",children:e.name}),Se.jsxs("div",{className:"template-apr",children:[e.apr,"% APR"]})]}),Se.jsxs("div",{className:"template-stats",children:[Se.jsxs("div",{className:"stat-row",children:[Se.jsxs("div",{className:"stat-item",children:[Se.jsx("div",{className:"stat-value",children:e.rewards_per_hour.pxj}),Se.jsx("div",{className:"stat-label",children:"PXJ/hr"})]}),Se.jsxs("div",{className:"stat-item",children:[Se.jsx("div",{className:"stat-value",children:e.rewards_per_hour.wuf}),Se.jsx("div",{className:"stat-label",children:"WUF/hr"})]})]}),Se.jsx("div",{className:"staking-status",children:Se.jsx("span",{children:"Connect wallet to view your assets"})})]}),Se.jsx("div",{className:"template-actions",children:Se.jsx("button",{className:"btn btn-secondary",onClick:()=>H(e),children:"Quick Buy"})})]})]},e.template_id))})]}),Se.jsx(en,{template:w,isOpen:b,onClose:J})]})};const sn=new class{constructor(){M(this,"baseUrl","https://wax-api.hivebp.io/api")}async getAttributeFilters(e,t){try{const s=new URL(`${this.baseUrl}/filter-attributes/${e}`);t&&s.searchParams.append("schema",t);const a=await fetch(s.toString());if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(s){return De.error("Error fetching attribute filters from API, will use fallback","AttributeService",s),{}}}extractAttributesFromNFTs(e,t){const s=new Map;(t?e.filter(e=>e.schema===t):e).forEach(e=>{e.traits&&Object.entries(e.traits).forEach(([e,t])=>{if(null!=t){s.has(e)||s.set(e,new Map);const a=s.get(e),n=String(t),i=a.get(n)||0;a.set(n,i+1)}})});const a={};return s.forEach((e,t)=>{const s=[];e.forEach((e,t)=>{s.push({value:t,numMinted:e,maxSupply:e})}),s.sort((e,t)=>t.numMinted-e.numMinted),a[t]={values:s}}),a}formatAttributesForQuery(e){const t=[];return Object.entries(e).forEach(([e,s])=>{s.forEach(s=>{t.push(`${e}:${encodeURIComponent(s)}`)})}),t.join("&")}parseAttributeQuery(e){const t={};if(!e)return t;return e.split("&").forEach(e=>{const[s,a]=e.split(":");if(s&&a){const e=decodeURIComponent(a);t[s]||(t[s]=[]),t[s].push(e)}}),t}},an=({isOpen:e,onClose:t,onSuccess:s})=>{const{account:a}=Ds(),{showSuccess:n,showError:i}=xt(),[r,l]=O.useState([]),[o,c]=O.useState([]),[d,u]=O.useState(new Set),[h,m]=O.useState(null),[p,f]=O.useState(!1),[x,g]=O.useState(""),[v,j]=O.useState(1),[y,b]=O.useState(0),N=O.useCallback(async(e=1)=>{if(a){f(!0),g("");try{const t=12*(e-1),s=await Bs.getUserPixalAssets(a,12,t);l(s),b(s.length)}catch(t){De.error("Failed to load user Pixal assets","TokenizeFromInventoryModal.loadUserAssets",t,{account:a,page:e}),g("Failed to load your Pixal assets. Please try again."),i("Failed to load assets")}finally{f(!1)}}},[a,12,i]),w=O.useCallback(async()=>{try{const e=await Bs.getFeeTokens();c(e)}catch(e){De.error("Failed to load fee tokens","TokenizeFromInventoryModal.loadFeeTokens",e),i("Failed to load fee tokens")}},[i]);O.useEffect(()=>{e&&a&&(N(v),w())},[e,a,v,N,w]);const k=e=>{j(e),u(new Set)};if(!e)return null;const _=Math.ceil(y/12),S=d.size;return U.createPortal(Se.jsx("div",{className:"modal-overlay",onClick:t,children:Se.jsxs("div",{className:"tokenize-inventory-modal",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsx("h2",{children:"Tokenize from Inventory"}),Se.jsx("button",{className:"close-button",onClick:t,children:"\xd7"})]}),Se.jsxs("div",{className:"modal-body",children:[x&&Se.jsx("div",{className:"error-message",children:x}),Se.jsxs("div",{className:"selection-controls",children:[Se.jsx("div",{className:"selection-info",children:Se.jsxs("span",{children:[S," asset",1!==S?"s":""," selected"]})}),Se.jsxs("div",{className:"selection-actions",children:[Se.jsx("button",{className:"select-all-btn",onClick:()=>{const e=new Set(r.map(e=>e.assetId.toString()));u(e)},disabled:p,children:"Select All on Page"}),Se.jsx("button",{className:"clear-all-btn",onClick:()=>{u(new Set)},disabled:p||0===S,children:"Clear All"})]})]}),Se.jsxs("div",{className:"assets-section",children:[Se.jsx("h3",{children:"Your Pixal Assets"}),p?Se.jsxs("div",{className:"loading-spinner",children:[Se.jsx("div",{className:"spinner"}),Se.jsx("p",{children:"Loading your assets..."})]}):Se.jsx("div",{className:"assets-grid",children:r.map(e=>Se.jsxs("div",{className:"asset-card "+(d.has(e.assetId.toString())?"selected":""),onClick:()=>(e=>{const t=new Set(d);t.has(e)?t.delete(e):t.add(e),u(t)})(e.assetId.toString()),children:[Se.jsxs("div",{className:"asset-image-container",children:[Se.jsx(Qt,{imageUrl:e.image,alt:e.name,className:"asset-image"}),d.has(e.assetId.toString())&&Se.jsx("div",{className:"selection-indicator",children:Se.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})})})]}),Se.jsxs("div",{className:"asset-info",children:[Se.jsx("h4",{className:"asset-name",children:e.name}),Se.jsxs("p",{className:"asset-id",children:["#",e.assetId.toString()]})]})]},e.assetId))}),_>1&&Se.jsxs("div",{className:"pagination",children:[Se.jsx("button",{className:"pagination-btn",onClick:()=>k(v-1),disabled:1===v||p,children:"Previous"}),Se.jsxs("span",{className:"pagination-info",children:["Page ",v," of ",_]}),Se.jsx("button",{className:"pagination-btn",onClick:()=>k(v+1),disabled:v===_||p,children:"Next"})]})]}),S>0&&Se.jsxs("div",{className:"fee-selection",children:[Se.jsx("h3",{children:"Select Fee Token"}),Se.jsx("div",{className:"fee-tokens-grid",children:o.map((e,t)=>Se.jsxs("div",{className:"fee-option "+(h===e?"selected":""),onClick:()=>m(e),children:[Se.jsxs("div",{className:"fee-info",children:[Se.jsx("span",{className:"fee-amount",children:e.fee}),Se.jsxs("span",{className:"fee-contract",children:["(",e.contract,")"]})]}),e.wax_value&&"WAX"!==e.symbol&&Se.jsxs("div",{className:"wax-equivalent",children:["\u2248 ",parseFloat(e.wax_value).toFixed(4)," WAX"]})]},t))})]})]}),Se.jsxs("div",{className:"modal-footer",children:[Se.jsx("button",{className:"cancel-button",onClick:t,disabled:p,children:"Cancel"}),Se.jsx("button",{className:"tokenize-button",onClick:async()=>{if(a&&0!==d.size&&h){f(!0);try{const e=Array.from(d),a=await Bs.executeTokenization(e,h);n(`Tokenization transaction prepared for ${e.length} asset(s)`),De.info("Tokenization transaction prepared","TokenizeFromInventoryModal.executeTokenization",{assetIds:e,feeToken:h.symbol,transaction:a}),u(new Set),m(null),t(),s&&s()}catch(e){De.error("Tokenization execution failed","TokenizeFromInventoryModal.executeTokenization",e,{assetIds:Array.from(d),feeToken:h?.symbol}),i("Tokenization failed. Please try again.")}finally{f(!1)}}else i("Please select assets and a fee token")},disabled:p||0===S||!h,children:p?"Processing...":`Tokenize ${S} Asset${1!==S?"s":""}`})]})]})}),document.body)},nn=({asset:e,isOpen:t,onClose:s,onRedeem:a})=>{const{account:n}=Ds(),{showError:i}=xt(),[r,l]=O.useState([]),[o,c]=O.useState(null),[d,u]=O.useState(!1),[h,m]=O.useState(!1),p=async()=>{try{const e=await Bs.getFeeTokens();l(e)}catch(e){De.error("Failed to load fee tokens","AssetDetailModal.loadFeeTokens",e),i("Failed to load fee tokens")}};O.useEffect(()=>{t&&e&&p()},[t,e,p]);return t&&e?Se.jsx("div",{className:"modal-overlay",onClick:s,children:Se.jsxs("div",{className:"asset-detail-modal",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsx("h2",{children:"Asset Details"}),Se.jsx("button",{className:"close-button",onClick:s,children:"\xd7"})]}),Se.jsxs("div",{className:"modal-body",children:[Se.jsxs("div",{className:"asset-main-info",children:[Se.jsx("div",{className:"asset-image-section",children:Se.jsx(Qt,{imageUrl:e.image,alt:e.name,className:"asset-image"})}),Se.jsxs("div",{className:"asset-info-section",children:[Se.jsx("h3",{className:"asset-name",children:e.name}),Se.jsxs("div",{className:"asset-metadata",children:[Se.jsxs("div",{className:"metadata-item",children:[Se.jsx("span",{className:"label",children:"Asset ID:"}),Se.jsx("span",{className:"value",children:e.assetId})]}),Se.jsxs("div",{className:"metadata-item",children:[Se.jsx("span",{className:"label",children:"Collection:"}),Se.jsx("span",{className:"value",children:e.collection?.displayName||e.collection?.collectionName})]}),Se.jsxs("div",{className:"metadata-item",children:[Se.jsx("span",{className:"label",children:"Schema:"}),Se.jsx("span",{className:"value",children:e.schema})]}),Se.jsxs("div",{className:"metadata-item",children:[Se.jsx("span",{className:"label",children:"Mint #:"}),Se.jsx("span",{className:"value",children:e.mint})]}),Se.jsxs("div",{className:"metadata-item",children:[Se.jsx("span",{className:"label",children:"Template ID:"}),Se.jsx("span",{className:"value",children:e.template?.templateId})]}),Se.jsxs("div",{className:"metadata-item",children:[Se.jsx("span",{className:"label",children:"WPIXAL Amount:"}),Se.jsxs("span",{className:"value highlight",children:[e.rwax.redeemAmount.toFixed(8)," WPIXAL"]})]}),e.rarityScore&&Se.jsxs("div",{className:"metadata-item",children:[Se.jsx("span",{className:"label",children:"Rarity Score:"}),Se.jsx("span",{className:"value highlight",children:e.rarityScore.toFixed(2)})]}),e.attributesFloor&&Se.jsxs("div",{className:"metadata-item",children:[Se.jsx("span",{className:"label",children:"Attributes Floor:"}),Se.jsxs("span",{className:"value highlight",children:[e.attributesFloor.toFixed(8)," WPIXAL"]})]}),Se.jsxs("div",{className:"metadata-item",children:[Se.jsx("span",{className:"label",children:"Contract:"}),Se.jsx("span",{className:"value",children:e.contract})]}),Se.jsxs("div",{className:"metadata-item",children:[Se.jsx("span",{className:"label",children:"Owner:"}),Se.jsx("span",{className:"value",children:e.owner})]})]}),e.immutableData&&e.immutableData.length>0&&Se.jsxs("div",{className:"asset-attributes",children:[Se.jsx("h4",{children:"NFT Traits"}),Se.jsx("div",{className:"attributes-grid",children:e.immutableData.filter(({key:e,value:t})=>!["image","img","video","audio","model","description","name"].includes(e.toLowerCase())&&t&&null!==t[1]&&void 0!==t[1]&&""!==t[1]).map(({key:e,value:t})=>{const s=e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),a=Array.isArray(t)?t[1]:t;return Se.jsxs("div",{className:"trait-item",children:[Se.jsx("div",{className:"trait-label",children:s}),Se.jsx("div",{className:"trait-value",children:String(a)})]},e)})}),(()=>{const t=e.immutableData.find(e=>"description"===e.key.toLowerCase()),s=t?Array.isArray(t.value)?t.value[1]:t.value:null;return s&&String(s).trim()?Se.jsxs("div",{className:"asset-description",children:[Se.jsx("h4",{children:"Description"}),Se.jsx("p",{children:String(s)})]}):null})()]})]})]}),n&&Se.jsx("div",{className:"redemption-section",children:h?Se.jsxs("div",{className:"redeem-form",children:[Se.jsx("h4",{children:"Redeem Asset"}),Se.jsxs("p",{className:"redeem-description",children:["Redeem this tokenized asset by paying ",e.rwax.redeemAmount.toFixed(8)," WPIXAL plus a fee."]}),Se.jsxs("div",{className:"fee-selection",children:[Se.jsx("h5",{children:"Select Fee Token:"}),Se.jsx("div",{className:"fee-options",children:r.map((e,t)=>Se.jsxs("div",{className:"fee-option "+(o===e?"selected":""),onClick:()=>c(e),children:[Se.jsxs("div",{className:"fee-info",children:[Se.jsx("span",{className:"fee-amount",children:e.fee}),Se.jsxs("span",{className:"fee-contract",children:["(",e.contract,")"]})]}),e.wax_value&&"WAX"!==e.symbol&&Se.jsxs("div",{className:"wax-equivalent",children:["\u2248 ",parseFloat(e.wax_value).toFixed(4)," WAX"]})]},t))})]}),Se.jsxs("div",{className:"redeem-actions",children:[Se.jsx("button",{className:"cancel-redeem-button",onClick:()=>m(!1),children:"Cancel"}),Se.jsx("button",{className:"confirm-redeem-button",onClick:async()=>{if(e&&o&&n){u(!0);try{a&&await a(e,o),s()}catch(t){De.error("Asset redemption failed","AssetDetailModal.handleRedeem",t,{assetId:e?.assetId,feeToken:o?.symbol}),i("Redemption failed. Please try again.")}finally{u(!1)}}else i("Please select a fee token")},disabled:!o||d,children:d?"Processing...":"Confirm Redemption"})]})]}):Se.jsx("button",{className:"show-redeem-button",onClick:()=>m(!0),children:"Redeem this Asset"})}),!n&&Se.jsx("div",{className:"wallet-connect-message",children:Se.jsx("p",{children:"Connect your wallet to redeem this asset"})})]})]})}):null},rn=({limit:e=12,refreshInterval:t=3e4})=>{const[s,a]=O.useState([]),[n,i]=O.useState(!0),[r,l]=O.useState(null),[o,c]=O.useState(null),[d,u]=O.useState(1),[h,m]=O.useState(!0),[p,f]=O.useState(!1),x=O.useCallback(async(t=1,s=!1)=>{try{s?f(!0):(l(null),i(!0));const n=await dt.getRWAXTransfers({limit:e,page:t,order:"desc"});if(!n.success)throw new Error("Failed to fetch RWAX transactions");{const t=n.data;a(s?e=>[...e,...t]:t),m(t.length===e),c(new Date)}}catch(n){De.error("Error fetching RWAX transactions","RWAXLiveTransactions",n),s||l("Failed to load RWAX transactions")}finally{i(!1),f(!1)}},[e]);O.useEffect(()=>{x();const e=setInterval(()=>{x(1,!1),u(1)},t);return()=>clearInterval(e)},[e,t,x]);const g=e=>{try{const t=new Date(e);if(isNaN(t.getTime()))return"Unknown";const s=(new Date).getTime()-t.getTime(),a=Math.floor(s/6e4);return a<0||a<1?"Just now":a<60?`${a}m ago`:a<1440?`${Math.floor(a/60)}h ago`:`${Math.floor(a/1440)}d ago`}catch(t){return"Unknown"}},v=e=>"tokenization"===e?"Tokenized":"Redeemed";return n&&0===s.length?Se.jsxs("div",{className:"rwax-live-transactions",children:[Se.jsxs("div",{className:"rwax-live-transactions-header",children:[Se.jsx("h3",{children:"Live RWAX Transactions"}),Se.jsx("div",{className:"loading-spinner"})]}),Se.jsx("div",{className:"transactions-loading",children:Se.jsx("p",{children:"Loading RWAX transactions..."})})]}):r&&0===s.length?Se.jsxs("div",{className:"rwax-live-transactions",children:[Se.jsxs("div",{className:"rwax-live-transactions-header",children:[Se.jsx("h3",{children:"Live RWAX Transactions"}),Se.jsx("button",{onClick:()=>x(),className:"refresh-button",children:"\ud83d\udd04"})]}),Se.jsxs("div",{className:"transactions-error",children:[Se.jsx("p",{children:r}),Se.jsx("button",{onClick:()=>x(),className:"retry-button",children:"Try Again"})]})]}):Se.jsxs("div",{className:"rwax-live-transactions",children:[Se.jsxs("div",{className:"rwax-live-transactions-header",children:[Se.jsx("h3",{children:"Live RWAX Transactions"}),Se.jsxs("div",{className:"header-actions",children:[o&&Se.jsxs("span",{className:"last-update",children:["Updated ",g(o.toISOString())]}),Se.jsx("button",{onClick:()=>{x(1,!1),u(1)},className:"refresh-button",disabled:n,children:n?"\u23f3":"\ud83d\udd04"})]})]}),Se.jsx("div",{className:"rwax-transactions-grid",children:0===s.length?Se.jsx("div",{className:"no-transactions",children:Se.jsx("p",{children:"No recent RWAX transactions found"})}):s.map((e,t)=>{return Se.jsxs("div",{className:"rwax-transaction-card",children:[Se.jsxs("div",{className:"transaction-header",children:[Se.jsxs("div",{className:"transaction-type",children:[Se.jsx("span",{className:"transaction-icon",children:(s=e.type,"tokenization"===s?"\ud83d\udd04":"\ud83c\udf81")}),Se.jsx("span",{className:`transaction-label ${e.type}`,children:v(e.type)})]}),Se.jsx("span",{className:"transaction-time",children:g(e.created_at_time)})]}),Se.jsxs("div",{className:"transaction-assets",children:[e.assets.slice(0,1).map(e=>{return Se.jsxs("div",{className:"asset-preview",children:[Se.jsx(Qt,{imageUrl:(t=e.data?.img,t?t.startsWith("Qm")||t.startsWith("baf")?`https://ipfs.io/ipfs/${t}`:t.startsWith("/")?`https://ipfs.io/ipfs${t}`:t:"/placeholder-nft.png"),alt:e.name||"Unknown Asset",className:"asset-image"}),Se.jsxs("div",{className:"asset-info",children:[Se.jsx("h4",{className:"asset-name",children:e.name||"Unknown Asset"}),Se.jsxs("p",{className:"asset-mint",children:["#",e.template_mint||e.asset_id||"N/A"]})]})]},e.asset_id);var t}),e.assets.length>1&&Se.jsxs("div",{className:"additional-assets",children:["+",e.assets.length-1," more"]})]}),Se.jsxs("div",{className:"transaction-details",children:[Se.jsxs("div",{className:"transaction-accounts",children:[Se.jsxs("span",{className:"account from",children:["From: ",e.sender_name.length>8?`${e.sender_name.slice(0,6)}...`:e.sender_name]}),Se.jsxs("span",{className:"account to",children:["To: ",e.recipient_name.length>8?`${e.recipient_name.slice(0,6)}...`:e.recipient_name]})]}),Se.jsx("div",{className:"transaction-actions",children:Se.jsx("button",{className:"view-tx-button",onClick:()=>window.open(`https://waxblock.io/transaction/${e.txid}`,"_blank"),title:"View on WAX Block Explorer",children:"\ud83d\udd17"})})]})]},`${e.txid}-${e.transfer_id}-${t}`);var s})}),h&&Se.jsx("div",{className:"load-more-section",children:Se.jsx("button",{onClick:async()=>{if(!p&&h){const e=d+1;u(e),await x(e,!0)}},className:"load-more-button",disabled:p,children:p?Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"loading-spinner small"}),"Loading more..."]}):"Load More Transactions"})})]})},ln={Background:["Nefty Spot","Blue Sky","Forest","Desert","Ocean","Mountain","City","Space","Sunset","Rainbow"],Body:["Pink-Blue Overalls","Red Shirt","Blue Hoodie","Green Jacket","Yellow Dress","Purple Suit","Orange Tank","Black Tee","White Polo","Gray Sweater"],Eyes:["Kawaii Green","Brown","Blue","Hazel","Gray","Amber","Violet","Red","Black","Gold"],Head:["Grey","Black Hair","Brown Hair","Blonde Hair","Red Hair","Blue Hair","Green Hair","Purple Hair","Bald","Hat"]},on=({onFiltersChange:e,initialFilters:t={}})=>{const[s,a]=O.useState({});O.useEffect(()=>{const e={};Object.keys(ln).forEach(s=>{e[s]={isExpanded:!1,selectedValues:new Set(t[s]||[]),searchTerm:""}}),a(e)},[]);const n=O.useCallback((e,t)=>{a(s=>{const a={...s};a[e]||(a[e]={isExpanded:!1,selectedValues:new Set,searchTerm:""});const n=new Set(a[e].selectedValues);return n.has(t)?n.delete(t):n.add(t),a[e]={...a[e],selectedValues:n},a})},[]),i=O.useCallback(e=>{a(t=>({...t,[e]:{...t[e],isExpanded:!t[e]?.isExpanded}}))},[]),r=O.useCallback((e,t)=>{a(s=>({...s,[e]:{...s[e],searchTerm:t}}))},[]),l=O.useCallback(()=>{const e={};Object.keys(ln).forEach(t=>{e[t]={isExpanded:!1,selectedValues:new Set,searchTerm:""}}),a(e)},[]);O.useEffect(()=>{const t={};Object.entries(s).forEach(([e,s])=>{s.selectedValues.size>0&&(t[e]=Array.from(s.selectedValues))}),e(t)},[s,e]);const o=Object.values(s).reduce((e,t)=>e+t.selectedValues.size,0);return Se.jsxs("div",{className:"attribute-filter-container",children:[Se.jsxs("div",{className:"filter-header",children:[Se.jsx("h3",{children:"Pixal Traits"}),o>0&&Se.jsxs("button",{className:"clear-all-button",onClick:l,children:["Clear All (",o,")"]})]}),Object.entries(ln).map(([e])=>{const t=s[e],a=(e=>{const t=s[e]?.searchTerm?.toLowerCase()||"",a=ln[e]||[];return t?a.filter(e=>e.toLowerCase().includes(t)):a})(e),l=t?.selectedValues.size||0;return Se.jsxs("div",{className:"filter-group",children:[Se.jsxs("div",{className:"filter-group-header",onClick:()=>i(e),children:[Se.jsxs("div",{className:"attribute-name",children:[e,l>0&&Se.jsx("span",{className:"selected-count",children:l})]}),Se.jsx("div",{className:"expand-icon "+(t?.isExpanded?"expanded":""),children:"\u25bc"})]}),t?.isExpanded&&Se.jsxs("div",{className:"filter-group-content",children:[Se.jsx("input",{type:"text",placeholder:`Search ${e.toLowerCase()}...`,value:t.searchTerm,onChange:t=>r(e,t.target.value),className:"attribute-search"}),Se.jsx("div",{className:"attribute-values",children:a.length>0?a.map(s=>{const a=t.selectedValues.has(s);return Se.jsx("div",{className:"attribute-value-item "+(a?"selected":""),onClick:()=>n(e,s),children:Se.jsx("span",{className:"attribute-value-text",children:s})},s)}):Se.jsxs("div",{className:"no-results",children:["No ",e.toLowerCase(),' found matching "',t.searchTerm,'"']})})]})]},e)})]})},cn=()=>{const e=B(),{account:t,session:s}=Ds(),{showSuccess:a,showError:n}=xt(),[i,r]=O.useState("redeem"),[l,o]=O.useState([]),[c,d]=O.useState([]),[u,h]=O.useState(!1),[m,p]=O.useState(null),[f,x]=O.useState(!1),[g,v]=O.useState(!1),[j,y]=O.useState(!1),[b,N]=O.useState(!1),[w,k]=O.useState(!1),[_,S]=O.useState(null),[C,A]=O.useState(null),[P,T]=O.useState(null),[E,F]=O.useState("confirm"),[I,$]=O.useState(""),[L,M]=O.useState(new Set),[R,W]=O.useState(!1),[D,z]=O.useState(null),[U,X]=O.useState(!1),[q,H]=O.useState(0),[J,V]=O.useState(0),[G,Y]=O.useState(0),[K,Q]=O.useState(!1),[Z,ee]=O.useState({min:"",max:""}),[te,se]=O.useState(0),[ae,ne]=O.useState(!1),[ie]=O.useState(null),[re,le]=O.useState(10),[oe,ce]=O.useState(!1),[de,ue]=O.useState(null),[he,me]=O.useState(!1),[pe,fe]=O.useState(""),[xe,ge]=O.useState("0.0000 WAX"),[ve,je]=O.useState(1),[ye,be]=O.useState(!0),[Ne,we]=O.useState(!1),[ke,_e]=O.useState("rarity_score_desc"),[Ce,Ae]=O.useState(""),[Pe,Te]=O.useState({}),[Ee,Fe]=O.useState(""),[Ie,$e]=O.useState(new Set),[Le,Me]=O.useState(new Map),Re=O.useMemo(()=>{if(!Ee.trim())return l;const e=Ee.toLowerCase();return l.filter(t=>{if(t.name?.toLowerCase().includes(e))return!0;if(t.collection?.collectionName?.toLowerCase().includes(e)||t.collection?.displayName?.toLowerCase().includes(e))return!0;if(t.template?.templateId?.toString().includes(e))return!0;if(t.immutableData)for(const s of t.immutableData)if(s.key?.toLowerCase().includes(e)||s.value?.[1]?.toString().toLowerCase().includes(e))return!0;if(t.mutableData)for(const s of t.mutableData)if(s.key?.toLowerCase().includes(e)||s.value?.[1]?.toString().toLowerCase().includes(e))return!0;return!1})},[l,Ee]),We=O.useCallback(async(e=1,t=!1)=>{De.debug("Loading tokenized assets","RWax.loadTokenizedAssets",{page:e,append:t,sortBy:ke,attributeFilters:Ce});try{t?we(!0):(h(!0),p(null));const s=36,a=(e-1)*s;De.debug("Calling rwaxService.getTokenizedAssets","RWax.loadTokenizedAssets",{limit:s,offset:a,sortBy:ke,attributeFilters:Ce});const n=await Bs.getTokenizedAssets(s,a,ke,Ce);De.info("Received tokenized assets","RWax.loadTokenizedAssets",{count:n.length}),o(t?e=>[...e,...n]:n),be(n.length===s)}catch(s){De.error("Error loading tokenized assets","RWax",s),t||p("Failed to load tokenized assets. Please try again later.")}finally{h(!1),we(!1)}},[ke,Ce]),Oe=O.useCallback(async()=>{const e=ve+1;await We(e,!0),je(e)},[ve,We]),ze=O.useCallback(e=>{_e(e),je(1)},[]),Be=O.useCallback(e=>{Te(e);const t=sn.formatAttributesForQuery(e);Ae(t),je(1)},[]);O.useEffect(()=>{const e=setTimeout(()=>{"redeem"===i&&We(1,!1)},300);return()=>clearTimeout(e)},[ke,Ce,i]);const Ue=O.useCallback(async()=>{try{const e=await Bs.getFeeTokens();d(e)}catch(e){De.error("Error loading fee tokens","RWax",e)}},[]),Xe=O.useCallback(async()=>{try{const[e,t,s]=await Promise.all([Ye.getWpixalPriceWAX(),Ye.getWpixalPriceUSD(),Ye.getWaxPriceUSD()]);V(e),Y(t),se(s)}catch(e){De.error("Error loading price data","RWax",e),V(.0177),Y(9e-4),se(.051),n("Price Loading Error","Unable to fetch current prices. Using fallback values.")}},[n]),qe=O.useCallback(async()=>{if(t)try{const e=await mt.getWaxBalance(t);ge(e)}catch(e){De.error("Error loading WAX balance","RWax",e),ge("0.0000 WAX")}else ge("0.0000 WAX")},[t]);O.useEffect(()=>{Ue(),Xe(),qe(),"redeem"===i&&We(1,!1)},[i,We,Ue,Xe,qe]),O.useEffect(()=>{const e=setInterval(Xe,3e5);return()=>clearInterval(e)},[Xe]);const He=()=>{k(!1),F("confirm"),$(""),h(!1),S(null)},Je=e=>{A(e),N(!0)},Ve=O.useCallback(()=>{Q(e=>!e)},[]),Ge=O.useCallback(()=>{Q(!1)},[]),Ke=e=>"rwax"in e&&e.rwax&&"redeemAmount"in e.rwax;O.useEffect(()=>{const e=localStorage.getItem("rwax-watchlist");if(e)try{const t=JSON.parse(e);$e(new Set(t))}catch(t){De.error("Error loading watchlist","RWax",t)}},[]);const Qe=O.useCallback((e,t)=>{const s=parseFloat(e.rwax.redeemAmount.toString()),n={assetId:e.assetId.toString(),assetName:e.name,originalPrice:s,alertPercentage:t,createdAt:Date.now()},i=new Map(Le);i.set(e.assetId.toString(),n),Me(i);const r=Array.from(i.entries());localStorage.setItem("rwax-price-alerts",JSON.stringify(r)),a(`Price alert set for ${e.name} at ${t}% change`)},[Le,a]),Ze=O.useCallback(e=>{const t=new Map(Le);t.delete(e),Me(t);const s=Array.from(t.entries());localStorage.setItem("rwax-price-alerts",JSON.stringify(s)),a("Price alert removed")},[Le,a]),et=O.useCallback(()=>{0!==Le.size&&0!==l.length&&Le.forEach((e,t)=>{const s=l.find(e=>e.assetId.toString()===t);if(!s)return n(`Alert: ${e.assetName} is no longer available on RWAX!`),void Ze(t);const i=(parseFloat(s.rwax.redeemAmount.toString())-e.originalPrice)/e.originalPrice*100;if(Math.abs(i)>=e.alertPercentage){const t=i>0?"increased":"decreased";a(`Price Alert: ${e.assetName} has ${t} by ${Math.abs(i).toFixed(2)}%!`),Qe(s,e.alertPercentage)}})},[Le,l,n,a,Ze,Qe]);return O.useEffect(()=>{const e=localStorage.getItem("rwax-price-alerts");if(e)try{const t=JSON.parse(e);Me(new Map(t))}catch(t){De.error("Error loading price alerts","RWax",t)}},[]),O.useEffect(()=>{et()},[et]),Se.jsxs("div",{className:"rwax-container",children:[Se.jsxs("div",{className:"rwax-header",children:[Se.jsxs("div",{className:"rwax-header-top",children:[Se.jsxs("button",{className:"rwax-back-button",onClick:()=>e("/marketplace"),children:[Se.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Se.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),"Back to Marketplace"]}),Se.jsx("div",{className:"header-actions"})]}),Se.jsx("h1",{children:"R-WAX Tokenization"}),Se.jsx("p",{children:"Tokenize your Pixals to WPIXAL or redeem WPIXAL back to Pixals"}),Se.jsxs("p",{style:{marginTop:"16px",fontSize:"0.9rem",color:"var(--text-secondary)"},children:["Visit the ",Se.jsx("a",{href:"https://r-wax.io/token/pixeljourney/WPIXAL",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--primary-purple)",textDecoration:"none",fontWeight:"500"},onMouseEnter:e=>e.target.style.textDecoration="underline",onMouseLeave:e=>e.target.style.textDecoration="none",children:"official RWAX website"})," for full WPIXAL markets and trading features."]})]}),Se.jsxs("div",{className:"rwax-tabs",children:[Se.jsx("button",{className:"tab-button "+("redeem"===i?"active":""),onClick:()=>r("redeem"),children:"WPIXAL to Pixal PFP"}),Se.jsx("button",{className:"tab-button "+("other-collections"===i?"active":""),onClick:()=>r("other-collections"),children:"Other RWAX Collections"})]}),m&&Se.jsx("div",{className:"error-message",children:m}),Se.jsx("div",{className:"rwax-content",children:"redeem"===i?Se.jsxs("div",{className:"redeem-section",children:[Se.jsxs("div",{className:"actions-and-controls-container",children:[Se.jsxs("div",{className:"left-actions",children:[Se.jsx("div",{className:"action-group",children:Se.jsx("button",{className:"inventory-tokenize-button",onClick:()=>y(!0),children:"Tokenize from Inventory"})}),Se.jsxs("div",{className:"action-group",children:[Se.jsxs("button",{className:"wpixal-alert-button "+(localStorage.getItem("wpixalPriceAlert")?"has-alert":""),onClick:()=>me(!0),children:[Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),Se.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),"WPIXAL Price Alert"]}),localStorage.getItem("wpixalPriceAlert")&&Se.jsxs("div",{className:"current-alert-display",children:[Se.jsxs("span",{children:["Current Alert: ",localStorage.getItem("wpixalPriceAlert")," WAX"]}),Se.jsx("button",{className:"remove-alert",onClick:e=>{e.stopPropagation(),localStorage.removeItem("wpixalPriceAlert"),fe("")},title:"Remove Alert",children:"\xd7"})]})]})]}),Se.jsxs("div",{className:"sorting-and-filter-controls",children:[Se.jsx("div",{className:"search-bar-container",children:Se.jsxs("div",{className:"search-input-container",children:[Se.jsx("svg",{className:"search-icon",viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}),Se.jsx("input",{type:"text",placeholder:"Search R-WAX assets...",value:Ee,onChange:e=>Fe(e.target.value),className:"search-input"}),Ee&&Se.jsx("button",{onClick:()=>Fe(""),className:"clear-search","aria-label":"Clear search",children:Se.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]})}),Se.jsxs("div",{className:"sorting-controls",children:[Se.jsx("label",{htmlFor:"sort-select",children:"Sort by:"}),Se.jsxs("select",{id:"sort-select",value:ke,onChange:e=>ze(e.target.value),className:"sort-dropdown",children:[Se.jsx("option",{value:"date_desc",children:"Date (Newest First)"}),Se.jsx("option",{value:"date_asc",children:"Date (Oldest First)"}),Se.jsx("option",{value:"price_desc",children:"Price (High to Low)"}),Se.jsx("option",{value:"price_asc",children:"Price (Low to High)"}),Se.jsx("option",{value:"floor_desc",children:"Floor Price (High to Low)"}),Se.jsx("option",{value:"floor_asc",children:"Floor Price (Low to High)"}),Se.jsx("option",{value:"mint_desc",children:"Mint Number (High to Low)"}),Se.jsx("option",{value:"mint_asc",children:"Mint Number (Low to High)"}),Se.jsx("option",{value:"rarity_score_desc",children:"Rarity Score (High to Low)"}),Se.jsx("option",{value:"rarity_score_asc",children:"Rarity Score (Low to High)"})]}),Se.jsx("button",{className:"filter-toggle-btn",onClick:Ve,title:"Open Filters",children:Se.jsx("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})})]})]})]}),u?Se.jsx("div",{className:"loading-spinner",children:"Loading tokenized assets..."}):Se.jsxs(Se.Fragment,{children:[Re.length>0&&Se.jsxs("div",{className:"multi-select-controls",children:[Se.jsx("button",{className:"select-all-button",onClick:()=>{L.size===l.length?M(new Set):M(new Set(l.map(e=>e.assetId.toString())))},children:L.size===Re.length?"Deselect All":"Select All"}),Se.jsxs("div",{className:"selected-count-container",children:[Se.jsxs("div",{className:"selected-count",children:[L.size," of ",Re.length," selected"]}),ye&&Se.jsx("button",{className:"load-more-small-button",onClick:Oe,disabled:Ne,title:"Load More Assets",children:Ne?"Loading...":"Load More"})]}),Se.jsxs("button",{className:"batch-redeem-button",onClick:async()=>{if(0!==L.size)try{h(!0);const s=l.filter(e=>L.has(e.assetId.toString())),i=c.length>0?c[0]:null;if(!i)return void n("No fee tokens available for batch redemption");for(const a of s){if(!t)return void n("Please connect your wallet");try{const e=[{account:"nft.hive",name:"boost",authorization:[{actor:t,permission:"active"}],data:{booster:t}},{account:i.contract,name:"transfer",authorization:[{actor:t,permission:"active"}],data:{from:t,to:"rwax",quantity:i.fee,memo:"payfee"}},{account:"pixeljourney",name:"transfer",authorization:[{actor:t,permission:"active"}],data:{from:t,to:"rwax",quantity:`${a.rwax.redeemAmount.toFixed(8)} WPIXAL`,memo:"redeem"}},{account:"rwax",name:"redeem",authorization:[{actor:t,permission:"active"}],data:{redeemer:t,contract:"pixeljourney",quantity:`${a.rwax.redeemAmount.toFixed(8)} WPIXAL`,asset_id:a.assetId.toString(),fee_currency:`8,${i.symbol}`}}],s=await Yt.transact(e);De.info(`Redemption transaction completed for ${a.name}`,"RWax.handleBatchRedemption",{assetId:a.assetId,result:s})}catch(e){De.error(`Error redeeming asset ${a.assetId}`,"RWax",e)}}a(`Successfully processed redemption for ${L.size} assets!`),M(new Set),We()}catch(s){De.error("Batch redemption failed","RWax",s),n("Batch redemption failed. Please try again.")}finally{h(!1)}},disabled:0===L.size||!t,children:["Batch Redeem (",L.size,")"]})]}),Se.jsx("div",{className:"rwax-assets-grid",children:Re.map((e,s)=>Se.jsxs("div",{className:"asset-card "+(L.has(e.assetId.toString())?"selected":""),children:[Se.jsx("div",{className:"selection-checkbox "+(L.has(e.assetId.toString())?"checked":""),onClick:t=>{t.stopPropagation(),(e=>{const t=new Set(L);t.has(e)?t.delete(e):t.add(e),M(t)})(e.assetId.toString())},children:L.has(e.assetId.toString())&&Se.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:Se.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})})}),Se.jsxs("div",{className:"asset-card-content",onClick:()=>Je(e),children:[Se.jsxs("div",{className:"asset-image",children:[Se.jsx(Qt,{imageUrl:e.image,alt:e.name,className:"nft-image"}),Se.jsx("div",{className:"zoom-overlay",onClick:t=>{t.stopPropagation(),((e,t)=>{let s=e;e&&!e.startsWith("http")&&(e.startsWith("Qm")||e.startsWith("baf")?s=`https://ipfs.io/ipfs/${e}`:e.startsWith("/ipfs/")?s=`https://ipfs.io/ipfs/${e.replace("/ipfs/","")}`:e.startsWith("ipfs://")&&(s=e.replace("ipfs://","https://ipfs.io/ipfs/"))),z({url:s,name:t}),W(!0)})(e.image,e.name)},children:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:[Se.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),Se.jsx("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"})]})})]}),Se.jsxs("div",{className:"asset-info",children:[Se.jsx("h3",{children:e.name}),Se.jsxs("div",{className:"pricing-info",children:[Se.jsxs("div",{className:"wpixal-amount",onClick:t=>{var s;t.stopPropagation(),s=parseFloat(e.rwax.redeemAmount.toString()),H(s),X(!0)},title:`Exact amount: ${e.rwax.redeemAmount} WPIXAL`,children:[parseFloat(e.rwax.redeemAmount.toString()).toFixed(1)," WPIXAL"]}),Se.jsxs("div",{className:"rwax-price-convert",children:[Se.jsxs("div",{className:"wax-price",children:["\u2248 ",(parseFloat(e.rwax.redeemAmount.toString())*J).toFixed(4)," WAX"]}),Se.jsxs("div",{className:"usd-price",children:["\u2248 $",(parseFloat(e.rwax.redeemAmount.toString())*G).toFixed(4)," USD"]})]})]})]})]}),Se.jsxs("div",{className:"asset-actions",children:[Se.jsx("button",{className:"redeem-button primary",onClick:t=>{t.stopPropagation(),(e=>{S(e),v(!0)})(e)},disabled:!t,children:"Redeem (WPIXAL)"}),Se.jsxs("div",{className:"secondary-actions",children:[Se.jsx("button",{className:"wax-redeem-button secondary",onClick:t=>{t.stopPropagation(),(e=>{S(e),k(!0),F("confirm"),$("")})(e)},disabled:!t,children:"Redeem (WAX)"}),Se.jsx("button",{className:"info-button secondary",onClick:t=>{t.stopPropagation(),Je(e)},children:"Info"})]}),Se.jsxs("div",{className:"icon-actions",children:[Se.jsx("button",{className:"btn-watchlist icon-only "+(Ie.has(e.assetId.toString())?"active":""),onClick:t=>{t.stopPropagation(),(e=>{const t=new Set(Ie);t.has(e)?(t.delete(e),a("Removed from watchlist")):(t.add(e),a("Added to watchlist")),$e(t),localStorage.setItem("rwax-watchlist",JSON.stringify(Array.from(t)))})(e.assetId.toString())},title:Ie.has(e.assetId.toString())?"Remove from Watchlist":"Add to Watchlist",children:Se.jsx("svg",{viewBox:"0 0 24 24",fill:Ie.has(e.assetId.toString())?"currentColor":"none",stroke:"currentColor",children:Se.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})}),Se.jsx("button",{className:"btn-copy-link icon-only",onClick:t=>{t.stopPropagation();const s=`${window.location.origin}/asset/${e.assetId}`;navigator.clipboard.writeText(s).then(()=>{a("Asset link copied to clipboard!")}).catch(()=>{n("Failed to copy link")})},title:"Copy Link",children:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),Se.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]})}),Se.jsx("button",{className:"btn-share icon-only",onClick:t=>{t.stopPropagation(),(e=>{ue(e),ce(!0)})(e)},title:"Share Asset",children:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),Se.jsx("polyline",{points:"16,6 12,2 8,6"}),Se.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]})})]})]})]},`${e.assetId}-${s}`))}),ye&&Se.jsx("div",{className:"load-more-section",children:Se.jsx("button",{className:"load-more-button",onClick:Oe,disabled:Ne,children:Ne?"Loading...":"Load More Assets"})})]})]}):"other-collections"===i?Se.jsx("div",{className:"other-collections-section",children:Se.jsxs("div",{className:"construction-message",children:[Se.jsx("div",{className:"construction-icon",children:Se.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:Se.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})})}),Se.jsx("h2",{children:"Other RWAX Collections"}),Se.jsx("p",{children:"Support for additional RWAX collections is coming soon!"}),Se.jsx("div",{className:"construction-details",children:Se.jsx("p",{children:"We're working on expanding RWAX tokenization to support more NFT collections beyond Pixals. Stay tuned for updates!"})})]})}):null}),f&&_&&Se.jsx("div",{className:"rwax-modal-overlay",onClick:()=>x(!1),children:Se.jsxs("div",{className:"rwax-modal-content",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"rwax-modal-header",children:[Se.jsx("h2",{children:"Tokenize Pixal"}),Se.jsx("button",{className:"rwax-close-button",onClick:()=>x(!1),children:"\xd7"})]}),Se.jsxs("div",{className:"rwax-modal-body",children:[Se.jsxs("div",{className:"selected-asset",children:[Se.jsx(Qt,{imageUrl:_.image,alt:_.name,className:"modal-asset-image"}),Se.jsx("h3",{children:_.name})]}),Se.jsxs("div",{className:"fee-selection",children:[Se.jsx("h4",{children:"Select Fee Token:"}),c.map((e,t)=>Se.jsxs("div",{className:"fee-option "+(P===e?"selected":""),onClick:()=>T(e),children:[Se.jsx("span",{className:"fee-amount",children:e.fee}),e.wax_value&&"WAX"!==e.symbol&&Se.jsxs("span",{className:"wax-equivalent",children:["\u2248 ",parseFloat(e.wax_value).toFixed(4)," WAX"]})]},t))]}),Se.jsxs("div",{className:"modal-actions",children:[Se.jsx("button",{className:"cancel-button",onClick:()=>x(!1),children:"Cancel"}),Se.jsx("button",{className:"confirm-button",onClick:async()=>{if(_&&P&&s&&t)try{const e=await Bs.executeTokenization([_.assetId.toString()],P);a("Tokenization transaction prepared"),De.info("Tokenization transaction prepared","RWax.handleTokenization",{transaction:e}),x(!1),setTimeout(()=>{We()},2e3)}catch(e){De.error("Error during tokenization","RWax",e),n("Tokenization failed. Please try again.")}else n("Please select an asset and fee token")},disabled:!P,children:"Tokenize"})]})]})]})}),g&&_&&Ke(_)&&Se.jsx("div",{className:"rwax-modal-overlay",onClick:()=>v(!1),children:Se.jsxs("div",{className:"rwax-modal-content",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"rwax-modal-header",children:[Se.jsx("h2",{children:"Redeem WPIXAL"}),Se.jsx("button",{className:"rwax-close-button",onClick:()=>v(!1),children:"\xd7"})]}),Se.jsxs("div",{className:"rwax-modal-body",children:[Se.jsxs("div",{className:"selected-asset",children:[Se.jsx(Qt,{imageUrl:_.image,alt:_.name,className:"modal-asset-image"}),Se.jsx("h3",{children:_.name}),Ke(_)&&Se.jsxs("p",{className:"wpixal-required",children:["Required: ",_.rwax.redeemAmount.toFixed(8)," WPIXAL"]})]}),Se.jsxs("div",{className:"fee-selection",children:[Se.jsx("h4",{children:"Select Fee Token:"}),c.map((e,t)=>Se.jsxs("div",{className:"fee-option "+(P===e?"selected":""),onClick:()=>T(e),children:[Se.jsx("span",{className:"fee-amount",children:e.fee}),e.wax_value&&"WAX"!==e.symbol&&Se.jsxs("span",{className:"wax-equivalent",children:["\u2248 ",parseFloat(e.wax_value).toFixed(4)," WAX"]})]},t))]}),Se.jsxs("div",{className:"modal-actions",children:[Se.jsx("button",{className:"cancel-button",onClick:()=>v(!1),children:"Cancel"}),Se.jsx("button",{className:"confirm-button",onClick:async()=>{if(_&&P&&s&&t&&Ke(_))try{h(!0);const e=[{account:"nft.hive",name:"boost",authorization:[{actor:t,permission:"active"}],data:{booster:t}},{account:P.contract,name:"transfer",authorization:[{actor:t,permission:"active"}],data:{from:t,to:"rwax",quantity:P.fee,memo:"payfee"}},{account:"pixeljourney",name:"transfer",authorization:[{actor:t,permission:"active"}],data:{from:t,to:"rwax",quantity:`${_.rwax.redeemAmount.toFixed(8)} WPIXAL`,memo:"redeem"}},{account:"rwax",name:"redeem",authorization:[{actor:t,permission:"active"}],data:{redeemer:t,contract:"pixeljourney",quantity:`${_.rwax.redeemAmount.toFixed(8)} WPIXAL`,asset_id:_.assetId.toString(),fee_currency:`8,${P.symbol}`}}],s=await Yt.transact(e);a("Redemption transaction completed successfully!"),De.info("Redemption transaction completed","RWax.handleRedeemFromModal",{result:s}),v(!1),setTimeout(()=>{We()},2e3)}catch(e){De.error("Error during redemption","RWax",e),n("Redemption failed. Please try again.")}finally{h(!1)}else n("Please select an asset and fee token")},disabled:!P,children:"Redeem"})]})]})]})}),Se.jsx(an,{isOpen:j,onClose:()=>y(!1),onSuccess:()=>{"redeem"===i&&We()}}),Se.jsx(nn,{asset:C,isOpen:b,onClose:()=>{N(!1),A(null)},onRedeem:async(e,s)=>{if(t)try{h(!0);const n=[{account:"nft.hive",name:"boost",authorization:[{actor:t,permission:"active"}],data:{booster:t}},{account:s.contract,name:"transfer",authorization:[{actor:t,permission:"active"}],data:{from:t,to:"rwax",quantity:s.fee,memo:"payfee"}},{account:"pixeljourney",name:"transfer",authorization:[{actor:t,permission:"active"}],data:{from:t,to:"rwax",quantity:`${e.rwax.redeemAmount.toFixed(8)} WPIXAL`,memo:"redeem"}},{account:"rwax",name:"redeem",authorization:[{actor:t,permission:"active"}],data:{redeemer:t,contract:"pixeljourney",quantity:`${e.rwax.redeemAmount.toFixed(8)} WPIXAL`,asset_id:e.assetId.toString(),fee_currency:`8,${s.symbol}`}}],i=await Yt.transact(n);a("Redemption transaction completed successfully!"),De.info("Redemption transaction completed","RWax.handleRedemption",{result:i}),N(!1),A(null),We()}catch(i){De.error("Error during redemption","RWax",i),n("Redemption failed. Please try again.")}finally{h(!1)}else n("Please connect your wallet")}}),w&&_&&Se.jsx("div",{className:"rwax-modal-overlay",onClick:He,children:Se.jsxs("div",{className:"rwax-modal-content rwax-wax-redeem-modal",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"rwax-modal-header",children:[Se.jsx("h2",{children:"Pay with WAX"}),Se.jsx("button",{className:"rwax-close-button",onClick:He,children:"\xd7"})]}),Se.jsxs("div",{className:"rwax-modal-body",children:[Se.jsxs("div",{className:"selected-asset",children:[Se.jsx(Qt,{imageUrl:_.image,alt:_.name,className:"modal-asset-image"}),Se.jsx("h3",{children:_.name}),Ke(_)&&Se.jsxs(Se.Fragment,{children:[Se.jsxs("p",{className:"wpixal-required",children:["Required: ",_.rwax.redeemAmount.toFixed(8)," WPIXAL"]}),Se.jsxs("p",{className:"wax-cost",children:["Cost: ",(_.rwax.redeemAmount*J).toFixed(4)," WAX"]}),Se.jsxs("p",{className:"usd-cost",children:["USD: $",(_.rwax.redeemAmount*G).toFixed(4)]})]})]}),"confirm"===E&&Se.jsxs("div",{className:"wax-redeem-step",children:[Se.jsx("h4",{children:"Step 1: Confirm WAX Payment"}),Se.jsx("p",{className:"step-description",children:"This process will swap your WAX for WPIXAL via Alcor, then use that WPIXAL to redeem your NFT."}),Se.jsxs("div",{className:"wax-calculator-section",children:[Se.jsxs("div",{className:"available-wax",children:[Se.jsx("h4",{children:"Your Available WAX"}),Se.jsxs("div",{className:"wax-balance",children:[Se.jsx("span",{className:"nav-balance-amount",children:xe}),Se.jsxs("span",{className:"balance-usd",children:["($",(parseFloat(xe.split(" ")[0])*te).toFixed(2)," USD)"]})]})]}),Se.jsxs("div",{className:"wpixal-calculator",children:[Se.jsx("h4",{children:"WPIXAL Calculator"}),Se.jsxs("div",{className:"calculator-info",children:[Se.jsx("p",{children:"With your available WAX, you can buy:"}),Se.jsx("div",{className:"max-wpixal",children:Se.jsxs("strong",{children:[J>0?(100/J).toFixed(4):"0.0000"," WPIXAL"]})}),Se.jsx("div",{className:"rate-info",children:Se.jsxs("small",{children:["Rate: 1 WPIXAL = ",J.toFixed(6)," WAX"]})})]}),Se.jsxs("div",{className:"purchase-slider",children:[Se.jsx("label",{children:"Amount to purchase:"}),Se.jsx("input",{type:"range",min:"0",max:Math.min(100,J>0&&Ke(_)?_.rwax.redeemAmount*J:0),step:"0.0001",value:I?parseFloat(I):0,onChange:e=>$(parseFloat(e.target.value).toFixed(4)),className:"wpixal-slider"}),Se.jsxs("div",{className:"slider-labels",children:[Se.jsx("span",{children:"0 WAX"}),Se.jsxs("span",{children:[Math.min(100,J>0&&Ke(_)?_.rwax.redeemAmount*J:0).toFixed(4)," WAX"]})]})]}),Se.jsxs("div",{className:"purchase-summary",children:[Se.jsxs("div",{className:"summary-row",children:[Se.jsx("span",{children:"WPIXAL to buy:"}),Se.jsxs("span",{children:[I?(parseFloat(I)/J).toFixed(4):"0.0000"," WPIXAL"]})]}),Se.jsxs("div",{className:"summary-row",children:[Se.jsx("span",{children:"WAX cost:"}),Se.jsxs("span",{children:[I||"0.0000"," WAX"]})]}),Se.jsxs("div",{className:"summary-row",children:[Se.jsx("span",{children:"USD cost:"}),Se.jsxs("span",{children:["$",I?(parseFloat(I)*te).toFixed(4):"0.0000"]})]})]})]})]}),Se.jsxs("div",{className:"process-steps",children:[Se.jsxs("div",{className:"step-item",children:[Se.jsx("span",{className:"step-number",children:"1"}),Se.jsx("span",{className:"step-text",children:"Swap WAX \u2192 WPIXAL via Alcor"})]}),Se.jsxs("div",{className:"step-item",children:[Se.jsx("span",{className:"step-number",children:"2"}),Se.jsx("span",{className:"step-text",children:"Redeem NFT with WPIXAL"})]})]}),Se.jsxs("div",{className:"modal-actions",children:[Se.jsx("button",{className:"cancel-button",onClick:He,children:"Cancel"}),Se.jsx("button",{className:"confirm-button",onClick:async()=>{if(!(_&&t&&s&&Ke(_)))return void n("Missing required data for WAX redemption");const e=parseFloat(xe.split(" ")[0]),i=parseFloat(I);if(e<i)n(`Insufficient WAX balance. You have ${xe} but need ${i.toFixed(4)} WAX`);else try{h(!0),F("swap");const e=await _a.executeSwap(I,t,5);a("Swap transaction prepared"),De.info("Swap transaction prepared","RWax.handleWaxRedemption",{swapTransaction:e}),await new Promise(e=>setTimeout(e,2e3)),F("redeem");const s={fee:"0.00000000",contract:"eosio.token",exchange_rate:"1",symbol:"WAX",amount:"0.00000000"};if(!Ke(_))return void n("Selected asset is not a tokenized asset");const i=await Bs.executeRedemption(_.assetId.toString(),_.rwax.redeemAmount.toFixed(8)+" WPIXAL",s);a("Redemption transaction prepared"),De.info("Redemption transaction prepared","RWax.handleWaxRedemption",{redeemTransaction:i}),await new Promise(e=>setTimeout(e,2e3)),F("complete"),a("WAX redemption completed successfully!")}catch(r){De.error("Error during WAX redemption","RWax",r),n("WAX redemption failed. Please try again."),F("confirm")}finally{h(!1)}},disabled:!I||parseFloat(I)<=0||J<=0||!Ke(_)||parseFloat(I)/J>_.rwax.redeemAmount,children:"Buy WPIXAL & Redeem"})]})]}),"swap"===E&&Se.jsxs("div",{className:"wax-redeem-step",children:[Se.jsx("h4",{children:"Step 2: Swapping WAX to WPIXAL"}),Se.jsxs("p",{className:"step-description",children:["Connecting to Alcor to swap ",I," WAX for WPIXAL..."]}),Se.jsxs("div",{className:"swap-progress",children:[Se.jsx("div",{className:"progress-spinner"}),Se.jsx("p",{children:"Processing swap transaction..."})]}),Se.jsx("div",{className:"modal-actions",children:Se.jsx("button",{className:"cancel-button",onClick:He,children:"Cancel"})})]}),"redeem"===E&&Se.jsxs("div",{className:"wax-redeem-step",children:[Se.jsx("h4",{children:"Step 3: Redeeming NFT"}),Se.jsx("p",{className:"step-description",children:"Using WPIXAL to redeem your NFT..."}),Se.jsxs("div",{className:"redeem-progress",children:[Se.jsx("div",{className:"progress-spinner"}),Se.jsx("p",{children:"Processing redemption transaction..."})]})]}),"complete"===E&&Se.jsxs("div",{className:"wax-redeem-step",children:[Se.jsx("h4",{children:"\u2705 Redemption Complete!"}),Se.jsx("p",{className:"step-description success",children:"Your NFT has been successfully redeemed using WAX payment."}),Se.jsx("div",{className:"modal-actions",children:Se.jsx("button",{className:"confirm-button",onClick:()=>{He(),We()},children:"Done"})})]})]})]})}),Se.jsx("div",{className:"live-transactions-section",children:Se.jsx(rn,{limit:12,refreshInterval:3e4})}),R&&Se.jsx("div",{className:"image-zoom-modal",onClick:()=>W(!1),children:Se.jsxs("div",{className:"zoom-modal-content",onClick:e=>e.stopPropagation(),children:[Se.jsx("button",{className:"zoom-modal-close",onClick:()=>W(!1),children:"\xd7"}),D&&Se.jsxs(Se.Fragment,{children:[Se.jsx("img",{src:D.url,alt:D.name,className:"zoom-modal-image"}),Se.jsx("div",{className:"zoom-modal-info",children:Se.jsx("h3",{children:D.name})})]})]})}),U&&Se.jsx($a,{isModal:!0,onClose:()=>X(!1),initialBuyAmount:q}),ae&&ie&&Se.jsx("div",{className:"rwax-modal-overlay",onClick:()=>ne(!1),children:Se.jsxs("div",{className:"rwax-modal-content",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"rwax-modal-header",children:[Se.jsx("h2",{children:"Set Price Alert"}),Se.jsx("button",{className:"rwax-close-button",onClick:()=>ne(!1),children:"\xd7"})]}),Se.jsxs("div",{className:"rwax-modal-body",children:[ie&&Se.jsxs("div",{className:"alert-asset-info",children:[Se.jsx(Qt,{imageUrl:ie.image,alt:ie.name,className:"modal-asset-image"}),Se.jsx("h3",{children:ie.name}),Se.jsxs("p",{children:["Current Price: ",ie.rwax.redeemAmount.toFixed(8)," WPIXAL"]})]}),Se.jsxs("div",{className:"alert-settings",children:[Se.jsx("h4",{children:"Alert when price changes by:"}),Se.jsx("div",{className:"percentage-options",children:[5,10,15,20,25].map(e=>Se.jsxs("button",{className:"percentage-option "+(re===e?"selected":""),onClick:()=>le(e),children:[e,"%"]},e))}),Se.jsxs("div",{className:"custom-percentage",children:[Se.jsx("label",{children:"Custom percentage:"}),Se.jsx("input",{type:"number",min:"1",max:"100",value:re,onChange:e=>le(parseInt(e.target.value)||10),className:"percentage-input"}),Se.jsx("span",{children:"%"})]}),Se.jsxs("div",{className:"alert-preview",children:[Se.jsxs("p",{children:["You will be notified when the price moves ",re,"% from the current value."]}),Se.jsxs("div",{className:"price-thresholds",children:[Se.jsxs("div",{className:"threshold-item",children:[Se.jsx("span",{className:"threshold-label",children:"Alert above:"}),Se.jsxs("span",{className:"threshold-value",children:[(ie.rwax.redeemAmount*(1+re/100)).toFixed(4)," WPIXAL"]})]}),Se.jsxs("div",{className:"threshold-item",children:[Se.jsx("span",{className:"threshold-label",children:"Alert below:"}),Se.jsxs("span",{className:"threshold-value",children:[(ie.rwax.redeemAmount*(1-re/100)).toFixed(4)," WPIXAL"]})]})]})]})]}),Se.jsxs("div",{className:"modal-actions",children:[Se.jsx("button",{className:"cancel-button",onClick:()=>ne(!1),children:"Cancel"}),ie&&Le.has(ie.assetId.toString())&&Se.jsx("button",{className:"remove-alert-button",onClick:()=>{ie&&(Ze(ie.assetId.toString()),ne(!1))},children:"Remove Alert"}),Se.jsx("button",{className:"confirm-button",onClick:()=>{ie&&(Qe(ie,re),ne(!1))},children:ie&&Le.has(ie.assetId.toString())?"Update Alert":"Set Alert"})]})]})]})}),he&&Se.jsx("div",{className:"rwax-modal-overlay",onClick:()=>me(!1),children:Se.jsxs("div",{className:"rwax-modal-content",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"rwax-modal-header",children:[Se.jsx("h2",{children:"WPIXAL Price Alert"}),Se.jsx("button",{className:"rwax-close-button",onClick:()=>me(!1),children:"\xd7"})]}),Se.jsxs("div",{className:"rwax-modal-body",children:[Se.jsxs("div",{className:"wpixal-alert-info",children:[Se.jsx("h3",{children:"Set WPIXAL Price Alert"}),Se.jsxs("div",{className:"current-wpixal-prices",children:[Se.jsx("p",{children:"Current WPIXAL Price:"}),Se.jsxs("div",{className:"price-display",children:[Se.jsx("span",{className:"wax-price",children:J>0?`${J.toFixed(8)} WAX`:"Loading..."}),Se.jsx("span",{className:"usd-price",children:G>0?`($${G.toFixed(6)} USD)`:""})]})]}),localStorage.getItem("wpixalPriceAlert")&&Se.jsxs("div",{className:"existing-alert-info",children:[Se.jsxs("p",{children:["Your Current Alert: ",localStorage.getItem("wpixalPriceAlert")," WAX"]}),Se.jsx("p",{className:"price-comparison",children:J>0&&localStorage.getItem("wpixalPriceAlert")?`Current price is ${((J-parseFloat(localStorage.getItem("wpixalPriceAlert")))/parseFloat(localStorage.getItem("wpixalPriceAlert"))*100).toFixed(2)}% ${J>parseFloat(localStorage.getItem("wpixalPriceAlert"))?"above":"below"} your alert`:""})]}),Se.jsx("p",{children:"Get notified when WPIXAL price drops below your target value"})]}),Se.jsxs("div",{className:"alert-settings",children:[Se.jsx("h4",{children:"Alert when WPIXAL price (in WAX) drops below:"}),Se.jsxs("div",{className:"price-input-container",children:[Se.jsx("input",{type:"number",step:"0.00000001",min:"0",value:pe,onChange:e=>fe(e.target.value),placeholder:"Enter WAX amount",className:"price-alert-input"}),Se.jsx("span",{className:"currency-label",children:"WAX"})]})]}),Se.jsxs("div",{className:"modal-actions",children:[Se.jsx("button",{className:"cancel-button",onClick:()=>me(!1),children:"Cancel"}),Se.jsx("button",{className:"confirm-button",onClick:()=>{pe&&parseFloat(pe)>0&&(localStorage.setItem("wpixalPriceAlert",pe),me(!1),fe(""),a("Price Alert Set",`WPIXAL price alert set for ${pe} WAX`))},disabled:!pe||parseFloat(pe)<=0,children:"Set Alert"})]})]})]})}),K&&Se.jsxs(Se.Fragment,{children:[Se.jsx("div",{className:"filter-sidebar-overlay",onClick:Ge}),Se.jsxs("div",{className:"filter-sidebar",children:[Se.jsxs("div",{className:"filter-sidebar-header",children:[Se.jsx("h3",{children:"Advanced Filters"}),Se.jsx("button",{className:"close-sidebar-btn",onClick:Ge,children:Se.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),Se.jsxs("div",{className:"filter-section",children:[Se.jsx("h4",{children:"Price Range (WPIXAL)"}),Se.jsxs("div",{className:"price-range-inputs",children:[Se.jsx("input",{type:"number",placeholder:"Min",value:Z.min,onChange:e=>ee(t=>({...t,min:e.target.value})),className:"price-input"}),Se.jsx("span",{children:"to"}),Se.jsx("input",{type:"number",placeholder:"Max",value:Z.max,onChange:e=>ee(t=>({...t,max:e.target.value})),className:"price-input"})]})]}),Se.jsx("div",{className:"filter-section",children:Se.jsx(on,{onFiltersChange:Be,initialFilters:Pe})})]})]}),oe&&de&&Se.jsx(as,{isOpen:oe,onClose:()=>{ce(!1),ue(null)},type:"nft",title:"",shareUrl:`${window.location.origin}/rwax/asset/${de.assetId}`,defaultShareText:`Check out this tokenized Pixal: ${de.name} - ${de.rwax.redeemAmount.toFixed(8)} WPIXAL on PxMarket! \ud83c\udfae\u2728`})]})},dn=[{id:781515,pxj:1,wuf:22,pxjUpgrade:0,name:"Pixal PFP",type:"pixals"},{id:820134,pxj:2.22,wuf:5,pxjUpgrade:0,name:"Pixel Ingredient Pack",type:"pixelpack"},{id:858568,pxj:142,wuf:142,pxjUpgrade:0,name:"Black",type:"special"},{id:858569,pxj:.42,wuf:1,pxjUpgrade:0,name:"Blue",type:"primary ingredient"},{id:858570,pxj:.42,wuf:1,pxjUpgrade:0,name:"Red",type:"primary ingredient"},{id:858571,pxj:.42,wuf:1,pxjUpgrade:0,name:"Yellow",type:"primary ingredient"},{id:858572,pxj:2.22,wuf:1,pxjUpgrade:25e3,name:"Green",type:"secondary ingredient"},{id:858573,pxj:2.22,wuf:1,pxjUpgrade:25e3,name:"Orange",type:"secondary ingredient"},{id:858574,pxj:2.22,wuf:1,pxjUpgrade:25e3,name:"Purple",type:"secondary ingredient"},{id:858575,pxj:14.2,wuf:14.2,pxjUpgrade:125e3,name:"Amber",type:"tertiary ingredient"},{id:858576,pxj:14.2,wuf:14.2,pxjUpgrade:125e3,name:"Chartreuse",type:"tertiary ingredient"},{id:858577,pxj:14.2,wuf:14.2,pxjUpgrade:125e3,name:"Violet",type:"tertiary ingredient"},{id:858578,pxj:14.2,wuf:14.2,pxjUpgrade:125e3,name:"Teal",type:"tertiary ingredient"},{id:858580,pxj:14.2,wuf:14.2,pxjUpgrade:125e3,name:"Vermillion",type:"tertiary ingredient"},{id:859273,pxj:14.2,wuf:14.2,pxjUpgrade:125e3,name:"Magenta",type:"tertiary ingredient"}],un=()=>{const[e,t]=O.useState("overview"),[s,a]=O.useState(!1),[n,i]=O.useState(.001),[r,l]=O.useState(5e-4),[o,c]=O.useState({ingredients:!0,governance:!0,collectibles:!0,overviewIngredients:!0}),d=e=>{const t=dn.find(t=>t.id===e.resultTemplateId);if(!t)return{craftingCost:0,dailyEarnings:0,roiDays:0,profitMargin:0};const s=(e.ingredients.reduce((e,t)=>{const s=dn.find(e=>e.id===t.templateId);return e+(s?s.pxj*t.quantity:0)},0)+t.pxjUpgrade)*n,a=24*t.pxj*n;return{craftingCost:s,dailyEarnings:a,roiDays:s>0?s/a:0,profitMargin:a>0?(a-s/365)/a*100+100:100}},u=O.useMemo(()=>{const e={special:[],"primary ingredient":[],"secondary ingredient":[],"tertiary ingredient":[],pixals:[],pixelpack:[]};return dn.forEach(t=>{e[t.type]&&e[t.type].push(t)}),e},[]),h=()=>{a(!0)},m=e=>({858575:"http://pixeljourney.xyz/ingredients/Pixel_Amber_vid_25fps_300px.mp4",858576:"http://pixeljourney.xyz/ingredients/Pixel_Chartreuse_vid_25fps_300px.mp4",858577:"http://pixeljourney.xyz/ingredients/Pixel_Violet_vid_25fps_300px.mp4",858578:"http://pixeljourney.xyz/ingredients/Pixel_Teal_vid_25fps_300px.mp4",858580:"http://pixeljourney.xyz/ingredients/Pixel_Vermillion_vid_25fps_300px.mp4",859273:"http://pixeljourney.xyz/ingredients/Pixel_Magenta_vid_25fps_300px.mp4",858574:"http://pixeljourney.xyz/ingredients/Pixel_Purple_vid_25fps_300px.mp4",858573:"http://pixeljourney.xyz/ingredients/Pixel_Orange_vid_25fps_300px.mp4",858572:"http://pixeljourney.xyz/ingredients/Pixel_Green_vid_25fps_300px.mp4",858570:"http://pixeljourney.xyz/ingredients/Pixel_Red_vid_25fps_300px.mp4",858569:"http://pixeljourney.xyz/ingredients/Pixel_Blue_vid_25fps_300px.mp4",858571:"http://pixeljourney.xyz/ingredients/Pixel_Yellow_vid_25fps_300px.mp4",858568:"http://pixeljourney.xyz/ingredients/Pixel_Black_White_vid_25fps_300px.mp4"}[e.toString()]||`/img/ingredients/${e}.png`),p=e=>e.includes(".mp4")||e.includes(".webm");return Se.jsxs("div",{className:"pxcrafting-container",children:[Se.jsxs("div",{className:"pxcrafting-header",children:[Se.jsx("h1",{children:"Pixel Ingredient Crafting"}),Se.jsx("p",{className:"pxcrafting-subtitle",children:"Master the art of pixel ingredient crafting with comprehensive guides, ROI calculations, and staking insights."})]}),Se.jsxs("div",{className:"pxcrafting-tabs",children:[Se.jsx("button",{className:"tab-btn "+("overview"===e?"active":""),onClick:()=>t("overview"),children:"Overview"}),Se.jsx("button",{className:"tab-btn "+("recipes"===e?"active":""),onClick:()=>t("recipes"),children:"Recipes"}),Se.jsx("button",{className:"tab-btn "+("calculator"===e?"active":""),onClick:()=>t("calculator"),children:"ROI Calculator"}),Se.jsx("button",{className:"tab-btn "+("staking"===e?"active":""),onClick:()=>t("staking"),children:"Staking Info"})]}),Se.jsxs("div",{className:"pxcrafting-content",children:["overview"===e&&Se.jsxs("div",{className:"overview-tab",children:[Se.jsxs("div",{className:"overview-grid",children:[Se.jsxs("div",{className:"overview-card",children:[Se.jsx("h3",{children:"\ud83c\udfa8 Crafting System"}),Se.jsx("p",{children:"Create powerful pixel ingredients by combining primary colors into secondary and tertiary ingredients. Each tier offers increased staking rewards and unique properties."}),Se.jsx("button",{className:"cta-button",onClick:()=>h(),children:"Start Crafting"})]}),Se.jsxs("div",{className:"overview-card",children:[Se.jsx("h3",{children:"\ud83d\udcb0 Staking Rewards"}),Se.jsx("p",{children:"Stake your crafted ingredients to earn PXJ and WUF tokens. Higher tier ingredients provide significantly better returns on your investment."}),Se.jsx("button",{className:"cta-button secondary",onClick:()=>t("staking"),children:"View Staking Info"})]}),Se.jsxs("div",{className:"overview-card",children:[Se.jsx("h3",{children:"\ud83d\udcca ROI Analysis"}),Se.jsx("p",{children:"Calculate the return on investment for different crafting strategies. Optimize your crafting decisions with real-time profitability analysis."}),Se.jsx("button",{className:"cta-button secondary",onClick:()=>t("calculator"),children:"Calculate ROI"})]})]}),Se.jsx("div",{className:"main-staking-section",children:Se.jsxs("div",{className:"main-staking-card",children:[Se.jsx("h3",{children:"\ud83c\udfdb\ufe0f Main Staking Platform"}),Se.jsx("p",{children:"Visit the official Pixel Journey staking platform to stake all your NFT collectibles and earn rewards across the entire ecosystem."}),Se.jsx("a",{href:"https://stake.pixeljourney.xyz",target:"_blank",rel:"noopener noreferrer",className:"main-staking-button",children:"Visit Staking Platform"})]})}),Se.jsx("div",{className:"ingredient-tiers",children:Se.jsxs("div",{className:"collapsible-section",children:[Se.jsxs("button",{className:"section-header",onClick:()=>c(e=>({...e,overviewIngredients:!e.overviewIngredients})),children:[Se.jsx("h2",{children:"Staking Values"}),Se.jsx("span",{className:"collapse-icon "+(o.overviewIngredients?"collapsed":""),children:"\u25bc"})]}),!o.overviewIngredients&&Se.jsxs("div",{className:"smart-tier-layout",children:[Se.jsxs("div",{className:"tier-row tier-row-premium",children:[Se.jsxs("div",{className:"tier-card pixelpack",children:[Se.jsx("h4",{children:"Pixel Ingredient Pack"}),Se.jsx("div",{className:"tier-ingredients",children:dn.filter(e=>"pixelpack"===e.type).map(e=>{const t=m(e.id)||"https://pixeljourney.xyz/img/pixel_journey_pack_002_500x500.gif";return Se.jsxs("div",{className:"ingredient-preview",children:[p(t)?Se.jsx("video",{src:t,autoPlay:!0,loop:!0,muted:!0,onError:t=>{t.currentTarget.style.display="none";const s=document.createElement("img");s.src="https://pixeljourney.xyz/img/pixel_journey_pack_002_500x500.gif",s.alt=e.name,t.currentTarget.parentNode?.appendChild(s)}}):Se.jsx("img",{src:t,alt:e.name,onError:e=>{e.currentTarget.src="https://pixeljourney.xyz/img/pixel_journey_pack_002_500x500.gif"}}),Se.jsxs("span",{children:[e.name," ",Se.jsx("span",{className:"season-tag",children:"Season 1"})]}),Se.jsxs("small",{children:[e.pxj," PXJ/hr"]})]},e.id)})})]}),Se.jsxs("div",{className:"tier-card special",children:[Se.jsx("h4",{children:"Special Ingredients"}),Se.jsx("div",{className:"tier-ingredients",children:dn.filter(e=>"special"===e.type).map(e=>{const t=m(e.id);return Se.jsxs("div",{className:"ingredient-preview",children:[p(t)?Se.jsx("video",{src:t,autoPlay:!0,loop:!0,muted:!0,onError:t=>{t.currentTarget.style.display="none";const s=document.createElement("img");s.src="/img/placeholder-ingredient.png",s.alt=e.name,t.currentTarget.parentNode?.appendChild(s)}}):Se.jsx("img",{src:t,alt:e.name,onError:e=>{e.currentTarget.src="/img/placeholder-ingredient.png"}}),Se.jsxs("span",{children:[e.name," ",Se.jsx("span",{className:"season-tag",children:"Season 1"})]}),Se.jsxs("small",{children:[e.pxj," PXJ/hr"]})]},e.id)})})]})]}),Se.jsxs("div",{className:"tier-row tier-row-standard",children:[Se.jsxs("div",{className:"tier-card primary",children:[Se.jsx("h4",{children:"Primary Ingredients"}),Se.jsx("div",{className:"tier-ingredients",children:dn.filter(e=>"primary ingredient"===e.type).map(e=>{const t=m(e.id);return Se.jsxs("div",{className:"ingredient-preview",children:[p(t)?Se.jsx("video",{src:t,autoPlay:!0,loop:!0,muted:!0,onError:t=>{t.currentTarget.style.display="none";const s=document.createElement("img");s.src="/img/placeholder-ingredient.png",s.alt=e.name,t.currentTarget.parentNode?.appendChild(s)}}):Se.jsx("img",{src:t,alt:e.name,onError:e=>{e.currentTarget.src="/img/placeholder-ingredient.png"}}),Se.jsxs("span",{children:[e.name," ",Se.jsx("span",{className:"season-tag",children:"Season 1"})]}),Se.jsxs("small",{children:[e.pxj," PXJ/hr"]})]},e.id)})})]}),Se.jsxs("div",{className:"tier-card secondary",children:[Se.jsx("h4",{children:"Secondary Ingredients"}),Se.jsx("div",{className:"tier-ingredients",children:dn.filter(e=>"secondary ingredient"===e.type).map(e=>{const t=m(e.id);return Se.jsxs("div",{className:"ingredient-preview",children:[p(t)?Se.jsx("video",{src:t,autoPlay:!0,loop:!0,muted:!0,onError:t=>{t.currentTarget.style.display="none";const s=document.createElement("img");s.src="/img/placeholder-ingredient.png",s.alt=e.name,t.currentTarget.parentNode?.appendChild(s)}}):Se.jsx("img",{src:t,alt:e.name,onError:e=>{e.currentTarget.src="/img/placeholder-ingredient.png"}}),Se.jsxs("span",{children:[e.name," ",Se.jsx("span",{className:"season-tag",children:"Season 1"})]}),Se.jsxs("small",{children:[e.pxj," PXJ/hr"]})]},e.id)})})]})]}),Se.jsxs("div",{className:"tier-row tier-row-tertiary",children:[Se.jsxs("div",{className:"tier-card tertiary",children:[Se.jsx("h4",{children:"Tertiary Ingredients"}),Se.jsx("div",{className:"tier-ingredients",children:dn.filter(e=>"tertiary ingredient"===e.type).map(e=>{const t=m(e.id);return Se.jsxs("div",{className:"ingredient-preview",children:[p(t)?Se.jsx("video",{src:t,autoPlay:!0,loop:!0,muted:!0,onError:t=>{t.currentTarget.style.display="none";const s=document.createElement("img");s.src="/img/placeholder-ingredient.png",s.alt=e.name,t.currentTarget.parentNode?.appendChild(s)}}):Se.jsx("img",{src:t,alt:e.name,onError:e=>{e.currentTarget.src="/img/placeholder-ingredient.png"}}),Se.jsxs("span",{children:[e.name," ",Se.jsx("span",{className:"season-tag",children:"Season 1"})]}),Se.jsxs("small",{children:[e.pxj," PXJ/hr"]})]},e.id)})})]}),Se.jsxs("div",{className:"tier-card collectibles",children:[Se.jsx("h4",{children:"Collectibles"}),Se.jsx("div",{className:"tier-ingredients",children:Se.jsxs("div",{className:"sub-tier",children:[Se.jsx("h5",{children:"PFPs"}),dn.filter(e=>"pixals"===e.type).map(e=>{const t=m(e.id)||"https://ipfs.io/ipfs/QmQKA9fxWBAsoDnMRZj1v1vsjwZeWZpHmnoEyujmeMi2rp";return Se.jsxs("div",{className:"ingredient-preview",children:[p(t)?Se.jsx("video",{src:t,autoPlay:!0,loop:!0,muted:!0,onError:t=>{t.currentTarget.style.display="none";const s=document.createElement("img");s.src="https://ipfs.io/ipfs/QmQKA9fxWBAsoDnMRZj1v1vsjwZeWZpHmnoEyujmeMi2rp",s.alt=e.name,t.currentTarget.parentNode?.appendChild(s)}}):Se.jsx("img",{src:t,alt:e.name,onError:e=>{e.currentTarget.src="https://ipfs.io/ipfs/QmQKA9fxWBAsoDnMRZj1v1vsjwZeWZpHmnoEyujmeMi2rp"}}),Se.jsxs("span",{children:[e.name," ",Se.jsx("span",{className:"season-tag",children:"Season 1"})]}),Se.jsxs("small",{children:[e.pxj," PXJ/hr"]})]},e.id)})]})})]})]})]})]})})]}),"recipes"===e&&Se.jsxs("div",{className:"recipes-tab",children:[Se.jsxs("div",{className:"recipes-header",children:[Se.jsx("h2",{children:"Crafting Recipes"}),Se.jsxs("div",{className:"recipe-category-tabs",children:[Se.jsx("button",{className:"recipe-tab active",children:"Ingredient"}),Se.jsx("button",{className:"recipe-tab disabled",title:"Coming Soon",children:"Collectibles"}),Se.jsx("button",{className:"recipe-tab disabled",title:"Coming Soon",children:"Event"}),Se.jsx("button",{className:"recipe-tab disabled",title:"Coming Soon",children:"Governance"})]})]}),Se.jsx("div",{className:"recipes-grid",children:Es.map((e,t)=>{const s=d(e),a=dn.find(t=>t.id===e.resultTemplateId);return Se.jsxs("div",{className:"recipe-card",children:[Se.jsxs("div",{className:"recipe-header",children:[Se.jsx("h3",{children:e.name}),Se.jsx("span",{className:`tier-badge ${e.tier}`,children:e.tier})]}),Se.jsxs("div",{className:"recipe-ingredients",children:[Se.jsx("h4",{children:"Ingredients Required:"}),e.ingredients.map((e,t)=>{const s=dn.find(t=>t.id===e.templateId),a=m(e.templateId);return Se.jsxs("div",{className:"ingredient-requirement",children:[p(a)?Se.jsx("video",{src:a,autoPlay:!0,loop:!0,muted:!0,onError:e=>{e.currentTarget.style.display="none";const t=document.createElement("img");t.src="/img/placeholder-ingredient.png",t.alt=s?.name||"Unknown",e.currentTarget.parentNode?.appendChild(t)}}):Se.jsx("img",{src:a,alt:s?.name||"Unknown",onError:e=>{e.currentTarget.src="/img/placeholder-ingredient.png"}}),Se.jsxs("span",{children:[e.quantity,"x ",s?.name||"Unknown"]})]},t)})]}),Se.jsxs("div",{className:"recipe-result",children:[Se.jsx("h4",{children:"Creates:"}),Se.jsxs("div",{className:"result-item",children:[(()=>{const t=m(e.resultTemplateId);return p(t)?Se.jsx("video",{src:t,autoPlay:!0,loop:!0,muted:!0,onError:e=>{e.currentTarget.style.display="none";const t=document.createElement("img");t.src="/img/placeholder-ingredient.png",t.alt=a?.name||"Unknown",e.currentTarget.parentNode?.appendChild(t)}}):Se.jsx("img",{src:t,alt:a?.name||"Unknown",onError:e=>{e.currentTarget.src="/img/placeholder-ingredient.png"}})})(),Se.jsxs("span",{children:["1x ",a?.name||"Unknown"]})]})]}),Se.jsxs("div",{className:"recipe-stats",children:[Se.jsxs("div",{className:"stat",children:[Se.jsx("label",{children:"Cost:"}),Se.jsxs("span",{children:[s.craftingCost.toFixed(4)," WAX"]})]}),Se.jsxs("div",{className:"stat",children:[Se.jsx("label",{children:"Daily Earnings:"}),Se.jsxs("span",{children:[s.dailyEarnings.toFixed(4)," WAX"]})]}),Se.jsxs("div",{className:"stat",children:[Se.jsx("label",{children:"ROI Period:"}),Se.jsxs("span",{children:[s.roiDays.toFixed(1)," days"]})]})]}),Se.jsx("button",{className:"craft-button",onClick:()=>{h()},children:"Craft This Recipe"})]},t)})})]}),"calculator"===e&&Se.jsxs("div",{className:"calculator-tab",children:[Se.jsx("h2",{children:"ROI Calculator"}),Se.jsxs("div",{className:"price-inputs",children:[Se.jsxs("div",{className:"input-group",children:[Se.jsx("label",{children:"PXJ Price (WAX):"}),Se.jsx("input",{type:"number",step:"0.0001",value:n,onChange:e=>i(parseFloat(e.target.value)||0)})]}),Se.jsxs("div",{className:"input-group",children:[Se.jsx("label",{children:"WUF Price (WAX):"}),Se.jsx("input",{type:"number",step:"0.0001",value:r,onChange:e=>l(parseFloat(e.target.value)||0)})]})]}),Se.jsx("div",{className:"roi-table",children:Se.jsxs("table",{children:[Se.jsx("thead",{children:Se.jsxs("tr",{children:[Se.jsx("th",{children:"Recipe"}),Se.jsx("th",{children:"Tier"}),Se.jsx("th",{children:"Crafting Cost"}),Se.jsx("th",{children:"Daily Earnings"}),Se.jsx("th",{children:"ROI Period"}),Se.jsx("th",{children:"Profit Margin"})]})}),Se.jsx("tbody",{children:Es.map((e,t)=>{const s=d(e);return Se.jsxs("tr",{children:[Se.jsx("td",{children:e.name}),Se.jsx("td",{children:Se.jsx("span",{className:`tier-badge ${e.tier}`,children:e.tier})}),Se.jsxs("td",{children:[s.craftingCost.toFixed(4)," WAX"]}),Se.jsxs("td",{children:[s.dailyEarnings.toFixed(4)," WAX"]}),Se.jsxs("td",{children:[s.roiDays.toFixed(1)," days"]}),Se.jsxs("td",{className:s.profitMargin>0?"positive":"negative",children:[s.profitMargin.toFixed(1),"%"]})]},t)})})]})})]}),"staking"===e&&Se.jsxs("div",{className:"staking-tab",children:[Se.jsx("h2",{children:"Staking Information"}),Se.jsx("p",{className:"staking-description",children:"Stake your Pixel Journey NFTs to earn PXJ and WUF rewards. Use PXJ to infuse, upgrade, and unlock new journeys while earning returns over a 2-3 year period. Benefit from our yearly PXJ allocations (~25% of yearly inflation) that boost crafting incentives and reward active participants in the ecosystem."}),Se.jsxs("div",{className:"staking-tiers",children:[Se.jsxs("div",{className:"collapsible-section",children:[Se.jsxs("button",{className:"section-header",onClick:()=>c(e=>({...e,collectibles:!e.collectibles})),children:[Se.jsx("h3",{children:"Collectibles"}),Se.jsx("span",{className:"collapse-icon "+(o.collectibles?"collapsed":""),children:"\u25bc"})]}),!o.collectibles&&Se.jsx("div",{className:"tiers-grid",children:Se.jsxs("div",{className:"tier-section",children:[Se.jsx("h4",{className:"tier-title",children:"PFPs"}),Se.jsx("div",{className:"tier-items",children:dn.filter(e=>"pixals"===e.type).map(e=>{const t=m(e.id),s="https://ipfs.io/ipfs/QmQKA9fxWBAsoDnMRZj1v1vsjwZeWZpHmnoEyujmeMi2rp";return Se.jsxs("div",{className:"tier-item",children:[p(t)?Se.jsx("video",{src:t,autoPlay:!0,loop:!0,muted:!0,onError:t=>{t.currentTarget.style.display="none";const a=document.createElement("img");a.src=s,a.alt=e.name,t.currentTarget.parentNode?.appendChild(a)}}):Se.jsx("img",{src:t,alt:e.name,onError:e=>{e.currentTarget.src=s}}),Se.jsxs("div",{className:"tier-info",children:[Se.jsx("h5",{children:e.name}),Se.jsxs("div",{className:"tier-stats",children:[Se.jsxs("span",{children:["PXJ: ",e.pxj]}),Se.jsxs("span",{children:["WUF: ",e.wuf]}),e.pxjUpgrade>0&&Se.jsxs("span",{children:["Upgrade: ",e.pxjUpgrade.toLocaleString()," PXJ"]})]})]})]},e.id)})})]})})]}),Se.jsxs("div",{className:"collapsible-section",children:[Se.jsxs("button",{className:"section-header",onClick:()=>c(e=>({...e,ingredients:!e.ingredients})),children:[Se.jsx("h3",{children:"Ingredients"}),Se.jsx("span",{className:"collapse-icon "+(o.ingredients?"collapsed":""),children:"\u25bc"})]}),!o.ingredients&&Se.jsxs("div",{className:"tiers-grid",children:[u.pixelpack.length>0&&Se.jsxs("div",{className:"tier-section",children:[Se.jsx("h4",{className:"tier-title",children:"Pixel Ingredient Pack"}),Se.jsx("div",{className:"tier-items",children:u.pixelpack.map(e=>{const t=m(e.id),s="https://pixeljourney.xyz/img/pixel_journey_pack_002_500x500.gif";return Se.jsxs("div",{className:"tier-item",children:[p(t)?Se.jsx("video",{src:t,autoPlay:!0,loop:!0,muted:!0,onError:t=>{t.currentTarget.style.display="none";const a=document.createElement("img");a.src=s,a.alt=e.name,t.currentTarget.parentNode?.appendChild(a)}}):Se.jsx("img",{src:t,alt:e.name,onError:e=>{e.currentTarget.src=s}}),Se.jsxs("div",{className:"ingredient-info",children:[Se.jsx("h5",{children:e.name}),Se.jsxs("div",{className:"ingredient-stats",children:[Se.jsxs("span",{children:["PXJ: ",e.pxj]}),Se.jsxs("span",{children:["WUF: ",e.wuf]}),e.pxjUpgrade>0&&Se.jsxs("span",{children:["Cost: ",e.pxjUpgrade.toLocaleString()," PXJ"]})]})]})]},e.id)})})]}),Object.entries(u).filter(([e])=>"pixals"!==e&&"pixelpack"!==e).map(([e,t])=>Se.jsxs("div",{className:"tier-section",children:[Se.jsxs("h4",{className:"tier-title",children:[e.charAt(0).toUpperCase()+e.slice(1)," Ingredients"]}),Se.jsx("div",{className:"tier-items",children:t.map(e=>{const t=m(e.id),s="pixelpack"===e.type?"https://pixeljourney.xyz/img/pixel_journey_pack_002_500x500.gif":"pixals"===e.type?"https://ipfs.io/ipfs/QmQKA9fxWBAsoDnMRZj1v1vsjwZeWZpHmnoEyujmeMi2rp":"/img/placeholder-ingredient.png";return Se.jsxs("div",{className:"tier-item",children:[p(t)?Se.jsx("video",{src:t,autoPlay:!0,loop:!0,muted:!0,onError:t=>{t.currentTarget.style.display="none";const a=document.createElement("img");a.src=s,a.alt=e.name,t.currentTarget.parentNode?.appendChild(a)}}):Se.jsx("img",{src:t,alt:e.name,onError:e=>{e.currentTarget.src=s}}),Se.jsxs("div",{className:"ingredient-info",children:[Se.jsx("h5",{children:e.name}),Se.jsxs("div",{className:"ingredient-stats",children:[Se.jsxs("span",{children:["PXJ: ",e.pxj]}),Se.jsxs("span",{children:["WUF: ",e.wuf]}),e.pxjUpgrade>0&&Se.jsxs("span",{children:["Cost: ",e.pxjUpgrade.toLocaleString()," PXJ"]})]})]})]},e.id)})})]},e))]})]}),Se.jsxs("div",{className:"collapsible-section",children:[Se.jsxs("button",{className:"section-header",onClick:()=>c(e=>({...e,governance:!e.governance})),children:[Se.jsx("h3",{children:"Governance NFTs"}),Se.jsx("span",{className:"collapse-icon "+(o.governance?"collapsed":""),children:"\u25bc"})]}),!o.governance&&Se.jsx("div",{className:"coming-soon-content",children:Se.jsx("p",{children:"Coming soon at next PixelDAO expansions"})})]})]})]})]}),Se.jsx($s,{isOpen:s,onClose:()=>a(!1),ingredient:null})]})};const hn=new class{constructor(){M(this,"FEATURE_ACCOUNT","feature.pxj"),M(this,"MIN_AMOUNT",5e5),M(this,"MAX_AMOUNT",5e6),M(this,"MIN_DAYS",30),M(this,"MAX_DAYS",365)}calculateDuration(e){const t=(e-this.MIN_AMOUNT)/(this.MAX_AMOUNT-this.MIN_AMOUNT);return Math.floor(this.MIN_DAYS+t*(this.MAX_DAYS-this.MIN_DAYS))}calculateRequiredAmount(e){const t=(e-this.MIN_DAYS)/(this.MAX_DAYS-this.MIN_DAYS);return Math.floor(this.MIN_AMOUNT+t*(this.MAX_AMOUNT-this.MIN_AMOUNT))}generatePromoMemo(e){const t=`${e.tokenSymbol}@${e.tokenContract}`,s=t.length+1+(e.imageUrl?e.imageUrl.length+1:0)+(e.websiteUrl?e.websiteUrl.length+1:0),a=Math.min(100,235-s);let n=e.description;n.length>a&&(n=n.substring(0,a-3)+"...");let i=`${t}|${n}`;return e.imageUrl&&(i+=`|${e.imageUrl}`),e.websiteUrl&&(i+=`|${e.websiteUrl}`),i}parseMemo(e){if(!e)return null;try{if(e.includes("|")&&e.includes("@")&&!e.startsWith("{")){const t=e.split("|");if(t.length>=2){const[e,s,a="",n=""]=t,[i,r]=e.split("@");return{type:"feature_token",token:e,tokenSymbol:i,tokenContract:r,description:s,image:a,website:n}}}const t=JSON.parse(e);return"feature_token"===t.type?t:null}catch(t){return De.error("Failed to parse memo:","FeaturedTokensService.parseMemo",t),null}}async getFeaturedTokens(){try{const t=await fetch(`https://wax.eosrio.io/v2/history/get_actions?account=${this.FEATURE_ACCOUNT}&filter=eosio.token:transfer&limit=100&sort=desc`);if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);const s=await t.json(),a=[];for(const n of s.actions||[])try{const e=n.act.data,t=this.parseMemo(e.memo);if(!t||"feature_token"!==t.type)continue;const s=parseFloat(e.quantity.split(" ")[0]),i=new Date(n.timestamp),r=new Date(i.getTime()+24*t.duration*60*60*1e3),l=new Date<=r;if(s>=this.MIN_AMOUNT&&l){const[e,o]=t.token.split("@");a.push({id:n.trx_id,tokenSymbol:e,tokenContract:o,description:t.description,imageUrl:t.image,websiteUrl:t.website,paidAmount:s,startDate:i,endDate:r,transactionId:n.trx_id,isActive:l})}}catch(e){De.error("Error processing featured token action:","FeaturedTokensService.getFeaturedTokens",e)}return a.sort((e,t)=>e.paidAmount!==t.paidAmount?t.paidAmount-e.paidAmount:t.startDate.getTime()-e.startDate.getTime())}catch(e){return De.error("Failed to fetch featured tokens:","FeaturedTokensService.getFeaturedTokens",e),[]}}validatePayment(e){if(e.amount<this.MIN_AMOUNT||e.amount>this.MAX_AMOUNT)return{valid:!1,error:`Amount must be between ${this.MIN_AMOUNT.toLocaleString()} and ${this.MAX_AMOUNT.toLocaleString()} PXJ`};if(e.duration<this.MIN_DAYS||e.duration>this.MAX_DAYS)return{valid:!1,error:`Duration must be between ${this.MIN_DAYS} and ${this.MAX_DAYS} days`};if(!e.tokenSymbol||!e.tokenContract)return{valid:!1,error:"Token symbol and contract are required"};if(!e.description||e.description.length<10)return{valid:!1,error:"Description must be at least 10 characters"};const t=`${e.tokenSymbol}@${e.tokenContract}`.length+1+(e.imageUrl?e.imageUrl.length+1:0)+(e.websiteUrl?e.websiteUrl.length+1:0),s=Math.min(100,235-t);return e.description.length>s?{valid:!1,error:`Description too long. Maximum ${s} characters allowed with current image/website URLs.`}:{valid:!0}}},mn=({className:e=""})=>{const{account:t,session:s}=Ds(),{showSuccess:a,showError:n}=xt(),[i,r]=O.useState([]),[l,o]=O.useState(!0),[c,d]=O.useState(!1),[u,h]=O.useState({amount:5e5,duration:30,tokenSymbol:"",tokenContract:"",description:"",imageUrl:"",websiteUrl:""});O.useEffect(()=>{m()},[]);const m=async()=>{try{o(!0);const e=await hn.getFeaturedTokens();r(e)}catch(e){De.error("Failed to load featured tokens:","FeaturedTokens.loadFeaturedTokens",e)}finally{o(!1)}},p=e=>{const t=new Date,s=e.getTime()-t.getTime(),a=Math.floor(s/864e5),n=Math.floor(s%864e5/36e5);return a>0?`${a}d ${n}h remaining`:n>0?`${n}h remaining`:"Expires soon"};return Se.jsxs("div",{className:`featured-tokens ${e}`,children:[Se.jsxs("div",{className:"featured-tokens-header",children:[Se.jsx("h3",{children:"\ud83c\udf1f Featured Tokens"}),Se.jsx("button",{className:"promote-button",onClick:()=>d(!0),disabled:!t,children:"Promote Your Token"})]}),l?Se.jsxs("div",{className:"featured-tokens-loading",children:[Se.jsx("div",{className:"loading-spinner"}),Se.jsx("span",{children:"Loading featured tokens..."})]}):i.length>0?Se.jsx("div",{className:"featured-tokens-grid",children:i.slice(0,6).map(e=>Se.jsxs("div",{className:"featured-token-card",children:[e.imageUrl&&Se.jsx("div",{className:"token-image",children:Se.jsx("img",{src:e.imageUrl,alt:e.tokenSymbol})}),Se.jsxs("div",{className:"token-info",children:[Se.jsxs("div",{className:"token-header",children:[Se.jsx("span",{className:"token-symbol",children:e.tokenSymbol}),Se.jsxs("span",{className:"token-contract",children:["@",e.tokenContract]})]}),Se.jsx("p",{className:"token-description",children:e.description}),Se.jsxs("div",{className:"token-meta",children:[Se.jsxs("span",{className:"promo-amount",children:[e.paidAmount.toLocaleString()," PXJ"]}),Se.jsx("span",{className:"time-remaining",children:p(e.endDate)})]}),e.websiteUrl&&Se.jsx("a",{href:e.websiteUrl,target:"_blank",rel:"noopener noreferrer",className:"token-website",children:"Visit Website \u2192"})]})]},e.id))}):Se.jsxs("div",{className:"no-featured-tokens",children:[Se.jsx("p",{children:"No featured tokens at the moment."}),Se.jsx("p",{children:"Be the first to promote your token!"})]}),c&&Se.jsx("div",{className:"promo-modal-overlay",onClick:()=>d(!1),children:Se.jsxs("div",{className:"promo-modal",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"promo-modal-header",children:[Se.jsx("h3",{children:"Promote Your Token"}),Se.jsx("button",{className:"close-button",onClick:()=>d(!1),children:"\xd7"})]}),Se.jsxs("div",{className:"promo-form",children:[Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{children:"Token Symbol"}),Se.jsx("input",{type:"text",value:u.tokenSymbol,onChange:e=>h(t=>({...t,tokenSymbol:e.target.value.toUpperCase()})),placeholder:"e.g., MYTOKEN"})]}),Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{children:"Token Contract"}),Se.jsx("input",{type:"text",value:u.tokenContract,onChange:e=>h(t=>({...t,tokenContract:e.target.value})),placeholder:"e.g., mycontract12"})]}),Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{children:"Description"}),Se.jsx("textarea",{value:u.description,onChange:e=>h(t=>({...t,description:e.target.value})),placeholder:"Describe your token and why users should trade it...",rows:3})]}),Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{children:"Image URL (optional)"}),Se.jsx("input",{type:"url",value:u.imageUrl,onChange:e=>h(t=>({...t,imageUrl:e.target.value})),placeholder:"https://example.com/token-logo.png"})]}),Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{children:"Website URL (optional)"}),Se.jsx("input",{type:"url",value:u.websiteUrl,onChange:e=>h(t=>({...t,websiteUrl:e.target.value})),placeholder:"https://yourtoken.com"})]}),Se.jsxs("div",{className:"form-group",children:[Se.jsxs("label",{children:["Promotion Amount: ",u.amount.toLocaleString()," PXJ"]}),Se.jsx("input",{type:"range",min:5e5,max:5e6,step:5e4,value:u.amount,onChange:e=>(e=>{const t=hn.calculateDuration(e);h(s=>({...s,amount:e,duration:t}))})(parseInt(e.target.value)),className:"amount-slider"}),Se.jsxs("div",{className:"slider-labels",children:[Se.jsx("span",{children:"500K PXJ (30 days)"}),Se.jsx("span",{children:"5M PXJ (365 days)"})]})]}),Se.jsxs("div",{className:"promotion-summary",children:[Se.jsxs("div",{className:"summary-item",children:[Se.jsx("span",{children:"Duration:"}),Se.jsxs("span",{children:[u.duration," days"]})]}),Se.jsxs("div",{className:"summary-item",children:[Se.jsx("span",{children:"Cost:"}),Se.jsxs("span",{children:[u.amount.toLocaleString()," PXJ"]})]})]}),Se.jsxs("div",{className:"form-actions",children:[Se.jsx("button",{className:"cancel-button",onClick:()=>d(!1),children:"Cancel"}),Se.jsx("button",{className:"submit-button",onClick:async()=>{if(!t||!s)return void n("Please connect your wallet first");const e=hn.validatePayment(u);if(e.valid)try{const e=hn.generatePromoMemo(u),n={actions:[{account:"pixeljourney",name:"transfer",authorization:[{actor:t,permission:"active"}],data:{from:t,to:"feature.pxj",quantity:`${u.amount.toFixed(4)} PXJ`,memo:e}}]},i=await s.transact(n);let r=null;i&&(r=i.transaction_id||i.id||i.processed?.id||i.processed?.transaction_id||i.response&&i.response.transaction_id||i.transaction&&i.transaction.id),a(r?`Promotion submitted successfully! Transaction: ${r}`:"Promotion submitted successfully!"),d(!1),setTimeout(()=>{m()},3e3)}catch(i){De.error("Failed to submit promotion:","FeaturedTokens.submitPromotion",i),n(`Failed to submit promotion: ${i instanceof Error?i.message:"Unknown error"}`)}else n(e.error||"Invalid promotion parameters")},disabled:!u.tokenSymbol||!u.tokenContract||!u.description,children:"Submit Promotion"})]})]})]})})]})},pn=()=>Se.jsx("div",{className:"pxswap-page",children:Se.jsxs("div",{className:"pxswap-container",children:[Se.jsxs("div",{className:"pxswap-header",children:[Se.jsx("h1",{children:"PxSwap"}),Se.jsxs("p",{children:["PxSwap currently uses ",Se.jsx("strong",{children:Se.jsx("a",{href:"https://alcor.exchange/swap",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--primary-purple)",textDecoration:"none",fontWeight:"500"},onMouseEnter:e=>e.target.style.textDecoration="underline",onMouseLeave:e=>e.target.style.textDecoration="none",children:"Alcor Exchange"})})," for all swaps, providing reliable liquidity and competitive rates. We're expanding to include multi-DEX routing in the future."]})]}),Se.jsx("div",{className:"pxswap-content",children:Se.jsx($a,{})}),Se.jsxs("div",{className:"pxswap-info",children:[Se.jsxs("div",{className:"swap-info-section",children:[Se.jsx("h3",{children:"\ud83d\udd04 PxSwap Platform Overview"}),Se.jsxs("div",{className:"info-grid",children:[Se.jsxs("div",{className:"info-card",children:[Se.jsx("h4",{children:"Universal Token Swapping"}),Se.jsx("p",{children:"PxSwap enables seamless trading of any tokens held directly on our platform. Trade between WAX ecosystem tokens, community tokens, and project-specific assets with ease using our integrated Alcor Exchange routing."})]}),Se.jsxs("div",{className:"info-card routing-info",children:[Se.jsx("h4",{children:"\ud83d\udee3\ufe0f Multi-DEX Routing"}),Se.jsxs("p",{children:["PxSwap currently uses ",Se.jsx("strong",{children:"Alcor Exchange"})," for all swaps, providing reliable liquidity and competitive rates. We're expanding to include multi-DEX routing in the future for even better prices and deeper liquidity."]}),Se.jsxs("p",{children:[Se.jsx("strong",{children:"Want advanced routing now?"})," Visit"," ",Se.jsx("a",{href:"https://waxonedge.app/swap/WAX_eosio.token/PXJ_pixeljourney",target:"_blank",rel:"noopener noreferrer",className:"external-link",children:"WaxOnEdge"})," ","for their ecosystem-MVP swap routing platform."]})]})]})]}),Se.jsx(mn,{}),Se.jsxs("div",{className:"swap-info-section",children:[Se.jsx("h3",{children:"\ud83d\udcb0 DeFi & LP Farming on WAX"}),Se.jsxs("div",{className:"info-grid",children:[Se.jsxs("div",{className:"info-card",children:[Se.jsx("h4",{children:"\ud83c\udfdb\ufe0f Alcor Exchange"}),Se.jsx("p",{children:"The premier DEX on WAX with deep liquidity pools and farming opportunities."}),Se.jsx("a",{href:"https://alcor.exchange/farm",target:"_blank",rel:"noopener noreferrer",className:"info-link",children:"Farm on Alcor \u2192"})]}),Se.jsxs("div",{className:"info-card",children:[Se.jsx("h4",{children:"\ud83c\udf2e TacoCrypto"}),Se.jsx("p",{children:"Innovative DeFi platform offering unique yield farming and staking mechanisms."}),Se.jsx("a",{href:"https://swap.tacocrypto.io/meal",target:"_blank",rel:"noopener noreferrer",className:"info-link",children:"Explore TacoCrypto \u2192"})]})]})]}),Se.jsxs("div",{className:"swap-info-section",children:[Se.jsx("h3",{children:"\ud83d\udcc8 PXJ Spot Markets"}),Se.jsxs("div",{className:"info-grid",children:[Se.jsxs("div",{className:"info-card",children:[Se.jsx("h4",{children:"PXJ/WAX"}),Se.jsx("p",{children:"Primary trading pair with highest liquidity"}),Se.jsx("a",{href:"https://alcor.exchange/trade/pxj-pixeljourney_wax-eosio.token",target:"_blank",rel:"noopener noreferrer",className:"info-link",children:"Trade PXJ/WAX \u2192"})]}),Se.jsxs("div",{className:"info-card",children:[Se.jsx("h4",{children:"PXJ/WUF"}),Se.jsx("p",{children:"Community favorite pairing"}),Se.jsx("a",{href:"https://alcor.exchange/trade/pxj-pixeljourney_wuf-wuffi",target:"_blank",rel:"noopener noreferrer",className:"info-link",children:"Trade PXJ/WUF \u2192"})]}),Se.jsxs("div",{className:"info-card community-request",children:[Se.jsx("h4",{children:"\ud83e\udd14 What's Next?"}),Se.jsx("p",{children:"What market should we open next? WPIXAL/PXJ? WPIXAL/USDC? Let us and the WaxRock Council know on our Discord!"}),Se.jsx("a",{href:"#",className:"info-link discord-link",children:"Join Discord \u2192"})]})]})]}),Se.jsxs("div",{className:"swap-info-section",children:[Se.jsx("h3",{children:"\ud83d\udcca WAX DeFi Analytics"}),Se.jsxs("div",{className:"info-grid",children:[Se.jsxs("div",{className:"info-card",children:[Se.jsx("h4",{children:"\ud83d\udcc8 Alcor Analytics"}),Se.jsx("p",{children:"Detailed trading data and market insights for Alcor Exchange"}),Se.jsx("a",{href:"https://alcor.exchange/analytics/",target:"_blank",rel:"noopener noreferrer",className:"info-link",children:"View Alcor Data \u2192"})]}),Se.jsxs("div",{className:"info-card",children:[Se.jsx("h4",{children:"\ud83c\udf0a WaxOnEdge Analytics"}),Se.jsx("p",{children:"Comprehensive ecosystem analytics and cross-DEX insights"}),Se.jsx("a",{href:"https://waxonedge.app/analytics",target:"_blank",rel:"noopener noreferrer",className:"info-link",children:"Explore WaxOnEdge \u2192"})]}),Se.jsxs("div",{className:"info-card",children:[Se.jsx("h4",{children:"\ud83d\udd0d WAX Network Overview"}),Se.jsx("p",{children:"Complete WAX blockchain DeFi metrics and network statistics"}),Se.jsx("a",{href:"https://grafana.waxtools.net/",target:"_blank",rel:"noopener noreferrer",className:"info-link",children:"View Network Stats \u2192"})]})]})]})]})]})}),fn=({alert:e,onClose:t})=>{const[s,a]=O.useState(!1),[n,i]=O.useState(!1),r=O.useCallback(()=>{i(!0),setTimeout(()=>{t()},300)},[t]);O.useEffect(()=>{const e=setTimeout(()=>a(!0),100),t=setTimeout(()=>{r()},8e3);return()=>{clearTimeout(e),clearTimeout(t)}},[r]);return Se.jsx("div",{className:`price-alert-notification ${s&&!n?"visible":""} ${n?"closing":""}`,children:Se.jsxs("div",{className:"notification-content",children:[Se.jsxs("div",{className:"notification-header",children:[Se.jsx("div",{className:"notification-icon",children:Se.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Se.jsx("path",{d:"M15 17h5l-5 5-5-5h5v-5a7.5 7.5 0 1 0-15 0v5h5l-5 5-5-5h5v-5a12.5 12.5 0 1 1 25 0v5z"})})}),Se.jsxs("div",{className:"notification-title",children:[Se.jsx("h4",{children:"Price Alert"}),Se.jsx("span",{className:"notification-time",children:(new Date).toLocaleTimeString()})]}),Se.jsx("button",{className:"notification-close",onClick:r,children:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Se.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Se.jsxs("div",{className:"notification-body",children:[Se.jsx("div",{className:"nft-preview",children:Se.jsx("img",{src:e.item.nft.image,alt:e.item.nft.name,onError:e=>{e.target.src="https://pixeljourney.xyz/img/toppixals/10.webp"}})}),Se.jsxs("div",{className:"alert-details",children:[Se.jsx("h5",{className:"nft-name",children:e.item.nft.name}),Se.jsx("p",{className:"alert-message",children:e.message})]})]}),Se.jsxs("div",{className:"notification-actions",children:[Se.jsx("button",{className:"btn-secondary",onClick:r,children:"Dismiss"}),Se.jsx("button",{className:"btn-primary",onClick:()=>{window.location.href="/watchlist",r()},children:"View Watchlist"})]})]})})},xn=()=>{const[e,t]=O.useState([]);O.useEffect(()=>{const e=e=>{t(t=>[...t,e.detail])};return window.addEventListener("priceAlert",e),()=>{window.removeEventListener("priceAlert",e)}},[]);return Se.jsx("div",{className:"price-alert-manager",children:e.map((e,s)=>Se.jsx(fn,{alert:e,onClose:()=>(e=>{t(t=>t.filter((t,s)=>s!==e))})(s)},`${e.item.nft.asset_id}-${Date.now()}-${s}`))})},gn=()=>{const{notifications:e,removeNotification:t,soundEnabled:s}=xt(),a=O.useRef(null),n=O.useRef({}),i=(e,t,s,a)=>{const n=e.sampleRate,i=n*s,r=e.createBuffer(1,i,n),l=r.getChannelData(0);for(let o=0;o<i;o++){const e=o/n;let s=0;switch(a){case"sine":s=Math.sin(2*Math.PI*t*e);break;case"square":s=Math.sign(Math.sin(2*Math.PI*t*e));break;case"triangle":s=2/Math.PI*Math.asin(Math.sin(2*Math.PI*t*e))}const i=Math.exp(5*-e);l[o]=s*i*.1}return r},r=O.useCallback(e=>{if(s&&a.current&&n.current[e])try{const t=a.current.createBufferSource();t.buffer=n.current[e],t.connect(a.current.destination),t.start()}catch(t){console.warn("Failed to play notification sound:",t)}},[s]);if(O.useEffect(()=>((async()=>{try{a.current=new(window.AudioContext||window.webkitAudioContext);const e={success:i(a.current,800,.1,"sine"),error:i(a.current,400,.2,"square"),warning:i(a.current,600,.15,"triangle"),info:i(a.current,500,.1,"sine")};n.current=e}catch(e){console.warn("Audio context initialization failed:",e)}})(),()=>{a.current&&a.current.close()}),[]),O.useEffect(()=>{if(e.length>0){const t=e[e.length-1];r(t.type)}},[e.length,e,r]),0===e.length)return null;return Se.jsx("div",{className:"notification-container",children:e.map(e=>Se.jsx("div",{className:`notification notification-${e.type}`,"data-notification-id":e.id,children:Se.jsxs("div",{className:"notification-content",children:[Se.jsxs("div",{className:"notification-header",children:[e.title&&Se.jsx("h4",{className:"notification-title",children:e.title}),Se.jsx("button",{className:"notification-close",onClick:()=>(e=>{const s=document.querySelector(`[data-notification-id="${e}"]`);s?(s.classList.add("removing"),setTimeout(()=>{t(e)},300)):t(e)})(e.id),"aria-label":"Close notification",children:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Se.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Se.jsxs("div",{className:"notification-body",children:[Se.jsxs("div",{className:"notification-icon",children:["success"===e.type&&Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),Se.jsx("polyline",{points:"22,4 12,14.01 9,11.01"})]}),"error"===e.type&&Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("circle",{cx:"12",cy:"12",r:"10"}),Se.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),Se.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),"warning"===e.type&&Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),Se.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),Se.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),"info"===e.type&&Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("circle",{cx:"12",cy:"12",r:"10"}),Se.jsx("path",{d:"M12 16v-4"}),Se.jsx("path",{d:"M12 8h.01"})]})]}),Se.jsxs("div",{className:"notification-message",children:[Se.jsx("p",{children:e.message}),e.action&&Se.jsx("button",{className:"notification-action",onClick:e.action.onClick,children:e.action.label})]})]})]})},e.id))})},vn=()=>{const{confirmDialog:e,resolveConfirm:t}=xt();if(!e)return null;const s=()=>{t(!1)};return Se.jsx("div",{className:"modal-overlay",onClick:s,children:Se.jsxs("div",{className:"modal confirm-dialog",onClick:e=>e.stopPropagation(),children:[Se.jsxs("div",{className:"modal-header",children:[Se.jsx("h3",{children:e.title||"Confirm Action"}),Se.jsx("button",{className:"modal-close",onClick:s,children:Se.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Se.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Se.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Se.jsx("div",{className:"modal-body",children:Se.jsx("p",{children:e.message})}),Se.jsxs("div",{className:"modal-actions",children:[Se.jsx("button",{className:"btn-secondary",onClick:s,children:e.cancelText||"Cancel"}),Se.jsx("button",{className:"btn-primary",onClick:()=>{t(!0)},children:e.confirmText||"Confirm"})]})]})})};class jn extends O.Component{constructor(e){super(e),M(this,"reportError",async(e,t)=>{try{const s={message:e.message,stack:e.stack,componentStack:t.componentStack,timestamp:(new Date).toISOString(),userAgent:navigator.userAgent,url:window.location.href};Oe.warn("Error Report generated","ErrorBoundary",s)}catch(s){Oe.error("Failed to report error","ErrorBoundary",s)}}),M(this,"handleRetry",()=>{const e=this.state.retryCount+1;e>3?Oe.warn("Maximum retry attempts reached","ErrorBoundary"):this.setState({hasError:!1,error:void 0,errorInfo:void 0,retryCount:e})}),this.state={hasError:!1,retryCount:0}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){Oe.error("ErrorBoundary caught an error","ErrorBoundary",e,{componentStack:t.componentStack,errorBoundary:this.constructor.name}),this.props.onError&&this.props.onError(e,t),this.setState({error:e,errorInfo:t}),this.reportError(e,t)}render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const e=this.state.retryCount>=3;return Se.jsx(vs,{title:"Something went wrong",message:e?"Multiple errors occurred. Please refresh the page or contact support if the problem persists.":"An unexpected error occurred. Please try again or refresh the page.",onRetry:e?void 0:this.handleRetry,showRetry:!e})}return this.props.children}}class yn extends O.Component{constructor(e){super(e),M(this,"maxRetries",3),M(this,"retryTimeouts",[]),M(this,"handleRetry",()=>{if(this.state.retryCount>=this.maxRetries)return void De.warn("Max retries reached for API error boundary");const e=1e3*Math.pow(2,this.state.retryCount),t=.1*Math.random()*e,s=Math.min(e+t,3e4);this.setState({isRetrying:!0,lastRetryTime:Date.now()});const a=setTimeout(()=>{this.setState(e=>({hasError:!1,error:void 0,errorInfo:void 0,retryCount:e.retryCount+1,isRetrying:!1}))},s);this.retryTimeouts.push(a)}),M(this,"handleReset",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0,retryCount:0})}),this.state={hasError:!1,retryCount:0,isRetrying:!1,errorCategory:"unknown"}}componentWillUnmount(){this.retryTimeouts.forEach(e=>clearTimeout(e))}static getDerivedStateFromError(e){const t=e.message.toLowerCase();let s="unknown";t.includes("fetch")||t.includes("network")||t.includes("connection")?s="network":t.includes("timeout")||t.includes("aborted")?s="timeout":(t.includes("http")||t.includes("api")||t.includes("failed to load"))&&(s="api");if(["network","api","timeout"].includes(s)||"ChunkLoadError"===e.name||"TypeError"===e.name&&t.includes("fetch"))return{hasError:!0,error:e,errorCategory:s};throw e}componentDidCatch(e,t){Le.logError("APIErrorBoundary",e,{errorInfo:t,retryCount:this.state.retryCount,componentStack:t.componentStack}),this.setState({error:e,errorInfo:t}),this.props.onError&&this.props.onError(e,t)}render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const e=this.state.retryCount<this.maxRetries;let t;switch(this.state.errorCategory){case"network":t="NETWORK_ERROR";break;case"timeout":t="TIMEOUT_ERROR";break;case"api":t="API_ERROR";break;default:t="LOAD_FAILED"}return Se.jsxs("div",{className:"error-boundary-container",children:[Se.jsx(vs,{errorType:t,onRetry:e?this.handleRetry:this.handleReset,showRetry:!0,isRetrying:this.state.isRetrying,retryCount:this.state.retryCount,maxRetries:this.maxRetries}),this.state.retryCount>0&&Se.jsxs("div",{className:"error-retry-info",children:[Se.jsxs("p",{children:["Retry attempt ",this.state.retryCount," of ",this.maxRetries]}),this.state.isRetrying&&Se.jsxs("div",{className:"retry-progress",children:[Se.jsx("div",{className:"retry-spinner"}),Se.jsx("span",{children:"Retrying..."})]})]}),!1]})}return this.props.children}}const bn=()=>{const{isConnected:e,account:t}=Ie();return O.useEffect(()=>{if(!e||!t)return;const s=setTimeout(async()=>{try{const e=`watchlist_last_check_${t}`,s=localStorage.getItem(e),a=s?parseInt(s):0,n=Date.now();if(n-a<3e5)return;const i=await wt.getWatchlist();if(0===i.length)return void localStorage.setItem(e,n.toString());const r=[];for(const t of i){const e=wt.getPriceAlert(t.nft.asset_id);if(e&&e.enabled&&e.lastTriggered&&e.lastTriggered>a){let s="";const a=t.lastPrice||parseFloat(t.nft.price||"0");switch(e.alertType){case"below":s=`${t.nft.name} price dropped to ${a.toFixed(2)} WAX (target: ${e.targetPrice} WAX)`;break;case"above":s=`${t.nft.name} price rose to ${a.toFixed(2)} WAX (target: ${e.targetPrice} WAX)`;break;case"any":{const e=Math.abs(t.priceChange||0),n=(t.priceChange||0)>0?"increased":"decreased";s=`${t.nft.name} price ${n} by ${e.toFixed(1)}% to ${a.toFixed(2)} WAX`;break}}r.push({alert:e,item:t,message:s,triggeredAt:e.lastTriggered})}}r.sort((e,t)=>t.triggeredAt-e.triggeredAt),r.forEach((e,t)=>{setTimeout(()=>{window.dispatchEvent(new CustomEvent("priceAlert",{detail:{item:e.item,message:e.message}}))},1e3*t)}),localStorage.setItem(e,n.toString()),r.length>0&&De.info(`Found ${r.length} triggered watchlist alerts since last visit`)}catch(e){De.error("Error checking watchlist alerts:","WatchlistAlertChecker.checkTriggeredAlerts",e)}},2e3);return()=>clearTimeout(s)},[e,t]),null},Nn=()=>{const[e,t]=O.useState(null),[s,a]=O.useState(!1),[n,i]=O.useState(!1),[r,l]=O.useState(navigator.onLine),[o,c]=O.useState(!1);O.useEffect(()=>{(()=>{const e=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://");c(e),i(e)})();const e=e=>{e.preventDefault();t(e),a(!0)},s=()=>{i(!0),a(!1),t(null)},n=()=>l(!0),r=()=>l(!1);window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",s),window.addEventListener("online",n),window.addEventListener("offline",r);const o=window.matchMedia("(display-mode: standalone)"),d=e=>{c(e.matches),i(e.matches)};return o.addEventListener?o.addEventListener("change",d):o.addListener(d),()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",s),window.removeEventListener("online",n),window.removeEventListener("offline",r),o.removeEventListener?o.removeEventListener("change",d):o.removeListener(d)}},[]);return{isInstallable:s,isInstalled:n,isOnline:r,isStandalone:o,installPrompt:e,showInstallPrompt:async()=>{if(e)try{await e.prompt();const{outcome:s}=await e.userChoice;De.info("accepted"===s?"User accepted the install prompt":"User dismissed the install prompt"),t(null),a(!1)}catch(s){De.error("Error showing install prompt:","usePWA.showInstallPrompt",s)}},dismissInstallPrompt:()=>{t(null),a(!1)}}},wn=({className:e=""})=>{const{isInstallable:t,isInstalled:s,isStandalone:a,showInstallPrompt:n,dismissInstallPrompt:i}=Nn();return!t||s||a?null:Se.jsx("div",{className:`pwa-install-banner ${e}`,role:"banner","aria-label":"Install app banner",children:Se.jsxs("div",{className:"pwa-banner-content",children:[Se.jsx("div",{className:"pwa-banner-icon",children:Se.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[Se.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",fill:"currentColor",fillOpacity:"0.1",stroke:"currentColor",strokeWidth:"1.5"}),Se.jsx("path",{d:"M8 12l2 2 4-4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),Se.jsxs("div",{className:"pwa-banner-text",children:[Se.jsx("h3",{className:"pwa-banner-title",children:"Install PxMarket"}),Se.jsx("p",{className:"pwa-banner-description",children:"Get the full app experience with offline access and faster loading."})]}),Se.jsxs("div",{className:"pwa-banner-actions",children:[Se.jsxs("button",{type:"button",className:"pwa-install-button",onClick:n,"aria-label":"Install PxMarket app",children:[Se.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:Se.jsx("path",{d:"M8 1v10M4 7l4 4 4-4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Install"]}),Se.jsx("button",{type:"button",className:"pwa-dismiss-button",onClick:i,"aria-label":"Dismiss install banner",children:Se.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:Se.jsx("path",{d:"M12 4L4 12M4 4l8 8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]})})},kn=({className:e=""})=>{const{isOnline:t}=Nn();return t?null:Se.jsx("div",{className:`offline-indicator ${e}`,role:"status","aria-live":"polite","aria-label":"You are currently offline",children:Se.jsxs("div",{className:"offline-content",children:[Se.jsx("div",{className:"offline-icon",children:Se.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[Se.jsx("path",{d:"M3 7c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v6c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2V7z",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),Se.jsx("path",{d:"M7 9l6 4M13 9l-6 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}),Se.jsxs("div",{className:"offline-text",children:[Se.jsx("span",{className:"offline-title",children:"You're offline"}),Se.jsx("span",{className:"offline-description",children:"Some features may be limited"})]}),Se.jsx("div",{className:"offline-pulse","aria-hidden":"true"})]})})},_n=()=>{const[e,t]=O.useState([]),[s,a]=O.useState(new Set),{activeTransactions:n,completedTransactions:i}=(()=>{const[e,t]=O.useState({activeTransactions:new Map,completedTransactions:[],isProcessing:!1}),{executeTransaction:s,getTransaction:a,cancelTransaction:n}=Ie(),i=O.useRef(new Map),r=O.useCallback((e,s)=>{t(t=>{const a=new Map(t.activeTransactions),n=a.get(e);if(n){const r={...n,...s};if("success"===r.status||"failed"===r.status||"cancelled"===r.status){a.delete(e);const s=i.current.get(e);return s&&(clearInterval(s),i.current.delete(e)),{...t,activeTransactions:a,completedTransactions:[r,...t.completedTransactions.slice(0,49)],isProcessing:a.size>0}}return a.set(e,r),{...t,activeTransactions:a}}return t})},[]),l=O.useCallback(async e=>{try{if(!a)return void De.warn("getWalletTransaction not available");const t=await a(e);t&&r(e,t)}catch(t){De.error(`Error polling transaction ${e}:`,"useTransactionManager.pollTransactionStatus",t),r(e,{status:"failed",error:"Failed to check transaction status"})}},[a,r]),o=O.useCallback(e=>{const t=i.current.get(e);t&&clearInterval(t);const s=setInterval(()=>{l(e)},2e3);i.current.set(e,s),setTimeout(()=>{i.current.get(e)===s&&(clearInterval(s),i.current.delete(e),r(e,{status:"failed",error:"Transaction timeout - please check manually"}))},3e5)},[l,r]),c=O.useCallback(async(e,a)=>{try{if(t(e=>({...e,isProcessing:!0})),!s)throw new Error("executeTransaction not available - wallet not connected");const n=await s(e,a);if(n){const s={id:n,type:e,status:"pending",timestamp:Date.now(),account:"",actions:[],metadata:a};return t(e=>{const t=new Map(e.activeTransactions);return t.set(n,s),{...e,activeTransactions:t}}),o(n),n}return null}catch(n){throw De.error("Error starting transaction:","useTransactionManager.startTransaction",n),t(e=>({...e,isProcessing:!1})),n}},[s,o]),d=O.useCallback(t=>{const s=e.activeTransactions.get(t);return s||(e.completedTransactions.find(e=>e.id===t)||null)},[e.activeTransactions,e.completedTransactions]),u=O.useCallback(async e=>{try{if(!n)return De.warn("cancelWalletTransaction not available"),!1;const t=await n(e);return t&&r(e,{status:"cancelled",error:"Transaction cancelled by user"}),t}catch(t){return De.error("Error cancelling transaction:","useTransactionManager.cancelTransaction",t),!1}},[n,r]),h=O.useCallback(()=>{t(e=>({...e,completedTransactions:[]}))},[]),m=O.useCallback(()=>e.activeTransactions.size,[e.activeTransactions.size]),p=O.useCallback(()=>e.completedTransactions.length,[e.completedTransactions.length]),f=O.useCallback(()=>e.completedTransactions.some(e=>"failed"===e.status),[e.completedTransactions]);return{activeTransactions:Array.from(e.activeTransactions.values()),completedTransactions:e.completedTransactions,isProcessing:e.isProcessing,startTransaction:c,getTransaction:d,cancelTransaction:u,clearCompleted:h,getActiveCount:m,getCompletedCount:p,hasFailedTransactions:f}})(),{showSuccess:r,showError:l}=xt(),o=O.useCallback(e=>{const s={...e,id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),autoHide:e.autoHide??!0,duration:e.duration??5e3};t(e=>[s,...e.slice(0,4)]),s.autoHide&&setTimeout(()=>{c(s.id)},s.duration)},[]),c=O.useCallback(e=>{t(t=>t.filter(t=>t.id!==e))},[]);O.useEffect(()=>{[...n,...i].forEach(e=>{if(!s.has(e.id))switch(a(t=>new Set([...t,e.id])),e.status){case"pending":o({type:"info",title:"Transaction Started",message:`${d(e.type)} transaction is being prepared...`,transactionId:e.id,duration:3e3});break;case"processing":o({type:"info",title:"Processing Transaction",message:`${d(e.type)} is being processed on the blockchain...`,transactionId:e.id,duration:4e3});break;case"success":o({type:"success",title:"Transaction Successful!",message:`${d(e.type)} completed successfully`,transactionId:e.id,duration:6e3}),r("Transaction Complete",`Your ${d(e.type).toLowerCase()} has been processed successfully!`);break;case"failed":o({type:"error",title:"Transaction Failed",message:e.error||`${d(e.type)} failed to process`,transactionId:e.id,autoHide:!1}),l("Transaction Failed",e.error||"Your transaction failed to process. Please try again.");break;case"cancelled":o({type:"warning",title:"Transaction Cancelled",message:`${d(e.type)} was cancelled`,transactionId:e.id,duration:4e3})}})},[n,i,s,o,r,l]);const d=e=>{switch(e){case"nft_purchase":return"NFT Purchase";case"nft_transfer":return"NFT Transfer";case"token_transfer":return"Token Transfer";case"nft_listing":return"NFT Listing";case"listing_cancel":return"Cancel Listing";case"crafting":return"Crafting";case"blend":return"Blend";case"burn":return"Burn Assets";case"unpack":return"Unpack Asset";case"auction_bid":return"Auction Bid";case"tokenize_wax":return"Tokenize WAX";default:return e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())}},u=e=>{switch(e){case"success":return"\u2705";case"error":return"\u274c";case"warning":return"\u26a0\ufe0f";default:return"\u2139\ufe0f"}},h=e=>{const t=Date.now()-e,s=Math.floor(t/1e3),a=Math.floor(s/60);if(s<60)return"Just now";if(a<60)return`${a}m ago`;const n=Math.floor(a/60);return n<24?`${n}h ago`:new Date(e).toLocaleDateString()};return 0===e.length?null:Se.jsx("div",{className:"transaction-notifications",children:e.map(e=>Se.jsxs("div",{className:`notification notification-${e.type}`,children:[Se.jsxs("div",{className:"notification-content",children:[Se.jsxs("div",{className:"notification-header",children:[Se.jsx("span",{className:"notification-icon",children:u(e.type)}),Se.jsx("span",{className:"notification-title",children:e.title}),Se.jsx("span",{className:"notification-time",children:h(e.timestamp)}),Se.jsx("button",{className:"notification-close",onClick:()=>c(e.id),children:"\xd7"})]}),Se.jsx("div",{className:"notification-message",children:e.message}),e.transactionId&&Se.jsxs("div",{className:"notification-transaction-id",children:["ID: ",e.transactionId.slice(0,8),"...",e.transactionId.slice(-8)]})]}),e.autoHide&&Se.jsx("div",{className:"notification-progress",style:{animationDuration:`${e.duration}ms`}})]},e.id))})},Sn=()=>{const e=J(),[t,s]=O.useState("landing");D.useEffect(()=>{const t=e.pathname;""===t||"/"===t||"/market-alphatest/"===t||"/market-alphatest"===t?s("/landing"):"/marketplace"===t||"/market-alphatest/marketplace"===t?s("marketplace"):"/rewards"===t?s("rewards"):"/inventory"===t?s("inventory"):"/packs"===t?s("packs"):t.startsWith("/collections")?s("collections"):"/activity"===t||"/stats"===t?s("activity"):"/staking"===t?s("staking"):"/profile"===t?s("profile"):"/watchlist"===t?s("watchlist"):"/auctions"===t?s("auctions"):"/learn"===t?s("learn"):"/journeymap"===t?s("journeymap"):"/pxcrafting"===t&&s("pxcrafting")},[e.pathname]),D.useEffect(()=>{window.scrollTo(0,0)},[e.pathname]);return Se.jsxs("div",{className:"App",children:[Se.jsx(yt,{currentPage:t,onPageChange:e=>{s(e),"landing"===e?window.history.pushState(null,"","/"):"marketplace"===e?window.history.pushState(null,"","/marketplace"):window.history.pushState(null,"",`/${e}`)}}),Se.jsx("main",{id:"main-content",role:"main","aria-label":"Main content",className:"main-content",children:Se.jsxs(V,{children:[Se.jsx(G,{path:"/",element:Se.jsx(yn,{children:Se.jsx(bt,{})})}),Se.jsx(G,{path:"/marketplace",element:Se.jsx(yn,{children:Se.jsx(bs,{})})}),Se.jsx(G,{path:"/rewards",element:Se.jsx(yn,{children:Se.jsx(Ns,{})})}),Se.jsx(G,{path:"/inventory",element:Se.jsx(yn,{children:Se.jsx(Js,{})})}),Se.jsx(G,{path:"/packs",element:Se.jsx(yn,{children:Se.jsx(Ra,{})})}),Se.jsx(G,{path:"/collections",element:Se.jsx(yn,{children:Se.jsx(aa,{})})}),Se.jsx(G,{path:"/collections/:collectionName",element:Se.jsx(yn,{children:Se.jsx(oa,{})})}),Se.jsx(G,{path:"/collections/:collectionName/templates/:templateId",element:Se.jsx(yn,{children:Se.jsx(ca,{})})}),Se.jsx(G,{path:"/assets/:assetId",element:Se.jsx(yn,{children:Se.jsx(da,{})})}),Se.jsx(G,{path:"/listings/:saleId",element:Se.jsx(yn,{children:Se.jsx(ua,{})})}),Se.jsx(G,{path:"/transactions/:transactionId",element:Se.jsx(yn,{children:Se.jsx(ha,{})})}),Se.jsx(G,{path:"/activity",element:Se.jsx(yn,{children:Se.jsx(Da,{})})}),Se.jsx(G,{path:"/stats",element:Se.jsx(yn,{children:Se.jsx(Da,{})})}),Se.jsx(G,{path:"/profile",element:Se.jsx(yn,{children:Se.jsx(La,{})})}),Se.jsx(G,{path:"/profile/:account",element:Se.jsx(yn,{children:Se.jsx(Ma,{})})}),Se.jsx(G,{path:"/user-profile-lookup",element:Se.jsx(yn,{children:Se.jsx(Ma,{})})}),Se.jsx(G,{path:"/watchlist",element:Se.jsx(yn,{children:Se.jsx(Wa,{})})}),Se.jsx(G,{path:"/auctions",element:Se.jsx(yn,{children:Se.jsx(Ba,{})})}),Se.jsx(G,{path:"/auctions/:id",element:Se.jsx(yn,{children:Se.jsx(Ua,{})})}),Se.jsx(G,{path:"/learn",element:Se.jsx(yn,{children:Se.jsx(Ja,{})})}),Se.jsx(G,{path:"/journeymap",element:Se.jsx(yn,{children:Se.jsx(Va,{})})}),Se.jsx(G,{path:"/staking",element:Se.jsx(yn,{children:Se.jsx(tn,{})})}),Se.jsx(G,{path:"/rwax",element:Se.jsx(yn,{children:Se.jsx(cn,{})})}),Se.jsx(G,{path:"/pxcrafting",element:Se.jsx(yn,{children:Se.jsx(un,{})})}),Se.jsx(G,{path:"/pxswap",element:Se.jsx(yn,{children:Se.jsx(pn,{})})})]})}),Se.jsx(Oa,{})]})};Ee.createRoot(document.getElementById("root")).render(Se.jsx(O.StrictMode,{children:Se.jsx($,{})}));
//# sourceMappingURL=index-CV901gIu.js.map
