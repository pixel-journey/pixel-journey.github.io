const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/protocol-scatter.m-DKKrwVLT.js","assets/js/wharfkit-CLpwvJ3D.js","assets/js/vendor-18oYYS7b.js"])))=>i.map(i=>d[i]);
function e(e,t,n,r){var i,o=arguments.length,s=o<3?t:r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}async function t(e,t,n,r){r||(r=bn.random());const i=t.sharedSecret(n),o=function(e,t){return En.hash(Sn.encode({object:e}).appending(t.array))}(r,i),s=await async function(e,t){const n=En.hash(Sn.encode({object:t}).appending(e.array));return await crypto.subtle.importKey("raw",n.array.slice(0,32),{name:"AES-CBC"},!1,["encrypt","decrypt"])}(i,r),a=await async function(e,t,n){return In.from(await crypto.subtle.encrypt({name:"AES-CBC",iv:e.array.slice(32,48)},t,In.from(n,"utf8").array))}(o,s,e),c=new DataView(An.hash(o.array).array.buffer).getUint32(0,!0);return new hr({from:t.toPublic(),nonce:r,ciphertext:a,checksum:c})}function n(e,t,n,r){var i,o=arguments.length,s=o<3?t:r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}async function r(e,t,n){const r=await(i={...e,WebSocket:t||WebSocket},new Promise((e,t)=>{const n=new cr({...i,autoConnect:!0});let r,o;const s=(i,o)=>{clearTimeout(r),i?t(i):e(o),n.disconnect()};i.timeout&&(r=setTimeout(()=>{s(new ir("Timed out",o))},i.timeout)),n.on("error",e=>{e instanceof rr?o=e:s(e)}),n.once("message",e=>{s(void 0,e)})}));var i;if(!r)throw new Error(r.rejected);if("string"==typeof r.rejected)throw new Error(r.rejected);const o=JSON.parse(r);if(void 0===o.sa||void 0===o.sp||void 0===o.cid)throw new Error(n("error.cancelled",{default:"The request was cancelled from Anchor."}));return o}function i(){let e,t="";const n="0123456789abcdef";for(e=0;e<36;e+=1)switch(e){case 8:case 13:case 18:case 23:t+="-";break;case 14:t+="4";break;case 19:t+=n[4*Math.random()|8];break;default:t+=n[16*Math.random()|0]}return t}function o(){if(!s()||!h()){if(a())return"googlechrome://";if(u())return"firefox:://";if(s()&&l())return"brave://";if(s()){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t=window.location.href.split("#")[0]+"#";for(let n=0;n<8;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}return d()&&/Firefox/i.test(navigator.userAgent)?"android-app://org.mozilla.firefox":d()&&/Edg/.test(navigator.userAgent)?"android-app://com.microsoft.emmx":d()&&(/OPR/.test(navigator.userAgent)||/Opera/.test(navigator.userAgent))?"android-app://com.opera.browser":d()&&l()?"android-app://com.brave.browser":d()&&p()?"android-app://webview":d()&&c()?"android-app://com.android.chrome":window.location.href}}function s(){return/iP(ad|od|hone)/i.test(navigator.userAgent)}function a(){return/CriOS/.test(navigator.userAgent)}function c(){return/Chrome\/[.0-9]* Mobile/i.test(navigator.userAgent)}function u(){return/FxiOS/.test(navigator.userAgent)}function l(){return navigator.brave&&"function"==typeof navigator.brave.isBrave}function d(){return/Android/.test(navigator.userAgent)}function h(){return!!window.ReactNativeWebView}function p(){return/wv/.test(navigator.userAgent)||/Android/.test(navigator.userAgent)&&h()}function f(){let e="@wharfkit/protocol-esr 1.5.0";return"undefined"!=typeof navigator&&(e+=" "+navigator.userAgent),e}function g(e){const{service:t,channel:n}=e;return{url:`${t}/${n}`,background:!0}}function y(e){return{service:e,channel:i()}}function m(e){const t=[];let n=0,r=e.sig;for(;r;)t.push(String(r)),r=e[`sig${n}`],n++;return[...new Set(t)].map(e=>On.from(e))}function w(e,t,n){if(Sr.randomUUID&&!t&&!e)return Sr.randomUUID();const r=(e=e||{}).random??e.rng?.()??function(){if(!Ar){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ar=crypto.getRandomValues.bind(crypto)}return Ar(Er)}();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){return(br[e[t+0]]+br[e[t+1]]+br[e[t+2]]+br[e[t+3]]+"-"+br[e[t+4]]+br[e[t+5]]+"-"+br[e[t+6]]+br[e[t+7]]+"-"+br[e[t+8]]+br[e[t+9]]+"-"+br[e[t+10]]+br[e[t+11]]+br[e[t+12]]+br[e[t+13]]+br[e[t+14]]+br[e[t+15]]).toLowerCase()}(r)}function v(e){const t={};if(e.storage&&(t.Storage=function(e){if(!e)return;const{bucket_name:t,aws_region:n,buckets:r}=e;return{S3:{bucket:t,region:n,buckets:r&&S(r)}}}(e.storage)),e.auth&&(t.Auth=function(e){if(!e)return;const{user_pool_id:t,user_pool_client_id:n,identity_pool_id:r,password_policy:i,mfa_configuration:o,mfa_methods:s,unauthenticated_identities_enabled:a,oauth:c,username_attributes:u,standard_required_attributes:l,groups:d}=e,h={Cognito:{userPoolId:t,userPoolClientId:n,groups:d}};return r&&(h.Cognito={...h.Cognito,identityPoolId:r}),i&&(h.Cognito.passwordFormat={requireLowercase:i.require_lowercase,requireNumbers:i.require_numbers,requireUppercase:i.require_uppercase,requireSpecialCharacters:i.require_symbols,minLength:i.min_length??6}),o&&(h.Cognito.mfa={status:E(o),smsEnabled:s?.includes("SMS"),totpEnabled:s?.includes("TOTP")}),a&&(h.Cognito.allowGuestAccess=a),c&&(h.Cognito.loginWith={oauth:{domain:c.domain,redirectSignIn:c.redirect_sign_in_uri,redirectSignOut:c.redirect_sign_out_uri,responseType:"token"===c.response_type?"token":"code",scopes:c.scopes,providers:A(c.identity_providers)}}),u&&(h.Cognito.loginWith={...h.Cognito.loginWith,email:u.includes("email"),phone:u.includes("phone_number"),username:u.includes("username")}),l&&(h.Cognito.userAttributes=l.reduce((e,t)=>({...e,[t]:{required:!0}}),{})),h}(e.auth)),e.analytics&&(t.Analytics=function(e){if(!e?.amazon_pinpoint)return;const{amazon_pinpoint:t}=e;return{Pinpoint:{appId:t.app_id,region:t.aws_region}}}(e.analytics)),e.geo&&(t.Geo=function(e){if(!e)return;const{aws_region:t,geofence_collections:n,maps:r,search_indices:i}=e;return{LocationService:{region:t,searchIndices:i,geofenceCollections:n,maps:r}}}(e.geo)),e.data&&(t.API=function(e){if(!e)return;const{aws_region:t,default_authorization_type:n,url:r,api_key:i,model_introspection:o}=e;return{GraphQL:{endpoint:r,defaultAuthMode:b(n),region:t,apiKey:i,modelIntrospection:o}}}(e.data)),e.custom){const n=function(e){if(!e?.events)return;const{url:t,aws_region:n,api_key:r,default_authorization_type:i}=e.events;return{Events:{endpoint:t,defaultAuthMode:b(i),region:n,apiKey:r}}}(e.custom);n&&"Events"in n&&(t.API={...t.API,...n})}return e.notifications&&(t.Notifications=function(e){if(!e)return;const{aws_region:t,channels:n,amazon_pinpoint_app_id:r}=e,i=n.includes("IN_APP_MESSAGING"),o=n.includes("APNS")||n.includes("FCM");if(!i&&!o)return;const s={};return i&&(s.InAppMessaging={Pinpoint:{appId:r,region:t}}),o&&(s.PushNotification={Pinpoint:{appId:r,region:t}}),s}(e.notifications)),t}function b(e){return Gr[e]}function A(e=[]){return e.reduce((e,t)=>(void 0!==zr[t]&&e.push(zr[t]),e),[])}function E(e){return"OPTIONAL"===e?"optional":"REQUIRED"===e?"on":"off"}function S(e){const t={};return e.forEach(({name:e,bucket_name:n,aws_region:r,paths:i})=>{if(e in t)throw new Error(`Duplicate friendly name found: ${e}. Name must be unique.`);const o=i?Object.entries(i).reduce((e,[t,n])=>(void 0!==n&&(e[t]=n),e),{}):void 0;t[e]={bucketName:n,region:r,paths:o}}),t}function I(e){return e instanceof Uint8Array?e:"string"==typeof e?Xr(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}function T(e,t){Li!==e||ji||setTimeout(()=>{Li=void 0,ji=!0,setTimeout(Ki,1e3)},t)}function C(e){return"function"==typeof e}function k(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}function N(e){return e instanceof zi||e&&"closed"in e&&C(e.remove)&&C(e.add)&&C(e.unsubscribe)}function O(e){C(e)?e():e.unsubscribe()}function x(e){Qi(function(){throw e})}function D(){}function _(e){x(e)}function R(e){return e}function M(e){var t;return null!==(t=null!=e?e:Wi)&&void 0!==t?t:Promise}function P(e){return e&&e instanceof Ji||function(e){return e&&C(e.next)&&C(e.error)&&C(e.complete)}(e)&&N(e)}function L(e){return function(t){if(function(e){return C(null==e?void 0:e.lift)}(t))return t.lift(function(t){try{return e(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function U(e,t,n,r,i){return new eo(e,t,n,r,i)}function j(e){return C(null==e?void 0:e.then)}function K(e){return C(e[Xi])}function B(e){return Symbol.asyncIterator&&C(null==e?void 0:e[Symbol.asyncIterator])}function F(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function q(e){return C(null==e?void 0:e[no])}function V(e){return qn(this,arguments,function(){var t,n,r;return Un(this,function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,Vn(t.read())];case 3:return n=i.sent(),r=n.value,n.done?[4,Vn(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,Vn(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function G(e){return C(null==e?void 0:e.getReader)}function z(e){if(e instanceof $i)return e;if(null!=e){if(K(e))return i=e,new $i(function(e){var t=i[Xi]();if(C(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")});if(to(e))return r=e,new $i(function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()});if(j(e))return n=e,new $i(function(e){n.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,x)});if(B(e))return W(e);if(q(e))return t=e,new $i(function(e){var n,r;try{for(var i=jn(t),o=i.next();!o.done;o=i.next()){var s=o.value;if(e.next(s),e.closed)return}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()});if(G(e))return W(V(e))}var t,n,r,i;throw F(e)}function W(e){return new $i(function(t){(function(e,t){var n,r,i,o;return Ln(this,void 0,void 0,function(){var s,a;return Un(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=Gn(e),c.label=1;case 1:return[4,n.next()];case 2:if((r=c.sent()).done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})})(e,t).catch(function(e){return t.error(e)})})}function Q(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=!1);var o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function J(e,t){return void 0===t&&(t=0),L(function(n,r){n.subscribe(U(r,function(n){return Q(r,e,function(){return r.next(n)},t)},function(){return Q(r,e,function(){return r.complete()},t)},function(n){return Q(r,e,function(){return r.error(n)},t)}))})}function Y(e,t){return void 0===t&&(t=0),L(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function H(e,t){if(!e)throw new Error("Iterable cannot be null");return new $i(function(n){Q(n,t,function(){var r=e[Symbol.asyncIterator]();Q(n,t,function(){r.next().then(function(e){e.done?n.complete():n.next(e.value)})},0,!0)})})}function Z(e,t){if(null!=e){if(K(e))return function(e,t){return z(e).pipe(Y(t),J(t))}(e,t);if(to(e))return function(e,t){return new $i(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(j(e))return function(e,t){return z(e).pipe(Y(t),J(t))}(e,t);if(B(e))return H(e,t);if(q(e))return function(e,t){return new $i(function(n){var r;return Q(n,t,function(){r=e[no](),Q(n,t,function(){var e,t,i;try{t=(e=r.next()).value,i=e.done}catch(o){return void n.error(o)}i?n.complete():n.next(t)},0,!0)}),function(){return C(null==r?void 0:r.return)&&r.return()}})}(e,t);if(G(e))return function(e,t){return H(V(e),t)}(e,t)}throw F(e)}function X(e,t){return L(function(n,r){var i=0;n.subscribe(U(r,function(n){r.next(e.call(t,n,i++))}))})}function $(e){return L(function(t,n){var r,i=null,o=!1;i=t.subscribe(U(n,void 0,void 0,function(s){r=z(e(s,$(e)(t))),i?(i.unsubscribe(),i=null,r.subscribe(n)):o=!0})),o&&(i.unsubscribe(),i=null,r.subscribe(n))})}function ee(e=3e5){return t=>{const n=2**t*100+100*Math.random();return!(n>e)&&n}}function te(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function ne(e){let t=!0;t=!!e&&(!!e.userPoolId&&!!e.userPoolClientId),Ts(t,Ss.AuthUserPoolException)}function re(e){Ts(!!e?.identityPoolId,Ss.InvalidIdentityPoolIdException)}function ie(e){const t=e.split(".");if(3!==t.length)throw new Error("Invalid token");try{const n=t[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(Es.convert(n).split("").map(e=>`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`).join(""));return{toString:()=>e,payload:JSON.parse(r)}}catch(n){throw new Error("Invalid token payload")}}function oe(){if(!Cs&&(Cs="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Cs))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Cs(ks)}function se(e,t){$s!==e||ta||setTimeout(()=>{$s=void 0,ta=!0,setTimeout(na,1e3)},t)}function ae({expiresAt:e,clockDrift:t,tolerance:n=5e3}){return Date.now()+t+n>e}function ce(e){if(!e||!e.includes(":"))throw new Ya({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return e.split(":")[0]}function ue(e){if(function(e){return le(e)&&!e?.refreshToken}(e))throw Za;if(!function(e){return le(e)&&e?.refreshToken}(e))throw Xa}function le(e){return e?.accessToken||e?.idToken}function de(e){if(!e||"Error"===e.name||e instanceof TypeError)throw new Ya({name:ms.Unknown,message:"An unknown error has occurred.",underlyingError:e})}function he(e){const t=Object.values({...e});return(e,n)=>t.reduce((t,r)=>({...t,[r]:`${e}.${n}.${r}`}),{})}function pe(e){const t=ie(e).payload.iss,n={};if(!t)throw new Ya({name:"InvalidIdTokenException",message:"Invalid Idtoken."});return n[t.replace(/(^\w+:|^)\/\//,"")]=e,n}async function fe({tokens:e,authConfig:t,identityIdStore:n}){n.setAuthConfig({Cognito:t});const r=await n.loadIdentityId();if(r)return r.id;const i=e?.idToken?pe(e.idToken.toString()):{},o=await async function(e,t){const n=t?.identityPoolId,r=ce(n),i=(o={endpointResolver:Tc({endpointOverride:t.identityPoolEndpoint})},la(xa,Da("GetId"),Ua,{...Ea,...o,userAgentValue:oa()}));var o;let s;try{s=(await i({region:r},{IdentityPoolId:n,Logins:e})).IdentityId}catch(a){throw de(a),new Ya(a)}if(!s)throw new Ya({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return s}(i,t);return n.storeIdentityId({id:o,type:e?"primary":"guest"}),o}function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){for(var n,r=/\r\n|[\n\r]/g,i=1,o=t+1;(n=r.exec(e.body))&&n.index<t;)i+=1,o=t+1-(n.index+n[0].length);return{line:i,column:o}}function me(e){return we(e.source,ye(e.source,e.start))}function we(e,t){var n=e.locationOffset.column-1,r=be(n)+e.body,i=t.line-1,o=e.locationOffset.line-1,s=t.line+o,a=1===t.line?n:0,c=t.column+a,u="".concat(e.name,":").concat(s,":").concat(c,"\n"),l=r.split(/\r\n|[\n\r]/g),d=l[i];if(d.length>120){for(var h=Math.floor(c/80),p=c%80,f=[],g=0;g<d.length;g+=80)f.push(d.slice(g,g+80));return u+ve([["".concat(s),f[0]]].concat(f.slice(1,h+1).map(function(e){return["",e]}),[[" ",be(p-1)+"^"],["",f[h+1]]]))}return u+ve([["".concat(s-1),l[i-1]],["".concat(s),d],["",be(c-1)+"^"],["".concat(s+1),l[i+1]]])}function ve(e){var t=e.filter(function(e){return e[0],void 0!==e[1]}),n=Math.max.apply(Math,t.map(function(e){return e[0].length}));return t.map(function(e){var t,r=e[0],i=e[1];return be(n-(t=r).length)+t+(i?" | "+i:" |")}).join("\n")}function be(e){return Array(e+1).join(" ")}function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ie(e,t){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function Te(e,t){return!t||"object"!==Ae(t)&&"function"!=typeof t?Ce(e):t}function Ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(e){var t="function"==typeof Map?new Map:void 0;return ke=function(e){function n(){return Ne(e,arguments,De(this).constructor)}if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),xe(n,e)},ke(e)}function Ne(e,t,n){return(Ne=Oe()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&xe(i,n.prototype),i}).apply(null,arguments)}function Oe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _e(e){return void 0===e||0===e.length?void 0:e}function Re(e,t,n){return new _c("Syntax Error: ".concat(n),void 0,e,[t])}function Me(e){var t=e.prototype.toJSON;"function"==typeof t||function(e){if(!Boolean(e))throw new Error("Unexpected invariant triggered.")}(0),e.prototype.inspect=t,Mc&&(e.prototype[Mc]=t)}function Pe(e){return null!=e&&"string"==typeof e.kind}function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(e){return je(e,[])}function je(e,t){switch(Le(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":return null===e?"null":function(e,t){if(-1!==t.indexOf(e))return"[Circular]";var n=[].concat(t,[e]),r=function(e){var t=e[String(Mc)];if("function"==typeof t)return t;if("function"==typeof e.inspect)return e.inspect}(e);if(void 0!==r){var i=r.call(e);if(i!==e)return"string"==typeof i?i:je(i,n)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>2)return"[Array]";for(var n=Math.min(10,e.length),r=e.length-n,i=[],o=0;o<n;++o)i.push(je(e[o],t));1===r?i.push("... 1 more item"):r>1&&i.push("... ".concat(r," more items"));return"["+i.join(", ")+"]"}(e,n);return function(e,t){var n=Object.keys(e);if(0===n.length)return"{}";if(t.length>2)return"["+function(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){var n=e.constructor.name;if("string"==typeof n&&""!==n)return n}return t}(e)+"]";var r=n.map(function(n){return n+": "+je(e[n],t)});return"{ "+r.join(", ")+" }"}(e,n)}(e,t);default:return String(e)}}function Ke(e,t){if(!Boolean(e))throw new Error(t)}function Be(e,t){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function Fe(e){var t=e.split(/\r\n|[\n\r]/g),n=function(e){for(var t,n=!0,r=!0,i=0,o=null,s=0;s<e.length;++s)switch(e.charCodeAt(s)){case 13:10===e.charCodeAt(s+1)&&++s;case 10:n=!1,r=!0,i=0;break;case 9:case 32:++i;break;default:r&&!n&&(null===o||i<o)&&(o=i),r=!1}return null!==(t=o)&&void 0!==t?t:0}(e);if(0!==n)for(var r=1;r<t.length;r++)t[r]=t[r].slice(n);for(var i=0;i<t.length&&qe(t[i]);)++i;for(var o=t.length;o>i&&qe(t[o-1]);)--o;return t.slice(i,o).join("\n")}function qe(e){for(var t=0;t<e.length;++t)if(" "!==e[t]&&"\t"!==e[t])return!1;return!0}function Ve(e){return isNaN(e)?Uc.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function Ge(e,t){for(var n=e.source,r=n.body,i=r.length,o=t.end;o<i;){var s=r.charCodeAt(o),a=e.line,c=1+o-e.lineStart;switch(s){case 65279:case 9:case 32:case 44:++o;continue;case 10:++o,++e.line,e.lineStart=o;continue;case 13:10===r.charCodeAt(o+1)?o+=2:++o,++e.line,e.lineStart=o;continue;case 33:return new Lc(Uc.BANG,o,o+1,a,c,t);case 35:return We(n,o,a,c,t);case 36:return new Lc(Uc.DOLLAR,o,o+1,a,c,t);case 38:return new Lc(Uc.AMP,o,o+1,a,c,t);case 40:return new Lc(Uc.PAREN_L,o,o+1,a,c,t);case 41:return new Lc(Uc.PAREN_R,o,o+1,a,c,t);case 46:if(46===r.charCodeAt(o+1)&&46===r.charCodeAt(o+2))return new Lc(Uc.SPREAD,o,o+3,a,c,t);break;case 58:return new Lc(Uc.COLON,o,o+1,a,c,t);case 61:return new Lc(Uc.EQUALS,o,o+1,a,c,t);case 64:return new Lc(Uc.AT,o,o+1,a,c,t);case 91:return new Lc(Uc.BRACKET_L,o,o+1,a,c,t);case 93:return new Lc(Uc.BRACKET_R,o,o+1,a,c,t);case 123:return new Lc(Uc.BRACE_L,o,o+1,a,c,t);case 124:return new Lc(Uc.PIPE,o,o+1,a,c,t);case 125:return new Lc(Uc.BRACE_R,o,o+1,a,c,t);case 34:return 34===r.charCodeAt(o+1)&&34===r.charCodeAt(o+2)?He(n,o,a,c,t,e):Ye(n,o,a,c,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Qe(n,o,s,a,c,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return $e(n,o,a,c,t)}throw Re(n,o,ze(s))}var u=e.line,l=1+o-e.lineStart;return new Lc(Uc.EOF,i,i,u,l,t)}function ze(e){return e<32&&9!==e&&10!==e&&13!==e?"Cannot contain the invalid character ".concat(Ve(e),"."):39===e?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character ".concat(Ve(e),".")}function We(e,t,n,r,i){var o,s=e.body,a=t;do{o=s.charCodeAt(++a)}while(!isNaN(o)&&(o>31||9===o));return new Lc(Uc.COMMENT,t,a,n,r,i,s.slice(t+1,a))}function Qe(e,t,n,r,i,o){var s=e.body,a=n,c=t,u=!1;if(45===a&&(a=s.charCodeAt(++c)),48===a){if((a=s.charCodeAt(++c))>=48&&a<=57)throw Re(e,c,"Invalid number, unexpected digit after 0: ".concat(Ve(a),"."))}else c=Je(e,c,a),a=s.charCodeAt(c);if(46===a&&(u=!0,a=s.charCodeAt(++c),c=Je(e,c,a),a=s.charCodeAt(c)),69!==a&&101!==a||(u=!0,43!==(a=s.charCodeAt(++c))&&45!==a||(a=s.charCodeAt(++c)),c=Je(e,c,a),a=s.charCodeAt(c)),46===a||function(e){return 95===e||e>=65&&e<=90||e>=97&&e<=122}(a))throw Re(e,c,"Invalid number, expected digit but got: ".concat(Ve(a),"."));return new Lc(u?Uc.FLOAT:Uc.INT,t,c,r,i,o,s.slice(t,c))}function Je(e,t,n){var r=e.body,i=t,o=n;if(o>=48&&o<=57){do{o=r.charCodeAt(++i)}while(o>=48&&o<=57);return i}throw Re(e,i,"Invalid number, expected digit but got: ".concat(Ve(o),"."))}function Ye(e,t,n,r,i){for(var o=e.body,s=t+1,a=s,c=0,u="";s<o.length&&!isNaN(c=o.charCodeAt(s))&&10!==c&&13!==c;){if(34===c)return u+=o.slice(a,s),new Lc(Uc.STRING,t,s+1,n,r,i,u);if(c<32&&9!==c)throw Re(e,s,"Invalid character within String: ".concat(Ve(c),"."));if(++s,92===c){switch(u+=o.slice(a,s-1),c=o.charCodeAt(s)){case 34:u+='"';break;case 47:u+="/";break;case 92:u+="\\";break;case 98:u+="\b";break;case 102:u+="\f";break;case 110:u+="\n";break;case 114:u+="\r";break;case 116:u+="\t";break;case 117:var l=Ze(o.charCodeAt(s+1),o.charCodeAt(s+2),o.charCodeAt(s+3),o.charCodeAt(s+4));if(l<0){var d=o.slice(s+1,s+5);throw Re(e,s,"Invalid character escape sequence: \\u".concat(d,"."))}u+=String.fromCharCode(l),s+=4;break;default:throw Re(e,s,"Invalid character escape sequence: \\".concat(String.fromCharCode(c),"."))}a=++s}}throw Re(e,s,"Unterminated string.")}function He(e,t,n,r,i,o){for(var s=e.body,a=t+3,c=a,u=0,l="";a<s.length&&!isNaN(u=s.charCodeAt(a));){if(34===u&&34===s.charCodeAt(a+1)&&34===s.charCodeAt(a+2))return l+=s.slice(c,a),new Lc(Uc.BLOCK_STRING,t,a+3,n,r,i,Fe(l));if(u<32&&9!==u&&10!==u&&13!==u)throw Re(e,a,"Invalid character within String: ".concat(Ve(u),"."));10===u?(++a,++o.line,o.lineStart=a):13===u?(10===s.charCodeAt(a+1)?a+=2:++a,++o.line,o.lineStart=a):92===u&&34===s.charCodeAt(a+1)&&34===s.charCodeAt(a+2)&&34===s.charCodeAt(a+3)?(l+=s.slice(c,a)+'"""',c=a+=4):++a}throw Re(e,a,"Unterminated string.")}function Ze(e,t,n,r){return Xe(e)<<12|Xe(t)<<8|Xe(n)<<4|Xe(r)}function Xe(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function $e(e,t,n,r,i){for(var o=e.body,s=o.length,a=t+1,c=0;a!==s&&!isNaN(c=o.charCodeAt(a))&&(95===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122);)++a;return new Lc(Uc.NAME,t,a,n,r,i,o.slice(t,a))}function et(e,t){return new Fc(e,t).parseDocument()}function tt(e){var t=e.value;return nt(e.kind)+(null!=t?' "'.concat(t,'"'):"")}function nt(e){return function(e){return e===Uc.BANG||e===Uc.DOLLAR||e===Uc.AMP||e===Uc.PAREN_L||e===Uc.PAREN_R||e===Uc.SPREAD||e===Uc.COLON||e===Uc.EQUALS||e===Uc.AT||e===Uc.BRACKET_L||e===Uc.BRACKET_R||e===Uc.BRACE_L||e===Uc.PIPE||e===Uc.BRACE_R}(e)?'"'.concat(e,'"'):e}function rt(e,t,n){var r=e[t];if(r){if(!n&&"function"==typeof r)return r;var i=n?r.leave:r.enter;if("function"==typeof i)return i}else{var o=n?e.leave:e.enter;if(o){if("function"==typeof o)return o;var s=o[t];if("function"==typeof s)return s}}}function it(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qc,r=void 0,i=Array.isArray(e),o=[e],s=-1,a=[],c=void 0,u=void 0,l=void 0,d=[],h=[],p=e;do{var f=++s===o.length,g=f&&0!==a.length;if(f){if(u=0===h.length?void 0:d[d.length-1],c=l,l=h.pop(),g){if(i)c=c.slice();else{for(var y={},m=0,w=Object.keys(c);m<w.length;m++){var v=w[m];y[v]=c[v]}c=y}for(var b=0,A=0;A<a.length;A++){var E=a[A][0],S=a[A][1];i&&(E-=b),i&&null===S?(c.splice(E,1),b++):c[E]=S}}s=r.index,o=r.keys,a=r.edits,i=r.inArray,r=r.prev}else{if(u=l?i?s:o[s]:void 0,null==(c=l?l[u]:p))continue;l&&d.push(u)}var I,T=void 0;if(!Array.isArray(c)){if(!Pe(c))throw new Error("Invalid AST Node: ".concat(Ue(c),"."));var C=rt(t,c.kind,f);if(C){if((T=C.call(t,c,u,l,d,h))===Vc)break;if(!1===T){if(!f){d.pop();continue}}else if(void 0!==T&&(a.push([u,T]),!f)){if(!Pe(T)){d.pop();continue}c=T}}}void 0===T&&g&&a.push([u,c]),f?d.pop():(r={inArray:i,index:s,keys:o,edits:a,prev:r},o=(i=Array.isArray(c))?c:null!==(I=n[c.kind])&&void 0!==I?I:[],s=-1,a=[],l&&h.push(l),l=c)}while(void 0!==r);return 0!==a.length&&(p=a[a.length-1][1]),p}(e,{leave:Gc})}function ot(e){return function(t){return st([t.description,e(t)],"\n")}}function st(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(t=null==e?void 0:e.filter(function(e){return e}).join(n))&&void 0!==t?t:""}function at(e){return ct("{\n",ut(st(e,"\n")),"\n}")}function ct(e,t){return null!=t&&""!==t?e+t+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""):""}function ut(e){return ct("  ",e.replace(/\n/g,"\n  "))}function lt(e){return-1!==e.indexOf("\n")}function dt(e){return null!=e&&e.some(lt)}function ht(e){return e.errors&&Array.isArray(e.errors)&&e.errors.forEach(e=>{(function(e){if(e?.originalError?.name?.startsWith("UnauthorizedException"))return!0;if(e.message?.startsWith("Connection failed:")&&e.message?.includes("Permission denied"))return!0;return!1})(e)&&(e.message="Unauthorized",e.recoverySuggestion="If you're calling an Amplify-generated API, make sure to set the \"authMode\" in generateClient({ authMode: '...' }) to the backend authorization rule's auth provider ('apiKey', 'userPool', 'iam', 'oidc', 'lambda')")}),e}function pt(e){const t=e;return{amplify:t[rl],apiKey:t[sl],authMode:t[il],authToken:t[ol],endpoint:t[cl],headers:t[al]}}function ft(e){const t=new Set;for(const n of e.attributes||[])if(gt(n))for(const e of n.properties.rules)"owner"===e.allow?t.add(e.ownerField||"owner"):"groups"===e.allow&&void 0!==e.groupsField&&t.add(e.groupsField);return Array.from(t)}function gt(e){return!("auth"!==e?.type||"object"!=typeof e?.properties||!Array.isArray(e?.properties?.rules))&&(e?.properties?.rules).every(e=>!!e.allow)}function yt(e){return`${e[0].toUpperCase()}${e.slice(1)}`}function mt(e){let t,n;const r=new Promise((e,r)=>{t=e,n=r});return e(r).then(e=>{t(e)}).catch(e=>{n(e)}),r}function wt(e,t){return wl.set(t,e),e.finally(()=>{wl.delete(t)})}function vt(e){return"object"==typeof e.fieldDef?.type&&"model"in e.fieldDef.type&&"string"==typeof e.fieldDef.type.model&&e.fieldDef.isArray&&Array.isArray(e.value?.items)}function bt(e){return"object"==typeof e?.type&&"model"in e.type&&"string"==typeof e.type.model}function At(e,t,n,r,i,o,s=!1){const a=r.models[t],c=a.fields,u=Object.entries(c).filter(([e,t])=>void 0!==t?.type?.model).map(([e])=>e);return n.map(t=>{if(null==t)return t;const n={};for(const l of u){const u=c[l],d=u?.type,h=d.model,p=r.models[h],f=p.primaryKeyInfo.primaryKeyFieldName,g=p.primaryKeyInfo.sortKeyFieldNames,y=u.association?.connectionType;let m=[];u.association&&"associatedWith"in u.association&&(m=u.association.associatedWith);const w=[];switch(u.association&&"targetNames"in u.association&&w.push(...u.association.targetNames),y){case Al:{const r=g.reduce((e,n)=>(t[n]&&(e[n]=t[n]),e),{});if(void 0===e.models[h]?.get)break;n[l]=s?(n,s)=>t[w[0]]?e.models[h].get(n,{[f]:t[w[0]],...r},{authMode:s?.authMode||i,authToken:s?.authToken||o}):{data:null}:n=>t[w[0]]?e.models[h].get({[f]:t[w[0]],...r},{authMode:n?.authMode||i,authToken:n?.authToken||o}):{data:null};break}case vl:case bl:{const r=y===vl?e=>({data:e?.data.shift()||null,errors:e.errors,extensions:e.extensions}):e=>e,c=a.primaryKeyInfo.primaryKeyFieldName,u=a.primaryKeyInfo.sortKeyFieldNames,d=p.fields[m[0]];if(d.type.model){let a=[];d.association&&"targetNames"in d.association&&(a=d.association?.targetNames);const p=a.map((e,n)=>0===n?{[e]:{eq:t[c]}}:{[e]:{eq:t[u[n-1]]}});if(void 0===e.models[h]?.list)break;n[l]=s?(n,s)=>t[c]?mt(async t=>{const a=wt(e.models[h].list(n,{filter:{and:p},limit:s?.limit,nextToken:s?.nextToken,authMode:s?.authMode||i,authToken:s?.authToken||o}),t);return r(await a)}):[]:n=>t[c]?mt(async t=>{const s=wt(e.models[h].list({filter:{and:p},limit:n?.limit,nextToken:n?.nextToken,authMode:n?.authMode||i,authToken:n?.authToken||o}),t);return r(await s)}):[];break}const f=m.map((e,n)=>0===n?{[e]:{eq:t[c]}}:{[e]:{eq:t[u[n-1]]}});if(void 0===e.models[h]?.list)break;n[l]=s?(n,s)=>t[c]?mt(async t=>{const a=wt(e.models[h].list(n,{filter:{and:f},limit:s?.limit,nextToken:s?.nextToken,authMode:s?.authMode||i,authToken:s?.authToken||o}),t);return r(await a)}):[]:n=>t[c]?mt(async t=>{const s=wt(e.models[h].list({filter:{and:f},limit:n?.limit,nextToken:n?.nextToken,authMode:n?.authMode||i,authToken:n?.authToken||o}),t);return r(await s)}):[];break}}}return{...t,...n}})}function Et(e,t,n){const r=(t,n)=>{const[i,...o]=t.split("."),s=o[0],a=e.models[n]??e.nonModels[n],c=a?.fields,u=c?.[i]?.type?.model,l=e.models[u],d=c?.[i]?.type?.nonModel,h=e.nonModels[d],p=l?"model":h?"nonModel":"field";if("nonModel"===p){let t={};if(!s)throw Error(`${i} must declare a wildcard (*) or a field of custom type ${d}`);return t="*"===s?{[i]:Cl(h,e)}:{[i]:r(o.join("."),d)},t}if("model"===p){let t={};if(!s)throw Error(`${i} must declare a wildcard (*) or a field of model ${u}`);if("*"===s){const n=e.models[u];t={[i]:kl(n,e)}}else t={[i]:r(o.join("."),u)};return c[i]?.isArray&&(t={[i]:{items:t[i]}}),t}{const t=c?.[i],r=e.nonModels[n],o=r?.fields?.[i];if(r){if(!o)throw Error(`${i} is not a field of custom type ${n}`)}else{const e=ft(a).includes(i);if(!t&&!e)throw Error(`${i} is not a field of model ${n}`)}return{[i]:Nl}}};return n.reduce((e,n)=>It(r(n,t),e),{})}function St(e){const t=[];return Object.entries(e).forEach(([e,n])=>{n===Nl?t.push(e):"object"==typeof n&&null!==n&&(n?.items?t.push(e,"{","items","{",St(n.items),"}","}"):t.push(e,"{",St(n),"}"))}),t.join(" ")}function It(e,t){const n=e=>e&&"object"==typeof e;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(Object.prototype.hasOwnProperty.call(t,r)&&n(t[r])?It(e[r],t[r]):t[r]=e[r]);return t}function Tt(e,t,n){const r=e.models[t],i=Et(e,t,n??function(e){const{fields:t}=e,n=Object.values(t).map(({type:e,name:t})=>{if("string"==typeof e)return t;if("object"==typeof e){if("string"==typeof e?.enum)return t;if("string"==typeof e?.nonModel)return`${t}.*`}}).filter(Boolean),r=ft(e);return Array.from(new Set(n.concat(r)))}(r));return St(i)}function Ct(e,t,n,r,i){const{name:o,pluralName:s,fields:a,primaryKeyInfo:{isCustomPrimaryKey:c,primaryKeyFieldName:u,sortKeyFieldNames:l},attributes:d}=t,h=o.charAt(0).toUpperCase()+o.slice(1),p=s.charAt(0).toUpperCase()+s.slice(1),{operationPrefix:f,usePlural:g}=Tl[n],{selectionSet:y}=r||{};let m,w,v,b,A;if(f)m=`${f}${g?p:h}`;else{if(!i)throw new Error("Error generating GraphQL Document - invalid operation name");{const{queryField:e,pk:t,sk:n=[]}=i;m=e;let r={};if(1===n.length){const[e]=n,t="string"==typeof a[e].type?a[e].type:"String",i=El[t];r={[e]:`Model${i}KeyConditionInput`}}else if(n.length>1){const t=Sl(n),i=d?.find(t=>t?.properties?.queryField===e)?.properties?.name;r={[t]:`Model${yt(o)}${yt(i)}CompositeKeyConditionInput`}}w={[t]:`${Object.prototype.hasOwnProperty.call(a[t].type,"enum")?a[t].type.enum:a[t].type}!`,...r}}}const E=Tt(e,o,y),S={[u]:`${a[u].type}!`},I={},T=e=>{if(0===l.length)return{};if("get"===e)return l.reduce((t,n)=>{const r=a[n].type;return"get"===e&&(t[n]=`${r}!`),t},{});if(1===l.length){const[e]=l,t="string"==typeof a[e].type?a[e].type:"String",n=El[t];return{[e]:`Model${n}KeyConditionInput`}}{const e=Sl(l);return{[e]:`Model${yt(o)}PrimaryCompositeKeyConditionInput`}}};switch(c&&(Object.assign(S,T("get")),Object.assign(I,{[u]:`${a[u].type}`,sortDirection:"ModelSortDirection"},T("list"))),n){case"CREATE":case"UPDATE":case"DELETE":A??(A={input:`${f.charAt(0).toLocaleUpperCase()+f.slice(1)}${h}Input!`}),v??(v="mutation");case"GET":A??(A=S),b??(b=E);case"LIST":A??(A={...I,filter:`Model${h}FilterInput`,limit:"Int",nextToken:"String"}),v??(v="query"),b??(b=`items { ${E} } nextToken __typename`);case"INDEX_QUERY":A??(A={...w,filter:`Model${h}FilterInput`,sortDirection:"ModelSortDirection",limit:"Int",nextToken:"String"}),v??(v="query"),b??(b=`items { ${E} } nextToken __typename`);case"ONCREATE":case"ONUPDATE":case"ONDELETE":A??(A={filter:`ModelSubscription${h}FilterInput`}),v??(v="subscription"),b??(b=E);break;default:throw new Error("Internal error: Attempted to generate graphql document for observeQuery. Please report this error.")}return`${v}${A?`(${Object.entries(A).map(([e,t])=>`$${e}: ${t}`)})`:""} { ${m}${A?`(${Object.keys(A).map(e=>`${e}: $${e}`)})`:""} { ${b} } }`}function kt(e,t,n,r,i){const{fields:o,primaryKeyInfo:{isCustomPrimaryKey:s,primaryKeyFieldName:a,sortKeyFieldNames:c}}=e,u=c?.length&&Sl(c);let l={};switch(t){case"CREATE":l={input:n?Nt(n,e,r):{}};break;case"UPDATE":l={input:n?Object.fromEntries(Object.entries(Nt(n,e,r)).filter(([t])=>o[t]?!o[t].isReadOnly:!ft(e).includes(t))):{}};break;case"GET":case"DELETE":n&&(l=s?[a,...c].reduce((e,t)=>(e[t]=n[t],e),{}):{[a]:n[a]}),"DELETE"===t&&(l={input:l});break;case"LIST":n?.filter&&(l.filter=n.filter),n?.sortDirection&&(l.sortDirection=n.sortDirection),n&&n[a]&&(l[a]=n[a]),u&&n&&n[u]&&(l[u]=n[u]),n?.nextToken&&(l.nextToken=n.nextToken),n?.limit&&(l.limit=n.limit);break;case"INDEX_QUERY":{const{pk:e,sk:t=[]}=i,r=t?.length&&Sl(t);l[e]=n[e],r&&n&&n[r]&&(l[r]=n[r]),n?.filter&&(l.filter=n.filter),n?.sortDirection&&(l.sortDirection=n.sortDirection),n?.nextToken&&(l.nextToken=n.nextToken),n?.limit&&(l.limit=n.limit);break}case"ONCREATE":case"ONUPDATE":case"ONDELETE":n?.filter&&(l={filter:n.filter});break;case"OBSERVEQUERY":throw new Error("Internal error: Attempted to build variables for observeQuery. Please report this error.");default:throw new Error(`Unhandled operation case: ${t}`)}return l}function Nt(e,t,n){const{fields:r}=t,i={};return Object.entries(e).forEach(([e,t])=>{const o=r[e]?.type,s=o?.model;if(s){const o=r[e]?.association,a=n.models[s].primaryKeyInfo;if(o?.connectionType===vl){const e=o;e.targetNames.forEach((n,r)=>{const o=e.associatedWith[r];i[n]=t[o]})}if(o?.connectionType===Al){o.targetNames.forEach((e,n)=>{if(0===n){const n=a.primaryKeyFieldName;i[e]=t[n]}else{const r=a.sortKeyFieldNames[n-1];i[e]=t[r]}})}}else i[e]=t}),i}function Ot(e,t,n={}){const r=t(e);return{authMode:n.authMode||r.authMode,authToken:n.authToken||r.authToken}}function xt(e,t,n){let r=t(e).headers||{};return n&&(r=n),r}function Dt(e){if(e?.errors)return{...e,data:[]};throw e}function _t(e){if(e.errors)return{...e,data:null};throw e}function Rt(e){return e?{[Ol]:e}:void 0}function Mt(e,t,n,r,i,o,s){const a=void 0!==r.arguments;return(...c)=>{const u=c[c.length-1];let l,d;if(i){if(!(e=>"symbol"==typeof e?.token?.value)(c[0]))throw new Error(`Invalid first argument passed to ${r.name}. Expected contextSpec`);l=c[0]}return a&&(d=i?c[1]:c[0]),"subscription"===n?function(e,t,n,r,i,o,s){const a="subscription",{name:c}=n,u=Ot(e,r,o),l=xt(e,r,o?.headers),d=Ut(n),h=jt(n),p=Kt(t,n),f=Pt(n.type,"model")?n.type.model:void 0,g=`\n    ${a.toLocaleLowerCase()}${d} {\n      ${c}${h} ${p}\n    }\n  `,y=Bt(n,i),m=Rt(s),w=e.graphql({...u,query:g,variables:y,...m},l);return w.pipe(X(n=>{const[r]=Object.keys(n.data),i=n.data[r],[o]=f?At(e,f,[i],t,u.authMode,u.authToken):[i];return o}))}(e,t,r,o,d,u,s):function(e,t,n,r,i,o,s,a,c){return mt(async u=>{const{name:l}=r,d=Ot(e,i,s),h=xt(e,i,s?.headers),p=Ut(r),f=jt(r),g=Kt(t,r),y=Pt(r.type,"model")?r.type.model:void 0,m=`\n    ${n.toLocaleLowerCase()}${p} {\n      ${l}${f} ${g}\n    }\n  `,w=Bt(r,o),v=Rt(c);try{const n=wt(a?e.graphql(a,{...d,query:m,variables:w},h):e.graphql({...d,query:m,variables:w,...v},h),u),{data:r,extensions:i}=await n;if(r){const[n]=Object.keys(r),o=Array.isArray(r[n]),s=o?r[n].filter(e=>e):r[n],c=y?At(e,y,o?s:[s],t,d.authMode,d.authToken,!!a):s;return{data:!o&&Array.isArray(c)?c.shift():c,extensions:i}}return{data:null,extensions:i}}catch(b){const{data:n,errors:r}=b;if(n&&0!==Object.keys(n).length&&r){const[i]=Object.keys(n),o=Array.isArray(n[i]),s=o?n[i].filter(e=>e):n[i];if(s){const n=y?At(e,y,o?s:[s],t,d.authMode,d.authToken,!!a):s;return{data:!o&&Array.isArray(n)?n.shift():n,errors:r}}return _t(b)}return _t(b)}})}(e,t,n,r,o,d,u,l,s)}}function Pt(e,t){return"string"==typeof e[t]}function Lt({type:e,isRequired:t}){const n=t?"!":"";return function(e){return e instanceof Object&&"enum"in e}(e)?`${e.enum}${n}`:function(e){return e instanceof Object&&"input"in e}(e)?`${e.input}${n}`:`${e}${n}`}function Ut(e){if(void 0===e.arguments)return"";const t=Object.entries(e.arguments).map(([e,t])=>{const n=Lt(t);return`$${e}: ${t.isArray?`[${n}]${t.isArrayNullable?"":"!"}`:n}`}).join(", ");return t.length>0?`(${t})`:""}function jt(e){if(void 0===e.arguments)return"";const t=Object.keys(e.arguments).map(e=>`${e}: $${e}`).join(", ");return t.length>0?`(${t})`:""}function Kt(e,t){if(Pt(t,"type")||Pt(t.type,"enum"))return"";if(Pt(t.type,"nonModel")){const n=e.nonModels[t.type.nonModel];return`{${St(Cl(n,e))}}`}return Pt(t.type,"model")?`{${Tt(e,t.type.model)}}`:""}function Bt(e,t={}){const n={};if(void 0===e.arguments)return n;for(const r of Object.values(e.arguments))if(void 0!==t[r.name])n[r.name]=t[r.name];else if(r.isRequired)throw new Error(`${e.name} requires arguments '${r.name}'`);return n}function Ft(e,t,n,r){if(!t)return{};const i=t.modelIntrospection;if(!i)return{};const o=i[n];if(!o)return{};const s={},a=null===r(e).amplify;for(const c of Object.values(o))s[c.name]=Mt(e,i,_l[n],c,a,r);return s}function qt(e,t,n,r,i,o=!1,s){return o?(o,a,c)=>Vt(e,t,n,a,c,r,i,o,s):(o,a)=>Vt(e,t,n,o,a,r,i,void 0,s)}function Vt(e,t,n,r,i,o,s,a,c){return mt(async u=>{const{name:l}=n,d=Ct(t,n,o,i),h=kt(n,o,r,t),p=Ot(e,s,i),f=xt(e,s,i?.headers),g=Rt(c);try{const n=wt(a?e.graphql(a,{...p,query:d,variables:h},f):e.graphql({...p,query:d,variables:h,...g},f),u),{data:r,extensions:o}=await n;if(r){const[n]=Object.keys(r),s=Il(t,l,r[n]);if(null===s)return{data:null,extensions:o};if(i?.selectionSet)return{data:s,extensions:o};{const[n]=At(e,l,[s],t,p.authMode,p.authToken,!!a);return{data:n,extensions:o}}}return{data:null,extensions:o}}catch(y){const{data:n,errors:r}=y;if(n&&0!==Object.keys(n).length&&r){const[o]=Object.keys(n),s=Il(t,l,n[o]);if(s){if(i?.selectionSet)return{data:s,errors:r};{const[n]=At(e,l,[s],t,p.authMode,p.authToken,!!a);return{data:n,errors:r}}}return _t(y)}return _t(y)}})}function Gt(e,t,n,r,i=!1,o){return i?(i,s)=>zt(e,t,n,r,s,i,o):i=>zt(e,t,n,r,i,void 0,o)}function zt(e,t,n,r,i,o,s){return mt(async a=>{const{name:c}=n,u=Ct(t,n,"LIST",i),l=kt(n,"LIST",i,t),d=Ot(e,r,i),h=xt(e,r,i?.headers),p=Rt(s);try{const n=wt(o?e.graphql(o,{...d,query:u,variables:l},h):e.graphql({...d,query:u,variables:l,...p},h),a),{data:r,extensions:s}=await n;if(void 0!==r){const[n]=Object.keys(r);if(r[n].items){const a=r[n].items.map(e=>Il(t,c,e));if(i?.selectionSet)return{data:a,nextToken:r[n].nextToken,extensions:s};return{data:At(e,c,a,t,d.authMode,d.authToken,!!o),nextToken:r[n].nextToken,extensions:s}}return{data:r[n],nextToken:r[n].nextToken,extensions:s}}}catch(f){const{data:n,errors:r}=f;if(null!=n&&0!==Object.keys(n).length&&r){const[s]=Object.keys(n);if(n[s]?.items){const a=n[s].items.map(e=>Il(t,c,e));if(a){if(i?.selectionSet)return{data:a,nextToken:n[s]?.nextToken,errors:r};return{data:At(e,c,a,t,d.authMode,d.authToken,!!o),nextToken:n[s]?.nextToken,errors:r}}return{data:n[s],nextToken:n[s]?.nextToken,errors:r}}return Dt(f)}return Dt(f)}})}function Wt(e){let t;t="string"==typeof e?(e=>(new TextEncoder).encode(e))(e):e;const n="object"==typeof t&&"number"==typeof t.length,r="object"==typeof t&&"number"==typeof t.byteOffset&&"number"==typeof t.byteLength;if(!n&&!r)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let i="";for(let o=0;o<t.length;o+=3){let e=0,n=0;for(let i=o,s=Math.min(o+3,t.length);i<s;i++)e|=t[i]<<8*(s-i-1),n+=8;const r=Math.ceil(n/6);e<<=6*r-n;for(let t=1;t<=r;t++){const n=6*(r-t);i+=Ml[(e&63<<n)>>n]}i+="==".slice(0,4-r)}return i}function Qt(e,t,n,r,i,o=!1){return o?(o,s,a)=>Jt(e,t,n,r,i,{...s,...a},o):(o,s)=>Jt(e,t,n,r,i,{...o,...s})}function Jt(e,t,n,r,i,o,s){return mt(async a=>{const{name:c}=n,u=Ct(t,n,"INDEX_QUERY",o,r),l=kt(n,"INDEX_QUERY",o,t,r),d=Ot(e,i,o),h=n=>At(e,c,n,t,d.authMode,d.authToken,!!s);try{const n=xt(e,i,o?.headers),r=[{...d,query:u,variables:l},n];void 0!==s&&r.unshift(s);const p=wt(e.graphql(...r),a),f=await p;if(void 0!==f.data)return function(e,t,n,r,i){const{data:o,extensions:s}=n,[a]=Object.keys(o);if(o[a].items){const n=o[a].items.map(n=>Il(e,t,n));return{data:r?n:i(n),nextToken:o[a].nextToken,extensions:s}}return{data:o[a],nextToken:o[a].nextToken,extensions:s}}(t,c,f,o?.selectionSet,h)}catch(p){const{data:e,errors:n}=p;if(null!=e&&0!==Object.keys(e).length&&n){const[n]=Object.keys(e);if(e[n]?.items){const r=e[n]?.items.map(e=>Il(t,c,e));if(r)return{data:o?.selectionSet?r:h(r),nextToken:e[n]?.nextToken}}return{data:e[n],nextToken:e[n]?.nextToken}}return Dt(p)}})}function Yt(e,t,n,r,i){const{name:o}=n;return s=>{const a=Ct(t,n,r,s),c=kt(n,r,s,t),u=Ot(e,i,s),l=xt(e,i,s?.headers);return e.graphql({...u,query:a,variables:c},l).pipe(X(n=>{const[r]=Object.keys(n.data),i=n.data[r],a=Il(t,o,i);if(null===a)return null;if(s?.selectionSet)return a;{const[n]=At(e,o,[a],t,u.authMode,u.authToken);return n}}))}}function Ht(e,t,n){const r=Object.fromEntries(n.map(t=>[t,e[t]]));for(let i=0;i<t.length;i++)if(Object.keys(r).every(e=>r[e]===t[i][e]))return i;return-1}function Zt(e,t){const{name:n}=t;return r=>new $i(i=>{function o(e){for(const t of e){const e=Ht(t.item,s,h);switch(t.type){case"create":e<0&&s.push(t.item);break;case"update":e>=0&&(s[e]=t.item);break;case"delete":e>=0&&s.splice(e,1);break;default:console.error("Unrecognized message in observeQuery.",t)}}i.next({items:s,isSynced:!0})}const s=[],a=[];let c=(...e)=>a.push(...e);const u=e[n].onCreate(r).subscribe({next(e){c({item:e,type:"create"})},error(e){i.error({type:"onCreate",error:e})}}),l=e[n].onUpdate(r).subscribe({next(e){c({item:e,type:"update"})},error(e){i.error({type:"onUpdate",error:e})}}),d=e[n].onDelete(r).subscribe({next(e){c({item:e,type:"delete"})},error(e){i.error({type:"onDelete",error:e})}}),h=function(e){const{primaryKeyFieldName:t,sortKeyFieldNames:n}=e.primaryKeyInfo;return[t,...n]}(t);return(async()=>{let t=!0,u=null;for(;!i.closed&&(t||u);){t=!1;const{data:o,errors:c,nextToken:l}=await e[n].list({...r,nextToken:u});u=l,s.push(...o);const d=0===a.length&&null==u;if(i.next({items:s,isSynced:d}),Array.isArray(c))for(const e of c)i.error(e)}a.length>0&&o(a),c=(...e)=>(o(e),s.length)})(),()=>{u.unsubscribe(),l.unsubscribe(),d.unsubscribe()}})}function Xt(e,t,n){return function(e){const t=e.cancel.bind(e);e.cancel=function(e,n){const r=new Set;let i=e;for(;i&&wl.has(i);){if(r.has(i))throw new Error("A cycle was detected in the modeled graphql cancellation chain. This is a bug. Please report it!");r.add(i),i=wl.get(i)}return t(i,n)}}(e),e.models=function(e,t,n){const r={},i=t.modelIntrospection;if(!i)return{};const o=["ONCREATE","ONUPDATE","ONDELETE"];for(const s of Object.values(i.models)){const{name:t}=s;r[t]={};const a=cd(i,t);Object.entries(a).forEach(([a,{operationPrefix:c}])=>{const u=a;"LIST"===u?r[t][c]=Gt(e,i,s,n):o.includes(u)?r[t][c]=Yt(e,i,s,u,n):r[t][c]="OBSERVEQUERY"===u?Zt(r,s):qt(e,i,s,u,n)});const c=ad(s);for(const o of c)r[t][o.queryField]=Qt(e,i,s,o,n)}return r}(e,t,n),e.enums=(e=>{const t=e.modelIntrospection;if(!t)return{};const n={};for(const[r,i]of Object.entries(t.enums))n[i.name]={values:()=>i.values};return n})(t),e.queries=function(e,t,n){return Ft(e,t,"queries",n)}(e,t,n),e.mutations=function(e,t,n){return Ft(e,t,"mutations",n)}(e,t,n),e.subscriptions=function(e,t,n){return Ft(e,t,"subscriptions",n)}(e,t,n),e.conversations=function(e,t,n){const r=t?.modelIntrospection;if(!r?.conversations)return{};const i={};for(const{name:o,conversation:s,message:a,models:c,nonModels:u,enums:l}of Object.values(r.conversations)){const t=c[s.modelName],d=c[a.modelName];if(!t||!d)return{};const h={...r,models:{...r.models,...c},nonModels:{...r.nonModels,...u},enums:{...r.enums,...l}};i[o]={update:od(e,h,o,t,d,n),create:td(e,h,o,t,d,n),get:nd(e,h,o,t,d,n),delete:id(e,h,o,t,d,n),list:rd(e,h,o,t,d,n)}}return i}(e,t,n),e.generations=function(e,t,n){const r=t?.modelIntrospection;if(!r?.generations)return{};const i={};for(const o of Object.values(r.generations))i[o.name]=Mt(e,r,"query",o,!1,n,Dl(xl.Generation));return i}(e,t,n),e}function $t(e,t){const n=pt(this),r=n.endpoint,i=n.authMode,o=n.apiKey;if(e.authMode=e.authMode||i,e.apiKey=e.apiKey??o,e.authToken=e.authToken||n.authToken,r&&"apiKey"===e.authMode&&!e.apiKey)throw new Error("graphql() requires an explicit `apiKey` for a custom `endpoint` when `authMode = 'apiKey'`.");const s=t||n.headers;return ud.graphql(n.amplify,{...e,endpoint:r},s)}function en(e,t){return ud.cancel(e,t)}function tn(e){return ud.isCancelError(e)}function nn(e){return void 0!==e}function rn(){return function(e){const t={[rl]:e.amplify,[il]:e.authMode,[ol]:e.authToken,[sl]:"apiKey"in e?e.apiKey:void 0,[cl]:"endpoint"in e?e.endpoint:void 0,[al]:e.headers,graphql:$t,cancel:en,isCancelError:tn,models:dd,enums:dd,queries:dd,mutations:dd,subscriptions:dd},n=e.amplify.getConfig().API?.GraphQL;if(t[cl]){if(!t[il])throw new Error("generateClient() requires an explicit `authMode` when `endpoint` is provided.");if("apiKey"===t[il]&&!t[sl])throw new Error("generateClient() requires an explicit `apiKey` when `endpoint` is provided and `authMode = 'apiKey'`.")}return t[cl]||(nn(n)?Xt(t,n,pt):ld(t)),t}({amplify:ao})}async function on(e,t){const n=(()=>{const e=ao.getConfig(),t=e.API?.Events;if(!t)throw new Error("Amplify configuration is missing. Have you called Amplify.configure()?");const n=hd(t.defaultAuthMode,"apiKey"),r={appSyncGraphqlEndpoint:t.endpoint,region:t.region,authenticationType:n,apiKey:t.apiKey};return r})();n.authenticationType=hd(t?.authMode,n.authenticationType),n.apiKey=t?.apiKey||n.apiKey,n.authToken=t?.authToken||n.authToken,await gd.connect(n);const r=To();let i;yd.add(r);return{subscribe:(t,o)=>{if(!yd.has(r))throw new Error("Channel is closed");const s={...n,query:e};return s.authenticationType=hd(o?.authMode,s.authenticationType),s.apiKey=o?.apiKey||s.apiKey,s.authToken=o?.authToken||s.authToken,i=gd.subscribe(s).subscribe(t),i},close:async()=>{i&&i.unsubscribe(),yd.delete(r),setTimeout(()=>{0===yd.size&&gd.closeIfNoActiveSubscription()},1e3)},publish:async(t,i)=>{if(!yd.has(r))throw new Error("Channel is closed");const o={...n,query:e,variables:t};return o.authenticationType=hd(i?.authMode,o.authenticationType),o.apiKey=i?.apiKey||o.apiKey,o.authToken=i?.authToken||o.authToken,gd.publish(o)}}}function sn(e,t,n,r){var i,o=arguments.length,s=o<3?t:r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function an(e,t){if(!e.actions.every(e=>t.actions.some(t=>e.equals(t))))throw new Error("The modified transaction does not contain all the original actions.");const n=t.actions.filter(t=>!e.actions.some(e=>t.equals(e)));for(const r of n){if(r.authorization.find(t=>t.actor===e.actions[0].authorization[0].actor)){if(r.account.equals("eosio.token")&&r.name.equals("transfer")){const e=wd.from(r.data);if(e.to.equals("txfee.wam")&&e.memo.startsWith("WAX fee for"))continue}if(r.account.equals("eosio")&&r.name.equals("buyrambytes")){if(md.from(r.data).receiver.equals(e.actions[0].authorization[0].actor))continue}throw new Error("The modified transaction contains one or more actions that are not allowed.")}}}function cn(e,t,n){const r=setInterval(()=>{t.closed&&(clearInterval(r),n(e("error.closed",{default:"The Cloud Wallet was closed before the request was completed"})))},500);return r}function un(e,t,n){const r=new URL(e.origin).origin===t.origin,i=e.source===n;return!("object"!=typeof e.data||!r||!i)}function ln(e,t){const n=navigator.userAgent.toLowerCase();if(-1===n.search("chrome")&&n.search("safari")>=0)return!1;try{if(!t)return!1;const n=t.whitelist,{actions:r}=e.resolvedTransaction;return r.every(e=>n.find(t=>{if(e.account.equals(t.contract))return!(e.account.equals("eosio.token")&&e.name&&e.name.equals("transfer"))||t.recipients.includes(String(e.data.to))}))}catch(r){}return!1}async function dn(e,t,n,r=3e5){const i=new URL(t),o=await window.open(i,"WalletPluginCloudWalletPopup","height=800,width=600");if(!o)throw new Error(e("error.popup",{default:"Unable to open the popup window. Check your browser settings and try again."}));return new Promise((s,a)=>{const c=cn(e,o,a),u=e=>{if(!un(e,i,o))return;o?.postMessage({feeFallback:!0,freeBandwidth:!0,startTime:Math.floor((new Date).getTime()),transaction:n.serializedTransaction,type:"TRANSACTION"},String(t));const r=e=>{if(un(e,i,o))try{s(e.data)}catch(t){a(t)}finally{window.removeEventListener("message",u),window.removeEventListener("message",r),clearTimeout(l),clearInterval(c)}};window.addEventListener("message",r)},l=setTimeout(()=>{o.close(),window.removeEventListener("message",u),a(new Error(e("error.timeout",{default:"The request has timed out after {{timeout}} seconds. Please try again.",timeout:r/1e3})))},r);window.addEventListener("message",u)})}function hn(){if(!pn()||!yn()){if(/CriOS/.test(navigator.userAgent))return"googlechrome://";if(/FxiOS/.test(navigator.userAgent))return"firefox:://";if(pn()&&fn())return"brave://";if(pn()){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t=window.location.href.split("#")[0]+"#";for(let n=0;n<8;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}return gn()&&/Firefox/i.test(navigator.userAgent)?"android-app://org.mozilla.firefox":gn()&&/Edg/.test(navigator.userAgent)?"android-app://com.microsoft.emmx":gn()&&(/OPR/.test(navigator.userAgent)||/Opera/.test(navigator.userAgent))?"android-app://com.opera.browser":gn()&&fn()?"android-app://com.brave.browser":gn()&&(/wv/.test(navigator.userAgent)||/Android/.test(navigator.userAgent)&&yn())?"android-app://webview":gn()&&/Chrome\/[.0-9]* Mobile/i.test(navigator.userAgent)?"android-app://com.android.chrome":window.location.href}}function pn(){return/iP(ad|od|hone)/i.test(navigator.userAgent)}function fn(){return navigator.brave&&"function"==typeof navigator.brave.isBrave}function gn(){return/Android/.test(navigator.userAgent)}function yn(){return!!window.ReactNativeWebView}var mn=Object.defineProperty,wn=(e,t,n)=>((e,t,n)=>t in e?mn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);import{a as vn}from"./vendor-18oYYS7b.js";import{U as bn,C as An,a as En,S as Sn,B as In,b as Tn,P as Cn,c as kn,d as Nn,e as On,A as xn,W as Dn,L as _n,f as Rn,R as Mn,g as Pn,_ as Ln,h as Un,i as jn,j as Kn,k as Bn,l as Fn,m as qn,n as Vn,o as Gn,p as zn,I as Wn,T as Qn,N as Jn,q as Yn,r as Hn,s as Zn}from"./wharfkit-CLpwvJ3D.js";const Xn={},$n=function(e,t){function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}let r=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),i=n?.nonce||n?.getAttribute("nonce");r=e(t.map(e=>{if((e=function(e){return"/market-alphatest/"+e}(e))in Xn)return;Xn[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,i&&r.setAttribute("nonce",i),document.head.appendChild(r),t?new Promise((t,n)=>{r.addEventListener("load",t),r.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})};var er,tr={exports:{}};const nr=vn((er||(er=1,function(e){function t(){}function n(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function r(e,t,r,i,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new n(r,i||e,o),c=a?a+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function i(e,n){0===--e._eventsCount?e._events=new t:delete e._events[n]}function o(){this._events=new t,this._eventsCount=0}var s=Object.prototype.hasOwnProperty,a="~";Object.create&&(t.prototype=Object.create(null),(new t).__proto__||(a=!1)),o.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)s.call(e,t)&&n.push(a?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},o.prototype.listeners=function(e){var t=a?a+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,o=new Array(i);r<i;r++)o[r]=n[r].fn;return o},o.prototype.listenerCount=function(e){var t=a?a+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,r,i,o){var s=a?a+e:e;if(!this._events[s])return!1;var c,u,l=this._events[s],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,r),!0;case 5:return l.fn.call(l.context,t,n,r,i),!0;case 6:return l.fn.call(l.context,t,n,r,i,o),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var h,p=l.length;for(u=0;u<p;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;case 4:l[u].fn.call(l[u].context,t,n,r);break;default:if(!c)for(h=1,c=new Array(d-1);h<d;h++)c[h-1]=arguments[h];l[u].fn.apply(l[u].context,c)}}return!0},o.prototype.on=function(e,t,n){return r(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return r(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,n,r){var o=a?a+e:e;if(!this._events[o])return this;if(!t)return i(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||r&&!s.once||n&&s.context!==n||i(this,o);else{for(var c=0,u=[],l=s.length;c<l;c++)(s[c].fn!==t||r&&!s[c].once||n&&s[c].context!==n)&&u.push(s[c]);u.length?this._events[o]=1===u.length?u[0]:u:i(this,o)}return this},o.prototype.removeAllListeners=function(e){var n;return e?(n=a?a+e:e,this._events[n]&&i(this,n)):(this._events=new t,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=a,o.EventEmitter=o,e.exports=o}(tr)),tr.exports));class rr extends Error{constructor(e){super("Socket error"),wn(this,"event"),wn(this,"code","E_NETWORK"),this.event=e}}class ir extends Error{constructor(e,t){super(e),wn(this,"reason"),wn(this,"underlyingError"),wn(this,"code","E_MESSAGE"),this.reason=e,this.underlyingError=t}}const or=globalThis||window;var sr,ar;(ar=sr||(sr={})).binary="binary",ar.text="text",ar.json="json";class cr extends nr{constructor(e){if(super(),wn(this,"url"),wn(this,"active",!1),wn(this,"socket"),wn(this,"timer"),wn(this,"reconnectTimer"),wn(this,"encoding"),wn(this,"WebSocket"),!e.service)throw new Error("Options must include a service url");if(!e.channel)throw new Error("Options must include a channel name");const t=e.service.replace(/^http/,"ws").replace(/\/$/,"");this.url=`${t}/${e.channel}?v=2`,this.encoding=e.encoding||sr.text,this.WebSocket=e.WebSocket||or.WebSocket,!1!==e.autoConnect&&this.connect()}connect(){if(this.active)return;this.active=!0;let e,t=0;const n=()=>{const r=new this.WebSocket(this.url);r.onmessage=e=>{if("undefined"!=typeof Blob&&e.data instanceof Blob){const t=new FileReader;t.onload=()=>{this.handleMessage(new Uint8Array(t.result))},t.onerror=()=>{this.emit("error",new ir("Could not read message"))},t.readAsArrayBuffer(e.data)}else if("string"==typeof e.data)this.handleMessage((new TextEncoder).encode(e.data));else if(void 0!==or.Buffer&&(e.data instanceof or.Buffer||Array.isArray(e.data))){let t=e.data;or.Buffer.isBuffer(t)||(t=or.Buffer.concat(t)),this.handleMessage(new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}else e.data instanceof Uint8Array?this.handleMessage(e.data):e.data instanceof ArrayBuffer?this.handleMessage(new Uint8Array(e.data)):this.emit("error",new ir("Unhandled event data type"))},r.onerror=e=>{this.socket===r&&this.active&&this.emit("error",new rr(e))},r.onopen=()=>{t=0,this.emit("connect")},r.onclose=()=>{var r;this.active&&(clearTimeout(this.timer),this.timer=setTimeout(n,(r=t++,Math.min(Math.pow(7*r,2),5e3)))),this.socket=void 0,clearTimeout(e),this.reconnectTimer&&clearInterval(this.reconnectTimer),this.emit("disconnect")},this.setupReconnectionTimer();const i=r;"function"==typeof i.on&&"function"==typeof i.terminate&&i.on("ping",()=>{clearTimeout(e),e=setTimeout(()=>{i.terminate()},15e3)}),this.socket=r};n()}disconnect(){this.active=!1,!this.socket||this.socket.readyState!==this.WebSocket.OPEN&&this.socket.readyState!==this.WebSocket.CONNECTING||this.socket.close(1e3)}get isConnected(){return this.active&&this.socket?.readyState==this.WebSocket.OPEN}handleMessage(e){let t;switch(66===e[0]&&66===e[1]&&1===e[2]&&(this.socket?.send(new Uint8Array([66,66,2,e[3]])),e=e.subarray(4)),this.encoding){case sr.binary:t=e;break;case sr.text:t=(new TextDecoder).decode(e);break;case sr.json:try{t=JSON.parse((new TextDecoder).decode(e))}catch(n){return void this.emit("error",new ir("Unable to decode JSON",n))}}this.emit("message",t)}setupReconnectionTimer(){this.reconnectTimer=setInterval(()=>{this.socket?.close(1e3)},6e5)}}const ur=globalThis||window;var lr,dr;(dr=lr||(lr={})).buffered="buffered",dr.delivered="delivered";let hr=class extends Tn{};e([Tn.field("public_key")],hr.prototype,"from",void 0),e([Tn.field("uint64")],hr.prototype,"nonce",void 0),e([Tn.field("bytes")],hr.prototype,"ciphertext",void 0),e([Tn.field("uint32")],hr.prototype,"checksum",void 0),hr=e([Tn.type("sealed_message")],hr),"function"==typeof SuppressedError&&SuppressedError;let pr=class extends Tn{};n([Tn.field("name")],pr.prototype,"session_name",void 0),n([Tn.field("public_key")],pr.prototype,"request_key",void 0),n([Tn.field("string",{extension:!0})],pr.prototype,"user_agent",void 0),pr=n([Tn.type("link_create")],pr);let fr=class extends Tn{};n([Tn.field("time_point_sec")],fr.prototype,"expiration",void 0),fr=n([Tn.type("link_info")],fr);let gr=class extends Tn{};n([Tn.field("public_key")],gr.prototype,"from",void 0),n([Tn.field("uint64")],gr.prototype,"nonce",void 0),n([Tn.field("bytes")],gr.prototype,"ciphertext",void 0),n([Tn.field("uint32")],gr.prototype,"checksum",void 0),gr=n([Tn.type("buoy_message")],gr);let yr=class extends Tn{};n([Tn.field("name")],yr.prototype,"session_name",void 0),n([Tn.field("public_key")],yr.prototype,"request_key",void 0),n([Tn.field("string",{extension:!0})],yr.prototype,"user_agent",void 0),yr=n([Tn.type("buoy_session")],yr);let mr=class extends Tn{};n([Tn.field("time_point_sec")],mr.prototype,"expiration",void 0),mr=n([Tn.type("buoy_info")],mr);var wr={en:{login:{title:"Connect with Anchor",body:"Scan with Anchor on your mobile device or click the button below to open on this device.",link:"Launch Anchor"},transact:{title:"Complete using Anchor",body:'Please open your Anchor Wallet on "{{channelName}}" to review and approve this transaction.',label:"Sign manually or with another device",link:"Trigger Manually",await:"Waiting for response from Anchor"},error:{expired:"The request expired, please try again.",invalid_response:"Invalid response from Anchor, must contain link_ch, link_key, link_name and cid flags.",not_completed:"The request was not completed.",cancelled:"The request was cancelled from Anchor."}},ko:{},"zh-Hans":{login:{link:"\u542f\u52a8Anchor",body:"\u5728\u60a8\u7684\u8bbe\u5907\u4e0a\u4f7f\u7528Anchor\u626b\u63cf\u6216\u8005\u70b9\u51fb\u4e0b\u65b9\u6309\u94ae\u6253\u5f00\u3002",title:"\u8fde\u63a5Anchor"},error:{cancelled:"\u8bf7\u6c42\u5df2\u4eceAnchor\u53d6\u6d88\u3002",not_completed:"\u6b64\u8bf7\u6c42\u672a\u5b8c\u6210\u3002",invalid_response:"\u65e0\u6548\u7684Anchor\u54cd\u5e94\uff0c\u5fc5\u987b\u5305\u542blink_ch, link_key, link_name\u548ccid\u6807\u8bc6\u7b26\u3002",expired:"\u8bf7\u6c42\u5df2\u8fc7\u671f\uff0c\u8bf7\u91cd\u8bd5\u3002"},transact:{await:"\u7b49\u5f85Anchor\u54cd\u5e94",link:"\u624b\u52a8\u89e6\u53d1",label:"\u624b\u52a8\u6216\u4f7f\u7528\u5176\u4ed6\u8bbe\u5907\u7b7e\u7ea6",body:'\u8bf7\u5728"{{channelName}}"\u4e0a\u6253\u5f00\u60a8\u7684Anchor\u94b1\u5305\u4ee5\u6d4f\u89c8\u5e76\u6279\u51c6\u6b64\u4ea4\u6613\u3002',title:"\u5b8c\u6210\u4f7f\u7528Anchor"}},"zh-Hant":{}};class vr extends xn{constructor(e){super(),this.id="anchor",this.translations=wr,this.config={requiresChainSelect:!1,requiresPermissionSelect:!1},this.metadata=Dn.from({name:"Anchor",description:"",logo:_n.from({dark:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB3aWR0aD0iMTYwIiBoZWlnaHQ9IjE2MCIgdmlld0JveD0iMCAwIDI1NiAyNTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMS40NCwgMCwgMCwgMS40NCwgLTguNTAxOTI1LCAtNTcuMDc0NTcpIiBzdHlsZT0iIj4KICAgIDx0aXRsZT5XaGl0ZTwvdGl0bGU+CiAgICA8Y2lyY2xlIGN4PSI5NC43OTMiIGN5PSIxMjguNTI0IiByPSI4MCIgZmlsbD0iI0ZCRkRGRiIvPgogICAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0gOTQuNzk5IDc4LjUyNCBDIDk3LjA5OCA3OC41MjQgOTkuMTk1IDc5LjgzNyAxMDAuMTk4IDgxLjkwNiBMIDEyNC4yMDQgMTMxLjQwNiBMIDEyNC43NDYgMTMyLjUyNCBMIDExMS40MDkgMTMyLjUyNCBMIDEwNy41MyAxMjQuNTI0IEwgODIuMDY5IDEyNC41MjQgTCA3OC4xODkgMTMyLjUyNCBMIDY0Ljg1MyAxMzIuNTI0IEwgNjUuMzk1IDEzMS40MDYgTCA4OS40MDEgODEuOTA2IEMgOTAuNDA0IDc5LjgzNyA5Mi41MDEgNzguNTI0IDk0Ljc5OSA3OC41MjQgWiBNIDg2LjkxOSAxMTQuNTI0IEwgMTAyLjY4IDExNC41MjQgTCA5NC43OTkgOTguMjc0IEwgODYuOTE5IDExNC41MjQgWiBNIDExMi43OTMgMTQ5LjUyNCBMIDEyNC43OTggMTQ5LjUyNCBDIDEyNC40MzcgMTY1LjY3NiAxMTEuMDY3IDE3OC41MjQgOTQuNzk5IDE3OC41MjQgQyA3OC41MzIgMTc4LjUyNCA2NS4xNjIgMTY1LjY3NiA2NC44MDEgMTQ5LjUyNCBMIDc2LjgwNiAxNDkuNTI0IEMgNzcuMDg3IDE1Ni44NzggODEuOTc0IDE2My4xNTUgODguNzkzIDE2NS41MiBMIDg4Ljc5MyAxNDEuNTI0IEMgODguNzkzIDEzOC4yMSA5MS40OCAxMzUuNTI0IDk0Ljc5MyAxMzUuNTI0IEMgOTguMTA3IDEzNS41MjQgMTAwLjc5MyAxMzguMjEgMTAwLjc5MyAxNDEuNTI0IEwgMTAwLjc5MyAxNjUuNTI0IEMgMTA3LjYyIDE2My4xNjIgMTEyLjUxMSAxNTYuODgzIDExMi43OTMgMTQ5LjUyNCBaIiBmaWxsPSIjMzY1MEEyIi8+CiAgPC9nPgo8L3N2Zz4=",light:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYwIiBoZWlnaHQ9IjE2MCIgdmlld0JveD0iMCAwIDE2MCAxNjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxjaXJjbGUgY3g9IjgwIiBjeT0iODAiIHI9IjgwIiBmaWxsPSIjMzY1MEEyIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNODAuMDA2MyAzMEM4Mi4zMDUxIDMwIDg0LjQwMTkgMzEuMzEzNCA4NS40MDUgMzMuMzgxOEwxMDkuNDExIDgyLjg4MjJMMTA5Ljk1MyA4NEg5Ni42MTYzTDkyLjczNjYgNzZINjcuMjc1OUw2My4zOTYxIDg0SDUwLjA1OTRMNTAuNjAxNyA4Mi44ODE4TDc0LjYwNzcgMzMuMzgxOEM3NS42MTA4IDMxLjMxMzQgNzcuNzA3NSAzMCA4MC4wMDYzIDMwWk03Mi4xMjU2IDY2SDg3Ljg4N0w4MC4wMDYzIDQ5Ljc1MDFMNzIuMTI1NiA2NlpNOTcuOTk5NSAxMDFIMTEwLjAwNUMxMDkuNjQ0IDExNy4xNTIgOTYuMjczOCAxMzAgODAuMDA2MyAxMzBDNjMuNzM4OCAxMzAgNTAuMzY4NiAxMTcuMTUyIDUwLjAwNzggMTAxSDYyLjAxMzFDNjIuMjk0MSAxMDguMzU0IDY3LjE4MDQgMTE0LjYzMSA3NC4wMDAzIDExNi45OTZWOTNDNzQuMDAwMyA4OS42ODYzIDc2LjY4NjYgODcgODAuMDAwMyA4N0M4My4zMTQgODcgODYuMDAwMyA4OS42ODYzIDg2LjAwMDMgOTNWMTE3QzkyLjgyNjUgMTE0LjYzOCA5Ny43MTgzIDEwOC4zNTkgOTcuOTk5NSAxMDFaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K"}),homepage:"https://greymass.com/anchor",download:"https://greymass.com/anchor/download"}),this.buoyUrl=e?.buoyUrl||"https://cb.anchor.link",this.buoyWs=e?.buoyWs}login(e){return new Promise((t,n)=>{this.handleLogin(e).then(e=>{t(e)}).catch(e=>{n(e)})})}async handleLogin(e){if(!e.ui)throw new Error("No UI available");const t=e.ui.getTranslate(this.id),{callback:n,request:i,sameDeviceRequest:l,requestKey:h,privateKey:m}=await async function(e,t){const n=Cn.generate("K1"),r=n.toPublic(),i=yr.from({session_name:e.appName,request_key:r,user_agent:f()}),s=!(e.chain||1===e.chains.length),a=y(t),c=s?null:e.chain?kn.from(e.chain.id.array):null,u=s?e.chains.map(e=>kn.from(e.id.array)):[],l=Nn.identity({callback:g(a),scope:String(e.appName),chainId:c,chainIds:u,info:{link:i,scope:String(e.appName)}},e.esrOptions),d=l.clone();if("undefined"!=typeof window){const e=o();d.setInfoKey("same_device",!0),void 0!==e&&d.setInfoKey("return_path",e)}return{callback:a,request:l,sameDeviceRequest:d,requestKey:r,privateKey:n}}(e,this.buoyUrl),w=[{type:"link",label:t("login.link",{default:"Launch Anchor"}),data:{href:l.encode(!0,!1,"esr:"),label:t("login.link",{default:"Launch Anchor"}),variant:"primary"}}];s()||a()||c()||u()||d()||p()||w.unshift({type:"qr",data:i.encode(!0,!1,"esr:")}),window.location.href=l.encode(!0,!1,"esr:");const v=e.ui?.prompt({title:t("login.title",{default:"Connect with Anchor"}),body:t("login.body",{default:"Scan with Anchor on your mobile device or click the button below to open on this device."}),elements:w});v.catch(()=>{console.info("Modal closed")});const b=await r(n,this.buoyWs,t);if(async function(e,t){if(!e.sig||0===e.sig.length)throw new Error("Invalid response, must have at least one signature");let n;if(!t.chain&&t.chains.length>1){if(!e.cid)throw new Error("Multi chain response payload must specify resolved chain id (cid)")}else if(n=t.chain||t.chains[0],e.cid&&String(n.id)!==e.cid)throw new Error("Got response for wrong chain id")}(b,e),!b.cid||!b.sa||!b.sp)throw new Error("Invalid callback response");if(b.link_ch&&b.link_key&&b.link_name){this.data.requestKey=h,this.data.privateKey=m,this.data.signerKey=b.link_key&&Rn.from(b.link_key),this.data.channelUrl=b.link_ch,this.data.channelName=b.link_name;try{if(b.link_meta){const e=JSON.parse(b.link_meta);this.data.sameDevice=e.sameDevice,this.data.launchUrl=e.launchUrl,this.data.triggerUrl=e.triggerUrl}}catch(E){}}const A=(await Mn.fromPayload(b,e.esrOptions)).getIdentityProof(b.sig);return{chain:An.from(b.cid),permissionLevel:Pn.from({actor:b.sa,permission:b.sp}),identityProof:A}}sign(e,t){return this.handleSigningRequest(e,t)}async handleSigningRequest(e,n){if(!n.ui)throw new Error("No UI available");const i=n.ui.getTranslate(this.id),a=e.transaction.expiration.toDate(),c=new Date,u=Math.floor(a.getTime()-c.getTime()),l=await n.createRequest({transaction:e.transaction});l.setInfoKey("link",fr.from({expiration:a}));const d=function(e,t){const n=y(t);return e.setCallback(`${n.service}/${n.channel}`,!0),n}(l,this.buoyUrl),h=l.encode(!0,!1),p=!1!==this.data.sameDevice,f=l.clone(),g=o();f.setInfoKey("same_device",!0),g&&f.setInfoKey("return_path",g),this.data.sameDevice&&(this.data.launchUrl?window.location.href=this.data.launchUrl:s()&&(window.location.href="anchor://link"));const w=n.ui.prompt({title:i("transact.title",{default:"Complete using Anchor"}),body:i("transact.body",{channelName:this.data.channelName,default:`Please open your Anchor Wallet on "${this.data.channelName}" to review and approve this transaction.`}),elements:[{type:"countdown",data:{label:i("transact.await",{default:"Waiting for response from Anchor"}),end:a.toISOString()}},{type:"button",label:i("transact.label",{default:"Sign manually or with another device"}),data:{onClick:p?()=>window.location.href=f.encode():()=>{n.ui?.prompt({title:i("transact.sign_manually.title",{default:"Sign manually"}),body:i("transact.sign_manually.body",{default:"Scan the QR-code with Anchor on another device or use the button to open it here."}),elements:[{type:"qr",data:String(h)},{type:"link",label:i("transact.sign_manually.link.title",{default:"Open Anchor"}),data:{href:String(f),label:i("transact.sign_manually.link.title",{default:"Open Anchor"})}}]})},label:i("transact.label",{default:"Sign manually or with another device"})}}]}),v=setTimeout(()=>{if(!n.ui)throw new Error("No UI available");w.cancel(i("error.expired",{default:"The request expired, please try again."}))},u);w.catch(()=>clearTimeout(v));const b=r(d,this.buoyWs,i);if(this.data.channelUrl){const e=new URL(this.data.channelUrl).origin,n=new URL(this.data.channelUrl).pathname.substring(1),r=await async function(e,n,r,i){return t(e,n,r,i)}((this.data.sameDevice?f:l).encode(!0,!1,"esr:"),Cn.from(this.data.privateKey),Rn.from(this.data.signerKey));!async function(e,t){const n=t.fetch||ur.fetch,r=`${t.service.replace(/^ws/,"http").replace(/\/$/,"")}/${t.channel}`,i={};if(t.requireDelivery){if(!t.timeout)throw new Error("requireDelivery can only be used with timeout");i["X-Buoy-Wait"]=`${Math.ceil(t.timeout/1e3)}`}else t.timeout&&(i["X-Buoy-Soft-Wait"]=`${Math.ceil(t.timeout/1e3)}`);let o;o="string"==typeof e||e instanceof Uint8Array?e:JSON.stringify(e);const s=await n(r,{method:"POST",body:o,headers:i});if(2!==Math.floor(s.status/100))throw 408===s.status?new Error("Unable to deliver message"):410===s.status?new Error("Request cancelled"):new Error(`Unexpected status code ${s.status}`);s.headers.get("X-Buoy-Delivery")||lr.buffered}(Sn.encode({object:r}).array,{service:e,channel:n})}else window.location.href=f.encode();const A=await Promise.race([b,w]).finally(()=>{clearTimeout(v)});if("tx"in A&&m(A).length>0){const e=await Mn.fromPayload(A,n.esrOptions);return{signatures:m(A),resolved:e}}const E=i("error.not_completed",{default:"The request was not completed."});throw w.cancel(E),new Error(E)}}const br=[];for(let _d=0;_d<256;++_d)br.push((_d+256).toString(16).slice(1));let Ar;const Er=new Uint8Array(16),Sr={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},Ir="x-amz-user-agent";var Tr,Cr;(Cr=Tr||(Tr={})).DEBUG="DEBUG",Cr.ERROR="ERROR",Cr.INFO="INFO",Cr.WARN="WARN",Cr.VERBOSE="VERBOSE",Cr.NONE="NONE";const kr={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};let Nr=class e{constructor(e,t=Tr.WARN){this.name=e,this.level=t,this._pluggables=[]}_padding(e){return e<10?"0"+e:""+e}_ts(){const e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()}configure(e){return e?(this._config=e,this._config):this._config}_log(t,...n){let r=this.level;e.LOG_LEVEL&&(r=e.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(r=window.LOG_LEVEL);if(!(kr[t]>=kr[r]))return;let i=console.log.bind(console);t===Tr.ERROR&&console.error&&(i=console.error.bind(console)),t===Tr.WARN&&console.warn&&(i=console.warn.bind(console)),e.BIND_ALL_LOG_LEVELS&&(t===Tr.INFO&&console.info&&(i=console.info.bind(console)),t===Tr.DEBUG&&console.debug&&(i=console.debug.bind(console)));const o=`[${t}] ${this._ts()} ${this.name}`;let s="";if(1===n.length&&"string"==typeof n[0])s=`${o} - ${n[0]}`,i(s);else if(1===n.length)s=`${o} ${n[0]}`,i(o,n[0]);else if("string"==typeof n[0]){let e=n.slice(1);1===e.length&&(e=e[0]),s=`${o} - ${n[0]} ${e}`,i(`${o} - ${n[0]}`,e)}else s=`${o} ${n}`,i(o,n);for(const e of this._pluggables){const t={message:s,timestamp:Date.now()};e.pushLogs([t])}}log(...e){this._log(Tr.INFO,...e)}info(...e){this._log(Tr.INFO,...e)}warn(...e){this._log(Tr.WARN,...e)}error(...e){this._log(Tr.ERROR,...e)}debug(...e){this._log(Tr.DEBUG,...e)}verbose(...e){this._log(Tr.VERBOSE,...e)}addPluggable(e){e&&"Logging"===e.getCategoryName()&&(this._pluggables.push(e),e.configure(this._config))}listPluggables(){return this._pluggables}};Nr.LOG_LEVEL=null,Nr.BIND_ALL_LOG_LEVELS=!1;let Or=class e extends Error{constructor({message:t,name:n,recoverySuggestion:r,underlyingError:i,metadata:o}){if(super(t),this.name=n,this.underlyingError=i,this.recoverySuggestion=r,o){const{extendedRequestId:e,httpStatusCode:t,requestId:n}=o;this.metadata={extendedRequestId:e,httpStatusCode:t,requestId:n}}this.constructor=e,Object.setPrototypeOf(this,e.prototype)}};var xr,Dr;(Dr=xr||(xr={})).NoEndpointId="NoEndpointId",Dr.PlatformNotSupported="PlatformNotSupported",Dr.Unknown="Unknown",Dr.NetworkError="NetworkError";const _r="undefined"!=typeof Symbol?Symbol("amplify_default"):"@@amplify_default",Rr=new Nr("Hub");const Mr=new class{constructor(e){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=e}_remove(e,t){const n=this.listeners.get(e);n?this.listeners.set(e,[...n.filter(({callback:e})=>e!==t)]):Rr.warn(`No listeners for ${e}`)}dispatch(e,t,n,r){if("string"==typeof e&&this.protectedChannels.indexOf(e)>-1){r===_r||Rr.warn(`WARNING: ${e} is protected and dispatching on it can have unintended consequences`)}const i={channel:e,payload:{...t},source:n,patternInfo:[]};try{this._toListeners(i)}catch(o){Rr.error(o)}}listen(e,t,n="noname"){let r;if("function"!=typeof t)throw new Or({name:"NoHubcallbackProvidedException",message:"No callback supplied to Hub"});r=t;let i=this.listeners.get(e);return i||(i=[],this.listeners.set(e,i)),i.push({name:n,callback:r}),()=>{this._remove(e,r)}}_toListeners(e){const{channel:t,payload:n}=e,r=this.listeners.get(t);r&&r.forEach(r=>{Rr.debug(`Dispatching to ${t} with `,n);try{r.callback(e)}catch(i){Rr.error(i)}})}}("__default__"),Pr=e=>e&&e.nonRetryable,Lr=new Nr("retryUtil"),Ur=e=>{const t=Reflect.ownKeys(e);for(const n of t){const t=e[n];(t&&"object"==typeof t||"function"==typeof t)&&Ur(t)}return Object.freeze(e)},jr=new Nr("parseAWSExports"),Kr={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},Br=e=>e?.split(",")??[],Fr=({domain:e,scope:t,redirectSignIn:n,redirectSignOut:r,responseType:i})=>({domain:e,scopes:t,redirectSignIn:Br(n),redirectSignOut:Br(r),responseType:i}),qr=e=>e.map(e=>{const t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)}),Vr=Symbol("oauth-listener"),Gr={AMAZON_COGNITO_USER_POOLS:"userPool",API_KEY:"apiKey",AWS_IAM:"iam",AWS_LAMBDA:"lambda",OPENID_CONNECT:"oidc"},zr={GOOGLE:"Google",LOGIN_WITH_AMAZON:"Amazon",FACEBOOK:"Facebook",SIGN_IN_WITH_APPLE:"Apple"},Wr=e=>Object.keys(e).some(e=>e.startsWith("aws_"))?((e={})=>{if(!Object.prototype.hasOwnProperty.call(e,"aws_project_region"))throw new Or({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});const{aws_appsync_apiKey:t,aws_appsync_authenticationType:n,aws_appsync_graphqlEndpoint:r,aws_appsync_region:i,aws_bots_config:o,aws_cognito_identity_pool_id:s,aws_cognito_sign_up_verification_method:a,aws_cognito_mfa_configuration:c,aws_cognito_mfa_types:u,aws_cognito_password_protection_settings:l,aws_cognito_verification_mechanisms:d,aws_cognito_signup_attributes:h,aws_cognito_social_providers:p,aws_cognito_username_attributes:f,aws_mandatory_sign_in:g,aws_mobile_analytics_app_id:y,aws_mobile_analytics_app_region:m,aws_user_files_s3_bucket:w,aws_user_files_s3_bucket_region:v,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:b,aws_user_pools_id:A,aws_user_pools_web_client_id:E,geo:S,oauth:I,predictions:T,aws_cloud_logic_custom:C,Notifications:k,modelIntrospection:N}=e,O={};y&&(O.Analytics={Pinpoint:{appId:y,region:m}});const{InAppMessaging:x,Push:D}=k??{};if(x?.AWSPinpoint||D?.AWSPinpoint){if(x?.AWSPinpoint){const{appId:e,region:t}=x.AWSPinpoint;O.Notifications={InAppMessaging:{Pinpoint:{appId:e,region:t}}}}if(D?.AWSPinpoint){const{appId:e,region:t}=D.AWSPinpoint;O.Notifications={...O.Notifications,PushNotification:{Pinpoint:{appId:e,region:t}}}}}if(Array.isArray(o)&&(O.Interactions={LexV1:Object.fromEntries(o.map(e=>[e.name,e]))}),r){const e=Kr[n];e||jr.debug(`Invalid authentication type ${n}. Falling back to IAM.`),O.API={GraphQL:{endpoint:r,apiKey:t,region:i,defaultAuthMode:e??"iam"}},N&&(O.API.GraphQL.modelIntrospection=N)}const _=c?{status:c&&c.toLowerCase(),totpEnabled:u?.includes("TOTP")??!1,smsEnabled:u?.includes("SMS")??!1}:void 0,R=l?{minLength:l.passwordPolicyMinLength,requireLowercase:l.passwordPolicyCharacters?.includes("REQUIRES_LOWERCASE")??!1,requireUppercase:l.passwordPolicyCharacters?.includes("REQUIRES_UPPERCASE")??!1,requireNumbers:l.passwordPolicyCharacters?.includes("REQUIRES_NUMBERS")??!1,requireSpecialCharacters:l.passwordPolicyCharacters?.includes("REQUIRES_SYMBOLS")??!1}:void 0,M=Array.from(new Set([...d??[],...h??[]])).reduce((e,t)=>({...e,[t.toLowerCase()]:{required:!0}}),{}),P=f?.includes("EMAIL")??!1,L=f?.includes("PHONE_NUMBER")??!1;(s||A)&&(O.Auth={Cognito:{identityPoolId:s,allowGuestAccess:"enable"!==g,signUpVerificationMethod:a,userAttributes:M,userPoolClientId:E,userPoolId:A,mfa:_,passwordFormat:R,loginWith:{username:!(P||L),email:P,phone:L}}});const U=!!I&&Object.keys(I).length>0,j=!!p&&p.length>0;if(O.Auth&&U&&(O.Auth.Cognito.loginWith={...O.Auth.Cognito.loginWith,oauth:{...Fr(I),...j&&{providers:qr(p)}}}),w&&(O.Storage={S3:{bucket:w,region:v,dangerouslyConnectToHttpEndpointForTesting:b}}),S){const{amazon_location_service:e}=S;O.Geo={LocationService:{maps:e.maps,geofenceCollections:e.geofenceCollections,searchIndices:e.search_indices,region:e.region}}}if(C&&(O.API={...O.API,REST:C.reduce((e,t)=>{const{name:n,endpoint:r,region:i,service:o}=t;return{...e,[n]:{endpoint:r,...o?{service:o}:void 0,...i?{region:i}:void 0}}},{})}),T){const{VoiceId:e}=T?.convert?.speechGenerator?.defaults??{};O.Predictions=e?{...T,convert:{...T.convert,speechGenerator:{...T.convert.speechGenerator,defaults:{voiceId:e}}}}:T}return O})(e):function(e){const{version:t}=e;return!!t&&t.startsWith("1")}(e)?v(e):e;var Qr=64,Jr=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Yr=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Hr=Math.pow(2,53)-1,Zr=function(){function e(){this.state=Int32Array.from(Yr),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>Hr)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===Qr&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%Qr>=56){for(var r=this.bufferLength;r<Qr;r++)t.setUint8(r,0);this.hashBuffer(),this.bufferLength=0}for(r=this.bufferLength;r<56;r++)t.setUint8(r,0);t.setUint32(56,Math.floor(e/4294967296),!0),t.setUint32(60,e),this.hashBuffer(),this.finished=!0}var i=new Uint8Array(32);for(r=0;r<8;r++)i[4*r]=this.state[r]>>>24&255,i[4*r+1]=this.state[r]>>>16&255,i[4*r+2]=this.state[r]>>>8&255,i[4*r+3]=this.state[r]>>>0&255;return i},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],c=t[6],u=t[7],l=0;l<Qr;l++){if(l<16)this.temp[l]=(255&e[4*l])<<24|(255&e[4*l+1])<<16|(255&e[4*l+2])<<8|255&e[4*l+3];else{var d=this.temp[l-2],h=(d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10,p=((d=this.temp[l-15])>>>7|d<<25)^(d>>>18|d<<14)^d>>>3;this.temp[l]=(h+this.temp[l-7]|0)+(p+this.temp[l-16]|0)}var f=(((s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7))+(s&a^~s&c)|0)+(u+(Jr[l]+this.temp[l]|0)|0)|0,g=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&r^n&i^r&i)|0;u=c,c=a,a=s,s=o+f|0,o=i,i=r,r=n,n=f+g|0}t[0]+=n,t[1]+=r,t[2]+=i,t[3]+=o,t[4]+=s,t[5]+=a,t[6]+=c,t[7]+=u},e}();var Xr="undefined"!=typeof Buffer&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:e=>(new TextEncoder).encode(e),$r=function(){function e(e){this.secret=e,this.hash=new Zr,this.reset()}return e.prototype.update=function(e){var t;if(("string"==typeof(t=e)?0!==t.length:0!==t.byteLength)&&!this.error)try{this.hash.update(I(e))}catch(n){this.error=n}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return Ln(this,void 0,void 0,function(){return Un(this,function(){return[2,this.digestSync()]})})},e.prototype.reset=function(){if(this.hash=new Zr,this.secret){this.outer=new Zr;var e=function(e){var t=I(e);if(t.byteLength>Qr){var n=new Zr;n.update(t),t=n.digest()}var r=new Uint8Array(Qr);return r.set(t),r}(this.secret),t=new Uint8Array(Qr);t.set(e);for(var n=0;n<Qr;n++)e[n]^=54,t[n]^=92;this.hash.update(e),this.outer.update(t);for(n=0;n<e.byteLength;n++)e[n]=0}},e}();const ei={};for(let _d=0;_d<256;_d++){let e=_d.toString(16).toLowerCase();1===e.length&&(e=`0${e}`),ei[_d]=e}var ti,ni,ri,ii,oi,si,ai,ci,ui,li,di,hi,pi,fi,gi,yi,mi,wi,vi,bi,Ai,Ei,Si,Ii,Ti,Ci;(ni=ti||(ti={})).WebUnknown="0",ni.React="1",ni.NextJs="2",ni.Angular="3",ni.VueJs="4",ni.Nuxt="5",ni.Svelte="6",ni.ServerSideUnknown="100",ni.ReactSSR="101",ni.NextJsSSR="102",ni.AngularSSR="103",ni.VueJsSSR="104",ni.NuxtSSR="105",ni.SvelteSSR="106",ni.ReactNative="201",ni.Expo="202",(ii=ri||(ri={})).AI="ai",ii.API="api",ii.Auth="auth",ii.Analytics="analytics",ii.DataStore="datastore",ii.Geo="geo",ii.InAppMessaging="inappmessaging",ii.Interactions="interactions",ii.Predictions="predictions",ii.PubSub="pubsub",ii.PushNotification="pushnotification",ii.Storage="storage",(si=oi||(oi={})).CreateConversation="1",si.GetConversation="2",si.ListConversations="3",si.DeleteConversation="4",si.SendMessage="5",si.ListMessages="6",si.OnMessage="7",si.Generation="8",si.UpdateConversation="9",(ci=ai||(ai={})).Record="1",ci.IdentifyUser="2",(li=ui||(ui={})).GraphQl="1",li.Get="2",li.Post="3",li.Put="4",li.Patch="5",li.Del="6",li.Head="7",(hi=di||(di={})).SignUp="1",hi.ConfirmSignUp="2",hi.ResendSignUpCode="3",hi.SignIn="4",hi.FetchMFAPreference="6",hi.UpdateMFAPreference="7",hi.SetUpTOTP="10",hi.VerifyTOTPSetup="11",hi.ConfirmSignIn="12",hi.DeleteUserAttributes="15",hi.DeleteUser="16",hi.UpdateUserAttributes="17",hi.FetchUserAttributes="18",hi.ConfirmUserAttribute="22",hi.SignOut="26",hi.UpdatePassword="27",hi.ResetPassword="28",hi.ConfirmResetPassword="29",hi.FederatedSignIn="30",hi.RememberDevice="32",hi.ForgetDevice="33",hi.FetchDevices="34",hi.SendUserAttributeVerificationCode="35",hi.SignInWithRedirect="36",hi.StartWebAuthnRegistration="37",hi.CompleteWebAuthnRegistration="38",hi.ListWebAuthnCredentials="39",hi.DeleteWebAuthnCredential="40",(fi=pi||(pi={})).Subscribe="1",fi.GraphQl="2",(yi=gi||(gi={})).SearchByText="0",yi.SearchByCoordinates="1",yi.SearchForSuggestions="2",yi.SearchByPlaceId="3",yi.SaveGeofences="4",yi.GetGeofence="5",yi.ListGeofences="6",yi.DeleteGeofences="7",(wi=mi||(mi={})).SyncMessages="1",wi.IdentifyUser="2",wi.NotifyMessageInteraction="3",(vi||(vi={})).None="0",(Ai=bi||(bi={})).Convert="1",Ai.Identify="2",Ai.Interpret="3",(Ei||(Ei={})).Subscribe="1",(Ii=Si||(Si={})).InitializePushNotifications="1",Ii.IdentifyUser="2",(Ci=Ti||(Ti={})).UploadData="1",Ci.DownloadData="2",Ci.List="3",Ci.Copy="4",Ci.Remove="5",Ci.GetProperties="6",Ci.GetUrl="7",Ci.GetDataAccess="8",Ci.ListCallerAccessGrants="9";const ki=()=>"undefined"!=typeof globalThis,Ni=()=>"undefined"!=typeof window,Oi=()=>"undefined"!=typeof document,xi=()=>"undefined"!=typeof process,Di=(e,t)=>!!Object.keys(e).find(e=>e.startsWith(t));var _i={},Ri={},Mi={};const Pi=[{platform:ti.Expo,detectionMethod:function(){return ki()&&void 0!==globalThis.expo}},{platform:ti.ReactNative,detectionMethod:function(){return"undefined"!=typeof navigator&&void 0!==navigator.product&&"ReactNative"===navigator.product}},{platform:ti.NextJs,detectionMethod:function(){return Ni()&&window.next&&"object"==typeof window.next}},{platform:ti.Nuxt,detectionMethod:function(){return Ni()&&(void 0!==window.__NUXT__||void 0!==window.$nuxt)}},{platform:ti.Angular,detectionMethod:function(){const e=Boolean(Oi()&&document.querySelector("[ng-version]")),t=Boolean(Ni()&&void 0!==window.ng);return e||t}},{platform:ti.React,detectionMethod:function(){const e=e=>e.startsWith("_react")||e.startsWith("__react");return Oi()&&Array.from(document.querySelectorAll("[id]")).some(t=>Object.keys(t).find(e))}},{platform:ti.VueJs,detectionMethod:function(){return Ni()&&Di(window,"__VUE")}},{platform:ti.Svelte,detectionMethod:function(){return Ni()&&Di(window,"__SVELTE")}},{platform:ti.WebUnknown,detectionMethod:function(){return Ni()}},{platform:ti.NextJsSSR,detectionMethod:function(){return ki()&&(Di(globalThis,"__next")||Di(globalThis,"__NEXT"))}},{platform:ti.NuxtSSR,detectionMethod:function(){return ki()&&void 0!==globalThis.__NUXT_PATHS__}},{platform:ti.ReactSSR,detectionMethod:function(){return xi()&&!!Object.keys(_i).find(e=>e.includes("react"))}},{platform:ti.VueJsSSR,detectionMethod:function(){return ki()&&Di(globalThis,"__VUE")}},{platform:ti.AngularSSR,detectionMethod:function(){return xi()&&"object"==typeof Mi&&Mi.npm_lifecycle_script?.startsWith("ng ")||!1}},{platform:ti.SvelteSSR,detectionMethod:function(){return xi()&&!!Object.keys(Ri).find(e=>e.includes("svelte"))}}];let Li;const Ui=[];let ji=!1;const Ki=()=>{if(!Li){if(Li=Pi.find(e=>e.detectionMethod())?.platform||ti.ServerSideUnknown,ji)for(;Ui.length;)Ui.pop()?.();else Ui.forEach(e=>{e()});T(ti.ServerSideUnknown,10),T(ti.WebUnknown,10)}return Li},Bi={},Fi=({category:e,action:t}={})=>{const n=[["aws-amplify",(r="6.15.6",r.replace(/\+.*/,""))]];var r;if(e&&n.push([e,t]),n.push(["framework",Ki()]),e&&t){const r=((e,t)=>Bi[e]?.[t]?.additionalDetails)(e,t);r&&r.forEach(e=>{n.push(e)})}return n},qi=e=>Fi(e).map(([e,t])=>e&&t?`${e}/${t}`:e).join(" ");var Vi,Gi=((Vi=function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}(function(e){Error.call(e),e.stack=(new Error).stack})).prototype=Object.create(Error.prototype),Vi.prototype.constructor=Vi,Vi),zi=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,r,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var s=jn(o),a=s.next();!a.done;a=s.next()){a.value.remove(this)}}catch(p){e={error:p}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else o.remove(this);var c=this.initialTeardown;if(C(c))try{c()}catch(f){i=f instanceof Gi?f.errors:[f]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var l=jn(u),d=l.next();!d.done;d=l.next()){var h=d.value;try{O(h)}catch(g){i=null!=i?i:[],g instanceof Gi?i=Kn(Kn([],Bn(i)),Bn(g.errors)):i.push(g)}}}catch(y){n={error:y}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}if(i)throw new Gi(i)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)O(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&k(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&k(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}();zi.EMPTY;var Wi=void 0,Qi=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,Kn([e,t],Bn(n)))},Ji=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,N(t)&&t.add(n)):n.destination=Zi,n}return Fn(t,e),t.create=function(e,t,n){return new Hi(e,t,n)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(zi),Yi=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){_(n)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){_(n)}else _(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){_(t)}},e}(),Hi=function(e){function t(t,n,r){var i,o=e.call(this)||this;return i=C(t)||!t?{next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:t,o.destination=new Yi(i),o}return Fn(t,e),t}(Ji),Zi={closed:!0,next:D,error:function(e){throw e},complete:D},Xi="function"==typeof Symbol&&Symbol.observable||"@@observable",$i=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this,i=P(e)?e:new Hi(e,t,n);return function(){var e=r,t=e.operator,n=e.source;i.add(t?t.call(i,n):n?r._subscribe(i):r._trySubscribe(i))}(),i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=M(t))(function(t,r){var i=new Hi({next:function(t){try{e(t)}catch(n){r(n),i.unsubscribe()}},error:r,complete:t});n.subscribe(i)})},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[Xi]=function(){return this},e.prototype.pipe=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0===(e=t).length?R:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=M(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}(),eo=function(e){function t(t,n,r,i,o,s){var a=e.call(this,t)||this;return a.onFinalize=o,a.shouldUnsubscribe=s,a._next=n?function(e){try{n(e)}catch(r){t.error(r)}}:e.prototype._next,a._error=i?function(e){try{i(e)}catch(n){t.error(n)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return Fn(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(Ji),to=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e},no="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";class ro{networkMonitor(e){const t=(()=>{if("undefined"==typeof self)return!1;const e=self;return void 0!==e.WorkerGlobalScope&&self instanceof e.WorkerGlobalScope})()?self:"undefined"!=typeof window&&window;return t?new $i(e=>{e.next({online:t.navigator.onLine});const n=()=>{e.next({online:!0})},r=()=>{e.next({online:!1})};return t.addEventListener("online",n),t.addEventListener("offline",r),ro._observers.push(e),()=>{t.removeEventListener("online",n),t.removeEventListener("offline",r),ro._observers=ro._observers.filter(t=>t!==e)}}):(n=[{online:!0}],r?Z(n,r):z(n));var n,r}static _observerOverride(e){for(const t of this._observers)t.closed?this._observers=this._observers.filter(e=>e!==t):t?.next&&t.next(e)}}ro._observers=[];const io=new Nr("Auth");class oo{configure(e,t){this.authConfig=e,this.authOptions=t,e&&e.Cognito?.userPoolEndpoint&&io.warn(so("Amazon Cognito User Pool")),e&&e.Cognito?.identityPoolEndpoint&&io.warn(so("Amazon Cognito Identity Pool"))}async fetchAuthSession(e={}){let t,n;const r=await this.getTokens(e);return r?(n=r.accessToken?.payload?.sub,t=await(this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:r,authenticated:!0,forceRefresh:e.forceRefresh}))):t=await(this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:e.forceRefresh})),{tokens:r,credentials:t?.credentials,identityId:t?.identityId,userSub:n}}async clearCredentials(){await(this.authOptions?.credentialsProvider?.clearCredentialsAndIdentityId())}async getTokens(e){return await(this.authOptions?.tokenProvider?.getTokens(e))??void 0}}const so=e=>`You are using a custom Amazon ${e} endpoint, ensure the endpoint is correct.`;const ao=new class{constructor(){this.oAuthListener=void 0,this.isConfigured=!1,this.resourcesConfig={},this.libraryOptions={},this.Auth=new oo}configure(e,t){const n=Wr(e);this.resourcesConfig=n,t&&(this.libraryOptions=t),this.resourcesConfig=Ur(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),Mr.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",_r),this.notifyOAuthListener(),this.isConfigured=!0}getConfig(){return this.isConfigured||console.warn("Amplify has not been configured. Please call Amplify.configure() before using this service."),this.resourcesConfig}[Vr](e){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth?e(this.resourcesConfig.Auth?.Cognito):this.oAuthListener=e}notifyOAuthListener(){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth&&this.oAuthListener&&(this.oAuthListener(this.resourcesConfig.Auth?.Cognito),this.oAuthListener=void 0)}},co=e=>((e,t)=>e.Auth.fetchAuthSession(t))(ao,e),uo=e=>{const{headers:t,statusCode:n}=e;return{...lo(e)?e.$metadata:{},httpStatusCode:n,requestId:t["x-amzn-requestid"]??t["x-amzn-request-id"]??t["x-amz-request-id"],extendedRequestId:t["x-amz-id-2"],cfId:t["x-amz-cf-id"]}},lo=e=>"object"==typeof e?.$metadata,ho=async e=>{if(!e.body)throw new Error("Missing response payload");const t=await e.body.json();return Object.assign(t,{$metadata:uo(e)})},po=3e5,fo=e=>{const t=ee(po)(e);return!1===t?po:t},go=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],yo=e=>async(t,n)=>{const r=n??await e(t)??void 0,i=r?.code||r?.name,o=t?.statusCode;return{retryable:bo(n)||vo(o,i)||(e=>!!e&&go.includes(e))(i)||Ao(o,i)}},mo=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],wo=["TimeoutError","RequestTimeout","RequestTimeoutException"],vo=(e,t)=>429===e||!!t&&mo.includes(t),bo=e=>[xr.NetworkError,"ERR_NETWORK"].includes(e?.name),Ao=(e,t)=>!!e&&[500,502,503,504].includes(e)||!!t&&wo.includes(t),Eo=({maxAttempts:e=3,retryDecider:t,computeDelay:n,abortSignal:r})=>{if(e<1)throw new Error("maxAttempts must be greater than 0");return(i,o)=>async function(s){let a,c,u=o.attemptsCount??0;const l=()=>{if(c)return Io(c,u),c;throw Io(a,u),a};for(;!r?.aborted&&u<e;){try{c=await i(s),a=void 0}catch(d){a=d,c=void 0}u=(o.attemptsCount??0)>u?o.attemptsCount??0:u+1,o.attemptsCount=u;const{isCredentialsExpiredError:h,retryable:p}=await t(c,a,o);if(!p)return l();if(o.isCredentialsExpired=!!h,!r?.aborted&&u<e){const e=n(u);await So(e,r)}}if(r?.aborted)throw new Error("Request aborted.");return l()}},So=(e,t)=>{if(t?.aborted)return Promise.resolve();let n,r;const i=new Promise(t=>{r=t,n=setTimeout(t,e)});return t?.addEventListener("abort",function e(){clearTimeout(n),t?.removeEventListener("abort",e),r()}),i},Io=(e,t)=>{"[object Object]"===Object.prototype.toString.call(e)&&(e.$metadata={...e.$metadata??{},attempts:t})},To=w,Co=({userAgentHeader:e="x-amz-user-agent",userAgentValue:t=""})=>n=>async function(r){if(0===t.trim().length){return await n(r)}{const i=e.toLowerCase();r.headers[i]=r.headers[i]?`${r.headers[i]} ${t}`:t;return await n(r)}},ko=(e,t)=>(n,r)=>{const i={};let o=t=>e(t,r);for(let e=t.length-1;e>=0;e--){o=(0,t[e])(r)(o,i)}return o(n)},No=e=>{let t;return()=>(t||(t=e()),t)},Oo=e=>!["HEAD","GET"].includes(e.toUpperCase()),xo=async({url:e,method:t,headers:n,body:r},{abortSignal:i,cache:o,withCrossDomainCredentials:s})=>{let a;try{a=await fetch(e,{method:t,headers:n,body:Oo(t)?r:void 0,signal:i,cache:o,credentials:s?"include":"same-origin"})}catch(u){if(u instanceof TypeError)throw new Or({name:xr.NetworkError,message:"A network error has occurred.",underlyingError:u});throw u}const c={};a.headers?.forEach((e,t)=>{c[t.toLowerCase()]=e});return{...{statusCode:a.status,headers:c,body:null},body:Object.assign(a.body??{},{text:No(()=>a.text()),blob:No(()=>a.blob()),json:No(()=>a.json())})}},Do=URL,_o=URLSearchParams;let Ro=class extends Or{constructor(){super({name:xr.PlatformNotSupported,message:"Function not supported on current platform"})}},Mo=class{constructor(e){this.storage=e}async setItem(e,t){if(!this.storage)throw new Ro;this.storage.setItem(e,t)}async getItem(e){if(!this.storage)throw new Ro;return this.storage.getItem(e)}async removeItem(e){if(!this.storage)throw new Ro;this.storage.removeItem(e)}async clear(){if(!this.storage)throw new Ro;this.storage.clear()}},Po=class{constructor(){this.storage=new Map}get length(){return this.storage.size}key(e){return e>this.length-1?null:Array.from(this.storage.keys())[e]}setItem(e,t){this.storage.set(e,t)}getItem(e){return this.storage.get(e)??null}removeItem(e){this.storage.delete(e)}clear(){this.storage.clear()}};const Lo=new Nr("CoreStorageUtils"),Uo=()=>{try{if("undefined"!=typeof window&&window.sessionStorage)return window.sessionStorage.getItem("test"),window.sessionStorage;throw new Error("sessionStorage is not defined")}catch(e){return Lo.info("sessionStorage not found. InMemoryStorage is used as a fallback."),new Po}};let jo=class{constructor(e){this._storage=e}get storage(){if(!this._storage)throw new Ro;return this._storage}setItem(e,t){this.storage.setItem(e,t)}getItem(e){return this.storage.getItem(e)}removeItem(e){this.storage.removeItem(e)}clear(){this.storage.clear()}};var Ko=function e(t,n){function r(e,r,i){if("undefined"!=typeof document){"number"==typeof(i=te({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var s in i)i[s]&&(o+="; "+s,!0!==i[s]&&(o+="="+i[s].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+o}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},i=0;i<n.length;i++){var o=n[i].split("="),s=o.slice(1).join("=");try{var a=decodeURIComponent(o[0]);if(r[a]=t.read(s,a),e===a)break}catch(c){}}return e?r[e]:r}},remove:function(e,t){r(e,"",te({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,te({},this.attributes,t))},withConverter:function(t){return e(te({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});class Bo{constructor(e={}){const{path:t,domain:n,expires:r,sameSite:i,secure:o}=e;if(this.domain=n,this.path=t||"/",this.expires=Object.prototype.hasOwnProperty.call(e,"expires")?r:365,this.secure=!Object.prototype.hasOwnProperty.call(e,"secure")||o,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!i||!["strict","lax","none"].includes(i))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===i&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=i}}async setItem(e,t){Ko.set(e,t,this.getData())}async getItem(e){return Ko.get(e)??null}async removeItem(e){Ko.remove(e,this.getData())}async clear(){const e=Ko.get(),t=Object.keys(e).map(e=>this.removeItem(e));await Promise.all(t)}getData(){return{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure,...this.sameSite&&{sameSite:this.sameSite}}}}const Fo=new class extends Mo{constructor(){super((()=>{try{if("undefined"!=typeof window&&window.localStorage)return window.localStorage}catch(e){Lo.info("localStorage not found. InMemoryStorage is used as a fallback.")}return new Po})())}};new class extends Mo{constructor(){super(Uo())}},new class extends jo{constructor(){super(Uo())}};const qo=e=>Object.keys(e).map(e=>e.toLowerCase()).sort().join(";"),Vo="X-Amz-Date".toLowerCase(),Go="X-Amz-Security-Token".toLowerCase(),zo="aws4_request",Wo="AWS4-HMAC-SHA256",Qo=({credentials:e,signingDate:t=new Date,signingRegion:n,signingService:r,uriEscapePath:i=!0})=>{const{accessKeyId:o,secretAccessKey:s,sessionToken:a}=e,{longDate:c,shortDate:u}=(e=>{const t=e.toISOString().replace(/[:-]|\.\d{3}/g,"");return{longDate:t,shortDate:t.slice(0,8)}})(t);return{accessKeyId:o,credentialScope:`${u}/${n}/${r}/${zo}`,longDate:c,secretAccessKey:s,sessionToken:a,shortDate:u,signingRegion:n,signingService:r,uriEscapePath:i}},Jo=(e,t)=>{const n=new $r(e??void 0);n.update(t);return n.digestSync()},Yo=(e,t)=>function(e){let t="";for(let n=0;n<e.byteLength;n++)t+=ei[e[n]];return t}(Jo(e,t)),Ho=e=>Object.entries(e).map(([e,t])=>({key:e.toLowerCase(),value:t?.trim().replace(/\s+/g," ")??""})).sort((e,t)=>e.key<t.key?-1:1).map(e=>`${e.key}:${e.value}\n`).join(""),Zo=e=>encodeURIComponent(e).replace(/[!'()*]/g,Xo),Xo=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,$o=(e,t=!0)=>e?t?encodeURIComponent(e).replace(/%2F/g,"/"):e:"/",es=e=>{if(null==e)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(ts(e)){return Yo(null,e)}return"UNSIGNED-PAYLOAD"},ts=e=>"string"==typeof e||ArrayBuffer.isView(e)||ns(e),ns=e=>"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e),rs=(e,{credentialScope:t,longDate:n,secretAccessKey:r,shortDate:i,signingRegion:o,signingService:s,uriEscapePath:a})=>{const c=(({body:e,headers:t,method:n,url:r},i=!0)=>{return[n,$o(r.pathname,i),(o=r.searchParams,Array.from(o).sort(([e,t],[n,r])=>e===n?t<r?-1:1:e<n?-1:1).map(([e,t])=>`${Zo(e)}=${Zo(t)}`).join("&")),Ho(t),qo(t),es(e)].join("\n");var o})(e,a),u=((e,t,n)=>[Wo,e,t,n].join("\n"))(n,t,Yo(null,c)),l=Yo(((e,t,n,r)=>{const i=Jo(`AWS4${e}`,t),o=Jo(i,n),s=Jo(o,r);return Jo(s,zo)})(r,i,o,s),u);return l},is=(e,t)=>{const n=Qo(t),{accessKeyId:r,credentialScope:i,longDate:o,sessionToken:s}=n,a={...e.headers};a.host=e.url.host,a[Vo]=o,s&&(a[Go]=s);const c={...e,headers:a},u=rs(c,n),l=`Credential=${r}/${i}`,d=`SignedHeaders=${qo(a)}`,h=`Signature=${u}`;return a.authorization=`${Wo} ${l}, ${d}, ${h}`,c},os=e=>new Date(Date.now()+e),ss=(e,t)=>((e,t)=>Math.abs(os(t).getTime()-e)>=3e5)(e,t)?e-Date.now():t,as=({headers:e}={})=>e?.date??e?.Date??e?.["x-amz-date"];class cs extends Error{constructor(){super(...arguments),this.nonRetryable=!0}}const us=(e,t,n=3e5)=>async function(e,t,n){if("function"!=typeof e)throw Error("functionToRetry must be a function");return new Promise(async(r,i)=>{let o,s=0,a=()=>{};for(;;){s++,Lr.debug(`${e.name} attempt #${s} with this vars: ${JSON.stringify(t)}`);try{return void r(await e(...t))}catch(c){if(o=c,Lr.debug(`error on ${e.name}`,c),Pr(c))return Lr.debug(`${e.name} non retryable error`,c),void i(c);const r=n(s,t,c);if(Lr.debug(`${e.name} retrying in ${r} ms`),!1===r)return void i(c);await new Promise(e=>{a=e,setTimeout(a,r)})}}i(o)})}(e,t,ee(n));class ls extends Or{get response(){return this._response?ds(this._response):void 0}constructor(e){super(e),this.constructor=ls,Object.setPrototypeOf(this,ls.prototype),e.response&&(this._response=e.response)}}const ds=e=>({...e,headers:{...e.headers}}),hs={convert(e,t={urlSafe:!1,skipPadding:!1}){const n="string"==typeof e?e:function(e){return Array.from(e,e=>String.fromCodePoint(e)).join("")}(e);let r=(()=>{if("undefined"!=typeof window&&"function"==typeof window.btoa)return window.btoa;if("function"==typeof btoa)return btoa;throw new Or({name:"Base64EncoderError",message:"Cannot resolve the `btoa` function from the environment."})})()(n);return t.urlSafe&&(r=r.replace(/\+/g,"-").replace(/\//g,"_")),t.skipPadding&&(r=r.replace(/=/g,"")),r}};var ps;!function(e){e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",e.NONE="NONE"}(ps||(ps={}));const fs={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};class gs{constructor(e,t=ps.WARN){this.name=e,this.level=t,this._pluggables=[]}_padding(e){return e<10?"0"+e:""+e}_ts(){const e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()}configure(e){return e?(this._config=e,this._config):this._config}_log(e,...t){let n=this.level;gs.LOG_LEVEL&&(n=gs.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(n=window.LOG_LEVEL);if(!(fs[e]>=fs[n]))return;let r=console.log.bind(console);e===ps.ERROR&&console.error&&(r=console.error.bind(console)),e===ps.WARN&&console.warn&&(r=console.warn.bind(console)),gs.BIND_ALL_LOG_LEVELS&&(e===ps.INFO&&console.info&&(r=console.info.bind(console)),e===ps.DEBUG&&console.debug&&(r=console.debug.bind(console)));const i=`[${e}] ${this._ts()} ${this.name}`;let o="";if(1===t.length&&"string"==typeof t[0])o=`${i} - ${t[0]}`,r(o);else if(1===t.length)o=`${i} ${t[0]}`,r(i,t[0]);else if("string"==typeof t[0]){let e=t.slice(1);1===e.length&&(e=e[0]),o=`${i} - ${t[0]} ${e}`,r(`${i} - ${t[0]}`,e)}else o=`${i} ${t}`,r(i,t);for(const s of this._pluggables){const e={message:o,timestamp:Date.now()};s.pushLogs([e])}}log(...e){this._log(ps.INFO,...e)}info(...e){this._log(ps.INFO,...e)}warn(...e){this._log(ps.WARN,...e)}error(...e){this._log(ps.ERROR,...e)}debug(...e){this._log(ps.DEBUG,...e)}verbose(...e){this._log(ps.VERBOSE,...e)}addPluggable(e){e&&"Logging"===e.getCategoryName()&&(this._pluggables.push(e),e.configure(this._config))}listPluggables(){return this._pluggables}}gs.LOG_LEVEL=null,gs.BIND_ALL_LOG_LEVELS=!1;class ys extends Error{constructor({message:e,name:t,recoverySuggestion:n,underlyingError:r,metadata:i}){if(super(e),this.name=t,this.underlyingError=r,this.recoverySuggestion=n,i){const{extendedRequestId:e,httpStatusCode:t,requestId:n}=i;this.metadata={extendedRequestId:e,httpStatusCode:t,requestId:n}}this.constructor=ys,Object.setPrototypeOf(this,ys.prototype)}}var ms;!function(e){e.NoEndpointId="NoEndpointId",e.PlatformNotSupported="PlatformNotSupported",e.Unknown="Unknown",e.NetworkError="NetworkError"}(ms||(ms={}));const ws=(e,t=ys)=>(n,r,i)=>{const{message:o,recoverySuggestion:s}=e[r];if(!n)throw new t({name:r,message:i?`${o} ${i}`:o,recoverySuggestion:s})},vs="undefined"!=typeof Symbol?Symbol("amplify_default"):"@@amplify_default",bs=new gs("Hub");const As=new class{constructor(e){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=e}_remove(e,t){const n=this.listeners.get(e);n?this.listeners.set(e,[...n.filter(({callback:e})=>e!==t)]):bs.warn(`No listeners for ${e}`)}dispatch(e,t,n,r){if("string"==typeof e&&this.protectedChannels.indexOf(e)>-1){r===vs||bs.warn(`WARNING: ${e} is protected and dispatching on it can have unintended consequences`)}const i={channel:e,payload:{...t},source:n,patternInfo:[]};try{this._toListeners(i)}catch(o){bs.error(o)}}listen(e,t,n="noname"){let r;if("function"!=typeof t)throw new ys({name:"NoHubcallbackProvidedException",message:"No callback supplied to Hub"});r=t;let i=this.listeners.get(e);return i||(i=[],this.listeners.set(e,i)),i.push({name:n,callback:r}),()=>{this._remove(e,r)}}_toListeners(e){const{channel:t,payload:n}=e,r=this.listeners.get(t);r&&r.forEach(r=>{bs.debug(`Dispatching to ${t} with `,n);try{r.callback(e)}catch(i){bs.error(i)}})}}("__default__"),Es={convert(e,t){let n=e;return t?.urlSafe&&(n=n.replace(/-/g,"+").replace(/_/g,"/")),(()=>{if("undefined"!=typeof window&&"function"==typeof window.atob)return window.atob;if("function"==typeof atob)return atob;throw new ys({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})})()(n)}};var Ss,Is;(Is=Ss||(Ss={})).AuthTokenConfigException="AuthTokenConfigException",Is.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",Is.AuthUserPoolException="AuthUserPoolException",Is.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",Is.OAuthNotConfigureException="OAuthNotConfigureException";const Ts=ws({[Ss.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[Ss.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[Ss.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[Ss.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[Ss.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}});let Cs;const ks=new Uint8Array(16),Ns=[];for(let _d=0;_d<256;++_d)Ns.push((_d+256).toString(16).slice(1));const Os={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var xs,Ds,_s,Rs,Ms,Ps,Ls,Us,js,Ks,Bs,Fs,qs,Vs;!function(e){e.WebUnknown="0",e.React="1",e.NextJs="2",e.Angular="3",e.VueJs="4",e.Nuxt="5",e.Svelte="6",e.ServerSideUnknown="100",e.ReactSSR="101",e.NextJsSSR="102",e.AngularSSR="103",e.VueJsSSR="104",e.NuxtSSR="105",e.SvelteSSR="106",e.ReactNative="201",e.Expo="202"}(xs||(xs={})),function(e){e.AI="ai",e.API="api",e.Auth="auth",e.Analytics="analytics",e.DataStore="datastore",e.Geo="geo",e.InAppMessaging="inappmessaging",e.Interactions="interactions",e.Predictions="predictions",e.PubSub="pubsub",e.PushNotification="pushnotification",e.Storage="storage"}(Ds||(Ds={})),function(e){e.CreateConversation="1",e.GetConversation="2",e.ListConversations="3",e.DeleteConversation="4",e.SendMessage="5",e.ListMessages="6",e.OnMessage="7",e.Generation="8",e.UpdateConversation="9"}(_s||(_s={})),function(e){e.Record="1",e.IdentifyUser="2"}(Rs||(Rs={})),function(e){e.GraphQl="1",e.Get="2",e.Post="3",e.Put="4",e.Patch="5",e.Del="6",e.Head="7"}(Ms||(Ms={})),function(e){e.SignUp="1",e.ConfirmSignUp="2",e.ResendSignUpCode="3",e.SignIn="4",e.FetchMFAPreference="6",e.UpdateMFAPreference="7",e.SetUpTOTP="10",e.VerifyTOTPSetup="11",e.ConfirmSignIn="12",e.DeleteUserAttributes="15",e.DeleteUser="16",e.UpdateUserAttributes="17",e.FetchUserAttributes="18",e.ConfirmUserAttribute="22",e.SignOut="26",e.UpdatePassword="27",e.ResetPassword="28",e.ConfirmResetPassword="29",e.FederatedSignIn="30",e.RememberDevice="32",e.ForgetDevice="33",e.FetchDevices="34",e.SendUserAttributeVerificationCode="35",e.SignInWithRedirect="36",e.StartWebAuthnRegistration="37",e.CompleteWebAuthnRegistration="38",e.ListWebAuthnCredentials="39",e.DeleteWebAuthnCredential="40"}(Ps||(Ps={})),function(e){e.Subscribe="1",e.GraphQl="2"}(Ls||(Ls={})),function(e){e.SearchByText="0",e.SearchByCoordinates="1",e.SearchForSuggestions="2",e.SearchByPlaceId="3",e.SaveGeofences="4",e.GetGeofence="5",e.ListGeofences="6",e.DeleteGeofences="7"}(Us||(Us={})),function(e){e.SyncMessages="1",e.IdentifyUser="2",e.NotifyMessageInteraction="3"}(js||(js={})),(Ks||(Ks={})).None="0",function(e){e.Convert="1",e.Identify="2",e.Interpret="3"}(Bs||(Bs={})),(Fs||(Fs={})).Subscribe="1",function(e){e.InitializePushNotifications="1",e.IdentifyUser="2"}(qs||(qs={})),function(e){e.UploadData="1",e.DownloadData="2",e.List="3",e.Copy="4",e.Remove="5",e.GetProperties="6",e.GetUrl="7",e.GetDataAccess="8",e.ListCallerAccessGrants="9"}(Vs||(Vs={}));const Gs=()=>"undefined"!=typeof globalThis,zs=()=>"undefined"!=typeof window,Ws=()=>"undefined"!=typeof document,Qs=()=>"undefined"!=typeof process,Js=(e,t)=>!!Object.keys(e).find(e=>e.startsWith(t));var Ys={},Hs={},Zs={};const Xs=[{platform:xs.Expo,detectionMethod:function(){return Gs()&&void 0!==globalThis.expo}},{platform:xs.ReactNative,detectionMethod:function(){return"undefined"!=typeof navigator&&void 0!==navigator.product&&"ReactNative"===navigator.product}},{platform:xs.NextJs,detectionMethod:function(){return zs()&&window.next&&"object"==typeof window.next}},{platform:xs.Nuxt,detectionMethod:function(){return zs()&&(void 0!==window.__NUXT__||void 0!==window.$nuxt)}},{platform:xs.Angular,detectionMethod:function(){const e=Boolean(Ws()&&document.querySelector("[ng-version]")),t=Boolean(zs()&&void 0!==window.ng);return e||t}},{platform:xs.React,detectionMethod:function(){const e=e=>e.startsWith("_react")||e.startsWith("__react");return Ws()&&Array.from(document.querySelectorAll("[id]")).some(t=>Object.keys(t).find(e))}},{platform:xs.VueJs,detectionMethod:function(){return zs()&&Js(window,"__VUE")}},{platform:xs.Svelte,detectionMethod:function(){return zs()&&Js(window,"__SVELTE")}},{platform:xs.WebUnknown,detectionMethod:function(){return zs()}},{platform:xs.NextJsSSR,detectionMethod:function(){return Gs()&&(Js(globalThis,"__next")||Js(globalThis,"__NEXT"))}},{platform:xs.NuxtSSR,detectionMethod:function(){return Gs()&&void 0!==globalThis.__NUXT_PATHS__}},{platform:xs.ReactSSR,detectionMethod:function(){return Qs()&&!!Object.keys(Ys).find(e=>e.includes("react"))}},{platform:xs.VueJsSSR,detectionMethod:function(){return Gs()&&Js(globalThis,"__VUE")}},{platform:xs.AngularSSR,detectionMethod:function(){return Qs()&&"object"==typeof Zs&&Zs.npm_lifecycle_script?.startsWith("ng ")||!1}},{platform:xs.SvelteSSR,detectionMethod:function(){return Qs()&&!!Object.keys(Hs).find(e=>e.includes("svelte"))}}];let $s;const ea=[];let ta=!1;const na=()=>{if(!$s){if($s=Xs.find(e=>e.detectionMethod())?.platform||xs.ServerSideUnknown,ta)for(;ea.length;)ea.pop()?.();else ea.forEach(e=>{e()});se(xs.ServerSideUnknown,10),se(xs.WebUnknown,10)}return $s},ra={},ia=({category:e,action:t}={})=>{const n=[["aws-amplify",(r="6.15.0",r.replace(/\+.*/,""))]];var r;if(e&&n.push([e,t]),n.push(["framework",na()]),e&&t){const r=((e,t)=>ra[e]?.[t]?.additionalDetails)(e,t);r&&r.forEach(e=>{n.push(e)})}return n},oa=e=>ia(e).map(([e,t])=>e&&t?`${e}/${t}`:e).join(" "),sa=e=>{const{headers:t,statusCode:n}=e;return{...aa(e)?e.$metadata:{},httpStatusCode:n,requestId:t["x-amzn-requestid"]??t["x-amzn-request-id"]??t["x-amz-request-id"],extendedRequestId:t["x-amz-id-2"],cfId:t["x-amz-cf-id"]}},aa=e=>"object"==typeof e?.$metadata,ca=async e=>{if(!e||e.statusCode<300)return;const t=await ua(e),n=(e=>{const[t]=e.toString().split(/[,:]+/);return t.includes("#")?t.split("#")[1]:t})(e.headers["x-amzn-errortype"]??t.code??t.__type??"UnknownError"),r=t.message??t.Message??"Unknown error",i=new Error(r);return Object.assign(i,{name:n,$metadata:sa(e)})},ua=async e=>{if(!e.body)throw new Error("Missing response payload");const t=await e.body.json();return Object.assign(t,{$metadata:sa(e)})},la=(e,t,n,r)=>async(i,o)=>{const s={...r,...i},a=await s.endpointResolver(s,o),c=await t(o,a),u=await e(c,{...s});return n(u)},da="amz-sdk-invocation-id",ha=3e5,pa=e=>{const t=function(e=3e5){return t=>{const n=2**t*100+100*Math.random();return!(n>e)&&n}}(ha),n=t(e);return!1===n?ha:n},fa=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],ga=e=>async(t,n)=>{const r=n??await e(t)??void 0,i=r?.code||r?.name,o=t?.statusCode;return{retryable:va(n)||wa(o,i)||(e=>!!e&&fa.includes(e))(i)||ba(o,i)}},ya=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],ma=["TimeoutError","RequestTimeout","RequestTimeoutException"],wa=(e,t)=>429===e||!!t&&ya.includes(t),va=e=>[ms.NetworkError,"ERR_NETWORK"].includes(e?.name),ba=(e,t)=>!!e&&[500,502,503,504].includes(e)||!!t&&ma.includes(t),Aa="cognito-identity",Ea={service:Aa,retryDecider:ga(ca),computeDelay:pa,cache:"no-store"},Sa=(e,t)=>{if(t?.aborted)return Promise.resolve();let n,r;const i=new Promise(t=>{r=t,n=setTimeout(t,e)});return t?.addEventListener("abort",function e(){clearTimeout(n),t?.removeEventListener("abort",e),r()}),i},Ia=(e,t)=>{"[object Object]"===Object.prototype.toString.call(e)&&(e.$metadata={...e.$metadata??{},attempts:t})},Ta=function(e,t,n){if(Os.randomUUID&&!t&&!e)return Os.randomUUID();const r=(e=e||{}).random||(e.rng||oe)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){return Ns[e[t+0]]+Ns[e[t+1]]+Ns[e[t+2]]+Ns[e[t+3]]+"-"+Ns[e[t+4]]+Ns[e[t+5]]+"-"+Ns[e[t+6]]+Ns[e[t+7]]+"-"+Ns[e[t+8]]+Ns[e[t+9]]+"-"+Ns[e[t+10]]+Ns[e[t+11]]+Ns[e[t+12]]+Ns[e[t+13]]+Ns[e[t+14]]+Ns[e[t+15]]}(r)},Ca=(e,t)=>(n,r)=>{const i={};let o=t=>e(t,r);for(let e=t.length-1;e>=0;e--){o=(0,t[e])(r)(o,i)}return o(n)},ka=e=>{let t;return()=>(t||(t=e()),t)},Na=e=>!["HEAD","GET","DELETE"].includes(e.toUpperCase()),Oa=Ca(async({url:e,method:t,headers:n,body:r},{abortSignal:i,cache:o,withCrossDomainCredentials:s})=>{let a;try{a=await fetch(e,{method:t,headers:n,body:Na(t)?r:void 0,signal:i,cache:o,credentials:s?"include":"same-origin"})}catch(u){if(u instanceof TypeError)throw new ys({name:ms.NetworkError,message:"A network error has occurred.",underlyingError:u});throw u}const c={};a.headers?.forEach((e,t)=>{c[t.toLowerCase()]=e});return{...{statusCode:a.status,headers:c,body:null},body:Object.assign(a.body??{},{text:ka(()=>a.text()),blob:ka(()=>a.blob()),json:ka(()=>a.json())})}},[({userAgentHeader:e="x-amz-user-agent",userAgentValue:t=""})=>n=>async function(r){if(0===t.trim().length){return await n(r)}{const i=e.toLowerCase();r.headers[i]=r.headers[i]?`${r.headers[i]} ${t}`:t;return await n(r)}},()=>e=>async function(t){return t.headers[da]||(t.headers[da]=Ta()),e(t)},({maxAttempts:e=3,retryDecider:t,computeDelay:n,abortSignal:r})=>{if(e<1)throw new Error("maxAttempts must be greater than 0");return(i,o)=>async function(s){let a,c,u=o.attemptsCount??0;const l=()=>{if(c)return Ia(c,u),c;throw Ia(a,u),a};for(;!r?.aborted&&u<e;){try{c=await i(s),a=void 0}catch(d){a=d,c=void 0}u=(o.attemptsCount??0)>u?o.attemptsCount??0:u+1,o.attemptsCount=u;const{isCredentialsExpiredError:h,retryable:p}=await t(c,a,o);if(!p)return l();if(o.isCredentialsExpired=!!h,!r?.aborted&&u<e){const e=n(u);await Sa(e,r)}}if(r?.aborted)throw new Error("Request aborted.");return l()}},({maxAttempts:e=3})=>(t,n)=>async function(r){const i=n.attemptsCount??0;return r.headers["amz-sdk-request"]=`attempt=${i+1}; max=${e}`,t(r)}]),xa=Ca(Oa,[()=>e=>async function(t){return t.headers["cache-control"]="no-store",e(t)}]),Da=e=>(t,n)=>{const r=_a(e),i=JSON.stringify(t);return Ra(n,r,i)},_a=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}),Ra=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"}),Ma=e=>la(xa,Da("GetCredentialsForIdentity"),Pa,{...Ea,...e,userAgentValue:oa()}),Pa=async e=>{if(e.statusCode>=300){throw await ca(e)}const t=await ua(e);return{IdentityId:t.IdentityId,Credentials:La(t.Credentials),$metadata:sa(e)}},La=({Expiration:e,...t}={})=>({...t,Expiration:e&&new Date(1e3*e)}),Ua=async e=>{if(e.statusCode>=300){throw await ca(e)}return{IdentityId:(await ua(e)).IdentityId,$metadata:sa(e)}},ja={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},Ka={partitions:[ja,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},Ba=e=>{const{partitions:t}=Ka;for(const{regions:n,outputs:r,regionRegex:i}of t){const t=new RegExp(i);if(n.includes(e)||t.test(e))return r.dnsSuffix}return ja.outputs.dnsSuffix},Fa=URL;class qa extends ys{constructor(){super({name:ms.PlatformNotSupported,message:"Function not supported on current platform"})}}class Va{constructor(e){this.storage=e}async setItem(e,t){if(!this.storage)throw new qa;this.storage.setItem(e,t)}async getItem(e){if(!this.storage)throw new qa;return this.storage.getItem(e)}async removeItem(e){if(!this.storage)throw new qa;this.storage.removeItem(e)}async clear(){if(!this.storage)throw new qa;this.storage.clear()}}class Ga{constructor(){this.storage=new Map}get length(){return this.storage.size}key(e){return e>this.length-1?null:Array.from(this.storage.keys())[e]}setItem(e,t){this.storage.set(e,t)}getItem(e){return this.storage.get(e)??null}removeItem(e){this.storage.delete(e)}clear(){this.storage.clear()}}const za=new gs("CoreStorageUtils"),Wa=()=>{try{if("undefined"!=typeof window&&window.sessionStorage)return window.sessionStorage.getItem("test"),window.sessionStorage;throw new Error("sessionStorage is not defined")}catch(e){return za.info("sessionStorage not found. InMemoryStorage is used as a fallback."),new Ga}};class Qa{constructor(e){this._storage=e}get storage(){if(!this._storage)throw new qa;return this._storage}setItem(e,t){this.storage.setItem(e,t)}getItem(e){return this.storage.getItem(e)}removeItem(e){this.storage.removeItem(e)}clear(){this.storage.clear()}}const Ja=new class extends Va{constructor(){super((()=>{try{if("undefined"!=typeof window&&window.localStorage)return window.localStorage}catch(e){za.info("localStorage not found. InMemoryStorage is used as a fallback.")}return new Ga})())}};new class extends Va{constructor(){super(Wa())}},new class extends Qa{constructor(){super(Wa())}};class Ya extends ys{constructor(e){super(e),this.constructor=Ya,Object.setPrototypeOf(this,Ya.prototype)}}const Ha="UserUnAuthenticatedException";new Ya({name:"InvalidRedirectException",message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."}),new Ya({name:"InvalidAppSchemeException",message:"A valid non-http app scheme was not found in the config.",recoverySuggestion:"Please make sure a valid custom app scheme is present in the config."}),new Ya({name:"InvalidPreferredRedirectUrlException",message:"The given preferredRedirectUrl does not match any items in the redirectSignOutUrls array from the config.",recoverySuggestion:"Please make sure a matching preferredRedirectUrl is provided."});new Ya({name:"InvalidOriginException",message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."});const Za=new Ya({name:"TokenRefreshException",message:"Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. \n\tPlease change your oauth configuration to use 'code grant' flow.",recoverySuggestion:"Please logout and change your Amplify configuration to use \"code grant\" flow. \n\tE.g { responseType: 'code' }"}),Xa=new Ya({name:Ha,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."}),$a={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"},ec=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${e}`}),tc=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"}),nc=Ca(Oa,[()=>e=>async function(t){return t.headers["cache-control"]="no-store",e(t)}]),rc="cognito-idp",ic={service:rc,retryDecider:ga(ca),computeDelay:pa,get userAgentValue(){return oa()},cache:"no-store"},oc=({endpointOverride:e})=>t=>e?{url:new Fa(e)}:(({region:e})=>({url:new Fa(`https://${rc}.${e}.${Ba(e)}`)}))(t),sc=e=>{return la(nc,(t="GetTokensFromRefreshToken",(e,n)=>{const r=ec(t),i=JSON.stringify(e);return tc(n,r,i)}),async e=>{if(e.statusCode>=300){const t=await ca(e);throw de(t),new Ya({name:t.name,message:t.message,metadata:t.$metadata})}return ua(e)},{...ic,...e});var t},ac=(e=>{let t;return async(...n)=>t||(t=new Promise((r,i)=>{e(...n).then(e=>{r(e)}).catch(e=>{i(e)}).finally(()=>{t=void 0})}),t)})(async({tokens:e,authConfig:t,username:n})=>{ne(t?.Cognito);const{userPoolId:r,userPoolClientId:i,userPoolEndpoint:o}=t.Cognito,s=function(e){const t=e?.split("_")[0];if(!e||e.indexOf("_")<0||!t||"string"!=typeof t)throw new Ya({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return t}(r);ue(e);const a=sc({endpointResolver:oc({endpointOverride:o})}),{AuthenticationResult:c}=await a({region:s},{ClientId:i,RefreshToken:e.refreshToken,DeviceKey:e.deviceMetadata?.deviceKey}),u=ie(c?.AccessToken??""),l=c?.IdToken?ie(c.IdToken):void 0,{iat:d}=u.payload;if(!d)throw new Ya({name:"iatNotFoundException",message:"iat not found in access token"});return{accessToken:u,idToken:l,clockDrift:1e3*d-(new Date).getTime(),refreshToken:c?.RefreshToken??e.refreshToken,username:n}}),cc={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails",oauthMetadata:"oauthMetadata"};var uc;(uc||(uc={})).InvalidAuthTokens="InvalidAuthTokens";const lc=ws({[uc.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}}),dc="CognitoIdentityServiceProvider";class hc{getKeyValueStorage(){if(!this.keyValueStorage)throw new Ya({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(e){this.keyValueStorage=e}setAuthConfig(e){this.authConfig=e}async loadTokens(){try{const e=await this.getAuthKeys(),t=await this.getKeyValueStorage().getItem(e.accessToken);if(!t)throw new Ya({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});const n=ie(t),r=await this.getKeyValueStorage().getItem(e.idToken),i=r?ie(r):void 0,o=await this.getKeyValueStorage().getItem(e.refreshToken)??void 0,s=await this.getKeyValueStorage().getItem(e.clockDrift)??"0",a=Number.parseInt(s),c=await this.getKeyValueStorage().getItem(e.signInDetails),u={accessToken:n,idToken:i,refreshToken:o,deviceMetadata:await this.getDeviceMetadata()??void 0,clockDrift:a,username:await this.getLastAuthUser()};return c&&(u.signInDetails=JSON.parse(c)),u}catch(e){return null}}async storeTokens(e){lc(void 0!==e,uc.InvalidAuthTokens);const t=e.username;await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),t);const n=await this.getAuthKeys();await this.getKeyValueStorage().setItem(n.accessToken,e.accessToken.toString()),e.idToken?await this.getKeyValueStorage().setItem(n.idToken,e.idToken.toString()):await this.getKeyValueStorage().removeItem(n.idToken),e.refreshToken?await this.getKeyValueStorage().setItem(n.refreshToken,e.refreshToken):await this.getKeyValueStorage().removeItem(n.refreshToken),e.deviceMetadata&&(e.deviceMetadata.deviceKey&&await this.getKeyValueStorage().setItem(n.deviceKey,e.deviceMetadata.deviceKey),e.deviceMetadata.deviceGroupKey&&await this.getKeyValueStorage().setItem(n.deviceGroupKey,e.deviceMetadata.deviceGroupKey),await this.getKeyValueStorage().setItem(n.randomPasswordKey,e.deviceMetadata.randomPassword)),e.signInDetails?await this.getKeyValueStorage().setItem(n.signInDetails,JSON.stringify(e.signInDetails)):await this.getKeyValueStorage().removeItem(n.signInDetails),await this.getKeyValueStorage().setItem(n.clockDrift,`${e.clockDrift}`)}async clearTokens(){const e=await this.getAuthKeys();await Promise.all([this.getKeyValueStorage().removeItem(e.accessToken),this.getKeyValueStorage().removeItem(e.idToken),this.getKeyValueStorage().removeItem(e.clockDrift),this.getKeyValueStorage().removeItem(e.refreshToken),this.getKeyValueStorage().removeItem(e.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),this.getKeyValueStorage().removeItem(e.oauthMetadata)])}async getDeviceMetadata(e){const t=await this.getAuthKeys(e),n=await this.getKeyValueStorage().getItem(t.deviceKey),r=await this.getKeyValueStorage().getItem(t.deviceGroupKey),i=await this.getKeyValueStorage().getItem(t.randomPasswordKey);return i&&r&&n?{deviceKey:n,deviceGroupKey:r,randomPassword:i}:null}async clearDeviceMetadata(e){const t=await this.getAuthKeys(e);await Promise.all([this.getKeyValueStorage().removeItem(t.deviceKey),this.getKeyValueStorage().removeItem(t.deviceGroupKey),this.getKeyValueStorage().removeItem(t.randomPasswordKey)])}async getAuthKeys(e){ne(this.authConfig?.Cognito);const t=e??await this.getLastAuthUser();return pc(dc,`${this.authConfig.Cognito.userPoolClientId}.${t}`)}getLastAuthUserKey(){ne(this.authConfig?.Cognito);const e=this.authConfig.Cognito.userPoolClientId;return`${dc}.${e}.LastAuthUser`}async getLastAuthUser(){return await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())??"username"}async setOAuthMetadata(e){const{oauthMetadata:t}=await this.getAuthKeys();await this.getKeyValueStorage().setItem(t,JSON.stringify(e))}async getOAuthMetadata(){const{oauthMetadata:e}=await this.getAuthKeys(),t=await this.getKeyValueStorage().getItem(e);return t&&JSON.parse(t)}}const pc=(e,t)=>he(cc)(`${e}`,t),fc="amplify-signin-with-hostedUI",gc="CognitoIdentityServiceProvider";const yc=(e,t)=>he($a)(e,t),mc=new class{constructor(e){this.keyValueStorage=e}async clearOAuthInflightData(){ne(this.cognitoConfig);const e=yc(gc,this.cognitoConfig.userPoolClientId);await Promise.all([this.keyValueStorage.removeItem(e.inflightOAuth),this.keyValueStorage.removeItem(e.oauthPKCE),this.keyValueStorage.removeItem(e.oauthState)])}async clearOAuthData(){ne(this.cognitoConfig);const e=yc(gc,this.cognitoConfig.userPoolClientId);return await this.clearOAuthInflightData(),await this.keyValueStorage.removeItem(fc),this.keyValueStorage.removeItem(e.oauthSignIn)}loadOAuthState(){ne(this.cognitoConfig);const e=yc(gc,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(e.oauthState)}storeOAuthState(e){ne(this.cognitoConfig);const t=yc(gc,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(t.oauthState,e)}loadPKCE(){ne(this.cognitoConfig);const e=yc(gc,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(e.oauthPKCE)}storePKCE(e){ne(this.cognitoConfig);const t=yc(gc,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(t.oauthPKCE,e)}setAuthConfig(e){this.cognitoConfig=e}async loadOAuthInFlight(){ne(this.cognitoConfig);const e=yc(gc,this.cognitoConfig.userPoolClientId);return"true"===await this.keyValueStorage.getItem(e.inflightOAuth)}async storeOAuthInFlight(e){ne(this.cognitoConfig);const t=yc(gc,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(t.inflightOAuth,`${e}`)}async loadOAuthSignIn(){ne(this.cognitoConfig);const e=yc(gc,this.cognitoConfig.userPoolClientId),t=await this.keyValueStorage.getItem(fc),[n,r]=(await this.keyValueStorage.getItem(e.oauthSignIn))?.split(",")??[];return{isOAuthSignIn:"true"===n||"true"===t,preferPrivateSession:"true"===r}}async storeOAuthSignIn(e,t=!1){ne(this.cognitoConfig);const n=yc(gc,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(n.oauthSignIn,`${e},${t}`)}}(Ja);class wc{constructor(){this.waitForInflightOAuth="undefined"!=typeof window&&void 0!==window.document?async()=>{if(await mc.loadOAuthInFlight())return this.inflightPromise||(this.inflightPromise=new Promise(()=>{})),this.inflightPromise}:async()=>{}}setAuthConfig(e){mc.setAuthConfig(e.Cognito),this.authConfig=e}setTokenRefresher(e){this.tokenRefresher=e}setAuthTokenStore(e){this.tokenStore=e}getTokenStore(){if(!this.tokenStore)throw new Ya({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new Ya({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}async getTokens(e){let t;try{ne(this.authConfig?.Cognito)}catch(o){return null}await this.waitForInflightOAuth(),this.inflightPromise=void 0,t=await this.getTokenStore().loadTokens();const n=await this.getTokenStore().getLastAuthUser();if(null===t)return null;const r=!!t?.idToken&&ae({expiresAt:1e3*(t.idToken?.payload?.exp??0),clockDrift:t.clockDrift??0}),i=ae({expiresAt:1e3*(t.accessToken?.payload?.exp??0),clockDrift:t.clockDrift??0});return(e?.forceRefresh||r||i)&&(t=await this.refreshTokens({tokens:t,username:n}),null===t)?null:{accessToken:t?.accessToken,idToken:t?.idToken,signInDetails:t?.signInDetails}}async refreshTokens({tokens:e,username:t}){try{const{signInDetails:n}=e,r=await this.getTokenRefresher()({tokens:e,authConfig:this.authConfig,username:t});return r.signInDetails=n,await this.setTokens({tokens:r}),As.dispatch("auth",{event:"tokenRefresh"},"Auth",vs),r}catch(n){return this.handleErrors(n)}}handleErrors(e){if(de(e),e.name!==ms.NetworkError&&this.clearTokens(),As.dispatch("auth",{event:"tokenRefresh_failure",data:{error:e}},"Auth",vs),e.name.startsWith("NotAuthorizedException"))return null;throw e}async setTokens({tokens:e}){return this.getTokenStore().storeTokens(e)}async clearTokens(){return this.getTokenStore().clearTokens()}getDeviceMetadata(e){return this.getTokenStore().getDeviceMetadata(e)}clearDeviceMetadata(e){return this.getTokenStore().clearDeviceMetadata(e)}setOAuthMetadata(e){return this.getTokenStore().setOAuthMetadata(e)}getOAuthMetadata(){return this.getTokenStore().getOAuthMetadata()}}const vc=new class{constructor(){this.authTokenStore=new hc,this.authTokenStore.setKeyValueStorage(Ja),this.tokenOrchestrator=new wc,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(ac)}getTokens({forceRefresh:e}={forceRefresh:!1}){return this.tokenOrchestrator.getTokens({forceRefresh:e})}setKeyValueStorage(e){this.authTokenStore.setKeyValueStorage(e)}setAuthConfig(e){this.authTokenStore.setAuthConfig(e),this.tokenOrchestrator.setAuthConfig(e)}},{tokenOrchestrator:bc}=vc,Ac={identityId:"identityId"},Ec=new gs("DefaultIdentityIdStore");class Sc{setAuthConfig(e){re(e.Cognito),this.authConfig=e,this._authKeys=Ic("Cognito",e.Cognito.identityPoolId)}constructor(e){this._authKeys={},this._hasGuestIdentityId=!1,this.keyValueStorage=e}async loadIdentityId(){re(this.authConfig?.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{const e=await this.keyValueStorage.getItem(this._authKeys.identityId);return e?(this._hasGuestIdentityId=!0,{id:e,type:"guest"}):null}}catch(e){return Ec.log("Error getting stored IdentityId.",e),null}}async storeIdentityId(e){re(this.authConfig?.Cognito),"guest"===e.type?(this.keyValueStorage.setItem(this._authKeys.identityId,e.id),this._primaryIdentityId=void 0,this._hasGuestIdentityId=!0):(this._primaryIdentityId=e.id,this._hasGuestIdentityId&&(this.keyValueStorage.removeItem(this._authKeys.identityId),this._hasGuestIdentityId=!1))}async clearIdentityId(){this._primaryIdentityId=void 0,await this.keyValueStorage.removeItem(this._authKeys.identityId)}}const Ic=(e,t)=>he(Ac)(`com.amplify.${e}`,t),Tc=({endpointOverride:e})=>t=>e?{url:new Fa(e)}:(({region:e})=>({url:new Fa(`https://${Aa}.${e}.${Ba(e)}`)}))(t),Cc=new gs("CognitoCredentialsProvider"),kc=3e6;class Nc{constructor(e){this._nextCredentialsRefresh=0,this._identityIdStore=e}async clearCredentialsAndIdentityId(){Cc.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,await this._identityIdStore.clearIdentityId()}async clearCredentials(){Cc.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0}async getCredentialsAndIdentityId(e){const t=e.authenticated,{tokens:n}=e,{authConfig:r}=e;try{re(r?.Cognito)}catch{return}if(!t&&!r.Cognito.allowGuestAccess)return;const{forceRefresh:i}=e,o=this.hasTokenChanged(n),s=await fe({tokens:n,authConfig:r.Cognito,identityIdStore:this._identityIdStore});return(i||o)&&this.clearCredentials(),t?(function(e){if(!e||!e.idToken)throw new Ya({name:Ha,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}(n),this.credsForOIDCTokens(r.Cognito,n,s)):this.getGuestCredentials(s,r.Cognito)}async getGuestCredentials(e,t){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!1===this._credentialsAndIdentityId.isAuthenticatedCreds)return Cc.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const n=ce(t.identityPoolId),r=Ma({endpointResolver:Tc({endpointOverride:t.identityPoolEndpoint})});let i;try{i=await r({region:n},{IdentityId:e})}catch(o){throw de(o),new Ya(o)}if(i?.Credentials?.AccessKeyId&&i?.Credentials?.SecretKey){this._nextCredentialsRefresh=(new Date).getTime()+kc;const t={credentials:{accessKeyId:i.Credentials.AccessKeyId,secretAccessKey:i.Credentials.SecretKey,sessionToken:i.Credentials.SessionToken,expiration:i.Credentials.Expiration},identityId:e};return i.IdentityId&&(t.identityId=i.IdentityId,this._identityIdStore.storeIdentityId({id:i.IdentityId,type:"guest"})),this._credentialsAndIdentityId={...t,isAuthenticatedCreds:!1},t}throw new Ya({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}async credsForOIDCTokens(e,t,n){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!0===this._credentialsAndIdentityId.isAuthenticatedCreds)return Cc.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const r=t.idToken?pe(t.idToken.toString()):{},i=ce(e.identityPoolId),o=Ma({endpointResolver:Tc({endpointOverride:e.identityPoolEndpoint})});let s;try{s=await o({region:i},{IdentityId:n,Logins:r})}catch(a){throw de(a),new Ya(a)}if(s?.Credentials?.AccessKeyId&&s?.Credentials?.SecretKey){this._nextCredentialsRefresh=(new Date).getTime()+kc;const e={credentials:{accessKeyId:s.Credentials.AccessKeyId,secretAccessKey:s.Credentials.SecretKey,sessionToken:s.Credentials.SessionToken,expiration:s.Credentials.Expiration},identityId:n};return s.IdentityId&&(e.identityId=s.IdentityId,this._identityIdStore.storeIdentityId({id:s.IdentityId,type:"primary"})),this._credentialsAndIdentityId={...e,isAuthenticatedCreds:!0,associatedIdToken:t.idToken?.toString()},e}throw new Ya({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}isPastTTL(){return void 0===this._nextCredentialsRefresh||this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(e){return!!e&&!!this._credentialsAndIdentityId?.associatedIdToken&&e.idToken?.toString()!==this._credentialsAndIdentityId.associatedIdToken}}const Oc=new Nc(new Sc(Ja)),xc={configure(e,t){const n=Wr(e),r=new Bo({sameSite:"lax"}),i=t?.ssr?r:Fo,o=t?.ssr?new Nc(new Sc(r)):Oc;if(n.Auth)if(t?.Auth)ao.configure(n,t);else{if(!ao.libraryOptions.Auth)return vc.setAuthConfig(n.Auth),vc.setKeyValueStorage(i),void ao.configure(n,{...t,Auth:{tokenProvider:vc,credentialsProvider:o}});if(t){const e=ao.libraryOptions.Auth;return void 0!==t.ssr&&(vc.setKeyValueStorage(i),e.credentialsProvider=o),void ao.configure(n,{Auth:e,...t})}ao.configure(n)}else ao.configure(n,t)},getConfig:()=>ao.getConfig()};var Dc="function"==typeof Symbol&&null!=Symbol.toStringTag?Symbol.toStringTag:"@@toStringTag",_c=function(){function e(t,n,i,o,s,a,c){var u,l,d,h;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(h=r.call(this,t)).name="GraphQLError",h.originalError=null!=a?a:void 0,h.nodes=_e(Array.isArray(n)?n:n?[n]:void 0);for(var p=[],f=0,g=null!==(y=h.nodes)&&void 0!==y?y:[];f<g.length;f++){var y,m=g[f].loc;null!=m&&p.push(m)}p=_e(p),h.source=null!=i?i:null===(u=p)||void 0===u?void 0:u[0].source,h.positions=null!=o?o:null===(l=p)||void 0===l?void 0:l.map(function(e){return e.start}),h.locations=o&&i?o.map(function(e){return ye(i,e)}):null===(d=p)||void 0===d?void 0:d.map(function(e){return ye(e.source,e.start)}),h.path=null!=s?s:void 0;var w,v=null==a?void 0:a.extensions;return null==c&&("object"==ge(w=v)&&null!==w)?h.extensions=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach(function(t){Se(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},v):h.extensions=null!=c?c:{},Object.defineProperties(Ce(h),{message:{enumerable:!0},locations:{enumerable:null!=h.locations},path:{enumerable:null!=h.path},extensions:{enumerable:null!=h.extensions&&Object.keys(h.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!=a&&a.stack?(Object.defineProperty(Ce(h),"stack",{value:a.stack,writable:!0,configurable:!0}),Te(h)):(Error.captureStackTrace?Error.captureStackTrace(Ce(h),e):Object.defineProperty(Ce(h),"stack",{value:Error().stack,writable:!0,configurable:!0}),h)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(e,ke(Error));var t,n,r=(t=e,n=Oe(),function(){var e,r=De(t);if(n){var i=De(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Te(this,e)});return Ie(e,[{key:"toString",value:function(){return function(e){var t=e.message;if(e.nodes)for(var n=0,r=e.nodes;n<r.length;n++){var i=r[n];i.loc&&(t+="\n\n"+me(i.loc))}else if(e.source&&e.locations)for(var o=0,s=e.locations;o<s.length;o++){var a=s[o];t+="\n\n"+we(e.source,a)}return t}(this)}},{key:Dc,get:function(){return"Object"}}]),e}(),Rc=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),Mc="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0,Pc=function(){function e(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}return e.prototype.toJSON=function(){return{start:this.start,end:this.end}},e}();Me(Pc);var Lc=function(){function e(e,t,n,r,i,o,s){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=i,this.value=s,this.prev=o,this.next=null}return e.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();Me(Lc);var Uc=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});var jc=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GraphQL request",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{line:1,column:1};"string"==typeof e||Ke(0,"Body must be a string. Received: ".concat(Ue(e),".")),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||Ke(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||Ke(0,"column in locationOffset is 1-indexed and must be positive.")}return Be(e,[{key:Dc,get:function(){return"Source"}}]),e}(),Kc=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"}),Bc=function(){function e(e){var t=new Lc(Uc.SOF,0,0,0,0,null);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}var t=e.prototype;return t.advance=function(){return this.lastToken=this.token,this.token=this.lookahead()},t.lookahead=function(){var e=this.token;if(e.kind!==Uc.EOF)do{var t;e=null!==(t=e.next)&&void 0!==t?t:e.next=Ge(this,e)}while(e.kind===Uc.COMMENT);return e},e}(),Fc=function(){function e(e,t){var n=function(e){return e instanceof jc}(e)?e:new jc(e);this._lexer=new Bc(n),this._options=t}var t=e.prototype;return t.parseName=function(){var e=this.expectToken(Uc.NAME);return{kind:Rc.NAME,value:e.value,loc:this.loc(e)}},t.parseDocument=function(){var e=this._lexer.token;return{kind:Rc.DOCUMENT,definitions:this.many(Uc.SOF,this.parseDefinition,Uc.EOF),loc:this.loc(e)}},t.parseDefinition=function(){if(this.peek(Uc.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(Uc.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},t.parseOperationDefinition=function(){var e=this._lexer.token;if(this.peek(Uc.BRACE_L))return{kind:Rc.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(e)};var t,n=this.parseOperationType();return this.peek(Uc.NAME)&&(t=this.parseName()),{kind:Rc.OPERATION_DEFINITION,operation:n,name:t,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseOperationType=function(){var e=this.expectToken(Uc.NAME);switch(e.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(e)},t.parseVariableDefinitions=function(){return this.optionalMany(Uc.PAREN_L,this.parseVariableDefinition,Uc.PAREN_R)},t.parseVariableDefinition=function(){var e=this._lexer.token;return{kind:Rc.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(Uc.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(Uc.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(e)}},t.parseVariable=function(){var e=this._lexer.token;return this.expectToken(Uc.DOLLAR),{kind:Rc.VARIABLE,name:this.parseName(),loc:this.loc(e)}},t.parseSelectionSet=function(){var e=this._lexer.token;return{kind:Rc.SELECTION_SET,selections:this.many(Uc.BRACE_L,this.parseSelection,Uc.BRACE_R),loc:this.loc(e)}},t.parseSelection=function(){return this.peek(Uc.SPREAD)?this.parseFragment():this.parseField()},t.parseField=function(){var e,t,n=this._lexer.token,r=this.parseName();return this.expectOptionalToken(Uc.COLON)?(e=r,t=this.parseName()):t=r,{kind:Rc.FIELD,alias:e,name:t,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(Uc.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},t.parseArguments=function(e){var t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(Uc.PAREN_L,t,Uc.PAREN_R)},t.parseArgument=function(){var e=this._lexer.token,t=this.parseName();return this.expectToken(Uc.COLON),{kind:Rc.ARGUMENT,name:t,value:this.parseValueLiteral(!1),loc:this.loc(e)}},t.parseConstArgument=function(){var e=this._lexer.token;return{kind:Rc.ARGUMENT,name:this.parseName(),value:(this.expectToken(Uc.COLON),this.parseValueLiteral(!0)),loc:this.loc(e)}},t.parseFragment=function(){var e=this._lexer.token;this.expectToken(Uc.SPREAD);var t=this.expectOptionalKeyword("on");return!t&&this.peek(Uc.NAME)?{kind:Rc.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(e)}:{kind:Rc.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseFragmentDefinition=function(){var e,t=this._lexer.token;return this.expectKeyword("fragment"),!0===(null===(e=this._options)||void 0===e?void 0:e.experimentalFragmentVariables)?{kind:Rc.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}:{kind:Rc.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},t.parseFragmentName=function(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()},t.parseValueLiteral=function(e){var t=this._lexer.token;switch(t.kind){case Uc.BRACKET_L:return this.parseList(e);case Uc.BRACE_L:return this.parseObject(e);case Uc.INT:return this._lexer.advance(),{kind:Rc.INT,value:t.value,loc:this.loc(t)};case Uc.FLOAT:return this._lexer.advance(),{kind:Rc.FLOAT,value:t.value,loc:this.loc(t)};case Uc.STRING:case Uc.BLOCK_STRING:return this.parseStringLiteral();case Uc.NAME:switch(this._lexer.advance(),t.value){case"true":return{kind:Rc.BOOLEAN,value:!0,loc:this.loc(t)};case"false":return{kind:Rc.BOOLEAN,value:!1,loc:this.loc(t)};case"null":return{kind:Rc.NULL,loc:this.loc(t)};default:return{kind:Rc.ENUM,value:t.value,loc:this.loc(t)}}case Uc.DOLLAR:if(!e)return this.parseVariable()}throw this.unexpected()},t.parseStringLiteral=function(){var e=this._lexer.token;return this._lexer.advance(),{kind:Rc.STRING,value:e.value,block:e.kind===Uc.BLOCK_STRING,loc:this.loc(e)}},t.parseList=function(e){var t=this,n=this._lexer.token;return{kind:Rc.LIST,values:this.any(Uc.BRACKET_L,function(){return t.parseValueLiteral(e)},Uc.BRACKET_R),loc:this.loc(n)}},t.parseObject=function(e){var t=this,n=this._lexer.token;return{kind:Rc.OBJECT,fields:this.any(Uc.BRACE_L,function(){return t.parseObjectField(e)},Uc.BRACE_R),loc:this.loc(n)}},t.parseObjectField=function(e){var t=this._lexer.token,n=this.parseName();return this.expectToken(Uc.COLON),{kind:Rc.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e),loc:this.loc(t)}},t.parseDirectives=function(e){for(var t=[];this.peek(Uc.AT);)t.push(this.parseDirective(e));return t},t.parseDirective=function(e){var t=this._lexer.token;return this.expectToken(Uc.AT),{kind:Rc.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e),loc:this.loc(t)}},t.parseTypeReference=function(){var e,t=this._lexer.token;return this.expectOptionalToken(Uc.BRACKET_L)?(e=this.parseTypeReference(),this.expectToken(Uc.BRACKET_R),e={kind:Rc.LIST_TYPE,type:e,loc:this.loc(t)}):e=this.parseNamedType(),this.expectOptionalToken(Uc.BANG)?{kind:Rc.NON_NULL_TYPE,type:e,loc:this.loc(t)}:e},t.parseNamedType=function(){var e=this._lexer.token;return{kind:Rc.NAMED_TYPE,name:this.parseName(),loc:this.loc(e)}},t.parseTypeSystemDefinition=function(){var e=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(e.kind===Uc.NAME)switch(e.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(e)},t.peekDescription=function(){return this.peek(Uc.STRING)||this.peek(Uc.BLOCK_STRING)},t.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},t.parseSchemaDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");var n=this.parseDirectives(!0),r=this.many(Uc.BRACE_L,this.parseOperationTypeDefinition,Uc.BRACE_R);return{kind:Rc.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:r,loc:this.loc(e)}},t.parseOperationTypeDefinition=function(){var e=this._lexer.token,t=this.parseOperationType();this.expectToken(Uc.COLON);var n=this.parseNamedType();return{kind:Rc.OPERATION_TYPE_DEFINITION,operation:t,type:n,loc:this.loc(e)}},t.parseScalarTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");var n=this.parseName(),r=this.parseDirectives(!0);return{kind:Rc.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");var n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();return{kind:Rc.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:o,loc:this.loc(e)}},t.parseImplementsInterfaces=function(){var e;if(!this.expectOptionalKeyword("implements"))return[];if(!0===(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLImplementsInterfaces)){var t=[];this.expectOptionalToken(Uc.AMP);do{t.push(this.parseNamedType())}while(this.expectOptionalToken(Uc.AMP)||this.peek(Uc.NAME));return t}return this.delimitedMany(Uc.AMP,this.parseNamedType)},t.parseFieldsDefinition=function(){var e;return!0===(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLEmptyFields)&&this.peek(Uc.BRACE_L)&&this._lexer.lookahead().kind===Uc.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(Uc.BRACE_L,this.parseFieldDefinition,Uc.BRACE_R)},t.parseFieldDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseArgumentDefs();this.expectToken(Uc.COLON);var i=this.parseTypeReference(),o=this.parseDirectives(!0);return{kind:Rc.FIELD_DEFINITION,description:t,name:n,arguments:r,type:i,directives:o,loc:this.loc(e)}},t.parseArgumentDefs=function(){return this.optionalMany(Uc.PAREN_L,this.parseInputValueDef,Uc.PAREN_R)},t.parseInputValueDef=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName();this.expectToken(Uc.COLON);var r,i=this.parseTypeReference();this.expectOptionalToken(Uc.EQUALS)&&(r=this.parseValueLiteral(!0));var o=this.parseDirectives(!0);return{kind:Rc.INPUT_VALUE_DEFINITION,description:t,name:n,type:i,defaultValue:r,directives:o,loc:this.loc(e)}},t.parseInterfaceTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");var n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();return{kind:Rc.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:o,loc:this.loc(e)}},t.parseUnionTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseUnionMemberTypes();return{kind:Rc.UNION_TYPE_DEFINITION,description:t,name:n,directives:r,types:i,loc:this.loc(e)}},t.parseUnionMemberTypes=function(){return this.expectOptionalToken(Uc.EQUALS)?this.delimitedMany(Uc.PIPE,this.parseNamedType):[]},t.parseEnumTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseEnumValuesDefinition();return{kind:Rc.ENUM_TYPE_DEFINITION,description:t,name:n,directives:r,values:i,loc:this.loc(e)}},t.parseEnumValuesDefinition=function(){return this.optionalMany(Uc.BRACE_L,this.parseEnumValueDefinition,Uc.BRACE_R)},t.parseEnumValueDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseDirectives(!0);return{kind:Rc.ENUM_VALUE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseInputObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseInputFieldsDefinition();return{kind:Rc.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:r,fields:i,loc:this.loc(e)}},t.parseInputFieldsDefinition=function(){return this.optionalMany(Uc.BRACE_L,this.parseInputValueDef,Uc.BRACE_R)},t.parseTypeSystemExtension=function(){var e=this._lexer.lookahead();if(e.kind===Uc.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)},t.parseSchemaExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var t=this.parseDirectives(!0),n=this.optionalMany(Uc.BRACE_L,this.parseOperationTypeDefinition,Uc.BRACE_R);if(0===t.length&&0===n.length)throw this.unexpected();return{kind:Rc.SCHEMA_EXTENSION,directives:t,operationTypes:n,loc:this.loc(e)}},t.parseScalarTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var t=this.parseName(),n=this.parseDirectives(!0);if(0===n.length)throw this.unexpected();return{kind:Rc.SCALAR_TYPE_EXTENSION,name:t,directives:n,loc:this.loc(e)}},t.parseObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return{kind:Rc.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i,loc:this.loc(e)}},t.parseInterfaceTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return{kind:Rc.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i,loc:this.loc(e)}},t.parseUnionTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseUnionMemberTypes();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:Rc.UNION_TYPE_EXTENSION,name:t,directives:n,types:r,loc:this.loc(e)}},t.parseEnumTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseEnumValuesDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:Rc.ENUM_TYPE_EXTENSION,name:t,directives:n,values:r,loc:this.loc(e)}},t.parseInputObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseInputFieldsDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:Rc.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:r,loc:this.loc(e)}},t.parseDirectiveDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(Uc.AT);var n=this.parseName(),r=this.parseArgumentDefs(),i=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var o=this.parseDirectiveLocations();return{kind:Rc.DIRECTIVE_DEFINITION,description:t,name:n,arguments:r,repeatable:i,locations:o,loc:this.loc(e)}},t.parseDirectiveLocations=function(){return this.delimitedMany(Uc.PIPE,this.parseDirectiveLocation)},t.parseDirectiveLocation=function(){var e=this._lexer.token,t=this.parseName();if(void 0!==Kc[t.value])return t;throw this.unexpected(e)},t.loc=function(e){var t;if(!0!==(null===(t=this._options)||void 0===t?void 0:t.noLocation))return new Pc(e,this._lexer.lastToken,this._lexer.source)},t.peek=function(e){return this._lexer.token.kind===e},t.expectToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t;throw Re(this._lexer.source,t.start,"Expected ".concat(nt(e),", found ").concat(tt(t),"."))},t.expectOptionalToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t},t.expectKeyword=function(e){var t=this._lexer.token;if(t.kind!==Uc.NAME||t.value!==e)throw Re(this._lexer.source,t.start,'Expected "'.concat(e,'", found ').concat(tt(t),"."));this._lexer.advance()},t.expectOptionalKeyword=function(e){var t=this._lexer.token;return t.kind===Uc.NAME&&t.value===e&&(this._lexer.advance(),!0)},t.unexpected=function(e){var t=null!=e?e:this._lexer.token;return Re(this._lexer.source,t.start,"Unexpected ".concat(tt(t),"."))},t.any=function(e,t,n){this.expectToken(e);for(var r=[];!this.expectOptionalToken(n);)r.push(t.call(this));return r},t.optionalMany=function(e,t,n){if(this.expectOptionalToken(e)){var r=[];do{r.push(t.call(this))}while(!this.expectOptionalToken(n));return r}return[]},t.many=function(e,t,n){this.expectToken(e);var r=[];do{r.push(t.call(this))}while(!this.expectOptionalToken(n));return r},t.delimitedMany=function(e,t){this.expectOptionalToken(e);var n=[];do{n.push(t.call(this))}while(this.expectOptionalToken(e));return n},e}(),qc={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},Vc=Object.freeze({}),Gc={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return st(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=ct("(",st(e.variableDefinitions,", "),")"),i=st(e.directives," "),o=e.selectionSet;return n||i||r||"query"!==t?st([t,st([n,r]),i,o]," "):o},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,i=e.directives;return t+": "+n+ct(" = ",r)+ct(" ",st(i," "))},SelectionSet:function(e){return at(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,i=e.directives,o=e.selectionSet,s=ct("",t,": ")+n,a=s+ct("(",st(r,", "),")");return a.length>80&&(a=s+ct("(\n",ut(st(r,"\n")),"\n)")),st([a,st(i," "),o]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+ct(" ",st(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return st(["...",ct("on ",t),st(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,i=e.directives,o=e.selectionSet;return"fragment ".concat(t).concat(ct("(",st(r,", "),")")," ")+"on ".concat(n," ").concat(ct("",st(i," ")," "))+o},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n=e.value;return e.block?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=-1===e.indexOf("\n"),i=" "===e[0]||"\t"===e[0],o='"'===e[e.length-1],s="\\"===e[e.length-1],a=!r||o||s||n,c="";return!a||r&&i||(c+="\n"+t),c+=t?e.replace(/\n/g,"\n"+t):e,a&&(c+="\n"),'"""'+c.replace(/"""/g,'\\"""')+'"""'}(n,"description"===t?"":"  "):JSON.stringify(n)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+st(e.values,", ")+"]"},ObjectValue:function(e){return"{"+st(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+ct("(",st(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:ot(function(e){var t=e.directives,n=e.operationTypes;return st(["schema",st(t," "),at(n)]," ")}),OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:ot(function(e){return st(["scalar",e.name,st(e.directives," ")]," ")}),ObjectTypeDefinition:ot(function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return st(["type",t,ct("implements ",st(n," & ")),st(r," "),at(i)]," ")}),FieldDefinition:ot(function(e){var t=e.name,n=e.arguments,r=e.type,i=e.directives;return t+(dt(n)?ct("(\n",ut(st(n,"\n")),"\n)"):ct("(",st(n,", "),")"))+": "+r+ct(" ",st(i," "))}),InputValueDefinition:ot(function(e){var t=e.name,n=e.type,r=e.defaultValue,i=e.directives;return st([t+": "+n,ct("= ",r),st(i," ")]," ")}),InterfaceTypeDefinition:ot(function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return st(["interface",t,ct("implements ",st(n," & ")),st(r," "),at(i)]," ")}),UnionTypeDefinition:ot(function(e){var t=e.name,n=e.directives,r=e.types;return st(["union",t,st(n," "),r&&0!==r.length?"= "+st(r," | "):""]," ")}),EnumTypeDefinition:ot(function(e){var t=e.name,n=e.directives,r=e.values;return st(["enum",t,st(n," "),at(r)]," ")}),EnumValueDefinition:ot(function(e){return st([e.name,st(e.directives," ")]," ")}),InputObjectTypeDefinition:ot(function(e){var t=e.name,n=e.directives,r=e.fields;return st(["input",t,st(n," "),at(r)]," ")}),DirectiveDefinition:ot(function(e){var t=e.name,n=e.arguments,r=e.repeatable,i=e.locations;return"directive @"+t+(dt(n)?ct("(\n",ut(st(n,"\n")),"\n)"):ct("(",st(n,", "),")"))+(r?" repeatable":"")+" on "+st(i," | ")}),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return st(["extend schema",st(t," "),at(n)]," ")},ScalarTypeExtension:function(e){return st(["extend scalar",e.name,st(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return st(["extend type",t,ct("implements ",st(n," & ")),st(r," "),at(i)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return st(["extend interface",t,ct("implements ",st(n," & ")),st(r," "),at(i)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types;return st(["extend union",t,st(n," "),r&&0!==r.length?"= "+st(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return st(["extend enum",t,st(n," "),at(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return st(["extend input",t,st(n," "),at(r)]," ")}};class zc extends ls{constructor(e){super(e),this.constructor=zc,Object.setPrototypeOf(this,zc.prototype)}}class Wc extends zc{constructor(e={}){super({name:"CanceledError",message:"Request is canceled by user",...e}),this.constructor=Wc,Object.setPrototypeOf(this,Wc.prototype)}}const Qc=e=>!!e&&e instanceof Wc;var Jc;(Jc||(Jc={})).InvalidApiName="InvalidApiName",Jc.InvalidApiName;const Yc=async e=>{if(!e)return;const t=await(async e=>{if(!e||e.statusCode<300)return;const t=await ho(e),n=(e=>{const[t]=e.toString().split(/[,:]+/);return t.includes("#")?t.split("#")[1]:t})(e.headers["x-amzn-errortype"]??t.code??t.__type??"UnknownError"),r=t.message??t.Message??"Unknown error",i=new Error(r);return Object.assign(i,{name:n,$metadata:uo(e)})})(Hc(e));if(t){const n=await(e.body?.text());return Zc(t,{statusCode:e.statusCode,headers:e.headers,body:n})}},Hc=e=>{let t;const n=new Proxy(e.body,{get:(e,n,r)=>"json"===n?async()=>{t||(t=e.text());try{return JSON.parse(await t)}catch(n){return{}}}:"text"===n?async()=>(t||(t=e.text()),t):Reflect.get(e,n,r)});return new Proxy(e,{get:(e,t,r)=>"body"===t?n:Reflect.get(e,t,r)})},Zc=(e,t)=>{const n=new zc({name:e?.name,message:e.message,underlyingError:e,response:t});return Object.assign(n,{$metadata:e.$metadata})},Xc=new Nr("RestApis"),$c="execute-api",eu="us-east-1",tu=/^.+\.([a-z0-9-]+)\.([a-z0-9-]+)\.amazonaws\.com/,nu=({headers:e},t)=>!e.authorization&&!e["x-api-key"]&&!!t,ru=ko(xo,[Co,Eo,({credentials:e,region:t,service:n,uriEscapePath:r=!0})=>{let i;return(o,s)=>async function(a){i=i??0;const c={credentials:"function"==typeof e?await e({forceRefresh:!!s?.isCredentialsExpired}):e,signingDate:os(i),signingRegion:t,signingService:n,uriEscapePath:r},u=await is(a,c),l=await o(u),d=as(l);return d&&(i=ss(Date.parse(d),i)),l}}]),iu=ko(xo,[Co,Eo]),ou=async(e,t,n,r)=>{const{url:i,method:o,headers:s,body:a,withCredentials:c,abortSignal:u,retryStrategy:l}=t,d=a?a instanceof FormData?a:JSON.stringify(a??""):void 0,h=((e,t)=>{const n={};for(const r in e)n[r.toLowerCase()]=e[r];if(t){const e=n["content-type"];e&&(e.startsWith("application/json")||e.startsWith("application/")&&e.includes("+json"))||(n["content-type"]="application/json; charset=UTF-8"),t instanceof FormData&&delete n["content-type"]}return n})(s,a),p={url:i,headers:h,method:o,body:d},f={retryDecider:su(l??e?.libraryOptions?.API?.REST?.retryStrategy),computeDelay:fo,withCrossDomainCredentials:c,abortSignal:u},g=n(p,r);let y;const m=await au(e);if(g&&m){const e=(e=>{const{service:t=$c,region:n=eu}={},{hostname:r}=e,[,i,o]=tu.exec(r)??[];return i===$c?{service:i,region:o??n}:"appsync-api"===i?{service:"appsync",region:o??n}:{service:t,region:n}})(i),t=r?.service??e.service,n=r?.region??e.region;y=await ru(p,{...f,credentials:m,region:n,service:t})}else y=await iu(p,{...f});return{statusCode:y.statusCode,headers:y.headers,body:y.body}},su=e=>{const t=e?.strategy;return"no-retry"===t?()=>Promise.resolve({retryable:!1}):yo(Yc)},au=async e=>{try{const{credentials:t}=await e.Auth.fetchAuthSession();if(t)return t}catch(t){Xc.debug("No credentials available, the request will be unsigned.")}return null},cu=new WeakMap,uu=(e,{url:t,options:n,abortController:r})=>{const i=r??new AbortController,o=function(e,t){const n=()=>!!t,r=new AbortController,i=r.signal,o=t?.signal;let s;const a=async()=>{try{const t=await(n()?e():e(i));if(t.statusCode>=300)throw await Yc(t);return t}catch(t){const e=o??i,n=s??e.reason;if("AbortError"===t.name||!0===e?.aborted){const e=new Wc({...n&&{message:n},underlyingError:t,recoverySuggestion:"The API request was explicitly canceled. If this is not intended, validate if you called the `cancel()` function on the API request erroneously."});throw Xc.debug(t),e}throw Xc.debug(t),t}};if(n())return a();{const e=e=>{!0!==i.aborted&&(r.abort(e),e&&i.reason!==e&&(s=e))};return{response:a(),cancel:e}}}(async()=>ou(e,{url:t,method:"POST",...n,abortSignal:i.signal,retryStrategy:{strategy:"jittered-exponential-backoff"}},nu,n?.signingServiceInfo),i),s=o.finally(()=>{cu.delete(s)});return s},lu=(e,t)=>{const n=cu.get(e);return!!n&&(n.abort(t),t&&n.signal.reason!==t&&(n.signal.reason=t),!0)},du=(e,t)=>{cu.set(e,t)},hu=[400,401,403],pu=["BadRequestException","UnauthorizedException"];var fu,gu,yu,mu,wu,vu;(gu=fu||(fu={})).GQL_CONNECTION_INIT="connection_init",gu.GQL_CONNECTION_ERROR="connection_error",gu.GQL_CONNECTION_ACK="connection_ack",gu.GQL_START="start",gu.GQL_START_ACK="start_ack",gu.DATA="data",gu.GQL_CONNECTION_KEEP_ALIVE="ka",gu.GQL_STOP="stop",gu.GQL_COMPLETE="complete",gu.GQL_ERROR="error",gu.EVENT_SUBSCRIBE="subscribe",gu.EVENT_PUBLISH="publish",gu.EVENT_SUBSCRIBE_ACK="subscribe_success",gu.EVENT_PUBLISH_ACK="publish_success",gu.EVENT_STOP="unsubscribe",gu.EVENT_COMPLETE="unsubscribe_success",gu.EVENT_SUBSCRIBE_ERROR="subscribe_error",(mu=yu||(yu={}))[mu.PENDING=0]="PENDING",mu[mu.CONNECTED=1]="CONNECTED",mu[mu.FAILED=2]="FAILED",(vu=wu||(wu={}))[vu.CLOSED=0]="CLOSED",vu[vu.READY=1]="READY",vu[vu.CONNECTING=2]="CONNECTING";const bu={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},Au=3e5;var Eu,Su,Iu,Tu;(Su=Eu||(Eu={})).CONNECTION_CLOSED="Connection closed",Su.CONNECTION_FAILED="Connection failed",Su.REALTIME_SUBSCRIPTION_INIT_ERROR="AppSync Realtime subscription init error",Su.SUBSCRIPTION_ACK="Subscription ack",Su.TIMEOUT_DISCONNECT="Timeout disconnect",(Tu=Iu||(Iu={})).Connected="Connected",Tu.ConnectedPendingNetwork="ConnectedPendingNetwork",Tu.ConnectionDisrupted="ConnectionDisrupted",Tu.ConnectionDisruptedPendingNetwork="ConnectionDisruptedPendingNetwork",Tu.Connecting="Connecting",Tu.ConnectedPendingDisconnect="ConnectedPendingDisconnect",Tu.Disconnected="Disconnected",Tu.ConnectedPendingKeepAlive="ConnectedPendingKeepAlive";const Cu=()=>(new ro).networkMonitor(),ku={KEEP_ALIVE_MISSED:{keepAliveState:"unhealthy"},KEEP_ALIVE:{keepAliveState:"healthy"},CONNECTION_ESTABLISHED:{connectionState:"connected"},CONNECTION_FAILED:{intendedConnectionState:"disconnected",connectionState:"disconnected"},CLOSING_CONNECTION:{intendedConnectionState:"disconnected"},OPENING_CONNECTION:{intendedConnectionState:"connected",connectionState:"connecting"},CLOSED:{connectionState:"disconnected"},ONLINE:{networkState:"connected"},OFFLINE:{networkState:"disconnected"}};class Nu{constructor(){this._networkMonitoringSubscription=void 0,this._linkedConnectionState={networkState:"connected",connectionState:"disconnected",intendedConnectionState:"disconnected",keepAliveState:"healthy"},this._initialNetworkStateSubscription=Cu().subscribe(({online:e})=>{this.record(e?ku.ONLINE:ku.OFFLINE),this._initialNetworkStateSubscription?.unsubscribe()}),this._linkedConnectionStateObservable=new $i(e=>{e.next(this._linkedConnectionState),this._linkedConnectionStateObserver=e})}enableNetworkMonitoring(){this._initialNetworkStateSubscription?.unsubscribe(),void 0===this._networkMonitoringSubscription&&(this._networkMonitoringSubscription=Cu().subscribe(({online:e})=>{this.record(e?ku.ONLINE:ku.OFFLINE)}))}disableNetworkMonitoring(){this._networkMonitoringSubscription?.unsubscribe(),this._networkMonitoringSubscription=void 0}get connectionStateObservable(){let e;return this._linkedConnectionStateObservable.pipe(X(e=>this.connectionStatesTranslator(e))).pipe((t=t=>{const n=t!==e;return e=t,n},L(function(e,r){var i=0;e.subscribe(U(r,function(e){return t.call(n,e,i++)&&r.next(e)}))})));var t,n}record(e){"connected"===e.intendedConnectionState?this.enableNetworkMonitoring():"disconnected"===e.intendedConnectionState&&this.disableNetworkMonitoring();const t={...this._linkedConnectionState,...e};this._linkedConnectionState={...t},this._linkedConnectionStateObserver?.next(this._linkedConnectionState)}connectionStatesTranslator({connectionState:e,networkState:t,intendedConnectionState:n,keepAliveState:r}){return"connected"===e&&"disconnected"===t?Iu.ConnectedPendingNetwork:"connected"===e&&"disconnected"===n?Iu.ConnectedPendingDisconnect:"disconnected"===e&&"connected"===n&&"disconnected"===t?Iu.ConnectionDisruptedPendingNetwork:"disconnected"===e&&"connected"===n?Iu.ConnectionDisrupted:"connected"===e&&"unhealthy"===r?Iu.ConnectedPendingKeepAlive:"connecting"===e?Iu.Connecting:"disconnected"===e?Iu.Disconnected:Iu.Connected}}var Ou,xu;(xu=Ou||(Ou={})).START_RECONNECT="START_RECONNECT",xu.HALT_RECONNECT="HALT_RECONNECT";class Du{constructor(){this.reconnectObservers=[]}addObserver(e){this.reconnectObservers.push(e)}record(e){e===Ou.START_RECONNECT&&void 0===this.reconnectSetTimeoutId&&void 0===this.reconnectIntervalId&&(this.reconnectSetTimeoutId=setTimeout(()=>{this._triggerReconnect(),this.reconnectIntervalId=setInterval(()=>{this._triggerReconnect()},6e4)},5e3)),e===Ou.HALT_RECONNECT&&(this.reconnectIntervalId&&(clearInterval(this.reconnectIntervalId),this.reconnectIntervalId=void 0),this.reconnectSetTimeoutId&&(clearTimeout(this.reconnectSetTimeoutId),this.reconnectSetTimeoutId=void 0))}close(){this.reconnectObservers.forEach(e=>{e.complete?.()})}_triggerReconnect(){this.reconnectObservers.forEach(e=>{e.next?.()})}}const _u="wss://",Ru=/^https:\/\/\w{26}\.appsync-api\.\w{2}(?:(?:-\w{2,})+)-\d\.amazonaws.com(?:\.cn)?\/graphql$/i,Mu=/^https:\/\/\w{26}\.\w+-api\.\w{2}(?:(?:-\w{2,})+)-\d\.amazonaws.com(?:\.cn)?\/event$/i,Pu="/realtime",Lu=e=>{let t=e??"";return t=null!==t.match(Mu)?t.concat(Pu).replace("ddpg-api","grt-gamma").replace("appsync-api","appsync-realtime-api"):(e=>null===e.match(Ru))(t)?t.concat(Pu):t.replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta").replace("ddpg-api","grt-gamma"),t=t.replace("https://",_u).replace("http://",_u),new Do(t)},Uu=async e=>{const{appSyncGraphqlEndpoint:t,query:n,libraryConfigHeaders:r=()=>({}),additionalHeaders:i={},authToken:o}=e;let s={};const a=await r();if("function"==typeof i){const e={url:t||"",queryString:n||""};s=await i(e)}else s=i;return o&&(s={...s,Authorization:o}),{additionalCustomHeaders:s,libraryConfigHeaders:a}},ju=new Nr("AWSAppSyncRealTimeProvider Auth"),Ku=async({host:e})=>{const t=await co();return{Authorization:t?.tokens?.accessToken?.toString(),host:e}},Bu=async({apiKey:e,host:t})=>({host:t,"x-amz-date":(new Date).toISOString().replace(/[:-]|\.\d{3}/g,""),"x-api-key":e}),Fu=async({payload:e,canonicalUri:t,appSyncGraphqlEndpoint:n,region:r})=>{const i={region:r,service:"appsync"},o=(await co()).credentials,s={url:`${n}${t}`,data:e,method:"POST",headers:{...bu}};return is({headers:s.headers,method:s.method,url:new Do(s.url),body:s.data},{credentials:o,signingRegion:i.region,signingService:i.service}).headers},qu=async({host:e,additionalCustomHeaders:t})=>{if(!t?.Authorization)throw new Error("No auth token specified");return{Authorization:t.Authorization,host:e}},Vu=async({apiKey:e,authenticationType:t,canonicalUri:n,appSyncGraphqlEndpoint:r,region:i,additionalCustomHeaders:o,payload:s})=>{const a={apiKey:Bu,iam:Fu,oidc:Ku,userPool:Ku,lambda:qu,none:qu};if(t&&a[t]){const c=a[t],u=r?new Do(r).host:void 0,l="apiKey"===t?e:void 0;ju.debug(`Authenticating with ${JSON.stringify(t)}`);return await c({payload:s,canonicalUri:n,appSyncGraphqlEndpoint:r,apiKey:l,region:i,host:u,additionalCustomHeaders:o})}ju.debug(`Authentication type ${t} not supported`)},Gu=e=>{Mr.dispatch("api",e,"PubSub",_r)};class zu{constructor(e){this.subscriptionObserverMap=new Map,this.allowNoSubscriptions=!1,this.socketStatus=wu.CLOSED,this.keepAliveTimestamp=Date.now(),this.promiseArray=[],this.connectionStateMonitor=new Nu,this.reconnectionMonitor=new Du,this._establishConnection=async(e,t)=>{this.logger.debug(`Establishing WebSocket connection to ${e}`);try{await this._openConnection(e,t),await this._initiateHandshake()}catch(n){const{errorType:e,errorCode:t}=n;throw hu.includes(t)||pu.includes(e)?new cs(e):e?new Error(e):n}},this.logger=new Nr(e.providerName),this.wsProtocolName=e.wsProtocolName,this.wsConnectUri=e.connectUri,this.connectionStateMonitorSubscription=this._startConnectionStateMonitoring()}close(){return this.socketStatus=wu.CLOSED,this.connectionStateMonitor.record(ku.CONNECTION_FAILED),this.connectionStateMonitorSubscription.unsubscribe(),this.reconnectionMonitor.close(),new Promise((e,t)=>{this.awsRealTimeSocket?(this.awsRealTimeSocket.onclose=()=>{this._closeSocket(),this.subscriptionObserverMap=new Map,this.awsRealTimeSocket=void 0,e()},this.awsRealTimeSocket.onerror=e=>{t(e)},this.awsRealTimeSocket.close()):e()})}subscribe(e,t){return new $i(n=>{if(!e?.appSyncGraphqlEndpoint)return n.error({errors:[{...new _c("Subscribe only available for AWS AppSync endpoint")}]}),void n.complete();let r=!1;const i=To(),o=()=>{r||(r=!0,this._startSubscriptionWithAWSAppSyncRealTime({options:e,observer:n,subscriptionId:i,customUserAgentDetails:t}).catch(e=>{this.logger.debug(`${Eu.REALTIME_SUBSCRIPTION_INIT_ERROR}: ${e}`),this._closeSocket()}).finally(()=>{r=!1}))},s=new $i(e=>{this.reconnectionMonitor.addObserver(e)}).subscribe(()=>{o()});return o(),async()=>{await this._cleanupSubscription(i,s)}})}async connect(e){this.socketStatus!==wu.READY&&await this._connectWebSocket(e)}async publish(e,t){if(this.socketStatus!==wu.READY)throw new Error("Subscription has not been initialized");return this._publishMessage(e,t)}async _connectWebSocket(e){const{apiKey:t,appSyncGraphqlEndpoint:n,authenticationType:r,region:i}=e,{additionalCustomHeaders:o}=await Uu(e);this.connectionStateMonitor.record(ku.OPENING_CONNECTION),await this._initializeWebSocketConnection({apiKey:t,appSyncGraphqlEndpoint:n,authenticationType:r,region:i,additionalCustomHeaders:o})}async _publishMessage(e,t){const n=To(),{additionalCustomHeaders:r,libraryConfigHeaders:i}=await Uu(e),o=await this._prepareSubscriptionPayload({options:e,subscriptionId:n,customUserAgentDetails:t,additionalCustomHeaders:r,libraryConfigHeaders:i,publish:!0});return new Promise((e,t)=>{if(this.awsRealTimeSocket){const r=i=>{const o=JSON.parse(i.data);if(o.id===n&&"publish_success"===o.type&&(this.awsRealTimeSocket&&this.awsRealTimeSocket.removeEventListener("message",r),a(),e()),o.errors&&o.errors.length>0){const e=o.errors.map(e=>e.errorType);a(),t(new Error(`Publish errors: ${e.join(", ")}`))}},i=e=>{a(),t(new Error(`WebSocket error: ${e}`))},s=()=>{a(),t(new Error("WebSocket is closed"))},a=()=>{this.awsRealTimeSocket?.removeEventListener("message",r),this.awsRealTimeSocket?.removeEventListener("error",i),this.awsRealTimeSocket?.removeEventListener("close",s)};this.awsRealTimeSocket.addEventListener("message",r),this.awsRealTimeSocket.addEventListener("error",i),this.awsRealTimeSocket.addEventListener("close",s),this.awsRealTimeSocket.send(o)}else t(new Error("WebSocket is not connected"))})}async _cleanupSubscription(e,t){t?.unsubscribe();try{await this._waitForSubscriptionToBeConnected(e);const{subscriptionState:t}=this.subscriptionObserverMap.get(e)||{};if(!t)return;if(t!==yu.CONNECTED)throw new Error("Subscription never connected");this._sendUnsubscriptionMessage(e)}catch(n){this.logger.debug(`Error while unsubscribing ${n}`)}finally{this._removeSubscriptionObserver(e)}}_startConnectionStateMonitoring(){return this.connectionStateMonitor.connectionStateObservable.subscribe(e=>{Gu({event:"ConnectionStateChange",data:{provider:this,connectionState:e},message:`Connection state is ${e}`}),this.connectionState=e,e===Iu.ConnectionDisrupted&&this.reconnectionMonitor.record(Ou.START_RECONNECT),[Iu.Connected,Iu.ConnectedPendingDisconnect,Iu.ConnectedPendingKeepAlive,Iu.ConnectedPendingNetwork,Iu.ConnectionDisruptedPendingNetwork,Iu.Disconnected].includes(e)&&this.reconnectionMonitor.record(Ou.HALT_RECONNECT)})}async _startSubscriptionWithAWSAppSyncRealTime({options:e,observer:t,subscriptionId:n,customUserAgentDetails:r}){const{query:i,variables:o}=e;this.subscriptionObserverMap.set(n,{observer:t,query:i??"",variables:o??{},subscriptionState:yu.PENDING,startAckTimeoutId:void 0});const{additionalCustomHeaders:s,libraryConfigHeaders:a}=await Uu(e),c=await this._prepareSubscriptionPayload({options:e,subscriptionId:n,customUserAgentDetails:r,additionalCustomHeaders:s,libraryConfigHeaders:a});try{await this._connectWebSocket(e)}catch(d){return void this._logStartSubscriptionError(n,t,d)}const{subscriptionFailedCallback:u,subscriptionReadyCallback:l}=this.subscriptionObserverMap.get(n)??{};this.subscriptionObserverMap.set(n,{observer:t,subscriptionState:yu.PENDING,query:i??"",variables:o??{},subscriptionReadyCallback:l,subscriptionFailedCallback:u,startAckTimeoutId:setTimeout(()=>{this._timeoutStartSubscriptionAck(n)},15e3)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(c)}_logStartSubscriptionError(e,t,n){this.logger.debug({err:n});const r=String(n.message??"");if(this._closeSocket(),this.connectionState!==Iu.ConnectionDisruptedPendingNetwork){Pr(n)?t.error({errors:[{...new _c(`${Eu.CONNECTION_FAILED}: ${r}`)}]}):this.logger.debug(`${Eu.CONNECTION_FAILED}: ${r}`);const{subscriptionFailedCallback:i}=this.subscriptionObserverMap.get(e)||{};"function"==typeof i&&i()}}async _waitForSubscriptionToBeConnected(e){const t=this.subscriptionObserverMap.get(e);if(t){const{subscriptionState:n}=t;if(n===yu.PENDING)return new Promise((n,r)=>{const{observer:i,subscriptionState:o,variables:s,query:a}=t;this.subscriptionObserverMap.set(e,{observer:i,subscriptionState:o,variables:s,query:a,subscriptionReadyCallback:n,subscriptionFailedCallback:r})})}}_sendUnsubscriptionMessage(e){try{if(this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===wu.READY){const t=this._unsubscribeMessage(e),n=JSON.stringify(t);this.awsRealTimeSocket.send(n)}}catch(t){this.logger.debug({err:t})}}_removeSubscriptionObserver(e){this.subscriptionObserverMap.delete(e),this.allowNoSubscriptions||setTimeout(this._closeSocketIfRequired.bind(this),1e3)}_closeSocketIfRequired(){if(!(this.subscriptionObserverMap.size>0))if(this.awsRealTimeSocket)if(this.connectionStateMonitor.record(ku.CLOSING_CONNECTION),this.awsRealTimeSocket.bufferedAmount>0)setTimeout(this._closeSocketIfRequired.bind(this),1e3);else{this.logger.debug("closing WebSocket...");const e=this.awsRealTimeSocket;e.onclose=null,e.onerror=null,e.close(1e3),this.awsRealTimeSocket=void 0,this.socketStatus=wu.CLOSED,this._closeSocket()}else this.socketStatus=wu.CLOSED}maintainKeepAlive(){this.keepAliveTimestamp=Date.now()}keepAliveHeartbeat(e){const t=Date.now();t-this.keepAliveTimestamp>65e3?this.connectionStateMonitor.record(ku.KEEP_ALIVE_MISSED):this.connectionStateMonitor.record(ku.KEEP_ALIVE),t-this.keepAliveTimestamp>e&&this._errorDisconnect(Eu.TIMEOUT_DISCONNECT)}_handleIncomingSubscriptionMessage(e){if("string"!=typeof e.data)return;const[t,n]=this._handleSubscriptionData(e);if(t)return void this.maintainKeepAlive();const{type:r,id:i,payload:o}=n,{observer:s=null,query:a="",variables:c={},startAckTimeoutId:u,subscriptionReadyCallback:l,subscriptionFailedCallback:d}=this.subscriptionObserverMap.get(i)||{};if(r===fu.GQL_START_ACK||r===fu.EVENT_SUBSCRIBE_ACK){this.logger.debug(`subscription ready for ${JSON.stringify({query:a,variables:c})}`),"function"==typeof l&&l(),u&&clearTimeout(u),Gu({event:Eu.SUBSCRIPTION_ACK,data:{query:a,variables:c},message:"Connection established for subscription"});const e=yu.CONNECTED;return s&&this.subscriptionObserverMap.set(i,{observer:s,query:a,variables:c,startAckTimeoutId:void 0,subscriptionState:e,subscriptionReadyCallback:l,subscriptionFailedCallback:d}),void this.connectionStateMonitor.record(ku.CONNECTION_ESTABLISHED)}if(r!==fu.GQL_CONNECTION_KEEP_ALIVE){if(r===fu.GQL_ERROR||r===fu.EVENT_SUBSCRIBE_ERROR){const t=yu.FAILED;if(s){this.subscriptionObserverMap.set(i,{observer:s,query:a,variables:c,startAckTimeoutId:u,subscriptionReadyCallback:l,subscriptionFailedCallback:d,subscriptionState:t});let h=JSON.stringify(o??n);if(r===fu.EVENT_SUBSCRIBE_ERROR){const{errors:t}=JSON.parse(String(e.data));if(Array.isArray(t)&&t.length>0){const e=t[0];h=`${e.errorType}: ${e.message}`}}this.logger.debug(`${Eu.CONNECTION_FAILED}: ${h}`),s.error({errors:[{...new _c(`${Eu.CONNECTION_FAILED}: ${h}`)}]}),u&&clearTimeout(u),"function"==typeof d&&d()}}}else this.maintainKeepAlive()}_errorDisconnect(e){this.logger.debug(`Disconnect error: ${e}`),this.awsRealTimeSocket&&(this._closeSocket(),this.awsRealTimeSocket.close()),this.socketStatus=wu.CLOSED}_closeSocket(){this.keepAliveHeartbeatIntervalId&&(clearInterval(this.keepAliveHeartbeatIntervalId),this.keepAliveHeartbeatIntervalId=void 0),this.connectionStateMonitor.record(ku.CLOSED)}_timeoutStartSubscriptionAck(e){const t=this.subscriptionObserverMap.get(e);if(t){const{observer:n,query:r,variables:i}=t;if(!n)return;this.subscriptionObserverMap.set(e,{observer:n,query:r,variables:i,subscriptionState:yu.FAILED}),this._closeSocket(),this.logger.debug("timeoutStartSubscription",JSON.stringify({query:r,variables:i}))}}_initializeWebSocketConnection({appSyncGraphqlEndpoint:e,authenticationType:t,apiKey:n,region:r,additionalCustomHeaders:i}){if(this.socketStatus!==wu.READY)return new Promise(async(o,s)=>{if(this.promiseArray.push({res:o,rej:s}),this.socketStatus===wu.CLOSED)try{this.socketStatus=wu.CONNECTING;const o="{}",s=await Vu({authenticationType:t,payload:o,canonicalUri:this.wsConnectUri,apiKey:n,appSyncGraphqlEndpoint:e,region:r,additionalCustomHeaders:i}),a=s?JSON.stringify(s):"",c=`header-${hs.convert(a,{urlSafe:!0,skipPadding:!0})}`,u=(e=>{const t=(e=>{if(!e)return{};if("Authorization"in e){const{Authorization:t,...n}=e;return n}return e})(e),n=new _o;return Object.entries(t).forEach(([e,t])=>{n.append(e,t)}),n})(i),l=((e,t)=>{const n=Lu(e),r=new _o(n.search);for(const[i,o]of t.entries())r.append(i,o);return n.search=r.toString(),n.toString()})(e,u);await this._establishRetryableConnection(l,c),this.promiseArray.forEach(({res:e})=>{this.logger.debug("Notifying connection successful"),e()}),this.socketStatus=wu.READY,this.promiseArray=[]}catch(a){this.logger.debug("Connection exited with",a),this.promiseArray.forEach(({rej:e})=>{e(a)}),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=void 0,this.socketStatus=wu.CLOSED}})}async _establishRetryableConnection(e,t){this.logger.debug("Establishing retryable connection"),await us(this._establishConnection.bind(this),[e,t],5e3)}async _openConnection(e,t){return new Promise((n,r)=>{const i=this._getNewWebSocket(e,[this.wsProtocolName,t]);i.onerror=()=>{this.logger.debug("WebSocket connection error")},i.onclose=()=>{this._closeSocket(),r(new Error("Connection handshake error"))},i.onopen=()=>{this.awsRealTimeSocket=i,n()}})}_getNewWebSocket(e,t){return new WebSocket(e,t)}async _initiateHandshake(){return new Promise((e,t)=>{if(!this.awsRealTimeSocket)return void t(new Error("awsRealTimeSocket undefined"));let n=!1;this.awsRealTimeSocket.onerror=e=>{this.logger.debug(`WebSocket error ${JSON.stringify(e)}`)},this.awsRealTimeSocket.onclose=e=>{this.logger.debug(`WebSocket closed ${e.reason}`),this._closeSocket(),t(new Error(JSON.stringify(e)))},this.awsRealTimeSocket.onmessage=r=>{if("string"!=typeof r.data)return;this.logger.debug(`subscription message from AWS AppSyncRealTime: ${r.data} `);const i=JSON.parse(r.data),{type:o}=i,s=this._extractConnectionTimeout(i);if(o===fu.GQL_CONNECTION_ACK)return n=!0,this._registerWebsocketHandlers(s),void e("Connected to AWS AppSyncRealTime");if(o===fu.GQL_CONNECTION_ERROR){const{errorType:e,errorCode:n}=this._extractErrorCodeAndType(i);t({errorType:e,errorCode:n})}};const r={type:fu.GQL_CONNECTION_INIT};this.awsRealTimeSocket.send(JSON.stringify(r));const i=e=>{e||(this.connectionStateMonitor.record(ku.CONNECTION_FAILED),t(new Error("Connection timeout: ack from AWSAppSyncRealTime was not received after 15000 ms")))};setTimeout(()=>{i(n)},15e3)})}_registerWebsocketHandlers(e){this.awsRealTimeSocket&&(this.keepAliveHeartbeatIntervalId=setInterval(()=>{this.keepAliveHeartbeat(e)},5e3),this.awsRealTimeSocket.onmessage=this._handleIncomingSubscriptionMessage.bind(this),this.awsRealTimeSocket.onerror=e=>{this.logger.debug(e),this._errorDisconnect(Eu.CONNECTION_CLOSED)},this.awsRealTimeSocket.onclose=e=>{this.logger.debug(`WebSocket closed ${e.reason}`),this._closeSocket(),this._errorDisconnect(Eu.CONNECTION_CLOSED)})}}const Wu="AWSAppSyncRealTimeProvider";class Qu extends zu{constructor(){super({providerName:Wu,wsProtocolName:"graphql-ws",connectUri:"/connect"})}getProviderName(){return Wu}subscribe(e,t){return super.subscribe(e,t)}async _prepareSubscriptionPayload({options:e,subscriptionId:t,customUserAgentDetails:n,additionalCustomHeaders:r,libraryConfigHeaders:i}){const{appSyncGraphqlEndpoint:o,authenticationType:s,query:a,variables:c,apiKey:u,region:l}=e,d={query:a,variables:c},h=JSON.stringify(d),p={id:t,payload:{data:h,extensions:{authorization:{...{...await Vu({apiKey:u,appSyncGraphqlEndpoint:o,authenticationType:s,payload:h,canonicalUri:"",region:l,additionalCustomHeaders:r}),...i,...r,[Ir]:qi(n)}}}},type:fu.GQL_START};return JSON.stringify(p)}_handleSubscriptionData(e){this.logger.debug(`subscription message from AWS AppSync RealTime: ${e.data}`);const{id:t="",payload:n,type:r}=JSON.parse(String(e.data)),{observer:i=null,query:o="",variables:s={}}=this.subscriptionObserverMap.get(t)||{};return this.logger.debug({id:t,observer:i,query:o,variables:s}),r===fu.DATA&&n&&n.data?(i?i.next(n):this.logger.debug(`observer not found for id: ${t}`),[!0,{id:t,type:r,payload:n}]):[!1,{id:t,type:r,payload:n}]}_unsubscribeMessage(e){return{id:e,type:fu.GQL_STOP}}_extractConnectionTimeout(e){const{payload:{connectionTimeoutMs:t=Au}={}}=e;return t}_extractErrorCodeAndType(e){const{payload:{errors:[{errorType:t="",errorCode:n=0}={}]=[]}={}}=e;return{errorCode:n,errorType:t}}}class Ju extends Or{constructor(e){super(e),this.constructor=Ju,Object.setPrototypeOf(this,Ju.prototype)}}var Yu,Hu;(Hu=Yu||(Yu={})).NoAuthSession="NoAuthSession",Hu.NoRegion="NoRegion",Hu.NoCustomEndpoint="NoCustomEndpoint";const Zu={[Yu.NoAuthSession]:{message:"Auth session should not be empty."},[Yu.NoRegion]:{message:"Missing region."},[Yu.NoCustomEndpoint]:{message:"Custom endpoint region is present without custom endpoint."}},Xu=new Nr("GraphQLAPI resolveConfig"),$u=e=>{const t=e.getConfig();t.API?.GraphQL||Xu.warn("The API configuration is missing. This is likely due to Amplify.configure() not being called prior to generateClient().");const{apiKey:n,customEndpoint:r,customEndpointRegion:i,defaultAuthMode:o,endpoint:s,region:a}=t.API?.GraphQL??{};return function(e,t){const{message:n,recoverySuggestion:r}=Zu[t];if(!e)throw new Ju({name:t,message:n,recoverySuggestion:r})}(!(!r&&i),Yu.NoCustomEndpoint),{apiKey:n,customEndpoint:r,customEndpointRegion:i,defaultAuthMode:o,endpoint:s,region:a}},el=e=>{const t=e.libraryOptions?.API?.GraphQL?.headers,n=e.libraryOptions?.API?.GraphQL?.withCredentials;return{headers:t,withCredentials:n}};var tl,nl;(nl=tl||(tl={})).NO_API_KEY="No api-key configured",nl.NO_CURRENT_USER="No current user",nl.NO_CREDENTIALS="No credentials",nl.NO_FEDERATED_JWT="No federated jwt",nl.NO_AUTH_TOKEN="No auth token specified";const rl=Symbol("amplify"),il=Symbol("authMode"),ol=Symbol("authToken"),sl=Symbol("apiKey"),al=Symbol("headers"),cl=Symbol("endpoint"),ul={name:"NoApiKey",message:tl.NO_API_KEY,recoverySuggestion:'The API request was made with `authMode: "apiKey"` but no API Key was passed into `Amplify.configure()`. Review if your API key is passed into the `Amplify.configure()` function.'},ll={name:"NoCredentials",message:tl.NO_CREDENTIALS,recoverySuggestion:'The API request was made with `authMode: "iam"` but no authentication credentials are available.\n\nIf you intended to make a request using an authenticated role, review if your user is signed in before making the request.\n\nIf you intend to make a request using an unauthenticated role or also known as "guest access", verify if "Auth.Cognito.allowGuestAccess" is set to "true" in the `Amplify.configure()` function.'},dl={name:"NoValidAuthTokens",message:tl.NO_FEDERATED_JWT,recoverySuggestion:"If you intended to make an authenticated API request, review if the current user is signed in."},hl={name:"NoSignedUser",message:tl.NO_CURRENT_USER,recoverySuggestion:"Review the underlying exception field for more details. If you intended to make an authenticated API request, review if the current user is signed in."},pl={name:"NoAuthorizationHeader",message:tl.NO_AUTH_TOKEN,recoverySuggestion:'The API request was made with `authMode: "lambda"` but no `authToken` is set. Review if a valid authToken is passed into the request options or in the `Amplify.configure()` function.'},fl={name:"NoEndpoint",message:"No GraphQL endpoint configured in `Amplify.configure()`.",recoverySuggestion:"Review if the GraphQL API endpoint is set in the `Amplify.configure()` function."},gl=e=>({data:{},errors:[new _c(e.message,null,null,null,null,e)]}),yl="x-amz-user-agent";class ml{constructor(){this.appSyncRealTime=new Map,this._api={post:uu,cancelREST:lu,isCancelErrorREST:Qc,updateRequestToBeCancellable:du}}getModuleName(){return"InternalGraphQLAPI"}getGraphqlOperationType(e){const t=et(e).definitions,[{operation:n}]=t;return n}graphql(e,{query:t,variables:n={},authMode:r,authToken:i,endpoint:o,apiKey:s},a,c){const u=et("string"==typeof t?t:it(t)),[l={}]=u.definitions.filter(e=>"OperationDefinition"===e.kind),{operation:d}=l,h=a||{};switch(d){case"query":case"mutation":{const t=new AbortController;let a;if((e=>"function"!=typeof e)(e))a=this._graphql(e,{query:u,variables:n,authMode:r,apiKey:s,endpoint:o},h,t,c,i);else{a=e(async e=>await this._graphql(e,{query:u,variables:n,authMode:r,apiKey:s,endpoint:o},h,t,c,i))}return this._api.updateRequestToBeCancellable(a,t),a}case"subscription":return this._graphqlSubscribe(e,{query:u,variables:n,authMode:r,apiKey:s,endpoint:o},h,c,i);default:throw new Error(`invalid operation type: ${d}`)}}async _graphql(e,{query:t,variables:n,authMode:r,endpoint:i,apiKey:o},s={},a,c,u){const{apiKey:l,region:d,endpoint:h,customEndpoint:p,customEndpointRegion:f,defaultAuthMode:g}=$u(e),y=r||g||"iam",m="identityPool"===y?"iam":y,{headers:w,withCredentials:v}=el(e);let b;if("function"==typeof s){const e={method:"POST",url:new Do(i||p||h||"").toString(),queryString:it(t)};b=await s(e)}else b=s;u&&(b={...b,Authorization:u});const A=await async function(e,t,n,r={}){let i={};switch(t){case"apiKey":if(!n)throw new Ju(ul);i={"X-Api-Key":n};break;case"iam":if(void 0===(await e.Auth.fetchAuthSession()).credentials)throw new Ju(ll);break;case"oidc":case"userPool":{let t;try{t=(await e.Auth.fetchAuthSession()).tokens?.accessToken.toString()}catch(o){throw new Ju({...hl,underlyingError:o})}if(!t)throw new Ju(dl);i={Authorization:t};break}case"lambda":if("object"==typeof r&&!r.Authorization)throw new Ju(pl);i={Authorization:r.Authorization}}return i}(e,m,o??l,b),E={...!p&&A,...p&&(f?A:{})||{},...w&&await w({query:it(t),variables:n}),...b,...!p&&{[yl]:qi(c)}},S={query:it(t),variables:n||null};let I;I=p&&!f||"oidc"!==m&&"userPool"!==m&&"iam"!==m&&"lambda"!==m?void 0:{service:f?"execute-api":"appsync",region:f||d};const T=i||p||h;if(!T)throw gl(new Ju(fl));let C;try{const{body:t}=await this._api.post(e,{url:new Do(T),options:{headers:E,body:S,signingServiceInfo:I,withCredentials:v},abortController:a});C=await t.json()}catch(k){if(this.isCancelError(k))throw k;C=gl(k)}if(function(e){if(!e)return!1;const t=e;return Array.isArray(t.errors)&&t.errors.length>0}(C))throw ht(C);return C}isCancelError(e){return this._api.isCancelErrorREST(e)}cancel(e,t){return this._api.cancelREST(e,t)}_graphqlSubscribe(e,{query:t,variables:n,authMode:r,apiKey:i,endpoint:o},s={},a,c){const u=$u(e),l=r||u?.defaultAuthMode||"iam",d="identityPool"===l?"iam":l,{headers:h}=el(e),p=o??u?.endpoint,f=p??"none",g=this.appSyncRealTime.get(f)??new Qu;return this.appSyncRealTime.set(f,g),g.subscribe({query:it(t),variables:n,appSyncGraphqlEndpoint:p,region:u?.region,authenticationType:d,apiKey:i??u?.apiKey,additionalHeaders:s,authToken:c,libraryConfigHeaders:h},a).pipe($(e=>{if(e.errors)throw ht(e);throw e}))}}const wl=new WeakMap,vl="HAS_ONE",bl="HAS_MANY",Al="BELONGS_TO",El={ID:"ID",String:"String",AWSDate:"String",AWSTime:"String",AWSDateTime:"String",AWSTimestamp:"Int",AWSEmail:"String",AWSPhone:"String",AWSURL:"String",AWSIPAddress:"String",AWSJSON:"String",Boolean:"Boolean",Int:"Int",Float:"Float"},Sl=e=>1===e.length?e[0]:e.reduce((e,t,n)=>0===n?t:e+yt(t),""),Il=(e,t,n)=>{if(!n)return null;const r={};for(const[i,o]of Object.entries(n)){const n=t?e.models[t]?.fields[i]:void 0,s={fieldDef:n,value:o};vt(s)?r[i]=s.value.items.map(t=>Il(e,s.fieldDef.type.model,t)):bt(n)?r[i]=Il(e,n.type.model,o):r[i]=o}return r},Tl={CREATE:{operationPrefix:"create",usePlural:!1},GET:{operationPrefix:"get",usePlural:!1},UPDATE:{operationPrefix:"update",usePlural:!1},DELETE:{operationPrefix:"delete",usePlural:!1},LIST:{operationPrefix:"list",usePlural:!0},INDEX_QUERY:{operationPrefix:"",usePlural:!1},ONCREATE:{operationPrefix:"onCreate",usePlural:!1},ONUPDATE:{operationPrefix:"onUpdate",usePlural:!1},ONDELETE:{operationPrefix:"onDelete",usePlural:!1},OBSERVEQUERY:{operationPrefix:"observeQuery",usePlural:!1}},Cl=(e,t)=>{const{fields:n}=e,r=Object.values(n).map(({type:e,name:n})=>"string"==typeof e.enum?[n,Nl]:"string"==typeof e.nonModel?[n,Cl(t.nonModels[e.nonModel],t)]:"string"==typeof e?[n,Nl]:void 0).filter(e=>void 0!==e);return Object.fromEntries(r)},kl=(e,t)=>{const{fields:n}=e,r=Object.values(n).map(({type:e,name:n})=>"string"==typeof e.enum||"string"==typeof e?[n,Nl]:"string"==typeof e.nonModel?[n,Cl(t.nonModels[e.nonModel],t)]:void 0).filter(e=>void 0!==e),i=ft(e).map(e=>[e,Nl]);return Object.fromEntries(r.concat(i))},Nl="",Ol=Symbol("INTERNAL_USER_AGENT_OVERRIDE");var xl;!function(e){e.CreateConversation="1",e.GetConversation="2",e.ListConversations="3",e.DeleteConversation="4",e.SendMessage="5",e.ListMessages="6",e.OnStreamEvent="7",e.Generation="8",e.UpdateConversation="9"}(xl||(xl={}));const Dl=e=>({category:"ai",action:e}),_l={queries:"query",mutations:"mutation",subscriptions:"subscription"},Rl={},Ml=new Array(64);for(let _d=0,Rd="A".charCodeAt(0),Md="Z".charCodeAt(0);_d+Rd<=Md;_d++){const e=String.fromCharCode(_d+Rd);Rl[e]=_d,Ml[_d]=e}for(let _d=0,Rd="a".charCodeAt(0),Md="z".charCodeAt(0);_d+Rd<=Md;_d++){const e=String.fromCharCode(_d+Rd),t=_d+26;Rl[e]=t,Ml[t]=e}for(let _d=0;_d<10;_d++){Rl[_d.toString(10)]=_d+52;const e=_d.toString(10),t=_d+52;Rl[e]=t,Ml[t]=e}Rl["+"]=62,Ml[62]="+",Rl["/"]=63,Ml[63]="/";const Pl=e=>{let t=e.length/4*3;"=="===e.slice(-2)?t-=2:"="===e.slice(-1)&&t--;const n=new ArrayBuffer(t),r=new DataView(n);for(let i=0;i<e.length;i+=4){let t=0,n=0;for(let r=i,a=i+3;r<=a;r++)if("="!==e[r]){if(!(e[r]in Rl))throw new TypeError(`Invalid character ${e[r]} in base64 string.`);t|=Rl[e[r]]<<6*(a-r),n+=6}else t>>=6;const o=i/4*3;t>>=n%8;const s=Math.floor(n/8);for(let e=0;e<s;e++){const n=8*(s-e-1);r.setUint8(o+e,(t&255<<n)>>n)}}return new Uint8Array(n)},Ll=e=>e.map(e=>e.image?Ul(e):e.document?jl(e):e.toolUse?Kl(e):e.toolResult?Bl(e):Fl(e)),Ul=({image:e})=>({image:{...e,source:{...e.source,bytes:Pl(e.source.bytes)}}}),jl=({document:e})=>({document:{...e,source:{...e.source,bytes:Pl(e.source.bytes)}}}),Kl=({toolUse:e})=>({toolUse:{...e,input:JSON.parse(e.input)}}),Bl=({toolResult:e})=>({toolResult:{toolUseId:e.toolUseId,content:e.content.map(e=>e.image?Ul(e):e.json?(({json:e})=>({json:JSON.parse(e)}))(e):Fl(e))}}),Fl=e=>Object.fromEntries(Object.entries(e).filter(([e,t])=>null!==t)),ql=({content:e,createdAt:t,id:n,conversationId:r,role:i})=>({content:Ll(e??[]),conversationId:r,createdAt:t,id:n,role:i}),Vl=(e,t,n,r,i)=>async o=>{const s=Gt(e,t,r,i,!1,Dl(xl.ListMessages)),{data:a,nextToken:c,errors:u}=await s({...o,filter:{conversationId:{eq:n}}});return{data:a.map(e=>ql(e)),nextToken:c,errors:u}},Gl=e=>{if(e){return{...e,input:JSON.parse(e.input)}}},zl=e=>Object.fromEntries(Object.entries(e).filter(([e,t])=>null!==t)),Wl=(e,t,n,r,i)=>o=>{const{conversations:s}=t;if(!s)return{};const a=s[r].message.subscribe;return Mt(e,t,"subscription",a,!1,i,Dl(xl.OnStreamEvent))({conversationId:n}).subscribe(e=>{const{next:t,error:n}=(({id:e,conversationId:t,associatedUserMessageId:n,contentBlockIndex:r,contentBlockDoneAtIndex:i,contentBlockDeltaIndex:o,contentBlockText:s,contentBlockToolUse:a,stopReason:c,errors:u})=>{if(u)return{error:{id:e,conversationId:t,associatedUserMessageId:n,errors:u}};return{next:zl({id:e,conversationId:t,associatedUserMessageId:n,contentBlockIndex:r,contentBlockDoneAtIndex:i,contentBlockDeltaIndex:o,text:s,toolUse:Gl(a),stopReason:c})}})(e);n&&o.error(n),t&&o.next(t)})},Ql=e=>JSON.stringify(e),Jl=e=>e.map(e=>e.image?Hl(e):e.document?Zl(e):e.toolResult?Xl(e):e),Yl=({tools:e})=>({tools:Object.entries(e).map(([e,t])=>({toolSpec:{name:e,description:t.description,inputSchema:{json:JSON.stringify(t.inputSchema.json)}}}))}),Hl=({image:e})=>({image:{...e,source:{...e.source,bytes:Wt(e.source.bytes)}}}),Zl=({document:e})=>({document:{...e,source:{...e.source,bytes:Wt(e.source.bytes)}}}),Xl=({toolResult:e})=>({toolResult:{...e,content:e.content.map(e=>e.image?Hl(e):e.json?(({json:e})=>({json:JSON.stringify(e)}))(e):e)}}),$l=(e,t,n,r,i)=>async o=>{const{conversations:s}=t;if(!s)return{};const a="string"==typeof o?{content:[{text:o}]}:o,{content:c,aiContext:u,toolConfiguration:l}=a,d=s[r].message.send,h=Mt(e,t,"mutation",d,!1,i,Dl(xl.SendMessage)),{data:p,errors:f}=await h({conversationId:n,content:Jl(c),...u&&{aiContext:Ql(u)},...l&&{toolConfiguration:Yl(l)}});return{data:p?ql(p):p,errors:f}},ed=(e,t,n,r,i,o,s,a,c,u)=>{if(!n)throw new Error(`An error occurred converting a ${o} conversation: Missing ID`);return{id:n,createdAt:r,updatedAt:i,metadata:c,name:u,onStreamEvent:Wl(e,t,n,o,a),sendMessage:$l(e,t,n,o,a),listMessages:Vl(e,t,n,s,a)}},td=(e,t,n,r,i,o)=>async s=>{const{name:a,metadata:c}=s??{},u=JSON.stringify(c),l=qt(e,t,r,"CREATE",o,!1,Dl(xl.CreateConversation)),{data:d,errors:h}=await l({name:a,metadata:u});return{data:ed(e,t,d?.id,d?.createdAt,d?.updatedAt,n,i,o,d?.metadata,d?.name),errors:h}},nd=(e,t,n,r,i,o)=>async({id:s})=>{const a=qt(e,t,r,"GET",o,!1,Dl(xl.GetConversation)),{data:c,errors:u}=await a({id:s});return{data:c?ed(e,t,c.id,c.createdAt,c.updatedAt,n,i,o,c?.metadata,c?.name):c,errors:u}},rd=(e,t,n,r,i,o)=>async s=>{const a=Gt(e,t,r,o,!1,Dl(xl.ListConversations)),{data:c,nextToken:u,errors:l}=await a(s);return{data:c.map(r=>ed(e,t,r.id,r.createdAt,r.updatedAt,n,i,o,r?.metadata,r?.name)),nextToken:u,errors:l}},id=(e,t,n,r,i,o)=>async({id:s})=>{const a=qt(e,t,r,"DELETE",o,!1,Dl(xl.DeleteConversation)),{data:c,errors:u}=await a({id:s});return{data:c?ed(e,t,c?.id,c?.createdAt,c?.updatedAt,n,i,o,c?.metadata,c?.name):c,errors:u}},od=(e,t,n,r,i,o)=>async({id:s,metadata:a,name:c})=>{const u=JSON.stringify(a),l=qt(e,t,r,"UPDATE",o,!1,Dl(xl.UpdateConversation)),{data:d,errors:h}=await l({id:s,metadata:u,name:c});return{data:d?ed(e,t,d?.id,d?.createdAt,d?.updatedAt,n,i,o,d?.metadata,d?.name):d,errors:h}},sd=e=>"key"===e.type&&e.properties?.name&&e.properties?.queryField&&e.properties?.fields.length>0,ad=e=>{const t=e.attributes?.filter(sd).map(e=>{const t=e.properties.queryField,[n,...r]=e.properties.fields;return{queryField:t,pk:n,sk:r}});return t||[]},cd=(e,t)=>{const n=e.models[t].attributes?.find(e=>"model"===e.type),r={queries:["list","get","observeQuery"],mutations:["create","update","delete"],subscriptions:["onCreate","onUpdate","onDelete"]},i=[];if(!n)return Tl;if(n.properties)for(const[s,a]of Object.entries(n.properties))s in r&&(null===a?i.push(...r[s]):a instanceof Object&&i.push(...Object.keys(a)));i.includes("list")&&i.push("observeQuery");const o=i.map(e=>e.toUpperCase());return Object.fromEntries(Object.entries(Tl).filter(([e])=>!o.includes(e)))};const ud=new class extends ml{getModuleName(){return"GraphQLAPI"}graphql(e,t,n){const r={category:ri.API,action:ui.GraphQl};if(function(e){return Ol in e}(t)){const{[Ol]:i,...o}=t;return super.graphql(e,o,n,{...r,...i})}return super.graphql(e,t,n,{...r})}isCancelError(e){return super.isCancelError(e)}cancel(e,t){return super.cancel(e,t)}},ld=e=>{Mr.listen("core",t=>{if("configure"!==t.payload.event)return;const n=t.payload.data.API?.GraphQL;nn(n)&&Xt(e,n,pt)})},dd=new Proxy({},{get(){throw new Error("Client could not be generated. This is likely due to `Amplify.configure()` not being called prior to `generateClient()` or because the configuration passed to `Amplify.configure()` is missing GraphQL provider configuration.")}}),hd=(e,t)=>e?"identityPool"===e?"iam":e:t,pd=e=>{if(Array.isArray(e))return e.map((e,t)=>{const n=JSON.stringify(e);if(void 0===n)throw new Error(`Event must be a valid JSON value. Received ${e} at index ${t}`);return n});const t=JSON.stringify(e);if(void 0===t)throw new Error(`Event must be a valid JSON value. Received ${e}`);return[t]},fd="AWSAppSyncEventsProvider";const gd=new class extends zu{constructor(){super({providerName:fd,wsProtocolName:"aws-appsync-event-ws",connectUri:""}),this.allowNoSubscriptions=!0}getProviderName(){return fd}async connect(e){return super.connect(e)}subscribe(e,t){return super.subscribe(e,t).pipe()}async publish(e,t){return super.publish(e,t)}closeIfNoActiveSubscription(){this._closeSocketIfRequired()}async _prepareSubscriptionPayload({options:e,subscriptionId:t,customUserAgentDetails:n,additionalCustomHeaders:r,libraryConfigHeaders:i,publish:o}){const{appSyncGraphqlEndpoint:s,authenticationType:a,query:c,apiKey:u,region:l,variables:d}=e,h={channel:c,events:void 0!==d?pd(d):void 0},p=JSON.stringify(h),f={...await Vu({apiKey:u,appSyncGraphqlEndpoint:s,authenticationType:a,payload:p,canonicalUri:"",region:l,additionalCustomHeaders:r}),...i,...r,[Ir]:qi(n)},g={id:t,channel:c,events:void 0!==d?pd(d):void 0,authorization:{...f},payload:{events:void 0!==d?pd(d):void 0,channel:c,extensions:{authorization:{...f}}},type:o?fu.EVENT_PUBLISH:fu.EVENT_SUBSCRIBE};return JSON.stringify(g)}_handleSubscriptionData(e){this.logger.debug(`subscription message from AWS AppSync Events: ${e.data}`);const{id:t="",event:n,type:r}=JSON.parse(String(e.data)),{observer:i=null,query:o="",variables:s={}}=this.subscriptionObserverMap.get(t)||{};if(this.logger.debug({id:t,observer:i,query:o,variables:s}),r===fu.DATA&&n){const e=JSON.parse(n);return i?i.next({id:t,type:r,event:e}):this.logger.debug(`observer not found for id: ${t}`),[!0,{id:t,type:r,payload:e}]}return[!1,{id:t,type:r,payload:n}]}_unsubscribeMessage(e){return{id:e,type:fu.EVENT_STOP}}_extractConnectionTimeout(e){const{connectionTimeoutMs:t=Au}=e;return t}_extractErrorCodeAndType(e){const{errors:[{errorType:t="",errorCode:n=0}={}]=[]}=e;return{errorCode:n,errorType:t}}},yd=new Set;"function"==typeof SuppressedError&&SuppressedError;let md=class extends Tn{};sn([Tn.field(Jn)],md.prototype,"payer",void 0),sn([Tn.field(Jn)],md.prototype,"receiver",void 0),sn([Tn.field(Hn)],md.prototype,"bytes",void 0),md=sn([Tn.type("buyrambytes")],md);let wd=class extends Tn{};sn([Tn.field(Jn)],wd.prototype,"from",void 0),sn([Tn.field(Jn)],wd.prototype,"to",void 0),sn([Tn.field(Zn)],wd.prototype,"quantity",void 0),sn([Tn.field("string")],wd.prototype,"memo",void 0),wd=sn([Tn.type("transfer")],wd);var vd={en:{connecting:"Connecting to Cloud Wallet",error:{closed:"The Cloud Wallet was closed before the request was completed",endpoint:"Login Endpoint Error {{status}} - {{statusText}}",exception:"Signing exception occurred: {{exception}}",popup:"Unable to open the popup window. Check your browser settings and try again.",response:"The Cloud Wallet failed to respond.",timeout:"The request has timed out after {{timeout}} seconds. Please try again."},login:{popup:"Login with the Cloud Wallet popup window"},transact:{popup:"Sign with the Cloud Wallet popup window"}},ko:{connecting:"\ud074\ub77c\uc6b0\ub4dc \uc9c0\uac11\uc5d0 \uc5f0\uacb0",error:{closed:"\uc694\uccad\uc774 \uc644\ub8cc\ub418\uae30 \uc804\uc5d0 \ud074\ub77c\uc6b0\ub4dc \uc9c0\uac11\uc774 \ub2eb\ud614\uc2b5\ub2c8\ub2e4.",endpoint:"\ub85c\uadf8\uc778 \uc5d4\ub4dc\ud3ec\uc778\ud2b8 \uc624\ub958 {{status}} - {{statusText}}",exception:"\uc11c\uba85 \uc608\uc678\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: {{exception}}",popup:"\ud31d\uc5c5 \ucc3d\uc744 \uc5f4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ube0c\ub77c\uc6b0\uc800 \uc124\uc815\uc744 \ud655\uc778\ud558\uace0 \ub2e4\uc2dc \uc2dc\ub3c4\ud558\uc2ed\uc2dc\uc624.",response:"\ud074\ub77c\uc6b0\ub4dc \uc9c0\uac11\uc774 \uc751\ub2f5\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.",timeout:"{{timeout}}\ucd08 \ud6c4\uc5d0 \uc694\uccad \uc2dc\uac04\uc774 \ucd08\uacfc\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud558\uc2ed\uc2dc\uc624."},login:{popup:"\ud074\ub77c\uc6b0\ub4dc \uc9c0\uac11 \ud31d\uc5c5 \ucc3d\uc73c\ub85c \ub85c\uadf8\uc778"},transact:{popup:"\ud074\ub77c\uc6b0\ub4dc \uc9c0\uac11 \ud31d\uc5c5 \ucc3d\uc73c\ub85c \uc11c\uba85"}},"zh-Hans":{connecting:"\u6b63\u5728\u8fde\u63a5\u5230\u4e91\u94b1\u5305",error:{closed:"\u4e91\u94b1\u5305\u5728\u8bf7\u6c42\u5b8c\u6210\u4e4b\u524d\u5df2\u5173\u95ed",endpoint:"\u767b\u5f55\u7aef\u70b9\u9519\u8bef {{status}} - {{statusText}}",exception:"\u53d1\u751f\u7b7e\u540d\u5f02\u5e38\uff1a{{exception}}",popup:"\u65e0\u6cd5\u6253\u5f00\u5f39\u51fa\u7a97\u53e3\u3002\u8bf7\u68c0\u67e5\u60a8\u7684\u6d4f\u89c8\u5668\u8bbe\u7f6e\uff0c\u7136\u540e\u91cd\u8bd5\u3002",response:"\u4e91\u94b1\u5305\u54cd\u5e94\u5931\u8d25\u3002",timeout:"\u8bf7\u6c42\u5728 {{timeout}} \u79d2\u540e\u8d85\u65f6\u3002\u8bf7\u91cd\u8bd5\u3002"},login:{popup:"\u4f7f\u7528\u4e91\u94b1\u5305\u5f39\u51fa\u7a97\u53e3\u767b\u5f55"},transact:{popup:"\u4f7f\u7528\u4e91\u94b1\u5305\u5f39\u51fa\u7a97\u53e3\u7b7e\u540d"}},"zh-Hant":{connecting:"\u6b63\u5728\u9023\u63a5\u5230\u96f2\u9322\u5305",error:{closed:"\u96f2\u9322\u5305\u5728\u8acb\u6c42\u5b8c\u6210\u4e4b\u524d\u5df2\u95dc\u9589",endpoint:"\u767b\u9304\u7aef\u9ede\u932f\u8aa4 {{status}} - {{statusText}}",exception:"\u767c\u751f\u7c3d\u540d\u7570\u5e38\uff1a{{exception}}",popup:"\u7121\u6cd5\u6253\u958b\u5f48\u51fa\u7a97\u53e3\u3002 \u8acb\u6aa2\u67e5\u60a8\u7684\u700f\u89bd\u5668\u8a2d\u7f6e\uff0c\u7136\u5f8c\u91cd\u8a66\u3002",response:"\u96f2\u9322\u5305\u97ff\u61c9\u5931\u6557",timeout:"\u8acb\u6c42\u5728 {{timeout}} \u79d2\u5f8c\u8d85\u6642\u3002\u8acb\u91cd\u8a66\u3002"},login:{popup:"\u4f7f\u7528\u96f2\u9322\u5305\u5f48\u51fa\u7a97\u53e3\u767b\u9304"},transact:{popup:"\u4f7f\u7528\u96f2\u9322\u5305\u5f48\u51fa\u7a97\u53e3\u7c3d\u540d"}}};class bd{static generateTransactionMessage(e,t,n){return{id:w(),type:"requesting",actions:e,namedParams:t,dapp:n}}static isValidTransactionMessage(e){return e&&"object"==typeof e&&"string"==typeof e.id&&"string"==typeof e.type&&["requesting","approved","rejected","error","ready","not-ready"].includes(e.type)}static isMatchingTransaction(e,t){return e.id===t}static processTransactionResult(e){return e?.signatures?e.signatures.map(e=>{try{return/^[A-Za-z0-9+/=]+$/.test(e)?atob(e):e}catch(t){return console.warn("Failed to decode signature:",t),e}}):[]}}class Ad{constructor(e){xc.configure({API:{GraphQL:{endpoint:e.graphQLRelayEndpoint,region:e.graphQLRelayRegion,defaultAuthMode:"lambda"},Events:{endpoint:e.eventRelayEndpoint,region:e.eventRelayRegion,defaultAuthMode:"lambda"}}})}}class Ed{constructor(){this.client=rn()}async publishToChannel(e,t,n){await this.client.graphql({query:"\n    mutation Publish2channel($data: AWSJSON!, $name: String!) {\n        publish2channel(data: $data, name: $name) {\n            data\n            name\n            __typename\n        }\n    }\n",variables:{name:e,data:JSON.stringify(t)},authToken:n})}async subscribeToChannel(e,t,n,r,i=18e4){try{const r=(await on(e)).subscribe({next:e=>{this.handleMessage(e,t,n)},error:e=>{n(e)}}),o=setTimeout(()=>{r.unsubscribe(),n(new Error("Subscription timeout after "+i+"ms"))},i);return{unsubscribe:()=>{clearTimeout(o),r.unsubscribe()}}}catch(o){return n(o),{unsubscribe:()=>{}}}}}class Sd extends Ed{static parseAuthHeaders(e,t,n){if("string"==typeof t)try{t.startsWith("{")&&(t=JSON.parse(t))}catch(r){console.warn("Failed to parse token:",r)}return JSON.stringify({account:e,token:t,svc:n,mode:"dapp"})}handleMessage(e,t,n){bd.isValidTransactionMessage(e)?t(e):n(new Error("Invalid transaction message received"))}generateChannelName(e,t){return`transact:${e}:${t||""}`}generateTransactionMessage(e,t,n){return bd.generateTransactionMessage(e,t,n)}processTransactionResult(e){if("approved"!==e.type)throw new Error("Transaction not approved");return{signatures:bd.processTransactionResult(e.result)}}}class Id extends Error{constructor(e=""){super(e),this.name="ActivationFetchError"}}class Td extends Error{constructor(e=""){super(e),this.name="ActivationExpiredError"}}class Cd extends Error{constructor(e=""){super(e),this.name="ActivationCancelledError"}}class kd extends Error{constructor(e=""){super(e),this.name="ActivationDeepLinkError"}}class Nd extends Error{constructor(e=""){super(e),this.name="InvalidCodeError"}}class Od{constructor(e){if(this.mobileAppConnectConfig=e,this.isCanceled=!1,this.connectedType=null,this.WAX_SCHEME_DEEPLINK="mycloudwallet",this.activationEndpoint="https://login-api.mycloudwallet.com",!e||!e.dappInfo)throw new Error("MobileAppConnect is required");this.mobileAppConnectConfig=e,this.dAppInfo=e.dappInfo,this.origin=location.origin,new Ad({graphQLRelayEndpoint:"https://queue-relay.mycloudwallet.com/graphql",graphQLRelayRegion:"us-east-2",eventRelayEndpoint:"https://direct-connect-api.mycloudwallet.com/event",eventRelayRegion:"eu-east-2"}),this.transactionSyncHandler=new Sd,this.uuid=w();const t=localStorage.getItem("connectedType");"direct"!==t&&"remote"!==t&&"web"!==t||(this.connectedType=t)}getConnectedType(){return this.connectedType}async showAppConnectPrompt(e){const t=[];let n,r,i,o;const s=new Promise((e,t)=>{r=e,i=t});this.mobileAppConnectConfig.remote&&(n=await this.fetchActivationInfo(this.getActivationPayload(e)),t.unshift({type:"qr",data:n.qrCodeContent})),this.mobileAppConnectConfig.direct&&t.unshift({type:"button",data:{label:"Open in My Cloud Wallet",variant:"primary",onClick:async()=>{try{const t=await this.directConnect(e);r(t)}catch(t){i(t)}}}});const a=e.ui.prompt({title:"Connect with My Cloud Wallet!!!",body:"Connect My Cloud Wallet on your mobile device",elements:t});a.catch(e=>{console.info("User cancelled modal::",e.message),i(e),this.isCanceled=!0}),n&&(o=this.checkActivation(e,n));try{return o?await Promise.race([s,o]):await s}catch(c){throw console.log("showAppConnectPrompt::directConnectPromise::error",c),c instanceof Cd&&(console.log("currentPromptResponse",typeof a),this.isCanceled=!0,this.connectedType=null),c}}remoteTransact(e,t,n){if(!this.user?.account||!this.user?.token)throw new Error("User not authenticated");const r=this.transactionSyncHandler.generateChannelName(this.origin,this.user.account),i=this.transactionSyncHandler.generateTransactionMessage(e.request.getRawActions(),n,this.origin),o=Sd.parseAuthHeaders(this.user.account,this.user.token,this.origin);return new Promise((e,t)=>{let n;const s=i;return console.log(`start listening on ${r} with transaction ID = ${s.id}...`),this.transactionSyncHandler.publishToChannel(r,i,o).catch(e=>{console.error("Failed to publish to channel:",e),t(e)}),n=this.transactionSyncHandler.subscribeToChannel(r,n=>{if(n.id===s.id)switch(n.type){case"requesting":console.log("tx requesting...");break;case"approved":try{const t=this.transactionSyncHandler.processTransactionResult(n);e(t)}catch(r){console.error("Failed to process transaction result:",r),t(r)}break;case"rejected":t(new Error("User rejected the transaction"));break;case"error":t(new Error(n.result));break;default:console.log(`Unknown status: ${JSON.stringify(n)}`)}},e=>{console.error("Subscription error:",e),t(e)},o),{unsubscribe:()=>{n?.unsubscribe()}}})}async signTransaction(e,t,n){if(!this.connectedType||"web"===this.connectedType)throw new Error("Activation_NotActivated!!!");return"direct"===this.connectedType?await this.directTransact(e,t,n):this.remoteTransact(e,t,n)}async checkActivation(e,t){try{const n=await this.checkIfActivated(t,this.origin);if(n)return this.user=n,this.connectedType="remote",e.ui.onLoginComplete(),this.user}catch(n){throw n}}async fetchActivationInfo({origin:e,dAppName:t,logourl:n,schema:r,description:i}){try{if(!this.mobileAppConnectConfig.remote)throw new Error("mobileAppConnectConfig remote is required");const o=await this.mobileAppConnectConfig.remote.getDappSingleUsedToken(),s=await fetch(`${this.activationEndpoint}/v1/wcw/dapp/code`,{method:"POST",headers:{"Content-Type":"application/json","X-dapp-sdk-sut":o.toString(),"X-dapp-sdk-client-id":this.mobileAppConnectConfig.remote.dappClientId.toString()},body:JSON.stringify({dapp:e,dAppName:t,logourl:n,schema:r,description:i,origin:e})});if(!s.ok)throw new Error(`Network response was not ok: ${s.status}`);return await s.json()}catch(o){throw console.error("Fetch error:",o),new Id}}async checkIfActivated(e,t){return new Promise((n,r)=>{const i=setInterval(async()=>{const o=Math.floor(Date.now()/1e3);(this.user||this.isCanceled)&&clearInterval(i),o>e.expire&&(console.log("Current time is greater than expiration. Stopping pulling checkActivation.",o,e.expire),clearInterval(i),r(new Td));try{const o=await fetch(`${this.activationEndpoint}/v1/wcw/dapp/code/check?dapp=${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e.code})});if(422===o.status)return void r(new Nd);if(!o.ok)throw new Error(`Network response was not ok: ${o.status}`);const s=await o.json();202===o.status?console.log("Continuing pulling checkActivation"):200===o.status&&(console.log("Stopping pulling checkActivation"),clearInterval(i),n(s))}catch(s){console.error("Error checking activation:",s),clearInterval(i),r(s)}},5e3)})}getActivationPayload(e){return{origin:this.origin,dAppName:`${this.dAppInfo.name||e.appName}`,logourl:this.dAppInfo.logoUrl,schema:this.dAppInfo.schema,description:this.dAppInfo.description}}openDeepLinkWithFallback(e){return new Promise((t,n)=>{const r=setTimeout(()=>{n(new kd("App likely not installed, fallback triggered."))},4e3),i=()=>{clearTimeout(r),t()};window.addEventListener("pagehide",i,{once:!0}),window.addEventListener("blur",i,{once:!0}),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&i()},{once:!0}),window.location.href=e})}async directConnect(e){const t=btoa(hn()||""),n=encodeURIComponent("1234567890");this.uuid=w();const r=new URLSearchParams({schema:this.dAppInfo.schema||"none",dapp:this.dAppInfo.name||e.appName||"",origin:this.origin,logourl:this.dAppInfo.logoUrl||"",description:this.dAppInfo.description||"",antelope:"antelope-1",callbackHttp:t,uuid:this.uuid,deviceHash:n}),i=e.arbitrary.nonce;if(i){const e=btoa(i);r.set("n",e)}const o=`${this.WAX_SCHEME_DEEPLINK}://connect?${r.toString()}`;try{await this.openDeepLinkWithFallback(o)}catch(s){throw console.error("Failed to open deeplink:",s),s}return new Promise(async(e,t)=>{const n=setTimeout(()=>{this.isCanceled=!0,o(),t(new Error("Connection timeout"))},18e4);let r,i;const o=()=>{clearTimeout(n),clearInterval(i),r?.unsubscribe?.()},s=async()=>{try{const n=await on(`/device-connect/${this.uuid}`,{authToken:this.uuid});r=n.subscribe({next:r=>{if("data"===r?.type&&r?.event?.accountName)return this.user={account:r.event.accountName,keys:[],isTemp:!1,createData:{},token:"",proof:r.event.proof},this.connectedType="direct",localStorage.setItem("connectedType",this.connectedType),o(),e(this.user),void n.close();if(r?.event?.error){const e="ConnectRejected"===r.event.error?"User rejected the connection":"Direct connection error";return o(),t(new Cd(e)),void n.close()}return o(),t(new Error("Invalid account")),void n.close()},error:e=>{console.error("Subscription error:",e),o(),t(e),n.close()}})}catch(n){o(),t(n)}};i=setInterval(()=>{document.hasFocus()&&s()},500)})}async directTransact(e,t,n){if(!this.connectedType||"remote"===this.connectedType)throw new Error("Invalid connection type, expect direct connection");const r=Array.from(e.serializedTransaction),i=btoa(JSON.stringify(r)),o=btoa(hn()||""),s=encodeURIComponent("1234567890"),a=w(),c=new URLSearchParams({transaction:i,schema:this.dAppInfo.schema||"none",callbackHttp:o,redirect:"true",deviceHash:s,uuid:a,broadcast:"false"}),u=`${this.WAX_SCHEME_DEEPLINK}://transact?${c.toString()}`;try{await this.openDeepLinkWithFallback(u)}catch(l){throw console.error("Failed to open deeplink:",l),l}return new Promise(async(t,n)=>{const r=setTimeout(()=>{s(),n(new Error("Transaction timeout"))},18e4);let i,o;const s=()=>{clearTimeout(r),clearInterval(o),i?.unsubscribe?.()},c=async()=>{try{const r=await on(`/device-transact/${a}`,{authToken:a});i=r.subscribe({next:i=>{if("data"===i?.type&&i?.event?.signatures){const n={signatures:function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");for(;t.length%4!=0;)t+="=";try{const e=atob(t);return JSON.parse(e)}catch(l){throw console.error("Failed to decode signature from wallet:",l),new Error("Invalid signature format")}}(i.event.signatures)};if(i.event.serializedTransaction){const t=Sn.decode({data:i.event.serializedTransaction,type:Yn});t.equals(e.transaction)||an(e.transaction,t)}return t(n),void r.close()}if(i?.event?.error){const e="TransactionDeclined"===i.event.error?"User rejected the transaction":i.event.error;return s(),n(new Error(e)),void r.close()}return s(),n(new Error("Transaction unknown error")),void r.close()},error:e=>{alert("subscription error::"+e?.message),console.error("Subscription error:",e),s(),n(e),r.close()}})}catch(r){return s(),void n(r)}};o=setInterval(()=>{document.hasFocus()&&c()},350)})}async cleanup(){this.connectedType=null,this.user=void 0,this.isCanceled=!1,localStorage.removeItem("connectedType"),await async function(){await gd.close()}()}}class xd extends xn{constructor(e){super(),this.id="cloudwallet",this.translations=vd,this.config={requiresChainSelect:!1,requiresPermissionSelect:!1,supportedChains:["1064487b3cd1a897ce03ae5b6a865651747e2e152090f99c1d19d44e01aea5a4"]},this.metadata=Dn.from({name:"Cloud Wallet",description:"",logo:"data:image/png;base64,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",homepage:"https://www.mycloudwallet.com",download:"https://www.mycloudwallet.com"}),this.url="https://www.mycloudwallet.com",this.autoUrl="https://idm-api.mycloudwallet.com/v1/accounts/auto-accept",this.loginTimeout=3e5,this.allowTemp=!1,this.mobileAppConnect=null,this.options=e,e?.supportedChains&&(this.config.supportedChains=e.supportedChains),e?.url&&(this.url=e.url),e?.autoUrl&&(this.autoUrl=e.autoUrl),e?.loginTimeout&&(this.loginTimeout=e.loginTimeout),e?.allowTemp&&(this.allowTemp=e.allowTemp),e?.mobileAppConnectConfig&&(this.mobileAppConnect=new Od(e.mobileAppConnectConfig))}login(e){let t;return t=gn()||navigator.userAgent.includes("iPhone")||navigator.userAgent.includes("iPad")?this.showLoginPrompt(e):this.waxLogin(e),zn(t,e=>{throw console.log("[login]canceled",e),e})}async showLoginPrompt(e){let t,n;const r=new Promise((e,r)=>{t=e,n=r});let i,o;const s=new Promise((e,t)=>{i=e,o=t}),a=[];this.mobileAppConnect instanceof Od&&a.push({type:"button",data:{label:"Open My Cloud Wallet app",variant:"primary",onClick:async()=>{try{if(!(this.mobileAppConnect instanceof Od))throw new Error("Mobile App Connect is not initialized");if(!e.chain)throw new Error("A chain must be selected to login with.");const n=await this.mobileAppConnect.directConnect(e),r=n?.proof?.data?.signature,i=r&&Wn.from({chainId:kn.from(e?.chain?.id),scope:Jn.from(e.appName||""),expiration:Qn.from((new Date).getTime()/1e3+3600),signer:Pn.from({actor:`${n?.account}`,permission:"active"}),signature:On.from(r)});this.data.identityProof=i,this.data.proof=n?.proof,this.data.isTempAccount=n?.isTemp,this.data.whitelist=n?.whitelistedContracts,t({chain:e.chain.id,permissionLevel:Pn.from({actor:`${n?.account}`,permission:"active"}),identityProof:i})}catch(r){n(r)}}}}),a.push({type:"button",data:{label:"Login with web",variant:"primary",onClick:async()=>{try{const t=await this.waxLogin(e);i(t)}catch(t){o(t)}}}});return e.ui.prompt({title:"Connect to My Cloud Wallet",body:"Connect My Cloud Wallet on your mobile device",elements:a}).catch(e=>{console.info("User cancelled modal::",e.message),n(e)}),await Promise.race([r,s])}async waxLogin(e){if(!e.chain)throw new Error("A chain must be selected to login with.");const t=e.ui.getTranslate(this.id);let n;const r=new URLSearchParams,i=e.arbitrary.nonce;if(i){const e=btoa(i);r.set("n",e)}r.set("returnTemp",this.allowTemp.toString());try{const e=new URL("/login",this.autoUrl);e.search=r.toString(),n=await async function(e,t){const n=new URL(t),r=await fetch(String(n),{credentials:"include",method:"get",headers:{"X-Referer-Url":location.origin}});if(!r.ok)throw new Error(e("error.endpoint",{default:"Login Endpoint Error {{status}} - {{statusText}}",status:r.status,statusText:r.statusText}));return await r.json()}(t,e.toString())}catch(a){const e=new URL("/cloud-wallet/login",this.url);e.search=r.toString(),n=await async function(e,t,n=3e5){const r=new URL(t),i=await window.open(r,"WalletPluginCloudWalletPopup","height=800,width=600");if(!i)throw new Error(e("error.popup",{default:"Unable to open the popup window. Check your browser settings and try again."}));return new Promise((t,o)=>{const s=cn(e,i,o),c=e=>{if(un(e,r,i))try{t(e.data)}catch(a){o(a)}finally{window.removeEventListener("message",c),clearTimeout(u),clearInterval(s)}},u=setTimeout(()=>{i.close(),window.removeEventListener("message",c),o(new Error(e("error.timeout",{default:"The request has timed out after {{timeout}} seconds. Please try again.",timeout:n/1e3})))},n);window.addEventListener("message",c)})}(t,e.toString())}if(!n)throw new Error(t("login.error.response",{default:"Cloud Wallet failed to respond"}));if(!n.verified)throw new Error(t("error.closed",{default:"Cloud Wallet closed before the login was completed"}));this.data.whitelist=n.whitelistedContracts,this.data.isTempAccount=n.isTemp,this.data.proof=n?.proof,console.log("waxLogin::response proof",n?.proof);const o=n?.proof?.data?.signature,s=o&&Wn.from({chainId:kn.from(e?.chain?.id),scope:Jn.from(e.appName||""),expiration:Qn.from((new Date).getTime()/1e3+3600),signer:Pn.from({actor:n.userAccount,permission:"active"}),signature:On.from(n?.proof?.data?.signature)});return this.data.identityProof=s,new Promise(t=>{if(!e.chain)throw new Error("A chain must be selected to login with.");localStorage.setItem("connectedType","web"),t({chain:e.chain.id,permissionLevel:Pn.from({actor:n.userAccount,permission:"active"}),identityProof:s})})}sign(e,t){let n;const r=localStorage.getItem("connectedType");return this.mobileAppConnect instanceof Od&&("direct"===r||"remote"===r)?(console.log("mobileSign"),n=this.mobileSign(e,t)):(console.log("waxSign"),n=this.waxSign(e,t)),zn(n,e=>{throw e})}async mobileSign(e,t){if(!t.ui)throw new Error("A UserInterface must be defined to sign transactions.");if(!(this.mobileAppConnect instanceof Od))throw new Error("MobileAppConnect is not initialized");let n;const r=new Promise((e,t)=>{n=t});t.ui.getTranslate(this.id);const i=e.transaction.expiration.toDate(),o=new Date,s=Math.floor(i.getTime()-o.getTime());console.log("timeout",s);let a=zn(new Promise(()=>{}));ln(e,this.data)||(a=t.ui.prompt({title:"Sign",body:"Please complete the transaction using the Cloud Wallet app.",optional:!0,elements:[{type:"countdown",data:i.toISOString()}]}),a.catch(e=>{clearTimeout(c),n(e)}));const c=setTimeout(()=>{if(!t.ui)throw new Error("No UI defined");a.cancel("The request expired, please try again.")},s),u=this.mobileAppConnect.signTransaction(e,t,{});return Promise.race([r,u])}async waxSign(e,t){if(!t.ui)throw new Error("A UserInterface must be defined to sign transactions.");const n=t.ui.getTranslate(this.id),r=e.transaction.expiration.toDate(),i=new Date,o=Math.floor(r.getTime()-i.getTime()),s=this.getWalletResponse(e,t,n,o);let a=zn(new Promise(()=>{}));ln(e,this.data)||(a=t.ui.prompt({title:"Sign",body:"Please complete the transaction using the Cloud Wallet popup window.",optional:!0,elements:[{type:"countdown",data:r.toISOString()}]}),a.catch(()=>clearTimeout(c)));const c=setTimeout(()=>{if(!t.ui)throw new Error("No UI defined");a.cancel("The request expired, please try again.")},o),u=await Promise.race([s,a]).finally(()=>{clearTimeout(c),a.cancel()});if("serializedTransaction"in u){const n={signatures:u.signatures};if(u.serializedTransaction){const r=Sn.decode({data:u.serializedTransaction,type:Yn});if(!r.equals(e.transaction)){an(e.transaction,r);const i=await Nn.create({transaction:r},t.esrOptions);n.resolved=new Mn(i,t.permissionLevel,Yn.from(r),Sn.objectify(Yn.from(r)),kn.from(t.chain.id))}}return new Promise(e=>e(n))}throw new Error("The Cloud Wallet failed to respond")}async getWalletResponse(e,t,n,r=3e5){let i;if(!t.ui)throw new Error("The Cloud Wallet requires a UI to sign transactions.");if(ln(e,this.data))try{i=await async function(e,t,n){const r=new URL(t),i=new AbortController;setTimeout(()=>i.abort(),5e3);const o=await fetch(r,{body:JSON.stringify({feeFallback:!0,freeBandwidth:!0,transaction:n.serializedTransaction}),credentials:"include",headers:{"Content-Type":"application/json"},method:"POST",signal:i.signal});if(!o.ok)throw new Error(e("error.endpoint",{default:"Login Endpoint Error {{status}} - {{statusText}}",status:o.status,statusText:o.statusText}));const s=await o.json();if(s.processed&&s.processed.except)throw new Error(e("error.exception",{default:"Signing exception occurred: {{exception}}",exception:JSON.stringify(s)}));return s}(n,`${this.autoUrl}/signing`,e)}catch(o){i=await dn(n,`${this.url}/cloud-wallet/signing/`,e,r)}else i=await dn(n,`${this.url}/cloud-wallet/signing/`,e,r);if(!i)throw new Error(n("login.error.response",{default:"Cloud Wallet failed to respond"}));if(!i.verified)throw new Error(n("error.closed",{default:"The Cloud Wallet was closed before the request was completed"}));return this.data.whitelist=i.whitelistedContracts,i}async logout(e){this.mobileAppConnect&&await this.mobileAppConnect.cleanup()}}class Dd extends xn{constructor(){super(),this.id="wombat",this.translations={},this.config={requiresChainSelect:!0,requiresPermissionSelect:!1},this.metadata=Dn.from({name:"Wombat",description:"",logo:"data:image/png;base64,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",homepage:"https://www.wombat.app/",download:"https://www.wombat.app/the-app"})}async loadScatterProtocol(){let e;if("undefined"!=typeof window&&(e=await $n(()=>import("./protocol-scatter.m-DKKrwVLT.js"),__vite__mapDeps([0,1,2]))),!e)throw new Error("Scatter protocol is not available in this environment");return e}async login(e){return(await this.loadScatterProtocol()).handleLogin(e)}async logout(e){return(await this.loadScatterProtocol()).handleLogout(e)}async sign(e,t){return(await this.loadScatterProtocol()).handleSignatureRequest(e,t)}}export{vr as W,$n as _,xd as a,Dd as b};
//# sourceMappingURL=wallets-4z7hQ1Rq.js.map
