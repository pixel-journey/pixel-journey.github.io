const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/protocol-scatter.m-DMkKft5o.js","assets/js/wharfkit-CpEkzKdn.js","assets/js/vendor-WE9EuH_2.js"])))=>i.map(i=>d[i]);
var t=Object.defineProperty,e=(e,n,i)=>((e,n,i)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i)(e,"symbol"!=typeof n?n+"":n,i);import{a as n}from"./vendor-WE9EuH_2.js";import{U as i,C as r,a as o,S as s,B as a,b as c,P as u,c as h,d as l,e as d,A as f,W as p,L as w,f as y,R as m,g,_ as v,h as b,i as A,j as E,k as I,l as S,m as T,n as N,o as O,p as k,I as C,T as M,N as x,q as D,r as R,s as P}from"./wharfkit-CpEkzKdn.js";const j={},U=function(t,e,n){let i=Promise.resolve();if(e&&e.length>0){let t=function(t){return Promise.all(t.map(t=>Promise.resolve(t).then(t=>({status:"fulfilled",value:t}),t=>({status:"rejected",reason:t}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),r=n?.nonce||n?.getAttribute("nonce");i=t(e.map(t=>{if((t=function(t){return"/market-alphatest/"+t}(t))in j)return;j[t]=!0;const e=t.endsWith(".css"),n=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${n}`))return;const i=document.createElement("link");return i.rel=e?"stylesheet":"modulepreload",e||(i.as="script"),i.crossOrigin="",i.href=t,r&&i.setAttribute("nonce",r),document.head.appendChild(i),e?new Promise((e,n)=>{i.addEventListener("load",e),i.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${t}`)))}):void 0}))}function r(t){const e=new Event("vite:preloadError",{cancelable:!0});if(e.payload=t,window.dispatchEvent(e),!e.defaultPrevented)throw t}return i.then(e=>{for(const t of e||[])"rejected"===t.status&&r(t.reason);return t().catch(r)})};var L,q={exports:{}};const B=n((L||(L=1,function(t){var e={}.hasOwnProperty,n="~";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,i,o,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new r(i,o||t,s),c=n?n+e:e;return t.t[c]?t.t[c].fn?t.t[c]=[t.t[c],a]:t.t[c].push(a):(t.t[c]=a,t.i++),t}function s(t,e){0===--t.i?t.t=new i:delete t.t[e]}function a(){this.t=new i,this.i=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,i,r=[];if(0===this.i)return r;for(i in t=this.t)e.call(t,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},a.prototype.listeners=function(t){var e=n?n+t:t,i=this.t[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,s=new Array(o);r<o;r++)s[r]=i[r].fn;return s},a.prototype.listenerCount=function(t){var e=n?n+t:t,i=this.t[e];return i?i.fn?1:i.length:0},a.prototype.emit=function(t,e,i,r,o,s){var a=n?n+t:t;if(!this.t[a])return!1;var c,u,h=this.t[a],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,i),!0;case 4:return h.fn.call(h.context,e,i,r),!0;case 5:return h.fn.call(h.context,e,i,r,o),!0;case 6:return h.fn.call(h.context,e,i,r,o,s),!0}for(u=1,c=new Array(l-1);u<l;u++)c[u-1]=arguments[u];h.fn.apply(h.context,c)}else{var d,f=h.length;for(u=0;u<f;u++)switch(h[u].once&&this.removeListener(t,h[u].fn,void 0,!0),l){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,e);break;case 3:h[u].fn.call(h[u].context,e,i);break;case 4:h[u].fn.call(h[u].context,e,i,r);break;default:if(!c)for(d=1,c=new Array(l-1);d<l;d++)c[d-1]=arguments[d];h[u].fn.apply(h[u].context,c)}}return!0},a.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,i,r){var o=n?n+t:t;if(!this.t[o])return this;if(!e)return s(this,o),this;var a=this.t[o];if(a.fn)a.fn!==e||r&&!a.once||i&&a.context!==i||s(this,o);else{for(var c=0,u=[],h=a.length;c<h;c++)(a[c].fn!==e||r&&!a[c].once||i&&a[c].context!==i)&&u.push(a[c]);u.length?this.t[o]=1===u.length?u[0]:u:s(this,o)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this.t[e]&&s(this,e)):(this.t=new i,this.i=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a}(q)),q.exports));class z extends Error{constructor(t){super("Socket error"),e(this,"event"),e(this,"code","E_NETWORK"),this.event=t}}class _ extends Error{constructor(t,n){super(t),e(this,"reason"),e(this,"underlyingError"),e(this,"code","E_MESSAGE"),this.reason=t,this.underlyingError=n}}const F=globalThis||window;var K,Q;(Q=K||(K={})).binary="binary",Q.text="text",Q.json="json";class J extends B{constructor(t){if(super(),e(this,"url"),e(this,"active",!1),e(this,"socket"),e(this,"timer"),e(this,"reconnectTimer"),e(this,"encoding"),e(this,"WebSocket"),!t.service)throw new Error("Options must include a service url");if(!t.channel)throw new Error("Options must include a channel name");const n=t.service.replace(/^http/,"ws").replace(/\/$/,"");this.url=`${n}/${t.channel}?v=2`,this.encoding=t.encoding||K.text,this.WebSocket=t.WebSocket||F.WebSocket,!1!==t.autoConnect&&this.connect()}connect(){if(this.active)return;this.active=!0;let t,e=0;const n=()=>{const i=new this.WebSocket(this.url);i.onmessage=t=>{if("undefined"!=typeof Blob&&t.data instanceof Blob){const e=new FileReader;e.onload=()=>{this.handleMessage(new Uint8Array(e.result))},e.onerror=()=>{this.emit("error",new _("Could not read message"))},e.readAsArrayBuffer(t.data)}else if("string"==typeof t.data)this.handleMessage((new TextEncoder).encode(t.data));else if(void 0!==F.Buffer&&(t.data instanceof F.Buffer||Array.isArray(t.data))){let e=t.data;F.Buffer.isBuffer(e)||(e=F.Buffer.concat(e)),this.handleMessage(new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}else t.data instanceof Uint8Array?this.handleMessage(t.data):t.data instanceof ArrayBuffer?this.handleMessage(new Uint8Array(t.data)):this.emit("error",new _("Unhandled event data type"))},i.onerror=t=>{this.socket===i&&this.active&&this.emit("error",new z(t))},i.onopen=()=>{e=0,this.emit("connect")},i.onclose=()=>{var i;this.active&&(clearTimeout(this.timer),this.timer=setTimeout(n,(i=e++,Math.min(Math.pow(7*i,2),5e3)))),this.socket=void 0,clearTimeout(t),this.reconnectTimer&&clearInterval(this.reconnectTimer),this.emit("disconnect")},this.setupReconnectionTimer();const r=i;"function"==typeof r.on&&"function"==typeof r.terminate&&r.on("ping",()=>{clearTimeout(t),t=setTimeout(()=>{r.terminate()},15e3)}),this.socket=i};n()}disconnect(){this.active=!1,!this.socket||this.socket.readyState!==this.WebSocket.OPEN&&this.socket.readyState!==this.WebSocket.CONNECTING||this.socket.close(1e3)}get isConnected(){return this.active&&this.socket?.readyState==this.WebSocket.OPEN}handleMessage(t){let e;switch(66===t[0]&&66===t[1]&&1===t[2]&&(this.socket?.send(new Uint8Array([66,66,2,t[3]])),t=t.subarray(4)),this.encoding){case K.binary:e=t;break;case K.text:e=(new TextDecoder).decode(t);break;case K.json:try{e=JSON.parse((new TextDecoder).decode(t))}catch(n){return void this.emit("error",new _("Unable to decode JSON",n))}}this.emit("message",e)}setupReconnectionTimer(){this.reconnectTimer=setInterval(()=>{this.socket?.close(1e3)},6e5)}}const V=globalThis||window;var G,Y;function W(t,e,n,i){var r,o=arguments.length,s=o<3?e:i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}(Y=G||(G={})).buffered="buffered",Y.delivered="delivered";let H=class extends c{};function Z(t,e,n,i){var r,o=arguments.length,s=o<3?e:i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}W([c.field("public_key")],H.prototype,"from",void 0),W([c.field("uint64")],H.prototype,"nonce",void 0),W([c.field("bytes")],H.prototype,"ciphertext",void 0),W([c.field("uint32")],H.prototype,"checksum",void 0),H=W([c.type("sealed_message")],H),"function"==typeof SuppressedError&&SuppressedError;let X=class extends c{};Z([c.field("name")],X.prototype,"session_name",void 0),Z([c.field("public_key")],X.prototype,"request_key",void 0),Z([c.field("string",{extension:!0})],X.prototype,"user_agent",void 0),X=Z([c.type("link_create")],X);let $=class extends c{};Z([c.field("time_point_sec")],$.prototype,"expiration",void 0),$=Z([c.type("link_info")],$);let tt=class extends c{};Z([c.field("public_key")],tt.prototype,"from",void 0),Z([c.field("uint64")],tt.prototype,"nonce",void 0),Z([c.field("bytes")],tt.prototype,"ciphertext",void 0),Z([c.field("uint32")],tt.prototype,"checksum",void 0),tt=Z([c.type("buoy_message")],tt);let et=class extends c{};Z([c.field("name")],et.prototype,"session_name",void 0),Z([c.field("public_key")],et.prototype,"request_key",void 0),Z([c.field("string",{extension:!0})],et.prototype,"user_agent",void 0),et=Z([c.type("buoy_session")],et);let nt=class extends c{};async function it(t,e,n){const i=await(r={...t,WebSocket:e||WebSocket},new Promise((t,e)=>{const n=new J({...r,autoConnect:!0});let i,o;const s=(r,o)=>{clearTimeout(i),r?e(r):t(o),n.disconnect()};r.timeout&&(i=setTimeout(()=>{s(new _("Timed out",o))},r.timeout)),n.on("error",t=>{t instanceof z?o=t:s(t)}),n.once("message",t=>{s(void 0,t)})}));var r;if(!i)throw new Error(i.rejected);if("string"==typeof i.rejected)throw new Error(i.rejected);const o=JSON.parse(i);if(void 0===o.sa||void 0===o.sp||void 0===o.cid)throw new Error(n("error.cancelled",{default:"The request was cancelled from Anchor."}));return o}function rt(){let t,e="";const n="0123456789abcdef";for(t=0;t<36;t+=1)switch(t){case 8:case 13:case 18:case 23:e+="-";break;case 14:e+="4";break;case 19:e+=n[4*Math.random()|8];break;default:e+=n[16*Math.random()|0]}return e}function ot(){if(!st()||!dt()){if(at())return"googlechrome://";if(ut())return"firefox:://";if(st()&&ht())return"brave://";if(st()){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let e=window.location.href.split("#")[0]+"#";for(let n=0;n<8;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}return lt()&&/Firefox/i.test(navigator.userAgent)?"android-app://org.mozilla.firefox":lt()&&/Edg/.test(navigator.userAgent)?"android-app://com.microsoft.emmx":lt()&&(/OPR/.test(navigator.userAgent)||/Opera/.test(navigator.userAgent))?"android-app://com.opera.browser":lt()&&ht()?"android-app://com.brave.browser":lt()&&ft()?"android-app://webview":lt()&&ct()?"android-app://com.android.chrome":window.location.href}}function st(){return/iP(ad|od|hone)/i.test(navigator.userAgent)}function at(){return/CriOS/.test(navigator.userAgent)}function ct(){return/Chrome\/[.0-9]* Mobile/i.test(navigator.userAgent)}function ut(){return/FxiOS/.test(navigator.userAgent)}function ht(){return navigator.brave&&"function"==typeof navigator.brave.isBrave}function lt(){return/Android/.test(navigator.userAgent)}function dt(){return!!window.ReactNativeWebView}function ft(){return/wv/.test(navigator.userAgent)||/Android/.test(navigator.userAgent)&&dt()}function pt(){let t="@wharfkit/protocol-esr 1.5.0";return"undefined"!=typeof navigator&&(t+=" "+navigator.userAgent),t}function wt(t){const{service:e,channel:n}=t;return{url:`${e}/${n}`,background:!0}}function yt(t){return{service:t,channel:rt()}}function mt(t){const e=[];let n=0,i=t.sig;for(;i;)e.push(String(i)),i=t[`sig${n}`],n++;return[...new Set(e)].map(t=>d.from(t))}Z([c.field("time_point_sec")],nt.prototype,"expiration",void 0),nt=Z([c.type("buoy_info")],nt);var gt={en:{login:{title:"Connect with Anchor",body:"Scan with Anchor on your mobile device or click the button below to open on this device.",link:"Launch Anchor"},transact:{title:"Complete using Anchor",body:'Please open your Anchor Wallet on "{{channelName}}" to review and approve this transaction.',label:"Sign manually or with another device",link:"Trigger Manually",await:"Waiting for response from Anchor"},error:{expired:"The request expired, please try again.",invalid_response:"Invalid response from Anchor, must contain link_ch, link_key, link_name and cid flags.",not_completed:"The request was not completed.",cancelled:"The request was cancelled from Anchor."}},ko:{},"zh-Hans":{login:{link:"\u542f\u52a8Anchor",body:"\u5728\u60a8\u7684\u8bbe\u5907\u4e0a\u4f7f\u7528Anchor\u626b\u63cf\u6216\u8005\u70b9\u51fb\u4e0b\u65b9\u6309\u94ae\u6253\u5f00\u3002",title:"\u8fde\u63a5Anchor"},error:{cancelled:"\u8bf7\u6c42\u5df2\u4eceAnchor\u53d6\u6d88\u3002",not_completed:"\u6b64\u8bf7\u6c42\u672a\u5b8c\u6210\u3002",invalid_response:"\u65e0\u6548\u7684Anchor\u54cd\u5e94\uff0c\u5fc5\u987b\u5305\u542blink_ch, link_key, link_name\u548ccid\u6807\u8bc6\u7b26\u3002",expired:"\u8bf7\u6c42\u5df2\u8fc7\u671f\uff0c\u8bf7\u91cd\u8bd5\u3002"},transact:{await:"\u7b49\u5f85Anchor\u54cd\u5e94",link:"\u624b\u52a8\u89e6\u53d1",label:"\u624b\u52a8\u6216\u4f7f\u7528\u5176\u4ed6\u8bbe\u5907\u7b7e\u7ea6",body:'\u8bf7\u5728"{{channelName}}"\u4e0a\u6253\u5f00\u60a8\u7684Anchor\u94b1\u5305\u4ee5\u6d4f\u89c8\u5e76\u6279\u51c6\u6b64\u4ea4\u6613\u3002',title:"\u5b8c\u6210\u4f7f\u7528Anchor"}},"zh-Hant":{}};class vt extends f{constructor(t){super(),this.id="anchor",this.translations=gt,this.config={requiresChainSelect:!1,requiresPermissionSelect:!1},this.metadata=p.from({name:"Anchor",description:"",logo:w.from({dark:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB3aWR0aD0iMTYwIiBoZWlnaHQ9IjE2MCIgdmlld0JveD0iMCAwIDI1NiAyNTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMS40NCwgMCwgMCwgMS40NCwgLTguNTAxOTI1LCAtNTcuMDc0NTcpIiBzdHlsZT0iIj4KICAgIDx0aXRsZT5XaGl0ZTwvdGl0bGU+CiAgICA8Y2lyY2xlIGN4PSI5NC43OTMiIGN5PSIxMjguNTI0IiByPSI4MCIgZmlsbD0iI0ZCRkRGRiIvPgogICAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0gOTQuNzk5IDc4LjUyNCBDIDk3LjA5OCA3OC41MjQgOTkuMTk1IDc5LjgzNyAxMDAuMTk4IDgxLjkwNiBMIDEyNC4yMDQgMTMxLjQwNiBMIDEyNC43NDYgMTMyLjUyNCBMIDExMS40MDkgMTMyLjUyNCBMIDEwNy41MyAxMjQuNTI0IEwgODIuMDY5IDEyNC41MjQgTCA3OC4xODkgMTMyLjUyNCBMIDY0Ljg1MyAxMzIuNTI0IEwgNjUuMzk1IDEzMS40MDYgTCA4OS40MDEgODEuOTA2IEMgOTAuNDA0IDc5LjgzNyA5Mi41MDEgNzguNTI0IDk0Ljc5OSA3OC41MjQgWiBNIDg2LjkxOSAxMTQuNTI0IEwgMTAyLjY4IDExNC41MjQgTCA5NC43OTkgOTguMjc0IEwgODYuOTE5IDExNC41MjQgWiBNIDExMi43OTMgMTQ5LjUyNCBMIDEyNC43OTggMTQ5LjUyNCBDIDEyNC40MzcgMTY1LjY3NiAxMTEuMDY3IDE3OC41MjQgOTQuNzk5IDE3OC41MjQgQyA3OC41MzIgMTc4LjUyNCA2NS4xNjIgMTY1LjY3NiA2NC44MDEgMTQ5LjUyNCBMIDc2LjgwNiAxNDkuNTI0IEMgNzcuMDg3IDE1Ni44NzggODEuOTc0IDE2My4xNTUgODguNzkzIDE2NS41MiBMIDg4Ljc5MyAxNDEuNTI0IEMgODguNzkzIDEzOC4yMSA5MS40OCAxMzUuNTI0IDk0Ljc5MyAxMzUuNTI0IEMgOTguMTA3IDEzNS41MjQgMTAwLjc5MyAxMzguMjEgMTAwLjc5MyAxNDEuNTI0IEwgMTAwLjc5MyAxNjUuNTI0IEMgMTA3LjYyIDE2My4xNjIgMTEyLjUxMSAxNTYuODgzIDExMi43OTMgMTQ5LjUyNCBaIiBmaWxsPSIjMzY1MEEyIi8+CiAgPC9nPgo8L3N2Zz4=",light:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYwIiBoZWlnaHQ9IjE2MCIgdmlld0JveD0iMCAwIDE2MCAxNjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxjaXJjbGUgY3g9IjgwIiBjeT0iODAiIHI9IjgwIiBmaWxsPSIjMzY1MEEyIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNODAuMDA2MyAzMEM4Mi4zMDUxIDMwIDg0LjQwMTkgMzEuMzEzNCA4NS40MDUgMzMuMzgxOEwxMDkuNDExIDgyLjg4MjJMMTA5Ljk1MyA4NEg5Ni42MTYzTDkyLjczNjYgNzZINjcuMjc1OUw2My4zOTYxIDg0SDUwLjA1OTRMNTAuNjAxNyA4Mi44ODE4TDc0LjYwNzcgMzMuMzgxOEM3NS42MTA4IDMxLjMxMzQgNzcuNzA3NSAzMCA4MC4wMDYzIDMwWk03Mi4xMjU2IDY2SDg3Ljg4N0w4MC4wMDYzIDQ5Ljc1MDFMNzIuMTI1NiA2NlpNOTcuOTk5NSAxMDFIMTEwLjAwNUMxMDkuNjQ0IDExNy4xNTIgOTYuMjczOCAxMzAgODAuMDA2MyAxMzBDNjMuNzM4OCAxMzAgNTAuMzY4NiAxMTcuMTUyIDUwLjAwNzggMTAxSDYyLjAxMzFDNjIuMjk0MSAxMDguMzU0IDY3LjE4MDQgMTE0LjYzMSA3NC4wMDAzIDExNi45OTZWOTNDNzQuMDAwMyA4OS42ODYzIDc2LjY4NjYgODcgODAuMDAwMyA4N0M4My4zMTQgODcgODYuMDAwMyA4OS42ODYzIDg2LjAwMDMgOTNWMTE3QzkyLjgyNjUgMTE0LjYzOCA5Ny43MTgzIDEwOC4zNTkgOTcuOTk5NSAxMDFaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K"}),homepage:"https://greymass.com/anchor",download:"https://greymass.com/anchor/download"}),this.buoyUrl=t?.buoyUrl||"https://cb.anchor.link",this.buoyWs=t?.buoyWs}login(t){return new Promise((e,n)=>{this.handleLogin(t).then(t=>{e(t)}).catch(t=>{n(t)})})}async handleLogin(t){if(!t.ui)throw new Error("No UI available");const e=t.ui.getTranslate(this.id),{callback:n,request:i,sameDeviceRequest:o,requestKey:s,privateKey:a}=await async function(t,e){const n=u.generate("K1"),i=n.toPublic(),r=et.from({session_name:t.appName,request_key:i,user_agent:pt()}),o=!(t.chain||1===t.chains.length),s=yt(e),a=o?null:t.chain?h.from(t.chain.id.array):null,c=o?t.chains.map(t=>h.from(t.id.array)):[],d=l.identity({callback:wt(s),scope:String(t.appName),chainId:a,chainIds:c,info:{link:r,scope:String(t.appName)}},t.esrOptions),f=d.clone();if("undefined"!=typeof window){const t=ot();f.setInfoKey("same_device",!0),void 0!==t&&f.setInfoKey("return_path",t)}return{callback:s,request:d,sameDeviceRequest:f,requestKey:i,privateKey:n}}(t,this.buoyUrl),c=[{type:"link",label:e("login.link",{default:"Launch Anchor"}),data:{href:o.encode(!0,!1,"esr:"),label:e("login.link",{default:"Launch Anchor"}),variant:"primary"}}];st()||at()||ct()||ut()||lt()||ft()||c.unshift({type:"qr",data:i.encode(!0,!1,"esr:")}),window.location.href=o.encode(!0,!1,"esr:");const d=t.ui?.prompt({title:e("login.title",{default:"Connect with Anchor"}),body:e("login.body",{default:"Scan with Anchor on your mobile device or click the button below to open on this device."}),elements:c});d.catch(()=>{});const f=await it(n,this.buoyWs,e);if(async function(t,e){if(!t.sig||0===t.sig.length)throw new Error("Invalid response, must have at least one signature");let n;if(!e.chain&&e.chains.length>1){if(!t.cid)throw new Error("Multi chain response payload must specify resolved chain id (cid)")}else if(n=e.chain||e.chains[0],t.cid&&String(n.id)!==t.cid)throw new Error("Got response for wrong chain id")}(f,t),!f.cid||!f.sa||!f.sp)throw new Error("Invalid callback response");if(f.link_ch&&f.link_key&&f.link_name){this.data.requestKey=s,this.data.privateKey=a,this.data.signerKey=f.link_key&&y.from(f.link_key),this.data.channelUrl=f.link_ch,this.data.channelName=f.link_name;try{if(f.link_meta){const t=JSON.parse(f.link_meta);this.data.sameDevice=t.sameDevice,this.data.launchUrl=t.launchUrl,this.data.triggerUrl=t.triggerUrl}}catch(w){}}const p=(await m.fromPayload(f,t.esrOptions)).getIdentityProof(f.sig);return{chain:r.from(f.cid),permissionLevel:g.from({actor:f.sa,permission:f.sp}),identityProof:p}}sign(t,e){return this.handleSigningRequest(t,e)}async handleSigningRequest(t,e){if(!e.ui)throw new Error("No UI available");const n=e.ui.getTranslate(this.id),c=t.transaction.expiration.toDate(),h=new Date,l=Math.floor(c.getTime()-h.getTime()),d=await e.createRequest({transaction:t.transaction});d.setInfoKey("link",$.from({expiration:c}));const f=function(t,e){const n=yt(e);return t.setCallback(`${n.service}/${n.channel}`,!0),n}(d,this.buoyUrl),p=d.encode(!0,!1),w=!1!==this.data.sameDevice,g=d.clone(),v=ot();g.setInfoKey("same_device",!0),v&&g.setInfoKey("return_path",v),this.data.sameDevice&&(this.data.launchUrl?window.location.href=this.data.launchUrl:st()&&(window.location.href="anchor://link"));const b=e.ui.prompt({title:n("transact.title",{default:"Complete using Anchor"}),body:n("transact.body",{channelName:this.data.channelName,default:`Please open your Anchor Wallet on "${this.data.channelName}" to review and approve this transaction.`}),elements:[{type:"countdown",data:{label:n("transact.await",{default:"Waiting for response from Anchor"}),end:c.toISOString()}},{type:"button",label:n("transact.label",{default:"Sign manually or with another device"}),data:{onClick:w?()=>window.location.href=g.encode():()=>{e.ui?.prompt({title:n("transact.sign_manually.title",{default:"Sign manually"}),body:n("transact.sign_manually.body",{default:"Scan the QR-code with Anchor on another device or use the button to open it here."}),elements:[{type:"qr",data:String(p)},{type:"link",label:n("transact.sign_manually.link.title",{default:"Open Anchor"}),data:{href:String(g),label:n("transact.sign_manually.link.title",{default:"Open Anchor"})}}]})},label:n("transact.label",{default:"Sign manually or with another device"})}}]}),A=setTimeout(()=>{if(!e.ui)throw new Error("No UI available");b.cancel(n("error.expired",{default:"The request expired, please try again."}))},l);b.catch(()=>clearTimeout(A));const E=it(f,this.buoyWs,n);if(this.data.channelUrl){const t=new URL(this.data.channelUrl).origin,e=new URL(this.data.channelUrl).pathname.substring(1),n=await async function(t,e,n){return async function(t,e,n,c){c||(c=i.random());const u=e.sharedSecret(n),h=function(t,e){return o.hash(s.encode({object:t}).appending(e.array))}(c,u),l=await async function(t,e){const n=o.hash(s.encode({object:e}).appending(t.array));return await crypto.subtle.importKey("raw",n.array.slice(0,32),{name:"AES-CBC"},!1,["encrypt","decrypt"])}(u,c),d=await async function(t,e,n){return a.from(await crypto.subtle.encrypt({name:"AES-CBC",iv:t.array.slice(32,48)},e,a.from(n,"utf8").array))}(h,l,t),f=new DataView(r.hash(h.array).array.buffer).getUint32(0,!0);return new H({from:e.toPublic(),nonce:c,ciphertext:d,checksum:f})}(t,e,n,void 0)}((this.data.sameDevice?g:d).encode(!0,!1,"esr:"),u.from(this.data.privateKey),y.from(this.data.signerKey));!async function(t,e){const n=e.fetch||V.fetch,i=`${e.service.replace(/^ws/,"http").replace(/\/$/,"")}/${e.channel}`,r={};if(e.requireDelivery){if(!e.timeout)throw new Error("requireDelivery can only be used with timeout");r["X-Buoy-Wait"]=`${Math.ceil(e.timeout/1e3)}`}else e.timeout&&(r["X-Buoy-Soft-Wait"]=`${Math.ceil(e.timeout/1e3)}`);let o;o="string"==typeof t||t instanceof Uint8Array?t:JSON.stringify(t);const s=await n(i,{method:"POST",body:o,headers:r});if(2!==Math.floor(s.status/100))throw 408===s.status?new Error("Unable to deliver message"):410===s.status?new Error("Request cancelled"):new Error(`Unexpected status code ${s.status}`);s.headers.get("X-Buoy-Delivery")||G.buffered}(s.encode({object:n}).array,{service:t,channel:e})}else window.location.href=g.encode();const I=await Promise.race([E,b]).finally(()=>{clearTimeout(A)});if("tx"in I&&mt(I).length>0){const t=await m.fromPayload(I,e.esrOptions);return{signatures:mt(I),resolved:t}}const S=n("error.not_completed",{default:"The request was not completed."});throw b.cancel(S),new Error(S)}}const bt=[];for(let $h=0;$h<256;++$h)bt.push(($h+256).toString(16).slice(1));let At;const Et=new Uint8Array(16),It={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function St(t,e,n){if(It.randomUUID&&!e&&!t)return It.randomUUID();const i=(t=t||{}).random??t.rng?.()??function(){if(!At){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");At=crypto.getRandomValues.bind(crypto)}return At(Et)}();if(i.length<16)throw new Error("Random bytes length must be >= 16");if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){if((n=n||0)<0||n+16>e.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let t=0;t<16;++t)e[n+t]=i[t];return e}return function(t,e=0){return(bt[t[e+0]]+bt[t[e+1]]+bt[t[e+2]]+bt[t[e+3]]+"-"+bt[t[e+4]]+bt[t[e+5]]+"-"+bt[t[e+6]]+bt[t[e+7]]+"-"+bt[t[e+8]]+bt[t[e+9]]+"-"+bt[t[e+10]]+bt[t[e+11]]+bt[t[e+12]]+bt[t[e+13]]+bt[t[e+14]]+bt[t[e+15]]).toLowerCase()}(i)}const Tt="x-amz-user-agent";var Nt,Ot;(Ot=Nt||(Nt={})).DEBUG="DEBUG",Ot.ERROR="ERROR",Ot.INFO="INFO",Ot.WARN="WARN",Ot.VERBOSE="VERBOSE",Ot.NONE="NONE";const kt={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};let Ct=class t{constructor(t,e=Nt.WARN){this.name=t,this.level=e,this.o=[]}u(t){return t<10?"0"+t:""+t}h(){const t=new Date;return[this.u(t.getMinutes()),this.u(t.getSeconds())].join(":")+"."+t.getMilliseconds()}configure(t){return t?(this.l=t,this.l):this.l}p(e,...n){let i=this.level;if(t.LOG_LEVEL&&(i=t.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(i=window.LOG_LEVEL),!(kt[e]>=kt[i]))return;let r=function(){}.bind();e===Nt.ERROR&&console.error&&(r=function(){}.bind()),e===Nt.WARN&&console.warn&&(r=function(){}.bind()),t.BIND_ALL_LOG_LEVELS&&(e===Nt.INFO&&console.info&&(r=function(){}.bind()),e===Nt.DEBUG&&console.debug&&(r=function(){}.bind()));const o=`[${e}] ${this.h()} ${this.name}`;let s="";if(1===n.length&&"string"==typeof n[0])s=`${o} - ${n[0]}`,r(s);else if(1===n.length)s=`${o} ${n[0]}`,r(o,n[0]);else if("string"==typeof n[0]){let t=n.slice(1);1===t.length&&(t=t[0]),s=`${o} - ${n[0]} ${t}`,r(`${o} - ${n[0]}`,t)}else s=`${o} ${n}`,r(o,n);for(const t of this.o){const e={message:s,timestamp:Date.now()};t.pushLogs([e])}}log(...t){this.p(Nt.INFO,...t)}info(...t){this.p(Nt.INFO,...t)}warn(...t){this.p(Nt.WARN,...t)}error(...t){this.p(Nt.ERROR,...t)}debug(...t){this.p(Nt.DEBUG,...t)}verbose(...t){this.p(Nt.VERBOSE,...t)}addPluggable(t){t&&"Logging"===t.getCategoryName()&&(this.o.push(t),t.configure(this.l))}listPluggables(){return this.o}};Ct.LOG_LEVEL=null,Ct.BIND_ALL_LOG_LEVELS=!1;let Mt=class t extends Error{constructor({message:e,name:n,recoverySuggestion:i,underlyingError:r,metadata:o}){if(super(e),this.name=n,this.underlyingError=r,this.recoverySuggestion=i,o){const{extendedRequestId:t,httpStatusCode:e,requestId:n}=o;this.metadata={extendedRequestId:t,httpStatusCode:e,requestId:n}}this.constructor=t,Object.setPrototypeOf(this,t.prototype)}};var xt,Dt;(Dt=xt||(xt={})).NoEndpointId="NoEndpointId",Dt.PlatformNotSupported="PlatformNotSupported",Dt.Unknown="Unknown",Dt.NetworkError="NetworkError";const Rt="undefined"!=typeof Symbol?Symbol("amplify_default"):"@@amplify_default",Pt=new Ct("Hub"),jt=new class{constructor(t){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=t}m(t,e){const n=this.listeners.get(t);n?this.listeners.set(t,[...n.filter(({callback:t})=>t!==e)]):Pt.warn(`No listeners for ${t}`)}dispatch(t,e,n,i){"string"==typeof t&&this.protectedChannels.indexOf(t)>-1&&(i===Rt||Pt.warn(`WARNING: ${t} is protected and dispatching on it can have unintended consequences`));const r={channel:t,payload:{...e},source:n,patternInfo:[]};try{this.v(r)}catch(o){Pt.error(o)}}listen(t,e,n="noname"){let i;if("function"!=typeof e)throw new Mt({name:"NoHubcallbackProvidedException",message:"No callback supplied to Hub"});i=e;let r=this.listeners.get(t);return r||(r=[],this.listeners.set(t,r)),r.push({name:n,callback:i}),()=>{this.m(t,i)}}v(t){const{channel:e,payload:n}=t,i=this.listeners.get(e);i&&i.forEach(i=>{Pt.debug(`Dispatching to ${e} with `,n);try{i.callback(t)}catch(r){Pt.error(r)}})}}("__default__"),Ut=t=>t&&t.nonRetryable,Lt=new Ct("retryUtil"),qt=t=>{const e=Reflect.ownKeys(t);for(const n of e){const e=t[n];(e&&"object"==typeof e||"function"==typeof e)&&qt(e)}return Object.freeze(t)},Bt=new Ct("parseAWSExports"),zt={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},_t=t=>t?.split(",")??[],Ft=({domain:t,scope:e,redirectSignIn:n,redirectSignOut:i,responseType:r})=>({domain:t,scopes:e,redirectSignIn:_t(n),redirectSignOut:_t(i),responseType:r}),Kt=t=>t.map(t=>{const e=t.toLowerCase();return e.charAt(0).toUpperCase()+e.slice(1)}),Qt=Symbol("oauth-listener");const Jt={AMAZON_COGNITO_USER_POOLS:"userPool",API_KEY:"apiKey",AWS_IAM:"iam",AWS_LAMBDA:"lambda",OPENID_CONNECT:"oidc"};function Vt(t){return Jt[t]}const Gt={GOOGLE:"Google",LOGIN_WITH_AMAZON:"Amazon",FACEBOOK:"Facebook",SIGN_IN_WITH_APPLE:"Apple"};function Yt(t=[]){return t.reduce((t,e)=>(void 0!==Gt[e]&&t.push(Gt[e]),t),[])}function Wt(t){const e={};return t.forEach(({name:t,bucket_name:n,aws_region:i,paths:r})=>{if(t in e)throw new Error(`Duplicate friendly name found: ${t}. Name must be unique.`);const o=r?Object.entries(r).reduce((t,[e,n])=>(void 0!==n&&(t[e]=n),t),{}):void 0;e[t]={bucketName:n,region:i,paths:o}}),e}const Ht=t=>Object.keys(t).some(t=>t.startsWith("aws_"))?((t={})=>{if(!{}.hasOwnProperty.call(t,"aws_project_region"))throw new Mt({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});const{aws_appsync_apiKey:e,aws_appsync_authenticationType:n,aws_appsync_graphqlEndpoint:i,aws_appsync_region:r,aws_bots_config:o,aws_cognito_identity_pool_id:s,aws_cognito_sign_up_verification_method:a,aws_cognito_mfa_configuration:c,aws_cognito_mfa_types:u,aws_cognito_password_protection_settings:h,aws_cognito_verification_mechanisms:l,aws_cognito_signup_attributes:d,aws_cognito_social_providers:f,aws_cognito_username_attributes:p,aws_mandatory_sign_in:w,aws_mobile_analytics_app_id:y,aws_mobile_analytics_app_region:m,aws_user_files_s3_bucket:g,aws_user_files_s3_bucket_region:v,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:b,aws_user_pools_id:A,aws_user_pools_web_client_id:E,geo:I,oauth:S,predictions:T,aws_cloud_logic_custom:N,Notifications:O,modelIntrospection:k}=t,C={};y&&(C.Analytics={Pinpoint:{appId:y,region:m}});const{InAppMessaging:M,Push:x}=O??{};if(M?.AWSPinpoint||x?.AWSPinpoint){if(M?.AWSPinpoint){const{appId:t,region:e}=M.AWSPinpoint;C.Notifications={InAppMessaging:{Pinpoint:{appId:t,region:e}}}}if(x?.AWSPinpoint){const{appId:t,region:e}=x.AWSPinpoint;C.Notifications={...C.Notifications,PushNotification:{Pinpoint:{appId:t,region:e}}}}}if(Array.isArray(o)&&(C.Interactions={LexV1:Object.fromEntries(o.map(t=>[t.name,t]))}),i){const t=zt[n];t||Bt.debug(`Invalid authentication type ${n}. Falling back to IAM.`),C.API={GraphQL:{endpoint:i,apiKey:e,region:r,defaultAuthMode:t??"iam"}},k&&(C.API.GraphQL.modelIntrospection=k)}const D=c?{status:c&&c.toLowerCase(),totpEnabled:u?.includes("TOTP")??!1,smsEnabled:u?.includes("SMS")??!1}:void 0,R=h?{minLength:h.passwordPolicyMinLength,requireLowercase:h.passwordPolicyCharacters?.includes("REQUIRES_LOWERCASE")??!1,requireUppercase:h.passwordPolicyCharacters?.includes("REQUIRES_UPPERCASE")??!1,requireNumbers:h.passwordPolicyCharacters?.includes("REQUIRES_NUMBERS")??!1,requireSpecialCharacters:h.passwordPolicyCharacters?.includes("REQUIRES_SYMBOLS")??!1}:void 0,P=Array.from(new Set([...l??[],...d??[]])).reduce((t,e)=>({...t,[e.toLowerCase()]:{required:!0}}),{}),j=p?.includes("EMAIL")??!1,U=p?.includes("PHONE_NUMBER")??!1;(s||A)&&(C.Auth={Cognito:{identityPoolId:s,allowGuestAccess:"enable"!==w,signUpVerificationMethod:a,userAttributes:P,userPoolClientId:E,userPoolId:A,mfa:D,passwordFormat:R,loginWith:{username:!(j||U),email:j,phone:U}}});const L=!!S&&Object.keys(S).length>0,q=!!f&&f.length>0;if(C.Auth&&L&&(C.Auth.Cognito.loginWith={...C.Auth.Cognito.loginWith,oauth:{...Ft(S),...q&&{providers:Kt(f)}}}),g&&(C.Storage={S3:{bucket:g,region:v,dangerouslyConnectToHttpEndpointForTesting:b}}),I){const{amazon_location_service:t}=I;C.Geo={LocationService:{maps:t.maps,geofenceCollections:t.geofenceCollections,searchIndices:t.search_indices,region:t.region}}}if(N&&(C.API={...C.API,REST:N.reduce((t,e)=>{const{name:n,endpoint:i,region:r,service:o}=e;return{...t,[n]:{endpoint:i,...o?{service:o}:void 0,...r?{region:r}:void 0}}},{})}),T){const{VoiceId:t}=T?.convert?.speechGenerator?.defaults??{};C.Predictions=t?{...T,convert:{...T.convert,speechGenerator:{...T.convert.speechGenerator,defaults:{voiceId:t}}}}:T}return C})(t):function(t){const{version:e}=t;return!!e&&e.startsWith("1")}(t)?function(t){const e={};if(t.storage&&(e.Storage=function(t){if(!t)return;const{bucket_name:e,aws_region:n,buckets:i}=t;return{S3:{bucket:e,region:n,buckets:i&&Wt(i)}}}(t.storage)),t.auth&&(e.Auth=function(t){if(!t)return;const{user_pool_id:e,user_pool_client_id:n,identity_pool_id:i,password_policy:r,mfa_configuration:o,mfa_methods:s,unauthenticated_identities_enabled:a,oauth:c,username_attributes:u,standard_required_attributes:h,groups:l}=t,d={Cognito:{userPoolId:e,userPoolClientId:n,groups:l}};return i&&(d.Cognito={...d.Cognito,identityPoolId:i}),r&&(d.Cognito.passwordFormat={requireLowercase:r.require_lowercase,requireNumbers:r.require_numbers,requireUppercase:r.require_uppercase,requireSpecialCharacters:r.require_symbols,minLength:r.min_length??6}),o&&(d.Cognito.mfa={status:(f=o,"OPTIONAL"===f?"optional":"REQUIRED"===f?"on":"off"),smsEnabled:s?.includes("SMS"),totpEnabled:s?.includes("TOTP")}),a&&(d.Cognito.allowGuestAccess=a),c&&(d.Cognito.loginWith={oauth:{domain:c.domain,redirectSignIn:c.redirect_sign_in_uri,redirectSignOut:c.redirect_sign_out_uri,responseType:"token"===c.response_type?"token":"code",scopes:c.scopes,providers:Yt(c.identity_providers)}}),u&&(d.Cognito.loginWith={...d.Cognito.loginWith,email:u.includes("email"),phone:u.includes("phone_number"),username:u.includes("username")}),h&&(d.Cognito.userAttributes=h.reduce((t,e)=>({...t,[e]:{required:!0}}),{})),d;var f}(t.auth)),t.analytics&&(e.Analytics=function(t){if(!t?.amazon_pinpoint)return;const{amazon_pinpoint:e}=t;return{Pinpoint:{appId:e.app_id,region:e.aws_region}}}(t.analytics)),t.geo&&(e.Geo=function(t){if(!t)return;const{aws_region:e,geofence_collections:n,maps:i,search_indices:r}=t;return{LocationService:{region:e,searchIndices:r,geofenceCollections:n,maps:i}}}(t.geo)),t.data&&(e.API=function(t){if(!t)return;const{aws_region:e,default_authorization_type:n,url:i,api_key:r,model_introspection:o}=t;return{GraphQL:{endpoint:i,defaultAuthMode:Vt(n),region:e,apiKey:r,modelIntrospection:o}}}(t.data)),t.custom){const n=function(t){if(!t?.events)return;const{url:e,aws_region:n,api_key:i,default_authorization_type:r}=t.events;return{Events:{endpoint:e,defaultAuthMode:Vt(r),region:n,apiKey:i}}}(t.custom);n&&"Events"in n&&(e.API={...e.API,...n})}return t.notifications&&(e.Notifications=function(t){if(!t)return;const{aws_region:e,channels:n,amazon_pinpoint_app_id:i}=t,r=n.includes("IN_APP_MESSAGING"),o=n.includes("APNS")||n.includes("FCM");if(!r&&!o)return;const s={};return r&&(s.InAppMessaging={Pinpoint:{appId:i,region:e}}),o&&(s.PushNotification={Pinpoint:{appId:i,region:e}}),s}(t.notifications)),e}(t):t;var Zt=64,Xt=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),$t=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],te=Math.pow(2,53)-1,ee=function(){function t(){this.state=Int32Array.from($t),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return t.prototype.update=function(t){if(this.finished)throw new Error("Attempted to update an already finished hash.");var e=0,n=t.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>te)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=t[e++],n--,this.bufferLength===Zt&&(this.hashBuffer(),this.bufferLength=0)},t.prototype.digest=function(){if(!this.finished){var t=8*this.bytesHashed,e=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(e.setUint8(this.bufferLength++,128),n%Zt>=56){for(var i=this.bufferLength;i<Zt;i++)e.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(i=this.bufferLength;i<56;i++)e.setUint8(i,0);e.setUint32(56,Math.floor(t/4294967296),!0),e.setUint32(60,t),this.hashBuffer(),this.finished=!0}var r=new Uint8Array(32);for(i=0;i<8;i++)r[4*i]=this.state[i]>>>24&255,r[4*i+1]=this.state[i]>>>16&255,r[4*i+2]=this.state[i]>>>8&255,r[4*i+3]=this.state[i]>>>0&255;return r},t.prototype.hashBuffer=function(){for(var t=this.buffer,e=this.state,n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],u=e[7],h=0;h<Zt;h++){if(h<16)this.temp[h]=(255&t[4*h])<<24|(255&t[4*h+1])<<16|(255&t[4*h+2])<<8|255&t[4*h+3];else{var l=this.temp[h-2],d=(l>>>17|l<<15)^(l>>>19|l<<13)^l>>>10,f=((l=this.temp[h-15])>>>7|l<<25)^(l>>>18|l<<14)^l>>>3;this.temp[h]=(d+this.temp[h-7]|0)+(f+this.temp[h-16]|0)}var p=(((s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7))+(s&a^~s&c)|0)+(u+(Xt[h]+this.temp[h]|0)|0)|0,w=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&i^n&r^i&r)|0;u=c,c=a,a=s,s=o+p|0,o=r,r=i,i=n,n=p+w|0}e[0]+=n,e[1]+=i,e[2]+=r,e[3]+=o,e[4]+=s,e[5]+=a,e[6]+=c,e[7]+=u},t}(),ne="undefined"!=typeof Buffer&&Buffer.from?function(t){return Buffer.from(t,"utf8")}:t=>(new TextEncoder).encode(t);function ie(t){return t instanceof Uint8Array?t:"string"==typeof t?ne(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}var re=function(){function t(t){this.secret=t,this.hash=new ee,this.reset()}return t.prototype.update=function(t){var e;if(("string"==typeof(e=t)?0!==e.length:0!==e.byteLength)&&!this.error)try{this.hash.update(ie(t))}catch(n){this.error=n}},t.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},t.prototype.digest=function(){return v(this,void 0,void 0,function(){return b(this,function(t){return[2,this.digestSync()]})})},t.prototype.reset=function(){if(this.hash=new ee,this.secret){this.outer=new ee;var t=function(t){var e=ie(t);if(e.byteLength>Zt){var n=new ee;n.update(e),e=n.digest()}var i=new Uint8Array(Zt);return i.set(e),i}(this.secret),e=new Uint8Array(Zt);e.set(t);for(var n=0;n<Zt;n++)t[n]^=54,e[n]^=92;for(this.hash.update(t),this.outer.update(e),n=0;n<t.byteLength;n++)t[n]=0}},t}();const oe={};for(let $h=0;$h<256;$h++){let t=$h.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),oe[$h]=t}var se,ae,ce,ue,he,le,de,fe,pe,we,ye,me,ge,ve,be,Ae,Ee,Ie,Se,Te,Ne,Oe,ke,Ce,Me,xe;(ae=se||(se={})).WebUnknown="0",ae.React="1",ae.NextJs="2",ae.Angular="3",ae.VueJs="4",ae.Nuxt="5",ae.Svelte="6",ae.ServerSideUnknown="100",ae.ReactSSR="101",ae.NextJsSSR="102",ae.AngularSSR="103",ae.VueJsSSR="104",ae.NuxtSSR="105",ae.SvelteSSR="106",ae.ReactNative="201",ae.Expo="202",(ue=ce||(ce={})).AI="ai",ue.API="api",ue.Auth="auth",ue.Analytics="analytics",ue.DataStore="datastore",ue.Geo="geo",ue.InAppMessaging="inappmessaging",ue.Interactions="interactions",ue.Predictions="predictions",ue.PubSub="pubsub",ue.PushNotification="pushnotification",ue.Storage="storage",(le=he||(he={})).CreateConversation="1",le.GetConversation="2",le.ListConversations="3",le.DeleteConversation="4",le.SendMessage="5",le.ListMessages="6",le.OnMessage="7",le.Generation="8",le.UpdateConversation="9",(fe=de||(de={})).Record="1",fe.IdentifyUser="2",(we=pe||(pe={})).GraphQl="1",we.Get="2",we.Post="3",we.Put="4",we.Patch="5",we.Del="6",we.Head="7",(me=ye||(ye={})).SignUp="1",me.ConfirmSignUp="2",me.ResendSignUpCode="3",me.SignIn="4",me.FetchMFAPreference="6",me.UpdateMFAPreference="7",me.SetUpTOTP="10",me.VerifyTOTPSetup="11",me.ConfirmSignIn="12",me.DeleteUserAttributes="15",me.DeleteUser="16",me.UpdateUserAttributes="17",me.FetchUserAttributes="18",me.ConfirmUserAttribute="22",me.SignOut="26",me.UpdatePassword="27",me.ResetPassword="28",me.ConfirmResetPassword="29",me.FederatedSignIn="30",me.RememberDevice="32",me.ForgetDevice="33",me.FetchDevices="34",me.SendUserAttributeVerificationCode="35",me.SignInWithRedirect="36",me.StartWebAuthnRegistration="37",me.CompleteWebAuthnRegistration="38",me.ListWebAuthnCredentials="39",me.DeleteWebAuthnCredential="40",(ve=ge||(ge={})).Subscribe="1",ve.GraphQl="2",(Ae=be||(be={})).SearchByText="0",Ae.SearchByCoordinates="1",Ae.SearchForSuggestions="2",Ae.SearchByPlaceId="3",Ae.SaveGeofences="4",Ae.GetGeofence="5",Ae.ListGeofences="6",Ae.DeleteGeofences="7",(Ie=Ee||(Ee={})).SyncMessages="1",Ie.IdentifyUser="2",Ie.NotifyMessageInteraction="3",(Se||(Se={})).None="0",(Ne=Te||(Te={})).Convert="1",Ne.Identify="2",Ne.Interpret="3",(Oe||(Oe={})).Subscribe="1",(Ce=ke||(ke={})).InitializePushNotifications="1",Ce.IdentifyUser="2",(xe=Me||(Me={})).UploadData="1",xe.DownloadData="2",xe.List="3",xe.Copy="4",xe.Remove="5",xe.GetProperties="6",xe.GetUrl="7",xe.GetDataAccess="8",xe.ListCallerAccessGrants="9";const De=()=>"undefined"!=typeof globalThis,Re=()=>"undefined"!=typeof window,Pe=()=>"undefined"!=typeof document,je=()=>"undefined"!=typeof process,Ue=(t,e)=>!!Object.keys(t).find(t=>t.startsWith(e));var Le={},qe={},Be={};const ze=[{platform:se.Expo,detectionMethod:function(){return De()&&void 0!==globalThis.expo}},{platform:se.ReactNative,detectionMethod:function(){return"undefined"!=typeof navigator&&void 0!==navigator.product&&"ReactNative"===navigator.product}},{platform:se.NextJs,detectionMethod:function(){return Re()&&window.next&&"object"==typeof window.next}},{platform:se.Nuxt,detectionMethod:function(){return Re()&&(void 0!==window.__NUXT__||void 0!==window.$nuxt)}},{platform:se.Angular,detectionMethod:function(){const t=Boolean(Pe()&&document.querySelector("[ng-version]")),e=Boolean(Re()&&void 0!==window.ng);return t||e}},{platform:se.React,detectionMethod:function(){const t=t=>t.startsWith("_react")||t.startsWith("__react");return Pe()&&Array.from(document.querySelectorAll("[id]")).some(e=>Object.keys(e).find(t))}},{platform:se.VueJs,detectionMethod:function(){return Re()&&Ue(window,"__VUE")}},{platform:se.Svelte,detectionMethod:function(){return Re()&&Ue(window,"__SVELTE")}},{platform:se.WebUnknown,detectionMethod:function(){return Re()}},{platform:se.NextJsSSR,detectionMethod:function(){return De()&&(Ue(globalThis,"__next")||Ue(globalThis,"__NEXT"))}},{platform:se.NuxtSSR,detectionMethod:function(){return De()&&void 0!==globalThis.__NUXT_PATHS__}},{platform:se.ReactSSR,detectionMethod:function(){return je()&&!!Object.keys(Le).find(t=>t.includes("react"))}},{platform:se.VueJsSSR,detectionMethod:function(){return De()&&Ue(globalThis,"__VUE")}},{platform:se.AngularSSR,detectionMethod:function(){return je()&&"object"==typeof Be&&Be.npm_lifecycle_script?.startsWith("ng ")||!1}},{platform:se.SvelteSSR,detectionMethod:function(){return je()&&!!Object.keys(qe).find(t=>t.includes("svelte"))}}];let _e;const Fe=[];let Ke=!1;const Qe=()=>{if(!_e){if(_e=ze.find(t=>t.detectionMethod())?.platform||se.ServerSideUnknown,Ke)for(;Fe.length;)Fe.pop()?.();else Fe.forEach(t=>{t()});Je(se.ServerSideUnknown,10),Je(se.WebUnknown,10)}return _e};function Je(t,e){_e!==t||Ke||setTimeout(()=>{_e=void 0,Ke=!0,setTimeout(Qe,1e3)},e)}const Ve={},Ge=t=>(({category:t,action:e}={})=>{const n=[["aws-amplify","6.15.6".replace(/\+.*/,"")]];if(t&&n.push([t,e]),n.push(["framework",Qe()]),t&&e){const i=((t,e)=>Ve[t]?.[e]?.additionalDetails)(t,e);i&&i.forEach(t=>{n.push(t)})}return n})(t).map(([t,e])=>t&&e?`${t}/${e}`:t).join(" ");function Ye(t){return"function"==typeof t}var We,He=((We=function(t){var e;e=this,Error.call(e),e.stack=(new Error).stack,this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}).prototype=Object.create(Error.prototype),We.prototype.constructor=We,We);function Ze(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Xe=function(){function t(t){this.initialTeardown=t,this.closed=!1,this.A=null,this.I=null}var e;return t.prototype.unsubscribe=function(){var t,e,n,i,r;if(!this.closed){this.closed=!0;var o=this.A;if(o)if(this.A=null,Array.isArray(o))try{for(var s=A(o),a=s.next();!a.done;a=s.next())a.value.remove(this)}catch(f){t={error:f}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}else o.remove(this);var c=this.initialTeardown;if(Ye(c))try{c()}catch(p){r=p instanceof He?p.errors:[p]}var u=this.I;if(u){this.I=null;try{for(var h=A(u),l=h.next();!l.done;l=h.next()){var d=l.value;try{tn(d)}catch(w){r=null!=r?r:[],w instanceof He?r=E(E([],I(r)),I(w.errors)):r.push(w)}}}catch(y){n={error:y}}finally{try{l&&!l.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}}if(r)throw new He(r)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)tn(e);else{if(e instanceof t){if(e.closed||e.S(this))return;e.T(this)}(this.I=null!==(n=this.I)&&void 0!==n?n:[]).push(e)}},t.prototype.S=function(t){var e=this.A;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype.T=function(t){var e=this.A;this.A=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype.N=function(t){var e=this.A;e===t?this.A=null:Array.isArray(e)&&Ze(e,t)},t.prototype.remove=function(e){var n=this.I;n&&Ze(n,e),e instanceof t&&e.N(this)},t.EMPTY=((e=new t).closed=!0,e),t}();function $e(t){return t instanceof Xe||t&&"closed"in t&&Ye(t.remove)&&Ye(t.add)&&Ye(t.unsubscribe)}function tn(t){Ye(t)?t():t.unsubscribe()}Xe.EMPTY;function en(t){!function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];setTimeout.apply(void 0,E([t,e],I(n)))}(function(){throw t})}function nn(){}var rn=function(t){function e(e){var n=t.call(this)||this;return n.isStopped=!1,e?(n.destination=e,$e(e)&&e.add(n)):n.destination=cn,n}return S(e,t),e.create=function(t,e,n){return new sn(t,e,n)},e.prototype.next=function(t){this.isStopped||this.O(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this.k(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this.C())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype.O=function(t){this.destination.next(t)},e.prototype.k=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype.C=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Xe),on=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(n){an(n)}},t.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(n){an(n)}else an(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(e){an(e)}},t}(),sn=function(t){function e(e,n,i){var r,o=t.call(this)||this;return r=Ye(e)||!e?{next:null!=e?e:void 0,error:null!=n?n:void 0,complete:null!=i?i:void 0}:e,o.destination=new on(r),o}return S(e,t),e}(rn);function an(t){en(t)}var cn={closed:!0,next:nn,error:function(t){throw t},complete:nn},un="function"==typeof Symbol&&Symbol.observable||"@@observable";function hn(t){return t}var ln=function(){function t(t){t&&(this.M=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var i,r,o,s,a=this,c=(i=t)&&i instanceof rn||function(t){return t&&Ye(t.next)&&Ye(t.error)&&Ye(t.complete)}(i)&&$e(i)?t:new sn(t,e,n);return o=(r=a).operator,s=r.source,c.add(o?o.call(c,s):s?a.M(c):a.D(c)),c},t.prototype.D=function(t){try{return this.M(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=dn(e))(function(e,i){var r=new sn({next:function(e){try{t(e)}catch(n){i(n),r.unsubscribe()}},error:i,complete:e});n.subscribe(r)})},t.prototype.M=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[un]=function(){return this},t.prototype.pipe=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0===(t=e).length?hn:1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)})(this)},t.prototype.toPromise=function(t){var e=this;return new(t=dn(t))(function(t,n){var i;e.subscribe(function(t){return i=t},function(t){return n(t)},function(){return t(i)})})},t.create=function(e){return new t(e)},t}();function dn(t){var e;return null!==(e=null!=t?t:undefined)&&void 0!==e?e:Promise}function fn(t){return function(e){if(function(t){return Ye(null==t?void 0:t.lift)}(e))return e.lift(function(e){try{return t(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function pn(t,e,n,i,r){return new wn(t,e,n,i,r)}var wn=function(t){function e(e,n,i,r,o,s){var a=t.call(this,e)||this;return a.onFinalize=o,a.shouldUnsubscribe=s,a.O=n?function(t){try{n(t)}catch(i){e.error(i)}}:t.prototype.O,a.k=r?function(t){try{r(t)}catch(n){e.error(n)}finally{this.unsubscribe()}}:t.prototype.k,a.C=i?function(){try{i()}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype.C,a}return S(e,t),e.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;t.prototype.unsubscribe.call(this),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}},e}(rn),yn=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function mn(t){return Ye(null==t?void 0:t.then)}function gn(t){return Ye(t[un])}function vn(t){return Symbol.asyncIterator&&Ye(null==t?void 0:t[Symbol.asyncIterator])}function bn(t){return new TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var An="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function En(t){return Ye(null==t?void 0:t[An])}function In(t){return T(this,arguments,function(){var e,n,i;return b(this,function(r){switch(r.label){case 0:e=t.getReader(),r.label=1;case 1:r.trys.push([1,,9,10]),r.label=2;case 2:return[4,N(e.read())];case 3:return n=r.sent(),i=n.value,n.done?[4,N(void 0)]:[3,5];case 4:return[2,r.sent()];case 5:return[4,N(i)];case 6:return[4,r.sent()];case 7:return r.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function Sn(t){return Ye(null==t?void 0:t.getReader)}function Tn(t){if(t instanceof ln)return t;if(null!=t){if(gn(t))return r=t,new ln(function(t){var e=r[un]();if(Ye(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")});if(yn(t))return i=t,new ln(function(t){for(var e=0;e<i.length&&!t.closed;e++)t.next(i[e]);t.complete()});if(mn(t))return n=t,new ln(function(t){n.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,en)});if(vn(t))return Nn(t);if(En(t))return e=t,new ln(function(t){var n,i;try{for(var r=A(e),o=r.next();!o.done;o=r.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}t.complete()});if(Sn(t))return Nn(In(t))}var e,n,i,r;throw bn(t)}function Nn(t){return new ln(function(e){(function(t,e){var n,i,r,o;return v(this,void 0,void 0,function(){var s,a;return b(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=O(t),c.label=1;case 1:return[4,n.next()];case 2:if((i=c.sent()).done)return[3,4];if(s=i.value,e.next(s),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),r={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),i&&!i.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(r)throw r.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})})(t,e).catch(function(t){return e.error(t)})})}function On(t,e){return fn(function(n,i){var r=0;n.subscribe(pn(i,function(n){i.next(t.call(e,n,r++))}))})}function kn(t){return fn(function(e,n){var i,r=null,o=!1;r=e.subscribe(pn(n,void 0,void 0,function(s){i=Tn(t(s,kn(t)(e))),r?(r.unsubscribe(),r=null,i.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(n))})}class Cn{networkMonitor(t){const e=(()=>{if("undefined"==typeof self)return!1;const t=self;return void 0!==t.WorkerGlobalScope&&self instanceof t.WorkerGlobalScope})()?self:"undefined"!=typeof window&&window;return e?new ln(t=>{t.next({online:e.navigator.onLine});const n=()=>{t.next({online:!0})},i=()=>{t.next({online:!1})};return e.addEventListener("online",n),e.addEventListener("offline",i),Cn.R.push(t),()=>{e.removeEventListener("online",n),e.removeEventListener("offline",i),Cn.R=Cn.R.filter(e=>e!==t)}}):Tn([{online:!0}])}static P(t){for(const e of this.R)e.closed?this.R=this.R.filter(t=>t!==e):e?.next&&e.next(t)}}Cn.R=[];const Mn=new Ct("Auth");class xn{configure(t,e){this.authConfig=t,this.authOptions=e,t&&t.Cognito?.userPoolEndpoint&&Mn.warn(Dn("Amazon Cognito User Pool")),t&&t.Cognito?.identityPoolEndpoint&&Mn.warn(Dn("Amazon Cognito Identity Pool"))}async fetchAuthSession(t={}){let e,n;const i=await this.getTokens(t);return i?(n=i.accessToken?.payload?.sub,e=await(this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:i,authenticated:!0,forceRefresh:t.forceRefresh}))):e=await(this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:t.forceRefresh})),{tokens:i,credentials:e?.credentials,identityId:e?.identityId,userSub:n}}async clearCredentials(){await(this.authOptions?.credentialsProvider?.clearCredentialsAndIdentityId())}async getTokens(t){return await(this.authOptions?.tokenProvider?.getTokens(t))??void 0}}const Dn=t=>`You are using a custom Amazon ${t} endpoint, ensure the endpoint is correct.`,Rn=new class{constructor(){this.oAuthListener=void 0,this.isConfigured=!1,this.resourcesConfig={},this.libraryOptions={},this.Auth=new xn}configure(t,e){const n=Ht(t);this.resourcesConfig=n,e&&(this.libraryOptions=e),this.resourcesConfig=qt(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),jt.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",Rt),this.notifyOAuthListener(),this.isConfigured=!0}getConfig(){return this.isConfigured,this.resourcesConfig}[Qt](t){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth?t(this.resourcesConfig.Auth?.Cognito):this.oAuthListener=t}notifyOAuthListener(){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth&&this.oAuthListener&&(this.oAuthListener(this.resourcesConfig.Auth?.Cognito),this.oAuthListener=void 0)}},Pn=t=>((t,e)=>Rn.Auth.fetchAuthSession(e))(0,t),jn=t=>{const{headers:e,statusCode:n}=t;return{...Un(t)?t.$metadata:{},httpStatusCode:n,requestId:e["x-amzn-requestid"]??e["x-amzn-request-id"]??e["x-amz-request-id"],extendedRequestId:e["x-amz-id-2"],cfId:e["x-amz-cf-id"]}},Un=t=>"object"==typeof t?.$metadata;function Ln(t=3e5){return e=>{const n=2**e*100+100*Math.random();return!(n>t)&&n}}const qn=3e5,Bn=t=>{const e=Ln(qn)(t);return!1===e?qn:e},zn=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],_n=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],Fn=["TimeoutError","RequestTimeout","RequestTimeoutException"],Kn=(t,e)=>429===t||!!e&&_n.includes(e),Qn=t=>[xt.NetworkError,"ERR_NETWORK"].includes(t?.name),Jn=(t,e)=>!!t&&[500,502,503,504].includes(t)||!!e&&Fn.includes(e),Vn=({maxAttempts:t=3,retryDecider:e,computeDelay:n,abortSignal:i})=>{if(t<1)throw new Error("maxAttempts must be greater than 0");return(r,o)=>async function(s){let a,c,u=o.attemptsCount??0;const h=()=>{if(c)return Yn(c,u),c;throw Yn(a,u),a};for(;!i?.aborted&&u<t;){try{c=await r(s),a=void 0}catch(l){a=l,c=void 0}u=(o.attemptsCount??0)>u?o.attemptsCount??0:u+1,o.attemptsCount=u;const{isCredentialsExpiredError:d,retryable:f}=await e(c,a,o);if(!f)return h();if(o.isCredentialsExpired=!!d,!i?.aborted&&u<t){const t=n(u);await Gn(t,i)}}if(i?.aborted)throw new Error("Request aborted.");return h()}},Gn=(t,e)=>{if(e?.aborted)return Promise.resolve();let n,i;const r=new Promise(e=>{i=e,n=setTimeout(e,t)});return e?.addEventListener("abort",function t(r){clearTimeout(n),e?.removeEventListener("abort",t),i()}),r},Yn=(t,e)=>{"[object Object]"==={}.toString.call(t)&&(t.$metadata={...t.$metadata??{},attempts:e})},Wn=St,Hn=({userAgentHeader:t="x-amz-user-agent",userAgentValue:e=""})=>n=>async function(i){if(0===e.trim().length)return await n(i);{const r=t.toLowerCase();return i.headers[r]=i.headers[r]?`${i.headers[r]} ${e}`:e,await n(i)}},Zn=(t,e)=>(n,i)=>{const r={};let o=e=>t(e,i);for(let t=e.length-1;t>=0;t--)o=(0,e[t])(i)(o,r);return o(n)},Xn=t=>{let e;return()=>(e||(e=t()),e)},$n=t=>!["HEAD","GET"].includes(t.toUpperCase()),ti=async({url:t,method:e,headers:n,body:i},{abortSignal:r,cache:o,withCrossDomainCredentials:s})=>{let a;try{a=await fetch(t,{method:e,headers:n,body:$n(e)?i:void 0,signal:r,cache:o,credentials:s?"include":"same-origin"})}catch(u){if(u instanceof TypeError)throw new Mt({name:xt.NetworkError,message:"A network error has occurred.",underlyingError:u});throw u}const c={};return a.headers?.forEach((t,e)=>{c[e.toLowerCase()]=t}),{statusCode:a.status,headers:c,body:null,body:Object.assign(a.body??{},{text:Xn(()=>a.text()),blob:Xn(()=>a.blob()),json:Xn(()=>a.json())})}},ei=URL,ni=URLSearchParams;let ii=class extends Mt{constructor(){super({name:xt.PlatformNotSupported,message:"Function not supported on current platform"})}},ri=class{constructor(t){this.storage=t}async setItem(t,e){if(!this.storage)throw new ii;this.storage.setItem(t,e)}async getItem(t){if(!this.storage)throw new ii;return this.storage.getItem(t)}async removeItem(t){if(!this.storage)throw new ii;this.storage.removeItem(t)}async clear(){if(!this.storage)throw new ii;this.storage.clear()}},oi=class{constructor(){this.storage=new Map}get length(){return this.storage.size}key(t){return t>this.length-1?null:Array.from(this.storage.keys())[t]}setItem(t,e){this.storage.set(t,e)}getItem(t){return this.storage.get(t)??null}removeItem(t){this.storage.delete(t)}clear(){this.storage.clear()}};const si=new Ct("CoreStorageUtils"),ai=()=>{try{if("undefined"!=typeof window&&window.sessionStorage)return window.sessionStorage.getItem("test"),window.sessionStorage;throw new Error("sessionStorage is not defined")}catch(t){return si.info("sessionStorage not found. InMemoryStorage is used as a fallback."),new oi}};let ci=class{constructor(t){this.j=t}get storage(){if(!this.j)throw new ii;return this.j}setItem(t,e){this.storage.setItem(t,e)}getItem(t){return this.storage.getItem(t)}removeItem(t){this.storage.removeItem(t)}clear(){this.storage.clear()}};function ui(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}var hi=function t(e,n){function i(t,i,r){if("undefined"!=typeof document){"number"==typeof(r=ui({},n,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var s in r)r[s]&&(o+="; "+s,!0!==r[s]&&(o+="="+r[s].split(";")[0]));return document.cookie=t+"="+e.write(i,t)+o}}return Object.create({set:i,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],i={},r=0;r<n.length;r++){var o=n[r].split("="),s=o.slice(1).join("=");try{var a=decodeURIComponent(o[0]);if(i[a]=e.read(s,a),t===a)break}catch(c){}}return t?i[t]:i}},remove:function(t,e){i(t,"",ui({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,ui({},this.attributes,e))},withConverter:function(e){return t(ui({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});class li{constructor(t={}){const{path:e,domain:n,expires:i,sameSite:r,secure:o}=t;if(this.domain=n,this.path=e||"/",this.expires={}.hasOwnProperty.call(t,"expires")?i:365,this.secure=!{}.hasOwnProperty.call(t,"secure")||o,{}.hasOwnProperty.call(t,"sameSite")){if(!r||!["strict","lax","none"].includes(r))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===r&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=r}}async setItem(t,e){hi.set(t,e,this.getData())}async getItem(t){return hi.get(t)??null}async removeItem(t){hi.remove(t,this.getData())}async clear(){const t=hi.get(),e=Object.keys(t).map(t=>this.removeItem(t));await Promise.all(e)}getData(){return{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure,...this.sameSite&&{sameSite:this.sameSite}}}}const di=new class extends ri{constructor(){super((()=>{try{if("undefined"!=typeof window&&window.localStorage)return window.localStorage}catch(t){si.info("localStorage not found. InMemoryStorage is used as a fallback.")}return new oi})())}};new class extends ri{constructor(){super(ai())}},new class extends ci{constructor(){super(ai())}};const fi=t=>Object.keys(t).map(t=>t.toLowerCase()).sort().join(";"),pi="X-Amz-Date".toLowerCase(),wi="X-Amz-Security-Token".toLowerCase(),yi="aws4_request",mi="AWS4-HMAC-SHA256",gi=(t,e)=>{const n=new re(t??void 0);return n.update(e),n.digestSync()},vi=(t,e)=>function(t){let e="";for(let n=0;n<t.byteLength;n++)e+=oe[t[n]];return e}(gi(t,e)),bi=t=>Object.entries(t).map(([t,e])=>({key:t.toLowerCase(),value:e?.trim().replace(/\s+/g," ")??""})).sort((t,e)=>t.key<e.key?-1:1).map(t=>`${t.key}:${t.value}\n`).join(""),Ai=t=>encodeURIComponent(t).replace(/[!'()*]/g,Ei),Ei=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`,Ii=(t,e=!0)=>t?e?encodeURIComponent(t).replace(/%2F/g,"/"):t:"/",Si=t=>null==t?"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855":Ti(t)?vi(null,t):"UNSIGNED-PAYLOAD",Ti=t=>"string"==typeof t||ArrayBuffer.isView(t)||Ni(t),Ni=t=>"function"==typeof ArrayBuffer&&t instanceof ArrayBuffer||"[object ArrayBuffer]"==={}.toString.call(t),Oi=(t,e)=>{const n=(({credentials:t,signingDate:e=new Date,signingRegion:n,signingService:i,uriEscapePath:r=!0})=>{const{accessKeyId:o,secretAccessKey:s,sessionToken:a}=t,{longDate:c,shortDate:u}=(t=>{const e=t.toISOString().replace(/[:-]|\.\d{3}/g,"");return{longDate:e,shortDate:e.slice(0,8)}})(e);return{accessKeyId:o,credentialScope:`${u}/${n}/${i}/${yi}`,longDate:c,secretAccessKey:s,sessionToken:a,shortDate:u,signingRegion:n,signingService:i,uriEscapePath:r}})(e),{accessKeyId:i,credentialScope:r,longDate:o,sessionToken:s}=n,a={...t.headers};a.host=t.url.host,a[pi]=o,s&&(a[wi]=s);const c={...t,headers:a},u=((t,{credentialScope:e,longDate:n,secretAccessKey:i,shortDate:r,signingRegion:o,signingService:s,uriEscapePath:a})=>{const c=(({body:t,headers:e,method:n,url:i},r=!0)=>{return[n,Ii(i.pathname,r),(o=i.searchParams,Array.from(o).sort(([t,e],[n,i])=>t===n?e<i?-1:1:t<n?-1:1).map(([t,e])=>`${Ai(t)}=${Ai(e)}`).join("&")),bi(e),fi(e),Si(t)].join("\n");var o})(t,a),u=((t,e,n)=>[mi,t,e,n].join("\n"))(n,e,vi(null,c)),h=vi(((t,e,n,i)=>{const r=gi(`AWS4${t}`,e),o=gi(r,n),s=gi(o,i);return gi(s,yi)})(i,r,o,s),u);return h})(c,n),h=`Credential=${i}/${r}`,l=`SignedHeaders=${fi(a)}`,d=`Signature=${u}`;return a.authorization=`${mi} ${h}, ${l}, ${d}`,c},ki=t=>new Date(Date.now()+t);class Ci extends Error{constructor(){super(...arguments),this.nonRetryable=!0}}class Mi extends Mt{get response(){return this.U?xi(this.U):void 0}constructor(t){super(t),this.constructor=Mi,Object.setPrototypeOf(this,Mi.prototype),t.response&&(this.U=t.response)}}const xi=t=>({...t,headers:{...t.headers}}),Di={convert(t,e={urlSafe:!1,skipPadding:!1}){const n="string"==typeof t?t:function(t){return Array.from(t,t=>String.fromCodePoint(t)).join("")}(t);let i=(()=>{if("undefined"!=typeof window&&"function"==typeof window.btoa)return window.btoa;if("function"==typeof btoa)return btoa;throw new Mt({name:"Base64EncoderError",message:"Cannot resolve the `btoa` function from the environment."})})()(n);return e.urlSafe&&(i=i.replace(/\+/g,"-").replace(/\//g,"_")),e.skipPadding&&(i=i.replace(/=/g,"")),i}};var Ri;!function(t){t.DEBUG="DEBUG",t.ERROR="ERROR",t.INFO="INFO",t.WARN="WARN",t.VERBOSE="VERBOSE",t.NONE="NONE"}(Ri||(Ri={}));const Pi={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};class ji{constructor(t,e=Ri.WARN){this.name=t,this.level=e,this.o=[]}u(t){return t<10?"0"+t:""+t}h(){const t=new Date;return[this.u(t.getMinutes()),this.u(t.getSeconds())].join(":")+"."+t.getMilliseconds()}configure(t){return t?(this.l=t,this.l):this.l}p(t,...e){let n=this.level;if(ji.LOG_LEVEL&&(n=ji.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(n=window.LOG_LEVEL),!(Pi[t]>=Pi[n]))return;let i=function(){}.bind();t===Ri.ERROR&&console.error&&(i=function(){}.bind()),t===Ri.WARN&&console.warn&&(i=function(){}.bind()),ji.BIND_ALL_LOG_LEVELS&&(t===Ri.INFO&&console.info&&(i=function(){}.bind()),t===Ri.DEBUG&&console.debug&&(i=function(){}.bind()));const r=`[${t}] ${this.h()} ${this.name}`;let o="";if(1===e.length&&"string"==typeof e[0])o=`${r} - ${e[0]}`,i(o);else if(1===e.length)o=`${r} ${e[0]}`,i(r,e[0]);else if("string"==typeof e[0]){let t=e.slice(1);1===t.length&&(t=t[0]),o=`${r} - ${e[0]} ${t}`,i(`${r} - ${e[0]}`,t)}else o=`${r} ${e}`,i(r,e);for(const s of this.o){const t={message:o,timestamp:Date.now()};s.pushLogs([t])}}log(...t){this.p(Ri.INFO,...t)}info(...t){this.p(Ri.INFO,...t)}warn(...t){this.p(Ri.WARN,...t)}error(...t){this.p(Ri.ERROR,...t)}debug(...t){this.p(Ri.DEBUG,...t)}verbose(...t){this.p(Ri.VERBOSE,...t)}addPluggable(t){t&&"Logging"===t.getCategoryName()&&(this.o.push(t),t.configure(this.l))}listPluggables(){return this.o}}ji.LOG_LEVEL=null,ji.BIND_ALL_LOG_LEVELS=!1;class Ui extends Error{constructor({message:t,name:e,recoverySuggestion:n,underlyingError:i,metadata:r}){if(super(t),this.name=e,this.underlyingError=i,this.recoverySuggestion=n,r){const{extendedRequestId:t,httpStatusCode:e,requestId:n}=r;this.metadata={extendedRequestId:t,httpStatusCode:e,requestId:n}}this.constructor=Ui,Object.setPrototypeOf(this,Ui.prototype)}}var Li;!function(t){t.NoEndpointId="NoEndpointId",t.PlatformNotSupported="PlatformNotSupported",t.Unknown="Unknown",t.NetworkError="NetworkError"}(Li||(Li={}));const qi=(t,e=Ui)=>(n,i,r)=>{const{message:o,recoverySuggestion:s}=t[i];if(!n)throw new e({name:i,message:r?`${o} ${r}`:o,recoverySuggestion:s})},Bi="undefined"!=typeof Symbol?Symbol("amplify_default"):"@@amplify_default",zi=new ji("Hub"),_i=new class{constructor(t){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=t}m(t,e){const n=this.listeners.get(t);n?this.listeners.set(t,[...n.filter(({callback:t})=>t!==e)]):zi.warn(`No listeners for ${t}`)}dispatch(t,e,n,i){"string"==typeof t&&this.protectedChannels.indexOf(t)>-1&&(i===Bi||zi.warn(`WARNING: ${t} is protected and dispatching on it can have unintended consequences`));const r={channel:t,payload:{...e},source:n,patternInfo:[]};try{this.v(r)}catch(o){zi.error(o)}}listen(t,e,n="noname"){let i;if("function"!=typeof e)throw new Ui({name:"NoHubcallbackProvidedException",message:"No callback supplied to Hub"});i=e;let r=this.listeners.get(t);return r||(r=[],this.listeners.set(t,r)),r.push({name:n,callback:i}),()=>{this.m(t,i)}}v(t){const{channel:e,payload:n}=t,i=this.listeners.get(e);i&&i.forEach(i=>{zi.debug(`Dispatching to ${e} with `,n);try{i.callback(t)}catch(r){zi.error(r)}})}}("__default__"),Fi={convert(t,e){let n=t;return e?.urlSafe&&(n=n.replace(/-/g,"+").replace(/_/g,"/")),(()=>{if("undefined"!=typeof window&&"function"==typeof window.atob)return window.atob;if("function"==typeof atob)return atob;throw new Ui({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})})()(n)}};var Ki,Qi;(Qi=Ki||(Ki={})).AuthTokenConfigException="AuthTokenConfigException",Qi.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",Qi.AuthUserPoolException="AuthUserPoolException",Qi.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",Qi.OAuthNotConfigureException="OAuthNotConfigureException";const Ji=qi({[Ki.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[Ki.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[Ki.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[Ki.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[Ki.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}});function Vi(t){let e=!0;e=!!t&&!!t.userPoolId&&!!t.userPoolClientId,Ji(e,Ki.AuthUserPoolException)}function Gi(t){Ji(!!t?.identityPoolId,Ki.InvalidIdentityPoolIdException)}function Yi(t){const e=t.split(".");if(3!==e.length)throw new Error("Invalid token");try{const n=e[1].replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(Fi.convert(n).split("").map(t=>`%${`00${t.charCodeAt(0).toString(16)}`.slice(-2)}`).join(""));return{toString:()=>t,payload:JSON.parse(i)}}catch(n){throw new Error("Invalid token payload")}}let Wi;const Hi=new Uint8Array(16);function Zi(){if(!Wi&&(Wi="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Wi))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Wi(Hi)}const Xi=[];for(let $h=0;$h<256;++$h)Xi.push(($h+256).toString(16).slice(1));const $i={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var tr,er,nr,ir,rr,or,sr,ar,cr,ur,hr,lr,dr,fr;!function(t){t.WebUnknown="0",t.React="1",t.NextJs="2",t.Angular="3",t.VueJs="4",t.Nuxt="5",t.Svelte="6",t.ServerSideUnknown="100",t.ReactSSR="101",t.NextJsSSR="102",t.AngularSSR="103",t.VueJsSSR="104",t.NuxtSSR="105",t.SvelteSSR="106",t.ReactNative="201",t.Expo="202"}(tr||(tr={})),function(t){t.AI="ai",t.API="api",t.Auth="auth",t.Analytics="analytics",t.DataStore="datastore",t.Geo="geo",t.InAppMessaging="inappmessaging",t.Interactions="interactions",t.Predictions="predictions",t.PubSub="pubsub",t.PushNotification="pushnotification",t.Storage="storage"}(er||(er={})),function(t){t.CreateConversation="1",t.GetConversation="2",t.ListConversations="3",t.DeleteConversation="4",t.SendMessage="5",t.ListMessages="6",t.OnMessage="7",t.Generation="8",t.UpdateConversation="9"}(nr||(nr={})),function(t){t.Record="1",t.IdentifyUser="2"}(ir||(ir={})),function(t){t.GraphQl="1",t.Get="2",t.Post="3",t.Put="4",t.Patch="5",t.Del="6",t.Head="7"}(rr||(rr={})),function(t){t.SignUp="1",t.ConfirmSignUp="2",t.ResendSignUpCode="3",t.SignIn="4",t.FetchMFAPreference="6",t.UpdateMFAPreference="7",t.SetUpTOTP="10",t.VerifyTOTPSetup="11",t.ConfirmSignIn="12",t.DeleteUserAttributes="15",t.DeleteUser="16",t.UpdateUserAttributes="17",t.FetchUserAttributes="18",t.ConfirmUserAttribute="22",t.SignOut="26",t.UpdatePassword="27",t.ResetPassword="28",t.ConfirmResetPassword="29",t.FederatedSignIn="30",t.RememberDevice="32",t.ForgetDevice="33",t.FetchDevices="34",t.SendUserAttributeVerificationCode="35",t.SignInWithRedirect="36",t.StartWebAuthnRegistration="37",t.CompleteWebAuthnRegistration="38",t.ListWebAuthnCredentials="39",t.DeleteWebAuthnCredential="40"}(or||(or={})),function(t){t.Subscribe="1",t.GraphQl="2"}(sr||(sr={})),function(t){t.SearchByText="0",t.SearchByCoordinates="1",t.SearchForSuggestions="2",t.SearchByPlaceId="3",t.SaveGeofences="4",t.GetGeofence="5",t.ListGeofences="6",t.DeleteGeofences="7"}(ar||(ar={})),function(t){t.SyncMessages="1",t.IdentifyUser="2",t.NotifyMessageInteraction="3"}(cr||(cr={})),(ur||(ur={})).None="0",function(t){t.Convert="1",t.Identify="2",t.Interpret="3"}(hr||(hr={})),(lr||(lr={})).Subscribe="1",function(t){t.InitializePushNotifications="1",t.IdentifyUser="2"}(dr||(dr={})),function(t){t.UploadData="1",t.DownloadData="2",t.List="3",t.Copy="4",t.Remove="5",t.GetProperties="6",t.GetUrl="7",t.GetDataAccess="8",t.ListCallerAccessGrants="9"}(fr||(fr={}));const pr=()=>"undefined"!=typeof globalThis,wr=()=>"undefined"!=typeof window,yr=()=>"undefined"!=typeof document,mr=()=>"undefined"!=typeof process,gr=(t,e)=>!!Object.keys(t).find(t=>t.startsWith(e));var vr={},br={},Ar={};const Er=[{platform:tr.Expo,detectionMethod:function(){return pr()&&void 0!==globalThis.expo}},{platform:tr.ReactNative,detectionMethod:function(){return"undefined"!=typeof navigator&&void 0!==navigator.product&&"ReactNative"===navigator.product}},{platform:tr.NextJs,detectionMethod:function(){return wr()&&window.next&&"object"==typeof window.next}},{platform:tr.Nuxt,detectionMethod:function(){return wr()&&(void 0!==window.__NUXT__||void 0!==window.$nuxt)}},{platform:tr.Angular,detectionMethod:function(){const t=Boolean(yr()&&document.querySelector("[ng-version]")),e=Boolean(wr()&&void 0!==window.ng);return t||e}},{platform:tr.React,detectionMethod:function(){const t=t=>t.startsWith("_react")||t.startsWith("__react");return yr()&&Array.from(document.querySelectorAll("[id]")).some(e=>Object.keys(e).find(t))}},{platform:tr.VueJs,detectionMethod:function(){return wr()&&gr(window,"__VUE")}},{platform:tr.Svelte,detectionMethod:function(){return wr()&&gr(window,"__SVELTE")}},{platform:tr.WebUnknown,detectionMethod:function(){return wr()}},{platform:tr.NextJsSSR,detectionMethod:function(){return pr()&&(gr(globalThis,"__next")||gr(globalThis,"__NEXT"))}},{platform:tr.NuxtSSR,detectionMethod:function(){return pr()&&void 0!==globalThis.__NUXT_PATHS__}},{platform:tr.ReactSSR,detectionMethod:function(){return mr()&&!!Object.keys(vr).find(t=>t.includes("react"))}},{platform:tr.VueJsSSR,detectionMethod:function(){return pr()&&gr(globalThis,"__VUE")}},{platform:tr.AngularSSR,detectionMethod:function(){return mr()&&"object"==typeof Ar&&Ar.npm_lifecycle_script?.startsWith("ng ")||!1}},{platform:tr.SvelteSSR,detectionMethod:function(){return mr()&&!!Object.keys(br).find(t=>t.includes("svelte"))}}];let Ir;const Sr=[];let Tr=!1;const Nr=()=>{if(!Ir){if(Ir=Er.find(t=>t.detectionMethod())?.platform||tr.ServerSideUnknown,Tr)for(;Sr.length;)Sr.pop()?.();else Sr.forEach(t=>{t()});Or(tr.ServerSideUnknown,10),Or(tr.WebUnknown,10)}return Ir};function Or(t,e){Ir!==t||Tr||setTimeout(()=>{Ir=void 0,Tr=!0,setTimeout(Nr,1e3)},e)}const kr={},Cr=t=>(({category:t,action:e}={})=>{const n=[["aws-amplify","6.15.0".replace(/\+.*/,"")]];if(t&&n.push([t,e]),n.push(["framework",Nr()]),t&&e){const i=((t,e)=>kr[t]?.[e]?.additionalDetails)(t,e);i&&i.forEach(t=>{n.push(t)})}return n})(t).map(([t,e])=>t&&e?`${t}/${e}`:t).join(" "),Mr=t=>{const{headers:e,statusCode:n}=t;return{...xr(t)?t.$metadata:{},httpStatusCode:n,requestId:e["x-amzn-requestid"]??e["x-amzn-request-id"]??e["x-amz-request-id"],extendedRequestId:e["x-amz-id-2"],cfId:e["x-amz-cf-id"]}},xr=t=>"object"==typeof t?.$metadata,Dr=async t=>{if(!t||t.statusCode<300)return;const e=await Rr(t),n=(t=>{const[e]=t.toString().split(/[,:]+/);return e.includes("#")?e.split("#")[1]:e})(t.headers["x-amzn-errortype"]??e.code??e.L??"UnknownError"),i=e.message??e.Message??"Unknown error",r=new Error(i);return Object.assign(r,{name:n,$metadata:Mr(t)})},Rr=async t=>{if(!t.body)throw new Error("Missing response payload");const e=await t.body.json();return Object.assign(e,{$metadata:Mr(t)})},Pr=(t,e,n,i)=>async(r,o)=>{const s={...i,...r},a=await s.endpointResolver(s,o),c=await e(o,a),u=await t(c,{...s});return n(u)},jr="amz-sdk-invocation-id",Ur=3e5,Lr=t=>{const e=function(t=3e5){return e=>{const n=2**e*100+100*Math.random();return!(n>t)&&n}}(Ur),n=e(t);return!1===n?Ur:n},qr=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],Br=t=>async(e,n)=>{const i=n??await t(e)??void 0,r=i?.code||i?.name,o=e?.statusCode;return{retryable:Kr(n)||Fr(o,r)||(t=>!!t&&qr.includes(t))(r)||Qr(o,r)}},zr=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],_r=["TimeoutError","RequestTimeout","RequestTimeoutException"],Fr=(t,e)=>429===t||!!e&&zr.includes(e),Kr=t=>[Li.NetworkError,"ERR_NETWORK"].includes(t?.name),Qr=(t,e)=>!!t&&[500,502,503,504].includes(t)||!!e&&_r.includes(e),Jr="cognito-identity",Vr={service:Jr,retryDecider:Br(Dr),computeDelay:Lr,cache:"no-store"},Gr=(t,e)=>{if(e?.aborted)return Promise.resolve();let n,i;const r=new Promise(e=>{i=e,n=setTimeout(e,t)});return e?.addEventListener("abort",function t(r){clearTimeout(n),e?.removeEventListener("abort",t),i()}),r},Yr=(t,e)=>{"[object Object]"==={}.toString.call(t)&&(t.$metadata={...t.$metadata??{},attempts:e})},Wr=function(t,e,n){if($i.randomUUID&&!e&&!t)return $i.randomUUID();const i=(t=t||{}).random||(t.rng||Zi)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(let t=0;t<16;++t)e[n+t]=i[t];return e}return function(t,e=0){return Xi[t[e+0]]+Xi[t[e+1]]+Xi[t[e+2]]+Xi[t[e+3]]+"-"+Xi[t[e+4]]+Xi[t[e+5]]+"-"+Xi[t[e+6]]+Xi[t[e+7]]+"-"+Xi[t[e+8]]+Xi[t[e+9]]+"-"+Xi[t[e+10]]+Xi[t[e+11]]+Xi[t[e+12]]+Xi[t[e+13]]+Xi[t[e+14]]+Xi[t[e+15]]}(i)},Hr=(t,e)=>(n,i)=>{const r={};let o=e=>t(e,i);for(let t=e.length-1;t>=0;t--)o=(0,e[t])(i)(o,r);return o(n)},Zr=t=>{let e;return()=>(e||(e=t()),e)},Xr=t=>!["HEAD","GET","DELETE"].includes(t.toUpperCase()),$r=Hr(async({url:t,method:e,headers:n,body:i},{abortSignal:r,cache:o,withCrossDomainCredentials:s})=>{let a;try{a=await fetch(t,{method:e,headers:n,body:Xr(e)?i:void 0,signal:r,cache:o,credentials:s?"include":"same-origin"})}catch(u){if(u instanceof TypeError)throw new Ui({name:Li.NetworkError,message:"A network error has occurred.",underlyingError:u});throw u}const c={};return a.headers?.forEach((t,e)=>{c[e.toLowerCase()]=t}),{statusCode:a.status,headers:c,body:null,body:Object.assign(a.body??{},{text:Zr(()=>a.text()),blob:Zr(()=>a.blob()),json:Zr(()=>a.json())})}},[({userAgentHeader:t="x-amz-user-agent",userAgentValue:e=""})=>n=>async function(i){if(0===e.trim().length)return await n(i);{const r=t.toLowerCase();return i.headers[r]=i.headers[r]?`${i.headers[r]} ${e}`:e,await n(i)}},()=>t=>async function(e){return e.headers[jr]||(e.headers[jr]=Wr()),t(e)},({maxAttempts:t=3,retryDecider:e,computeDelay:n,abortSignal:i})=>{if(t<1)throw new Error("maxAttempts must be greater than 0");return(r,o)=>async function(s){let a,c,u=o.attemptsCount??0;const h=()=>{if(c)return Yr(c,u),c;throw Yr(a,u),a};for(;!i?.aborted&&u<t;){try{c=await r(s),a=void 0}catch(l){a=l,c=void 0}u=(o.attemptsCount??0)>u?o.attemptsCount??0:u+1,o.attemptsCount=u;const{isCredentialsExpiredError:d,retryable:f}=await e(c,a,o);if(!f)return h();if(o.isCredentialsExpired=!!d,!i?.aborted&&u<t){const t=n(u);await Gr(t,i)}}if(i?.aborted)throw new Error("Request aborted.");return h()}},({maxAttempts:t=3})=>(e,n)=>async function(i){const r=n.attemptsCount??0;return i.headers["amz-sdk-request"]=`attempt=${r+1}; max=${t}`,e(i)}]),to=Hr($r,[()=>t=>async function(e){return e.headers["cache-control"]="no-store",t(e)}]),eo=t=>(e,n)=>{const i=no(t),r=JSON.stringify(e);return io(n,i,r)},no=t=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${t}`}),io=({url:t},e,n)=>({headers:e,url:t,body:n,method:"POST"}),ro=t=>Pr(to,eo("GetCredentialsForIdentity"),oo,{...Vr,...t,userAgentValue:Cr()}),oo=async t=>{if(t.statusCode>=300)throw await Dr(t);const e=await Rr(t);return{IdentityId:e.IdentityId,Credentials:so(e.Credentials),$metadata:Mr(t)}},so=({Expiration:t,...e}={})=>({...e,Expiration:t&&new Date(1e3*t)}),ao=async t=>{if(t.statusCode>=300)throw await Dr(t);return{IdentityId:(await Rr(t)).IdentityId,$metadata:Mr(t)}},co={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},uo={partitions:[co,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},ho=t=>{const{partitions:e}=uo;for(const{regions:n,outputs:i,regionRegex:r}of e){const e=new RegExp(r);if(n.includes(t)||e.test(t))return i.dnsSuffix}return co.outputs.dnsSuffix},lo=URL;class fo extends Ui{constructor(){super({name:Li.PlatformNotSupported,message:"Function not supported on current platform"})}}class po{constructor(t){this.storage=t}async setItem(t,e){if(!this.storage)throw new fo;this.storage.setItem(t,e)}async getItem(t){if(!this.storage)throw new fo;return this.storage.getItem(t)}async removeItem(t){if(!this.storage)throw new fo;this.storage.removeItem(t)}async clear(){if(!this.storage)throw new fo;this.storage.clear()}}class wo{constructor(){this.storage=new Map}get length(){return this.storage.size}key(t){return t>this.length-1?null:Array.from(this.storage.keys())[t]}setItem(t,e){this.storage.set(t,e)}getItem(t){return this.storage.get(t)??null}removeItem(t){this.storage.delete(t)}clear(){this.storage.clear()}}const yo=new ji("CoreStorageUtils"),mo=()=>{try{if("undefined"!=typeof window&&window.sessionStorage)return window.sessionStorage.getItem("test"),window.sessionStorage;throw new Error("sessionStorage is not defined")}catch(t){return yo.info("sessionStorage not found. InMemoryStorage is used as a fallback."),new wo}};class go{constructor(t){this.j=t}get storage(){if(!this.j)throw new fo;return this.j}setItem(t,e){this.storage.setItem(t,e)}getItem(t){return this.storage.getItem(t)}removeItem(t){this.storage.removeItem(t)}clear(){this.storage.clear()}}const vo=new class extends po{constructor(){super((()=>{try{if("undefined"!=typeof window&&window.localStorage)return window.localStorage}catch(t){yo.info("localStorage not found. InMemoryStorage is used as a fallback.")}return new wo})())}};function bo({expiresAt:t,clockDrift:e,tolerance:n=5e3}){return Date.now()+e+n>t}new class extends po{constructor(){super(mo())}},new class extends go{constructor(){super(mo())}};class Ao extends Ui{constructor(t){super(t),this.constructor=Ao,Object.setPrototypeOf(this,Ao.prototype)}}function Eo(t){if(!t||!t.includes(":"))throw new Ao({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return t.split(":")[0]}const Io="UserUnAuthenticatedException";new Ao({name:"InvalidRedirectException",message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."}),new Ao({name:"InvalidAppSchemeException",message:"A valid non-http app scheme was not found in the config.",recoverySuggestion:"Please make sure a valid custom app scheme is present in the config."}),new Ao({name:"InvalidPreferredRedirectUrlException",message:"The given preferredRedirectUrl does not match any items in the redirectSignOutUrls array from the config.",recoverySuggestion:"Please make sure a matching preferredRedirectUrl is provided."}),new Ao({name:"InvalidOriginException",message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."});const So=new Ao({name:"TokenRefreshException",message:"Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. \n\tPlease change your oauth configuration to use 'code grant' flow.",recoverySuggestion:"Please logout and change your Amplify configuration to use \"code grant\" flow. \n\tE.g { responseType: 'code' }"}),To=new Ao({name:Io,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."});const No={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"};function Oo(t){return t?.accessToken||t?.idToken}function ko(t){if(!t||"Error"===t.name||t instanceof TypeError)throw new Ao({name:Li.Unknown,message:"An unknown error has occurred.",underlyingError:t})}const Co=Hr($r,[()=>(t,e)=>async function(e){return e.headers["cache-control"]="no-store",t(e)}]),Mo="cognito-idp",xo={service:Mo,retryDecider:Br(Dr),computeDelay:Lr,get userAgentValue(){return Cr()},cache:"no-store"},Do=({endpointOverride:t})=>e=>t?{url:new lo(t)}:(({region:t})=>({url:new lo(`https://${Mo}.${t}.${ho(t)}`)}))(e),Ro=(()=>{let t;return async(...e)=>t||(t=new Promise((n,i)=>{(async({tokens:t,authConfig:e,username:n})=>{Vi(e?.Cognito);const{userPoolId:i,userPoolClientId:r,userPoolEndpoint:o}=e.Cognito,s=function(t){const e=t?.split("_")[0];if(!t||t.indexOf("_")<0||!e||"string"!=typeof e)throw new Ao({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return e}(i);!function(t){if(function(t){return Oo(t)&&!t?.refreshToken}(t))throw So;if(!function(t){return Oo(t)&&t?.refreshToken}(t))throw To}(t);const a=(d={endpointResolver:Do({endpointOverride:o})},Pr(Co,(t,e)=>(({url:t},e,n)=>({headers:e,url:t,body:n,method:"POST"}))(e,{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityProviderService.GetTokensFromRefreshToken"},JSON.stringify(t)),async t=>{if(t.statusCode>=300){const e=await Dr(t);throw ko(e),new Ao({name:e.name,message:e.message,metadata:e.$metadata})}return Rr(t)},{...xo,...d})),{AuthenticationResult:c}=await a({region:s},{ClientId:r,RefreshToken:t.refreshToken,DeviceKey:t.deviceMetadata?.deviceKey}),u=Yi(c?.AccessToken??""),h=c?.IdToken?Yi(c.IdToken):void 0,{iat:l}=u.payload;var d;if(!l)throw new Ao({name:"iatNotFoundException",message:"iat not found in access token"});return{accessToken:u,idToken:h,clockDrift:1e3*l-(new Date).getTime(),refreshToken:c?.RefreshToken??t.refreshToken,username:n}})(...e).then(t=>{n(t)}).catch(t=>{i(t)}).finally(()=>{t=void 0})}),t)})(),Po={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails",oauthMetadata:"oauthMetadata"};var jo;(jo||(jo={})).InvalidAuthTokens="InvalidAuthTokens";const Uo=qi({[jo.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}}),Lo="CognitoIdentityServiceProvider";class qo{getKeyValueStorage(){if(!this.keyValueStorage)throw new Ao({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(t){this.keyValueStorage=t}setAuthConfig(t){this.authConfig=t}async loadTokens(){try{const t=await this.getAuthKeys(),e=await this.getKeyValueStorage().getItem(t.accessToken);if(!e)throw new Ao({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});const n=Yi(e),i=await this.getKeyValueStorage().getItem(t.idToken),r=i?Yi(i):void 0,o=await this.getKeyValueStorage().getItem(t.refreshToken)??void 0,s=await this.getKeyValueStorage().getItem(t.clockDrift)??"0",a=Number.parseInt(s),c=await this.getKeyValueStorage().getItem(t.signInDetails),u={accessToken:n,idToken:r,refreshToken:o,deviceMetadata:await this.getDeviceMetadata()??void 0,clockDrift:a,username:await this.getLastAuthUser()};return c&&(u.signInDetails=JSON.parse(c)),u}catch(t){return null}}async storeTokens(t){Uo(void 0!==t,jo.InvalidAuthTokens);const e=t.username;await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),e);const n=await this.getAuthKeys();await this.getKeyValueStorage().setItem(n.accessToken,t.accessToken.toString()),t.idToken?await this.getKeyValueStorage().setItem(n.idToken,t.idToken.toString()):await this.getKeyValueStorage().removeItem(n.idToken),t.refreshToken?await this.getKeyValueStorage().setItem(n.refreshToken,t.refreshToken):await this.getKeyValueStorage().removeItem(n.refreshToken),t.deviceMetadata&&(t.deviceMetadata.deviceKey&&await this.getKeyValueStorage().setItem(n.deviceKey,t.deviceMetadata.deviceKey),t.deviceMetadata.deviceGroupKey&&await this.getKeyValueStorage().setItem(n.deviceGroupKey,t.deviceMetadata.deviceGroupKey),await this.getKeyValueStorage().setItem(n.randomPasswordKey,t.deviceMetadata.randomPassword)),t.signInDetails?await this.getKeyValueStorage().setItem(n.signInDetails,JSON.stringify(t.signInDetails)):await this.getKeyValueStorage().removeItem(n.signInDetails),await this.getKeyValueStorage().setItem(n.clockDrift,`${t.clockDrift}`)}async clearTokens(){const t=await this.getAuthKeys();await Promise.all([this.getKeyValueStorage().removeItem(t.accessToken),this.getKeyValueStorage().removeItem(t.idToken),this.getKeyValueStorage().removeItem(t.clockDrift),this.getKeyValueStorage().removeItem(t.refreshToken),this.getKeyValueStorage().removeItem(t.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),this.getKeyValueStorage().removeItem(t.oauthMetadata)])}async getDeviceMetadata(t){const e=await this.getAuthKeys(t),n=await this.getKeyValueStorage().getItem(e.deviceKey),i=await this.getKeyValueStorage().getItem(e.deviceGroupKey),r=await this.getKeyValueStorage().getItem(e.randomPasswordKey);return r&&i&&n?{deviceKey:n,deviceGroupKey:i,randomPassword:r}:null}async clearDeviceMetadata(t){const e=await this.getAuthKeys(t);await Promise.all([this.getKeyValueStorage().removeItem(e.deviceKey),this.getKeyValueStorage().removeItem(e.deviceGroupKey),this.getKeyValueStorage().removeItem(e.randomPasswordKey)])}async getAuthKeys(t){Vi(this.authConfig?.Cognito);const e=t??await this.getLastAuthUser();return Bo(Lo,`${this.authConfig.Cognito.userPoolClientId}.${e}`)}getLastAuthUserKey(){Vi(this.authConfig?.Cognito);const t=this.authConfig.Cognito.userPoolClientId;return`${Lo}.${t}.LastAuthUser`}async getLastAuthUser(){return await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())??"username"}async setOAuthMetadata(t){const{oauthMetadata:e}=await this.getAuthKeys();await this.getKeyValueStorage().setItem(e,JSON.stringify(t))}async getOAuthMetadata(){const{oauthMetadata:t}=await this.getAuthKeys(),e=await this.getKeyValueStorage().getItem(t);return e&&JSON.parse(e)}}const Bo=(t,e)=>zo(Po)(`${t}`,e);function zo(t){const e=Object.values({...t});return(t,n)=>e.reduce((e,i)=>({...e,[i]:`${t}.${n}.${i}`}),{})}const _o="amplify-signin-with-hostedUI",Fo="CognitoIdentityServiceProvider",Ko=(t,e)=>zo(No)(t,e),Qo=new class{constructor(t){this.keyValueStorage=t}async clearOAuthInflightData(){Vi(this.cognitoConfig);const t=Ko(Fo,this.cognitoConfig.userPoolClientId);await Promise.all([this.keyValueStorage.removeItem(t.inflightOAuth),this.keyValueStorage.removeItem(t.oauthPKCE),this.keyValueStorage.removeItem(t.oauthState)])}async clearOAuthData(){Vi(this.cognitoConfig);const t=Ko(Fo,this.cognitoConfig.userPoolClientId);return await this.clearOAuthInflightData(),await this.keyValueStorage.removeItem(_o),this.keyValueStorage.removeItem(t.oauthSignIn)}loadOAuthState(){Vi(this.cognitoConfig);const t=Ko(Fo,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(t.oauthState)}storeOAuthState(t){Vi(this.cognitoConfig);const e=Ko(Fo,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(e.oauthState,t)}loadPKCE(){Vi(this.cognitoConfig);const t=Ko(Fo,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(t.oauthPKCE)}storePKCE(t){Vi(this.cognitoConfig);const e=Ko(Fo,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(e.oauthPKCE,t)}setAuthConfig(t){this.cognitoConfig=t}async loadOAuthInFlight(){Vi(this.cognitoConfig);const t=Ko(Fo,this.cognitoConfig.userPoolClientId);return"true"===await this.keyValueStorage.getItem(t.inflightOAuth)}async storeOAuthInFlight(t){Vi(this.cognitoConfig);const e=Ko(Fo,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(e.inflightOAuth,`${t}`)}async loadOAuthSignIn(){Vi(this.cognitoConfig);const t=Ko(Fo,this.cognitoConfig.userPoolClientId),e=await this.keyValueStorage.getItem(_o),[n,i]=(await this.keyValueStorage.getItem(t.oauthSignIn))?.split(",")??[];return{isOAuthSignIn:"true"===n||"true"===e,preferPrivateSession:"true"===i}}async storeOAuthSignIn(t,e=!1){Vi(this.cognitoConfig);const n=Ko(Fo,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(n.oauthSignIn,`${t},${e}`)}}(vo);class Jo{constructor(){this.waitForInflightOAuth="undefined"!=typeof window&&void 0!==window.document?async()=>{if(await Qo.loadOAuthInFlight())return this.inflightPromise||(this.inflightPromise=new Promise((t,e)=>{})),this.inflightPromise}:async()=>{}}setAuthConfig(t){Qo.setAuthConfig(t.Cognito),this.authConfig=t}setTokenRefresher(t){this.tokenRefresher=t}setAuthTokenStore(t){this.tokenStore=t}getTokenStore(){if(!this.tokenStore)throw new Ao({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new Ao({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}async getTokens(t){let e;try{Vi(this.authConfig?.Cognito)}catch(o){return null}await this.waitForInflightOAuth(),this.inflightPromise=void 0,e=await this.getTokenStore().loadTokens();const n=await this.getTokenStore().getLastAuthUser();if(null===e)return null;const i=!!e?.idToken&&bo({expiresAt:1e3*(e.idToken?.payload?.exp??0),clockDrift:e.clockDrift??0}),r=bo({expiresAt:1e3*(e.accessToken?.payload?.exp??0),clockDrift:e.clockDrift??0});return(t?.forceRefresh||i||r)&&(e=await this.refreshTokens({tokens:e,username:n}),null===e)?null:{accessToken:e?.accessToken,idToken:e?.idToken,signInDetails:e?.signInDetails}}async refreshTokens({tokens:t,username:e}){try{const{signInDetails:n}=t,i=await this.getTokenRefresher()({tokens:t,authConfig:this.authConfig,username:e});return i.signInDetails=n,await this.setTokens({tokens:i}),_i.dispatch("auth",{event:"tokenRefresh"},"Auth",Bi),i}catch(n){return this.handleErrors(n)}}handleErrors(t){if(ko(t),t.name!==Li.NetworkError&&this.clearTokens(),_i.dispatch("auth",{event:"tokenRefresh_failure",data:{error:t}},"Auth",Bi),t.name.startsWith("NotAuthorizedException"))return null;throw t}async setTokens({tokens:t}){return this.getTokenStore().storeTokens(t)}async clearTokens(){return this.getTokenStore().clearTokens()}getDeviceMetadata(t){return this.getTokenStore().getDeviceMetadata(t)}clearDeviceMetadata(t){return this.getTokenStore().clearDeviceMetadata(t)}setOAuthMetadata(t){return this.getTokenStore().setOAuthMetadata(t)}getOAuthMetadata(){return this.getTokenStore().getOAuthMetadata()}}const Vo=new class{constructor(){this.authTokenStore=new qo,this.authTokenStore.setKeyValueStorage(vo),this.tokenOrchestrator=new Jo,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(Ro)}getTokens({forceRefresh:t}={forceRefresh:!1}){return this.tokenOrchestrator.getTokens({forceRefresh:t})}setKeyValueStorage(t){this.authTokenStore.setKeyValueStorage(t)}setAuthConfig(t){this.authTokenStore.setAuthConfig(t),this.tokenOrchestrator.setAuthConfig(t)}},{tokenOrchestrator:Go}=Vo,Yo={identityId:"identityId"},Wo=new ji("DefaultIdentityIdStore");class Ho{setAuthConfig(t){Gi(t.Cognito),this.authConfig=t,this.q=Zo("Cognito",t.Cognito.identityPoolId)}constructor(t){this.q={},this.B=!1,this.keyValueStorage=t}async loadIdentityId(){Gi(this.authConfig?.Cognito);try{if(this._)return{id:this._,type:"primary"};{const t=await this.keyValueStorage.getItem(this.q.identityId);return t?(this.B=!0,{id:t,type:"guest"}):null}}catch(t){return Wo.log("Error getting stored IdentityId.",t),null}}async storeIdentityId(t){Gi(this.authConfig?.Cognito),"guest"===t.type?(this.keyValueStorage.setItem(this.q.identityId,t.id),this._=void 0,this.B=!0):(this._=t.id,this.B&&(this.keyValueStorage.removeItem(this.q.identityId),this.B=!1))}async clearIdentityId(){this._=void 0,await this.keyValueStorage.removeItem(this.q.identityId)}}const Zo=(t,e)=>zo(Yo)(`com.amplify.${t}`,e),Xo=({endpointOverride:t})=>e=>t?{url:new lo(t)}:(({region:t})=>({url:new lo(`https://${Jr}.${t}.${ho(t)}`)}))(e);function $o(t){const e=Yi(t).payload.iss,n={};if(!e)throw new Ao({name:"InvalidIdTokenException",message:"Invalid Idtoken."});return n[e.replace(/(^\w+:|^)\/\//,"")]=t,n}const ts=new ji("CognitoCredentialsProvider"),es=3e6;class ns{constructor(t){this.F=0,this.K=t}async clearCredentialsAndIdentityId(){ts.debug("Clearing out credentials and identityId"),this.J=void 0,await this.K.clearIdentityId()}async clearCredentials(){ts.debug("Clearing out in-memory credentials"),this.J=void 0}async getCredentialsAndIdentityId(t){const e=t.authenticated,{tokens:n}=t,{authConfig:i}=t;try{Gi(i?.Cognito)}catch{return}if(!e&&!i.Cognito.allowGuestAccess)return;const{forceRefresh:r}=t,o=this.hasTokenChanged(n),s=await async function({tokens:t,authConfig:e,identityIdStore:n}){n.setAuthConfig({Cognito:e});const i=await n.loadIdentityId();if(i)return i.id;const r=t?.idToken?$o(t.idToken.toString()):{},o=await async function(t,e){const n=e?.identityPoolId,i=Eo(n),r=(o={endpointResolver:Xo({endpointOverride:e.identityPoolEndpoint})},Pr(to,eo("GetId"),ao,{...Vr,...o,userAgentValue:Cr()}));var o;let s;try{s=(await r({region:i},{IdentityPoolId:n,Logins:t})).IdentityId}catch(a){throw ko(a),new Ao(a)}if(!s)throw new Ao({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return s}(r,e);return n.storeIdentityId({id:o,type:t?"primary":"guest"}),o}({tokens:n,authConfig:i.Cognito,identityIdStore:this.K});return(r||o)&&this.clearCredentials(),e?(function(t){if(!t||!t.idToken)throw new Ao({name:Io,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}(n),this.credsForOIDCTokens(i.Cognito,n,s)):this.getGuestCredentials(s,i.Cognito)}async getGuestCredentials(t,e){if(this.J&&!this.isPastTTL()&&!1===this.J.isAuthenticatedCreds)return ts.info("returning stored credentials as they neither past TTL nor expired."),this.J;this.clearCredentials();const n=Eo(e.identityPoolId),i=ro({endpointResolver:Xo({endpointOverride:e.identityPoolEndpoint})});let r;try{r=await i({region:n},{IdentityId:t})}catch(o){throw ko(o),new Ao(o)}if(r?.Credentials?.AccessKeyId&&r?.Credentials?.SecretKey){this.F=(new Date).getTime()+es;const e={credentials:{accessKeyId:r.Credentials.AccessKeyId,secretAccessKey:r.Credentials.SecretKey,sessionToken:r.Credentials.SessionToken,expiration:r.Credentials.Expiration},identityId:t};return r.IdentityId&&(e.identityId=r.IdentityId,this.K.storeIdentityId({id:r.IdentityId,type:"guest"})),this.J={...e,isAuthenticatedCreds:!1},e}throw new Ao({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}async credsForOIDCTokens(t,e,n){if(this.J&&!this.isPastTTL()&&!0===this.J.isAuthenticatedCreds)return ts.debug("returning stored credentials as they neither past TTL nor expired."),this.J;this.clearCredentials();const i=e.idToken?$o(e.idToken.toString()):{},r=Eo(t.identityPoolId),o=ro({endpointResolver:Xo({endpointOverride:t.identityPoolEndpoint})});let s;try{s=await o({region:r},{IdentityId:n,Logins:i})}catch(a){throw ko(a),new Ao(a)}if(s?.Credentials?.AccessKeyId&&s?.Credentials?.SecretKey){this.F=(new Date).getTime()+es;const t={credentials:{accessKeyId:s.Credentials.AccessKeyId,secretAccessKey:s.Credentials.SecretKey,sessionToken:s.Credentials.SessionToken,expiration:s.Credentials.Expiration},identityId:n};return s.IdentityId&&(t.identityId=s.IdentityId,this.K.storeIdentityId({id:s.IdentityId,type:"primary"})),this.J={...t,isAuthenticatedCreds:!0,associatedIdToken:e.idToken?.toString()},t}throw new Ao({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}isPastTTL(){return void 0===this.F||this.F<=Date.now()}hasTokenChanged(t){return!!t&&!!this.J?.associatedIdToken&&t.idToken?.toString()!==this.J.associatedIdToken}}const is=new ns(new Ho(vo)),rs={configure(t,e){const n=Ht(t),i=new li({sameSite:"lax"}),r=e?.ssr?i:di,o=e?.ssr?new ns(new Ho(i)):is;if(n.Auth)if(e?.Auth)Rn.configure(n,e);else{if(!Rn.libraryOptions.Auth)return Vo.setAuthConfig(n.Auth),Vo.setKeyValueStorage(r),void Rn.configure(n,{...e,Auth:{tokenProvider:Vo,credentialsProvider:o}});if(e){const t=Rn.libraryOptions.Auth;return void 0!==e.ssr&&(Vo.setKeyValueStorage(r),t.credentialsProvider=o),void Rn.configure(n,{Auth:t,...e})}Rn.configure(n)}else Rn.configure(n,e)},getConfig:()=>Rn.getConfig()};function os(t){return(os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ss="function"==typeof Symbol&&null!=Symbol.toStringTag?Symbol.toStringTag:"@@toStringTag";function as(t,e){for(var n,i=/\r\n|[\n\r]/g,r=1,o=e+1;(n=i.exec(t.body))&&n.index<e;)r+=1,o=e+1-(n.index+n[0].length);return{line:r,column:o}}function cs(t){return us(t.source,as(t.source,t.start))}function us(t,e){var n=t.locationOffset.column-1,i=ls(n)+t.body,r=e.line-1,o=t.locationOffset.line-1,s=e.line+o,a=1===e.line?n:0,c=e.column+a,u="".concat(t.name,":").concat(s,":").concat(c,"\n"),h=i.split(/\r\n|[\n\r]/g),l=h[r];if(l.length>120){for(var d=Math.floor(c/80),f=c%80,p=[],w=0;w<l.length;w+=80)p.push(l.slice(w,w+80));return u+hs([["".concat(s),p[0]]].concat(p.slice(1,d+1).map(function(t){return["",t]}),[[" ",ls(f-1)+"^"],["",p[d+1]]]))}return u+hs([["".concat(s-1),h[r-1]],["".concat(s),l],["",ls(c-1)+"^"],["".concat(s+1),h[r+1]]])}function hs(t){var e=t.filter(function(t){return t[0],void 0!==t[1]}),n=Math.max.apply(Math,e.map(function(t){return t[0].length}));return e.map(function(t){var e,i=t[0],r=t[1];return ls(n-(e=i).length)+e+(r?" | "+r:" |")}).join("\n")}function ls(t){return Array(t+1).join(" ")}function ds(t){return(ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function ps(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ws(t,e){return!e||"object"!==ds(e)&&"function"!=typeof e?ys(t):e}function ys(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ms(t){var e="function"==typeof Map?new Map:void 0;return ms=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return gs(t,arguments,As(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),bs(i,t)},ms(t)}function gs(t,e,n){return(gs=vs()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&bs(r,n.prototype),r}).apply(null,arguments)}function vs(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function bs(t,e){return(bs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function As(t){return(As=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Es=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bs(t,e)}(o,ms(Error));var t,e,n,i,r=(t=o,e=vs(),function(){var n,i=As(t);if(e){var r=As(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return ws(this,n)});function o(t,e,n,i,s,a,c){var u,h,l,d;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(d=r.call(this,t)).name="GraphQLError",d.originalError=null!=a?a:void 0,d.nodes=Is(Array.isArray(e)?e:e?[e]:void 0);for(var f=[],p=0,w=null!==(y=d.nodes)&&void 0!==y?y:[];p<w.length;p++){var y,m=w[p].loc;null!=m&&f.push(m)}f=Is(f),d.source=null!=n?n:null===(u=f)||void 0===u?void 0:u[0].source,d.positions=null!=i?i:null===(h=f)||void 0===h?void 0:h.map(function(t){return t.start}),d.locations=i&&n?i.map(function(t){return as(n,t)}):null===(l=f)||void 0===l?void 0:l.map(function(t){return as(t.source,t.start)}),d.path=null!=s?s:void 0;var g,v=null==a?void 0:a.extensions;return null==c&&"object"==os(g=v)&&null!==g?d.extensions=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fs(Object(n),!0).forEach(function(e){ps(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fs(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},v):d.extensions=null!=c?c:{},Object.defineProperties(ys(d),{message:{enumerable:!0},locations:{enumerable:null!=d.locations},path:{enumerable:null!=d.path},extensions:{enumerable:null!=d.extensions&&Object.keys(d.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!=a&&a.stack?(Object.defineProperty(ys(d),"stack",{value:a.stack,writable:!0,configurable:!0}),ws(d)):(Error.captureStackTrace?Error.captureStackTrace(ys(d),o):Object.defineProperty(ys(d),"stack",{value:Error().stack,writable:!0,configurable:!0}),d)}return n=o,(i=[{key:"toString",value:function(){return function(t){var e=t.message;if(t.nodes)for(var n=0,i=t.nodes;n<i.length;n++){var r=i[n];r.loc&&(e+="\n\n"+cs(r.loc))}else if(t.source&&t.locations)for(var o=0,s=t.locations;o<s.length;o++){var a=s[o];e+="\n\n"+us(t.source,a)}return e}(this)}},{key:ss,get:function(){return"Object"}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(n.prototype,i),o}();function Is(t){return void 0===t||0===t.length?void 0:t}function Ss(t,e,n){return new Es("Syntax Error: ".concat(n),void 0,t,[e])}var Ts=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),Ns="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;function Os(t){var e=t.prototype.toJSON;"function"==typeof e||function(){if(!Boolean(0))throw new Error("Unexpected invariant triggered.")}(),t.prototype.inspect=e,Ns&&(t.prototype[Ns]=e)}var ks=function(){function t(t,e,n){this.start=t.start,this.end=e.end,this.startToken=t,this.endToken=e,this.source=n}return t.prototype.toJSON=function(){return{start:this.start,end:this.end}},t}();Os(ks);var Cs=function(){function t(t,e,n,i,r,o,s){this.kind=t,this.start=e,this.end=n,this.line=i,this.column=r,this.value=s,this.prev=o,this.next=null}return t.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},t}();function Ms(t){return null!=t&&"string"==typeof t.kind}Os(Cs);var xs=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function Ds(t){return(Ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rs(t){return Ps(t,[])}function Ps(t,e){switch(Ds(t)){case"string":return JSON.stringify(t);case"function":return t.name?"[function ".concat(t.name,"]"):"[function]";case"object":return null===t?"null":function(t,e){if(-1!==e.indexOf(t))return"[Circular]";var n=[].concat(e,[t]),i=function(t){var e=t[String(Ns)];return"function"==typeof e?e:"function"==typeof t.inspect?t.inspect:void 0}(t);if(void 0!==i){var r=i.call(t);if(r!==t)return"string"==typeof r?r:Ps(r,n)}else if(Array.isArray(t))return function(t,e){if(0===t.length)return"[]";if(e.length>2)return"[Array]";for(var n=Math.min(10,t.length),i=t.length-n,r=[],o=0;o<n;++o)r.push(Ps(t[o],e));return 1===i?r.push("... 1 more item"):i>1&&r.push("... ".concat(i," more items")),"["+r.join(", ")+"]"}(t,n);return function(t,e){var n=Object.keys(t);return 0===n.length?"{}":e.length>2?"["+function(t){var e={}.toString.call(t).replace(/^\[object /,"").replace(/]$/,"");if("Object"===e&&"function"==typeof t.constructor){var n=t.constructor.name;if("string"==typeof n&&""!==n)return n}return e}(t)+"]":"{ "+n.map(function(n){return n+": "+Ps(t[n],e)}).join(", ")+" }"}(t,n)}(t,e);default:return String(t)}}function js(t,e){if(!Boolean(t))throw new Error(e)}var Us=function(){function t(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GraphQL request",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{line:1,column:1};"string"==typeof t||js(0,"Body must be a string. Received: ".concat(Rs(t),".")),this.body=t,this.name=e,this.locationOffset=n,this.locationOffset.line>0||js(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||js(0,"column in locationOffset is 1-indexed and must be positive.")}return e=t,(n=[{key:ss,get:function(){return"Source"}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(e.prototype,n),t;var e,n}(),Ls=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function qs(t){var e=t.split(/\r\n|[\n\r]/g),n=function(t){for(var e,n=!0,i=!0,r=0,o=null,s=0;s<t.length;++s)switch(t.charCodeAt(s)){case 13:10===t.charCodeAt(s+1)&&++s;case 10:n=!1,i=!0,r=0;break;case 9:case 32:++r;break;default:i&&!n&&(null===o||r<o)&&(o=r),i=!1}return null!==(e=o)&&void 0!==e?e:0}(t);if(0!==n)for(var i=1;i<e.length;i++)e[i]=e[i].slice(n);for(var r=0;r<e.length&&Bs(e[r]);)++r;for(var o=e.length;o>r&&Bs(e[o-1]);)--o;return e.slice(r,o).join("\n")}function Bs(t){for(var e=0;e<t.length;++e)if(" "!==t[e]&&"\t"!==t[e])return!1;return!0}var zs=function(){function t(t){var e=new Cs(xs.SOF,0,0,0,0,null);this.source=t,this.lastToken=e,this.token=e,this.line=1,this.lineStart=0}var e=t.prototype;return e.advance=function(){return this.lastToken=this.token,this.token=this.lookahead()},e.lookahead=function(){var t=this.token;if(t.kind!==xs.EOF)do{var e;t=null!==(e=t.next)&&void 0!==e?e:t.next=Fs(this,t)}while(t.kind===xs.COMMENT);return t},t}();function _s(t){return isNaN(t)?xs.EOF:t<127?JSON.stringify(String.fromCharCode(t)):'"\\u'.concat(("00"+t.toString(16).toUpperCase()).slice(-4),'"')}function Fs(t,e){for(var n=t.source,i=n.body,r=i.length,o=e.end;o<r;){var s=i.charCodeAt(o),a=t.line,c=1+o-t.lineStart;switch(s){case 65279:case 9:case 32:case 44:++o;continue;case 10:++o,++t.line,t.lineStart=o;continue;case 13:10===i.charCodeAt(o+1)?o+=2:++o,++t.line,t.lineStart=o;continue;case 33:return new Cs(xs.BANG,o,o+1,a,c,e);case 35:return Qs(n,o,a,c,e);case 36:return new Cs(xs.DOLLAR,o,o+1,a,c,e);case 38:return new Cs(xs.AMP,o,o+1,a,c,e);case 40:return new Cs(xs.PAREN_L,o,o+1,a,c,e);case 41:return new Cs(xs.PAREN_R,o,o+1,a,c,e);case 46:if(46===i.charCodeAt(o+1)&&46===i.charCodeAt(o+2))return new Cs(xs.SPREAD,o,o+3,a,c,e);break;case 58:return new Cs(xs.COLON,o,o+1,a,c,e);case 61:return new Cs(xs.EQUALS,o,o+1,a,c,e);case 64:return new Cs(xs.AT,o,o+1,a,c,e);case 91:return new Cs(xs.BRACKET_L,o,o+1,a,c,e);case 93:return new Cs(xs.BRACKET_R,o,o+1,a,c,e);case 123:return new Cs(xs.BRACE_L,o,o+1,a,c,e);case 124:return new Cs(xs.PIPE,o,o+1,a,c,e);case 125:return new Cs(xs.BRACE_R,o,o+1,a,c,e);case 34:return 34===i.charCodeAt(o+1)&&34===i.charCodeAt(o+2)?Ys(n,o,a,c,e,t):Gs(n,o,a,c,e);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Js(n,o,s,a,c,e);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return Zs(n,o,a,c,e)}throw Ss(n,o,Ks(s))}var u=t.line,h=1+o-t.lineStart;return new Cs(xs.EOF,r,r,u,h,e)}function Ks(t){return t<32&&9!==t&&10!==t&&13!==t?"Cannot contain the invalid character ".concat(_s(t),"."):39===t?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character ".concat(_s(t),".")}function Qs(t,e,n,i,r){var o,s=t.body,a=e;do{o=s.charCodeAt(++a)}while(!isNaN(o)&&(o>31||9===o));return new Cs(xs.COMMENT,e,a,n,i,r,s.slice(e+1,a))}function Js(t,e,n,i,r,o){var s=t.body,a=n,c=e,u=!1;if(45===a&&(a=s.charCodeAt(++c)),48===a){if((a=s.charCodeAt(++c))>=48&&a<=57)throw Ss(t,c,"Invalid number, unexpected digit after 0: ".concat(_s(a),"."))}else c=Vs(t,c,a),a=s.charCodeAt(c);if(46===a&&(u=!0,a=s.charCodeAt(++c),c=Vs(t,c,a),a=s.charCodeAt(c)),69!==a&&101!==a||(u=!0,43!==(a=s.charCodeAt(++c))&&45!==a||(a=s.charCodeAt(++c)),c=Vs(t,c,a),a=s.charCodeAt(c)),46===a||function(t){return 95===t||t>=65&&t<=90||t>=97&&t<=122}(a))throw Ss(t,c,"Invalid number, expected digit but got: ".concat(_s(a),"."));return new Cs(u?xs.FLOAT:xs.INT,e,c,i,r,o,s.slice(e,c))}function Vs(t,e,n){var i=t.body,r=e,o=n;if(o>=48&&o<=57){do{o=i.charCodeAt(++r)}while(o>=48&&o<=57);return r}throw Ss(t,r,"Invalid number, expected digit but got: ".concat(_s(o),"."))}function Gs(t,e,n,i,r){for(var o=t.body,s=e+1,a=s,c=0,u="";s<o.length&&!isNaN(c=o.charCodeAt(s))&&10!==c&&13!==c;){if(34===c)return u+=o.slice(a,s),new Cs(xs.STRING,e,s+1,n,i,r,u);if(c<32&&9!==c)throw Ss(t,s,"Invalid character within String: ".concat(_s(c),"."));if(++s,92===c){switch(u+=o.slice(a,s-1),c=o.charCodeAt(s)){case 34:u+='"';break;case 47:u+="/";break;case 92:u+="\\";break;case 98:u+="\b";break;case 102:u+="\f";break;case 110:u+="\n";break;case 114:u+="\r";break;case 116:u+="\t";break;case 117:var h=Ws(o.charCodeAt(s+1),o.charCodeAt(s+2),o.charCodeAt(s+3),o.charCodeAt(s+4));if(h<0){var l=o.slice(s+1,s+5);throw Ss(t,s,"Invalid character escape sequence: \\u".concat(l,"."))}u+=String.fromCharCode(h),s+=4;break;default:throw Ss(t,s,"Invalid character escape sequence: \\".concat(String.fromCharCode(c),"."))}a=++s}}throw Ss(t,s,"Unterminated string.")}function Ys(t,e,n,i,r,o){for(var s=t.body,a=e+3,c=a,u=0,h="";a<s.length&&!isNaN(u=s.charCodeAt(a));){if(34===u&&34===s.charCodeAt(a+1)&&34===s.charCodeAt(a+2))return h+=s.slice(c,a),new Cs(xs.BLOCK_STRING,e,a+3,n,i,r,qs(h));if(u<32&&9!==u&&10!==u&&13!==u)throw Ss(t,a,"Invalid character within String: ".concat(_s(u),"."));10===u?(++a,++o.line,o.lineStart=a):13===u?(10===s.charCodeAt(a+1)?a+=2:++a,++o.line,o.lineStart=a):92===u&&34===s.charCodeAt(a+1)&&34===s.charCodeAt(a+2)&&34===s.charCodeAt(a+3)?(h+=s.slice(c,a)+'"""',c=a+=4):++a}throw Ss(t,a,"Unterminated string.")}function Ws(t,e,n,i){return Hs(t)<<12|Hs(e)<<8|Hs(n)<<4|Hs(i)}function Hs(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:-1}function Zs(t,e,n,i,r){for(var o=t.body,s=o.length,a=e+1,c=0;a!==s&&!isNaN(c=o.charCodeAt(a))&&(95===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122);)++a;return new Cs(xs.NAME,e,a,n,i,r,o.slice(e,a))}function Xs(t,e){return new $s(t,e).parseDocument()}var $s=function(){function t(t,e){var n=function(t){return t instanceof Us}(t)?t:new Us(t);this.V=new zs(n),this.G=e}var e=t.prototype;return e.parseName=function(){var t=this.expectToken(xs.NAME);return{kind:Ts.NAME,value:t.value,loc:this.loc(t)}},e.parseDocument=function(){var t=this.V.token;return{kind:Ts.DOCUMENT,definitions:this.many(xs.SOF,this.parseDefinition,xs.EOF),loc:this.loc(t)}},e.parseDefinition=function(){if(this.peek(xs.NAME))switch(this.V.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(xs.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},e.parseOperationDefinition=function(){var t=this.V.token;if(this.peek(xs.BRACE_L))return{kind:Ts.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(t)};var e,n=this.parseOperationType();return this.peek(xs.NAME)&&(e=this.parseName()),{kind:Ts.OPERATION_DEFINITION,operation:n,name:e,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},e.parseOperationType=function(){var t=this.expectToken(xs.NAME);switch(t.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(t)},e.parseVariableDefinitions=function(){return this.optionalMany(xs.PAREN_L,this.parseVariableDefinition,xs.PAREN_R)},e.parseVariableDefinition=function(){var t=this.V.token;return{kind:Ts.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(xs.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(xs.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(t)}},e.parseVariable=function(){var t=this.V.token;return this.expectToken(xs.DOLLAR),{kind:Ts.VARIABLE,name:this.parseName(),loc:this.loc(t)}},e.parseSelectionSet=function(){var t=this.V.token;return{kind:Ts.SELECTION_SET,selections:this.many(xs.BRACE_L,this.parseSelection,xs.BRACE_R),loc:this.loc(t)}},e.parseSelection=function(){return this.peek(xs.SPREAD)?this.parseFragment():this.parseField()},e.parseField=function(){var t,e,n=this.V.token,i=this.parseName();return this.expectOptionalToken(xs.COLON)?(t=i,e=this.parseName()):e=i,{kind:Ts.FIELD,alias:t,name:e,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(xs.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},e.parseArguments=function(t){var e=t?this.parseConstArgument:this.parseArgument;return this.optionalMany(xs.PAREN_L,e,xs.PAREN_R)},e.parseArgument=function(){var t=this.V.token,e=this.parseName();return this.expectToken(xs.COLON),{kind:Ts.ARGUMENT,name:e,value:this.parseValueLiteral(!1),loc:this.loc(t)}},e.parseConstArgument=function(){var t=this.V.token;return{kind:Ts.ARGUMENT,name:this.parseName(),value:(this.expectToken(xs.COLON),this.parseValueLiteral(!0)),loc:this.loc(t)}},e.parseFragment=function(){var t=this.V.token;this.expectToken(xs.SPREAD);var e=this.expectOptionalKeyword("on");return!e&&this.peek(xs.NAME)?{kind:Ts.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(t)}:{kind:Ts.INLINE_FRAGMENT,typeCondition:e?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},e.parseFragmentDefinition=function(){var t,e=this.V.token;return this.expectKeyword("fragment"),!0===(null===(t=this.G)||void 0===t?void 0:t.experimentalFragmentVariables)?{kind:Ts.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}:{kind:Ts.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},e.parseFragmentName=function(){if("on"===this.V.token.value)throw this.unexpected();return this.parseName()},e.parseValueLiteral=function(t){var e=this.V.token;switch(e.kind){case xs.BRACKET_L:return this.parseList(t);case xs.BRACE_L:return this.parseObject(t);case xs.INT:return this.V.advance(),{kind:Ts.INT,value:e.value,loc:this.loc(e)};case xs.FLOAT:return this.V.advance(),{kind:Ts.FLOAT,value:e.value,loc:this.loc(e)};case xs.STRING:case xs.BLOCK_STRING:return this.parseStringLiteral();case xs.NAME:switch(this.V.advance(),e.value){case"true":return{kind:Ts.BOOLEAN,value:!0,loc:this.loc(e)};case"false":return{kind:Ts.BOOLEAN,value:!1,loc:this.loc(e)};case"null":return{kind:Ts.NULL,loc:this.loc(e)};default:return{kind:Ts.ENUM,value:e.value,loc:this.loc(e)}}case xs.DOLLAR:if(!t)return this.parseVariable()}throw this.unexpected()},e.parseStringLiteral=function(){var t=this.V.token;return this.V.advance(),{kind:Ts.STRING,value:t.value,block:t.kind===xs.BLOCK_STRING,loc:this.loc(t)}},e.parseList=function(t){var e=this,n=this.V.token;return{kind:Ts.LIST,values:this.any(xs.BRACKET_L,function(){return e.parseValueLiteral(t)},xs.BRACKET_R),loc:this.loc(n)}},e.parseObject=function(t){var e=this,n=this.V.token;return{kind:Ts.OBJECT,fields:this.any(xs.BRACE_L,function(){return e.parseObjectField(t)},xs.BRACE_R),loc:this.loc(n)}},e.parseObjectField=function(t){var e=this.V.token,n=this.parseName();return this.expectToken(xs.COLON),{kind:Ts.OBJECT_FIELD,name:n,value:this.parseValueLiteral(t),loc:this.loc(e)}},e.parseDirectives=function(t){for(var e=[];this.peek(xs.AT);)e.push(this.parseDirective(t));return e},e.parseDirective=function(t){var e=this.V.token;return this.expectToken(xs.AT),{kind:Ts.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(t),loc:this.loc(e)}},e.parseTypeReference=function(){var t,e=this.V.token;return this.expectOptionalToken(xs.BRACKET_L)?(t=this.parseTypeReference(),this.expectToken(xs.BRACKET_R),t={kind:Ts.LIST_TYPE,type:t,loc:this.loc(e)}):t=this.parseNamedType(),this.expectOptionalToken(xs.BANG)?{kind:Ts.NON_NULL_TYPE,type:t,loc:this.loc(e)}:t},e.parseNamedType=function(){var t=this.V.token;return{kind:Ts.NAMED_TYPE,name:this.parseName(),loc:this.loc(t)}},e.parseTypeSystemDefinition=function(){var t=this.peekDescription()?this.V.lookahead():this.V.token;if(t.kind===xs.NAME)switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(t)},e.peekDescription=function(){return this.peek(xs.STRING)||this.peek(xs.BLOCK_STRING)},e.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},e.parseSchemaDefinition=function(){var t=this.V.token,e=this.parseDescription();this.expectKeyword("schema");var n=this.parseDirectives(!0),i=this.many(xs.BRACE_L,this.parseOperationTypeDefinition,xs.BRACE_R);return{kind:Ts.SCHEMA_DEFINITION,description:e,directives:n,operationTypes:i,loc:this.loc(t)}},e.parseOperationTypeDefinition=function(){var t=this.V.token,e=this.parseOperationType();this.expectToken(xs.COLON);var n=this.parseNamedType();return{kind:Ts.OPERATION_TYPE_DEFINITION,operation:e,type:n,loc:this.loc(t)}},e.parseScalarTypeDefinition=function(){var t=this.V.token,e=this.parseDescription();this.expectKeyword("scalar");var n=this.parseName(),i=this.parseDirectives(!0);return{kind:Ts.SCALAR_TYPE_DEFINITION,description:e,name:n,directives:i,loc:this.loc(t)}},e.parseObjectTypeDefinition=function(){var t=this.V.token,e=this.parseDescription();this.expectKeyword("type");var n=this.parseName(),i=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),o=this.parseFieldsDefinition();return{kind:Ts.OBJECT_TYPE_DEFINITION,description:e,name:n,interfaces:i,directives:r,fields:o,loc:this.loc(t)}},e.parseImplementsInterfaces=function(){var t;if(!this.expectOptionalKeyword("implements"))return[];if(!0===(null===(t=this.G)||void 0===t?void 0:t.allowLegacySDLImplementsInterfaces)){var e=[];this.expectOptionalToken(xs.AMP);do{e.push(this.parseNamedType())}while(this.expectOptionalToken(xs.AMP)||this.peek(xs.NAME));return e}return this.delimitedMany(xs.AMP,this.parseNamedType)},e.parseFieldsDefinition=function(){var t;return!0===(null===(t=this.G)||void 0===t?void 0:t.allowLegacySDLEmptyFields)&&this.peek(xs.BRACE_L)&&this.V.lookahead().kind===xs.BRACE_R?(this.V.advance(),this.V.advance(),[]):this.optionalMany(xs.BRACE_L,this.parseFieldDefinition,xs.BRACE_R)},e.parseFieldDefinition=function(){var t=this.V.token,e=this.parseDescription(),n=this.parseName(),i=this.parseArgumentDefs();this.expectToken(xs.COLON);var r=this.parseTypeReference(),o=this.parseDirectives(!0);return{kind:Ts.FIELD_DEFINITION,description:e,name:n,arguments:i,type:r,directives:o,loc:this.loc(t)}},e.parseArgumentDefs=function(){return this.optionalMany(xs.PAREN_L,this.parseInputValueDef,xs.PAREN_R)},e.parseInputValueDef=function(){var t=this.V.token,e=this.parseDescription(),n=this.parseName();this.expectToken(xs.COLON);var i,r=this.parseTypeReference();this.expectOptionalToken(xs.EQUALS)&&(i=this.parseValueLiteral(!0));var o=this.parseDirectives(!0);return{kind:Ts.INPUT_VALUE_DEFINITION,description:e,name:n,type:r,defaultValue:i,directives:o,loc:this.loc(t)}},e.parseInterfaceTypeDefinition=function(){var t=this.V.token,e=this.parseDescription();this.expectKeyword("interface");var n=this.parseName(),i=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),o=this.parseFieldsDefinition();return{kind:Ts.INTERFACE_TYPE_DEFINITION,description:e,name:n,interfaces:i,directives:r,fields:o,loc:this.loc(t)}},e.parseUnionTypeDefinition=function(){var t=this.V.token,e=this.parseDescription();this.expectKeyword("union");var n=this.parseName(),i=this.parseDirectives(!0),r=this.parseUnionMemberTypes();return{kind:Ts.UNION_TYPE_DEFINITION,description:e,name:n,directives:i,types:r,loc:this.loc(t)}},e.parseUnionMemberTypes=function(){return this.expectOptionalToken(xs.EQUALS)?this.delimitedMany(xs.PIPE,this.parseNamedType):[]},e.parseEnumTypeDefinition=function(){var t=this.V.token,e=this.parseDescription();this.expectKeyword("enum");var n=this.parseName(),i=this.parseDirectives(!0),r=this.parseEnumValuesDefinition();return{kind:Ts.ENUM_TYPE_DEFINITION,description:e,name:n,directives:i,values:r,loc:this.loc(t)}},e.parseEnumValuesDefinition=function(){return this.optionalMany(xs.BRACE_L,this.parseEnumValueDefinition,xs.BRACE_R)},e.parseEnumValueDefinition=function(){var t=this.V.token,e=this.parseDescription(),n=this.parseName(),i=this.parseDirectives(!0);return{kind:Ts.ENUM_VALUE_DEFINITION,description:e,name:n,directives:i,loc:this.loc(t)}},e.parseInputObjectTypeDefinition=function(){var t=this.V.token,e=this.parseDescription();this.expectKeyword("input");var n=this.parseName(),i=this.parseDirectives(!0),r=this.parseInputFieldsDefinition();return{kind:Ts.INPUT_OBJECT_TYPE_DEFINITION,description:e,name:n,directives:i,fields:r,loc:this.loc(t)}},e.parseInputFieldsDefinition=function(){return this.optionalMany(xs.BRACE_L,this.parseInputValueDef,xs.BRACE_R)},e.parseTypeSystemExtension=function(){var t=this.V.lookahead();if(t.kind===xs.NAME)switch(t.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(t)},e.parseSchemaExtension=function(){var t=this.V.token;this.expectKeyword("extend"),this.expectKeyword("schema");var e=this.parseDirectives(!0),n=this.optionalMany(xs.BRACE_L,this.parseOperationTypeDefinition,xs.BRACE_R);if(0===e.length&&0===n.length)throw this.unexpected();return{kind:Ts.SCHEMA_EXTENSION,directives:e,operationTypes:n,loc:this.loc(t)}},e.parseScalarTypeExtension=function(){var t=this.V.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var e=this.parseName(),n=this.parseDirectives(!0);if(0===n.length)throw this.unexpected();return{kind:Ts.SCALAR_TYPE_EXTENSION,name:e,directives:n,loc:this.loc(t)}},e.parseObjectTypeExtension=function(){var t=this.V.token;this.expectKeyword("extend"),this.expectKeyword("type");var e=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),r=this.parseFieldsDefinition();if(0===n.length&&0===i.length&&0===r.length)throw this.unexpected();return{kind:Ts.OBJECT_TYPE_EXTENSION,name:e,interfaces:n,directives:i,fields:r,loc:this.loc(t)}},e.parseInterfaceTypeExtension=function(){var t=this.V.token;this.expectKeyword("extend"),this.expectKeyword("interface");var e=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),r=this.parseFieldsDefinition();if(0===n.length&&0===i.length&&0===r.length)throw this.unexpected();return{kind:Ts.INTERFACE_TYPE_EXTENSION,name:e,interfaces:n,directives:i,fields:r,loc:this.loc(t)}},e.parseUnionTypeExtension=function(){var t=this.V.token;this.expectKeyword("extend"),this.expectKeyword("union");var e=this.parseName(),n=this.parseDirectives(!0),i=this.parseUnionMemberTypes();if(0===n.length&&0===i.length)throw this.unexpected();return{kind:Ts.UNION_TYPE_EXTENSION,name:e,directives:n,types:i,loc:this.loc(t)}},e.parseEnumTypeExtension=function(){var t=this.V.token;this.expectKeyword("extend"),this.expectKeyword("enum");var e=this.parseName(),n=this.parseDirectives(!0),i=this.parseEnumValuesDefinition();if(0===n.length&&0===i.length)throw this.unexpected();return{kind:Ts.ENUM_TYPE_EXTENSION,name:e,directives:n,values:i,loc:this.loc(t)}},e.parseInputObjectTypeExtension=function(){var t=this.V.token;this.expectKeyword("extend"),this.expectKeyword("input");var e=this.parseName(),n=this.parseDirectives(!0),i=this.parseInputFieldsDefinition();if(0===n.length&&0===i.length)throw this.unexpected();return{kind:Ts.INPUT_OBJECT_TYPE_EXTENSION,name:e,directives:n,fields:i,loc:this.loc(t)}},e.parseDirectiveDefinition=function(){var t=this.V.token,e=this.parseDescription();this.expectKeyword("directive"),this.expectToken(xs.AT);var n=this.parseName(),i=this.parseArgumentDefs(),r=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var o=this.parseDirectiveLocations();return{kind:Ts.DIRECTIVE_DEFINITION,description:e,name:n,arguments:i,repeatable:r,locations:o,loc:this.loc(t)}},e.parseDirectiveLocations=function(){return this.delimitedMany(xs.PIPE,this.parseDirectiveLocation)},e.parseDirectiveLocation=function(){var t=this.V.token,e=this.parseName();if(void 0!==Ls[e.value])return e;throw this.unexpected(t)},e.loc=function(t){var e;if(!0!==(null===(e=this.G)||void 0===e?void 0:e.noLocation))return new ks(t,this.V.lastToken,this.V.source)},e.peek=function(t){return this.V.token.kind===t},e.expectToken=function(t){var e=this.V.token;if(e.kind===t)return this.V.advance(),e;throw Ss(this.V.source,e.start,"Expected ".concat(ea(t),", found ").concat(ta(e),"."))},e.expectOptionalToken=function(t){var e=this.V.token;if(e.kind===t)return this.V.advance(),e},e.expectKeyword=function(t){var e=this.V.token;if(e.kind!==xs.NAME||e.value!==t)throw Ss(this.V.source,e.start,'Expected "'.concat(t,'", found ').concat(ta(e),"."));this.V.advance()},e.expectOptionalKeyword=function(t){var e=this.V.token;return e.kind===xs.NAME&&e.value===t&&(this.V.advance(),!0)},e.unexpected=function(t){var e=null!=t?t:this.V.token;return Ss(this.V.source,e.start,"Unexpected ".concat(ta(e),"."))},e.any=function(t,e,n){this.expectToken(t);for(var i=[];!this.expectOptionalToken(n);)i.push(e.call(this));return i},e.optionalMany=function(t,e,n){if(this.expectOptionalToken(t)){var i=[];do{i.push(e.call(this))}while(!this.expectOptionalToken(n));return i}return[]},e.many=function(t,e,n){this.expectToken(t);var i=[];do{i.push(e.call(this))}while(!this.expectOptionalToken(n));return i},e.delimitedMany=function(t,e){this.expectOptionalToken(t);var n=[];do{n.push(e.call(this))}while(this.expectOptionalToken(t));return n},t}();function ta(t){var e=t.value;return ea(t.kind)+(null!=e?' "'.concat(e,'"'):"")}function ea(t){return function(t){return t===xs.BANG||t===xs.DOLLAR||t===xs.AMP||t===xs.PAREN_L||t===xs.PAREN_R||t===xs.SPREAD||t===xs.COLON||t===xs.EQUALS||t===xs.AT||t===xs.BRACKET_L||t===xs.BRACKET_R||t===xs.BRACE_L||t===xs.PIPE||t===xs.BRACE_R}(t)?'"'.concat(t,'"'):t}var na={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},ia=Object.freeze({});function ra(t,e,n){var i=t[e];if(i){if(!n&&"function"==typeof i)return i;var r=n?i.leave:i.enter;if("function"==typeof r)return r}else{var o=n?t.leave:t.enter;if(o){if("function"==typeof o)return o;var s=o[e];if("function"==typeof s)return s}}}function oa(t){return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:na,i=void 0,r=Array.isArray(t),o=[t],s=-1,a=[],c=void 0,u=void 0,h=void 0,l=[],d=[],f=t;do{var p=++s===o.length,w=p&&0!==a.length;if(p){if(u=0===d.length?void 0:l[l.length-1],c=h,h=d.pop(),w){if(r)c=c.slice();else{for(var y={},m=0,g=Object.keys(c);m<g.length;m++){var v=g[m];y[v]=c[v]}c=y}for(var b=0,A=0;A<a.length;A++){var E=a[A][0],I=a[A][1];r&&(E-=b),r&&null===I?(c.splice(E,1),b++):c[E]=I}}s=i.index,o=i.keys,a=i.edits,r=i.inArray,i=i.prev}else{if(u=h?r?s:o[s]:void 0,null==(c=h?h[u]:f))continue;h&&l.push(u)}var S,T=void 0;if(!Array.isArray(c)){if(!Ms(c))throw new Error("Invalid AST Node: ".concat(Rs(c),"."));var N=ra(e,c.kind,p);if(N){if((T=N.call(e,c,u,h,l,d))===ia)break;if(!1===T){if(!p){l.pop();continue}}else if(void 0!==T&&(a.push([u,T]),!p)){if(!Ms(T)){l.pop();continue}c=T}}}void 0===T&&w&&a.push([u,c]),p?l.pop():(i={inArray:r,index:s,keys:o,edits:a,prev:i},o=(r=Array.isArray(c))?c:null!==(S=n[c.kind])&&void 0!==S?S:[],s=-1,a=[],h&&d.push(h),h=c)}while(void 0!==i);return 0!==a.length&&(f=a[a.length-1][1]),f}(t,{leave:sa})}var sa={Name:function(t){return t.value},Variable:function(t){return"$"+t.name},Document:function(t){return ca(t.definitions,"\n\n")+"\n"},OperationDefinition:function(t){var e=t.operation,n=t.name,i=ha("(",ca(t.variableDefinitions,", "),")"),r=ca(t.directives," "),o=t.selectionSet;return n||r||i||"query"!==e?ca([e,ca([n,i]),r,o]," "):o},VariableDefinition:function(t){var e=t.variable,n=t.type,i=t.defaultValue,r=t.directives;return e+": "+n+ha(" = ",i)+ha(" ",ca(r," "))},SelectionSet:function(t){return ua(t.selections)},Field:function(t){var e=t.alias,n=t.name,i=t.arguments,r=t.directives,o=t.selectionSet,s=ha("",e,": ")+n,a=s+ha("(",ca(i,", "),")");return a.length>80&&(a=s+ha("(\n",la(ca(i,"\n")),"\n)")),ca([a,ca(r," "),o]," ")},Argument:function(t){return t.name+": "+t.value},FragmentSpread:function(t){return"..."+t.name+ha(" ",ca(t.directives," "))},InlineFragment:function(t){var e=t.typeCondition,n=t.directives,i=t.selectionSet;return ca(["...",ha("on ",e),ca(n," "),i]," ")},FragmentDefinition:function(t){var e=t.name,n=t.typeCondition,i=t.variableDefinitions,r=t.directives,o=t.selectionSet;return"fragment ".concat(e).concat(ha("(",ca(i,", "),")")," ")+"on ".concat(n," ").concat(ha("",ca(r," ")," "))+o},IntValue:function(t){return t.value},FloatValue:function(t){return t.value},StringValue:function(t,e){var n=t.value;return t.block?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=-1===t.indexOf("\n"),r=" "===t[0]||"\t"===t[0],o='"'===t[t.length-1],s="\\"===t[t.length-1],a=!i||o||s||n,c="";return!a||i&&r||(c+="\n"+e),c+=e?t.replace(/\n/g,"\n"+e):t,a&&(c+="\n"),'"""'+c.replace(/"""/g,'\\"""')+'"""'}(n,"description"===e?"":"  "):JSON.stringify(n)},BooleanValue:function(t){return t.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(t){return t.value},ListValue:function(t){return"["+ca(t.values,", ")+"]"},ObjectValue:function(t){return"{"+ca(t.fields,", ")+"}"},ObjectField:function(t){return t.name+": "+t.value},Directive:function(t){return"@"+t.name+ha("(",ca(t.arguments,", "),")")},NamedType:function(t){return t.name},ListType:function(t){return"["+t.type+"]"},NonNullType:function(t){return t.type+"!"},SchemaDefinition:aa(function(t){var e=t.directives,n=t.operationTypes;return ca(["schema",ca(e," "),ua(n)]," ")}),OperationTypeDefinition:function(t){return t.operation+": "+t.type},ScalarTypeDefinition:aa(function(t){return ca(["scalar",t.name,ca(t.directives," ")]," ")}),ObjectTypeDefinition:aa(function(t){var e=t.name,n=t.interfaces,i=t.directives,r=t.fields;return ca(["type",e,ha("implements ",ca(n," & ")),ca(i," "),ua(r)]," ")}),FieldDefinition:aa(function(t){var e=t.name,n=t.arguments,i=t.type,r=t.directives;return e+(fa(n)?ha("(\n",la(ca(n,"\n")),"\n)"):ha("(",ca(n,", "),")"))+": "+i+ha(" ",ca(r," "))}),InputValueDefinition:aa(function(t){var e=t.name,n=t.type,i=t.defaultValue,r=t.directives;return ca([e+": "+n,ha("= ",i),ca(r," ")]," ")}),InterfaceTypeDefinition:aa(function(t){var e=t.name,n=t.interfaces,i=t.directives,r=t.fields;return ca(["interface",e,ha("implements ",ca(n," & ")),ca(i," "),ua(r)]," ")}),UnionTypeDefinition:aa(function(t){var e=t.name,n=t.directives,i=t.types;return ca(["union",e,ca(n," "),i&&0!==i.length?"= "+ca(i," | "):""]," ")}),EnumTypeDefinition:aa(function(t){var e=t.name,n=t.directives,i=t.values;return ca(["enum",e,ca(n," "),ua(i)]," ")}),EnumValueDefinition:aa(function(t){return ca([t.name,ca(t.directives," ")]," ")}),InputObjectTypeDefinition:aa(function(t){var e=t.name,n=t.directives,i=t.fields;return ca(["input",e,ca(n," "),ua(i)]," ")}),DirectiveDefinition:aa(function(t){var e=t.name,n=t.arguments,i=t.repeatable,r=t.locations;return"directive @"+e+(fa(n)?ha("(\n",la(ca(n,"\n")),"\n)"):ha("(",ca(n,", "),")"))+(i?" repeatable":"")+" on "+ca(r," | ")}),SchemaExtension:function(t){var e=t.directives,n=t.operationTypes;return ca(["extend schema",ca(e," "),ua(n)]," ")},ScalarTypeExtension:function(t){return ca(["extend scalar",t.name,ca(t.directives," ")]," ")},ObjectTypeExtension:function(t){var e=t.name,n=t.interfaces,i=t.directives,r=t.fields;return ca(["extend type",e,ha("implements ",ca(n," & ")),ca(i," "),ua(r)]," ")},InterfaceTypeExtension:function(t){var e=t.name,n=t.interfaces,i=t.directives,r=t.fields;return ca(["extend interface",e,ha("implements ",ca(n," & ")),ca(i," "),ua(r)]," ")},UnionTypeExtension:function(t){var e=t.name,n=t.directives,i=t.types;return ca(["extend union",e,ca(n," "),i&&0!==i.length?"= "+ca(i," | "):""]," ")},EnumTypeExtension:function(t){var e=t.name,n=t.directives,i=t.values;return ca(["extend enum",e,ca(n," "),ua(i)]," ")},InputObjectTypeExtension:function(t){var e=t.name,n=t.directives,i=t.fields;return ca(["extend input",e,ca(n," "),ua(i)]," ")}};function aa(t){return function(e){return ca([e.description,t(e)],"\n")}}function ca(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(e=null==t?void 0:t.filter(function(t){return t}).join(n))&&void 0!==e?e:""}function ua(t){return ha("{\n",la(ca(t,"\n")),"\n}")}function ha(t,e){return null!=e&&""!==e?t+e+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""):""}function la(t){return ha("  ",t.replace(/\n/g,"\n  "))}function da(t){return-1!==t.indexOf("\n")}function fa(t){return null!=t&&t.some(da)}class pa extends Mi{constructor(t){super(t),this.constructor=pa,Object.setPrototypeOf(this,pa.prototype)}}class wa extends pa{constructor(t={}){super({name:"CanceledError",message:"Request is canceled by user",...t}),this.constructor=wa,Object.setPrototypeOf(this,wa.prototype)}}const ya=t=>!!t&&t instanceof wa;var ma;(ma||(ma={})).InvalidApiName="InvalidApiName",ma.InvalidApiName;const ga=async t=>{if(!t)return;const e=await(async t=>{if(!t||t.statusCode<300)return;const e=await(async t=>{if(!t.body)throw new Error("Missing response payload");const e=await t.body.json();return Object.assign(e,{$metadata:jn(t)})})(t),n=(t=>{const[e]=t.toString().split(/[,:]+/);return e.includes("#")?e.split("#")[1]:e})(t.headers["x-amzn-errortype"]??e.code??e.L??"UnknownError"),i=e.message??e.Message??"Unknown error",r=new Error(i);return Object.assign(r,{name:n,$metadata:jn(t)})})(va(t));if(e){const n=await(t.body?.text());return ba(e,{statusCode:t.statusCode,headers:t.headers,body:n})}},va=t=>{let e;const n=new Proxy(t.body,{get:(t,n,i)=>"json"===n?async()=>{e||(e=t.text());try{return JSON.parse(await e)}catch(n){return{}}}:"text"===n?async()=>(e||(e=t.text()),e):Reflect.get(t,n,i)});return new Proxy(t,{get:(t,e,i)=>"body"===e?n:Reflect.get(t,e,i)})},ba=(t,e)=>{const n=new pa({name:t?.name,message:t.message,underlyingError:t,response:e});return Object.assign(n,{$metadata:t.$metadata})},Aa=new Ct("RestApis"),Ea="execute-api",Ia="us-east-1",Sa=/^.+\.([a-z0-9-]+)\.([a-z0-9-]+)\.amazonaws\.com/,Ta=({headers:t},e)=>!t.authorization&&!t["x-api-key"]&&!!e,Na=Zn(ti,[Hn,Vn,({credentials:t,region:e,service:n,uriEscapePath:i=!0})=>{let r;return(o,s)=>async function(a){r=r??0;const c={credentials:"function"==typeof t?await t({forceRefresh:!!s?.isCredentialsExpired}):t,signingDate:ki(r),signingRegion:e,signingService:n,uriEscapePath:i},u=await Oi(a,c),h=await o(u),l=(({headers:t}={})=>t?.date??t?.Date??t?.["x-amz-date"])(h);return l&&(r=((t,e)=>((t,e)=>Math.abs(ki(e).getTime()-t)>=3e5)(t,e)?t-Date.now():e)(Date.parse(l),r)),h}}]),Oa=Zn(ti,[Hn,Vn]),ka=t=>{const e=t?.strategy;return"no-retry"===e?()=>Promise.resolve({retryable:!1}):(n=ga,async(t,e)=>{const i=e??await n(t)??void 0,r=i?.code||i?.name,o=t?.statusCode;return{retryable:Qn(e)||Kn(o,r)||(t=>!!t&&zn.includes(t))(r)||Jn(o,r)}});var n},Ca=async t=>{try{const{credentials:e}=await t.Auth.fetchAuthSession();if(e)return e}catch(e){Aa.debug("No credentials available, the request will be unsigned.")}return null},Ma=new WeakMap,xa=(t,{url:e,options:n,abortController:i})=>{const r=i??new AbortController,o=function(t,e){const n=t=>!!e,i=new AbortController,r=i.signal,o=e?.signal;let s;const a=async()=>{try{const e=await(n(),t());if(e.statusCode>=300)throw await ga(e);return e}catch(e){const t=o??r,n=s??t.reason;if("AbortError"===e.name||!0===t?.aborted){const t=new wa({...n&&{message:n},underlyingError:e,recoverySuggestion:"The API request was explicitly canceled. If this is not intended, validate if you called the `cancel()` function on the API request erroneously."});throw Aa.debug(e),t}throw Aa.debug(e),e}};if(n())return a();{const t=t=>{!0!==r.aborted&&(i.abort(t),t&&r.reason!==t&&(s=t))};return{response:a(),cancel:t}}}(async()=>(async(t,e,n,i)=>{const{url:r,method:o,headers:s,body:a,withCredentials:c,abortSignal:u,retryStrategy:h}=e,l=a?a instanceof FormData?a:JSON.stringify(a??""):void 0,d=((t,e)=>{const n={};for(const i in t)n[i.toLowerCase()]=t[i];if(e){const t=n["content-type"];t&&(t.startsWith("application/json")||t.startsWith("application/")&&t.includes("+json"))||(n["content-type"]="application/json; charset=UTF-8"),e instanceof FormData&&delete n["content-type"]}return n})(s,a),f={url:r,headers:d,method:o,body:l},p={retryDecider:ka(h??t?.libraryOptions?.API?.REST?.retryStrategy),computeDelay:Bn,withCrossDomainCredentials:c,abortSignal:u},w=n(f,i);let y;const m=await Ca(t);if(w&&m){const t=(t=>{const{service:e=Ea,region:n=Ia}={},{hostname:i}=t,[,r,o]=Sa.exec(i)??[];return r===Ea?{service:r,region:o??n}:"appsync-api"===r?{service:"appsync",region:o??n}:{service:e,region:n}})(r),e=i?.service??t.service,n=i?.region??t.region;y=await Na(f,{...p,credentials:m,region:n,service:e})}else y=await Oa(f,{...p});return{statusCode:y.statusCode,headers:y.headers,body:y.body}})(t,{url:e,method:"POST",...n,abortSignal:r.signal,retryStrategy:{strategy:"jittered-exponential-backoff"}},Ta,n?.signingServiceInfo),r),s=o.finally(()=>{Ma.delete(s)});return s},Da=(t,e)=>{const n=Ma.get(t);return!!n&&(n.abort(e),e&&n.signal.reason!==e&&(n.signal.reason=e),!0)},Ra=(t,e)=>{Ma.set(t,e)},Pa=[400,401,403],ja=["BadRequestException","UnauthorizedException"];var Ua,La,qa,Ba,za,_a;(La=Ua||(Ua={})).GQL_CONNECTION_INIT="connection_init",La.GQL_CONNECTION_ERROR="connection_error",La.GQL_CONNECTION_ACK="connection_ack",La.GQL_START="start",La.GQL_START_ACK="start_ack",La.DATA="data",La.GQL_CONNECTION_KEEP_ALIVE="ka",La.GQL_STOP="stop",La.GQL_COMPLETE="complete",La.GQL_ERROR="error",La.EVENT_SUBSCRIBE="subscribe",La.EVENT_PUBLISH="publish",La.EVENT_SUBSCRIBE_ACK="subscribe_success",La.EVENT_PUBLISH_ACK="publish_success",La.EVENT_STOP="unsubscribe",La.EVENT_COMPLETE="unsubscribe_success",La.EVENT_SUBSCRIBE_ERROR="subscribe_error",(Ba=qa||(qa={}))[Ba.PENDING=0]="PENDING",Ba[Ba.CONNECTED=1]="CONNECTED",Ba[Ba.FAILED=2]="FAILED",(_a=za||(za={}))[_a.CLOSED=0]="CLOSED",_a[_a.READY=1]="READY",_a[_a.CONNECTING=2]="CONNECTING";const Fa={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},Ka=3e5;var Qa,Ja,Va,Ga;(Ja=Qa||(Qa={})).CONNECTION_CLOSED="Connection closed",Ja.CONNECTION_FAILED="Connection failed",Ja.REALTIME_SUBSCRIPTION_INIT_ERROR="AppSync Realtime subscription init error",Ja.SUBSCRIPTION_ACK="Subscription ack",Ja.TIMEOUT_DISCONNECT="Timeout disconnect",(Ga=Va||(Va={})).Connected="Connected",Ga.ConnectedPendingNetwork="ConnectedPendingNetwork",Ga.ConnectionDisrupted="ConnectionDisrupted",Ga.ConnectionDisruptedPendingNetwork="ConnectionDisruptedPendingNetwork",Ga.Connecting="Connecting",Ga.ConnectedPendingDisconnect="ConnectedPendingDisconnect",Ga.Disconnected="Disconnected",Ga.ConnectedPendingKeepAlive="ConnectedPendingKeepAlive";const Ya=()=>(new Cn).networkMonitor(),Wa={KEEP_ALIVE_MISSED:{keepAliveState:"unhealthy"},KEEP_ALIVE:{keepAliveState:"healthy"},CONNECTION_ESTABLISHED:{connectionState:"connected"},CONNECTION_FAILED:{intendedConnectionState:"disconnected",connectionState:"disconnected"},CLOSING_CONNECTION:{intendedConnectionState:"disconnected"},OPENING_CONNECTION:{intendedConnectionState:"connected",connectionState:"connecting"},CLOSED:{connectionState:"disconnected"},ONLINE:{networkState:"connected"},OFFLINE:{networkState:"disconnected"}};class Ha{constructor(){this.Y=void 0,this.W={networkState:"connected",connectionState:"disconnected",intendedConnectionState:"disconnected",keepAliveState:"healthy"},this.H=Ya().subscribe(({online:t})=>{this.record(t?Wa.ONLINE:Wa.OFFLINE),this.H?.unsubscribe()}),this.Z=new ln(t=>{t.next(this.W),this.X=t})}enableNetworkMonitoring(){this.H?.unsubscribe(),void 0===this.Y&&(this.Y=Ya().subscribe(({online:t})=>{this.record(t?Wa.ONLINE:Wa.OFFLINE)}))}disableNetworkMonitoring(){this.Y?.unsubscribe(),this.Y=void 0}get connectionStateObservable(){let t;return this.Z.pipe(On(t=>this.connectionStatesTranslator(t))).pipe((e=e=>{const n=e!==t;return t=e,n},fn(function(t,n){var i=0;t.subscribe(pn(n,function(t){return e.call(undefined,t,i++)&&n.next(t)}))})));var e}record(t){"connected"===t.intendedConnectionState?this.enableNetworkMonitoring():"disconnected"===t.intendedConnectionState&&this.disableNetworkMonitoring();const e={...this.W,...t};this.W={...e},this.X?.next(this.W)}connectionStatesTranslator({connectionState:t,networkState:e,intendedConnectionState:n,keepAliveState:i}){return"connected"===t&&"disconnected"===e?Va.ConnectedPendingNetwork:"connected"===t&&"disconnected"===n?Va.ConnectedPendingDisconnect:"disconnected"===t&&"connected"===n&&"disconnected"===e?Va.ConnectionDisruptedPendingNetwork:"disconnected"===t&&"connected"===n?Va.ConnectionDisrupted:"connected"===t&&"unhealthy"===i?Va.ConnectedPendingKeepAlive:"connecting"===t?Va.Connecting:"disconnected"===t?Va.Disconnected:Va.Connected}}var Za,Xa;(Xa=Za||(Za={})).START_RECONNECT="START_RECONNECT",Xa.HALT_RECONNECT="HALT_RECONNECT";class $a{constructor(){this.reconnectObservers=[]}addObserver(t){this.reconnectObservers.push(t)}record(t){t===Za.START_RECONNECT&&void 0===this.reconnectSetTimeoutId&&void 0===this.reconnectIntervalId&&(this.reconnectSetTimeoutId=setTimeout(()=>{this.$(),this.reconnectIntervalId=setInterval(()=>{this.$()},6e4)},5e3)),t===Za.HALT_RECONNECT&&(this.reconnectIntervalId&&(clearInterval(this.reconnectIntervalId),this.reconnectIntervalId=void 0),this.reconnectSetTimeoutId&&(clearTimeout(this.reconnectSetTimeoutId),this.reconnectSetTimeoutId=void 0))}close(){this.reconnectObservers.forEach(t=>{t.complete?.()})}$(){this.reconnectObservers.forEach(t=>{t.next?.()})}}const tc="wss://",ec=/^https:\/\/\w{26}\.appsync-api\.\w{2}(?:(?:-\w{2,})+)-\d\.amazonaws.com(?:\.cn)?\/graphql$/i,nc=/^https:\/\/\w{26}\.\w+-api\.\w{2}(?:(?:-\w{2,})+)-\d\.amazonaws.com(?:\.cn)?\/event$/i,ic="/realtime",rc=async t=>{const{appSyncGraphqlEndpoint:e,query:n,libraryConfigHeaders:i=()=>({}),additionalHeaders:r={},authToken:o}=t;let s={};const a=await i();if("function"==typeof r){const t={url:e||"",queryString:n||""};s=await r(t)}else s=r;return o&&(s={...s,Authorization:o}),{additionalCustomHeaders:s,libraryConfigHeaders:a}},oc=new Ct("AWSAppSyncRealTimeProvider Auth"),sc=async({host:t})=>{const e=await Pn();return{Authorization:e?.tokens?.accessToken?.toString(),host:t}},ac=async({apiKey:t,host:e})=>({host:e,"x-amz-date":(new Date).toISOString().replace(/[:-]|\.\d{3}/g,""),"x-api-key":t}),cc=async({payload:t,canonicalUri:e,appSyncGraphqlEndpoint:n,region:i})=>{const r={region:i,service:"appsync"},o=(await Pn()).credentials,s={url:`${n}${e}`,data:t,method:"POST",headers:{...Fa}};return Oi({headers:s.headers,method:s.method,url:new ei(s.url),body:s.data},{credentials:o,signingRegion:r.region,signingService:r.service}).headers},uc=async({host:t,additionalCustomHeaders:e})=>{if(!e?.Authorization)throw new Error("No auth token specified");return{Authorization:e.Authorization,host:t}},hc=async({apiKey:t,authenticationType:e,canonicalUri:n,appSyncGraphqlEndpoint:i,region:r,additionalCustomHeaders:o,payload:s})=>{const a={apiKey:ac,iam:cc,oidc:sc,userPool:sc,lambda:uc,none:uc};if(e&&a[e]){const c=a[e],u=i?new ei(i).host:void 0,h="apiKey"===e?t:void 0;return oc.debug(`Authenticating with ${JSON.stringify(e)}`),await c({payload:s,canonicalUri:n,appSyncGraphqlEndpoint:i,apiKey:h,region:r,host:u,additionalCustomHeaders:o})}oc.debug(`Authentication type ${e} not supported`)},lc=t=>{jt.dispatch("api",t,"PubSub",Rt)};class dc{constructor(t){this.subscriptionObserverMap=new Map,this.allowNoSubscriptions=!1,this.socketStatus=za.CLOSED,this.keepAliveTimestamp=Date.now(),this.promiseArray=[],this.connectionStateMonitor=new Ha,this.reconnectionMonitor=new $a,this.tt=async(t,e)=>{this.logger.debug(`Establishing WebSocket connection to ${t}`);try{await this.et(t,e),await this.nt()}catch(n){const{errorType:t,errorCode:e}=n;throw Pa.includes(e)||ja.includes(t)?new Ci(t):t?new Error(t):n}},this.logger=new Ct(t.providerName),this.wsProtocolName=t.wsProtocolName,this.wsConnectUri=t.connectUri,this.connectionStateMonitorSubscription=this.it()}close(){return this.socketStatus=za.CLOSED,this.connectionStateMonitor.record(Wa.CONNECTION_FAILED),this.connectionStateMonitorSubscription.unsubscribe(),this.reconnectionMonitor.close(),new Promise((t,e)=>{this.awsRealTimeSocket?(this.awsRealTimeSocket.onclose=e=>{this.rt(),this.subscriptionObserverMap=new Map,this.awsRealTimeSocket=void 0,t()},this.awsRealTimeSocket.onerror=t=>{e(t)},this.awsRealTimeSocket.close()):t()})}subscribe(t,e){return new ln(n=>{if(!t?.appSyncGraphqlEndpoint)return n.error({errors:[{...new Es("Subscribe only available for AWS AppSync endpoint")}]}),void n.complete();let i=!1;const r=Wn(),o=()=>{i||(i=!0,this.ot({options:t,observer:n,subscriptionId:r,customUserAgentDetails:e}).catch(t=>{this.logger.debug(`${Qa.REALTIME_SUBSCRIPTION_INIT_ERROR}: ${t}`),this.rt()}).finally(()=>{i=!1}))},s=new ln(t=>{this.reconnectionMonitor.addObserver(t)}).subscribe(()=>{o()});return o(),async()=>{await this.st(r,s)}})}async connect(t){this.socketStatus!==za.READY&&await this.ct(t)}async publish(t,e){if(this.socketStatus!==za.READY)throw new Error("Subscription has not been initialized");return this.ut(t,e)}async ct(t){const{apiKey:e,appSyncGraphqlEndpoint:n,authenticationType:i,region:r}=t,{additionalCustomHeaders:o}=await rc(t);this.connectionStateMonitor.record(Wa.OPENING_CONNECTION),await this.ht({apiKey:e,appSyncGraphqlEndpoint:n,authenticationType:i,region:r,additionalCustomHeaders:o})}async ut(t,e){const n=Wn(),{additionalCustomHeaders:i,libraryConfigHeaders:r}=await rc(t),o=await this.lt({options:t,subscriptionId:n,customUserAgentDetails:e,additionalCustomHeaders:i,libraryConfigHeaders:r,publish:!0});return new Promise((t,e)=>{if(this.awsRealTimeSocket){const i=r=>{const o=JSON.parse(r.data);if(o.id===n&&"publish_success"===o.type&&(this.awsRealTimeSocket&&this.awsRealTimeSocket.removeEventListener("message",i),a(),t()),o.errors&&o.errors.length>0){const t=o.errors.map(t=>t.errorType);a(),e(new Error(`Publish errors: ${t.join(", ")}`))}},r=t=>{a(),e(new Error(`WebSocket error: ${t}`))},s=()=>{a(),e(new Error("WebSocket is closed"))},a=()=>{this.awsRealTimeSocket?.removeEventListener("message",i),this.awsRealTimeSocket?.removeEventListener("error",r),this.awsRealTimeSocket?.removeEventListener("close",s)};this.awsRealTimeSocket.addEventListener("message",i),this.awsRealTimeSocket.addEventListener("error",r),this.awsRealTimeSocket.addEventListener("close",s),this.awsRealTimeSocket.send(o)}else e(new Error("WebSocket is not connected"))})}async st(t,e){e?.unsubscribe();try{await this.dt(t);const{subscriptionState:e}=this.subscriptionObserverMap.get(t)||{};if(!e)return;if(e!==qa.CONNECTED)throw new Error("Subscription never connected");this.ft(t)}catch(n){this.logger.debug(`Error while unsubscribing ${n}`)}finally{this.wt(t)}}it(){return this.connectionStateMonitor.connectionStateObservable.subscribe(t=>{lc({event:"ConnectionStateChange",data:{provider:this,connectionState:t},message:`Connection state is ${t}`}),this.connectionState=t,t===Va.ConnectionDisrupted&&this.reconnectionMonitor.record(Za.START_RECONNECT),[Va.Connected,Va.ConnectedPendingDisconnect,Va.ConnectedPendingKeepAlive,Va.ConnectedPendingNetwork,Va.ConnectionDisruptedPendingNetwork,Va.Disconnected].includes(t)&&this.reconnectionMonitor.record(Za.HALT_RECONNECT)})}async ot({options:t,observer:e,subscriptionId:n,customUserAgentDetails:i}){const{query:r,variables:o}=t;this.subscriptionObserverMap.set(n,{observer:e,query:r??"",variables:o??{},subscriptionState:qa.PENDING,startAckTimeoutId:void 0});const{additionalCustomHeaders:s,libraryConfigHeaders:a}=await rc(t),c=await this.lt({options:t,subscriptionId:n,customUserAgentDetails:i,additionalCustomHeaders:s,libraryConfigHeaders:a});try{await this.ct(t)}catch(l){return void this.yt(n,e,l)}const{subscriptionFailedCallback:u,subscriptionReadyCallback:h}=this.subscriptionObserverMap.get(n)??{};this.subscriptionObserverMap.set(n,{observer:e,subscriptionState:qa.PENDING,query:r??"",variables:o??{},subscriptionReadyCallback:h,subscriptionFailedCallback:u,startAckTimeoutId:setTimeout(()=>{this.gt(n)},15e3)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(c)}yt(t,e,n){this.logger.debug({err:n});const i=String(n.message??"");if(this.rt(),this.connectionState!==Va.ConnectionDisruptedPendingNetwork){Ut(n)?e.error({errors:[{...new Es(`${Qa.CONNECTION_FAILED}: ${i}`)}]}):this.logger.debug(`${Qa.CONNECTION_FAILED}: ${i}`);const{subscriptionFailedCallback:r}=this.subscriptionObserverMap.get(t)||{};"function"==typeof r&&r()}}async dt(t){const e=this.subscriptionObserverMap.get(t);if(e){const{subscriptionState:n}=e;if(n===qa.PENDING)return new Promise((n,i)=>{const{observer:r,subscriptionState:o,variables:s,query:a}=e;this.subscriptionObserverMap.set(t,{observer:r,subscriptionState:o,variables:s,query:a,subscriptionReadyCallback:n,subscriptionFailedCallback:i})})}}ft(t){try{if(this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===za.READY){const e=this.vt(t),n=JSON.stringify(e);this.awsRealTimeSocket.send(n)}}catch(e){this.logger.debug({err:e})}}wt(t){this.subscriptionObserverMap.delete(t),this.allowNoSubscriptions||setTimeout(this.bt.bind(this),1e3)}bt(){if(!(this.subscriptionObserverMap.size>0))if(this.awsRealTimeSocket)if(this.connectionStateMonitor.record(Wa.CLOSING_CONNECTION),this.awsRealTimeSocket.bufferedAmount>0)setTimeout(this.bt.bind(this),1e3);else{this.logger.debug("closing WebSocket...");const t=this.awsRealTimeSocket;t.onclose=null,t.onerror=null,t.close(1e3),this.awsRealTimeSocket=void 0,this.socketStatus=za.CLOSED,this.rt()}else this.socketStatus=za.CLOSED}maintainKeepAlive(){this.keepAliveTimestamp=Date.now()}keepAliveHeartbeat(t){const e=Date.now();e-this.keepAliveTimestamp>65e3?this.connectionStateMonitor.record(Wa.KEEP_ALIVE_MISSED):this.connectionStateMonitor.record(Wa.KEEP_ALIVE),e-this.keepAliveTimestamp>t&&this.At(Qa.TIMEOUT_DISCONNECT)}Et(t){if("string"!=typeof t.data)return;const[e,n]=this.It(t);if(e)return void this.maintainKeepAlive();const{type:i,id:r,payload:o}=n,{observer:s=null,query:a="",variables:c={},startAckTimeoutId:u,subscriptionReadyCallback:h,subscriptionFailedCallback:l}=this.subscriptionObserverMap.get(r)||{};if(i===Ua.GQL_START_ACK||i===Ua.EVENT_SUBSCRIBE_ACK){this.logger.debug(`subscription ready for ${JSON.stringify({query:a,variables:c})}`),"function"==typeof h&&h(),u&&clearTimeout(u),lc({event:Qa.SUBSCRIPTION_ACK,data:{query:a,variables:c},message:"Connection established for subscription"});const t=qa.CONNECTED;return s&&this.subscriptionObserverMap.set(r,{observer:s,query:a,variables:c,startAckTimeoutId:void 0,subscriptionState:t,subscriptionReadyCallback:h,subscriptionFailedCallback:l}),void this.connectionStateMonitor.record(Wa.CONNECTION_ESTABLISHED)}if(i!==Ua.GQL_CONNECTION_KEEP_ALIVE){if(i===Ua.GQL_ERROR||i===Ua.EVENT_SUBSCRIBE_ERROR){const e=qa.FAILED;if(s){this.subscriptionObserverMap.set(r,{observer:s,query:a,variables:c,startAckTimeoutId:u,subscriptionReadyCallback:h,subscriptionFailedCallback:l,subscriptionState:e});let d=JSON.stringify(o??n);if(i===Ua.EVENT_SUBSCRIBE_ERROR){const{errors:e}=JSON.parse(String(t.data));if(Array.isArray(e)&&e.length>0){const t=e[0];d=`${t.errorType}: ${t.message}`}}this.logger.debug(`${Qa.CONNECTION_FAILED}: ${d}`),s.error({errors:[{...new Es(`${Qa.CONNECTION_FAILED}: ${d}`)}]}),u&&clearTimeout(u),"function"==typeof l&&l()}}}else this.maintainKeepAlive()}At(t){this.logger.debug(`Disconnect error: ${t}`),this.awsRealTimeSocket&&(this.rt(),this.awsRealTimeSocket.close()),this.socketStatus=za.CLOSED}rt(){this.keepAliveHeartbeatIntervalId&&(clearInterval(this.keepAliveHeartbeatIntervalId),this.keepAliveHeartbeatIntervalId=void 0),this.connectionStateMonitor.record(Wa.CLOSED)}gt(t){const e=this.subscriptionObserverMap.get(t);if(e){const{observer:n,query:i,variables:r}=e;if(!n)return;this.subscriptionObserverMap.set(t,{observer:n,query:i,variables:r,subscriptionState:qa.FAILED}),this.rt(),this.logger.debug("timeoutStartSubscription",JSON.stringify({query:i,variables:r}))}}ht({appSyncGraphqlEndpoint:t,authenticationType:e,apiKey:n,region:i,additionalCustomHeaders:r}){if(this.socketStatus!==za.READY)return new Promise(async(o,s)=>{if(this.promiseArray.push({res:o,rej:s}),this.socketStatus===za.CLOSED)try{this.socketStatus=za.CONNECTING;const o="{}",s=await hc({authenticationType:e,payload:o,canonicalUri:this.wsConnectUri,apiKey:n,appSyncGraphqlEndpoint:t,region:i,additionalCustomHeaders:r}),a=s?JSON.stringify(s):"",c=`header-${Di.convert(a,{urlSafe:!0,skipPadding:!0})}`,u=(t=>{const e=(t=>{if(!t)return{};if("Authorization"in t){const{Authorization:e,...n}=t;return n}return t})(t),n=new ni;return Object.entries(e).forEach(([t,e])=>{n.append(t,e)}),n})(r),h=((t,e)=>{const n=(t=>{let e=t??"";return e=null!==e.match(nc)?e.concat(ic).replace("ddpg-api","grt-gamma").replace("appsync-api","appsync-realtime-api"):null===e.match(ec)?e.concat(ic):e.replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta").replace("ddpg-api","grt-gamma"),e=e.replace("https://",tc).replace("http://",tc),new ei(e)})(t),i=new ni(n.search);for(const[r,o]of e.entries())i.append(r,o);return n.search=i.toString(),n.toString()})(t,u);await this.St(h,c),this.promiseArray.forEach(({res:t})=>{this.logger.debug("Notifying connection successful"),t()}),this.socketStatus=za.READY,this.promiseArray=[]}catch(a){this.logger.debug("Connection exited with",a),this.promiseArray.forEach(({rej:t})=>{t(a)}),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=void 0,this.socketStatus=za.CLOSED}})}async St(t,e){this.logger.debug("Establishing retryable connection"),await((t,e,n=3e5)=>async function(t,e,n){if("function"!=typeof t)throw Error("functionToRetry must be a function");return new Promise(async(i,r)=>{let o,s=0,a=()=>{};for(;;){s++,Lt.debug(`${t.name} attempt #${s} with this vars: ${JSON.stringify(e)}`);try{return void i(await t(...e))}catch(c){if(o=c,Lt.debug(`error on ${t.name}`,c),Ut(c))return Lt.debug(`${t.name} non retryable error`,c),void r(c);const i=n(s,e,c);if(Lt.debug(`${t.name} retrying in ${i} ms`),!1===i)return void r(c);await new Promise(t=>{a=t,setTimeout(a,i)})}}r(o)})}(t,e,Ln(n)))(this.tt.bind(this),[t,e],5e3)}async et(t,e){return new Promise((n,i)=>{const r=this.Tt(t,[this.wsProtocolName,e]);r.onerror=()=>{this.logger.debug("WebSocket connection error")},r.onclose=()=>{this.rt(),i(new Error("Connection handshake error"))},r.onopen=()=>{this.awsRealTimeSocket=r,n()}})}Tt(t,e){return new WebSocket(t,e)}async nt(){return new Promise((t,e)=>{if(!this.awsRealTimeSocket)return void e(new Error("awsRealTimeSocket undefined"));let n=!1;this.awsRealTimeSocket.onerror=t=>{this.logger.debug(`WebSocket error ${JSON.stringify(t)}`)},this.awsRealTimeSocket.onclose=t=>{this.logger.debug(`WebSocket closed ${t.reason}`),this.rt(),e(new Error(JSON.stringify(t)))},this.awsRealTimeSocket.onmessage=i=>{if("string"!=typeof i.data)return;this.logger.debug(`subscription message from AWS AppSyncRealTime: ${i.data} `);const r=JSON.parse(i.data),{type:o}=r,s=this.Nt(r);if(o===Ua.GQL_CONNECTION_ACK)return n=!0,this.Ot(s),void t("Connected to AWS AppSyncRealTime");if(o===Ua.GQL_CONNECTION_ERROR){const{errorType:t,errorCode:n}=this.kt(r);e({errorType:t,errorCode:n})}};const i={type:Ua.GQL_CONNECTION_INIT};this.awsRealTimeSocket.send(JSON.stringify(i));const r=t=>{t||(this.connectionStateMonitor.record(Wa.CONNECTION_FAILED),e(new Error("Connection timeout: ack from AWSAppSyncRealTime was not received after 15000 ms")))};setTimeout(()=>{r(n)},15e3)})}Ot(t){this.awsRealTimeSocket&&(this.keepAliveHeartbeatIntervalId=setInterval(()=>{this.keepAliveHeartbeat(t)},5e3),this.awsRealTimeSocket.onmessage=this.Et.bind(this),this.awsRealTimeSocket.onerror=t=>{this.logger.debug(t),this.At(Qa.CONNECTION_CLOSED)},this.awsRealTimeSocket.onclose=t=>{this.logger.debug(`WebSocket closed ${t.reason}`),this.rt(),this.At(Qa.CONNECTION_CLOSED)})}}const fc="AWSAppSyncRealTimeProvider";class pc extends dc{constructor(){super({providerName:fc,wsProtocolName:"graphql-ws",connectUri:"/connect"})}getProviderName(){return fc}subscribe(t,e){return super.subscribe(t,e)}async lt({options:t,subscriptionId:e,customUserAgentDetails:n,additionalCustomHeaders:i,libraryConfigHeaders:r}){const{appSyncGraphqlEndpoint:o,authenticationType:s,query:a,variables:c,apiKey:u,region:h}=t,l={query:a,variables:c},d=JSON.stringify(l),f={id:e,payload:{data:d,extensions:{authorization:{...{...await hc({apiKey:u,appSyncGraphqlEndpoint:o,authenticationType:s,payload:d,canonicalUri:"",region:h,additionalCustomHeaders:i}),...r,...i,[Tt]:Ge(n)}}}},type:Ua.GQL_START};return JSON.stringify(f)}It(t){this.logger.debug(`subscription message from AWS AppSync RealTime: ${t.data}`);const{id:e="",payload:n,type:i}=JSON.parse(String(t.data)),{observer:r=null,query:o="",variables:s={}}=this.subscriptionObserverMap.get(e)||{};return this.logger.debug({id:e,observer:r,query:o,variables:s}),i===Ua.DATA&&n&&n.data?(r?r.next(n):this.logger.debug(`observer not found for id: ${e}`),[!0,{id:e,type:i,payload:n}]):[!1,{id:e,type:i,payload:n}]}vt(t){return{id:t,type:Ua.GQL_STOP}}Nt(t){const{payload:{connectionTimeoutMs:e=Ka}={}}=t;return e}kt(t){const{payload:{errors:[{errorType:e="",errorCode:n=0}={}]=[]}={}}=t;return{errorCode:n,errorType:e}}}class wc extends Mt{constructor(t){super(t),this.constructor=wc,Object.setPrototypeOf(this,wc.prototype)}}var yc,mc;(mc=yc||(yc={})).NoAuthSession="NoAuthSession",mc.NoRegion="NoRegion",mc.NoCustomEndpoint="NoCustomEndpoint";const gc={[yc.NoAuthSession]:{message:"Auth session should not be empty."},[yc.NoRegion]:{message:"Missing region."},[yc.NoCustomEndpoint]:{message:"Custom endpoint region is present without custom endpoint."}},vc=new Ct("GraphQLAPI resolveConfig"),bc=t=>{const e=t.getConfig();e.API?.GraphQL||vc.warn("The API configuration is missing. This is likely due to Amplify.configure() not being called prior to generateClient().");const{apiKey:n,customEndpoint:i,customEndpointRegion:r,defaultAuthMode:o,endpoint:s,region:a}=e.API?.GraphQL??{};return function(t,e){const{message:n,recoverySuggestion:i}=gc[e];if(!t)throw new wc({name:e,message:n,recoverySuggestion:i})}(!(!i&&r),yc.NoCustomEndpoint),{apiKey:n,customEndpoint:i,customEndpointRegion:r,defaultAuthMode:o,endpoint:s,region:a}},Ac=t=>{const e=t.libraryOptions?.API?.GraphQL?.headers,n=t.libraryOptions?.API?.GraphQL?.withCredentials;return{headers:e,withCredentials:n}};function Ec(t){return t.errors&&Array.isArray(t.errors)&&t.errors.forEach(t=>{var e;e=t,(e?.originalError?.name?.startsWith("UnauthorizedException")||e.message?.startsWith("Connection failed:")&&e.message?.includes("Permission denied"))&&(t.message="Unauthorized",t.recoverySuggestion="If you're calling an Amplify-generated API, make sure to set the \"authMode\" in generateClient({ authMode: '...' }) to the backend authorization rule's auth provider ('apiKey', 'userPool', 'iam', 'oidc', 'lambda')")}),t}var Ic,Sc;(Sc=Ic||(Ic={})).NO_API_KEY="No api-key configured",Sc.NO_CURRENT_USER="No current user",Sc.NO_CREDENTIALS="No credentials",Sc.NO_FEDERATED_JWT="No federated jwt",Sc.NO_AUTH_TOKEN="No auth token specified";const Tc=Symbol("amplify"),Nc=Symbol("authMode"),Oc=Symbol("authToken"),kc=Symbol("apiKey"),Cc=Symbol("headers"),Mc=Symbol("endpoint");function xc(t){const e=t;return{amplify:e[Tc],apiKey:e[kc],authMode:e[Nc],authToken:e[Oc],endpoint:e[Mc],headers:e[Cc]}}const Dc={name:"NoApiKey",message:Ic.NO_API_KEY,recoverySuggestion:'The API request was made with `authMode: "apiKey"` but no API Key was passed into `Amplify.configure()`. Review if your API key is passed into the `Amplify.configure()` function.'},Rc={name:"NoCredentials",message:Ic.NO_CREDENTIALS,recoverySuggestion:'The API request was made with `authMode: "iam"` but no authentication credentials are available.\n\nIf you intended to make a request using an authenticated role, review if your user is signed in before making the request.\n\nIf you intend to make a request using an unauthenticated role or also known as "guest access", verify if "Auth.Cognito.allowGuestAccess" is set to "true" in the `Amplify.configure()` function.'},Pc={name:"NoValidAuthTokens",message:Ic.NO_FEDERATED_JWT,recoverySuggestion:"If you intended to make an authenticated API request, review if the current user is signed in."},jc={name:"NoSignedUser",message:Ic.NO_CURRENT_USER,recoverySuggestion:"Review the underlying exception field for more details. If you intended to make an authenticated API request, review if the current user is signed in."},Uc={name:"NoAuthorizationHeader",message:Ic.NO_AUTH_TOKEN,recoverySuggestion:'The API request was made with `authMode: "lambda"` but no `authToken` is set. Review if a valid authToken is passed into the request options or in the `Amplify.configure()` function.'},Lc={name:"NoEndpoint",message:"No GraphQL endpoint configured in `Amplify.configure()`.",recoverySuggestion:"Review if the GraphQL API endpoint is set in the `Amplify.configure()` function."},qc=t=>({data:{},errors:[new Es(t.message,null,null,null,null,t)]}),Bc="x-amz-user-agent";class zc{constructor(){this.appSyncRealTime=new Map,this.Ct={post:xa,cancelREST:Da,isCancelErrorREST:ya,updateRequestToBeCancellable:Ra}}getModuleName(){return"InternalGraphQLAPI"}getGraphqlOperationType(t){const e=Xs(t).definitions,[{operation:n}]=e;return n}graphql(t,{query:e,variables:n={},authMode:i,authToken:r,endpoint:o,apiKey:s},a,c){const u=Xs("string"==typeof e?e:oa(e)),[h={}]=u.definitions.filter(t=>"OperationDefinition"===t.kind),{operation:l}=h,d=a||{};switch(l){case"query":case"mutation":{const e=new AbortController;let a;return a=(t=>"function"!=typeof t)(t)?this.Mt(t,{query:u,variables:n,authMode:i,apiKey:s,endpoint:o},d,e,c,r):t(async t=>await this.Mt(t,{query:u,variables:n,authMode:i,apiKey:s,endpoint:o},d,e,c,r)),this.Ct.updateRequestToBeCancellable(a,e),a}case"subscription":return this.xt(t,{query:u,variables:n,authMode:i,apiKey:s,endpoint:o},d,c,r);default:throw new Error(`invalid operation type: ${l}`)}}async Mt(t,{query:e,variables:n,authMode:i,endpoint:r,apiKey:o},s={},a,c,u){const{apiKey:h,region:l,endpoint:d,customEndpoint:f,customEndpointRegion:p,defaultAuthMode:w}=bc(t),y=i||w||"iam",m="identityPool"===y?"iam":y,{headers:g,withCredentials:v}=Ac(t);let b;if("function"==typeof s){const t={method:"POST",url:new ei(r||f||d||"").toString(),queryString:oa(e)};b=await s(t)}else b=s;u&&(b={...b,Authorization:u});const A=await async function(t,e,n,i={}){let r={};switch(e){case"apiKey":if(!n)throw new wc(Dc);r={"X-Api-Key":n};break;case"iam":if(void 0===(await t.Auth.fetchAuthSession()).credentials)throw new wc(Rc);break;case"oidc":case"userPool":{let e;try{e=(await t.Auth.fetchAuthSession()).tokens?.accessToken.toString()}catch(o){throw new wc({...jc,underlyingError:o})}if(!e)throw new wc(Pc);r={Authorization:e};break}case"lambda":if("object"==typeof i&&!i.Authorization)throw new wc(Uc);r={Authorization:i.Authorization}}return r}(t,m,o??h,b),E={...!f&&A,...f&&(p?A:{})||{},...g&&await g({query:oa(e),variables:n}),...b,...!f&&{[Bc]:Ge(c)}},I={query:oa(e),variables:n||null};let S;S=f&&!p||"oidc"!==m&&"userPool"!==m&&"iam"!==m&&"lambda"!==m?void 0:{service:p?"execute-api":"appsync",region:p||l};const T=r||f||d;if(!T)throw qc(new wc(Lc));let N;try{const{body:e}=await this.Ct.post(t,{url:new ei(T),options:{headers:E,body:I,signingServiceInfo:S,withCredentials:v},abortController:a});N=await e.json()}catch(O){if(this.isCancelError(O))throw O;N=qc(O)}if(function(t){if(!t)return!1;const e=t;return Array.isArray(e.errors)&&e.errors.length>0}(N))throw Ec(N);return N}isCancelError(t){return this.Ct.isCancelErrorREST(t)}cancel(t,e){return this.Ct.cancelREST(t,e)}xt(t,{query:e,variables:n,authMode:i,apiKey:r,endpoint:o},s={},a,c){const u=bc(t),h=i||u?.defaultAuthMode||"iam",l="identityPool"===h?"iam":h,{headers:d}=Ac(t),f=o??u?.endpoint,p=f??"none",w=this.appSyncRealTime.get(p)??new pc;return this.appSyncRealTime.set(p,w),w.subscribe({query:oa(e),variables:n,appSyncGraphqlEndpoint:f,region:u?.region,authenticationType:l,apiKey:r??u?.apiKey,additionalHeaders:s,authToken:c,libraryConfigHeaders:d},a).pipe(kn(t=>{if(t.errors)throw Ec(t);throw t}))}}function _c(t){const e=new Set;for(const n of t.attributes||[])if(Fc(n))for(const t of n.properties.rules)"owner"===t.allow?e.add(t.ownerField||"owner"):"groups"===t.allow&&void 0!==t.groupsField&&e.add(t.groupsField);return Array.from(e)}function Fc(t){return!("auth"!==t?.type||"object"!=typeof t?.properties||!Array.isArray(t?.properties?.rules))&&(t?.properties?.rules).every(t=>!!t.allow)}function Kc(t){return`${t[0].toUpperCase()}${t.slice(1)}`}function Qc(t){let e,n;const i=new Promise((t,i)=>{e=t,n=i});return t(i).then(t=>{e(t)}).catch(t=>{n(t)}),i}const Jc=new WeakMap;function Vc(t,e){return Jc.set(e,t),t.finally(()=>{Jc.delete(e)})}const Gc="HAS_ONE",Yc="BELONGS_TO",Wc={ID:"ID",String:"String",AWSDate:"String",AWSTime:"String",AWSDateTime:"String",AWSTimestamp:"Int",AWSEmail:"String",AWSPhone:"String",AWSURL:"String",AWSIPAddress:"String",AWSJSON:"String",Boolean:"Boolean",Int:"Int",Float:"Float"},Hc=t=>1===t.length?t[0]:t.reduce((t,e,n)=>0===n?e:t+Kc(e),""),Zc=(t,e,n)=>{if(!n)return null;const i={};for(const[r,o]of Object.entries(n)){const n=e?t.models[e]?.fields[r]:void 0,s={fieldDef:n,value:o};Xc(s)?i[r]=s.value.items.map(e=>Zc(t,s.fieldDef.type.model,e)):$c(n)?i[r]=Zc(t,n.type.model,o):i[r]=o}return i};function Xc(t){return"object"==typeof t.fieldDef?.type&&"model"in t.fieldDef.type&&"string"==typeof t.fieldDef.type.model&&t.fieldDef.isArray&&Array.isArray(t.value?.items)}function $c(t){return"object"==typeof t?.type&&"model"in t.type&&"string"==typeof t.type.model}function tu(t,e,n,i,r,o,s=!1){const a=i.models[e],c=a.fields,u=Object.entries(c).filter(([t,e])=>void 0!==e?.type?.model).map(([t])=>t);return n.map(e=>{if(null==e)return e;const n={};for(const h of u){const u=c[h],l=u?.type,d=l.model,f=i.models[d],p=f.primaryKeyInfo.primaryKeyFieldName,w=f.primaryKeyInfo.sortKeyFieldNames,y=u.association?.connectionType;let m=[];u.association&&"associatedWith"in u.association&&(m=u.association.associatedWith);const g=[];switch(u.association&&"targetNames"in u.association&&g.push(...u.association.targetNames),y){case Yc:{const i=w.reduce((t,n)=>(e[n]&&(t[n]=e[n]),t),{});if(void 0===t.models[d]?.get)break;n[h]=s?(n,s)=>e[g[0]]?t.models[d].get(n,{[p]:e[g[0]],...i},{authMode:s?.authMode||r,authToken:s?.authToken||o}):{data:null}:n=>e[g[0]]?t.models[d].get({[p]:e[g[0]],...i},{authMode:n?.authMode||r,authToken:n?.authToken||o}):{data:null};break}case Gc:case"HAS_MANY":{const i=y===Gc?t=>({data:t?.data.shift()||null,errors:t.errors,extensions:t.extensions}):t=>t,c=a.primaryKeyInfo.primaryKeyFieldName,u=a.primaryKeyInfo.sortKeyFieldNames,l=f.fields[m[0]];if(l.type.model){let a=[];l.association&&"targetNames"in l.association&&(a=l.association?.targetNames);const f=a.map((t,n)=>0===n?{[t]:{eq:e[c]}}:{[t]:{eq:e[u[n-1]]}});if(void 0===t.models[d]?.list)break;n[h]=s?(n,s)=>e[c]?Qc(async e=>{const a=Vc(t.models[d].list(n,{filter:{and:f},limit:s?.limit,nextToken:s?.nextToken,authMode:s?.authMode||r,authToken:s?.authToken||o}),e);return i(await a)}):[]:n=>e[c]?Qc(async e=>{const s=Vc(t.models[d].list({filter:{and:f},limit:n?.limit,nextToken:n?.nextToken,authMode:n?.authMode||r,authToken:n?.authToken||o}),e);return i(await s)}):[];break}const p=m.map((t,n)=>0===n?{[t]:{eq:e[c]}}:{[t]:{eq:e[u[n-1]]}});if(void 0===t.models[d]?.list)break;n[h]=s?(n,s)=>e[c]?Qc(async e=>{const a=Vc(t.models[d].list(n,{filter:{and:p},limit:s?.limit,nextToken:s?.nextToken,authMode:s?.authMode||r,authToken:s?.authToken||o}),e);return i(await a)}):[]:n=>e[c]?Qc(async e=>{const s=Vc(t.models[d].list({filter:{and:p},limit:n?.limit,nextToken:n?.nextToken,authMode:n?.authMode||r,authToken:n?.authToken||o}),e);return i(await s)}):[];break}}}return{...e,...n}})}const eu={CREATE:{operationPrefix:"create",usePlural:!1},GET:{operationPrefix:"get",usePlural:!1},UPDATE:{operationPrefix:"update",usePlural:!1},DELETE:{operationPrefix:"delete",usePlural:!1},LIST:{operationPrefix:"list",usePlural:!0},INDEX_QUERY:{operationPrefix:"",usePlural:!1},ONCREATE:{operationPrefix:"onCreate",usePlural:!1},ONUPDATE:{operationPrefix:"onUpdate",usePlural:!1},ONDELETE:{operationPrefix:"onDelete",usePlural:!1},OBSERVEQUERY:{operationPrefix:"observeQuery",usePlural:!1}},nu=(t,e)=>{const{fields:n}=t,i=Object.values(n).map(({type:t,name:n})=>"string"==typeof t.enum?[n,ru]:"string"==typeof t.nonModel?[n,nu(e.nonModels[t.nonModel],e)]:"string"==typeof t?[n,ru]:void 0).filter(t=>void 0!==t);return Object.fromEntries(i)},iu=(t,e)=>{const{fields:n}=t,i=Object.values(n).map(({type:t,name:n})=>"string"==typeof t.enum||"string"==typeof t?[n,ru]:"string"==typeof t.nonModel?[n,nu(e.nonModels[t.nonModel],e)]:void 0).filter(t=>void 0!==t),r=_c(t).map(t=>[t,ru]);return Object.fromEntries(i.concat(r))},ru="";function ou(t,e,n){const i=(e,n)=>{const[r,...o]=e.split("."),s=o[0],a=t.models[n]??t.nonModels[n],c=a?.fields,u=c?.[r]?.type?.model,h=t.models[u],l=c?.[r]?.type?.nonModel,d=t.nonModels[l],f=h?"model":d?"nonModel":"field";if("nonModel"===f){let e={};if(!s)throw Error(`${r} must declare a wildcard (*) or a field of custom type ${l}`);return e="*"===s?{[r]:nu(d,t)}:{[r]:i(o.join("."),l)},e}if("model"===f){let e={};if(!s)throw Error(`${r} must declare a wildcard (*) or a field of model ${u}`);if("*"===s){const n=t.models[u];e={[r]:iu(n,t)}}else e={[r]:i(o.join("."),u)};return c[r]?.isArray&&(e={[r]:{items:e[r]}}),e}{const e=c?.[r],i=t.nonModels[n],o=i?.fields?.[r];if(i){if(!o)throw Error(`${r} is not a field of custom type ${n}`)}else{const t=_c(a).includes(r);if(!e&&!t)throw Error(`${r} is not a field of model ${n}`)}return{[r]:ru}}};return n.reduce((t,n)=>au(i(n,e),t),{})}function su(t){const e=[];return Object.entries(t).forEach(([t,n])=>{n===ru?e.push(t):"object"==typeof n&&null!==n&&(n?.items?e.push(t,"{","items","{",su(n.items),"}","}"):e.push(t,"{",su(n),"}"))}),e.join(" ")}function au(t,e){const n=t=>t&&"object"==typeof t;for(const i in t)({}).hasOwnProperty.call(t,i)&&({}.hasOwnProperty.call(e,i)&&n(e[i])?au(t[i],e[i]):e[i]=t[i]);return e}function cu(t,e,n){const i=t.models[e],r=ou(t,e,n??function(t){const{fields:e}=t,n=Object.values(e).map(({type:t,name:e})=>{if("string"==typeof t)return e;if("object"==typeof t){if("string"==typeof t?.enum)return e;if("string"==typeof t?.nonModel)return`${e}.*`}}).filter(Boolean),i=_c(t);return Array.from(new Set(n.concat(i)))}(i));return su(r)}function uu(t,e,n,i,r){const{name:o,pluralName:s,fields:a,primaryKeyInfo:{isCustomPrimaryKey:c,primaryKeyFieldName:u,sortKeyFieldNames:h},attributes:l}=e,d=o.charAt(0).toUpperCase()+o.slice(1),f=s.charAt(0).toUpperCase()+s.slice(1),{operationPrefix:p,usePlural:w}=eu[n],{selectionSet:y}=i||{};let m,g,v,b,A;if(p)m=`${p}${w?f:d}`;else{if(!r)throw new Error("Error generating GraphQL Document - invalid operation name");{const{queryField:t,pk:e,sk:n=[]}=r;m=t;let i={};if(1===n.length){const[t]=n,e="string"==typeof a[t].type?a[t].type:"String",r=Wc[e];i={[t]:`Model${r}KeyConditionInput`}}else if(n.length>1){const e=Hc(n),r=l?.find(e=>e?.properties?.queryField===t)?.properties?.name;i={[e]:`Model${Kc(o)}${Kc(r)}CompositeKeyConditionInput`}}g={[e]:`${{}.hasOwnProperty.call(a[e].type,"enum")?a[e].type.enum:a[e].type}!`,...i}}}const E=cu(t,o,y),I={[u]:`${a[u].type}!`},S={},T=t=>{if(0===h.length)return{};if("get"===t)return h.reduce((e,n)=>{const i=a[n].type;return"get"===t&&(e[n]=`${i}!`),e},{});if(1===h.length){const[t]=h,e="string"==typeof a[t].type?a[t].type:"String",n=Wc[e];return{[t]:`Model${n}KeyConditionInput`}}{const t=Hc(h);return{[t]:`Model${Kc(o)}PrimaryCompositeKeyConditionInput`}}};switch(c&&(Object.assign(I,T("get")),Object.assign(S,{[u]:`${a[u].type}`,sortDirection:"ModelSortDirection"},T("list"))),n){case"CREATE":case"UPDATE":case"DELETE":A??(A={input:`${p.charAt(0).toLocaleUpperCase()+p.slice(1)}${d}Input!`}),v??(v="mutation");case"GET":A??(A=I),b??(b=E);case"LIST":A??(A={...S,filter:`Model${d}FilterInput`,limit:"Int",nextToken:"String"}),v??(v="query"),b??(b=`items { ${E} } nextToken __typename`);case"INDEX_QUERY":A??(A={...g,filter:`Model${d}FilterInput`,sortDirection:"ModelSortDirection",limit:"Int",nextToken:"String"}),v??(v="query"),b??(b=`items { ${E} } nextToken __typename`);case"ONCREATE":case"ONUPDATE":case"ONDELETE":A??(A={filter:`ModelSubscription${d}FilterInput`}),v??(v="subscription"),b??(b=E);break;default:throw new Error("Internal error: Attempted to generate graphql document for observeQuery. Please report this error.")}return`${v}${A?`(${Object.entries(A).map(([t,e])=>`$${t}: ${e}`)})`:""} { ${m}${A?`(${Object.keys(A).map(t=>`${t}: $${t}`)})`:""} { ${b} } }`}function hu(t,e,n,i,r){const{fields:o,primaryKeyInfo:{isCustomPrimaryKey:s,primaryKeyFieldName:a,sortKeyFieldNames:c}}=t,u=c?.length&&Hc(c);let h={};switch(e){case"CREATE":h={input:n?lu(n,t,i):{}};break;case"UPDATE":h={input:n?Object.fromEntries(Object.entries(lu(n,t,i)).filter(([e])=>o[e]?!o[e].isReadOnly:!_c(t).includes(e))):{}};break;case"GET":case"DELETE":n&&(h=s?[a,...c].reduce((t,e)=>(t[e]=n[e],t),{}):{[a]:n[a]}),"DELETE"===e&&(h={input:h});break;case"LIST":n?.filter&&(h.filter=n.filter),n?.sortDirection&&(h.sortDirection=n.sortDirection),n&&n[a]&&(h[a]=n[a]),u&&n&&n[u]&&(h[u]=n[u]),n?.nextToken&&(h.nextToken=n.nextToken),n?.limit&&(h.limit=n.limit);break;case"INDEX_QUERY":{const{pk:t,sk:e=[]}=r,i=e?.length&&Hc(e);h[t]=n[t],i&&n&&n[i]&&(h[i]=n[i]),n?.filter&&(h.filter=n.filter),n?.sortDirection&&(h.sortDirection=n.sortDirection),n?.nextToken&&(h.nextToken=n.nextToken),n?.limit&&(h.limit=n.limit);break}case"ONCREATE":case"ONUPDATE":case"ONDELETE":n?.filter&&(h={filter:n.filter});break;case"OBSERVEQUERY":throw new Error("Internal error: Attempted to build variables for observeQuery. Please report this error.");default:throw new Error(`Unhandled operation case: ${e}`)}return h}function lu(t,e,n){const{fields:i}=e,r={};return Object.entries(t).forEach(([t,e])=>{const o=i[t]?.type,s=o?.model;if(s){const o=i[t]?.association,a=n.models[s].primaryKeyInfo;if(o?.connectionType===Gc){const t=o;t.targetNames.forEach((n,i)=>{const o=t.associatedWith[i];r[n]=e[o]})}o?.connectionType===Yc&&o.targetNames.forEach((t,n)=>{if(0===n){const n=a.primaryKeyFieldName;r[t]=e[n]}else{const i=a.sortKeyFieldNames[n-1];r[t]=e[i]}})}else r[t]=e}),r}function du(t,e,n={}){const i=e(t);return{authMode:n.authMode||i.authMode,authToken:n.authToken||i.authToken}}function fu(t,e,n){let i=e(t).headers||{};return n&&(i=n),i}function pu(t){if(t?.errors)return{...t,data:[]};throw t}function wu(t){if(t.errors)return{...t,data:null};throw t}const yu=Symbol("INTERNAL_USER_AGENT_OVERRIDE");var mu;!function(t){t.CreateConversation="1",t.GetConversation="2",t.ListConversations="3",t.DeleteConversation="4",t.SendMessage="5",t.ListMessages="6",t.OnStreamEvent="7",t.Generation="8",t.UpdateConversation="9"}(mu||(mu={}));const gu=t=>({category:"ai",action:t});function vu(t){return t?{[yu]:t}:void 0}function bu(t,e,n,i,r,o,s){const a=void 0!==i.arguments;return(...c)=>{const u=c[c.length-1];let h,l;if(r){if(!(t=>"symbol"==typeof t?.token?.value)(c[0]))throw new Error(`Invalid first argument passed to ${i.name}. Expected contextSpec`);h=c[0]}return a&&(l=r?c[1]:c[0]),"subscription"===n?function(t,e,n,i,r,o,s){const{name:a}=n,c=du(t,i,o),u=fu(t,i,o?.headers),h=Eu(n),l=Iu(n),d=Su(e,n),f=Au(n.type,"model")?n.type.model:void 0,p=`\n    ${"subscription".toLocaleLowerCase()}${h} {\n      ${a}${l} ${d}\n    }\n  `,w=Tu(n,r),y=vu(s);return t.graphql({...c,query:p,variables:w,...y},u).pipe(On(n=>{const[i]=Object.keys(n.data),r=n.data[i],[o]=f?tu(t,f,[r],e,c.authMode,c.authToken):[r];return o}))}(t,e,i,o,l,u,s):function(t,e,n,i,r,o,s,a,c){return Qc(async u=>{const{name:h}=i,l=du(t,r,s),d=fu(t,r,s?.headers),f=Eu(i),p=Iu(i),w=Su(e,i),y=Au(i.type,"model")?i.type.model:void 0,m=`\n    ${n.toLocaleLowerCase()}${f} {\n      ${h}${p} ${w}\n    }\n  `,g=Tu(i,o),v=vu(c);try{const n=Vc(a?t.graphql(a,{...l,query:m,variables:g},d):t.graphql({...l,query:m,variables:g,...v},d),u),{data:i,extensions:r}=await n;if(i){const[n]=Object.keys(i),o=Array.isArray(i[n]),s=o?i[n].filter(t=>t):i[n],c=y?tu(t,y,o?s:[s],e,l.authMode,l.authToken,!!a):s;return{data:!o&&Array.isArray(c)?c.shift():c,extensions:r}}return{data:null,extensions:r}}catch(b){const{data:n,errors:i}=b;if(n&&0!==Object.keys(n).length&&i){const[r]=Object.keys(n),o=Array.isArray(n[r]),s=o?n[r].filter(t=>t):n[r];if(s){const n=y?tu(t,y,o?s:[s],e,l.authMode,l.authToken,!!a):s;return{data:!o&&Array.isArray(n)?n.shift():n,errors:i}}return wu(b)}return wu(b)}})}(t,e,n,i,o,l,u,h,s)}}function Au(t,e){return"string"==typeof t[e]}function Eu(t){if(void 0===t.arguments)return"";const e=Object.entries(t.arguments).map(([t,e])=>{const n=function({type:t,isRequired:e}){const n=e?"!":"";return function(t){return t instanceof Object&&"enum"in t}(t)?`${t.enum}${n}`:function(t){return t instanceof Object&&"input"in t}(t)?`${t.input}${n}`:`${t}${n}`}(e);return`$${t}: ${e.isArray?`[${n}]${e.isArrayNullable?"":"!"}`:n}`}).join(", ");return e.length>0?`(${e})`:""}function Iu(t){if(void 0===t.arguments)return"";const e=Object.keys(t.arguments).map(t=>`${t}: $${t}`).join(", ");return e.length>0?`(${e})`:""}function Su(t,e){if(Au(e,"type")||Au(e.type,"enum"))return"";if(Au(e.type,"nonModel")){const n=t.nonModels[e.type.nonModel];return`{${su(nu(n,t))}}`}return Au(e.type,"model")?`{${cu(t,e.type.model)}}`:""}function Tu(t,e={}){const n={};if(void 0===t.arguments)return n;for(const i of Object.values(t.arguments))if(void 0!==e[i.name])n[i.name]=e[i.name];else if(i.isRequired)throw new Error(`${t.name} requires arguments '${i.name}'`);return n}const Nu={queries:"query",mutations:"mutation",subscriptions:"subscription"};function Ou(t,e,n,i){if(!e)return{};const r=e.modelIntrospection;if(!r)return{};const o=r[n];if(!o)return{};const s={},a=null===i(t).amplify;for(const c of Object.values(o))s[c.name]=bu(t,r,Nu[n],c,a,i);return s}function ku(t,e,n,i,r,o=!1,s){return o?(o,a,c)=>Cu(t,e,n,a,c,i,r,o,s):(o,a)=>Cu(t,e,n,o,a,i,r,void 0,s)}function Cu(t,e,n,i,r,o,s,a,c){return Qc(async u=>{const{name:h}=n,l=uu(e,n,o,r),d=hu(n,o,i,e),f=du(t,s,r),p=fu(t,s,r?.headers),w=vu(c);try{const n=Vc(a?t.graphql(a,{...f,query:l,variables:d},p):t.graphql({...f,query:l,variables:d,...w},p),u),{data:i,extensions:o}=await n;if(i){const[n]=Object.keys(i),s=Zc(e,h,i[n]);if(null===s)return{data:null,extensions:o};if(r?.selectionSet)return{data:s,extensions:o};{const[n]=tu(t,h,[s],e,f.authMode,f.authToken,!!a);return{data:n,extensions:o}}}return{data:null,extensions:o}}catch(y){const{data:n,errors:i}=y;if(n&&0!==Object.keys(n).length&&i){const[o]=Object.keys(n),s=Zc(e,h,n[o]);if(s){if(r?.selectionSet)return{data:s,errors:i};{const[n]=tu(t,h,[s],e,f.authMode,f.authToken,!!a);return{data:n,errors:i}}}return wu(y)}return wu(y)}})}function Mu(t,e,n,i,r=!1,o){return r?(r,s)=>xu(t,e,n,i,s,r,o):r=>xu(t,e,n,i,r,void 0,o)}function xu(t,e,n,i,r,o,s){return Qc(async a=>{const{name:c}=n,u=uu(e,n,"LIST",r),h=hu(n,"LIST",r,e),l=du(t,i,r),d=fu(t,i,r?.headers),f=vu(s);try{const n=Vc(o?t.graphql(o,{...l,query:u,variables:h},d):t.graphql({...l,query:u,variables:h,...f},d),a),{data:i,extensions:s}=await n;if(void 0!==i){const[n]=Object.keys(i);if(i[n].items){const a=i[n].items.map(t=>Zc(e,c,t));return r?.selectionSet?{data:a,nextToken:i[n].nextToken,extensions:s}:{data:tu(t,c,a,e,l.authMode,l.authToken,!!o),nextToken:i[n].nextToken,extensions:s}}return{data:i[n],nextToken:i[n].nextToken,extensions:s}}}catch(p){const{data:n,errors:i}=p;if(null!=n&&0!==Object.keys(n).length&&i){const[s]=Object.keys(n);if(n[s]?.items){const a=n[s].items.map(t=>Zc(e,c,t));return a?r?.selectionSet?{data:a,nextToken:n[s]?.nextToken,errors:i}:{data:tu(t,c,a,e,l.authMode,l.authToken,!!o),nextToken:n[s]?.nextToken,errors:i}:{data:n[s],nextToken:n[s]?.nextToken,errors:i}}return pu(p)}return pu(p)}})}const Du={},Ru=new Array(64);for(let $h=0,tl="A".charCodeAt(0),el="Z".charCodeAt(0);$h+tl<=el;$h++){const t=String.fromCharCode($h+tl);Du[t]=$h,Ru[$h]=t}for(let $h=0,tl="a".charCodeAt(0),el="z".charCodeAt(0);$h+tl<=el;$h++){const t=String.fromCharCode($h+tl),e=$h+26;Du[t]=e,Ru[e]=t}for(let $h=0;$h<10;$h++){Du[$h.toString(10)]=$h+52;const t=$h.toString(10),e=$h+52;Du[t]=e,Ru[e]=t}Du["+"]=62,Ru[62]="+",Du["/"]=63,Ru[63]="/";const Pu=t=>{let e=t.length/4*3;"=="===t.slice(-2)?e-=2:"="===t.slice(-1)&&e--;const n=new ArrayBuffer(e),i=new DataView(n);for(let r=0;r<t.length;r+=4){let e=0,n=0;for(let i=r,a=r+3;i<=a;i++)if("="!==t[i]){if(!(t[i]in Du))throw new TypeError(`Invalid character ${t[i]} in base64 string.`);e|=Du[t[i]]<<6*(a-i),n+=6}else e>>=6;const o=r/4*3;e>>=n%8;const s=Math.floor(n/8);for(let t=0;t<s;t++){const n=8*(s-t-1);i.setUint8(o+t,(e&255<<n)>>n)}}return new Uint8Array(n)};function ju(t){let e;e="string"==typeof t?(t=>(new TextEncoder).encode(t))(t):t;const n="object"==typeof e&&"number"==typeof e.length,i="object"==typeof e&&"number"==typeof e.byteOffset&&"number"==typeof e.byteLength;if(!n&&!i)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let r="";for(let o=0;o<e.length;o+=3){let t=0,n=0;for(let r=o,s=Math.min(o+3,e.length);r<s;r++)t|=e[r]<<8*(s-r-1),n+=8;const i=Math.ceil(n/6);t<<=6*i-n;for(let e=1;e<=i;e++){const n=6*(i-e);r+=Ru[(t&63<<n)>>n]}r+="==".slice(0,4-i)}return r}const Uu=t=>t.map(t=>t.image?Lu(t):t.document?qu(t):t.toolUse?Bu(t):t.toolResult?zu(t):_u(t)),Lu=({image:t})=>({image:{...t,source:{...t.source,bytes:Pu(t.source.bytes)}}}),qu=({document:t})=>({document:{...t,source:{...t.source,bytes:Pu(t.source.bytes)}}}),Bu=({toolUse:t})=>({toolUse:{...t,input:JSON.parse(t.input)}}),zu=({toolResult:t})=>({toolResult:{toolUseId:t.toolUseId,content:t.content.map(t=>t.image?Lu(t):t.json?(({json:t})=>({json:JSON.parse(t)}))(t):_u(t))}}),_u=t=>Object.fromEntries(Object.entries(t).filter(([t,e])=>null!==e)),Fu=({content:t,createdAt:e,id:n,conversationId:i,role:r})=>({content:Uu(t??[]),conversationId:i,createdAt:e,id:n,role:r}),Ku=(t,e,n,i,r)=>async o=>{const s=Mu(t,e,i,r,!1,gu(mu.ListMessages)),{data:a,nextToken:c,errors:u}=await s({...o,filter:{conversationId:{eq:n}}});return{data:a.map(t=>Fu(t)),nextToken:c,errors:u}},Qu=t=>{if(t)return{...t,input:JSON.parse(t.input)}},Ju=(t,e,n,i,r)=>o=>{const{conversations:s}=e;if(!s)return{};const a=s[i].message.subscribe;return bu(t,e,"subscription",a,!1,r,gu(mu.OnStreamEvent))({conversationId:n}).subscribe(t=>{const{next:e,error:n}=(({id:t,conversationId:e,associatedUserMessageId:n,contentBlockIndex:i,contentBlockDoneAtIndex:r,contentBlockDeltaIndex:o,contentBlockText:s,contentBlockToolUse:a,stopReason:c,errors:u})=>{return u?{error:{id:t,conversationId:e,associatedUserMessageId:n,errors:u}}:{next:(h={id:t,conversationId:e,associatedUserMessageId:n,contentBlockIndex:i,contentBlockDoneAtIndex:r,contentBlockDeltaIndex:o,text:s,toolUse:Qu(a),stopReason:c},Object.fromEntries(Object.entries(h).filter(([t,e])=>null!==e)))};var h})(t);n&&o.error(n),e&&o.next(e)})},Vu=t=>JSON.stringify(t),Gu=t=>t.map(t=>t.image?Wu(t):t.document?Hu(t):t.toolResult?Zu(t):t),Yu=({tools:t})=>({tools:Object.entries(t).map(([t,e])=>({toolSpec:{name:t,description:e.description,inputSchema:{json:JSON.stringify(e.inputSchema.json)}}}))}),Wu=({image:t})=>({image:{...t,source:{...t.source,bytes:ju(t.source.bytes)}}}),Hu=({document:t})=>({document:{...t,source:{...t.source,bytes:ju(t.source.bytes)}}}),Zu=({toolResult:t})=>({toolResult:{...t,content:t.content.map(t=>t.image?Wu(t):t.json?(({json:t})=>({json:JSON.stringify(t)}))(t):t)}}),Xu=(t,e,n,i,r)=>async o=>{const{conversations:s}=e;if(!s)return{};const a="string"==typeof o?{content:[{text:o}]}:o,{content:c,aiContext:u,toolConfiguration:h}=a,l=s[i].message.send,d=bu(t,e,"mutation",l,!1,r,gu(mu.SendMessage)),{data:f,errors:p}=await d({conversationId:n,content:Gu(c),...u&&{aiContext:Vu(u)},...h&&{toolConfiguration:Yu(h)}});return{data:f?Fu(f):f,errors:p}},$u=(t,e,n,i,r,o,s,a,c,u)=>{if(!n)throw new Error(`An error occurred converting a ${o} conversation: Missing ID`);return{id:n,createdAt:i,updatedAt:r,metadata:c,name:u,onStreamEvent:Ju(t,e,n,o,a),sendMessage:Xu(t,e,n,o,a),listMessages:Ku(t,e,n,s,a)}},th=(t,e,n,i,r,o)=>async s=>{const{name:a,metadata:c}=s??{},u=JSON.stringify(c),h=ku(t,e,i,"CREATE",o,!1,gu(mu.CreateConversation)),{data:l,errors:d}=await h({name:a,metadata:u});return{data:$u(t,e,l?.id,l?.createdAt,l?.updatedAt,n,r,o,l?.metadata,l?.name),errors:d}},eh=(t,e,n,i,r,o)=>async({id:s})=>{const a=ku(t,e,i,"GET",o,!1,gu(mu.GetConversation)),{data:c,errors:u}=await a({id:s});return{data:c?$u(t,e,c.id,c.createdAt,c.updatedAt,n,r,o,c?.metadata,c?.name):c,errors:u}},nh=(t,e,n,i,r,o)=>async s=>{const a=Mu(t,e,i,o,!1,gu(mu.ListConversations)),{data:c,nextToken:u,errors:h}=await a(s);return{data:c.map(i=>$u(t,e,i.id,i.createdAt,i.updatedAt,n,r,o,i?.metadata,i?.name)),nextToken:u,errors:h}},ih=(t,e,n,i,r,o)=>async({id:s})=>{const a=ku(t,e,i,"DELETE",o,!1,gu(mu.DeleteConversation)),{data:c,errors:u}=await a({id:s});return{data:c?$u(t,e,c?.id,c?.createdAt,c?.updatedAt,n,r,o,c?.metadata,c?.name):c,errors:u}},rh=(t,e,n,i,r,o)=>async({id:s,metadata:a,name:c})=>{const u=JSON.stringify(a),h=ku(t,e,i,"UPDATE",o,!1,gu(mu.UpdateConversation)),{data:l,errors:d}=await h({id:s,metadata:u,name:c});return{data:l?$u(t,e,l?.id,l?.createdAt,l?.updatedAt,n,r,o,l?.metadata,l?.name):l,errors:d}};function oh(t,e,n,i,r,o=!1){return o?(o,s,a)=>sh(t,e,n,i,r,{...s,...a},o):(o,s)=>sh(t,e,n,i,r,{...o,...s})}function sh(t,e,n,i,r,o,s){return Qc(async a=>{const{name:c}=n,u=uu(e,n,"INDEX_QUERY",o,i),h=hu(n,"INDEX_QUERY",o,e,i),l=du(t,r,o),d=n=>tu(t,c,n,e,l.authMode,l.authToken,!!s);try{const n=fu(t,r,o?.headers),i=[{...l,query:u,variables:h},n];void 0!==s&&i.unshift(s);const f=Vc(t.graphql(...i),a),p=await f;if(void 0!==p.data)return function(t,e,n,i,r){const{data:o,extensions:s}=n,[a]=Object.keys(o);if(o[a].items){const n=o[a].items.map(n=>Zc(t,e,n));return{data:i?n:r(n),nextToken:o[a].nextToken,extensions:s}}return{data:o[a],nextToken:o[a].nextToken,extensions:s}}(e,c,p,o?.selectionSet,d)}catch(f){const{data:t,errors:n}=f;if(null!=t&&0!==Object.keys(t).length&&n){const[n]=Object.keys(t);if(t[n]?.items){const i=t[n]?.items.map(t=>Zc(e,c,t));if(i)return{data:o?.selectionSet?i:d(i),nextToken:t[n]?.nextToken}}return{data:t[n],nextToken:t[n]?.nextToken}}return pu(f)}})}function ah(t,e,n,i,r){const{name:o}=n;return s=>{const a=uu(e,n,i,s),c=hu(n,i,s,e),u=du(t,r,s),h=fu(t,r,s?.headers);return t.graphql({...u,query:a,variables:c},h).pipe(On(n=>{const[i]=Object.keys(n.data),r=n.data[i],a=Zc(e,o,r);if(null===a)return null;if(s?.selectionSet)return a;{const[n]=tu(t,o,[a],e,u.authMode,u.authToken);return n}}))}}function ch(t,e,n){const i=Object.fromEntries(n.map(e=>[e,t[e]]));for(let r=0;r<e.length;r++)if(Object.keys(i).every(t=>i[t]===e[r][t]))return r;return-1}function uh(t,e){const{name:n}=e;return i=>new ln(r=>{const o=[],s=[];let a=(...t)=>s.push(...t);const c=t[n].onCreate(i).subscribe({next(t){a({item:t,type:"create"})},error(t){r.error({type:"onCreate",error:t})}}),u=t[n].onUpdate(i).subscribe({next(t){a({item:t,type:"update"})},error(t){r.error({type:"onUpdate",error:t})}}),h=t[n].onDelete(i).subscribe({next(t){a({item:t,type:"delete"})},error(t){r.error({type:"onDelete",error:t})}});function l(t){for(const e of t){const t=ch(e.item,o,d);switch(e.type){case"create":t<0&&o.push(e.item);break;case"update":t>=0&&(o[t]=e.item);break;case"delete":t>=0&&o.splice(t,1)}}r.next({items:o,isSynced:!0})}const d=function(t){const{primaryKeyFieldName:e,sortKeyFieldNames:n}=t.primaryKeyInfo;return[e,...n]}(e);return(async()=>{let e=!0,c=null;for(;!r.closed&&(e||c);){e=!1;const{data:a,errors:u,nextToken:h}=await t[n].list({...i,nextToken:c});c=h,o.push(...a);const l=0===s.length&&null==c;if(r.next({items:o,isSynced:l}),Array.isArray(u))for(const t of u)r.error(t)}s.length>0&&l(s),a=(...t)=>(l(t),o.length)})(),()=>{c.unsubscribe(),u.unsubscribe(),h.unsubscribe()}})}const hh=t=>"key"===t.type&&t.properties?.name&&t.properties?.queryField&&t.properties?.fields.length>0,lh=t=>{const e=t.attributes?.filter(hh).map(t=>{const e=t.properties.queryField,[n,...i]=t.properties.fields;return{queryField:e,pk:n,sk:i}});return e||[]},dh=(t,e)=>{const n=t.models[e].attributes?.find(t=>"model"===t.type),i={queries:["list","get","observeQuery"],mutations:["create","update","delete"],subscriptions:["onCreate","onUpdate","onDelete"]},r=[];if(!n)return eu;if(n.properties)for(const[s,a]of Object.entries(n.properties))s in i&&(null===a?r.push(...i[s]):a instanceof Object&&r.push(...Object.keys(a)));r.includes("list")&&r.push("observeQuery");const o=r.map(t=>t.toUpperCase());return Object.fromEntries(Object.entries(eu).filter(([t])=>!o.includes(t)))};function fh(t,e,n){return function(t){const e=t.cancel.bind(t);t.cancel=function(t,n){const i=new Set;let r=t;for(;r&&Jc.has(r);){if(i.has(r))throw new Error("A cycle was detected in the modeled graphql cancellation chain. This is a bug. Please report it!");i.add(r),r=Jc.get(r)}return e(r,n)}}(t),t.models=function(t,e,n){const i={},r=e.modelIntrospection;if(!r)return{};const o=["ONCREATE","ONUPDATE","ONDELETE"];for(const s of Object.values(r.models)){const{name:e}=s;i[e]={};const a=dh(r,e);Object.entries(a).forEach(([a,{operationPrefix:c}])=>{const u=a;"LIST"===u?i[e][c]=Mu(t,r,s,n):o.includes(u)?i[e][c]=ah(t,r,s,u,n):i[e][c]="OBSERVEQUERY"===u?uh(i,s):ku(t,r,s,u,n)});const c=lh(s);for(const o of c)i[e][o.queryField]=oh(t,r,s,o,n)}return i}(t,e,n),t.enums=(t=>{const e=t.modelIntrospection;if(!e)return{};const n={};for(const[i,r]of Object.entries(e.enums))n[r.name]={values:()=>r.values};return n})(e),t.queries=function(t,e,n){return Ou(t,e,"queries",n)}(t,e,n),t.mutations=function(t,e,n){return Ou(t,e,"mutations",n)}(t,e,n),t.subscriptions=function(t,e,n){return Ou(t,e,"subscriptions",n)}(t,e,n),t.conversations=function(t,e,n){const i=e?.modelIntrospection;if(!i?.conversations)return{};const r={};for(const{name:o,conversation:s,message:a,models:c,nonModels:u,enums:h}of Object.values(i.conversations)){const e=c[s.modelName],l=c[a.modelName];if(!e||!l)return{};const d={...i,models:{...i.models,...c},nonModels:{...i.nonModels,...u},enums:{...i.enums,...h}};r[o]={update:rh(t,d,o,e,l,n),create:th(t,d,o,e,l,n),get:eh(t,d,o,e,l,n),delete:ih(t,d,o,e,l,n),list:nh(t,d,o,e,l,n)}}return r}(t,e,n),t.generations=function(t,e,n){const i=e?.modelIntrospection;if(!i?.generations)return{};const r={};for(const o of Object.values(i.generations))r[o.name]=bu(t,i,"query",o,!1,n,gu(mu.Generation));return r}(t,e,n),t}const ph=new class extends zc{getModuleName(){return"GraphQLAPI"}graphql(t,e,n){const i={category:ce.API,action:pe.GraphQl};if(function(t){return yu in t}(e)){const{[yu]:r,...o}=e;return super.graphql(t,o,n,{...i,...r})}return super.graphql(t,e,n,{...i})}isCancelError(t){return super.isCancelError(t)}cancel(t,e){return super.cancel(t,e)}};function wh(t,e){const n=xc(this),i=n.endpoint,r=n.authMode,o=n.apiKey;if(t.authMode=t.authMode||r,t.apiKey=t.apiKey??o,t.authToken=t.authToken||n.authToken,i&&"apiKey"===t.authMode&&!t.apiKey)throw new Error("graphql() requires an explicit `apiKey` for a custom `endpoint` when `authMode = 'apiKey'`.");const s=e||n.headers;return ph.graphql(n.amplify,{...t,endpoint:i},s)}function yh(t,e){return ph.cancel(t,e)}function mh(t){return ph.isCancelError(t)}function gh(t){return void 0!==t}const vh=new Proxy({},{get(){throw new Error("Client could not be generated. This is likely due to `Amplify.configure()` not being called prior to `generateClient()` or because the configuration passed to `Amplify.configure()` is missing GraphQL provider configuration.")}});function bh(t){return function(t){const e={[Tc]:t.amplify,[Nc]:t.authMode,[Oc]:t.authToken,[kc]:"apiKey"in t?t.apiKey:void 0,[Mc]:"endpoint"in t?t.endpoint:void 0,[Cc]:t.headers,graphql:wh,cancel:yh,isCancelError:mh,models:vh,enums:vh,queries:vh,mutations:vh,subscriptions:vh},n=t.amplify.getConfig().API?.GraphQL;if(e[Mc]){if(!e[Nc])throw new Error("generateClient() requires an explicit `authMode` when `endpoint` is provided.");if("apiKey"===e[Nc]&&!e[kc])throw new Error("generateClient() requires an explicit `apiKey` when `endpoint` is provided and `authMode = 'apiKey'`.")}return e[Mc]||(gh(n)?fh(e,n,xc):(i=e,jt.listen("core",t=>{if("configure"!==t.payload.event)return;const e=t.payload.data.API?.GraphQL;gh(e)&&fh(i,e,xc)}))),e;var i}({amplify:Rn})}const Ah=(t,e)=>t?"identityPool"===t?"iam":t:e,Eh=t=>{if(Array.isArray(t))return t.map((t,e)=>{const n=JSON.stringify(t);if(void 0===n)throw new Error(`Event must be a valid JSON value. Received ${t} at index ${e}`);return n});const e=JSON.stringify(t);if(void 0===e)throw new Error(`Event must be a valid JSON value. Received ${t}`);return[e]},Ih="AWSAppSyncEventsProvider",Sh=new class extends dc{constructor(){super({providerName:Ih,wsProtocolName:"aws-appsync-event-ws",connectUri:""}),this.allowNoSubscriptions=!0}getProviderName(){return Ih}async connect(t){return super.connect(t)}subscribe(t,e){return super.subscribe(t,e).pipe()}async publish(t,e){return super.publish(t,e)}closeIfNoActiveSubscription(){this.bt()}async lt({options:t,subscriptionId:e,customUserAgentDetails:n,additionalCustomHeaders:i,libraryConfigHeaders:r,publish:o}){const{appSyncGraphqlEndpoint:s,authenticationType:a,query:c,apiKey:u,region:h,variables:l}=t,d={channel:c,events:void 0!==l?Eh(l):void 0},f=JSON.stringify(d),p={...await hc({apiKey:u,appSyncGraphqlEndpoint:s,authenticationType:a,payload:f,canonicalUri:"",region:h,additionalCustomHeaders:i}),...r,...i,[Tt]:Ge(n)},w={id:e,channel:c,events:void 0!==l?Eh(l):void 0,authorization:{...p},payload:{events:void 0!==l?Eh(l):void 0,channel:c,extensions:{authorization:{...p}}},type:o?Ua.EVENT_PUBLISH:Ua.EVENT_SUBSCRIBE};return JSON.stringify(w)}It(t){this.logger.debug(`subscription message from AWS AppSync Events: ${t.data}`);const{id:e="",event:n,type:i}=JSON.parse(String(t.data)),{observer:r=null,query:o="",variables:s={}}=this.subscriptionObserverMap.get(e)||{};if(this.logger.debug({id:e,observer:r,query:o,variables:s}),i===Ua.DATA&&n){const t=JSON.parse(n);return r?r.next({id:e,type:i,event:t}):this.logger.debug(`observer not found for id: ${e}`),[!0,{id:e,type:i,payload:t}]}return[!1,{id:e,type:i,payload:n}]}vt(t){return{id:t,type:Ua.EVENT_STOP}}Nt(t){const{connectionTimeoutMs:e=Ka}=t;return e}kt(t){const{errors:[{errorType:e="",errorCode:n=0}={}]=[]}=t;return{errorCode:n,errorType:e}}},Th=new Set;async function Nh(t,e){const n=(()=>{const t=Rn.getConfig(),e=t.API?.Events;if(!e)throw new Error("Amplify configuration is missing. Have you called Amplify.configure()?");const n=Ah(e.defaultAuthMode,"apiKey");return{appSyncGraphqlEndpoint:e.endpoint,region:e.region,authenticationType:n,apiKey:e.apiKey}})();n.authenticationType=Ah(e?.authMode,n.authenticationType),n.apiKey=e?.apiKey||n.apiKey,n.authToken=e?.authToken||n.authToken,await Sh.connect(n);const i=Wn();let r;return Th.add(i),{subscribe:(e,o)=>{if(!Th.has(i))throw new Error("Channel is closed");const s={...n,query:t};return s.authenticationType=Ah(o?.authMode,s.authenticationType),s.apiKey=o?.apiKey||s.apiKey,s.authToken=o?.authToken||s.authToken,r=Sh.subscribe(s).subscribe(e),r},close:async()=>{r&&r.unsubscribe(),Th.delete(i),setTimeout(()=>{0===Th.size&&Sh.closeIfNoActiveSubscription()},1e3)},publish:async(e,r)=>{if(!Th.has(i))throw new Error("Channel is closed");const o={...n,query:t,variables:e};return o.authenticationType=Ah(r?.authMode,o.authenticationType),o.apiKey=r?.apiKey||o.apiKey,o.authToken=r?.authToken||o.authToken,Sh.publish(o)}}}function Oh(t,e,n,i){var r,o=arguments.length,s=o<3?e:i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}"function"==typeof SuppressedError&&SuppressedError;let kh=class extends c{};Oh([c.field(x)],kh.prototype,"payer",void 0),Oh([c.field(x)],kh.prototype,"receiver",void 0),Oh([c.field(R)],kh.prototype,"bytes",void 0),kh=Oh([c.type("buyrambytes")],kh);let Ch=class extends c{};function Mh(t,e){if(!t.actions.every(t=>e.actions.some(e=>t.equals(e))))throw new Error("The modified transaction does not contain all the original actions.");const n=e.actions.filter(e=>!t.actions.some(t=>e.equals(t)));for(const i of n)if(i.authorization.find(e=>e.actor===t.actions[0].authorization[0].actor)){if(i.account.equals("eosio.token")&&i.name.equals("transfer")){const t=Ch.from(i.data);if(t.to.equals("txfee.wam")&&t.memo.startsWith("WAX fee for"))continue}if(i.account.equals("eosio")&&i.name.equals("buyrambytes")&&kh.from(i.data).receiver.equals(t.actions[0].authorization[0].actor))continue;throw new Error("The modified transaction contains one or more actions that are not allowed.")}}function xh(t,e,n){const i=setInterval(()=>{e.closed&&(clearInterval(i),n(t("error.closed",{default:"The Cloud Wallet was closed before the request was completed"})))},500);return i}function Dh(t,e,n){const i=new URL(t.origin).origin===e.origin,r=t.source===n;return!("object"!=typeof t.data||!i||!r)}function Rh(t,e){const n=navigator.userAgent.toLowerCase();if(-1===n.search("chrome")&&n.search("safari")>=0)return!1;try{if(!e)return!1;const n=e.whitelist,{actions:i}=t.resolvedTransaction;return i.every(t=>n.find(e=>{if(t.account.equals(e.contract))return!(t.account.equals("eosio.token")&&t.name&&t.name.equals("transfer"))||e.recipients.includes(String(t.data.to))}))}catch(i){}return!1}async function Ph(t,e,n,i=3e5){const r=new URL(e),o=await window.open(r,"WalletPluginCloudWalletPopup","height=800,width=600");if(!o)throw new Error(t("error.popup",{default:"Unable to open the popup window. Check your browser settings and try again."}));return new Promise((s,a)=>{const c=xh(t,o,a),u=t=>{if(!Dh(t,r,o))return;o?.postMessage({feeFallback:!0,freeBandwidth:!0,startTime:Math.floor((new Date).getTime()),transaction:n.serializedTransaction,type:"TRANSACTION"},String(e));const i=t=>{if(Dh(t,r,o))try{s(t.data)}catch(e){a(e)}finally{window.removeEventListener("message",u),window.removeEventListener("message",i),clearTimeout(h),clearInterval(c)}};window.addEventListener("message",i)},h=setTimeout(()=>{o.close(),window.removeEventListener("message",u),a(new Error(t("error.timeout",{default:"The request has timed out after {{timeout}} seconds. Please try again.",timeout:i/1e3})))},i);window.addEventListener("message",u)})}Oh([c.field(x)],Ch.prototype,"from",void 0),Oh([c.field(x)],Ch.prototype,"to",void 0),Oh([c.field(P)],Ch.prototype,"quantity",void 0),Oh([c.field("string")],Ch.prototype,"memo",void 0),Ch=Oh([c.type("transfer")],Ch);var jh={en:{connecting:"Connecting to Cloud Wallet",error:{closed:"The Cloud Wallet was closed before the request was completed",endpoint:"Login Endpoint Error {{status}} - {{statusText}}",exception:"Signing exception occurred: {{exception}}",popup:"Unable to open the popup window. Check your browser settings and try again.",response:"The Cloud Wallet failed to respond.",timeout:"The request has timed out after {{timeout}} seconds. Please try again."},login:{popup:"Login with the Cloud Wallet popup window"},transact:{popup:"Sign with the Cloud Wallet popup window"}},ko:{connecting:"\ud074\ub77c\uc6b0\ub4dc \uc9c0\uac11\uc5d0 \uc5f0\uacb0",error:{closed:"\uc694\uccad\uc774 \uc644\ub8cc\ub418\uae30 \uc804\uc5d0 \ud074\ub77c\uc6b0\ub4dc \uc9c0\uac11\uc774 \ub2eb\ud614\uc2b5\ub2c8\ub2e4.",endpoint:"\ub85c\uadf8\uc778 \uc5d4\ub4dc\ud3ec\uc778\ud2b8 \uc624\ub958 {{status}} - {{statusText}}",exception:"\uc11c\uba85 \uc608\uc678\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: {{exception}}",popup:"\ud31d\uc5c5 \ucc3d\uc744 \uc5f4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ube0c\ub77c\uc6b0\uc800 \uc124\uc815\uc744 \ud655\uc778\ud558\uace0 \ub2e4\uc2dc \uc2dc\ub3c4\ud558\uc2ed\uc2dc\uc624.",response:"\ud074\ub77c\uc6b0\ub4dc \uc9c0\uac11\uc774 \uc751\ub2f5\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.",timeout:"{{timeout}}\ucd08 \ud6c4\uc5d0 \uc694\uccad \uc2dc\uac04\uc774 \ucd08\uacfc\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud558\uc2ed\uc2dc\uc624."},login:{popup:"\ud074\ub77c\uc6b0\ub4dc \uc9c0\uac11 \ud31d\uc5c5 \ucc3d\uc73c\ub85c \ub85c\uadf8\uc778"},transact:{popup:"\ud074\ub77c\uc6b0\ub4dc \uc9c0\uac11 \ud31d\uc5c5 \ucc3d\uc73c\ub85c \uc11c\uba85"}},"zh-Hans":{connecting:"\u6b63\u5728\u8fde\u63a5\u5230\u4e91\u94b1\u5305",error:{closed:"\u4e91\u94b1\u5305\u5728\u8bf7\u6c42\u5b8c\u6210\u4e4b\u524d\u5df2\u5173\u95ed",endpoint:"\u767b\u5f55\u7aef\u70b9\u9519\u8bef {{status}} - {{statusText}}",exception:"\u53d1\u751f\u7b7e\u540d\u5f02\u5e38\uff1a{{exception}}",popup:"\u65e0\u6cd5\u6253\u5f00\u5f39\u51fa\u7a97\u53e3\u3002\u8bf7\u68c0\u67e5\u60a8\u7684\u6d4f\u89c8\u5668\u8bbe\u7f6e\uff0c\u7136\u540e\u91cd\u8bd5\u3002",response:"\u4e91\u94b1\u5305\u54cd\u5e94\u5931\u8d25\u3002",timeout:"\u8bf7\u6c42\u5728 {{timeout}} \u79d2\u540e\u8d85\u65f6\u3002\u8bf7\u91cd\u8bd5\u3002"},login:{popup:"\u4f7f\u7528\u4e91\u94b1\u5305\u5f39\u51fa\u7a97\u53e3\u767b\u5f55"},transact:{popup:"\u4f7f\u7528\u4e91\u94b1\u5305\u5f39\u51fa\u7a97\u53e3\u7b7e\u540d"}},"zh-Hant":{connecting:"\u6b63\u5728\u9023\u63a5\u5230\u96f2\u9322\u5305",error:{closed:"\u96f2\u9322\u5305\u5728\u8acb\u6c42\u5b8c\u6210\u4e4b\u524d\u5df2\u95dc\u9589",endpoint:"\u767b\u9304\u7aef\u9ede\u932f\u8aa4 {{status}} - {{statusText}}",exception:"\u767c\u751f\u7c3d\u540d\u7570\u5e38\uff1a{{exception}}",popup:"\u7121\u6cd5\u6253\u958b\u5f48\u51fa\u7a97\u53e3\u3002 \u8acb\u6aa2\u67e5\u60a8\u7684\u700f\u89bd\u5668\u8a2d\u7f6e\uff0c\u7136\u5f8c\u91cd\u8a66\u3002",response:"\u96f2\u9322\u5305\u97ff\u61c9\u5931\u6557",timeout:"\u8acb\u6c42\u5728 {{timeout}} \u79d2\u5f8c\u8d85\u6642\u3002\u8acb\u91cd\u8a66\u3002"},login:{popup:"\u4f7f\u7528\u96f2\u9322\u5305\u5f48\u51fa\u7a97\u53e3\u767b\u9304"},transact:{popup:"\u4f7f\u7528\u96f2\u9322\u5305\u5f48\u51fa\u7a97\u53e3\u7c3d\u540d"}}};function Uh(){if(!Lh()||!zh()){if(/CriOS/.test(navigator.userAgent))return"googlechrome://";if(/FxiOS/.test(navigator.userAgent))return"firefox:://";if(Lh()&&qh())return"brave://";if(Lh()){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let e=window.location.href.split("#")[0]+"#";for(let n=0;n<8;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}return Bh()&&/Firefox/i.test(navigator.userAgent)?"android-app://org.mozilla.firefox":Bh()&&/Edg/.test(navigator.userAgent)?"android-app://com.microsoft.emmx":Bh()&&(/OPR/.test(navigator.userAgent)||/Opera/.test(navigator.userAgent))?"android-app://com.opera.browser":Bh()&&qh()?"android-app://com.brave.browser":Bh()&&(/wv/.test(navigator.userAgent)||/Android/.test(navigator.userAgent)&&zh())?"android-app://webview":Bh()&&/Chrome\/[.0-9]* Mobile/i.test(navigator.userAgent)?"android-app://com.android.chrome":window.location.href}}function Lh(){return/iP(ad|od|hone)/i.test(navigator.userAgent)}function qh(){return navigator.brave&&"function"==typeof navigator.brave.isBrave}function Bh(){return/Android/.test(navigator.userAgent)}function zh(){return!!window.ReactNativeWebView}class _h{static generateTransactionMessage(t,e,n){return{id:St(),type:"requesting",actions:t,namedParams:e,dapp:n}}static isValidTransactionMessage(t){return t&&"object"==typeof t&&"string"==typeof t.id&&"string"==typeof t.type&&["requesting","approved","rejected","error","ready","not-ready"].includes(t.type)}static isMatchingTransaction(t,e){return t.id===e}static processTransactionResult(t){return t?.signatures?t.signatures.map(t=>{try{return/^[A-Za-z0-9+/=]+$/.test(t)?atob(t):t}catch(e){return t}}):[]}}class Fh{constructor(t){rs.configure({API:{GraphQL:{endpoint:t.graphQLRelayEndpoint,region:t.graphQLRelayRegion,defaultAuthMode:"lambda"},Events:{endpoint:t.eventRelayEndpoint,region:t.eventRelayRegion,defaultAuthMode:"lambda"}}})}}class Kh{constructor(){this.client=bh()}async publishToChannel(t,e,n){await this.client.graphql({query:"\n    mutation Publish2channel($data: AWSJSON!, $name: String!) {\n        publish2channel(data: $data, name: $name) {\n            data\n            name\n            __typename\n        }\n    }\n",variables:{name:t,data:JSON.stringify(e)},authToken:n})}async subscribeToChannel(t,e,n,i,r=18e4){try{const i=(await Nh(t)).subscribe({next:t=>{this.handleMessage(t,e,n)},error:t=>{n(t)}}),o=setTimeout(()=>{i.unsubscribe(),n(new Error("Subscription timeout after "+r+"ms"))},r);return{unsubscribe:()=>{clearTimeout(o),i.unsubscribe()}}}catch(o){return n(o),{unsubscribe:()=>{}}}}}class Qh extends Kh{static parseAuthHeaders(t,e,n){if("string"==typeof e)try{e.startsWith("{")&&(e=JSON.parse(e))}catch(i){}return JSON.stringify({account:t,token:e,svc:n,mode:"dapp"})}handleMessage(t,e,n){_h.isValidTransactionMessage(t)?e(t):n(new Error("Invalid transaction message received"))}generateChannelName(t,e){return`transact:${t}:${e||""}`}generateTransactionMessage(t,e,n){return _h.generateTransactionMessage(t,e,n)}processTransactionResult(t){if("approved"!==t.type)throw new Error("Transaction not approved");return{signatures:_h.processTransactionResult(t.result)}}}class Jh extends Error{constructor(t=""){super(t),this.name="ActivationFetchError"}}class Vh extends Error{constructor(t=""){super(t),this.name="ActivationExpiredError"}}class Gh extends Error{constructor(t=""){super(t),this.name="ActivationCancelledError"}}class Yh extends Error{constructor(t=""){super(t),this.name="ActivationDeepLinkError"}}class Wh extends Error{constructor(t=""){super(t),this.name="InvalidCodeError"}}class Hh{constructor(t){if(this.mobileAppConnectConfig=t,this.isCanceled=!1,this.connectedType=null,this.WAX_SCHEME_DEEPLINK="mycloudwallet",this.activationEndpoint="https://login-api.mycloudwallet.com",!t||!t.dappInfo)throw new Error("MobileAppConnect is required");this.mobileAppConnectConfig=t,this.dAppInfo=t.dappInfo,this.origin=location.origin,new Fh({graphQLRelayEndpoint:"https://queue-relay.mycloudwallet.com/graphql",graphQLRelayRegion:"us-east-2",eventRelayEndpoint:"https://direct-connect-api.mycloudwallet.com/event",eventRelayRegion:"eu-east-2"}),this.transactionSyncHandler=new Qh,this.uuid=St();const e=localStorage.getItem("connectedType");"direct"!==e&&"remote"!==e&&"web"!==e||(this.connectedType=e)}getConnectedType(){return this.connectedType}async showAppConnectPrompt(t){const e=[];let n,i,r,o;const s=new Promise((t,e)=>{i=t,r=e});this.mobileAppConnectConfig.remote&&(n=await this.fetchActivationInfo(this.getActivationPayload(t)),e.unshift({type:"qr",data:n.qrCodeContent})),this.mobileAppConnectConfig.direct&&e.unshift({type:"button",data:{label:"Open in My Cloud Wallet",variant:"primary",onClick:async()=>{try{const e=await this.directConnect(t);i(e)}catch(e){r(e)}}}}),t.ui.prompt({title:"Connect with My Cloud Wallet!!!",body:"Connect My Cloud Wallet on your mobile device",elements:e}).catch(t=>{r(t),this.isCanceled=!0}),n&&(o=this.checkActivation(t,n));try{return o?await Promise.race([s,o]):await s}catch(a){throw a instanceof Gh&&(this.isCanceled=!0,this.connectedType=null),a}}remoteTransact(t,e,n){if(!this.user?.account||!this.user?.token)throw new Error("User not authenticated");const i=this.transactionSyncHandler.generateChannelName(this.origin,this.user.account),r=this.transactionSyncHandler.generateTransactionMessage(t.request.getRawActions(),n,this.origin),o=Qh.parseAuthHeaders(this.user.account,this.user.token,this.origin);return new Promise((t,e)=>{let n;const s=r;return this.transactionSyncHandler.publishToChannel(i,r,o).catch(t=>{e(t)}),n=this.transactionSyncHandler.subscribeToChannel(i,n=>{if(n.id===s.id)switch(n.type){case"requesting":default:break;case"approved":try{const e=this.transactionSyncHandler.processTransactionResult(n);t(e)}catch(i){e(i)}break;case"rejected":e(new Error("User rejected the transaction"));break;case"error":e(new Error(n.result))}},t=>{e(t)},o),{unsubscribe:()=>{n?.unsubscribe()}}})}async signTransaction(t,e,n){if(!this.connectedType||"web"===this.connectedType)throw new Error("Activation_NotActivated!!!");return"direct"===this.connectedType?await this.directTransact(t,e,n):this.remoteTransact(t,e,n)}async checkActivation(t,e){try{const n=await this.checkIfActivated(e,this.origin);if(n)return this.user=n,this.connectedType="remote",t.ui.onLoginComplete(),this.user}catch(n){throw n}}async fetchActivationInfo({origin:t,dAppName:e,logourl:n,schema:i,description:r}){try{if(!this.mobileAppConnectConfig.remote)throw new Error("mobileAppConnectConfig remote is required");const o=await this.mobileAppConnectConfig.remote.getDappSingleUsedToken(),s=await fetch(`${this.activationEndpoint}/v1/wcw/dapp/code`,{method:"POST",headers:{"Content-Type":"application/json","X-dapp-sdk-sut":o.toString(),"X-dapp-sdk-client-id":this.mobileAppConnectConfig.remote.dappClientId.toString()},body:JSON.stringify({dapp:t,dAppName:e,logourl:n,schema:i,description:r,origin:t})});if(!s.ok)throw new Error(`Network response was not ok: ${s.status}`);return await s.json()}catch(o){throw new Jh}}async checkIfActivated(t,e){return new Promise((n,i)=>{const r=setInterval(async()=>{const o=Math.floor(Date.now()/1e3);(this.user||this.isCanceled)&&clearInterval(r),o>t.expire&&(clearInterval(r),i(new Vh));try{const o=await fetch(`${this.activationEndpoint}/v1/wcw/dapp/code/check?dapp=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:t.code})});if(422===o.status)return void i(new Wh);if(!o.ok)throw new Error(`Network response was not ok: ${o.status}`);const s=await o.json();202===o.status||200===o.status&&(clearInterval(r),n(s))}catch(s){clearInterval(r),i(s)}},5e3)})}getActivationPayload(t){return{origin:this.origin,dAppName:`${this.dAppInfo.name||t.appName}`,logourl:this.dAppInfo.logoUrl,schema:this.dAppInfo.schema,description:this.dAppInfo.description}}openDeepLinkWithFallback(t){return new Promise((e,n)=>{const i=setTimeout(()=>{n(new Yh("App likely not installed, fallback triggered."))},4e3),r=()=>{clearTimeout(i),e()};window.addEventListener("pagehide",r,{once:!0}),window.addEventListener("blur",r,{once:!0}),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&r()},{once:!0}),window.location.href=t})}async directConnect(t){const e=btoa(Uh()||""),n=encodeURIComponent("1234567890");this.uuid=St();const i=new URLSearchParams({schema:this.dAppInfo.schema||"none",dapp:this.dAppInfo.name||t.appName||"",origin:this.origin,logourl:this.dAppInfo.logoUrl||"",description:this.dAppInfo.description||"",antelope:"antelope-1",callbackHttp:e,uuid:this.uuid,deviceHash:n}),r=t.arbitrary.nonce;if(r){const t=btoa(r);i.set("n",t)}const o=`${this.WAX_SCHEME_DEEPLINK}://connect?${i.toString()}`;try{await this.openDeepLinkWithFallback(o)}catch(s){throw s}return new Promise(async(t,e)=>{const n=setTimeout(()=>{this.isCanceled=!0,o(),e(new Error("Connection timeout"))},18e4);let i,r;const o=()=>{clearTimeout(n),clearInterval(r),i?.unsubscribe?.()},s=async()=>{try{const n=await Nh(`/device-connect/${this.uuid}`,{authToken:this.uuid});i=n.subscribe({next:i=>{if("data"===i?.type&&i?.event?.accountName)return this.user={account:i.event.accountName,keys:[],isTemp:!1,createData:{},token:"",proof:i.event.proof},this.connectedType="direct",localStorage.setItem("connectedType",this.connectedType),o(),t(this.user),void n.close();if(i?.event?.error){const t="ConnectRejected"===i.event.error?"User rejected the connection":"Direct connection error";return o(),e(new Gh(t)),void n.close()}return o(),e(new Error("Invalid account")),void n.close()},error:t=>{o(),e(t),n.close()}})}catch(n){o(),e(n)}};r=setInterval(()=>{document.hasFocus()&&s()},500)})}async directTransact(t,e,n){if(!this.connectedType||"remote"===this.connectedType)throw new Error("Invalid connection type, expect direct connection");const i=Array.from(t.serializedTransaction),r=btoa(JSON.stringify(i)),o=btoa(Uh()||""),a=encodeURIComponent("1234567890"),c=St(),u=new URLSearchParams({transaction:r,schema:this.dAppInfo.schema||"none",callbackHttp:o,redirect:"true",deviceHash:a,uuid:c,broadcast:"false"}),h=`${this.WAX_SCHEME_DEEPLINK}://transact?${u.toString()}`;try{await this.openDeepLinkWithFallback(h)}catch(l){throw l}return new Promise(async(e,n)=>{const i=setTimeout(()=>{a(),n(new Error("Transaction timeout"))},18e4);let r,o;const a=()=>{clearTimeout(i),clearInterval(o),r?.unsubscribe?.()};o=setInterval(()=>{document.hasFocus()&&(async()=>{try{const i=await Nh(`/device-transact/${c}`,{authToken:c});r=i.subscribe({next:r=>{if("data"===r?.type&&r?.event?.signatures){const n={signatures:function(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");for(;e.length%4!=0;)e+="=";try{const t=atob(e);return JSON.parse(t)}catch(l){throw new Error("Invalid signature format")}}(r.event.signatures)};if(r.event.serializedTransaction){const e=s.decode({data:r.event.serializedTransaction,type:D});e.equals(t.transaction)||Mh(t.transaction,e)}return e(n),void i.close()}if(r?.event?.error){const t="TransactionDeclined"===r.event.error?"User rejected the transaction":r.event.error;return a(),n(new Error(t)),void i.close()}return a(),n(new Error("Transaction unknown error")),void i.close()},error:t=>{alert("subscription error::"+t?.message),a(),n(t),i.close()}})}catch(i){return a(),void n(i)}})()},350)})}async cleanup(){this.connectedType=null,this.user=void 0,this.isCanceled=!1,localStorage.removeItem("connectedType"),await async function(){await Sh.close()}()}}class Zh extends f{constructor(t){super(),this.id="cloudwallet",this.translations=jh,this.config={requiresChainSelect:!1,requiresPermissionSelect:!1,supportedChains:["1064487b3cd1a897ce03ae5b6a865651747e2e152090f99c1d19d44e01aea5a4"]},this.metadata=p.from({name:"Cloud Wallet",description:"",logo:"data:image/png;base64,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",homepage:"https://www.mycloudwallet.com",download:"https://www.mycloudwallet.com"}),this.url="https://www.mycloudwallet.com",this.autoUrl="https://idm-api.mycloudwallet.com/v1/accounts/auto-accept",this.loginTimeout=3e5,this.allowTemp=!1,this.mobileAppConnect=null,this.options=t,t?.supportedChains&&(this.config.supportedChains=t.supportedChains),t?.url&&(this.url=t.url),t?.autoUrl&&(this.autoUrl=t.autoUrl),t?.loginTimeout&&(this.loginTimeout=t.loginTimeout),t?.allowTemp&&(this.allowTemp=t.allowTemp),t?.mobileAppConnectConfig&&(this.mobileAppConnect=new Hh(t.mobileAppConnectConfig))}login(t){let e;return e=Bh()||navigator.userAgent.includes("iPhone")||navigator.userAgent.includes("iPad")?this.showLoginPrompt(t):this.waxLogin(t),k(e,t=>{throw t})}async showLoginPrompt(t){let e,n;const i=new Promise((t,i)=>{e=t,n=i});let r,o;const s=new Promise((t,e)=>{r=t,o=e}),a=[];return this.mobileAppConnect instanceof Hh&&a.push({type:"button",data:{label:"Open My Cloud Wallet app",variant:"primary",onClick:async()=>{try{if(!(this.mobileAppConnect instanceof Hh))throw new Error("Mobile App Connect is not initialized");if(!t.chain)throw new Error("A chain must be selected to login with.");const n=await this.mobileAppConnect.directConnect(t),i=n?.proof?.data?.signature,r=i&&C.from({chainId:h.from(t?.chain?.id),scope:x.from(t.appName||""),expiration:M.from((new Date).getTime()/1e3+3600),signer:g.from({actor:`${n?.account}`,permission:"active"}),signature:d.from(i)});this.data.identityProof=r,this.data.proof=n?.proof,this.data.isTempAccount=n?.isTemp,this.data.whitelist=n?.whitelistedContracts,e({chain:t.chain.id,permissionLevel:g.from({actor:`${n?.account}`,permission:"active"}),identityProof:r})}catch(i){n(i)}}}}),a.push({type:"button",data:{label:"Login with web",variant:"primary",onClick:async()=>{try{const e=await this.waxLogin(t);r(e)}catch(e){o(e)}}}}),t.ui.prompt({title:"Connect to My Cloud Wallet",body:"Connect My Cloud Wallet on your mobile device",elements:a}).catch(t=>{n(t)}),await Promise.race([i,s])}async waxLogin(t){if(!t.chain)throw new Error("A chain must be selected to login with.");const e=t.ui.getTranslate(this.id);let n;const i=new URLSearchParams,r=t.arbitrary.nonce;if(r){const t=btoa(r);i.set("n",t)}i.set("returnTemp",this.allowTemp.toString());try{const t=new URL("/login",this.autoUrl);t.search=i.toString(),n=await async function(t,e){const n=new URL(e),i=await fetch(String(n),{credentials:"include",method:"get",headers:{"X-Referer-Url":location.origin}});if(!i.ok)throw new Error(t("error.endpoint",{default:"Login Endpoint Error {{status}} - {{statusText}}",status:i.status,statusText:i.statusText}));return await i.json()}(e,t.toString())}catch(a){const t=new URL("/cloud-wallet/login",this.url);t.search=i.toString(),n=await async function(t,e,n=3e5){const i=new URL(e),r=await window.open(i,"WalletPluginCloudWalletPopup","height=800,width=600");if(!r)throw new Error(t("error.popup",{default:"Unable to open the popup window. Check your browser settings and try again."}));return new Promise((e,o)=>{const s=xh(t,r,o),c=t=>{if(Dh(t,i,r))try{e(t.data)}catch(a){o(a)}finally{window.removeEventListener("message",c),clearTimeout(u),clearInterval(s)}},u=setTimeout(()=>{r.close(),window.removeEventListener("message",c),o(new Error(t("error.timeout",{default:"The request has timed out after {{timeout}} seconds. Please try again.",timeout:n/1e3})))},n);window.addEventListener("message",c)})}(e,t.toString())}if(!n)throw new Error(e("login.error.response",{default:"Cloud Wallet failed to respond"}));if(!n.verified)throw new Error(e("error.closed",{default:"Cloud Wallet closed before the login was completed"}));this.data.whitelist=n.whitelistedContracts,this.data.isTempAccount=n.isTemp,this.data.proof=n?.proof;const o=n?.proof?.data?.signature,s=o&&C.from({chainId:h.from(t?.chain?.id),scope:x.from(t.appName||""),expiration:M.from((new Date).getTime()/1e3+3600),signer:g.from({actor:n.userAccount,permission:"active"}),signature:d.from(n?.proof?.data?.signature)});return this.data.identityProof=s,new Promise(e=>{if(!t.chain)throw new Error("A chain must be selected to login with.");localStorage.setItem("connectedType","web"),e({chain:t.chain.id,permissionLevel:g.from({actor:n.userAccount,permission:"active"}),identityProof:s})})}sign(t,e){let n;const i=localStorage.getItem("connectedType");return n=this.mobileAppConnect instanceof Hh&&("direct"===i||"remote"===i)?this.mobileSign(t,e):this.waxSign(t,e),k(n,t=>{throw t})}async mobileSign(t,e){if(!e.ui)throw new Error("A UserInterface must be defined to sign transactions.");if(!(this.mobileAppConnect instanceof Hh))throw new Error("MobileAppConnect is not initialized");let n;const i=new Promise((t,e)=>{n=e});e.ui.getTranslate(this.id);const r=t.transaction.expiration.toDate(),o=new Date,s=Math.floor(r.getTime()-o.getTime());let a=k(new Promise(()=>{}));Rh(t,this.data)||(a=e.ui.prompt({title:"Sign",body:"Please complete the transaction using the Cloud Wallet app.",optional:!0,elements:[{type:"countdown",data:r.toISOString()}]}),a.catch(t=>{clearTimeout(c),n(t)}));const c=setTimeout(()=>{if(!e.ui)throw new Error("No UI defined");a.cancel("The request expired, please try again.")},s),u=this.mobileAppConnect.signTransaction(t,e,{});return Promise.race([i,u])}async waxSign(t,e){if(!e.ui)throw new Error("A UserInterface must be defined to sign transactions.");const n=e.ui.getTranslate(this.id),i=t.transaction.expiration.toDate(),r=new Date,o=Math.floor(i.getTime()-r.getTime()),a=this.getWalletResponse(t,e,n,o);let c=k(new Promise(()=>{}));Rh(t,this.data)||(c=e.ui.prompt({title:"Sign",body:"Please complete the transaction using the Cloud Wallet popup window.",optional:!0,elements:[{type:"countdown",data:i.toISOString()}]}),c.catch(()=>clearTimeout(u)));const u=setTimeout(()=>{if(!e.ui)throw new Error("No UI defined");c.cancel("The request expired, please try again.")},o),d=await Promise.race([a,c]).finally(()=>{clearTimeout(u),c.cancel()});if("serializedTransaction"in d){const n={signatures:d.signatures};if(d.serializedTransaction){const i=s.decode({data:d.serializedTransaction,type:D});if(!i.equals(t.transaction)){Mh(t.transaction,i);const r=await l.create({transaction:i},e.esrOptions);n.resolved=new m(r,e.permissionLevel,D.from(i),s.objectify(D.from(i)),h.from(e.chain.id))}}return new Promise(t=>t(n))}throw new Error("The Cloud Wallet failed to respond")}async getWalletResponse(t,e,n,i=3e5){let r;if(!e.ui)throw new Error("The Cloud Wallet requires a UI to sign transactions.");if(Rh(t,this.data))try{r=await async function(t,e,n){const i=new URL(e),r=new AbortController;setTimeout(()=>r.abort(),5e3);const o=await fetch(i,{body:JSON.stringify({feeFallback:!0,freeBandwidth:!0,transaction:n.serializedTransaction}),credentials:"include",headers:{"Content-Type":"application/json"},method:"POST",signal:r.signal});if(!o.ok)throw new Error(t("error.endpoint",{default:"Login Endpoint Error {{status}} - {{statusText}}",status:o.status,statusText:o.statusText}));const s=await o.json();if(s.processed&&s.processed.except)throw new Error(t("error.exception",{default:"Signing exception occurred: {{exception}}",exception:JSON.stringify(s)}));return s}(n,`${this.autoUrl}/signing`,t)}catch(o){r=await Ph(n,`${this.url}/cloud-wallet/signing/`,t,i)}else r=await Ph(n,`${this.url}/cloud-wallet/signing/`,t,i);if(!r)throw new Error(n("login.error.response",{default:"Cloud Wallet failed to respond"}));if(!r.verified)throw new Error(n("error.closed",{default:"The Cloud Wallet was closed before the request was completed"}));return this.data.whitelist=r.whitelistedContracts,r}async logout(t){this.mobileAppConnect&&await this.mobileAppConnect.cleanup()}}class Xh extends f{constructor(){super(),this.id="wombat",this.translations={},this.config={requiresChainSelect:!0,requiresPermissionSelect:!1},this.metadata=p.from({name:"Wombat",description:"",logo:"data:image/png;base64,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",homepage:"https://www.wombat.app/",download:"https://www.wombat.app/the-app"})}async loadScatterProtocol(){let t;if("undefined"!=typeof window&&(t=await U(()=>import("./protocol-scatter.m-DMkKft5o.js"),__vite__mapDeps([0,1,2]))),!t)throw new Error("Scatter protocol is not available in this environment");return t}async login(t){return(await this.loadScatterProtocol()).handleLogin(t)}async logout(t){return(await this.loadScatterProtocol()).handleLogout(t)}async sign(t,e){return(await this.loadScatterProtocol()).handleSignatureRequest(t,e)}}export{vt as W,U as _,Zh as a,Xh as b};
