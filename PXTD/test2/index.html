<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PxTD - Tower Defense</title>
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <div id="game-wrapper">
    <!-- Start Screen -->
    <div id="start-screen">
      <h1>PxTD</h1>
      <div class="subtitle">A next-generation tower defense experience</div>
      <button id="start-game-btn">Start Game</button>
    </div>

    <div id="container">
      <div id="left-sidebar">
        <div class="sidebar-section">
          <h1>PxTD</h1>
          <div id="connect-wax-btn" class="sidebar-btn">Connect Wax</div>
          <div id="logout-wax-btn" style="display:none" class="sidebar-btn">Logout Wax</div>
        </div>
        <div class="sidebar-section">
          <h2 class="expandable">Menu <span class="toggle-icon">+</span></h2>
          <div class="expandable-content">
            <div id="randomize-map-btn" class="sidebar-btn">Randomize Map</div>
            <div id="range-toggle-btn" class="sidebar-btn">Range: Off</div>
            <div id="speed-toggle-btn" class="sidebar-btn">Speed: Normal</div>
            <div id="auto-run-btn" class="sidebar-btn">Auto-Run: Off</div>
            <div id="auto-build-btn" class="sidebar-btn">Auto-Build: Off</div>
            <div id="graphics-toggle-btn" class="sidebar-btn">Graphics: High</div>
            <div class="sidebar-btn game-mode-btn" data-mode="easy">Easy Mode (-75%)</div>
            <div class="sidebar-btn game-mode-btn" data-mode="newbie">Newbie Mode (-25%)</div>
            <div class="sidebar-btn game-mode-btn" data-mode="normal">Normal Mode (0%)</div>
            <div class="sidebar-btn game-mode-btn" data-mode="hard">Hard Mode (+10%)</div>
            <div class="sidebar-btn game-mode-btn" data-mode="pro">Pro Mode (+25%)</div>
          </div>
        </div>
        <div class="sidebar-section">
          <h2 class="expandable">Game Modes (Coming Soon!) <span class="toggle-icon">+</span></h2>
          <div class="expandable-content">
            <div id="classicMode" class="sidebar-btn">Classic (FFA)</div>
            <div id="twitchMode" class="sidebar-btn">Streamer (Twitch)</div>
              <div id="rankedMode" class="sidebar-btn">Ranked (NFT)</div>
                <div id="chaosMode" class="sidebar-btn">Chaos (100x!)</div>
          </div>
        </div>
        <div class="sidebar-section">
  <h2 class="expandable">Leaderboard <span class="toggle-icon">+</span></h2>
  <div class="expandable-content">
    <div id="leaderboard" class="sidebar-btn">Classic</div>
      <div id="twichtLeaderboard" class="sidebar-btn">Streamers</div>
      <div id="rankedLeaderboard" class="sidebar-btn">Ranked</div>
        <div id="chaosLeaderboard" class="sidebar-btn">Chaos</div>
  </div>
</div>
        <div class="sidebar-section">
          <h2 class="expandable">Event Log <span class="toggle-icon">+</span></h2>
          <div class="expandable-content">
            <div id="event-log"></div>
          </div>
        </div>
        <div class="sidebar-section">
          <h2 class="expandable">Notifications <span class="toggle-icon">+</span></h2>
          <div class="expandable-content">
            <div id="notifications"></div>
          </div>
        </div>

        <div class="donate-section sidebar-section">
    <h2 class="expandable">Donate <span class="toggle-icon">+</span></h2>
    <div class="expandable-content">
    <p>Select token and amount:</p>
    <div>
        <label><input type="radio" name="token" value="WAX" checked> WAX</label>
        <label><input type="radio" name="token" value="PXJ"> PXJ</label>
        <label><input type="radio" name="token" value="WUF"> WUF</label>
    </div>
    <div>
        <input type="range" id="amount-slider">
        <div id="amount-display">1 </div>
    </div>
    <button id="donate-btn" class="sidebar-btn" disabled>Donate</button>
    <pre><code id="response">Transaction Response</code></pre>
</div>

</div>
      </div>

      <div id="center-column">
        <div id="top-stats-bar">
          <div class="resource-display" id="credits-display">
            <text id="credits">Credits: 1000</text>
          </div>
          <div class="resource-display" id="lives-display">
            <text id="lives">Lives: 50</text>
          </div>
          <div class="resource-display" id="wave-display">
            <text id="wave">Wave: 1</text>
          </div>
        </div>

        <svg id="game" viewBox="0 0 500 500" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg">
          <!-- Background with gradient -->
          <defs>
            <linearGradient id="gameBackground" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#0a1a2a;stop-opacity:1" />
              <stop offset="100%" style="stop-color:#1a2a3a;stop-opacity:1" />
            </linearGradient>

            <!-- Glow filter for elements -->
            <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur stdDeviation="2" result="blur" />
              <feComposite in="SourceGraphic" in2="blur" operator="over" />
            </filter>

            <!-- Path animation -->
            <linearGradient id="pathGradient" x1="0%" y1="0%" x2="150%" y2="0%">
              <stop offset="0%" style="stop-color:#00ffff;stop-opacity:0.8">
                <animate attributeName="offset" values="0;0.5;0" dur="3s" repeatCount="indefinite" />
              </stop>
              <stop offset="50%" style="stop-color:#00aaff;stop-opacity:0.4">
                <animate attributeName="offset" values="0.5;1;0.5" dur="3s" repeatCount="indefinite" />
              </stop>
              <stop offset="150%" style="stop-color:#00ffff;stop-opacity:0.8">
                <animate attributeName="offset" values="1.5;0.5;1" dur="3s" repeatCount="indefinite" />
              </stop>
            </linearGradient>
          </defs>

          <rect width="500" height="500" fill="url(#gameBackground)" />

          <!-- Grid -->
          <g id="grid" stroke="#2a4a5a" stroke-width="1" fill="none"></g>

          <!-- Path -->
          <polyline id="path" points="25,475 225,475 225,275 425,275 425,75 25,75" fill="none" stroke="url(#pathGradient)" stroke-width="10" stroke-opacity="0.8" stroke-linecap="round" stroke-linejoin="round">
          </polyline>

          <!-- Targeting Indicator -->
          <rect id="target-indicator" width="50" height="50" fill="none" stroke="#ffffff" stroke-width="2" stroke-opacity="0.5" opacity="0" rx="3" ry="3" />
        </svg>

        <!-- Add new wave progress bar container below the game SVG -->
        <div id="wave-progress-frame">
          <svg id="wave-progress-svg" viewBox="0 0 600 20" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg">
            <rect width="600" height="10" rx="5" ry="5" fill="rgba(0,0,0,0.5)" stroke="#00ffff" stroke-width="1" transform="translate(0, 5)" />
            <rect id="wave-progress-fill" width="0" height="10" rx="5" ry="5" fill="url(#pathGradient)" transform="translate(0, 5)" />
          </svg>
          <div id="start-wave-btn" class="sidebar-btn">Start Wave</div>
        </div>

      </div>

      <div id="right-sidebar">
        <div class="sidebar-section">
          <h2>Tower Selection</h2>
          <div class="tower-grid">
            <div id="grass-tower" class="sidebar-btn tower-btn" data-type="grass">Grass (50)</div>
            <div id="wood-tower" class="sidebar-btn tower-btn" data-type="wood">Wood (150)</div>
            <div id="gold-tower" class="sidebar-btn tower-btn" data-type="gold">Gold (200)</div>
            <div id="fire-tower" class="sidebar-btn tower-btn" data-type="fire">Fire (250)</div>
            <div id="ice-tower" class="sidebar-btn tower-btn" data-type="ice">Ice (300)</div>
            <div id="water-tower" class="sidebar-btn tower-btn" data-type="water">Water (450)</div>
            <div id="arcane-tower" class="sidebar-btn tower-btn" data-type="arcane">Arcane (600)</div>
            <div id="rock-tower" class="sidebar-btn tower-btn" data-type="rock">Rock (800)</div>
            <div id="lightning-tower" class="sidebar-btn tower-btn" data-type="lightning">Lightning (1000)</div>
          </div>
        </div>
        <div class="sidebar-section">
          <h2>Tower Upgrades</h2>
          <div id="grass-upgrade" class="sidebar-btn">Grass: Power Aura (Rank 0) (100)</div>
          <div id="wood-upgrade" class="sidebar-btn">Wood: Splinters (Rank 0) (150)</div>
          <div id="gold-upgrade" class="sidebar-btn">Gold: Earn Credits on Hit (Rank 0) (175)</div>
          <div id="fire-upgrade" class="sidebar-btn">Fire: DOT (Rank 0) (190)</div>
          <div id="ice-upgrade" class="sidebar-btn">Ice: Freeze (Rank 0) (50)</div>
          <div id="water-upgrade" class="sidebar-btn">Water: Splash (Rank 0) (250)</div>
          <div id="arcane-upgrade" class="sidebar-btn">Arcane: Chain (Rank 0) (400)</div>
          <div id="rock-upgrade" class="sidebar-btn">Rock: Stun (Rank 0) (500)</div>
          <div id="lightning-upgrade" class="sidebar-btn">Lightning: Shock Chain (Rank 0) (1000)</div>
        </div>

        <div class="sidebar-section">
  <h2>Global Upgrades</h2>
  <div id="speed-upgrade" class="sidebar-btn">Speed: Rank 0 (100)</div>
  <div id="damage-upgrade" class="sidebar-btn">Damage: Rank 0 (100)</div>
  <div id="range-upgrade" class="sidebar-btn">Range: Rank 0 (100)</div>
</div>
        <div class="sidebar-section">
          <h2>Interest Upgrade</h2>
          <div id="interest-upgrade" class="sidebar-btn">Interest: 1% (50)</div>
        </div>

        <div class="sidebar-section">
  <h2>Buy Lives</h2>
  <div id="buy-lives-btn" class="sidebar-btn">Buy Life (100)</div>
</div>

<div class="sidebar-section" style="display:none">
<h2>PXJourney Boosters (0 points):</h2>
<div id="PXJbooster-row" class="sidebar-row">
<div id="PXJbooster" class="sidebar-btn">Boost Damage (1pt)</div>
<div id="PXJbooster" class="sidebar-btn">Boost Attack Speed (1pt)</div>
<div id="PXJbooster" class="sidebar-btn">Boost Range (1pt)</div>
<div id="PXJbooster" class="sidebar-btn">Boost Interest (5pt)</div>
<div id="PXJbooster" class="sidebar-btn">Boost Wave Bonus (10pt)</div>
<div id="PXJbooster" class="sidebar-btn">Boost Kill Bonus (15pt)</div>
<div id="PXJbooster" class="sidebar-btn">Reduce Level Up Costs (10pt)</div>
</div>
</div>
      </div>

      <div id="mobile-menus">
        <div class="sidebar-section">
          <h2>Menu</h2>
          <div id="mobile-connect-wax-mobile-btn" class="sidebar-btn">Connect Wax</div>
          <div id="mobile-logout-wax-mobile-btn" class="sidebar-btn">Logout Wax</div>
          <div id="mobile-randomize-map-btn" class="sidebar-btn">Randomize Map</div>
          <div id="mobile-range-toggle-btn" class="sidebar-btn">Range: Off</div>
          <div id="mobile-speed-toggle-btn" class="sidebar-btn">Speed: Normal</div>
          <div id="mobile-auto-run-btn" class="sidebar-btn">Auto-Run: Off</div>
          <div class="sidebar-btn mobile-game-mode-btn" data-mode="easy">Easy Mode (-75%)</div>
          <div class="sidebar-btn mobile-game-mode-btn" data-mode="newbie">Newbie Mode (-25%)</div>
          <div class="sidebar-btn mobile-game-mode-btn" data-mode="normal">Normal Mode (0%)</div>
          <div class="sidebar-btn mobile-game-mode-btn" data-mode="hard">Hard Mode (+10%)</div>
          <div class="sidebar-btn mobile-game-mode-btn" data-mode="pro">Pro Mode (+25%)</div>
        </div>
        <div class="sidebar-section">
          <h2>Tower Selection</h2>
          <div class="tower-grid">
            <div id="mobile-grass-tower" class="sidebar-btn tower-btn" data-type="grass">Grass (100)</div>
            <div id="mobile-wood-tower" class="sidebar-btn tower-btn" data-type="wood">Wood (120)</div>
            <div id="mobile-gold-tower" class="sidebar-btn tower-btn" data-type="gold">Gold (150)</div>
            <div id="mobile-fire-tower" class="sidebar-btn tower-btn" data-type="fire">Fire (180)</div>
            <div id="mobile-ice-tower" class="sidebar-btn tower-btn" data-type="ice">Ice (200)</div>
            <div id="mobile-water-tower" class="sidebar-btn tower-btn" data-type="water">Water (220)</div>
            <div id="mobile-arcane-tower" class="sidebar-btn tower-btn" data-type="arcane">Arcane (250)</div>
            <div id="mobile-rock-tower" class="sidebar-btn tower-btn" data-type="rock">Rock (280)</div>
            <div id="mobile-lightning-tower" class="sidebar-btn tower-btn" data-type="lightning">Lightning (300)</div>
          </div>
        </div>
        <div class="sidebar-section">
          <h2>Tower Upgrades</h2>
          <div id="mobile-grass-upgrade" class="sidebar-btn">Grass: Healing (Rank 0) (50)</div>
          <div id="mobile-wood-upgrade" class="sidebar-btn">Wood: Splinters (Rank 0) (60)</div>
          <div id="mobile-gold-upgrade" class="sidebar-btn">Gold: Ricochet (Rank 0) (75)</div>
          <div id="mobile-fire-upgrade" class="sidebar-btn">Fire: Burn (Rank 0) (90)</div>
          <div id="mobile-ice-upgrade" class="sidebar-btn">Ice: Freeze (Rank 0) (100)</div>
          <div id="mobile-water-upgrade" class="sidebar-btn">Water: Splash (Rank 0) (110)</div>
          <div id="mobile-arcane-upgrade" class="sidebar-btn">Arcane: Chain (Rank 0) (125)</div>
          <div id="mobile-rock-upgrade" class="sidebar-btn">Rock: Stun (Rank 0) (140)</div>
          <div id="mobile-lightning-upgrade" class="sidebar-btn">Lightning: Shock (Rank 0) (150)</div>
        </div>
        <div class="sidebar-section">
          <h2>Event Log</h2>
          <div id="mobile-event-log"></div>
        </div>
        <div class="sidebar-section">
          <h2>Notifications</h2>
          <div id="mobile-notifications"></div>
        </div>
      </div>
    </div>
    <div id="game-over-screen">
      <h1>Game Over</h1>
      <div id="final-score">Total Credits: 0</div>
      <button onclick="location.reload()">Restart</button>
      <button id="share-btn">Share Score</button>
    </div>

    <div id="wax-user-modal" class="wax-modal" style="display: none;">
      <div class="wax-modal-content">
        <span class="wax-close">&times;</span>
        <h2>User Information</h2>
        <p id="wax-modal-user-info"></p>
        <div id="boosters-table-container">
          <h3>PXTD Ownership Boosters</h3>
          <table id="boosters-table">
            <thead>
              <tr>
                <th>Asset</th>
                <th>Bonus Effect</th>
                <th>Amount Held</th>
                <th>Total Effect Bonus</th>
              </tr>
            </thead>
            <tbody id="boosters-table-body">
              <!-- Rows will be populated dynamically -->
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Wave Announcement (hidden by default) -->
    <div id="wave-announcement" class="wave-announcement" style="display: none;">
      <h2>Wave 1</h2>
      <p>Prepare your defenses!</p>
    </div>
  </div>

  <!-- Add WharfKit and wallet plugins via CDN -->
  <script src="https://cdn.jsdelivr.net/npm/@wharfkit/session@1.3.0/dist/index.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@wharfkit/web-renderer@1.1.0/dist/index.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@wharfkit/wallet-plugin-anchor@1.1.1/dist/index.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@wharfkit/wallet-plugin-cloudwallet@1.1.1/dist/index.js"></script>

<script src="https://notify.waxsweden.org/static/assets/waxjs.js"></script>

  <script src="js/waxlogin.js"></script>
  <script src="js/config.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/enemy.js"></script>
  <script src="js/projectile.js"></script>
  <script src="js/tower.js"></script>
  <script src="js/ui-effects.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/game.js"></script>



  </body>
</html>
